require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) :
	(global.mapboxgl = factory());
}(this, (function () { 'use strict';

/* eslint-disable */

var shared, worker, mapboxgl;
// define gets called three times: one for each chunk. we rely on the order
// they're imported to know which is which
function define(_, chunk) {
if (!shared) {
    shared = chunk;
} else if (!worker) {
    worker = chunk;
} else {
    var workerBundleString = 'var sharedChunk = {}; (' + shared + ')(sharedChunk); (' + worker + ')(sharedChunk);'

    var sharedChunk = {};
    shared(sharedChunk);
    mapboxgl = chunk(sharedChunk);
    mapboxgl.workerUrl = window.URL.createObjectURL(new Blob([workerBundleString], { type: 'text/javascript' }));
}
}


define(["exports"],function(t){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}var i=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),a=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,o=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,s={now:i,frame:function(t){return a(t)},cancelFrame:function(t){return o(t)},getImageData:function(t){var e=self.document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};if(self.document){var u=self.document.createElement("img");u.onload=function(){s.supportsWebp=!0;},u.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=";}var l=p;function p(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n;}p.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},p.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},p.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},p.prototype.solveCurveX=function(t,e){var r,n,i,a,o;for(void 0===e&&(e=1e-6),i=t,o=0;o<8;o++){if(a=this.sampleCurveX(i)-t,Math.abs(a)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s;}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(a=this.sampleCurveX(i),Math.abs(a-t)<e)return i;t>a?r=i:n=i,i=.5*(n-r)+r;}return i},p.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var h=function(t,e,r){this.column=t,this.row=e,this.zoom=r;};h.prototype.clone=function(){return new h(this.column,this.row,this.zoom)},h.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},h.prototype.sub=function(t){return this.clone()._sub(t)},h.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},h.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this};var c=f;function f(t,e){this.x=t,this.y=e;}function y(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!y(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!y(t[n],e[n]))return!1;return!0}return t===e}function d(t,e,r,n){var i=new l(t,e,r,n);return function(t){return i.solve(t)}}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),a=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(t){return t instanceof f?t:Array.isArray(t)?new f(t[0],t[1]):t};var m=d(.25,.1,.25,1);function v(t,e,r){return Math.min(r,Math.max(e,t))}function g(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o];}return t}var x=1;function b(){return x++}function w(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e));});}function _(t,e){return-1!==t.indexOf(e,t.length-e.length)}function A(t,e,r){var n={};for(var i in t)n[i]=e.call(r||this,t[i],i,t);return n}function k(t,e,r){var n={};for(var i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function z(t){return Array.isArray(t)?t.map(z):"object"==typeof t&&t?A(t,z):t}var S={};function M(t){S[t]||("undefined"!=typeof console&&console.warn(t),S[t]=!0);}function B(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function V(t){for(var e=0,r=0,n=t.length,i=n-1,a=void 0,o=void 0;r<n;i=r++)a=t[r],e+=((o=t[i]).x-a.x)*(a.y+o.y);return e}var I={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(I);var C=function(t){function e(e,r,n){t.call(this,e),this.status=r,this.url=n,this.name=this.constructor.name,this.message=e;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function E(t){var e=new self.XMLHttpRequest;for(var r in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(r,t.headers[r]);return e.withCredentials="include"===t.credentials,e}var T=function(t,e){var r=E(t);return r.responseType="arraybuffer",r.onerror=function(){e(new Error(r.statusText));},r.onload=function(){var n=r.response;if(0===n.byteLength&&200===r.status)return e(new Error("http status 200 returned without content."));r.status>=200&&r.status<300&&r.response?e(null,{data:n,cacheControl:r.getResponseHeader("Cache-Control"),expires:r.getResponseHeader("Expires")}):e(new C(r.statusText,r.status,t.url));},r.send(),r};function P(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e));}function F(t,e,r){if(r&&r[t]){var n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1);}}var L=function(t,e){void 0===e&&(e={}),g(this,e),this.type=t;},O=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",g({error:e},r));}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(L),D=function(){};D.prototype.on=function(t,e){return this._listeners=this._listeners||{},P(t,e,this._listeners),this},D.prototype.off=function(t,e){return F(t,e,this._listeners),F(t,e,this._oneTimeListeners),this},D.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},P(t,e,this._oneTimeListeners),this},D.prototype.fire=function(t){"string"==typeof t&&(t=new L(t,arguments[1]||{}));var e=t.type;if(this.listens(e)){t.target=this;for(var r=0,n=this._listeners&&this._listeners[e]?this._listeners[e].slice():[];r<n.length;r+=1){n[r].call(this,t);}for(var i=0,a=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[];i<a.length;i+=1){var o=a[i];F(e,o,this._oneTimeListeners),o.call(this,t);}var s=this._eventedParent;s&&(g(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(t));}else t instanceof O&&console.error(t.error);return this},D.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},D.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var q={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"string",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},j=function(t,e,r,n){this.message=(t?t+": ":"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__);};function R(t){var e=t.key,r=t.value;return r?[new j(e,r,"constants have been deprecated as of v8")]:[]}function U(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o];}return t}function N(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Z(t){return Array.isArray(t)?t.map(Z):N(t)}var X=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),$=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,n=e;r<n.length;r+=1){var i=n[r],a=i[0],o=i[1];this.bindings[a]=o;}};$.prototype.concat=function(t){return new $(this,t)},$.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},$.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var J={kind:"null"},G={kind:"number"},H={kind:"string"},K={kind:"boolean"},Y={kind:"color"},W={kind:"object"},Q={kind:"value"},tt={kind:"collator"};function et(t,e){return{kind:"array",itemType:t,N:e}}function rt(t){if("array"===t.kind){var e=rt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var nt=[J,G,H,K,Y,W,et(Q)];function it(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&!it(t.itemType,e.itemType)&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=nt;r<n.length;r+=1){if(!it(n[r],e))return null}}return"Expected "+rt(t)+" but found "+rt(e)+" instead."}var at=n(function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function a(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function o(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var p=i.substr(0,u),h=i.substr(u+1,l-(u+1)).split(","),c=1;switch(p){case"rgba":if(4!==h.length)return null;c=o(h.pop());case"rgb":return 3!==h.length?null:[a(h[0]),a(h[1]),a(h[2]),c];case"hsla":if(4!==h.length)return null;c=o(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,y=o(h[1]),d=o(h[2]),m=d<=.5?d*(y+1):d+y-d*y,v=2*d-m;return[n(255*s(v,m,f+1/3)),n(255*s(v,m,f)),n(255*s(v,m,f-1/3)),c];default:return null}}return null};}catch(t){}}).parseCSSColor,ot=function(t,e,r,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=r,this.a=n;};ot.parse=function(t){if(t){if(t instanceof ot)return t;if("string"==typeof t){var e=at(t);if(e)return new ot(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},ot.prototype.toString=function(){var t=this.toArray(),e=t[0],r=t[1],n=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(r)+","+Math.round(n)+","+i+")"},ot.prototype.toArray=function(){var t=this.r,e=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]},ot.black=new ot(0,0,0,1),ot.white=new ot(1,1,1,1),ot.transparent=new ot(0,0,0,0);var st=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"});};st.prototype.compare=function(t,e){return this.collator.compare(t,e)},st.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ut=function(t,e,r){this.type=tt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e;};function lt(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function pt(t){if(null===t)return J;if("string"==typeof t)return H;if("boolean"==typeof t)return K;if("number"==typeof t)return G;if(t instanceof ot)return Y;if(t instanceof st)return tt;if(Array.isArray(t)){for(var e,r=t.length,n=0,i=t;n<i.length;n+=1){var a=pt(i[n]);if(e){if(e===a)continue;e=Q;break}e=a;}return et(e||Q,r)}return W}ut.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,K);if(!n)return null;var i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,K);if(!i)return null;var a=null;return r.locale&&!(a=e.parse(r.locale,1,H))?null:new ut(n,i,a)},ut.prototype.evaluate=function(t){return new st(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ut.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale);},ut.prototype.possibleOutputs=function(){return[void 0]},ut.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ht=function(t,e){this.type=t,this.value=e;};ht.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof ot)return!0;if(e instanceof st)return!0;if(Array.isArray(e)){for(var r=0,n=e;r<n.length;r+=1)if(!t(n[r]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var r=t[1],n=pt(r),i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new ht(n,r)},ht.prototype.evaluate=function(){return this.value},ht.prototype.eachChild=function(){},ht.prototype.possibleOutputs=function(){return[this.value]},ht.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ot?["rgba"].concat(this.value.toArray()):this.value};var ct=function(t){this.name="ExpressionEvaluationError",this.message=t;};ct.prototype.toJSON=function(){return this.message};var ft={string:H,number:G,boolean:K,object:W},yt=function(t,e){this.type=t,this.args=e;};yt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var r=t[0],n=ft[r],i=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,Q);if(!o)return null;i.push(o);}return new yt(n,i)},yt.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!it(this.type,pt(r)))return r;if(e===this.args.length-1)throw new ct("Expected value to be of type "+rt(this.type)+", but found "+rt(pt(r))+" instead.")}return null},yt.prototype.eachChild=function(t){this.args.forEach(t);},yt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t;},yt.prototype.serialize=function(){return[this.type.kind].concat(this.args.map(function(t){return t.serialize()}))};var dt={string:H,number:G,boolean:K},mt=function(t,e){this.type=t,this.input=e;};mt.parse=function(t,e){if(t.length<2||t.length>4)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");var r,n;if(t.length>2){var i=t[1];if("string"!=typeof i||!(i in dt))return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=dt[i];}else r=Q;if(t.length>3){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);n=t[2];}var a=et(r,n),o=e.parse(t[t.length-1],t.length-1,Q);return o?new mt(a,o):null},mt.prototype.evaluate=function(t){var e=this.input.evaluate(t);if(it(this.type,pt(e)))throw new ct("Expected value to be of type "+rt(this.type)+", but found "+rt(pt(e))+" instead.");return e},mt.prototype.eachChild=function(t){t(this.input);},mt.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},mt.prototype.serialize=function(){var t=["array"],e=this.type.itemType;if("string"===e.kind||"number"===e.kind||"boolean"===e.kind){t.push(e.kind);var r=this.type.N;"number"==typeof r&&t.push(r);}return t.push(this.input.serialize()),t};var vt={"to-number":G,"to-color":Y},gt=function(t,e){this.type=t,this.args=e;};gt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var r=t[0],n=vt[r],i=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,Q);if(!o)return null;i.push(o);}return new gt(n,i)},gt.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,"string"==typeof(e=i[n].evaluate(t))){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":lt(e[0],e[1],e[2],e[3])))return new ot(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ct(r||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}for(var o=null,s=0,u=this.args;s<u.length;s+=1){if(null!==(o=u[s].evaluate(t))){var l=Number(o);if(!isNaN(l))return l}}throw new ct("Could not convert "+JSON.stringify(o)+" to number.")},gt.prototype.eachChild=function(t){this.args.forEach(t);},gt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t;},gt.prototype.serialize=function(){var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize());}),t};var xt=["Unknown","Point","LineString","Polygon"],bt=function(){this._parseColorCache={};};bt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},bt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?xt[this.feature.type]:this.feature.type:null},bt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},bt.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=ot.parse(t)),e};var wt=function(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n;};function _t(t){if(t instanceof wt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!_t(t)&&(e=!1);}),e}function At(t){if(t instanceof wt&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!At(t)&&(e=!1);}),e}function kt(t,e){if(t instanceof wt&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild(function(t){r&&!kt(t,e)&&(r=!1);}),r}wt.prototype.evaluate=function(t){return this._evaluate(t,this.args)},wt.prototype.eachChild=function(t){this.args.forEach(t);},wt.prototype.possibleOutputs=function(){return[void 0]},wt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},wt.parse=function(t,e){var r=t[0],n=wt.definitions[r];if(!n)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,o=a.filter(function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1}),s=[],u=1;u<t.length;u++){var l=t[u],p=void 0;if(1===o.length){var h=o[0][0];p=Array.isArray(h)?h[u-1]:h.type;}var c=e.parse(l,1+s.length,p);if(!c)return null;s.push(c);}for(var f=null,y=0,d=o;y<d.length;y+=1){var m=d[y],v=m[0],g=m[1];if(f=new St(e.registry,e.path,null,e.scope),Array.isArray(v)&&v.length!==s.length)f.error("Expected "+v.length+" arguments, but found "+s.length+" instead.");else{for(var x=0;x<s.length;x++){var b=Array.isArray(v)?v[x]:v.type,w=s[x];f.concat(x+1).checkSubtype(b,w.type);}if(0===f.errors.length)return new wt(r,i,g,s)}}if(1===o.length)e.errors.push.apply(e.errors,f.errors);else{var _=(o.length?o:a).map(function(t){var e,r=t[0];return e=r,Array.isArray(e)?"("+e.map(rt).join(", ")+")":"("+rt(e.type)+"...)"}).join(" | "),A=s.map(function(t){return rt(t.type)}).join(", ");e.error("Expected arguments of type "+_+", but found ("+A+") instead.");}return null},wt.register=function(t,e){for(var r in wt.definitions=e,e)t[r]=wt;};var zt=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e;};zt.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new zt(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},zt.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},zt.prototype.eachChild=function(){},zt.prototype.possibleOutputs=function(){return[void 0]},zt.prototype.serialize=function(){return["var",this.name]};var St=function(t,e,r,n,i){void 0===e&&(e=[]),void 0===n&&(n=new $),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=n,this.errors=i,this.expectedType=r;};function Mt(t,e){for(var r,n,i=0,a=t.length-1,o=0;i<=a;){if(r=t[o=Math.floor((i+a)/2)],n=t[o+1],e===r||e>r&&e<n)return o;if(r<e)i=o+1;else{if(!(r>e))throw new ct("Input is not a number.");a=o-1;}}return Math.max(o-1,0)}St.prototype.parse=function(t,e,r,n,i){return void 0===i&&(i={}),e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)},St.prototype._parse=function(t,e){if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[r];if(n){var i=n.parse(t,this);if(!i)return null;if(this.expectedType){var a=this.expectedType,o=i.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind||"value"!==o.kind)if("array"===a.kind&&"value"===o.kind)e.omitTypeAnnotations||(i=new mt(a,i));else if("color"!==a.kind||"value"!==o.kind&&"string"!==o.kind){if(this.checkSubtype(this.expectedType,i.type))return null}else e.omitTypeAnnotations||(i=new gt(a,[i]));else e.omitTypeAnnotations||(i=new yt(a,[i]));}if(!(i instanceof ht)&&function t(e){if(e instanceof zt)return t(e.boundExpression);if(e instanceof wt&&"error"===e.name)return!1;if(e instanceof ut)return!1;var r=e instanceof gt||e instanceof yt||e instanceof mt;var n=!0;e.eachChild(function(e){n=r?n&&t(e):n&&e instanceof ht;});if(!n)return!1;return _t(e)&&kt(e,["zoom","heatmap-density","line-progress","is-supported-script"])}(i)){var s=new bt;try{i=new ht(i.type,i.evaluate(s));}catch(t){return this.error(t.message),null}}return i}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},St.prototype.concat=function(t,e,r){var n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new St(this.registry,n,e||null,i,this.errors)},St.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var n=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new X(n,t));},St.prototype.checkSubtype=function(t,e){var r=it(t,e);return r&&this.error(r),r};var Bt=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];this.labels.push(o),this.outputs.push(s);}};function Vt(t,e,r){return t*(1-r)+e*r}Bt.parse=function(t,e){var r=t[1],n=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,1,G)))return null;var i=[],a=null;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType),n.unshift(-1/0);for(var o=0;o<n.length;o+=2){var s=n[o],u=n[o+1],l=o+1,p=o+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var h=e.parse(u,p,a);if(!h)return null;a=a||h.type,i.push([s,h]);}return new Bt(a,r,i)},Bt.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[Mt(e,n)].evaluate(t)},Bt.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1){t(r[e]);}},Bt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t;},Bt.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var It=Object.freeze({number:Vt,color:function(t,e,r){return new ot(Vt(t.r,e.r,r),Vt(t.g,e.g,r),Vt(t.b,e.b,r),Vt(t.a,e.a,r))},array:function(t,e,r){return t.map(function(t,n){return Vt(t,e[n],r)})}}),Ct=function(t,e,r,n){this.type=t,this.interpolation=e,this.input=r,this.labels=[],this.outputs=[];for(var i=0,a=n;i<a.length;i+=1){var o=a[i],s=o[0],u=o[1];this.labels.push(s),this.outputs.push(u);}};function Et(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}Ct.interpolationFactor=function(t,e,r,n){var i=0;if("exponential"===t.name)i=Et(e,t.base,r,n);else if("linear"===t.name)i=Et(e,1,r,n);else if("cubic-bezier"===t.name){var a=t.controlPoints;i=new l(a[0],a[1],a[2],a[3]).solve(Et(e,1,r,n));}return i},Ct.parse=function(t,e){var r=t[1],n=t[2],i=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a};}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var o=r.slice(1);if(4!==o.length||o.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:o};}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,G)))return null;var s=[],u=null;e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var l=0;l<i.length;l+=2){var p=i[l],h=i[l+1],c=l+3,f=l+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(s.length&&s[s.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',c);var y=e.parse(h,f,u);if(!y)return null;u=u||y.type,s.push([p,y]);}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Ct(u,r,n,s):e.error("Type "+rt(u)+" is not interpolatable.")},Ct.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);var a=Mt(e,n),o=e[a],s=e[a+1],u=Ct.interpolationFactor(this.interpolation,n,o,s),l=r[a].evaluate(t),p=r[a+1].evaluate(t);return It[this.type.kind.toLowerCase()](l,p,u)},Ct.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1){t(r[e]);}},Ct.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t;},Ct.prototype.serialize=function(){for(var t=["interpolate","linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),this.input.serialize()],e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t};var Tt=function(t,e){this.type=t,this.args=e;};Tt.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,n=e.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],a=0,o=t.slice(1);a<o.length;a+=1){var s=o[a],u=e.parse(s,1+i.length,r,void 0,{omitTypeAnnotations:!0});if(!u)return null;r=r||u.type,i.push(u);}var l=n&&i.some(function(t){return it(n,t.type)});return new Tt(l?Q:r,i)},Tt.prototype.evaluate=function(t){for(var e=null,r=0,n=this.args;r<n.length;r+=1){if(null!==(e=n[r].evaluate(t)))break}return e},Tt.prototype.eachChild=function(t){this.args.forEach(t);},Tt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t;},Tt.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize());}),t};var Pt=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e;};Pt.prototype.evaluate=function(t){return this.result.evaluate(t)},Pt.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1){t(r[e][1]);}t(this.result);},Pt.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var i=t[n];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var a=e.parse(t[n+1],n+1);if(!a)return null;r.push([i,a]);}var o=e.parse(t[t.length-1],t.length-1,void 0,r);return o?new Pt(r,o):null},Pt.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Pt.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];t.push(i,a.serialize());}return t.push(this.result.serialize()),t};var Ft=function(t,e,r){this.type=t,this.index=e,this.input=r;};Ft.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,G),n=e.parse(t[2],2,et(e.expectedType||Q));if(!r||!n)return null;var i=n.type;return new Ft(i.itemType,r,n)},Ft.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new ct("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new ct("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new ct("Array index must be an integer, but found "+e+" instead.");return r[e]},Ft.prototype.eachChild=function(t){t(this.index),t(this.input);},Ft.prototype.possibleOutputs=function(){return[void 0]},Ft.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Lt=function(t,e,r,n,i,a){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=a;};Lt.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i={},a=[],o=2;o<t.length-1;o+=2){var s=t[o],u=t[o+1];Array.isArray(s)||(s=[s]);var l=e.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var p=0,h=s;p<h.length;p+=1){var c=h[p];if("number"!=typeof c&&"string"!=typeof c)return l.error("Branch labels must be numbers or strings.");if("number"==typeof c&&Math.abs(c)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof c&&Math.floor(c)!==c)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,pt(c)))return null}else r=pt(c);if(void 0!==i[String(c)])return l.error("Branch labels must be unique.");i[String(c)]=a.length;}var f=e.parse(u,o,n);if(!f)return null;n=n||f.type,a.push(f);}var y=e.parse(t[1],1,Q);if(!y)return null;var d=e.parse(t[t.length-1],t.length-1,n);return d?"value"!==y.type.kind&&e.concat(1).checkSubtype(r,y.type)?null:new Lt(r,n,y,i,a,d):null},Lt.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(pt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Lt.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise);},Lt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t;},Lt.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],n={},i=0,a=Object.keys(this.cases).sort();i<a.length;i+=1){var o=a[i],s=n[t.cases[o]];void 0===s?(n[t.cases[o]]=r.length,r.push([t.cases[o],[o]])):r[s][1].push(o);}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,p=r;l<p.length;l+=1){var h=p[l],c=h[0],f=h[1];1===f.length?e.push(u(f[0])):e.push(f.map(u)),e.push(t.outputs[c].serialize());}return e.push(this.otherwise.serialize()),e};var Ot=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r;};function Dt(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function qt(t,e){return function(){function r(t,e,r){this.type=K,this.lhs=t,this.rhs=e,this.collator=r;}return r.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=e.parse(t[1],1,Q);if(!n)return null;var i=e.parse(t[2],2,Q);if(!i)return null;if(!Dt(n.type)&&!Dt(i.type))return e.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+rt(n.type)+", "+rt(i.type)+") instead.");if(n.type.kind!==i.type.kind&&"value"!==n.type.kind&&"value"!==i.type.kind)return e.error("Cannot compare "+rt(n.type)+" and "+rt(i.type)+".");var a=null;if(4===t.length){if("string"!==n.type.kind&&"string"!==i.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(a=e.parse(t[3],3,tt)))return null}return new r(n,i,a)},r.prototype.evaluate=function(t){var r=this.collator?0===this.collator.evaluate(t).compare(this.lhs.evaluate(t),this.rhs.evaluate(t)):this.lhs.evaluate(t)===this.rhs.evaluate(t);return e?!r:r},r.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator);},r.prototype.possibleOutputs=function(){return[!0,!1]},r.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize());}),e},r}()}Ot.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n=[],i=1;i<t.length-1;i+=2){var a=e.parse(t[i],i,K);if(!a)return null;var o=e.parse(t[i+1],i+1,r);if(!o)return null;n.push([a,o]),r=r||o.type;}var s=e.parse(t[t.length-1],t.length-1,r);return s?new Ot(r,n,s):null},Ot.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];if(i.evaluate(t))return a.evaluate(t)}return this.otherwise.evaluate(t)},Ot.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];t(i),t(a);}t(this.otherwise);},Ot.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){t[0];return t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t;},Ot.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize());}),t};var jt=qt("==",!1),Rt=qt("!=",!0),Ut=function(t){this.type=G,this.input=t;};Ut.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+rt(r.type)+" instead."):new Ut(r):null},Ut.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ct("Expected value to be of type string or array, but found "+rt(pt(e))+" instead.")},Ut.prototype.eachChild=function(t){t(this.input);},Ut.prototype.possibleOutputs=function(){return[void 0]},Ut.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize());}),t};var Nt={"==":jt,"!=":Rt,array:mt,at:Ft,boolean:yt,case:Ot,coalesce:Tt,collator:ut,interpolate:Ct,length:Ut,let:Pt,literal:ht,match:Lt,number:yt,object:yt,step:Bt,string:yt,"to-color":gt,"to-number":gt,var:zt};function Zt(t,e){var r=e[0],n=e[1],i=e[2],a=e[3];r=r.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);var o=a?a.evaluate(t):1,s=lt(r,n,i,o);if(s)throw new ct(s);return new ot(r/255*o,n/255*o,i/255*o,o)}function Xt(t,e){return t in e}function $t(t,e){var r=e[t];return void 0===r?null:r}function Jt(t,e){var r=e[0],n=e[1];return r.evaluate(t)<n.evaluate(t)}function Gt(t,e){var r=e[0],n=e[1];return r.evaluate(t)>n.evaluate(t)}function Ht(t,e){var r=e[0],n=e[1];return r.evaluate(t)<=n.evaluate(t)}function Kt(t,e){var r=e[0],n=e[1];return r.evaluate(t)>=n.evaluate(t)}function Yt(t){return{type:t}}function Wt(t){return{result:"success",value:t}}function Qt(t){return{result:"error",value:t}}function te(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function ee(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function re(t){return!!t.expression&&t.expression.interpolated}wt.register(Nt,{error:[{kind:"error"},[H],function(t,e){var r=e[0];throw new ct(r.evaluate(t))}],typeof:[H,[Q],function(t,e){return rt(pt(e[0].evaluate(t)))}],"to-string":[H,[Q],function(t,e){var r=e[0],n=typeof(r=r.evaluate(t));return null===r?"":"string"===n||"number"===n||"boolean"===n?String(r):r instanceof ot?r.toString():JSON.stringify(r)}],"to-boolean":[K,[Q],function(t,e){var r=e[0];return Boolean(r.evaluate(t))}],"to-rgba":[et(G,4),[Y],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Y,[G,G,G],Zt],rgba:[Y,[G,G,G,G],Zt],has:{type:K,overloads:[[[H],function(t,e){return Xt(e[0].evaluate(t),t.properties())}],[[H,W],function(t,e){var r=e[0],n=e[1];return Xt(r.evaluate(t),n.evaluate(t))}]]},get:{type:Q,overloads:[[[H],function(t,e){return $t(e[0].evaluate(t),t.properties())}],[[H,W],function(t,e){var r=e[0],n=e[1];return $t(r.evaluate(t),n.evaluate(t))}]]},"feature-state":[Q,[H],function(t,e){return $t(e[0].evaluate(t),t.featureState||{})}],properties:[W,[],function(t){return t.properties()}],"geometry-type":[H,[],function(t){return t.geometryType()}],id:[Q,[],function(t){return t.id()}],zoom:[G,[],function(t){return t.globals.zoom}],"heatmap-density":[G,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[G,[],function(t){return t.globals.lineProgress||0}],"+":[G,Yt(G),function(t,e){for(var r=0,n=0,i=e;n<i.length;n+=1){r+=i[n].evaluate(t);}return r}],"*":[G,Yt(G),function(t,e){for(var r=1,n=0,i=e;n<i.length;n+=1){r*=i[n].evaluate(t);}return r}],"-":{type:G,overloads:[[[G,G],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)-n.evaluate(t)}],[[G],function(t,e){return-e[0].evaluate(t)}]]},"/":[G,[G,G],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)/n.evaluate(t)}],"%":[G,[G,G],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)%n.evaluate(t)}],ln2:[G,[],function(){return Math.LN2}],pi:[G,[],function(){return Math.PI}],e:[G,[],function(){return Math.E}],"^":[G,[G,G],function(t,e){var r=e[0],n=e[1];return Math.pow(r.evaluate(t),n.evaluate(t))}],sqrt:[G,[G],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[G,[G],function(t,e){var r=e[0];return Math.log10(r.evaluate(t))}],ln:[G,[G],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[G,[G],function(t,e){var r=e[0];return Math.log2(r.evaluate(t))}],sin:[G,[G],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[G,[G],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[G,[G],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[G,[G],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[G,[G],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[G,[G],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[G,Yt(G),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[G,Yt(G),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[G,[G],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[G,[G],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[G,[G],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[G,[G],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[K,[H,Q],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[K,[Q],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[K,[H],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[K,[H,Q],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[K,[Q],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[K,[H,Q],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[K,[Q],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[K,[H,Q],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[K,[Q],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[K,[H,Q],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[K,[Q],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[K,[Q],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[K,[],function(t){return null!==t.id()}],"filter-type-in":[K,[et(H)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[K,[et(Q)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[K,[H,et(Q)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[K,[H,et(Q)],function(t,e){var r=e[0],n=e[1];return function(t,e,r,n){for(;r<=n;){var i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1;}return!1}(t.properties()[r.value],n.value,0,n.value.length-1)}],">":{type:K,overloads:[[[G,G],Gt],[[H,H],Gt],[[H,H,tt],function(t,e){var r=e[0],n=e[1];return e[2].evaluate(t).compare(r.evaluate(t),n.evaluate(t))>0}]]},"<":{type:K,overloads:[[[G,G],Jt],[[H,H],Jt],[[H,H,tt],function(t,e){var r=e[0],n=e[1];return e[2].evaluate(t).compare(r.evaluate(t),n.evaluate(t))<0}]]},">=":{type:K,overloads:[[[G,G],Kt],[[H,H],Kt],[[H,H,tt],function(t,e){var r=e[0],n=e[1];return e[2].evaluate(t).compare(r.evaluate(t),n.evaluate(t))>=0}]]},"<=":{type:K,overloads:[[[G,G],Ht],[[H,H],Ht],[[H,H,tt],function(t,e){var r=e[0],n=e[1];return e[2].evaluate(t).compare(r.evaluate(t),n.evaluate(t))<=0}]]},all:{type:K,overloads:[[[K,K],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)&&n.evaluate(t)}],[Yt(K),function(t,e){for(var r=0,n=e;r<n.length;r+=1){if(!n[r].evaluate(t))return!1}return!0}]]},any:{type:K,overloads:[[[K,K],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)||n.evaluate(t)}],[Yt(K),function(t,e){for(var r=0,n=e;r<n.length;r+=1){if(n[r].evaluate(t))return!0}return!1}]]},"!":[K,[K],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[K,[H],function(t,e){var r=e[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(r.evaluate(t))}],upcase:[H,[H],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[H,[H],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[H,Yt(H),function(t,e){return e.map(function(e){return e.evaluate(t)}).join("")}],"resolved-locale":[H,[tt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var ne=.95047,ie=1,ae=1.08883,oe=4/29,se=6/29,ue=3*se*se,le=se*se*se,pe=Math.PI/180,he=180/Math.PI;function ce(t){return t>le?Math.pow(t,1/3):t/ue+oe}function fe(t){return t>se?t*t*t:ue*(t-oe)}function ye(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function me(t){var e=de(t.r),r=de(t.g),n=de(t.b),i=ce((.4124564*e+.3575761*r+.1804375*n)/ne),a=ce((.2126729*e+.7151522*r+.072175*n)/ie);return{l:116*a-16,a:500*(i-a),b:200*(a-ce((.0193339*e+.119192*r+.9503041*n)/ae)),alpha:t.a}}function ve(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=ie*fe(e),r=ne*fe(r),n=ae*fe(n),new ot(ye(3.2404542*r-1.5371385*e-.4985314*n),ye(-.969266*r+1.8760108*e+.041556*n),ye(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}var ge={forward:me,reverse:ve,interpolate:function(t,e,r){return{l:Vt(t.l,e.l,r),a:Vt(t.a,e.a,r),b:Vt(t.b,e.b,r),alpha:Vt(t.alpha,e.alpha,r)}}},xe={forward:function(t){var e=me(t),r=e.l,n=e.a,i=e.b,a=Math.atan2(i,n)*he;return{h:a<0?a+360:a,c:Math.sqrt(n*n+i*i),l:r,alpha:t.a}},reverse:function(t){var e=t.h*pe,r=t.c;return ve({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:function(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}(t.h,e.h,r),c:Vt(t.c,e.c,r),l:Vt(t.l,e.l,r),alpha:Vt(t.alpha,e.alpha,r)}}},be=Object.freeze({lab:ge,hcl:xe});function we(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function _e(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Ae(t){return t}function ke(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function ze(t,e,r,n,i){return ke(typeof r===i?n[r]:void 0,t.default,e.default)}function Se(t,e,r){if("number"!==we(r))return ke(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var i=Ve(t.stops,r);return t.stops[i][1]}function Me(t,e,r){var n=void 0!==t.base?t.base:1;if("number"!==we(r))return ke(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var a=Ve(t.stops,r),o=function(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],u=t.stops[a+1][1],l=It[e.type]||Ae;if(t.colorSpace&&"rgb"!==t.colorSpace){var p=be[t.colorSpace];l=function(t,e){return p.reverse(p.interpolate(p.forward(t),p.forward(e),o))};}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),n=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return l(r,n,o)}}:l(s,u,o)}function Be(t,e,r){return"color"===e.type?r=ot.parse(r):we(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),ke(r,t.default,e.default)}function Ve(t,e){for(var r,n,i=0,a=t.length-1,o=0;i<=a;){if(r=t[o=Math.floor((i+a)/2)][0],n=t[o+1][0],e===r||e>r&&e<n)return o;r<e?i=o+1:r>e&&(a=o-1);}return Math.max(o-1,0)}var Ie=function(t,e){var r;this.expression=t,this._warningHistory={},this._defaultValue="color"===(r=e).type&&_e(r.default)?new ot(0,0,0,0):"color"===r.type?ot.parse(r.default)||null:void 0===r.default?null:r.default,"enum"===e.type&&(this._enumValues=e.values);};function Ce(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Nt}function Ee(t,e){var r=new St(Nt,[],function(t){var e={color:Y,string:H,number:G,enum:H,boolean:K};if("array"===t.type)return et(e[t.value]||Q,t.length);return e[t.type]||null}(e)),n=r.parse(t);return n?Wt(new Ie(n,e)):Qt(r.errors)}Ie.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._evaluator||(this._evaluator=new bt),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this.expression.evaluate(this._evaluator)},Ie.prototype.evaluate=function(t,e,r){this._evaluator||(this._evaluator=new bt),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r;try{var n=this.expression.evaluate(this._evaluator);if(null==n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new ct("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Te=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!At(e.expression);};Te.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r)},Te.prototype.evaluate=function(t,e,r){return this._styleExpression.evaluate(t,e,r)};var Pe=function(t,e,r){this.kind=t,this.zoomStops=r.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!At(e.expression),r instanceof Ct&&(this._interpolationType=r.interpolation);};function Fe(t,e){if("error"===(t=Ee(t,e)).result)return t;var r=t.value.expression,n=_t(r);if(!n&&!te(e))return Qt([new X("","data expressions not supported")]);var i=kt(r,["zoom"]);if(!i&&!ee(e))return Qt([new X("","zoom expressions not supported")]);var a=function t(e){var r=null;if(e instanceof Pt)r=t(e.result);else if(e instanceof Tt)for(var n=0,i=e.args;n<i.length;n+=1){var a=i[n];if(r=t(a))break}else(e instanceof Bt||e instanceof Ct)&&e.input instanceof wt&&"zoom"===e.input.name&&(r=e);if(r instanceof X)return r;e.eachChild(function(e){var n=t(e);n instanceof X?r=n:!r&&n?r=new X("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&n&&r!==n&&(r=new X("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));});return r}(r);return a||i?a instanceof X?Qt([a]):a instanceof Ct&&!re(e)?Qt([new X("",'"interpolate" expressions cannot be used with this property')]):Wt(a?new Pe(n?"camera":"composite",t.value,a):new Te(n?"constant":"source",t.value)):Qt([new X("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Pe.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r)},Pe.prototype.evaluate=function(t,e,r){return this._styleExpression.evaluate(t,e,r)},Pe.prototype.interpolationFactor=function(t,e,r){return this._interpolationType?Ct.interpolationFactor(this._interpolationType,t,e,r):0};var Le=function(t,e){this._parameters=t,this._specification=e,U(this,function t(e,r){var n,i,a,o="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||void 0!==e.property,l=s||!u,p=e.type||(re(r)?"exponential":"interval");if(o&&((e=U({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],ot.parse(t[1])]})),e.default?e.default=ot.parse(e.default):e.default=ot.parse(r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!be[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===p)n=Me;else if("interval"===p)n=Se;else if("categorical"===p){n=ze,i=Object.create(null);for(var h=0,c=e.stops;h<c.length;h+=1){var f=c[h];i[f[0]]=f[1];}a=typeof e.stops[0][0];}else{if("identity"!==p)throw new Error('Unknown function type "'+p+'"');n=Be;}if(s){for(var y={},d=[],m=0;m<e.stops.length;m++){var v=e.stops[m],g=v[0].zoom;void 0===y[g]&&(y[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},d.push(g)),y[g].stops.push([v[0].value,v[1]]);}for(var x=[],b=0,w=d;b<w.length;b+=1){var _=w[b];x.push([y[_].zoom,t(y[_],r)]);}return{kind:"composite",interpolationFactor:Ct.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:x.map(function(t){return t[0]}),evaluate:function(t,n){var i=t.zoom;return Me({stops:x,base:e.base},r,i).evaluate(i,n)}}}return l?{kind:"camera",interpolationFactor:"exponential"===p?Ct.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var o=t.zoom;return n(e,r,o,i,a)}}:{kind:"source",evaluate:function(t,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?ke(e.default,r.default):n(e,r,s,i,a)}}}(this._parameters,this._specification));};function Oe(t,e){if(_e(t))return new Le(t,e);if(Ce(t)){var r=Fe(t,e);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return r.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=ot.parse(t)),{kind:"constant",evaluate:function(){return n}}}function De(t){var e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},a=t.style,o=t.styleSpec,s=[],u=we(r);if("object"!==u)return[new j(e,r,"object expected, "+u+" found")];for(var l in r){var p=l.split(".")[0],h=n[p]||n["*"],c=void 0;if(i[p])c=i[p];else if(n[p])c=ur;else if(i["*"])c=i["*"];else{if(!n["*"]){s.push(new j(e,r[l],'unknown property "'+l+'"'));continue}c=ur;}s=s.concat(c({key:(e?e+".":e)+l,value:r[l],valueSpec:h,style:a,styleSpec:o,object:r,objectKey:l},r));}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new j(e,r,'missing required property "'+f+'"'));return s}function qe(t){var e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,a=t.key,o=t.arrayElementValidator||ur;if("array"!==we(e))return[new j(a,e,"array expected, "+we(e)+" found")];if(r.length&&e.length!==r.length)return[new j(a,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new j(a,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value};i.$version<7&&(s.function=r.function),"object"===we(r.value)&&(s=r.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(o({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:n,styleSpec:i,key:a+"["+l+"]"}));return u}function je(t){var e=t.key,r=t.value,n=t.valueSpec,i=we(r);return"number"!==i?[new j(e,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new j(e,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new j(e,r,r+" is greater than the maximum value "+n.maximum)]:[]}function Re(t){var e,r,n,i=t.valueSpec,a=N(t.value.type),o={},s="categorical"!==a&&void 0===t.value.property,u=!s,l="array"===we(t.value.stops)&&"array"===we(t.value.stops[0])&&"object"===we(t.value.stops[0][0]),p=De({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===a)return[new j(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;e=e.concat(qe({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===we(r)&&0===r.length&&e.push(new j(t.key,r,"array must have at least one stop"));return e},default:function(t){return ur({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===a&&s&&p.push(new j(t.key,t.value,'missing required property "property"')),"identity"===a||t.value.stops||p.push(new j(t.key,t.value,'missing required property "stops"')),"exponential"===a&&t.valueSpec.expression&&!re(t.valueSpec)&&p.push(new j(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!te(t.valueSpec)?p.push(new j(t.key,t.value,"property functions not supported")):s&&!ee(t.valueSpec)&&p.push(new j(t.key,t.value,"zoom functions not supported"))),"categorical"!==a&&!l||void 0!==t.value.property||p.push(new j(t.key,t.value,'"property" property is required')),p;function h(t){var e=[],a=t.value,s=t.key;if("array"!==we(a))return[new j(s,a,"array expected, "+we(a)+" found")];if(2!==a.length)return[new j(s,a,"array length 2 expected, length "+a.length+" found")];if(l){if("object"!==we(a[0]))return[new j(s,a,"object expected, "+we(a[0])+" found")];if(void 0===a[0].zoom)return[new j(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new j(s,a,"object stop key must have value")];if(n&&n>N(a[0].zoom))return[new j(s,a[0].zoom,"stop zoom values must appear in ascending order")];N(a[0].zoom)!==n&&(n=N(a[0].zoom),r=void 0,o={}),e=e.concat(De({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:je,value:c}}));}else e=e.concat(c({key:s+"[0]",value:a[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},a));return e.concat(ur({key:s+"[1]",value:a[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function c(t,n){var s=we(t.value),u=N(t.value),l=null!==t.value?t.value:n;if(e){if(s!==e)return[new j(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new j(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var p="number expected, "+s+" found";return te(i)&&void 0===a&&(p+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new j(t.key,l,p)]}return"categorical"!==a||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===s&&void 0!==r&&u<r?[new j(t.key,l,"stop domain values must appear in ascending order")]:(r=u,"categorical"===a&&u in o?[new j(t.key,l,"stop domain values must be unique")]:(o[u]=!0,[])):[new j(t.key,l,"integer expected, found "+u)]}}function Ue(t){var e=("property"===t.expressionContext?Fe:Ee)(Z(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new j(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new j(t.key,t.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:"property"!==t.expressionContext||"layout"!==t.propertyType||At(e.value._styleExpression.expression)?[]:[new j(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')]}function Ne(t){var e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(N(r))&&i.push(new j(e,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(N(r))&&i.push(new j(e,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function Ze(t){if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===t.length&&(Array.isArray(t[1])||Array.isArray(t[2]));case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!Ze(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Le.deserialize=function(t){return new Le(t._parameters,t._specification)},Le.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Xe={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $e(t){if(!t)return function(){return!0};Ze(t)||(t=Ge(t));var e=Ee(t,Xe);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,r){return e.value.evaluate(t,r)}}function Je(t,e){return t<e?-1:t>e?1:0}function Ge(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?He(t[1],t[2],"=="):"!="===r?We(He(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?He(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(Ge))):"all"===r?["all"].concat(t.slice(1).map(Ge)):"none"===r?["all"].concat(t.slice(1).map(Ge).map(We)):"in"===r?Ke(t[1],t.slice(2)):"!in"===r?We(Ke(t[1],t.slice(2))):"has"===r?Ye(t[1]):"!has"!==r||We(Ye(t[1]))}function He(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Ke(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Je)]]:["filter-in-small",t,["literal",e]]}}function Ye(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function We(t){return["!",t]}function Qe(t){return Ze(Z(t.value))?Ue(U({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value;var n=e.key;if("array"!==we(r))return[new j(n,r,"array expected, "+we(r)+" found")];var i=e.styleSpec;var a;var o=[];if(r.length<1)return[new j(n,r,"filter array must have at least 1 element")];o=o.concat(Ne({key:n+"[0]",value:r[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec}));switch(N(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===N(r[1])&&o.push(new j(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&o.push(new j(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(a=we(r[1]))&&o.push(new j(n+"[1]",r[1],"string expected, "+a+" found"));for(var s=2;s<r.length;s++)a=we(r[s]),"$type"===N(r[1])?o=o.concat(Ne({key:n+"["+s+"]",value:r[s],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new j(n+"["+s+"]",r[s],"string, number, or boolean expected, "+a+" found"));break;case"any":case"all":case"none":for(var u=1;u<r.length;u++)o=o.concat(t({key:n+"["+u+"]",value:r[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=we(r[1]),2!==r.length?o.push(new j(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==a&&o.push(new j(n+"[1]",r[1],"string expected, "+a+" found"));}return o}(t)}function tr(t,e){var r=t.key,n=t.style,i=t.styleSpec,a=t.value,o=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return ur({key:r,value:a,valueSpec:i.transition,style:n,styleSpec:i});var l,p=t.valueSpec||s[o];if(!p)return[new j(r,a,'unknown property "'+o+'"')];if("string"===we(a)&&te(p)&&!p.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new j(r,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===o&&n&&!n.glyphs&&h.push(new j(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&_e(Z(a))&&"identity"===N(a.type)&&h.push(new j(r,a,'"text-font" does not support identity functions'))),h.concat(ur({key:t.key,value:a,valueSpec:p,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:o}))}function er(t){return tr(t,"paint")}function rr(t){return tr(t,"layout")}function nr(t){var e=[],r=t.value,n=t.key,i=t.style,a=t.styleSpec;r.type||r.ref||e.push(new j(n,r,'either "type" or "ref" is required'));var o,s=N(r.type),u=N(r.ref);if(r.id)for(var l=N(r.id),p=0;p<t.arrayIndex;p++){var h=i.layers[p];N(h.id)===l&&e.push(new j(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+h.id.__line__));}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(t){t in r&&e.push(new j(n,r[t],'"'+t+'" is prohibited for ref layers'));}),i.layers.forEach(function(t){N(t.id)===u&&(o=t);}),o?o.ref?e.push(new j(n,r.ref,"ref cannot reference another ref layer")):s=N(o.type):e.push(new j(n,r.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(r.source){var c=i.sources&&i.sources[r.source],f=c&&N(c.type);c?"vector"===f&&"raster"===s?e.push(new j(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new j(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new j(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&c.lineMetrics||e.push(new j(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new j(n,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new j(n,r.source,'source "'+r.source+'" not found'));}else e.push(new j(n,r,'missing required property "source"'));return e=e.concat(De({key:n,value:r,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ur({key:n+".type",value:r.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:Qe,layout:function(t){return De({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return rr(U({layerType:s},t))}}})},paint:function(t){return De({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return er(U({layerType:s},t))}}})}}}))}function ir(t){var e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new j(r,e,'"type" is required')];var a=N(e.type),o=[];switch(a){case"vector":case"raster":case"raster-dem":if(o=o.concat(De({key:r,value:e,valueSpec:n["source_"+a.replace("-","_")],style:t.style,styleSpec:n})),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&o.push(new j(r+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":return De({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n});case"video":return De({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return De({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return o.push(new j(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),o;default:return Ne({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function ar(t){var e=t.value,r=t.styleSpec,n=r.light,i=t.style,a=[],o=we(e);if(void 0===e)return a;if("object"!==o)return a=a.concat([new j("light",e,"object expected, "+o+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);a=u&&n[u[1]]&&n[u[1]].transition?a.concat(ur({key:s,value:e[s],valueSpec:r.transition,style:i,styleSpec:r})):n[s]?a.concat(ur({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r})):a.concat([new j(s,e[s],'unknown property "'+s+'"')]);}return a}function or(t){var e=t.value,r=t.key,n=we(e);return"string"!==n?[new j(r,e,"string expected, "+n+" found")]:[]}var sr={"*":function(){return[]},array:qe,boolean:function(t){var e=t.value,r=t.key,n=we(e);return"boolean"!==n?[new j(r,e,"boolean expected, "+n+" found")]:[]},number:je,color:function(t){var e=t.key,r=t.value,n=we(r);return"string"!==n?[new j(e,r,"color expected, "+n+" found")]:null===at(r)?[new j(e,r,'color expected, "'+r+'" found')]:[]},constants:R,enum:Ne,filter:Qe,function:Re,layer:nr,object:De,source:ir,light:ar,string:or};function ur(t){var e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&_e(N(e))?Re(t):r.expression&&Ce(Z(e))?Ue(t):r.type&&sr[r.type]?sr[r.type](t):De(U({},t,{valueSpec:r.type?n[r.type]:r}))}function lr(t){var e=t.value,r=t.key,n=or(t);return n.length?n:(-1===e.indexOf("{fontstack}")&&n.push(new j(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new j(r,e,'"glyphs" url must include a "{range}" token')),n)}function pr(t,e){e=e||q;var r=[];return r=r.concat(ur({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:lr,"*":function(){return[]}}})),t.constants&&(r=r.concat(R({key:"constants",value:t.constants,style:t,styleSpec:e}))),hr(r)}function hr(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function cr(t){return function(){return hr(t.apply(this,arguments))}}pr.source=cr(ir),pr.light=cr(ar),pr.layer=cr(nr),pr.filter=cr(Qe),pr.paintProperty=cr(er),pr.layoutProperty=cr(rr);var fr=pr,yr=pr.light,dr=pr.paintProperty,mr=pr.layoutProperty;function vr(t,e){var r=!1;if(e&&e.length)for(var n=0,i=e;n<i.length;n+=1){var a=i[n];t.fire(new O(new Error(a.message))),r=!0;}return r}var gr=br,xr=3;function br(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],r=i[2],this.d=e+2*r;for(var a=0;a<this.d*this.d;a++){var o=i[xr+a],s=i[xr+a+1];n.push(o===s?null:i.subarray(o,s));}var u=i[xr+n.length],l=i[xr+n.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly;}else{this.d=e+2*r;for(var p=0;p<this.d*this.d;p++)n.push([]);this.keys=[],this.bboxes=[];}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var h=r/e*t;this.min=-h,this.max=t+h;}br.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i);},br.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},br.prototype._insertCell=function(t,e,r,n,i,a){this.cells[i].push(a);},br.prototype.query=function(t,e,r,n){var i=this.min,a=this.max;if(t<=i&&e<=i&&a<=r&&a<=n)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(t,e,r,n,this._queryCell,o,{}),o},br.prototype._queryCell=function(t,e,r,n,i,a,o){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,p=0;p<s.length;p++){var h=s[p];if(void 0===o[h]){var c=4*h;t<=l[c+2]&&e<=l[c+3]&&r>=l[c+0]&&n>=l[c+1]?(o[h]=!0,a.push(u[h])):o[h]=!1;}}},br.prototype._forEachCell=function(t,e,r,n,i,a,o){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(r),p=this._convertToCellCoord(n),h=s;h<=l;h++)for(var c=u;c<=p;c++){var f=this.d*c+h;if(i.call(this,t,e,r,n,f,a,o))return}},br.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},br.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=xr+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];i[xr+o]=a,i.set(s,a),a+=s.length;}return i[xr+t.length]=a,i.set(this.keys,a),a+=this.keys.length,i[xr+t.length+1]=a,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var wr=self.ImageData,_r={};function Ar(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),_r[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]};}for(var kr in Ar("Object",Object),gr.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),r},gr.deserialize=function(t){return new gr(t)},Ar("Grid",gr),Ar("Color",ot),Ar("Error",Error),Ar("StylePropertyFunction",Le),Ar("StyleExpression",Ie,{omit:["_evaluator"]}),Ar("ZoomDependentExpression",Pe),Ar("ZoomConstantExpression",Te),Ar("CompoundExpression",wt,{omit:["_evaluate"]}),Nt)Nt[kr]._classRegistryKey||Ar("Expression_"+kr,Nt[kr]);function zr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof wr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0,a=t;i<a.length;i+=1){var o=a[i];n.push(zr(o,e));}return n}if("object"==typeof t){var s=t.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l={};if(s.serialize)l._serialized=s.serialize(t,e);else{for(var p in t)if(t.hasOwnProperty(p)&&!(_r[u].omit.indexOf(p)>=0)){var h=t[p];l[p]=_r[u].shallow.indexOf(p)>=0?h:zr(h,e);}t instanceof Error&&(l.message=t.message);}return{name:u,properties:l}}throw new Error("can't serialize object of type "+typeof t)}function Sr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof wr)return t;if(Array.isArray(t))return t.map(function(t){return Sr(t)});if("object"==typeof t){var e=t,r=e.name,n=e.properties;if(!r)throw new Error("can't deserialize object of anonymous class");var i=_r[r].klass;if(!i)throw new Error("can't deserialize unregistered class "+r);if(i.deserialize)return i.deserialize(n._serialized);for(var a=Object.create(i.prototype),o=0,s=Object.keys(n);o<s.length;o+=1){var u=s[o];a[u]=_r[r].shallow.indexOf(u)>=0?n[u]:Sr(n[u]);}return a}throw new Error("can't deserialize object of type "+typeof t)}var Mr=function(){this.first=!0;};Mr.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var Br={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Vr(t){for(var e=0,r=t;e<r.length;e+=1){if(Cr(r[e].charCodeAt(0)))return!0}return!1}function Ir(t){return!Br.Arabic(t)&&(!Br["Arabic Supplement"](t)&&(!Br["Arabic Extended-A"](t)&&(!Br["Arabic Presentation Forms-A"](t)&&!Br["Arabic Presentation Forms-B"](t))))}function Cr(t){return 746===t||747===t||!(t<4352)&&(!!Br["Bopomofo Extended"](t)||(!!Br.Bopomofo(t)||(!(!Br["CJK Compatibility Forms"](t)||t>=65097&&t<=65103)||(!!Br["CJK Compatibility Ideographs"](t)||(!!Br["CJK Compatibility"](t)||(!!Br["CJK Radicals Supplement"](t)||(!!Br["CJK Strokes"](t)||(!(!Br["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||(!!Br["CJK Unified Ideographs Extension A"](t)||(!!Br["CJK Unified Ideographs"](t)||(!!Br["Enclosed CJK Letters and Months"](t)||(!!Br["Hangul Compatibility Jamo"](t)||(!!Br["Hangul Jamo Extended-A"](t)||(!!Br["Hangul Jamo Extended-B"](t)||(!!Br["Hangul Jamo"](t)||(!!Br["Hangul Syllables"](t)||(!!Br.Hiragana(t)||(!!Br["Ideographic Description Characters"](t)||(!!Br.Kanbun(t)||(!!Br["Kangxi Radicals"](t)||(!!Br["Katakana Phonetic Extensions"](t)||(!(!Br.Katakana(t)||12540===t)||(!(!Br["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||(!(!Br["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(!!Br["Unified Canadian Aboriginal Syllabics"](t)||(!!Br["Unified Canadian Aboriginal Syllabics Extended"](t)||(!!Br["Vertical Forms"](t)||(!!Br["Yijing Hexagram Symbols"](t)||(!!Br["Yi Syllables"](t)||!!Br["Yi Radicals"](t))))))))))))))))))))))))))))))}function Er(t){return!(Cr(t)||function(t){return!!(Br["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Br["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Br["Letterlike Symbols"](t)||Br["Number Forms"](t)||Br["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Br["Control Pictures"](t)&&9251!==t||Br["Optical Character Recognition"](t)||Br["Enclosed Alphanumerics"](t)||Br["Geometric Shapes"](t)||Br["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Br["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Br["CJK Symbols and Punctuation"](t)||Br.Katakana(t)||Br["Private Use Area"](t)||Br["CJK Compatibility Forms"](t)||Br["Small Form Variants"](t)||Br["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Tr(t,e){return!(!e&&(t>=1424&&t<=2303||Br["Arabic Presentation Forms-A"](t)||Br["Arabic Presentation Forms-B"](t)))&&!(t>=2304&&t<=3583||t>=3840&&t<=4255||Br.Khmer(t))}var Pr,Fr=!1,Lr=null,Or=!1,Dr=new D,qr={applyArabicShaping:null,processBidirectionalText:null,isLoaded:function(){return Or||null!=qr.applyArabicShaping}},jr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mr,this.transition={});};jr.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,n=t;r<n.length;r+=1)if(!Tr(n[r].charCodeAt(0),e))return!1;return!0}(t,qr.isLoaded())},jr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};var Rr=function(t,e){this.property=t,this.value=e,this.expression=Oe(void 0===e?t.specification.default:e,t.specification);};Rr.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Rr.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var Ur=function(t){this.property=t,this.value=new Rr(t,void 0);};Ur.prototype.transitioned=function(t,e){return new Zr(this.property,this.value,e,g({},t.transition,this.transition),t.now)},Ur.prototype.untransitioned=function(){return new Zr(this.property,this.value,null,{},0)};var Nr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues);};Nr.prototype.getValue=function(t){return z(this._values[t].value.value)},Nr.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Ur(this._values[t].property)),this._values[t].value=new Rr(this._values[t].property,null===e?void 0:z(e));},Nr.prototype.getTransition=function(t){return z(this._values[t].transition)},Nr.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Ur(this._values[t].property)),this._values[t].transition=z(e)||void 0;},Nr.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);var a=this.getTransition(n);void 0!==a&&(t[n+"-transition"]=a);}return t},Nr.prototype.transitioned=function(t,e){for(var r=new Xr(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].transitioned(t,e._values[a]);}return r},Nr.prototype.untransitioned=function(){for(var t=new Xr(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e];t._values[n]=this._values[n].untransitioned();}return t};var Zr=function(t,e,r,n,i){this.property=t,this.value=e,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r);};Zr.prototype.possiblyEvaluate=function(t){var e=t.now||0,r=this.value.possiblyEvaluate(t),n=this.prior;if(n){if(e>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(e<this.begin)return n.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(t),r,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}(i))}return r};var Xr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues);};Xr.prototype.possiblyEvaluate=function(t){for(var e=new Gr(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];e._values[i]=this._values[i].possiblyEvaluate(t);}return e},Xr.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t];if(this._values[r].prior)return!0}return!1};var $r=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues);};$r.prototype.getValue=function(t){return z(this._values[t].value)},$r.prototype.setValue=function(t,e){this._values[t]=new Rr(this._values[t].property,null===e?void 0:z(e));},$r.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);}return t},$r.prototype.possiblyEvaluate=function(t){for(var e=new Gr(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];e._values[i]=this._values[i].possiblyEvaluate(t);}return e};var Jr=function(t,e,r){this.property=t,this.value=e,this.globals=r;};Jr.prototype.isConstant=function(){return"constant"===this.value.kind},Jr.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Jr.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.globals,t,e)};var Gr=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues);};Gr.prototype.get=function(t){return this._values[t]};var Hr=function(t){this.specification=t;};Hr.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Hr.prototype.interpolate=function(t,e,r){var n=It[this.specification.type];return n?n(t,e,r):t};var Kr=function(t){this.specification=t;};Kr.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Jr(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Jr(this,t.expression,e)},Kr.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Jr(this,{kind:"constant",value:void 0},t.globals);var n=It[this.specification.type];return n?new Jr(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.globals):t},Kr.prototype.evaluate=function(t,e,r,n){return"constant"===t.kind?t.value:t.evaluate(e,r,n)};var Yr=function(t){this.specification=t;};Yr.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var r=t.expression.evaluate(e);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new jr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new jr(Math.floor(e.zoom),e)),t.expression.evaluate(new jr(Math.floor(e.zoom+1),e)),e)}},Yr.prototype._calculate=function(t,e,r,n){var i=n.zoom,a=i-Math.floor(i),o=n.crossFadingFactor();return i>n.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:a+(1-a)*o}:{from:r,to:e,fromScale:.5,toScale:1,t:1-(1-o)*a}},Yr.prototype.interpolate=function(t){return t};var Wr=function(t){this.specification=t;};Wr.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Wr.prototype.interpolate=function(){return!1};var Qr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var r=t[e],n=this.defaultPropertyValues[e]=new Rr(r,void 0),i=this.defaultTransitionablePropertyValues[e]=new Ur(r);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({});}};Ar("DataDrivenProperty",Kr),Ar("DataConstantProperty",Hr),Ar("CrossFadedProperty",Yr),Ar("ColorRampProperty",Wr);var tn=function(t){function e(e,r){for(var n in t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.visibility="visible","background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this._featureFilter=function(){return!0},r.layout&&(this._unevaluatedLayout=new $r(r.layout)),this._transitionablePaint=new Nr(r.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){if(null!=e){var n="layers."+this.id+".layout."+t;if(this._validate(mr,n,t,e,r))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible";},e.prototype.getPaintProperty=function(t){return _(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(null!=e){var n="layers."+this.id+".paint."+t;if(this._validate(dr,n,t,e,r))return!1}if(_(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var a=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),a||i},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||(!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility)},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint);},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t);},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),k(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,r,n,i){return(!i||!1!==i.validate)&&vr(this,t.call(fr,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:q,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Jr&&te(e.property.specification)&&(("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent))return!0}return!1},e}(D),en={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},rn=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8;},nn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0);};function an(t,e){void 0===e&&(e=1);var r=0,n=0;return{members:t.map(function(t){var i,a=(i=t.type,en[i].BYTES_PER_ELEMENT),o=r=on(r,Math.max(e,a)),s=t.components||1;return n=Math.max(n,a),r+=a*s,{name:t.name,type:t.type,components:s,offset:o}}),size:on(r,Math.max(n,e)),alignment:e}}function on(t,e){return Math.ceil(t/e)*e}nn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},nn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},nn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews());},nn.prototype.clear=function(){this.length=0;},nn.prototype.resize=function(t){this.reserve(t),this.length=t;},nn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e);}},nn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var sn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e){var r=this.length;this.resize(r+1);var n=2*r;return this.int16[n+0]=t,this.int16[n+1]=e,r},e.prototype.emplace=function(t,e,r){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t},e}(nn);sn.prototype.bytesPerElement=4,Ar("StructArrayLayout2i4",sn);var un=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;this.resize(i+1);var a=4*i;return this.int16[a+0]=t,this.int16[a+1]=e,this.int16[a+2]=r,this.int16[a+3]=n,i},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,t},e}(nn);un.prototype.bytesPerElement=8,Ar("StructArrayLayout4i8",un);var ln=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=i,this.int16[s+5]=a,o},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(nn);ln.prototype.bytesPerElement=12,Ar("StructArrayLayout2i4i12",ln);var pn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;this.resize(u+1);var l=6*u,p=12*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=r,this.int16[l+3]=n,this.uint8[p+8]=i,this.uint8[p+9]=a,this.uint8[p+10]=o,this.uint8[p+11]=s,u},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=6*t,p=12*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+3]=i,this.uint8[p+8]=a,this.uint8[p+9]=o,this.uint8[p+10]=s,this.uint8[p+11]=u,t},e}(nn);pn.prototype.bytesPerElement=12,Ar("StructArrayLayout4i4ub12",pn);var hn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;this.resize(u+1);var l=8*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=r,this.int16[l+3]=n,this.uint16[l+4]=i,this.uint16[l+5]=a,this.uint16[l+6]=o,this.uint16[l+7]=s,u},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+3]=i,this.uint16[l+4]=a,this.uint16[l+5]=o,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(nn);hn.prototype.bytesPerElement=16,Ar("StructArrayLayout4i4ui16",hn);var cn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r){var n=this.length;this.resize(n+1);var i=3*n;return this.float32[i+0]=t,this.float32[i+1]=e,this.float32[i+2]=r,n},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t},e}(nn);cn.prototype.bytesPerElement=12,Ar("StructArrayLayout3f12",cn);var fn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var r=1*e;return this.uint32[r+0]=t,e},e.prototype.emplace=function(t,e){var r=1*t;return this.uint32[r+0]=e,t},e}(nn);fn.prototype.bytesPerElement=4,Ar("StructArrayLayout1ul4",fn);var yn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p){var h=this.length;this.resize(h+1);var c=12*h,f=6*h;return this.int16[c+0]=t,this.int16[c+1]=e,this.int16[c+2]=r,this.int16[c+3]=n,this.int16[c+4]=i,this.int16[c+5]=a,this.uint32[f+3]=o,this.uint16[c+8]=s,this.uint16[c+9]=u,this.int16[c+10]=l,this.int16[c+11]=p,h},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,h){var c=12*t,f=6*t;return this.int16[c+0]=e,this.int16[c+1]=r,this.int16[c+2]=n,this.int16[c+3]=i,this.int16[c+4]=a,this.int16[c+5]=o,this.uint32[f+3]=s,this.uint16[c+8]=u,this.uint16[c+9]=l,this.int16[c+10]=p,this.int16[c+11]=h,t},e}(nn);yn.prototype.bytesPerElement=24,Ar("StructArrayLayout6i1ul2ui2i24",yn);var dn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=i,this.int16[s+5]=a,o},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(nn);dn.prototype.bytesPerElement=12,Ar("StructArrayLayout2i2i2i12",dn);var mn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e){var r=this.length;this.resize(r+1);var n=4*r;return this.uint8[n+0]=t,this.uint8[n+1]=e,r},e.prototype.emplace=function(t,e,r){var n=4*t;return this.uint8[n+0]=e,this.uint8[n+1]=r,t},e}(nn);mn.prototype.bytesPerElement=4,Ar("StructArrayLayout2ub4",mn);var vn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,h,c,f){var y=this.length;this.resize(y+1);var d=20*y,m=10*y,v=40*y;return this.int16[d+0]=t,this.int16[d+1]=e,this.uint16[d+2]=r,this.uint16[d+3]=n,this.uint32[m+2]=i,this.uint32[m+3]=a,this.uint32[m+4]=o,this.uint16[d+10]=s,this.uint16[d+11]=u,this.uint16[d+12]=l,this.float32[m+7]=p,this.float32[m+8]=h,this.uint8[v+36]=c,this.uint8[v+37]=f,y},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,h,c,f,y){var d=20*t,m=10*t,v=40*t;return this.int16[d+0]=e,this.int16[d+1]=r,this.uint16[d+2]=n,this.uint16[d+3]=i,this.uint32[m+2]=a,this.uint32[m+3]=o,this.uint32[m+4]=s,this.uint16[d+10]=u,this.uint16[d+11]=l,this.uint16[d+12]=p,this.float32[m+7]=h,this.float32[m+8]=c,this.uint8[v+36]=f,this.uint8[v+37]=y,t},e}(nn);vn.prototype.bytesPerElement=40,Ar("StructArrayLayout2i2ui3ul3ui2f2ub40",vn);var gn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var r=1*e;return this.float32[r+0]=t,e},e.prototype.emplace=function(t,e){var r=1*t;return this.float32[r+0]=e,t},e}(nn);gn.prototype.bytesPerElement=4,Ar("StructArrayLayout1f4",gn);var xn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r){var n=this.length;this.resize(n+1);var i=3*n;return this.int16[i+0]=t,this.int16[i+1]=e,this.int16[i+2]=r,n},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t},e}(nn);xn.prototype.bytesPerElement=6,Ar("StructArrayLayout3i6",xn);var bn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r){var n=this.length;this.resize(n+1);var i=2*n,a=4*n;return this.uint32[i+0]=t,this.uint16[a+2]=e,this.uint16[a+3]=r,n},e.prototype.emplace=function(t,e,r,n){var i=2*t,a=4*t;return this.uint32[i+0]=e,this.uint16[a+2]=r,this.uint16[a+3]=n,t},e}(nn);bn.prototype.bytesPerElement=8,Ar("StructArrayLayout1ul2ui8",bn);var wn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r){var n=this.length;this.resize(n+1);var i=3*n;return this.uint16[i+0]=t,this.uint16[i+1]=e,this.uint16[i+2]=r,n},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t},e}(nn);wn.prototype.bytesPerElement=6,Ar("StructArrayLayout3ui6",wn);var _n=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e){var r=this.length;this.resize(r+1);var n=2*r;return this.uint16[n+0]=t,this.uint16[n+1]=e,r},e.prototype.emplace=function(t,e,r){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t},e}(nn);_n.prototype.bytesPerElement=4,Ar("StructArrayLayout2ui4",_n);var An=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e){var r=this.length;this.resize(r+1);var n=2*r;return this.float32[n+0]=t,this.float32[n+1]=e,r},e.prototype.emplace=function(t,e,r){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t},e}(nn);An.prototype.bytesPerElement=8,Ar("StructArrayLayout2f8",An);var kn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;this.resize(i+1);var a=4*i;return this.float32[a+0]=t,this.float32[a+1]=e,this.float32[a+2]=r,this.float32[a+3]=n,i},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,t},e}(nn);kn.prototype.bytesPerElement=16,Ar("StructArrayLayout4f16",kn);var zn=function(t){function e(){t.apply(this,arguments);}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t;},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t;},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(t){this._structArray.int16[this._pos2+2]=t;},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(t){this._structArray.int16[this._pos2+3]=t;},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(t){this._structArray.int16[this._pos2+4]=t;},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(t){this._structArray.int16[this._pos2+5]=t;},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t;},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t;},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t;},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(t){this._structArray.int16[this._pos2+10]=t;},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t;},r.anchorPoint.get=function(){return new c(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(rn);zn.prototype.size=24;var Sn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new zn(this,t)},e}(yn);Ar("CollisionBoxArray",Sn);var Mn=function(t){function e(){t.apply(this,arguments);}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t;},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t;},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t;},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t;},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t;},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t;},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t;},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t;},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t;},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t;},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t;},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t;},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t;},r.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t;},Object.defineProperties(e.prototype,r),e}(rn);Mn.prototype.size=40;var Bn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Mn(this,t)},e}(vn);Ar("PlacedSymbolArray",Bn);var Vn=function(t){function e(){t.apply(this,arguments);}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t;},Object.defineProperties(e.prototype,r),e}(rn);Vn.prototype.size=4;var In=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new Vn(this,t)},e}(gn);Ar("GlyphOffsetArray",In);var Cn=function(t){function e(){t.apply(this,arguments);}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(t){this._structArray.int16[this._pos2+0]=t;},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(t){this._structArray.int16[this._pos2+1]=t;},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t;},Object.defineProperties(e.prototype,r),e}(rn);Cn.prototype.size=6;var En=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new Cn(this,t)},e}(xn);Ar("SymbolLineVertexArray",En);var Tn=function(t){function e(){t.apply(this,arguments);}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t;},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t;},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t;},Object.defineProperties(e.prototype,r),e}(rn);Tn.prototype.size=8;var Pn=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Tn(this,t)},e}(bn);Ar("FeatureIndexArray",Pn);var Fn=an([{name:"a_pos",components:2,type:"Int16"}],4).members,Ln=function(t){void 0===t&&(t=[]),this.segments=t;};Ln.prototype.prepareSegment=function(t,e,r){var n=this.segments[this.segments.length-1];return t>Ln.MAX_VERTEX_ARRAY_LENGTH&&M("Max vertices per segment is "+Ln.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!n||n.vertexLength+t>Ln.MAX_VERTEX_ARRAY_LENGTH)&&(n={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},this.segments.push(n)),n},Ln.prototype.get=function(){return this.segments},Ln.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var n in r.vaos)r.vaos[n].destroy();}},Ln.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ar("SegmentVector",Ln);var On=function(t,e){return 256*(t=v(Math.floor(t),0,255))+(e=v(Math.floor(e),0,255))};function Dn(t){return[On(255*t.r,255*t.g),On(255*t.b,255*t.a)]}var qn=function(t,e,r){this.value=t,this.name=e,this.type=r,this.statistics={max:-1/0};};qn.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},qn.prototype.populatePaintArray=function(){},qn.prototype.updatePaintArray=function(){},qn.prototype.upload=function(){},qn.prototype.destroy=function(){},qn.prototype.setUniforms=function(t,e,r,n){var i=n.constantOr(this.value),a=t.gl;"color"===this.type?a.uniform4f(e.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):a.uniform1f(e.uniforms["u_"+this.name],i);};var jn=function(t,e,r){this.expression=t,this.name=e,this.type=r,this.statistics={max:-1/0};var n="color"===r?An:gn;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===r?2:1,offset:0}],this.paintVertexArray=new n;};jn.prototype.defines=function(){return[]},jn.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var i=this.expression.evaluate(new jr(0),e,{});if("color"===this.type)for(var a=Dn(i),o=n;o<t;o++)r.emplaceBack(a[0],a[1]);else{for(var s=n;s<t;s++)r.emplaceBack(i);this.statistics.max=Math.max(this.statistics.max,i);}},jn.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:0},r,n);if("color"===this.type)for(var o=Dn(a),s=t;s<e;s++)i.emplace(s,o[0],o[1]);else{for(var u=t;u<e;u++)i.emplace(u,a);this.statistics.max=Math.max(this.statistics.max,a);}},jn.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));},jn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();},jn.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0);};var Rn=function(t,e,r,n,i){this.expression=t,this.name=e,this.type=r,this.useIntegerZoom=n,this.zoom=i,this.statistics={max:-1/0};var a="color"===r?kn:An;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===r?4:2,offset:0}],this.paintVertexArray=new a;};Rn.prototype.defines=function(){return[]},Rn.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var i=this.expression.evaluate(new jr(this.zoom),e,{}),a=this.expression.evaluate(new jr(this.zoom+1),e,{});if("color"===this.type)for(var o=Dn(i),s=Dn(a),u=n;u<t;u++)r.emplaceBack(o[0],o[1],s[0],s[1]);else{for(var l=n;l<t;l++)r.emplaceBack(i,a);this.statistics.max=Math.max(this.statistics.max,i,a);}},Rn.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:this.zoom},r,n),o=this.expression.evaluate({zoom:this.zoom+1},r,n);if("color"===this.type)for(var s=Dn(a),u=Dn(o),l=t;l<e;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var p=t;p<e;p++)i.emplace(p,a,o);this.statistics.max=Math.max(this.statistics.max,a,o);}},Rn.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));},Rn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();},Rn.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},Rn.prototype.setUniforms=function(t,e,r){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(r.zoom));};var Un=function(){this.binders={},this.cacheKey="",this._buffers=[],this._idMap={},this._bufferOffset=0;};Un.createDynamic=function(t,e,r){var n=new Un,i=[];for(var a in t.paint._values)if(r(a)){var o=t.paint.get(a);if(o instanceof Jr&&te(o.property.specification)){var s=Zn(a,t.type),u=o.property.specification.type,l=o.property.useIntegerZoom;"constant"===o.value.kind?(n.binders[a]=new qn(o.value,s,u),i.push("/u_"+s)):"source"===o.value.kind?(n.binders[a]=new jn(o.value,s,u),i.push("/a_"+s)):(n.binders[a]=new Rn(o.value,s,u,l,e),i.push("/z_"+s));}}return n.cacheKey=i.sort().join(""),n},Un.prototype.populatePaintArrays=function(t,e,r){for(var n in this.binders)this.binders[n].populatePaintArray(t,e);if(e.id){var i=String(e.id);this._idMap[i]=this._idMap[i]||[],this._idMap[i].push({index:r,start:this._bufferOffset,end:t});}this._bufferOffset=t;},Un.prototype.updatePaintArrays=function(t,e,r){var n=!1;for(var i in t){var a=this._idMap[i];if(a)for(var o=t[i],s=0,u=a;s<u.length;s+=1){var l=u[s],p=e.feature(l.index);for(var h in this.binders){var c=this.binders[h];if(!(c instanceof qn)&&!0===c.expression.isStateDependent){var f=r.paint.get(h);c.expression=f.value,c.updatePaintArray(l.start,l.end,p,o),n=!0;}}}}return n},Un.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},Un.prototype.setUniforms=function(t,e,r,n){for(var i in this.binders){this.binders[i].setUniforms(t,e,n,r.get(i));}},Un.prototype.getPaintVertexBuffers=function(){return this._buffers},Un.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof jn||i instanceof Rn)&&i.paintVertexBuffer&&r.push(i.paintVertexBuffer);}this._buffers=r;},Un.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy();};var Nn=function(t,e,r,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,a=e;i<a.length;i+=1){var o=a[i];this.programConfigurations[o.id]=Un.createDynamic(o,r,n),this.programConfigurations[o.id].layoutAttributes=t;}this.needsUpload=!1;};function Zn(t,e){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[t]||t.replace(e+"-","").replace(/-/g,"_")}Nn.prototype.populatePaintArrays=function(t,e,r){for(var n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e,r);this.needsUpload=!0;},Nn.prototype.updatePaintArrays=function(t,e,r){for(var n=0,i=r;n<i.length;n+=1){var a=i[n];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,e,a)||this.needsUpload;}},Nn.prototype.get=function(t){return this.programConfigurations[t]},Nn.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1;}},Nn.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy();},Ar("ConstantBinder",qn),Ar("SourceExpressionBinder",jn),Ar("CompositeExpressionBinder",Rn),Ar("ProgramConfiguration",Un,{omit:["_buffers"]}),Ar("ProgramConfigurationSet",Nn);var Xn=8192;var $n,Jn=($n=16,{min:-1*Math.pow(2,$n-1),max:Math.pow(2,$n-1)-1});function Gn(t){for(var e=Xn/t.extent,r=t.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],a=0;a<i.length;a++){var o=i[a];o.x=Math.round(o.x*e),o.y=Math.round(o.y*e),(o.x<Jn.min||o.x>Jn.max||o.y<Jn.min||o.y>Jn.max)&&M("Geometry exceeds allowed extent, reduce your vector tile buffer size");}return r}function Hn(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2);}var Kn=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new sn,this.indexArray=new wn,this.segments=new Ln,this.programConfigurations=new Nn(Fn,t.layers,t.zoom);};function Yn(t,e,r){for(var n=0;n<t.length;n++){var i=t[n];if(oi(i,e))return!0;if(ni(e,i,r))return!0}return!1}function Wn(t,e){if(1===t.length&&1===t[0].length)return ai(e,t[0][0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(ai(t,n[i]))return!0;for(var a=0;a<t.length;a++){for(var o=t[a],s=0;s<o.length;s++)if(ai(e,o[s]))return!0;for(var u=0;u<e.length;u++)if(ei(o,e[u]))return!0}return!1}function Qn(t,e,r){for(var n=0;n<e.length;n++)for(var i=e[n],a=0;a<t.length;a++){var o=t[a];if(o.length>=3)for(var s=0;s<i.length;s++)if(oi(o,i[s]))return!0;if(ti(o,i,r))return!0}return!1}function ti(t,e,r){if(t.length>1){if(ei(t,e))return!0;for(var n=0;n<e.length;n++)if(ni(e[n],t,r))return!0}for(var i=0;i<t.length;i++)if(ni(t[i],e,r))return!0;return!1}function ei(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var n=t[r],i=t[r+1],a=0;a<e.length-1;a++){if(ri(n,i,e[a],e[a+1]))return!0}return!1}function ri(t,e,r,n){return B(t,r,n)!==B(e,r,n)&&B(t,e,r)!==B(t,e,n)}function ni(t,e,r){var n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(var i=1;i<e.length;i++){if(ii(t,e[i-1],e[i])<n)return!0}return!1}function ii(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return i<0?t.distSqr(e):i>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(i)._add(e))}function ai(t,e){for(var r,n,i,a=!1,o=0;o<t.length;o++)for(var s=0,u=(r=t[o]).length-1;s<r.length;u=s++)n=r[s],i=r[u],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(a=!a);return a}function oi(t,e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var a=t[n],o=t[i];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(r=!r);}return r}function si(t,e,r){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:r.programConfigurations.get(e.id).binders[t].statistics.max}function ui(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function li(t,e,r,n,i){if(!e[0]&&!e[1])return t;var a=c.convert(e);"viewport"===r&&a._rotate(-n);for(var o=[],s=0;s<t.length;s++){for(var u=t[s],l=[],p=0;p<u.length;p++)l.push(u[p].sub(a._mult(i)));o.push(l);}return o}Kn.prototype.populate=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new jr(this.zoom),a)){var u=Gn(a);this.addFeature(a,u,o),e.featureIndex.insert(a,u,o,s,this.index);}}},Kn.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers);},Kn.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Kn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Kn.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Fn),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0;},Kn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());},Kn.prototype.addFeature=function(t,e,r){for(var n=0,i=e;n<i.length;n+=1)for(var a=0,o=i[n];a<o.length;a+=1){var s=o[a],u=s.x,l=s.y;if(!(u<0||u>=Xn||l<0||l>=Xn)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=p.vertexLength;Hn(this.layoutVertexArray,u,l,-1,-1),Hn(this.layoutVertexArray,u,l,1,-1),Hn(this.layoutVertexArray,u,l,1,1),Hn(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),p.vertexLength+=4,p.primitiveLength+=2;}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r);},Ar("CircleBucket",Kn,{omit:["layers"]});var pi={paint:new Qr({"circle-radius":new Kr(q.paint_circle["circle-radius"]),"circle-color":new Kr(q.paint_circle["circle-color"]),"circle-blur":new Kr(q.paint_circle["circle-blur"]),"circle-opacity":new Kr(q.paint_circle["circle-opacity"]),"circle-translate":new Hr(q.paint_circle["circle-translate"]),"circle-translate-anchor":new Hr(q.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Hr(q.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Hr(q.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Kr(q.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Kr(q.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Kr(q.paint_circle["circle-stroke-opacity"])})},hi="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;function ci(){var t=new hi(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function fi(){var t=new hi(3);return t[0]=0,t[1]=0,t[2]=0,t}function yi(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function di(t,e,r){var n=new hi(3);return n[0]=t,n[1]=e,n[2]=r,n}function mi(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function vi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gi(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2];return t[0]=i*u-a*s,t[1]=a*o-n*u,t[2]=n*s-i*o,t}var xi,bi=yi,wi=(xi=fi(),function(t,e,r,n,i,a){var o,s;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,o=r;o<s;o+=e)xi[0]=t[o],xi[1]=t[o+1],xi[2]=t[o+2],i(xi,xi,a),t[o]=xi[0],t[o+1]=xi[1],t[o+2]=xi[2];return t});function _i(){var t=new hi(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Ai(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o),t}function ki(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}var zi=function(){var t=_i();return function(e,r,n,i,a,o){var s,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Si(){var t=new hi(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Mi(t,e,r,n){var i,a,o,s,u,l=e[0],p=e[1],h=e[2],c=e[3],f=r[0],y=r[1],d=r[2],m=r[3];return(a=l*f+p*y+h*d+c*m)<0&&(a=-a,f=-f,y=-y,d=-d,m=-m),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,u=Math.sin(n*i)/o):(s=1-n,u=n),t[0]=s*l+u*f,t[1]=s*p+u*y,t[2]=s*h+u*d,t[3]=s*c+u*m,t}var Bi,Vi,Ii,Ci,Ei,Ti,Pi=Ai;Bi=fi(),Vi=di(1,0,0),Ii=di(0,1,0),Ci=Si(),Ei=Si(),Ti=ci();!function(){var t,e=((t=new hi(2))[0]=0,t[1]=0,t);}();var Fi=function(t){function e(e){t.call(this,e,pi);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Kn(t)},e.prototype.queryRadius=function(t){var e=t;return si("circle-radius",this,e)+si("circle-stroke-width",this,e)+ui(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o,s){for(var u=li(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),l=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),p="map"===this.paint.get("circle-pitch-alignment"),h=p?u:function(t,e,r){return t.map(function(t){return t.map(function(t){return Li(t,e,r)})})}(u,s,a),c=p?l*o:l,f=0,y=n;f<y.length;f+=1)for(var d=0,m=y[f];d<m.length;d+=1){var v=m[d],g=p?v:Li(v,s,a),x=c,b=ki([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?x*=b[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(x*=a.cameraToCenterDistance/b[3]),Yn(h,g,x))return!0}return!1},e}(tn);function Li(t,e,r){var n=ki([],[t.x,t.y,0,1],e);return new c((n[0]/n[3]+1)*r.width*.5,(n[1]/n[3]+1)*r.height*.5)}var Oi=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Kn);function Di(t,e,r,n){var i=e.width,a=e.height;if(n){if(n.length!==i*a*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*a*r);return t.width=i,t.height=a,t.data=n,t}function qi(t,e,r){var n=e.width,i=e.height;if(n!==t.width||i!==t.height){var a=Di({},{width:n,height:i},r);ji(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=a.data;}}function ji(t,e,r,n,i,a){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((r.y+u)*t.width+r.x)*a,p=((n.y+u)*e.width+n.x)*a,h=0;h<i.width*a;h++)s[p+h]=o[l+h];return e}Ar("HeatmapBucket",Oi,{omit:["layers"]});var Ri=function(t,e){Di(this,t,1,e);};Ri.prototype.resize=function(t){qi(this,t,1);},Ri.prototype.clone=function(){return new Ri({width:this.width,height:this.height},new Uint8Array(this.data))},Ri.copy=function(t,e,r,n,i){ji(t,e,r,n,i,1);};var Ui=function(t,e){Di(this,t,4,e);};Ui.prototype.resize=function(t){qi(this,t,4);},Ui.prototype.clone=function(){return new Ui({width:this.width,height:this.height},new Uint8Array(this.data))},Ui.copy=function(t,e,r,n,i){ji(t,e,r,n,i,4);},Ar("AlphaImage",Ri),Ar("RGBAImage",Ui);var Ni={paint:new Qr({"heatmap-radius":new Kr(q.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Kr(q.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Hr(q.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wr(q.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Hr(q.paint_heatmap["heatmap-opacity"])})};function Zi(t,e){for(var r=new Uint8Array(1024),n={},i=0,a=0;i<256;i++,a+=4){n[e]=i/255;var o=t.evaluate(n);r[a+0]=Math.floor(255*o.r/o.a),r[a+1]=Math.floor(255*o.g/o.a),r[a+2]=Math.floor(255*o.b/o.a),r[a+3]=Math.floor(255*o.a);}return new Ui({width:256,height:1},r)}var Xi=function(t){function e(e){t.call(this,e,Ni),this._updateColorRamp();}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Oi(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp();},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Zi(t,"heatmapDensity"),this.colorRampTexture=null;},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null);},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(tn),$i={paint:new Qr({"hillshade-illumination-direction":new Hr(q.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Hr(q.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Hr(q.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Hr(q.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Hr(q.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Hr(q.paint_hillshade["hillshade-accent-color"])})},Ji=function(t){function e(e){t.call(this,e,$i);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(tn),Gi=an([{name:"a_pos",components:2,type:"Int16"}],4).members,Hi=Yi,Ki=Yi;function Yi(t,e,r){r=r||2;var n,i,a,o,s,u,l,p=e&&e.length,h=p?e[0]*r:t.length,c=Wi(t,0,h,r,!0),f=[];if(!c)return f;if(p&&(c=function(t,e,r,n){var i,a,o,s,u,l=[];for(i=0,a=e.length;i<a;i++)o=e[i]*n,s=i<a-1?e[i+1]*n:t.length,(u=Wi(t,o,s,n,!1))===u.next&&(u.steiner=!0),l.push(ua(u));for(l.sort(aa),i=0;i<l.length;i++)oa(l[i],r),r=Qi(r,r.next);return r}(t,e,c,r)),t.length>80*r){n=a=t[0],i=o=t[1];for(var y=r;y<h;y+=r)(s=t[y])<n&&(n=s),(u=t[y+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-n,o-i))?1/l:0;}return ta(c,f,r,n,i,l),f}function Wi(t,e,r,n,i){var a,o;if(i===xa(t,e,r,n)>0)for(a=e;a<r;a+=n)o=ma(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=ma(a,t[a],t[a+1],o);return o&&ca(o,o.next)&&(va(o),o=o.next),o}function Qi(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!ca(n,n.next)&&0!==ha(n.prev,n,n.next))n=n.next;else{if(va(n),(n=e=n.prev)===n.next)break;r=!0;}}while(r||n!==e);return e}function ta(t,e,r,n,i,a,o){if(t){!o&&a&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=sa(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,a,o,s,u,l=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,n=r,s=0,e=0;e<l&&(s++,n=n.nextZ);e++);for(u=l;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=n;}a.nextZ=null,l*=2;}while(o>1)}(i);}(t,n,i,a);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?ra(t,n,i,a):ea(t))e.push(s.i/r),e.push(t.i/r),e.push(u.i/r),va(t),t=u.next,l=u.next;else if((t=u)===l){o?1===o?ta(t=na(t,e,r),e,r,n,i,a,2):2===o&&ia(t,e,r,n,i,a):ta(Qi(t),e,r,n,i,a,1);break}}}function ea(t){var e=t.prev,r=t,n=t.next;if(ha(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(la(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&ha(i.prev,i,i.next)>=0)return!1;i=i.next;}return!0}function ra(t,e,r,n){var i=t.prev,a=t,o=t.next;if(ha(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,p=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=sa(s,u,e,r,n),c=sa(l,p,e,r,n),f=t.prevZ,y=t.nextZ;f&&f.z>=h&&y&&y.z<=c;){if(f!==t.prev&&f!==t.next&&la(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&ha(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,y!==t.prev&&y!==t.next&&la(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&ha(y.prev,y,y.next)>=0)return!1;y=y.nextZ;}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&la(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&ha(f.prev,f,f.next)>=0)return!1;f=f.prevZ;}for(;y&&y.z<=c;){if(y!==t.prev&&y!==t.next&&la(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&ha(y.prev,y,y.next)>=0)return!1;y=y.nextZ;}return!0}function na(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!ca(i,a)&&fa(i,n,n.next,a)&&ya(i,a)&&ya(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),va(n),va(n.next),n=t=a),n=n.next;}while(n!==t);return n}function ia(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&pa(o,s)){var u=da(o,s);return o=Qi(o,o.next),u=Qi(u,u.next),ta(o,e,r,n,i,a),void ta(u,e,r,n,i,a)}s=s.next;}o=o.next;}while(o!==t)}function aa(t,e){return t.x-e.x}function oa(t,e){if(e=function(t,e){var r,n=e,i=t.x,a=t.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next;}}n=n.next;}while(n!==e);if(!r)return null;if(i===o)return r.prev;var u,l=r,p=r.x,h=r.y,c=1/0;n=r.next;for(;n!==l;)i>=n.x&&n.x>=p&&i!==n.x&&la(a<h?i:o,a,p,h,a<h?o:i,a,n.x,n.y)&&((u=Math.abs(a-n.y)/(i-n.x))<c||u===c&&n.x>r.x)&&ya(n,t)&&(r=n,c=u),n=n.next;return r}(t,e)){var r=da(e,t);Qi(r,r.next);}}function sa(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ua(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next;}while(e!==t);return r}function la(t,e,r,n,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function pa(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&fa(r,r.next,t,e))return!0;r=r.next;}while(r!==t);return!1}(t,e)&&ya(t,e)&&ya(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;}while(r!==t);return n}(t,e)}function ha(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function ca(t,e){return t.x===e.x&&t.y===e.y}function fa(t,e,r,n){return!!(ca(t,e)&&ca(r,n)||ca(t,n)&&ca(r,e))||ha(t,e,r)>0!=ha(t,e,n)>0&&ha(r,n,t)>0!=ha(r,n,e)>0}function ya(t,e){return ha(t.prev,t,t.next)<0?ha(t,e,t.next)>=0&&ha(t,t.prev,e)>=0:ha(t,e,t.prev)<0||ha(t,t.next,e)<0}function da(t,e){var r=new ga(t.i,t.x,t.y),n=new ga(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function ma(t,e,r,n){var i=new ga(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function va(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ);}function ga(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1;}function xa(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}Yi.deviation=function(t,e,r,n){var i=e&&e.length,a=i?e[0]*r:t.length,o=Math.abs(xa(t,0,a,r));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*r,p=s<u-1?e[s+1]*r:t.length;o-=Math.abs(xa(t,l,p,r));}var h=0;for(s=0;s<n.length;s+=3){var c=n[s]*r,f=n[s+1]*r,y=n[s+2]*r;h+=Math.abs((t[c]-t[y])*(t[f+1]-t[c+1])-(t[c]-t[f])*(t[y+1]-t[c+1]));}return 0===o&&0===h?0:Math.abs((h-o)/o)},Yi.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)r.vertices.push(t[i][a][o]);i>0&&(n+=t[i-1].length,r.holes.push(n));}return r},Hi.default=Ki;var ba=_a,wa=_a;function _a(t,e,r,n,i){!function t(e,r,n,i,a){for(;i>n;){if(i-n>600){var o=i-n+1,s=r-n+1,u=Math.log(o),l=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*l*(o-l)/o)*(s-o/2<0?-1:1),h=Math.max(n,Math.floor(r-s*l/o+p)),c=Math.min(i,Math.floor(r+(o-s)*l/o+p));t(e,r,h,c,a);}var f=e[r],y=n,d=i;for(Aa(e,n,r),a(e[i],f)>0&&Aa(e,n,i);y<d;){for(Aa(e,y,d),y++,d--;a(e[y],f)<0;)y++;for(;a(e[d],f)>0;)d--;}0===a(e[n],f)?Aa(e,n,d):Aa(e,++d,i),d<=r&&(n=d+1),r<=d&&(i=d-1);}}(t,e,r||0,n||t.length-1,i||ka);}function Aa(t,e,r){var n=t[e];t[e]=t[r],t[r]=n;}function ka(t,e){return t<e?-1:t>e?1:0}function za(t,e){var r=t.length;if(r<=1)return[t];for(var n,i,a=[],o=0;o<r;o++){var s=V(t[o]);0!==s&&(t[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&a.push(n),n=[t[o]]):n.push(t[o]));}if(n&&a.push(n),e>1)for(var u=0;u<a.length;u++)a[u].length<=e||(ba(a[u],e,1,a[u].length-1,Sa),a[u]=a[u].slice(0,e));return a}function Sa(t,e){return e.area-t.area}ba.default=wa;var Ma=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new sn,this.indexArray=new wn,this.indexArray2=new _n,this.programConfigurations=new Nn(Gi,t.layers,t.zoom),this.segments=new Ln,this.segments2=new Ln;};Ma.prototype.populate=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new jr(this.zoom),a)){var u=Gn(a);this.addFeature(a,u,o),e.featureIndex.insert(a,u,o,s,this.index);}}},Ma.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers);},Ma.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ma.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ma.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gi),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0;},Ma.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy());},Ma.prototype.addFeature=function(t,e,r){for(var n=0,i=za(e,500);n<i.length;n+=1){for(var a=i[n],o=0,s=0,u=a;s<u.length;s+=1){o+=u[s].length;}for(var l=this.segments.prepareSegment(o,this.layoutVertexArray,this.indexArray),p=l.vertexLength,h=[],c=[],f=0,y=a;f<y.length;f+=1){var d=y[f];if(0!==d.length){d!==a[0]&&c.push(h.length/2);var m=this.segments2.prepareSegment(d.length,this.layoutVertexArray,this.indexArray2),v=m.vertexLength;this.layoutVertexArray.emplaceBack(d[0].x,d[0].y),this.indexArray2.emplaceBack(v+d.length-1,v),h.push(d[0].x),h.push(d[0].y);for(var g=1;g<d.length;g++)this.layoutVertexArray.emplaceBack(d[g].x,d[g].y),this.indexArray2.emplaceBack(v+g-1,v+g),h.push(d[g].x),h.push(d[g].y);m.vertexLength+=d.length,m.primitiveLength+=d.length;}}for(var x=Hi(h,c),b=0;b<x.length;b+=3)this.indexArray.emplaceBack(p+x[b],p+x[b+1],p+x[b+2]);l.vertexLength+=o,l.primitiveLength+=x.length/3;}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r);},Ar("FillBucket",Ma,{omit:["layers"]});var Ba={paint:new Qr({"fill-antialias":new Hr(q.paint_fill["fill-antialias"]),"fill-opacity":new Kr(q.paint_fill["fill-opacity"]),"fill-color":new Kr(q.paint_fill["fill-color"]),"fill-outline-color":new Kr(q.paint_fill["fill-outline-color"]),"fill-translate":new Hr(q.paint_fill["fill-translate"]),"fill-translate-anchor":new Hr(q.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yr(q.paint_fill["fill-pattern"])})},Va=function(t){function e(e){t.call(this,e,Ba);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t);var e=this.paint._values["fill-outline-color"];"constant"===e.value.kind&&void 0===e.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"]);},e.prototype.createBucket=function(t){return new Ma(t)},e.prototype.queryRadius=function(){return ui(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o){return Wn(li(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),n)},e}(tn),Ia=an([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ca=Math.pow(2,13);function Ea(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,2*Math.floor(n*Ca)+o,i*Ca*2,a*Ca*2,Math.round(s));}var Ta=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new ln,this.indexArray=new wn,this.programConfigurations=new Nn(Ia,t.layers,t.zoom),this.segments=new Ln;};function Pa(t,e){return t.x===e.x&&(t.x<0||t.x>Xn)||t.y===e.y&&(t.y<0||t.y>Xn)}function Fa(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>Xn})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>Xn})}Ta.prototype.populate=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new jr(this.zoom),a)){var u=Gn(a);this.addFeature(a,u,o),e.featureIndex.insert(a,u,o,s,this.index);}}},Ta.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers);},Ta.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ta.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ia),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0;},Ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());},Ta.prototype.addFeature=function(t,e,r){for(var n=0,i=za(e,500);n<i.length;n+=1){for(var a=i[n],o=0,s=0,u=a;s<u.length;s+=1){o+=u[s].length;}for(var l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=a;p<h.length;p+=1){var c=h[p];if(0!==c.length&&!Fa(c))for(var f=0,y=0;y<c.length;y++){var d=c[y];if(y>=1){var m=c[y-1];if(!Pa(d,m)){l.vertexLength+4>Ln.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=d.sub(m)._perp()._unit(),g=m.dist(d);f+g>32768&&(f=0),Ea(this.layoutVertexArray,d.x,d.y,v.x,v.y,0,0,f),Ea(this.layoutVertexArray,d.x,d.y,v.x,v.y,0,1,f),f+=g,Ea(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,0,f),Ea(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,1,f);var x=l.vertexLength;this.indexArray.emplaceBack(x,x+1,x+2),this.indexArray.emplaceBack(x+1,x+2,x+3),l.vertexLength+=4,l.primitiveLength+=2;}}}}l.vertexLength+o>Ln.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(o,this.layoutVertexArray,this.indexArray));for(var b=[],w=[],_=l.vertexLength,A=0,k=a;A<k.length;A+=1){var z=k[A];if(0!==z.length){z!==a[0]&&w.push(b.length/2);for(var S=0;S<z.length;S++){var M=z[S];Ea(this.layoutVertexArray,M.x,M.y,0,0,1,1,0),b.push(M.x),b.push(M.y);}}}for(var B=Hi(b,w),V=0;V<B.length;V+=3)this.indexArray.emplaceBack(_+B[V],_+B[V+1],_+B[V+2]);l.primitiveLength+=B.length/3,l.vertexLength+=o;}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r);},Ar("FillExtrusionBucket",Ta,{omit:["layers"]});var La={paint:new Qr({"fill-extrusion-opacity":new Hr(q["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Kr(q["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Hr(q["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Hr(q["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yr(q["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Kr(q["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Kr(q["paint_fill-extrusion"]["fill-extrusion-base"])})},Oa=function(t){function e(e){t.call(this,e,La);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Ta(t)},e.prototype.queryRadius=function(){return ui(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o){return Wn(li(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,o),n)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null);},e}(tn),Da=an([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,qa=ja;function ja(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(Ra,this,e);}function Ra(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){var r=t.readVarint()+t.pos;for(;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i;}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos);}function Ua(t){for(var e,r,n=0,i=0,a=t.length,o=a-1;i<a;o=i++)e=t[i],n+=((r=t[o]).x-e.x)*(e.y+r.y);return n}ja.types=["Unknown","Point","LineString","Polygon"],ja.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,i=0,a=0,o=0,s=[];t.pos<r;){if(i<=0){var u=t.readVarint();n=7&u,i=u>>3;}if(i--,1===n||2===n)a+=t.readSVarint(),o+=t.readSVarint(),1===n&&(e&&s.push(e),e=[]),e.push(new c(a,o));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone());}}return e&&s.push(e),s},ja.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,a=0,o=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(n<=0){var p=t.readVarint();r=7&p,n=p>>3;}if(n--,1===r||2===r)(i+=t.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=t.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,u,s,l]},ja.prototype.toGeoJSON=function(t,e,r){var n,i,a=this.extent*Math.pow(2,r),o=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=ja.types[this.type];function p(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+s)/a;t[e]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90];}}switch(this.type){case 1:var h=[];for(n=0;n<u.length;n++)h[n]=u[n][0];p(u=h);break;case 2:for(n=0;n<u.length;n++)p(u[n]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],a=0;a<e;a++){var o=Ua(t[a]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&i.push(r),r=[t[a]]):r.push(t[a]));}r&&i.push(r);return i}(u),n=0;n<u.length;n++)for(i=0;i<u[n].length;i++)p(u[n][i]);}1===u.length?u=u[0]:l="Multi"+l;var c={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(c.id=this.id),c};var Na=Za;function Za(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Xa,this,e),this.length=this._features.length;}function Xa(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){var e=null,r=t.readVarint()+t.pos;for(;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null;}return e}(r));}function $a(t,e,r){if(3===t){var n=new Na(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n);}}Za.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new qa(this._pbf,e,this.extent,this._keys,this._values)};var Ja={VectorTile:function(t,e){this.layers=t.readFields($a,{},e);},VectorTileFeature:qa,VectorTileLayer:Na},Ga=Ja.VectorTileFeature.types,Ha=63,Ka=Math.cos(Math.PI/180*37.5),Ya=.5,Wa=Math.pow(2,14)/Ya;function Qa(t,e,r,n,i,a,o){t.emplaceBack(e.x,e.y,n?1:0,i?1:-1,Math.round(Ha*r.x)+128,Math.round(Ha*r.y)+128,1+(0===a?0:a<0?-1:1)|(o*Ya&63)<<2,o*Ya>>6);}var to=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new pn,this.indexArray=new wn,this.programConfigurations=new Nn(Da,t.layers,t.zoom),this.segments=new Ln;};function eo(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(Wa-1)}to.prototype.populate=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new jr(this.zoom),a)){var u=Gn(a);this.addFeature(a,u,o),e.featureIndex.insert(a,u,o,s,this.index);}}},to.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers);},to.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},to.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},to.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Da),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0;},to.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());},to.prototype.addFeature=function(t,e,r){for(var n=this.layers[0].layout,i=n.get("line-join").evaluate(t,{}),a=n.get("line-cap"),o=n.get("line-miter-limit"),s=n.get("line-round-limit"),u=0,l=e;u<l.length;u+=1){var p=l[u];this.addLine(p,t,i,a,o,s,r);}},to.prototype.addLine=function(t,e,r,n,i,a,o){var s=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(s={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===Ga[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var p=0;p<l-1&&t[p].equals(t[p+1]);)p++;if(!(l<(u?3:2))){s&&(s.tileTotal=function(t,e,r){for(var n,i,a=0,o=e;o<r-1;o++)n=t[o],i=t[o+1],a+=n.dist(i);return a}(t,p,l)),"bevel"===r&&(i=1.05);var h=Xn/(512*this.overscaling)*15,c=t[p],f=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var y,d,m,v=n,g=u?"butt":n,x=!0,b=void 0,w=void 0,_=void 0,A=void 0;this.e1=this.e2=this.e3=-1,u&&(y=t[l-2],A=c.sub(y)._unit()._perp());for(var k=p;k<l;k++)if(!(w=u&&k===l-1?t[p+1]:t[k+1])||!t[k].equals(w)){A&&(_=A),y&&(b=y),y=t[k],A=w?w.sub(y)._unit()._perp():_;var z=(_=_||A).add(A);0===z.x&&0===z.y||z._unit();var S=z.x*A.x+z.y*A.y,M=0!==S?1/S:1/0,B=S<Ka&&b&&w;if(B&&k>p){var V=y.dist(b);if(V>2*h){var I=y.sub(y.sub(b)._mult(h/V)._round());this.distance+=I.dist(b),this.addCurrentVertex(I,this.distance,_.mult(1),0,0,!1,f,s),b=I;}}var C=b&&w,E=C?r:w?v:g;if(C&&"round"===E&&(M<a?E="miter":M<=2&&(E="fakeround")),"miter"===E&&M>i&&(E="bevel"),"bevel"===E&&(M>2&&(E="flipbevel"),M<i&&(E="miter")),b&&(this.distance+=y.dist(b)),"miter"===E)z._mult(M),this.addCurrentVertex(y,this.distance,z,0,0,!1,f,s);else if("flipbevel"===E){if(M>100)z=A.clone().mult(-1);else{var T=_.x*A.y-_.y*A.x>0?-1:1,P=M*_.add(A).mag()/_.sub(A).mag();z._perp()._mult(P*T);}this.addCurrentVertex(y,this.distance,z,0,0,!1,f,s),this.addCurrentVertex(y,this.distance,z.mult(-1),0,0,!1,f,s);}else if("bevel"===E||"fakeround"===E){var F=_.x*A.y-_.y*A.x>0,L=-Math.sqrt(M*M-1);if(F?(m=0,d=L):(d=0,m=L),x||this.addCurrentVertex(y,this.distance,_,d,m,!1,f,s),"fakeround"===E){for(var O=Math.floor(8*(.5-(S-.5))),D=void 0,q=0;q<O;q++)D=A.mult((q+1)/(O+1))._add(_)._unit(),this.addPieSliceVertex(y,this.distance,D,F,f,s);this.addPieSliceVertex(y,this.distance,z,F,f,s);for(var j=O-1;j>=0;j--)D=_.mult((j+1)/(O+1))._add(A)._unit(),this.addPieSliceVertex(y,this.distance,D,F,f,s);}w&&this.addCurrentVertex(y,this.distance,A,-d,-m,!1,f,s);}else"butt"===E?(x||this.addCurrentVertex(y,this.distance,_,0,0,!1,f,s),w&&this.addCurrentVertex(y,this.distance,A,0,0,!1,f,s)):"square"===E?(x||(this.addCurrentVertex(y,this.distance,_,1,1,!1,f,s),this.e1=this.e2=-1),w&&this.addCurrentVertex(y,this.distance,A,-1,-1,!1,f,s)):"round"===E&&(x||(this.addCurrentVertex(y,this.distance,_,0,0,!1,f,s),this.addCurrentVertex(y,this.distance,_,1,1,!0,f,s),this.e1=this.e2=-1),w&&(this.addCurrentVertex(y,this.distance,A,-1,-1,!0,f,s),this.addCurrentVertex(y,this.distance,A,0,0,!1,f,s)));if(B&&k<l-1){var R=y.dist(w);if(R>2*h){var U=y.add(w.sub(y)._mult(h/R)._round());this.distance+=U.dist(y),this.addCurrentVertex(U,this.distance,A.mult(1),0,0,!1,f,s),y=U;}}x=!1;}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o);}},to.prototype.addCurrentVertex=function(t,e,r,n,i,a,o,s){var u,l=this.layoutVertexArray,p=this.indexArray;s&&(e=eo(e,s)),u=r.clone(),n&&u._sub(r.perp()._mult(n)),Qa(l,t,u,a,!1,n,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(p.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=r.mult(-1),i&&u._sub(r.perp()._mult(i)),Qa(l,t,u,a,!0,-i,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(p.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>Wa/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,r,n,i,a,o));},to.prototype.addPieSliceVertex=function(t,e,r,n,i,a){r=r.mult(n?-1:1);var o=this.layoutVertexArray,s=this.indexArray;a&&(e=eo(e,a)),Qa(o,t,r,!1,n,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),n?this.e2=this.e3:this.e1=this.e3;},Ar("LineBucket",to,{omit:["layers"]});var ro=new Qr({"line-cap":new Hr(q.layout_line["line-cap"]),"line-join":new Kr(q.layout_line["line-join"]),"line-miter-limit":new Hr(q.layout_line["line-miter-limit"]),"line-round-limit":new Hr(q.layout_line["line-round-limit"])}),no={paint:new Qr({"line-opacity":new Kr(q.paint_line["line-opacity"]),"line-color":new Kr(q.paint_line["line-color"]),"line-translate":new Hr(q.paint_line["line-translate"]),"line-translate-anchor":new Hr(q.paint_line["line-translate-anchor"]),"line-width":new Kr(q.paint_line["line-width"]),"line-gap-width":new Kr(q.paint_line["line-gap-width"]),"line-offset":new Kr(q.paint_line["line-offset"]),"line-blur":new Kr(q.paint_line["line-blur"]),"line-dasharray":new Yr(q.paint_line["line-dasharray"]),"line-pattern":new Yr(q.paint_line["line-pattern"]),"line-gradient":new Wr(q.paint_line["line-gradient"])}),layout:ro},io=new(function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new jr(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,n,i){return r=g({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,n,i)},e}(Kr))(no.paint.properties["line-width"].specification);io.useIntegerZoom=!0;var ao=function(t){function e(e){t.call(this,e,no);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient();},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Zi(t,"lineProgress"),this.gradientTexture=null;},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=io.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e);},e.prototype.createBucket=function(t){return new to(t)},e.prototype.queryRadius=function(t){var e=t,r=oo(si("line-width",this,e),si("line-gap-width",this,e)),n=si("line-offset",this,e);return r/2+Math.abs(n)+ui(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o){var s=li(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,o),u=o/2*oo(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),l=this.paint.get("line-offset").evaluate(e,r);return l&&(n=function(t,e){for(var r=[],n=new c(0,0),i=0;i<t.length;i++){for(var a=t[i],o=[],s=0;s<a.length;s++){var u=a[s-1],l=a[s],p=a[s+1],h=0===s?n:l.sub(u)._unit()._perp(),f=s===a.length-1?n:p.sub(l)._unit()._perp(),y=h._add(f)._unit(),d=y.x*f.x+y.y*f.y;y._mult(1/d),o.push(y._mult(e)._add(l));}r.push(o);}return r}(n,l*o)),Qn(s,n,u)},e}(tn);function oo(t,e){return e>0?e+2*t:t}var so=an([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),uo=an([{name:"a_projected_pos",components:3,type:"Float32"}],4),lo=(an([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),an([{name:"a_placed",components:2,type:"Uint8"}],4)),po=(an([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),an([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ho=an([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);an([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),an([{type:"Float32",name:"offsetX"}]),an([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function co(t,e,r){var n=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),qr.applyArabicShaping&&(t=qr.applyArabicShaping(t)),t}var fo={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var yo=function(t){function e(e,r,n,i){t.call(this,e,r),this.angle=n,void 0!==i&&(this.segment=i);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(c);function mo(t,e){var r=e.expression;if("constant"===r.kind)return{functionType:"constant",layoutSize:r.evaluate(new jr(t+1))};if("source"===r.kind)return{functionType:"source"};for(var n=r.zoomStops,i=0;i<n.length&&n[i]<=t;)i++;for(var a=i=Math.max(0,i-1);a<n.length&&n[a]<t+1;)a++;a=Math.min(n.length-1,a);var o={min:n[i],max:n[a]};return"composite"===r.kind?{functionType:"composite",zoomRange:o,propertyValue:e.value}:{functionType:"camera",layoutSize:r.evaluate(new jr(t+1)),zoomRange:o,sizeRange:{min:r.evaluate(new jr(o.min)),max:r.evaluate(new jr(o.max))},propertyValue:e.value}}Ar("Anchor",yo);var vo=Ja.VectorTileFeature.types,go=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function xo(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),a,o,s?s[0]:0,s?s[1]:0);}function bo(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r);}var wo=function(t){this.layoutVertexArray=new hn,this.indexArray=new wn,this.programConfigurations=t,this.segments=new Ln,this.dynamicLayoutVertexArray=new cn,this.opacityVertexArray=new fn,this.placedSymbolArray=new Bn;};wo.prototype.upload=function(t,e,r,n){r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,so.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,uo.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,go,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t);},wo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy());},Ar("SymbolBuffers",wo);var _o=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new Ln,this.collisionVertexArray=new mn;};_o.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,lo.members,!0);},_o.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy());},Ar("CollisionBuffers",_o);var Ao=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=mo(this.zoom,e["text-size"]),this.iconSizeData=mo(this.zoom,e["icon-size"]);var r=this.layers[0].layout;this.sortFeaturesByY=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sourceID=t.sourceID;};Ao.prototype.createArrays=function(){this.text=new wo(new Nn(so.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new wo(new Nn(so.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new _o(dn,po.members,_n),this.collisionCircle=new _o(dn,ho.members,wn),this.glyphOffsetArray=new In,this.lineVertexArray=new En;},Ao.prototype.populate=function(t,e){var r=this.layers[0],n=r.layout,i=n.get("text-font"),a=n.get("text-field"),o=n.get("icon-image"),s=("constant"!==a.value.kind||a.value.value.length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==o.value.kind||o.value.value&&o.value.value.length>0;if(this.features=[],s||u){for(var l=e.iconDependencies,p=e.glyphDependencies,h=new jr(this.zoom),c=0,f=t;c<f.length;c+=1){var y=f[c],d=y.feature,m=y.index,v=y.sourceLayerIndex;if(r._featureFilter(h,d)){var g=void 0;s&&(g=co(g=r.getValueAndResolveTokens("text-field",d),r,d));var x=void 0;if(u&&(x=r.getValueAndResolveTokens("icon-image",d)),g||x){var b={text:g,icon:x,index:m,sourceLayerIndex:v,geometry:Gn(d),properties:d.properties,type:vo[d.type]};if(void 0!==d.id&&(b.id=d.id),this.features.push(b),x&&(l[x]=!0),g)for(var w=i.evaluate(d,{}).join(","),_=p[w]=p[w]||{},A="map"===n.get("text-rotation-alignment")&&"line"===n.get("symbol-placement"),k=Vr(g),z=0;z<g.length;z++)if(_[g.charCodeAt(z)]=!0,A&&k){var S=fo[g.charAt(z)];S&&(_[S.charCodeAt(0)]=!0);}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},r={},n=[],i=0;function a(e){n.push(t[e]),i++;}function o(t,e,i){var a=r[t];return delete r[t],r[e]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(i[0]),a}function s(t,r,i){var a=e[r];return delete e[r],e[t]=a,n[a].geometry[0].shift(),n[a].geometry[0]=i[0].concat(n[a].geometry[0]),a}function u(t,e,r){var n=r?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var l=0;l<t.length;l++){var p=t[l],h=p.geometry,c=p.text;if(c){var f=u(c,h),y=u(c,h,!0);if(f in r&&y in e&&r[f]!==e[y]){var d=s(f,y,h),m=o(f,y,n[d].geometry);delete e[f],delete r[y],r[u(c,n[m].geometry,!0)]=m,n[d].geometry=null;}else f in r?o(f,y,h):y in e?s(f,y,h):(a(l),e[f]=i-1,r[y]=i-1);}else a(l);}return n.filter(function(t){return t.geometry})}(this.features));}},Ao.prototype.update=function(t,e){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers));},Ao.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Ao.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ao.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0;},Ao.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy();},Ao.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:n},o<e.length-1&&(n+=e[o+1].dist(e[o]));for(var s=t.segment||0;s>=0;s--)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=a[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor);}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},Ao.prototype.addSymbols=function(t,e,r,n,i,a,o,s,u,l){for(var p=t.indexArray,h=t.layoutVertexArray,c=t.dynamicLayoutVertexArray,f=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),y=this.glyphOffsetArray.length,d=f.vertexLength,m=0,v=e;m<v.length;m+=1){var g=v[m],x=g.tl,b=g.tr,w=g.bl,_=g.br,A=g.tex,k=f.vertexLength,z=g.glyphOffset[1];xo(h,s.x,s.y,x.x,z+x.y,A.x,A.y,r),xo(h,s.x,s.y,b.x,z+b.y,A.x+A.w,A.y,r),xo(h,s.x,s.y,w.x,z+w.y,A.x,A.y+A.h,r),xo(h,s.x,s.y,_.x,z+_.y,A.x+A.w,A.y+A.h,r),bo(c,s,0),p.emplaceBack(k,k+1,k+2),p.emplaceBack(k+1,k+2,k+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(g.glyphOffset[0]);}t.placedSymbolArray.emplaceBack(s.x,s.y,y,this.glyphOffsetArray.length-y,d,u,l,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index);},Ao.prototype._addCollisionDebugVertex=function(t,e,r,n,i){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n.x,n.y,Math.round(i.x),Math.round(i.y))},Ao.prototype.addCollisionDebugVertices=function(t,e,r,n,i,a,o,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,p=i.layoutVertexArray,h=i.collisionVertexArray;if(this._addCollisionDebugVertex(p,h,a,o.anchor,new c(t,e)),this._addCollisionDebugVertex(p,h,a,o.anchor,new c(r,e)),this._addCollisionDebugVertex(p,h,a,o.anchor,new c(r,n)),this._addCollisionDebugVertex(p,h,a,o.anchor,new c(t,n)),u.vertexLength+=4,s){var f=i.indexArray;f.emplaceBack(l,l+1,l+2),f.emplaceBack(l,l+2,l+3),u.primitiveLength+=2;}else{var y=i.indexArray;y.emplaceBack(l,l+1),y.emplaceBack(l+1,l+2),y.emplaceBack(l+2,l+3),y.emplaceBack(l+3,l),u.primitiveLength+=4;}},Ao.prototype.generateCollisionDebugBuffers=function(){for(var t=0,e=this.symbolInstances;t<e.length;t+=1){var r=e[t];r.textCollisionFeature={boxStartIndex:r.textBoxStartIndex,boxEndIndex:r.textBoxEndIndex},r.iconCollisionFeature={boxStartIndex:r.iconBoxStartIndex,boxEndIndex:r.iconBoxEndIndex};for(var n=0;n<2;n++){var i=r[0===n?"textCollisionFeature":"iconCollisionFeature"];if(i)for(var a=i.boxStartIndex;a<i.boxEndIndex;a++){var o=this.collisionBoxArray.get(a),s=o.x1,u=o.y1,l=o.x2,p=o.y2,h=o.radius>0;this.addCollisionDebugVertices(s,u,l,p,h?this.collisionCircle:this.collisionBox,o.anchorPoint,r,h);}}}},Ao.prototype.deserializeCollisionBoxes=function(t,e,r,n,i){for(var a={},o=e;o<r;o++){var s=t.get(o);if(0===s.radius){a.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},a.textFeatureIndex=s.featureIndex;break}a.textCircles||(a.textCircles=[],a.textFeatureIndex=s.featureIndex);a.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1);}for(var u=n;u<i;u++){var l=t.get(u);if(0===l.radius){a.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},a.iconFeatureIndex=l.featureIndex;break}}return a},Ao.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ao.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ao.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},Ao.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},Ao.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var r=[],n=0;n<this.symbolInstances.length;n++)r.push(n);var i=Math.sin(t),a=Math.cos(t);r.sort(function(t,r){var n=e.symbolInstances[t],o=e.symbolInstances[r];return(i*n.anchor.x+a*n.anchor.y|0)-(i*o.anchor.x+a*o.anchor.y|0)||o.featureIndex-n.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var o=0,s=r;o<s.length;o+=1){var u=s[o],l=e.symbolInstances[u];e.featureSortOrder.push(l.featureIndex);for(var p=0,h=l.placedTextSymbolIndices;p<h.length;p+=1)for(var c=h[p],f=e.text.placedSymbolArray.get(c),y=f.vertexStartIndex+4*f.numGlyphs,d=f.vertexStartIndex;d<y;d+=4)e.text.indexArray.emplaceBack(d,d+1,d+2),e.text.indexArray.emplaceBack(d+1,d+2,d+3);var m=e.icon.placedSymbolArray.get(u);if(m.numGlyphs){var v=m.vertexStartIndex;e.icon.indexArray.emplaceBack(v,v+1,v+2),e.icon.indexArray.emplaceBack(v+1,v+2,v+3);}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray);}},Ar("SymbolBucket",Ao,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),Ao.MAX_GLYPHS=65535,Ao.addDynamicAttributes=bo;var ko=new Qr({"symbol-placement":new Hr(q.layout_symbol["symbol-placement"]),"symbol-spacing":new Hr(q.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Hr(q.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new Hr(q.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Hr(q.layout_symbol["icon-ignore-placement"]),"icon-optional":new Hr(q.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Hr(q.layout_symbol["icon-rotation-alignment"]),"icon-size":new Kr(q.layout_symbol["icon-size"]),"icon-text-fit":new Hr(q.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Hr(q.layout_symbol["icon-text-fit-padding"]),"icon-image":new Kr(q.layout_symbol["icon-image"]),"icon-rotate":new Kr(q.layout_symbol["icon-rotate"]),"icon-padding":new Hr(q.layout_symbol["icon-padding"]),"icon-keep-upright":new Hr(q.layout_symbol["icon-keep-upright"]),"icon-offset":new Kr(q.layout_symbol["icon-offset"]),"icon-anchor":new Kr(q.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Hr(q.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Hr(q.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Hr(q.layout_symbol["text-rotation-alignment"]),"text-field":new Kr(q.layout_symbol["text-field"]),"text-font":new Kr(q.layout_symbol["text-font"]),"text-size":new Kr(q.layout_symbol["text-size"]),"text-max-width":new Kr(q.layout_symbol["text-max-width"]),"text-line-height":new Hr(q.layout_symbol["text-line-height"]),"text-letter-spacing":new Kr(q.layout_symbol["text-letter-spacing"]),"text-justify":new Kr(q.layout_symbol["text-justify"]),"text-anchor":new Kr(q.layout_symbol["text-anchor"]),"text-max-angle":new Hr(q.layout_symbol["text-max-angle"]),"text-rotate":new Kr(q.layout_symbol["text-rotate"]),"text-padding":new Hr(q.layout_symbol["text-padding"]),"text-keep-upright":new Hr(q.layout_symbol["text-keep-upright"]),"text-transform":new Kr(q.layout_symbol["text-transform"]),"text-offset":new Kr(q.layout_symbol["text-offset"]),"text-allow-overlap":new Hr(q.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Hr(q.layout_symbol["text-ignore-placement"]),"text-optional":new Hr(q.layout_symbol["text-optional"])}),zo={paint:new Qr({"icon-opacity":new Kr(q.paint_symbol["icon-opacity"]),"icon-color":new Kr(q.paint_symbol["icon-color"]),"icon-halo-color":new Kr(q.paint_symbol["icon-halo-color"]),"icon-halo-width":new Kr(q.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Kr(q.paint_symbol["icon-halo-blur"]),"icon-translate":new Hr(q.paint_symbol["icon-translate"]),"icon-translate-anchor":new Hr(q.paint_symbol["icon-translate-anchor"]),"text-opacity":new Kr(q.paint_symbol["text-opacity"]),"text-color":new Kr(q.paint_symbol["text-color"]),"text-halo-color":new Kr(q.paint_symbol["text-halo-color"]),"text-halo-width":new Kr(q.paint_symbol["text-halo-width"]),"text-halo-blur":new Kr(q.paint_symbol["text-halo-blur"]),"text-translate":new Hr(q.paint_symbol["text-translate"]),"text-translate-anchor":new Hr(q.paint_symbol["text-translate-anchor"])}),layout:ko},So=function(t){function e(e){t.call(this,e,zo);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));},e.prototype.getValueAndResolveTokens=function(t,e){var r,n=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||Ce(i.value)?n:(r=e.properties,n.replace(/{([^{}]+)}/g,function(t,e){return e in r?String(r[e]):""}))},e.prototype.createBucket=function(t){return new Ao(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(tn),Mo={paint:new Qr({"background-color":new Hr(q.paint_background["background-color"]),"background-pattern":new Yr(q.paint_background["background-pattern"]),"background-opacity":new Hr(q.paint_background["background-opacity"])})},Bo=function(t){function e(e){t.call(this,e,Mo);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(tn),Vo={paint:new Qr({"raster-opacity":new Hr(q.paint_raster["raster-opacity"]),"raster-hue-rotate":new Hr(q.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Hr(q.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Hr(q.paint_raster["raster-brightness-max"]),"raster-saturation":new Hr(q.paint_raster["raster-saturation"]),"raster-contrast":new Hr(q.paint_raster["raster-contrast"]),"raster-fade-duration":new Hr(q.paint_raster["raster-fade-duration"])})},Io={circle:Fi,heatmap:Xi,hillshade:Ji,fill:Va,"fill-extrusion":Oa,line:ao,symbol:So,background:Bo,raster:function(t){function e(e){t.call(this,e,Vo);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(tn)};var Co=n(function(t,e){t.exports=function(){function t(t,e,r){r=r||{},this.w=t||64,this.h=e||64,this.autoResize=!!r.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0;}function e(t,e,r){this.x=0,this.y=t,this.w=this.free=e,this.h=r;}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var r,n,i,a,o=[],s=0;s<t.length;s++)if(r=t[s].w||t[s].width,n=t[s].h||t[s].height,i=t[s].id,r&&n){if(!(a=this.packOne(r,n,i)))continue;e.inPlace&&(t[s].x=a.x,t[s].y=a.y,t[s].id=a.id),o.push(a);}return this.shrink(),o},t.prototype.packOne=function(t,r,n){var i,a,o,s,u,l,p,h,c={freebin:-1,shelf:-1,waste:1/0},f=0;if("string"==typeof n||"number"==typeof n){if(i=this.getBin(n))return this.ref(i),i;"number"==typeof n&&(this.maxId=Math.max(n,this.maxId));}else n=++this.maxId;for(s=0;s<this.freebins.length;s++){if(r===(i=this.freebins[s]).maxh&&t===i.maxw)return this.allocFreebin(s,t,r,n);r>i.maxh||t>i.maxw||r<=i.maxh&&t<=i.maxw&&(o=i.maxw*i.maxh-t*r)<c.waste&&(c.waste=o,c.freebin=s);}for(s=0;s<this.shelves.length;s++)if(f+=(a=this.shelves[s]).h,!(t>a.free)){if(r===a.h)return this.allocShelf(s,t,r,n);r>a.h||r<a.h&&(o=(a.h-r)*t)<c.waste&&(c.freebin=-1,c.waste=o,c.shelf=s);}return-1!==c.freebin?this.allocFreebin(c.freebin,t,r,n):-1!==c.shelf?this.allocShelf(c.shelf,t,r,n):r<=this.h-f&&t<=this.w?(a=new e(f,this.w,r),this.allocShelf(this.shelves.push(a)-1,t,r,n)):this.autoResize?(u=l=this.h,((p=h=this.w)<=u||t>p)&&(h=2*Math.max(t,p)),(u<p||r>u)&&(l=2*Math.max(r,u)),this.resize(h,l),this.packOne(t,r,n)):null},t.prototype.allocFreebin=function(t,e,r,n){var i=this.freebins.splice(t,1)[0];return i.id=n,i.w=e,i.h=r,i.refcount=0,this.bins[n]=i,this.ref(i),i},t.prototype.allocShelf=function(t,e,r,n){var i=this.shelves[t].alloc(e,r,n);return this.bins[n]=i,this.ref(i),i},t.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,r=0;r<this.shelves.length;r++){var n=this.shelves[r];e+=n.h,t=Math.max(n.w-n.free,t);}this.resize(t,e);}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e]);}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0;},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var r=0;r<this.shelves.length;r++)this.shelves[r].resize(t);return!0},e.prototype.alloc=function(t,e,r){if(t>this.free||e>this.h)return null;var n=this.x;return this.x+=t,this.free-=t,new function(t,e,r,n,i,a,o){this.id=t,this.x=e,this.y=r,this.w=n,this.h=i,this.maxw=a||n,this.maxh=o||i,this.refcount=0;}(r,n,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t}();}),Eo=function(t,e){var r=e.pixelRatio;this.paddedRect=t,this.pixelRatio=r;},To={tl:{configurable:!0},br:{configurable:!0},displaySize:{configurable:!0}};To.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},To.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},To.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Eo.prototype,To);var Po=function(t){var e=new Ui({width:0,height:0}),r={},n=new Co(0,0,{autoResize:!0});for(var i in t){var a=t[i],o=n.packOne(a.data.width+2,a.data.height+2);e.resize({width:n.w,height:n.h}),Ui.copy(a.data,e,{x:0,y:0},{x:o.x+1,y:o.y+1},a.data),r[i]=new Eo(o,a);}n.shrink(),e.resize({width:n.w,height:n.h}),this.image=e,this.positions=r;};Ar("ImagePosition",Eo),Ar("ImageAtlas",Po);var Fo=self.HTMLImageElement,Lo=self.HTMLCanvasElement,Oo=self.HTMLVideoElement,Do=self.ImageData,qo=function(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n);};qo.prototype.update=function(t,e){var r=t.width,n=t.height,i=!this.size||this.size[0]!==r||this.size[1]!==n,a=this.context,o=a.gl;this.useMipmap=Boolean(e&&e.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),i?(this.size=[r,n],a.pixelStoreUnpack.set(1),this.format!==o.RGBA||e&&!1===e.premultiply||a.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof Fo||t instanceof Lo||t instanceof Oo||t instanceof Do?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,r,n,0,this.format,o.UNSIGNED_BYTE,t.data)):t instanceof Fo||t instanceof Lo||t instanceof Oo||t instanceof Do?o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,0,0,r,n,o.RGBA,o.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D);},qo.prototype.bind=function(t,e,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e);},qo.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},qo.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null;};var jo=function(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,p=-7,h=r?i-1:0,c=r?-1:1,f=t[e+h];for(h+=c,a=f&(1<<-p)-1,f>>=-p,p+=s;p>0;a=256*a+t[e+h],h+=c,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=n;p>0;o=256*o+t[e+h],h+=c,p-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),a-=l;}return(f?-1:1)*o*Math.pow(2,a-n)},Ro=function(t,e,r,n,i,a){var o,s,u,l=8*a-i-1,p=(1<<l)-1,h=p>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+h>=1?c/u:c*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=p?(s=0,o=p):o+h>=1?(s=(e*u-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+f]=255&s,f+=y,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[r+f]=255&o,f+=y,o/=256,l-=8);t[r+f-y]|=128*d;},Uo=No;function No(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length;}No.Varint=0,No.Fixed64=1,No.Bytes=2,No.Fixed32=5;function Zo(t){return t.type===No.Bytes?t.readVarint()+t.pos:t.pos+1}function Xo(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function $o(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i];}function Jo(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r]);}function Go(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r]);}function Ho(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r]);}function Ko(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r]);}function Yo(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r]);}function Wo(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r]);}function Qo(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r]);}function ts(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r]);}function es(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r]);}function rs(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ns(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24;}function is(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}No.prototype={destroy:function(){this.buf=null;},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,t(i,e,this),this.pos===a&&this.skip(n);}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=rs(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=is(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=rs(this.buf,this.pos)+4294967296*rs(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=rs(this.buf,this.pos)+4294967296*is(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=jo(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=jo(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,a=r.buf;if(i=a[r.pos++],n=(112&i)>>4,i<128)return Xo(t,n,e);if(i=a[r.pos++],n|=(127&i)<<3,i<128)return Xo(t,n,e);if(i=a[r.pos++],n|=(127&i)<<10,i<128)return Xo(t,n,e);if(i=a[r.pos++],n|=(127&i)<<17,i<128)return Xo(t,n,e);if(i=a[r.pos++],n|=(127&i)<<24,i<128)return Xo(t,n,e);if(i=a[r.pos++],n|=(1&i)<<31,i<128)return Xo(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){var n="",i=e;for(;i<r;){var a,o,s,u=t[i],l=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p>r)break;1===p?u<128&&(l=u):2===p?128==(192&(a=t[i+1]))&&(l=(31&u)<<6|63&a)<=127&&(l=null):3===p?(a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&((l=(15&u)<<12|(63&a)<<6|63&o)<=2047||l>=55296&&l<=57343)&&(l=null)):4===p&&(a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,p=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=p;}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=Zo(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=Zo(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=Zo(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=Zo(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=Zo(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=Zo(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=Zo(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=Zo(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=Zo(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===No.Varint)for(;this.buf[this.pos++]>127;);else if(e===No.Bytes)this.pos=this.readVarint()+this.pos;else if(e===No.Fixed32)this.pos+=4;else{if(e!==No.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8;}},writeTag:function(t,e){this.writeVarint(t<<3|e);},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e;}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ns(this.buf,t,this.pos),this.pos+=4;},writeSFixed32:function(t){this.realloc(4),ns(this.buf,t,this.pos),this.pos+=4;},writeFixed64:function(t){this.realloc(8),ns(this.buf,-1&t,this.pos),ns(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8;},writeSFixed64:function(t){this.realloc(8),ns(this.buf,-1&t,this.pos),ns(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8;},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t;}(r,0,e),function(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t;}(n,e);}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))));},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t);},writeBoolean:function(t){this.writeVarint(Boolean(t));},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,a=0;a<e.length;a++){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){n>56319||a+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null;}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128);}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&$o(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r;},writeFloat:function(t){this.realloc(4),Ro(this.buf,t,this.pos,!0,23,4),this.pos+=4;},writeDouble:function(t){this.realloc(8),Ro(this.buf,t,this.pos,!0,52,8),this.pos+=8;},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r];},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&$o(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n;},writeMessage:function(t,e,r){this.writeTag(t,No.Bytes),this.writeRawMessage(e,r);},writePackedVarint:function(t,e){this.writeMessage(t,Jo,e);},writePackedSVarint:function(t,e){this.writeMessage(t,Go,e);},writePackedBoolean:function(t,e){this.writeMessage(t,Yo,e);},writePackedFloat:function(t,e){this.writeMessage(t,Ho,e);},writePackedDouble:function(t,e){this.writeMessage(t,Ko,e);},writePackedFixed32:function(t,e){this.writeMessage(t,Wo,e);},writePackedSFixed32:function(t,e){this.writeMessage(t,Qo,e);},writePackedFixed64:function(t,e){this.writeMessage(t,ts,e);},writePackedSFixed64:function(t,e){this.writeMessage(t,es,e);},writeBytesField:function(t,e){this.writeTag(t,No.Bytes),this.writeBytes(e);},writeFixed32Field:function(t,e){this.writeTag(t,No.Fixed32),this.writeFixed32(e);},writeSFixed32Field:function(t,e){this.writeTag(t,No.Fixed32),this.writeSFixed32(e);},writeFixed64Field:function(t,e){this.writeTag(t,No.Fixed64),this.writeFixed64(e);},writeSFixed64Field:function(t,e){this.writeTag(t,No.Fixed64),this.writeSFixed64(e);},writeVarintField:function(t,e){this.writeTag(t,No.Varint),this.writeVarint(e);},writeSVarintField:function(t,e){this.writeTag(t,No.Varint),this.writeSVarint(e);},writeStringField:function(t,e){this.writeTag(t,No.Bytes),this.writeString(e);},writeFloatField:function(t,e){this.writeTag(t,No.Fixed32),this.writeFloat(e);},writeDoubleField:function(t,e){this.writeTag(t,No.Fixed64),this.writeDouble(e);},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e));}};var as=3;function os(t,e,r){1===t&&r.readMessage(ss,e);}function ss(t,e,r){if(3===t){var n=r.readMessage(us,{}),i=n.id,a=n.bitmap,o=n.width,s=n.height,u=n.left,l=n.top,p=n.advance;e.push({id:i,bitmap:new Ri({width:o+2*as,height:s+2*as},a),metrics:{width:o,height:s,left:u,top:l,advance:p}});}}function us(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint());}var ls=as,ps=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.callbackID=0,w(["receive"],this),this.target.addEventListener("message",this.receive,!1);};ps.prototype.send=function(t,e,r,n){var i=r?this.mapId+":"+this.callbackID++:null;r&&(this.callbacks[i]=r);var a=[];this.target.postMessage({targetMapId:n,sourceMapId:this.mapId,type:t,id:String(i),data:zr(e,a)},a);},ps.prototype.receive=function(t){var e,r=this,n=t.data,i=n.id;if(!n.targetMapId||this.mapId===n.targetMapId){var a=function(t,e){var n=[];r.target.postMessage({sourceMapId:r.mapId,type:"<response>",id:String(i),error:t?zr(t):null,data:zr(e,n)},n);};if("<response>"===n.type)e=this.callbacks[n.id],delete this.callbacks[n.id],e&&n.error?e(Sr(n.error)):e&&e(null,Sr(n.data));else if(void 0!==n.id&&this.parent[n.type])this.parent[n.type](n.sourceMapId,Sr(n.data),a);else if(void 0!==n.id&&this.parent.getWorkerSource){var o=n.type.split("."),s=Sr(n.data);this.parent.getWorkerSource(n.sourceMapId,o[0],s.source)[o[1]](s,a);}else this.parent[n.type](Sr(n.data));}},ps.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1);};var hs=n(function(t,e){!function(t){function e(t,e,n){e=Math.pow(2,n)-e-1;var i=r(256*t,256*e,n),a=r(256*(t+1),256*(e+1),n);return i[0]+","+i[1]+","+a[0]+","+a[1]}function r(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r),i=t*n-2*Math.PI*6378137/2,a=e*n-2*Math.PI*6378137/2;return[i,a]}t.getURL=function(t,r,n,i,a,o){return o=o||{},t+"?"+["bbox="+e(n,i,a),"format="+(o.format||"image/png"),"service="+(o.service||"WMS"),"version="+(o.version||"1.1.1"),"request="+(o.request||"GetMap"),"srs="+(o.srs||"EPSG:3857"),"width="+(o.width||256),"height="+(o.height||256),"layers="+r].join("&")},t.getTileBBox=e,t.getMercCoords=r,Object.defineProperty(t,"__esModule",{value:!0});}(e);});r(hs);var cs=hs.getTileBBox,fs=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=ms(0,t,e,r);};fs.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},fs.prototype.url=function(t,e){var r=cs(this.x,this.y,this.z),n=function(t,e,r){for(var n,i="",a=t;a>0;a--)i+=(e&(n=1<<a-1)?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",r)};var ys=function(t,e){this.wrap=t,this.canonical=e,this.key=ms(t,e.z,e.x,e.y);},ds=function(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new fs(r,+n,+i),this.key=ms(e,t,n,i);};function ms(t,e,r,n){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*n+r)+e}ds.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},ds.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new ds(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ds(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},ds.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},ds.prototype.children=function(t){if(this.overscaledZ>=t)return[new ds(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new ds(e,this.wrap,e,r,n),new ds(e,this.wrap,e,r+1,n),new ds(e,this.wrap,e,r,n+1),new ds(e,this.wrap,e,r+1,n+1)]},ds.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},ds.prototype.wrapped=function(){return new ds(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.unwrapTo=function(t){return new ds(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ds.prototype.toUnwrapped=function(){return new ys(this.wrap,this.canonical)},ds.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ds.prototype.toCoordinate=function(){return new h(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},Ar("CanonicalTileID",fs),Ar("OverscaledTileID",ds,{omit:["posMatrix"]});var vs=function(t,e,r){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=r||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border));};vs.prototype.set=function(t,e,r){this.data[this._idx(t,e)]=r+65536;},vs.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},vs.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},Ar("Level",vs);var gs=function(t,e,r){this.uid=t,this.scale=e||1,this.level=r||new vs(256,512),this.loaded=!!r;};gs.prototype.loadFromImage=function(t,e){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");if(e&&"mapbox"!==e&&"terrarium"!==e)return M('"'+e+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var r=this.level=new vs(t.width,t.width/2),n=t.data;this._unpackData(r,n,e||"mapbox");for(var i=0;i<r.dim;i++)r.set(-1,i,r.get(0,i)),r.set(r.dim,i,r.get(r.dim-1,i)),r.set(i,-1,r.get(i,0)),r.set(i,r.dim,r.get(i,r.dim-1));r.set(-1,-1,r.get(0,0)),r.set(r.dim,-1,r.get(r.dim-1,0)),r.set(-1,r.dim,r.get(0,r.dim-1)),r.set(r.dim,r.dim,r.get(r.dim-1,r.dim-1)),this.loaded=!0;},gs.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},gs.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},gs.prototype._unpackData=function(t,e,r){for(var n={mapbox:this._unpackMapbox,terrarium:this._unpackTerrarium}[r],i=0;i<t.dim;i++)for(var a=0;a<t.dim;a++){var o=4*(i*t.dim+a);t.set(a,i,this.scale*n(e[o],e[o+1],e[o+2]));}},gs.prototype.getPixels=function(){return new Ui({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},gs.prototype.backfillBorder=function(t,e,r){var n=this.level,i=t.level;if(n.dim!==i.dim)throw new Error("level mismatch (dem dimension)");var a=e*n.dim,o=e*n.dim+n.dim,s=r*n.dim,u=r*n.dim+n.dim;switch(e){case-1:a=o-1;break;case 1:o=a+1;}switch(r){case-1:s=u-1;break;case 1:u=s+1;}for(var l=v(a,-n.border,n.dim+n.border),p=v(o,-n.border,n.dim+n.border),h=v(s,-n.border,n.dim+n.border),c=v(u,-n.border,n.dim+n.border),f=-e*n.dim,y=-r*n.dim,d=h;d<c;d++)for(var m=l;m<p;m++)n.set(m,d,i.get(m+f,d+y));},Ar("DEMData",gs);var xs=an([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);var bs=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r;}};bs.prototype.encode=function(t){return this._stringToNumber[t]},bs.prototype.decode=function(t){return this._numberToString[t]};var ws=function(t,e,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=n,this.properties=t.properties,null!=t.id&&(this.id=t.id);},_s={geometry:{configurable:!0}};_s.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},_s.geometry.set=function(t){this._geometry=t;},ws.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(ws.prototype,_s);var As=function(){this.state={},this.stateChanges={};};As.prototype.updateState=function(t,e,r){e=String(e),this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][e]=this.stateChanges[t][e]||{},g(this.stateChanges[t][e],r);},As.prototype.getState=function(t,e){e=String(e);var r=this.state[t]||{},n=this.stateChanges[t]||{};return g({},r[e],n[e])},As.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e);},As.prototype.coalesceChanges=function(t,e){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var a in this.stateChanges[n])this.state[n][a]||(this.state[n][a]={}),g(this.state[n][a],this.stateChanges[n][a]),i[a]=this.state[n][a];r[n]=i;}if(this.stateChanges={},0!==Object.keys(r).length)for(var o in t){t[o].setFeatureState(r,e);}};var ks=function(t,e,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new gr(Xn,16,0),this.featureIndexArray=r||new Pn;};function zs(t,e){return e-t}ks.prototype.insert=function(t,e,r,n,i){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var o=0;o<e.length;o++){for(var s=e[o],u=[1/0,1/0,-1/0,-1/0],l=0;l<s.length;l++){var p=s[l];u[0]=Math.min(u[0],p.x),u[1]=Math.min(u[1],p.y),u[2]=Math.max(u[2],p.x),u[3]=Math.max(u[3],p.y);}u[0]<Xn&&u[1]<Xn&&u[2]>=0&&u[3]>=0&&this.grid.insert(a,u[0],u[1],u[2],u[3]);}},ks.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ja.VectorTile(new Uo(this.rawTileData)).layers,this.sourceLayerCoder=new bs(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ks.prototype.query=function(t,e,r){var n=this;this.loadVTLayers();for(var i=t.params||{},a=Xn/t.tileSize/t.scale,o=$e(i.filter),s=t.queryGeometry,u=t.queryPadding*a,l=1/0,p=1/0,h=-1/0,c=-1/0,f=0;f<s.length;f++)for(var y=s[f],d=0;d<y.length;d++){var m=y[d];l=Math.min(l,m.x),p=Math.min(p,m.y),h=Math.max(h,m.x),c=Math.max(c,m.y);}var v=this.grid.query(l-u,p-u,h+u,c+u);v.sort(zs);for(var g,x={},b=function(u){var l=v[u];if(l!==g){g=l;var p=n.featureIndexArray.get(l),h=null;n.loadMatchingFeature(x,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,o,i.layers,e,function(e,i){h||(h=Gn(e));var o={};return e.id&&(o=r.getState(i.sourceLayer||"_geojsonTileLayer",String(e.id))),i.queryIntersectsFeature(s,e,o,h,n.z,t.transform,a,t.posMatrix)});}},w=0;w<v.length;w++)b(w);return x},ks.prototype.loadMatchingFeature=function(t,e,r,n,i,a,o,s){var u=this.bucketLayerIDs[e];if(!a||function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(a,u)){var l=this.sourceLayerCoder.decode(r),p=this.vtLayers[l].feature(n);if(i(new jr(this.tileID.overscaledZ),p))for(var h=0;h<u.length;h++){var c=u[h];if(!(a&&a.indexOf(c)<0)){var f=o[c];if(f&&(!s||s(p,f))){var y=new ws(p,this.z,this.x,this.y);y.layer=f.serialize();var d=t[c];void 0===d&&(d=t[c]=[]),d.push({featureIndex:n,feature:y});}}}}},ks.prototype.lookupSymbolFeatures=function(t,e,r,n,i,a){var o={};this.loadVTLayers();for(var s=$e(n),u=0,l=t;u<l.length;u+=1){var p=l[u];this.loadMatchingFeature(o,e,r,p,s,i,a);}return o},ks.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var n=0,i=r[e];n<i.length;n+=1){if(t===i[n])return!0}return!1},Ar("FeatureIndex",ks,{omit:["rawTileData","sourceLayerCoder"]});var Ss=function(t,e){this.tileID=t,this.uid=b(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.expiredRequestCount=0,this.state="loading";};Ss.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<s.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e);},Ss.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ss.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var r={};if(!e)return r;for(var n=0,i=t;n<i.length;n+=1){var a=i[n],o=a.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==o.length){a.layers=o,a.stateDependentLayers=o.filter(function(t){return t.isStateDependent()});for(var s=0,u=o;s<u.length;s+=1)r[u[s].id]=a;}}return r}(t.buckets,e.style),r)for(var n in this.buckets){var i=this.buckets[n];i instanceof Ao&&(i.justReloaded=!0);}for(var a in this.queryPadding=0,this.buckets){var o=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(o.layerIds[0]).queryRadius(o));}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage);}else this.collisionBoxArray=new Sn;},Ss.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded";},Ss.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded";},Ss.prototype.getBucket=function(t){return this.buckets[t.id]},Ss.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t);}var n=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new qo(t,this.iconAtlasImage,n.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new qo(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null);},Ss.prototype.queryRenderedFeatures=function(t,e,r,n,i,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,scale:n,tileSize:this.tileSize,posMatrix:s,transform:a,params:i,queryPadding:this.queryPadding*o},t,e):{}},Ss.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),n=e?e.sourceLayer:"",i=r._geojsonTileLayer||r[n];if(i)for(var a=$e(e&&e.filter),o={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},s=0;s<i.length;s++){var u=i.feature(s);if(a(new jr(this.tileID.overscaledZ),u)){var l=new ws(u,o.z,o.x,o.y);l.tile=o,t.push(l);}}}},Ss.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer);},Ss.prototype.setMask=function(t,e){if(!y(this.mask,t)&&(this.mask=t,this.clearMask(),!y(t,{0:!0}))){var r=new un,n=new wn;this.segments=new Ln,this.segments.prepareSegment(0,r,n);for(var i=Object.keys(t),a=0;a<i.length;a++){var o=t[i[a]],s=Xn>>o.z,u=new c(o.x*s,o.y*s),l=new c(u.x+s,u.y+s),p=this.segments.prepareSegment(4,r,n);r.emplaceBack(u.x,u.y,u.x,u.y),r.emplaceBack(l.x,u.y,l.x,u.y),r.emplaceBack(u.x,l.y,u.x,l.y),r.emplaceBack(l.x,l.y,l.x,l.y);var h=p.vertexLength;n.emplaceBack(h,h+1,h+2),n.emplaceBack(h+1,h+2,h+3),p.vertexLength+=4,p.primitiveLength+=2;}this.maskedBoundsBuffer=e.createVertexBuffer(r,xs.members),this.maskedIndexBuffer=e.createIndexBuffer(n);}},Ss.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ss.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,r,n,i){var a=n||i;return e[r]=!a||a.toLowerCase(),""}),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r;}return e}(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"]);}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var a=this.expirationTime-e;a?this.expirationTime=n+Math.max(a,3e4):i=!0;}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0;}},Ss.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ss.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets){var i=this.buckets[n],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=r[a],s=t[a];o&&s&&0!==Object.keys(s).length&&(i.update(s,o),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(i.layerIds[0]).queryRadius(i))));}}};var Ms={horizontal:1,vertical:2,horizontalOnly:3};var Bs={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vs={};function Is(t,e,r,n){var i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function Cs(t,e){var r=0;return 10===t&&(r-=1e4),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Es(t,e,r,n,i,a){for(var o=null,s=Is(e,r,i,a),u=0,l=n;u<l.length;u+=1){var p=l[u],h=Is(e-p.x,r,i,a)+p.badness;h<=s&&(o=p,s=h);}return{index:t,x:e,priorBreak:o,badness:s}}function Ts(t,e,r,n){if(!r)return[];if(!t)return[];for(var i,a=[],o=function(t,e,r,n){for(var i=0,a=0;a<t.length;a++){var o=n[t.charCodeAt(a)];o&&(i+=o.metrics.advance+e);}return i/Math.max(1,Math.ceil(i/r))}(t,e,r,n),s=0,u=0;u<t.length;u++){var l=t.charCodeAt(u),p=n[l];p&&!Bs[l]&&(s+=p.metrics.advance+e),u<t.length-1&&(Vs[l]||!((i=l)<11904)&&(Br["Bopomofo Extended"](i)||Br.Bopomofo(i)||Br["CJK Compatibility Forms"](i)||Br["CJK Compatibility Ideographs"](i)||Br["CJK Compatibility"](i)||Br["CJK Radicals Supplement"](i)||Br["CJK Strokes"](i)||Br["CJK Symbols and Punctuation"](i)||Br["CJK Unified Ideographs Extension A"](i)||Br["CJK Unified Ideographs"](i)||Br["Enclosed CJK Letters and Months"](i)||Br["Halfwidth and Fullwidth Forms"](i)||Br.Hiragana(i)||Br["Ideographic Description Characters"](i)||Br["Kangxi Radicals"](i)||Br["Katakana Phonetic Extensions"](i)||Br.Katakana(i)||Br["Vertical Forms"](i)||Br["Yi Radicals"](i)||Br["Yi Syllables"](i)))&&a.push(Es(u+1,s,o,a,Cs(l,t.charCodeAt(u+1)),!1));}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Es(t.length,s,o,a,0,!0))}function Ps(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;}return{horizontalAlign:e,verticalAlign:r}}function Fs(t,e,r,n,i){if(i){var a=e[t[n].glyph];if(a)for(var o=a.metrics.advance,s=(t[n].x+o)*i,u=r;u<=n;u++)t[u].x-=s;}}Vs[10]=!0,Vs[32]=!0,Vs[38]=!0,Vs[40]=!0,Vs[41]=!0,Vs[43]=!0,Vs[45]=!0,Vs[47]=!0,Vs[173]=!0,Vs[183]=!0,Vs[8203]=!0,Vs[8208]=!0,Vs[8211]=!0,Vs[8231]=!0,t.commonjsGlobal=e,t.unwrapExports=r,t.createCommonjsModule=n,t.default=c,t.default$1=self,t.default$2=s,t.getJSON=function(t,e){var r=E(t);return r.setRequestHeader("Accept","application/json"),r.onerror=function(){e(new Error(r.statusText));},r.onload=function(){if(r.status>=200&&r.status<300&&r.response){var n;try{n=JSON.parse(r.response);}catch(t){return e(t)}e(null,n);}else 401===r.status&&t.url.match(/mapbox.com/)?e(new C(r.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",r.status,t.url)):e(new C(r.statusText,r.status,t.url));},r.send(),r},t.getImage=function(t,e){return T(t,function(t,r){if(t)e(t);else if(r){var n=new self.Image,i=self.URL||self.webkitURL;n.onload=function(){e(null,n),i.revokeObjectURL(n.src);};var a=new self.Blob([new Uint8Array(r.data)],{type:"image/png"});n.cacheControl=r.cacheControl,n.expires=r.expires,n.src=r.data.byteLength?i.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";}})},t.ResourceType=I,t.RGBAImage=Ui,t.default$3=Co,t.ImagePosition=Eo,t.default$4=qo,t.getArrayBuffer=T,t.default$5=function(t){return new Uo(t).readFields(os,[])},t.default$6=Br,t.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var n=t.length,i=new Array(t.length),a=null;t.forEach(function(t,o){e(t,function(t,e){t&&(a=t),i[o]=e,0==--n&&r(a,i);});});},t.AlphaImage=Ri,t.default$7=q,t.endsWith=_,t.extend=g,t.sphericalToCartesian=function(t){var e=t[0],r=t[1],n=t[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(n),y:e*Math.sin(r)*Math.sin(n),z:e*Math.cos(n)}},t.Evented=D,t.validateStyle=fr,t.validateLight=yr,t.emitValidationErrors=vr,t.default$8=ot,t.number=Vt,t.Properties=Qr,t.Transitionable=Nr,t.Transitioning=Xr,t.PossiblyEvaluated=Gr,t.DataConstantProperty=Hr,t.warnOnce=M,t.uniqueId=b,t.default$9=ps,t.pick=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i]);}return r},t.wrap=function(t,e,r){var n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i},t.clamp=v,t.Event=L,t.ErrorEvent=O,t.OverscaledTileID=ds,t.default$10=Xn,t.getCoordinatesCenter=function(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,a=0;a<t.length;a++)e=Math.min(e,t[a].column),r=Math.min(r,t[a].row),n=Math.max(n,t[a].column),i=Math.max(i,t[a].row);var o=n-e,s=i-r,u=Math.max(o,s),l=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new h((e+n)/2,(r+i)/2,0).zoomTo(l)},t.CanonicalTileID=fs,t.RasterBoundsArray=un,t.default$11=xs,t.getVideo=function(t,e){var r,n,i=self.document.createElement("video");i.onloadstart=function(){e(null,i);};for(var a=0;a<t.length;a++){var o=self.document.createElement("source");r=t[a],n=void 0,(n=self.document.createElement("a")).href=r,(n.protocol!==self.document.location.protocol||n.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),o.src=t[a],i.appendChild(o);}return i},t.default$12=j,t.bindAll=w,t.default$13=y,t.default$14=Ss,t.default$15=h,t.keysDifference=function(t,e){var r=[];for(var n in t)n in e||r.push(n);return r},t.default$16=As,t.default$17=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.create=function(){var t=new hi(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],h=e[9],c=e[10],f=e[11],y=e[12],d=e[13],m=e[14],v=e[15],g=r*s-n*o,x=r*u-i*o,b=r*l-a*o,w=n*u-i*s,_=n*l-a*s,A=i*l-a*u,k=p*d-h*y,z=p*m-c*y,S=p*v-f*y,M=h*m-c*d,B=h*v-f*d,V=c*v-f*m,I=g*V-x*B+b*M+w*S-_*z+A*k;return I?(I=1/I,t[0]=(s*V-u*B+l*M)*I,t[1]=(i*B-n*V-a*M)*I,t[2]=(d*A-m*_+v*w)*I,t[3]=(c*_-h*A-f*w)*I,t[4]=(u*S-o*V-l*z)*I,t[5]=(r*V-i*S+a*z)*I,t[6]=(m*b-y*A-v*x)*I,t[7]=(p*A-c*b+f*x)*I,t[8]=(o*B-s*S+l*k)*I,t[9]=(n*S-r*B-a*k)*I,t[10]=(y*_-d*b+v*g)*I,t[11]=(h*b-p*_-f*g)*I,t[12]=(s*z-o*M-u*k)*I,t[13]=(r*M-n*z+i*k)*I,t[14]=(d*x-y*w-m*g)*I,t[15]=(p*w-h*x+c*g)*I,t):null},t.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],h=e[8],c=e[9],f=e[10],y=e[11],d=e[12],m=e[13],v=e[14],g=e[15],x=r[0],b=r[1],w=r[2],_=r[3];return t[0]=x*n+b*s+w*h+_*d,t[1]=x*i+b*u+w*c+_*m,t[2]=x*a+b*l+w*f+_*v,t[3]=x*o+b*p+w*y+_*g,x=r[4],b=r[5],w=r[6],_=r[7],t[4]=x*n+b*s+w*h+_*d,t[5]=x*i+b*u+w*c+_*m,t[6]=x*a+b*l+w*f+_*v,t[7]=x*o+b*p+w*y+_*g,x=r[8],b=r[9],w=r[10],_=r[11],t[8]=x*n+b*s+w*h+_*d,t[9]=x*i+b*u+w*c+_*m,t[10]=x*a+b*l+w*f+_*v,t[11]=x*o+b*p+w*y+_*g,x=r[12],b=r[13],w=r[14],_=r[15],t[12]=x*n+b*s+w*h+_*d,t[13]=x*i+b*u+w*c+_*m,t[14]=x*a+b*l+w*f+_*v,t[15]=x*o+b*p+w*y+_*g,t},t.translate=function(t,e,r){var n,i,a,o,s,u,l,p,h,c,f,y,d=r[0],m=r[1],v=r[2];return e===t?(t[12]=e[0]*d+e[4]*m+e[8]*v+e[12],t[13]=e[1]*d+e[5]*m+e[9]*v+e[13],t[14]=e[2]*d+e[6]*m+e[10]*v+e[14],t[15]=e[3]*d+e[7]*m+e[11]*v+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],h=e[8],c=e[9],f=e[10],y=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=p,t[8]=h,t[9]=c,t[10]=f,t[11]=y,t[12]=n*d+s*m+h*v+e[12],t[13]=i*d+u*m+c*v+e[13],t[14]=a*d+l*m+f*v+e[14],t[15]=o*d+p*m+y*v+e[15]),t},t.scale=function(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],p=e[9],h=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+l*n,t[5]=o*i+p*n,t[6]=s*i+h*n,t[7]=u*i+c*n,t[8]=l*i-a*n,t[9]=p*i-o*n,t[10]=h*i-s*n,t[11]=c*i-u*n,t},t.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],p=e[5],h=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+l*n,t[1]=o*i+p*n,t[2]=s*i+h*n,t[3]=u*i+c*n,t[4]=l*i-a*n,t[5]=p*i-o*n,t[6]=h*i-s*n,t[7]=c*i-u*n,t},t.perspective=function(t,e,r,n,i){var a=1/Math.tan(e/2),o=1/(n-i);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*o,t[15]=0,t},t.ortho=function(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*l,t[15]=1,t},t.create$1=_i,t.normalize=Ai,t.transformMat4=ki,t.forEach=zi,t.getSizeData=mo,t.evaluateSizeForFeature=function(t,e,r){var n=e;return"source"===t.functionType?r.lowerSize/10:"composite"===t.functionType?Vt(r.lowerSize/10,r.upperSize/10,n.uSizeT):n.uSize},t.evaluateSizeForZoom=function(t,e,r){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var n=t.propertyValue,i=t.zoomRange,a=t.sizeRange,o=v(Oe(n,r.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:a.min+o*(a.max-a.min)}}var s=t.propertyValue,u=t.zoomRange;return{uSizeT:v(Oe(s,r.specification).interpolationFactor(e,u.min,u.max),0,1),uSize:0}},t.addDynamicAttributes=bo,t.default$18=zo,t.WritingMode=Ms,t.multiPolygonIntersectsBufferedPoint=Yn,t.multiPolygonIntersectsMultiPolygon=Wn,t.multiPolygonIntersectsBufferedMultiLine=Qn,t.polygonIntersectsPolygon=function(t,e){for(var r=0;r<t.length;r++)if(oi(e,t[r]))return!0;for(var n=0;n<e.length;n++)if(oi(t,e[n]))return!0;return!!ei(t,e)},t.distToSegmentSquared=ii,t.default$19=tn,t.default$20=function(t){return new Io[t.type](t)},t.clone=z,t.filterObject=k,t.mapObject=A,t.registerForPluginAvailability=function(t){return Lr?t({pluginURL:Lr,completionCallback:Pr}):Dr.once("pluginAvailable",t),t},t.evented=Dr,t.default$21=Mr,t.createLayout=an,t.default$22=Un,t.create$2=ci,t.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.create$3=fi,t.length=yi,t.fromValues=di,t.normalize$1=mi,t.dot=vi,t.cross=gi,t.transformMat3=function(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t},t.len=bi,t.forEach$1=wi,t.PosArray=sn,t.UnwrappedTileID=ys,t.create$4=function(){var t=new hi(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},t.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=n*-s+a*u,t[3]=i*-s+o*u,t},t.ease=m,t.bezier=d,t.default$23=jr,t.setRTLTextPlugin=function(t,e){if(Fr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Fr=!0,Lr=s.resolveURL(t),Pr=function(t){t?(Fr=!1,Lr=null,e&&e(t)):Or=!0;},Dr.fire(new L("pluginAvailable",{pluginURL:Lr,completionCallback:Pr}));},t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.default$24=$e,t.default$25=yo,t.register=Ar,t.GLYPH_PBF_BORDER=ls,t.shapeText=function(t,e,r,n,i,a,o,s,u,l){var p=t.trim();l===Ms.vertical&&(p=function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null;n&&Er(n)&&!fo[t[r+1]]||i&&Er(i)&&!fo[t[r-1]]||!fo[t[r]]?e+=t[r]:e+=fo[t[r]];}return e}(p));var h=[],c={positionedGlyphs:h,text:p,top:s[1],bottom:s[1],left:s[0],right:s[0],writingMode:l},f=qr.processBidirectionalText;return function(t,e,r,n,i,a,o,s,u){for(var l=0,p=-17,h=0,c=t.positionedGlyphs,f="right"===a?1:"left"===a?0:.5,y=0,d=r;y<d.length;y+=1){var m=d[y];if((m=m.trim()).length){for(var v=c.length,g=0;g<m.length;g++){var x=m.charCodeAt(g),b=e[x];b&&(Cr(x)&&o!==Ms.horizontal?(c.push({glyph:x,x:l,y:0,vertical:!0}),l+=u+s):(c.push({glyph:x,x:l,y:p,vertical:!1}),l+=b.metrics.advance+s));}if(c.length!==v){var w=l-s;h=Math.max(w,h),Fs(c,e,v,c.length-1,f);}l=0,p+=n;}else p+=n;}var _=Ps(i),A=_.horizontalAlign,k=_.verticalAlign;!function(t,e,r,n,i,a,o){for(var s=(e-r)*i,u=(-n*o+.5)*a,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u;}(c,f,A,k,h,n,r.length);var z=r.length*n;t.top+=-k*z,t.bottom=t.top+z,t.left+=-A*h,t.right=t.left+h;}(c,e,f?f(p,Ts(p,o,r,e)):function(t,e){for(var r=[],n=0,i=0,a=e;i<a.length;i+=1){var o=a[i];r.push(t.substring(n,o)),n=o;}return n<t.length&&r.push(t.substring(n,t.length)),r}(p,Ts(p,o,r,e)),n,i,a,l,o,u),!!h.length&&c},t.shapeIcon=function(t,e,r){var n=Ps(r),i=n.horizontalAlign,a=n.verticalAlign,o=e[0],s=e[1],u=o-t.displaySize[0]*i,l=u+t.displaySize[0],p=s-t.displaySize[1]*a;return{image:t,top:p,bottom:p+t.displaySize[1],left:u,right:l}},t.allowsVerticalWritingMode=Vr,t.allowsLetterSpacing=function(t){for(var e=0,r=t;e<r.length;e+=1)if(!Ir(r[e].charCodeAt(0)))return!1;return!0},t.default$26=za,t.default$27=Ao,t.default$28=ks,t.CollisionBoxArray=Sn,t.default$29=bs,t.default$30=Po,t.default$31=Ja,t.default$32=Uo,t.default$33=gs,t.__moduleExports=Ja,t.default$34=c,t.__moduleExports$1=Uo,t.plugin=qr;});

define(["./chunk1.js"],function(e){"use strict";function t(e){var r=typeof e;if("number"===r||"boolean"===r||"string"===r||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var i="[",n=0,o=e;n<o.length;n+=1){i+=t(o[n])+",";}return i+"]"}for(var a=Object.keys(e).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+t(e[a[l]])+",";return s+"}"}function r(r){for(var i="",n=0,o=e.default$17;n<o.length;n+=1){i+="/"+t(r[o[n]]);}return i}var i=function(e){e&&this.replace(e);};function n(e,t,r,i,n){if(void 0===t.segment)return!0;for(var o=t,a=t.segment+1,s=0;s>-r/2;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a];}s+=e[a].dist(e[a+1]),a++;for(var l=[],u=0;s<r/2;){var h=e[a-1],c=e[a],f=e[a+1];if(!f)return!1;var p=h.angleTo(c)-c.angleTo(f);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:p}),u+=p;s-l[0].distance>i;)u-=l.shift().angleDelta;if(u>n)return!1;a++,s+=c.dist(f);}return!0}function o(t,r,i,o,a,s,l,u,h){var c=o?.6*s*l:0,f=Math.max(o?o.right-o.left:0,a?a.right-a.left:0),p=0===t[0].x||t[0].x===h||0===t[0].y||t[0].y===h;return r-f*l<r/4&&(r=f*l+r/4),function t(r,i,o,a,s,l,u,h,c){var f=l/2;var p=0;for(var d=0;d<r.length-1;d++)p+=r[d].dist(r[d+1]);var g=0,m=i-o;var y=[];for(var v=0;v<r.length-1;v++){for(var x=r[v],w=r[v+1],M=x.dist(w),S=w.angleTo(x);m+o<g+M;){var _=((m+=o)-g)/M,b=e.number(x.x,w.x,_),I=e.number(x.y,w.y,_);if(b>=0&&b<c&&I>=0&&I<c&&m-f>=0&&m+f<=p){var k=new e.default$25(b,I,S,v);k._round(),a&&!n(r,k,l,a,s)||y.push(k);}}g+=M;}h||y.length||u||(y=t(r,g/2,o,a,s,l,u,!0,c));return y}(t,p?r/2*u%r:(f/2+2*s)*l*u%r,r,c,i,f*l,p,!1,h)}i.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[]);},i.prototype.update=function(t,i){for(var n=this,o=0,a=t;o<a.length;o+=1){var s=a[o];n._layerConfigs[s.id]=s;var l=n._layers[s.id]=e.default$20(s);l._featureFilter=e.default$24(l.filter);}for(var u=0,h=i;u<h.length;u+=1){var c=h[u];delete n._layerConfigs[c],delete n._layers[c];}this.familiesBySource={};for(var f=0,p=function(e){for(var t={},i=0;i<e.length;i++){var n=r(e[i]),o=t[n];o||(o=t[n]=[]),o.push(e[i]);}var a=[];for(var s in t)a.push(t[s]);return a}(e.values(this._layerConfigs));f<p.length;f+=1){var d=p[f].map(function(e){return n._layers[e.id]}),g=d[0];if("none"!==g.visibility){var m=g.source||"",y=n.familiesBySource[m];y||(y=n.familiesBySource[m]={});var v=g.sourceLayer||"_geojsonTileLayer",x=y[v];x||(x=y[v]=[]),x.push(d);}}};var a=function(){this.opacity=0,this.targetOpacity=0,this.time=0;};a.prototype.clone=function(){var e=new a;return e.opacity=this.opacity,e.targetOpacity=this.targetOpacity,e.time=this.time,e},e.register("OpacityState",a);var s=function(t,r,i,n,o,a,s,l,u,h,c,f){var p=s.top*l-u,d=s.bottom*l+u,g=s.left*l-u,m=s.right*l+u;if(this.boxStartIndex=t.length,h){var y=d-p,v=m-g;y>0&&(y=Math.max(10*l,y),this._addLineCollisionCircles(t,r,i,i.segment,v,y,n,o,a,c));}else{if(f){var x=new e.default(g,p),w=new e.default(m,p),M=new e.default(g,d),S=new e.default(m,d),_=f*Math.PI/180;x._rotate(_),w._rotate(_),M._rotate(_),S._rotate(_),g=Math.min(x.x,w.x,M.x,S.x),m=Math.max(x.x,w.x,M.x,S.x),p=Math.min(x.y,w.y,M.y,S.y),d=Math.max(x.y,w.y,M.y,S.y);}t.emplaceBack(i.x,i.y,g,p,m,d,n,o,a,0,0);}this.boxEndIndex=t.length;};s.prototype._addLineCollisionCircles=function(e,t,r,i,n,o,a,s,l,u){var h=o/2,c=Math.floor(n/h),f=1+.4*Math.log(u)/Math.LN2,p=Math.floor(c*f/2),d=-o/2,g=r,m=i+1,y=d,v=-n/2,x=v-n/4;do{if(--m<0){if(y>v)return;m=0;break}y-=t[m].dist(g),g=t[m];}while(y>x);for(var w=t[m].dist(t[m+1]),M=-p;M<c+p;M++){var S=M*h,_=v+S;if(S<0&&(_+=S),S>n&&(_+=S-n),!(_<y)){for(;y+w<_;){if(y+=w,++m+1>=t.length)return;w=t[m].dist(t[m+1]);}var b=_-y,I=t[m],k=t[m+1].sub(I)._unit()._mult(b)._add(I)._round(),z=Math.abs(_-d)<h?0:.8*(_-d);e.emplaceBack(k.x,k.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,z);}}};var l=h,u=h;function h(e,t){if(!(this instanceof h))return new h(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||c,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r);}function c(e,t){return e<t?-1:e>t?1:0}function f(t,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);for(var n=1/0,o=1/0,a=-1/0,s=-1/0,u=t[0],h=0;h<u.length;h++){var c=u[h];(!h||c.x<n)&&(n=c.x),(!h||c.y<o)&&(o=c.y),(!h||c.x>a)&&(a=c.x),(!h||c.y>s)&&(s=c.y);}var f=a-n,g=s-o,m=Math.min(f,g),y=m/2,v=new l(null,p);if(0===m)return new e.default(n,o);for(var x=n;x<a;x+=m)for(var w=o;w<s;w+=m)v.push(new d(x+y,w+y,y,t));for(var M=function(e){for(var t=0,r=0,i=0,n=e[0],o=0,a=n.length,s=a-1;o<a;s=o++){var l=n[o],u=n[s],h=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*h,i+=(l.y+u.y)*h,t+=3*h;}return new d(r/t,i/t,0,e)}(t),S=v.length;v.length;){var _=v.pop();(_.d>M.d||!M.d)&&(M=_,i&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,S)),_.max-M.d<=r||(y=_.h/2,v.push(new d(_.p.x-y,_.p.y-y,y,t)),v.push(new d(_.p.x+y,_.p.y-y,y,t)),v.push(new d(_.p.x-y,_.p.y+y,y,t)),v.push(new d(_.p.x+y,_.p.y+y,y,t)),S+=4);}return i&&(console.log("num probes: "+S),console.log("best distance: "+M.d)),M.p}function p(e,t){return t.max-e.max}function d(t,r,i,n){this.p=new e.default(t,r),this.h=i,this.d=function(t,r){for(var i=!1,n=1/0,o=0;o<r.length;o++)for(var a=r[o],s=0,l=a.length,u=l-1;s<l;u=s++){var h=a[s],c=a[u];h.y>t.y!=c.y>t.y&&t.x<(c.x-h.x)*(t.y-h.y)/(c.y-h.y)+h.x&&(i=!i),n=Math.min(n,e.distToSegmentSquared(t,h,c));}return(i?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2;}function g(t,r,i,n,o,a){t.createArrays(),t.symbolInstances=[];var s=512*t.overscaling;t.tilePixelRatio=e.default$10/s,t.compareText={},t.iconsNeedLinear=!1;var l=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,h={};if("composite"===t.textSizeData.functionType){var c=t.textSizeData.zoomRange,f=c.min,p=c.max;h.compositeTextSizes=[u["text-size"].possiblyEvaluate(new e.default$23(f)),u["text-size"].possiblyEvaluate(new e.default$23(p))];}if("composite"===t.iconSizeData.functionType){var d=t.iconSizeData.zoomRange,g=d.min,y=d.max;h.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new e.default$23(g)),u["icon-size"].possiblyEvaluate(new e.default$23(y))];}h.layoutTextSize=u["text-size"].possiblyEvaluate(new e.default$23(t.zoom+1)),h.layoutIconSize=u["icon-size"].possiblyEvaluate(new e.default$23(t.zoom+1)),h.textMaxSize=u["text-size"].possiblyEvaluate(new e.default$23(18));for(var v=24*l.get("text-line-height"),x="map"===l.get("text-rotation-alignment")&&"line"===l.get("symbol-placement"),w=l.get("text-keep-upright"),M=0,S=t.features;M<S.length;M+=1){var _=S[M],b=l.get("text-font").evaluate(_,{}).join(","),I=r[b]||{},k=i[b]||{},z={},P=_.text;if(P){var T=l.get("text-offset").evaluate(_,{}).map(function(e){return 24*e}),L=24*l.get("text-letter-spacing").evaluate(_,{}),D=e.allowsLetterSpacing(P)?L:0,O=l.get("text-anchor").evaluate(_,{}),C=l.get("text-justify").evaluate(_,{}),E="line"!==l.get("symbol-placement")?24*l.get("text-max-width").evaluate(_,{}):0;z.horizontal=e.shapeText(P,I,E,v,O,C,D,T,24,e.WritingMode.horizontal),e.allowsVerticalWritingMode(P)&&x&&w&&(z.vertical=e.shapeText(P,I,E,v,O,C,D,T,24,e.WritingMode.vertical));}var A=void 0;if(_.icon){var N=n[_.icon];N&&(A=e.shapeIcon(o[_.icon],l.get("icon-offset").evaluate(_,{}),l.get("icon-anchor").evaluate(_,{})),void 0===t.sdfIcons?t.sdfIcons=N.sdf:t.sdfIcons!==N.sdf&&e.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),N.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0));}(z.horizontal||A)&&m(t,_,z,A,k,h);}a&&t.generateCollisionDebugBuffers();}function m(t,r,i,n,l,u){var h=u.layoutTextSize.evaluate(r,{}),c=u.layoutIconSize.evaluate(r,{}),p=u.textMaxSize.evaluate(r,{});void 0===p&&(p=h);var d=t.layers[0].layout,g=d.get("text-offset").evaluate(r,{}),m=d.get("icon-offset").evaluate(r,{}),x=h/24,w=t.tilePixelRatio*x,M=t.tilePixelRatio*p/24,S=t.tilePixelRatio*c,_=t.tilePixelRatio*d.get("symbol-spacing"),b=d.get("text-padding")*t.tilePixelRatio,I=d.get("icon-padding")*t.tilePixelRatio,k=d.get("text-max-angle")/180*Math.PI,z="map"===d.get("text-rotation-alignment")&&"line"===d.get("symbol-placement"),P="map"===d.get("icon-rotation-alignment")&&"line"===d.get("symbol-placement"),T=_/2,L=function(o,h){h.x<0||h.x>=e.default$10||h.y<0||h.y>=e.default$10||t.symbolInstances.push(function(t,r,i,n,o,l,u,h,c,f,p,d,g,m,v,x,w,M,S,_,b){var I,k,z=t.addToLineVertexArray(r,i),P=0,T=0,L=0,D=n.horizontal?n.horizontal.text:"",O=[];if(n.horizontal){var C=l.layout.get("text-rotate").evaluate(S,{});I=new s(u,i,r,h,c,f,n.horizontal,p,d,g,t.overscaling,C),T+=y(t,r,n.horizontal,l,g,S,m,z,n.vertical?e.WritingMode.horizontal:e.WritingMode.horizontalOnly,O,_,b),n.vertical&&(L+=y(t,r,n.vertical,l,g,S,m,z,e.WritingMode.vertical,O,_,b));}var E=I?I.boxStartIndex:t.collisionBoxArray.length,A=I?I.boxEndIndex:t.collisionBoxArray.length;if(o){var N=function(t,r,i,n,o,a){var s,l,u,h,c=r.image,f=i.layout,p=r.top-1/c.pixelRatio,d=r.left-1/c.pixelRatio,g=r.bottom+1/c.pixelRatio,m=r.right+1/c.pixelRatio;if("none"!==f.get("icon-text-fit")&&o){var y=m-d,v=g-p,x=f.get("text-size").evaluate(a,{})/24,w=o.left*x,M=o.right*x,S=o.top*x,_=M-w,b=o.bottom*x-S,I=f.get("icon-text-fit-padding")[0],k=f.get("icon-text-fit-padding")[1],z=f.get("icon-text-fit-padding")[2],P=f.get("icon-text-fit-padding")[3],T="width"===f.get("icon-text-fit")?.5*(b-v):0,L="height"===f.get("icon-text-fit")?.5*(_-y):0,D="width"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?_:y,O="height"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?b:v;s=new e.default(w+L-P,S+T-I),l=new e.default(w+L+k+D,S+T-I),u=new e.default(w+L+k+D,S+T+z+O),h=new e.default(w+L-P,S+T+z+O);}else s=new e.default(d,p),l=new e.default(m,p),u=new e.default(m,g),h=new e.default(d,g);var C=i.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(C){var E=Math.sin(C),A=Math.cos(C),N=[A,-E,E,A];s._matMult(N),l._matMult(N),h._matMult(N),u._matMult(N);}return[{tl:s,tr:l,bl:h,br:u,tex:c.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,l,0,n.horizontal,S),B=l.layout.get("icon-rotate").evaluate(S,{});k=new s(u,i,r,h,c,f,o,v,x,!1,t.overscaling,B),P=4*N.length;var R=t.iconSizeData,$=null;"source"===R.functionType?$=[10*l.layout.get("icon-size").evaluate(S,{})]:"composite"===R.functionType&&($=[10*b.compositeIconSizes[0].evaluate(S,{}),10*b.compositeIconSizes[1].evaluate(S,{})]),t.addSymbols(t.icon,N,$,M,w,S,!1,r,z.lineStartIndex,z.lineLength);}var F=k?k.boxStartIndex:t.collisionBoxArray.length,G=k?k.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=e.default$27.MAX_GLYPHS&&e.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");var V=new a,j=new a;return{key:D,textBoxStartIndex:E,textBoxEndIndex:A,iconBoxStartIndex:F,iconBoxEndIndex:G,textOffset:m,iconOffset:M,anchor:r,line:i,featureIndex:h,feature:S,numGlyphVertices:T,numVerticalGlyphVertices:L,numIconVertices:P,textOpacityState:V,iconOpacityState:j,isDuplicate:!1,placedTextSymbolIndices:O,crossTileID:0}}(t,h,o,i,n,t.layers[0],t.collisionBoxArray,r.index,r.sourceLayerIndex,t.index,w,b,z,g,S,I,P,m,r,l,u));};if("line"===d.get("symbol-placement"))for(var D=0,O=function(t,r,i,n,o){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,h=0;h<l.length-1;h++){var c=l[h],f=l[h+1];c.x<r&&f.x<r||(c.x<r?c=new e.default(r,c.y+(f.y-c.y)*((r-c.x)/(f.x-c.x)))._round():f.x<r&&(f=new e.default(r,c.y+(f.y-c.y)*((r-c.x)/(f.x-c.x)))._round()),c.y<i&&f.y<i||(c.y<i?c=new e.default(c.x+(f.x-c.x)*((i-c.y)/(f.y-c.y)),i)._round():f.y<i&&(f=new e.default(c.x+(f.x-c.x)*((i-c.y)/(f.y-c.y)),i)._round()),c.x>=n&&f.x>=n||(c.x>=n?c=new e.default(n,c.y+(f.y-c.y)*((n-c.x)/(f.x-c.x)))._round():f.x>=n&&(f=new e.default(n,c.y+(f.y-c.y)*((n-c.x)/(f.x-c.x)))._round()),c.y>=o&&f.y>=o||(c.y>=o?c=new e.default(c.x+(f.x-c.x)*((o-c.y)/(f.y-c.y)),o)._round():f.y>=o&&(f=new e.default(c.x+(f.x-c.x)*((o-c.y)/(f.y-c.y)),o)._round()),u&&c.equals(u[u.length-1])||(u=[c],a.push(u)),u.push(f)))));}return a}(r.geometry,0,0,e.default$10,e.default$10);D<O.length;D+=1)for(var C=O[D],E=0,A=o(C,_,k,i.vertical||i.horizontal,n,24,M,t.overscaling,e.default$10);E<A.length;E+=1){var N=A[E],B=i.horizontal;B&&v(t,B.text,T,N)||L(C,N);}else if("Polygon"===r.type)for(var R=0,$=e.default$26(r.geometry,0);R<$.length;R+=1){var F=$[R],G=f(F,16);L(F[0],new e.default$25(G.x,G.y,0));}else if("LineString"===r.type)for(var V=0,j=r.geometry;V<j.length;V+=1){var J=j[V];L(J,new e.default$25(J[0].x,J[0].y,0));}else if("Point"===r.type)for(var W=0,Y=r.geometry;W<Y.length;W+=1)for(var Z=0,X=Y[W];Z<X.length;Z+=1){var q=X[Z];L([q],new e.default$25(q.x,q.y,0));}}function y(t,r,i,n,o,a,s,l,u,h,c,f){var p=function(t,r,i,n,o,a){for(var s=i.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=i.layout.get("text-offset").evaluate(o,{}).map(function(e){return 24*e}),u=r.positionedGlyphs,h=[],c=0;c<u.length;c++){var f=u[c],p=a[f.glyph];if(p){var d=p.rect;if(d){var g=e.GLYPH_PBF_BORDER+1,m=p.metrics.advance/2,y=n?[f.x+m,f.y]:[0,0],v=n?[0,0]:[f.x+m+l[0],f.y+l[1]],x=p.metrics.left-g-m+v[0],w=-p.metrics.top-g+v[1],M=x+d.w,S=w+d.h,_=new e.default(x,w),b=new e.default(M,w),I=new e.default(x,S),k=new e.default(M,S);if(n&&f.vertical){var z=new e.default(-m,m),P=-Math.PI/2,T=new e.default(5,0);_._rotateAround(P,z)._add(T),b._rotateAround(P,z)._add(T),I._rotateAround(P,z)._add(T),k._rotateAround(P,z)._add(T);}if(s){var L=Math.sin(s),D=Math.cos(s),O=[D,-L,L,D];_._matMult(O),b._matMult(O),I._matMult(O),k._matMult(O);}h.push({tl:_,tr:b,bl:I,br:k,tex:d,writingMode:r.writingMode,glyphOffset:y});}}}return h}(0,i,n,o,a,c),d=t.textSizeData,g=null;return"source"===d.functionType?g=[10*n.layout.get("text-size").evaluate(a,{})]:"composite"===d.functionType&&(g=[10*f.compositeTextSizes[0].evaluate(a,{}),10*f.compositeTextSizes[1].evaluate(a,{})]),t.addSymbols(t.text,p,g,s,o,a,u,r,l.lineStartIndex,l.lineLength),h.push(t.text.placedSymbolArray.length-1),4*p.length}function v(e,t,r,i){var n=e.compareText;if(t in n){for(var o=n[t],a=o.length-1;a>=0;a--)if(i.dist(o[a])<r)return!0}else n[t]=[];return n[t].push(i),!1}h.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1);},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,r=this.compare,i=t[e];e>0;){var n=e-1>>1,o=t[n];if(r(i,o)>=0)break;t[e]=o,e=n;}t[e]=i;},_down:function(e){for(var t=this.data,r=this.compare,i=this.length>>1,n=t[e];e<i;){var o=1+(e<<1),a=o+1,s=t[o];if(a<this.length&&r(t[a],s)<0&&(o=a,s=t[a]),r(s,n)>=0)break;t[e]=s,e=o;}t[e]=n;}},l.default=u;var x=function(t){var r=new e.AlphaImage({width:0,height:0}),i={},n=new e.default$3(0,0,{autoResize:!0});for(var o in t){var a=t[o],s=i[o]={};for(var l in a){var u=a[+l];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var h=n.packOne(u.bitmap.width+2,u.bitmap.height+2);r.resize({width:n.w,height:n.h}),e.AlphaImage.copy(u.bitmap,r,{x:0,y:0},{x:h.x+1,y:h.y+1},u.bitmap),s[l]={rect:h,metrics:u.metrics};}}}n.shrink(),r.resize({width:n.w,height:n.h}),this.image=r,this.positions=i;};e.register("GlyphAtlas",x);var w=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming;};function M(t,r){for(var i=new e.default$23(r),n=0,o=t;n<o.length;n+=1){o[n].recalculate(i);}}w.prototype.parse=function(t,r,i,n){var o=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var a=new e.default$29(Object.keys(t.layers).sort()),s=new e.default$28(this.tileID);s.bucketLayerIDs=[];var l,u,h,c={},f={featureIndex:s,iconDependencies:{},glyphDependencies:{}},p=r.familiesBySource[this.source];for(var d in p){var m=t.layers[d];if(m){1===m.version&&e.warnOnce('Vector tile source "'+o.source+'" layer "'+d+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=a.encode(d),v=[],w=0;w<m.length;w++){var S=m.feature(w);v.push({feature:S,index:w,sourceLayerIndex:y});}for(var _=0,b=p[d];_<b.length;_+=1){var I=b[_],k=I[0];if(!(k.minzoom&&o.zoom<Math.floor(k.minzoom)))if(!(k.maxzoom&&o.zoom>=k.maxzoom))if("none"!==k.visibility)M(I,o.zoom),(c[k.id]=k.createBucket({index:s.bucketLayerIDs.length,layers:I,zoom:o.zoom,pixelRatio:o.pixelRatio,overscaling:o.overscaling,collisionBoxArray:o.collisionBoxArray,sourceLayerIndex:y,sourceID:o.source})).populate(v,f),s.bucketLayerIDs.push(I.map(function(e){return e.id}));}}}var z=e.mapObject(f.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(z).length?i.send("getGlyphs",{uid:this.uid,stacks:z},function(e,t){l||(l=e,u=t,T.call(o));}):u={};var P=Object.keys(f.iconDependencies);function T(){if(l)return n(l);if(u&&h){var t=new x(u),r=new e.default$30(h);for(var i in c){var o=c[i];o instanceof e.default$27&&(M(o.layers,this.zoom),g(o,u,t.positions,h,r.positions,this.showCollisionBoxes));}this.status="done",n(null,{buckets:e.values(c).filter(function(e){return!e.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,iconAtlasImage:r.image});}}P.length?i.send("getImages",{icons:P},function(e,t){l||(l=e,h=t,T.call(o));}):h={},T.call(this);};var S="undefined"!=typeof performance,_={getEntriesByName:function(e){return!!(S&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(S&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,r){return!!(S&&performance&&performance.measure)&&performance.measure(e,t,r)},clearMarks:function(e){return!!(S&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(S&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},b=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},_.mark(this._marks.start);};function I(t,r){var i=e.getArrayBuffer(t.request,function(t,i){t?r(t):i&&r(null,{vectorTile:new e.default$31.VectorTile(new e.default$32(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires});});return function(){i.abort(),r();}}b.prototype.finish=function(){_.mark(this._marks.end);var e=_.getEntriesByName(this._marks.measure);return 0===e.length&&(_.measure(this._marks.measure,this._marks.start,this._marks.end),e=_.getEntriesByName(this._marks.measure),_.clearMarks(this._marks.start),_.clearMarks(this._marks.end),_.clearMeasures(this._marks.measure)),e},_.Performance=b;var k=function(e,t,r){this.actor=e,this.layerIndex=t,this.loadVectorData=r||I,this.loading={},this.loaded={};};k.prototype.loadTile=function(t,r){var i=this,n=t.uid;this.loading||(this.loading={});var o=!!(t&&t.request&&t.request.collectResourceTiming)&&new _.Performance(t.request),a=this.loading[n]=new w(t);a.abort=this.loadVectorData(t,function(t,s){if(delete i.loading[n],t||!s)return r(t);var l=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl);var h={};if(o){var c=o.finish();c&&(h.resourceTiming=JSON.parse(JSON.stringify(c)));}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,i.layerIndex,i.actor,function(t,i){if(t||!i)return r(t);r(null,e.extend({rawTileData:l.slice(0)},i,u,h));}),i.loaded=i.loaded||{},i.loaded[n]=a;});},k.prototype.reloadTile=function(e,t){var r=this.loaded,i=e.uid,n=this;if(r&&r[i]){var o=r[i];o.showCollisionBoxes=e.showCollisionBoxes;var a=function(e,r){var i=o.reloadCallback;i&&(delete o.reloadCallback,o.parse(o.vectorTile,n.layerIndex,n.actor,i)),t(e,r);};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,a);}},k.prototype.abortTile=function(e,t){var r=this.loading,i=e.uid;r&&r[i]&&r[i].abort&&(r[i].abort(),delete r[i]),t();},k.prototype.removeTile=function(e,t){var r=this.loaded,i=e.uid;r&&r[i]&&delete r[i],t();};var z=function(){this.loading={},this.loaded={};};z.prototype.loadTile=function(t,r){var i=t.uid,n=t.encoding,o=new e.default$33(i);this.loading[i]=o,o.loadFromImage(t.rawImageData,n),delete this.loading[i],this.loaded=this.loaded||{},this.loaded[i]=o,r(null,o);},z.prototype.removeTile=function(e){var t=this.loaded,r=e.uid;t&&t[r]&&delete t[r];};var P={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function T(e){var t=0;if(e&&e.length>0){t+=Math.abs(L(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(L(e[r]));}return t}function L(e){var t,r,i,n,o,a,s=0,l=e.length;if(l>2){for(a=0;a<l;a++)a===l-2?(i=l-2,n=l-1,o=0):a===l-1?(i=l-1,n=0,o=1):(i=a,n=a+1,o=a+2),t=e[i],r=e[n],s+=(D(e[o][0])-D(t[0]))*Math.sin(D(r[1]));s=s*P.RADIUS*P.RADIUS/2;}return s}function D(e){return e*Math.PI/180}var O={geometry:function e(t){var r,i=0;switch(t.type){case"Polygon":return T(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)i+=T(t.coordinates[r]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<t.geometries.length;r++)i+=e(t.geometries[r]);return i}},ring:L},C=function e(t,r){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(E(e,r)),t;case"Feature":return t.geometry=e(t.geometry,r),t;case"Polygon":case"MultiPolygon":return function(e,t){"Polygon"===e.type?e.coordinates=A(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(E(A,t)));return e}(t,r);default:return t}};function E(e,t){return function(r){return e(r,t)}}function A(e,t){t=!!t,e[0]=N(e[0],t);for(var r=1;r<e.length;r++)e[r]=N(e[r],!t);return e}function N(e,t){return function(e){return O.ring(e)>=0}(e)===t?e:e.reverse()}var B=e.default$31.VectorTileFeature.prototype.toGeoJSON,R=function(t){this._feature=t,this.extent=e.default$10,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10));};R.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],r=0,i=this._feature.geometry;r<i.length;r+=1){var n=i[r];t.push([new e.default(n[0],n[1])]);}return t}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,h=s[a];u<h.length;u+=1){var c=h[u];l.push(new e.default(c[0],c[1]));}o.push(l);}return o},R.prototype.toGeoJSON=function(e,t,r){return B.call(this,e,t,r)};var $=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.default$10,this.length=t.length,this._features=t;};$.prototype.feature=function(e){return new R(this._features[e])};var F=e.__moduleExports.VectorTileFeature,G=V;function V(e,t){this.options=t||{},this.features=e,this.length=e.length;}function j(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096;}V.prototype.feature=function(e){return new j(this.features[e],this.options.extent)},j.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var r=0;r<t.length;r++){for(var i=t[r],n=[],o=0;o<i.length;o++)n.push(new e.default$34(i[o][0],i[o][1]));this.geometry.push(n);}return this.geometry},j.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,i=1/0,n=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),r=Math.max(r,l.x),i=Math.min(i,l.y),n=Math.max(n,l.y);}return[t,i,r,n]},j.prototype.toGeoJSON=F.prototype.toGeoJSON;var J=X,W=X,Y=function(e,t){t=t||{};var r={};for(var i in e)r[i]=new G(e[i].features,t),r[i].name=i,r[i].version=t.version,r[i].extent=t.extent;return X({layers:r})},Z=G;function X(t){var r=new e.__moduleExports$1;return function(e,t){for(var r in e.layers)t.writeMessage(3,q,e.layers[r]);}(t,r),r.finish()}function q(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)i.feature=e.feature(r),t.writeMessage(2,U,i);var n=i.keys;for(r=0;r<n.length;r++)t.writeStringField(3,n[r]);var o=i.values;for(r=0;r<o.length;r++)t.writeMessage(4,te,o[r]);}function U(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,H,e),t.writeVarintField(3,r.type),t.writeMessage(4,ee,r);}function H(e,t){var r=e.feature,i=e.keys,n=e.values,o=e.keycache,a=e.valuecache;for(var s in r.properties){var l=o[s];void 0===l&&(i.push(s),l=i.length-1,o[s]=l),t.writeVarint(l);var u=r.properties[s],h=typeof u;"string"!==h&&"boolean"!==h&&"number"!==h&&(u=JSON.stringify(u));var c=h+":"+u,f=a[c];void 0===f&&(n.push(u),f=n.length-1,a[c]=f),t.writeVarint(f);}}function Q(e,t){return(t<<3)+(7&e)}function K(e){return e<<1^e>>31}function ee(e,t){for(var r=e.loadGeometry(),i=e.type,n=0,o=0,a=r.length,s=0;s<a;s++){var l=r[s],u=1;1===i&&(u=l.length),t.writeVarint(Q(1,u));for(var h=3===i?l.length-1:l.length,c=0;c<h;c++){1===c&&1!==i&&t.writeVarint(Q(2,h-1));var f=l[c].x-n,p=l[c].y-o;t.writeVarint(K(f)),t.writeVarint(K(p)),n+=f,o+=p;}3===i&&t.writeVarint(Q(7,0));}}function te(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e));}J.fromVectorTileJs=W,J.fromGeojsonVt=Y,J.GeoJSONWrapper=Z;var re=function e(t,r,i,n,o,a){if(o-n<=i)return;var s=Math.floor((n+o)/2);!function e(t,r,i,n,o,a){for(;o>n;){if(o-n>600){var s=o-n+1,l=i-n+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(l-s/2<0?-1:1),f=Math.max(n,Math.floor(i-l*h/s+c)),p=Math.min(o,Math.floor(i+(s-l)*h/s+c));e(t,r,i,f,p,a);}var d=r[2*i+a],g=n,m=o;for(ie(t,r,n,i),r[2*o+a]>d&&ie(t,r,n,o);g<m;){for(ie(t,r,g,m),g++,m--;r[2*g+a]<d;)g++;for(;r[2*m+a]>d;)m--;}r[2*n+a]===d?ie(t,r,n,m):ie(t,r,++m,o),m<=i&&(n=m+1),i<=m&&(o=m-1);}}(t,r,s,n,o,a%2);e(t,r,i,n,s-1,a+1);e(t,r,i,s+1,o,a+1);};function ie(e,t,r,i){ne(e,r,i),ne(t,2*r,2*i),ne(t,2*r+1,2*i+1);}function ne(e,t,r){var i=e[t];e[t]=e[r],e[r]=i;}var oe=function(e,t,r,i,n,o,a){var s,l,u=[0,e.length-1,0],h=[];for(;u.length;){var c=u.pop(),f=u.pop(),p=u.pop();if(f-p<=a)for(var d=p;d<=f;d++)s=t[2*d],l=t[2*d+1],s>=r&&s<=n&&l>=i&&l<=o&&h.push(e[d]);else{var g=Math.floor((p+f)/2);s=t[2*g],l=t[2*g+1],s>=r&&s<=n&&l>=i&&l<=o&&h.push(e[g]);var m=(c+1)%2;(0===c?r<=s:i<=l)&&(u.push(p),u.push(g-1),u.push(m)),(0===c?n>=s:o>=l)&&(u.push(g+1),u.push(f),u.push(m));}}return h};var ae=function(e,t,r,i,n,o){var a=[0,e.length-1,0],s=[],l=n*n;for(;a.length;){var u=a.pop(),h=a.pop(),c=a.pop();if(h-c<=o)for(var f=c;f<=h;f++)se(t[2*f],t[2*f+1],r,i)<=l&&s.push(e[f]);else{var p=Math.floor((c+h)/2),d=t[2*p],g=t[2*p+1];se(d,g,r,i)<=l&&s.push(e[p]);var m=(u+1)%2;(0===u?r-n<=d:i-n<=g)&&(a.push(c),a.push(p-1),a.push(m)),(0===u?r+n>=d:i+n>=g)&&(a.push(p+1),a.push(h),a.push(m));}}return s};function se(e,t,r,i){var n=e-r,o=t-i;return n*n+o*o}var le=function(e,t,r,i,n){return new ue(e,t,r,i,n)};function ue(e,t,r,i,n){t=t||he,r=r||ce,n=n||Array,this.nodeSize=i||64,this.points=e,this.ids=new n(e.length),this.coords=new n(2*e.length);for(var o=0;o<e.length;o++)this.ids[o]=o,this.coords[2*o]=t(e[o]),this.coords[2*o+1]=r(e[o]);re(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0);}function he(e){return e[0]}function ce(e){return e[1]}ue.prototype={range:function(e,t,r,i){return oe(this.ids,this.coords,e,t,r,i,this.nodeSize)},within:function(e,t,r){return ae(this.ids,this.coords,e,t,r,this.nodeSize)}};var fe=function(e){return new pe(e)};function pe(e){this.options=we(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1);}function de(e,t,r,i,n){return{x:e,y:t,zoom:1/0,id:i,properties:n,parentId:-1,numPoints:r}}function ge(e,t){var r=e.geometry.coordinates;return{x:ve(r[0]),y:xe(r[1]),zoom:1/0,id:t,parentId:-1}}function me(e){return{type:"Feature",properties:ye(e),geometry:{type:"Point",coordinates:[(i=e.x,360*(i-.5)),(t=e.y,r=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var t,r,i;}function ye(e){var t=e.numPoints,r=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return we(we({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function ve(e){return e/360+.5}function xe(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function we(e,t){for(var r in t)e[r]=t[r];return e}function Me(e){return e.x}function Se(e){return e.y}function _e(e,t,r,i,n,o){var a=n-r,s=o-i;if(0!==a||0!==s){var l=((e-r)*a+(t-i)*s)/(a*a+s*s);l>1?(r=n,i=o):l>0&&(r+=a*l,i+=s*l);}return(a=e-r)*a+(s=t-i)*s}function be(e,t,r,i){var n={id:e||null,type:t,geometry:r,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)Ie(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var i=0;i<t.length;i++)Ie(e,t[i]);else if("MultiPolygon"===r)for(i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)Ie(e,t[i][n]);}(n),n}function Ie(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1]);}function ke(e,t,r){if(t.geometry){var i=t.geometry.coordinates,n=t.geometry.type,o=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),a=[];if("Point"===n)ze(i,a);else if("MultiPoint"===n)for(var s=0;s<i.length;s++)ze(i[s],a);else if("LineString"===n)Pe(i,a,o,!1);else if("MultiLineString"===n){if(r.lineMetrics){for(s=0;s<i.length;s++)a=[],Pe(i[s],a,o,!1),e.push(be(t.id,"LineString",a,t.properties));return}Te(i,a,o,!1);}else if("Polygon"===n)Te(i,a,o,!0);else{if("MultiPolygon"!==n){if("GeometryCollection"===n){for(s=0;s<t.geometry.geometries.length;s++)ke(e,{id:t.id,geometry:t.geometry.geometries[s],properties:t.properties},r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(s=0;s<i.length;s++){var l=[];Te(i[s],l,o,!0),a.push(l);}}e.push(be(t.id,n,a,t.properties));}}function ze(e,t){t.push(Le(e[0])),t.push(De(e[1])),t.push(0);}function Pe(e,t,r,i){for(var n,o,a=0,s=0;s<e.length;s++){var l=Le(e[s][0]),u=De(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(a+=i?(n*u-l*o)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(u-o,2))),n=l,o=u;}var h=t.length-3;t[2]=1,function e(t,r,i,n){for(var o,a=n,s=t[r],l=t[r+1],u=t[i],h=t[i+1],c=r+3;c<i;c+=3){var f=_e(t[c],t[c+1],s,l,u,h);f>a&&(o=c,a=f);}a>n&&(o-r>3&&e(t,r,o,n),t[o+2]=a,i-o>3&&e(t,o,i,n));}(t,0,h,r),t[h+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size;}function Te(e,t,r,i){for(var n=0;n<e.length;n++){var o=[];Pe(e[n],o,r,i),t.push(o);}}function Le(e){return e/360+.5}function De(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Oe(e,t,r,i,n,o,a,s){if(i/=t,o>=(r/=t)&&a<i)return e;if(a<r||o>=i)return null;for(var l=[],u=0;u<e.length;u++){var h=e[u],c=h.geometry,f=h.type,p=0===n?h.minX:h.minY,d=0===n?h.maxX:h.maxY;if(p>=r&&d<i)l.push(h);else if(!(d<r||p>=i)){var g=[];if("Point"===f||"MultiPoint"===f)Ce(c,g,r,i,n);else if("LineString"===f)Ee(c,g,r,i,n,!1,s.lineMetrics);else if("MultiLineString"===f)Ne(c,g,r,i,n,!1);else if("Polygon"===f)Ne(c,g,r,i,n,!0);else if("MultiPolygon"===f)for(var m=0;m<c.length;m++){var y=[];Ne(c[m],y,r,i,n,!0),y.length&&g.push(y);}if(g.length){if(s.lineMetrics&&"LineString"===f){for(m=0;m<g.length;m++)l.push(be(h.id,f,g[m],h.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===g.length?(f="LineString",g=g[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===g.length?"Point":"MultiPoint"),l.push(be(h.id,f,g,h.tags));}}}return l.length?l:null}function Ce(e,t,r,i,n){for(var o=0;o<e.length;o+=3){var a=e[o+n];a>=r&&a<=i&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]));}}function Ee(e,t,r,i,n,o,a){for(var s,l,u=Ae(e),h=0===n?Re:$e,c=e.start,f=0;f<e.length-3;f+=3){var p=e[f],d=e[f+1],g=e[f+2],m=e[f+3],y=e[f+4],v=0===n?p:d,x=0===n?m:y,w=!1;a&&(s=Math.sqrt(Math.pow(p-m,2)+Math.pow(d-y,2))),v<r?x>=r&&(l=h(u,p,d,m,y,r),a&&(u.start=c+s*l)):v>=i?x<i&&(l=h(u,p,d,m,y,i),a&&(u.start=c+s*l)):Be(u,p,d,g),x<r&&v>=r&&(l=h(u,p,d,m,y,r),w=!0),x>i&&v<=i&&(l=h(u,p,d,m,y,i),w=!0),!o&&w&&(a&&(u.end=c+s*l),t.push(u),u=Ae(e)),a&&(c+=s);}var M=e.length-3;p=e[M],d=e[M+1],g=e[M+2],(v=0===n?p:d)>=r&&v<=i&&Be(u,p,d,g),M=u.length-3,o&&M>=3&&(u[M]!==u[0]||u[M+1]!==u[1])&&Be(u,u[0],u[1],u[2]),u.length&&t.push(u);}function Ae(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Ne(e,t,r,i,n,o){for(var a=0;a<e.length;a++)Ee(e[a],t,r,i,n,o,!1);}function Be(e,t,r,i){e.push(t),e.push(r),e.push(i);}function Re(e,t,r,i,n,o){var a=(o-t)/(i-t);return e.push(o),e.push(r+(n-r)*a),e.push(1),a}function $e(e,t,r,i,n,o){var a=(o-r)/(n-r);return e.push(t+(i-t)*a),e.push(o),e.push(1),a}function Fe(e,t){for(var r=[],i=0;i<e.length;i++){var n,o=e[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=Ge(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var s=0;s<o.geometry.length;s++)n.push(Ge(o.geometry[s],t));}else if("MultiPolygon"===a)for(n=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(Ge(o.geometry[s][u],t));n.push(l);}r.push(be(o.id,a,n,o.tags));}return r}function Ge(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var i=0;i<e.length;i+=3)r.push(e[i]+t,e[i+1],e[i+2]);return r}function Ve(e,t){if(e.transformed)return e;var r,i,n,o=1<<e.z,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry,h=l.type;if(l.geometry=[],1===h)for(i=0;i<u.length;i+=2)l.geometry.push(je(u[i],u[i+1],t,o,a,s));else for(i=0;i<u.length;i++){var c=[];for(n=0;n<u[i].length;n+=2)c.push(je(u[i][n],u[i][n+1],t,o,a,s));l.geometry.push(c);}}return e.transformed=!0,e}function je(e,t,r,i,n,o){return[Math.round(r*(e*i-n)),Math.round(r*(t*i-o))]}function Je(e,t,r,i,n){for(var o=t===n.maxZoom?0:n.tolerance/((1<<t)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,We(a,e[s],o,n);var l=e[s].minX,u=e[s].minY,h=e[s].maxX,c=e[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),h>a.maxX&&(a.maxX=h),c>a.maxY&&(a.maxY=c);}return a}function We(e,t,r,i){var n=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<n.length;s+=3)a.push(n[s]),a.push(n[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)Ye(a,n,e,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<n.length;s++)Ye(a,n[s],e,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<n.length;l++){var u=n[l];for(s=0;s<u.length;s++)Ye(a,u[s],e,r,!0,0===s);}if(a.length){var h=t.tags||null;if("LineString"===o&&i.lineMetrics){for(var c in h={},t.tags)h[c]=t.tags[c];h.mapbox_clip_start=n.start/n.size,h.mapbox_clip_end=n.end/n.size;}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:h};null!==t.id&&(f.id=t.id),e.features.push(f);}}function Ye(e,t,r,i,n,o){var a=i*i;if(i>0&&t.size<(n?a:i))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===i||t[l+2]>a)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;n&&function(e,t){for(var r=0,i=0,n=e.length,o=n-2;i<n;o=i,i+=2)r+=(e[i]-e[o])*(e[i+1]+e[o+1]);if(r>0===t)for(i=0,n=e.length;i<n/2;i+=2){var a=e[i],s=e[i+1];e[i]=e[n-2-i],e[i+1]=e[n-1-i],e[n-2-i]=a,e[n-1-i]=s;}}(s,o),e.push(s);}}function Ze(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var i=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var i=0;i<e.features.length;i++)ke(r,e.features[i],t);else"Feature"===e.type?ke(r,e,t):ke(r,{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(e,t){var r=t.buffer/t.extent,i=e,n=Oe(e,1,-1-r,r,0,-1,2,t),o=Oe(e,1,1-r,2+r,0,-1,2,t);return(n||o)&&(i=Oe(e,1,-r,1+r,0,-1,2,t)||[],n&&(i=Fe(n,1).concat(i)),o&&(i=i.concat(Fe(o,-1)))),i}(i,t)).length&&this.splitTile(i,0,0,0),r&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)));}function Xe(e,t,r){return 32*((1<<e)*r+t)+e}function qe(e,t){var r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return t(null,null);var n=new $(i.features),o=J(n);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:n,rawData:o.buffer});}pe.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var r="prepare "+e.length+" points";t&&console.time(r),this.points=e;var i=e.map(ge);t&&console.timeEnd(r);for(var n=this.options.maxZoom;n>=this.options.minZoom;n--){var o=+Date.now();this.trees[n+1]=le(i,Me,Se,this.options.nodeSize,Float32Array),i=this._cluster(i,n),t&&console.log("z%d: %d clusters in %dms",n,i.length,+Date.now()-o);}return this.trees[this.options.minZoom]=le(i,Me,Se,this.options.nodeSize,Float32Array),t&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var r=this.trees[this._limitZoom(t)],i=r.range(ve(e[0]),xe(e[3]),ve(e[2]),xe(e[1])),n=[],o=0;o<i.length;o++){var a=r.points[i[o]];n.push(a.numPoints?me(a):this.points[a.id]);}return n},getChildren:function(e,t){for(var r=this.trees[t+1].points[e],i=this.options.radius/(this.options.extent*Math.pow(2,t)),n=this.trees[t+1].within(r.x,r.y,i),o=[],a=0;a<n.length;a++){var s=this.trees[t+1].points[n[a]];s.parentId===e&&o.push(s.numPoints?me(s):this.points[s.id]);}return o},getLeaves:function(e,t,r,i){r=r||10,i=i||0;var n=[];return this._appendLeaves(n,e,t,r,i,0),n},getTile:function(e,t,r){var i=this.trees[this._limitZoom(e)],n=Math.pow(2,e),o=this.options.extent,a=this.options.radius/o,s=(r-a)/n,l=(r+1+a)/n,u={features:[]};return this._addTileFeatures(i.range((t-a)/n,s,(t+1+a)/n,l),i.points,t,r,n,u),0===t&&this._addTileFeatures(i.range(1-a/n,s,1,l),i.points,n,r,n,u),t===n-1&&this._addTileFeatures(i.range(0,s,a/n,l),i.points,-1,r,n,u),u.features.length?u:null},getClusterExpansionZoom:function(e,t){for(;t<this.options.maxZoom;){var r=this.getChildren(e,t);if(t++,1!==r.length)break;e=r[0].properties.cluster_id;}return t},_appendLeaves:function(e,t,r,i,n,o){for(var a=this.getChildren(t,r),s=0;s<a.length;s++){var l=a[s].properties;if(l.cluster?o+l.point_count<=n?o+=l.point_count:o=this._appendLeaves(e,l.cluster_id,r+1,i,n,o):o<n?o++:e.push(a[s]),e.length===i)break}return o},_addTileFeatures:function(e,t,r,i,n,o){for(var a=0;a<e.length;a++){var s=t[e[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*n-r)),Math.round(this.options.extent*(s.y*n-i))]],tags:s.numPoints?ye(s):this.points[s.id].properties});}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var r=[],i=this.options.radius/(this.options.extent*Math.pow(2,t)),n=0;n<e.length;n++){var o=e[n];if(!(o.zoom<=t)){o.zoom=t;var a=this.trees[t+1],s=a.within(o.x,o.y,i),l=o.numPoints||1,u=o.x*l,h=o.y*l,c=null;this.options.reduce&&(c=this.options.initial(),this._accumulate(c,o));for(var f=0;f<s.length;f++){var p=a.points[s[f]];if(t<p.zoom){var d=p.numPoints||1;p.zoom=t,u+=p.x*d,h+=p.y*d,l+=d,p.parentId=n,this.options.reduce&&this._accumulate(c,p);}}1===l?r.push(o):(o.parentId=n,r.push(de(u/l,h/l,l,n,c)));}}return r},_accumulate:function(e,t){var r=t.numPoints?t.properties:this.options.map(this.points[t.id].properties);this.options.reduce(e,r);}},Ze.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,debug:0},Ze.prototype.splitTile=function(e,t,r,i,n,o,a){for(var s=[e,t,r,i],l=this.options,u=l.debug;s.length;){i=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var h=1<<t,c=Xe(t,r,i),f=this.tiles[c];if(!f&&(u>1&&console.time("creation"),f=this.tiles[c]=Je(e,t,r,i,l),this.tileCoords.push({z:t,x:r,y:i}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,i,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++;}if(f.source=e,n){if(t===l.maxZoom||t===n)continue;var d=1<<n-t;if(r!==Math.floor(o/d)||i!==Math.floor(a/d))continue}else if(t===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==e.length){u>1&&console.time("clipping");var g,m,y,v,x,w,M=.5*l.buffer/l.extent,S=.5-M,_=.5+M,b=1+M;g=m=y=v=null,x=Oe(e,h,r-M,r+_,0,f.minX,f.maxX,l),w=Oe(e,h,r+S,r+b,0,f.minX,f.maxX,l),e=null,x&&(g=Oe(x,h,i-M,i+_,1,f.minY,f.maxY,l),m=Oe(x,h,i+S,i+b,1,f.minY,f.maxY,l),x=null),w&&(y=Oe(w,h,i-M,i+_,1,f.minY,f.maxY,l),v=Oe(w,h,i+S,i+b,1,f.minY,f.maxY,l),w=null),u>1&&console.timeEnd("clipping"),s.push(g||[],t+1,2*r,2*i),s.push(m||[],t+1,2*r,2*i+1),s.push(y||[],t+1,2*r+1,2*i),s.push(v||[],t+1,2*r+1,2*i+1);}}},Ze.prototype.getTile=function(e,t,r){var i=this.options,n=i.extent,o=i.debug;if(e<0||e>24)return null;var a=1<<e,s=Xe(e,t=(t%a+a)%a,r);if(this.tiles[s])return Ve(this.tiles[s],n);o>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,u=e,h=t,c=r;!l&&u>0;)u--,h=Math.floor(h/2),c=Math.floor(c/2),l=this.tiles[Xe(u,h,c)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,h,c),o>1&&console.time("drilling down"),this.splitTile(l.source,u,h,c,e,t,r),o>1&&console.timeEnd("drilling down"),this.tiles[s]?Ve(this.tiles[s],n):null):null};var Ue=function(t){function r(e,r,i){t.call(this,e,r,qe),i&&(this.loadGeoJSON=i);}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData());},r.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var t=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new _.Performance(r.request);this.loadGeoJSON(r,function(n,o){if(n||!o)return t(n);if("object"!=typeof o)return t(new Error("Input data is not a valid GeoJSON object."));C(o,!0);try{e._geoJSONIndex=r.cluster?fe(r.superclusterOptions).load(o.features):function(e,t){return new Ze(e,t)}(o,r.geojsonVtOptions);}catch(n){return t(n)}e.loaded={};var a={};if(i){var s=i.finish();s&&(a.resourceTiming={},a.resourceTiming[r.source]=JSON.parse(JSON.stringify(s)));}t(null,a);});}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData());},r.prototype.reloadTile=function(e,r){var i=this.loaded,n=e.uid;return i&&i[n]?t.prototype.reloadTile.call(this,e,r):this.loadTile(e,r)},r.prototype.loadGeoJSON=function(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error("Input data is not a valid GeoJSON object."));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error("Input data is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t();},r}(k),He=function(t){var r=this;this.self=t,this.actor=new e.default$9(t,this),this.layerIndexes={},this.workerSourceTypes={vector:k,geojson:Ue},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');r.workerSourceTypes[e]=t;},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isLoaded())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText;};};return He.prototype.setLayers=function(e,t,r){this.getLayerIndex(e).replace(t),r();},He.prototype.updateLayers=function(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r();},He.prototype.loadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).loadTile(t,r);},He.prototype.loadDEMTile=function(e,t,r){this.getDEMWorkerSource(e,t.source).loadTile(t,r);},He.prototype.reloadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).reloadTile(t,r);},He.prototype.abortTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r);},He.prototype.removeTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r);},He.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t);},He.prototype.removeSource=function(e,t,r){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var i=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==i.removeSource?i.removeSource(t,r):r();}},He.prototype.loadWorkerSource=function(e,t,r){try{this.self.importScripts(t.url),r();}catch(e){r(e.toString());}},He.prototype.loadRTLTextPlugin=function(t,r,i){try{e.plugin.isLoaded()||(this.self.importScripts(r),i(e.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+r)));}catch(e){i(e.toString());}},He.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t},He.prototype.getWorkerSource=function(e,t,r){var i=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){var n={send:function(t,r,n){i.actor.send(t,r,n,e);}};this.workerSources[e][t][r]=new this.workerSourceTypes[t](n,this.getLayerIndex(e));}return this.workerSources[e][t][r]},He.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new z),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new He(self),He});

define(["./chunk1.js"],function(t){"use strict";var e=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(i);try{e=new Worker(n),t=!0;}catch(e){t=!1;}e&&e.terminate();return URL.revokeObjectURL(n),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){void 0===i[t]&&(i[t]=function(t){var i=document.createElement("canvas"),n=Object.create(e.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",n)||i.probablySupportsContext("experimental-webgl",n):i.supportsContext?i.supportsContext("webgl",n)||i.supportsContext("experimental-webgl",n):i.getContext("webgl",n)||i.getContext("experimental-webgl",n)}(t));return i[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var i={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};}),i={create:function(e,i,n){var o=t.default$1.document.createElement(e);return i&&(o.className=i),n&&n.appendChild(o),o},createNS:function(e,i){return t.default$1.document.createElementNS(e,i)}},n=t.default$1.document?t.default$1.document.documentElement.style:null;function o(t){if(!n)return null;for(var e=0;e<t.length;e++)if(t[e]in n)return t[e];return t[0]}var r,a=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){n&&a&&(r=n[a],n[a]="none");},i.enableDrag=function(){n&&a&&(n[a]=r);};var s=o(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[s]=e;};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0;}});t.default$1.addEventListener("test",c,c),t.default$1.removeEventListener("test",c,c);}catch(t){l=!1;}i.addEventListener=function(t,e,i,n){void 0===n&&(n={}),"passive"in n&&l?t.addEventListener(e,i,n):t.addEventListener(e,i,n.capture);},i.removeEventListener=function(t,e,i,n){void 0===n&&(n={}),"passive"in n&&l?t.removeEventListener(e,i,n):t.removeEventListener(e,i,n.capture);};var u=function(e){e.preventDefault(),e.stopPropagation(),t.default$1.removeEventListener("click",u,!0);};i.suppressClick=function(){t.default$1.addEventListener("click",u,!0),t.default$1.setTimeout(function(){t.default$1.removeEventListener("click",u,!0);},0);},i.mousePos=function(e,i){var n=e.getBoundingClientRect();return i=i.touches?i.touches[0]:i,new t.default(i.clientX-n.left-e.clientLeft,i.clientY-n.top-e.clientTop)},i.touchPos=function(e,i){for(var n=e.getBoundingClientRect(),o=[],r="touchend"===i.type?i.changedTouches:i.touches,a=0;a<r.length;a++)o.push(new t.default(r[a].clientX-n.left-e.clientLeft,r[a].clientY-n.top-e.clientTop));return o},i.mouseButton=function(e){return void 0!==t.default$1.InstallTrigger&&2===e.button&&e.ctrlKey&&t.default$1.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t);};var h={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},p="See https://www.mapbox.com/api-documentation/#access-tokens";function d(t,e){var i=b(h.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"/"!==i.path&&(t.path=""+i.path+t.path),!h.REQUIRE_ACCESS_TOKEN)return w(t);if(!(e=e||h.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+p);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+p);return t.params.push("access_token="+e),w(t)}function f(t){return 0===t.indexOf("mapbox:")}var m=function(t,e){if(!f(t))return t;var i=b(t);return i.path="/fonts/v1"+i.path,d(i,e)},_=function(t,e){if(!f(t))return t;var i=b(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),d(i,e)},g=function(t,e,i,n){var o=b(t);return f(t)?(o.path="/styles/v1"+o.path+"/sprite"+e+i,d(o,n)):(o.path+=""+e+i,w(o))},v=/(\.(png|jpg)\d*)(?=$)/,y=function(e,i,n){if(!i||!f(i))return e;var o=b(e),r=t.default$2.devicePixelRatio>=2||512===n?"@2x":"",a=t.default$2.supportsWebp?".webp":"$1";return o.path=o.path.replace(v,""+r+a),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(h.ACCESS_TOKEN||""));}(o.params),w(o)};var x=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function b(t){var e=t.match(x);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function w(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var E=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new t.default$3(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new t.RGBAImage({width:64,height:64}),this.dirty=!0;};E.prototype.isLoaded=function(){return this.loaded},E.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var n=i[e],o=n.ids,r=n.callback;this._notify(o,r);}this.requestors=[];}},E.prototype.getImage=function(t){return this.images[t]},E.prototype.addImage=function(t,e){this.images[t]=e;},E.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t]);},E.prototype.listImages=function(){return Object.keys(this.images)},E.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var n=0,o=t;n<o.length;n+=1){var r=o[n];this.images[r]||(i=!1);}this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e});},E.prototype._notify=function(t,e){for(var i={},n=0,o=t;n<o.length;n+=1){var r=o[n],a=this.images[r];a&&(i[r]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf});}e(null,i);},E.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},E.prototype.getPattern=function(e){var i=this.patterns[e];if(i)return i.position;var n=this.getImage(e);if(!n)return null;var o=n.data.width+2,r=n.data.height+2,a=this.shelfPack.packOne(o,r);if(!a)return null;this.atlasImage.resize(this.getPixelSize());var s=n.data,l=this.atlasImage,c=a.x+1,u=a.y+1,h=s.width,p=s.height;t.RGBAImage.copy(s,l,{x:0,y:0},{x:c,y:u},{width:h,height:p}),t.RGBAImage.copy(s,l,{x:0,y:p-1},{x:c,y:u-1},{width:h,height:1}),t.RGBAImage.copy(s,l,{x:0,y:0},{x:c,y:u+p},{width:h,height:1}),t.RGBAImage.copy(s,l,{x:h-1,y:0},{x:c-1,y:u},{width:1,height:p}),t.RGBAImage.copy(s,l,{x:0,y:0},{x:c+h,y:u},{width:1,height:p}),this.dirty=!0;var d=new t.ImagePosition(a,n);return this.patterns[e]={bin:a,position:d},d},E.prototype.bind=function(e){var i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.default$4(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE);};var T=C,I=1e20;function C(t,e,i,n,o,r){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=o||"sans-serif",this.fontWeight=r||"normal",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1));}function S(t,e,i,n,o,r,a){for(var s=0;s<e;s++){for(var l=0;l<i;l++)n[l]=t[l*e+s];for(z(n,o,r,a,i),l=0;l<i;l++)t[l*e+s]=o[l];}for(l=0;l<i;l++){for(s=0;s<e;s++)n[s]=t[l*e+s];for(z(n,o,r,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(o[s]);}}function z(t,e,i,n,o){i[0]=0,n[0]=-I,n[1]=+I;for(var r=1,a=0;r<o;r++){for(var s=(t[r]+r*r-(t[i[a]]+i[a]*i[a]))/(2*r-2*i[a]);s<=n[a];)a--,s=(t[r]+r*r-(t[i[a]]+i[a]*i[a]))/(2*r-2*i[a]);i[++a]=r,n[a]=s,n[a+1]=+I;}for(r=0,a=0;r<o;r++){for(;n[a+1]<r;)a++;e[r]=(r-i[a])*(r-i[a])+t[i[a]];}}C.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var o=e.data[4*n+3]/255;this.gridOuter[n]=1===o?0:0===o?I:Math.pow(Math.max(0,.5-o),2),this.gridInner[n]=1===o?I:0===o?0:Math.pow(Math.max(0,o-.5),2);}for(S(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),S(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++){var r=this.gridOuter[n]-this.gridInner[n];i[n]=Math.max(0,Math.min(255,Math.round(255-255*(r/this.radius+this.cutoff))));}return i};var A=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={};};A.prototype.setURL=function(t){this.url=t;},A.prototype.getGlyphs=function(e,i){var n=this,o=[];for(var r in e)for(var a=0,s=e[r];a<s.length;a+=1){var l=s[a];o.push({stack:r,id:l});}t.asyncAll(o,function(t,e){var i=t.stack,o=t.id,r=n.entries[i];r||(r=n.entries[i]={glyphs:{},requests:{}});var a=r.glyphs[o];if(void 0===a)if(a=n._tinySDF(r,i,o))e(null,{stack:i,id:o,glyph:a});else{var s=Math.floor(o/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var l=r.requests[s];l||(l=r.requests[s]=[],A.loadGlyphRange(i,s,n.url,n.requestTransform,function(t,e){if(e)for(var i in e)r.glyphs[+i]=e[+i];for(var n=0,o=l;n<o.length;n+=1){(0,o[n])(t,e);}delete r.requests[s];})),l.push(function(t,n){t?e(t):n&&e(null,{stack:i,id:o,glyph:n[o]||null});});}}else e(null,{stack:i,id:o,glyph:a});},function(t,e){if(t)i(t);else if(e){for(var n={},o=0,r=e;o<r.length;o+=1){var a=r[o],s=a.stack,l=a.id,c=a.glyph;(n[s]||(n[s]={}))[l]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics};}i(null,n);}});},A.prototype._tinySDF=function(e,i,n){var o=this.localIdeographFontFamily;if(o&&(t.default$6["CJK Unified Ideographs"](n)||t.default$6["Hangul Syllables"](n))){var r=e.tinySDF;if(!r){var a="400";/bold/i.test(i)?a="900":/medium/i.test(i)?a="500":/light/i.test(i)&&(a="200"),r=e.tinySDF=new A.TinySDF(24,3,8,.25,o,a);}return{id:n,bitmap:new t.AlphaImage({width:30,height:30},r.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},A.loadGlyphRange=function(e,i,n,o,r){var a=256*i,s=a+255,l=o(m(n).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,function(e,i){if(e)r(e);else if(i){for(var n={},o=0,a=t.default$5(i.data);o<a.length;o+=1){var s=a[o];n[s.id]=s;}r(null,n);}});},A.TinySDF=T;var M=function(){this.specification=t.default$7.light.position;};M.prototype.possiblyEvaluate=function(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))},M.prototype.interpolate=function(e,i,n){return{x:t.number(e.x,i.x,n),y:t.number(e.y,i.y,n),z:t.number(e.z,i.z,n)}};var L=new t.Properties({anchor:new t.DataConstantProperty(t.default$7.light.anchor),position:new M,color:new t.DataConstantProperty(t.default$7.light.color),intensity:new t.DataConstantProperty(t.default$7.light.intensity)}),D=function(e){function i(i){e.call(this),this._transitionable=new t.Transitionable(L),this.setLight(i),this._transitioning=this._transitionable.untransitioned();}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e){if(!this._validate(t.validateLight,e))for(var i in e){var n=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),n):this._transitionable.setValue(i,n);}},i.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning);},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t);},i.prototype._validate=function(e,i){return t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.default$7})))},i}(t.Evented),R=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={};};R.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.positions[i]||(this.positions[i]=this.addDash(t,e)),this.positions[i]},R.prototype.addDash=function(e,i){var n=i?7:0,o=2*n+1;if(this.nextRow+o>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var r=0,a=0;a<e.length;a++)r+=e[a];for(var s=this.width/r,l=s/2,c=e.length%2==1,u=-n;u<=n;u++)for(var h=this.nextRow+n+u,p=this.width*h,d=c?-e[e.length-1]:0,f=e[0],m=1,_=0;_<this.width;_++){for(;f<_/s;)d=f,f+=e[m],c&&m===e.length-1&&(f+=e[0]),m++;var g=Math.abs(_-d*s),v=Math.abs(_-f*s),y=Math.min(g,v),x=m%2==1,b=void 0;if(i){var w=n?u/n*(l+1):0;if(x){var E=l-Math.abs(w);b=Math.sqrt(y*y+E*E);}else b=l-Math.sqrt(y*y+w*w);}else b=(x?1:-1)*y;this.data[3+4*(p+_)]=Math.max(0,Math.min(255,b+128));}var T={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:r};return this.nextRow+=o,this.dirty=!0,T},R.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data));};var P=function e(i,n){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var o=this.workerPool.acquire(this.id),r=0;r<o.length;r++){var a=o[r],s=new e.Actor(a,n,this.id);s.name="Worker "+r,this.actors.push(s);}};function k(e,i,n){var o=function(e,i){if(e)return n(e);if(i){var o=t.pick(i,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map(function(t){return t.id})),n(null,o);}};e.url?t.getJSON(i(_(e.url),t.ResourceType.Source),o):t.default$2.frame(function(){return o(null,e)});}P.prototype.broadcast=function(e,i,n){n=n||function(){},t.asyncAll(this.actors,function(t,n){t.send(e,i,n);},n);},P.prototype.send=function(t,e,i,n){return("number"!=typeof n||isNaN(n))&&(n=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[n].send(t,e,i),n},P.prototype.remove=function(){this.actors.forEach(function(t){t.remove();}),this.actors=[],this.workerPool.release(this.id);},P.Actor=t.default$9;var B=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};B.prototype.wrap=function(){return new B(t.wrap(this.lng,-180,180),this.lat)},B.prototype.toArray=function(){return[this.lng,this.lat]},B.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},B.prototype.toBounds=function(t){var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new O(new B(this.lng-i,this.lat-e),new B(this.lng+i,this.lat+e))},B.convert=function(t){if(t instanceof B)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new B(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new B(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var O=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]));};O.prototype.setNorthEast=function(t){return this._ne=t instanceof B?new B(t.lng,t.lat):B.convert(t),this},O.prototype.setSouthWest=function(t){return this._sw=t instanceof B?new B(t.lng,t.lat):B.convert(t),this},O.prototype.extend=function(t){var e,i,n=this._sw,o=this._ne;if(t instanceof B)e=t,i=t;else{if(!(t instanceof O))return Array.isArray(t)?t.every(Array.isArray)?this.extend(O.convert(t)):this.extend(B.convert(t)):this;if(e=t._sw,i=t._ne,!e||!i)return this}return n||o?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),o.lng=Math.max(i.lng,o.lng),o.lat=Math.max(i.lat,o.lat)):(this._sw=new B(e.lng,e.lat),this._ne=new B(i.lng,i.lat)),this},O.prototype.getCenter=function(){return new B((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},O.prototype.getSouthWest=function(){return this._sw},O.prototype.getNorthEast=function(){return this._ne},O.prototype.getNorthWest=function(){return new B(this.getWest(),this.getNorth())},O.prototype.getSouthEast=function(){return new B(this.getEast(),this.getSouth())},O.prototype.getWest=function(){return this._sw.lng},O.prototype.getSouth=function(){return this._sw.lat},O.prototype.getEast=function(){return this._ne.lng},O.prototype.getNorth=function(){return this._ne.lat},O.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},O.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},O.prototype.isEmpty=function(){return!(this._sw&&this._ne)},O.convert=function(t){return!t||t instanceof O?t:new O(t)};var F=function(t,e,i){this.bounds=O.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=i||24;};F.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},F.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),i=Math.floor(this.latY(this.bounds.getNorth(),t.z)),n=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),o=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<n&&t.y>=i&&t.y<o},F.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},F.prototype.latY=function(e,i){var n=t.clamp(Math.sin(Math.PI/180*e),-.9999,.9999),o=Math.pow(2,i)/(2*Math.PI);return Math.pow(2,i-1)+.5*Math.log((1+n)/(1-n))*-o};var N=function(e){function i(i,n,o,r){if(e.call(this),this.id=i,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(n,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r);}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),k(this._options,this.map._transformRequest,function(i,n){i?e.fire(new t.ErrorEvent(i)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new F(n.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})));});},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.onAdd=function(t){this.map=t,this.load();},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,i){var n=y(e.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(n,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.default$2.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function r(t,n){return e.aborted?i(null):t?i(t):(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}o.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",o,r.bind(this)):"loading"===e.state?e.reloadCallback=i:this.dispatcher.send("reloadTile",o,r.bind(this),e.workerID);},i.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID);},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID);},i.prototype.hasTransition=function(){return!1},i}(t.Evented),$=function(e){function i(i,n,o,r){e.call(this),this.id=i,this.dispatcher=o,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]));}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),k(this._options,this.map._transformRequest,function(i,n){i?e.fire(new t.ErrorEvent(i)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new F(n.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})));});},i.prototype.onAdd=function(t){this.map=t,this.load();},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.loadTile=function(e,i){var n=this,o=y(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(o,t.ResourceType.Tile),function(o,r){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(o)e.state="errored",i(o);else if(r){n.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=n.map.painter.context,s=a.gl;e.texture=n.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new t.default$4(a,r,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",i(null);}});},i.prototype.abortTile=function(t,e){t.request&&(t.request.abort(),delete t.request),e();},i.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e();},i.prototype.hasTransition=function(){return!1},i}(t.Evented),U=function(e){function i(i,n,o,r){e.call(this,i,n,o,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},n),this.encoding=n.encoding||"mapbox";}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,i){var n=y(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(n,t.ResourceType.Tile),function(n,o){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var r=t.default$2.getImageData(o),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:r,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",a,function(t,n){t&&(e.state="errored",i(t));n&&(e.dem=n,e.needsHillshadePrepare=!0,e.state="loaded",i(null));}.bind(this)));}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID);},i.prototype._getNeighboringTiles=function(e){var i=e.canonical,n=Math.pow(2,i.z),o=(i.x-1+n)%n,r=0===i.x?e.wrap-1:e.wrap,a=(i.x+1+n)%n,s=i.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,r,i.z,o,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,r,i.z,o,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y-1).key]={backfilled:!1}),i.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,r,i.z,o,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID);},i}($),Z=function(e){function i(i,n,o,r){e.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=o,this.setEventedParent(r),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution);var a=t.default$10/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:t.default$10,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.default$10,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions);}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(i){if(i)e.fire(new t.ErrorEvent(i));else{var n={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",n));}});},i.prototype.onAdd=function(t){this.map=t,this.load();},i.prototype.setData=function(e){var i=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)return i.fire(new t.ErrorEvent(e));var n={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(n.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t.Event("data",n));}),this},i.prototype._updateWorkerData=function(e){var i=this,n=t.extend({},this.workerOptions),o=this._data;"string"==typeof o?(n.request=this.map._transformRequest(t.default$2.resolveURL(o),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(o),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(t,o){i._removed||o&&o.abandoned||(i._loaded=!0,o&&o.resourceTiming&&o.resourceTiming[i.id]&&(i._resourceTiming=o.resourceTiming[i.id].slice(0)),i.dispatcher.send(i.type+".coalesce",{source:n.source},null,i.workerID),e(t));},this.workerID);},i.prototype.loadTile=function(e,i){var n=this,o=void 0===e.workerID?"loadTile":"reloadTile",r={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.default$2.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(o,r,function(t,r){return e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(r,n.map.painter,"reloadTile"===o),i(null))},this.workerID);},i.prototype.abortTile=function(t){t.aborted=!0;},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID);},i.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID);},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),V=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null;};V.prototype.bind=function(t,e,i,n,o,r,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==n.length,c=0;!l&&c<n.length;c++)this.boundPaintVertexBuffers[c]!==n[c]&&(l=!0);var u=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==i||l||this.boundIndexBuffer!==o||this.boundVertexOffset!==r||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||u?this.freshBind(e,i,n,o,r,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),o&&o.dynamicDraw&&o.bind(),s&&s.bind());},V.prototype.freshBind=function(t,e,i,n,o,r,a){var s,l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=r,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(var h=l;h<s;h++)u.disableVertexAttribArray(h);}e.enableAttributes(u,t);for(var p=0,d=i;p<d.length;p+=1){d[p].enableAttributes(u,t);}r&&r.enableAttributes(u,t),a&&a.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,o);for(var f=0,m=i;f<m.length;f+=1){var _=m[f];_.bind(),_.setVertexAttribPointers(u,t,o);}r&&(r.bind(),r.setVertexAttribPointers(u,t,o)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,t,o)),c.currentNumAttributes=l;},V.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null);};var j=function(e){function i(t,i,n,o){e.call(this),this.id=t,this.dispatcher=n,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(o),this.options=i;}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(i,n){i?e.fire(new t.ErrorEvent(i)):n&&(e.image=t.default$2.getImageData(n),e._finishLoading());});},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})));},i.prototype.onAdd=function(t){this.map=t,this.load();},i.prototype.setCoordinates=function(e){this.coordinates=e;var i=this.map,n=e.map(function(t){return i.transform.locationCoordinate(B.convert(t)).zoomTo(0)}),o=this.centerCoord=t.getCoordinatesCenter(n);o.column=Math.floor(o.column),o.row=Math.floor(o.row),this.tileID=new t.CanonicalTileID(o.zoom,o.column,o.row),this.minzoom=this.maxzoom=o.zoom;var r=n.map(function(e){var i=e.zoomTo(o.zoom);return new t.default(Math.round((i.column-o.column)*t.default$10),Math.round((i.row-o.row)*t.default$10))});return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.default$10,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.default$10),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.default$10,t.default$10),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.default$11.members)),this.boundsVAO||(this.boundsVAO=new V),this.texture||(this.texture=new t.default$4(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[n];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture);}}},i.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null));},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),G=function(e){function i(t,i,n,o){e.call(this,t,i,n,o),this.roundZoom=!0,this.type="video",this.options=i;}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this,i=this.options;this.urls=[];for(var n=0,o=i.urls;n<o.length;n+=1){var r=o[n];e.urls.push(e.map._transformRequest(r,t.ResourceType.Source).url);}t.getVideo(this.urls,function(i,n){i?e.fire(new t.ErrorEvent(i)):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender();}),e.map&&e.video.play(),e._finishLoading());});},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)));},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,i=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.default$11.members)),this.boundsVAO||(this.boundsVAO=new V),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.default$4(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[n];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture);}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(j),W=function(e){function i(i,n,o,r){e.call(this,i,n,o,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.default$12("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.default$12("sources."+i,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.default$12("sources."+i,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.default$1.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.default$12("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.default$12("sources."+i,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate;}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.default$1.HTMLCanvasElement?this.options.canvas:t.default$1.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map._rerender();},this.pause=function(){this._playing=!1;},this._finishLoading());},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play();},i.prototype.onRemove=function(){this.pause();},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,n=i.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,t.default$11.members)),this.boundsVAO||(this.boundsVAO=new V),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.canvas)):(this.texture=new t.default$4(i,this.canvas,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture);}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},i}(j),q={vector:N,raster:$,"raster-dem":U,geojson:Z,video:G,image:j,canvas:W},X=function(e,i,n,o){var r=new q[i.type](e,i,n,o);if(r.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+r.id);return t.bindAll(["load","abort","unload","serialize","prepare"],r),r};function H(t,e,i,n,o){var r=o.maxPitchScaleFactor(),a=t.tilesIn(i,r);a.sort(K);for(var s=[],l=0,c=a;l<c.length;l+=1){var u=c[l];s.push({wrappedTileID:u.tileID.wrapped().key,queryResults:u.tile.queryRenderedFeatures(e,t._state,u.queryGeometry,u.scale,n,o,r,t.transform.calculatePosMatrix(u.tileID.toUnwrapped()))});}var h=function(t){for(var e={},i={},n=0,o=t;n<o.length;n+=1){var r=o[n],a=r.queryResults,s=r.wrappedTileID,l=i[s]=i[s]||{};for(var c in a)for(var u=a[c],h=l[c]=l[c]||{},p=e[c]=e[c]||[],d=0,f=u;d<f.length;d+=1){var m=f[d];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m.feature));}}return e}(s);for(var p in h)h[p].forEach(function(e){var i=t.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=i;});return h}function K(t,e){var i=t.tileID,n=e.tileID;return i.overscaledZ-n.overscaledZ||i.canonical.y-n.canonical.y||i.wrap-n.wrap||i.canonical.x-n.canonical.x}var Y=function(t,e){this.max=t,this.onRemove=e,this.reset();};Y.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var n=i[e];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);}return this.data={},this.order=[],this},Y.prototype.add=function(t,e,i){var n=this,o=t.wrapped().key;void 0===this.data[o]&&(this.data[o]=[]);var r={value:e,timeout:void 0};if(void 0!==i&&(r.timeout=setTimeout(function(){n.remove(t,r);},i)),this.data[o].push(r),this.order.push(o),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a);}return this},Y.prototype.has=function(t){return t.wrapped().key in this.data},Y.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Y.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Y.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Y.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,n=void 0===e?0:this.data[i].indexOf(e),o=this.data[i][n];return this.data[i].splice(n,1),o.timeout&&clearTimeout(o.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(o.value),this.order.splice(this.order.indexOf(i),1),this},Y.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e);}return this};var J=function(t,e,i){this.context=t;var n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer;};J.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null);},J.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer);},J.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer);},J.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer);};var Q={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},tt=function(t,e,i,n){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;var o=t.gl;this.buffer=o.createBuffer(),t.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer;};tt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer);},tt.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer);},tt.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var n=this.attributes[i],o=e.attributes[n.name];void 0!==o&&t.enableVertexAttribArray(o);}},tt.prototype.setVertexAttribPointers=function(t,e,i){for(var n=0;n<this.attributes.length;n++){var o=this.attributes[n],r=e.attributes[o.name];void 0!==r&&t.vertexAttribPointer(r,o.components,t[Q[o.type]],!1,this.itemSize,o.offset+this.itemSize*(i||0));}},tt.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer);};var et=function(e){this.context=e,this.current=t.default$8.transparent;};et.prototype.get=function(){return this.current},et.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t);};var it=function(t){this.context=t,this.current=1;};it.prototype.get=function(){return this.current},it.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t);};var nt=function(t){this.context=t,this.current=0;};nt.prototype.get=function(){return this.current},nt.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t);};var ot=function(t){this.context=t,this.current=[!0,!0,!0,!0];};ot.prototype.get=function(){return this.current},ot.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t);};var rt=function(t){this.context=t,this.current=!0;};rt.prototype.get=function(){return this.current},rt.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t);};var at=function(t){this.context=t,this.current=255;};at.prototype.get=function(){return this.current},at.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t);};var st=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255};};st.prototype.get=function(){return this.current},st.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t);};var lt=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP];};lt.prototype.get=function(){return this.current},lt.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t);};var ct=function(t){this.context=t,this.current=!1;};ct.prototype.get=function(){return this.current},ct.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t;}};var ut=function(t){this.context=t,this.current=[0,1];};ut.prototype.get=function(){return this.current},ut.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t);};var ht=function(t){this.context=t,this.current=!1;};ht.prototype.get=function(){return this.current},ht.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t;}};var pt=function(t){this.context=t,this.current=t.gl.LESS;};pt.prototype.get=function(){return this.current},pt.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t);};var dt=function(t){this.context=t,this.current=!1;};dt.prototype.get=function(){return this.current},dt.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t;}};var ft=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO];};ft.prototype.get=function(){return this.current},ft.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t);};var mt=function(e){this.context=e,this.current=t.default$8.transparent;};mt.prototype.get=function(){return this.current},mt.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t);};var _t=function(t){this.context=t,this.current=null;};_t.prototype.get=function(){return this.current},_t.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t);};var gt=function(t){this.context=t,this.current=t.gl.TEXTURE0;};gt.prototype.get=function(){return this.current},gt.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t);};var vt=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight];};vt.prototype.get=function(){return this.current},vt.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t);};var yt=function(t){this.context=t,this.current=null;};yt.prototype.get=function(){return this.current},yt.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t;}};var xt=function(t){this.context=t,this.current=null;};xt.prototype.get=function(){return this.current},xt.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t;}};var bt=function(t){this.context=t,this.current=null;};bt.prototype.get=function(){return this.current},bt.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t;}};var wt=function(t){this.context=t,this.current=null;};wt.prototype.get=function(){return this.current},wt.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t;}};var Et=function(t){this.context=t,this.current=null;};Et.prototype.get=function(){return this.current},Et.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t;};var Tt=function(t){this.context=t,this.current=null;};Tt.prototype.get=function(){return this.current},Tt.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t);};var It=function(t){this.context=t,this.current=4;};It.prototype.get=function(){return this.current},It.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t;}};var Ct=function(t){this.context=t,this.current=!1;};Ct.prototype.get=function(){return this.current},Ct.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t;}};var St=function(t,e){this.context=t,this.current=null,this.parent=e;};St.prototype.get=function(){return this.current};var zt=function(t){function e(e,i){t.call(this,e,i),this.dirty=!1;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1;}},e.prototype.setDirty=function(){this.dirty=!0;},e}(St),At=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t;}},e}(St),Mt=function(t,e,i){this.context=t,this.width=e,this.height=i;var n=t.gl,o=this.framebuffer=n.createFramebuffer();this.colorAttachment=new zt(t,o),this.depthAttachment=new At(t,o);};Mt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i),t.deleteFramebuffer(this.framebuffer);};var Lt=function(t,e,i){this.func=t,this.mask=e,this.range=i;};Lt.ReadOnly=!1,Lt.ReadWrite=!0,Lt.disabled=new Lt(519,Lt.ReadOnly,[0,1]);var Dt=function(t,e,i,n,o,r){this.test=t,this.ref=e,this.mask=i,this.fail=n,this.depthFail=o,this.pass=r;};Dt.disabled=new Dt({func:519,mask:0},0,0,7680,7680,7680);var Rt=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i;};Rt.Replace=[1,0],Rt.disabled=new Rt(Rt.Replace,t.default$8.transparent,[!1,!1,!1,!1]),Rt.unblended=new Rt(Rt.Replace,t.default$8.transparent,[!0,!0,!0,!0]),Rt.alphaBlended=new Rt([1,771],t.default$8.transparent,[!0,!0,!0,!0]);var Pt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new et(this),this.clearDepth=new it(this),this.clearStencil=new nt(this),this.colorMask=new ot(this),this.depthMask=new rt(this),this.stencilMask=new at(this),this.stencilFunc=new st(this),this.stencilOp=new lt(this),this.stencilTest=new ct(this),this.depthRange=new ut(this),this.depthTest=new ht(this),this.depthFunc=new pt(this),this.blend=new dt(this),this.blendFunc=new ft(this),this.blendColor=new mt(this),this.program=new _t(this),this.activeTexture=new gt(this),this.viewport=new vt(this),this.bindFramebuffer=new yt(this),this.bindRenderbuffer=new xt(this),this.bindTexture=new bt(this),this.bindVertexBuffer=new wt(this),this.bindElementBuffer=new Et(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Tt(this),this.pixelStoreUnpack=new It(this),this.pixelStoreUnpackPremultiplyAlpha=new Ct(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear");};Pt.prototype.createIndexBuffer=function(t,e){return new J(this,t,e)},Pt.prototype.createVertexBuffer=function(t,e,i){return new tt(this,t,e,i)},Pt.prototype.createRenderbuffer=function(t,e,i){var n=this.gl,o=n.createRenderbuffer();return this.bindRenderbuffer.set(o),n.renderbufferStorage(n.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),o},Pt.prototype.createFramebuffer=function(t,e){return new Mt(this,t,e)},Pt.prototype.clear=function(t){var e=t.color,i=t.depth,n=this.gl,o=0;e&&(o|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(o|=n.DEPTH_BUFFER_BIT,this.clearDepth.set(i),this.depthMask.set(!0)),n.clear(o);},Pt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1);},Pt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1);},Pt.prototype.setColorMode=function(e){t.default$13(e.blendFunction,Rt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask);};var kt=function(e){function i(i,n,o){var r=this;e.call(this),this.id=i,this.dispatcher=o,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(r._sourceLoaded=!0),r._sourceLoaded&&!r._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(r.reload(),r.transform&&r.update(r.transform));}),this.on("error",function(){r._sourceErrored=!0;}),this._source=X(i,n,o,this),this._tiles={},this._cache=new Y(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={},this._state=new t.default$16;}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t);},i.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t);},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0;},i.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform);}},i.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},i.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t);},i.prototype.getIds=function(){var e=this;return Object.keys(this._tiles).map(Number).sort(function(i,n){var o=e._tiles[i].tileID,r=e._tiles[n].tileID,a=new t.default(o.canonical.x,o.canonical.y).rotate(e.transform.angle),s=new t.default(r.canonical.x,r.canonical.y).rotate(e.transform.angle);return o.overscaledZ-r.overscaledZ||s.y-a.y||s.x-a.x})},i.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},i.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0,{});return!!e&&this._isIdRenderable(e.tileID.key)},i.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)this._reloadTile(t,"reloading");},i.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)));},i.prototype._tileLoaded=function(e,i,n,o){if(o)return e.state="errored",void(404!==o.status?this._source.fire(new t.ErrorEvent(o,{tile:e})):this.update(this.transform));e.timeAdded=t.default$2.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID})),this.map&&(this.map.painter.tileExtentVAO.vao=null);},i.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var n=e[i];if(t.neighboringTiles&&t.neighboringTiles[n]){var o=this.getTileByID(n);r(t,o),r(o,t);}}function r(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,n=e.tileID.canonical.y-t.tileID.canonical.y,o=Math.pow(2,t.tileID.canonical.z),r=e.tileID.key;0===i&&0===n||Math.abs(n)>1||(Math.abs(i)>1&&(1===Math.abs(i+o)?i+=o:1===Math.abs(i-o)&&(i-=o)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,n),t.neighboringTiles&&t.neighboringTiles[r]&&(t.neighboringTiles[r].backfilled=!0)));}},i.prototype.getTile=function(t){return this.getTileByID(t.key)},i.prototype.getTileByID=function(t){return this._tiles[t]},i.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},i.prototype._findLoadedChildren=function(t,e,i){var n=!1;for(var o in this._tiles){var r=this._tiles[o];if(!(i[o]||!r.hasData()||r.tileID.overscaledZ<=t.overscaledZ||r.tileID.overscaledZ>e)){var a=Math.pow(2,r.tileID.canonical.z-t.canonical.z);if(Math.floor(r.tileID.canonical.x/a)===t.canonical.x&&Math.floor(r.tileID.canonical.y/a)===t.canonical.y)for(i[o]=r.tileID,n=!0;r&&r.tileID.overscaledZ-1>t.overscaledZ;){var s=r.tileID.scaledTo(r.tileID.overscaledZ-1);if(!s)break;(r=this._tiles[s.key])&&r.hasData()&&(delete i[o],i[s.key]=s);}}}return n},i.prototype.findLoadedParent=function(t,e,i){for(var n=t.overscaledZ-1;n>=e;n--){var o=t.scaledTo(n);if(!o)return;var r=String(o.key),a=this._tiles[r];if(a&&a.hasData())return i[r]=o,a;if(this._cache.has(o))return i[r]=o,this._cache.get(o)}},i.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),i=Math.floor(5*e),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(n);},i.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,i=Math.round(e);if(this._prevLng=t,i){var n={};for(var o in this._tiles){var r=this._tiles[o];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+i),n[r.tileID.key]=r;}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l);}}},i.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var o;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?o=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(o=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(o=o.filter(function(t){return n._source.hasTile(t)}))):o=[];var r,a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),s=Math.max(a-i.maxOverzooming,this._source.minzoom),l=Math.max(a+i.maxUnderzooming,this._source.minzoom),c=this._updateRetainedTiles(o,a),u={};if(Ot(this._source.type))for(var h=Object.keys(c),p=0;p<h.length;p++){var d=h[p],f=c[d],m=n._tiles[d];if(m&&(void 0===m.fadeEndTime||m.fadeEndTime>=t.default$2.now())){n._findLoadedChildren(f,l,c)&&(c[d]=f);var _=n.findLoadedParent(f,s,u);_&&n._addTile(_.tileID);}}for(r in u)c[r]||(n._coveredTiles[r]=!0);for(r in u)c[r]=u[r];for(var g=t.keysDifference(this._tiles,c),v=0;v<g.length;v++)n._removeTile(g[v]);}},i.prototype._updateRetainedTiles=function(t,e){for(var n={},o={},r=Math.max(e-i.maxOverzooming,this._source.minzoom),a=Math.max(e+i.maxUnderzooming,this._source.minzoom),s=0;s<t.length;s++){var l=t[s],c=this._addTile(l),u=!1;if(c.hasData())n[l.key]=l;else{u=c.wasRequested(),n[l.key]=l;var h=!0;if(e+1>this._source.maxzoom){var p=l.children(this._source.maxzoom)[0],d=this.getTile(p);d&&d.hasData()?n[p.key]=p:h=!1;}else{this._findLoadedChildren(l,a,n);for(var f=l.children(this._source.maxzoom),m=0;m<f.length;m++)if(!n[f[m].key]){h=!1;break}}if(!h)for(var _=l.overscaledZ-1;_>=r;--_){var g=l.scaledTo(_);if(o[g.key])break;if(o[g.key]=!0,!(c=this.getTile(g))&&u&&(c=this._addTile(g)),c&&(n[g.key]=g,u=c.wasRequested(),c.hasData()))break}}}return n},i.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var n=Boolean(i);return n||(i=new t.default$14(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,n||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout(function(){i._reloadTile(t,"expired"),delete i._timers[t];},n));},i.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))));},i.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset();},i.prototype.tilesIn=function(e,i){for(var n=[],o=this.getIds(),r=1/0,a=1/0,s=-1/0,l=-1/0,c=e[0].zoom,u=0;u<e.length;u++){var h=e[u];r=Math.min(r,h.column),a=Math.min(a,h.row),s=Math.max(s,h.column),l=Math.max(l,h.row);}for(var p=0;p<o.length;p++){var d=this._tiles[o[p]],f=d.tileID,m=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),_=i*d.queryPadding*t.default$10/d.tileSize/m,g=[Bt(f,new t.default$15(r,a,c)),Bt(f,new t.default$15(s,l,c))];if(g[0].x-_<t.default$10&&g[0].y-_<t.default$10&&g[1].x+_>=0&&g[1].y+_>=0){for(var v=[],y=0;y<e.length;y++)v.push(Bt(f,e[y]));n.push({tile:d,tileID:f,queryGeometry:[v],scale:m});}}return n},i.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(function(e){return t._tiles[e].tileID}),i=0,n=e;i<n.length;i+=1){var o=n[i];o.posMatrix=t.transform.calculatePosMatrix(o.toUnwrapped());}return e},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ot(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.default$2.now())return!0}return!1},i.prototype.setFeatureState=function(t,e,i){t=t||"_geojsonTileLayer",this._state.updateState(t,e,i);},i.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},i}(t.Evented);function Bt(e,i){var n=i.zoomTo(e.canonical.z);return new t.default((n.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*t.default$10,(n.row-e.canonical.y)*t.default$10)}function Ot(t){return"raster"===t||"image"===t||"video"===t}function Ft(){return new t.default$1.Worker(pn.workerUrl)}kt.maxOverzooming=10,kt.maxUnderzooming=3;var Nt,$t=function(){this.active={};};function Ut(e,i){var n={};for(var o in e)"ref"!==o&&(n[o]=e[o]);return t.default$17.forEach(function(t){t in i&&(n[t]=i[t]);}),n}function Zt(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Ut(t[n],e[t[n].ref]));return t}$t.prototype.acquire=function(t){if(!this.workers){var e=pn.workerCount;for(this.workers=[];this.workers.length<e;)this.workers.push(new Ft);}return this.active[t]=!0,this.workers.slice()},$t.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate();}),this.workers=null);};var Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jt(t,e,i){i.push({command:Vt.addSource,args:[t,e[t]]});}function Gt(t,e,i){e.push({command:Vt.removeSource,args:[t]}),i[t]=!0;}function Wt(t,e,i,n){Gt(t,i,n),jt(t,e,i);}function qt(e,i,n){var o;for(o in e[n])if(e[n].hasOwnProperty(o)&&"data"!==o&&!t.default$13(e[n][o],i[n][o]))return!1;for(o in i[n])if(i[n].hasOwnProperty(o)&&"data"!==o&&!t.default$13(e[n][o],i[n][o]))return!1;return!0}function Xt(e,i,n,o,r,a){var s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t.default$13(e[s],i[s])||n.push({command:a,args:[o,s,i[s],r]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.default$13(e[s],i[s])||n.push({command:a,args:[o,s,i[s],r]}));}function Ht(t){return t.id}function Kt(t,e){return t[e.id]=e,t}function Yt(e,i){if(!e)return[{command:Vt.setStyle,args:[i]}];var n=[];try{if(!t.default$13(e.version,i.version))return[{command:Vt.setStyle,args:[i]}];t.default$13(e.center,i.center)||n.push({command:Vt.setCenter,args:[i.center]}),t.default$13(e.zoom,i.zoom)||n.push({command:Vt.setZoom,args:[i.zoom]}),t.default$13(e.bearing,i.bearing)||n.push({command:Vt.setBearing,args:[i.bearing]}),t.default$13(e.pitch,i.pitch)||n.push({command:Vt.setPitch,args:[i.pitch]}),t.default$13(e.sprite,i.sprite)||n.push({command:Vt.setSprite,args:[i.sprite]}),t.default$13(e.glyphs,i.glyphs)||n.push({command:Vt.setGlyphs,args:[i.glyphs]}),t.default$13(e.transition,i.transition)||n.push({command:Vt.setTransition,args:[i.transition]}),t.default$13(e.light,i.light)||n.push({command:Vt.setLight,args:[i.light]});var o={},r=[];!function(e,i,n,o){var r;for(r in i=i||{},e=e||{})e.hasOwnProperty(r)&&(i.hasOwnProperty(r)||Gt(r,n,o));for(r in i)i.hasOwnProperty(r)&&(e.hasOwnProperty(r)?t.default$13(e[r],i[r])||("geojson"===e[r].type&&"geojson"===i[r].type&&qt(e,i,r)?n.push({command:Vt.setGeoJSONSourceData,args:[r,i[r].data]}):Wt(r,i,n,o)):jt(r,i,n));}(e.sources,i.sources,r,o);var a=[];e.layers&&e.layers.forEach(function(t){o[t.source]?n.push({command:Vt.removeLayer,args:[t.id]}):a.push(t);}),n=n.concat(r),function(e,i,n){i=i||[];var o,r,a,s,l,c,u,h=(e=e||[]).map(Ht),p=i.map(Ht),d=e.reduce(Kt,{}),f=i.reduce(Kt,{}),m=h.slice(),_=Object.create(null);for(o=0,r=0;o<h.length;o++)a=h[o],f.hasOwnProperty(a)?r++:(n.push({command:Vt.removeLayer,args:[a]}),m.splice(m.indexOf(a,r),1));for(o=0,r=0;o<p.length;o++)a=p[p.length-1-o],m[m.length-1-o]!==a&&(d.hasOwnProperty(a)?(n.push({command:Vt.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-r),1)):r++,c=m[m.length-o],n.push({command:Vt.addLayer,args:[f[a],c]}),m.splice(m.length-o,0,a),_[a]=!0);for(o=0;o<p.length;o++)if(s=d[a=p[o]],l=f[a],!_[a]&&!t.default$13(s,l))if(t.default$13(s.source,l.source)&&t.default$13(s["source-layer"],l["source-layer"])&&t.default$13(s.type,l.type)){for(u in Xt(s.layout,l.layout,n,a,null,Vt.setLayoutProperty),Xt(s.paint,l.paint,n,a,null,Vt.setPaintProperty),t.default$13(s.filter,l.filter)||n.push({command:Vt.setFilter,args:[a,l.filter]}),t.default$13(s.minzoom,l.minzoom)&&t.default$13(s.maxzoom,l.maxzoom)||n.push({command:Vt.setLayerZoomRange,args:[a,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Xt(s[u],l[u],n,a,u.slice(6),Vt.setPaintProperty):t.default$13(s[u],l[u])||n.push({command:Vt.setLayerProperty,args:[a,u,l[u]]}));for(u in l)l.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Xt(s[u],l[u],n,a,u.slice(6),Vt.setPaintProperty):t.default$13(s[u],l[u])||n.push({command:Vt.setLayerProperty,args:[a,u,l[u]]}));}else n.push({command:Vt.removeLayer,args:[a]}),c=m[m.lastIndexOf(a)+1],n.push({command:Vt.addLayer,args:[l,c]});}(a,i.layers,n);}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:Vt.setStyle,args:[i]}];}return n}var Jt=function(t,e,i){var n=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var r=0;r<this.xCellCount*this.yCellCount;r++)n.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0;};Jt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Jt.prototype.insert=function(t,e,i,n,o){this._forEachCell(e,i,n,o,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(o);},Jt.prototype.insertCircle=function(t,e,i,n){this._forEachCell(e-n,i-n,e+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(n);},Jt.prototype._insertBoxCell=function(t,e,i,n,o,r){this.boxCells[o].push(r);},Jt.prototype._insertCircleCell=function(t,e,i,n,o,r){this.circleCells[o].push(r);},Jt.prototype._query=function(t,e,i,n,o,r){if(i<0||t>this.width||n<0||e>this.height)return!o&&[];var a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=n){if(o)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],h=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:c-h,y1:u-h,x2:c+h,y2:u+h});}return r?a.filter(r):a}var p={hitTest:o,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,i,n,this._queryCell,a,p,r),o?a.length>0:a},Jt.prototype._queryCircle=function(t,e,i,n,o){var r=t-i,a=t+i,s=e-i,l=e+i;if(a<0||r>this.width||l<0||s>this.height)return!n&&[];var c=[],u={hitTest:n,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}};return this._forEachCell(r,s,a,l,this._queryCellCircle,c,u,o),n?c.length>0:c},Jt.prototype.query=function(t,e,i,n,o){return this._query(t,e,i,n,!1,o)},Jt.prototype.hitTest=function(t,e,i,n,o){return this._query(t,e,i,n,!0,o)},Jt.prototype.hitTestCircle=function(t,e,i,n){return this._queryCircle(t,e,i,!0,n)},Jt.prototype._queryCell=function(t,e,i,n,o,r,a,s){var l=a.seenUids,c=this.boxCells[o];if(null!==c)for(var u=this.bboxes,h=0,p=c;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(t<=u[f+2]&&e<=u[f+3]&&i>=u[f+0]&&n>=u[f+1]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return r.push(!0),!0;r.push({key:this.boxKeys[d],x1:u[f],y1:u[f+1],x2:u[f+2],y2:u[f+3]});}}}var m=this.circleCells[o];if(null!==m)for(var _=this.circles,g=0,v=m;g<v.length;g+=1){var y=v[g];if(!l.circle[y]){l.circle[y]=!0;var x=3*y;if(this._circleAndRectCollide(_[x],_[x+1],_[x+2],t,e,i,n)&&(!s||s(this.circleKeys[y]))){if(a.hitTest)return r.push(!0),!0;var b=_[x],w=_[x+1],E=_[x+2];r.push({key:this.circleKeys[y],x1:b-E,y1:w-E,x2:b+E,y2:w+E});}}}},Jt.prototype._queryCellCircle=function(t,e,i,n,o,r,a,s){var l=a.circle,c=a.seenUids,u=this.boxCells[o];if(null!==u)for(var h=this.bboxes,p=0,d=u;p<d.length;p+=1){var f=d[p];if(!c.box[f]){c.box[f]=!0;var m=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[m+0],h[m+1],h[m+2],h[m+3])&&(!s||s(this.boxKeys[f])))return r.push(!0),!0}}var _=this.circleCells[o];if(null!==_)for(var g=this.circles,v=0,y=_;v<y.length;v+=1){var x=y[v];if(!c.circle[x]){c.circle[x]=!0;var b=3*x;if(this._circlesCollide(g[b],g[b+1],g[b+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return r.push(!0),!0}}},Jt.prototype._forEachCell=function(t,e,i,n,o,r,a,s){for(var l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(n),p=l;p<=u;p++)for(var d=c;d<=h;d++){var f=this.xCellCount*d+p;if(o.call(this,t,e,i,n,f,r,a,s))return}},Jt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Jt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Jt.prototype._circlesCollide=function(t,e,i,n,o,r){var a=n-t,s=o-e,l=i+r;return l*l>a*a+s*s},Jt.prototype._circleAndRectCollide=function(t,e,i,n,o,r,a){var s=(r-n)/2,l=Math.abs(t-(n+s));if(l>s+i)return!1;var c=(a-o)/2,u=Math.abs(e-(o+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;var h=l-s,p=u-c;return h*h+p*p<=i*i};var Qt=t.default$18.layout;function te(e,i,n,o,r){var a=t.identity(new Float32Array(16));return i?(t.identity(a),t.scale(a,a,[1/r,1/r,1]),n||t.rotateZ(a,a,o.angle)):(t.scale(a,a,[o.width/2,-o.height/2,1]),t.translate(a,a,[1,-1,0]),t.multiply(a,a,e)),a}function ee(e,i,n,o,r){var a=t.identity(new Float32Array(16));return i?(t.multiply(a,a,e),t.scale(a,a,[r,r,1]),n||t.rotateZ(a,a,-o.angle)):(t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/o.width,2/o.height,1])),a}function ie(e,i){var n=[e.x,e.y,0,1];pe(n,n,i);var o=n[3];return{point:new t.default(n[0]/o,n[1]/o),signedDistanceFromCamera:o}}function ne(t,e){var i=t[0]/t[3],n=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&n>=-e[1]&&n<=e[1]}function oe(e,i,n,o,r,a,s,l){var c=o?e.textSizeData:e.iconSizeData,u=t.evaluateSizeForZoom(c,n.transform.zoom,Qt.properties[o?"text-size":"icon-size"]),h=[256/n.width*2+1,256/n.height*2+1],p=o?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,f=o?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=n.transform.width/n.transform.height,_=!1,g=0;g<f.length;g++){var v=f.get(g);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!_)he(v.numGlyphs,p);else{_=!1;var y=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(y,y,i),ne(y,h)){var x=.5+y[3]/n.transform.cameraToCenterDistance*.5,b=t.evaluateSizeForFeature(c,u,v),w=s?b*x:b/x,E=new t.default(v.anchorX,v.anchorY),T=ie(E,r).point,I={},C=se(v,w,!1,l,i,r,a,e.glyphOffsetArray,d,p,T,E,I,m);_=C.useVertical,(C.notEnoughRoom||_||C.needsFlipping&&se(v,w,!0,l,i,r,a,e.glyphOffsetArray,d,p,T,E,I,m).notEnoughRoom)&&he(v.numGlyphs,p);}else he(v.numGlyphs,p);}}o?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p);}function re(t,e,i,n,o,r,a,s,l,c,u,h){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),_=e.getoffsetX(p-1),g=ce(t*m,i,n,o,r,a,s.segment,d,f,l,c,u,h);if(!g)return null;var v=ce(t*_,i,n,o,r,a,s.segment,d,f,l,c,u,h);return v?{first:g,last:v}:null}function ae(e,i,n,o){if(e===t.WritingMode.horizontal&&Math.abs(n.y-i.y)>Math.abs(n.x-i.x)*o)return{useVertical:!0};return(e===t.WritingMode.vertical?i.y<n.y:i.x>n.x)?{needsFlipping:!0}:null}function se(e,i,n,o,r,a,s,l,c,u,h,p,d,f){var m,_=i/24,g=e.lineOffsetX*i,v=e.lineOffsetY*i;if(e.numGlyphs>1){var y=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=re(_,l,g,v,n,h,p,e,c,a,d,!1);if(!w)return{notEnoughRoom:!0};var E=ie(w.first.point,s).point,T=ie(w.last.point,s).point;if(o&&!n){var I=ae(e.writingMode,E,T,f);if(I)return I}m=[w.first];for(var C=e.glyphStartIndex+1;C<y-1;C++)m.push(ce(_*l.getoffsetX(C),g,v,n,h,p,e.segment,x,b,c,a,d,!1));m.push(w.last);}else{if(o&&!n){var S=ie(p,r).point,z=e.lineStartIndex+e.segment+1,A=new t.default(c.getx(z),c.gety(z)),M=ie(A,r),L=M.signedDistanceFromCamera>0?M.point:le(p,A,S,1,r),D=ae(e.writingMode,S,L,f);if(D)return D}var R=ce(_*l.getoffsetX(e.glyphStartIndex),g,v,n,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,d,!1);if(!R)return{notEnoughRoom:!0};m=[R];}for(var P=0,k=m;P<k.length;P+=1){var B=k[P];t.addDynamicAttributes(u,B.point,B.angle);}return{}}function le(t,e,i,n,o){var r=ie(t.add(t.sub(e)._unit()),o).point,a=i.sub(r);return i.add(a._mult(n/a.mag()))}function ce(e,i,n,o,r,a,s,l,c,u,h,p,d){var f=o?e-i:e+i,m=f>0?1:-1,_=0;o&&(m*=-1,_=Math.PI),m<0&&(_+=Math.PI);for(var g=m>0?l+s:l+s+1,v=g,y=r,x=r,b=0,w=0,E=Math.abs(f);b+w<=E;){if((g+=m)<l||g>=c)return null;if(x=y,void 0===(y=p[g])){var T=new t.default(u.getx(g),u.gety(g)),I=ie(T,h);if(I.signedDistanceFromCamera>0)y=p[g]=I.point;else{var C=g-m;y=le(0===b?a:new t.default(u.getx(C),u.gety(C)),T,x,E-b+1,h);}}b+=w,w=x.dist(y);}var S=(E-b)/w,z=y.sub(x),A=z.mult(S)._add(x);return A._add(z._unit()._perp()._mult(n*m)),{point:A,angle:_+Math.atan2(y.y-x.y,y.x-x.x),tileDistance:d?{prevTileDistance:g-m===v?0:u.gettileUnitDistanceFromAnchor(g-m),lastSegmentViewportDistance:E-b}:null}}var ue=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function he(t,e){for(var i=0;i<t;i++){var n=e.length;e.resize(n+4),e.float32.set(ue,3*n);}}function pe(t,e,i){var n=e[0],o=e[1];return t[0]=i[0]*n+i[4]*o+i[12],t[1]=i[1]*n+i[5]*o+i[13],t[3]=i[3]*n+i[7]*o+i[15],t}var de=function(t,e,i){void 0===e&&(e=new Jt(t.width+200,t.height+200,25)),void 0===i&&(i=new Jt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200;};function fe(t,e,i){t[e+4]=i?1:0;}function me(e,i,n){return i*(t.default$10/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}de.prototype.placeCollisionBox=function(t,e,i,n,o){var r=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY),a=i*r.perspectiveRatio,s=t.x1*a+r.point.x,l=t.y1*a+r.point.y,c=t.x2*a+r.point.x,u=t.y2*a+r.point.y;return!this.isInsideGrid(s,l,c,u)||!e&&this.grid.hitTest(s,l,c,u,o)?{box:[],offscreen:!1}:{box:[s,l,c,u],offscreen:this.isOffscreen(s,l,c,u)}},de.prototype.approximateTileDistance=function(t,e,i,n,o){var r=o?1:n/this.pitchfactor,a=t.lastSegmentViewportDistance*i;return t.prevTileDistance+a+(r-1)*a*Math.abs(Math.sin(e))},de.prototype.placeCollisionCircles=function(e,i,n,o,r,a,s,l,c,u,h,p,d,f){var m=[],_=this.projectAnchor(u,a.anchorX,a.anchorY),g=c/24,v=a.lineOffsetX*c,y=a.lineOffsetY*c,x=new t.default(a.anchorX,a.anchorY),b=re(g,l,v,y,!1,ie(x,h).point,x,a,s,h,{},!0),w=!1,E=!1,T=!0,I=_.perspectiveRatio*o,C=1/(o*n),S=0,z=0;b&&(S=this.approximateTileDistance(b.first.tileDistance,b.first.angle,C,_.cameraDistance,d),z=this.approximateTileDistance(b.last.tileDistance,b.last.angle,C,_.cameraDistance,d));for(var A=0;A<e.length;A+=5){var M=e[A],L=e[A+1],D=e[A+2],R=e[A+3];if(!b||R<-S||R>z)fe(e,A,!1);else{var P=this.projectPoint(u,M,L),k=D*I;if(m.length>0){var B=P.x-m[m.length-4],O=P.y-m[m.length-3];if(k*k*2>B*B+O*O)if(A+8<e.length){var F=e[A+8];if(F>-S&&F<z){fe(e,A,!1);continue}}}var N=A/5;m.push(P.x,P.y,k,N),fe(e,A,!0);var $=P.x-k,U=P.y-k,Z=P.x+k,V=P.y+k;if(T=T&&this.isOffscreen($,U,Z,V),E=E||this.isInsideGrid($,U,Z,V),!i&&this.grid.hitTestCircle(P.x,P.y,k,f)){if(!p)return{circles:[],offscreen:!1};w=!0;}}}return{circles:w||!E?[]:m,offscreen:T}},de.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],n=1/0,o=1/0,r=-1/0,a=-1/0,s=0,l=e;s<l.length;s+=1){var c=l[s],u=new t.default(c.x+100,c.y+100);n=Math.min(n,u.x),o=Math.min(o,u.y),r=Math.max(r,u.x),a=Math.max(a,u.y),i.push(u);}for(var h={},p={},d=0,f=this.grid.query(n,o,r,a).concat(this.ignoredGrid.query(n,o,r,a));d<f.length;d+=1){var m=f[d],_=m.key;if(void 0===h[_.bucketInstanceId]&&(h[_.bucketInstanceId]={}),!h[_.bucketInstanceId][_.featureIndex]){var g=[new t.default(m.x1,m.y1),new t.default(m.x2,m.y1),new t.default(m.x2,m.y2),new t.default(m.x1,m.y2)];t.polygonIntersectsPolygon(i,g)&&(h[_.bucketInstanceId][_.featureIndex]=!0,void 0===p[_.bucketInstanceId]&&(p[_.bucketInstanceId]=[]),p[_.bucketInstanceId].push(_.featureIndex));}}return p},de.prototype.insertCollisionBox=function(t,e,i,n,o){var r={bucketInstanceId:i,featureIndex:n,collisionGroupID:o};(e?this.ignoredGrid:this.grid).insert(r,t[0],t[1],t[2],t[3]);},de.prototype.insertCollisionCircles=function(t,e,i,n,o){for(var r=e?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:n,collisionGroupID:o},s=0;s<t.length;s+=4)r.insertCircle(a,t[s],t[s+1],t[s+2]);},de.prototype.projectAnchor=function(t,e,i){var n=[e,i,0,1];return pe(n,n,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5,cameraDistance:n[3]}},de.prototype.projectPoint=function(e,i,n){var o=[i,n,0,1];return pe(o,o,e),new t.default((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100)},de.prototype.projectAndGetPerspectiveRatio=function(e,i,n){var o=[i,n,0,1];return pe(o,o,e),{point:new t.default((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}},de.prototype.isOffscreen=function(t,e,i,n){return i<100||t>=this.screenRightBoundary||n<100||e>this.screenBottomBoundary},de.prototype.isInsideGrid=function(t,e,i,n){return i>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary};var _e=t.default$18.layout,ge=function(t,e,i,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&i?1:0,this.placed=i;};ge.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ve=function(t,e,i,n,o){this.text=new ge(t?t.text:null,e,i,o),this.icon=new ge(t?t.icon:null,e,n,o);};ve.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ye=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i;},xe=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={};};xe.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}};}return this.collisionGroups[t]};var be=function(t,e,i){this.transform=t.clone(),this.collisionIndex=new de(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new xe(i);};function we(t,e,i){t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0);}be.prototype.placeLayerTile=function(e,i,n,o){var r=i.getBucket(e),a=i.latestFeatureIndex;if(r&&a&&e.id===r.layerIds[0]){var s=i.collisionBoxArray,l=r.layers[0].layout,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/t.default$10,h=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),p=te(h,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,me(i,1,this.transform.zoom)),d=te(h,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,me(i,1,this.transform.zoom));this.retainedQueryData[r.bucketInstanceId]=new function(t,e,i,n,o){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=n,this.tileID=o;}(r.bucketInstanceId,a,r.sourceLayerIndex,r.index,i.tileID),this.placeLayerBucket(r,h,p,d,c,u,n,o,s);}},be.prototype.placeLayerBucket=function(e,i,n,o,r,a,s,l,c){for(var u=e.layers[0].layout,h=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,_e.properties["text-size"]),p=!e.hasTextData()||u.get("text-optional"),d=!e.hasIconData()||u.get("icon-optional"),f=this.collisionGroups.get(e.sourceID),m=0,_=e.symbolInstances;m<_.length;m+=1){var g=_[m];if(!l[g.crossTileID]){var v=void 0!==g.feature.text,y=void 0!==g.feature.icon,x=!0,b=null,w=null,E=null,T=0,I=0;g.collisionArrays||(g.collisionArrays=e.deserializeCollisionBoxes(c,g.textBoxStartIndex,g.textBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex)),g.collisionArrays.textFeatureIndex&&(T=g.collisionArrays.textFeatureIndex),g.collisionArrays.textBox&&(v=(b=this.collisionIndex.placeCollisionBox(g.collisionArrays.textBox,u.get("text-allow-overlap"),a,i,f.predicate)).box.length>0,x=x&&b.offscreen);var C=g.collisionArrays.textCircles;if(C){var S=e.text.placedSymbolArray.get(g.placedTextSymbolIndices[0]),z=t.evaluateSizeForFeature(e.textSizeData,h,S);w=this.collisionIndex.placeCollisionCircles(C,u.get("text-allow-overlap"),r,a,g.key,S,e.lineVertexArray,e.glyphOffsetArray,z,i,n,s,"map"===u.get("text-pitch-alignment"),f.predicate),v=u.get("text-allow-overlap")||w.circles.length>0,x=x&&w.offscreen;}g.collisionArrays.iconFeatureIndex&&(I=g.collisionArrays.iconFeatureIndex),g.collisionArrays.iconBox&&(y=(E=this.collisionIndex.placeCollisionBox(g.collisionArrays.iconBox,u.get("icon-allow-overlap"),a,i,f.predicate)).box.length>0,x=x&&E.offscreen),p||d?d?p||(y=y&&v):v=y&&v:y=v=y&&v,v&&b&&this.collisionIndex.insertCollisionBox(b.box,u.get("text-ignore-placement"),e.bucketInstanceId,T,f.ID),y&&E&&this.collisionIndex.insertCollisionBox(E.box,u.get("icon-ignore-placement"),e.bucketInstanceId,I,f.ID),v&&w&&this.collisionIndex.insertCollisionCircles(w.circles,u.get("text-ignore-placement"),e.bucketInstanceId,T,f.ID),this.placements[g.crossTileID]=new ye(v,y,x||e.justReloaded),l[g.crossTileID]=!0;}}e.justReloaded=!1;},be.prototype.commit=function(t,e){this.commitTime=e;var i=!1,n=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,o=t?t.opacities:{};for(var r in this.placements){var a=this.placements[r],s=o[r];s?(this.opacities[r]=new ve(s,n,a.text,a.icon),i=i||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[r]=new ve(null,n,a.text,a.icon,a.skipFade),i=i||a.text||a.icon);}for(var l in o){var c=o[l];if(!this.opacities[l]){var u=new ve(c,n,!1,!1);u.isHidden()||(this.opacities[l]=u,i=i||c.text.placed||c.icon.placed);}}i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e);},be.prototype.updateLayerOpacities=function(t,e){for(var i={},n=0,o=e;n<o.length;n+=1){var r=o[n],a=r.getBucket(t);a&&r.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,i,r.collisionBoxArray);}},be.prototype.updateBucketOpacities=function(t,e,i){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var n=t.layers[0].layout,o=new ve(null,0,!1,!1,!0),r=new ve(null,0,n.get("text-allow-overlap"),n.get("icon-allow-overlap"),!0),a=0;a<t.symbolInstances.length;a++){var s=t.symbolInstances[a],l=e[s.crossTileID],c=this.opacities[s.crossTileID];l?c=o:c||(c=r,this.opacities[s.crossTileID]=c),e[s.crossTileID]=!0;var u=s.numGlyphVertices>0||s.numVerticalGlyphVertices>0,h=s.numIconVertices>0;if(u){for(var p=Me(c.text),d=(s.numGlyphVertices+s.numVerticalGlyphVertices)/4,f=0;f<d;f++)t.text.opacityVertexArray.emplaceBack(p);for(var m=0,_=s.placedTextSymbolIndices;m<_.length;m+=1){var g=_[m];t.text.placedSymbolArray.get(g).hidden=c.text.isHidden();}}if(h){for(var v=Me(c.icon),y=0;y<s.numIconVertices/4;y++)t.icon.opacityVertexArray.emplaceBack(v);t.icon.placedSymbolArray.get(a).hidden=c.icon.isHidden();}s.collisionArrays||(s.collisionArrays=t.deserializeCollisionBoxes(i,s.textBoxStartIndex,s.textBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex));var x=s.collisionArrays;if(x){x.textBox&&t.hasCollisionBoxData()&&we(t.collisionBox.collisionVertexArray,c.text.placed,!1),x.iconBox&&t.hasCollisionBoxData()&&we(t.collisionBox.collisionVertexArray,c.icon.placed,!1);var b=x.textCircles;if(b&&t.hasCollisionCircleData())for(var w=0;w<b.length;w+=5){var E=l||0===b[w+4];we(t.collisionCircle.collisionVertexArray,c.text.placed,E);}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray);},be.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},be.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},be.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},be.prototype.setStale=function(){this.stale=!0;};var Ee=Math.pow(2,25),Te=Math.pow(2,24),Ie=Math.pow(2,17),Ce=Math.pow(2,16),Se=Math.pow(2,9),ze=Math.pow(2,8),Ae=Math.pow(2,1);function Me(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Ee+e*Te+i*Ie+e*Ce+i*Se+e*ze+i*Ae+e}var Le=function(){this._currentTileIndex=0,this._seenCrossTileIDs={};};Le.prototype.continuePlacement=function(t,e,i,n,o){for(;this._currentTileIndex<t.length;){var r=t[this._currentTileIndex];if(e.placeLayerTile(n,r,i,this._seenCrossTileIDs),this._currentTileIndex++,o())return!0}};var De=function(t,e,i,n,o,r){this.placement=new be(t,o,r),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=n,this._done=!1;};De.prototype.isDone=function(){return this._done},De.prototype.continuePlacement=function(e,i,n){for(var o=this,r=t.default$2.now(),a=function(){var e=t.default$2.now()-r;return!o._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=i[e[o._currentPlacementIndex]],l=o.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(o._inProgressLayer||(o._inProgressLayer=new Le),o._inProgressLayer.continuePlacement(n[s.source],o.placement,o._showCollisionBoxes,s,a))return;delete o._inProgressLayer;}o._currentPlacementIndex--;}this._done=!0;},De.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var Re=512/t.default$10/2,Pe=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var n=0,o=e;n<o.length;n+=1){var r=o[n],a=r.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)});}};Pe.prototype.getScaledCoordinates=function(e,i){var n=i.canonical.z-this.tileID.canonical.z,o=Re/Math.pow(2,n),r=e.anchor;return{x:Math.floor((i.canonical.x*t.default$10+r.x)*o),y:Math.floor((i.canonical.y*t.default$10+r.y)*o)}},Pe.prototype.findMatches=function(t,e,i){for(var n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),o=0,r=t;o<r.length;o+=1){var a=r[o];if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s)for(var l=this.getScaledCoordinates(a,e),c=0,u=s;c<u.length;c+=1){var h=u[c];if(Math.abs(h.coord.x-l.x)<=n&&Math.abs(h.coord.y-l.y)<=n&&!i[h.crossTileID]){i[h.crossTileID]=!0,a.crossTileID=h.crossTileID;break}}}}};var ke=function(){this.maxCrossTileID=0;};ke.prototype.generate=function(){return++this.maxCrossTileID};var Be=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0;};Be.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var n=this.indexes[i],o={};for(var r in n){var a=n[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),o[a.tileID.key]=a;}this.indexes[i]=o;}this.lng=t;},Be.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key]);}for(var n=0,o=e.symbolInstances;n<o.length;n+=1){o[n].crossTileID=0;}this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var s=this.indexes[a];if(Number(a)>t.overscaledZ)for(var l in s){var c=s[l];c.tileID.isChildOf(t)&&c.findMatches(e.symbolInstances,t,r);}else{var u=s[t.scaledTo(Number(a)).key];u&&u.findMatches(e.symbolInstances,t,r);}}for(var h=0,p=e.symbolInstances;h<p.length;h+=1){var d=p[h];d.crossTileID||(d.crossTileID=i.generate(),r[d.crossTileID]=!0);}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Pe(t,e.symbolInstances,e.bucketInstanceId),!0},Be.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var n=0,o=e.indexedSymbolInstances[i];n<o.length;n+=1){var r=o[n];delete this.usedCrossTileIDs[t][r.crossTileID];}},Be.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var n=this.indexes[i];for(var o in n)t[n[o].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,n[o]),delete n[o],e=!0);}return e};var Oe=function(){this.layerIndexes={},this.crossTileIDs=new ke,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={};};Oe.prototype.addLayer=function(t,e,i){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new Be);var o=!1,r={};n.handleWrapJump(i);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],c=l.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(l.tileID,c,this.crossTileIDs)&&(o=!0),r[c.bucketInstanceId]=!0);}return n.removeStaleBuckets(r)&&(o=!0),o},Oe.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach(function(t){e[t]=!0;}),this.layerIndexes)e[i]||delete this.layerIndexes[i];};var Fe=function(e,i){return t.emitValidationErrors(e,i&&i.filter(function(t){return"source.canvas"!==t.identifier}))},Ne=t.pick(Vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),$e=t.pick(Vt,["setCenter","setZoom","setBearing","setPitch"]),Ue=function(e){function i(n,o){var r=this;void 0===o&&(o={}),e.call(this),this.map=n,this.dispatcher=new P((Nt||(Nt=new $t),Nt),this),this.imageManager=new E,this.glyphManager=new A(n._transformRequest,o.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new Oe,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.default$21,this._loaded=!1,this._resetUpdates();var a=this;this._rtlTextPluginCallback=i.registerForPluginAvailability(function(t){for(var e in a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),a.sourceCaches)a.sourceCaches[e].reload();}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=r.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var n in r._layers){var o=r._layers[n];o.source===i.id&&r._validateLayer(o);}}}});}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(e,i){var n=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var o="boolean"==typeof i.validate?i.validate:!f(e);e=function(t,e){if(!f(t))return t;var i=b(t);return i.path="/styles/v1"+i.path,d(i,e)}(e,i.accessToken);var r=this.map._transformRequest(e,t.ResourceType.Style);t.getJSON(r,function(e,i){e?n.fire(new t.ErrorEvent(e)):i&&n._load(i,o);});},i.prototype.loadJSON=function(e,i){var n=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"})),t.default$2.frame(function(){n._load(e,!1!==i.validate);});},i.prototype._load=function(e,i){var n=this;if(!i||!Fe(this,t.validateStyle(e))){for(var o in this._loaded=!0,this.stylesheet=e,e.sources)n.addSource(o,e.sources[o],{validate:!1});e.sprite?function(e,i,n){var o,r,a,s=t.default$2.devicePixelRatio>1?"@2x":"";function l(){if(a)n(a);else if(o&&r){var e=t.default$2.getImageData(r),i={};for(var s in o){var l=o[s],c=l.width,u=l.height,h=l.x,p=l.y,d=l.sdf,f=l.pixelRatio,m=new t.RGBAImage({width:c,height:u});t.RGBAImage.copy(e,m,{x:h,y:p},{x:0,y:0},{width:c,height:u}),i[s]={data:m,pixelRatio:f,sdf:d};}n(null,i);}}t.getJSON(i(g(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){a||(a=t,o=e,l());}),t.getImage(i(g(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){a||(a=t,r=e,l());});}(e.sprite,this.map._transformRequest,function(e,i){if(e)n.fire(new t.ErrorEvent(e));else if(i)for(var o in i)n.imageManager.addImage(o,i[o]);n.imageManager.setLoaded(!0),n.fire(new t.Event("data",{dataType:"style"}));}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var r=Zt(this.stylesheet.layers);this._order=r.map(function(t){return t.id}),this._layers={};for(var a=0,s=r;a<s.length;a+=1){var l=s[a];(l=t.default$20(l)).setEventedParent(n,{layer:{id:l.id}}),n._layers[l.id]=l;}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new D(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"));}},i.prototype._validateLayer=function(e){var i=this.sourceCaches[e.source];if(i){var n=e.sourceLayer;if(n){var o=i.getSource();("geojson"===o.type||o.vectorLayerIds&&-1===o.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+n+'" does not exist on source "'+o.id+'" as specified by style layer "'+e.id+'"')));}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){if(this._changed){var i=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var o in(i.length||n.length)&&this._updateWorkerLayers(i,n),this._updatedSources){var r=this._updatedSources[o];"reload"===r?this._reloadSource(o):"clear"===r&&this._clearSource(o);}for(var a in this._updatedPaintProps)this._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire(new t.Event("data",{dataType:"style"}));}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var u=c[l],h=this._layers[u];h.recalculate(e),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0);}this.light.recalculate(e),this.z=e.zoom;}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e});},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={};},i.prototype.setState=function(e){var i=this;if(this._checkLoaded(),Fe(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=Zt(e.layers);var n=Yt(this.serialize(),e).filter(function(t){return!(t.command in $e)});if(0===n.length)return!1;var o=n.filter(function(t){return!(t.command in Ne)});if(o.length>0)throw new Error("Unimplemented: "+o.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&i[t.command].apply(i,t.args);}),this.stylesheet=e,!0},i.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this.fire(new t.Event("data",{dataType:"style"}));},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}));},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,i,n){var o=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0)||!this._validate(t.validateStyle.source,"sources."+e,i,null,n)){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var r=this.sourceCaches[e]=new kt(e,i,this.dispatcher);r.style=this,r.setEventedParent(this,function(){return{isSourceLoaded:o.loaded(),source:r.serialize(),sourceId:e}}),r.onAdd(this.map),this._changed=!0;}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));var n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.clearTiles(),n.onRemove&&n.onRemove(this.map),this._changed=!0;},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0;},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,n){this._checkLoaded();var o=e.id;if(this.getLayer(o))this.fire(new t.ErrorEvent(new Error('Layer with id "'+o+'" already exists on this map')));else if("object"==typeof e.source&&(this.addSource(o,e.source),e=t.clone(e),e=t.extend(e,{source:o})),!this._validate(t.validateStyle.layer,"layers."+o,e,{arrayIndex:-1},n)){var r=t.default$20(e);this._validateLayer(r),r.setEventedParent(this,{layer:{id:o}});var a=i?this._order.indexOf(i):this._order.length;if(i&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(a,0,o),this._layerOrderChanged=!0,this._layers[o]=r,this._removedLayers[o]&&r.source){var s=this._removedLayers[o];delete this._removedLayers[o],s.type!==r.type?this._updatedSources[r.source]="clear":(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause());}this._updateLayer(r);}}},i.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==i){var n=this._order.indexOf(e);this._order.splice(n,1);var o=i?this._order.indexOf(i):this._order.length;i&&-1===o?this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(o,0,e),this._layerOrderChanged=!0);}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")));},i.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e];}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")));},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.setLayerZoomRange=function(e,i,n){this._checkLoaded();var o=this.getLayer(e);o?o.minzoom===i&&o.maxzoom===n||(null!=i&&(o.minzoom=i),null!=n&&(o.maxzoom=n),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")));},i.prototype.setFilter=function(e,i){this._checkLoaded();var n=this.getLayer(e);if(n){if(!t.default$13(n.filter,i))return null==i?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(t.validateStyle.filter,"layers."+n.id+".filter",i)||(n.filter=t.clone(i),this._updateLayer(n)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")));},i.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,i,n){this._checkLoaded();var o=this.getLayer(e);o?t.default$13(o.getLayoutProperty(i),n)||(o.setLayoutProperty(i,n),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")));},i.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},i.prototype.setPaintProperty=function(e,i,n){this._checkLoaded();var o=this.getLayer(e);o?t.default$13(o.getPaintProperty(i),n)||(o.setPaintProperty(i,n)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")));},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,i){this._checkLoaded();var n=e.source,o=e.sourceLayer,r=this.sourceCaches[n];void 0!==r?"vector"!==r.getSource().type||o?r.setFeatureState(o,e.id,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")));},i.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,n=e.sourceLayer,o=this.sourceCaches[i];if(void 0!==o){if("vector"!==o.getSource().type||n)return o.getFeatureState(n,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")));},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){var e=this;return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(t){return void 0!==t})},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0;},i.prototype._flattenRenderedFeatures=function(t){for(var e=[],i=this._order.length-1;i>=0;i--)for(var n=this._order[i],o=0,r=t;o<r.length;o+=1){var a=r[o][n];if(a)for(var s=0,l=a;s<l.length;s+=1){var c=l[s];e.push(c);}}return e},i.prototype.queryRenderedFeatures=function(e,i,n){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter);var o={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var r=0,a=i.layers;r<a.length;r+=1){var s=a[r],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];o[l.source]=!0;}}var c=[];for(var u in this.sourceCaches)i.layers&&!o[u]||c.push(H(this.sourceCaches[u],this._layers,e.worldCoordinate,i,n));return this.placement&&c.push(function(t,e,i,n,o,r){for(var a={},s=o.queryRenderedSymbols(i),l=[],c=0,u=Object.keys(s).map(Number);c<u.length;c+=1){var h=u[c];l.push(r[h]);}l.sort(K);for(var p=function(){var e=f[d],i=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,n.filter,n.layers,t);for(var o in i){var r=a[o]=a[o]||[],l=i[o];l.sort(function(t,i){var n=e.featureSortOrder;if(n){var o=n.indexOf(t.featureIndex);return n.indexOf(i.featureIndex)-o}return i.featureIndex-t.featureIndex});for(var c=0,u=l;c<u.length;c+=1){var h=u[c];r.push(h.feature);}}},d=0,f=l;d<f.length;d+=1)p();var m=function(i){a[i].forEach(function(n){var o=t[i],r=e[o.source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r;});};for(var _ in a)m(_);return a}(this._layers,this.sourceCaches,e.viewport,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(c)},i.prototype.querySourceFeatures=function(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter);var n=this.sourceCaches[e];return n?function(t,e){for(var i=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),n=[],o={},r=0;r<i.length;r++){var a=i[r],s=a.tileID.canonical.key;o[s]||(o[s]=!0,a.querySourceFeatures(n,e));}return n}(n,i):[]},i.prototype.addSourceType=function(t,e,n){return i.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e){this._checkLoaded();var i=this.light.getLight(),n=!1;for(var o in e)if(!t.default$13(e[o],i[o])){n=!0;break}if(n){var r={now:t.default$2.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(r);}},i.prototype._validate=function(e,i,n,o,r){return(!r||!1!==r.validate)&&Fe(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:n,styleSpec:t.default$7},o)))},i.prototype._remove=function(){for(var e in t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove();},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles();},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload();},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t);},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t);},i.prototype._updatePlacement=function(e,i,n,o){for(var r=!1,a=!1,s={},l=0,c=this._order;l<c.length;l+=1){var u=c[l],h=this._layers[u];if("symbol"===h.type){if(!s[h.source]){var p=this.sourceCaches[h.source];s[h.source]=p.getRenderableIds().map(function(t){return p.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)});}var d=this.crossTileSymbolIndex.addLayer(h,s[h.source],e.center.lng);r=r||d;}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var f=this._layerOrderChanged;if((f||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.default$2.now()))&&(this.pauseablePlacement=new De(e,this._order,f,i,n,o),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.default$2.now()),a=!0),r&&this.pauseablePlacement.placement.setStale()),a||r)for(var m=0,_=this._order;m<_.length;m+=1){var g=_[m],v=this._layers[g];"symbol"===v.type&&this.placement.updateLayerOpacities(v,s[v.source]);}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.default$2.now())},i.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i);},i.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i);},i}(t.Evented);Ue.getSourceType=function(t){return q[t]},Ue.setSourceType=function(t,e){q[t]=e;},Ue.registerForPluginAvailability=t.registerForPluginAvailability;var Ze=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ve={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_a.y + 2.0) / 2.0) / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_b.y + 2.0) / 2.0) / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},je=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Ge=function(t){var e=Ve[t],i={};e.fragmentSource=e.fragmentSource.replace(je,function(t,e,n,o,r){return i[r]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nvarying "+n+" "+o+" "+r+";\n#else\nuniform "+n+" "+o+" u_"+r+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+r+"\n    "+n+" "+o+" "+r+" = u_"+r+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(je,function(t,e,n,o,r){var a="float"===o?"vec2":"vec4";return i[r]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float a_"+r+"_t;\nattribute "+n+" "+a+" a_"+r+";\nvarying "+n+" "+o+" "+r+";\n#else\nuniform "+n+" "+o+" u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = unpack_mix_"+a+"(a_"+r+", a_"+r+"_t);\n#else\n    "+n+" "+o+" "+r+" = u_"+r+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float a_"+r+"_t;\nattribute "+n+" "+a+" a_"+r+";\n#else\nuniform "+n+" "+o+" u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+n+" "+o+" "+r+" = unpack_mix_"+a+"(a_"+r+", a_"+r+"_t);\n#else\n    "+n+" "+o+" "+r+" = u_"+r+";\n#endif\n"});};for(var We in Ve)Ge(We);var qe=Ve,Xe=function(e,i,n,o){var r=e.gl;this.program=r.createProgram();var a=n.defines().concat("#define DEVICE_PIXEL_RATIO "+t.default$2.devicePixelRatio.toFixed(1));o&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(qe.prelude.fragmentSource,i.fragmentSource).join("\n"),l=a.concat(qe.prelude.vertexSource,i.vertexSource).join("\n"),c=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(c,s),r.compileShader(c),r.attachShader(this.program,c);var u=r.createShader(r.VERTEX_SHADER);r.shaderSource(u,l),r.compileShader(u),r.attachShader(this.program,u);for(var h=n.layoutAttributes||[],p=0;p<h.length;p++)r.bindAttribLocation(this.program,p,h[p].name);r.linkProgram(this.program),this.numAttributes=r.getProgramParameter(this.program,r.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var d=0;d<this.numAttributes;d++){var f=r.getActiveAttrib(this.program,d);f&&(this.attributes[f.name]=r.getAttribLocation(this.program,f.name));}for(var m=r.getProgramParameter(this.program,r.ACTIVE_UNIFORMS),_=0;_<m;_++){var g=r.getActiveUniform(this.program,_);g&&(this.uniforms[g.name]=r.getUniformLocation(this.program,g.name));}};function He(e,i,n,o,r){for(var a=0;a<n.length;a++){var s=n[a];if(o.isLessThan(s.tileID))break;if(i.key===s.tileID.key)return;if(s.tileID.isChildOf(i)){for(var l=i.children(1/0),c=0;c<l.length;c++){He(e,l[c],n.slice(a),o,r);}return}}var u=i.overscaledZ-e.overscaledZ,h=new t.CanonicalTileID(u,i.canonical.x-(e.canonical.x<<u),i.canonical.y-(e.canonical.y<<u));r[h.key]=r[h.key]||h;}function Ke(t,e,i,n,o){var r=t.context,a=r.gl,s=o?t.useProgram("collisionCircle"):t.useProgram("collisionBox");r.setDepthMode(Lt.disabled),r.setStencilMode(Dt.disabled),r.setColorMode(t.colorModeForRenderPass());for(var l=0;l<n.length;l++){var c=n[l],u=e.getTile(c),h=u.getBucket(i);if(h){var p=o?h.collisionCircle:h.collisionBox;if(p){a.uniformMatrix4fv(s.uniforms.u_matrix,!1,c.posMatrix),a.uniform1f(s.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance);var d=me(u,1,t.transform.zoom),f=Math.pow(2,t.transform.zoom-u.tileID.overscaledZ);a.uniform1f(s.uniforms.u_pixels_to_tile_units,d),a.uniform2f(s.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(d*f),t.transform.pixelsToGLUnits[1]/(d*f)),a.uniform1f(s.uniforms.u_overscale_factor,u.tileID.overscaleFactor()),s.draw(r,o?a.TRIANGLES:a.LINES,i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,p.collisionVertexBuffer,null);}}}}Xe.prototype.draw=function(t,e,i,n,o,r,a,s,l){for(var c,u=t.gl,h=(c={},c[u.LINES]=2,c[u.TRIANGLES]=3,c)[e],p=0,d=r.get();p<d.length;p+=1){var f=d[p],m=f.vaos||(f.vaos={});(m[i]||(m[i]=new V)).bind(t,this,n,a?a.getPaintVertexBuffers():[],o,f.vertexOffset,s,l),u.drawElements(e,f.primitiveLength*h,u.UNSIGNED_SHORT,f.primitiveOffset*h*2);}};var Ye=t.identity(new Float32Array(16)),Je=t.default$18.layout;function Qe(t,e,i,n,o,r,a,s,l,c){var u,h=t.context,p=h.gl,d=t.transform,f="map"===s,m="map"===l,_=f&&"line"===i.layout.get("symbol-placement"),g=f&&!m&&!_,v=m;h.setDepthMode(v?t.depthModeForSublayer(0,Lt.ReadOnly):Lt.disabled);for(var y=0,x=n;y<x.length;y+=1){var b=x[y],w=e.getTile(b),E=w.getBucket(i);if(E){var T=o?E.text:E.icon;if(T&&T.segments.get().length){var I=T.programConfigurations.get(i.id),C=o||E.sdfIcons,S=o?E.textSizeData:E.iconSizeData;if(u||(u=t.useProgram(C?"symbolSDF":"symbolIcon",I),I.setUniforms(t.context,u,i.paint,{zoom:t.transform.zoom}),ti(u,t,i,o,g,m,S)),h.activeTexture.set(p.TEXTURE0),p.uniform1i(u.uniforms.u_texture,0),o)w.glyphAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.uniform2fv(u.uniforms.u_texsize,w.glyphAtlasTexture.size);else{var z=1!==i.layout.get("icon-size").constantOr(0)||E.iconsNeedLinear,A=m||0!==d.pitch;w.iconAtlasTexture.bind(C||t.options.rotating||t.options.zooming||z||A?p.LINEAR:p.NEAREST,p.CLAMP_TO_EDGE),p.uniform2fv(u.uniforms.u_texsize,w.iconAtlasTexture.size);}p.uniformMatrix4fv(u.uniforms.u_matrix,!1,t.translatePosMatrix(b.posMatrix,w,r,a));var M=me(w,1,t.transform.zoom),L=te(b.posMatrix,m,f,t.transform,M),D=ee(b.posMatrix,m,f,t.transform,M);p.uniformMatrix4fv(u.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(D,w,r,a,!0)),_?(p.uniformMatrix4fv(u.uniforms.u_label_plane_matrix,!1,Ye),oe(E,b.posMatrix,t,o,L,D,m,c)):p.uniformMatrix4fv(u.uniforms.u_label_plane_matrix,!1,L),p.uniform1f(u.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),ei(u,I,t,i,w,T,o,C,m);}}}}function ti(e,i,n,o,r,a,s){var l=i.context.gl,c=i.transform;l.uniform1i(e.uniforms.u_pitch_with_map,a?1:0),l.uniform1f(e.uniforms.u_is_text,o?1:0),l.uniform1f(e.uniforms.u_pitch,c.pitch/360*2*Math.PI);var u="constant"===s.functionType||"source"===s.functionType,h="constant"===s.functionType||"camera"===s.functionType;l.uniform1i(e.uniforms.u_is_size_zoom_constant,u?1:0),l.uniform1i(e.uniforms.u_is_size_feature_constant,h?1:0),l.uniform1f(e.uniforms.u_camera_to_center_distance,c.cameraToCenterDistance);var p=t.evaluateSizeForZoom(s,c.zoom,Je.properties[o?"text-size":"icon-size"]);void 0!==p.uSizeT&&l.uniform1f(e.uniforms.u_size_t,p.uSizeT),void 0!==p.uSize&&l.uniform1f(e.uniforms.u_size,p.uSize),l.uniform1f(e.uniforms.u_aspect_ratio,c.width/c.height),l.uniform1i(e.uniforms.u_rotate_symbol,r?1:0);}function ei(t,e,i,n,o,r,a,s,l){var c=i.context,u=c.gl,h=i.transform;if(s){var p=0!==n.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),d=l?Math.cos(h._pitch)*h.cameraToCenterDistance:1;u.uniform1f(t.uniforms.u_gamma_scale,d),p&&(u.uniform1f(t.uniforms.u_is_halo,1),ii(r,n,c,t)),u.uniform1f(t.uniforms.u_is_halo,0);}ii(r,n,c,t);}function ii(t,e,i,n){n.draw(i,i.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer);}function ni(e,i,n,o,r,a,s,l,c){var u,h,p,d,f=i.context,m=f.gl,_=r.paint.get("line-dasharray"),g=r.paint.get("line-pattern");if(l||c){var v=1/me(n,1,i.transform.tileZoom);if(_){u=i.lineAtlas.getDash(_.from,"round"===r.layout.get("line-cap")),h=i.lineAtlas.getDash(_.to,"round"===r.layout.get("line-cap"));var y=u.width*_.fromScale,x=h.width*_.toScale;m.uniform2f(e.uniforms.u_patternscale_a,v/y,-u.height/2),m.uniform2f(e.uniforms.u_patternscale_b,v/x,-h.height/2),m.uniform1f(e.uniforms.u_sdfgamma,i.lineAtlas.width/(256*Math.min(y,x)*t.default$2.devicePixelRatio)/2);}else if(g){if(p=i.imageManager.getPattern(g.from),d=i.imageManager.getPattern(g.to),!p||!d)return;m.uniform2f(e.uniforms.u_pattern_size_a,p.displaySize[0]*g.fromScale/v,p.displaySize[1]),m.uniform2f(e.uniforms.u_pattern_size_b,d.displaySize[0]*g.toScale/v,d.displaySize[1]);var b=i.imageManager.getPixelSize(),w=b.width,E=b.height;m.uniform2fv(e.uniforms.u_texsize,[w,E]);}m.uniform2f(e.uniforms.u_gl_units_to_pixels,1/i.transform.pixelsToGLUnits[0],1/i.transform.pixelsToGLUnits[1]);}l&&(_?(m.uniform1i(e.uniforms.u_image,0),f.activeTexture.set(m.TEXTURE0),i.lineAtlas.bind(f),m.uniform1f(e.uniforms.u_tex_y_a,u.y),m.uniform1f(e.uniforms.u_tex_y_b,h.y),m.uniform1f(e.uniforms.u_mix,_.t)):g&&(m.uniform1i(e.uniforms.u_image,0),f.activeTexture.set(m.TEXTURE0),i.imageManager.bind(f),m.uniform2fv(e.uniforms.u_pattern_tl_a,p.tl),m.uniform2fv(e.uniforms.u_pattern_br_a,p.br),m.uniform2fv(e.uniforms.u_pattern_tl_b,d.tl),m.uniform2fv(e.uniforms.u_pattern_br_b,d.br),m.uniform1f(e.uniforms.u_fade,g.t))),f.setStencilMode(i.stencilModeForClipping(a));var T=i.translatePosMatrix(a.posMatrix,n,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"));if(m.uniformMatrix4fv(e.uniforms.u_matrix,!1,T),m.uniform1f(e.uniforms.u_ratio,1/me(n,1,i.transform.zoom)),r.paint.get("line-gradient")){f.activeTexture.set(m.TEXTURE0);var I=r.gradientTexture;if(!r.gradient)return;I||(I=r.gradientTexture=new t.default$4(f,r.gradient,m.RGBA)),I.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.uniform1i(e.uniforms.u_image,0);}e.draw(f,m.TRIANGLES,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,s);}var oi=function(t,e){if(!t)return!1;var i=e.imageManager.getPattern(t.from),n=e.imageManager.getPattern(t.to);return!i||!n},ri=function(t,e,i){var n=e.context,o=n.gl,r=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);o.uniform1i(i.uniforms.u_image,0),o.uniform2fv(i.uniforms.u_pattern_tl_a,r.tl),o.uniform2fv(i.uniforms.u_pattern_br_a,r.br),o.uniform2fv(i.uniforms.u_pattern_tl_b,a.tl),o.uniform2fv(i.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize(),l=s.width,c=s.height;o.uniform2fv(i.uniforms.u_texsize,[l,c]),o.uniform1f(i.uniforms.u_mix,t.t),o.uniform2fv(i.uniforms.u_pattern_size_a,r.displaySize),o.uniform2fv(i.uniforms.u_pattern_size_b,a.displaySize),o.uniform1f(i.uniforms.u_scale_a,t.fromScale),o.uniform1f(i.uniforms.u_scale_b,t.toScale),n.activeTexture.set(o.TEXTURE0),e.imageManager.bind(e.context);},ai=function(t,e,i){var n=e.context.gl;n.uniform1f(i.uniforms.u_tile_units_to_pixels,1/me(t,1,e.transform.tileZoom));var o=Math.pow(2,t.tileID.overscaledZ),r=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,a=r*(t.tileID.canonical.x+t.tileID.wrap*o),s=r*t.tileID.canonical.y;n.uniform2f(i.uniforms.u_pixel_coord_upper,a>>16,s>>16),n.uniform2f(i.uniforms.u_pixel_coord_lower,65535&a,65535&s);};function si(t,e,i,n,o){if(!oi(i.paint.get("fill-pattern"),t))for(var r=!0,a=0,s=n;a<s.length;a+=1){var l=s[a],c=e.getTile(l),u=c.getBucket(i);u&&(t.context.setStencilMode(t.stencilModeForClipping(l)),o(t,e,i,c,l,u,r),r=!1);}}function li(t,e,i,n,o,r,a){var s=t.context.gl,l=r.programConfigurations.get(i.id);ui("fill",i.paint.get("fill-pattern"),t,l,i,n,o,a).draw(t.context,s.TRIANGLES,i.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,l);}function ci(t,e,i,n,o,r,a){var s=t.context.gl,l=r.programConfigurations.get(i.id),c=ui("fillOutline",i.getPaintProperty("fill-outline-color")?null:i.paint.get("fill-pattern"),t,l,i,n,o,a);s.uniform2f(c.uniforms.u_world,s.drawingBufferWidth,s.drawingBufferHeight),c.draw(t.context,s.LINES,i.id,r.layoutVertexBuffer,r.indexBuffer2,r.segments2,l);}function ui(t,e,i,n,o,r,a,s){var l,c=i.context.program.get();return e?(l=i.useProgram(t+"Pattern",n),(s||l.program!==c)&&(n.setUniforms(i.context,l,o.paint,{zoom:i.transform.zoom}),ri(e,i,l)),ai(r,i,l)):(l=i.useProgram(t,n),(s||l.program!==c)&&n.setUniforms(i.context,l,o.paint,{zoom:i.transform.zoom})),i.context.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,i.translatePosMatrix(a.posMatrix,r,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"))),l}function hi(e,i,n,o,r,a,s){var l=e.context,c=l.gl,u=n.paint.get("fill-extrusion-pattern"),h=e.context.program.get(),p=a.programConfigurations.get(n.id),d=e.useProgram(u?"fillExtrusionPattern":"fillExtrusion",p);if((s||d.program!==h)&&p.setUniforms(l,d,n.paint,{zoom:e.transform.zoom}),u){if(oi(u,e))return;ri(u,e,d),ai(o,e,d),c.uniform1f(d.uniforms.u_height_factor,-Math.pow(2,r.overscaledZ)/o.tileSize/8);}e.context.gl.uniformMatrix4fv(d.uniforms.u_matrix,!1,e.translatePosMatrix(r.posMatrix,o,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),function(e,i){var n=i.context.gl,o=i.style.light,r=o.properties.get("position"),a=[r.x,r.y,r.z],s=t.create$2();"viewport"===o.properties.get("anchor")&&t.fromRotation(s,-i.transform.angle);t.transformMat3(a,a,s);var l=o.properties.get("color");n.uniform3fv(e.uniforms.u_lightpos,a),n.uniform1f(e.uniforms.u_lightintensity,o.properties.get("intensity")),n.uniform3f(e.uniforms.u_lightcolor,l.r,l.g,l.b);}(d,e),d.draw(l,c.TRIANGLES,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,p);}function pi(e,i,n){var o=e.context,r=o.gl,a=i.fbo;if(a){var s=e.useProgram("hillshade"),l=e.transform.calculatePosMatrix(i.tileID.toUnwrapped(),!0);!function(t,e,i){var n=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(n-=e.transform.angle),e.context.gl.uniform2f(t.uniforms.u_light,i.paint.get("hillshade-exaggeration"),n);}(s,e,n);var c=function(e,i){var n=i.toCoordinate(),o=new t.default$15(n.column,n.row+1,n.zoom);return[e.transform.coordinateLocation(n).lat,e.transform.coordinateLocation(o).lat]}(e,i.tileID);o.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),r.uniformMatrix4fv(s.uniforms.u_matrix,!1,l),r.uniform2fv(s.uniforms.u_latrange,c),r.uniform1i(s.uniforms.u_image,0);var u=n.paint.get("hillshade-shadow-color");r.uniform4f(s.uniforms.u_shadow,u.r,u.g,u.b,u.a);var h=n.paint.get("hillshade-highlight-color");r.uniform4f(s.uniforms.u_highlight,h.r,h.g,h.b,h.a);var p=n.paint.get("hillshade-accent-color");if(r.uniform4f(s.uniforms.u_accent,p.r,p.g,p.b,p.a),i.maskedBoundsBuffer&&i.maskedIndexBuffer&&i.segments)s.draw(o,r.TRIANGLES,n.id,i.maskedBoundsBuffer,i.maskedIndexBuffer,i.segments);else{var d=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(o,s,d,[]),r.drawArrays(r.TRIANGLE_STRIP,0,d.length);}}}function di(e,i,n){var o=e.context,r=o.gl;if(i.dem&&i.dem.level){var a=i.dem.level.dim,s=i.dem.getPixels();if(o.activeTexture.set(r.TEXTURE1),o.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(i.tileSize),i.demTexture){var l=i.demTexture;l.update(s,{premultiply:!1}),l.bind(r.NEAREST,r.CLAMP_TO_EDGE);}else i.demTexture=new t.default$4(o,s,r.RGBA,{premultiply:!1}),i.demTexture.bind(r.NEAREST,r.CLAMP_TO_EDGE);o.activeTexture.set(r.TEXTURE0);var c=i.fbo;if(!c){var u=new t.default$4(o,{width:a,height:a,data:null},r.RGBA);u.bind(r.LINEAR,r.CLAMP_TO_EDGE),(c=i.fbo=o.createFramebuffer(a,a)).colorAttachment.set(u.texture);}o.bindFramebuffer.set(c.framebuffer),o.viewport.set([0,0,a,a]);var h=t.create();t.ortho(h,0,t.default$10,-t.default$10,0,0,1),t.translate(h,h,[0,-t.default$10,0]);var p=e.useProgram("hillshadePrepare");r.uniformMatrix4fv(p.uniforms.u_matrix,!1,h),r.uniform1f(p.uniforms.u_zoom,i.tileID.overscaledZ),r.uniform2fv(p.uniforms.u_dimension,[2*a,2*a]),r.uniform1i(p.uniforms.u_image,1),r.uniform1f(p.uniforms.u_maxzoom,n);var d=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(o,p,d,[]),r.drawArrays(r.TRIANGLE_STRIP,0,d.length),i.needsHillshadePrepare=!1;}}function fi(e,i,n,o,r){var a=o.paint.get("raster-fade-duration");if(a>0){var s=t.default$2.now(),l=(s-e.timeAdded)/a,c=i?(s-i.timeAdded)/a:-1,u=n.getSource(),h=r.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),p=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-c,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}function mi(e,i,n){var o=e.context,r=o.gl,a=n.posMatrix,s=e.useProgram("debug");o.setDepthMode(Lt.disabled),o.setStencilMode(Dt.disabled),o.setColorMode(e.colorModeForRenderPass()),r.uniformMatrix4fv(s.uniforms.u_matrix,!1,a),r.uniform4f(s.uniforms.u_color,1,0,0,1),e.debugVAO.bind(o,s,e.debugBuffer,[]),r.drawArrays(r.LINE_STRIP,0,e.debugBuffer.length);for(var l=function(t,e,i,n){n=n||1;var o,r,a,s,l,c,u,h,p=[];for(o=0,r=t.length;o<r;o++)if(l=_i[t[o]]){for(h=null,a=0,s=l[1].length;a<s;a+=2)-1===l[1][a]&&-1===l[1][a+1]?h=null:(c=e+l[1][a]*n,u=i-l[1][a+1]*n,h&&p.push(h.x,h.y,c,u),h={x:c,y:u});e+=l[0]*n;}return p}(n.toString(),50,200,5),c=new t.PosArray,u=0;u<l.length;u+=2)c.emplaceBack(l[u],l[u+1]);var h=o.createVertexBuffer(c,Ze.members);(new V).bind(o,s,h,[]),r.uniform4f(s.uniforms.u_color,1,1,1,1);for(var p=i.getTile(n).tileSize,d=t.default$10/(Math.pow(2,e.transform.zoom-n.overscaledZ)*p),f=[[-1,-1],[-1,1],[1,-1],[1,1]],m=0;m<f.length;m++){var _=f[m];r.uniformMatrix4fv(s.uniforms.u_matrix,!1,t.translate([],a,[d*_[0],d*_[1],0])),r.drawArrays(r.LINES,0,h.length);}r.uniform4f(s.uniforms.u_color,0,0,0,1),r.uniformMatrix4fv(s.uniforms.u_matrix,!1,a),r.drawArrays(r.LINES,0,h.length);}var _i={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};var gi={symbol:function(t,e,i,n){if("translucent"===t.renderPass){var o=t.context;o.setStencilMode(Dt.disabled),o.setColorMode(t.colorModeForRenderPass()),0!==i.paint.get("icon-opacity").constantOr(1)&&Qe(t,e,i,n,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright")),0!==i.paint.get("text-opacity").constantOr(1)&&Qe(t,e,i,n,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&function(t,e,i,n){Ke(t,e,i,n,!1),Ke(t,e,i,n,!0);}(t,e,i,n);}},circle:function(t,e,i,n){if("translucent"===t.renderPass){var o=i.paint.get("circle-opacity"),r=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity");if(0!==o.constantOr(1)||0!==r.constantOr(1)&&0!==a.constantOr(1)){var s=t.context,l=s.gl;s.setDepthMode(t.depthModeForSublayer(0,Lt.ReadOnly)),s.setStencilMode(Dt.disabled),s.setColorMode(t.colorModeForRenderPass());for(var c=!0,u=0;u<n.length;u++){var h=n[u],p=e.getTile(h),d=p.getBucket(i);if(d){var f=t.context.program.get(),m=d.programConfigurations.get(i.id),_=t.useProgram("circle",m);if((c||_.program!==f)&&(m.setUniforms(s,_,i.paint,{zoom:t.transform.zoom}),c=!1),l.uniform1f(_.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),l.uniform1i(_.uniforms.u_scale_with_map,"map"===i.paint.get("circle-pitch-scale")?1:0),"map"===i.paint.get("circle-pitch-alignment")){l.uniform1i(_.uniforms.u_pitch_with_map,1);var g=me(p,1,t.transform.zoom);l.uniform2f(_.uniforms.u_extrude_scale,g,g);}else l.uniform1i(_.uniforms.u_pitch_with_map,0),l.uniform2fv(_.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);l.uniformMatrix4fv(_.uniforms.u_matrix,!1,t.translatePosMatrix(h.posMatrix,p,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor"))),_.draw(s,l.TRIANGLES,i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,m);}}}}},heatmap:function(e,i,n,o){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var r=e.context,a=r.gl;r.setDepthMode(e.depthModeForSublayer(0,Lt.ReadOnly)),r.setStencilMode(Dt.disabled),function(t,e,i){var n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var o=i.heatmapFbo;if(o)n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),t.bindFramebuffer.set(o.framebuffer);else{var r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),o=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,i,n,o){var r=e.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,i.width/4,i.height/4,0,r.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),o.colorAttachment.set(n),e.extTextureHalfFloat&&r.checkFramebufferStatus(r.FRAMEBUFFER)!==r.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,o.colorAttachment.setDirty(),t(e,i,n,o));}(t,e,r,o);}}(r,e,n),r.clear({color:t.default$8.transparent}),r.setColorMode(new Rt([a.ONE,a.ONE],t.default$8.transparent,[!0,!0,!0,!0]));for(var s=!0,l=0;l<o.length;l++){var c=o[l];if(!i.hasRenderableParent(c)){var u=i.getTile(c),h=u.getBucket(n);if(h){var p=e.context.program.get(),d=h.programConfigurations.get(n.id),f=e.useProgram("heatmap",d),m=e.transform.zoom;(s||f.program!==p)&&(d.setUniforms(e.context,f,n.paint,{zoom:m}),s=!1),a.uniform1f(f.uniforms.u_extrude_scale,me(u,1,m)),a.uniform1f(f.uniforms.u_intensity,n.paint.get("heatmap-intensity")),a.uniformMatrix4fv(f.uniforms.u_matrix,!1,c.posMatrix),f.draw(r,a.TRIANGLES,n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,d);}}}r.viewport.set([0,0,e.width,e.height]);}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){var n=e.context,o=n.gl,r=i.heatmapFbo;if(r){n.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),n.activeTexture.set(o.TEXTURE1);var a=i.colorRampTexture;a||(a=i.colorRampTexture=new t.default$4(n,i.colorRamp,o.RGBA)),a.bind(o.LINEAR,o.CLAMP_TO_EDGE),n.setDepthMode(Lt.disabled),n.setStencilMode(Dt.disabled);var s=e.useProgram("heatmapTexture"),l=i.paint.get("heatmap-opacity");o.uniform1f(s.uniforms.u_opacity,l),o.uniform1i(s.uniforms.u_image,0),o.uniform1i(s.uniforms.u_color_ramp,1);var c=t.create();t.ortho(c,0,e.width,e.height,0,0,1),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,c),o.uniform2f(s.uniforms.u_world,o.drawingBufferWidth,o.drawingBufferHeight),e.viewportVAO.bind(e.context,s,e.viewportBuffer,[]),o.drawArrays(o.TRIANGLE_STRIP,0,4);}}(e,n));},line:function(t,e,i,n){if("translucent"===t.renderPass){var o=i.paint.get("line-opacity"),r=i.paint.get("line-width");if(0!==o.constantOr(1)&&0!==r.constantOr(1)){var a=t.context;a.setDepthMode(t.depthModeForSublayer(0,Lt.ReadOnly)),a.setColorMode(t.colorModeForRenderPass());for(var s,l=i.paint.get("line-dasharray")?"lineSDF":i.paint.get("line-pattern")?"linePattern":i.paint.get("line-gradient")?"lineGradient":"line",c=!0,u=0,h=n;u<h.length;u+=1){var p=h[u],d=e.getTile(p),f=d.getBucket(i);if(f){var m=f.programConfigurations.get(i.id),_=t.context.program.get(),g=t.useProgram(l,m),v=c||g.program!==_,y=s!==d.tileID.overscaledZ;v&&m.setUniforms(t.context,g,i.paint,{zoom:t.transform.zoom}),ni(g,t,d,f,i,p,m,v,y),s=d.tileID.overscaledZ,c=!1;}}}}},fill:function(e,i,n,o){var r=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.context;s.setColorMode(e.colorModeForRenderPass());var l=n.paint.get("fill-pattern")||1!==r.constantOr(t.default$8.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";e.renderPass===l&&(s.setDepthMode(e.depthModeForSublayer(1,"opaque"===e.renderPass?Lt.ReadWrite:Lt.ReadOnly)),si(e,i,n,o,li)),"translucent"===e.renderPass&&n.paint.get("fill-antialias")&&(s.setDepthMode(e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Lt.ReadOnly)),si(e,i,n,o,ci));}},"fill-extrusion":function(e,i,n,o){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===e.renderPass){!function(e,i){var n=e.context,o=n.gl,r=i.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!r){var a=new t.default$4(n,{width:e.width,height:e.height,data:null},o.RGBA);a.bind(o.LINEAR,o.CLAMP_TO_EDGE),(r=i.viewportFrame=n.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture);}n.bindFramebuffer.set(r.framebuffer),r.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(n.clear({depth:1}),e.depthRboNeedsClear=!1),n.clear({color:t.default$8.transparent}),n.setStencilMode(Dt.disabled),n.setDepthMode(new Lt(o.LEQUAL,Lt.ReadWrite,[0,1])),n.setColorMode(e.colorModeForRenderPass());}(e,n);for(var r=!0,a=0,s=o;a<s.length;a+=1){var l=s[a],c=i.getTile(l),u=c.getBucket(n);u&&(hi(e,0,n,c,l,u,r),r=!1);}}else"translucent"===e.renderPass&&function(e,i){var n=i.viewportFrame;if(n){var o=e.context,r=o.gl,a=e.useProgram("extrusionTexture");o.setStencilMode(Dt.disabled),o.setDepthMode(Lt.disabled),o.setColorMode(e.colorModeForRenderPass()),o.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),r.uniform1f(a.uniforms.u_opacity,i.paint.get("fill-extrusion-opacity")),r.uniform1i(a.uniforms.u_image,0);var s=t.create();t.ortho(s,0,e.width,e.height,0,0,1),r.uniformMatrix4fv(a.uniforms.u_matrix,!1,s),r.uniform2f(a.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),e.viewportVAO.bind(o,a,e.viewportBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,4);}}(e,n);},hillshade:function(t,e,i,n){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var o=t.context,r=e.getSource().maxzoom;o.setDepthMode(t.depthModeForSublayer(0,Lt.ReadOnly)),o.setStencilMode(Dt.disabled),o.setColorMode(t.colorModeForRenderPass());for(var a=0,s=n;a<s.length;a+=1){var l=s[a],c=e.getTile(l);c.needsHillshadePrepare&&"offscreen"===t.renderPass?di(t,c,r):"translucent"===t.renderPass&&pi(t,c,i);}o.viewport.set([0,0,t.width,t.height]);}},raster:function(t,e,i,n){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")){var o,r,a=t.context,s=a.gl,l=e.getSource(),c=t.useProgram("raster");a.setStencilMode(Dt.disabled),a.setColorMode(t.colorModeForRenderPass()),s.uniform1f(c.uniforms.u_brightness_low,i.paint.get("raster-brightness-min")),s.uniform1f(c.uniforms.u_brightness_high,i.paint.get("raster-brightness-max")),s.uniform1f(c.uniforms.u_saturation_factor,(o=i.paint.get("raster-saturation"))>0?1-1/(1.001-o):-o),s.uniform1f(c.uniforms.u_contrast_factor,(r=i.paint.get("raster-contrast"))>0?1/(1-r):1+r),s.uniform3fv(c.uniforms.u_spin_weights,function(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}(i.paint.get("raster-hue-rotate"))),s.uniform1f(c.uniforms.u_buffer_scale,1),s.uniform1i(c.uniforms.u_image0,0),s.uniform1i(c.uniforms.u_image1,1);for(var u=n.length&&n[0].overscaledZ,h=0,p=n;h<p.length;h+=1){var d=p[h];a.setDepthMode(t.depthModeForSublayer(d.overscaledZ-u,1===i.paint.get("raster-opacity")?Lt.ReadWrite:Lt.ReadOnly,s.LESS));var f=e.getTile(d),m=t.transform.calculatePosMatrix(d.toUnwrapped(),!0);f.registerFadeDuration(i.paint.get("raster-fade-duration")),s.uniformMatrix4fv(c.uniforms.u_matrix,!1,m);var _=e.findLoadedParent(d,0,{}),g=fi(f,_,e,i,t.transform),v=void 0,y=void 0;if(a.activeTexture.set(s.TEXTURE0),f.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(s.TEXTURE1),_?(_.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),v=Math.pow(2,_.tileID.overscaledZ-f.tileID.overscaledZ),y=[f.tileID.canonical.x*v%1,f.tileID.canonical.y*v%1]):f.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),s.uniform2fv(c.uniforms.u_tl_parent,y||[0,0]),s.uniform1f(c.uniforms.u_scale_parent,v||1),s.uniform1f(c.uniforms.u_fade_t,g.mix),s.uniform1f(c.uniforms.u_opacity,g.opacity*i.paint.get("raster-opacity")),l instanceof j){var x=l.boundsBuffer;l.boundsVAO.bind(a,c,x,[]),s.drawArrays(s.TRIANGLE_STRIP,0,x.length);}else if(f.maskedBoundsBuffer&&f.maskedIndexBuffer&&f.segments)c.draw(a,s.TRIANGLES,i.id,f.maskedBoundsBuffer,f.maskedIndexBuffer,f.segments);else{var b=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(a,c,b,[]),s.drawArrays(s.TRIANGLE_STRIP,0,b.length);}}}},background:function(t,e,i){var n=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0!==o){var r=t.context,a=r.gl,s=t.transform,l=s.tileSize,c=i.paint.get("background-pattern"),u=c||1!==n.a||1!==o?"translucent":"opaque";if(t.renderPass===u){var h;if(r.setStencilMode(Dt.disabled),r.setDepthMode(t.depthModeForSublayer(0,"opaque"===u?Lt.ReadWrite:Lt.ReadOnly)),r.setColorMode(t.colorModeForRenderPass()),c){if(oi(c,t))return;h=t.useProgram("backgroundPattern"),ri(c,t,h),t.tileExtentPatternVAO.bind(r,h,t.tileExtentBuffer,[]);}else h=t.useProgram("background"),a.uniform4fv(h.uniforms.u_color,[n.r,n.g,n.b,n.a]),t.tileExtentVAO.bind(r,h,t.tileExtentBuffer,[]);a.uniform1f(h.uniforms.u_opacity,o);for(var p=0,d=s.coveringTiles({tileSize:l});p<d.length;p+=1){var f=d[p];c&&ai({tileID:f,tileSize:l},t,h),a.uniformMatrix4fv(h.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(f.toUnwrapped())),a.drawArrays(a.TRIANGLE_STRIP,0,t.tileExtentBuffer.length);}}}},debug:function(t,e,i){for(var n=0;n<i.length;n++)mi(t,e,i[n]);}},vi=function(e,i){this.context=new Pt(e),this.transform=i,this._tileTextures={},this.setup(),this.numSublayers=kt.maxUnderzooming+kt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.default$22,this.crossTileSymbolIndex=new Oe;};function yi(t,e){if(t.row>e.row){var i=t;t=e,e=i;}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function xi(t,e,i,n,o){var r=Math.max(i,Math.floor(e.y0)),a=Math.min(n,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s;}for(var l=t.dx/t.dy,c=e.dx/e.dy,u=t.dx>0,h=e.dx<0,p=r;p<a;p++){var d=l*Math.max(0,Math.min(t.dy,p+u-t.y0))+t.x0,f=c*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;o(Math.floor(f),Math.ceil(d),p);}}function bi(t,e,i,n,o,r){var a,s=yi(t,e),l=yi(e,i),c=yi(i,t);s.dy>l.dy&&(a=s,s=l,l=a),s.dy>c.dy&&(a=s,s=c,c=a),l.dy>c.dy&&(a=l,l=c,c=a),s.dy&&xi(c,s,n,o,r),l.dy&&xi(c,l,n,o,r);}vi.prototype.resize=function(e,i){var n=this.context.gl;if(this.width=e*t.default$2.devicePixelRatio,this.height=i*t.default$2.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,r=this.style._order;o<r.length;o+=1){var a=r[o];this.style._layers[a].resize();}this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null);},vi.prototype.setup=function(){var e=this.context,i=new t.PosArray;i.emplaceBack(0,0),i.emplaceBack(t.default$10,0),i.emplaceBack(0,t.default$10),i.emplaceBack(t.default$10,t.default$10),this.tileExtentBuffer=e.createVertexBuffer(i,Ze.members),this.tileExtentVAO=new V,this.tileExtentPatternVAO=new V;var n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.default$10,0),n.emplaceBack(t.default$10,t.default$10),n.emplaceBack(0,t.default$10),n.emplaceBack(0,0),this.debugBuffer=e.createVertexBuffer(n,Ze.members),this.debugVAO=new V;var o=new t.RasterBoundsArray;o.emplaceBack(0,0,0,0),o.emplaceBack(t.default$10,0,t.default$10,0),o.emplaceBack(0,t.default$10,0,t.default$10),o.emplaceBack(t.default$10,t.default$10,t.default$10,t.default$10),this.rasterBoundsBuffer=e.createVertexBuffer(o,t.default$11.members),this.rasterBoundsVAO=new V;var r=new t.PosArray;r.emplaceBack(0,0),r.emplaceBack(1,0),r.emplaceBack(0,1),r.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(r,Ze.members),this.viewportVAO=new V;},vi.prototype.clearStencil=function(){var e=this.context,i=e.gl;e.setColorMode(Rt.disabled),e.setDepthMode(Lt.disabled),e.setStencilMode(new Dt({func:i.ALWAYS,mask:0},0,255,i.ZERO,i.ZERO,i.ZERO));var n=t.create();t.ortho(n,0,this.width,this.height,0,0,1),t.scale(n,n,[i.drawingBufferWidth,i.drawingBufferHeight,0]);var o=this.useProgram("clippingMask");i.uniformMatrix4fv(o.uniforms.u_matrix,!1,n),this.viewportVAO.bind(e,o,this.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4);},vi.prototype._renderTileClippingMasks=function(t){var e=this.context,i=e.gl;e.setColorMode(Rt.disabled),e.setDepthMode(Lt.disabled);var n=1;this._tileClippingMaskIDs={};for(var o=0,r=t;o<r.length;o+=1){var a=r[o],s=this._tileClippingMaskIDs[a.key]=n++;e.setStencilMode(new Dt({func:i.ALWAYS,mask:0},s,255,i.KEEP,i.KEEP,i.REPLACE));var l=this.useProgram("clippingMask");i.uniformMatrix4fv(l.uniforms.u_matrix,!1,a.posMatrix),this.tileExtentVAO.bind(this.context,l,this.tileExtentBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,this.tileExtentBuffer.length);}},vi.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Dt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},vi.prototype.colorModeForRenderPass=function(){var e=this.context.gl;if(this._showOverdrawInspector){return new Rt([e.CONSTANT_COLOR,e.ONE],new t.default$8(1/8,1/8,1/8,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Rt.unblended:Rt.alphaBlended},vi.prototype.depthModeForSublayer=function(t,e,i){var n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,o=n-1+this.depthRange;return new Lt(i||this.context.gl.LEQUAL,e,[o,n])},vi.prototype.render=function(e,i){var n=this;for(var o in this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.default$2.now()),e.sourceCaches){var r=n.style.sourceCaches[o];r.used&&r.prepare(n.context);}var a=this.style._order,s=t.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type}),l=function(e){var i=s[e];!function(e,i){for(var n=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),o=0;o<n.length;o++){var r={},a=n[o],s=n.slice(o+1);He(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),r),a.setMask(r,i);}}(i.getVisibleCoordinates().map(function(t){return i.getTile(t)}),n.context);};for(var c in s)l(c);this.renderPass="offscreen";var u,h=[];this.depthRboNeedsClear=!0;for(var p=0;p<a.length;p++){var d=n.style._layers[a[p]];d.hasOffscreenPass()&&!d.isHidden(n.transform.zoom)&&(d.source!==(u&&u.id)&&(h=[],(u=n.style.sourceCaches[d.source])&&(h=u.getVisibleCoordinates()).reverse()),h.length&&n.renderLayer(n,u,d,h));}this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.default$8.black:t.default$8.transparent,depth:1}),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var f,m=[];for(this.currentLayer=a.length-1,this.currentLayer;this.currentLayer>=0;this.currentLayer--){var _=n.style._layers[a[n.currentLayer]];_.source!==(f&&f.id)&&(m=[],(f=n.style.sourceCaches[_.source])&&(n.clearStencil(),m=f.getVisibleCoordinates(),f.getSource().isTileClipped&&n._renderTileClippingMasks(m))),n.renderLayer(n,f,_,m);}this.renderPass="translucent";var g,v=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<a.length;this.currentLayer++){var y=n.style._layers[a[n.currentLayer]];y.source!==(g&&g.id)&&(v=[],(g=n.style.sourceCaches[y.source])&&(n.clearStencil(),v=g.getVisibleCoordinates(),g.getSource().isTileClipped&&n._renderTileClippingMasks(v)),v.reverse()),n.renderLayer(n,g,y,v);}if(this.options.showTileBoundaries){var x=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];x&&gi.debug(this,x,x.getVisibleCoordinates());}},vi.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height));},vi.prototype.renderLayer=function(t,e,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||n.length)&&(this.id=i.id,gi[i.type](t,e,i,n));},vi.prototype.translatePosMatrix=function(e,i,n,o,r){if(!n[0]&&!n[1])return e;var a=r?"map"===o?this.transform.angle:0:"viewport"===o?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*s,n[0]*s+n[1]*l];}var c=[r?n[0]:me(i,n[0],this.transform.zoom),r?n[1]:me(i,n[1],this.transform.zoom),0],u=new Float32Array(16);return t.translate(u,e,c),u},vi.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t];},vi.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},vi.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var i=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new Xe(this.context,qe[t],e,this._showOverdrawInspector)),this.cache[i]},vi.prototype.useProgram=function(t,e){var i=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(i.program),i};var wi=function(t,e,i){this.tileSize=512,this._renderWorldCopies=void 0===i||i,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new B(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={};},Ei={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};wi.prototype.clone=function(){var t=new wi(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},Ei.minZoom.get=function(){return this._minZoom},Ei.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t));},Ei.maxZoom.get=function(){return this._maxZoom},Ei.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t));},Ei.renderWorldCopies.get=function(){return this._renderWorldCopies},Ei.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t;},Ei.worldSize.get=function(){return this.tileSize*this.scale},Ei.centerPoint.get=function(){return this.size._div(2)},Ei.size.get=function(){return new t.default(this.width,this.height)},Ei.bearing.get=function(){return-this.angle/Math.PI*180},Ei.bearing.set=function(e){var i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$4(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle));},Ei.pitch.get=function(){return this._pitch/Math.PI*180},Ei.pitch.set=function(e){var i=t.clamp(e,0,60)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices());},Ei.fov.get=function(){return this._fov/Math.PI*180},Ei.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices());},Ei.zoom.get=function(){return this._zoom},Ei.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices());},Ei.center.get=function(){return this._center},Ei.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices());},wi.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},wi.prototype.getVisibleUnwrappedCoordinates=function(e){var i=this.pointCoordinate(new t.default(0,0),0),n=this.pointCoordinate(new t.default(this.width,0),0),o=Math.floor(i.column),r=Math.floor(n.column),a=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var s=o;s<=r;s++)0!==s&&a.push(new t.UnwrappedTileID(s,e));return a},wi.prototype.coveringTiles=function(e){var i=this.coveringZoomLevel(e),n=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var o=this.pointCoordinate(this.centerPoint,i),r=new t.default(o.column-.5,o.row-.5);return function(e,i,n,o){void 0===o&&(o=!0);var r=1<<e,a={};function s(i,s,l){var c,u,h,p;if(l>=0&&l<=r)for(c=i;c<s;c++)u=Math.floor(c/r),h=(c%r+r)%r,0!==u&&!0!==o||(p=new t.OverscaledTileID(n,u,e,h,l),a[p.key]=p);}return bi(i[0],i[1],i[2],0,r,s),bi(i[2],i[3],i[0],0,r,s),Object.keys(a).map(function(t){return a[t]})}(i,[this.pointCoordinate(new t.default(0,0),i),this.pointCoordinate(new t.default(this.width,0),i),this.pointCoordinate(new t.default(this.width,this.height),i),this.pointCoordinate(new t.default(0,this.height),i)],e.reparseOverscaled?n:i,this._renderWorldCopies).sort(function(t,e){return r.dist(t.canonical)-r.dist(e.canonical)})},wi.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices();},Ei.unmodified.get=function(){return this._unmodified},wi.prototype.zoomScale=function(t){return Math.pow(2,t)},wi.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},wi.prototype.project=function(e){return new t.default(this.lngX(e.lng),this.latY(e.lat))},wi.prototype.unproject=function(t){return new B(this.xLng(t.x),this.yLat(t.y))},Ei.x.get=function(){return this.lngX(this.center.lng)},Ei.y.get=function(){return this.latY(this.center.lat)},Ei.point.get=function(){return new t.default(this.x,this.y)},wi.prototype.lngX=function(t){return(180+t)*this.worldSize/360},wi.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},wi.prototype.xLng=function(t){return 360*t/this.worldSize-180},wi.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},wi.prototype.setLocationAtPoint=function(t,e){var i=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(i)),this._renderWorldCopies&&(this.center=this.center.wrap());},wi.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},wi.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},wi.prototype.locationCoordinate=function(e){return new t.default$15(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},wi.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new B(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},wi.prototype.pointCoordinate=function(e,i){void 0===i&&(i=this.tileZoom);var n=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(o,o,this.pixelMatrixInverse);var r=n[3],a=o[3],s=n[0]/r,l=o[0]/a,c=n[1]/r,u=o[1]/a,h=n[2]/r,p=o[2]/a,d=h===p?0:(0-h)/(p-h);return new t.default$15(t.number(s,l,d)/this.tileSize,t.number(c,u,d)/this.tileSize,this.zoom)._zoomTo(i)},wi.prototype.coordinatePoint=function(e){var i=e.zoomTo(this.zoom),n=[i.column*this.tileSize,i.row*this.tileSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.default(n[0]/n[3],n[1]/n[3])},wi.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var n=e.key,o=i?this._alignedPosMatrixCache:this._posMatrixCache;if(o[n])return o[n];var r=e.canonical,a=this.worldSize/this.zoomScale(r.z),s=r.x+Math.pow(2,r.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,r.y*a,0]),t.scale(l,l,[a/t.default$10,a/t.default$10,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),o[n]=new Float32Array(l),o[n]},wi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,i,n,o,r=-90,a=90,s=-180,l=180,c=this.size,u=this._unmodified;if(this.latRange){var h=this.latRange;r=this.latY(h[1]),e=(a=this.latY(h[0]))-r<c.y?c.y/(a-r):0;}if(this.lngRange){var p=this.lngRange;s=this.lngX(p[0]),i=(l=this.lngX(p[1]))-s<c.x?c.x/(l-s):0;}var d=Math.max(i||0,e||0);if(d)return this.center=this.unproject(new t.default(i?(l+s)/2:this.x,e?(a+r)/2:this.y)),this.zoom+=this.scaleZoom(d),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var f=this.y,m=c.y/2;f-m<r&&(o=r+m),f+m>a&&(o=a-m);}if(this.lngRange){var _=this.x,g=c.x/2;_-g<s&&(n=s+g),_+g>l&&(n=l-g);}void 0===n&&void 0===o||(this.center=this.unproject(new t.default(void 0!==n?n:this.x,void 0!==o?o:this.y))),this._unmodified=u,this._constraining=!1;}},wi.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,i=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-i-e),o=this.x,r=this.y,a=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),s=new Float64Array(16);t.perspective(s,this._fov,this.width/this.height,1,a),t.scale(s,s,[1,-1,1]),t.translate(s,s,[0,0,-this.cameraToCenterDistance]),t.rotateX(s,s,this._pitch),t.rotateZ(s,s,this.angle),t.translate(s,s,[-o,-r,0]);var l=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));t.scale(s,s,[1,1,l,1]),this.projMatrix=s;var c=this.width%2/2,u=this.height%2/2,h=Math.cos(this.angle),p=Math.sin(this.angle),d=o-Math.round(o)+h*c+p*u,f=r-Math.round(r)+h*u+p*c,m=new Float64Array(s);if(t.translate(m,m,[d>.5?d-1:d,f>.5?f-1:f,0]),this.alignedProjMatrix=m,s=t.create(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),s,this.projMatrix),!(s=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={};}},wi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.default(0,0)).zoomTo(this.zoom),i=[e.column*this.tileSize,e.row*this.tileSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(wi.prototype,Ei);var Ti=function(){var e,i,n,o,r;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),i=300,n=!1,o=0,r=function(){o=0,n&&(e(),o=setTimeout(r,i),n=!1);},function(){return n=!0,o||r(),o});};Ti.prototype.addTo=function(e){return this._map=e,t.default$1.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ti.prototype.remove=function(){return t.default$1.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ti.prototype.getHashString=function(t){var e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,n),r=Math.round(e.lng*o)/o,a=Math.round(e.lat*o)/o,s=this._map.getBearing(),l=this._map.getPitch(),c="";return c+=t?"#/"+r+"/"+a+"/"+i:"#"+i+"/"+a+"/"+r,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+="/"+Math.round(l)),c},Ti.prototype._onHashChange=function(){var e=t.default$1.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},Ti.prototype._updateHashUnthrottled=function(){var e=this.getHashString();t.default$1.history.replaceState(t.default$1.history.state,"",e);};var Ii=function(e){function n(n,o,r,a){void 0===a&&(a={});var s=i.mousePos(o.getCanvasContainer(),r),l=o.unproject(s);e.call(this,n,t.extend({point:s,lngLat:l,originalEvent:r},a)),this._defaultPrevented=!1,this.target=o;}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var o={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0;},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,o),n}(t.Event),Ci=function(e){function n(n,o,r){var a=i.touchPos(o.getCanvasContainer(),r),s=a.map(function(t){return o.unproject(t)}),l=a.reduce(function(t,e,i,n){return t.add(e.div(n.length))},new t.default(0,0)),c=o.unproject(l);e.call(this,n,{points:a,point:l,lngLats:s,lngLat:c,originalEvent:r}),this._defaultPrevented=!1;}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var o={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0;},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,o),n}(t.Event),Si=function(t){function e(e,i,n){t.call(this,e,{originalEvent:n}),this._defaultPrevented=!1;}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0;},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(t.Event),zi=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this);};zi.prototype.isEnabled=function(){return!!this._enabled},zi.prototype.isActive=function(){return!!this._active},zi.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around);},zi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1);},zi.prototype.onWheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t.default$1.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=t.default$2.now(),o=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":o>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(o*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this.isActive()||this._start(e)),e.preventDefault();}},zi.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t);},zi.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=i.mousePos(this._el,e);this._around=B.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame));}},zi.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var i=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,o=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==o&&(o=1/o);var r="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(r*o))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0;}var a=!1;if("wheel"===this._type){var s=Math.min((t.default$2.now()-this._lastWheelEventTime)/200,1),l=this._easing(s);i.zoom=t.number(this._startZoom,this._targetZoom,l),s<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):a=!0;}else i.zoom=this._targetZoom,a=!0;i.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),a&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom;},200));}},zi.prototype._smoothOutEasing=function(e){var i=t.ease;if(this._prevEase){var n=this._prevEase,o=(t.default$2.now()-n.start)/n.duration,r=n.easing(o+.01)-n.easing(o),a=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-a*a);i=t.bezier(a,s,.25,1);}return this._prevEase={start:t.default$2.now(),duration:e,easing:i},i};var Ai=function(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this);};Ai.prototype.isEnabled=function(){return!!this._enabled},Ai.prototype.isActive=function(){return!!this._active},Ai.prototype.enable=function(){this.isEnabled()||(this._enabled=!0);},Ai.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1);},Ai.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.default$1.document.addEventListener("mousemove",this._onMouseMove,!1),t.default$1.document.addEventListener("keydown",this._onKeyDown,!1),t.default$1.document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=this._lastPos=i.mousePos(this._el,e),this._active=!0);},Ai.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);if(!this._lastPos.equals(e)){var n=this._startPos;this._lastPos=e,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var o=Math.min(n.x,e.x),r=Math.max(n.x,e.x),a=Math.min(n.y,e.y),s=Math.max(n.y,e.y);i.setTransform(this._box,"translate("+o+"px,"+a+"px)"),this._box.style.width=r-o+"px",this._box.style.height=s-a+"px";}},Ai.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,o=i.mousePos(this._el,e),r=(new O).extend(this._map.unproject(n)).extend(this._map.unproject(o));this._finish(),i.suppressClick(),n.x===o.x&&n.y===o.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(r,{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e,boxZoomBounds:r}));}},Ai.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t));},Ai.prototype._finish=function(){this._active=!1,t.default$1.document.removeEventListener("mousemove",this._onMouseMove,!1),t.default$1.document.removeEventListener("keydown",this._onKeyDown,!1),t.default$1.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos;},Ai.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))};var Mi=t.bezier(0,0,.25,1),Li=function(e,i){this._map=e,this._el=i.element||e.getCanvasContainer(),this._state="disabled",this._button=i.button||"right",this._bearingSnap=i.bearingSnap||0,this._pitchWithRotate=!1!==i.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this);};Li.prototype.isEnabled=function(){return"disabled"!==this._state},Li.prototype.isActive=function(){return"active"===this._state},Li.prototype.enable=function(){this.isEnabled()||(this._state="enabled");},Li.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled";}},Li.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=i.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==i.mouseButton(e))return;this._eventButton=0;}i.disableDrag(),t.default$1.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.default$1.document.addEventListener("mouseup",this._onMouseUp),t.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.default$2.now(),this._map.getBearing()]],this._startPos=this._lastPos=i.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault();}},Li.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)));},Li.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var i=this._map.transform,n=this._startPos,o=this._lastPos,r=.8*(n.x-o.x),a=-.5*(n.y-o.y),s=i.bearing-r,l=i.pitch-a,c=this._inertia,u=c[c.length-1];this._drainInertiaBuffer(),c.push([t.default$2.now(),this._map._normalizeBearing(s,u[1])]),i.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),i.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos;}},Li.prototype._onMouseUp=function(t){if(i.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind();}},Li.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind();}},Li.prototype._unbind=function(){t.default$1.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.default$1.document.removeEventListener("mouseup",this._onMouseUp),t.default$1.removeEventListener("blur",this._onBlur),i.enableDrag();},Li.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos;},Li.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var i=this._map,n=i.getBearing(),o=this._inertia,r=function(){Math.abs(n)<e._bearingSnap?i.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t);};if(o.length<2)r();else{var a=o[0],s=o[o.length-1],l=o[o.length-2],c=i._normalizeBearing(n,l[1]),u=s[1]-a[1],h=u<0?-1:1,p=(s[0]-a[0])/1e3;if(0!==u&&0!==p){var d=Math.abs(u*(.25/p));d>180&&(d=180);var f=d/180;c+=h*d*(f/2),Math.abs(i._normalizeBearing(c,0))<this._bearingSnap&&(c=i._normalizeBearing(0,c)),i.rotateTo(c,{duration:1e3*f,easing:Mi,noMoveStart:!0},{originalEvent:t});}else r();}},Li.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},Li.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.default$2.now();e.length>0&&i-e[0][0]>160;)e.shift();};var Di=t.bezier(0,0,.3,1),Ri=function(e){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this);};Ri.prototype.isEnabled=function(){return"disabled"!==this._state},Ri.prototype.isActive=function(){return"active"===this._state},Ri.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled");},Ri.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled";}},Ri.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==i.mouseButton(e)||(i.addEventListener(t.default$1.document,"mousemove",this._onMove,{capture:!0}),i.addEventListener(t.default$1.document,"mouseup",this._onMouseUp),this._start(e)));},Ri.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(i.addEventListener(t.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.addEventListener(t.default$1.document,"touchend",this._onTouchEnd),this._start(e)));},Ri.prototype._start=function(e){t.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._lastPos=i.mousePos(this._el,e),this._inertia=[[t.default$2.now(),this._startPos]];},Ri.prototype._onMove=function(e){e.preventDefault();var n=i.mousePos(this._el,e);this._lastPos.equals(n)||(this._lastMoveEvent=e,this._lastPos=n,this._drainInertiaBuffer(),this._inertia.push([t.default$2.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)));},Ri.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent;}},Ri.prototype._onMouseUp=function(t){if(0===i.mouseButton(t))switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();}},Ri.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();}},Ri.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind();}},Ri.prototype._unbind=function(){i.removeEventListener(t.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.removeEventListener(t.default$1.document,"touchend",this._onTouchEnd),i.removeEventListener(t.default$1.document,"mousemove",this._onMove,{capture:!0}),i.removeEventListener(t.default$1.document,"mouseup",this._onMouseUp),i.removeEventListener(t.default$1,"blur",this._onBlur);},Ri.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos;},Ri.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var i=e[e.length-1],n=e[0],o=i[1].sub(n[1]),r=(i[0]-n[0])/1e3;if(0===r||i[1].equals(n[1]))this._fireEvent("moveend",t);else{var a=o.mult(.3/r),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var l=s/750,c=a.mult(-l/2);this._map.panBy(c,{duration:1e3*l,easing:Di,noMoveStart:!0},{originalEvent:t});}}},Ri.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},Ri.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.default$2.now();e.length>0&&i-e[0][0]>160;)e.shift();};var Pi=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this);};function ki(t){return t*(2-t)}Pi.prototype.isEnabled=function(){return!!this._enabled},Pi.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0);},Pi.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1);},Pi.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,i=0,n=0,o=0,r=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),r=-1);break;case 40:t.shiftKey?n=-1:(r=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),l={duration:300,delayEndEvents:500,easing:ki,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*i,pitch:a.getPitch()+10*n,offset:[100*-o,100*-r],center:a.getCenter()};a.easeTo(l,{originalEvent:t});}};var Bi=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this);};Bi.prototype.isEnabled=function(){return!!this._enabled},Bi.prototype.isActive=function(){return!!this._active},Bi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0);},Bi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1);},Bi.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null;},300)));},Bi.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t));},Bi.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t);},Bi.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd);};var Oi=t.bezier(0,0,.15,1),Fi=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this);};Fi.prototype.isEnabled=function(){return!!this._enabled},Fi.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around);},Fi.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1);},Fi.prototype.disableRotation=function(){this._rotationDisabled=!0;},Fi.prototype.enableRotation=function(){this._rotationDisabled=!1;},Fi.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=i.mousePos(this._el,e.touches[0]),o=i.mousePos(this._el,e.touches[1]);this._startVec=n.sub(o),this._gestureIntent=void 0,this._inertia=[],i.addEventListener(t.default$1.document,"touchmove",this._onMove,{passive:!1}),i.addEventListener(t.default$1.document,"touchend",this._onEnd);}},Fi.prototype._getTouchEventData=function(t){var e=i.mousePos(this._el,t.touches[0]),n=i.mousePos(this._el,t.touches[1]),o=e.sub(n);return{vec:o,center:e.add(n).div(2),scale:o.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI}},Fi.prototype._onMove=function(e){if(2===e.touches.length){var i=this._getTouchEventData(e),n=i.vec,o=i.scale,r=i.bearing;if(!this._gestureIntent){var a=Math.abs(1-o)>.15;Math.abs(r)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=n);}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault();}},Fi.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var i=this._map.transform;this._startScale||(this._startScale=i.scale,this._startBearing=i.bearing);var n=this._getTouchEventData(this._lastTouchEvent),o=n.center,r=n.bearing,a=n.scale,s=i.pointLocation(o),l=i.locationPoint(s);"rotate"===e&&(i.bearing=this._startBearing+r),i.zoom=i.scaleZoom(this._startScale*a),i.setLocationAtPoint(s,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.default$2.now(),a,o]);}},Fi.prototype._onEnd=function(e){i.removeEventListener(t.default$1.document,"touchmove",this._onMove,{passive:!1}),i.removeEventListener(t.default$1.document,"touchend",this._onEnd);var n=this._gestureIntent,o=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var r=this._inertia,a=this._map;if(r.length<2)a.snapToNorth({},{originalEvent:e});else{var s=r[r.length-1],l=r[0],c=a.transform.scaleZoom(o*s[1]),u=a.transform.scaleZoom(o*l[1]),h=c-u,p=(s[0]-l[0])/1e3,d=s[2];if(0!==p&&c!==u){var f=.15*h/p;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var m=1e3*Math.abs(f/(12*.15)),_=c+f*m/2e3;_<0&&(_=0),a.easeTo({zoom:_,duration:m,easing:Oi,around:this._aroundCenter?a.getCenter():a.unproject(d),noMoveStart:!0},{originalEvent:e});}else a.snapToNorth({},{originalEvent:e});}}},Fi.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.default$2.now();e.length>2&&i-e[0][0]>160;)e.shift();};var Ni={scrollZoom:zi,boxZoom:Ai,dragRotate:Li,dragPan:Ri,keyboard:Pi,doubleClickZoom:Bi,touchZoomRotate:Fi};var $i=function(e){function i(i,n){e.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this);}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getCenter=function(){return this.transform.center},i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i.prototype.panBy=function(e,i,n){return e=t.default.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),n)},i.prototype.panTo=function(e,i,n){return this.easeTo(t.extend({center:e},i),n)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i.prototype.zoomTo=function(e,i,n){return this.easeTo(t.extend({zoom:e},i),n)},i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i.prototype.rotateTo=function(e,i,n){return this.easeTo(t.extend({bearing:e},i),n)},i.prototype.resetNorth=function(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this},i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i.prototype.cameraForBounds=function(e,i){if("number"==typeof(i=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var n=i.padding;i.padding={top:n,bottom:n,right:n,left:n};}if(t.default$13(Object.keys(i.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){e=O.convert(e);var o=[(i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2],r=Math.min(i.padding.right,i.padding.left),a=Math.min(i.padding.top,i.padding.bottom);i.offset=[i.offset[0]+o[0],i.offset[1]+o[1]];var s=t.default.convert(i.offset),l=this.transform,c=l.project(e.getNorthWest()),u=l.project(e.getSouthEast()),h=u.sub(c),p=(l.width-2*r-2*Math.abs(s.x))/h.x,d=(l.height-2*a-2*Math.abs(s.y))/h.y;if(!(d<0||p<0))return i.center=l.unproject(c.add(u).div(2)),i.zoom=Math.min(l.scaleZoom(l.scale*Math.min(p,d)),i.maxZoom),i.bearing=0,i;t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");},i.prototype.fitBounds=function(e,i,n){var o=this.cameraForBounds(e,i);return o?(i=t.extend(o,i)).linear?this.easeTo(i,n):this.flyTo(i,n):this},i.prototype.jumpTo=function(e,i){this.stop();var n=this.transform,o=!1,r=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(o=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=B.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(r=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),o&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),r&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),a&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))},i.prototype.easeTo=function(e,i){var n=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var o=this.transform,r=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:r,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,u="pitch"in e?+e.pitch:s,h=o.centerPoint.add(t.default.convert(e.offset)),p=o.pointLocation(h),d=B.convert(e.center||p);this._normalizeCenter(d);var f,m,_=o.project(p),g=o.project(d).sub(_),v=o.zoomScale(l-r);return e.around&&(f=B.convert(e.around),m=o.locationPoint(f)),this._zooming=l!==r,this._rotating=a!==c,this._pitching=u!==s,this._prepareEase(i,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(n._zooming&&(o.zoom=t.number(r,l,e)),n._rotating&&(o.bearing=t.number(a,c,e)),n._pitching&&(o.pitch=t.number(s,u,e)),f)o.setLocationAtPoint(f,m);else{var p=o.zoomScale(o.zoom-r),d=l>r?Math.min(2,v):Math.max(.5,v),y=Math.pow(d,1-e),x=o.unproject(_.add(g.mult(e*y)).mult(p));o.setLocationAtPoint(o.renderWorldCopies?x.wrap():x,h);}n._fireMoveEvents(i);},function(){e.delayEndEvents?n._easeEndTimeoutID=setTimeout(function(){return n._afterEase(i)},e.delayEndEvents):n._afterEase(i);},e),this},i.prototype._prepareEase=function(e,i){this._moving=!0,i||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e));},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e));},i.prototype._afterEase=function(e){var i=this._zooming,n=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,i&&this.fire(new t.Event("zoomend",e)),n&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e));},i.prototype.flyTo=function(e,i){var n=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,r=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):r,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,u="pitch"in e?+e.pitch:s,h=o.zoomScale(l-r),p=o.centerPoint.add(t.default.convert(e.offset)),d=o.pointLocation(p),f=B.convert(e.center||d);this._normalizeCenter(f);var m=o.project(d),_=o.project(f).sub(m),g=e.curve,v=Math.max(o.width,o.height),y=v/h,x=_.mag();if("minZoom"in e){var b=t.clamp(Math.min(e.minZoom,r,l),o.minZoom,o.maxZoom),w=v/o.zoomScale(b-r);g=Math.sqrt(w/x*2);}var E=g*g;function T(t){var e=(y*y-v*v+(t?-1:1)*E*E*x*x)/(2*(t?y:v)*E*x);return Math.log(Math.sqrt(e*e+1)-e)}function I(t){return(Math.exp(t)-Math.exp(-t))/2}function C(t){return(Math.exp(t)+Math.exp(-t))/2}var S=T(0),z=function(t){return C(S)/C(S+g*t)},A=function(t){return v*((C(S)*(I(e=S+g*t)/C(e))-I(S))/E)/x;var e;},M=(T(1)-S)/g;if(Math.abs(x)<1e-6||!isFinite(M)){if(Math.abs(v-y)<1e-6)return this.easeTo(e,i);var L=y<v?-1:1;M=Math.abs(Math.log(y/v))/g,A=function(){return 0},z=function(t){return Math.exp(L*g*t)};}if("duration"in e)e.duration=+e.duration;else{var D="screenSpeed"in e?+e.screenSpeed/g:+e.speed;e.duration=1e3*M/D;}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==c,this._pitching=u!==s,this._prepareEase(i,!1),this._ease(function(e){var l=e*M,h=1/z(l);o.zoom=r+o.scaleZoom(h),n._rotating&&(o.bearing=t.number(a,c,e)),n._pitching&&(o.pitch=t.number(s,u,e));var d=o.unproject(m.add(_.mult(A(l))).mult(h));o.setLocationAtPoint(o.renderWorldCopies?d.wrap():d,p),n._fireMoveEvents(i);},function(){return n._afterEase(i)},e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this);}return this},i.prototype._ease=function(e,i,n){!1===n.animate||0===n.duration?(e(1),i()):(this._easeStart=t.default$2.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback));},i.prototype._renderFrameCallback=function(){var e=Math.min((t.default$2.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop();},i.prototype._normalizeBearing=function(e,i){e=t.wrap(e,-180,180);var n=Math.abs(e-i);return Math.abs(e-360-i)<n&&(e-=360),Math.abs(e+360-i)<n&&(e+=360),e},i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0;}},i}(t.Evented),Ui=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this);};Ui.prototype.getDefaultPosition=function(){return"bottom-right"},Ui.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ui.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0;},Ui.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:h.ACCESS_TOKEN}];if(t){var i=e.reduce(function(t,i,n){return i.value&&(t+=i.key+"="+i.value+(n<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+i+(this._map._hash?this._map._hash.getHashString(!0):"");}},Ui.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink());},Ui.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id;}var i=this._map.style.sourceCaches;for(var n in i){var o=i[n].getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution);}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,i){for(var n=i+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null;}},Ui.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact");};var Zi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this);};Zi.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Zi.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact);},Zi.prototype.getDefaultPosition=function(){return"bottom-left"},Zi.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none");},Zi.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t){if(t[e].getSource().mapbox_logo)return!0}return!1}},Zi.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact");}};var Vi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1;};Vi.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Vi.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,n=e?this._queue.concat(e):this._queue;i<n.length;i+=1){var o=n[i];if(o.id===t)return void(o.cancelled=!0)}},Vi.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(!n.cancelled&&(n.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1;},Vi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[];};var ji=t.default$1.HTMLImageElement,Gi=t.default$1.HTMLElement,Wi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},qi=function(n){function o(e){if(null!=(e=t.extend({},Wi,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var o=new wi(e.minZoom,e.maxZoom,e.renderWorldCopies);n.call(this,o,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Vi;var r=e.transformRequest;if(this._transformRequest=r?function(t,e){return r(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){var a=t.default$1.document.getElementById(e.container);if(!a)throw new Error("Container '"+e.container+"' not found.");this._container=a;}else{if(!(e.container instanceof Gi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container;}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==t.default$1&&(t.default$1.addEventListener("online",this._onWindowOnline,!1),t.default$1.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var n=t.getCanvasContainer(),o=null,r=!1,a=null;for(var s in Ni)t[s]=new Ni[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);i.addEventListener(n,"mouseout",function(e){t.fire(new Ii("mouseout",t,e));}),i.addEventListener(n,"mousedown",function(o){r=!0,a=i.mousePos(n,o);var s=new Ii("mousedown",t,o);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(o),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(o),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(o));}),i.addEventListener(n,"mouseup",function(e){var i=t.dragRotate.isActive();o&&!i&&t.fire(new Ii("contextmenu",t,o)),o=null,r=!1,t.fire(new Ii("mouseup",t,e));}),i.addEventListener(n,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var i=e.target;i&&i!==n;)i=i.parentNode;i===n&&t.fire(new Ii("mousemove",t,e));}}),i.addEventListener(n,"mouseover",function(e){for(var i=e.target;i&&i!==n;)i=i.parentNode;i===n&&t.fire(new Ii("mouseover",t,e));}),i.addEventListener(n,"touchstart",function(i){var n=new Ci("touchstart",t,i);t.fire(n),n.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(i),t.touchZoomRotate.onStart(i),t.doubleClickZoom.onTouchStart(n));},{passive:!1}),i.addEventListener(n,"touchmove",function(e){t.fire(new Ci("touchmove",t,e));},{passive:!1}),i.addEventListener(n,"touchend",function(e){t.fire(new Ci("touchend",t,e));}),i.addEventListener(n,"touchcancel",function(e){t.fire(new Ci("touchcancel",t,e));}),i.addEventListener(n,"click",function(e){i.mousePos(n,e).equals(a)&&t.fire(new Ii("click",t,e));}),i.addEventListener(n,"dblclick",function(e){var i=new Ii("dblclick",t,e);t.fire(i),i.defaultPrevented||t.doubleClickZoom.onDblClick(i);}),i.addEventListener(n,"contextmenu",function(e){var i=t.dragRotate.isActive();r||i?r&&(o=e):t.fire(new Ii("contextmenu",t,e)),e.preventDefault();}),i.addEventListener(n,"wheel",function(e){var i=new Si("wheel",t,e);t.fire(i),i.defaultPrevented||t.scrollZoom.onWheel(e);},{passive:!1});}(this,e),this._hash=e.hash&&(new Ti).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Ui),this.addControl(new Zi,e.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet);}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading);}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var r={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return o.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var i=t.onAdd(this),n=this._controlPositions[e];return-1!==e.indexOf("bottom")?n.insertBefore(i,n.firstChild):n.appendChild(i),this},o.prototype.removeControl=function(t){return t.onRemove(this),this},o.prototype.resize=function(e){var i=this._containerDimensions(),n=i[0],o=i[1];return this._resizeCanvas(n,o),this.transform.resize(n,o),this.painter.resize(n,o),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e))},o.prototype.getBounds=function(){var e=new O(this.transform.pointLocation(new t.default(0,this.transform.height)),this.transform.pointLocation(new t.default(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new t.default(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new t.default(0,this.transform.size.y)))),e},o.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new O([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},o.prototype.setMaxBounds=function(t){if(t){var e=O.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update();}else null==t&&(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},o.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},o.prototype.getMinZoom=function(){return this.transform.minZoom},o.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},o.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},o.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update(),this},o.prototype.getMaxZoom=function(){return this.transform.maxZoom},o.prototype.project=function(t){return this.transform.locationPoint(B.convert(t))},o.prototype.unproject=function(e){return this.transform.pointLocation(t.default.convert(e))},o.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},o.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},o.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},o.prototype.on=function(t,e,i){var o,r=this;if(void 0===i)return n.prototype.on.call(this,t,e);var a=function(){if("mouseenter"===t||"mouseover"===t){var n=!1;return{layer:e,listener:i,delegates:{mousemove:function(o){var a=r.getLayer(e)?r.queryRenderedFeatures(o.point,{layers:[e]}):[];a.length?n||(n=!0,i.call(r,new Ii(t,r,o.originalEvent,{features:a}))):n=!1;},mouseout:function(){n=!1;}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(n){(r.getLayer(e)?r.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,i.call(r,new Ii(t,r,n.originalEvent)));},mouseout:function(e){a&&(a=!1,i.call(r,new Ii(t,r,e.originalEvent)));}}}}return{layer:e,listener:i,delegates:(o={},o[t]=function(t){var n=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,i.call(r,t),delete t.features);},o)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)r.on(s,a.delegates[s]);return this},o.prototype.off=function(t,e,i){if(void 0===i)return n.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var o=this._delegatedListeners[t],r=0;r<o.length;r++){var a=o[r];if(a.layer===e&&a.listener===i){for(var s in a.delegates)this.off(s,a.delegates[s]);return o.splice(r,1),this}}return this},o.prototype.queryRenderedFeatures=function(e,i){var n;return 2===arguments.length?(e=arguments[0],i=arguments[1]):1===arguments.length&&((n=arguments[0])instanceof t.default||Array.isArray(n))?(e=arguments[0],i={}):1===arguments.length?(e=void 0,i=arguments[0]):(e=void 0,i={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),i,this.transform):[]},o.prototype._makeQueryGeometry=function(e){var i,n=this;if(void 0===e&&(e=[t.default.convert([0,0]),t.default.convert([this.transform.width,this.transform.height])]),e instanceof t.default||"number"==typeof e[0]){i=[t.default.convert(e)];}else{var o=[t.default.convert(e[0]),t.default.convert(e[1])];i=[o[0],new t.default(o[1].x,o[0].y),o[1],new t.default(o[0].x,o[1].y),o[0]];}return{viewport:i,worldCoordinate:i.map(function(t){return n.transform.pointCoordinate(t)})}},o.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},o.prototype.setStyle=function(e,i){if((!i||!1!==i.diff&&!i.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){t.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.");}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new Ue(this,i||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},o.prototype.getStyle=function(){if(this.style)return this.style.serialize()},o.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},o.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},o.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")));},o.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var n in i){var o=i[n];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},o.prototype.addSourceType=function(t,e,i){return this.style.addSourceType(t,e,i)},o.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},o.prototype.getSource=function(t){return this.style.getSource(t)},o.prototype.addImage=function(e,i,n){void 0===n&&(n={});var o=n.pixelRatio;void 0===o&&(o=1);var r=n.sdf;if(void 0===r&&(r=!1),i instanceof ji){var a=t.default$2.getImageData(i),s=a.width,l=a.height,c=a.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:l},c),pixelRatio:o,sdf:r});}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=i.width,h=i.height,p=i.data;this.style.addImage(e,{data:new t.RGBAImage({width:u,height:h},new Uint8Array(p)),pixelRatio:o,sdf:r});}},o.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},o.prototype.removeImage=function(t){this.style.removeImage(t);},o.prototype.loadImage=function(e,i){t.getImage(this._transformRequest(e,t.ResourceType.Image),i);},o.prototype.listImages=function(){return this.style.listImages()},o.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},o.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},o.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},o.prototype.getLayer=function(t){return this.style.getLayer(t)},o.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},o.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0),this},o.prototype.getFilter=function(t){return this.style.getFilter(t)},o.prototype.setPaintProperty=function(t,e,i){return this.style.setPaintProperty(t,e,i),this._update(!0),this},o.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},o.prototype.setLayoutProperty=function(t,e,i){return this.style.setLayoutProperty(t,e,i),this._update(!0),this},o.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},o.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},o.prototype.getLight=function(){return this.style.getLight()},o.prototype.setFeatureState=function(t,e){this.style.setFeatureState(t,e),this._update();},o.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},o.prototype.getContainer=function(){return this._container},o.prototype.getCanvasContainer=function(){return this._canvasContainer},o.prototype.getCanvas=function(){return this._canvas},o.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},o.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.default$1.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.");},o.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var o=this._controlContainer=i.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){r[t]=i.create("div","mapboxgl-ctrl-"+t,o);});},o.prototype._resizeCanvas=function(e,i){var n=t.default$1.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*i,this._canvas.style.width=e+"px",this._canvas.style.height=i+"px";},o.prototype._setupPainter=function(){var i=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},e.webGLContextAttributes),n=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);n?this.painter=new vi(n,this.transform):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")));},o.prototype._contextLost=function(e){e.preventDefault(),this._frameId&&(t.default$2.cancelFrame(this._frameId),this._frameId=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}));},o.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}));},o.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},o.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender());},o.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},o.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t);},o.prototype._render=function(){this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var i=this.transform.zoom,n=t.default$2.now();this.style.zoomHistory.update(i,n);var o=new t.default$23(i,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=o.crossFadingFactor();1===r&&r===this._crossFadingFactor||(e=!0,this._crossFadingFactor=r),this.style.update(o);}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},o.prototype.remove=function(){this._hash&&this._hash.remove(),t.default$2.cancelFrame(this._frameId),this._renderTaskQueue.clear(),this._frameId=null,this.setStyle(null),void 0!==t.default$1&&(t.default$1.removeEventListener("resize",this._onWindowResize,!1),t.default$1.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),Xi(this._canvasContainer),Xi(this._controlContainer),Xi(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"));},o.prototype._rerender=function(){var e=this;this.style&&!this._frameId&&(this._frameId=t.default$2.frame(function(){e._frameId=null,e._render();}));},o.prototype._onWindowOnline=function(){this._update();},o.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update();},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update());},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update());},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update());},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint=t,this._update();},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update();},o.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(new t.Event(e.dataType+"data",e));},o.prototype._onDataLoading=function(e){this.fire(new t.Event(e.dataType+"dataloading",e));},Object.defineProperties(o.prototype,r),o}($i);function Xi(t){t.parentNode&&t.parentNode.removeChild(t);}var Hi={showCompass:!0,showZoom:!0},Ki=function(e){var n=this;this.options=t.extend({},Hi,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return n._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return n._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return n._map.resetNorth()}),this._compassArrow=i.create("span","mapboxgl-ctrl-compass-arrow",this._compass));};function Yi(t,e,i){if(t=new B(t.lng,t.lat),e){var n=new B(t.lng-360,t.lat),o=new B(t.lng+360,t.lat),r=i.locationPoint(t).distSqr(e);i.locationPoint(n).distSqr(e)<r?t=n:i.locationPoint(o).distSqr(e)<r&&(t=o);}for(;Math.abs(t.lng-i.center.lng)>180;){var a=i.locationPoint(t);if(a.x>=0&&a.y>=0&&a.x<=i.width&&a.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360;}return t}Ki.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t;},Ki.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Li(t,{button:"left",element:this._compass}),i.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Ki.prototype.onRemove=function(){i.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),i.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map;},Ki.prototype._createButton=function(t,e,n){var o=i.create("button",t,this._container);return o.type="button",o.setAttribute("aria-label",e),o.addEventListener("click",n),o};var Ji={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qi(t,e,i){var n=t.classList;for(var o in Ji)n.remove("mapboxgl-"+i+"-anchor-"+o);n.add("mapboxgl-"+i+"-anchor-"+e);}var tn,en=function(e){function n(n){if(e.call(this),(arguments[0]instanceof t.default$1.HTMLElement||2===arguments.length)&&(n=t.extend({element:n},arguments[1])),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",n&&n.element)this._element=n.element,this._offset=t.default.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div");var o=i.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var r=i.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var a=i.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var l=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<c.length;l+=1){var u=c[l],h=i.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",u.rx),h.setAttributeNS(null,"ry",u.ry),s.appendChild(h);}var p=i.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var d=i.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(d);var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(m);var _=i.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_.setAttributeNS(null,"fill","#FFFFFF");var g=i.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=i.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000"),v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962");var y=i.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),g.appendChild(v),g.appendChild(y),a.appendChild(s),a.appendChild(p),a.appendChild(f),a.appendChild(_),a.appendChild(g),o.appendChild(a),this._element.appendChild(o),this._offset=t.default.convert(n&&n.offset||[0,-14]);}this._element.classList.add("mapboxgl-marker"),this._popup=null;}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=B.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset;}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat);}return this},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup();},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Yi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,Ji[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),Qi(this._element,this._anchor,"marker"));},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.default.convert(e),this._update(),this},n.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"));},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive";},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp));},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n}(t.Evented),nn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0};var on=function(e){function n(i){e.call(this),this.options=t.extend({},nn,i),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this);}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==tn?n(tn):void 0!==t.default$1.navigator.permissions?t.default$1.navigator.permissions.query({name:"geolocation"}).then(function(t){tn="denied"!==t.state,n(tn);}):(tn=!!t.default$1.navigator.geolocation,n(tn)),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),i.remove(this._container),this._map=void 0;},n.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish();},n.prototype._updateCamera=function(t){var e=new B(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy;this._map.fitBounds(e.toBounds(i),this.options.fitBoundsOptions,{geolocateSource:!0});},n.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove();},n.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish();},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0;},n.prototype._setupUI=function(e){var n=this;!1!==e&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new en(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")));}));},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.default$1.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions));}else t.default$1.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null);},n}(t.Evented),rn={maxWidth:100,unit:"metric"},an=function(e){this.options=t.extend({},rn,e),t.bindAll(["_onMove","setUnit"],this);};function sn(t,e,i){var n,o,r,a,s,l,c=i&&i.maxWidth||100,u=t._container.clientHeight/2,h=(n=t.unproject([0,u]),o=t.unproject([c,u]),r=Math.PI/180,a=n.lat*r,s=o.lat*r,l=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((o.lng-n.lng)*r),6371e3*Math.acos(Math.min(l,1)));if(i&&"imperial"===i.unit){var p=3.2808*h;if(p>5280)ln(e,c,p/5280,"mi");else ln(e,c,p,"ft");}else if(i&&"nautical"===i.unit){ln(e,c,h/1852,"nm");}else ln(e,c,h,"m");}function ln(t,e,i,n){var o,r,a,s=(o=i,(r=Math.pow(10,(""+Math.floor(o)).length-1))*(a=(a=o/r)>=10?10:a>=5?5:a>=3?3:a>=2?2:1)),l=s/i;"m"===n&&s>=1e3&&(s/=1e3,n="km"),t.style.width=e*l+"px",t.innerHTML=s+n;}an.prototype.getDefaultPosition=function(){return"bottom-left"},an.prototype._onMove=function(){sn(this._map,this._container,this.options);},an.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},an.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0;},an.prototype.setUnit=function(t){this.options.unit=t,sn(this._map,this._container,this.options);};var cn=function(){this._fullscreen=!1,t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.default$1.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.default$1.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.default$1.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.default$1.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl";};cn.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=i.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._container},cn.prototype.onRemove=function(){i.remove(this._container),this._map=null,t.default$1.document.removeEventListener(this._fullscreenchange,this._changeIcon);},cn.prototype._checkFullscreenSupport=function(){return!!(t.default$1.document.fullscreenEnabled||t.default$1.document.mozFullScreenEnabled||t.default$1.document.msFullscreenEnabled||t.default$1.document.webkitFullscreenEnabled)},cn.prototype._setupUI=function(){var e=this._fullscreenButton=i.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.default$1.document.addEventListener(this._fullscreenchange,this._changeIcon);},cn.prototype._isFullscreen=function(){return this._fullscreen},cn.prototype._changeIcon=function(){(t.default$1.document.fullscreenElement||t.default$1.document.mozFullScreenElement||t.default$1.document.webkitFullscreenElement||t.default$1.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"));},cn.prototype._onClickFullscreen=function(){this._isFullscreen()?t.default$1.document.exitFullscreen?t.default$1.document.exitFullscreen():t.default$1.document.mozCancelFullScreen?t.default$1.document.mozCancelFullScreen():t.default$1.document.msExitFullscreen?t.default$1.document.msExitFullscreen():t.default$1.document.webkitCancelFullScreen&&t.default$1.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen();};var un={closeButton:!0,closeOnClick:!0,className:""},hn=function(e){function n(i){e.call(this),this.options=t.extend(Object.create(un),i),t.bindAll(["_update","_onClickClose"],this);}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=B.convert(t),this._pos=null,this._update(),this},n.prototype.setText=function(e){return this.setDOMContent(t.default$1.document.createTextNode(e))},n.prototype.setHTML=function(e){var i,n=t.default$1.document.createDocumentFragment(),o=t.default$1.document.createElement("body");for(o.innerHTML=e;i=o.firstChild;)n.appendChild(i);return this.setDOMContent(n)},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose));},n.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Yi(this._lngLat,this._pos,this._map.transform));var n=this._pos=this._map.project(this._lngLat),o=this.options.anchor,r=function e(i){if(i){if("number"==typeof i){var n=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.default(0,0),top:new t.default(0,i),"top-left":new t.default(n,n),"top-right":new t.default(-n,n),bottom:new t.default(0,-i),"bottom-left":new t.default(n,-n),"bottom-right":new t.default(-n,-n),left:new t.default(i,0),right:new t.default(-i,0)}}if(i instanceof t.default||Array.isArray(i)){var o=t.default.convert(i);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:t.default.convert(i.center||[0,0]),top:t.default.convert(i.top||[0,0]),"top-left":t.default.convert(i["top-left"]||[0,0]),"top-right":t.default.convert(i["top-right"]||[0,0]),bottom:t.default.convert(i.bottom||[0,0]),"bottom-left":t.default.convert(i["bottom-left"]||[0,0]),"bottom-right":t.default.convert(i["bottom-right"]||[0,0]),left:t.default.convert(i.left||[0,0]),right:t.default.convert(i.right||[0,0])}}return e(new t.default(0,0))}(this.options.offset);if(!o){var a,s=this._container.offsetWidth,l=this._container.offsetHeight;a=n.y+r.bottom.y<l?["top"]:n.y>this._map.transform.height-l?["bottom"]:[],n.x<s/2?a.push("left"):n.x>this._map.transform.width-s/2&&a.push("right"),o=0===a.length?"bottom":a.join("-");}var c=n.add(r[o]).round();i.setTransform(this._container,Ji[o]+" translate("+c.x+"px,"+c.y+"px)"),Qi(this._container,o,"popup");}},n.prototype._onClickClose=function(){this.remove();},n}(t.Evented);var pn={version:"0.46.0-beta.1",supported:e,workerCount:Math.max(Math.floor(t.default$2.hardwareConcurrency/2),1),setRTLTextPlugin:t.setRTLTextPlugin,Map:qi,NavigationControl:Ki,GeolocateControl:on,AttributionControl:Ui,ScaleControl:an,FullscreenControl:cn,Popup:hn,Marker:en,Style:Ue,LngLat:B,LngLatBounds:O,Point:t.default,Evented:t.Evented,config:h,get accessToken(){return h.ACCESS_TOKEN},set accessToken(t){h.ACCESS_TOKEN=t;},workerUrl:""};return pn});

//

return mapboxgl;

})));


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"DynamicLoader":[function(require,module,exports){

/*
DynamicLoader Module for FramerJS
https://github.com/LucienLee/framer-DynamicLoader/

Created by Lucien Lee (@luciendeer), Jan. 12th, 2016

DynamicLoader braeks the barriars between 3rd party web development libraries and Framer, which
help you load local, external stylesheets and scripts dynamically.

Add the following line to your project in Framer Studio.
	{DynamicLoader} = require 'DynamicLoader'

[Load one file]
DynamicLoader.add('script.js').then(->
 * when script.js loaded successfully
...
).catch(->
 * when script.js loaded failed
...
)

[Load file in series]
DynamicLoader.series(['one.js', 'two.css', ...]).then( successCallback, failCallback )

[Load file in parallel]
DynamicLoader.series(['one.js', 'two.css', ...]).then( successCallback, failCallback )
 */
exports.DynamicLoader = (function() {
  function DynamicLoader() {}

  DynamicLoader.add = function(url) {
    var promise;
    promise = new Promise(function(resolve, reject) {
      var file, loaded;
      if (url.substr(url.lastIndexOf('.')) === ".js") {
        loaded = Array.prototype.find.call(document.getElementsByTagName('script'), function(element) {
          if (element.getAttribute('src') === url) {
            return element;
          }
        });
        if (loaded !== void 0) {
          return resolve('have loaded');
        }
        file = document.createElement('script');
        file.src = url;
      } else if (url.substr(url.lastIndexOf('.')) === ".css") {
        loaded = Array.prototype.find.call(document.getElementsByTagName('link'), function(element) {
          if (element.getAttribute('rel') === url) {
            return element;
          }
        });
        if (loaded !== void 0) {
          return resolve('have loaded');
        }
        file = document.createElement('link');
        file.rel = "stylesheet";
        file.href = url;
      }
      file.addEventListener('load', function() {
        return resolve(file);
      });
      file.addEventListener('error', function() {
        return reject(file);
      });
      return document.body.appendChild(file);
    });
    return promise;
  };

  DynamicLoader.series = function(urls) {
    if (!Array.isArray(urls) || urls.length === 0) {
      throw "ERROR: NO URL IN ARRAY!";
    }
    return urls.reduce((function(_this) {
      return function(promise, url) {
        return promise.then(function() {
          return _this.add(url);
        });
      };
    })(this), Promise.resolve());
  };

  DynamicLoader.parallel = function(urls) {
    if (!Array.isArray(urls) || urls.length === 0) {
      throw "ERROR: NO URL IN ARRAY!";
    }
    return Promise.all(urls.map((function(_this) {
      return function(url) {
        return _this.add(url);
      };
    })(this)));
  };

  return DynamicLoader;

})();


},{}],"framer-form/form/GA":[function(require,module,exports){
var s;

s = document.createElement('script');

s.setAttribute('src', 'https://www.googletagmanager.com/gtag/js?id=UA-75056533-3');

s.setAttribute('async', '');

document.head.appendChild(s);

window.dataLayer = window.dataLayer || [];

window.gtag = function() {
  return dataLayer.push(arguments);
};

window.gtag('js', new Date());

window.gtag('config', 'UA-75056533-3');

if (window.location.href.includes('framer.cloud')) {
  window.gtag('event', 'Cloud', {
    'event_category': 'Visitors'
  });
} else {
  window.gtag('event', 'Non-Cloud', {
    'event_category': 'Visitors'
  });
}


},{}],"framer-form/form/Light":[function(require,module,exports){
var Animation, BaseClass, States, _,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

BaseClass = require('./_BaseClass.coffee').BaseClass;

Animation = require('./_Animation.coffee').Animation;

States = require('./_States.coffee').States;

exports.Light = (function(superClass) {
  extend(Light, superClass);

  function Light(properties) {
    Light.__super__.constructor.call(this);
    if (!properties.type) {
      throw Error('Please specify a light type!');
    }
    this.properties = _.defaults(properties, {
      castShadow: true
    });
    this.setupLight();
  }

  Light.prototype.setupLight = function() {
    switch (this.properties.type) {
      case 'point':
        this.light = new THREE.PointLight(new THREE.Color(this.properties.color, this.properties.intensity, this.properties.distance, this.properties.decay));
        break;
      case 'directional':
        this.light = new THREE.DirectionalLight(new THREE.Color(this.properties.color, this.properties.intensity));
        break;
      case 'ambient':
        this.light = new THREE.AmbientLight(new THREE.Color(this.properties.color, this.properties.intensity));
        break;
      case 'hemisphere':
        this.light = new THREE.HemisphereLight(new THREE.Color(this.properties.skyColor, new THREE.Color(this.properties.groundColor, this.properties.intensity)));
        break;
      case 'rectarea':
        this.light = new THREE.RectAreaLight(new THREE.Color(this.properties.color, this.properties.intensity, this.properties.width, this.properties.height));
        break;
      case 'spot':
        this.light = new THREE.SpotLight(new THREE.Color(this.properties.color, this.properties.intensity, this.properties.distance, this.properties.angle, this.properties.penumbra, this.properties.decay));
    }
    this.addToRenderingInstance(this.properties.parent);
    this.applyProperties();
    this.saveInitialProperties();
    return this._states = new States(this);
  };

  Light.prototype.addToRenderingInstance = function(parent) {
    if (parent.scene) {
      return parent.scene.add(this.light);
    } else {
      return parent.add(this.light);
    }
  };

  Light.prototype.applyProperties = function(properties) {
    return Object.keys(this.properties).map((function(_this) {
      return function(k) {
        return _this[k] = _this.properties[k];
      };
    })(this));
  };

  Light.prototype.saveInitialProperties = function() {
    return this.initialProperties = this;
  };

  Light.prototype.on = function(eventName, cb) {
    var callback;
    if (eventName.includes('change')) {
      callback = function(e) {
        return cb(e.value);
      };
      this.light.addEventListener(eventName, callback);
      return Framer.CurrentContext.on('reset', (function(_this) {
        return function() {
          return _this.light.removeEventListener(eventName, callback);
        };
      })(this));
    }
  };

  Light.prototype.animate = function(properties) {
    return new Animation(this, properties);
  };

  Light.prototype.lookAt = function(a, b, c) {
    if (arguments.length === 1) {
      return this.light.lookAt(a);
    } else if (arguments.length === 3) {
      return this.light.lookAt(a, b, c);
    }
  };

  Light.prototype.stateSwitch = function(state) {
    return Object.keys(this.states).map((function(_this) {
      return function(k) {
        if (k === state) {
          _this.states.current = _this.states[k];
          return Object.keys(_this.states.current).map(function(pk) {
            return _this[pk] = _this.states.current[pk];
          });
        }
      };
    })(this));
  };

  Light.prototype.stateCycle = function(stateA, stateB) {
    var i, j, l, len, len1, nextState, s, states;
    if (arguments.length) {
      for (i = j = 0, len = arguments.length; j < len; i = ++j) {
        s = arguments[i];
        if (_.isEqual(this.states[s], this.states.current)) {
          if (i === (arguments.length - 1)) {
            nextState = 0;
          } else {
            nextState = i + 1;
          }
        }
      }
      if (nextState === void 0) {
        nextState = 0;
      }
      return this.animate(arguments[nextState]);
    } else {
      states = Object.keys(this.states);
      states.splice(1, 1);
      for (i = l = 0, len1 = states.length; l < len1; i = ++l) {
        s = states[i];
        if (_.isEqual(this.states[s], this.states.current)) {
          if (i === (states.length - 1)) {
            nextState = 0;
          } else {
            nextState = i + 1;
          }
        }
      }
      return this.animate(states[nextState]);
    }
  };

  Light.define('position', {
    get: function() {
      return this.light.position;
    }
  });

  Light.define('x', {
    get: function() {
      return this.light.position.x;
    },
    set: function(x) {
      this.light.position.x = x;
      return this.light.dispatchEvent({
        type: 'change:x',
        value: this.x
      });
    }
  });

  Light.define('y', {
    get: function() {
      return this.light.position.y;
    },
    set: function(y) {
      this.light.position.y = y;
      return this.light.dispatchEvent({
        type: 'change:y',
        value: this.y
      });
    }
  });

  Light.define('z', {
    get: function() {
      return this.light.position.z;
    },
    set: function(z) {
      this.light.position.z = z;
      return this.light.dispatchEvent({
        type: 'change:z',
        value: this.z
      });
    }
  });

  Light.define('rotation', {
    get: function() {
      return this.light.rotation;
    }
  });

  Light.define('rotationX', {
    get: function() {
      return THREE.Math.radToDeg(this.light.rotation.x);
    },
    set: function(x) {
      this.light.rotation.x = THREE.Math.degToRad(x);
      return this.light.dispatchEvent({
        type: 'change:rotationX',
        value: this.rotationX
      });
    }
  });

  Light.define('rotationY', {
    get: function() {
      return THREE.Math.radToDeg(this.light.rotation.y);
    },
    set: function(y) {
      this.light.rotation.y = THREE.Math.degToRad(y);
      return this.light.dispatchEvent({
        type: 'change:rotationY',
        value: this.rotationY
      });
    }
  });

  Light.define('rotationZ', {
    get: function() {
      return THREE.Math.radToDeg(this.light.rotation.z);
    },
    set: function(z) {
      this.light.rotation.z = THREE.Math.degToRad(z);
      return this.light.dispatchEvent({
        type: 'change:rotationZ',
        value: this.rotationZ
      });
    }
  });

  Light.define('visible', {
    get: function() {
      return this.light.visible;
    },
    set: function(bool) {
      this.light.visible = bool;
      return this.light.dispatchEvent({
        type: 'change:visible',
        value: this.visible
      });
    }
  });

  Light.define('states', {
    get: function() {
      return this._states.states;
    },
    set: function(states) {
      return _.extend(this.states, states);
    }
  });

  Light.define('color', {
    get: function() {
      return this.light.color;
    },
    set: function(color) {
      this.light.color = new THREE.Color(color);
      return this.light.dispatchEvent({
        type: 'change:color',
        value: this.color
      });
    }
  });

  Light.define('intensity', {
    get: function() {
      return this.light.intensity;
    },
    set: function(intensity) {
      this.light.intensity = intensity;
      return this.light.dispatchEvent({
        type: 'change:intensity',
        value: this.intensity
      });
    }
  });

  Light.define('angle', {
    get: function() {
      return this.light.angle;
    },
    set: function(angle) {
      this.light.angle = angle;
      return this.light.dispatchEvent({
        type: 'change:angle',
        value: this.angle
      });
    }
  });

  Light.define('castShadow', {
    get: function() {
      return this.light.castShadow;
    },
    set: function(bool) {
      this.light.castShadow = bool;
      return this.light.dispatchEvent({
        type: 'change:castShadow',
        value: this.castShadow
      });
    }
  });

  Light.define('decay', {
    get: function() {
      return this.light.decay;
    },
    set: function(decay) {
      this.light.decay = decay;
      return this.light.dispatchEvent({
        type: 'change:decay',
        value: this.decay
      });
    }
  });

  Light.define('distance', {
    get: function() {
      return this.light.distance;
    },
    set: function(distance) {
      this.light.distance = distance;
      return this.light.dispatchEvent({
        type: 'change:distance',
        value: this.distance
      });
    }
  });

  Light.define('penumbra', {
    get: function() {
      return this.light.penumbra;
    },
    set: function(penumbra) {
      this.light.penumbra = penumbra;
      return this.light.dispatchEvent({
        type: 'change:penumbra',
        value: this.penumbra
      });
    }
  });

  Light.define('power', {
    get: function() {
      return this.light.power;
    },
    set: function(power) {
      this.light.power = power;
      return this.light.dispatchEvent({
        type: 'change:power',
        value: this.power
      });
    }
  });

  Light.define('shadow', {
    get: function() {
      return this.light.shadow;
    },
    set: function(shadow) {
      return this.light.shadow = shadow;
    }
  });

  Light.define('target', {
    get: function() {
      return this.light.target;
    },
    set: function(target) {
      this.light.target = target;
      return this.light.dispatchEvent({
        type: 'change:target',
        value: this.target
      });
    }
  });

  Light.define('width', {
    get: function() {
      return this.light.width;
    },
    set: function(width) {
      this.light.width = width;
      return this.light.dispatchEvent({
        type: 'change:width',
        value: this.width
      });
    }
  });

  Light.define('height', {
    get: function() {
      return this.light.height;
    },
    set: function(height) {
      this.light.height = height;
      return this.light.dispatchEvent({
        type: 'change:height',
        value: this.height
      });
    }
  });

  Light.define('groundColor', {
    get: function() {
      return this.light.groundColor;
    },
    set: function(groundColor) {
      this.light.groundColor = new THREE.Color(groundColor);
      return this.light.dispatchEvent({
        type: 'change:groundColor',
        value: this.groundColor
      });
    }
  });

  Light.define('skyColor', {
    get: function() {
      return this.light.skyColor;
    },
    set: function(skyColor) {
      this.light.skyColor = new THREE.Color(skyColor);
      return this.light.dispatchEvent({
        type: 'change:skyColor',
        value: this.skyColor
      });
    }
  });

  return Light;

})(BaseClass);


},{"./_Animation.coffee":"framer-form/form/_Animation","./_BaseClass.coffee":"framer-form/form/_BaseClass","./_States.coffee":"framer-form/form/_States"}],"framer-form/form/Mesh":[function(require,module,exports){
var _,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

exports.Mesh = (function(superClass) {
  extend(Mesh, superClass);

  Mesh.define = function(propertyName, descriptor) {
    if (descriptor.readonly) {
      descriptor.set = function(value) {
        throw Error(this.constructor.name + "." + propertyName + " is readonly");
      };
    }
    return Object.defineProperty(this.prototype, propertyName, descriptor);
  };

  function Mesh(properties) {
    if (properties == null) {
      properties = {};
    }
    Mesh.__super__.constructor.call(this, properties.geometry, properties.material);
    _.defaults(properties, {
      castShadow: true,
      receiveShadow: true
    });
    this.setupShadowSettings(properties);
    if (properties.parent) {
      this.addToRenderingInstance(properties.parent);
    }
    this.setScale(properties.scale, properties.scaleX, properties.scaleY, properties.scaleZ);
    this.setPosition([properties.x, properties.y, properties.z]);
    this.setRotation([properties.rotationX, properties.rotationY, properties.rotationZ]);
  }

  Mesh.prototype.setupShadowSettings = function(properties) {
    this.castShadow = properties.castShadow;
    return this.receiveShadow = properties.receiveShadow;
  };

  Mesh.prototype.addToRenderingInstance = function(parent) {
    if (parent.scene) {
      return parent.scene.add(this);
    } else {
      return parent.add(this);
    }
  };

  Mesh.prototype.setScale = function(uniformScale, scaleX, scaleY, scaleZ) {
    if (uniformScale) {
      return this.scale = uniformScale || 1;
    } else {
      this.scaleX = scaleX || 1;
      this.scaleY = scaleY || 1;
      return this.scaleZ = scaleZ || 1;
    }
  };

  Mesh.prototype.setPosition = function(position) {
    this.x = position[0] || 0;
    this.y = position[1] || 0;
    return this.z = position[2] || 0;
  };

  Mesh.prototype.setRotation = function(rotation) {
    this.rotationX = rotation[0] || 0;
    this.rotationY = rotation[1] || 0;
    return this.rotationZ = rotation[2] || 0;
  };

  Mesh.define('scale', {
    get: function() {
      return this.scale.x;
    },
    set: function(scale) {
      return this.scale.set(scale, scale, scale);
    }
  });

  Mesh.define('scaleX', {
    get: function() {
      return this.scale.x;
    },
    set: function(scale) {
      return this.scale.set(scale, this.scale.y, this.scale.z);
    }
  });

  Mesh.define('scaleY', {
    get: function() {
      return this.scale.y;
    },
    set: function(scale) {
      return this.scale.set(this.scale.x, scale, this.scale.z);
    }
  });

  Mesh.define('scaleZ', {
    get: function() {
      return this.scale.z;
    },
    set: function(scale) {
      return this.scale.set(this.scale.x, this.scale.y, scale);
    }
  });

  Mesh.define('x', {
    get: function() {
      return this.position.x;
    },
    set: function(x) {
      return this.position.x = x;
    }
  });

  Mesh.define('y', {
    get: function() {
      return this.position.y;
    },
    set: function(y) {
      return this.position.y = y;
    }
  });

  Mesh.define('z', {
    get: function() {
      return this.position.z;
    },
    set: function(z) {
      return this.position.z = z;
    }
  });

  Mesh.define('rotationX', {
    get: function() {
      return THREE.Math.radToDeg(this.rotation.x);
    },
    set: function(x) {
      return this.rotation.x = THREE.Math.degToRad(x);
    }
  });

  Mesh.define('rotationY', {
    get: function() {
      return THREE.Math.radToDeg(this.rotation.y);
    },
    set: function(y) {
      return this.rotation.y = THREE.Math.degToRad(y);
    }
  });

  Mesh.define('rotationZ', {
    get: function() {
      return THREE.Math.radToDeg(this.rotation.z);
    },
    set: function(z) {
      return this.rotation.z = THREE.Math.degToRad(z);
    }
  });

  return Mesh;

})(THREE.Mesh);


},{}],"framer-form/form/Model":[function(require,module,exports){
var Animation, BaseClass, Collada, FBX, GLTF, JSONObject, OBJ, States, TDS, _,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

BaseClass = require('./_BaseClass.coffee').BaseClass;

Animation = require('./_Animation.coffee').Animation;

States = require('./_States.coffee').States;

OBJ = require('./loaders/OBJ.coffee').OBJ;

FBX = require('./loaders/FBX.coffee').FBX;

GLTF = require('./loaders/GLTF.coffee').GLTF;

Collada = require('./loaders/Collada.coffee').Collada;

JSONObject = require('./loaders/JSONObject.coffee').JSONObject;

TDS = require('./loaders/TDS.coffee').TDS;

exports.Model = (function(superClass) {
  extend(Model, superClass);

  function Model(properties) {
    if (properties == null) {
      properties = {};
    }
    this.updateMixer = bind(this.updateMixer, this);
    Model.__super__.constructor.call(this);
    _.defaults(properties, {
      animate: true,
      castShadow: true,
      receiveShadow: true,
      reposition: true
    });
    this.textureLoader = new THREE.TextureLoader();
    switch (this.getExtension(properties.path)) {
      case 'obj':
        new OBJ(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
        break;
      case 'fbx':
        new FBX(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
        break;
      case 'gltf' || 'glb':
        new GLTF(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
        break;
      case 'dae':
        new Collada(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
        break;
      case 'json':
        new JSONObject(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
        break;
      case '3DS' || '3ds':
        new TDS(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
    }
  }

  Model.prototype.getExtension = function(path) {
    return path.split('.').pop();
  };

  Model.prototype.setupModel = function(properties) {
    if (properties.reposition) {
      this.repositionMesh();
    }
    this.pivot = new THREE.Group;
    this.pivot.add(this.mesh);
    this.saveInitialProperties();
    if (properties.material) {
      this.applyMaterial(properties.material);
    }
    this.setupShadowSettings(properties);
    if (properties.smoothShading) {
      this.mesh.traverse(function(c) {
        if (c instanceof THREE.Mesh) {
          return c.material.shading = THREE.SmoothShading;
        }
      });
    }
    if (properties.animate && this.mesh.animations && this.mesh.animations[0]) {
      this.handleAnimations(properties);
    }
    if (properties.parent) {
      this.addToRenderingInstance(properties.parent);
    }
    this.setScale(properties.scale, properties.scaleX, properties.scaleY, properties.scaleZ);
    this.setPosition([properties.x, properties.y, properties.z]);
    this.setRotation([properties.rotationX, properties.rotationY, properties.rotationZ]);
    this.setMid({
      midX: properties.midX,
      midY: properties.midY,
      midZ: properties.midZ
    });
    if (properties.visible) {
      this.visible = properties.visible;
    }
    this._states = new States(this);
    if (properties.onLoad) {
      if (properties.map) {
        return this.textureLoader.load(properties.map, (function(_this) {
          return function(map) {
            _this.mesh.material.map = map;
            _this.mesh.material.needsUpdate = true;
            return properties.onLoad(_this);
          };
        })(this));
      } else {
        return properties.onLoad(this);
      }
    } else if (properties.map) {
      return this.applyTextureMap(properties.map);
    }
  };

  Model.prototype.repositionMesh = function() {
    this.boundingBox = new THREE.Box3().setFromObject(this.mesh);
    this.offset = this.boundingBox.getCenter(this.mesh.position);
    return this.mesh.position.multiplyScalar(-1);
  };

  Model.prototype.saveInitialProperties = function() {
    return this.initialProperties = this;
  };

  Model.prototype.applyMaterial = function(material) {
    return this.mesh.traverse(function(c) {
      if (c instanceof THREE.Mesh) {
        return c.material = material;
      }
    });
  };

  Model.prototype.applyTextureMap = function(path) {
    return this.textureLoader.load(path, (function(_this) {
      return function(map) {
        _this.mesh.material.map = map;
        return _this.mesh.material.needsUpdate = true;
      };
    })(this));
  };

  Model.prototype.setupShadowSettings = function(properties) {
    return this.mesh.traverse(function(c) {
      if (c instanceof THREE.Mesh) {
        c.castShadow = properties.castShadow;
        return c.receiveShadow = properties.receiveShadow;
      }
    });
  };

  Model.prototype.addToRenderingInstance = function(parent) {
    if (parent.scene) {
      return parent.scene.add(this.pivot);
    } else {
      return parent.add(this.pivot);
    }
  };

  Model.prototype.handleAnimations = function(properties) {
    if (_.isNumber(properties.animationClip)) {
      this.animationIndex = properties.animationClip - 1;
    } else {
      this.animationIndex = 0;
    }
    this.clock = new THREE.Clock;
    this.mesh.mixer = new THREE.AnimationMixer(this.mesh);
    this.action = this.mesh.mixer.clipAction(this.mesh.animations[this.animationIndex]);
    this.action.play();
    this.updateMixer();
    return Framer.CurrentContext.on('reset', (function(_this) {
      return function() {
        return cancelAnimationFrame(_this.mixerRequestId);
      };
    })(this));
  };

  Model.prototype.updateMixer = function() {
    this.mixerRequestId = requestAnimationFrame(this.updateMixer);
    return this.mesh.mixer.update(this.clock.getDelta());
  };

  Model.prototype.on = function(eventName, cb) {
    var callback;
    if (eventName.includes('change')) {
      callback = function(e) {
        return cb(e.value);
      };
      this.pivot.addEventListener(eventName, callback);
      return Framer.CurrentContext.on('reset', (function(_this) {
        return function() {
          return _this.pivot.removeEventListener(eventName, callback);
        };
      })(this));
    } else {
      return this.mesh.traverse(function(c) {
        if (c instanceof THREE.Mesh) {
          callback = function() {
            return cb();
          };
          c.addEventListener(eventName, callback);
          return Framer.CurrentContext.on('reset', (function(_this) {
            return function() {
              return c.removeEventListener(eventName, callback);
            };
          })(this));
        }
      });
    }
  };

  Model.prototype.setScale = function(uniformScale, scaleX, scaleY, scaleZ) {
    if (uniformScale) {
      return this.scale = uniformScale || 1;
    } else {
      this.scaleX = scaleX || 1;
      this.scaleY = scaleY || 1;
      return this.scaleZ = scaleZ || 1;
    }
  };

  Model.prototype.setPosition = function(position) {
    this.x = position[0] || 0;
    this.y = position[1] || 0;
    return this.z = position[2] || 0;
  };

  Model.prototype.setRotation = function(rotation) {
    this.rotationX = rotation[0] || 0;
    this.rotationY = rotation[1] || 0;
    return this.rotationZ = rotation[2] || 0;
  };

  Model.prototype.setMid = function(mid) {
    return Object.keys(mid).map((function(_this) {
      return function(k) {
        if (mid[k]) {
          return _this[k] = mid[k];
        }
      };
    })(this));
  };

  Model.prototype.animate = function(properties) {
    return new Animation(this, properties);
  };

  Model.prototype.lookAt = function(a, b, c) {
    if (arguments.length === 1) {
      return this.pivot.lookAt(a);
    } else if (arguments.length === 3) {
      return this.pivot.lookAt(a, b, c);
    }
  };

  Model.prototype.stateSwitch = function(state) {
    return Object.keys(this.states).map((function(_this) {
      return function(k) {
        if (k === state) {
          _this.states.current = _this.states[k];
          return Object.keys(_this.states.current).map(function(pk) {
            return _this[pk] = _this.states.current[pk];
          });
        }
      };
    })(this));
  };

  Model.prototype.stateCycle = function() {
    var i, j, l, len, len1, nextState, s, states;
    if (arguments.length) {
      for (i = j = 0, len = arguments.length; j < len; i = ++j) {
        s = arguments[i];
        if (_.isEqual(this.states[s], this.states.current)) {
          if (i === (arguments.length - 1)) {
            nextState = 0;
          } else {
            nextState = i + 1;
          }
        }
      }
      if (nextState === void 0) {
        nextState = 0;
      }
      return this.animate(arguments[nextState]);
    } else {
      states = Object.keys(this.states);
      states.splice(1, 1);
      for (i = l = 0, len1 = states.length; l < len1; i = ++l) {
        s = states[i];
        if (_.isEqual(this.states[s], this.states.current)) {
          if (i === (states.length - 1)) {
            nextState = 0;
          } else {
            nextState = i + 1;
          }
        }
      }
      return this.animate(states[nextState]);
    }
  };

  Model.define('scale', {
    get: function() {
      return this.pivot.scale.x;
    },
    set: function(scale) {
      this.pivot.scale.set(scale, scale, scale);
      return this.pivot.dispatchEvent({
        type: 'change:scale',
        value: this.scale
      });
    }
  });

  Model.define('scaleX', {
    get: function() {
      return this.pivot.scale.x;
    },
    set: function(scale) {
      this.pivot.scale.set(scale, this.pivot.scale.y, this.pivot.scale.z);
      return this.pivot.dispatchEvent({
        type: 'change:scaleX',
        value: this.scaleX
      });
    }
  });

  Model.define('scaleY', {
    get: function() {
      return this.pivot.scale.y;
    },
    set: function(scale) {
      this.pivot.scale.set(this.pivot.scale.x, scale, this.pivot.scale.z);
      return this.pivot.dispatchEvent({
        type: 'change:scaleY',
        value: this.scaleY
      });
    }
  });

  Model.define('scaleZ', {
    get: function() {
      return this.pivot.scale.z;
    },
    set: function(scale) {
      this.pivot.scale.set(this.pivot.scale.x, this.pivot.scale.y, scale);
      return this.pivot.dispatchEvent({
        type: 'change:scaleZ',
        value: this.scaleZ
      });
    }
  });

  Model.define('position', {
    get: function() {
      return this.pivot.position;
    }
  });

  Model.define('x', {
    get: function() {
      return this.pivot.position.x;
    },
    set: function(x) {
      this.pivot.position.x = x;
      return this.pivot.dispatchEvent({
        type: 'change:x',
        value: this.x
      });
    }
  });

  Model.define('y', {
    get: function() {
      return this.pivot.position.y;
    },
    set: function(y) {
      this.pivot.position.y = y;
      return this.pivot.dispatchEvent({
        type: 'change:y',
        value: this.y
      });
    }
  });

  Model.define('z', {
    get: function() {
      return this.pivot.position.z;
    },
    set: function(z) {
      this.pivot.position.z = z;
      return this.pivot.dispatchEvent({
        type: 'change:z',
        value: this.z
      });
    }
  });

  Model.define('rotation', {
    get: function() {
      return this.pivot.rotation;
    }
  });

  Model.define('rotationX', {
    get: function() {
      return THREE.Math.radToDeg(this.pivot.rotation.x);
    },
    set: function(x) {
      this.pivot.rotation.x = THREE.Math.degToRad(x);
      return this.pivot.dispatchEvent({
        type: 'change:rotationX',
        value: this.rotationX
      });
    }
  });

  Model.define('rotationY', {
    get: function() {
      return THREE.Math.radToDeg(this.pivot.rotation.y);
    },
    set: function(y) {
      this.pivot.rotation.y = THREE.Math.degToRad(y);
      return this.pivot.dispatchEvent({
        type: 'change:rotationY',
        value: this.rotationY
      });
    }
  });

  Model.define('rotationZ', {
    get: function() {
      return THREE.Math.radToDeg(this.pivot.rotation.z);
    },
    set: function(z) {
      this.pivot.rotation.z = THREE.Math.degToRad(z);
      return this.pivot.dispatchEvent({
        type: 'change:rotationZ',
        value: this.rotationZ
      });
    }
  });

  Model.define('midX', {
    set: function(midX) {
      return this.mesh.position.x = -midX;
    }
  });

  Model.define('midY', {
    set: function(midY) {
      return this.mesh.position.y = -midY;
    }
  });

  Model.define('midZ', {
    set: function(midZ) {
      return this.mesh.position.z = -midZ;
    }
  });

  Model.define('parent', {
    get: function() {
      return this.pivot.parent;
    },
    set: function(parent) {
      this.pivot.parent = parent;
      return this.pivot.dispatchEvent({
        type: 'change:parent',
        value: this.parent
      });
    }
  });

  Model.define('visible', {
    get: function() {
      return this.pivot.visible;
    },
    set: function(bool) {
      this.pivot.visible = bool;
      return this.pivot.dispatchEvent({
        type: 'change:visible',
        value: this.visible
      });
    }
  });

  Model.define('children', {
    get: function() {
      return this.pivot.children;
    }
  });

  Model.define('size', {
    get: function() {
      return {
        height: this.boundingBox.max.y - this.boundingBox.min.y,
        width: this.boundingBox.max.x - this.boundingBox.min.x,
        depth: this.boundingBox.max.z - this.boundingBox.min.z
      };
    }
  });

  Model.define('states', {
    get: function() {
      return this._states.states;
    },
    set: function(states) {
      return _.extend(this.states, states);
    }
  });

  Model.define('animationClip', {
    get: function() {
      return this.animationIndex + 1;
    },
    set: function(animation) {
      if (this.mesh.animations[animation - 1]) {
        this.animationIndex = animation - 1;
        this.action = this.mesh.mixer.clipAction(this.mesh.animations[this.animationIndex]);
        return this.action.play();
      }
    }
  });

  Model.define('map', {
    get: function() {
      return this.mesh.material.map;
    },
    set: function(path) {
      return this.applyTextureMap(path);
    }
  });

  return Model;

})(BaseClass);


},{"./_Animation.coffee":"framer-form/form/_Animation","./_BaseClass.coffee":"framer-form/form/_BaseClass","./_States.coffee":"framer-form/form/_States","./loaders/Collada.coffee":"framer-form/form/loaders/Collada","./loaders/FBX.coffee":"framer-form/form/loaders/FBX","./loaders/GLTF.coffee":"framer-form/form/loaders/GLTF","./loaders/JSONObject.coffee":"framer-form/form/loaders/JSONObject","./loaders/OBJ.coffee":"framer-form/form/loaders/OBJ","./loaders/TDS.coffee":"framer-form/form/loaders/TDS"}],"framer-form/form/ParticleSystem":[function(require,module,exports){
var Animation, BaseClass, States, _,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

require('./lib/GPUParticleSystem.js');

_ = Framer._;

BaseClass = require('./_BaseClass.coffee').BaseClass;

Animation = require('./_Animation.coffee').Animation;

States = require('./_States.coffee').States;

exports.ParticleSystem = (function(superClass) {
  extend(ParticleSystem, superClass);

  function ParticleSystem(properties) {
    if (properties == null) {
      properties = {};
    }
    this.loop = bind(this.loop, this);
    ParticleSystem.__super__.constructor.call(this);
    _.defaults(properties, {
      position: new THREE.Vector3(),
      positionRandomness: .3,
      velocity: new THREE.Vector3(),
      velocityRandomness: .5,
      color: 0xaa88ff,
      colorRandomness: .2,
      turbulence: .5,
      lifetime: 2,
      size: 5,
      sizeRandomness: 1,
      spawnRate: 15000,
      horizontalSpeed: 1.5,
      verticalSpeed: 1.33,
      timeScale: 1,
      particleNoiseTexture: './modules/form/lib/textures/perlin-512.png',
      particleSpriteTexture: './modules/form/lib/textures/particle2.png'
    });
    this.properties = properties;
    this.clock = new THREE.Clock;
    this.tick = 0;
    this.textureLoader = new THREE.TextureLoader();
    this.particleSystem = new THREE.GPUParticleSystem({
      maxParticles: 250000,
      particleNoiseTex: this.textureLoader.load(properties.particleNoiseTexture),
      particleSpriteTex: this.textureLoader.load(properties.particleSpriteTexture)
    });
    this.addToRenderingInstance(properties.parent);
    Framer.CurrentContext.on('reset', (function(_this) {
      return function() {
        return cancelAnimationFrame(_this.animationLoopRequestId);
      };
    })(this));
    this.animationLoopRequestId = requestAnimationFrame(this.loop);
  }

  ParticleSystem.prototype.addToRenderingInstance = function(parent) {
    if (parent.scene) {
      return parent.scene.add(this.particleSystem);
    } else {
      return parent.add(this.particleSystem);
    }
  };

  ParticleSystem.prototype.loop = function() {
    var delta, i, ref;
    this.animationLoopRequestId = requestAnimationFrame(this.loop);
    delta = this.clock.getDelta() * this.properties.timeScale;
    this.tick += delta;
    if (this.tick < 0) {
      this.tick = 0;
    }
    if (delta > 0) {
      this.properties.position.x = Math.sin(this.tick * this.properties.horizontalSpeed) * 20;
      this.properties.position.y = Math.sin(this.tick * this.properties.verticalSpeed) * 10;
      this.properties.position.z = Math.sin(this.tick * this.properties.horizontalSpeed + this.properties.verticalSpeed) * 5;
      for (i = 0, ref = this.properties.spawnRate * delta; 0 <= ref ? i <= ref : i >= ref; 0 <= ref ? i++ : i--) {
        this.particleSystem.spawnParticle({
          position: this.properties.position,
          positionRandomness: this.properties.positionRandomness,
          velocity: this.properties.velocity,
          velocityRandomness: this.properties.velocityRandomness,
          color: this.properties.color,
          colorRandomness: this.properties.colorRandomness,
          turbulence: this.properties.turbulence,
          lifetime: this.properties.lifetime,
          size: this.properties.size,
          sizeRandomness: this.properties.sizeRandomness
        });
      }
    }
    return this.particleSystem.update(this.tick);
  };

  return ParticleSystem;

})(BaseClass);


},{"./_Animation.coffee":"framer-form/form/_Animation","./_BaseClass.coffee":"framer-form/form/_BaseClass","./_States.coffee":"framer-form/form/_States","./lib/GPUParticleSystem.js":"framer-form/form/lib/GPUParticleSystem"}],"framer-form/form/Scene":[function(require,module,exports){
var Camera, _,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

Camera = require('./_Camera.coffee').Camera;

exports.Scene = (function(superClass) {
  extend(Scene, superClass);

  function Scene(properties) {
    var cameraProps;
    if (properties == null) {
      properties = {};
    }
    this.onWindowResize = bind(this.onWindowResize, this);
    this.handleRaycaster = bind(this.handleRaycaster, this);
    this.loop = bind(this.loop, this);
    Scene.__super__.constructor.call(this, _.defaults(properties, {
      backgroundColor: '#000'
    }));
    this.renderer = new THREE.WebGLRenderer({
      antialias: true,
      alpha: true
    });
    this._element.appendChild(this.renderer.domElement);
    this.renderer.setSize(this.width, this.height);
    this.renderer.setPixelRatio(window.devicePixelRatio);
    this.renderer.domElement.style.width = '100%';
    this.renderer.domElement.style.height = '100%';
    this.renderer.shadowMap.enabled = true;
    this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    this.scene = new THREE.Scene;
    cameraProps = _.defaults(properties.camera, {
      aspect: this.width / this.height
    });
    this.camera = new Camera(cameraProps, this._element);
    Canvas.onResize(this.onWindowResize);
    this.raycaster = new THREE.Raycaster;
    this.mouse = new THREE.Vector2;
    this.intersected = null;
    this.intersectedEventEmitted = false;
    this.mousedown = false;
    this.on('mousemove', (function(_this) {
      return function(e) {
        _this.mouse.x = (e.clientX / _this.width) * 2 - 1;
        return _this.mouse.y = -(e.clientY / _this.height) * 2 + 1;
      };
    })(this));
    this.on('mousedown', (function(_this) {
      return function(e) {
        _this.mousedown = true;
        if (_this.intersected) {
          _this.intersected.object.dispatchEvent({
            type: 'mousedown'
          });
          _this.intersected.object.dispatchEvent({
            type: 'onmousedown'
          });
          _this.intersected.object.dispatchEvent({
            type: 'click'
          });
          return _this.intersected.object.dispatchEvent({
            type: 'onclick'
          });
        }
      };
    })(this));
    this.on('mouseup', (function(_this) {
      return function(e) {
        _this.mousedown = false;
        if (_this.intersected) {
          _this.intersected.object.dispatchEvent({
            type: 'mouseup'
          });
          return _this.intersected.object.dispatchEvent({
            type: 'onmouseup'
          });
        }
      };
    })(this));
    this.loop();
    Framer.CurrentContext.on('reset', (function(_this) {
      return function() {
        return cancelAnimationFrame(_this.animationLoopRequestId);
      };
    })(this));
  }

  Scene.prototype.loop = function() {
    this.animationLoopRequestId = requestAnimationFrame(this.loop);
    if (this.animationLoop) {
      this.animationLoop();
    }
    if (this.camera.controls) {
      this.camera.controls.update();
    }
    this.handleRaycaster();
    return this.renderer.render(this.scene, this.camera.nativeCamera);
  };

  Scene.prototype.handleRaycaster = function() {
    var intersects;
    this.raycaster.setFromCamera(this.mouse, this.camera.nativeCamera);
    intersects = this.raycaster.intersectObjects(this.scene.children, true);
    if (intersects.length && this.intersected !== intersects[0]) {
      this.intersected = intersects[0];
    }
    if (this.intersected && !intersects.length) {
      this.intersected.object.dispatchEvent({
        type: 'mouseout'
      });
      this.intersected.object.dispatchEvent({
        type: 'onmouseout'
      });
    }
    if (!intersects.length) {
      this.intersected = null;
      this.intersectedEventEmitted = false;
    }
    if (!this.intersectedEventEmitted && this.intersected) {
      this.intersected.object.dispatchEvent({
        type: 'mouseover'
      });
      this.intersected.object.dispatchEvent({
        type: 'onmouseover'
      });
      return this.intersectedEventEmitted = true;
    }
  };

  Scene.prototype.onWindowResize = function(e) {
    this.camera.aspect = this.width / this.height;
    this.camera.nativeCamera.updateProjectionMatrix();
    return this.renderer.setSize(this.width, this.height);
  };

  return Scene;

})(Layer);


},{"./_Camera.coffee":"framer-form/form/_Camera"}],"framer-form/form/Studio":[function(require,module,exports){
var Scene, _,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

Scene = require('./Scene.coffee').Scene;

exports.Studio = (function(superClass) {
  extend(Studio, superClass);

  function Studio(properties) {
    if (properties == null) {
      properties = {};
    }
    _.defaults(properties, {
      camera: {
        y: 220,
        rotationX: -15
      }
    });
    Studio.__super__.constructor.call(this, properties);
    this.scene.background = new THREE.Color(0x9181a0);
    this.scene.fog = new THREE.Fog(0x9181a0, 400, 1000);
    this.hlight = new THREE.HemisphereLight(0xffffff, 0x444444);
    this.hlight.position.y = 200;
    this.scene.add(this.hlight);
    this.light = new THREE.PointLight(0xffffff, .1);
    this.light.position.set(0, 800, 0);
    this.light.castShadow = true;
    this.light.shadow.camera.near = 100;
    this.light.shadow.camera.far = 1000;
    this.light.shadow.bias = .0001;
    this.light.shadow.radius = 5;
    this.light.shadow.mapSize.width = 1024;
    this.light.shadow.mapSize.height = 1024;
    this.scene.add(this.light);
    this.light2 = new THREE.DirectionalLight(0xff9999, .3);
    this.light2.position.set(-100, 200, -300);
    this.scene.add(this.light2);
    this.light3 = new THREE.DirectionalLight(0x6666ff, .2);
    this.light3.position.set(100, 200, -300);
    this.scene.add(this.light3);
    this.light4 = new THREE.DirectionalLight(0xff9999, .3);
    this.light4.position.set(-100, 200, 300);
    this.scene.add(this.light4);
    this.light5 = new THREE.DirectionalLight(0x6666ff, .2);
    this.light5.position.set(100, 200, 300);
    this.scene.add(this.light5);
    this.floorGeo = new THREE.CircleGeometry(800, 100);
    this.floorMat = new THREE.MeshStandardMaterial({
      roughness: .6,
      color: 0xaaaaaa,
      metalness: 0.2,
      bumpScale: 0.0005
    });
    this.floor = new THREE.Mesh(this.floorGeo, this.floorMat);
    this.floor.rotation.x = -Math.PI / 2;
    this.floor.receiveShadow = true;
    this.scene.add(this.floor);

    /*
    @grid = new THREE.GridHelper 2000, 20, 0x000000, 0x000000
    @grid.material.opacity = .2
    @grid.material.transparent = true
    @scene.add @grid
     */
  }

  return Studio;

})(Scene);


},{"./Scene.coffee":"framer-form/form/Scene"}],"framer-form/form/_Animation":[function(require,module,exports){
var _,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

exports.Animation = (function(superClass) {
  extend(Animation, superClass);

  function Animation(model, properties) {
    var stateName;
    if (properties == null) {
      properties = {};
    }
    this.animationLoop = bind(this.animationLoop, this);
    Animation.__super__.constructor.call(this);
    if (!properties) {
      throw Error('Please specify properties or a state to animate!');
    }
    if (_.isString(properties)) {
      stateName = properties;
      Object.keys(model.states).map((function(_this) {
        return function(k) {
          if (k === stateName) {
            model.states.current = model.states[k];
            return properties = model.states[stateName];
          }
        };
      })(this));
    }
    this.properties = this.filterProperties(properties);
    this.options = _.defaults(properties.options, {
      time: 1,
      delay: 0,
      curve: 'linear'
    });
    Utils.delay(this.options.delay, (function(_this) {
      return function() {
        _this.model = model;
        _this.mesh = model.mesh || model.light || model.nativeCamera;
        _this.fps = 60;
        _this.time = _this.options.time;
        _this.renderedFrames = 0;
        _this.totalFrames = _this.time * _this.fps;
        _this.modelPropertyInitialValues = {};
        _this.deltas = _this.calculateDeltas();
        if (_this.deltas.length) {
          _this.intervalDisposer = setInterval(function() {
            if (_this.renderedFrames >= _this.totalFrames) {
              return _this.disposeInterval;
            }
            requestAnimationFrame(_this.animationLoop);
            return _this.renderedFrames++;
          }, 1000 / _this.fps);
        }
        return Framer.CurrentContext.on('reset', function() {
          if (_this.intervalDisposer) {
            return clearInterval(_this.intervalDisposer);
          }
        });
      };
    })(this));
  }

  Animation.prototype.filterProperties = function(properties) {
    var props;
    props = Object.assign({}, properties);
    delete props.options;
    return props;
  };

  Animation.prototype.calculateDeltas = function() {
    var deltas;
    deltas = Object.keys(this.properties).map((function(_this) {
      return function(k) {
        var newObj;
        _this.modelPropertyInitialValues[k] = _this.model[k];
        newObj = {};
        if (_this.model[k] > _this.properties[k]) {
          newObj[k] = -Math.abs(_this.model[k] - _this.properties[k]);
        } else if (_this.model[k] < _this.properties[k]) {
          newObj[k] = Math.abs(_this.model[k] - _this.properties[k]);
        } else {
          null;
        }
        return newObj;
      };
    })(this));
    return deltas.filter(function(d) {
      return d;
    });
  };

  Animation.prototype.applyEasing = function(t, b, c, d) {
    if (this.options.curve.includes('ease')) {
      return this[this.options.curve](t, b, c, d);
    } else {
      return this.linear(t, b, c, d);
    }
  };

  Animation.prototype.animationLoop = function() {
    var delta, deltaValue, easedValue, i, j, len, prop, ref, results;
    ref = this.deltas;
    results = [];
    for (i = j = 0, len = ref.length; j < len; i = ++j) {
      delta = ref[i];
      prop = Object.keys(delta)[0];
      deltaValue = Object.values(delta)[0];
      easedValue = this.applyEasing(this.renderedFrames, this.modelPropertyInitialValues[prop], deltaValue, this.totalFrames);
      results.push(this.model[prop] = easedValue);
    }
    return results;
  };

  Animation.prototype.disposeInterval = function() {
    return clearInterval(this.intervalDisposer);
  };

  Animation.prototype.linear = function(t, b, c, d) {
    return c * t / d + b;
  };

  Animation.prototype.easeInQuad = function(t, b, c, d) {
    return c * (t /= d) * t + b;
  };

  Animation.prototype.easeOutQuad = function(t, b, c, d) {
    return -c * (t /= d) * (t - 2) + b;
  };

  Animation.prototype.easeInOutQuad = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return c / 2 * t * t + b;
    } else {
      return -c / 2 * ((--t) * (t - 2) - 1) + b;
    }
  };

  Animation.prototype.easeInCubic = function(t, b, c, d) {
    return c * (t /= d) * t * t + b;
  };

  Animation.prototype.easeOutCubic = function(t, b, c, d) {
    return c * ((t = t / d - 1) * t * t + 1) + b;
  };

  Animation.prototype.easeInOutCubic = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return c / 2 * t * t * t + b;
    } else {
      return c / 2 * ((t -= 2) * t * t + 2) + b;
    }
  };

  Animation.prototype.easeInQuart = function(t, b, c, d) {
    return c * (t /= d) * t * t * t + b;
  };

  Animation.prototype.easeOutQuart = function(t, b, c, d) {
    return -c * ((t = t / d - 1) * t * t * t - 1) + b;
  };

  Animation.prototype.easeInOutQuart = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return c / 2 * t * t * t * t + b;
    } else {
      return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
    }
  };

  Animation.prototype.easeInQuint = function(t, b, c, d) {
    return c * (t /= d) * t * t * t * t + b;
  };

  Animation.prototype.easeOutQuint = function(t, b, c, d) {
    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
  };

  Animation.prototype.easeInOutQuint = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return c / 2 * t * t * t * t * t + b;
    } else {
      return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
    }
  };

  Animation.prototype.easeInSine = function(t, b, c, d) {
    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
  };

  Animation.prototype.easeOutSine = function(t, b, c, d) {
    return c * Math.sin(t / d * (Math.PI / 2)) + b;
  };

  Animation.prototype.easeInOutSine = function(t, b, c, d) {
    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
  };

  Animation.prototype.easeInExpo = function(t, b, c, d) {
    var ref;
    return (ref = t === 0) != null ? ref : {
      b: c * Math.pow(2, 10 * (t / d - 1)) + b
    };
  };

  Animation.prototype.easeOutExpo = function(t, b, c, d) {
    var ref;
    return (ref = t === d) != null ? ref : b + {
      c: c * (-Math.pow(2, -10 * t / d) + 1) + b
    };
  };

  Animation.prototype.easeInOutExpo = function(t, b, c, d) {
    if (t === 0) {
      b;
    }
    if (t === d) {
      b + c;
    }
    if ((t /= d / 2) < 1) {
      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
    } else {
      return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
    }
  };

  Animation.prototype.easeInCirc = function(t, b, c, d) {
    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
  };

  Animation.prototype.easeOutCirc = function(t, b, c, d) {
    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
  };

  Animation.prototype.easeInOutCirc = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
    } else {
      return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
    }
  };

  Animation.prototype.easeInElastic = function(t, b, c, d) {
    var a, p, s;
    s = 1.70158;
    p = 0;
    a = c;
    if (t === 0) {
      b;
    }
    if ((t /= d) === 1) {
      b + c;
    }
    if (!p) {
      p = d * .3;
    }
    if (a < Math.abs(c)) {
      a = c;
      s = p / 4;
    } else {
      s = p / (2 * Math.PI) * Math.asin(c / a);
    }
    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
  };

  Animation.prototype.easeOutElastic = function(t, b, c, d) {
    var a, p, s;
    s = 1.70158;
    p = 0;
    a = c;
    if (t === 0) {
      b;
    }
    if ((t /= d) === 1) {
      b + c;
    }
    if (!p) {
      p = d * .3;
    }
    if (a < Math.abs(c)) {
      a = c;
      s = p / 4;
    } else {
      s = p / (2 * Math.PI) * Math.asin(c / a);
    }
    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;
  };

  Animation.prototype.easeInOutElastic = function(t, b, c, d) {
    var a, p, s;
    s = 1.70158;
    p = 0;
    a = c;
    if (t === 0) {
      b;
    }
    if ((t /= d / 2) === 2) {
      b + c;
    }
    if (!p) {
      p = d * (.3 * 1.5);
    }
    if (a < Math.abs(c)) {
      a = c;
      s = p / 4;
    } else {
      s = p / (2 * Math.PI) * Math.asin(c / a);
    }
    if (t < 1) {
      -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
    }
    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
  };

  return Animation;

})(Framer.EventEmitter);


},{}],"framer-form/form/_BaseClass":[function(require,module,exports){
exports.BaseClass = (function() {
  function BaseClass() {}

  BaseClass.define = function(propertyName, descriptor) {
    if (descriptor.readonly) {
      descriptor.set = function(value) {
        throw Error(this.constructor.name + "." + propertyName + " is readonly");
      };
    }
    return Object.defineProperty(this.prototype, propertyName, descriptor);
  };

  return BaseClass;

})();


},{}],"framer-form/form/_Camera":[function(require,module,exports){
var Animation, BaseClass, States, _,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

require('./lib/OrbitControls');

BaseClass = require('./_BaseClass.coffee').BaseClass;

Animation = require('./_Animation.coffee').Animation;

States = require('./_States.coffee').States;

exports.Camera = (function(superClass) {
  extend(Camera, superClass);

  function Camera(properties, sceneDOM) {
    if (properties == null) {
      properties = {};
    }
    Camera.__super__.constructor.call(this);
    this.sceneDOM = sceneDOM;
    _.defaults(properties, {
      x: 0,
      y: 0,
      z: 500,
      rotationX: 0,
      rotationY: 0,
      rotationZ: 0,
      fov: 35,
      near: 0.1,
      far: 10000,
      enablePan: false,
      enableZoom: false,
      enableRotate: false,
      enableDamping: false,
      dampingFactor: 1.4,
      autoRotate: false,
      autoRotateSpeed: 10,
      target: new THREE.Vector3(0, 0, 0)
    });
    this.nativeCamera = new THREE.PerspectiveCamera(properties.fov, properties.aspect, properties.near, properties.far);
    if (properties.orbitControls) {
      this.setupOrbitControls(properties);
    }
    this.setPosition([properties.x, properties.y, properties.z]);
    this.setRotation([properties.rotationX, properties.rotationY, properties.rotationZ]);
    this.saveInitialProperties();
    this._states = new States(this);
  }

  Camera.prototype.setupOrbitControls = function(properties) {
    this.controls = new THREE.OrbitControls(this.nativeCamera, this.sceneDOM);
    this.enablePan = properties.enablePan;
    this.enableZoom = properties.enableZoom;
    this.enableRotate = properties.enableRotate;
    this.enableDamping = properties.enableDamping;
    this.dampingFactor = properties.dampingFactor;
    this.autoRotate = properties.autoRotate;
    this.autoRotateSpeed = properties.autoRotateSpeed;
    return this.target = properties.target;
  };

  Camera.prototype.saveInitialProperties = function() {
    return this.initialProperties = this;
  };

  Camera.prototype.on = function(eventName, cb) {
    var callback;
    if (eventName.includes('change')) {
      callback = function(e) {
        return cb(e.value);
      };
      this.nativeCamera.addEventListener(eventName, callback);
      return Framer.CurrentContext.on('reset', (function(_this) {
        return function() {
          return _this.nativeCamera.removeEventListener(eventName, callback);
        };
      })(this));
    }
  };

  Camera.prototype.setPosition = function(positions) {
    this.x = positions[0];
    this.y = positions[1];
    return this.z = positions[2];
  };

  Camera.prototype.setRotation = function(rotations) {
    this.rotationX = rotations[0];
    this.rotationY = rotations[1];
    return this.rotationZ = rotations[2];
  };

  Camera.prototype.animate = function(properties) {
    return new Animation(this, properties);
  };

  Camera.prototype.lookAt = function(a, b, c) {
    if (arguments.length === 1) {
      return this.nativeCamera.lookAt(a);
    } else if (arguments.length === 3) {
      return this.nativeCamera.lookAt(a, b, c);
    }
  };

  Camera.prototype.stateSwitch = function(state) {
    return Object.keys(this.states).map((function(_this) {
      return function(k) {
        if (k === state) {
          _this.states.current = _this.states[k];
          return Object.keys(_this.states.current).map(function(pk) {
            return _this[pk] = _this.states.current[pk];
          });
        }
      };
    })(this));
  };

  Camera.prototype.stateCycle = function() {
    var i, j, l, len, len1, nextState, s, states;
    if (arguments.length) {
      for (i = j = 0, len = arguments.length; j < len; i = ++j) {
        s = arguments[i];
        if (_.isEqual(this.states[s], this.states.current)) {
          if (i === (arguments.length - 1)) {
            nextState = 0;
          } else {
            nextState = i + 1;
          }
        }
      }
      if (nextState === void 0) {
        nextState = 0;
      }
      return this.animate(arguments[nextState]);
    } else {
      states = Object.keys(this.states);
      states.splice(1, 1);
      for (i = l = 0, len1 = states.length; l < len1; i = ++l) {
        s = states[i];
        if (_.isEqual(this.states[s], this.states.current)) {
          if (i === (states.length - 1)) {
            nextState = 0;
          } else {
            nextState = i + 1;
          }
        }
      }
      return this.animate(states[nextState]);
    }
  };

  Camera.define('position', {
    get: function() {
      return this.nativeCamera.position;
    }
  });

  Camera.define('x', {
    get: function() {
      return this.nativeCamera.position.x;
    },
    set: function(x) {
      this.nativeCamera.position.x = x;
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:x',
        value: this.x
      });
    }
  });

  Camera.define('y', {
    get: function() {
      return this.nativeCamera.position.y;
    },
    set: function(y) {
      this.nativeCamera.position.y = y;
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:y',
        value: this.y
      });
    }
  });

  Camera.define('z', {
    get: function() {
      return this.nativeCamera.position.z;
    },
    set: function(z) {
      this.nativeCamera.position.z = z;
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:z',
        value: this.z
      });
    }
  });

  Camera.define('rotation', {
    get: function() {
      return this.nativeCamera.rotation;
    }
  });

  Camera.define('rotationX', {
    get: function() {
      return THREE.Math.radToDeg(this.nativeCamera.rotation.x);
    },
    set: function(x) {
      this.nativeCamera.rotation.x = THREE.Math.degToRad(x);
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:rotationX',
        value: this.rotationX
      });
    }
  });

  Camera.define('rotationY', {
    get: function() {
      return THREE.Math.radToDeg(this.nativeCamera.rotation.y);
    },
    set: function(y) {
      this.nativeCamera.rotation.y = THREE.Math.degToRad(y);
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:rotationY',
        value: this.rotationY
      });
    }
  });

  Camera.define('rotationZ', {
    get: function() {
      return THREE.Math.radToDeg(this.nativeCamera.rotation.z);
    },
    set: function(z) {
      this.nativeCamera.rotation.z = THREE.Math.degToRad(z);
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:rotationZ',
        value: this.rotationZ
      });
    }
  });

  Camera.define('fov', {
    get: function() {
      return this.nativeCamera.fov;
    },
    set: function(fov) {
      this.nativeCamera.fov = fov;
      return this.nativeCamera.dispatchEvent({
        type: 'change:fov',
        value: this.fov
      });
    }
  });

  Camera.define('zoom', {
    get: function() {
      return this.nativeCamera.zoom;
    },
    set: function(factor) {
      this.nativeCamera.zoom = factor;
      return this.nativeCamera.dispatchEvent({
        type: 'change:zoom',
        value: this.zoom
      });
    }
  });

  Camera.define('near', {
    get: function() {
      return this.nativeCamera.near;
    },
    set: function(near) {
      this.nativeCamera.near = near;
      return this.nativeCamera.dispatchEvent({
        type: 'change:near',
        value: this.near
      });
    }
  });

  Camera.define('far', {
    get: function() {
      return this.nativeCamera.far;
    },
    set: function(far) {
      this.nativeCamera.far = far;
      return this.nativeCamera.dispatchEvent({
        type: 'change:far',
        value: this.far
      });
    }
  });

  Camera.define('aspect', {
    get: function() {
      return this.nativeCamera.aspect;
    },
    set: function(aspect) {
      this.nativeCamera.aspect = aspect;
      return this.nativeCamera.dispatchEvent({
        type: 'change:aspect',
        value: this.aspect
      });
    }
  });

  Camera.define('states', {
    get: function() {
      return this._states.states;
    },
    set: function(states) {
      return _.extend(this.states, states);
    }
  });

  Camera.define('enablePan', {
    get: function() {
      return this.controls.enablePan;
    },
    set: function(bool) {
      this.controls.enablePan = bool;
      return this.nativeCamera.dispatchEvent({
        type: 'change:enablePan',
        value: this.enablePan
      });
    }
  });

  Camera.define('enableZoom', {
    get: function() {
      return this.controls.enableZoom;
    },
    set: function(bool) {
      this.controls.enableZoom = bool;
      return this.nativeCamera.dispatchEvent({
        type: 'change:enableZoom',
        value: this.enableZoom
      });
    }
  });

  Camera.define('enableRotate', {
    get: function() {
      return this.controls.enableRotate;
    },
    set: function(bool) {
      this.controls.enableRotate = bool;
      return this.nativeCamera.dispatchEvent({
        type: 'change:enableRotate',
        value: this.enableRotate
      });
    }
  });

  Camera.define('enableDamping', {
    get: function() {
      return this.controls.enableDamping;
    },
    set: function(bool) {
      this.controls.enableDamping = bool;
      return this.nativeCamera.dispatchEvent({
        type: 'change:enableDamping',
        value: this.enableDamping
      });
    }
  });

  Camera.define('dampingFactor', {
    get: function() {
      return this.controls.dampingFactor;
    },
    set: function(dampingFactor) {
      this.controls.dampingFactor = dampingFactor;
      return this.nativeCamera.dispatchEvent({
        type: 'change:dampingFactor',
        value: this.dampingFactor
      });
    }
  });

  Camera.define('autoRotate', {
    get: function() {
      return this.controls.autoRotate;
    },
    set: function(bool) {
      this.controls.autoRotate = bool;
      return this.nativeCamera.dispatchEvent({
        type: 'change:autoRotate',
        value: this.autoRotate
      });
    }
  });

  Camera.define('autoRotateSpeed', {
    get: function() {
      return this.controls.autoRotateSpeed;
    },
    set: function(speed) {
      this.controls.autoRotateSpeed = speed;
      return this.nativeCamera.dispatchEvent({
        type: 'change:autoRotateSpeed',
        value: this.autoRotateSpeed
      });
    }
  });

  Camera.define('target', {
    get: function() {
      return this.controls.target;
    },
    set: function(vector3) {
      this.controls.target = vector3;
      return this.nativeCamera.dispatchEvent({
        type: 'change:target',
        value: this.target
      });
    }
  });

  return Camera;

})(BaseClass);


},{"./_Animation.coffee":"framer-form/form/_Animation","./_BaseClass.coffee":"framer-form/form/_BaseClass","./_States.coffee":"framer-form/form/_States","./lib/OrbitControls":"framer-form/form/lib/OrbitControls"}],"framer-form/form/_States":[function(require,module,exports){
var BaseClass, acceptedModelProperties, reservedStateError,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

BaseClass = require('./_BaseClass.coffee').BaseClass;

acceptedModelProperties = ['x', 'y', 'z', 'rotationX', 'rotationY', 'rotationZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'options'];

reservedStateError = function(name) {
  throw Error("The state '" + name + "' is a reserved name.");
};

exports.States = (function(superClass) {
  extend(States, superClass);

  function States(model) {
    States.__super__.constructor.call(this);
    this.model = model;
    this.initialModelProperties = Object.getOwnPropertyNames(Object.getPrototypeOf(this.model.initialProperties));
    this.states = {
      "default": this.filterProperties(this.initialModelProperties),
      current: this.filterProperties(this.initialModelProperties)
    };
  }

  States.prototype.filterProperties = function(propeties) {
    var newPropertyObj;
    newPropertyObj = {};
    propeties.map((function(_this) {
      return function(k) {
        if (acceptedModelProperties.includes(k)) {
          return newPropertyObj[k] = _this.model[k];
        }
      };
    })(this));
    return newPropertyObj;
  };

  States.define('current', {
    get: function() {
      return this.states.current;
    },
    set: function(state) {
      this.states.previous = this.states.current;
      return this.states.current = state;
    }
  });

  States.define('previous', {
    get: function() {
      return this.states.previous;
    }
  });

  return States;

})(BaseClass);


},{"./_BaseClass.coffee":"framer-form/form/_BaseClass"}],"framer-form/form/lib/ColladaLoader":[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / https://github.com/Mugen87
 */

THREE.ColladaLoader = function ( manager ) {
    
        this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;
    
    };
    
    THREE.ColladaLoader.prototype = {
    
        constructor: THREE.ColladaLoader,
    
        crossOrigin: 'Anonymous',
    
        load: function ( url, onLoad, onProgress, onError ) {
    
            var scope = this;
    
            var path = scope.path === undefined ? THREE.LoaderUtils.extractUrlBase( url ) : scope.path;
    
            var loader = new THREE.FileLoader( scope.manager );
            loader.load( url, function ( text ) {
    
                onLoad( scope.parse( text, path ) );
    
            }, onProgress, onError );
    
        },
    
        setPath: function ( value ) {
    
            this.path = value;
    
        },
    
        options: {
    
            set convertUpAxis( value ) {
    
                console.warn( 'THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.' );
    
            }
    
        },
    
        setCrossOrigin: function ( value ) {
    
            this.crossOrigin = value;
    
        },
    
        parse: function ( text, path ) {
    
            function getElementsByTagName( xml, name ) {
    
                // Non recursive xml.getElementsByTagName() ...
    
                var array = [];
                var childNodes = xml.childNodes;
    
                for ( var i = 0, l = childNodes.length; i < l; i ++ ) {
    
                    var child = childNodes[ i ];
    
                    if ( child.nodeName === name ) {
    
                        array.push( child );
    
                    }
    
                }
    
                return array;
    
            }
    
            function parseStrings( text ) {
    
                if ( text.length === 0 ) return [];
    
                var parts = text.trim().split( /\s+/ );
                var array = new Array( parts.length );
    
                for ( var i = 0, l = parts.length; i < l; i ++ ) {
    
                    array[ i ] = parts[ i ];
    
                }
    
                return array;
    
            }
    
            function parseFloats( text ) {
    
                if ( text.length === 0 ) return [];
    
                var parts = text.trim().split( /\s+/ );
                var array = new Array( parts.length );
    
                for ( var i = 0, l = parts.length; i < l; i ++ ) {
    
                    array[ i ] = parseFloat( parts[ i ] );
    
                }
    
                return array;
    
            }
    
            function parseInts( text ) {
    
                if ( text.length === 0 ) return [];
    
                var parts = text.trim().split( /\s+/ );
                var array = new Array( parts.length );
    
                for ( var i = 0, l = parts.length; i < l; i ++ ) {
    
                    array[ i ] = parseInt( parts[ i ] );
    
                }
    
                return array;
    
            }
    
            function parseId( text ) {
    
                return text.substring( 1 );
    
            }
    
            function generateId() {
    
                return 'three_default_' + ( count ++ );
    
            }
    
            function isEmpty( object ) {
    
                return Object.keys( object ).length === 0;
    
            }
    
            // asset
    
            function parseAsset( xml ) {
    
                return {
                    unit: parseAssetUnit( getElementsByTagName( xml, 'unit' )[ 0 ] ),
                    upAxis: parseAssetUpAxis( getElementsByTagName( xml, 'up_axis' )[ 0 ] )
                };
    
            }
    
            function parseAssetUnit( xml ) {
    
                return xml !== undefined ? parseFloat( xml.getAttribute( 'meter' ) ) : 1;
    
            }
    
            function parseAssetUpAxis( xml ) {
    
                return xml !== undefined ? xml.textContent : 'Y_UP';
    
            }
    
            // library
    
            function parseLibrary( xml, libraryName, nodeName, parser ) {
    
                var library = getElementsByTagName( xml, libraryName )[ 0 ];
    
                if ( library !== undefined ) {
    
                    var elements = getElementsByTagName( library, nodeName );
    
                    for ( var i = 0; i < elements.length; i ++ ) {
    
                        parser( elements[ i ] );
    
                    }
    
                }
    
            }
    
            function buildLibrary( data, builder ) {
    
                for ( var name in data ) {
    
                    var object = data[ name ];
                    object.build = builder( data[ name ] );
    
                }
    
            }
    
            // get
    
            function getBuild( data, builder ) {
    
                if ( data.build !== undefined ) return data.build;
    
                data.build = builder( data );
    
                return data.build;
    
            }
    
            // animation
    
            function parseAnimation( xml ) {
    
                var data = {
                    sources: {},
                    samplers: {},
                    channels: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    var id;
    
                    switch ( child.nodeName ) {
    
                        case 'source':
                            id = child.getAttribute( 'id' );
                            data.sources[ id ] = parseSource( child );
                            break;
    
                        case 'sampler':
                            id = child.getAttribute( 'id' );
                            data.samplers[ id ] = parseAnimationSampler( child );
                            break;
    
                        case 'channel':
                            id = child.getAttribute( 'target' );
                            data.channels[ id ] = parseAnimationChannel( child );
                            break;
    
                        default:
                            console.log( child );
    
                    }
    
                }
    
                library.animations[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseAnimationSampler( xml ) {
    
                var data = {
                    inputs: {},
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'input':
                            var id = parseId( child.getAttribute( 'source' ) );
                            var semantic = child.getAttribute( 'semantic' );
                            data.inputs[ semantic ] = id;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseAnimationChannel( xml ) {
    
                var data = {};
    
                var target = xml.getAttribute( 'target' );
    
                // parsing SID Addressing Syntax
    
                var parts = target.split( '/' );
    
                var id = parts.shift();
                var sid = parts.shift();
    
                // check selection syntax
    
                var arraySyntax = ( sid.indexOf( '(' ) !== - 1 );
                var memberSyntax = ( sid.indexOf( '.' ) !== - 1 );
    
                if ( memberSyntax ) {
    
                    //  member selection access
    
                    parts = sid.split( '.' );
                    sid = parts.shift();
                    data.member = parts.shift();
    
                } else if ( arraySyntax ) {
    
                    // array-access syntax. can be used to express fields in one-dimensional vectors or two-dimensional matrices.
    
                    var indices = sid.split( '(' );
                    sid = indices.shift();
    
                    for ( var i = 0; i < indices.length; i ++ ) {
    
                        indices[ i ] = parseInt( indices[ i ].replace( /\)/, '' ) );
    
                    }
    
                    data.indices = indices;
    
                }
    
                data.id = id;
                data.sid = sid;
    
                data.arraySyntax = arraySyntax;
                data.memberSyntax = memberSyntax;
    
                data.sampler = parseId( xml.getAttribute( 'source' ) );
    
                return data;
    
            }
    
            function buildAnimation( data ) {
    
                var tracks = [];
    
                var channels = data.channels;
                var samplers = data.samplers;
                var sources = data.sources;
    
                for ( var target in channels ) {
    
                    if ( channels.hasOwnProperty( target ) ) {
    
                        var channel = channels[ target ];
                        var sampler = samplers[ channel.sampler ];
    
                        var inputId = sampler.inputs.INPUT;
                        var outputId = sampler.inputs.OUTPUT;
    
                        var inputSource = sources[ inputId ];
                        var outputSource = sources[ outputId ];
    
                        var animation = buildAnimationChannel( channel, inputSource, outputSource );
    
                        createKeyframeTracks( animation, tracks );
    
                    }
    
                }
    
                return tracks;
    
            }
    
            function getAnimation( id ) {
    
                return getBuild( library.animations[ id ], buildAnimation );
    
            }
    
            function buildAnimationChannel( channel, inputSource, outputSource ) {
    
                var node = library.nodes[ channel.id ];
                var object3D = getNode( node.id );
    
                var transform = node.transforms[ channel.sid ];
                var defaultMatrix = node.matrix.clone().transpose();
    
                var time, stride;
                var i, il, j, jl;
    
                var data = {};
    
                // the collada spec allows the animation of data in various ways.
                // depending on the transform type (matrix, translate, rotate, scale), we execute different logic
    
                switch ( transform ) {
    
                    case 'matrix':
    
                        for ( i = 0, il = inputSource.array.length; i < il; i ++ ) {
    
                            time = inputSource.array[ i ];
                            stride = i * outputSource.stride;
    
                            if ( data[ time ] === undefined ) data[ time ] = {};
    
                            if ( channel.arraySyntax === true ) {
    
                                var value = outputSource.array[ stride ];
                                var index = channel.indices[ 0 ] + 4 * channel.indices[ 1 ];
    
                                data[ time ][ index ] = value;
    
                            } else {
    
                                for ( j = 0, jl = outputSource.stride; j < jl; j ++ ) {
    
                                    data[ time ][ j ] = outputSource.array[ stride + j ];
    
                                }
    
                            }
    
                        }
    
                        break;
    
                    case 'translate':
                        console.warn( 'THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', transform );
                        break;
    
                    case 'rotate':
                        console.warn( 'THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', transform );
                        break;
    
                    case 'scale':
                        console.warn( 'THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', transform );
                        break;
    
                }
    
                var keyframes = prepareAnimationData( data, defaultMatrix );
    
                var animation = {
                    name: object3D.uuid,
                    keyframes: keyframes
                };
    
                return animation;
    
            }
    
            function prepareAnimationData( data, defaultMatrix ) {
    
                var keyframes = [];
    
                // transfer data into a sortable array
    
                for ( var time in data ) {
    
                    keyframes.push( { time: parseFloat( time ), value: data[ time ] } );
    
                }
    
                // ensure keyframes are sorted by time
    
                keyframes.sort( ascending );
    
                // now we clean up all animation data, so we can use them for keyframe tracks
    
                for ( var i = 0; i < 16; i ++ ) {
    
                    transformAnimationData( keyframes, i, defaultMatrix.elements[ i ] );
    
                }
    
                return keyframes;
    
                // array sort function
    
                function ascending( a, b ) {
    
                    return a.time - b.time;
    
                }
    
            }
    
            var position = new THREE.Vector3();
            var scale = new THREE.Vector3();
            var quaternion = new THREE.Quaternion();
    
            function createKeyframeTracks( animation, tracks ) {
    
                var keyframes = animation.keyframes;
                var name = animation.name;
    
                var times = [];
                var positionData = [];
                var quaternionData = [];
                var scaleData = [];
    
                for ( var i = 0, l = keyframes.length; i < l; i ++ ) {
    
                    var keyframe = keyframes[ i ];
    
                    var time = keyframe.time;
                    var value = keyframe.value;
    
                    matrix.fromArray( value ).transpose();
                    matrix.decompose( position, quaternion, scale );
    
                    times.push( time );
                    positionData.push( position.x, position.y, position.z );
                    quaternionData.push( quaternion.x, quaternion.y, quaternion.z, quaternion.w );
                    scaleData.push( scale.x, scale.y, scale.z );
    
                }
    
                if ( positionData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.position', times, positionData ) );
                if ( quaternionData.length > 0 ) tracks.push( new THREE.QuaternionKeyframeTrack( name + '.quaternion', times, quaternionData ) );
                if ( scaleData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.scale', times, scaleData ) );
    
                return tracks;
    
            }
    
            function transformAnimationData( keyframes, property, defaultValue ) {
    
                var keyframe;
    
                var empty = true;
                var i, l;
    
                // check, if values of a property are missing in our keyframes
    
                for ( i = 0, l = keyframes.length; i < l; i ++ ) {
    
                    keyframe = keyframes[ i ];
    
                    if ( keyframe.value[ property ] === undefined ) {
    
                        keyframe.value[ property ] = null; // mark as missing
    
                    } else {
    
                        empty = false;
    
                    }
    
                }
    
                if ( empty === true ) {
    
                    // no values at all, so we set a default value
    
                    for ( i = 0, l = keyframes.length; i < l; i ++ ) {
    
                        keyframe = keyframes[ i ];
    
                        keyframe.value[ property ] = defaultValue;
    
                    }
    
                } else {
    
                    // filling gaps
    
                    createMissingKeyframes( keyframes, property );
    
                }
    
            }
    
            function createMissingKeyframes( keyframes, property ) {
    
                var prev, next;
    
                for ( var i = 0, l = keyframes.length; i < l; i ++ ) {
    
                    var keyframe = keyframes[ i ];
    
                    if ( keyframe.value[ property ] === null ) {
    
                        prev = getPrev( keyframes, i, property );
                        next = getNext( keyframes, i, property );
    
                        if ( prev === null ) {
    
                            keyframe.value[ property ] = next.value[ property ];
                            continue;
    
                        }
    
                        if ( next === null ) {
    
                            keyframe.value[ property ] = prev.value[ property ];
                            continue;
    
                        }
    
                        interpolate( keyframe, prev, next, property );
    
                    }
    
                }
    
            }
    
            function getPrev( keyframes, i, property ) {
    
                while ( i >= 0 ) {
    
                    var keyframe = keyframes[ i ];
    
                    if ( keyframe.value[ property ] !== null ) return keyframe;
    
                    i --;
    
                }
    
                return null;
    
            }
    
            function getNext( keyframes, i, property ) {
    
                while ( i < keyframes.length ) {
    
                    var keyframe = keyframes[ i ];
    
                    if ( keyframe.value[ property ] !== null ) return keyframe;
    
                    i ++;
    
                }
    
                return null;
    
            }
    
            function interpolate( key, prev, next, property ) {
    
                if ( ( next.time - prev.time ) === 0 ) {
    
                    key.value[ property ] = prev.value[ property ];
                    return;
    
                }
    
                key.value[ property ] = ( ( key.time - prev.time ) * ( next.value[ property ] - prev.value[ property ] ) / ( next.time - prev.time ) ) + prev.value[ property ];
    
            }
    
            // animation clips
    
            function parseAnimationClip( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'id' ) || 'default',
                    start: parseFloat( xml.getAttribute( 'start' ) || 0 ),
                    end: parseFloat( xml.getAttribute( 'end' ) || 0 ),
                    animations: []
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'instance_animation':
                            data.animations.push( parseId( child.getAttribute( 'url' ) ) );
                            break;
    
                    }
    
                }
    
                library.clips[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildAnimationClip( data ) {
    
                var tracks = [];
    
                var name = data.name;
                var duration = ( data.end - data.start ) || - 1;
                var animations = data.animations;
    
                for ( var i = 0, il = animations.length; i < il; i ++ ) {
    
                    var animationTracks = getAnimation( animations[ i ] );
    
                    for ( var j = 0, jl = animationTracks.length; j < jl; j ++ ) {
    
                        tracks.push( animationTracks[ j ] );
    
                    }
    
                }
    
                return new THREE.AnimationClip( name, duration, tracks );
    
            }
    
            function getAnimationClip( id ) {
    
                return getBuild( library.clips[ id ], buildAnimationClip );
    
            }
    
            // controller
    
            function parseController( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'skin':
                            // there is exactly one skin per controller
                            data.id = parseId( child.getAttribute( 'source' ) );
                            data.skin = parseSkin( child );
                            break;
    
                        case 'morph':
                            data.id = parseId( child.getAttribute( 'source' ) );
                            console.warn( 'THREE.ColladaLoader: Morph target animation not supported yet.' );
                            break;
    
                    }
    
                }
    
                library.controllers[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseSkin( xml ) {
    
                var data = {
                    sources: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'bind_shape_matrix':
                            data.bindShapeMatrix = parseFloats( child.textContent );
                            break;
    
                        case 'source':
                            var id = child.getAttribute( 'id' );
                            data.sources[ id ] = parseSource( child );
                            break;
    
                        case 'joints':
                            data.joints = parseJoints( child );
                            break;
    
                        case 'vertex_weights':
                            data.vertexWeights = parseVertexWeights( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseJoints( xml ) {
    
                var data = {
                    inputs: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'input':
                            var semantic = child.getAttribute( 'semantic' );
                            var id = parseId( child.getAttribute( 'source' ) );
                            data.inputs[ semantic ] = id;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseVertexWeights( xml ) {
    
                var data = {
                    inputs: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'input':
                            var semantic = child.getAttribute( 'semantic' );
                            var id = parseId( child.getAttribute( 'source' ) );
                            var offset = parseInt( child.getAttribute( 'offset' ) );
                            data.inputs[ semantic ] = { id: id, offset: offset };
                            break;
    
                        case 'vcount':
                            data.vcount = parseInts( child.textContent );
                            break;
    
                        case 'v':
                            data.v = parseInts( child.textContent );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildController( data ) {
    
                var build = {
                    id: data.id
                };
    
                var geometry = library.geometries[ build.id ];
    
                if ( data.skin !== undefined ) {
    
                    build.skin = buildSkin( data.skin );
    
                    // we enhance the 'sources' property of the corresponding geometry with our skin data
    
                    geometry.sources.skinIndices = build.skin.indices;
                    geometry.sources.skinWeights = build.skin.weights;
    
                }
    
                return build;
    
            }
    
            function buildSkin( data ) {
    
                var BONE_LIMIT = 4;
    
                var build = {
                    joints: [], // this must be an array to preserve the joint order
                    indices: {
                        array: [],
                        stride: BONE_LIMIT
                    },
                    weights: {
                        array: [],
                        stride: BONE_LIMIT
                    }
                };
    
                var sources = data.sources;
                var vertexWeights = data.vertexWeights;
    
                var vcount = vertexWeights.vcount;
                var v = vertexWeights.v;
                var jointOffset = vertexWeights.inputs.JOINT.offset;
                var weightOffset = vertexWeights.inputs.WEIGHT.offset;
    
                var jointSource = data.sources[ data.joints.inputs.JOINT ];
                var inverseSource = data.sources[ data.joints.inputs.INV_BIND_MATRIX ];
    
                var weights = sources[ vertexWeights.inputs.WEIGHT.id ].array;
                var stride = 0;
    
                var i, j, l;
    
                // procces skin data for each vertex
    
                for ( i = 0, l = vcount.length; i < l; i ++ ) {
    
                    var jointCount = vcount[ i ]; // this is the amount of joints that affect a single vertex
                    var vertexSkinData = [];
    
                    for ( j = 0; j < jointCount; j ++ ) {
    
                        var skinIndex = v[ stride + jointOffset ];
                        var weightId = v[ stride + weightOffset ];
                        var skinWeight = weights[ weightId ];
    
                        vertexSkinData.push( { index: skinIndex, weight: skinWeight } );
    
                        stride += 2;
    
                    }
    
                    // we sort the joints in descending order based on the weights.
                    // this ensures, we only procced the most important joints of the vertex
    
                    vertexSkinData.sort( descending );
    
                    // now we provide for each vertex a set of four index and weight values.
                    // the order of the skin data matches the order of vertices
    
                    for ( j = 0; j < BONE_LIMIT; j ++ ) {
    
                        var d = vertexSkinData[ j ];
    
                        if ( d !== undefined ) {
    
                            build.indices.array.push( d.index );
                            build.weights.array.push( d.weight );
    
                        } else {
    
                            build.indices.array.push( 0 );
                            build.weights.array.push( 0 );
    
                        }
    
                    }
    
                }
    
                // setup bind matrix
    
                build.bindMatrix = new THREE.Matrix4().fromArray( data.bindShapeMatrix ).transpose();
    
                // process bones and inverse bind matrix data
    
                for ( i = 0, l = jointSource.array.length; i < l; i ++ ) {
    
                    var name = jointSource.array[ i ];
                    var boneInverse = new THREE.Matrix4().fromArray( inverseSource.array, i * inverseSource.stride ).transpose();
    
                    build.joints.push( { name: name, boneInverse: boneInverse } );
    
                }
    
                return build;
    
                // array sort function
    
                function descending( a, b ) {
    
                    return b.weight - a.weight;
    
                }
    
            }
    
            function getController( id ) {
    
                return getBuild( library.controllers[ id ], buildController );
    
            }
    
            // image
    
            function parseImage( xml ) {
    
                var data = {
                    init_from: getElementsByTagName( xml, 'init_from' )[ 0 ].textContent
                };
    
                library.images[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildImage( data ) {
    
                if ( data.build !== undefined ) return data.build;
    
                return data.init_from;
    
            }
    
            function getImage( id ) {
    
                return getBuild( library.images[ id ], buildImage );
    
            }
    
            // effect
    
            function parseEffect( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'profile_COMMON':
                            data.profile = parseEffectProfileCOMMON( child );
                            break;
    
                    }
    
                }
    
                library.effects[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseEffectProfileCOMMON( xml ) {
    
                var data = {
                    surfaces: {},
                    samplers: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'newparam':
                            parseEffectNewparam( child, data );
                            break;
    
                        case 'technique':
                            data.technique = parseEffectTechnique( child );
                            break;
    
                        case 'extra':
                            data.extra = parseEffectExtra( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectNewparam( xml, data ) {
    
                var sid = xml.getAttribute( 'sid' );
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'surface':
                            data.surfaces[ sid ] = parseEffectSurface( child );
                            break;
    
                        case 'sampler2D':
                            data.samplers[ sid ] = parseEffectSampler( child );
                            break;
    
                    }
    
                }
    
            }
    
            function parseEffectSurface( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'init_from':
                            data.init_from = child.textContent;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectSampler( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'source':
                            data.source = child.textContent;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectTechnique( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'constant':
                        case 'lambert':
                        case 'blinn':
                        case 'phong':
                            data.type = child.nodeName;
                            data.parameters = parseEffectParameters( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectParameters( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'emission':
                        case 'diffuse':
                        case 'specular':
                        case 'shininess':
                        case 'transparency':
                            data[ child.nodeName ] = parseEffectParameter( child );
                            break;
                        case 'transparent':
                            data[ child.nodeName ] = {
                                opaque: child.getAttribute( 'opaque' ),
                                data: parseEffectParameter( child )
                            };
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectParameter( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'color':
                            data[ child.nodeName ] = parseFloats( child.textContent );
                            break;
    
                        case 'float':
                            data[ child.nodeName ] = parseFloat( child.textContent );
                            break;
    
                        case 'texture':
                            data[ child.nodeName ] = { id: child.getAttribute( 'texture' ), extra: parseEffectParameterTexture( child ) };
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectParameterTexture( xml ) {
    
                var data = {
                    technique: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'extra':
                            parseEffectParameterTextureExtra( child, data );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectParameterTextureExtra( xml, data ) {
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'technique':
                            parseEffectParameterTextureExtraTechnique( child, data );
                            break;
    
                    }
    
                }
    
            }
    
            function parseEffectParameterTextureExtraTechnique( xml, data ) {
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'repeatU':
                        case 'repeatV':
                        case 'offsetU':
                        case 'offsetV':
                            data.technique[ child.nodeName ] = parseFloat( child.textContent );
                            break;
    
                        case 'wrapU':
                        case 'wrapV':
    
                            // some files have values for wrapU/wrapV which become NaN via parseInt
    
                            if ( child.textContent.toUpperCase() === 'TRUE' ) {
    
                                data.technique[ child.nodeName ] = 1;
    
                            } else if ( child.textContent.toUpperCase() === 'FALSE' ) {
    
                                data.technique[ child.nodeName ] = 0;
    
                            } else {
    
                                data.technique[ child.nodeName ] = parseInt( child.textContent );
    
                            }
    
                            break;
    
                    }
    
                }
    
            }
    
            function parseEffectExtra( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'technique':
                            data.technique = parseEffectExtraTechnique( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectExtraTechnique( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'double_sided':
                            data[ child.nodeName ] = parseInt( child.textContent );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildEffect( data ) {
    
                return data;
    
            }
    
            function getEffect( id ) {
    
                return getBuild( library.effects[ id ], buildEffect );
    
            }
    
            // material
    
            function parseMaterial( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' )
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'instance_effect':
                            data.url = parseId( child.getAttribute( 'url' ) );
                            break;
    
                    }
    
                }
    
                library.materials[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildMaterial( data ) {
    
                var effect = getEffect( data.url );
                var technique = effect.profile.technique;
                var extra = effect.profile.extra;
    
                var material;
    
                switch ( technique.type ) {
    
                    case 'phong':
                    case 'blinn':
                        material = new THREE.MeshPhongMaterial();
                        break;
    
                    case 'lambert':
                        material = new THREE.MeshLambertMaterial();
                        break;
    
                    default:
                        material = new THREE.MeshBasicMaterial();
                        break;
    
                }
    
                material.name = data.name;
    
                function getTexture( textureObject ) {
    
                    var sampler = effect.profile.samplers[ textureObject.id ];
                    var image;
    
                    // get image
    
                    if ( sampler !== undefined ) {
    
                        var surface = effect.profile.surfaces[ sampler.source ];
                        image = getImage( surface.init_from );
    
                    } else {
    
                        console.warn( 'THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).' );
                        image = getImage( textureObject.id );
    
                    }
    
                    // create texture if image is avaiable
    
                    if ( image !== undefined ) {
    
                        var texture = textureLoader.load( image );
    
                        var extra = textureObject.extra;
    
                        if ( extra !== undefined && extra.technique !== undefined && isEmpty( extra.technique ) === false ) {
    
                            var technique = extra.technique;
    
                            texture.wrapS = technique.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;
                            texture.wrapT = technique.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;
    
                            texture.offset.set( technique.offsetU || 0, technique.offsetV || 0 );
                            texture.repeat.set( technique.repeatU || 1, technique.repeatV || 1 );
    
                        } else {
    
                            texture.wrapS = THREE.RepeatWrapping;
                            texture.wrapT = THREE.RepeatWrapping;
    
                        }
    
                        return texture;
    
                    } else {
    
                        console.error( 'THREE.ColladaLoader: Unable to load texture with ID:', textureObject.id );
    
                        return null;
    
                    }
    
                }
    
                var parameters = technique.parameters;
    
                for ( var key in parameters ) {
    
                    var parameter = parameters[ key ];
    
                    switch ( key ) {
    
                        case 'diffuse':
                            if ( parameter.color ) material.color.fromArray( parameter.color );
                            if ( parameter.texture ) material.map = getTexture( parameter.texture );
                            break;
                        case 'specular':
                            if ( parameter.color && material.specular ) material.specular.fromArray( parameter.color );
                            if ( parameter.texture ) material.specularMap = getTexture( parameter.texture );
                            break;
                        case 'shininess':
                            if ( parameter.float && material.shininess )
                                material.shininess = parameter.float;
                            break;
                        case 'emission':
                            if ( parameter.color && material.emissive )
                                material.emissive.fromArray( parameter.color );
                            break;
    
                    }
    
                }
    
                //
    
                var transparent = parameters[ 'transparent' ];
                var transparency = parameters[ 'transparency' ];
    
                // <transparency> does not exist but <transparent>
    
                if ( transparency === undefined && transparent ) {
    
                    transparency = {
                        float: 1
                    };
    
                }
    
                // <transparent> does not exist but <transparency>
    
                if ( transparent === undefined && transparency ) {
    
                    transparent = {
                        opaque: 'A_ONE',
                        data: {
                            color: [ 1, 1, 1, 1 ]
                        } };
    
                }
    
                if ( transparent && transparency ) {
    
                    // handle case if a texture exists but no color
    
                    if ( transparent.data.texture ) {
    
                        material.alphaMap = getTexture( transparent.data.texture );
                        material.transparent = true;
    
                    } else {
    
                        var color = transparent.data.color;
    
                        switch ( transparent.opaque ) {
    
                            case 'A_ONE':
                                material.opacity = color[ 3 ] * transparency.float;
                                break;
                            case 'RGB_ZERO':
                                material.opacity = 1 - ( color[ 0 ] * transparency.float );
                                break;
                            case 'A_ZERO':
                                material.opacity = 1 - ( color[ 3 ] * transparency.float );
                                break;
                            case 'RGB_ONE':
                                material.opacity = color[ 0 ] * transparency.float;
                                break;
                            default:
                                console.warn( 'THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.', transparent.opaque );
    
                        }
    
                        if ( material.opacity < 1 ) material.transparent = true;
    
                    }
    
                }
    
                //
    
                if ( extra !== undefined && extra.technique !== undefined && extra.technique.double_sided === 1 ) {
    
                    material.side = THREE.DoubleSide;
    
                }
    
                return material;
    
            }
    
            function getMaterial( id ) {
    
                return getBuild( library.materials[ id ], buildMaterial );
    
            }
    
            // camera
    
            function parseCamera( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' )
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'optics':
                            data.optics = parseCameraOptics( child );
                            break;
    
                    }
    
                }
    
                library.cameras[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseCameraOptics( xml ) {
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    switch ( child.nodeName ) {
    
                        case 'technique_common':
                            return parseCameraTechnique( child );
    
                    }
    
                }
    
                return {};
    
            }
    
            function parseCameraTechnique( xml ) {
    
                var data = {};
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    switch ( child.nodeName ) {
    
                        case 'perspective':
                        case 'orthographic':
    
                            data.technique = child.nodeName;
                            data.parameters = parseCameraParameters( child );
    
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseCameraParameters( xml ) {
    
                var data = {};
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    switch ( child.nodeName ) {
    
                        case 'xfov':
                        case 'yfov':
                        case 'xmag':
                        case 'ymag':
                        case 'znear':
                        case 'zfar':
                        case 'aspect_ratio':
                            data[ child.nodeName ] = parseFloat( child.textContent );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildCamera( data ) {
    
                var camera;
    
                switch ( data.optics.technique ) {
    
                    case 'perspective':
                        camera = new THREE.PerspectiveCamera(
                            data.optics.parameters.yfov,
                            data.optics.parameters.aspect_ratio,
                            data.optics.parameters.znear,
                            data.optics.parameters.zfar
                        );
                        break;
    
                    case 'orthographic':
                        var ymag = data.optics.parameters.ymag;
                        var xmag = data.optics.parameters.xmag;
                        var aspectRatio = data.optics.parameters.aspect_ratio;
    
                        xmag = ( xmag === undefined ) ? ( ymag * aspectRatio ) : xmag;
                        ymag = ( ymag === undefined ) ? ( xmag / aspectRatio ) : ymag;
    
                        xmag *= 0.5;
                        ymag *= 0.5;
    
                        camera = new THREE.OrthographicCamera(
                            - xmag, xmag, ymag, - ymag, // left, right, top, bottom
                            data.optics.parameters.znear,
                            data.optics.parameters.zfar
                        );
                        break;
    
                    default:
                        camera = new THREE.PerspectiveCamera();
                        break;
    
                }
    
                camera.name = data.name;
    
                return camera;
    
            }
    
            function getCamera( id ) {
    
                var data = library.cameras[ id ];
    
                if ( data !== undefined ) {
    
                    return getBuild( data, buildCamera );
    
                }
    
                console.warn( 'THREE.ColladaLoader: Couldn\'t find camera with ID:', id );
    
                return null;
    
            }
    
            // light
    
            function parseLight( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'technique_common':
                            data = parseLightTechnique( child );
                            break;
    
                    }
    
                }
    
                library.lights[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseLightTechnique( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'directional':
                        case 'point':
                        case 'spot':
                        case 'ambient':
    
                            data.technique = child.nodeName;
                            data.parameters = parseLightParameters( child );
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseLightParameters( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'color':
                            var array = parseFloats( child.textContent );
                            data.color = new THREE.Color().fromArray( array );
                            break;
    
                        case 'falloff_angle':
                            data.falloffAngle = parseFloat( child.textContent );
                            break;
    
                        case 'quadratic_attenuation':
                            var f = parseFloat( child.textContent );
                            data.distance = f ? Math.sqrt( 1 / f ) : 0;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildLight( data ) {
    
                var light;
    
                switch ( data.technique ) {
    
                    case 'directional':
                        light = new THREE.DirectionalLight();
                        break;
    
                    case 'point':
                        light = new THREE.PointLight();
                        break;
    
                    case 'spot':
                        light = new THREE.SpotLight();
                        break;
    
                    case 'ambient':
                        light = new THREE.AmbientLight();
                        break;
    
                }
    
                if ( data.parameters.color ) light.color.copy( data.parameters.color );
                if ( data.parameters.distance ) light.distance = data.parameters.distance;
    
                return light;
    
            }
    
            function getLight( id ) {
    
                var data = library.lights[ id ];
    
                if ( data !== undefined ) {
    
                    return getBuild( data, buildLight );
    
                }
    
                console.warn( 'THREE.ColladaLoader: Couldn\'t find light with ID:', id );
    
                return null;
    
            }
    
            // geometry
    
            function parseGeometry( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' ),
                    sources: {},
                    vertices: {},
                    primitives: []
                };
    
                var mesh = getElementsByTagName( xml, 'mesh' )[ 0 ];
    
                // the following tags inside geometry are not supported yet (see https://github.com/mrdoob/three.js/pull/12606): convex_mesh, spline, brep
                if ( mesh === undefined ) return;
    
                for ( var i = 0; i < mesh.childNodes.length; i ++ ) {
    
                    var child = mesh.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    var id = child.getAttribute( 'id' );
    
                    switch ( child.nodeName ) {
    
                        case 'source':
                            data.sources[ id ] = parseSource( child );
                            break;
    
                        case 'vertices':
                            // data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];
                            data.vertices = parseGeometryVertices( child );
                            break;
    
                        case 'polygons':
                            console.warn( 'THREE.ColladaLoader: Unsupported primitive type: ', child.nodeName );
                            break;
    
                        case 'lines':
                        case 'linestrips':
                        case 'polylist':
                        case 'triangles':
                            data.primitives.push( parseGeometryPrimitive( child ) );
                            break;
    
                        default:
                            console.log( child );
    
                    }
    
                }
    
                library.geometries[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseSource( xml ) {
    
                var data = {
                    array: [],
                    stride: 3
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'float_array':
                            data.array = parseFloats( child.textContent );
                            break;
    
                        case 'Name_array':
                            data.array = parseStrings( child.textContent );
                            break;
    
                        case 'technique_common':
                            var accessor = getElementsByTagName( child, 'accessor' )[ 0 ];
    
                            if ( accessor !== undefined ) {
    
                                data.stride = parseInt( accessor.getAttribute( 'stride' ) );
    
                            }
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseGeometryVertices( xml ) {
    
                var data = {};
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    data[ child.getAttribute( 'semantic' ) ] = parseId( child.getAttribute( 'source' ) );
    
                }
    
                return data;
    
            }
    
            function parseGeometryPrimitive( xml ) {
    
                var primitive = {
                    type: xml.nodeName,
                    material: xml.getAttribute( 'material' ),
                    count: parseInt( xml.getAttribute( 'count' ) ),
                    inputs: {},
                    stride: 0
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'input':
                            var id = parseId( child.getAttribute( 'source' ) );
                            var semantic = child.getAttribute( 'semantic' );
                            var offset = parseInt( child.getAttribute( 'offset' ) );
                            primitive.inputs[ semantic ] = { id: id, offset: offset };
                            primitive.stride = Math.max( primitive.stride, offset + 1 );
                            break;
    
                        case 'vcount':
                            primitive.vcount = parseInts( child.textContent );
                            break;
    
                        case 'p':
                            primitive.p = parseInts( child.textContent );
                            break;
    
                    }
    
                }
    
                return primitive;
    
            }
    
            function groupPrimitives( primitives ) {
    
                var build = {};
    
                for ( var i = 0; i < primitives.length; i ++ ) {
    
                    var primitive = primitives[ i ];
    
                    if ( build[ primitive.type ] === undefined ) build[ primitive.type ] = [];
    
                    build[ primitive.type ].push( primitive );
    
                }
    
                return build;
    
            }
    
            function buildGeometry( data ) {
    
                var build = {};
    
                var sources = data.sources;
                var vertices = data.vertices;
                var primitives = data.primitives;
    
                if ( primitives.length === 0 ) return {};
    
                // our goal is to create one buffer geoemtry for a single type of primitives
                // first, we group all primitives by their type
    
                var groupedPrimitives = groupPrimitives( primitives );
    
                for ( var type in groupedPrimitives ) {
    
                    // second, we create for each type of primitives (polylist,triangles or lines) a buffer geometry
    
                    build[ type ] = buildGeometryType( groupedPrimitives[ type ], sources, vertices );
    
                }
    
                return build;
    
            }
    
            function buildGeometryType( primitives, sources, vertices ) {
    
                var build = {};
    
                var position = { array: [], stride: 0 };
                var normal = { array: [], stride: 0 };
                var uv = { array: [], stride: 0 };
                var color = { array: [], stride: 0 };
    
                var skinIndex = { array: [], stride: 4 };
                var skinWeight = { array: [], stride: 4 };
    
                var geometry = new THREE.BufferGeometry();
    
                var materialKeys = [];
    
                var start = 0, count = 0;
    
                for ( var p = 0; p < primitives.length; p ++ ) {
    
                    var primitive = primitives[ p ];
                    var inputs = primitive.inputs;
                    var triangleCount = 1;
    
                    if ( primitive.vcount && primitive.vcount[ 0 ] === 4 ) {
    
                        triangleCount = 2; // one quad -> two triangles
    
                    }
    
                    // groups
    
                    if ( primitive.type === 'lines' || primitive.type === 'linestrips' ) {
    
                        count = primitive.count * 2;
    
                    } else {
    
                        count = primitive.count * 3 * triangleCount;
    
                    }
    
                    geometry.addGroup( start, count, p );
                    start += count;
    
                    // material
    
                    if ( primitive.material ) {
    
                        materialKeys.push( primitive.material );
    
                    }
    
                    // geometry data
    
                    for ( var name in inputs ) {
    
                        var input = inputs[ name ];
    
                        switch ( name )	{
    
                            case 'VERTEX':
                                for ( var key in vertices ) {
    
                                    var id = vertices[ key ];
    
                                    switch ( key ) {
    
                                        case 'POSITION':
                                            buildGeometryData( primitive, sources[ id ], input.offset, position.array );
                                            position.stride = sources[ id ].stride;
    
                                            if ( sources.skinWeights && sources.skinIndices ) {
    
                                                buildGeometryData( primitive, sources.skinIndices, input.offset, skinIndex.array );
                                                buildGeometryData( primitive, sources.skinWeights, input.offset, skinWeight.array );
    
                                            }
                                            break;
    
                                        case 'NORMAL':
                                            buildGeometryData( primitive, sources[ id ], input.offset, normal.array );
                                            normal.stride = sources[ id ].stride;
                                            break;
    
                                        case 'COLOR':
                                            buildGeometryData( primitive, sources[ id ], input.offset, color.array );
                                            color.stride = sources[ id ].stride;
                                            break;
    
                                        case 'TEXCOORD':
                                            buildGeometryData( primitive, sources[ id ], input.offset, uv.array );
                                            uv.stride = sources[ id ].stride;
                                            break;
    
                                        default:
                                            console.warn( 'THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.', key );
    
                                    }
    
                                }
                                break;
    
                            case 'NORMAL':
                                buildGeometryData( primitive, sources[ input.id ], input.offset, normal.array );
                                normal.stride = sources[ input.id ].stride;
                                break;
    
                            case 'COLOR':
                                buildGeometryData( primitive, sources[ input.id ], input.offset, color.array );
                                color.stride = sources[ input.id ].stride;
                                break;
    
                            case 'TEXCOORD':
                                buildGeometryData( primitive, sources[ input.id ], input.offset, uv.array );
                                uv.stride = sources[ input.id ].stride;
                                break;
    
                        }
    
                    }
    
                }
    
                // build geometry
    
                if ( position.array.length > 0 ) geometry.addAttribute( 'position', new THREE.Float32BufferAttribute( position.array, position.stride ) );
                if ( normal.array.length > 0 ) geometry.addAttribute( 'normal', new THREE.Float32BufferAttribute( normal.array, normal.stride ) );
                if ( color.array.length > 0 ) geometry.addAttribute( 'color', new THREE.Float32BufferAttribute( color.array, color.stride ) );
                if ( uv.array.length > 0 ) geometry.addAttribute( 'uv', new THREE.Float32BufferAttribute( uv.array, uv.stride ) );
    
                if ( skinIndex.array.length > 0 ) geometry.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( skinIndex.array, skinIndex.stride ) );
                if ( skinWeight.array.length > 0 ) geometry.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( skinWeight.array, skinWeight.stride ) );
    
                build.data = geometry;
                build.type = primitives[ 0 ].type;
                build.materialKeys = materialKeys;
    
                return build;
    
            }
    
            function buildGeometryData( primitive, source, offset, array ) {
    
                var indices = primitive.p;
                var stride = primitive.stride;
                var vcount = primitive.vcount;
    
                function pushVector( i ) {
    
                    var index = indices[ i + offset ] * sourceStride;
                    var length = index + sourceStride;
    
                    for ( ; index < length; index ++ ) {
    
                        array.push( sourceArray[ index ] );
    
                    }
    
                }
    
                var maxcount = 0;
    
                var sourceArray = source.array;
                var sourceStride = source.stride;
    
                if ( primitive.vcount !== undefined ) {
    
                    var index = 0;
    
                    for ( var i = 0, l = vcount.length; i < l; i ++ ) {
    
                        var count = vcount[ i ];
    
                        if ( count === 4 ) {
    
                            var a = index + stride * 0;
                            var b = index + stride * 1;
                            var c = index + stride * 2;
                            var d = index + stride * 3;
    
                            pushVector( a ); pushVector( b ); pushVector( d );
                            pushVector( b ); pushVector( c ); pushVector( d );
    
                        } else if ( count === 3 ) {
    
                            var a = index + stride * 0;
                            var b = index + stride * 1;
                            var c = index + stride * 2;
    
                            pushVector( a ); pushVector( b ); pushVector( c );
    
                        } else {
    
                            maxcount = Math.max( maxcount, count );
    
                        }
    
                        index += stride * count;
    
                    }
    
                    if ( maxcount > 0 ) {
    
                        console.log( 'THREE.ColladaLoader: Geometry has faces with more than 4 vertices.' );
    
                    }
    
                } else {
    
                    for ( var i = 0, l = indices.length; i < l; i += stride ) {
    
                        pushVector( i );
    
                    }
    
                }
    
            }
    
            function getGeometry( id ) {
    
                return getBuild( library.geometries[ id ], buildGeometry );
    
            }
    
            // kinematics
    
            function parseKinematicsModel( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' ) || '',
                    joints: {},
                    links: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'technique_common':
                            parseKinematicsTechniqueCommon( child, data );
                            break;
    
                    }
    
                }
    
                library.kinematicsModels[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildKinematicsModel( data ) {
    
                if ( data.build !== undefined ) return data.build;
    
                return data;
    
            }
    
            function getKinematicsModel( id ) {
    
                return getBuild( library.kinematicsModels[ id ], buildKinematicsModel );
    
            }
    
            function parseKinematicsTechniqueCommon( xml, data ) {
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'joint':
                            data.joints[ child.getAttribute( 'sid' ) ] = parseKinematicsJoint( child );
                            break;
    
                        case 'link':
                            data.links.push( parseKinematicsLink( child ) );
                            break;
    
                    }
    
                }
    
            }
    
            function parseKinematicsJoint( xml ) {
    
                var data;
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'prismatic':
                        case 'revolute':
                            data = parseKinematicsJointParameter( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseKinematicsJointParameter( xml, data ) {
    
                var data = {
                    sid: xml.getAttribute( 'sid' ),
                    name: xml.getAttribute( 'name' ) || '',
                    axis: new THREE.Vector3(),
                    limits: {
                        min: 0,
                        max: 0
                    },
                    type: xml.nodeName,
                    static: false,
                    zeroPosition: 0,
                    middlePosition: 0
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'axis':
                            var array = parseFloats( child.textContent );
                            data.axis.fromArray( array );
                            break;
                        case 'limits':
                            var max = child.getElementsByTagName( 'max' )[ 0 ];
                            var min = child.getElementsByTagName( 'min' )[ 0 ];
    
                            data.limits.max = parseFloat( max.textContent );
                            data.limits.min = parseFloat( min.textContent );
                            break;
    
                    }
    
                }
    
                // if min is equal to or greater than max, consider the joint static
    
                if ( data.limits.min >= data.limits.max ) {
    
                    data.static = true;
    
                }
    
                // calculate middle position
    
                data.middlePosition = ( data.limits.min + data.limits.max ) / 2.0;
    
                return data;
    
            }
    
            function parseKinematicsLink( xml ) {
    
                var data = {
                    sid: xml.getAttribute( 'sid' ),
                    name: xml.getAttribute( 'name' ) || '',
                    attachments: [],
                    transforms: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'attachment_full':
                            data.attachments.push( parseKinematicsAttachment( child ) );
                            break;
    
                        case 'matrix':
                        case 'translate':
                        case 'rotate':
                            data.transforms.push( parseKinematicsTransform( child ) );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseKinematicsAttachment( xml ) {
    
                var data = {
                    joint: xml.getAttribute( 'joint' ).split( '/' ).pop(),
                    transforms: [],
                    links: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'link':
                            data.links.push( parseKinematicsLink( child ) );
                            break;
    
                        case 'matrix':
                        case 'translate':
                        case 'rotate':
                            data.transforms.push( parseKinematicsTransform( child ) );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseKinematicsTransform( xml ) {
    
                var data = {
                    type: xml.nodeName
                };
    
                var array = parseFloats( xml.textContent );
    
                switch ( data.type ) {
    
                    case 'matrix':
                        data.obj = new THREE.Matrix4();
                        data.obj.fromArray( array ).transpose();
                        break;
    
                    case 'translate':
                        data.obj = new THREE.Vector3();
                        data.obj.fromArray( array );
                        break;
    
                    case 'rotate':
                        data.obj = new THREE.Vector3();
                        data.obj.fromArray( array );
                        data.angle = THREE.Math.degToRad( array[ 3 ] );
                        break;
    
                }
    
                return data;
    
            }
    
            function parseKinematicsScene( xml ) {
    
                var data = {
                    bindJointAxis: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'bind_joint_axis':
                            data.bindJointAxis.push( parseKinematicsBindJointAxis( child ) );
                            break;
    
                    }
    
                }
    
                library.kinematicsScenes[ parseId( xml.getAttribute( 'url' ) ) ] = data;
    
            }
    
            function parseKinematicsBindJointAxis( xml ) {
    
                var data = {
                    target: xml.getAttribute( 'target' ).split( '/' ).pop()
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'axis':
                            var param = child.getElementsByTagName( 'param' )[ 0 ];
                            data.axis = param.textContent;
                            var tmpJointIndex = data.axis.split( 'inst_' ).pop().split( 'axis' )[ 0 ];
                            data.jointIndex = tmpJointIndex.substr( 0, tmpJointIndex.length - 1 );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildKinematicsScene( data ) {
    
                if ( data.build !== undefined ) return data.build;
    
                return data;
    
            }
    
            function getKinematicsScene( id ) {
    
                return getBuild( library.kinematicsScenes[ id ], buildKinematicsScene );
    
            }
    
            function setupKinematics() {
    
                var kinematicsModelId = Object.keys( library.kinematicsModels )[ 0 ];
                var kinematicsSceneId = Object.keys( library.kinematicsScenes )[ 0 ];
                var visualSceneId = Object.keys( library.visualScenes )[ 0 ];
    
                if ( kinematicsModelId === undefined || kinematicsSceneId === undefined ) return;
    
                var kinematicsModel = getKinematicsModel( kinematicsModelId );
                var kinematicsScene = getKinematicsScene( kinematicsSceneId );
                var visualScene = getVisualScene( visualSceneId );
    
                var bindJointAxis = kinematicsScene.bindJointAxis;
                var jointMap = {};
    
                for ( var i = 0, l = bindJointAxis.length; i < l; i ++ ) {
    
                    var axis = bindJointAxis[ i ];
    
                    // the result of the following query is an element of type 'translate', 'rotate','scale' or 'matrix'
    
                    var targetElement = collada.querySelector( '[sid="' + axis.target + '"]' );
    
                    if ( targetElement ) {
    
                        // get the parent of the transfrom element
    
                        var parentVisualElement = targetElement.parentElement;
    
                        // connect the joint of the kinematics model with the element in the visual scene
    
                        connect( axis.jointIndex, parentVisualElement );
    
                    }
    
                }
    
                function connect( jointIndex, visualElement ) {
    
                    var visualElementName = visualElement.getAttribute( 'name' );
                    var joint = kinematicsModel.joints[ jointIndex ];
    
                    visualScene.traverse( function ( object ) {
    
                        if ( object.name === visualElementName ) {
    
                            jointMap[ jointIndex ] = {
                                object: object,
                                transforms: buildTransformList( visualElement ),
                                joint: joint,
                                position: joint.zeroPosition
                            };
    
                        }
    
                    } );
    
                }
    
                var m0 = new THREE.Matrix4();
    
                kinematics = {
    
                    joints: kinematicsModel && kinematicsModel.joints,
    
                    getJointValue: function ( jointIndex ) {
    
                        var jointData = jointMap[ jointIndex ];
    
                        if ( jointData ) {
    
                            return jointData.position;
    
                        } else {
    
                            console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' doesn\'t exist.' );
    
                        }
    
                    },
    
                    setJointValue: function ( jointIndex, value ) {
    
                        var jointData = jointMap[ jointIndex ];
    
                        if ( jointData ) {
    
                            var joint = jointData.joint;
    
                            if ( value > joint.limits.max || value < joint.limits.min ) {
    
                                console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').' );
    
                            } else if ( joint.static ) {
    
                                console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' is static.' );
    
                            } else {
    
                                var object = jointData.object;
                                var axis = joint.axis;
                                var transforms = jointData.transforms;
    
                                matrix.identity();
    
                                // each update, we have to apply all transforms in the correct order
    
                                for ( var i = 0; i < transforms.length; i ++ ) {
    
                                    var transform = transforms[ i ];
    
                                    // if there is a connection of the transform node with a joint, apply the joint value
    
                                    if ( transform.sid && transform.sid.indexOf( jointIndex ) !== - 1 ) {
    
                                        switch ( joint.type ) {
    
                                            case 'revolute':
                                                matrix.multiply( m0.makeRotationAxis( axis, THREE.Math.degToRad( value ) ) );
                                                break;
    
                                            case 'prismatic':
                                                matrix.multiply( m0.makeTranslation( axis.x * value, axis.y * value, axis.z * value ) );
                                                break;
    
                                            default:
                                                console.warn( 'THREE.ColladaLoader: Unknown joint type: ' + joint.type );
                                                break;
    
                                        }
    
                                    } else {
    
                                        switch ( transform.type ) {
    
                                            case 'matrix':
                                                matrix.multiply( transform.obj );
                                                break;
    
                                            case 'translate':
                                                matrix.multiply( m0.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );
                                                break;
    
                                            case 'scale':
                                                matrix.scale( transform.obj );
                                                break;
    
                                            case 'rotate':
                                                matrix.multiply( m0.makeRotationAxis( transform.obj, transform.angle ) );
                                                break;
    
                                        }
    
                                    }
    
                                }
    
                                object.matrix.copy( matrix );
                                object.matrix.decompose( object.position, object.quaternion, object.scale );
    
                                jointMap[ jointIndex ].position = value;
    
                            }
    
                        } else {
    
                            console.log( 'THREE.ColladaLoader: ' + jointIndex + ' does not exist.' );
    
                        }
    
                    }
    
                };
    
            }
    
            function buildTransformList( node ) {
    
                var transforms = [];
    
                var xml = collada.querySelector( '[id="' + node.id + '"]' );
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'matrix':
                            var array = parseFloats( child.textContent );
                            var matrix = new THREE.Matrix4().fromArray( array ).transpose();
                            transforms.push( {
                                sid: child.getAttribute( 'sid' ),
                                type: child.nodeName,
                                obj: matrix
                            } );
                            break;
    
                        case 'translate':
                        case 'scale':
                            var array = parseFloats( child.textContent );
                            var vector = new THREE.Vector3().fromArray( array );
                            transforms.push( {
                                sid: child.getAttribute( 'sid' ),
                                type: child.nodeName,
                                obj: vector
                            } );
                            break;
    
                        case 'rotate':
                            var array = parseFloats( child.textContent );
                            var vector = new THREE.Vector3().fromArray( array );
                            var angle = THREE.Math.degToRad( array[ 3 ] );
                            transforms.push( {
                                sid: child.getAttribute( 'sid' ),
                                type: child.nodeName,
                                obj: vector,
                                angle: angle
                            } );
                            break;
    
                    }
    
                }
    
                return transforms;
    
            }
    
            // nodes
    
            function prepareNodes( xml ) {
    
                var elements = xml.getElementsByTagName( 'node' );
    
                // ensure all node elements have id attributes
    
                for ( var i = 0; i < elements.length; i ++ ) {
    
                    var element = elements[ i ];
    
                    if ( element.hasAttribute( 'id' ) === false ) {
    
                        element.setAttribute( 'id', generateId() );
    
                    }
    
                }
    
            }
    
            var matrix = new THREE.Matrix4();
            var vector = new THREE.Vector3();
    
            function parseNode( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' ) || '',
                    type: xml.getAttribute( 'type' ),
                    id: xml.getAttribute( 'id' ),
                    sid: xml.getAttribute( 'sid' ),
                    matrix: new THREE.Matrix4(),
                    nodes: [],
                    instanceCameras: [],
                    instanceControllers: [],
                    instanceLights: [],
                    instanceGeometries: [],
                    instanceNodes: [],
                    transforms: {}
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'node':
                            data.nodes.push( child.getAttribute( 'id' ) );
                            parseNode( child );
                            break;
    
                        case 'instance_camera':
                            data.instanceCameras.push( parseId( child.getAttribute( 'url' ) ) );
                            break;
    
                        case 'instance_controller':
                            data.instanceControllers.push( parseNodeInstance( child ) );
                            break;
    
                        case 'instance_light':
                            data.instanceLights.push( parseId( child.getAttribute( 'url' ) ) );
                            break;
    
                        case 'instance_geometry':
                            data.instanceGeometries.push( parseNodeInstance( child ) );
                            break;
    
                        case 'instance_node':
                            data.instanceNodes.push( parseId( child.getAttribute( 'url' ) ) );
                            break;
    
                        case 'matrix':
                            var array = parseFloats( child.textContent );
                            data.matrix.multiply( matrix.fromArray( array ).transpose() );
                            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;
                            break;
    
                        case 'translate':
                            var array = parseFloats( child.textContent );
                            vector.fromArray( array );
                            data.matrix.multiply( matrix.makeTranslation( vector.x, vector.y, vector.z ) );
                            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;
                            break;
    
                        case 'rotate':
                            var array = parseFloats( child.textContent );
                            var angle = THREE.Math.degToRad( array[ 3 ] );
                            data.matrix.multiply( matrix.makeRotationAxis( vector.fromArray( array ), angle ) );
                            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;
                            break;
    
                        case 'scale':
                            var array = parseFloats( child.textContent );
                            data.matrix.scale( vector.fromArray( array ) );
                            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;
                            break;
    
                        case 'extra':
                            break;
    
                        default:
                            console.log( child );
    
                    }
    
                }
    
                library.nodes[ data.id ] = data;
    
                return data;
    
            }
    
            function parseNodeInstance( xml ) {
    
                var data = {
                    id: parseId( xml.getAttribute( 'url' ) ),
                    materials: {},
                    skeletons: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    switch ( child.nodeName ) {
    
                        case 'bind_material':
                            var instances = child.getElementsByTagName( 'instance_material' );
    
                            for ( var j = 0; j < instances.length; j ++ ) {
    
                                var instance = instances[ j ];
                                var symbol = instance.getAttribute( 'symbol' );
                                var target = instance.getAttribute( 'target' );
    
                                data.materials[ symbol ] = parseId( target );
    
                            }
    
                            break;
    
                        case 'skeleton':
                            data.skeletons.push( parseId( child.textContent ) );
                            break;
    
                        default:
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildSkeleton( skeletons, joints ) {
    
                var boneData = [];
                var sortedBoneData = [];
    
                var i, j, data;
    
                // a skeleton can have multiple root bones. collada expresses this
                // situtation with multiple "skeleton" tags per controller instance
    
                for ( i = 0; i < skeletons.length; i ++ ) {
    
                    var skeleton = skeletons[ i ];
                    var root = getNode( skeleton );
    
                    // setup bone data for a single bone hierarchy
    
                    buildBoneHierarchy( root, joints, boneData );
    
                }
    
                // sort bone data (the order is defined in the corresponding controller)
    
                for ( i = 0; i < joints.length; i ++ ) {
    
                    for ( j = 0; j < boneData.length; j ++ ) {
    
                        data = boneData[ j ];
    
                        if ( data.bone.name === joints[ i ].name ) {
    
                            sortedBoneData[ i ] = data;
                            data.processed = true;
                            break;
    
                        }
    
                    }
    
                }
    
                // add unprocessed bone data at the end of the list
    
                for ( i = 0; i < boneData.length; i ++ ) {
    
                    data = boneData[ i ];
    
                    if ( data.processed === false ) {
    
                        sortedBoneData.push( data );
                        data.processed = true;
    
                    }
    
                }
    
                // setup arrays for skeleton creation
    
                var bones = [];
                var boneInverses = [];
    
                for ( i = 0; i < sortedBoneData.length; i ++ ) {
    
                    data = sortedBoneData[ i ];
    
                    bones.push( data.bone );
                    boneInverses.push( data.boneInverse );
    
                }
    
                return new THREE.Skeleton( bones, boneInverses );
    
            }
    
            function buildBoneHierarchy( root, joints, boneData ) {
    
                // setup bone data from visual scene
    
                root.traverse( function ( object ) {
    
                    if ( object.isBone === true ) {
    
                        var boneInverse;
    
                        // retrieve the boneInverse from the controller data
    
                        for ( var i = 0; i < joints.length; i ++ ) {
    
                            var joint = joints[ i ];
    
                            if ( joint.name === object.name ) {
    
                                boneInverse = joint.boneInverse;
                                break;
    
                            }
    
                        }
    
                        if ( boneInverse === undefined ) {
    
                            // Unfortunately, there can be joints in the visual scene that are not part of the
                            // corresponding controller. In this case, we have to create a dummy boneInverse matrix
                            // for the respective bone. This bone won't affect any vertices, because there are no skin indices
                            // and weights defined for it. But we still have to add the bone to the sorted bone list in order to
                            // ensure a correct animation of the model.
    
                             boneInverse = new THREE.Matrix4();
    
                        }
    
                        boneData.push( { bone: object, boneInverse: boneInverse, processed: false } );
    
                    }
    
                } );
    
            }
    
            function buildNode( data ) {
    
                var objects = [];
    
                var matrix = data.matrix;
                var nodes = data.nodes;
                var type = data.type;
                var instanceCameras = data.instanceCameras;
                var instanceControllers = data.instanceControllers;
                var instanceLights = data.instanceLights;
                var instanceGeometries = data.instanceGeometries;
                var instanceNodes = data.instanceNodes;
    
                // nodes
    
                for ( var i = 0, l = nodes.length; i < l; i ++ ) {
    
                    objects.push( getNode( nodes[ i ] ) );
    
                }
    
                // instance cameras
    
                for ( var i = 0, l = instanceCameras.length; i < l; i ++ ) {
    
                    var instanceCamera = getCamera( instanceCameras[ i ] );
    
                    if ( instanceCamera !== null ) {
    
                        objects.push( instanceCamera.clone() );
    
                    }
    
                }
    
                // instance controllers
    
                for ( var i = 0, l = instanceControllers.length; i < l; i ++ ) {
    
                    var instance = instanceControllers[ i ];
                    var controller = getController( instance.id );
                    var geometries = getGeometry( controller.id );
                    var newObjects = buildObjects( geometries, instance.materials );
    
                    var skeletons = instance.skeletons;
                    var joints = controller.skin.joints;
    
                    var skeleton = buildSkeleton( skeletons, joints );
    
                    for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {
    
                        var object = newObjects[ j ];
    
                        if ( object.isSkinnedMesh ) {
    
                            object.bind( skeleton, controller.skin.bindMatrix );
                            object.normalizeSkinWeights();
    
                        }
    
                        objects.push( object );
    
                    }
    
                }
    
                // instance lights
    
                for ( var i = 0, l = instanceLights.length; i < l; i ++ ) {
    
                    var instanceLight = getLight( instanceLights[ i ] );
    
                    if ( instanceLight !== null ) {
    
                        objects.push( instanceLight.clone() );
    
                    }
    
                }
    
                // instance geometries
    
                for ( var i = 0, l = instanceGeometries.length; i < l; i ++ ) {
    
                    var instance = instanceGeometries[ i ];
    
                    // a single geometry instance in collada can lead to multiple object3Ds.
                    // this is the case when primitives are combined like triangles and lines
    
                    var geometries = getGeometry( instance.id );
                    var newObjects = buildObjects( geometries, instance.materials );
    
                    for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {
    
                        objects.push( newObjects[ j ] );
    
                    }
    
                }
    
                // instance nodes
    
                for ( var i = 0, l = instanceNodes.length; i < l; i ++ ) {
    
                    objects.push( getNode( instanceNodes[ i ] ).clone() );
    
                }
    
                var object;
    
                if ( nodes.length === 0 && objects.length === 1 ) {
    
                    object = objects[ 0 ];
    
                } else {
    
                    object = ( type === 'JOINT' ) ? new THREE.Bone() : new THREE.Group();
    
                    for ( var i = 0; i < objects.length; i ++ ) {
    
                        object.add( objects[ i ] );
    
                    }
    
                }
    
                object.name = ( type === 'JOINT' ) ? data.sid : data.name;
                object.matrix.copy( matrix );
                object.matrix.decompose( object.position, object.quaternion, object.scale );
    
                return object;
    
            }
    
            function resolveMaterialBinding( keys, instanceMaterials ) {
    
                var materials = [];
    
                for ( var i = 0, l = keys.length; i < l; i ++ ) {
    
                    var id = instanceMaterials[ keys[ i ] ];
                    materials.push( getMaterial( id ) );
    
                }
    
                return materials;
    
            }
    
            function buildObjects( geometries, instanceMaterials ) {
    
                var objects = [];
    
                for ( var type in geometries ) {
    
                    var geometry = geometries[ type ];
    
                    var materials = resolveMaterialBinding( geometry.materialKeys, instanceMaterials );
    
                    // handle case if no materials are defined
    
                    if ( materials.length === 0 ) {
    
                        if ( type === 'lines' || type === 'linestrips' ) {
    
                            materials.push( new THREE.LineBasicMaterial() );
    
                        } else {
    
                            materials.push( new THREE.MeshPhongMaterial() );
    
                        }
    
                    }
    
                    // regard skinning
    
                    var skinning = ( geometry.data.attributes.skinIndex !== undefined );
    
                    if ( skinning ) {
    
                        for ( var i = 0, l = materials.length; i < l; i ++ ) {
    
                            materials[ i ].skinning = true;
    
                        }
    
                    }
    
                    // choose between a single or multi materials (material array)
    
                    var material = ( materials.length === 1 ) ? materials[ 0 ] : materials;
    
                    // now create a specific 3D object
    
                    var object;
    
                    switch ( type ) {
    
                        case 'lines':
                            object = new THREE.LineSegments( geometry.data, material );
                            break;
    
                        case 'linestrips':
                            object = new THREE.Line( geometry.data, material );
                            break;
    
                        case 'triangles':
                        case 'polylist':
                            if ( skinning ) {
    
                                object = new THREE.SkinnedMesh( geometry.data, material );
    
                            } else {
    
                                object = new THREE.Mesh( geometry.data, material );
    
                            }
                            break;
    
                    }
    
                    objects.push( object );
    
                }
    
                return objects;
    
            }
    
            function getNode( id ) {
    
                return getBuild( library.nodes[ id ], buildNode );
    
            }
    
            // visual scenes
    
            function parseVisualScene( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' ),
                    children: []
                };
    
                prepareNodes( xml );
    
                var elements = getElementsByTagName( xml, 'node' );
    
                for ( var i = 0; i < elements.length; i ++ ) {
    
                    data.children.push( parseNode( elements[ i ] ) );
    
                }
    
                library.visualScenes[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildVisualScene( data ) {
    
                var group = new THREE.Group();
                group.name = data.name;
    
                var children = data.children;
    
                for ( var i = 0; i < children.length; i ++ ) {
    
                    var child = children[ i ];
    
                    if ( child.id === null ) {
    
                        group.add( buildNode( child ) );
    
                    } else {
    
                        // if there is an ID, let's try to get the finished build (e.g. joints are already build)
    
                        group.add( getNode( child.id ) );
    
                    }
    
                }
    
                return group;
    
            }
    
            function getVisualScene( id ) {
    
                return getBuild( library.visualScenes[ id ], buildVisualScene );
    
            }
    
            // scenes
    
            function parseScene( xml ) {
    
                var instance = getElementsByTagName( xml, 'instance_visual_scene' )[ 0 ];
                return getVisualScene( parseId( instance.getAttribute( 'url' ) ) );
    
            }
    
            function setupAnimations() {
    
                var clips = library.clips;
    
                if ( isEmpty( clips ) === true ) {
    
                    if ( isEmpty( library.animations ) === false ) {
    
                        // if there are animations but no clips, we create a default clip for playback
    
                        var tracks = [];
    
                        for ( var id in library.animations ) {
    
                            var animationTracks = getAnimation( id );
    
                            for ( var i = 0, l = animationTracks.length; i < l; i ++ ) {
    
                                tracks.push( animationTracks[ i ] );
    
                            }
    
                        }
    
                        animations.push( new THREE.AnimationClip( 'default', - 1, tracks ) );
    
                    }
    
                } else {
    
                    for ( var id in clips ) {
    
                        animations.push( getAnimationClip( id ) );
    
                    }
    
                }
    
            }
    
            console.time( 'THREE.ColladaLoader' );
    
            if ( text.length === 0 ) {
    
                return { scene: new THREE.Scene() };
    
            }
    
            console.time( 'THREE.ColladaLoader: DOMParser' );
    
            var xml = new DOMParser().parseFromString( text, 'application/xml' );
    
            console.timeEnd( 'THREE.ColladaLoader: DOMParser' );
    
            var collada = getElementsByTagName( xml, 'COLLADA' )[ 0 ];
    
            // metadata
    
            var version = collada.getAttribute( 'version' );
            console.log( 'THREE.ColladaLoader: File version', version );
    
            var asset = parseAsset( getElementsByTagName( collada, 'asset' )[ 0 ] );
            var textureLoader = new THREE.TextureLoader( this.manager );
            textureLoader.setPath( path ).setCrossOrigin( this.crossOrigin );
    
            //
    
            var animations = [];
            var kinematics = {};
            var count = 0;
    
            //
    
            var library = {
                animations: {},
                clips: {},
                controllers: {},
                images: {},
                effects: {},
                materials: {},
                cameras: {},
                lights: {},
                geometries: {},
                nodes: {},
                visualScenes: {},
                kinematicsModels: {},
                kinematicsScenes: {}
            };
    
            console.time( 'THREE.ColladaLoader: Parse' );
    
            parseLibrary( collada, 'library_animations', 'animation', parseAnimation );
            parseLibrary( collada, 'library_animation_clips', 'animation_clip', parseAnimationClip );
            parseLibrary( collada, 'library_controllers', 'controller', parseController );
            parseLibrary( collada, 'library_images', 'image', parseImage );
            parseLibrary( collada, 'library_effects', 'effect', parseEffect );
            parseLibrary( collada, 'library_materials', 'material', parseMaterial );
            parseLibrary( collada, 'library_cameras', 'camera', parseCamera );
            parseLibrary( collada, 'library_lights', 'light', parseLight );
            parseLibrary( collada, 'library_geometries', 'geometry', parseGeometry );
            parseLibrary( collada, 'library_nodes', 'node', parseNode );
            parseLibrary( collada, 'library_visual_scenes', 'visual_scene', parseVisualScene );
            parseLibrary( collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel );
            parseLibrary( collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene );
    
            console.timeEnd( 'THREE.ColladaLoader: Parse' );
    
            console.time( 'THREE.ColladaLoader: Build' );
    
            buildLibrary( library.animations, buildAnimation );
            buildLibrary( library.clips, buildAnimationClip );
            buildLibrary( library.controllers, buildController );
            buildLibrary( library.images, buildImage );
            buildLibrary( library.effects, buildEffect );
            buildLibrary( library.materials, buildMaterial );
            buildLibrary( library.cameras, buildCamera );
            buildLibrary( library.lights, buildLight );
            buildLibrary( library.geometries, buildGeometry );
            buildLibrary( library.visualScenes, buildVisualScene );
    
            console.timeEnd( 'THREE.ColladaLoader: Build' );
    
            setupAnimations();
            setupKinematics();
    
            var scene = parseScene( getElementsByTagName( collada, 'scene' )[ 0 ] );
    
            if ( asset.upAxis === 'Z_UP' ) {
    
                scene.rotation.x = - Math.PI / 2;
    
            }
    
            scene.scale.multiplyScalar( asset.unit );
    
            console.timeEnd( 'THREE.ColladaLoader' );
    
            return {
                animations: animations,
                kinematics: kinematics,
                library: library,
                scene: scene
            };
    
        }
    
    };
},{}],"framer-form/form/lib/FBXLoader":[function(require,module,exports){
/**
 * @author Kyle-Larson https://github.com/Kyle-Larson
 * @author Takahiro https://github.com/takahirox
 * @author Lewy Blue https://github.com/looeee
 *
 * Loader loads FBX file and generates Group representing FBX scene.
 * Requires FBX file to be >= 7.0 and in ASCII or to be any version in Binary format.
 *
 * Supports:
 * 	Mesh Generation (Positional Data)
 * 	Normal Data (Per Vertex Drawing Instance)
 *	UV Data (Per Vertex Drawing Instance)
 *	Skinning
 *	Animation
 * 	- Separated Animations based on stacks.
 * 	- Skeletal & Non-Skeletal Animations
 *	NURBS (Open, Closed and Periodic forms)
 *
 * Needs Support:
 *	Euler rotation order
 *
 *
 * FBX format references:
 * 	https://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure
 *
 * 	Binary format specification:
 *		https://code.blender.org/2013/08/fbx-binary-file-format-specification/
 *		https://wiki.rogiken.org/specifications/file-format/fbx/ (more detail but Japanese)
 */

( function () {
    
        THREE.FBXLoader = function ( manager ) {
    
            this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;
    
        };
    
        Object.assign( THREE.FBXLoader.prototype, {
    
            load: function ( url, onLoad, onProgress, onError ) {
    
                var self = this;
    
                var resourceDirectory = THREE.LoaderUtils.extractUrlBase( url );
    
                var loader = new THREE.FileLoader( this.manager );
                loader.setResponseType( 'arraybuffer' );
                loader.load( url, function ( buffer ) {
    
                    try {
    
                        var scene = self.parse( buffer, resourceDirectory );
                        onLoad( scene );
    
                    } catch ( error ) {
    
                        window.setTimeout( function () {
    
                            if ( onError ) onError( error );
    
                            self.manager.itemError( url );
    
                        }, 0 );
    
                    }
    
                }, onProgress, onError );
    
            },
    
            parse: function ( FBXBuffer, resourceDirectory ) {
    
                var FBXTree;
    
                if ( isFbxFormatBinary( FBXBuffer ) ) {
    
                    FBXTree = new BinaryParser().parse( FBXBuffer );
    
                } else {
    
                    var FBXText = convertArrayBufferToString( FBXBuffer );
    
                    if ( ! isFbxFormatASCII( FBXText ) ) {
    
                        throw new Error( 'THREE.FBXLoader: Unknown format.' );
    
                    }
    
                    if ( getFbxVersion( FBXText ) < 7000 ) {
    
                        throw new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );
    
                    }
    
                    FBXTree = new TextParser().parse( FBXText );
    
                }
    
                // console.log( FBXTree );
    
                var connections = parseConnections( FBXTree );
                var images = parseImages( FBXTree );
                var textures = parseTextures( FBXTree, new THREE.TextureLoader( this.manager ).setPath( resourceDirectory ), images, connections );
                var materials = parseMaterials( FBXTree, textures, connections );
                var skeletons = parseDeformers( FBXTree, connections );
                var geometryMap = parseGeometries( FBXTree, connections, skeletons );
                var sceneGraph = parseScene( FBXTree, connections, skeletons, geometryMap, materials );
    
                return sceneGraph;
    
            }
    
        } );
    
        // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )
        // and details the connection type
        function parseConnections( FBXTree ) {
    
            var connectionMap = new Map();
    
            if ( 'Connections' in FBXTree ) {
    
                var rawConnections = FBXTree.Connections.connections;
    
                rawConnections.forEach( function ( rawConnection ) {
    
                    var fromID = rawConnection[ 0 ];
                    var toID = rawConnection[ 1 ];
                    var relationship = rawConnection[ 2 ];
    
                    if ( ! connectionMap.has( fromID ) ) {
    
                        connectionMap.set( fromID, {
                            parents: [],
                            children: []
                        } );
    
                    }
    
                    var parentRelationship = { ID: toID, relationship: relationship };
                    connectionMap.get( fromID ).parents.push( parentRelationship );
    
                    if ( ! connectionMap.has( toID ) ) {
    
                        connectionMap.set( toID, {
                            parents: [],
                            children: []
                        } );
    
                    }
    
                    var childRelationship = { ID: fromID, relationship: relationship };
                    connectionMap.get( toID ).children.push( childRelationship );
    
                } );
    
            }
    
            return connectionMap;
    
        }
    
        // Parse FBXTree.Objects.Video for embedded image data
        // These images are connected to textures in FBXTree.Objects.Textures
        // via FBXTree.Connections.
        function parseImages( FBXTree ) {
    
            var images = {};
            var blobs = {};
    
            if ( 'Video' in FBXTree.Objects ) {
    
                var videoNodes = FBXTree.Objects.Video;
    
                for ( var nodeID in videoNodes ) {
    
                    var videoNode = videoNodes[ nodeID ];
    
                    var id = parseInt( nodeID );
    
                    images[ id ] = videoNode.Filename;
    
                    // raw image data is in videoNode.Content
                    if ( 'Content' in videoNode ) {
    
                        var arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );
                        var base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );
    
                        if ( arrayBufferContent || base64Content ) {
    
                            var image = parseImage( videoNodes[ nodeID ] );
    
                            blobs[ videoNode.Filename ] = image;
    
                        }
    
                    }
    
                }
    
            }
    
            for ( var id in images ) {
    
                var filename = images[ id ];
    
                if ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];
                else images[ id ] = images[ id ].split( '\\' ).pop();
    
            }
    
            return images;
    
        }
    
        // Parse embedded image data in FBXTree.Video.Content
        function parseImage( videoNode ) {
    
            var content = videoNode.Content;
            var fileName = videoNode.RelativeFilename || videoNode.Filename;
            var extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();
    
            var type;
    
            switch ( extension ) {
    
                case 'bmp':
    
                    type = 'image/bmp';
                    break;
    
                case 'jpg':
                case 'jpeg':
    
                    type = 'image/jpeg';
                    break;
    
                case 'png':
    
                    type = 'image/png';
                    break;
    
                case 'tif':
    
                    type = 'image/tiff';
                    break;
    
                default:
    
                    console.warn( 'FBXLoader: Image type "' + extension + '" is not supported.' );
                    return;
    
            }
    
            if ( typeof content === 'string' ) { // ASCII format
    
                return 'data:' + type + ';base64,' + content;
    
            } else { // Binary Format
    
                var array = new Uint8Array( content );
                return window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );
    
            }
    
        }
    
        // Parse nodes in FBXTree.Objects.Texture
        // These contain details such as UV scaling, cropping, rotation etc and are connected
        // to images in FBXTree.Objects.Video
        function parseTextures( FBXTree, loader, images, connections ) {
    
            var textureMap = new Map();
    
            if ( 'Texture' in FBXTree.Objects ) {
    
                var textureNodes = FBXTree.Objects.Texture;
                for ( var nodeID in textureNodes ) {
    
                    var texture = parseTexture( textureNodes[ nodeID ], loader, images, connections );
                    textureMap.set( parseInt( nodeID ), texture );
    
                }
    
            }
    
            return textureMap;
    
        }
    
        // Parse individual node in FBXTree.Objects.Texture
        function parseTexture( textureNode, loader, images, connections ) {
    
            var texture = loadTexture( textureNode, loader, images, connections );
    
            texture.ID = textureNode.id;
    
            texture.name = textureNode.attrName;
    
            var wrapModeU = textureNode.WrapModeU;
            var wrapModeV = textureNode.WrapModeV;
    
            var valueU = wrapModeU !== undefined ? wrapModeU.value : 0;
            var valueV = wrapModeV !== undefined ? wrapModeV.value : 0;
    
            // http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a
            // 0: repeat(default), 1: clamp
    
            texture.wrapS = valueU === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;
            texture.wrapT = valueV === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;
    
            if ( 'Scaling' in textureNode ) {
    
                var values = textureNode.Scaling.value;
    
                texture.repeat.x = values[ 0 ];
                texture.repeat.y = values[ 1 ];
    
            }
    
            return texture;
    
        }
    
        // load a texture specified as a blob or data URI, or via an external URL using THREE.TextureLoader
        function loadTexture( textureNode, loader, images, connections ) {
    
            var fileName;
    
            var currentPath = loader.path;
    
            var children = connections.get( textureNode.id ).children;
    
            if ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {
    
                fileName = images[ children[ 0 ].ID ];
    
                if ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {
    
                    loader.setPath( undefined );
    
                }
    
            }
    
            var texture = loader.load( fileName );
    
            loader.setPath( currentPath );
    
            return texture;
    
        }
    
        // Parse nodes in FBXTree.Objects.Material
        function parseMaterials( FBXTree, textureMap, connections ) {
    
            var materialMap = new Map();
    
            if ( 'Material' in FBXTree.Objects ) {
    
                var materialNodes = FBXTree.Objects.Material;
    
                for ( var nodeID in materialNodes ) {
    
                    var material = parseMaterial( FBXTree, materialNodes[ nodeID ], textureMap, connections );
    
                    if ( material !== null ) materialMap.set( parseInt( nodeID ), material );
    
                }
    
            }
    
            return materialMap;
    
        }
    
        // Parse single node in FBXTree.Objects.Material
        // Materials are connected to texture maps in FBXTree.Objects.Textures
        // FBX format currently only supports Lambert and Phong shading models
        function parseMaterial( FBXTree, materialNode, textureMap, connections ) {
    
            var ID = materialNode.id;
            var name = materialNode.attrName;
            var type = materialNode.ShadingModel;
    
            //Case where FBX wraps shading model in property object.
            if ( typeof type === 'object' ) {
    
                type = type.value;
    
            }
    
            // Ignore unused materials which don't have any connections.
            if ( ! connections.has( ID ) ) return null;
    
            var parameters = parseParameters( FBXTree, materialNode, textureMap, ID, connections );
    
            var material;
    
            switch ( type.toLowerCase() ) {
    
                case 'phong':
                    material = new THREE.MeshPhongMaterial();
                    break;
                case 'lambert':
                    material = new THREE.MeshLambertMaterial();
                    break;
                default:
                    console.warn( 'THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.', type );
                    material = new THREE.MeshPhongMaterial( { color: 0x3300ff } );
                    break;
    
            }
    
            material.setValues( parameters );
            material.name = name;
    
            return material;
    
        }
    
        // Parse FBX material and return parameters suitable for a three.js material
        // Also parse the texture map and return any textures associated with the material
        function parseParameters( FBXTree, properties, textureMap, ID, connections ) {
    
            var parameters = {};
    
            if ( properties.BumpFactor ) {
    
                parameters.bumpScale = properties.BumpFactor.value;
    
            }
            if ( properties.Diffuse ) {
    
                parameters.color = new THREE.Color().fromArray( properties.Diffuse.value );
    
            }
            if ( properties.DisplacementFactor ) {
    
                parameters.displacementScale = properties.DisplacementFactor.value;
    
            }
            if ( properties.ReflectionFactor ) {
    
                parameters.reflectivity = properties.ReflectionFactor.value;
    
            }
            if ( properties.Specular ) {
    
                parameters.specular = new THREE.Color().fromArray( properties.Specular.value );
    
            }
            if ( properties.Shininess ) {
    
                parameters.shininess = properties.Shininess.value;
    
            }
            if ( properties.Emissive ) {
    
                parameters.emissive = new THREE.Color().fromArray( properties.Emissive.value );
    
            }
            if ( properties.EmissiveFactor ) {
    
                parameters.emissiveIntensity = parseFloat( properties.EmissiveFactor.value );
    
            }
            if ( properties.Opacity ) {
    
                parameters.opacity = parseFloat( properties.Opacity.value );
    
            }
            if ( parameters.opacity < 1.0 ) {
    
                parameters.transparent = true;
    
            }
    
            connections.get( ID ).children.forEach( function ( child ) {
    
                var type = child.relationship;
    
                switch ( type ) {
    
                    case 'Bump':
                        parameters.bumpMap = textureMap.get( child.ID );
                        break;
    
                    case 'DiffuseColor':
                        parameters.map = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
                    case 'DisplacementColor':
                        parameters.displacementMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
    
                    case 'EmissiveColor':
                        parameters.emissiveMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
                    case 'NormalMap':
                        parameters.normalMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
                    case 'ReflectionColor':
                        parameters.envMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        parameters.envMap.mapping = THREE.EquirectangularReflectionMapping;
                        break;
    
                    case 'SpecularColor':
                        parameters.specularMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
                    case 'TransparentColor':
                        parameters.alphaMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        parameters.transparent = true;
                        break;
    
                    case 'AmbientColor':
                    case 'ShininessExponent': // AKA glossiness map
                    case 'SpecularFactor': // AKA specularLevel
                    case 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor
                    default:
                        console.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );
                        break;
    
                }
    
            } );
    
            return parameters;
    
        }
    
        // get a texture from the textureMap for use by a material.
        function getTexture( FBXTree, textureMap, id, connections ) {
    
            // if the texture is a layered texture, just use the first layer and issue a warning
            if ( 'LayeredTexture' in FBXTree.Objects && id in FBXTree.Objects.LayeredTexture ) {
    
                console.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );
                id = connections.get( id ).children[ 0 ].ID;
    
            }
    
            return textureMap.get( id );
    
        }
    
        // Parse nodes in FBXTree.Objects.Deformer
        // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here
        // Generates map of Skeleton-like objects for use later when generating and binding skeletons.
        function parseDeformers( FBXTree, connections ) {
    
            var skeletons = {};
    
            if ( 'Deformer' in FBXTree.Objects ) {
    
                var DeformerNodes = FBXTree.Objects.Deformer;
    
                for ( var nodeID in DeformerNodes ) {
    
                    var deformerNode = DeformerNodes[ nodeID ];
    
                    if ( deformerNode.attrType === 'Skin' ) {
    
                        var relationships = connections.get( parseInt( nodeID ) );
    
                        var skeleton = parseSkeleton( relationships, DeformerNodes );
                        skeleton.ID = nodeID;
    
                        if ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );
                        skeleton.geometryID = relationships.parents[ 0 ].ID;
    
                        skeletons[ nodeID ] = skeleton;
    
                    }
    
                }
    
            }
    
            return skeletons;
    
        }
    
        // Parse single nodes in FBXTree.Objects.Deformer
        // The top level deformer nodes have type 'Skin' and subDeformer nodes have type 'Cluster'
        // Each skin node represents a skeleton and each cluster node represents a bone
        function parseSkeleton( connections, deformerNodes ) {
    
            var rawBones = [];
    
            connections.children.forEach( function ( child ) {
    
                var subDeformerNode = deformerNodes[ child.ID ];
    
                if ( subDeformerNode.attrType !== 'Cluster' ) return;
    
                var rawBone = {
    
                    ID: child.ID,
                    indices: [],
                    weights: [],
                    transform: new THREE.Matrix4().fromArray( subDeformerNode.Transform.a ),
                    transformLink: new THREE.Matrix4().fromArray( subDeformerNode.TransformLink.a ),
                    linkMode: subDeformerNode.Mode,
    
                };
    
                if ( 'Indexes' in subDeformerNode ) {
    
                    rawBone.indices = subDeformerNode.Indexes.a;
                    rawBone.weights = subDeformerNode.Weights.a;
    
                }
    
                rawBones.push( rawBone );
    
            } );
    
            return {
    
                rawBones: rawBones,
                bones: []
    
            };
    
        }
    
        // Parse nodes in FBXTree.Objects.Geometry
        function parseGeometries( FBXTree, connections, skeletons ) {
    
            var geometryMap = new Map();
    
            if ( 'Geometry' in FBXTree.Objects ) {
    
                var geometryNodes = FBXTree.Objects.Geometry;
    
    
    
                for ( var nodeID in geometryNodes ) {
    
                    var relationships = connections.get( parseInt( nodeID ) );
                    var geo = parseGeometry( FBXTree, relationships, geometryNodes[ nodeID ], skeletons );
    
                    geometryMap.set( parseInt( nodeID ), geo );
    
                }
    
            }
    
            return geometryMap;
    
        }
    
        // Parse single node in FBXTree.Objects.Geometry
        function parseGeometry( FBXTree, relationships, geometryNode, skeletons ) {
    
            switch ( geometryNode.attrType ) {
    
                case 'Mesh':
                    return parseMeshGeometry( FBXTree, relationships, geometryNode, skeletons );
                    break;
    
                case 'NurbsCurve':
                    return parseNurbsGeometry( geometryNode );
                    break;
    
            }
    
        }
    
    
        // Parse single node mesh geometry in FBXTree.Objects.Geometry
        function parseMeshGeometry( FBXTree, relationships, geometryNode, skeletons ) {
    
            var modelNodes = relationships.parents.map( function ( parent ) {
    
                return FBXTree.Objects.Model[ parent.ID ];
    
            } );
    
            // don't create geometry if it is not associated with any models
            if ( modelNodes.length === 0 ) return;
    
            var skeleton = relationships.children.reduce( function ( skeleton, child ) {
    
                if ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];
    
                return skeleton;
    
            }, null );
    
            var preTransform = new THREE.Matrix4();
    
            // TODO: if there is more than one model associated with the geometry, AND the models have
            // different geometric transforms, then this will cause problems
            // if ( modelNodes.length > 1 ) { }
    
            // For now just assume one model and get the preRotations from that
            var modelNode = modelNodes[ 0 ];
    
            if ( 'GeometricRotation' in modelNode ) {
    
                var array = modelNode.GeometricRotation.value.map( THREE.Math.degToRad );
                array[ 3 ] = 'ZYX';
    
                preTransform.makeRotationFromEuler( new THREE.Euler().fromArray( array ) );
    
            }
    
            if ( 'GeometricTranslation' in modelNode ) {
    
                preTransform.setPosition( new THREE.Vector3().fromArray( modelNode.GeometricTranslation.value ) );
    
            }
    
            return genGeometry( FBXTree, relationships, geometryNode, skeleton, preTransform );
    
        }
    
        // Generate a THREE.BufferGeometry from a node in FBXTree.Objects.Geometry
        function genGeometry( FBXTree, relationships, geometryNode, skeleton, preTransform ) {
    
            var vertexPositions = geometryNode.Vertices.a;
            var vertexIndices = geometryNode.PolygonVertexIndex.a;
    
            // create arrays to hold the final data used to build the buffergeometry
            var vertexBuffer = [];
            var normalBuffer = [];
            var colorsBuffer = [];
            var uvsBuffer = [];
            var materialIndexBuffer = [];
            var vertexWeightsBuffer = [];
            var weightsIndicesBuffer = [];
    
            if ( geometryNode.LayerElementColor ) {
    
                var colorInfo = getColors( geometryNode.LayerElementColor[ 0 ] );
    
            }
    
            if ( geometryNode.LayerElementMaterial ) {
    
                var materialInfo = getMaterials( geometryNode.LayerElementMaterial[ 0 ] );
    
            }
    
            if ( geometryNode.LayerElementNormal ) {
    
                var normalInfo = getNormals( geometryNode.LayerElementNormal[ 0 ] );
    
            }
    
            if ( geometryNode.LayerElementUV ) {
    
                var uvInfo = [];
                var i = 0;
                while ( geometryNode.LayerElementUV[ i ] ) {
    
                    uvInfo.push( getUVs( geometryNode.LayerElementUV[ i ] ) );
                    i ++;
    
                }
    
            }
    
            var weightTable = {};
    
            if ( skeleton !== null ) {
    
                skeleton.rawBones.forEach( function ( rawBone, i ) {
    
                    // loop over the bone's vertex indices and weights
                    rawBone.indices.forEach( function ( index, j ) {
    
                        if ( weightTable[ index ] === undefined ) weightTable[ index ] = [];
    
                        weightTable[ index ].push( {
    
                            id: i,
                            weight: rawBone.weights[ j ],
    
                        } );
    
                    } );
    
                } );
    
            }
    
            var polygonIndex = 0;
            var faceLength = 0;
            var displayedWeightsWarning = false;
    
            // these will hold data for a single face
            var vertexPositionIndexes = [];
            var faceNormals = [];
            var faceColors = [];
            var faceUVs = [];
            var faceWeights = [];
            var faceWeightIndices = [];
    
            vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {
    
                var endOfFace = false;
    
                // Face index and vertex index arrays are combined in a single array
                // A cube with quad faces looks like this:
                // PolygonVertexIndex: *24 {
                //  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5
                //  }
                // Negative numbers mark the end of a face - first face here is 0, 1, 3, -3
                // to find index of last vertex multiply by -1 and subtract 1: -3 * - 1 - 1 = 2
                if ( vertexIndex < 0 ) {
    
                    vertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1
                    vertexIndices[ polygonVertexIndex ] = vertexIndex;
                    endOfFace = true;
    
                }
    
                var weightIndices = [];
                var weights = [];
    
                vertexPositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );
    
                if ( colorInfo ) {
    
                    var data = getData( polygonVertexIndex, polygonIndex, vertexIndex, colorInfo );
    
                    faceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );
    
                }
    
                if ( skeleton ) {
    
                    if ( weightTable[ vertexIndex ] !== undefined ) {
    
                        weightTable[ vertexIndex ].forEach( function ( wt ) {
    
                            weights.push( wt.weight );
                            weightIndices.push( wt.id );
    
                        } );
    
    
                    }
    
                    if ( weights.length > 4 ) {
    
                        if ( ! displayedWeightsWarning ) {
    
                            console.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );
                            displayedWeightsWarning = true;
    
                        }
    
                        var wIndex = [ 0, 0, 0, 0 ];
                        var Weight = [ 0, 0, 0, 0 ];
    
                        weights.forEach( function ( weight, weightIndex ) {
    
                            var currentWeight = weight;
                            var currentIndex = weightIndices[ weightIndex ];
    
                            Weight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {
    
                                if ( currentWeight > comparedWeight ) {
    
                                    comparedWeightArray[ comparedWeightIndex ] = currentWeight;
                                    currentWeight = comparedWeight;
    
                                    var tmp = wIndex[ comparedWeightIndex ];
                                    wIndex[ comparedWeightIndex ] = currentIndex;
                                    currentIndex = tmp;
    
                                }
    
                            } );
    
                        } );
    
                        weightIndices = wIndex;
                        weights = Weight;
    
                    }
    
                    // if the weight array is shorter than 4 pad with 0s
                    while ( weights.length < 4 ) {
    
                        weights.push( 0 );
                        weightIndices.push( 0 );
    
                    }
    
                    for ( var i = 0; i < 4; ++ i ) {
    
                        faceWeights.push( weights[ i ] );
                        faceWeightIndices.push( weightIndices[ i ] );
    
                    }
    
                }
    
                if ( normalInfo ) {
    
                    var data = getData( polygonVertexIndex, polygonIndex, vertexIndex, normalInfo );
    
                    faceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );
    
                }
    
                if ( materialInfo && materialInfo.mappingType !== 'AllSame' ) {
    
                    var materialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, materialInfo )[ 0 ];
    
                }
    
                if ( uvInfo ) {
    
                    uvInfo.forEach( function ( uv, i ) {
    
                        var data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );
    
                        if ( faceUVs[ i ] === undefined ) {
    
                            faceUVs[ i ] = [];
    
                        }
    
                        faceUVs[ i ].push( data[ 0 ] );
                        faceUVs[ i ].push( data[ 1 ] );
    
                    } );
    
                }
    
                faceLength ++;
    
                // we have reached the end of a face - it may have 4 sides though
                // in which case the data is split to represent two 3 sided faces
                if ( endOfFace ) {
    
                    for ( var i = 2; i < faceLength; i ++ ) {
    
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ 0 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ 1 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ 2 ] ] );
    
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ ( i - 1 ) * 3 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );
    
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ i * 3 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ i * 3 + 1 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ i * 3 + 2 ] ] );
    
                        if ( skeleton ) {
    
                            vertexWeightsBuffer.push( faceWeights[ 0 ] );
                            vertexWeightsBuffer.push( faceWeights[ 1 ] );
                            vertexWeightsBuffer.push( faceWeights[ 2 ] );
                            vertexWeightsBuffer.push( faceWeights[ 3 ] );
    
                            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 ] );
                            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );
                            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );
                            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );
    
                            vertexWeightsBuffer.push( faceWeights[ i * 4 ] );
                            vertexWeightsBuffer.push( faceWeights[ i * 4 + 1 ] );
                            vertexWeightsBuffer.push( faceWeights[ i * 4 + 2 ] );
                            vertexWeightsBuffer.push( faceWeights[ i * 4 + 3 ] );
    
                            weightsIndicesBuffer.push( faceWeightIndices[ 0 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ 1 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ 2 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ 3 ] );
    
                            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );
    
                            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 + 1 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 + 2 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 + 3 ] );
    
                        }
    
                        if ( colorInfo ) {
    
                            colorsBuffer.push( faceColors[ 0 ] );
                            colorsBuffer.push( faceColors[ 1 ] );
                            colorsBuffer.push( faceColors[ 2 ] );
    
                            colorsBuffer.push( faceColors[ ( i - 1 ) * 3 ] );
                            colorsBuffer.push( faceColors[ ( i - 1 ) * 3 + 1 ] );
                            colorsBuffer.push( faceColors[ ( i - 1 ) * 3 + 2 ] );
    
                            colorsBuffer.push( faceColors[ i * 3 ] );
                            colorsBuffer.push( faceColors[ i * 3 + 1 ] );
                            colorsBuffer.push( faceColors[ i * 3 + 2 ] );
    
                        }
    
                        if ( materialInfo && materialInfo.mappingType !== 'AllSame' ) {
    
                            materialIndexBuffer.push( materialIndex );
                            materialIndexBuffer.push( materialIndex );
                            materialIndexBuffer.push( materialIndex );
    
                        }
    
                        if ( normalInfo ) {
    
                            normalBuffer.push( faceNormals[ 0 ] );
                            normalBuffer.push( faceNormals[ 1 ] );
                            normalBuffer.push( faceNormals[ 2 ] );
    
                            normalBuffer.push( faceNormals[ ( i - 1 ) * 3 ] );
                            normalBuffer.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );
                            normalBuffer.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );
    
                            normalBuffer.push( faceNormals[ i * 3 ] );
                            normalBuffer.push( faceNormals[ i * 3 + 1 ] );
                            normalBuffer.push( faceNormals[ i * 3 + 2 ] );
    
                        }
    
                        if ( uvInfo ) {
    
                            uvInfo.forEach( function ( uv, j ) {
    
                                if ( uvsBuffer[ j ] === undefined ) uvsBuffer[ j ] = [];
    
                                uvsBuffer[ j ].push( faceUVs[ j ][ 0 ] );
                                uvsBuffer[ j ].push( faceUVs[ j ][ 1 ] );
    
                                uvsBuffer[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );
                                uvsBuffer[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );
    
                                uvsBuffer[ j ].push( faceUVs[ j ][ i * 2 ] );
                                uvsBuffer[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );
    
                            } );
    
                        }
    
                    }
    
                    polygonIndex ++;
                    faceLength = 0;
    
                    // reset arrays for the next face
                    vertexPositionIndexes = [];
                    faceNormals = [];
                    faceColors = [];
                    faceUVs = [];
                    faceWeights = [];
                    faceWeightIndices = [];
    
                }
    
            } );
    
            var geo = new THREE.BufferGeometry();
            geo.name = geometryNode.name;
    
            var positionAttribute = new THREE.Float32BufferAttribute( vertexBuffer, 3 );
    
            preTransform.applyToBufferAttribute( positionAttribute );
    
            geo.addAttribute( 'position', positionAttribute );
    
            if ( colorsBuffer.length > 0 ) {
    
                geo.addAttribute( 'color', new THREE.Float32BufferAttribute( colorsBuffer, 3 ) );
    
            }
    
            if ( skeleton ) {
    
                geo.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( weightsIndicesBuffer, 4 ) );
    
                geo.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( vertexWeightsBuffer, 4 ) );
    
                // used later to bind the skeleton to the model
                geo.FBX_Deformer = skeleton;
    
            }
    
            if ( normalBuffer.length > 0 ) {
    
                var normalAttribute = new THREE.Float32BufferAttribute( normalBuffer, 3 );
    
                var normalMatrix = new THREE.Matrix3().getNormalMatrix( preTransform );
                normalMatrix.applyToBufferAttribute( normalAttribute );
    
                geo.addAttribute( 'normal', normalAttribute );
    
            }
    
            uvsBuffer.forEach( function ( uvBuffer, i ) {
    
                // subsequent uv buffers are called 'uv1', 'uv2', ...
                var name = 'uv' + ( i + 1 ).toString();
    
                // the first uv buffer is just called 'uv'
                if ( i === 0 ) {
    
                    name = 'uv';
    
                }
    
                geo.addAttribute( name, new THREE.Float32BufferAttribute( uvsBuffer[ i ], 2 ) );
    
            } );
    
            if ( materialInfo && materialInfo.mappingType !== 'AllSame' ) {
    
                // Convert the material indices of each vertex into rendering groups on the geometry.
                var prevMaterialIndex = materialIndexBuffer[ 0 ];
                var startIndex = 0;
    
                materialIndexBuffer.forEach( function ( currentIndex, i ) {
    
                    if ( currentIndex !== prevMaterialIndex ) {
    
                        geo.addGroup( startIndex, i - startIndex, prevMaterialIndex );
    
                        prevMaterialIndex = currentIndex;
                        startIndex = i;
    
                    }
    
                } );
    
                // the loop above doesn't add the last group, do that here.
                if ( geo.groups.length > 0 ) {
    
                    var lastGroup = geo.groups[ geo.groups.length - 1 ];
                    var lastIndex = lastGroup.start + lastGroup.count;
    
                    if ( lastIndex !== materialIndexBuffer.length ) {
    
                        geo.addGroup( lastIndex, materialIndexBuffer.length - lastIndex, prevMaterialIndex );
    
                    }
    
                }
    
                // case where there are multiple materials but the whole geometry is only
                // using one of them
                if ( geo.groups.length === 0 ) {
    
                    geo.addGroup( 0, materialIndexBuffer.length, materialIndexBuffer[ 0 ] );
    
                }
    
            }
    
            return geo;
    
        }
    
    
        // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists
        function getNormals( NormalNode ) {
    
            var mappingType = NormalNode.MappingInformationType;
            var referenceType = NormalNode.ReferenceInformationType;
            var buffer = NormalNode.Normals.a;
            var indexBuffer = [];
            if ( referenceType === 'IndexToDirect' ) {
    
                if ( 'NormalIndex' in NormalNode ) {
    
                    indexBuffer = NormalNode.NormalIndex.a;
    
                } else if ( 'NormalsIndex' in NormalNode ) {
    
                    indexBuffer = NormalNode.NormalsIndex.a;
    
                }
    
            }
    
            return {
                dataSize: 3,
                buffer: buffer,
                indices: indexBuffer,
                mappingType: mappingType,
                referenceType: referenceType
            };
    
        }
    
        // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists
        function getUVs( UVNode ) {
    
            var mappingType = UVNode.MappingInformationType;
            var referenceType = UVNode.ReferenceInformationType;
            var buffer = UVNode.UV.a;
            var indexBuffer = [];
            if ( referenceType === 'IndexToDirect' ) {
    
                indexBuffer = UVNode.UVIndex.a;
    
            }
    
            return {
                dataSize: 2,
                buffer: buffer,
                indices: indexBuffer,
                mappingType: mappingType,
                referenceType: referenceType
            };
    
        }
    
        // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists
        function getColors( ColorNode ) {
    
            var mappingType = ColorNode.MappingInformationType;
            var referenceType = ColorNode.ReferenceInformationType;
            var buffer = ColorNode.Colors.a;
            var indexBuffer = [];
            if ( referenceType === 'IndexToDirect' ) {
    
                indexBuffer = ColorNode.ColorIndex.a;
    
            }
    
            return {
                dataSize: 4,
                buffer: buffer,
                indices: indexBuffer,
                mappingType: mappingType,
                referenceType: referenceType
            };
    
        }
    
        // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists
        function getMaterials( MaterialNode ) {
    
            var mappingType = MaterialNode.MappingInformationType;
            var referenceType = MaterialNode.ReferenceInformationType;
    
            if ( mappingType === 'NoMappingInformation' ) {
    
                return {
                    dataSize: 1,
                    buffer: [ 0 ],
                    indices: [ 0 ],
                    mappingType: 'AllSame',
                    referenceType: referenceType
                };
    
            }
    
            var materialIndexBuffer = MaterialNode.Materials.a;
    
            // Since materials are stored as indices, there's a bit of a mismatch between FBX and what
            // we expect.So we create an intermediate buffer that points to the index in the buffer,
            // for conforming with the other functions we've written for other data.
            var materialIndices = [];
    
            for ( var i = 0; i < materialIndexBuffer.length; ++ i ) {
    
                materialIndices.push( i );
    
            }
    
            return {
                dataSize: 1,
                buffer: materialIndexBuffer,
                indices: materialIndices,
                mappingType: mappingType,
                referenceType: referenceType
            };
    
        }
    
        // Functions use the infoObject and given indices to return value array of geometry.
        // Parameters:
        // 	- polygonVertexIndex - Index of vertex in draw order (which index of the index buffer refers to this vertex).
        // 	- polygonIndex - Index of polygon in geometry.
        // 	- vertexIndex - Index of vertex inside vertex buffer (used because some data refers to old index buffer that we don't use anymore).
        // 	- infoObject: can be materialInfo, normalInfo, UVInfo or colorInfo
        // Index type:
        //	- Direct: index is same as polygonVertexIndex
        //	- IndexToDirect: infoObject has it's own set of indices
        var dataArray = [];
    
        var GetData = {
    
            ByPolygonVertex: {
    
                Direct: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var from = ( polygonVertexIndex * infoObject.dataSize );
                    var to = ( polygonVertexIndex * infoObject.dataSize ) + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                },
    
                IndexToDirect: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var index = infoObject.indices[ polygonVertexIndex ];
                    var from = ( index * infoObject.dataSize );
                    var to = ( index * infoObject.dataSize ) + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                }
    
            },
    
            ByPolygon: {
    
                Direct: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var from = polygonIndex * infoObject.dataSize;
                    var to = polygonIndex * infoObject.dataSize + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                },
    
                IndexToDirect: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var index = infoObject.indices[ polygonIndex ];
                    var from = index * infoObject.dataSize;
                    var to = index * infoObject.dataSize + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                }
    
            },
    
            ByVertice: {
    
                Direct: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var from = ( vertexIndex * infoObject.dataSize );
                    var to = ( vertexIndex * infoObject.dataSize ) + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                }
    
            },
    
            AllSame: {
    
                IndexToDirect: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var from = infoObject.indices[ 0 ] * infoObject.dataSize;
                    var to = infoObject.indices[ 0 ] * infoObject.dataSize + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                }
    
            }
    
        };
    
        function getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
            return GetData[ infoObject.mappingType ][ infoObject.referenceType ]( polygonVertexIndex, polygonIndex, vertexIndex, infoObject );
    
        }
    
        // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry
        function parseNurbsGeometry( geometryNode ) {
    
            if ( THREE.NURBSCurve === undefined ) {
    
                console.error( 'THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );
                return new THREE.BufferGeometry();
    
            }
    
            var order = parseInt( geometryNode.Order );
    
            if ( isNaN( order ) ) {
    
                console.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geometryNode.Order, geometryNode.id );
                return new THREE.BufferGeometry();
    
            }
    
            var degree = order - 1;
    
            var knots = geometryNode.KnotVector.a;
            var controlPoints = [];
            var pointsValues = geometryNode.Points.a;
    
            for ( var i = 0, l = pointsValues.length; i < l; i += 4 ) {
    
                controlPoints.push( new THREE.Vector4().fromArray( pointsValues, i ) );
    
            }
    
            var startKnot, endKnot;
    
            if ( geometryNode.Form === 'Closed' ) {
    
                controlPoints.push( controlPoints[ 0 ] );
    
            } else if ( geometryNode.Form === 'Periodic' ) {
    
                startKnot = degree;
                endKnot = knots.length - 1 - startKnot;
    
                for ( var i = 0; i < degree; ++ i ) {
    
                    controlPoints.push( controlPoints[ i ] );
    
                }
    
            }
    
            var curve = new THREE.NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );
            var vertices = curve.getPoints( controlPoints.length * 7 );
    
            var positions = new Float32Array( vertices.length * 3 );
    
            vertices.forEach( function ( vertex, i ) {
    
                vertex.toArray( positions, i * 3 );
    
            } );
    
            var geometry = new THREE.BufferGeometry();
            geometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );
    
            return geometry;
    
        }
    
        // create the main THREE.Group() to be returned by the loader
        function parseScene( FBXTree, connections, skeletons, geometryMap, materialMap ) {
    
            var sceneGraph = new THREE.Group();
    
            var modelMap = parseModels( FBXTree, skeletons, geometryMap, materialMap, connections );
    
            var modelNodes = FBXTree.Objects.Model;
    
            modelMap.forEach( function ( model ) {
    
                var modelNode = modelNodes[ model.ID ];
                setLookAtProperties( FBXTree, model, modelNode, connections, sceneGraph );
    
                var parentConnections = connections.get( model.ID ).parents;
    
                parentConnections.forEach( function ( connection ) {
    
                    var parent = modelMap.get( connection.ID );
                    if ( parent !== undefined ) parent.add( model );
    
                } );
    
                if ( model.parent === null ) {
    
                    sceneGraph.add( model );
    
                }
    
    
            } );
    
            bindSkeleton( FBXTree, skeletons, geometryMap, modelMap, connections );
    
            addAnimations( FBXTree, connections, sceneGraph );
    
            createAmbientLight( FBXTree, sceneGraph );
    
            return sceneGraph;
    
        }
    
        // parse nodes in FBXTree.Objects.Model
        function parseModels( FBXTree, skeletons, geometryMap, materialMap, connections ) {
    
            var modelMap = new Map();
            var modelNodes = FBXTree.Objects.Model;
    
            for ( var nodeID in modelNodes ) {
    
                var id = parseInt( nodeID );
                var node = modelNodes[ nodeID ];
                var relationships = connections.get( id );
    
                var model = buildSkeleton( relationships, skeletons, id, node.attrName );
    
                if ( ! model ) {
    
                    switch ( node.attrType ) {
    
                        case 'Camera':
                            model = createCamera( FBXTree, relationships );
                            break;
                        case 'Light':
                            model = createLight( FBXTree, relationships );
                            break;
                        case 'Mesh':
                            model = createMesh( FBXTree, relationships, geometryMap, materialMap );
                            break;
                        case 'NurbsCurve':
                            model = createCurve( relationships, geometryMap );
                            break;
                        case 'LimbNode': // usually associated with a Bone, however if a Bone was not created we'll make a Group instead
                        case 'Null':
                        default:
                            model = new THREE.Group();
                            break;
    
                    }
    
                    model.name = THREE.PropertyBinding.sanitizeNodeName( node.attrName );
                    model.ID = id;
    
                }
    
                setModelTransforms( FBXTree, model, node );
                modelMap.set( id, model );
    
            }
    
            return modelMap;
    
        }
    
        function buildSkeleton( relationships, skeletons, id, name ) {
    
            var bone = null;
    
            relationships.parents.forEach( function ( parent ) {
    
                for ( var ID in skeletons ) {
    
                    var skeleton = skeletons[ ID ];
    
                    skeleton.rawBones.forEach( function ( rawBone, i ) {
    
                        if ( rawBone.ID === parent.ID ) {
    
                            var subBone = bone;
                            bone = new THREE.Bone();
                            bone.matrixWorld.copy( rawBone.transformLink );
    
                            // set name and id here - otherwise in cases where "subBone" is created it will not have a name / id
                            bone.name = THREE.PropertyBinding.sanitizeNodeName( name );
                            bone.ID = id;
    
                            skeleton.bones[ i ] = bone;
    
                            // In cases where a bone is shared between multiple meshes
                            // duplicate the bone here and and it as a child of the first bone
                            if ( subBone !== null ) {
    
                                bone.add( subBone );
    
                            }
    
                        }
    
                    } );
    
                }
    
            } );
    
            return bone;
    
        }
    
        // create a THREE.PerspectiveCamera or THREE.OrthographicCamera
        function createCamera( FBXTree, relationships ) {
    
            var model;
            var cameraAttribute;
    
            relationships.children.forEach( function ( child ) {
    
                var attr = FBXTree.Objects.NodeAttribute[ child.ID ];
    
                if ( attr !== undefined ) {
    
                    cameraAttribute = attr;
    
                }
    
            } );
    
            if ( cameraAttribute === undefined ) {
    
                model = new THREE.Object3D();
    
            } else {
    
                var type = 0;
                if ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {
    
                    type = 1;
    
                }
    
                var nearClippingPlane = 1;
                if ( cameraAttribute.NearPlane !== undefined ) {
    
                    nearClippingPlane = cameraAttribute.NearPlane.value / 1000;
    
                }
    
                var farClippingPlane = 1000;
                if ( cameraAttribute.FarPlane !== undefined ) {
    
                    farClippingPlane = cameraAttribute.FarPlane.value / 1000;
    
                }
    
    
                var width = window.innerWidth;
                var height = window.innerHeight;
    
                if ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {
    
                    width = cameraAttribute.AspectWidth.value;
                    height = cameraAttribute.AspectHeight.value;
    
                }
    
                var aspect = width / height;
    
                var fov = 45;
                if ( cameraAttribute.FieldOfView !== undefined ) {
    
                    fov = cameraAttribute.FieldOfView.value;
    
                }
    
                var focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;
    
                switch ( type ) {
    
                    case 0: // Perspective
                        model = new THREE.PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );
                        if ( focalLength !== null ) model.setFocalLength( focalLength );
                        break;
    
                    case 1: // Orthographic
                        model = new THREE.OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );
                        break;
    
                    default:
                        console.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );
                        model = new THREE.Object3D();
                        break;
    
                }
    
            }
    
            return model;
    
        }
    
        // Create a THREE.DirectionalLight, THREE.PointLight or THREE.SpotLight
        function createLight( FBXTree, relationships ) {
    
            var model;
            var lightAttribute;
    
            relationships.children.forEach( function ( child ) {
    
                var attr = FBXTree.Objects.NodeAttribute[ child.ID ];
    
                if ( attr !== undefined ) {
    
                    lightAttribute = attr;
    
                }
    
            } );
    
            if ( lightAttribute === undefined ) {
    
                model = new THREE.Object3D();
    
            } else {
    
                var type;
    
                // LightType can be undefined for Point lights
                if ( lightAttribute.LightType === undefined ) {
    
                    type = 0;
    
                } else {
    
                    type = lightAttribute.LightType.value;
    
                }
    
                var color = 0xffffff;
    
                if ( lightAttribute.Color !== undefined ) {
    
                    color = new THREE.Color().fromArray( lightAttribute.Color.value );
    
                }
    
                var intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;
    
                // light disabled
                if ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {
    
                    intensity = 0;
    
                }
    
                var distance = 0;
                if ( lightAttribute.FarAttenuationEnd !== undefined ) {
    
                    if ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {
    
                        distance = 0;
    
                    } else {
    
                        distance = lightAttribute.FarAttenuationEnd.value / 1000;
    
                    }
    
                }
    
                // TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?
                var decay = 1;
    
                switch ( type ) {
    
                    case 0: // Point
                        model = new THREE.PointLight( color, intensity, distance, decay );
                        break;
    
                    case 1: // Directional
                        model = new THREE.DirectionalLight( color, intensity );
                        break;
    
                    case 2: // Spot
                        var angle = Math.PI / 3;
    
                        if ( lightAttribute.InnerAngle !== undefined ) {
    
                            angle = THREE.Math.degToRad( lightAttribute.InnerAngle.value );
    
                        }
    
                        var penumbra = 0;
                        if ( lightAttribute.OuterAngle !== undefined ) {
    
                            // TODO: this is not correct - FBX calculates outer and inner angle in degrees
                            // with OuterAngle > InnerAngle && OuterAngle <= Math.PI
                            // while three.js uses a penumbra between (0, 1) to attenuate the inner angle
                            penumbra = THREE.Math.degToRad( lightAttribute.OuterAngle.value );
                            penumbra = Math.max( penumbra, 1 );
    
                        }
    
                        model = new THREE.SpotLight( color, intensity, distance, angle, penumbra, decay );
                        break;
    
                    default:
                        console.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a THREE.PointLight.' );
                        model = new THREE.PointLight( color, intensity );
                        break;
    
                }
    
                if ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {
    
                    model.castShadow = true;
    
                }
    
            }
    
            return model;
    
        }
    
        function createMesh( FBXTree, relationships, geometryMap, materialMap ) {
    
            var model;
            var geometry = null;
            var material = null;
            var materials = [];
    
            // get geometry and materials(s) from connections
            relationships.children.forEach( function ( child ) {
    
                if ( geometryMap.has( child.ID ) ) {
    
                    geometry = geometryMap.get( child.ID );
    
                }
    
                if ( materialMap.has( child.ID ) ) {
    
                    materials.push( materialMap.get( child.ID ) );
    
                }
    
            } );
    
            if ( materials.length > 1 ) {
    
                material = materials;
    
            } else if ( materials.length > 0 ) {
    
                material = materials[ 0 ];
    
            } else {
    
                material = new THREE.MeshPhongMaterial( { color: 0xcccccc } );
                materials.push( material );
    
            }
    
            if ( 'color' in geometry.attributes ) {
    
                materials.forEach( function ( material ) {
    
                    material.vertexColors = THREE.VertexColors;
    
                } );
    
            }
    
            if ( geometry.FBX_Deformer ) {
    
                materials.forEach( function ( material ) {
    
                    material.skinning = true;
    
                } );
    
                model = new THREE.SkinnedMesh( geometry, material );
    
            } else {
    
                model = new THREE.Mesh( geometry, material );
    
            }
    
            return model;
    
        }
    
        function createCurve( relationships, geometryMap ) {
    
            var geometry = relationships.children.reduce( function ( geo, child ) {
    
                if ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );
    
                return geo;
    
            }, null );
    
            // FBX does not list materials for Nurbs lines, so we'll just put our own in here.
            var material = new THREE.LineBasicMaterial( { color: 0x3300ff, linewidth: 1 } );
            return new THREE.Line( geometry, material );
    
        }
    
        // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light
        function createAmbientLight( FBXTree, sceneGraph ) {
    
            if ( 'GlobalSettings' in FBXTree && 'AmbientColor' in FBXTree.GlobalSettings ) {
    
                var ambientColor = FBXTree.GlobalSettings.AmbientColor.value;
                var r = ambientColor[ 0 ];
                var g = ambientColor[ 1 ];
                var b = ambientColor[ 2 ];
    
                if ( r !== 0 || g !== 0 || b !== 0 ) {
    
                    var color = new THREE.Color( r, g, b );
                    sceneGraph.add( new THREE.AmbientLight( color, 1 ) );
    
                }
    
            }
    
        }
    
        function setLookAtProperties( FBXTree, model, modelNode, connections, sceneGraph ) {
    
            if ( 'LookAtProperty' in modelNode ) {
    
                var children = connections.get( model.ID ).children;
    
                children.forEach( function ( child ) {
    
                    if ( child.relationship === 'LookAtProperty' ) {
    
                        var lookAtTarget = FBXTree.Objects.Model[ child.ID ];
    
                        if ( 'Lcl_Translation' in lookAtTarget ) {
    
                            var pos = lookAtTarget.Lcl_Translation.value;
    
                            // DirectionalLight, SpotLight
                            if ( model.target !== undefined ) {
    
                                model.target.position.fromArray( pos );
                                sceneGraph.add( model.target );
    
                            } else { // Cameras and other Object3Ds
    
                                model.lookAt( new THREE.Vector3().fromArray( pos ) );
    
                            }
    
                        }
    
                    }
    
                } );
    
            }
    
        }
    
        // parse the model node for transform details and apply them to the model
        function setModelTransforms( FBXTree, model, modelNode ) {
    
            // http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html
            if ( 'RotationOrder' in modelNode ) {
    
                var enums = [
                    'XYZ', // default
                    'XZY',
                    'YZX',
                    'ZXY',
                    'YXZ',
                    'ZYX',
                    'SphericXYZ',
                ];
    
                var value = parseInt( modelNode.RotationOrder.value, 10 );
    
                if ( value > 0 && value < 6 ) {
    
                    // model.rotation.order = enums[ value ];
    
                    // Note: Euler order other than XYZ is currently not supported, so just display a warning for now
                    console.warn( 'THREE.FBXLoader: unsupported Euler Order: %s. Currently only XYZ order is supported. Animations and rotations may be incorrect.', enums[ value ] );
    
                } else if ( value === 6 ) {
    
                    console.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );
    
                }
    
            }
    
            if ( 'Lcl_Translation' in modelNode ) {
    
                model.position.fromArray( modelNode.Lcl_Translation.value );
    
            }
    
            if ( 'Lcl_Rotation' in modelNode ) {
    
                var rotation = modelNode.Lcl_Rotation.value.map( THREE.Math.degToRad );
                rotation.push( 'ZYX' );
                model.rotation.fromArray( rotation );
    
            }
    
            if ( 'Lcl_Scaling' in modelNode ) {
    
                model.scale.fromArray( modelNode.Lcl_Scaling.value );
    
            }
    
            if ( 'PreRotation' in modelNode ) {
    
                var array = modelNode.PreRotation.value.map( THREE.Math.degToRad );
                array[ 3 ] = 'ZYX';
    
                var preRotations = new THREE.Euler().fromArray( array );
    
                preRotations = new THREE.Quaternion().setFromEuler( preRotations );
                var currentRotation = new THREE.Quaternion().setFromEuler( model.rotation );
                preRotations.multiply( currentRotation );
                model.rotation.setFromQuaternion( preRotations, 'ZYX' );
    
            }
    
        }
    
        function bindSkeleton( FBXTree, skeletons, geometryMap, modelMap, connections ) {
    
            var bindMatrices = parsePoseNodes( FBXTree );
    
            for ( var ID in skeletons ) {
    
                var skeleton = skeletons[ ID ];
    
                var parents = connections.get( parseInt( skeleton.ID ) ).parents;
    
                parents.forEach( function ( parent ) {
    
                    if ( geometryMap.has( parent.ID ) ) {
    
                        var geoID = parent.ID;
                        var geoRelationships = connections.get( geoID );
    
                        geoRelationships.parents.forEach( function ( geoConnParent ) {
    
                            if ( modelMap.has( geoConnParent.ID ) ) {
    
                                var model = modelMap.get( geoConnParent.ID );
    
                                model.bind( new THREE.Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );
    
                            }
    
                        } );
    
                    }
    
                } );
    
            }
    
        }
    
        function parsePoseNodes( FBXTree ) {
    
            var bindMatrices = {};
    
            if ( 'Pose' in FBXTree.Objects ) {
    
                var BindPoseNode = FBXTree.Objects.Pose;
    
                for ( var nodeID in BindPoseNode ) {
    
                    if ( BindPoseNode[ nodeID ].attrType === 'BindPose' ) {
    
                        var poseNodes = BindPoseNode[ nodeID ].PoseNode;
    
                        if ( Array.isArray( poseNodes ) ) {
    
                            poseNodes.forEach( function ( poseNode ) {
    
                                bindMatrices[ poseNode.Node ] = new THREE.Matrix4().fromArray( poseNode.Matrix.a );
    
                            } );
    
                        } else {
    
                            bindMatrices[ poseNodes.Node ] = new THREE.Matrix4().fromArray( poseNodes.Matrix.a );
    
                        }
    
                    }
    
                }
    
            }
    
            return bindMatrices;
    
        }
    
        function parseAnimations( FBXTree, connections ) {
    
            // since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,
            // if this is undefined we can safely assume there are no animations
            if ( FBXTree.Objects.AnimationCurve === undefined ) return undefined;
    
            var curveNodesMap = parseAnimationCurveNodes( FBXTree );
    
            parseAnimationCurves( FBXTree, connections, curveNodesMap );
    
            var layersMap = parseAnimationLayers( FBXTree, connections, curveNodesMap );
            var rawClips = parseAnimStacks( FBXTree, connections, layersMap );
    
            return rawClips;
    
        }
    
        // parse nodes in FBXTree.Objects.AnimationCurveNode
        // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )
        // and is referenced by an AnimationLayer
        function parseAnimationCurveNodes( FBXTree ) {
    
            var rawCurveNodes = FBXTree.Objects.AnimationCurveNode;
    
            var curveNodesMap = new Map();
    
            for ( var nodeID in rawCurveNodes ) {
    
                var rawCurveNode = rawCurveNodes[ nodeID ];
    
                if ( rawCurveNode.attrName.match( /S|R|T/ ) !== null ) {
    
                    var curveNode = {
    
                        id: rawCurveNode.id,
                        attr: rawCurveNode.attrName,
                        curves: {},
    
                    };
    
                    curveNodesMap.set( curveNode.id, curveNode );
    
                }
    
            }
    
            return curveNodesMap;
    
        }
    
        // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to
        // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated
        // axis ( e.g. times and values of x rotation)
        function parseAnimationCurves( FBXTree, connections, curveNodesMap ) {
    
            var rawCurves = FBXTree.Objects.AnimationCurve;
    
            for ( var nodeID in rawCurves ) {
    
                var animationCurve = {
    
                    id: rawCurves[ nodeID ].id,
                    times: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),
                    values: rawCurves[ nodeID ].KeyValueFloat.a,
    
                };
    
                var relationships = connections.get( animationCurve.id );
    
                if ( relationships !== undefined ) {
    
                    var animationCurveID = relationships.parents[ 0 ].ID;
                    var animationCurveRelationship = relationships.parents[ 0 ].relationship;
                    var axis = '';
    
                    if ( animationCurveRelationship.match( /X/ ) ) {
    
                        axis = 'x';
    
                    } else if ( animationCurveRelationship.match( /Y/ ) ) {
    
                        axis = 'y';
    
                    } else if ( animationCurveRelationship.match( /Z/ ) ) {
    
                        axis = 'z';
    
                    } else {
    
                        continue;
    
                    }
    
                    curveNodesMap.get( animationCurveID ).curves[ axis ] = animationCurve;
    
                }
    
            }
    
        }
    
        // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references
        // to various AnimationCurveNodes and is referenced by an AnimationStack node
        // note: theoretically a stack can multiple layers, however in practice there always seems to be one per stack
        function parseAnimationLayers( FBXTree, connections, curveNodesMap ) {
    
            var rawLayers = FBXTree.Objects.AnimationLayer;
    
            var layersMap = new Map();
    
            for ( var nodeID in rawLayers ) {
    
                var layerCurveNodes = [];
    
                var connection = connections.get( parseInt( nodeID ) );
    
                if ( connection !== undefined ) {
    
                    // all the animationCurveNodes used in the layer
                    var children = connection.children;
    
                    children.forEach( function ( child, i ) {
    
                        if ( curveNodesMap.has( child.ID ) ) {
    
                            var curveNode = curveNodesMap.get( child.ID );
    
                            // check that the curves are defined for at least one axis, otherwise ignore the curveNode
                            if ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {
    
                                if ( layerCurveNodes[ i ] === undefined ) {
    
                                    var modelID;
    
                                    connections.get( child.ID ).parents.forEach( function ( parent ) {
    
                                        if ( parent.relationship !== undefined ) modelID = parent.ID;
    
                                    } );
    
                                    var rawModel = FBXTree.Objects.Model[ modelID.toString() ];
    
                                    var node = {
    
                                        modelName: THREE.PropertyBinding.sanitizeNodeName( rawModel.attrName ),
                                        initialPosition: [ 0, 0, 0 ],
                                        initialRotation: [ 0, 0, 0 ],
                                        initialScale: [ 1, 1, 1 ],
    
                                    };
    
                                    if ( 'Lcl_Translation' in rawModel ) node.initialPosition = rawModel.Lcl_Translation.value;
    
                                    if ( 'Lcl_Rotation' in rawModel ) node.initialRotation = rawModel.Lcl_Rotation.value;
    
                                    if ( 'Lcl_Scaling' in rawModel ) node.initialScale = rawModel.Lcl_Scaling.value;
    
                                    // if the animated model is pre rotated, we'll have to apply the pre rotations to every
                                    // animation value as well
                                    if ( 'PreRotation' in rawModel ) node.preRotations = rawModel.PreRotation.value;
    
                                    layerCurveNodes[ i ] = node;
    
                                }
    
                                layerCurveNodes[ i ][ curveNode.attr ] = curveNode;
    
                            }
    
    
    
                        }
    
                    } );
    
                    layersMap.set( parseInt( nodeID ), layerCurveNodes );
    
                }
    
            }
    
            return layersMap;
    
        }
    
        // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation
        // hierarchy. Each Stack node will be used to create a THREE.AnimationClip
        function parseAnimStacks( FBXTree, connections, layersMap ) {
    
            var rawStacks = FBXTree.Objects.AnimationStack;
    
            // connect the stacks (clips) up to the layers
            var rawClips = {};
    
            for ( var nodeID in rawStacks ) {
    
                var children = connections.get( parseInt( nodeID ) ).children;
    
                if ( children.length > 1 ) {
    
                    // it seems like stacks will always be associated with a single layer. But just in case there are files
                    // where there are multiple layers per stack, we'll display a warning
                    console.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );
    
                }
    
                var layer = layersMap.get( children[ 0 ].ID );
    
                rawClips[ nodeID ] = {
    
                    name: rawStacks[ nodeID ].attrName,
                    layer: layer,
    
                };
    
            }
    
            return rawClips;
    
        }
    
        // take raw animation data from parseAnimations and connect it up to the loaded models
        function addAnimations( FBXTree, connections, sceneGraph ) {
    
            sceneGraph.animations = [];
    
            var rawClips = parseAnimations( FBXTree, connections );
    
            if ( rawClips === undefined ) return;
    
    
            for ( var key in rawClips ) {
    
                var rawClip = rawClips[ key ];
    
                var clip = addClip( rawClip );
    
                sceneGraph.animations.push( clip );
    
            }
    
        }
    
        function addClip( rawClip ) {
    
            var tracks = [];
    
            rawClip.layer.forEach( function ( rawTracks ) {
    
                tracks = tracks.concat( generateTracks( rawTracks ) );
    
            } );
    
            return new THREE.AnimationClip( rawClip.name, - 1, tracks );
    
        }
    
        function generateTracks( rawTracks ) {
    
            var tracks = [];
    
            if ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {
    
                var positionTrack = generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, rawTracks.initialPosition, 'position' );
                if ( positionTrack !== undefined ) tracks.push( positionTrack );
    
            }
    
            if ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {
    
                var rotationTrack = generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, rawTracks.initialRotation, rawTracks.preRotations );
                if ( rotationTrack !== undefined ) tracks.push( rotationTrack );
    
            }
    
            if ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {
    
                var scaleTrack = generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, rawTracks.initialScale, 'scale' );
                if ( scaleTrack !== undefined ) tracks.push( scaleTrack );
    
            }
    
            return tracks;
    
        }
    
        function generateVectorTrack( modelName, curves, initialValue, type ) {
    
            var times = getTimesForAllAxes( curves );
            var values = getKeyframeTrackValues( times, curves, initialValue );
    
            return new THREE.VectorKeyframeTrack( modelName + '.' + type, times, values );
    
        }
    
        function generateRotationTrack( modelName, curves, initialValue, preRotations ) {
    
            if ( curves.x !== undefined ) curves.x.values = curves.x.values.map( THREE.Math.degToRad );
            if ( curves.y !== undefined ) curves.y.values = curves.y.values.map( THREE.Math.degToRad );
            if ( curves.z !== undefined ) curves.z.values = curves.z.values.map( THREE.Math.degToRad );
    
            var times = getTimesForAllAxes( curves );
            var values = getKeyframeTrackValues( times, curves, initialValue );
    
            if ( preRotations !== undefined ) {
    
                preRotations = preRotations.map( THREE.Math.degToRad );
                preRotations.push( 'ZYX' );
    
                preRotations = new THREE.Euler().fromArray( preRotations );
                preRotations = new THREE.Quaternion().setFromEuler( preRotations );
    
            }
    
            var quaternion = new THREE.Quaternion();
            var euler = new THREE.Euler();
    
            var quaternionValues = [];
    
            for ( var i = 0; i < values.length; i += 3 ) {
    
                euler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], 'ZYX' );
    
                quaternion.setFromEuler( euler );
    
                if ( preRotations !== undefined )quaternion.premultiply( preRotations );
    
                quaternion.toArray( quaternionValues, ( i / 3 ) * 4 );
    
            }
    
            return new THREE.QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );
    
        }
    
        function getKeyframeTrackValues( times, curves, initialValue ) {
    
            var prevValue = initialValue;
    
            var values = [];
    
            var xIndex = - 1;
            var yIndex = - 1;
            var zIndex = - 1;
    
            times.forEach( function ( time ) {
    
                if ( curves.x ) xIndex = curves.x.times.indexOf( time );
                if ( curves.y ) yIndex = curves.y.times.indexOf( time );
                if ( curves.z ) zIndex = curves.z.times.indexOf( time );
    
                // if there is an x value defined for this frame, use that
                if ( xIndex !== - 1 ) {
    
                    var xValue = curves.x.values[ xIndex ];
                    values.push( xValue );
                    prevValue[ 0 ] = xValue;
    
                } else {
    
                    // otherwise use the x value from the previous frame
                    values.push( prevValue[ 0 ] );
    
                }
    
                if ( yIndex !== - 1 ) {
    
                    var yValue = curves.y.values[ yIndex ];
                    values.push( yValue );
                    prevValue[ 1 ] = yValue;
    
                } else {
    
                    values.push( prevValue[ 1 ] );
    
                }
    
                if ( zIndex !== - 1 ) {
    
                    var zValue = curves.z.values[ zIndex ];
                    values.push( zValue );
                    prevValue[ 2 ] = zValue;
    
                } else {
    
                    values.push( prevValue[ 2 ] );
    
                }
    
            } );
    
            return values;
    
        }
    
        // For all animated objects, times are defined separately for each axis
        // Here we'll combine the times into one sorted array without duplicates
        function getTimesForAllAxes( curves ) {
    
            var times = [];
    
            // first join together the times for each axis, if defined
            if ( curves.x !== undefined ) times = times.concat( curves.x.times );
            if ( curves.y !== undefined ) times = times.concat( curves.y.times );
            if ( curves.z !== undefined ) times = times.concat( curves.z.times );
    
            // then sort them and remove duplicates
            times = times.sort( function ( a, b ) {
    
                return a - b;
    
            } ).filter( function ( elem, index, array ) {
    
                return array.indexOf( elem ) == index;
    
            } );
    
            return times;
    
        }
    
        // parse an FBX file in ASCII format
        function TextParser() {}
    
        Object.assign( TextParser.prototype, {
    
            getPrevNode: function () {
    
                return this.nodeStack[ this.currentIndent - 2 ];
    
            },
    
            getCurrentNode: function () {
    
                return this.nodeStack[ this.currentIndent - 1 ];
    
            },
    
            getCurrentProp: function () {
    
                return this.currentProp;
    
            },
    
            pushStack: function ( node ) {
    
                this.nodeStack.push( node );
                this.currentIndent += 1;
    
            },
    
            popStack: function () {
    
                this.nodeStack.pop();
                this.currentIndent -= 1;
    
            },
    
            setCurrentProp: function ( val, name ) {
    
                this.currentProp = val;
                this.currentPropName = name;
    
            },
    
            parse: function ( text ) {
    
                this.currentIndent = 0;
                this.allNodes = new FBXTree();
                this.nodeStack = [];
                this.currentProp = [];
                this.currentPropName = '';
    
                var self = this;
    
                var split = text.split( '\n' );
    
                split.forEach( function ( line, i ) {
    
                    var matchComment = line.match( /^[\s\t]*;/ );
                    var matchEmpty = line.match( /^[\s\t]*$/ );
    
                    if ( matchComment || matchEmpty ) return;
    
                    var matchBeginning = line.match( '^\\t{' + self.currentIndent + '}(\\w+):(.*){', '' );
                    var matchProperty = line.match( '^\\t{' + ( self.currentIndent ) + '}(\\w+):[\\s\\t\\r\\n](.*)' );
                    var matchEnd = line.match( '^\\t{' + ( self.currentIndent - 1 ) + '}}' );
    
                    if ( matchBeginning ) {
    
                        self.parseNodeBegin( line, matchBeginning );
    
                    } else if ( matchProperty ) {
    
                        self.parseNodeProperty( line, matchProperty, split[ ++ i ] );
    
                    } else if ( matchEnd ) {
    
                        self.popStack();
    
                    } else if ( line.match( /^[^\s\t}]/ ) ) {
    
                        // large arrays are split over multiple lines terminated with a ',' character
                        // if this is encountered the line needs to be joined to the previous line
                        self.parseNodePropertyContinued( line );
    
                    }
    
                } );
    
                return this.allNodes;
    
            },
    
            parseNodeBegin: function ( line, property ) {
    
                var nodeName = property[ 1 ].trim().replace( /^"/, '' ).replace( /"$/, '' );
    
                var nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {
    
                    return attr.trim().replace( /^"/, '' ).replace( /"$/, '' );
    
                } );
    
                var node = { name: nodeName };
                var attrs = this.parseNodeAttr( nodeAttrs );
    
                var currentNode = this.getCurrentNode();
    
                // a top node
                if ( this.currentIndent === 0 ) {
    
                    this.allNodes.add( nodeName, node );
    
                } else { // a subnode
    
                    // if the subnode already exists, append it
                    if ( nodeName in currentNode ) {
    
                    // special case Pose needs PoseNodes as an array
                        if ( nodeName === 'PoseNode' ) {
    
                            currentNode.PoseNode.push( node );
    
                        } else if ( currentNode[ nodeName ].id !== undefined ) {
    
                            currentNode[ nodeName ] = {};
                            currentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];
    
                        }
    
                        if ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;
    
                    } else if ( typeof attrs.id === 'number' ) {
    
                        currentNode[ nodeName ] = {};
                        currentNode[ nodeName ][ attrs.id ] = node;
    
                    } else if ( nodeName !== 'Properties70' ) {
    
                        if ( nodeName === 'PoseNode' )	currentNode[ nodeName ] = [ node ];
                        else currentNode[ nodeName ] = node;
    
                    }
    
                }
    
                if ( typeof attrs.id === 'number' ) node.id = attrs.id;
                if ( attrs.name !== '' ) node.attrName = attrs.name;
                if ( attrs.type !== '' ) node.attrType = attrs.type;
    
                this.pushStack( node );
    
            },
    
            parseNodeAttr: function ( attrs ) {
    
                var id = attrs[ 0 ];
    
                if ( attrs[ 0 ] !== '' ) {
    
                    id = parseInt( attrs[ 0 ] );
    
                    if ( isNaN( id ) ) {
    
                        id = attrs[ 0 ];
    
                    }
    
                }
    
                var name = '', type = '';
    
                if ( attrs.length > 1 ) {
    
                    name = attrs[ 1 ].replace( /^(\w+)::/, '' );
                    type = attrs[ 2 ];
    
                }
    
                return { id: id, name: name, type: type };
    
            },
    
            parseNodeProperty: function ( line, property, contentLine ) {
    
                var propName = property[ 1 ].replace( /^"/, '' ).replace( /"$/, '' ).trim();
                var propValue = property[ 2 ].replace( /^"/, '' ).replace( /"$/, '' ).trim();
    
                // for special case: base64 image data follows "Content: ," line
                //	Content: ,
                //	 "/9j/4RDaRXhpZgAATU0A..."
                if ( propName === 'Content' && propValue === ',' ) {
    
                    propValue = contentLine.replace( /"/g, '' ).replace( /,$/, '' ).trim();
    
                }
    
                var currentNode = this.getCurrentNode();
                var parentName = currentNode.name;
    
                if ( parentName === 'Properties70' ) {
    
                    this.parseNodeSpecialProperty( line, propName, propValue );
                    return;
    
                }
    
                // Connections
                if ( propName === 'C' ) {
    
                    var connProps = propValue.split( ',' ).slice( 1 );
                    var from = parseInt( connProps[ 0 ] );
                    var to = parseInt( connProps[ 1 ] );
    
                    var rest = propValue.split( ',' ).slice( 3 );
    
                    rest = rest.map( function ( elem ) {
    
                        return elem.trim().replace( /^"/, '' );
    
                    } );
    
                    propName = 'connections';
                    propValue = [ from, to ];
                    append( propValue, rest );
    
                    if ( currentNode[ propName ] === undefined ) {
    
                        currentNode[ propName ] = [];
    
                    }
    
                }
    
                // Node
                if ( propName === 'Node' ) currentNode.id = propValue;
    
                // connections
                if ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {
    
                    currentNode[ propName ].push( propValue );
    
                } else {
    
                    if ( propName !== 'a' ) currentNode[ propName ] = propValue;
                    else currentNode.a = propValue;
    
                }
    
                this.setCurrentProp( currentNode, propName );
    
                // convert string to array, unless it ends in ',' in which case more will be added to it
                if ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {
    
                    currentNode.a = parseNumberArray( propValue );
    
                }
    
            },
    
            parseNodePropertyContinued: function ( line ) {
    
                var currentNode = this.getCurrentNode();
    
                currentNode.a += line;
    
                // if the line doesn't end in ',' we have reached the end of the property value
                // so convert the string to an array
                if ( line.slice( - 1 ) !== ',' ) {
    
                    currentNode.a = parseNumberArray( currentNode.a );
    
                }
    
            },
    
            // parse "Property70"
            parseNodeSpecialProperty: function ( line, propName, propValue ) {
    
                // split this
                // P: "Lcl Scaling", "Lcl Scaling", "", "A",1,1,1
                // into array like below
                // ["Lcl Scaling", "Lcl Scaling", "", "A", "1,1,1" ]
                var props = propValue.split( '",' ).map( function ( prop ) {
    
                    return prop.trim().replace( /^\"/, '' ).replace( /\s/, '_' );
    
                } );
    
                var innerPropName = props[ 0 ];
                var innerPropType1 = props[ 1 ];
                var innerPropType2 = props[ 2 ];
                var innerPropFlag = props[ 3 ];
                var innerPropValue = props[ 4 ];
    
                // cast values where needed, otherwise leave as strings
                switch ( innerPropType1 ) {
    
                    case 'int':
                    case 'enum':
                    case 'bool':
                    case 'ULongLong':
                    case 'double':
                    case 'Number':
                    case 'FieldOfView':
                        innerPropValue = parseFloat( innerPropValue );
                        break;
    
                    case 'Color':
                    case 'ColorRGB':
                    case 'Vector3D':
                    case 'Lcl_Translation':
                    case 'Lcl_Rotation':
                    case 'Lcl_Scaling':
                        innerPropValue = parseNumberArray( innerPropValue );
                        break;
    
                }
    
                // CAUTION: these props must append to parent's parent
                this.getPrevNode()[ innerPropName ] = {
    
                    'type': innerPropType1,
                    'type2': innerPropType2,
                    'flag': innerPropFlag,
                    'value': innerPropValue
    
                };
    
                this.setCurrentProp( this.getPrevNode(), innerPropName );
    
            },
    
        } );
    
        // Parse an FBX file in Binary format
        function BinaryParser() {}
    
        Object.assign( BinaryParser.prototype, {
    
            parse: function ( buffer ) {
    
                var reader = new BinaryReader( buffer );
                reader.skip( 23 ); // skip magic 23 bytes
    
                var version = reader.getUint32();
    
                console.log( 'THREE.FBXLoader: FBX binary version: ' + version );
    
                var allNodes = new FBXTree();
    
                while ( ! this.endOfContent( reader ) ) {
    
                    var node = this.parseNode( reader, version );
                    if ( node !== null ) allNodes.add( node.name, node );
    
                }
    
                return allNodes;
    
            },
    
            // Check if reader has reached the end of content.
            endOfContent: function ( reader ) {
    
                // footer size: 160bytes + 16-byte alignment padding
                // - 16bytes: magic
                // - padding til 16-byte alignment (at least 1byte?)
                //	(seems like some exporters embed fixed 15 or 16bytes?)
                // - 4bytes: magic
                // - 4bytes: version
                // - 120bytes: zero
                // - 16bytes: magic
                if ( reader.size() % 16 === 0 ) {
    
                    return ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();
    
                } else {
    
                    return reader.getOffset() + 160 + 16 >= reader.size();
    
                }
    
            },
    
            // recursively parse nodes until the end of the file is reached
            parseNode: function ( reader, version ) {
    
                var node = {};
    
                // The first three data sizes depends on version.
                var endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();
                var numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();
    
                // note: do not remove this even if you get a linter warning as it moves the buffer forward
                var propertyListLen = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();
    
                var nameLen = reader.getUint8();
                var name = reader.getString( nameLen );
    
                // Regards this node as NULL-record if endOffset is zero
                if ( endOffset === 0 ) return null;
    
                var propertyList = [];
    
                for ( var i = 0; i < numProperties; i ++ ) {
    
                    propertyList.push( this.parseProperty( reader ) );
    
                }
    
                // Regards the first three elements in propertyList as id, attrName, and attrType
                var id = propertyList.length > 0 ? propertyList[ 0 ] : '';
                var attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';
                var attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';
    
                // check if this node represents just a single property
                // like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}
                node.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;
    
                while ( endOffset > reader.getOffset() ) {
    
                    var subNode = this.parseNode( reader, version );
    
                    if ( subNode !== null ) this.parseSubNode( name, node, subNode );
    
                }
    
                node.propertyList = propertyList; // raw property list used by parent
    
                if ( typeof id === 'number' ) node.id = id;
                if ( attrName !== '' ) node.attrName = attrName;
                if ( attrType !== '' ) node.attrType = attrType;
                if ( name !== '' ) node.name = name;
    
                return node;
    
            },
    
            parseSubNode: function ( name, node, subNode ) {
    
                // special case: child node is single property
                if ( subNode.singleProperty === true ) {
    
                    var value = subNode.propertyList[ 0 ];
    
                    if ( Array.isArray( value ) ) {
    
                        node[ subNode.name ] = subNode;
    
                        subNode.a = value;
    
                    } else {
    
                        node[ subNode.name ] = value;
    
                    }
    
                } else if ( name === 'Connections' && subNode.name === 'C' ) {
    
                    var array = [];
    
                    subNode.propertyList.forEach( function ( property, i ) {
    
                        // first Connection is FBX type (OO, OP, etc.). We'll discard these
                        if ( i !== 0 ) array.push( property );
    
                    } );
    
                    if ( node.connections === undefined ) {
    
                        node.connections = [];
    
                    }
    
                    node.connections.push( array );
    
                } else if ( subNode.name === 'Properties70' ) {
    
                    var keys = Object.keys( subNode );
    
                    keys.forEach( function ( key ) {
    
                        node[ key ] = subNode[ key ];
    
                    } );
    
                } else if ( name === 'Properties70' && subNode.name === 'P' ) {
    
                    var innerPropName = subNode.propertyList[ 0 ];
                    var innerPropType1 = subNode.propertyList[ 1 ];
                    var innerPropType2 = subNode.propertyList[ 2 ];
                    var innerPropFlag = subNode.propertyList[ 3 ];
                    var innerPropValue;
    
                    if ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );
                    if ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );
    
                    if ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {
    
                        innerPropValue = [
                            subNode.propertyList[ 4 ],
                            subNode.propertyList[ 5 ],
                            subNode.propertyList[ 6 ]
                        ];
    
                    } else {
    
                        innerPropValue = subNode.propertyList[ 4 ];
    
                    }
    
                    // this will be copied to parent, see above
                    node[ innerPropName ] = {
    
                        'type': innerPropType1,
                        'type2': innerPropType2,
                        'flag': innerPropFlag,
                        'value': innerPropValue
    
                    };
    
                } else if ( node[ subNode.name ] === undefined ) {
    
                    if ( typeof subNode.id === 'number' ) {
    
                        node[ subNode.name ] = {};
                        node[ subNode.name ][ subNode.id ] = subNode;
    
                    } else {
    
                        node[ subNode.name ] = subNode;
    
                    }
    
                } else {
    
                    if ( subNode.name === 'PoseNode' ) {
    
                        if ( ! Array.isArray( node[ subNode.name ] ) ) {
    
                            node[ subNode.name ] = [ node[ subNode.name ] ];
    
                        }
    
                        node[ subNode.name ].push( subNode );
    
                    } else if ( node[ subNode.name ][ subNode.id ] === undefined ) {
    
                        node[ subNode.name ][ subNode.id ] = subNode;
    
                    }
    
                }
    
            },
    
            parseProperty: function ( reader ) {
    
                var type = reader.getString( 1 );
    
                switch ( type ) {
    
                    case 'C':
                        return reader.getBoolean();
    
                    case 'D':
                        return reader.getFloat64();
    
                    case 'F':
                        return reader.getFloat32();
    
                    case 'I':
                        return reader.getInt32();
    
                    case 'L':
                        return reader.getInt64();
    
                    case 'R':
                        var length = reader.getUint32();
                        return reader.getArrayBuffer( length );
    
                    case 'S':
                        var length = reader.getUint32();
                        return reader.getString( length );
    
                    case 'Y':
                        return reader.getInt16();
    
                    case 'b':
                    case 'c':
                    case 'd':
                    case 'f':
                    case 'i':
                    case 'l':
    
                        var arrayLength = reader.getUint32();
                        var encoding = reader.getUint32(); // 0: non-compressed, 1: compressed
                        var compressedLength = reader.getUint32();
    
                        if ( encoding === 0 ) {
    
                            switch ( type ) {
    
                                case 'b':
                                case 'c':
                                    return reader.getBooleanArray( arrayLength );
    
                                case 'd':
                                    return reader.getFloat64Array( arrayLength );
    
                                case 'f':
                                    return reader.getFloat32Array( arrayLength );
    
                                case 'i':
                                    return reader.getInt32Array( arrayLength );
    
                                case 'l':
                                    return reader.getInt64Array( arrayLength );
    
                            }
    
                        }
    
                        if ( window.Zlib === undefined ) {
    
                            console.error( 'THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js' );
    
                        }
    
                        var inflate = new Zlib.Inflate( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef
                        var reader2 = new BinaryReader( inflate.decompress().buffer );
    
                        switch ( type ) {
    
                            case 'b':
                            case 'c':
                                return reader2.getBooleanArray( arrayLength );
    
                            case 'd':
                                return reader2.getFloat64Array( arrayLength );
    
                            case 'f':
                                return reader2.getFloat32Array( arrayLength );
    
                            case 'i':
                                return reader2.getInt32Array( arrayLength );
    
                            case 'l':
                                return reader2.getInt64Array( arrayLength );
    
                        }
    
                    default:
                        throw new Error( 'THREE.FBXLoader: Unknown property type ' + type );
    
                }
    
            }
    
        } );
    
    
        function BinaryReader( buffer, littleEndian ) {
    
            this.dv = new DataView( buffer );
            this.offset = 0;
            this.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;
    
        }
    
        Object.assign( BinaryReader.prototype, {
    
            getOffset: function () {
    
                return this.offset;
    
            },
    
            size: function () {
    
                return this.dv.buffer.byteLength;
    
            },
    
            skip: function ( length ) {
    
                this.offset += length;
    
            },
    
            // seems like true/false representation depends on exporter.
            // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)
            // then sees LSB.
            getBoolean: function () {
    
                return ( this.getUint8() & 1 ) === 1;
    
            },
    
            getBooleanArray: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getBoolean() );
    
                }
    
                return a;
    
            },
    
            getUint8: function () {
    
                var value = this.dv.getUint8( this.offset );
                this.offset += 1;
                return value;
    
            },
    
            getInt16: function () {
    
                var value = this.dv.getInt16( this.offset, this.littleEndian );
                this.offset += 2;
                return value;
    
            },
    
            getInt32: function () {
    
                var value = this.dv.getInt32( this.offset, this.littleEndian );
                this.offset += 4;
                return value;
    
            },
    
            getInt32Array: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getInt32() );
    
                }
    
                return a;
    
            },
    
            getUint32: function () {
    
                var value = this.dv.getUint32( this.offset, this.littleEndian );
                this.offset += 4;
                return value;
    
            },
    
            // JavaScript doesn't support 64-bit integer so calculate this here
            // 1 << 32 will return 1 so using multiply operation instead here.
            // There's a possibility that this method returns wrong value if the value
            // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.
            // TODO: safely handle 64-bit integer
            getInt64: function () {
    
                var low, high;
    
                if ( this.littleEndian ) {
    
                    low = this.getUint32();
                    high = this.getUint32();
    
                } else {
    
                    high = this.getUint32();
                    low = this.getUint32();
    
                }
    
                // calculate negative value
                if ( high & 0x80000000 ) {
    
                    high = ~ high & 0xFFFFFFFF;
                    low = ~ low & 0xFFFFFFFF;
    
                    if ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;
    
                    low = ( low + 1 ) & 0xFFFFFFFF;
    
                    return - ( high * 0x100000000 + low );
    
                }
    
                return high * 0x100000000 + low;
    
            },
    
            getInt64Array: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getInt64() );
    
                }
    
                return a;
    
            },
    
            // Note: see getInt64() comment
            getUint64: function () {
    
                var low, high;
    
                if ( this.littleEndian ) {
    
                    low = this.getUint32();
                    high = this.getUint32();
    
                } else {
    
                    high = this.getUint32();
                    low = this.getUint32();
    
                }
    
                return high * 0x100000000 + low;
    
            },
    
            getFloat32: function () {
    
                var value = this.dv.getFloat32( this.offset, this.littleEndian );
                this.offset += 4;
                return value;
    
            },
    
            getFloat32Array: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getFloat32() );
    
                }
    
                return a;
    
            },
    
            getFloat64: function () {
    
                var value = this.dv.getFloat64( this.offset, this.littleEndian );
                this.offset += 8;
                return value;
    
            },
    
            getFloat64Array: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getFloat64() );
    
                }
    
                return a;
    
            },
    
            getArrayBuffer: function ( size ) {
    
                var value = this.dv.buffer.slice( this.offset, this.offset + size );
                this.offset += size;
                return value;
    
            },
    
            getString: function ( size ) {
    
                var a = new Uint8Array( size );
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a[ i ] = this.getUint8();
    
                }
    
                var nullByte = a.indexOf( 0 );
                if ( nullByte >= 0 ) a = a.slice( 0, nullByte );
    
                return THREE.LoaderUtils.decodeText( a );
    
            }
    
        } );
    
        // FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)
        // and BinaryParser( FBX Binary format)
        function FBXTree() {}
    
        Object.assign( FBXTree.prototype, {
    
            add: function ( key, val ) {
    
                this[ key ] = val;
    
            },
    
        } );
    
        function isFbxFormatBinary( buffer ) {
    
            var CORRECT = 'Kaydara FBX Binary  \0';
    
            return buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );
    
        }
    
        function isFbxFormatASCII( text ) {
    
            var CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\', 'F', 'B', 'X', '\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\', '\\' ];
    
            var cursor = 0;
    
            function read( offset ) {
    
                var result = text[ offset - 1 ];
                text = text.slice( cursor + offset );
                cursor ++;
                return result;
    
            }
    
            for ( var i = 0; i < CORRECT.length; ++ i ) {
    
                var num = read( 1 );
                if ( num === CORRECT[ i ] ) {
    
                    return false;
    
                }
    
            }
    
            return true;
    
        }
    
        function getFbxVersion( text ) {
    
            var versionRegExp = /FBXVersion: (\d+)/;
            var match = text.match( versionRegExp );
            if ( match ) {
    
                var version = parseInt( match[ 1 ] );
                return version;
    
            }
            throw new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );
    
        }
    
        // Converts FBX ticks into real time seconds.
        function convertFBXTimeToSeconds( time ) {
    
            return time / 46186158000;
    
        }
    
    
        // Parses comma separated list of numbers and returns them an array.
        // Used internally by the TextParser
        function parseNumberArray( value ) {
    
            var array = value.split( ',' ).map( function ( val ) {
    
                return parseFloat( val );
    
            } );
    
            return array;
    
        }
    
        function convertArrayBufferToString( buffer, from, to ) {
    
            if ( from === undefined ) from = 0;
            if ( to === undefined ) to = buffer.byteLength;
    
            return THREE.LoaderUtils.decodeText( new Uint8Array( buffer, from, to ) );
    
        }
    
        function append( a, b ) {
    
            for ( var i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {
    
                a[ j ] = b[ i ];
    
            }
    
        }
    
        function slice( a, b, from, to ) {
    
            for ( var i = from, j = 0; i < to; i ++, j ++ ) {
    
                a[ j ] = b[ i ];
    
            }
    
            return a;
    
        }
    
    } )();
},{}],"framer-form/form/lib/GLTFLoader":[function(require,module,exports){
/**
 * @author Rich Tibbett / https://github.com/richtr
 * @author mrdoob / http://mrdoob.com/
 * @author Tony Parisi / http://www.tonyparisi.com/
 * @author Takahiro / https://github.com/takahirox
 * @author Don McCurdy / https://www.donmccurdy.com
 */

THREE.GLTFLoader = ( function () {
    
        function GLTFLoader( manager ) {
    
            this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;
    
        }
    
        GLTFLoader.prototype = {
    
            constructor: GLTFLoader,
    
            crossOrigin: 'Anonymous',
    
            load: function ( url, onLoad, onProgress, onError ) {
    
                var scope = this;
    
                var path = this.path !== undefined ? this.path : THREE.LoaderUtils.extractUrlBase( url );
    
                var loader = new THREE.FileLoader( scope.manager );
    
                loader.setResponseType( 'arraybuffer' );
    
                loader.load( url, function ( data ) {
    
                    try {
    
                        scope.parse( data, path, onLoad, onError );
    
                    } catch ( e ) {
    
                        if ( onError !== undefined ) {
    
                            onError( e );
    
                        } else {
    
                            throw e;
    
                        }
    
                    }
    
                }, onProgress, onError );
    
            },
    
            setCrossOrigin: function ( value ) {
    
                this.crossOrigin = value;
                return this;
    
            },
    
            setPath: function ( value ) {
    
                this.path = value;
                return this;
    
            },
    
            parse: function ( data, path, onLoad, onError ) {
    
                var content;
                var extensions = {};
    
                if ( typeof data === 'string' ) {
    
                    content = data;
    
                } else {
    
                    var magic = THREE.LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );
    
                    if ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {
    
                        try {
    
                            extensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );
    
                        } catch ( error ) {
    
                            if ( onError ) onError( error );
                            return;
    
                        }
    
                        content = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;
    
                    } else {
    
                        content = THREE.LoaderUtils.decodeText( new Uint8Array( data ) );
    
                    }
    
                }
    
                var json = JSON.parse( content );
    
                if ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {
    
                    if ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.' ) );
                    return;
    
                }
    
                if ( json.extensionsUsed ) {
    
                    if ( json.extensionsUsed.indexOf( EXTENSIONS.KHR_LIGHTS ) >= 0 ) {
    
                        extensions[ EXTENSIONS.KHR_LIGHTS ] = new GLTFLightsExtension( json );
    
                    }
    
                    if ( json.extensionsUsed.indexOf( EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ) >= 0 ) {
    
                        extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] = new GLTFMaterialsPbrSpecularGlossinessExtension();
    
                    }
    
                }
    
                console.time( 'GLTFLoader' );
    
                var parser = new GLTFParser( json, extensions, {
    
                    path: path || this.path || '',
                    crossOrigin: this.crossOrigin,
                    manager: this.manager
    
                } );
    
                parser.parse( function ( scene, scenes, cameras, animations, asset ) {
    
                    console.timeEnd( 'GLTFLoader' );
    
                    var glTF = {
                        scene: scene,
                        scenes: scenes,
                        cameras: cameras,
                        animations: animations,
                        asset: asset
                    };
    
                    onLoad( glTF );
    
                }, onError );
    
            }
    
        };
    
        /* GLTFREGISTRY */
    
        function GLTFRegistry() {
    
            var objects = {};
    
            return	{
    
                get: function ( key ) {
    
                    return objects[ key ];
    
                },
    
                add: function ( key, object ) {
    
                    objects[ key ] = object;
    
                },
    
                remove: function ( key ) {
    
                    delete objects[ key ];
    
                },
    
                removeAll: function () {
    
                    objects = {};
    
                }
    
            };
    
        }
    
        /*********************************/
        /********** EXTENSIONS ***********/
        /*********************************/
    
        var EXTENSIONS = {
            KHR_BINARY_GLTF: 'KHR_binary_glTF',
            KHR_LIGHTS: 'KHR_lights',
            KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness'
        };
    
        /**
         * Lights Extension
         *
         * Specification: PENDING
         */
        function GLTFLightsExtension( json ) {
    
            this.name = EXTENSIONS.KHR_LIGHTS;
    
            this.lights = {};
    
            var extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS ] ) || {};
            var lights = extension.lights || {};
    
            for ( var lightId in lights ) {
    
                var light = lights[ lightId ];
                var lightNode;
    
                var color = new THREE.Color().fromArray( light.color );
    
                switch ( light.type ) {
    
                    case 'directional':
                        lightNode = new THREE.DirectionalLight( color );
                        lightNode.position.set( 0, 0, 1 );
                        break;
    
                    case 'point':
                        lightNode = new THREE.PointLight( color );
                        break;
    
                    case 'spot':
                        lightNode = new THREE.SpotLight( color );
                        lightNode.position.set( 0, 0, 1 );
                        break;
    
                    case 'ambient':
                        lightNode = new THREE.AmbientLight( color );
                        break;
    
                }
    
                if ( lightNode ) {
    
                    if ( light.constantAttenuation !== undefined ) {
    
                        lightNode.intensity = light.constantAttenuation;
    
                    }
    
                    if ( light.linearAttenuation !== undefined ) {
    
                        lightNode.distance = 1 / light.linearAttenuation;
    
                    }
    
                    if ( light.quadraticAttenuation !== undefined ) {
    
                        lightNode.decay = light.quadraticAttenuation;
    
                    }
    
                    if ( light.fallOffAngle !== undefined ) {
    
                        lightNode.angle = light.fallOffAngle;
    
                    }
    
                    if ( light.fallOffExponent !== undefined ) {
    
                        console.warn( 'THREE.GLTFLoader:: light.fallOffExponent not currently supported.' );
    
                    }
    
                    lightNode.name = light.name || ( 'light_' + lightId );
                    this.lights[ lightId ] = lightNode;
    
                }
    
            }
    
        }
    
        /* BINARY EXTENSION */
    
        var BINARY_EXTENSION_BUFFER_NAME = 'binary_glTF';
        var BINARY_EXTENSION_HEADER_MAGIC = 'glTF';
        var BINARY_EXTENSION_HEADER_LENGTH = 12;
        var BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };
    
        function GLTFBinaryExtension( data ) {
    
            this.name = EXTENSIONS.KHR_BINARY_GLTF;
            this.content = null;
            this.body = null;
    
            var headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );
    
            this.header = {
                magic: THREE.LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),
                version: headerView.getUint32( 4, true ),
                length: headerView.getUint32( 8, true )
            };
    
            if ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {
    
                throw new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );
    
            } else if ( this.header.version < 2.0 ) {
    
                throw new Error( 'THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.' );
    
            }
    
            var chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );
            var chunkIndex = 0;
    
            while ( chunkIndex < chunkView.byteLength ) {
    
                var chunkLength = chunkView.getUint32( chunkIndex, true );
                chunkIndex += 4;
    
                var chunkType = chunkView.getUint32( chunkIndex, true );
                chunkIndex += 4;
    
                if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {
    
                    var contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );
                    this.content = THREE.LoaderUtils.decodeText( contentArray );
    
                } else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {
    
                    var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;
                    this.body = data.slice( byteOffset, byteOffset + chunkLength );
    
                }
    
                // Clients must ignore chunks with unknown types.
    
                chunkIndex += chunkLength;
    
            }
    
            if ( this.content === null ) {
    
                throw new Error( 'THREE.GLTFLoader: JSON content not found.' );
    
            }
    
        }
    
        /**
         * Specular-Glossiness Extension
         *
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness
         */
        function GLTFMaterialsPbrSpecularGlossinessExtension() {
    
            return {
    
                name: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,
    
                specularGlossinessParams: [
                    'color',
                    'map',
                    'lightMap',
                    'lightMapIntensity',
                    'aoMap',
                    'aoMapIntensity',
                    'emissive',
                    'emissiveIntensity',
                    'emissiveMap',
                    'bumpMap',
                    'bumpScale',
                    'normalMap',
                    'displacementMap',
                    'displacementScale',
                    'displacementBias',
                    'specularMap',
                    'specular',
                    'glossinessMap',
                    'glossiness',
                    'alphaMap',
                    'envMap',
                    'envMapIntensity',
                    'refractionRatio',
                ],
    
                getMaterialType: function () {
    
                    return THREE.ShaderMaterial;
    
                },
    
                extendParams: function ( params, material, parser ) {
    
                    var pbrSpecularGlossiness = material.extensions[ this.name ];
    
                    var shader = THREE.ShaderLib[ 'standard' ];
    
                    var uniforms = THREE.UniformsUtils.clone( shader.uniforms );
    
                    var specularMapParsFragmentChunk = [
                        '#ifdef USE_SPECULARMAP',
                        '	uniform sampler2D specularMap;',
                        '#endif'
                    ].join( '\n' );
    
                    var glossinessMapParsFragmentChunk = [
                        '#ifdef USE_GLOSSINESSMAP',
                        '	uniform sampler2D glossinessMap;',
                        '#endif'
                    ].join( '\n' );
    
                    var specularMapFragmentChunk = [
                        'vec3 specularFactor = specular;',
                        '#ifdef USE_SPECULARMAP',
                        '	vec4 texelSpecular = texture2D( specularMap, vUv );',
                        '	texelSpecular = sRGBToLinear( texelSpecular );',
                        '	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',
                        '	specularFactor *= texelSpecular.rgb;',
                        '#endif'
                    ].join( '\n' );
    
                    var glossinessMapFragmentChunk = [
                        'float glossinessFactor = glossiness;',
                        '#ifdef USE_GLOSSINESSMAP',
                        '	vec4 texelGlossiness = texture2D( glossinessMap, vUv );',
                        '	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',
                        '	glossinessFactor *= texelGlossiness.a;',
                        '#endif'
                    ].join( '\n' );
    
                    var lightPhysicalFragmentChunk = [
                        'PhysicalMaterial material;',
                        'material.diffuseColor = diffuseColor.rgb;',
                        'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',
                        'material.specularColor = specularFactor.rgb;',
                    ].join( '\n' );
    
                    var fragmentShader = shader.fragmentShader
                        .replace( '#include <specularmap_fragment>', '' )
                        .replace( 'uniform float roughness;', 'uniform vec3 specular;' )
                        .replace( 'uniform float metalness;', 'uniform float glossiness;' )
                        .replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )
                        .replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )
                        .replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )
                        .replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )
                        .replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );
    
                    delete uniforms.roughness;
                    delete uniforms.metalness;
                    delete uniforms.roughnessMap;
                    delete uniforms.metalnessMap;
    
                    uniforms.specular = { value: new THREE.Color().setHex( 0x111111 ) };
                    uniforms.glossiness = { value: 0.5 };
                    uniforms.specularMap = { value: null };
                    uniforms.glossinessMap = { value: null };
    
                    params.vertexShader = shader.vertexShader;
                    params.fragmentShader = fragmentShader;
                    params.uniforms = uniforms;
                    params.defines = { 'STANDARD': '' };
    
                    params.color = new THREE.Color( 1.0, 1.0, 1.0 );
                    params.opacity = 1.0;
    
                    var pending = [];
    
                    if ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {
    
                        var array = pbrSpecularGlossiness.diffuseFactor;
    
                        params.color.fromArray( array );
                        params.opacity = array[ 3 ];
    
                    }
    
                    if ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {
    
                        pending.push( parser.assignTexture( params, 'map', pbrSpecularGlossiness.diffuseTexture.index ) );
    
                    }
    
                    params.emissive = new THREE.Color( 0.0, 0.0, 0.0 );
                    params.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;
                    params.specular = new THREE.Color( 1.0, 1.0, 1.0 );
    
                    if ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {
    
                        params.specular.fromArray( pbrSpecularGlossiness.specularFactor );
    
                    }
    
                    if ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {
    
                        var specGlossIndex = pbrSpecularGlossiness.specularGlossinessTexture.index;
                        pending.push( parser.assignTexture( params, 'glossinessMap', specGlossIndex ) );
                        pending.push( parser.assignTexture( params, 'specularMap', specGlossIndex ) );
    
                    }
    
                    return Promise.all( pending );
    
                },
    
                createMaterial: function ( params ) {
    
                    // setup material properties based on MeshStandardMaterial for Specular-Glossiness
    
                    var material = new THREE.ShaderMaterial( {
                        defines: params.defines,
                        vertexShader: params.vertexShader,
                        fragmentShader: params.fragmentShader,
                        uniforms: params.uniforms,
                        fog: true,
                        lights: true,
                        opacity: params.opacity,
                        transparent: params.transparent
                    } );
    
                    material.isGLTFSpecularGlossinessMaterial = true;
    
                    material.color = params.color;
    
                    material.map = params.map === undefined ? null : params.map;
    
                    material.lightMap = null;
                    material.lightMapIntensity = 1.0;
    
                    material.aoMap = params.aoMap === undefined ? null : params.aoMap;
                    material.aoMapIntensity = 1.0;
    
                    material.emissive = params.emissive;
                    material.emissiveIntensity = 1.0;
                    material.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;
    
                    material.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;
                    material.bumpScale = 1;
    
                    material.normalMap = params.normalMap === undefined ? null : params.normalMap;
                    if ( params.normalScale ) material.normalScale = params.normalScale;
    
                    material.displacementMap = null;
                    material.displacementScale = 1;
                    material.displacementBias = 0;
    
                    material.specularMap = params.specularMap === undefined ? null : params.specularMap;
                    material.specular = params.specular;
    
                    material.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;
                    material.glossiness = params.glossiness;
    
                    material.alphaMap = null;
    
                    material.envMap = params.envMap === undefined ? null : params.envMap;
                    material.envMapIntensity = 1.0;
    
                    material.refractionRatio = 0.98;
    
                    material.extensions.derivatives = true;
    
                    return material;
    
                },
    
                /**
                 * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can
                 * copy only properties it knows about or inherits, and misses many properties that would
                 * normally be defined by MeshStandardMaterial.
                 *
                 * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of
                 * loading a glTF model, but cloning later (e.g. by the user) would require these changes
                 * AND also updating `.onBeforeRender` on the parent mesh.
                 *
                 * @param  {THREE.ShaderMaterial} source
                 * @return {THREE.ShaderMaterial}
                 */
                cloneMaterial: function ( source ) {
    
                    var target = source.clone();
    
                    target.isGLTFSpecularGlossinessMaterial = true;
    
                    var params = this.specularGlossinessParams;
    
                    for ( var i = 0, il = params.length; i < il; i ++ ) {
    
                        target[ params[ i ] ] = source[ params[ i ] ];
    
                    }
    
                    return target;
    
                },
    
                // Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.
                refreshUniforms: function ( renderer, scene, camera, geometry, material, group ) {
    
                    if ( material.isGLTFSpecularGlossinessMaterial !== true ) {
    
                        return;
    
                    }
    
                    var uniforms = material.uniforms;
                    var defines = material.defines;
    
                    uniforms.opacity.value = material.opacity;
    
                    uniforms.diffuse.value.copy( material.color );
                    uniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );
    
                    uniforms.map.value = material.map;
                    uniforms.specularMap.value = material.specularMap;
                    uniforms.alphaMap.value = material.alphaMap;
    
                    uniforms.lightMap.value = material.lightMap;
                    uniforms.lightMapIntensity.value = material.lightMapIntensity;
    
                    uniforms.aoMap.value = material.aoMap;
                    uniforms.aoMapIntensity.value = material.aoMapIntensity;
    
                    // uv repeat and offset setting priorities
                    // 1. color map
                    // 2. specular map
                    // 3. normal map
                    // 4. bump map
                    // 5. alpha map
                    // 6. emissive map
    
                    var uvScaleMap;
    
                    if ( material.map ) {
    
                        uvScaleMap = material.map;
    
                    } else if ( material.specularMap ) {
    
                        uvScaleMap = material.specularMap;
    
                    } else if ( material.displacementMap ) {
    
                        uvScaleMap = material.displacementMap;
    
                    } else if ( material.normalMap ) {
    
                        uvScaleMap = material.normalMap;
    
                    } else if ( material.bumpMap ) {
    
                        uvScaleMap = material.bumpMap;
    
                    } else if ( material.glossinessMap ) {
    
                        uvScaleMap = material.glossinessMap;
    
                    } else if ( material.alphaMap ) {
    
                        uvScaleMap = material.alphaMap;
    
                    } else if ( material.emissiveMap ) {
    
                        uvScaleMap = material.emissiveMap;
    
                    }
    
                    if ( uvScaleMap !== undefined ) {
    
                        // backwards compatibility
                        if ( uvScaleMap.isWebGLRenderTarget ) {
    
                            uvScaleMap = uvScaleMap.texture;
    
                        }
    
                        var offset;
                        var repeat;
    
                        if ( uvScaleMap.matrix !== undefined ) {
    
                            // > r88.
    
                            if ( uvScaleMap.matrixAutoUpdate === true ) {
    
                                offset = uvScaleMap.offset;
                                repeat = uvScaleMap.repeat;
                                var rotation = uvScaleMap.rotation;
                                var center = uvScaleMap.center;
    
                                uvScaleMap.matrix.setUvTransform( offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y );
    
                            }
    
                            uniforms.uvTransform.value.copy( uvScaleMap.matrix );
    
                        } else {
    
                            // <= r87. Remove when reasonable.
    
                            offset = uvScaleMap.offset;
                            repeat = uvScaleMap.repeat;
    
                            uniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );
    
                        }
    
                    }
    
                    uniforms.envMap.value = material.envMap;
                    uniforms.envMapIntensity.value = material.envMapIntensity;
                    uniforms.flipEnvMap.value = ( material.envMap && material.envMap.isCubeTexture ) ? - 1 : 1;
    
                    uniforms.refractionRatio.value = material.refractionRatio;
    
                    uniforms.specular.value.copy( material.specular );
                    uniforms.glossiness.value = material.glossiness;
    
                    uniforms.glossinessMap.value = material.glossinessMap;
    
                    uniforms.emissiveMap.value = material.emissiveMap;
                    uniforms.bumpMap.value = material.bumpMap;
                    uniforms.normalMap.value = material.normalMap;
    
                    uniforms.displacementMap.value = material.displacementMap;
                    uniforms.displacementScale.value = material.displacementScale;
                    uniforms.displacementBias.value = material.displacementBias;
    
                    if ( uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined ) {
    
                        defines.USE_GLOSSINESSMAP = '';
                        // set USE_ROUGHNESSMAP to enable vUv
                        defines.USE_ROUGHNESSMAP = '';
    
                    }
    
                    if ( uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined ) {
    
                        delete defines.USE_GLOSSINESSMAP;
                        delete defines.USE_ROUGHNESSMAP;
    
                    }
    
                }
    
            };
    
        }
    
        /*********************************/
        /********** INTERPOLATION ********/
        /*********************************/
    
        // Spline Interpolation
        // Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation
        function GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {
    
            THREE.Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );
    
        };
    
        GLTFCubicSplineInterpolant.prototype = Object.create( THREE.Interpolant.prototype );
        GLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;
    
        GLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {
    
            var result = this.resultBuffer;
            var values = this.sampleValues;
            var stride = this.valueSize;
    
            var stride2 = stride * 2;
            var stride3 = stride * 3;
    
            var td = t1 - t0;
    
            var p = ( t - t0 ) / td;
            var pp = p * p;
            var ppp = pp * p;
    
            var offset1 = i1 * stride3;
            var offset0 = offset1 - stride3;
    
            var s0 = 2 * ppp - 3 * pp + 1;
            var s1 = ppp - 2 * pp + p;
            var s2 = - 2 * ppp + 3 * pp;
            var s3 = ppp - pp;
    
            // Layout of keyframe output values for CUBICSPLINE animations:
            //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]
            for ( var i = 0; i !== stride; i ++ ) {
    
                var p0 = values[ offset0 + i + stride ];        // splineVertex_k
                var m0 = values[ offset0 + i + stride2 ] * td;  // outTangent_k * (t_k+1 - t_k)
                var p1 = values[ offset1 + i + stride ];        // splineVertex_k+1
                var m1 = values[ offset1 + i ] * td;            // inTangent_k+1 * (t_k+1 - t_k)
    
                result[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;
    
            }
    
            return result;
    
        };
    
        /*********************************/
        /********** INTERNALS ************/
        /*********************************/
    
        /* CONSTANTS */
    
        var WEBGL_CONSTANTS = {
            FLOAT: 5126,
            //FLOAT_MAT2: 35674,
            FLOAT_MAT3: 35675,
            FLOAT_MAT4: 35676,
            FLOAT_VEC2: 35664,
            FLOAT_VEC3: 35665,
            FLOAT_VEC4: 35666,
            LINEAR: 9729,
            REPEAT: 10497,
            SAMPLER_2D: 35678,
            POINTS: 0,
            LINES: 1,
            LINE_LOOP: 2,
            LINE_STRIP: 3,
            TRIANGLES: 4,
            TRIANGLE_STRIP: 5,
            TRIANGLE_FAN: 6,
            UNSIGNED_BYTE: 5121,
            UNSIGNED_SHORT: 5123
        };
    
        var WEBGL_TYPE = {
            5126: Number,
            //35674: THREE.Matrix2,
            35675: THREE.Matrix3,
            35676: THREE.Matrix4,
            35664: THREE.Vector2,
            35665: THREE.Vector3,
            35666: THREE.Vector4,
            35678: THREE.Texture
        };
    
        var WEBGL_COMPONENT_TYPES = {
            5120: Int8Array,
            5121: Uint8Array,
            5122: Int16Array,
            5123: Uint16Array,
            5125: Uint32Array,
            5126: Float32Array
        };
    
        var WEBGL_FILTERS = {
            9728: THREE.NearestFilter,
            9729: THREE.LinearFilter,
            9984: THREE.NearestMipMapNearestFilter,
            9985: THREE.LinearMipMapNearestFilter,
            9986: THREE.NearestMipMapLinearFilter,
            9987: THREE.LinearMipMapLinearFilter
        };
    
        var WEBGL_WRAPPINGS = {
            33071: THREE.ClampToEdgeWrapping,
            33648: THREE.MirroredRepeatWrapping,
            10497: THREE.RepeatWrapping
        };
    
        var WEBGL_TEXTURE_FORMATS = {
            6406: THREE.AlphaFormat,
            6407: THREE.RGBFormat,
            6408: THREE.RGBAFormat,
            6409: THREE.LuminanceFormat,
            6410: THREE.LuminanceAlphaFormat
        };
    
        var WEBGL_TEXTURE_DATATYPES = {
            5121: THREE.UnsignedByteType,
            32819: THREE.UnsignedShort4444Type,
            32820: THREE.UnsignedShort5551Type,
            33635: THREE.UnsignedShort565Type
        };
    
        var WEBGL_SIDES = {
            1028: THREE.BackSide, // Culling front
            1029: THREE.FrontSide // Culling back
            //1032: THREE.NoSide   // Culling front and back, what to do?
        };
    
        var WEBGL_DEPTH_FUNCS = {
            512: THREE.NeverDepth,
            513: THREE.LessDepth,
            514: THREE.EqualDepth,
            515: THREE.LessEqualDepth,
            516: THREE.GreaterEqualDepth,
            517: THREE.NotEqualDepth,
            518: THREE.GreaterEqualDepth,
            519: THREE.AlwaysDepth
        };
    
        var WEBGL_BLEND_EQUATIONS = {
            32774: THREE.AddEquation,
            32778: THREE.SubtractEquation,
            32779: THREE.ReverseSubtractEquation
        };
    
        var WEBGL_BLEND_FUNCS = {
            0: THREE.ZeroFactor,
            1: THREE.OneFactor,
            768: THREE.SrcColorFactor,
            769: THREE.OneMinusSrcColorFactor,
            770: THREE.SrcAlphaFactor,
            771: THREE.OneMinusSrcAlphaFactor,
            772: THREE.DstAlphaFactor,
            773: THREE.OneMinusDstAlphaFactor,
            774: THREE.DstColorFactor,
            775: THREE.OneMinusDstColorFactor,
            776: THREE.SrcAlphaSaturateFactor
            // The followings are not supported by Three.js yet
            //32769: CONSTANT_COLOR,
            //32770: ONE_MINUS_CONSTANT_COLOR,
            //32771: CONSTANT_ALPHA,
            //32772: ONE_MINUS_CONSTANT_COLOR
        };
    
        var WEBGL_TYPE_SIZES = {
            'SCALAR': 1,
            'VEC2': 2,
            'VEC3': 3,
            'VEC4': 4,
            'MAT2': 4,
            'MAT3': 9,
            'MAT4': 16
        };
    
        var PATH_PROPERTIES = {
            scale: 'scale',
            translation: 'position',
            rotation: 'quaternion',
            weights: 'morphTargetInfluences'
        };
    
        var INTERPOLATION = {
            CUBICSPLINE: THREE.InterpolateSmooth, // We use custom interpolation GLTFCubicSplineInterpolation for CUBICSPLINE.
                                                  // KeyframeTrack.optimize() can't handle glTF Cubic Spline output values layout,
                                                  // using THREE.InterpolateSmooth for KeyframeTrack instantiation to prevent optimization.
                                                  // See KeyframeTrack.optimize() for the detail.
            LINEAR: THREE.InterpolateLinear,
            STEP: THREE.InterpolateDiscrete
        };
    
        var STATES_ENABLES = {
            2884: 'CULL_FACE',
            2929: 'DEPTH_TEST',
            3042: 'BLEND',
            3089: 'SCISSOR_TEST',
            32823: 'POLYGON_OFFSET_FILL',
            32926: 'SAMPLE_ALPHA_TO_COVERAGE'
        };
    
        var ALPHA_MODES = {
            OPAQUE: 'OPAQUE',
            MASK: 'MASK',
            BLEND: 'BLEND'
        };
    
        /* UTILITY FUNCTIONS */
    
        function resolveURL( url, path ) {
    
            // Invalid URL
            if ( typeof url !== 'string' || url === '' ) return '';
    
            // Absolute URL http://,https://,//
            if ( /^(https?:)?\/\//i.test( url ) ) return url;
    
            // Data URI
            if ( /^data:.*,.*$/i.test( url ) ) return url;
    
            // Blob URL
            if ( /^blob:.*$/i.test( url ) ) return url;
    
            // Relative URL
            return path + url;
    
        }
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material
         */
        function createDefaultMaterial() {
    
            return new THREE.MeshStandardMaterial( {
                color: 0xFFFFFF,
                emissive: 0x000000,
                metalness: 1,
                roughness: 1,
                transparent: false,
                depthTest: true,
                side: THREE.FrontSide
            } );
    
        }
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets
         *
         * TODO: Implement support for morph targets on TANGENT attribute.
         *
         * @param {THREE.Mesh} mesh
         * @param {GLTF.Mesh} meshDef
         * @param {GLTF.Primitive} primitiveDef
         * @param {Array<THREE.BufferAttribute>} accessors
         */
        function addMorphTargets( mesh, meshDef, primitiveDef, accessors ) {
    
            var geometry = mesh.geometry;
            var material = mesh.material;
    
            var targets = primitiveDef.targets;
            var morphAttributes = geometry.morphAttributes;
    
            morphAttributes.position = [];
            morphAttributes.normal = [];
    
            material.morphTargets = true;
    
            for ( var i = 0, il = targets.length; i < il; i ++ ) {
    
                var target = targets[ i ];
                var attributeName = 'morphTarget' + i;
    
                var positionAttribute, normalAttribute;
    
                if ( target.POSITION !== undefined ) {
    
                    // Three.js morph formula is
                    //   position
                    //     + weight0 * ( morphTarget0 - position )
                    //     + weight1 * ( morphTarget1 - position )
                    //     ...
                    // while the glTF one is
                    //   position
                    //     + weight0 * morphTarget0
                    //     + weight1 * morphTarget1
                    //     ...
                    // then adding position to morphTarget.
                    // So morphTarget value will depend on mesh's position, then cloning attribute
                    // for the case if attribute is shared among two or more meshes.
    
                    positionAttribute = cloneBufferAttribute( accessors[ target.POSITION ] );
                    var position = geometry.attributes.position;
    
                    for ( var j = 0, jl = positionAttribute.count; j < jl; j ++ ) {
    
                        positionAttribute.setXYZ(
                            j,
                            positionAttribute.getX( j ) + position.getX( j ),
                            positionAttribute.getY( j ) + position.getY( j ),
                            positionAttribute.getZ( j ) + position.getZ( j )
                        );
    
                    }
    
                } else if ( geometry.attributes.position ) {
    
                    // Copying the original position not to affect the final position.
                    // See the formula above.
                    positionAttribute = cloneBufferAttribute( geometry.attributes.position );
    
                }
    
                if ( positionAttribute !== undefined ) {
    
                    positionAttribute.name = attributeName;
                    morphAttributes.position.push( positionAttribute );
    
                }
    
                if ( target.NORMAL !== undefined ) {
    
                    material.morphNormals = true;
    
                    // see target.POSITION's comment
    
                    normalAttribute = cloneBufferAttribute( accessors[ target.NORMAL ] );
                    var normal = geometry.attributes.normal;
    
                    for ( var j = 0, jl = normalAttribute.count; j < jl; j ++ ) {
    
                        normalAttribute.setXYZ(
                            j,
                            normalAttribute.getX( j ) + normal.getX( j ),
                            normalAttribute.getY( j ) + normal.getY( j ),
                            normalAttribute.getZ( j ) + normal.getZ( j )
                        );
    
                    }
    
                } else if ( geometry.attributes.normal !== undefined ) {
    
                    normalAttribute = cloneBufferAttribute( geometry.attributes.normal );
    
                }
    
                if ( normalAttribute !== undefined ) {
    
                    normalAttribute.name = attributeName;
                    morphAttributes.normal.push( normalAttribute );
    
                }
    
            }
    
            mesh.updateMorphTargets();
    
            if ( meshDef.weights !== undefined ) {
    
                for ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {
    
                    mesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];
    
                }
    
            }
    
        }
    
        function isPrimitiveEqual( a, b ) {
    
            if ( a.indices !== b.indices ) {
    
                return false;
    
            }
    
            var attribA = a.attributes || {};
            var attribB = b.attributes || {};
            var keysA = Object.keys( attribA );
            var keysB = Object.keys( attribB );
    
            if ( keysA.length !== keysB.length ) {
    
                return false;
    
            }
    
            for ( var i = 0, il = keysA.length; i < il; i ++ ) {
    
                var key = keysA[ i ];
    
                if ( attribA[ key ] !== attribB[ key ] ) {
    
                    return false;
    
                }
    
            }
    
            return true;
    
        }
    
        function getCachedGeometry( cache, newPrimitive ) {
    
            for ( var i = 0, il = cache.length; i < il; i ++ ) {
    
                var cached = cache[ i ];
    
                if ( isPrimitiveEqual( cached.primitive, newPrimitive ) ) {
    
                    return cached.geometry;
    
                }
    
            }
    
            return null;
    
        }
    
        function cloneBufferAttribute( attribute ) {
    
            if ( attribute.isInterleavedBufferAttribute ) {
    
                var count = attribute.count;
                var itemSize = attribute.itemSize;
                var array = attribute.array.slice( 0, count * itemSize );
    
                for ( var i = 0; i < count; ++ i ) {
    
                    array[ i ] = attribute.getX( i );
                    if ( itemSize >= 2 ) array[ i + 1 ] = attribute.getY( i );
                    if ( itemSize >= 3 ) array[ i + 2 ] = attribute.getZ( i );
                    if ( itemSize >= 4 ) array[ i + 3 ] = attribute.getW( i );
    
                }
    
                return new THREE.BufferAttribute( array, itemSize, attribute.normalized );
    
            }
    
            return attribute.clone();
    
        }
    
        /* GLTF PARSER */
    
        function GLTFParser( json, extensions, options ) {
    
            this.json = json || {};
            this.extensions = extensions || {};
            this.options = options || {};
    
            // loader object cache
            this.cache = new GLTFRegistry();
    
            // BufferGeometry caching
            this.primitiveCache = [];
    
            this.textureLoader = new THREE.TextureLoader( this.options.manager );
            this.textureLoader.setCrossOrigin( this.options.crossOrigin );
    
            this.fileLoader = new THREE.FileLoader( this.options.manager );
            this.fileLoader.setResponseType( 'arraybuffer' );
    
        }
    
        GLTFParser.prototype.parse = function ( onLoad, onError ) {
    
            var json = this.json;
    
            // Clear the loader cache
            this.cache.removeAll();
    
            // Mark the special nodes/meshes in json for efficient parse
            this.markDefs();
    
            // Fire the callback on complete
            this.getMultiDependencies( [
    
                'scene',
                'animation',
                'camera'
    
            ] ).then( function ( dependencies ) {
    
                var scenes = dependencies.scenes || [];
                var scene = scenes[ json.scene || 0 ];
                var animations = dependencies.animations || [];
                var asset = json.asset;
                var cameras = dependencies.cameras || [];
    
                onLoad( scene, scenes, cameras, animations, asset );
    
            } ).catch( onError );
    
        };
    
        /**
         * Marks the special nodes/meshes in json for efficient parse.
         */
        GLTFParser.prototype.markDefs = function () {
    
            var nodeDefs = this.json.nodes || [];
            var skinDefs = this.json.skins || [];
            var meshDefs = this.json.meshes || [];
    
            var meshReferences = {};
            var meshUses = {};
    
            // Nothing in the node definition indicates whether it is a Bone or an
            // Object3D. Use the skins' joint references to mark bones.
            for ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {
    
                var joints = skinDefs[ skinIndex ].joints;
    
                for ( var i = 0, il = joints.length; i < il; i ++ ) {
    
                    nodeDefs[ joints[ i ] ].isBone = true;
    
                }
    
            }
    
            // Meshes can (and should) be reused by multiple nodes in a glTF asset. To
            // avoid having more than one THREE.Mesh with the same name, count
            // references and rename instances below.
            //
            // Example: CesiumMilkTruck sample model reuses "Wheel" meshes.
            for ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {
    
                var nodeDef = nodeDefs[ nodeIndex ];
    
                if ( nodeDef.mesh !== undefined ) {
    
                    if ( meshReferences[ nodeDef.mesh ] === undefined ) {
    
                        meshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;
    
                    }
    
                    meshReferences[ nodeDef.mesh ] ++;
    
                    // Nothing in the mesh definition indicates whether it is
                    // a SkinnedMesh or Mesh. Use the node's mesh reference
                    // to mark SkinnedMesh if node has skin.
                    if ( nodeDef.skin !== undefined ) {
    
                        meshDefs[ nodeDef.mesh ].isSkinnedMesh = true;
    
                    }
    
                }
    
            }
    
            this.json.meshReferences = meshReferences;
            this.json.meshUses = meshUses;
    
        };
    
        /**
         * Requests the specified dependency asynchronously, with caching.
         * @param {string} type
         * @param {number} index
         * @return {Promise<Object>}
         */
        GLTFParser.prototype.getDependency = function ( type, index ) {
    
            var cacheKey = type + ':' + index;
            var dependency = this.cache.get( cacheKey );
    
            if ( ! dependency ) {
    
                var fnName = 'load' + type.charAt( 0 ).toUpperCase() + type.slice( 1 );
                dependency = this[ fnName ]( index );
                this.cache.add( cacheKey, dependency );
    
            }
    
            return dependency;
    
        };
    
        /**
         * Requests all dependencies of the specified type asynchronously, with caching.
         * @param {string} type
         * @return {Promise<Array<Object>>}
         */
        GLTFParser.prototype.getDependencies = function ( type ) {
    
            var dependencies = this.cache.get( type );
    
            if ( ! dependencies ) {
    
                var parser = this;
                var defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];
    
                dependencies = Promise.all( defs.map( function ( def, index ) {
    
                    return parser.getDependency( type, index );
    
                } ) );
    
                this.cache.add( type, dependencies );
    
            }
    
            return dependencies;
    
        };
    
        /**
         * Requests all multiple dependencies of the specified types asynchronously, with caching.
         * @param {Array<string>} types
         * @return {Promise<Object<Array<Object>>>}
         */
        GLTFParser.prototype.getMultiDependencies = function ( types ) {
    
            var results = {};
            var pendings = [];
    
            for ( var i = 0, il = types.length; i < il; i ++ ) {
    
                var type = types[ i ];
                var value = this.getDependencies( type );
    
                value = value.then( function ( key, value ) {
    
                    results[ key ] = value;
    
                }.bind( this, type + ( type === 'mesh' ? 'es' : 's' ) ) );
    
                pendings.push( value );
    
            }
    
            return Promise.all( pendings ).then( function () {
    
                return results;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
         * @param {number} bufferIndex
         * @return {Promise<ArrayBuffer>}
         */
        GLTFParser.prototype.loadBuffer = function ( bufferIndex ) {
    
            var bufferDef = this.json.buffers[ bufferIndex ];
            var loader = this.fileLoader;
    
            if ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {
    
                throw new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );
    
            }
    
            // If present, GLB container is required to be the first buffer.
            if ( bufferDef.uri === undefined && bufferIndex === 0 ) {
    
                return Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );
    
            }
    
            var options = this.options;
    
            return new Promise( function ( resolve, reject ) {
    
                loader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {
    
                    reject( new Error( 'THREE.GLTFLoader: Failed to load buffer "' + bufferDef.uri + '".' ) );
    
                } );
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
         * @param {number} bufferViewIndex
         * @return {Promise<ArrayBuffer>}
         */
        GLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {
    
            var bufferViewDef = this.json.bufferViews[ bufferViewIndex ];
    
            return this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {
    
                var byteLength = bufferViewDef.byteLength || 0;
                var byteOffset = bufferViewDef.byteOffset || 0;
                return buffer.slice( byteOffset, byteOffset + byteLength );
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors
         * @param {number} accessorIndex
         * @return {Promise<THREE.BufferAttribute|THREE.InterleavedBufferAttribute>}
         */
        GLTFParser.prototype.loadAccessor = function ( accessorIndex ) {
    
            var parser = this;
            var json = this.json;
    
            var accessorDef = this.json.accessors[ accessorIndex ];
    
            var pendingBufferViews = [];
    
            if ( accessorDef.bufferView !== undefined ) {
    
                pendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );
    
            } else {
    
                pendingBufferViews.push( null );
    
            }
    
            if ( accessorDef.sparse !== undefined ) {
    
                pendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );
                pendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );
    
            }
    
            return Promise.all( pendingBufferViews ).then( function ( bufferViews ) {
    
                var bufferView = bufferViews[ 0 ];
    
                var itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];
                var TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];
    
                // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.
                var elementBytes = TypedArray.BYTES_PER_ELEMENT;
                var itemBytes = elementBytes * itemSize;
                var byteOffset = accessorDef.byteOffset || 0;
                var byteStride = json.bufferViews[ accessorDef.bufferView ].byteStride;
                var normalized = accessorDef.normalized === true;
                var array, bufferAttribute;
    
                // The buffer is not interleaved if the stride is the item size in bytes.
                if ( byteStride && byteStride !== itemBytes ) {
    
                    var ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType;
                    var ib = parser.cache.get( ibCacheKey );
    
                    if ( ! ib ) {
    
                        // Use the full buffer if it's interleaved.
                        array = new TypedArray( bufferView );
    
                        // Integer parameters to IB/IBA are in array elements, not bytes.
                        ib = new THREE.InterleavedBuffer( array, byteStride / elementBytes );
    
                        parser.cache.add( ibCacheKey, ib );
    
                    }
    
                    bufferAttribute = new THREE.InterleavedBufferAttribute( ib, itemSize, byteOffset / elementBytes, normalized );
    
                } else {
    
                    if ( bufferView === null ) {
    
                        array = new TypedArray( accessorDef.count * itemSize );
    
                    } else {
    
                        array = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );
    
                    }
    
                    bufferAttribute = new THREE.BufferAttribute( array, itemSize, normalized );
    
                }
    
                // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors
                if ( accessorDef.sparse !== undefined ) {
    
                    var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;
                    var TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];
    
                    var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;
                    var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;
    
                    var sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );
                    var sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );
    
                    if ( bufferView !== null ) {
    
                        // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.
                        bufferAttribute.setArray( bufferAttribute.array.slice() );
    
                    }
    
                    for ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {
    
                        var index = sparseIndices[ i ];
    
                        bufferAttribute.setX( index, sparseValues[ i * itemSize ] );
                        if ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );
                        if ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );
                        if ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );
                        if ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );
    
                    }
    
                }
    
                return bufferAttribute;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures
         * @param {number} textureIndex
         * @return {Promise<THREE.Texture>}
         */
        GLTFParser.prototype.loadTexture = function ( textureIndex ) {
    
            var parser = this;
            var json = this.json;
            var options = this.options;
            var textureLoader = this.textureLoader;
    
            var URL = window.URL || window.webkitURL;
    
            var textureDef = json.textures[ textureIndex ];
            var source = json.images[ textureDef.source ];
            var sourceURI = source.uri;
            var isObjectURL = false;
    
            if ( source.bufferView !== undefined ) {
    
                // Load binary image data from bufferView, if provided.
    
                sourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {
    
                    isObjectURL = true;
                    var blob = new Blob( [ bufferView ], { type: source.mimeType } );
                    sourceURI = URL.createObjectURL( blob );
                    return sourceURI;
    
                } );
    
            }
    
            return Promise.resolve( sourceURI ).then( function ( sourceURI ) {
    
                // Load Texture resource.
    
                var loader = THREE.Loader.Handlers.get( sourceURI ) || textureLoader;
    
                return new Promise( function ( resolve, reject ) {
    
                    loader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );
    
                } );
    
            } ).then( function ( texture ) {
    
                // Clean up resources and configure Texture.
    
                if ( isObjectURL === true ) {
    
                    URL.revokeObjectURL( sourceURI );
    
                }
    
                texture.flipY = false;
    
                if ( textureDef.name !== undefined ) texture.name = textureDef.name;
    
                texture.format = textureDef.format !== undefined ? WEBGL_TEXTURE_FORMATS[ textureDef.format ] : THREE.RGBAFormat;
    
                if ( textureDef.internalFormat !== undefined && texture.format !== WEBGL_TEXTURE_FORMATS[ textureDef.internalFormat ] ) {
    
                    console.warn( 'THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. ' +
                                                'internalFormat will be forced to be the same value as format.' );
    
                }
    
                texture.type = textureDef.type !== undefined ? WEBGL_TEXTURE_DATATYPES[ textureDef.type ] : THREE.UnsignedByteType;
    
                var samplers = json.samplers || {};
                var sampler = samplers[ textureDef.sampler ] || {};
    
                texture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || THREE.LinearFilter;
                texture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || THREE.LinearMipMapLinearFilter;
                texture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || THREE.RepeatWrapping;
                texture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || THREE.RepeatWrapping;
    
                return texture;
    
            } );
    
        };
    
        /**
         * Asynchronously assigns a texture to the given material parameters.
         * @param {Object} materialParams
         * @param {string} textureName
         * @param {number} textureIndex
         * @return {Promise}
         */
        GLTFParser.prototype.assignTexture = function ( materialParams, textureName, textureIndex ) {
    
            return this.getDependency( 'texture', textureIndex ).then( function ( texture ) {
    
                materialParams[ textureName ] = texture;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials
         * @param {number} materialIndex
         * @return {Promise<THREE.Material>}
         */
        GLTFParser.prototype.loadMaterial = function ( materialIndex ) {
    
            var parser = this;
            var json = this.json;
            var extensions = this.extensions;
            var materialDef = this.json.materials[ materialIndex ];
    
            var materialType;
            var materialParams = {};
            var materialExtensions = materialDef.extensions || {};
    
            var pending = [];
    
            if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {
    
                var sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];
                materialType = sgExtension.getMaterialType( materialDef );
                pending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );
    
            } else if ( materialDef.pbrMetallicRoughness !== undefined ) {
    
                // Specification:
                // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material
    
                materialType = THREE.MeshStandardMaterial;
    
                var metallicRoughness = materialDef.pbrMetallicRoughness;
    
                materialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );
                materialParams.opacity = 1.0;
    
                if ( Array.isArray( metallicRoughness.baseColorFactor ) ) {
    
                    var array = metallicRoughness.baseColorFactor;
    
                    materialParams.color.fromArray( array );
                    materialParams.opacity = array[ 3 ];
    
                }
    
                if ( metallicRoughness.baseColorTexture !== undefined ) {
    
                    pending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );
    
                }
    
                materialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;
                materialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;
    
                if ( metallicRoughness.metallicRoughnessTexture !== undefined ) {
    
                    var textureIndex = metallicRoughness.metallicRoughnessTexture.index;
                    pending.push( parser.assignTexture( materialParams, 'metalnessMap', textureIndex ) );
                    pending.push( parser.assignTexture( materialParams, 'roughnessMap', textureIndex ) );
    
                }
    
            } else {
    
                materialType = THREE.MeshPhongMaterial;
    
            }
    
            if ( materialDef.doubleSided === true ) {
    
                materialParams.side = THREE.DoubleSide;
    
            }
    
            var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;
    
            if ( alphaMode === ALPHA_MODES.BLEND ) {
    
                materialParams.transparent = true;
    
            } else {
    
                materialParams.transparent = false;
    
                if ( alphaMode === ALPHA_MODES.MASK ) {
    
                    materialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;
    
                }
    
            }
    
            if ( materialDef.normalTexture !== undefined ) {
    
                pending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture.index ) );
    
                materialParams.normalScale = new THREE.Vector2( 1, 1 );
    
                if ( materialDef.normalTexture.scale !== undefined ) {
    
                    materialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );
    
                }
    
            }
    
            if ( materialDef.occlusionTexture !== undefined ) {
    
                pending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture.index ) );
    
                if ( materialDef.occlusionTexture.strength !== undefined ) {
    
                    materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;
    
                }
    
            }
    
            if ( materialDef.emissiveFactor !== undefined ) {
    
                if ( materialType === THREE.MeshBasicMaterial ) {
    
                    materialParams.color = new THREE.Color().fromArray( materialDef.emissiveFactor );
    
                } else {
    
                    materialParams.emissive = new THREE.Color().fromArray( materialDef.emissiveFactor );
    
                }
    
            }
    
            if ( materialDef.emissiveTexture !== undefined ) {
    
                if ( materialType === THREE.MeshBasicMaterial ) {
    
                    pending.push( parser.assignTexture( materialParams, 'map', materialDef.emissiveTexture.index ) );
    
                } else {
    
                    pending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture.index ) );
    
                }
    
            }
    
            return Promise.all( pending ).then( function () {
    
                var material;
    
                if ( materialType === THREE.ShaderMaterial ) {
    
                    material = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );
    
                } else {
    
                    material = new materialType( materialParams );
    
                }
    
                if ( materialDef.name !== undefined ) material.name = materialDef.name;
    
                // Normal map textures use OpenGL conventions:
                // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#materialnormaltexture
                if ( material.normalScale ) {
    
                    material.normalScale.x = - material.normalScale.x;
    
                }
    
                // emissiveTexture and baseColorTexture use sRGB encoding.
                if ( material.map ) material.map.encoding = THREE.sRGBEncoding;
                if ( material.emissiveMap ) material.emissiveMap.encoding = THREE.sRGBEncoding;
    
                if ( materialDef.extras ) material.userData = materialDef.extras;
    
                return material;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry
         * @param {Array<Object>} primitives
         * @return {Promise<Array<THREE.BufferGeometry>>}
         */
        GLTFParser.prototype.loadGeometries = function ( primitives ) {
    
            var cache = this.primitiveCache;
    
            return this.getDependencies( 'accessor' ).then( function ( accessors ) {
    
                var geometries = [];
    
                for ( var i = 0, il = primitives.length; i < il; i ++ ) {
    
                    var primitive = primitives[ i ];
    
                    // See if we've already created this geometry
                    var cached = getCachedGeometry( cache, primitive );
    
                    if ( cached ) {
    
                        // Use the cached geometry if it exists
                        geometries.push( cached );
    
                    } else {
    
                        // Otherwise create a new geometry
                        var geometry = new THREE.BufferGeometry();
    
                        var attributes = primitive.attributes;
    
                        for ( var attributeId in attributes ) {
    
                            var attributeEntry = attributes[ attributeId ];
    
                            var bufferAttribute = accessors[ attributeEntry ];
    
                            switch ( attributeId ) {
    
                                case 'POSITION':
    
                                    geometry.addAttribute( 'position', bufferAttribute );
                                    break;
    
                                case 'NORMAL':
    
                                    geometry.addAttribute( 'normal', bufferAttribute );
                                    break;
    
                                case 'TEXCOORD_0':
                                case 'TEXCOORD0':
                                case 'TEXCOORD':
    
                                    geometry.addAttribute( 'uv', bufferAttribute );
                                    break;
    
                                case 'TEXCOORD_1':
    
                                    geometry.addAttribute( 'uv2', bufferAttribute );
                                    break;
    
                                case 'COLOR_0':
                                case 'COLOR0':
                                case 'COLOR':
    
                                    geometry.addAttribute( 'color', bufferAttribute );
                                    break;
    
                                case 'WEIGHTS_0':
                                case 'WEIGHT': // WEIGHT semantic deprecated.
    
                                    geometry.addAttribute( 'skinWeight', bufferAttribute );
                                    break;
    
                                case 'JOINTS_0':
                                case 'JOINT': // JOINT semantic deprecated.
    
                                    geometry.addAttribute( 'skinIndex', bufferAttribute );
                                    break;
    
                            }
    
                        }
    
                        if ( primitive.indices !== undefined ) {
    
                            geometry.setIndex( accessors[ primitive.indices ] );
    
                        }
    
                        // Cache this geometry
                        cache.push( {
    
                            primitive: primitive,
                            geometry: geometry
    
                        } );
    
                        geometries.push( geometry );
    
                    }
    
                }
    
                return geometries;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes
         * @param {number} meshIndex
         * @return {Promise<THREE.Group|THREE.Mesh|THREE.SkinnedMesh>}
         */
        GLTFParser.prototype.loadMesh = function ( meshIndex ) {
    
            var scope = this;
            var json = this.json;
            var extensions = this.extensions;
    
            var meshDef = this.json.meshes[ meshIndex ];
    
            return this.getMultiDependencies( [
    
                'accessor',
                'material'
    
            ] ).then( function ( dependencies ) {
    
                var group = new THREE.Group();
    
                var primitives = meshDef.primitives;
    
                return scope.loadGeometries( primitives ).then( function ( geometries ) {
    
                    for ( var i = 0, il = primitives.length; i < il; i ++ ) {
    
                        var primitive = primitives[ i ];
                        var geometry = geometries[ i ];
    
                        var material = primitive.material === undefined
                            ? createDefaultMaterial()
                            : dependencies.materials[ primitive.material ];
    
                        if ( material.aoMap
                                && geometry.attributes.uv2 === undefined
                                && geometry.attributes.uv !== undefined ) {
    
                            console.log( 'THREE.GLTFLoader: Duplicating UVs to support aoMap.' );
                            geometry.addAttribute( 'uv2', new THREE.BufferAttribute( geometry.attributes.uv.array, 2 ) );
    
                        }
    
                        // If the material will be modified later on, clone it now.
                        var useVertexColors = geometry.attributes.color !== undefined;
                        var useFlatShading = geometry.attributes.normal === undefined;
                        var useSkinning = meshDef.isSkinnedMesh === true;
                        var useMorphTargets = primitive.targets !== undefined;
    
                        if ( useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {
    
                            if ( material.isGLTFSpecularGlossinessMaterial ) {
    
                                var specGlossExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];
                                material = specGlossExtension.cloneMaterial( material );
    
                            } else {
    
                                material = material.clone();
    
                            }
    
                        }
    
                        if ( useVertexColors ) {
    
                            material.vertexColors = THREE.VertexColors;
                            material.needsUpdate = true;
    
                        }
    
                        if ( useFlatShading ) {
    
                            material.flatShading = true;
    
                        }
    
                        var mesh;
    
                        if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||
                            primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||
                            primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||
                            primitive.mode === undefined ) {
    
                            if ( useSkinning ) {
    
                                mesh = new THREE.SkinnedMesh( geometry, material );
                                material.skinning = true;
    
                            } else {
    
                                mesh = new THREE.Mesh( geometry, material );
    
                            }
    
                            if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {
    
                                mesh.drawMode = THREE.TriangleStripDrawMode;
    
                            } else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {
    
                                mesh.drawMode = THREE.TriangleFanDrawMode;
    
                            }
    
                        } else if ( primitive.mode === WEBGL_CONSTANTS.LINES ||
                            primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ||
                            primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {
    
                            var cacheKey = 'LineBasicMaterial:' + material.uuid;
    
                            var lineMaterial = scope.cache.get( cacheKey );
    
                            if ( ! lineMaterial ) {
    
                                lineMaterial = new THREE.LineBasicMaterial();
                                THREE.Material.prototype.copy.call( lineMaterial, material );
                                lineMaterial.color.copy( material.color );
                                lineMaterial.lights = false;  // LineBasicMaterial doesn't support lights yet
    
                                scope.cache.add( cacheKey, lineMaterial );
    
                            }
    
                            material = lineMaterial;
    
                            if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {
    
                                mesh = new THREE.LineSegments( geometry, material );
    
                            } else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {
    
                                mesh = new THREE.Line( geometry, material );
    
                            } else {
    
                                mesh = new THREE.LineLoop( geometry, material );
    
                            }
    
                        } else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {
    
                            var cacheKey = 'PointsMaterial:' + material.uuid;
    
                            var pointsMaterial = scope.cache.get( cacheKey );
    
                            if ( ! pointsMaterial ) {
    
                                pointsMaterial = new THREE.PointsMaterial();
                                THREE.Material.prototype.copy.call( pointsMaterial, material );
                                pointsMaterial.color.copy( material.color );
                                pointsMaterial.map = material.map;
                                pointsMaterial.lights = false;  // PointsMaterial doesn't support lights yet
    
                                scope.cache.add( cacheKey, pointsMaterial );
    
                            }
    
                            material = pointsMaterial;
    
                            mesh = new THREE.Points( geometry, material );
    
                        } else {
    
                            throw new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );
    
                        }
    
                        mesh.name = meshDef.name || ( 'mesh_' + meshIndex );
    
                        if ( useMorphTargets ) {
    
                            addMorphTargets( mesh, meshDef, primitive, dependencies.accessors );
    
                        }
    
                        if ( meshDef.extras !== undefined ) mesh.userData = meshDef.extras;
                        if ( primitive.extras !== undefined ) mesh.geometry.userData = primitive.extras;
    
                        // for Specular-Glossiness.
                        if ( material.isGLTFSpecularGlossinessMaterial === true ) {
    
                            mesh.onBeforeRender = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].refreshUniforms;
    
                        }
    
                        if ( primitives.length > 1 ) {
    
                            mesh.name += '_' + i;
    
                            group.add( mesh );
    
                        } else {
    
                            return mesh;
    
                        }
    
                    }
    
                    return group;
    
                } );
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras
         * @param {number} cameraIndex
         * @return {Promise<THREE.Camera>}
         */
        GLTFParser.prototype.loadCamera = function ( cameraIndex ) {
    
            var camera;
            var cameraDef = this.json.cameras[ cameraIndex ];
            var params = cameraDef[ cameraDef.type ];
    
            if ( ! params ) {
    
                console.warn( 'THREE.GLTFLoader: Missing camera parameters.' );
                return;
    
            }
    
            if ( cameraDef.type === 'perspective' ) {
    
                var aspectRatio = params.aspectRatio || 1;
                var xfov = params.yfov * aspectRatio;
    
                camera = new THREE.PerspectiveCamera( THREE.Math.radToDeg( xfov ), aspectRatio, params.znear || 1, params.zfar || 2e6 );
    
            } else if ( cameraDef.type === 'orthographic' ) {
    
                camera = new THREE.OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );
    
            }
    
            if ( cameraDef.name !== undefined ) camera.name = cameraDef.name;
            if ( cameraDef.extras ) camera.userData = cameraDef.extras;
    
            return Promise.resolve( camera );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins
         * @param {number} skinIndex
         * @return {Promise<Object>}
         */
        GLTFParser.prototype.loadSkin = function ( skinIndex ) {
    
            var skinDef = this.json.skins[ skinIndex ];
    
            var skinEntry = { joints: skinDef.joints };
    
            if ( skinDef.inverseBindMatrices === undefined ) {
    
                return Promise.resolve( skinEntry );
    
            }
    
            return this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {
    
                skinEntry.inverseBindMatrices = accessor;
    
                return skinEntry;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations
         * @param {number} animationIndex
         * @return {Promise<THREE.AnimationClip>}
         */
        GLTFParser.prototype.loadAnimation = function ( animationIndex ) {
    
            var json = this.json;
    
            var animationDef = this.json.animations[ animationIndex ];
    
            return this.getMultiDependencies( [
    
                'accessor',
                'node'
    
            ] ).then( function ( dependencies ) {
    
                var tracks = [];
    
                for ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {
    
                    var channel = animationDef.channels[ i ];
                    var sampler = animationDef.samplers[ channel.sampler ];
    
                    if ( sampler ) {
    
                        var target = channel.target;
                        var name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.
                        var input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;
                        var output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;
    
                        var inputAccessor = dependencies.accessors[ input ];
                        var outputAccessor = dependencies.accessors[ output ];
    
                        var node = dependencies.nodes[ name ];
    
                        if ( node ) {
    
                            node.updateMatrix();
                            node.matrixAutoUpdate = true;
    
                            var TypedKeyframeTrack;
    
                            switch ( PATH_PROPERTIES[ target.path ] ) {
    
                                case PATH_PROPERTIES.weights:
    
                                    TypedKeyframeTrack = THREE.NumberKeyframeTrack;
                                    break;
    
                                case PATH_PROPERTIES.rotation:
    
                                    TypedKeyframeTrack = THREE.QuaternionKeyframeTrack;
                                    break;
    
                                case PATH_PROPERTIES.position:
                                case PATH_PROPERTIES.scale:
                                default:
    
                                    TypedKeyframeTrack = THREE.VectorKeyframeTrack;
                                    break;
    
                            }
    
                            var targetName = node.name ? node.name : node.uuid;
    
                            var interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : THREE.InterpolateLinear;
    
                            var targetNames = [];
    
                            if ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {
    
                                // node should be THREE.Group here but
                                // PATH_PROPERTIES.weights(morphTargetInfluences) should be
                                // the property of a mesh object under node.
                                // So finding targets here.
    
                                node.traverse( function ( object ) {
    
                                    if ( object.isMesh === true && object.material.morphTargets === true ) {
    
                                        targetNames.push( object.name ? object.name : object.uuid );
    
                                    }
    
                                } );
    
                            } else {
    
                                targetNames.push( targetName );
    
                            }
    
                            // KeyframeTrack.optimize() will modify given 'times' and 'values'
                            // buffers before creating a truncated copy to keep. Because buffers may
                            // be reused by other tracks, make copies here.
                            for ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {
    
                                var track = new TypedKeyframeTrack(
                                    targetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],
                                    THREE.AnimationUtils.arraySlice( inputAccessor.array, 0 ),
                                    THREE.AnimationUtils.arraySlice( outputAccessor.array, 0 ),
                                    interpolation
                                );
    
                                // Here is the trick to enable custom interpolation.
                                // Overrides .createInterpolant in a factory method which creates custom interpolation.
                                if ( sampler.interpolation === 'CUBICSPLINE' ) {
    
                                    track.createInterpolant = function ( result ) {
    
                                        // A CUBICSPLINE keyframe in glTF has three output values for each input value,
                                        // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()
                                        // must be divided by three to get the interpolant's sampleSize argument.
    
                                        return new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );
    
                                    };
    
                                }
    
                                tracks.push( track );
    
                            }
    
                        }
    
                    }
    
                }
    
                var name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;
    
                return new THREE.AnimationClip( name, undefined, tracks );
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy
         * @param {number} nodeIndex
         * @return {Promise<THREE.Object3D>}
         */
        GLTFParser.prototype.loadNode = function ( nodeIndex ) {
    
            var json = this.json;
            var extensions = this.extensions;
    
            var meshReferences = this.json.meshReferences;
            var meshUses = this.json.meshUses;
    
            var nodeDef = this.json.nodes[ nodeIndex ];
    
            return this.getMultiDependencies( [
    
                'mesh',
                'skin',
                'camera'
    
            ] ).then( function ( dependencies ) {
    
                var node;
    
                if ( nodeDef.isBone === true ) {
    
                    node = new THREE.Bone();
    
                } else if ( nodeDef.mesh !== undefined ) {
    
                    var mesh = dependencies.meshes[ nodeDef.mesh ];
    
                    node = mesh.clone();
    
                    // for Specular-Glossiness
                    if ( mesh.isGroup === true ) {
    
                        for ( var i = 0, il = mesh.children.length; i < il; i ++ ) {
    
                            var child = mesh.children[ i ];
    
                            if ( child.material && child.material.isGLTFSpecularGlossinessMaterial === true ) {
    
                                node.children[ i ].onBeforeRender = child.onBeforeRender;
    
                            }
    
                        }
    
                    } else {
    
                        if ( mesh.material && mesh.material.isGLTFSpecularGlossinessMaterial === true ) {
    
                            node.onBeforeRender = mesh.onBeforeRender;
    
                        }
    
                    }
    
                    if ( meshReferences[ nodeDef.mesh ] > 1 ) {
    
                        node.name += '_instance_' + meshUses[ nodeDef.mesh ] ++;
    
                    }
    
                } else if ( nodeDef.camera !== undefined ) {
    
                    node = dependencies.cameras[ nodeDef.camera ];
    
                } else if ( nodeDef.extensions
                         && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ]
                         && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {
    
                    var lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;
                    node = lights[ nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ];
    
                } else {
    
                    node = new THREE.Object3D();
    
                }
    
                if ( nodeDef.name !== undefined ) {
    
                    node.name = THREE.PropertyBinding.sanitizeNodeName( nodeDef.name );
    
                }
    
                if ( nodeDef.extras ) node.userData = nodeDef.extras;
    
                if ( nodeDef.matrix !== undefined ) {
    
                    var matrix = new THREE.Matrix4();
                    matrix.fromArray( nodeDef.matrix );
                    node.applyMatrix( matrix );
    
                } else {
    
                    if ( nodeDef.translation !== undefined ) {
    
                        node.position.fromArray( nodeDef.translation );
    
                    }
    
                    if ( nodeDef.rotation !== undefined ) {
    
                        node.quaternion.fromArray( nodeDef.rotation );
    
                    }
    
                    if ( nodeDef.scale !== undefined ) {
    
                        node.scale.fromArray( nodeDef.scale );
    
                    }
    
                }
    
                return node;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes
         * @param {number} sceneIndex
         * @return {Promise<THREE.Scene>}
         */
        GLTFParser.prototype.loadScene = function () {
    
            // scene node hierachy builder
    
            function buildNodeHierachy( nodeId, parentObject, json, allNodes, skins ) {
    
                var node = allNodes[ nodeId ];
                var nodeDef = json.nodes[ nodeId ];
    
                // build skeleton here as well
    
                if ( nodeDef.skin !== undefined ) {
    
                    var meshes = node.isGroup === true ? node.children : [ node ];
    
                    for ( var i = 0, il = meshes.length; i < il; i ++ ) {
    
                        var mesh = meshes[ i ];
                        var skinEntry = skins[ nodeDef.skin ];
    
                        var bones = [];
                        var boneInverses = [];
    
                        for ( var j = 0, jl = skinEntry.joints.length; j < jl; j ++ ) {
    
                            var jointId = skinEntry.joints[ j ];
                            var jointNode = allNodes[ jointId ];
    
                            if ( jointNode ) {
    
                                bones.push( jointNode );
    
                                var mat = new THREE.Matrix4();
    
                                if ( skinEntry.inverseBindMatrices !== undefined ) {
    
                                    mat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );
    
                                }
    
                                boneInverses.push( mat );
    
                            } else {
    
                                console.warn( 'THREE.GLTFLoader: Joint "%s" could not be found.', jointId );
    
                            }
    
                        }
    
                        mesh.bind( new THREE.Skeleton( bones, boneInverses ), mesh.matrixWorld );
    
                    }
    
                }
    
                // build node hierachy
    
                parentObject.add( node );
    
                if ( nodeDef.children ) {
    
                    var children = nodeDef.children;
    
                    for ( var i = 0, il = children.length; i < il; i ++ ) {
    
                        var child = children[ i ];
                        buildNodeHierachy( child, node, json, allNodes, skins );
    
                    }
    
                }
    
            }
    
            return function loadScene( sceneIndex ) {
    
                var json = this.json;
                var extensions = this.extensions;
                var sceneDef = this.json.scenes[ sceneIndex ];
    
                return this.getMultiDependencies( [
    
                    'node',
                    'skin'
    
                ] ).then( function ( dependencies ) {
    
                    var scene = new THREE.Scene();
                    if ( sceneDef.name !== undefined ) scene.name = sceneDef.name;
    
                    if ( sceneDef.extras ) scene.userData = sceneDef.extras;
    
                    var nodeIds = sceneDef.nodes || [];
    
                    for ( var i = 0, il = nodeIds.length; i < il; i ++ ) {
    
                        buildNodeHierachy( nodeIds[ i ], scene, json, dependencies.nodes, dependencies.skins );
    
                    }
    
                    // Ambient lighting, if present, is always attached to the scene root.
                    if ( sceneDef.extensions
                             && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ]
                             && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {
    
                        var lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;
                        scene.add( lights[ sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ] );
    
                    }
    
                    return scene;
    
                } );
    
            };
    
        }();
    
        return GLTFLoader;
    
    } )();
},{}],"framer-form/form/lib/GPUParticleSystem":[function(require,module,exports){
/*
 * GPU Particle System
 * @author flimshaw - Charlie Hoey - http://charliehoey.com
 *
 * A simple to use, general purpose GPU system. Particles are spawn-and-forget with
 * several options available, and do not require monitoring or cleanup after spawning.
 * Because the paths of all particles are completely deterministic once spawned, the scale
 * and direction of time is also variable.
 *
 * Currently uses a static wrapping perlin noise texture for turbulence, and a small png texture for
 * particles, but adding support for a particle texture atlas or changing to a different type of turbulence
 * would be a fairly light day's work.
 *
 * Shader and javascript packing code derrived from several Stack Overflow examples.
 *
 */

THREE.GPUParticleSystem = function ( options ) {

	THREE.Object3D.apply( this, arguments );

	options = options || {};

	// parse options and use defaults

	this.PARTICLE_COUNT = options.maxParticles || 1000000;
	this.PARTICLE_CONTAINERS = options.containerCount || 1;

	this.PARTICLE_NOISE_TEXTURE = options.particleNoiseTex || null;
	this.PARTICLE_SPRITE_TEXTURE = options.particleSpriteTex || null;

	this.PARTICLES_PER_CONTAINER = Math.ceil( this.PARTICLE_COUNT / this.PARTICLE_CONTAINERS );
	this.PARTICLE_CURSOR = 0;
	this.time = 0;
	this.particleContainers = [];
	this.rand = [];

	// custom vertex and fragement shader

	var GPUParticleShader = {

		vertexShader: [

			'uniform float uTime;',
			'uniform float uScale;',
			'uniform sampler2D tNoise;',

			'attribute vec3 positionStart;',
			'attribute float startTime;',
			'attribute vec3 velocity;',
			'attribute float turbulence;',
			'attribute vec3 color;',
			'attribute float size;',
			'attribute float lifeTime;',

			'varying vec4 vColor;',
			'varying float lifeLeft;',

			'void main() {',

			// unpack things from our attributes'

			'	vColor = vec4( color, 1.0 );',

			// convert our velocity back into a value we can use'

			'	vec3 newPosition;',
			'	vec3 v;',

			'	float timeElapsed = uTime - startTime;',

			'	lifeLeft = 1.0 - ( timeElapsed / lifeTime );',

			'	gl_PointSize = ( uScale * size ) * lifeLeft;',

			'	v.x = ( velocity.x - 0.5 ) * 3.0;',
			'	v.y = ( velocity.y - 0.5 ) * 3.0;',
			'	v.z = ( velocity.z - 0.5 ) * 3.0;',

			'	newPosition = positionStart + ( v * 10.0 ) * timeElapsed;',

			'	vec3 noise = texture2D( tNoise, vec2( newPosition.x * 0.015 + ( uTime * 0.05 ), newPosition.y * 0.02 + ( uTime * 0.015 ) ) ).rgb;',
			'	vec3 noiseVel = ( noise.rgb - 0.5 ) * 30.0;',

			'	newPosition = mix( newPosition, newPosition + vec3( noiseVel * ( turbulence * 5.0 ) ), ( timeElapsed / lifeTime ) );',

			'	if( v.y > 0. && v.y < .05 ) {',

			'		lifeLeft = 0.0;',

			'	}',

			'	if( v.x < - 1.45 ) {',

			'		lifeLeft = 0.0;',

			'	}',

			'	if( timeElapsed > 0.0 ) {',

			'		gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );',

			'	} else {',

			'		gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
			'		lifeLeft = 0.0;',
			'		gl_PointSize = 0.;',

			'	}',

			'}'

		].join( '\n' ),

		fragmentShader: [

			'float scaleLinear( float value, vec2 valueDomain ) {',

			'	return ( value - valueDomain.x ) / ( valueDomain.y - valueDomain.x );',

			'}',

			'float scaleLinear( float value, vec2 valueDomain, vec2 valueRange ) {',

			'	return mix( valueRange.x, valueRange.y, scaleLinear( value, valueDomain ) );',

			'}',

			'varying vec4 vColor;',
			'varying float lifeLeft;',

			'uniform sampler2D tSprite;',

			'void main() {',

			'	float alpha = 0.;',

			'	if( lifeLeft > 0.995 ) {',

			'		alpha = scaleLinear( lifeLeft, vec2( 1.0, 0.995 ), vec2( 0.0, 1.0 ) );',

			'	} else {',

			'		alpha = lifeLeft * 0.75;',

			'	}',

			'	vec4 tex = texture2D( tSprite, gl_PointCoord );',
			'	gl_FragColor = vec4( vColor.rgb * tex.a, alpha * tex.a );',

			'}'

		].join( '\n' )

	};

	// preload a million random numbers

	var i;

	for ( i = 1e5; i > 0; i -- ) {

		this.rand.push( Math.random() - 0.5 );

	}

	this.random = function () {

		return ++ i >= this.rand.length ? this.rand[ i = 1 ] : this.rand[ i ];

	};

	var textureLoader = new THREE.TextureLoader();

	this.particleNoiseTex = this.PARTICLE_NOISE_TEXTURE || textureLoader.load( 'textures/perlin-512.png' );
	this.particleNoiseTex.wrapS = this.particleNoiseTex.wrapT = THREE.RepeatWrapping;

	this.particleSpriteTex = this.PARTICLE_SPRITE_TEXTURE || textureLoader.load( 'textures/particle2.png' );
	this.particleSpriteTex.wrapS = this.particleSpriteTex.wrapT = THREE.RepeatWrapping;

	this.particleShaderMat = new THREE.ShaderMaterial( {
		transparent: true,
		depthWrite: false,
		uniforms: {
			'uTime': {
				value: 0.0
			},
			'uScale': {
				value: 1.0
			},
			'tNoise': {
				value: this.particleNoiseTex
			},
			'tSprite': {
				value: this.particleSpriteTex
			}
		},
		blending: THREE.AdditiveBlending,
		vertexShader: GPUParticleShader.vertexShader,
		fragmentShader: GPUParticleShader.fragmentShader
	} );

	// define defaults for all values

	this.particleShaderMat.defaultAttributeValues.particlePositionsStartTime = [ 0, 0, 0, 0 ];
	this.particleShaderMat.defaultAttributeValues.particleVelColSizeLife = [ 0, 0, 0, 0 ];

	this.init = function () {

		for ( var i = 0; i < this.PARTICLE_CONTAINERS; i ++ ) {

			var c = new THREE.GPUParticleContainer( this.PARTICLES_PER_CONTAINER, this );
			this.particleContainers.push( c );
			this.add( c );

		}

	};

	this.spawnParticle = function ( options ) {

		this.PARTICLE_CURSOR ++;

		if ( this.PARTICLE_CURSOR >= this.PARTICLE_COUNT ) {

			this.PARTICLE_CURSOR = 1;

		}

		var currentContainer = this.particleContainers[ Math.floor( this.PARTICLE_CURSOR / this.PARTICLES_PER_CONTAINER ) ];

		currentContainer.spawnParticle( options );

	};

	this.update = function ( time ) {

		for ( var i = 0; i < this.PARTICLE_CONTAINERS; i ++ ) {

			this.particleContainers[ i ].update( time );

		}

	};

	this.dispose = function () {

		this.particleShaderMat.dispose();
		this.particleNoiseTex.dispose();
		this.particleSpriteTex.dispose();

		for ( var i = 0; i < this.PARTICLE_CONTAINERS; i ++ ) {

			this.particleContainers[ i ].dispose();

		}

	};

	this.init();

};

THREE.GPUParticleSystem.prototype = Object.create( THREE.Object3D.prototype );
THREE.GPUParticleSystem.prototype.constructor = THREE.GPUParticleSystem;


// Subclass for particle containers, allows for very large arrays to be spread out

THREE.GPUParticleContainer = function ( maxParticles, particleSystem ) {

	THREE.Object3D.apply( this, arguments );

	this.PARTICLE_COUNT = maxParticles || 100000;
	this.PARTICLE_CURSOR = 0;
	this.time = 0;
	this.offset = 0;
	this.count = 0;
	this.DPR = window.devicePixelRatio;
	this.GPUParticleSystem = particleSystem;
	this.particleUpdate = false;

	// geometry

	this.particleShaderGeo = new THREE.BufferGeometry();

	this.particleShaderGeo.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( this.PARTICLE_COUNT * 3 ), 3 ).setDynamic( true ) );
	this.particleShaderGeo.addAttribute( 'positionStart', new THREE.BufferAttribute( new Float32Array( this.PARTICLE_COUNT * 3 ), 3 ).setDynamic( true ) );
	this.particleShaderGeo.addAttribute( 'startTime', new THREE.BufferAttribute( new Float32Array( this.PARTICLE_COUNT ), 1 ).setDynamic( true ) );
	this.particleShaderGeo.addAttribute( 'velocity', new THREE.BufferAttribute( new Float32Array( this.PARTICLE_COUNT * 3 ), 3 ).setDynamic( true ) );
	this.particleShaderGeo.addAttribute( 'turbulence', new THREE.BufferAttribute( new Float32Array( this.PARTICLE_COUNT ), 1 ).setDynamic( true ) );
	this.particleShaderGeo.addAttribute( 'color', new THREE.BufferAttribute( new Float32Array( this.PARTICLE_COUNT * 3 ), 3 ).setDynamic( true ) );
	this.particleShaderGeo.addAttribute( 'size', new THREE.BufferAttribute( new Float32Array( this.PARTICLE_COUNT ), 1 ).setDynamic( true ) );
	this.particleShaderGeo.addAttribute( 'lifeTime', new THREE.BufferAttribute( new Float32Array( this.PARTICLE_COUNT ), 1 ).setDynamic( true ) );

	// material

	this.particleShaderMat = this.GPUParticleSystem.particleShaderMat;

	var position = new THREE.Vector3();
	var velocity = new THREE.Vector3();
	var color = new THREE.Color();

	this.spawnParticle = function ( options ) {

		var positionStartAttribute = this.particleShaderGeo.getAttribute( 'positionStart' );
		var startTimeAttribute = this.particleShaderGeo.getAttribute( 'startTime' );
		var velocityAttribute = this.particleShaderGeo.getAttribute( 'velocity' );
		var turbulenceAttribute = this.particleShaderGeo.getAttribute( 'turbulence' );
		var colorAttribute = this.particleShaderGeo.getAttribute( 'color' );
		var sizeAttribute = this.particleShaderGeo.getAttribute( 'size' );
		var lifeTimeAttribute = this.particleShaderGeo.getAttribute( 'lifeTime' );

		options = options || {};

		// setup reasonable default values for all arguments

		position = options.position !== undefined ? position.copy( options.position ) : position.set( 0, 0, 0 );
		velocity = options.velocity !== undefined ? velocity.copy( options.velocity ) : velocity.set( 0, 0, 0 );
		color = options.color !== undefined ? color.set( options.color ) : color.set( 0xffffff );

		var positionRandomness = options.positionRandomness !== undefined ? options.positionRandomness : 0;
		var velocityRandomness = options.velocityRandomness !== undefined ? options.velocityRandomness : 0;
		var colorRandomness = options.colorRandomness !== undefined ? options.colorRandomness : 1;
		var turbulence = options.turbulence !== undefined ? options.turbulence : 1;
		var lifetime = options.lifetime !== undefined ? options.lifetime : 5;
		var size = options.size !== undefined ? options.size : 10;
		var sizeRandomness = options.sizeRandomness !== undefined ? options.sizeRandomness : 0;
		var smoothPosition = options.smoothPosition !== undefined ? options.smoothPosition : false;

		if ( this.DPR !== undefined ) size *= this.DPR;

		var i = this.PARTICLE_CURSOR;

		// position

		positionStartAttribute.array[ i * 3 + 0 ] = position.x + ( particleSystem.random() * positionRandomness );
		positionStartAttribute.array[ i * 3 + 1 ] = position.y + ( particleSystem.random() * positionRandomness );
		positionStartAttribute.array[ i * 3 + 2 ] = position.z + ( particleSystem.random() * positionRandomness );

		if ( smoothPosition === true ) {

			positionStartAttribute.array[ i * 3 + 0 ] += - ( velocity.x * particleSystem.random() );
			positionStartAttribute.array[ i * 3 + 1 ] += - ( velocity.y * particleSystem.random() );
			positionStartAttribute.array[ i * 3 + 2 ] += - ( velocity.z * particleSystem.random() );

		}

		// velocity

		var maxVel = 2;

		var velX = velocity.x + particleSystem.random() * velocityRandomness;
		var velY = velocity.y + particleSystem.random() * velocityRandomness;
		var velZ = velocity.z + particleSystem.random() * velocityRandomness;

		velX = THREE.Math.clamp( ( velX - ( - maxVel ) ) / ( maxVel - ( - maxVel ) ), 0, 1 );
		velY = THREE.Math.clamp( ( velY - ( - maxVel ) ) / ( maxVel - ( - maxVel ) ), 0, 1 );
		velZ = THREE.Math.clamp( ( velZ - ( - maxVel ) ) / ( maxVel - ( - maxVel ) ), 0, 1 );

		velocityAttribute.array[ i * 3 + 0 ] = velX;
		velocityAttribute.array[ i * 3 + 1 ] = velY;
		velocityAttribute.array[ i * 3 + 2 ] = velZ;

		// color

		color.r = THREE.Math.clamp( color.r + particleSystem.random() * colorRandomness, 0, 1 );
		color.g = THREE.Math.clamp( color.g + particleSystem.random() * colorRandomness, 0, 1 );
		color.b = THREE.Math.clamp( color.b + particleSystem.random() * colorRandomness, 0, 1 );

		colorAttribute.array[ i * 3 + 0 ] = color.r;
		colorAttribute.array[ i * 3 + 1 ] = color.g;
		colorAttribute.array[ i * 3 + 2 ] = color.b;

		// turbulence, size, lifetime and starttime

		turbulenceAttribute.array[ i ] = turbulence;
		sizeAttribute.array[ i ] = size + particleSystem.random() * sizeRandomness;
		lifeTimeAttribute.array[ i ] = lifetime;
		startTimeAttribute.array[ i ] = this.time + particleSystem.random() * 2e-2;

		// offset

		if ( this.offset === 0 ) {

			this.offset = this.PARTICLE_CURSOR;

		}

		// counter and cursor

		this.count ++;
		this.PARTICLE_CURSOR ++;

		if ( this.PARTICLE_CURSOR >= this.PARTICLE_COUNT ) {

			this.PARTICLE_CURSOR = 0;

		}

		this.particleUpdate = true;

	};

	this.init = function () {

		this.particleSystem = new THREE.Points( this.particleShaderGeo, this.particleShaderMat );
		this.particleSystem.frustumCulled = false;
		this.add( this.particleSystem );

	};

	this.update = function ( time ) {

		this.time = time;
		this.particleShaderMat.uniforms.uTime.value = time;

		this.geometryUpdate();

	};

	this.geometryUpdate = function () {

		if ( this.particleUpdate === true ) {

			this.particleUpdate = false;

			var positionStartAttribute = this.particleShaderGeo.getAttribute( 'positionStart' );
			var startTimeAttribute = this.particleShaderGeo.getAttribute( 'startTime' );
			var velocityAttribute = this.particleShaderGeo.getAttribute( 'velocity' );
			var turbulenceAttribute = this.particleShaderGeo.getAttribute( 'turbulence' );
			var colorAttribute = this.particleShaderGeo.getAttribute( 'color' );
			var sizeAttribute = this.particleShaderGeo.getAttribute( 'size' );
			var lifeTimeAttribute = this.particleShaderGeo.getAttribute( 'lifeTime' );

			if ( this.offset + this.count < this.PARTICLE_COUNT ) {

				positionStartAttribute.updateRange.offset = this.offset * positionStartAttribute.itemSize;
				startTimeAttribute.updateRange.offset = this.offset * startTimeAttribute.itemSize;
				velocityAttribute.updateRange.offset = this.offset * velocityAttribute.itemSize;
				turbulenceAttribute.updateRange.offset = this.offset * turbulenceAttribute.itemSize;
				colorAttribute.updateRange.offset = this.offset * colorAttribute.itemSize;
				sizeAttribute.updateRange.offset = this.offset * sizeAttribute.itemSize;
				lifeTimeAttribute.updateRange.offset = this.offset * lifeTimeAttribute.itemSize;

				positionStartAttribute.updateRange.count = this.count * positionStartAttribute.itemSize;
				startTimeAttribute.updateRange.count = this.count * startTimeAttribute.itemSize;
				velocityAttribute.updateRange.count = this.count * velocityAttribute.itemSize;
				turbulenceAttribute.updateRange.count = this.count * turbulenceAttribute.itemSize;
				colorAttribute.updateRange.count = this.count * colorAttribute.itemSize;
				sizeAttribute.updateRange.count = this.count * sizeAttribute.itemSize;
				lifeTimeAttribute.updateRange.count = this.count * lifeTimeAttribute.itemSize;

			} else {

				positionStartAttribute.updateRange.offset = 0;
				startTimeAttribute.updateRange.offset = 0;
				velocityAttribute.updateRange.offset = 0;
				turbulenceAttribute.updateRange.offset = 0;
				colorAttribute.updateRange.offset = 0;
				sizeAttribute.updateRange.offset = 0;
				lifeTimeAttribute.updateRange.offset = 0;

				// Use -1 to update the entire buffer, see #11476
				positionStartAttribute.updateRange.count = - 1;
				startTimeAttribute.updateRange.count = - 1;
				velocityAttribute.updateRange.count = - 1;
				turbulenceAttribute.updateRange.count = - 1;
				colorAttribute.updateRange.count = - 1;
				sizeAttribute.updateRange.count = - 1;
				lifeTimeAttribute.updateRange.count = - 1;

			}

			positionStartAttribute.needsUpdate = true;
			startTimeAttribute.needsUpdate = true;
			velocityAttribute.needsUpdate = true;
			turbulenceAttribute.needsUpdate = true;
			colorAttribute.needsUpdate = true;
			sizeAttribute.needsUpdate = true;
			lifeTimeAttribute.needsUpdate = true;

			this.offset = 0;
			this.count = 0;

		}

	};

	this.dispose = function () {

		this.particleShaderGeo.dispose();

	};

	this.init();

};

THREE.GPUParticleContainer.prototype = Object.create( THREE.Object3D.prototype );
THREE.GPUParticleContainer.prototype.constructor = THREE.GPUParticleContainer;

},{}],"framer-form/form/lib/MTLLoader":[function(require,module,exports){
/**
 * Loads a Wavefront .mtl file specifying materials
 *
 * @author angelxuanchang
 */

THREE.MTLLoader = function ( manager ) {

	this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;

};

THREE.MTLLoader.prototype = {

	constructor: THREE.MTLLoader,

	/**
	 * Loads and parses a MTL asset from a URL.
	 *
	 * @param {String} url - URL to the MTL file.
	 * @param {Function} [onLoad] - Callback invoked with the loaded object.
	 * @param {Function} [onProgress] - Callback for download progress.
	 * @param {Function} [onError] - Callback for download errors.
	 *
	 * @see setPath setTexturePath
	 *
	 * @note In order for relative texture references to resolve correctly
	 * you must call setPath and/or setTexturePath explicitly prior to load.
	 */
	load: function ( url, onLoad, onProgress, onError ) {

		var scope = this;

		var loader = new THREE.FileLoader( this.manager );
		loader.setPath( this.path );
		loader.load( url, function ( text ) {

			onLoad( scope.parse( text ) );

		}, onProgress, onError );

	},

	/**
	 * Set base path for resolving references.
	 * If set this path will be prepended to each loaded and found reference.
	 *
	 * @see setTexturePath
	 * @param {String} path
	 *
	 * @example
	 *     mtlLoader.setPath( 'assets/obj/' );
	 *     mtlLoader.load( 'my.mtl', ... );
	 */
	setPath: function ( path ) {

		this.path = path;

	},

	/**
	 * Set base path for resolving texture references.
	 * If set this path will be prepended found texture reference.
	 * If not set and setPath is, it will be used as texture base path.
	 *
	 * @see setPath
	 * @param {String} path
	 *
	 * @example
	 *     mtlLoader.setPath( 'assets/obj/' );
	 *     mtlLoader.setTexturePath( 'assets/textures/' );
	 *     mtlLoader.load( 'my.mtl', ... );
	 */
	setTexturePath: function ( path ) {

		this.texturePath = path;

	},

	setBaseUrl: function ( path ) {

		console.warn( 'THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.' );

		this.setTexturePath( path );

	},

	setCrossOrigin: function ( value ) {

		this.crossOrigin = value;

	},

	setMaterialOptions: function ( value ) {

		this.materialOptions = value;

	},

	/**
	 * Parses a MTL file.
	 *
	 * @param {String} text - Content of MTL file
	 * @return {THREE.MTLLoader.MaterialCreator}
	 *
	 * @see setPath setTexturePath
	 *
	 * @note In order for relative texture references to resolve correctly
	 * you must call setPath and/or setTexturePath explicitly prior to parse.
	 */
	parse: function ( text ) {

		var lines = text.split( '\n' );
		var info = {};
		var delimiter_pattern = /\s+/;
		var materialsInfo = {};

		for ( var i = 0; i < lines.length; i ++ ) {

			var line = lines[ i ];
			line = line.trim();

			if ( line.length === 0 || line.charAt( 0 ) === '#' ) {

				// Blank line or comment ignore
				continue;

			}

			var pos = line.indexOf( ' ' );

			var key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;
			key = key.toLowerCase();

			var value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';
			value = value.trim();

			if ( key === 'newmtl' ) {

				// New material

				info = { name: value };
				materialsInfo[ value ] = info;

			} else if ( info ) {

				if ( key === 'ka' || key === 'kd' || key === 'ks' ) {

					var ss = value.split( delimiter_pattern, 3 );
					info[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];

				} else {

					info[ key ] = value;

				}

			}

		}

		var materialCreator = new THREE.MTLLoader.MaterialCreator( this.texturePath || this.path, this.materialOptions );
		materialCreator.setCrossOrigin( this.crossOrigin );
		materialCreator.setManager( this.manager );
		materialCreator.setMaterials( materialsInfo );
		return materialCreator;

	}

};

/**
 * Create a new THREE-MTLLoader.MaterialCreator
 * @param baseUrl - Url relative to which textures are loaded
 * @param options - Set of options on how to construct the materials
 *                  side: Which side to apply the material
 *                        THREE.FrontSide (default), THREE.BackSide, THREE.DoubleSide
 *                  wrap: What type of wrapping to apply for textures
 *                        THREE.RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping
 *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255
 *                                Default: false, assumed to be already normalized
 *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's
 *                                  Default: false
 * @constructor
 */

THREE.MTLLoader.MaterialCreator = function ( baseUrl, options ) {

	this.baseUrl = baseUrl || '';
	this.options = options;
	this.materialsInfo = {};
	this.materials = {};
	this.materialsArray = [];
	this.nameLookup = {};

	this.side = ( this.options && this.options.side ) ? this.options.side : THREE.FrontSide;
	this.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : THREE.RepeatWrapping;

};

THREE.MTLLoader.MaterialCreator.prototype = {

	constructor: THREE.MTLLoader.MaterialCreator,

	crossOrigin: 'Anonymous',

	setCrossOrigin: function ( value ) {

		this.crossOrigin = value;

	},

	setManager: function ( value ) {

		this.manager = value;

	},

	setMaterials: function ( materialsInfo ) {

		this.materialsInfo = this.convert( materialsInfo );
		this.materials = {};
		this.materialsArray = [];
		this.nameLookup = {};

	},

	convert: function ( materialsInfo ) {

		if ( ! this.options ) return materialsInfo;

		var converted = {};

		for ( var mn in materialsInfo ) {

			// Convert materials info into normalized form based on options

			var mat = materialsInfo[ mn ];

			var covmat = {};

			converted[ mn ] = covmat;

			for ( var prop in mat ) {

				var save = true;
				var value = mat[ prop ];
				var lprop = prop.toLowerCase();

				switch ( lprop ) {

					case 'kd':
					case 'ka':
					case 'ks':

						// Diffuse color (color under white light) using RGB values

						if ( this.options && this.options.normalizeRGB ) {

							value = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];

						}

						if ( this.options && this.options.ignoreZeroRGBs ) {

							if ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {

								// ignore

								save = false;

							}

						}

						break;

					default:

						break;

				}

				if ( save ) {

					covmat[ lprop ] = value;

				}

			}

		}

		return converted;

	},

	preload: function () {

		for ( var mn in this.materialsInfo ) {

			this.create( mn );

		}

	},

	getIndex: function ( materialName ) {

		return this.nameLookup[ materialName ];

	},

	getAsArray: function () {

		var index = 0;

		for ( var mn in this.materialsInfo ) {

			this.materialsArray[ index ] = this.create( mn );
			this.nameLookup[ mn ] = index;
			index ++;

		}

		return this.materialsArray;

	},

	create: function ( materialName ) {

		if ( this.materials[ materialName ] === undefined ) {

			this.createMaterial_( materialName );

		}

		return this.materials[ materialName ];

	},

	createMaterial_: function ( materialName ) {

		// Create material

		var scope = this;
		var mat = this.materialsInfo[ materialName ];
		var params = {

			name: materialName,
			side: this.side

		};

		function resolveURL( baseUrl, url ) {

			if ( typeof url !== 'string' || url === '' )
				return '';

			// Absolute URL
			if ( /^https?:\/\//i.test( url ) ) return url;

			return baseUrl + url;

		}

		function setMapForType( mapType, value ) {

			if ( params[ mapType ] ) return; // Keep the first encountered texture

			var texParams = scope.getTextureParams( value, params );
			var map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );

			map.repeat.copy( texParams.scale );
			map.offset.copy( texParams.offset );

			map.wrapS = scope.wrap;
			map.wrapT = scope.wrap;

			params[ mapType ] = map;

		}

		for ( var prop in mat ) {

			var value = mat[ prop ];
			var n;

			if ( value === '' ) continue;

			switch ( prop.toLowerCase() ) {

				// Ns is material specular exponent

				case 'kd':

					// Diffuse color (color under white light) using RGB values

					params.color = new THREE.Color().fromArray( value );

					break;

				case 'ks':

					// Specular color (color when light is reflected from shiny surface) using RGB values
					params.specular = new THREE.Color().fromArray( value );

					break;

				case 'map_kd':

					// Diffuse texture map

					setMapForType( "map", value );

					break;

				case 'map_ks':

					// Specular map

					setMapForType( "specularMap", value );

					break;

				case 'norm':

					setMapForType( "normalMap", value );

					break;

				case 'map_bump':
				case 'bump':

					// Bump texture map

					setMapForType( "bumpMap", value );

					break;

				case 'ns':

					// The specular exponent (defines the focus of the specular highlight)
					// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.

					params.shininess = parseFloat( value );

					break;

				case 'd':
					n = parseFloat( value );

					if ( n < 1 ) {

						params.opacity = n;
						params.transparent = true;

					}

					break;

				case 'tr':
					n = parseFloat( value );

					if ( this.options && this.options.invertTrProperty ) n = 1 - n;

					if ( n < 1 ) {

						params.opacity = n;
						params.transparent = true;

					}

					break;

				default:
					break;

			}

		}

		this.materials[ materialName ] = new THREE.MeshPhongMaterial( params );
		return this.materials[ materialName ];

	},

	getTextureParams: function ( value, matParams ) {

		var texParams = {

			scale: new THREE.Vector2( 1, 1 ),
			offset: new THREE.Vector2( 0, 0 )

		 };

		var items = value.split( /\s+/ );
		var pos;

		pos = items.indexOf( '-bm' );

		if ( pos >= 0 ) {

			matParams.bumpScale = parseFloat( items[ pos + 1 ] );
			items.splice( pos, 2 );

		}

		pos = items.indexOf( '-s' );

		if ( pos >= 0 ) {

			texParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );
			items.splice( pos, 4 ); // we expect 3 parameters here!

		}

		pos = items.indexOf( '-o' );

		if ( pos >= 0 ) {

			texParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );
			items.splice( pos, 4 ); // we expect 3 parameters here!

		}

		texParams.url = items.join( ' ' ).trim();
		return texParams;

	},

	loadTexture: function ( url, mapping, onLoad, onProgress, onError ) {

		var texture;
		var loader = THREE.Loader.Handlers.get( url );
		var manager = ( this.manager !== undefined ) ? this.manager : THREE.DefaultLoadingManager;

		if ( loader === null ) {

			loader = new THREE.TextureLoader( manager );

		}

		if ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );
		texture = loader.load( url, onLoad, onProgress, onError );

		if ( mapping !== undefined ) texture.mapping = mapping;

		return texture;

	}

};

},{}],"framer-form/form/lib/OBJLoader":[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com/
 */

THREE.OBJLoader = function ( manager ) {
    
        this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;
    
        this.materials = null;
    
        this.regexp = {
            // v float float float
            vertex_pattern           : /^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
            // vn float float float
            normal_pattern           : /^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
            // vt float float
            uv_pattern               : /^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
            // f vertex vertex vertex
            face_vertex              : /^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,
            // f vertex/uv vertex/uv vertex/uv
            face_vertex_uv           : /^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,
            // f vertex/uv/normal vertex/uv/normal vertex/uv/normal
            face_vertex_uv_normal    : /^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,
            // f vertex//normal vertex//normal vertex//normal
            face_vertex_normal       : /^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,
            // o object_name | g group_name
            object_pattern           : /^[og]\s*(.+)?/,
            // s boolean
            smoothing_pattern        : /^s\s+(\d+|on|off)/,
            // mtllib file_reference
            material_library_pattern : /^mtllib /,
            // usemtl material_name
            material_use_pattern     : /^usemtl /
        };
    
    };
    
    THREE.OBJLoader.prototype = {
    
        constructor: THREE.OBJLoader,
    
        load: function ( url, onLoad, onProgress, onError ) {
    
            var scope = this;
    
            var loader = new THREE.FileLoader( scope.manager );
            loader.setPath( this.path );
            loader.load( url, function ( text ) {
    
                onLoad( scope.parse( text ) );
    
            }, onProgress, onError );
    
        },
    
        setPath: function ( value ) {
    
            this.path = value;
    
        },
    
        setMaterials: function ( materials ) {
    
            this.materials = materials;
    
        },
    
        _createParserState : function () {
    
            var state = {
                objects  : [],
                object   : {},
    
                vertices : [],
                normals  : [],
                uvs      : [],
    
                materialLibraries : [],
    
                startObject: function ( name, fromDeclaration ) {
    
                    // If the current object (initial from reset) is not from a g/o declaration in the parsed
                    // file. We need to use it for the first parsed g/o to keep things in sync.
                    if ( this.object && this.object.fromDeclaration === false ) {
    
                        this.object.name = name;
                        this.object.fromDeclaration = ( fromDeclaration !== false );
                        return;
    
                    }
    
                    var previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );
    
                    if ( this.object && typeof this.object._finalize === 'function' ) {
    
                        this.object._finalize( true );
    
                    }
    
                    this.object = {
                        name : name || '',
                        fromDeclaration : ( fromDeclaration !== false ),
    
                        geometry : {
                            vertices : [],
                            normals  : [],
                            uvs      : []
                        },
                        materials : [],
                        smooth : true,
    
                        startMaterial : function( name, libraries ) {
    
                            var previous = this._finalize( false );
    
                            // New usemtl declaration overwrites an inherited material, except if faces were declared
                            // after the material, then it must be preserved for proper MultiMaterial continuation.
                            if ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {
    
                                this.materials.splice( previous.index, 1 );
    
                            }
    
                            var material = {
                                index      : this.materials.length,
                                name       : name || '',
                                mtllib     : ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),
                                smooth     : ( previous !== undefined ? previous.smooth : this.smooth ),
                                groupStart : ( previous !== undefined ? previous.groupEnd : 0 ),
                                groupEnd   : -1,
                                groupCount : -1,
                                inherited  : false,
    
                                clone : function( index ) {
                                    var cloned = {
                                        index      : ( typeof index === 'number' ? index : this.index ),
                                        name       : this.name,
                                        mtllib     : this.mtllib,
                                        smooth     : this.smooth,
                                        groupStart : 0,
                                        groupEnd   : -1,
                                        groupCount : -1,
                                        inherited  : false
                                    };
                                    cloned.clone = this.clone.bind(cloned);
                                    return cloned;
                                }
                            };
    
                            this.materials.push( material );
    
                            return material;
    
                        },
    
                        currentMaterial : function() {
    
                            if ( this.materials.length > 0 ) {
                                return this.materials[ this.materials.length - 1 ];
                            }
    
                            return undefined;
    
                        },
    
                        _finalize : function( end ) {
    
                            var lastMultiMaterial = this.currentMaterial();
                            if ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {
    
                                lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;
                                lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;
                                lastMultiMaterial.inherited = false;
    
                            }
    
                            // Ignore objects tail materials if no face declarations followed them before a new o/g started.
                            if ( end && this.materials.length > 1 ) {
    
                                for ( var mi = this.materials.length - 1; mi >= 0; mi-- ) {
                                    if ( this.materials[mi].groupCount <= 0 ) {
                                        this.materials.splice( mi, 1 );
                                    }
                                }
    
                            }
    
                            // Guarantee at least one empty material, this makes the creation later more straight forward.
                            if ( end && this.materials.length === 0 ) {
    
                                this.materials.push({
                                    name   : '',
                                    smooth : this.smooth
                                });
    
                            }
    
                            return lastMultiMaterial;
    
                        }
                    };
    
                    // Inherit previous objects material.
                    // Spec tells us that a declared material must be set to all objects until a new material is declared.
                    // If a usemtl declaration is encountered while this new object is being parsed, it will
                    // overwrite the inherited material. Exception being that there was already face declarations
                    // to the inherited material, then it will be preserved for proper MultiMaterial continuation.
    
                    if ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === "function" ) {
    
                        var declared = previousMaterial.clone( 0 );
                        declared.inherited = true;
                        this.object.materials.push( declared );
    
                    }
    
                    this.objects.push( this.object );
    
                },
    
                finalize : function() {
    
                    if ( this.object && typeof this.object._finalize === 'function' ) {
    
                        this.object._finalize( true );
    
                    }
    
                },
    
                parseVertexIndex: function ( value, len ) {
    
                    var index = parseInt( value, 10 );
                    return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;
    
                },
    
                parseNormalIndex: function ( value, len ) {
    
                    var index = parseInt( value, 10 );
                    return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;
    
                },
    
                parseUVIndex: function ( value, len ) {
    
                    var index = parseInt( value, 10 );
                    return ( index >= 0 ? index - 1 : index + len / 2 ) * 2;
    
                },
    
                addVertex: function ( a, b, c ) {
    
                    var src = this.vertices;
                    var dst = this.object.geometry.vertices;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
                    dst.push( src[ a + 2 ] );
                    dst.push( src[ b + 0 ] );
                    dst.push( src[ b + 1 ] );
                    dst.push( src[ b + 2 ] );
                    dst.push( src[ c + 0 ] );
                    dst.push( src[ c + 1 ] );
                    dst.push( src[ c + 2 ] );
    
                },
    
                addVertexLine: function ( a ) {
    
                    var src = this.vertices;
                    var dst = this.object.geometry.vertices;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
                    dst.push( src[ a + 2 ] );
    
                },
    
                addNormal : function ( a, b, c ) {
    
                    var src = this.normals;
                    var dst = this.object.geometry.normals;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
                    dst.push( src[ a + 2 ] );
                    dst.push( src[ b + 0 ] );
                    dst.push( src[ b + 1 ] );
                    dst.push( src[ b + 2 ] );
                    dst.push( src[ c + 0 ] );
                    dst.push( src[ c + 1 ] );
                    dst.push( src[ c + 2 ] );
    
                },
    
                addUV: function ( a, b, c ) {
    
                    var src = this.uvs;
                    var dst = this.object.geometry.uvs;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
                    dst.push( src[ b + 0 ] );
                    dst.push( src[ b + 1 ] );
                    dst.push( src[ c + 0 ] );
                    dst.push( src[ c + 1 ] );
    
                },
    
                addUVLine: function ( a ) {
    
                    var src = this.uvs;
                    var dst = this.object.geometry.uvs;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
    
                },
    
                addFace: function ( a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd ) {
    
                    var vLen = this.vertices.length;
    
                    var ia = this.parseVertexIndex( a, vLen );
                    var ib = this.parseVertexIndex( b, vLen );
                    var ic = this.parseVertexIndex( c, vLen );
                    var id;
    
                    if ( d === undefined ) {
    
                        this.addVertex( ia, ib, ic );
    
                    } else {
    
                        id = this.parseVertexIndex( d, vLen );
    
                        this.addVertex( ia, ib, id );
                        this.addVertex( ib, ic, id );
    
                    }
    
                    if ( ua !== undefined ) {
    
                        var uvLen = this.uvs.length;
    
                        ia = this.parseUVIndex( ua, uvLen );
                        ib = this.parseUVIndex( ub, uvLen );
                        ic = this.parseUVIndex( uc, uvLen );
    
                        if ( d === undefined ) {
    
                            this.addUV( ia, ib, ic );
    
                        } else {
    
                            id = this.parseUVIndex( ud, uvLen );
    
                            this.addUV( ia, ib, id );
                            this.addUV( ib, ic, id );
    
                        }
    
                    }
    
                    if ( na !== undefined ) {
    
                        // Normals are many times the same. If so, skip function call and parseInt.
                        var nLen = this.normals.length;
                        ia = this.parseNormalIndex( na, nLen );
    
                        ib = na === nb ? ia : this.parseNormalIndex( nb, nLen );
                        ic = na === nc ? ia : this.parseNormalIndex( nc, nLen );
    
                        if ( d === undefined ) {
    
                            this.addNormal( ia, ib, ic );
    
                        } else {
    
                            id = this.parseNormalIndex( nd, nLen );
    
                            this.addNormal( ia, ib, id );
                            this.addNormal( ib, ic, id );
    
                        }
    
                    }
    
                },
    
                addLineGeometry: function ( vertices, uvs ) {
    
                    this.object.geometry.type = 'Line';
    
                    var vLen = this.vertices.length;
                    var uvLen = this.uvs.length;
    
                    for ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {
    
                        this.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );
    
                    }
    
                    for ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {
    
                        this.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );
    
                    }
    
                }
    
            };
    
            state.startObject( '', false );
    
            return state;
    
        },
    
        parse: function ( text ) {
    
            console.time( 'OBJLoader' );
    
            var state = this._createParserState();
    
            if ( text.indexOf( '\r\n' ) !== - 1 ) {
    
                // This is faster than String.split with regex that splits on both
                text = text.replace( /\r\n/g, '\n' );
    
            }
    
            if ( text.indexOf( '\\\n' ) !== - 1) {
    
                // join lines separated by a line continuation character (\)
                text = text.replace( /\\\n/g, '' );
    
            }
    
            var lines = text.split( '\n' );
            var line = '', lineFirstChar = '', lineSecondChar = '';
            var lineLength = 0;
            var result = [];
    
            // Faster to just trim left side of the line. Use if available.
            var trimLeft = ( typeof ''.trimLeft === 'function' );
    
            for ( var i = 0, l = lines.length; i < l; i ++ ) {
    
                line = lines[ i ];
    
                line = trimLeft ? line.trimLeft() : line.trim();
    
                lineLength = line.length;
    
                if ( lineLength === 0 ) continue;
    
                lineFirstChar = line.charAt( 0 );
    
                // @todo invoke passed in handler if any
                if ( lineFirstChar === '#' ) continue;
    
                if ( lineFirstChar === 'v' ) {
    
                    lineSecondChar = line.charAt( 1 );
    
                    if ( lineSecondChar === ' ' && ( result = this.regexp.vertex_pattern.exec( line ) ) !== null ) {
    
                        // 0                  1      2      3
                        // ["v 1.0 2.0 3.0", "1.0", "2.0", "3.0"]
    
                        state.vertices.push(
                            parseFloat( result[ 1 ] ),
                            parseFloat( result[ 2 ] ),
                            parseFloat( result[ 3 ] )
                        );
    
                    } else if ( lineSecondChar === 'n' && ( result = this.regexp.normal_pattern.exec( line ) ) !== null ) {
    
                        // 0                   1      2      3
                        // ["vn 1.0 2.0 3.0", "1.0", "2.0", "3.0"]
    
                        state.normals.push(
                            parseFloat( result[ 1 ] ),
                            parseFloat( result[ 2 ] ),
                            parseFloat( result[ 3 ] )
                        );
    
                    } else if ( lineSecondChar === 't' && ( result = this.regexp.uv_pattern.exec( line ) ) !== null ) {
    
                        // 0               1      2
                        // ["vt 0.1 0.2", "0.1", "0.2"]
    
                        state.uvs.push(
                            parseFloat( result[ 1 ] ),
                            parseFloat( result[ 2 ] )
                        );
    
                    } else {
    
                        throw new Error( "Unexpected vertex/normal/uv line: '" + line  + "'" );
    
                    }
    
                } else if ( lineFirstChar === "f" ) {
    
                    if ( ( result = this.regexp.face_vertex_uv_normal.exec( line ) ) !== null ) {
    
                        // f vertex/uv/normal vertex/uv/normal vertex/uv/normal
                        // 0                        1    2    3    4    5    6    7    8    9   10         11         12
                        // ["f 1/1/1 2/2/2 3/3/3", "1", "1", "1", "2", "2", "2", "3", "3", "3", undefined, undefined, undefined]
    
                        state.addFace(
                            result[ 1 ], result[ 4 ], result[ 7 ], result[ 10 ],
                            result[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],
                            result[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ]
                        );
    
                    } else if ( ( result = this.regexp.face_vertex_uv.exec( line ) ) !== null ) {
    
                        // f vertex/uv vertex/uv vertex/uv
                        // 0                  1    2    3    4    5    6   7          8
                        // ["f 1/1 2/2 3/3", "1", "1", "2", "2", "3", "3", undefined, undefined]
    
                        state.addFace(
                            result[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],
                            result[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]
                        );
    
                    } else if ( ( result = this.regexp.face_vertex_normal.exec( line ) ) !== null ) {
    
                        // f vertex//normal vertex//normal vertex//normal
                        // 0                     1    2    3    4    5    6   7          8
                        // ["f 1//1 2//2 3//3", "1", "1", "2", "2", "3", "3", undefined, undefined]
    
                        state.addFace(
                            result[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],
                            undefined, undefined, undefined, undefined,
                            result[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]
                        );
    
                    } else if ( ( result = this.regexp.face_vertex.exec( line ) ) !== null ) {
    
                        // f vertex vertex vertex
                        // 0            1    2    3   4
                        // ["f 1 2 3", "1", "2", "3", undefined]
    
                        state.addFace(
                            result[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ]
                        );
    
                    } else {
    
                        throw new Error( "Unexpected face line: '" + line  + "'" );
    
                    }
    
                } else if ( lineFirstChar === "l" ) {
    
                    var lineParts = line.substring( 1 ).trim().split( " " );
                    var lineVertices = [], lineUVs = [];
    
                    if ( line.indexOf( "/" ) === - 1 ) {
    
                        lineVertices = lineParts;
    
                    } else {
    
                        for ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {
    
                            var parts = lineParts[ li ].split( "/" );
    
                            if ( parts[ 0 ] !== "" ) lineVertices.push( parts[ 0 ] );
                            if ( parts[ 1 ] !== "" ) lineUVs.push( parts[ 1 ] );
    
                        }
    
                    }
                    state.addLineGeometry( lineVertices, lineUVs );
    
                } else if ( ( result = this.regexp.object_pattern.exec( line ) ) !== null ) {
    
                    // o object_name
                    // or
                    // g group_name
    
                    // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869
                    // var name = result[ 0 ].substr( 1 ).trim();
                    var name = ( " " + result[ 0 ].substr( 1 ).trim() ).substr( 1 );
    
                    state.startObject( name );
    
                } else if ( this.regexp.material_use_pattern.test( line ) ) {
    
                    // material
    
                    state.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );
    
                } else if ( this.regexp.material_library_pattern.test( line ) ) {
    
                    // mtl file
    
                    state.materialLibraries.push( line.substring( 7 ).trim() );
    
                } else if ( ( result = this.regexp.smoothing_pattern.exec( line ) ) !== null ) {
    
                    // smooth shading
    
                    // @todo Handle files that have varying smooth values for a set of faces inside one geometry,
                    // but does not define a usemtl for each face set.
                    // This should be detected and a dummy material created (later MultiMaterial and geometry groups).
                    // This requires some care to not create extra material on each smooth value for "normal" obj files.
                    // where explicit usemtl defines geometry groups.
                    // Example asset: examples/models/obj/cerberus/Cerberus.obj
    
                    var value = result[ 1 ].trim().toLowerCase();
                    state.object.smooth = ( value === '1' || value === 'on' );
    
                    var material = state.object.currentMaterial();
                    if ( material ) {
    
                        material.smooth = state.object.smooth;
    
                    }
    
                } else {
    
                    // Handle null terminated files without exception
                    if ( line === '\0' ) continue;
    
                    throw new Error( "Unexpected line: '" + line  + "'" );
    
                }
    
            }
    
            state.finalize();
    
            var container = new THREE.Group();
            container.materialLibraries = [].concat( state.materialLibraries );
    
            for ( var i = 0, l = state.objects.length; i < l; i ++ ) {
    
                var object = state.objects[ i ];
                var geometry = object.geometry;
                var materials = object.materials;
                var isLine = ( geometry.type === 'Line' );
    
                // Skip o/g line declarations that did not follow with any faces
                if ( geometry.vertices.length === 0 ) continue;
    
                var buffergeometry = new THREE.BufferGeometry();
    
                buffergeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( geometry.vertices ), 3 ) );
    
                if ( geometry.normals.length > 0 ) {
    
                    buffergeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( geometry.normals ), 3 ) );
    
                } else {
    
                    buffergeometry.computeVertexNormals();
    
                }
    
                if ( geometry.uvs.length > 0 ) {
    
                    buffergeometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( geometry.uvs ), 2 ) );
    
                }
    
                // Create materials
    
                var createdMaterials = [];
    
                for ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {
    
                    var sourceMaterial = materials[mi];
                    var material = undefined;
    
                    if ( this.materials !== null ) {
    
                        material = this.materials.create( sourceMaterial.name );
    
                        // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.
                        if ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {
    
                            var materialLine = new THREE.LineBasicMaterial();
                            materialLine.copy( material );
                            material = materialLine;
    
                        }
    
                    }
    
                    if ( ! material ) {
    
                        material = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );
                        material.name = sourceMaterial.name;
    
                    }
    
                    material.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;
    
                    createdMaterials.push(material);
    
                }
    
                // Create mesh
    
                var mesh;
    
                if ( createdMaterials.length > 1 ) {
    
                    for ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {
    
                        var sourceMaterial = materials[mi];
                        buffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );
    
                    }
    
                    mesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials ) : new THREE.LineSegments( buffergeometry, createdMaterials ) );
    
                } else {
    
                    mesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );
                }
    
                mesh.name = object.name;
    
                container.add( mesh );
    
            }
    
            console.timeEnd( 'OBJLoader' );
    
            return container;
    
        }
    
    };    
},{}],"framer-form/form/lib/OrbitControls":[function(require,module,exports){
/**
 * @author qiao / https://github.com/qiao
 * @author mrdoob / http://mrdoob.com
 * @author alteredq / http://alteredqualia.com/
 * @author WestLangley / http://github.com/WestLangley
 * @author erich666 / http://erichaines.com
 */

// This set of controls performs orbiting, dollying (zooming), and panning.
// Unlike TrackballControls, it maintains the "up" direction object.up (+Y by default).
//
//    Orbit - left mouse / touch: one finger move
//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish
//    Pan - right mouse, or arrow keys / touch: three finger swipe

THREE.OrbitControls = function ( object, domElement ) {

	this.object = object;

	this.domElement = ( domElement !== undefined ) ? domElement : document;

	// Set to false to disable this control
	this.enabled = true;

	// "target" sets the location of focus, where the object orbits around
	this.target = new THREE.Vector3();

	// How far you can dolly in and out ( PerspectiveCamera only )
	this.minDistance = 0;
	this.maxDistance = Infinity;

	// How far you can zoom in and out ( OrthographicCamera only )
	this.minZoom = 0;
	this.maxZoom = Infinity;

	// How far you can orbit vertically, upper and lower limits.
	// Range is 0 to Math.PI radians.
	this.minPolarAngle = 0; // radians
	this.maxPolarAngle = Math.PI; // radians

	// How far you can orbit horizontally, upper and lower limits.
	// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].
	this.minAzimuthAngle = - Infinity; // radians
	this.maxAzimuthAngle = Infinity; // radians

	// Set to true to enable damping (inertia)
	// If damping is enabled, you must call controls.update() in your animation loop
	this.enableDamping = false;
	this.dampingFactor = 0.25;

	// This option actually enables dollying in and out; left as "zoom" for backwards compatibility.
	// Set to false to disable zooming
	this.enableZoom = true;
	this.zoomSpeed = 1.0;

	// Set to false to disable rotating
	this.enableRotate = true;
	this.rotateSpeed = 1.0;

	// Set to false to disable panning
	this.enablePan = true;
	this.keyPanSpeed = 7.0;	// pixels moved per arrow key push

	// Set to true to automatically rotate around the target
	// If auto-rotate is enabled, you must call controls.update() in your animation loop
	this.autoRotate = false;
	this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60

	// Set to false to disable use of the keys
	this.enableKeys = true;

	// The four arrow keys
	this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };

	// Mouse buttons
	this.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };

	// for reset
	this.target0 = this.target.clone();
	this.position0 = this.object.position.clone();
	this.zoom0 = this.object.zoom;

	//
	// public methods
	//

	this.getPolarAngle = function () {

		return spherical.phi;

	};

	this.getAzimuthalAngle = function () {

		return spherical.theta;

	};

	this.saveState = function () {

		scope.target0.copy( scope.target );
		scope.position0.copy( scope.object.position );
		scope.zoom0 = scope.object.zoom;

	};

	this.reset = function () {

		scope.target.copy( scope.target0 );
		scope.object.position.copy( scope.position0 );
		scope.object.zoom = scope.zoom0;

		scope.object.updateProjectionMatrix();
		scope.dispatchEvent( changeEvent );

		scope.update();

		state = STATE.NONE;

	};

	// this method is exposed, but perhaps it would be better if we can make it private...
	this.update = function () {

		var offset = new THREE.Vector3();

		// so camera.up is the orbit axis
		var quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );
		var quatInverse = quat.clone().inverse();

		var lastPosition = new THREE.Vector3();
		var lastQuaternion = new THREE.Quaternion();

		return function update() {

			var position = scope.object.position;

			offset.copy( position ).sub( scope.target );

			// rotate offset to "y-axis-is-up" space
			offset.applyQuaternion( quat );

			// angle from z-axis around y-axis
			spherical.setFromVector3( offset );

			if ( scope.autoRotate && state === STATE.NONE ) {

				rotateLeft( getAutoRotationAngle() );

			}

			spherical.theta += sphericalDelta.theta;
			spherical.phi += sphericalDelta.phi;

			// restrict theta to be between desired limits
			spherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );

			// restrict phi to be between desired limits
			spherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );

			spherical.makeSafe();


			spherical.radius *= scale;

			// restrict radius to be between desired limits
			spherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );

			// move target to panned location
			scope.target.add( panOffset );

			offset.setFromSpherical( spherical );

			// rotate offset back to "camera-up-vector-is-up" space
			offset.applyQuaternion( quatInverse );

			position.copy( scope.target ).add( offset );

			scope.object.lookAt( scope.target );

			if ( scope.enableDamping === true ) {

				sphericalDelta.theta *= ( 1 - scope.dampingFactor );
				sphericalDelta.phi *= ( 1 - scope.dampingFactor );

			} else {

				sphericalDelta.set( 0, 0, 0 );

			}

			scale = 1;
			panOffset.set( 0, 0, 0 );

			// update condition is:
			// min(camera displacement, camera rotation in radians)^2 > EPS
			// using small-angle approximation cos(x/2) = 1 - x^2 / 8

			if ( zoomChanged ||
				lastPosition.distanceToSquared( scope.object.position ) > EPS ||
				8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {

				scope.dispatchEvent( changeEvent );

				lastPosition.copy( scope.object.position );
				lastQuaternion.copy( scope.object.quaternion );
				zoomChanged = false;

				return true;

			}

			return false;

		};

	}();

	this.dispose = function () {

		scope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );
		scope.domElement.removeEventListener( 'mousedown', onMouseDown, false );
		scope.domElement.removeEventListener( 'wheel', onMouseWheel, false );

		scope.domElement.removeEventListener( 'touchstart', onTouchStart, false );
		scope.domElement.removeEventListener( 'touchend', onTouchEnd, false );
		scope.domElement.removeEventListener( 'touchmove', onTouchMove, false );

		document.removeEventListener( 'mousemove', onMouseMove, false );
		document.removeEventListener( 'mouseup', onMouseUp, false );

		window.removeEventListener( 'keydown', onKeyDown, false );

		//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?

	};

	//
	// internals
	//

	var scope = this;

	var changeEvent = { type: 'change' };
	var startEvent = { type: 'start' };
	var endEvent = { type: 'end' };

	var STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };

	var state = STATE.NONE;

	var EPS = 0.000001;

	// current position in spherical coordinates
	var spherical = new THREE.Spherical();
	var sphericalDelta = new THREE.Spherical();

	var scale = 1;
	var panOffset = new THREE.Vector3();
	var zoomChanged = false;

	var rotateStart = new THREE.Vector2();
	var rotateEnd = new THREE.Vector2();
	var rotateDelta = new THREE.Vector2();

	var panStart = new THREE.Vector2();
	var panEnd = new THREE.Vector2();
	var panDelta = new THREE.Vector2();

	var dollyStart = new THREE.Vector2();
	var dollyEnd = new THREE.Vector2();
	var dollyDelta = new THREE.Vector2();

	function getAutoRotationAngle() {

		return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;

	}

	function getZoomScale() {

		return Math.pow( 0.95, scope.zoomSpeed );

	}

	function rotateLeft( angle ) {

		sphericalDelta.theta -= angle;

	}

	function rotateUp( angle ) {

		sphericalDelta.phi -= angle;

	}

	var panLeft = function () {

		var v = new THREE.Vector3();

		return function panLeft( distance, objectMatrix ) {

			v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix
			v.multiplyScalar( - distance );

			panOffset.add( v );

		};

	}();

	var panUp = function () {

		var v = new THREE.Vector3();

		return function panUp( distance, objectMatrix ) {

			v.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix
			v.multiplyScalar( distance );

			panOffset.add( v );

		};

	}();

	// deltaX and deltaY are in pixels; right and down are positive
	var pan = function () {

		var offset = new THREE.Vector3();

		return function pan( deltaX, deltaY ) {

			var element = scope.domElement === document ? scope.domElement.body : scope.domElement;

			if ( scope.object.isPerspectiveCamera ) {

				// perspective
				var position = scope.object.position;
				offset.copy( position ).sub( scope.target );
				var targetDistance = offset.length();

				// half of the fov is center to top of screen
				targetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );

				// we actually don't use screenWidth, since perspective camera is fixed to screen height
				panLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );
				panUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );

			} else if ( scope.object.isOrthographicCamera ) {

				// orthographic
				panLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );
				panUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );

			} else {

				// camera neither orthographic nor perspective
				console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );
				scope.enablePan = false;

			}

		};

	}();

	function dollyIn( dollyScale ) {

		if ( scope.object.isPerspectiveCamera ) {

			scale /= dollyScale;

		} else if ( scope.object.isOrthographicCamera ) {

			scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );
			scope.object.updateProjectionMatrix();
			zoomChanged = true;

		} else {

			console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );
			scope.enableZoom = false;

		}

	}

	function dollyOut( dollyScale ) {

		if ( scope.object.isPerspectiveCamera ) {

			scale *= dollyScale;

		} else if ( scope.object.isOrthographicCamera ) {

			scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );
			scope.object.updateProjectionMatrix();
			zoomChanged = true;

		} else {

			console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );
			scope.enableZoom = false;

		}

	}

	//
	// event callbacks - update the object state
	//

	function handleMouseDownRotate( event ) {

		//console.log( 'handleMouseDownRotate' );

		rotateStart.set( event.clientX, event.clientY );

	}

	function handleMouseDownDolly( event ) {

		//console.log( 'handleMouseDownDolly' );

		dollyStart.set( event.clientX, event.clientY );

	}

	function handleMouseDownPan( event ) {

		//console.log( 'handleMouseDownPan' );

		panStart.set( event.clientX, event.clientY );

	}

	function handleMouseMoveRotate( event ) {

		//console.log( 'handleMouseMoveRotate' );

		rotateEnd.set( event.clientX, event.clientY );
		rotateDelta.subVectors( rotateEnd, rotateStart );

		var element = scope.domElement === document ? scope.domElement.body : scope.domElement;

		// rotating across whole screen goes 360 degrees around
		rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );

		// rotating up and down along whole screen attempts to go 360, but limited to 180
		rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );

		rotateStart.copy( rotateEnd );

		scope.update();

	}

	function handleMouseMoveDolly( event ) {

		//console.log( 'handleMouseMoveDolly' );

		dollyEnd.set( event.clientX, event.clientY );

		dollyDelta.subVectors( dollyEnd, dollyStart );

		if ( dollyDelta.y > 0 ) {

			dollyIn( getZoomScale() );

		} else if ( dollyDelta.y < 0 ) {

			dollyOut( getZoomScale() );

		}

		dollyStart.copy( dollyEnd );

		scope.update();

	}

	function handleMouseMovePan( event ) {

		//console.log( 'handleMouseMovePan' );

		panEnd.set( event.clientX, event.clientY );

		panDelta.subVectors( panEnd, panStart );

		pan( panDelta.x, panDelta.y );

		panStart.copy( panEnd );

		scope.update();

	}

	function handleMouseUp( event ) {

		// console.log( 'handleMouseUp' );

	}

	function handleMouseWheel( event ) {

		// console.log( 'handleMouseWheel' );

		if ( event.deltaY < 0 ) {

			dollyOut( getZoomScale() );

		} else if ( event.deltaY > 0 ) {

			dollyIn( getZoomScale() );

		}

		scope.update();

	}

	function handleKeyDown( event ) {

		//console.log( 'handleKeyDown' );

		switch ( event.keyCode ) {

			case scope.keys.UP:
				pan( 0, scope.keyPanSpeed );
				scope.update();
				break;

			case scope.keys.BOTTOM:
				pan( 0, - scope.keyPanSpeed );
				scope.update();
				break;

			case scope.keys.LEFT:
				pan( scope.keyPanSpeed, 0 );
				scope.update();
				break;

			case scope.keys.RIGHT:
				pan( - scope.keyPanSpeed, 0 );
				scope.update();
				break;

		}

	}

	function handleTouchStartRotate( event ) {

		//console.log( 'handleTouchStartRotate' );

		rotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );

	}

	function handleTouchStartDolly( event ) {

		//console.log( 'handleTouchStartDolly' );

		var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;
		var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;

		var distance = Math.sqrt( dx * dx + dy * dy );

		dollyStart.set( 0, distance );

	}

	function handleTouchStartPan( event ) {

		//console.log( 'handleTouchStartPan' );

		panStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );

	}

	function handleTouchMoveRotate( event ) {

		//console.log( 'handleTouchMoveRotate' );

		rotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );
		rotateDelta.subVectors( rotateEnd, rotateStart );

		var element = scope.domElement === document ? scope.domElement.body : scope.domElement;

		// rotating across whole screen goes 360 degrees around
		rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );

		// rotating up and down along whole screen attempts to go 360, but limited to 180
		rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );

		rotateStart.copy( rotateEnd );

		scope.update();

	}

	function handleTouchMoveDolly( event ) {

		//console.log( 'handleTouchMoveDolly' );

		var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;
		var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;

		var distance = Math.sqrt( dx * dx + dy * dy );

		dollyEnd.set( 0, distance );

		dollyDelta.subVectors( dollyEnd, dollyStart );

		if ( dollyDelta.y > 0 ) {

			dollyOut( getZoomScale() );

		} else if ( dollyDelta.y < 0 ) {

			dollyIn( getZoomScale() );

		}

		dollyStart.copy( dollyEnd );

		scope.update();

	}

	function handleTouchMovePan( event ) {

		//console.log( 'handleTouchMovePan' );

		panEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );

		panDelta.subVectors( panEnd, panStart );

		pan( panDelta.x, panDelta.y );

		panStart.copy( panEnd );

		scope.update();

	}

	function handleTouchEnd( event ) {

		//console.log( 'handleTouchEnd' );

	}

	//
	// event handlers - FSM: listen for events and reset state
	//

	function onMouseDown( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();

		switch ( event.button ) {

			case scope.mouseButtons.ORBIT:

				if ( scope.enableRotate === false ) return;

				handleMouseDownRotate( event );

				state = STATE.ROTATE;

				break;

			case scope.mouseButtons.ZOOM:

				if ( scope.enableZoom === false ) return;

				handleMouseDownDolly( event );

				state = STATE.DOLLY;

				break;

			case scope.mouseButtons.PAN:

				if ( scope.enablePan === false ) return;

				handleMouseDownPan( event );

				state = STATE.PAN;

				break;

		}

		if ( state !== STATE.NONE ) {

			document.addEventListener( 'mousemove', onMouseMove, false );
			document.addEventListener( 'mouseup', onMouseUp, false );

			scope.dispatchEvent( startEvent );

		}

	}

	function onMouseMove( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();

		switch ( state ) {

			case STATE.ROTATE:

				if ( scope.enableRotate === false ) return;

				handleMouseMoveRotate( event );

				break;

			case STATE.DOLLY:

				if ( scope.enableZoom === false ) return;

				handleMouseMoveDolly( event );

				break;

			case STATE.PAN:

				if ( scope.enablePan === false ) return;

				handleMouseMovePan( event );

				break;

		}

	}

	function onMouseUp( event ) {

		if ( scope.enabled === false ) return;

		handleMouseUp( event );

		document.removeEventListener( 'mousemove', onMouseMove, false );
		document.removeEventListener( 'mouseup', onMouseUp, false );

		scope.dispatchEvent( endEvent );

		state = STATE.NONE;

	}

	function onMouseWheel( event ) {

		if ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;

		event.preventDefault();

		scope.dispatchEvent( startEvent );

		handleMouseWheel( event );

		scope.dispatchEvent( endEvent );

	}

	function onKeyDown( event ) {

		if ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;

		handleKeyDown( event );

	}

	function onTouchStart( event ) {

		if ( scope.enabled === false ) return;

		switch ( event.touches.length ) {

			case 1:	// one-fingered touch: rotate

				if ( scope.enableRotate === false ) return;

				handleTouchStartRotate( event );

				state = STATE.TOUCH_ROTATE;

				break;

			case 2:	// two-fingered touch: dolly

				if ( scope.enableZoom === false ) return;

				handleTouchStartDolly( event );

				state = STATE.TOUCH_DOLLY;

				break;

			case 3: // three-fingered touch: pan

				if ( scope.enablePan === false ) return;

				handleTouchStartPan( event );

				state = STATE.TOUCH_PAN;

				break;

			default:

				state = STATE.NONE;

		}

		if ( state !== STATE.NONE ) {

			scope.dispatchEvent( startEvent );

		}

	}

	function onTouchMove( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();

		switch ( event.touches.length ) {

			case 1: // one-fingered touch: rotate

				if ( scope.enableRotate === false ) return;
				if ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...

				handleTouchMoveRotate( event );

				break;

			case 2: // two-fingered touch: dolly

				if ( scope.enableZoom === false ) return;
				if ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...

				handleTouchMoveDolly( event );

				break;

			case 3: // three-fingered touch: pan

				if ( scope.enablePan === false ) return;
				if ( state !== STATE.TOUCH_PAN ) return; // is this needed?...

				handleTouchMovePan( event );

				break;

			default:

				state = STATE.NONE;

		}

	}

	function onTouchEnd( event ) {

		if ( scope.enabled === false ) return;

		handleTouchEnd( event );

		scope.dispatchEvent( endEvent );

		state = STATE.NONE;

	}

	function onContextMenu( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();

	}

	//

	scope.domElement.addEventListener( 'contextmenu', onContextMenu, false );

	scope.domElement.addEventListener( 'mousedown', onMouseDown, false );
	scope.domElement.addEventListener( 'wheel', onMouseWheel, false );

	scope.domElement.addEventListener( 'touchstart', onTouchStart, false );
	scope.domElement.addEventListener( 'touchend', onTouchEnd, false );
	scope.domElement.addEventListener( 'touchmove', onTouchMove, false );

	window.addEventListener( 'keydown', onKeyDown, false );

	// force an update at start

	this.update();

};

THREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );
THREE.OrbitControls.prototype.constructor = THREE.OrbitControls;

Object.defineProperties( THREE.OrbitControls.prototype, {

	center: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .center has been renamed to .target' );
			return this.target;

		}

	},

	// backward compatibility

	noZoom: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );
			return ! this.enableZoom;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );
			this.enableZoom = ! value;

		}

	},

	noRotate: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );
			return ! this.enableRotate;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );
			this.enableRotate = ! value;

		}

	},

	noPan: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );
			return ! this.enablePan;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );
			this.enablePan = ! value;

		}

	},

	noKeys: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );
			return ! this.enableKeys;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );
			this.enableKeys = ! value;

		}

	},

	staticMoving: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );
			return ! this.enableDamping;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );
			this.enableDamping = ! value;

		}

	},

	dynamicDampingFactor: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );
			return this.dampingFactor;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );
			this.dampingFactor = value;

		}

	}

} );

},{}],"framer-form/form/lib/TDSLoader":[function(require,module,exports){
/*
 * Autodesk 3DS threee.js file loader, based on lib3ds.
 *
 * Loads geometry with uv and materials basic properties with texture support.
 *
 * @author @tentone
 * @author @timknip
 * @class TDSLoader
 * @constructor
 */

'use strict';

THREE.TDSLoader = function ( manager ) {

	this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;
	this.debug = false;

	this.group = null;
	this.position = 0;

	this.materials = [];
	this.meshes = [];

};

THREE.TDSLoader.prototype = {

	constructor: THREE.TDSLoader,

	/**
	 * Load 3ds file from url.
	 *
	 * @method load
	 * @param {[type]} url URL for the file.
	 * @param {Function} onLoad onLoad callback, receives group Object3D as argument.
	 * @param {Function} onProgress onProgress callback.
	 * @param {Function} onError onError callback.
	 */
	load: function ( url, onLoad, onProgress, onError ) {

		var scope = this;

		var path = this.path !== undefined ? this.path : THREE.LoaderUtils.extractUrlBase( url );

		var loader = new THREE.FileLoader( this.manager );

		loader.setResponseType( 'arraybuffer' );

		loader.load( url, function ( data ) {

			onLoad( scope.parse( data, path ) );

		}, onProgress, onError );

	},

	/**
	 * Parse arraybuffer data and load 3ds file.
	 *
	 * @method parse
	 * @param {ArrayBuffer} arraybuffer Arraybuffer data to be loaded.
	 * @param {String} path Path for external resources.
	 * @return {Object3D} Group loaded from 3ds file.
	 */
	parse: function ( arraybuffer, path ) {

		this.group = new THREE.Group();
		this.position = 0;
		this.materials = [];
		this.meshes = [];

		this.readFile( arraybuffer, path );

		for ( var i = 0; i < this.meshes.length; i ++ ) {

			this.group.add( this.meshes[ i ] );

		}

		return this.group;

	},

	/**
	 * Decode file content to read 3ds data.
	 *
	 * @method readFile
	 * @param {ArrayBuffer} arraybuffer Arraybuffer data to be loaded.
	 */
	readFile: function ( arraybuffer, path ) {

		var data = new DataView( arraybuffer );
		var chunk = this.readChunk( data );

		if ( chunk.id === MLIBMAGIC || chunk.id === CMAGIC || chunk.id === M3DMAGIC ) {

			var next = this.nextChunk( data, chunk );

			while ( next !== 0 ) {

				if ( next === M3D_VERSION ) {

					var version = this.readDWord( data );
					this.debugMessage( '3DS file version: ' + version );

				} else if ( next === MDATA ) {

					this.resetPosition( data );
					this.readMeshData( data, path );

				} else {

					this.debugMessage( 'Unknown main chunk: ' + next.toString( 16 ) );

				}

				next = this.nextChunk( data, chunk );

			}

		}

		this.debugMessage( 'Parsed ' + this.meshes.length + ' meshes' );

	},

	/**
	 * Read mesh data chunk.
	 *
	 * @method readMeshData
	 * @param {Dataview} data Dataview in use.
	 */
	readMeshData: function ( data, path ) {

		var chunk = this.readChunk( data );
		var next = this.nextChunk( data, chunk );

		while ( next !== 0 ) {

			if ( next === MESH_VERSION ) {

				var version = + this.readDWord( data );
				this.debugMessage( 'Mesh Version: ' + version );

			} else if ( next === MASTER_SCALE ) {

				var scale = this.readFloat( data );
				this.debugMessage( 'Master scale: ' + scale );
				this.group.scale.set( scale, scale, scale );

			} else if ( next === NAMED_OBJECT ) {

				this.debugMessage( 'Named Object' );
				this.resetPosition( data );
				this.readNamedObject( data );

			} else if ( next === MAT_ENTRY ) {

				this.debugMessage( 'Material' );
				this.resetPosition( data );
				this.readMaterialEntry( data, path );

			} else {

				this.debugMessage( 'Unknown MDATA chunk: ' + next.toString( 16 ) );

			}

			next = this.nextChunk( data, chunk );

		}

	},

	/**
	 * Read named object chunk.
	 *
	 * @method readNamedObject
	 * @param {Dataview} data Dataview in use.
	 */
	readNamedObject: function ( data ) {

		var chunk = this.readChunk( data );
		var name = this.readString( data, 64 );
		chunk.cur = this.position;

		var next = this.nextChunk( data, chunk );
		while ( next !== 0 ) {

			if ( next === N_TRI_OBJECT ) {

				this.resetPosition( data );
				var mesh = this.readMesh( data );
				mesh.name = name;
				this.meshes.push( mesh );

			} else {

				this.debugMessage( 'Unknown named object chunk: ' + next.toString( 16 ) );

			}

			next = this.nextChunk( data, chunk );

		}

		this.endChunk( chunk );

	},

	/**
	 * Read material data chunk and add it to the material list.
	 *
	 * @method readMaterialEntry
	 * @param {Dataview} data Dataview in use.
	 */
	readMaterialEntry: function ( data, path ) {

		var chunk = this.readChunk( data );
		var next = this.nextChunk( data, chunk );
		var material = new THREE.MeshPhongMaterial();

		while ( next !== 0 ) {

			if ( next === MAT_NAME ) {

				material.name = this.readString( data, 64 );
				this.debugMessage( '   Name: ' + material.name );

			} else if ( next === MAT_WIRE ) {

				this.debugMessage( '   Wireframe' );
				material.wireframe = true;

			} else if ( next === MAT_WIRE_SIZE ) {

				var value = this.readByte( data );
				material.wireframeLinewidth = value;
				this.debugMessage( '   Wireframe Thickness: ' + value );

			} else if ( next === MAT_TWO_SIDE ) {

				material.side = THREE.DoubleSide;
				this.debugMessage( '   DoubleSided' );

			} else if ( next === MAT_ADDITIVE ) {

				this.debugMessage( '   Additive Blending' );
				material.blending = THREE.AdditiveBlending;

			} else if ( next === MAT_DIFFUSE ) {

				this.debugMessage( '   Diffuse Color' );
				material.color = this.readColor( data );

			} else if ( next === MAT_SPECULAR ) {

				this.debugMessage( '   Specular Color' );
				material.specular = this.readColor( data );

			} else if ( next === MAT_AMBIENT ) {

				this.debugMessage( '   Ambient color' );
				material.color = this.readColor( data );

			} else if ( next === MAT_SHININESS ) {

				var shininess = this.readWord( data );
				material.shininess = shininess;
				this.debugMessage( '   Shininess : ' + shininess );

			} else if ( next === MAT_TEXMAP ) {

				this.debugMessage( '   ColorMap' );
				this.resetPosition( data );
				material.map = this.readMap( data, path );

			} else if ( next === MAT_BUMPMAP ) {

				this.debugMessage( '   BumpMap' );
				this.resetPosition( data );
				material.bumpMap = this.readMap( data, path );

			} else if ( next === MAT_OPACMAP ) {

				this.debugMessage( '   OpacityMap' );
				this.resetPosition( data );
				material.alphaMap = this.readMap( data, path );

			} else if ( next === MAT_SPECMAP ) {

				this.debugMessage( '   SpecularMap' );
				this.resetPosition( data );
				material.specularMap = this.readMap( data, path );

			} else {

				this.debugMessage( '   Unknown material chunk: ' + next.toString( 16 ) );

			}

			next = this.nextChunk( data, chunk );

		}

		this.endChunk( chunk );

		this.materials[ material.name ] = material;

	},

	/**
	 * Read mesh data chunk.
	 *
	 * @method readMesh
	 * @param {Dataview} data Dataview in use.
	 */
	readMesh: function ( data ) {

		var chunk = this.readChunk( data );
		var next = this.nextChunk( data, chunk );

		var useBufferGeometry = false;
		var geometry = null;
		var uvs = [];

		if ( useBufferGeometry ) {

			geometry = new THREE.BufferGeometry();

		}	else {

			geometry = new THREE.Geometry();

		}

		var material = new THREE.MeshPhongMaterial();
		var mesh = new THREE.Mesh( geometry, material );
		mesh.name = 'mesh';

		while ( next !== 0 ) {

			if ( next === POINT_ARRAY ) {

				var points = this.readWord( data );

				this.debugMessage( '   Vertex: ' + points );

				//BufferGeometry

				if ( useBufferGeometry )	{

					var vertices = [];
					for ( var i = 0; i < points; i ++ )		{

						vertices.push( this.readFloat( data ) );
						vertices.push( this.readFloat( data ) );
						vertices.push( this.readFloat( data ) );

					}

					geometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );

				} else	{ //Geometry

					for ( var i = 0; i < points; i ++ )		{

						geometry.vertices.push( new THREE.Vector3( this.readFloat( data ), this.readFloat( data ), this.readFloat( data ) ) );

					}

				}

			} else if ( next === FACE_ARRAY ) {

				this.resetPosition( data );
				this.readFaceArray( data, mesh );

			} else if ( next === TEX_VERTS ) {

				var texels = this.readWord( data );

				this.debugMessage( '   UV: ' + texels );

				//BufferGeometry

				if ( useBufferGeometry )	{

					var uvs = [];
					for ( var i = 0; i < texels; i ++ )		{

						uvs.push( this.readFloat( data ) );
						uvs.push( this.readFloat( data ) );

					}
					geometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( uvs ), 2 ) );

				} else { //Geometry

					uvs = [];
					for ( var i = 0; i < texels; i ++ )		{

						uvs.push( new THREE.Vector2( this.readFloat( data ), this.readFloat( data ) ) );

					}

				}

			} else if ( next === MESH_MATRIX ) {

				this.debugMessage( '   Tranformation Matrix (TODO)' );

				var values = [];
				for ( var i = 0; i < 12; i ++ ) {

					values[ i ] = this.readFloat( data );

				}

				var matrix = new THREE.Matrix4();

				//X Line
				matrix.elements[ 0 ] = values[ 0 ];
				matrix.elements[ 1 ] = values[ 6 ];
				matrix.elements[ 2 ] = values[ 3 ];
				matrix.elements[ 3 ] = values[ 9 ];

				//Y Line
				matrix.elements[ 4 ] = values[ 2 ];
				matrix.elements[ 5 ] = values[ 8 ];
				matrix.elements[ 6 ] = values[ 5 ];
				matrix.elements[ 7 ] = values[ 11 ];

				//Z Line
				matrix.elements[ 8 ] = values[ 1 ];
				matrix.elements[ 9 ] = values[ 7 ];
				matrix.elements[ 10 ] = values[ 4 ];
				matrix.elements[ 11 ] = values[ 10 ];

				//W Line
				matrix.elements[ 12 ] = 0;
				matrix.elements[ 13 ] = 0;
				matrix.elements[ 14 ] = 0;
				matrix.elements[ 15 ] = 1;

				matrix.transpose();

				var inverse = new THREE.Matrix4();
				inverse.getInverse( matrix, true );
				geometry.applyMatrix( inverse );

				matrix.decompose( mesh.position, mesh.quaternion, mesh.scale );

			} else {

				this.debugMessage( '   Unknown mesh chunk: ' + next.toString( 16 ) );

			}

			next = this.nextChunk( data, chunk );

		}

		this.endChunk( chunk );

		if ( ! useBufferGeometry ) {

			//geometry.faceVertexUvs[0][faceIndex][vertexIndex]

			if ( uvs.length > 0 ) {

				var faceUV = [];

				for ( var i = 0; i < geometry.faces.length; i ++ ) {

					faceUV.push( [ uvs[ geometry.faces[ i ].a ], uvs[ geometry.faces[ i ].b ], uvs[ geometry.faces[ i ].c ] ] );

				}

				geometry.faceVertexUvs[ 0 ] = faceUV;

			}

			geometry.computeVertexNormals();

		}

		return mesh;

	},

	/**
	 * Read face array data chunk.
	 *
	 * @method readFaceArray
	 * @param {Dataview} data Dataview in use.
	 * @param {Mesh} mesh Mesh to be filled with the data read.
	 */
	readFaceArray: function ( data, mesh ) {

		var chunk = this.readChunk( data );
		var faces = this.readWord( data );

		this.debugMessage( '   Faces: ' + faces );

		for ( var i = 0; i < faces; ++ i ) {

			mesh.geometry.faces.push( new THREE.Face3( this.readWord( data ), this.readWord( data ), this.readWord( data ) ) );

			var visibility = this.readWord( data );

		}

		//The rest of the FACE_ARRAY chunk is subchunks

		while ( this.position < chunk.end ) {

			var chunk = this.readChunk( data );

			if ( chunk.id === MSH_MAT_GROUP ) {

				this.debugMessage( '      Material Group' );

				this.resetPosition( data );

				var group = this.readMaterialGroup( data );

				var material = this.materials[ group.name ];

				if ( material !== undefined )	{

					mesh.material = material;

					if ( material.name === '' )		{

						material.name = mesh.name;

					}

				}

			} else {

				this.debugMessage( '      Unknown face array chunk: ' + chunk.toString( 16 ) );

			}

			this.endChunk( chunk );

		}

		this.endChunk( chunk );

	},

	/**
	 * Read texture map data chunk.
	 *
	 * @method readMap
	 * @param {Dataview} data Dataview in use.
	 * @return {Texture} Texture read from this data chunk.
	 */
	readMap: function ( data, path ) {

		var chunk = this.readChunk( data );
		var next = this.nextChunk( data, chunk );
		var texture = {};

		var loader = new THREE.TextureLoader( this.manager );
		loader.setPath( path );

		while ( next !== 0 ) {

			if ( next === MAT_MAPNAME ) {

				var name = this.readString( data, 128 );
				texture = loader.load( name );

				this.debugMessage( '      File: ' + path + name );

			} else if ( next === MAT_MAP_UOFFSET ) {

				texture.offset.x = this.readFloat( data );
				this.debugMessage( '      OffsetX: ' + texture.offset.x );

			} else if ( next === MAT_MAP_VOFFSET ) {

				texture.offset.y = this.readFloat( data );
				this.debugMessage( '      OffsetY: ' + texture.offset.y );

			} else if ( next === MAT_MAP_USCALE ) {

				texture.repeat.x = this.readFloat( data );
				this.debugMessage( '      RepeatX: ' + texture.repeat.x );

			} else if ( next === MAT_MAP_VSCALE ) {

				texture.repeat.y = this.readFloat( data );
				this.debugMessage( '      RepeatY: ' + texture.repeat.y );

			} else {

				this.debugMessage( '      Unknown map chunk: ' + next.toString( 16 ) );

			}

			next = this.nextChunk( data, chunk );

		}

		this.endChunk( chunk );

		return texture;

	},

	/**
	 * Read material group data chunk.
	 *
	 * @method readMaterialGroup
	 * @param {Dataview} data Dataview in use.
	 * @return {Object} Object with name and index of the object.
	 */
	readMaterialGroup: function ( data ) {

		var chunk = this.readChunk( data );
		var name = this.readString( data, 64 );
		var numFaces = this.readWord( data );

		this.debugMessage( '         Name: ' + name );
		this.debugMessage( '         Faces: ' + numFaces );

		var index = [];
		for ( var i = 0; i < numFaces; ++ i ) {

			index.push( this.readWord( data ) );

		}

		return { name: name, index: index };

	},

	/**
	 * Read a color value.
	 *
	 * @method readColor
	 * @param {DataView} data Dataview.
	 * @return {Color} Color value read..
	 */
	readColor: function ( data ) {

		var chunk = this.readChunk( data );
		var color = new THREE.Color();

		if ( chunk.id === COLOR_24 || chunk.id === LIN_COLOR_24 ) {

			var r = this.readByte( data );
			var g = this.readByte( data );
			var b = this.readByte( data );

			color.setRGB( r / 255, g / 255, b / 255 );

			this.debugMessage( '      Color: ' + color.r + ', ' + color.g + ', ' + color.b );

		}	else if ( chunk.id === COLOR_F || chunk.id === LIN_COLOR_F ) {

			var r = this.readFloat( data );
			var g = this.readFloat( data );
			var b = this.readFloat( data );

			color.setRGB( r, g, b );

			this.debugMessage( '      Color: ' + color.r + ', ' + color.g + ', ' + color.b );

		}	else {

			this.debugMessage( '      Unknown color chunk: ' + chunk.toString( 16 ) );

		}

		this.endChunk( chunk );
		return color;

	},

	/**
	 * Read next chunk of data.
	 *
	 * @method readChunk
	 * @param {DataView} data Dataview.
	 * @return {Object} Chunk of data read.
	 */
	readChunk: function ( data ) {

		var chunk = {};

		chunk.cur = this.position;
		chunk.id = this.readWord( data );
		chunk.size = this.readDWord( data );
		chunk.end = chunk.cur + chunk.size;
		chunk.cur += 6;

		return chunk;

	},

	/**
	 * Set position to the end of the current chunk of data.
	 *
	 * @method endChunk
	 * @param {Object} chunk Data chunk.
	 */
	endChunk: function ( chunk ) {

		this.position = chunk.end;

	},

	/**
	 * Move to the next data chunk.
	 *
	 * @method nextChunk
	 * @param {DataView} data Dataview.
	 * @param {Object} chunk Data chunk.
	 */
	nextChunk: function ( data, chunk ) {

		if ( chunk.cur >= chunk.end ) {

			return 0;

		}

		this.position = chunk.cur;

		try {

			var next = this.readChunk( data );
			chunk.cur += next.size;
			return next.id;

		}	catch ( e ) {

			this.debugMessage( 'Unable to read chunk at ' + this.position );
			return 0;

		}

	},

	/**
	 * Reset dataview position.
	 *
	 * @method resetPosition
	 * @param {DataView} data Dataview.
	 */
	resetPosition: function () {

		this.position -= 6;

	},

	/**
	 * Read byte value.
	 *
	 * @method readByte
	 * @param {DataView} data Dataview to read data from.
	 * @return {Number} Data read from the dataview.
	 */
	readByte: function ( data ) {

		var v = data.getUint8( this.position, true );
		this.position += 1;
		return v;

	},

	/**
	 * Read 32 bit float value.
	 *
	 * @method readFloat
	 * @param {DataView} data Dataview to read data from.
	 * @return {Number} Data read from the dataview.
	 */
	readFloat: function ( data ) {

		try {

			var v = data.getFloat32( this.position, true );
			this.position += 4;
			return v;

		}	catch ( e ) {

			this.debugMessage( e + ' ' + this.position + ' ' + data.byteLength );

		}

	},

	/**
	 * Read 32 bit signed integer value.
	 *
	 * @method readInt
	 * @param {DataView} data Dataview to read data from.
	 * @return {Number} Data read from the dataview.
	 */
	readInt: function ( data ) {

		var v = data.getInt32( this.position, true );
		this.position += 4;
		return v;

	},

	/**
	 * Read 16 bit signed integer value.
	 *
	 * @method readShort
	 * @param {DataView} data Dataview to read data from.
	 * @return {Number} Data read from the dataview.
	 */
	readShort: function ( data ) {

		var v = data.getInt16( this.position, true );
		this.position += 2;
		return v;

	},

	/**
	 * Read 64 bit unsigned integer value.
	 *
	 * @method readDWord
	 * @param {DataView} data Dataview to read data from.
	 * @return {Number} Data read from the dataview.
	 */
	readDWord: function ( data ) {

		var v = data.getUint32( this.position, true );
		this.position += 4;
		return v;

	},

	/**
	 * Read 32 bit unsigned integer value.
	 *
	 * @method readWord
	 * @param {DataView} data Dataview to read data from.
	 * @return {Number} Data read from the dataview.
	 */
	readWord: function ( data ) {

		var v = data.getUint16( this.position, true );
		this.position += 2;
		return v;

	},

	/**
	 * Read string value.
	 *
	 * @method readString
	 * @param {DataView} data Dataview to read data from.
	 * @param {Number} maxLength Max size of the string to be read.
	 * @return {String} Data read from the dataview.
	 */
	readString: function ( data, maxLength ) {

		var s = '';

		for ( var i = 0; i < maxLength; i ++ ) {

			var c = this.readByte( data );
			if ( ! c ) {

				break;

			}

			s += String.fromCharCode( c );

		}

		return s;

	},

	/**
	 * Set resource path used to determine the file path to attached resources.
	 *
	 * @method setPath
	 * @param {String} path Path to resources.
	 * @return Self for chaining.
	 */
	setPath: function ( path ) {

		this.path = path;

		return this;

	},

	/**
	 * Print debug message to the console.
	 *
	 * Is controlled by a flag to show or hide debug messages.
	 *
	 * @method debugMessage
	 * @param {Object} message Debug message to print to the console.
	 */
	debugMessage: function ( message ) {

		if ( this.debug ) {

			console.log( message );

		}

	}
};

var NULL_CHUNK = 0x0000;
var M3DMAGIC = 0x4D4D;
var SMAGIC = 0x2D2D;
var LMAGIC = 0x2D3D;
var MLIBMAGIC = 0x3DAA;
var MATMAGIC = 0x3DFF;
var CMAGIC = 0xC23D;
var M3D_VERSION = 0x0002;
var M3D_KFVERSION = 0x0005;
var COLOR_F = 0x0010;
var COLOR_24 = 0x0011;
var LIN_COLOR_24 = 0x0012;
var LIN_COLOR_F = 0x0013;
var INT_PERCENTAGE = 0x0030;
var FLOAT_PERCENTAGE = 0x0031;
var MDATA = 0x3D3D;
var MESH_VERSION = 0x3D3E;
var MASTER_SCALE = 0x0100;
var LO_SHADOW_BIAS = 0x1400;
var HI_SHADOW_BIAS = 0x1410;
var SHADOW_MAP_SIZE = 0x1420;
var SHADOW_SAMPLES = 0x1430;
var SHADOW_RANGE = 0x1440;
var SHADOW_FILTER = 0x1450;
var RAY_BIAS = 0x1460;
var O_CONSTS = 0x1500;
var AMBIENT_LIGHT = 0x2100;
var BIT_MAP = 0x1100;
var SOLID_BGND = 0x1200;
var V_GRADIENT = 0x1300;
var USE_BIT_MAP = 0x1101;
var USE_SOLID_BGND = 0x1201;
var USE_V_GRADIENT = 0x1301;
var FOG = 0x2200;
var FOG_BGND = 0x2210;
var LAYER_FOG = 0x2302;
var DISTANCE_CUE = 0x2300;
var DCUE_BGND = 0x2310;
var USE_FOG = 0x2201;
var USE_LAYER_FOG = 0x2303;
var USE_DISTANCE_CUE = 0x2301;
var MAT_ENTRY = 0xAFFF;
var MAT_NAME = 0xA000;
var MAT_AMBIENT = 0xA010;
var MAT_DIFFUSE = 0xA020;
var MAT_SPECULAR = 0xA030;
var MAT_SHININESS = 0xA040;
var MAT_SHIN2PCT = 0xA041;
var MAT_TRANSPARENCY = 0xA050;
var MAT_XPFALL = 0xA052;
var MAT_USE_XPFALL = 0xA240;
var MAT_REFBLUR = 0xA053;
var MAT_SHADING = 0xA100;
var MAT_USE_REFBLUR = 0xA250;
var MAT_SELF_ILLUM = 0xA084;
var MAT_TWO_SIDE = 0xA081;
var MAT_DECAL = 0xA082;
var MAT_ADDITIVE = 0xA083;
var MAT_WIRE = 0xA085;
var MAT_FACEMAP = 0xA088;
var MAT_TRANSFALLOFF_IN = 0xA08A;
var MAT_PHONGSOFT = 0xA08C;
var MAT_WIREABS = 0xA08E;
var MAT_WIRE_SIZE = 0xA087;
var MAT_TEXMAP = 0xA200;
var MAT_SXP_TEXT_DATA = 0xA320;
var MAT_TEXMASK = 0xA33E;
var MAT_SXP_TEXTMASK_DATA = 0xA32A;
var MAT_TEX2MAP = 0xA33A;
var MAT_SXP_TEXT2_DATA = 0xA321;
var MAT_TEX2MASK = 0xA340;
var MAT_SXP_TEXT2MASK_DATA = 0xA32C;
var MAT_OPACMAP = 0xA210;
var MAT_SXP_OPAC_DATA = 0xA322;
var MAT_OPACMASK = 0xA342;
var MAT_SXP_OPACMASK_DATA = 0xA32E;
var MAT_BUMPMAP = 0xA230;
var MAT_SXP_BUMP_DATA = 0xA324;
var MAT_BUMPMASK = 0xA344;
var MAT_SXP_BUMPMASK_DATA = 0xA330;
var MAT_SPECMAP = 0xA204;
var MAT_SXP_SPEC_DATA = 0xA325;
var MAT_SPECMASK = 0xA348;
var MAT_SXP_SPECMASK_DATA = 0xA332;
var MAT_SHINMAP = 0xA33C;
var MAT_SXP_SHIN_DATA = 0xA326;
var MAT_SHINMASK = 0xA346;
var MAT_SXP_SHINMASK_DATA = 0xA334;
var MAT_SELFIMAP = 0xA33D;
var MAT_SXP_SELFI_DATA = 0xA328;
var MAT_SELFIMASK = 0xA34A;
var MAT_SXP_SELFIMASK_DATA = 0xA336;
var MAT_REFLMAP = 0xA220;
var MAT_REFLMASK = 0xA34C;
var MAT_SXP_REFLMASK_DATA = 0xA338;
var MAT_ACUBIC = 0xA310;
var MAT_MAPNAME = 0xA300;
var MAT_MAP_TILING = 0xA351;
var MAT_MAP_TEXBLUR = 0xA353;
var MAT_MAP_USCALE = 0xA354;
var MAT_MAP_VSCALE = 0xA356;
var MAT_MAP_UOFFSET = 0xA358;
var MAT_MAP_VOFFSET = 0xA35A;
var MAT_MAP_ANG = 0xA35C;
var MAT_MAP_COL1 = 0xA360;
var MAT_MAP_COL2 = 0xA362;
var MAT_MAP_RCOL = 0xA364;
var MAT_MAP_GCOL = 0xA366;
var MAT_MAP_BCOL = 0xA368;
var NAMED_OBJECT = 0x4000;
var N_DIRECT_LIGHT = 0x4600;
var DL_OFF = 0x4620;
var DL_OUTER_RANGE = 0x465A;
var DL_INNER_RANGE = 0x4659;
var DL_MULTIPLIER = 0x465B;
var DL_EXCLUDE = 0x4654;
var DL_ATTENUATE = 0x4625;
var DL_SPOTLIGHT = 0x4610;
var DL_SPOT_ROLL = 0x4656;
var DL_SHADOWED = 0x4630;
var DL_LOCAL_SHADOW2 = 0x4641;
var DL_SEE_CONE = 0x4650;
var DL_SPOT_RECTANGULAR = 0x4651;
var DL_SPOT_ASPECT = 0x4657;
var DL_SPOT_PROJECTOR = 0x4653;
var DL_SPOT_OVERSHOOT = 0x4652;
var DL_RAY_BIAS = 0x4658;
var DL_RAYSHAD = 0x4627;
var N_CAMERA = 0x4700;
var CAM_SEE_CONE = 0x4710;
var CAM_RANGES = 0x4720;
var OBJ_HIDDEN = 0x4010;
var OBJ_VIS_LOFTER = 0x4011;
var OBJ_DOESNT_CAST = 0x4012;
var OBJ_DONT_RECVSHADOW = 0x4017;
var OBJ_MATTE = 0x4013;
var OBJ_FAST = 0x4014;
var OBJ_PROCEDURAL = 0x4015;
var OBJ_FROZEN = 0x4016;
var N_TRI_OBJECT = 0x4100;
var POINT_ARRAY = 0x4110;
var POINT_FLAG_ARRAY = 0x4111;
var FACE_ARRAY = 0x4120;
var MSH_MAT_GROUP = 0x4130;
var SMOOTH_GROUP = 0x4150;
var MSH_BOXMAP = 0x4190;
var TEX_VERTS = 0x4140;
var MESH_MATRIX = 0x4160;
var MESH_COLOR = 0x4165;
var MESH_TEXTURE_INFO = 0x4170;
var KFDATA = 0xB000;
var KFHDR = 0xB00A;
var KFSEG = 0xB008;
var KFCURTIME = 0xB009;
var AMBIENT_NODE_TAG = 0xB001;
var OBJECT_NODE_TAG = 0xB002;
var CAMERA_NODE_TAG = 0xB003;
var TARGET_NODE_TAG = 0xB004;
var LIGHT_NODE_TAG = 0xB005;
var L_TARGET_NODE_TAG = 0xB006;
var SPOTLIGHT_NODE_TAG = 0xB007;
var NODE_ID = 0xB030;
var NODE_HDR = 0xB010;
var PIVOT = 0xB013;
var INSTANCE_NAME = 0xB011;
var MORPH_SMOOTH = 0xB015;
var BOUNDBOX = 0xB014;
var POS_TRACK_TAG = 0xB020;
var COL_TRACK_TAG = 0xB025;
var ROT_TRACK_TAG = 0xB021;
var SCL_TRACK_TAG = 0xB022;
var MORPH_TRACK_TAG = 0xB026;
var FOV_TRACK_TAG = 0xB023;
var ROLL_TRACK_TAG = 0xB024;
var HOT_TRACK_TAG = 0xB027;
var FALL_TRACK_TAG = 0xB028;
var HIDE_TRACK_TAG = 0xB029;
var POLY_2D = 0x5000;
var SHAPE_OK = 0x5010;
var SHAPE_NOT_OK = 0x5011;
var SHAPE_HOOK = 0x5020;
var PATH_3D = 0x6000;
var PATH_MATRIX = 0x6005;
var SHAPE_2D = 0x6010;
var M_SCALE = 0x6020;
var M_TWIST = 0x6030;
var M_TEETER = 0x6040;
var M_FIT = 0x6050;
var M_BEVEL = 0x6060;
var XZ_CURVE = 0x6070;
var YZ_CURVE = 0x6080;
var INTERPCT = 0x6090;
var DEFORM_LIMIT = 0x60A0;
var USE_CONTOUR = 0x6100;
var USE_TWEEN = 0x6110;
var USE_SCALE = 0x6120;
var USE_TWIST = 0x6130;
var USE_TEETER = 0x6140;
var USE_FIT = 0x6150;
var USE_BEVEL = 0x6160;
var DEFAULT_VIEW = 0x3000;
var VIEW_TOP = 0x3010;
var VIEW_BOTTOM = 0x3020;
var VIEW_LEFT = 0x3030;
var VIEW_RIGHT = 0x3040;
var VIEW_FRONT = 0x3050;
var VIEW_BACK = 0x3060;
var VIEW_USER = 0x3070;
var VIEW_CAMERA = 0x3080;
var VIEW_WINDOW = 0x3090;
var VIEWPORT_LAYOUT_OLD = 0x7000;
var VIEWPORT_DATA_OLD = 0x7010;
var VIEWPORT_LAYOUT = 0x7001;
var VIEWPORT_DATA = 0x7011;
var VIEWPORT_DATA_3 = 0x7012;
var VIEWPORT_SIZE = 0x7020;
var NETWORK_VIEW = 0x7030;
},{}],"framer-form/form/lib/inflate-min":[function(require,module,exports){
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function() {'use strict';var l=void 0,aa=this;function r(c,d){var a=c.split("."),b=aa;!(a[0]in b)&&b.execScript&&b.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==l?b[e]=d:b=b[e]?b[e]:b[e]={}};var t="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array&&"undefined"!==typeof DataView;function v(c){var d=c.length,a=0,b=Number.POSITIVE_INFINITY,e,f,g,h,k,m,n,p,s,x;for(p=0;p<d;++p)c[p]>a&&(a=c[p]),c[p]<b&&(b=c[p]);e=1<<a;f=new (t?Uint32Array:Array)(e);g=1;h=0;for(k=2;g<=a;){for(p=0;p<d;++p)if(c[p]===g){m=0;n=h;for(s=0;s<g;++s)m=m<<1|n&1,n>>=1;x=g<<16|p;for(s=m;s<e;s+=k)f[s]=x;++h}++g;h<<=1;k<<=1}return[f,a,b]};function w(c,d){this.g=[];this.h=32768;this.d=this.f=this.a=this.l=0;this.input=t?new Uint8Array(c):c;this.m=!1;this.i=y;this.r=!1;if(d||!(d={}))d.index&&(this.a=d.index),d.bufferSize&&(this.h=d.bufferSize),d.bufferType&&(this.i=d.bufferType),d.resize&&(this.r=d.resize);switch(this.i){case A:this.b=32768;this.c=new (t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0;this.c=new (t?Uint8Array:Array)(this.h);this.e=this.z;this.n=this.v;this.j=this.w;break;default:throw Error("invalid inflate mode");
}}var A=0,y=1,B={t:A,s:y};
w.prototype.k=function(){for(;!this.m;){var c=C(this,3);c&1&&(this.m=!0);c>>>=1;switch(c){case 0:var d=this.input,a=this.a,b=this.c,e=this.b,f=d.length,g=l,h=l,k=b.length,m=l;this.d=this.f=0;if(a+1>=f)throw Error("invalid uncompressed block header: LEN");g=d[a++]|d[a++]<<8;if(a+1>=f)throw Error("invalid uncompressed block header: NLEN");h=d[a++]|d[a++]<<8;if(g===~h)throw Error("invalid uncompressed block header: length verify");if(a+g>d.length)throw Error("input buffer is broken");switch(this.i){case A:for(;e+
g>b.length;){m=k-e;g-=m;if(t)b.set(d.subarray(a,a+m),e),e+=m,a+=m;else for(;m--;)b[e++]=d[a++];this.b=e;b=this.e();e=this.b}break;case y:for(;e+g>b.length;)b=this.e({p:2});break;default:throw Error("invalid inflate mode");}if(t)b.set(d.subarray(a,a+g),e),e+=g,a+=g;else for(;g--;)b[e++]=d[a++];this.a=a;this.b=e;this.c=b;break;case 1:this.j(ba,ca);break;case 2:for(var n=C(this,5)+257,p=C(this,5)+1,s=C(this,4)+4,x=new (t?Uint8Array:Array)(D.length),S=l,T=l,U=l,u=l,M=l,F=l,z=l,q=l,V=l,q=0;q<s;++q)x[D[q]]=
C(this,3);if(!t){q=s;for(s=x.length;q<s;++q)x[D[q]]=0}S=v(x);u=new (t?Uint8Array:Array)(n+p);q=0;for(V=n+p;q<V;)switch(M=E(this,S),M){case 16:for(z=3+C(this,2);z--;)u[q++]=F;break;case 17:for(z=3+C(this,3);z--;)u[q++]=0;F=0;break;case 18:for(z=11+C(this,7);z--;)u[q++]=0;F=0;break;default:F=u[q++]=M}T=t?v(u.subarray(0,n)):v(u.slice(0,n));U=t?v(u.subarray(n)):v(u.slice(n));this.j(T,U);break;default:throw Error("unknown BTYPE: "+c);}}return this.n()};
var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H):H,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,
13,13],N=t?new Uint8Array(ea):ea,O=new (t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q=new (t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q.length;R<ga;++R)Q[R]=5;var ca=v(Q);function C(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h;b<d;){if(f>=g)throw Error("input buffer is broken");a|=e[f++]<<b;b+=8}h=a&(1<<d)-1;c.f=a>>>d;c.d=b-d;c.a=f;return h}
function E(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h=d[0],k=d[1],m,n;b<k&&!(f>=g);)a|=e[f++]<<b,b+=8;m=h[a&(1<<k)-1];n=m>>>16;if(n>b)throw Error("invalid code length: "+n);c.f=a>>n;c.d=b-n;c.a=f;return m&65535}
w.prototype.j=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length-258,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(this.b=b,a=this.e(),b=this.b),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b>=e&&(this.b=b,a=this.e(),b=this.b);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};
w.prototype.w=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(a=this.e(),e=a.length),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b+k>e&&(a=this.e(),e=a.length);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};
w.prototype.e=function(){var c=new (t?Uint8Array:Array)(this.b-32768),d=this.b-32768,a,b,e=this.c;if(t)c.set(e.subarray(32768,c.length));else{a=0;for(b=c.length;a<b;++a)c[a]=e[a+32768]}this.g.push(c);this.l+=c.length;if(t)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];this.b=32768;return e};
w.prototype.z=function(c){var d,a=this.input.length/this.a+1|0,b,e,f,g=this.input,h=this.c;c&&("number"===typeof c.p&&(a=c.p),"number"===typeof c.u&&(a+=c.u));2>a?(b=(g.length-this.a)/this.o[2],f=258*(b/2)|0,e=f<h.length?h.length+f:h.length<<1):e=h.length*a;t?(d=new Uint8Array(e),d.set(h)):d=h;return this.c=d};
w.prototype.n=function(){var c=0,d=this.c,a=this.g,b,e=new (t?Uint8Array:Array)(this.l+(this.b-32768)),f,g,h,k;if(0===a.length)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);f=0;for(g=a.length;f<g;++f){b=a[f];h=0;for(k=b.length;h<k;++h)e[c++]=b[h]}f=32768;for(g=this.b;f<g;++f)e[c++]=d[f];this.g=[];return this.buffer=e};
w.prototype.v=function(){var c,d=this.b;t?this.r?(c=new Uint8Array(d),c.set(this.c.subarray(0,d))):c=this.c.subarray(0,d):(this.c.length>d&&(this.c.length=d),c=this.c);return this.buffer=c};function W(c,d){var a,b;this.input=c;this.a=0;if(d||!(d={}))d.index&&(this.a=d.index),d.verify&&(this.A=d.verify);a=c[this.a++];b=c[this.a++];switch(a&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method");}if(0!==((a<<8)+b)%31)throw Error("invalid fcheck flag:"+((a<<8)+b)%31);if(b&32)throw Error("fdict flag is not supported");this.q=new w(c,{index:this.a,bufferSize:d.bufferSize,bufferType:d.bufferType,resize:d.resize})}
W.prototype.k=function(){var c=this.input,d,a;d=this.q.k();this.a=this.q.a;if(this.A){a=(c[this.a++]<<24|c[this.a++]<<16|c[this.a++]<<8|c[this.a++])>>>0;var b=d;if("string"===typeof b){var e=b.split(""),f,g;f=0;for(g=e.length;f<g;f++)e[f]=(e[f].charCodeAt(0)&255)>>>0;b=e}for(var h=1,k=0,m=b.length,n,p=0;0<m;){n=1024<m?1024:m;m-=n;do h+=b[p++],k+=h;while(--n);h%=65521;k%=65521}if(a!==(k<<16|h)>>>0)throw Error("invalid adler-32 checksum");}return d};var ha=8;r("Zlib.Inflate",W);r("Zlib.Inflate.prototype.decompress",W.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r("Zlib.Inflate.BufferType."+Z,X[Z]);}).call(this);
},{}],"framer-form/form/lib/three-min":[function(require,module,exports){
// threejs.org/license
(function(l,za){"object"===typeof exports&&"undefined"!==typeof module?za(exports):"function"===typeof define&&define.amd?define(["exports"],za):za(l.THREE={})})(this,function(l){function za(){}function D(a,b){this.x=a||0;this.y=b||0}function O(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function ha(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function p(a,
    b,c){this.x=a||0;this.y=b||0;this.z=c||0}function ma(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function U(a,b,c,d,e,f,g,h,k,m){Object.defineProperty(this,"id",{value:Af++});this.uuid=Q.generateUUID();this.name="";this.image=void 0!==a?a:U.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:U.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=void 0!==d?d:1001;this.magFilter=void 0!==
    e?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==k?k:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new D(0,0);this.repeat=new D(1,1);this.center=new D(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new ma;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==m?m:3E3;this.version=0;this.onUpdate=null}function aa(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function kb(a,
    b,c){this.uuid=Q.generateUUID();this.width=a;this.height=b;this.scissor=new aa(0,0,a,b);this.scissorTest=!1;this.viewport=new aa(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=1006);this.texture=new U(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}function Jb(a,b,c){kb.call(this,
    a,b,c);this.activeMipMapLevel=this.activeCubeFace=0}function lb(a,b,c,d,e,f,g,h,k,m,q,n){U.call(this,null,f,g,h,k,m,d,e,q,n);this.image={data:a,width:b,height:c};this.magFilter=void 0!==k?k:1003;this.minFilter=void 0!==m?m:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function db(a,b,c,d,e,f,g,h,k,m){a=void 0!==a?a:[];U.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,k,m);this.flipY=!1}function Kb(a,b,c){var d=a[0];if(0>=d||0<d)return a;var e=b*c,f=Ie[e];void 0===f&&(f=new Float32Array(e),
    Ie[e]=f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return f}function Je(a,b){var c=Ke[b];void 0===c&&(c=new Int32Array(b),Ke[b]=c);for(var d=0;d!==b;++d)c[d]=a.allocTextureUnit();return c}function Bf(a,b){a.uniform1f(this.addr,b)}function Cf(a,b){a.uniform1i(this.addr,b)}function Df(a,b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)}function Ef(a,b){void 0!==b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,
    b)}function Ff(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)}function Gf(a,b){a.uniformMatrix2fv(this.addr,!1,b.elements||b)}function Hf(a,b){void 0===b.elements?a.uniformMatrix3fv(this.addr,!1,b):(Le.set(b.elements),a.uniformMatrix3fv(this.addr,!1,Le))}function If(a,b){void 0===b.elements?a.uniformMatrix4fv(this.addr,!1,b):(Me.set(b.elements),a.uniformMatrix4fv(this.addr,!1,Me))}function Jf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTexture2D(b||
    Ne,d)}function Kf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTextureCube(b||Oe,d)}function Pe(a,b){a.uniform2iv(this.addr,b)}function Qe(a,b){a.uniform3iv(this.addr,b)}function Re(a,b){a.uniform4iv(this.addr,b)}function Lf(a){switch(a){case 5126:return Bf;case 35664:return Df;case 35665:return Ef;case 35666:return Ff;case 35674:return Gf;case 35675:return Hf;case 35676:return If;case 35678:case 36198:return Jf;case 35680:return Kf;case 5124:case 35670:return Cf;case 35667:case 35671:return Pe;
    case 35668:case 35672:return Qe;case 35669:case 35673:return Re}}function Mf(a,b){a.uniform1fv(this.addr,b)}function Nf(a,b){a.uniform1iv(this.addr,b)}function Of(a,b){a.uniform2fv(this.addr,Kb(b,this.size,2))}function Pf(a,b){a.uniform3fv(this.addr,Kb(b,this.size,3))}function Qf(a,b){a.uniform4fv(this.addr,Kb(b,this.size,4))}function Rf(a,b){a.uniformMatrix2fv(this.addr,!1,Kb(b,this.size,4))}function Sf(a,b){a.uniformMatrix3fv(this.addr,!1,Kb(b,this.size,9))}function Tf(a,b){a.uniformMatrix4fv(this.addr,
    !1,Kb(b,this.size,16))}function Uf(a,b,c){var d=b.length,e=Je(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTexture2D(b[a]||Ne,e[a])}function Vf(a,b,c){var d=b.length,e=Je(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTextureCube(b[a]||Oe,e[a])}function Wf(a){switch(a){case 5126:return Mf;case 35664:return Of;case 35665:return Pf;case 35666:return Qf;case 35674:return Rf;case 35675:return Sf;case 35676:return Tf;case 35678:return Uf;case 35680:return Vf;case 5124:case 35670:return Nf;
    case 35667:case 35671:return Pe;case 35668:case 35672:return Qe;case 35669:case 35673:return Re}}function Xf(a,b,c){this.id=a;this.addr=c;this.setValue=Lf(b.type)}function Yf(a,b,c){this.id=a;this.addr=c;this.size=b.size;this.setValue=Wf(b.type)}function Se(a){this.id=a;this.seq=[];this.map={}}function mb(a,b,c){this.seq=[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d<c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,k=
    h.length;for(Vd.lastIndex=0;;){var m=Vd.exec(h),q=Vd.lastIndex,n=m[1],u=m[3];"]"===m[2]&&(n|=0);if(void 0===u||"["===u&&q+2===k){h=g;e=void 0===u?new Xf(n,e,f):new Yf(n,e,f);h.seq.push(e);h.map[e.id]=e;break}else u=g.map[n],void 0===u&&(u=new Se(n),n=g,g=u,n.seq.push(g),n.map[g.id]=g),g=u}}}function H(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function od(a,b){this.min=void 0!==a?a:new D(Infinity,Infinity);this.max=void 0!==b?b:new D(-Infinity,-Infinity)}function Zf(a,b,c,
    d,e){var f,g,h,k,m,q,n,u,r,t,l,w,z,y,I,A;this.render=function(a,v,Da,na){if(0!==a.length){v=new p;var J=na.w/na.z,Ha=.5*na.z,pd=.5*na.w,la=16/na.w,S=new D(la*J,la),va=new p(1,1,0),N=new D(1,1),B=new od;B.min.set(na.x,na.y);B.max.set(na.x+(na.z-16),na.y+(na.w-16));if(void 0===y){var la=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),x=new Uint16Array([0,1,2,0,2,3]);l=b.createBuffer();w=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,l);b.bufferData(b.ARRAY_BUFFER,la,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
    w);b.bufferData(b.ELEMENT_ARRAY_BUFFER,x,b.STATIC_DRAW);I=b.createTexture();A=b.createTexture();c.bindTexture(b.TEXTURE_2D,I);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);c.bindTexture(b.TEXTURE_2D,A);b.texImage2D(b.TEXTURE_2D,0,
    b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);var la=z={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\n\tvUV = uv;\n\tvec2 pos = position;\n\tif ( renderType == 2 ) {\n\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\n\t\tvVisibility =        visibility.r / 9.0;\n\t\tvVisibility *= 1.0 - visibility.g / 9.0;\n\t\tvVisibility *=       visibility.b / 9.0;\n\t\tvVisibility *= 1.0 - visibility.a / 9.0;\n\t\tpos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\n\t\tpos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n\t}\n\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
    fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\n\tif ( renderType == 0 ) {\n\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n\t} else if ( renderType == 1 ) {\n\t\tgl_FragColor = texture2D( map, vUV );\n\t} else {\n\t\tvec4 texture = texture2D( map, vUV );\n\t\ttexture.a *= opacity * vVisibility;\n\t\tgl_FragColor = texture;\n\t\tgl_FragColor.rgb *= color;\n\t}\n}"},x=b.createProgram(),
    E=b.createShader(b.FRAGMENT_SHADER),V=b.createShader(b.VERTEX_SHADER),H="precision "+e.precision+" float;\n";b.shaderSource(E,H+la.fragmentShader);b.shaderSource(V,H+la.vertexShader);b.compileShader(E);b.compileShader(V);b.attachShader(x,E);b.attachShader(x,V);b.linkProgram(x);y=x;r=b.getAttribLocation(y,"position");t=b.getAttribLocation(y,"uv");f=b.getUniformLocation(y,"renderType");g=b.getUniformLocation(y,"map");h=b.getUniformLocation(y,"occlusionMap");k=b.getUniformLocation(y,"opacity");m=b.getUniformLocation(y,
    "color");q=b.getUniformLocation(y,"scale");n=b.getUniformLocation(y,"rotation");u=b.getUniformLocation(y,"screenPosition")}c.useProgram(y);c.initAttributes();c.enableAttribute(r);c.enableAttribute(t);c.disableUnusedAttributes();b.uniform1i(h,0);b.uniform1i(g,1);b.bindBuffer(b.ARRAY_BUFFER,l);b.vertexAttribPointer(r,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(t,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,w);c.disable(b.CULL_FACE);c.buffers.depth.setMask(!1);x=0;for(E=a.length;x<E;x++)if(la=
    16/na.w,S.set(la*J,la),V=a[x],v.set(V.matrixWorld.elements[12],V.matrixWorld.elements[13],V.matrixWorld.elements[14]),v.applyMatrix4(Da.matrixWorldInverse),v.applyMatrix4(Da.projectionMatrix),va.copy(v),N.x=na.x+va.x*Ha+Ha-8,N.y=na.y+va.y*pd+pd-8,!0===B.containsPoint(N)){c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,null);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,N.x,N.y,16,16,0);b.uniform1i(f,0);b.uniform2f(q,S.x,S.y);b.uniform3f(u,va.x,
    va.y,va.z);c.disable(b.BLEND);c.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,A);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,N.x,N.y,16,16,0);b.uniform1i(f,1);c.disable(b.DEPTH_TEST);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);V.positionScreen.copy(va);V.customUpdateCallback?V.customUpdateCallback(V):V.updateLensFlares();b.uniform1i(f,2);c.enable(b.BLEND);for(var H=
    0,K=V.lensFlares.length;H<K;H++){var C=V.lensFlares[H];.001<C.opacity&&.001<C.scale&&(va.x=C.x,va.y=C.y,va.z=C.z,la=C.size*C.scale/na.w,S.x=la*J,S.y=la,b.uniform3f(u,va.x,va.y,va.z),b.uniform2f(q,S.x,S.y),b.uniform1f(n,C.rotation),b.uniform1f(k,C.opacity),b.uniform3f(m,C.color.r,C.color.g,C.color.b),c.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),d.setTexture2D(C.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}}c.enable(b.CULL_FACE);c.enable(b.DEPTH_TEST);c.buffers.depth.setMask(!0);
    c.reset()}}}function tc(a,b,c,d,e,f,g,h,k){U.call(this,a,b,c,d,e,f,g,h,k);this.needsUpdate=!0}function $f(a,b,c,d,e){var f,g,h,k,m,q,n,u,r,t,l,w,z,y,I,A,J;function Ha(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var Da,na,oa,Te,pd=new p,la=new ha,S=new p;this.render=function(v,p,D){if(0!==v.length){if(void 0===oa){var x=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),N=new Uint16Array([0,1,2,0,2,3]);Da=b.createBuffer();na=b.createBuffer();
    b.bindBuffer(b.ARRAY_BUFFER,Da);b.bufferData(b.ARRAY_BUFFER,x,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,na);b.bufferData(b.ELEMENT_ARRAY_BUFFER,N,b.STATIC_DRAW);x=b.createProgram();N=b.createShader(b.VERTEX_SHADER);var B=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(N,["precision "+e.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV = uvOffset + uv * uvScale;\n\tvec2 alignedPosition = position * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\tfogDepth = - mvPosition.z;\n}"].join("\n"));
    b.shaderSource(B,["precision "+e.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture = texture2D( map, vUV );\n\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a < alphaTest ) discard;\n\tif ( fogType > 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n"));
    b.compileShader(N);b.compileShader(B);b.attachShader(x,N);b.attachShader(x,B);b.linkProgram(x);oa=x;A=b.getAttribLocation(oa,"position");J=b.getAttribLocation(oa,"uv");f=b.getUniformLocation(oa,"uvOffset");g=b.getUniformLocation(oa,"uvScale");h=b.getUniformLocation(oa,"rotation");k=b.getUniformLocation(oa,"scale");m=b.getUniformLocation(oa,"color");q=b.getUniformLocation(oa,"map");n=b.getUniformLocation(oa,"opacity");u=b.getUniformLocation(oa,"modelViewMatrix");r=b.getUniformLocation(oa,"projectionMatrix");
    t=b.getUniformLocation(oa,"fogType");l=b.getUniformLocation(oa,"fogDensity");w=b.getUniformLocation(oa,"fogNear");z=b.getUniformLocation(oa,"fogFar");y=b.getUniformLocation(oa,"fogColor");b.getUniformLocation(oa,"fogDepth");I=b.getUniformLocation(oa,"alphaTest");x=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");x.width=8;x.height=8;N=x.getContext("2d");N.fillStyle="white";N.fillRect(0,0,8,8);Te=new tc(x)}c.useProgram(oa);c.initAttributes();c.enableAttribute(A);c.enableAttribute(J);
    c.disableUnusedAttributes();c.disable(b.CULL_FACE);c.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,Da);b.vertexAttribPointer(A,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(J,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,na);b.uniformMatrix4fv(r,!1,D.projectionMatrix.elements);c.activeTexture(b.TEXTURE0);b.uniform1i(q,0);N=x=0;(B=p.fog)?(b.uniform3f(y,B.color.r,B.color.g,B.color.b),B.isFog?(b.uniform1f(w,B.near),b.uniform1f(z,B.far),b.uniform1i(t,1),N=x=1):B.isFogExp2&&(b.uniform1f(l,B.density),
    b.uniform1i(t,2),N=x=2)):(b.uniform1i(t,0),N=x=0);for(var C=0,E=v.length;C<E;C++)B=v[C],B.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,B.matrixWorld),B.z=-B.modelViewMatrix.elements[14];v.sort(Ha);for(var va=[],C=0,E=v.length;C<E;C++){B=v[C];var G=B.material;if(!1!==G.visible){B.onBeforeRender(a,p,D,void 0,G,void 0);b.uniform1f(I,G.alphaTest);b.uniformMatrix4fv(u,!1,B.modelViewMatrix.elements);B.matrixWorld.decompose(pd,la,S);va[0]=S.x;va[1]=S.y;var qd=0;p.fog&&G.fog&&(qd=N);x!==qd&&(b.uniform1i(t,
    qd),x=qd);null!==G.map?(b.uniform2f(f,G.map.offset.x,G.map.offset.y),b.uniform2f(g,G.map.repeat.x,G.map.repeat.y)):(b.uniform2f(f,0,0),b.uniform2f(g,1,1));b.uniform1f(n,G.opacity);b.uniform3f(m,G.color.r,G.color.g,G.color.b);b.uniform1f(h,G.rotation);b.uniform2fv(k,va);c.setBlending(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha);c.buffers.depth.setTest(G.depthTest);c.buffers.depth.setMask(G.depthWrite);c.buffers.color.setMask(G.colorWrite);
    d.setTexture2D(G.map||Te,0);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);B.onAfterRender(a,p,D,void 0,G,void 0)}}c.enable(b.CULL_FACE);c.reset()}}}function P(){Object.defineProperty(this,"id",{value:ag++});this.uuid=Q.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=
    null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function eb(a){P.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=
    this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function fb(a){P.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new p;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function Xa(a,b){this.min=void 0!==
    a?a:new p(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new p(-Infinity,-Infinity,-Infinity)}function Ia(a,b){this.center=void 0!==a?a:new p;this.radius=void 0!==b?b:0}function Ea(a,b){this.normal=void 0!==a?a:new p(1,0,0);this.constant=void 0!==b?b:0}function rd(a,b,c,d,e,f){this.planes=[void 0!==a?a:new Ea,void 0!==b?b:new Ea,void 0!==c?c:new Ea,void 0!==d?d:new Ea,void 0!==e?e:new Ea,void 0!==f?f:new Ea]}function Ue(a,b,c){function d(b,c,d,e,f,g){var h=b.geometry;var k=n;var m=b.customDepthMaterial;
    d&&(k=u,m=b.customDistanceMaterial);m?k=m:(m=!1,c.morphTargets&&(h&&h.isBufferGeometry?m=h.morphAttributes&&h.morphAttributes.position&&0<h.morphAttributes.position.length:h&&h.isGeometry&&(m=h.morphTargets&&0<h.morphTargets.length)),b.isSkinnedMesh&&!1===c.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",b),b=b.isSkinnedMesh&&c.skinning,h=0,m&&(h|=1),b&&(h|=2),k=k[h]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(h=
    k.uuid,m=c.uuid,b=r[h],void 0===b&&(b={},r[h]=b),h=b[m],void 0===h&&(h=k.clone(),b[m]=h),k=h);k.visible=c.visible;k.wireframe=c.wireframe;m=c.side;A.renderSingleSided&&2==m&&(m=0);A.renderReverseSided&&(0===m?m=1:1===m&&(m=0));k.side=m;k.clipShadows=c.clipShadows;k.clippingPlanes=c.clippingPlanes;k.clipIntersection=c.clipIntersection;k.wireframeLinewidth=c.wireframeLinewidth;k.linewidth=c.linewidth;d&&k.isMeshDistanceMaterial&&(k.referencePosition.copy(e),k.nearDistance=f,k.farDistance=g);return k}
    function e(c,h,g,k){var m;if(!1!==c.visible){if(c.layers.test(h.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,c.matrixWorld);var n=b.update(c),u=c.material;if(Array.isArray(u))for(var r=n.groups,t=0,l=r.length;t<l;t++){var I=r[t];(m=u[I.materialIndex])&&m.visible&&(m=d(c,m,k,q,g.near,g.far),a.renderBufferDirect(g,null,n,m,c,I))}else u.visible&&(m=d(c,u,k,q,g.near,g.far),a.renderBufferDirect(g,
    null,n,m,c,null))}c=c.children;n=0;for(u=c.length;n<u;n++)e(c[n],h,g,k)}}var f=new rd,g=new O,h=new D,k=new D(c,c),m=new p,q=new p,n=Array(4),u=Array(4),r={},t=[new p(1,0,0),new p(-1,0,0),new p(0,0,1),new p(0,0,-1),new p(0,1,0),new p(0,-1,0)],l=[new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,0,1),new p(0,0,-1)],w=[new aa,new aa,new aa,new aa,new aa,new aa];for(c=0;4!==c;++c){var z=0!==(c&1),y=0!==(c&2),I=new eb({depthPacking:3201,morphTargets:z,skinning:y});n[c]=I;z=new fb({morphTargets:z,
    skinning:y});u[c]=z}var A=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,c,d){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==b.length){var n=a.state;n.disable(a.context.BLEND);n.buffers.color.setClear(1,1,1,1);n.buffers.depth.setTest(!0);n.setScissorTest(!1);for(var u,r=0,I=b.length;r<I;r++){var v=b[r];u=v.shadow;var p=v&&v.isPointLight;if(void 0===u)console.warn("THREE.WebGLShadowMap:",
    v,"has no shadow.");else{var z=u.camera;h.copy(u.mapSize);h.min(k);if(p){var y=h.x,J=h.y;w[0].set(2*y,J,y,J);w[1].set(0,J,y,J);w[2].set(3*y,J,y,J);w[3].set(y,J,y,J);w[4].set(3*y,0,y,J);w[5].set(y,0,y,J);h.x*=4;h.y*=2}null===u.map&&(u.map=new kb(h.x,h.y,{minFilter:1003,magFilter:1003,format:1023}),u.map.texture.name=v.name+".shadowMap",z.updateProjectionMatrix());u.isSpotLightShadow&&u.update(v);y=u.map;J=u.matrix;q.setFromMatrixPosition(v.matrixWorld);z.position.copy(q);p?(u=6,J.makeTranslation(-q.x,
    -q.y,-q.z)):(u=1,m.setFromMatrixPosition(v.target.matrixWorld),z.lookAt(m),z.updateMatrixWorld(),J.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),J.multiply(z.projectionMatrix),J.multiply(z.matrixWorldInverse));a.setRenderTarget(y);a.clear();for(v=0;v<u;v++)p&&(m.copy(z.position),m.add(t[v]),z.up.copy(l[v]),z.lookAt(m),z.updateMatrixWorld(),n.viewport(w[v])),g.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse),f.setFromMatrix(g),e(c,d,z,p)}}A.needsUpdate=!1}}}function bg(a){var b={};return{get:function(a){a.isInterleavedBufferAttribute&&
    (a=a.data);return b[a.uuid]},remove:function(c){c.isInterleavedBufferAttribute&&(c=c.data);var d=b[c.uuid];d&&(a.deleteBuffer(d.buffer),delete b[c.uuid])},update:function(c,d){c.isInterleavedBufferAttribute&&(c=c.data);var e=b[c.uuid];if(void 0===e){var e=c.uuid,f=c.array,g=c.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW,h=a.createBuffer();a.bindBuffer(d,h);a.bufferData(d,f,g);c.onUploadCallback();d=a.FLOAT;f instanceof Float32Array?d=a.FLOAT:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):
    f instanceof Uint16Array?d=a.UNSIGNED_SHORT:f instanceof Int16Array?d=a.SHORT:f instanceof Uint32Array?d=a.UNSIGNED_INT:f instanceof Int32Array?d=a.INT:f instanceof Int8Array?d=a.BYTE:f instanceof Uint8Array&&(d=a.UNSIGNED_BYTE);b[e]={buffer:h,type:d,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}else e.version<c.version&&(f=c,h=f.array,g=f.updateRange,a.bindBuffer(d,e.buffer),!1===f.dynamic?a.bufferData(d,h,a.STATIC_DRAW):-1===g.count?a.bufferSubData(d,0,h):0===g.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
    (a.bufferSubData(d,g.offset*h.BYTES_PER_ELEMENT,h.subarray(g.offset,g.offset+g.count)),g.count=-1),e.version=c.version)}}}function gb(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||gb.DefaultOrder}function Wd(){this.mask=1}function x(){Object.defineProperty(this,"id",{value:cg++});this.uuid=Q.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=x.DefaultUp.clone();var a=new p,b=new gb,c=new ha,d=new p(1,1,1);b.onChange(function(){c.setFromEuler(b,
    !1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new O},normalMatrix:{value:new ma}});this.matrix=new O;this.matrixWorld=new O;this.matrixAutoUpdate=x.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new Wd;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=
    0;this.userData={}}function Ta(){x.call(this);this.type="Camera";this.matrixWorldInverse=new O;this.projectionMatrix=new O}function Lb(a,b,c,d,e,f){Ta.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function Ya(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new p;this.vertexNormals=Array.isArray(d)?d:[];this.color=e&&e.isColor?
    e:new H;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0}function L(){Object.defineProperty(this,"id",{value:dg+=2});this.uuid=Q.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=
    this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function M(a,b,c){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Q.generateUUID();this.name="";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=!0===c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function uc(a,b,c){M.call(this,new Int8Array(a),b,c)}function vc(a,b,c){M.call(this,new Uint8Array(a),
    b,c)}function wc(a,b,c){M.call(this,new Uint8ClampedArray(a),b,c)}function xc(a,b,c){M.call(this,new Int16Array(a),b,c)}function ob(a,b,c){M.call(this,new Uint16Array(a),b,c)}function yc(a,b,c){M.call(this,new Int32Array(a),b,c)}function pb(a,b,c){M.call(this,new Uint32Array(a),b,c)}function B(a,b,c){M.call(this,new Float32Array(a),b,c)}function zc(a,b,c){M.call(this,new Float64Array(a),b,c)}function Ve(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=
    [];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Xd(a){if(0===a.length)return-Infinity;for(var b=a[0],c=1,d=a.length;c<d;++c)a[c]>b&&(b=a[c]);return b}function E(){Object.defineProperty(this,"id",{value:eg+=2});this.uuid=Q.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes=
    {};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function Mb(a,b,c,d,e,f){L.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new qb(a,b,c,d,e,f));this.mergeVertices()}function qb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,l,Ha,Da,na){var t=f/Ha,v=g/Da,I=f/2,A=g/2,w=l/2;g=Ha+1;var z=Da+1,y=f=0,J,x,B=new p;for(x=0;x<z;x++){var D=x*v-A;for(J=0;J<g;J++)B[a]=
    (J*t-I)*d,B[b]=D*e,B[c]=w,m.push(B.x,B.y,B.z),B[a]=0,B[b]=0,B[c]=0<l?1:-1,q.push(B.x,B.y,B.z),n.push(J/Ha),n.push(1-x/Da),f+=1}for(x=0;x<Da;x++)for(J=0;J<Ha;J++)a=u+J+g*(x+1),b=u+(J+1)+g*(x+1),c=u+(J+1)+g*x,k.push(u+J+g*x,a,c),k.push(a,b,c),y+=6;h.addGroup(r,y,na);r+=y;u+=f}E.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;a=a||1;b=b||1;c=c||1;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var k=
    [],m=[],q=[],n=[],u=0,r=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(k);this.addAttribute("position",new B(m,3));this.addAttribute("normal",new B(q,3));this.addAttribute("uv",new B(n,2))}function Ac(a,b,c,d){L.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new rb(a,
    b,c,d));this.mergeVertices()}function rb(a,b,c,d){E.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};a=a||1;b=b||1;var e=a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,k=a/c,m=b/d,q=[],n=[],u=[],r=[];for(a=0;a<h;a++){var t=a*m-f;for(b=0;b<g;b++)n.push(b*k-e,-t,0),u.push(0,0,1),r.push(b/c),r.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,q.push(b+g*a,e,h),q.push(e,f,h);this.setIndex(q);this.addAttribute("position",
    new B(n,3));this.addAttribute("normal",new B(u,3));this.addAttribute("uv",new B(r,2))}function Aa(a){P.call(this);this.type="MeshBasicMaterial";this.color=new H(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=
    !1;this.setValues(a)}function Fa(a){P.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,
    drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function sb(a,b){this.origin=void 0!==a?a:new p;this.direction=void 0!==b?b:new p}function Nb(a,b){this.start=void 0!==a?a:new p;this.end=void 0!==b?b:new p}function Za(a,b,c){this.a=void 0!==a?a:new p;this.b=void 0!==
    b?b:new p;this.c=void 0!==c?c:new p}function ra(a,b){x.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new E;this.material=void 0!==b?b:new Aa({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function fg(a,b,c,d){function e(a,c){b.buffers.color.setClear(a.r,a.g,a.b,c,d)}var f=new H(0),g=0,h,k,m;return{getClearColor:function(){return f},setClearColor:function(a,b){f.set(a);g=void 0!==b?b:1;e(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(a){g=a;e(f,
    g)},render:function(b,d,u,r){d=d.background;null===d?e(f,g):d&&d.isColor&&(e(d,1),r=!0);(a.autoClear||r)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);d&&d.isCubeTexture?(void 0===m&&(m=new ra(new qb(1,1,1),new Fa({uniforms:tb.cube.uniforms,vertexShader:tb.cube.vertexShader,fragmentShader:tb.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),m.geometry.removeAttribute("normal"),m.geometry.removeAttribute("uv"),m.onBeforeRender=function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)},
    c.update(m.geometry)),m.material.uniforms.tCube.value=d,b.push(m,m.geometry,m.material,0,null)):d&&d.isTexture&&(void 0===h&&(h=new Lb(-1,1,1,-1,0,1),k=new ra(new rb(2,2),new Aa({depthTest:!1,depthWrite:!1,fog:!1})),c.update(k.geometry)),k.material.map=d,a.renderBufferDirect(h,null,k.geometry,k.material,k,null))}}}function gg(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-
    b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function hg(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function ig(){var a=[],b=0,c=[],d=[];return{opaque:c,transparent:d,init:function(){b=0;c.length=0;d.length=0},push:function(e,f,g,h,k){var m=a[b];void 0===m?(m={id:e.id,object:e,geometry:f,material:g,program:g.program,renderOrder:e.renderOrder,z:h,group:k},a[b]=m):(m.id=e.id,m.object=e,m.geometry=f,m.material=g,m.program=g.program,m.renderOrder=e.renderOrder,
    m.z=h,m.group=k);(!0===g.transparent?d:c).push(m);b++},sort:function(){1<c.length&&c.sort(gg);1<d.length&&d.sort(hg)}}}function jg(){var a={};return{get:function(b,c){b=b.id+","+c.id;c=a[b];void 0===c&&(c=new ig,a[b]=c);return c},dispose:function(){a={}}}}function kg(a,b){return Math.abs(b[1])-Math.abs(a[1])}function lg(a){var b={},c=new Float32Array(8);return{update:function(d,e,f,g){var h=d.morphTargetInfluences,k=h.length;d=b[e.id];if(void 0===d){d=[];for(var m=0;m<k;m++)d[m]=[m,0];b[e.id]=d}var q=
    f.morphTargets&&e.morphAttributes.position;f=f.morphNormals&&e.morphAttributes.normal;for(m=0;m<k;m++){var n=d[m];0!==n[1]&&(q&&e.removeAttribute("morphTarget"+m),f&&e.removeAttribute("morphNormal"+m))}for(m=0;m<k;m++)n=d[m],n[0]=m,n[1]=h[m];d.sort(kg);for(m=0;8>m;m++){if(n=d[m])if(h=n[0],n=n[1]){q&&e.addAttribute("morphTarget"+m,q[h]);f&&e.addAttribute("morphNormal"+m,f[h]);c[m]=n;continue}c[m]=0}g.getUniforms().setValue(a,"morphTargetInfluences",c)}}}function mg(a,b,c){var d,e,f;this.setMode=function(a){d=
    a};this.setIndex=function(a){e=a.type;f=a.bytesPerElement};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.calls++;c.vertices+=h;d===a.TRIANGLES?c.faces+=h/3:d===a.POINTS&&(c.points+=h)};this.renderInstances=function(g,h,k){var m=b.get("ANGLE_instanced_arrays");null===m?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(m.drawElementsInstancedANGLE(d,k,e,h*f,g.maxInstancedCount),c.calls++,c.vertices+=
    k*g.maxInstancedCount,d===a.TRIANGLES?c.faces+=g.maxInstancedCount*k/3:d===a.POINTS&&(c.points+=g.maxInstancedCount*k))}}function ng(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.calls++;c.vertices+=f;d===a.TRIANGLES?c.faces+=f/3:d===a.POINTS&&(c.points+=f)};this.renderInstances=function(e,f,g){var h=b.get("ANGLE_instanced_arrays");if(null===h)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
    else{var k=e.attributes.position;k.isInterleavedBufferAttribute?(g=k.data.count,h.drawArraysInstancedANGLE(d,0,g,e.maxInstancedCount)):h.drawArraysInstancedANGLE(d,f,g,e.maxInstancedCount);c.calls++;c.vertices+=g*e.maxInstancedCount;d===a.TRIANGLES?c.faces+=e.maxInstancedCount*g/3:d===a.POINTS&&(c.points+=e.maxInstancedCount*g)}}}function og(a,b,c){function d(a){a=a.target;var h=e[a.id];null!==h.index&&b.remove(h.index);for(var g in h.attributes)b.remove(h.attributes[g]);a.removeEventListener("dispose",
    d);delete e[a.id];if(g=f[a.id])b.remove(g),delete f[a.id];if(g=f[h.id])b.remove(g),delete f[h.id];c.geometries--}var e={},f={};return{get:function(a,b){var f=e[b.id];if(f)return f;b.addEventListener("dispose",d);b.isBufferGeometry?f=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new E).setFromObject(a)),f=b._bufferGeometry);e[b.id]=f;c.geometries++;return f},update:function(c){var d=c.index,e=c.attributes;null!==d&&b.update(d,a.ELEMENT_ARRAY_BUFFER);for(var f in e)b.update(e[f],
    a.ARRAY_BUFFER);c=c.morphAttributes;for(f in c)for(var d=c[f],e=0,g=d.length;e<g;e++)b.update(d[e],a.ARRAY_BUFFER)},getWireframeAttribute:function(c){var d=f[c.id];if(d)return d;d=[];var e=c.index;var g=c.attributes;if(null!==e){var q=e.array;for(var n=0,u=q.length;n<u;n+=3){var r=q[n+0];g=q[n+1];e=q[n+2];d.push(r,g,g,e,e,r)}}else for(q=g.position.array,n=0,u=q.length/3-1;n<u;n+=3)r=n+0,g=n+1,e=n+2,d.push(r,g,g,e,e,r);d=new (65535<Xd(d)?pb:ob)(d,1);b.update(d,a.ELEMENT_ARRAY_BUFFER);return f[c.id]=
    d}}}function pg(){var a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case "DirectionalLight":var c={direction:new p,color:new H,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case "SpotLight":c={position:new p,direction:new p,color:new H,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case "PointLight":c={position:new p,color:new H,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D,
    shadowCameraNear:1,shadowCameraFar:1E3};break;case "HemisphereLight":c={direction:new p,skyColor:new H,groundColor:new H};break;case "RectAreaLight":c={color:new H,position:new p,halfWidth:new p,halfHeight:new p}}return a[b.id]=c}}}function qg(){var a=new pg,b={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new p,d=new O,e=new O;return{setup:function(f,
    g,h){for(var k,m=0,q=0,n=0,u=0,r=0,t=0,l=0,w=0,p=h.matrixWorldInverse,y=0,I=f.length;y<I;y++){var A=f[y];k=A.color;var J=A.intensity,Ha=A.distance,Da=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)m+=k.r*J,q+=k.g*J,n+=k.b*J;else if(A.isDirectionalLight){h=a.get(A);h.color.copy(A.color).multiplyScalar(A.intensity);h.direction.setFromMatrixPosition(A.matrixWorld);c.setFromMatrixPosition(A.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(p);if(h.shadow=A.castShadow)k=
    A.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.directionalShadowMap[u]=Da;b.directionalShadowMatrix[u]=A.shadow.matrix;b.directional[u]=h;u++}else if(A.isSpotLight){h=a.get(A);h.position.setFromMatrixPosition(A.matrixWorld);h.position.applyMatrix4(p);h.color.copy(k).multiplyScalar(J);h.distance=Ha;h.direction.setFromMatrixPosition(A.matrixWorld);c.setFromMatrixPosition(A.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(p);h.coneCos=Math.cos(A.angle);
    h.penumbraCos=Math.cos(A.angle*(1-A.penumbra));h.decay=0===A.distance?0:A.decay;if(h.shadow=A.castShadow)k=A.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.spotShadowMap[t]=Da;b.spotShadowMatrix[t]=A.shadow.matrix;b.spot[t]=h;t++}else if(A.isRectAreaLight)h=a.get(A),h.color.copy(k).multiplyScalar(J/(A.width*A.height)),h.position.setFromMatrixPosition(A.matrixWorld),h.position.applyMatrix4(p),e.identity(),d.copy(A.matrixWorld),d.premultiply(p),e.extractRotation(d),h.halfWidth.set(.5*
    A.width,0,0),h.halfHeight.set(0,.5*A.height,0),h.halfWidth.applyMatrix4(e),h.halfHeight.applyMatrix4(e),b.rectArea[l]=h,l++;else if(A.isPointLight){h=a.get(A);h.position.setFromMatrixPosition(A.matrixWorld);h.position.applyMatrix4(p);h.color.copy(A.color).multiplyScalar(A.intensity);h.distance=A.distance;h.decay=0===A.distance?0:A.decay;if(h.shadow=A.castShadow)k=A.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize,h.shadowCameraNear=k.camera.near,h.shadowCameraFar=k.camera.far;
    b.pointShadowMap[r]=Da;b.pointShadowMatrix[r]=A.shadow.matrix;b.point[r]=h;r++}else A.isHemisphereLight&&(h=a.get(A),h.direction.setFromMatrixPosition(A.matrixWorld),h.direction.transformDirection(p),h.direction.normalize(),h.skyColor.copy(A.color).multiplyScalar(J),h.groundColor.copy(A.groundColor).multiplyScalar(J),b.hemi[w]=h,w++)}b.ambient[0]=m;b.ambient[1]=q;b.ambient[2]=n;b.directional.length=u;b.spot.length=t;b.rectArea.length=l;b.point.length=r;b.hemi.length=w;b.hash=u+","+r+","+t+","+l+","+
    w+","+g.length},state:b}}function rg(a,b){var c={};return{update:function(d){var e=b.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),a.update(g),c[g.id]=e);return g},clear:function(){c={}}}}function sg(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function We(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");
    ""!==a.getShaderInfoLog(d)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",b===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(d),sg(c));return d}function Xe(a){switch(a){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+
    a);}}function Yd(a,b){b=Xe(b);return"vec4 "+a+"( vec4 value ) { return "+b[0]+"ToLinear"+b[1]+"; }"}function tg(a,b){b=Xe(b);return"vec4 "+a+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"}function ug(a,b){switch(b){case 1:b="Linear";break;case 2:b="Reinhard";break;case 3:b="Uncharted2";break;case 4:b="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+b);}return"vec3 "+a+"( vec3 color ) { return "+b+"ToneMapping( color ); }"}function vg(a,b,c){a=a||{};return[a.derivatives||
    b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&c.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||b.envMap)&&c.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bc).join("\n")}function wg(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push("#define "+
    c+" "+d)}return b.join("\n")}function Bc(a){return""!==a}function Ye(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function Zd(a){return a.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(a,c){a=R[c];if(void 0===a)throw Error("Can not resolve #include <"+c+">");return Zd(a)})}function Ze(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
    function(a,c,d,e){a="";for(c=parseInt(c);c<parseInt(d);c++)a+=e.replace(/\[ i \]/g,"[ "+c+" ]");return a})}function xg(a,b,c,d,e,f){var g=a.context,h=d.defines,k=e.vertexShader,m=e.fragmentShader,q="SHADOWMAP_TYPE_BASIC";1===f.shadowMapType?q="SHADOWMAP_TYPE_PCF":2===f.shadowMapType&&(q="SHADOWMAP_TYPE_PCF_SOFT");var n="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",r="ENVMAP_BLENDING_MULTIPLY";if(f.envMap){switch(d.envMap.mapping){case 301:case 302:n="ENVMAP_TYPE_CUBE";break;case 306:case 307:n="ENVMAP_TYPE_CUBE_UV";
    break;case 303:case 304:n="ENVMAP_TYPE_EQUIREC";break;case 305:n="ENVMAP_TYPE_SPHERE"}switch(d.envMap.mapping){case 302:case 304:u="ENVMAP_MODE_REFRACTION"}switch(d.combine){case 0:r="ENVMAP_BLENDING_MULTIPLY";break;case 1:r="ENVMAP_BLENDING_MIX";break;case 2:r="ENVMAP_BLENDING_ADD"}}var t=0<a.gammaFactor?a.gammaFactor:1,l=vg(d.extensions,f,b),p=wg(h),z=g.createProgram();d.isRawShaderMaterial?(h=[p].filter(Bc).join("\n"),0<h.length&&(h+="\n"),b=[l,p].filter(Bc).join("\n"),0<b.length&&(b+="\n")):(h=
    ["precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,p,f.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+t,"#define MAX_BONES "+f.maxBones,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+u:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":
    "",f.normalMap?"#define USE_NORMALMAP":"",f.displacementMap&&f.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&
    !1===f.flatShading?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+f.numClippingPlanes,f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+q:"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;",
    "uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;",
    "\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bc).join("\n"),b=[l,"precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,p,f.alphaTest?"#define ALPHATEST "+f.alphaTest:
    "","#define GAMMA_FACTOR "+t,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+n:"",f.envMap?"#define "+u:"",f.envMap?"#define "+r:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":
    "",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.gradientMap?"#define USE_GRADIENTMAP":"",f.flatShading?"#define FLAT_SHADED":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+f.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(f.numClippingPlanes-f.numClipIntersection),f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+q:"",f.premultipliedAlpha?
    "#define PREMULTIPLIED_ALPHA":"",f.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",f.envMap&&b.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==f.toneMapping?"#define TONE_MAPPING":"",0!==f.toneMapping?R.tonemapping_pars_fragment:"",0!==f.toneMapping?ug("toneMapping",f.toneMapping):
    "",f.dithering?"#define DITHERING":"",f.outputEncoding||f.mapEncoding||f.envMapEncoding||f.emissiveMapEncoding?R.encodings_pars_fragment:"",f.mapEncoding?Yd("mapTexelToLinear",f.mapEncoding):"",f.envMapEncoding?Yd("envMapTexelToLinear",f.envMapEncoding):"",f.emissiveMapEncoding?Yd("emissiveMapTexelToLinear",f.emissiveMapEncoding):"",f.outputEncoding?tg("linearToOutputTexel",f.outputEncoding):"",f.depthPacking?"#define DEPTH_PACKING "+d.depthPacking:"","\n"].filter(Bc).join("\n"));k=Zd(k);k=Ye(k,f);
    m=Zd(m);m=Ye(m,f);d.isShaderMaterial||(k=Ze(k),m=Ze(m));m=b+m;k=We(g,g.VERTEX_SHADER,h+k);m=We(g,g.FRAGMENT_SHADER,m);g.attachShader(z,k);g.attachShader(z,m);void 0!==d.index0AttributeName?g.bindAttribLocation(z,0,d.index0AttributeName):!0===f.morphTargets&&g.bindAttribLocation(z,0,"position");g.linkProgram(z);f=g.getProgramInfoLog(z);e=g.getShaderInfoLog(k);q=g.getShaderInfoLog(m);u=n=!0;if(!1===g.getProgramParameter(z,g.LINK_STATUS))n=!1,console.error("THREE.WebGLProgram: shader error: ",g.getError(),
    "gl.VALIDATE_STATUS",g.getProgramParameter(z,g.VALIDATE_STATUS),"gl.getProgramInfoLog",f,e,q);else if(""!==f)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f);else if(""===e||""===q)u=!1;u&&(this.diagnostics={runnable:n,material:d,programLog:f,vertexShader:{log:e,prefix:h},fragmentShader:{log:q,prefix:b}});g.deleteShader(k);g.deleteShader(m);var y;this.getUniforms=function(){void 0===y&&(y=new mb(g,z,a));return y};var I;this.getAttributes=function(){if(void 0===I){for(var a={},b=g.getProgramParameter(z,
    g.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=g.getActiveAttrib(z,c).name;a[d]=g.getAttribLocation(z,d)}I=a}return I};this.destroy=function(){g.deleteProgram(z);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=yg++;this.code=c;this.usedTimes=1;
    this.program=z;this.vertexShader=k;this.fragmentShader=m;return this}function zg(a,b,c){function d(a,b){if(a)a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=a.texture.encoding);else var c=3E3;3E3===c&&b&&(c=3007);return c}var e=[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",
    MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");
    this.getParameters=function(b,e,g,q,n,u,r){var h=f[b.type];if(r.isSkinnedMesh){var k=r.skeleton.bones;if(c.floatVertexTextures)k=1024;else{var m=Math.min(Math.floor((c.maxVertexUniforms-20)/4),k.length);m<k.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+k.length+" bones. This GPU supports "+m+"."),k=0):k=m}}else k=0;m=c.precision;null!==b.precision&&(m=c.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));
    var l=a.getRenderTarget();return{shaderID:h,precision:m,supportsVertexTextures:c.vertexTextures,outputEncoding:d(l?l.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:d(b.map,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:d(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(306===b.envMap.mapping||307===b.envMap.mapping),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:d(b.emissiveMap,a.gammaInput),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,
    displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!q,useFog:b.fog,fogExp:q&&q.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<k,maxBones:k,useVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets,morphNormals:b.morphNormals,
    maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:n,numClipIntersection:u,dithering:b.dithering,shadowMapEnabled:a.shadowMap.enabled&&r.receiveShadow&&0<g.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,
    alphaTest:b.alphaTest,doubleSided:2===b.side,flipSided:1===b.side,depthPacking:void 0!==b.depthPacking?b.depthPacking:!1}};this.getProgramCode=function(b,c){var d=[];c.shaderID?d.push(c.shaderID):(d.push(b.fragmentShader),d.push(b.vertexShader));if(void 0!==b.defines)for(var e in b.defines)d.push(e),d.push(b.defines[e]);for(e=0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);return d.join()};this.acquireProgram=function(c,d,f,g){for(var h,k=0,m=e.length;k<
    m;k++){var q=e[k];if(q.code===g){h=q;++h.usedTimes;break}}void 0===h&&(h=new xg(a,b,g,c,d,f),e.push(h));return h};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function Ag(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){b/=Math.max(a.width,a.height);var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext("2d").drawImage(a,
    0,0,a.width,a.height,0,0,c.width,c.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+c.width+"x"+c.height,a);return c}return a}function k(a){return Q.isPowerOfTwo(a.width)&&Q.isPowerOfTwo(a.height)}function m(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function q(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function n(b){b=b.target;b.removeEventListener("dispose",n);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);
    else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}b.isVideoTexture&&delete y[b.id];g.textures--}function u(b){b=b.target;b.removeEventListener("dispose",u);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),
    c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.textures--}function r(b,q){var u=d.get(b);if(0<b.version&&u.__version!==b.version){var r=b.image;if(void 0===r)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===r.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",b);else{void 0===u.__webglInit&&(u.__webglInit=!0,b.addEventListener("dispose",n),u.__webglTexture=
    a.createTexture(),b.isVideoTexture&&(y[b.id]=b),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,u.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var l=h(b.image,e.maxTextureSize);(1001!==b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===k(l)&&(q=l,q instanceof HTMLImageElement||q instanceof HTMLCanvasElement||q instanceof ImageBitmap?
    (r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r.width=Q.floorPowerOfTwo(q.width),r.height=Q.floorPowerOfTwo(q.height),r.getContext("2d").drawImage(q,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+q.width+"x"+q.height+"). Resized to "+r.width+"x"+r.height,q),l=r):l=q);q=k(l);var r=f.convert(b.format),v=f.convert(b.type);t(a.TEXTURE_2D,b,q);var p=b.mipmaps;if(b.isDepthTexture){p=a.DEPTH_COMPONENT;if(1015===b.type){if(!z)throw Error("Float Depth Texture only supported in WebGL2.0");
    p=a.DEPTH_COMPONENT32F}else z&&(p=a.DEPTH_COMPONENT16);1026===b.format&&p===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),b.type=1012,v=f.convert(b.type));1027===b.format&&(p=a.DEPTH_STENCIL,1020!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),b.type=1020,v=f.convert(b.type)));c.texImage2D(a.TEXTURE_2D,0,p,l.width,l.height,0,r,
    v,null)}else if(b.isDataTexture)if(0<p.length&&q){for(var A=0,w=p.length;A<w;A++)l=p[A],c.texImage2D(a.TEXTURE_2D,A,r,l.width,l.height,0,r,v,l.data);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,l.width,l.height,0,r,v,l.data);else if(b.isCompressedTexture)for(A=0,w=p.length;A<w;A++)l=p[A],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(r)?c.compressedTexImage2D(a.TEXTURE_2D,A,r,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
    c.texImage2D(a.TEXTURE_2D,A,r,l.width,l.height,0,r,v,l.data);else if(0<p.length&&q){A=0;for(w=p.length;A<w;A++)l=p[A],c.texImage2D(a.TEXTURE_2D,A,r,r,v,l);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,r,v,l);m(b,q)&&a.generateMipmap(a.TEXTURE_2D);u.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,u.__webglTexture)}function t(c,g,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,f.convert(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,
    f.convert(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f.convert(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f.convert(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),1001===g.wrapS&&1001===g.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",g),a.texParameteri(c,a.TEXTURE_MAG_FILTER,q(g.magFilter)),a.texParameteri(c,
    a.TEXTURE_MIN_FILTER,q(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",g));!(h=b.get("EXT_texture_filter_anisotropic"))||1015===g.type&&null===b.get("OES_texture_float_linear")||1016===g.type&&null===b.get("OES_texture_half_float_linear")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,
    e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function l(b,e,g,h){var k=f.convert(e.texture.format),m=f.convert(e.texture.type);c.texImage2D(h,0,k,e.width,e.height,0,k,m,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function p(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,c.width,c.height),
    a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var z="undefined"!==typeof WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext,y={};this.setTexture2D=r;this.setTextureCube=
    function(b,q){var u=d.get(b);if(6===b.image.length)if(0<b.version&&u.__version!==b.version){u.__image__webglTextureCube||(b.addEventListener("dispose",n),u.__image__webglTextureCube=a.createTexture(),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_CUBE_MAP,u.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);q=b&&b.isCompressedTexture;for(var r=b.image[0]&&b.image[0].isDataTexture,l=[],v=0;6>v;v++)l[v]=q||r?r?b.image[v].image:b.image[v]:h(b.image[v],e.maxCubemapSize);
    var p=k(l[0]),w=f.convert(b.format),A=f.convert(b.type);t(a.TEXTURE_CUBE_MAP,b,p);for(v=0;6>v;v++)if(q)for(var y,I=l[v].mipmaps,z=0,x=I.length;z<x;z++)y=I[z],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(w)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,z,w,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,z,w,y.width,y.height,
    0,w,A,y.data);else r?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,l[v].width,l[v].height,0,w,A,l[v].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,w,A,l[v]);m(b,p)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);u.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+q),c.bindTexture(a.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=
    function(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener("dispose",u);f.__webglTexture=a.createTexture();g.textures++;var h=!0===b.isWebGLRenderTargetCube,n=k(b);if(h){e.__webglFramebuffer=[];for(var q=0;6>q;q++)e.__webglFramebuffer[q]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);t(a.TEXTURE_CUBE_MAP,b.texture,n);for(q=0;6>q;q++)l(e.__webglFramebuffer[q],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+q);
    m(b.texture,n)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),t(a.TEXTURE_2D,b.texture,n),l(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),m(b.texture,n)&&a.generateMipmap(a.TEXTURE_2D),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");if(b&&b.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");
    a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);r(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,
    a.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error("Unknown depthTexture format");}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),p(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),p(e.__webglDepthbuffer,
    b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture,f=k(b);m(e,f)&&(b=b.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))};this.updateVideoTextures=function(){for(var a in y)y[a].update()}}function Bg(){var a={};return{get:function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c},remove:function(b){delete a[b.uuid]},clear:function(){a={}}}}function Cg(a,
    b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return f}function e(b){!0!==y[b]&&(a.enable(b),y[b]=!0)}function f(b){!1!==y[b]&&(a.disable(b),y[b]=!1)}function g(b,d,g,h,k,m,q,n){0!==b?e(a.BLEND):f(a.BLEND);if(5!==b){if(b!==J||n!==la)switch(b){case 2:n?(a.blendEquationSeparate(a.FUNC_ADD,
    a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE));break;case 3:n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR));break;case 4:n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,
    a.SRC_COLOR));break;default:n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA))}H=E=C=D=B=x=null}else{k=k||d;m=m||g;q=q||h;if(d!==x||k!==C)a.blendEquationSeparate(c.convert(d),c.convert(k)),x=d,C=k;if(g!==B||h!==D||m!==E||q!==H)a.blendFuncSeparate(c.convert(g),c.convert(h),c.convert(m),c.convert(q)),
    B=g,D=h,E=m,H=q}J=b;la=n}function h(b){S!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),S=b)}function k(b){0!==b?(e(a.CULL_FACE),b!==K&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):f(a.CULL_FACE);K=b}function m(b,c,d){if(b){if(e(a.POLYGON_OFFSET_FILL),L!==c||O!==d)a.polygonOffset(c,d),L=c,O=d}else f(a.POLYGON_OFFSET_FILL)}function q(b){void 0===b&&(b=a.TEXTURE0+Q-1);M!==b&&(a.activeTexture(b),M=b)}var n=new function(){var b=!1,c=new aa,d=null,e=new aa(0,0,0,0);
    return{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(-1,0,0,0)}}},u=new function(){var b=!1,c=null,d=null,g=null;return{setTest:function(b){b?e(a.DEPTH_TEST):f(a.DEPTH_TEST)},setMask:function(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function(b){if(d!==b){if(b)switch(b){case 0:a.depthFunc(a.NEVER);break;
    case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);break;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);d=b}},setLocked:function(a){b=a},setClear:function(b){g!==b&&(a.clearDepth(b),g=b)},reset:function(){b=!1;g=d=c=null}}},r=new function(){var b=!1,c=null,d=null,g=null,h=null,k=null,m=null,n=null,q=null;
    return{setTest:function(b){b?e(a.STENCIL_TEST):f(a.STENCIL_TEST)},setMask:function(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function(b,c,e){if(d!==b||g!==c||h!==e)a.stencilFunc(b,c,e),d=b,g=c,h=e},setOp:function(b,c,d){if(k!==b||m!==c||n!==d)a.stencilOp(b,c,d),k=b,m=c,n=d},setLocked:function(a){b=a},setClear:function(b){q!==b&&(a.clearStencil(b),q=b)},reset:function(){b=!1;q=n=m=k=h=g=d=c=null}}},l=a.getParameter(a.MAX_VERTEX_ATTRIBS),v=new Uint8Array(l),p=new Uint8Array(l),z=new Uint8Array(l),
    y={},I=null,A=null,J=null,x=null,B=null,D=null,C=null,E=null,H=null,la=!1,S=null,K=null,N=null,L=null,O=null,Q=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),l=parseFloat(/^WebGL\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),V=1<=parseFloat(l),M=null,P={},R=new aa,G=new aa,Y={};Y[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);Y[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);n.setClear(0,0,0,1);u.setClear(1);r.setClear(0);e(a.DEPTH_TEST);u.setFunc(3);h(!1);k(1);e(a.CULL_FACE);
    e(a.BLEND);g(1);return{buffers:{color:n,depth:u,stencil:r},initAttributes:function(){for(var a=0,b=v.length;a<b;a++)v[a]=0},enableAttribute:function(c){v[c]=1;0===p[c]&&(a.enableVertexAttribArray(c),p[c]=1);0!==z[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),z[c]=0)},enableAttributeAndDivisor:function(c,d){v[c]=1;0===p[c]&&(a.enableVertexAttribArray(c),p[c]=1);z[c]!==d&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,d),z[c]=d)},disableUnusedAttributes:function(){for(var b=
    0,c=p.length;b!==c;++b)p[b]!==v[b]&&(a.disableVertexAttribArray(b),p[b]=0)},enable:e,disable:f,getCompressedTextureFormats:function(){if(null===I&&(I=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)I.push(c[d]);return I},useProgram:function(b){return A!==b?(a.useProgram(b),A=b,!0):!1},setBlending:g,setMaterial:function(b,c){2===b.side?f(a.CULL_FACE):
    e(a.CULL_FACE);var d=1===b.side;c&&(d=!d);h(d);!0===b.transparent?g(b.blending,b.blendEquation,b.blendSrc,b.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha,b.premultipliedAlpha):g(0);u.setFunc(b.depthFunc);u.setTest(b.depthTest);u.setMask(b.depthWrite);n.setMask(b.colorWrite);m(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits)},setFlipSided:h,setCullFace:k,setLineWidth:function(b){b!==N&&(V&&a.lineWidth(b),N=b)},setPolygonOffset:m,setScissorTest:function(b){b?e(a.SCISSOR_TEST):
    f(a.SCISSOR_TEST)},activeTexture:q,bindTexture:function(b,c){null===M&&q();var d=P[M];void 0===d&&(d={type:void 0,texture:void 0},P[M]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||Y[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(ea){console.error("THREE.WebGLState:",ea)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(ea){console.error("THREE.WebGLState:",ea)}},scissor:function(b){!1===R.equals(b)&&(a.scissor(b.x,
    b.y,b.z,b.w),R.copy(b))},viewport:function(b){!1===G.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),G.copy(b))},reset:function(){for(var b=0;b<p.length;b++)1===p[b]&&(a.disableVertexAttribArray(b),p[b]=0);y={};M=I=null;P={};K=S=J=A=null;n.reset();u.reset();r.reset()}}}function Dg(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&
    0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}var e,f=void 0!==c.precision?c.precision:"highp",g=d(f);g!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",g,"instead."),f=g);c=!0===c.logarithmicDepthBuffer;var g=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),h=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=a.getParameter(a.MAX_TEXTURE_SIZE),m=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),
    q=a.getParameter(a.MAX_VERTEX_ATTRIBS),n=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),u=a.getParameter(a.MAX_VARYING_VECTORS),r=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),l=0<h,v=!!b.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==e)return e;var c=b.get("EXT_texture_filter_anisotropic");return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:f,logarithmicDepthBuffer:c,maxTextures:g,maxVertexTextures:h,maxTextureSize:k,maxCubemapSize:m,
    maxAttributes:q,maxVertexUniforms:n,maxVaryings:u,maxFragmentUniforms:r,vertexTextures:l,floatFragmentTextures:v,floatVertexTextures:l&&v}}function ba(a,b,c,d){Ta.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function ud(a){ba.call(this);this.cameras=a||[]}function be(a){function b(){if(null!==
    d&&d.isPresenting){var b=d.getEyeParameters("left"),e=b.renderWidth,b=b.renderHeight;n=a.getPixelRatio();q=a.getSize();a.setDrawingBufferSize(2*e,b,1)}else c.enabled&&a.setDrawingBufferSize(q.width,q.height,n)}var c=this,d=null,e=null,f=null;"undefined"!==typeof window&&"VRFrameData"in window&&(e=new window.VRFrameData);var g=new O,h=new ba;h.bounds=new aa(0,0,.5,1);h.layers.enable(1);var k=new ba;k.bounds=new aa(.5,0,.5,1);k.layers.enable(2);var m=new ud([h,k]);m.layers.enable(1);m.layers.enable(2);
    var q,n;"undefined"!==typeof window&&window.addEventListener("vrdisplaypresentchange",b,!1);this.enabled=!1;this.getDevice=function(){return d};this.setDevice=function(a){void 0!==a&&(d=a)};this.setPoseTarget=function(a){void 0!==a&&(f=a)};this.getCamera=function(a){if(null===d)return a;d.depthNear=a.near;d.depthFar=a.far;d.getFrameData(e);var b=e.pose,c=null!==f?f:a;null!==b.position?c.position.fromArray(b.position):c.position.set(0,0,0);null!==b.orientation&&c.quaternion.fromArray(b.orientation);
    c.updateMatrixWorld();if(!1===d.isPresenting)return a;h.near=a.near;k.near=a.near;h.far=a.far;k.far=a.far;m.matrixWorld.copy(a.matrixWorld);m.matrixWorldInverse.copy(a.matrixWorldInverse);h.matrixWorldInverse.fromArray(e.leftViewMatrix);k.matrixWorldInverse.fromArray(e.rightViewMatrix);a=c.parent;null!==a&&(g.getInverse(a.matrixWorld),h.matrixWorldInverse.multiply(g),k.matrixWorldInverse.multiply(g));h.matrixWorld.getInverse(h.matrixWorldInverse);k.matrixWorld.getInverse(k.matrixWorldInverse);h.projectionMatrix.fromArray(e.leftProjectionMatrix);
    k.projectionMatrix.fromArray(e.rightProjectionMatrix);m.projectionMatrix.copy(h.projectionMatrix);a=d.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&h.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&k.bounds.fromArray(a.rightBounds));return m};this.submitFrame=function(){d&&d.isPresenting&&d.submitFrame()};this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",b)}}function Eg(a){var b={};
    return{get:function(c){if(void 0!==b[c])return b[c];switch(c){case "WEBGL_depth_texture":var d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||
    a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":d=a.getExtension("WEBGL_compressed_texture_etc1");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");return b[c]=d}}}function Fg(){function a(){m.value!==
    d&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){g=m.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;k.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(g,d),g[d+3]=h.constant}m.value=g;m.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,f=!1,g=!1,h=new Ea,k=new ma,m={value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=
    this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,k,l,t,v){if(!f||null===c||0===c.length||g&&!k)g?b(null):a();else{k=g?0:e;var n=4*k,q=t.clippingState||null;m.value=q;q=b(c,l,n,v);for(c=0;c!==n;++c)q[c]=d[c];t.clippingState=q;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=k}}}function af(a,b){return{convert:function(c){if(1E3===
    c)return a.REPEAT;if(1001===c)return a.CLAMP_TO_EDGE;if(1002===c)return a.MIRRORED_REPEAT;if(1003===c)return a.NEAREST;if(1004===c)return a.NEAREST_MIPMAP_NEAREST;if(1005===c)return a.NEAREST_MIPMAP_LINEAR;if(1006===c)return a.LINEAR;if(1007===c)return a.LINEAR_MIPMAP_NEAREST;if(1008===c)return a.LINEAR_MIPMAP_LINEAR;if(1009===c)return a.UNSIGNED_BYTE;if(1017===c)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===c)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===c)return a.UNSIGNED_SHORT_5_6_5;if(1010===c)return a.BYTE;
    if(1011===c)return a.SHORT;if(1012===c)return a.UNSIGNED_SHORT;if(1013===c)return a.INT;if(1014===c)return a.UNSIGNED_INT;if(1015===c)return a.FLOAT;if(1016===c){var d=b.get("OES_texture_half_float");if(null!==d)return d.HALF_FLOAT_OES}if(1021===c)return a.ALPHA;if(1022===c)return a.RGB;if(1023===c)return a.RGBA;if(1024===c)return a.LUMINANCE;if(1025===c)return a.LUMINANCE_ALPHA;if(1026===c)return a.DEPTH_COMPONENT;if(1027===c)return a.DEPTH_STENCIL;if(100===c)return a.FUNC_ADD;if(101===c)return a.FUNC_SUBTRACT;
    if(102===c)return a.FUNC_REVERSE_SUBTRACT;if(200===c)return a.ZERO;if(201===c)return a.ONE;if(202===c)return a.SRC_COLOR;if(203===c)return a.ONE_MINUS_SRC_COLOR;if(204===c)return a.SRC_ALPHA;if(205===c)return a.ONE_MINUS_SRC_ALPHA;if(206===c)return a.DST_ALPHA;if(207===c)return a.ONE_MINUS_DST_ALPHA;if(208===c)return a.DST_COLOR;if(209===c)return a.ONE_MINUS_DST_COLOR;if(210===c)return a.SRC_ALPHA_SATURATE;if(2001===c||2002===c||2003===c||2004===c)if(d=b.get("WEBGL_compressed_texture_s3tc"),null!==
    d){if(2001===c)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===c)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===c)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===c)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(2100===c||2101===c||2102===c||2103===c)if(d=b.get("WEBGL_compressed_texture_pvrtc"),null!==d){if(2100===c)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===c)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===c)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===c)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===
    c&&(d=b.get("WEBGL_compressed_texture_etc1"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(103===c||104===c)if(d=b.get("EXT_blend_minmax"),null!==d){if(103===c)return d.MIN_EXT;if(104===c)return d.MAX_EXT}return 1020===c&&(d=b.get("WEBGL_depth_texture"),null!==d)?d.UNSIGNED_INT_24_8_WEBGL:0}}}function ce(a){function b(){ia=new Eg(F);ia.get("WEBGL_depth_texture");ia.get("OES_texture_float");ia.get("OES_texture_float_linear");ia.get("OES_texture_half_float");ia.get("OES_texture_half_float_linear");
    ia.get("OES_standard_derivatives");ia.get("OES_element_index_uint");ia.get("ANGLE_instanced_arrays");pa=new af(F,ia);T=new Dg(F,ia,a);Z=new Cg(F,ia,pa);Z.scissor(X.copy(fa).multiplyScalar(wa));Z.viewport(nb.copy(da).multiplyScalar(wa));ca=new Bg;ga=new Ag(F,ia,Z,ca,T,pa,ha);qa=new bg(F);ra=new og(F,qa,ha);ta=new rg(ra,ba);xa=new lg(F);ma=new zg(S,ia,T);ua=new qg;sa=new jg;ja=new fg(S,Z,ra,J);ya=new ng(F,ia,ba);za=new mg(F,ia,ba);Aa=new Zf(S,F,Z,ga,T);Ba=new $f(S,F,Z,ga,T);S.info.programs=ma.programs;
    S.context=F;S.capabilities=T;S.extensions=ia;S.properties=ca;S.renderLists=sa;S.state=Z}function c(a){a.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");L=!0}function d(){console.log("THREE.WebGLRenderer: Context Restored.");L=!1;b()}function e(a){a=a.target;a.removeEventListener("dispose",e);f(a);ca.remove(a)}function f(a){var b=ca.get(a).program;a.program=void 0;void 0!==b&&ma.releaseProgram(b)}function g(a,b,c){a.render(function(a){S.renderBufferImmediate(a,b,c)})}function h(a){null!==
    Ca&&Ca(a);(a=ka.getDevice())&&a.isPresenting?a.requestAnimationFrame(h):window.requestAnimationFrame(h)}function k(a,b,c){if(!1!==a.visible){if(a.layers.test(b.layers))if(a.isLight)D.push(a),a.castShadow&&C.push(a);else if(a.isSprite)a.frustumCulled&&!$d.intersectsSprite(a)||H.push(a);else if(a.isLensFlare)la.push(a);else if(a.isImmediateRenderObject)c&&Ob.setFromMatrixPosition(a.matrixWorld).applyMatrix4(td),E.push(a,null,a.material,Ob.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&
    a.skeleton.update(),!a.frustumCulled||$d.intersectsObject(a)){c&&Ob.setFromMatrixPosition(a.matrixWorld).applyMatrix4(td);var d=ta.update(a),e=a.material;if(Array.isArray(e))for(var f=d.groups,g=0,h=f.length;g<h;g++){var m=f[g],n=e[m.materialIndex];n&&n.visible&&E.push(a,d,n,Ob.z,m)}else e.visible&&E.push(a,d,e,Ob.z,null)}a=a.children;g=0;for(h=a.length;g<h;g++)k(a[g],b,c)}}function m(a,b,c,d){for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.object,k=g.geometry,m=void 0===d?g.material:d,g=g.group;if(c.isArrayCamera){W=
    c;for(var n=c.cameras,u=0,l=n.length;u<l;u++){var r=n[u];if(h.layers.test(r.layers)){var t=r.bounds;Z.viewport(nb.set(t.x*ea,t.y*U,t.z*ea,t.w*U).multiplyScalar(wa));q(h,b,r,k,m,g)}}}else W=null,q(h,b,c,k,m,g)}}function q(a,b,c,d,e,f){a.onBeforeRender(S,b,c,d,e,f);a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){var h=a.isMesh&&0>a.matrixWorld.determinant();Z.setMaterial(e,h);h=u(c,b.fog,e,a);R="";
    g(a,h,e)}else S.renderBufferDirect(c,b.fog,d,e,a,f);a.onAfterRender(S,b,c,d,e,f)}function n(a,b,c){var d=ca.get(a);c=ma.getParameters(a,ua.state,C,b,Ja.numPlanes,Ja.numIntersection,c);var g=ma.getProgramCode(a,c),h=d.program,k=!0;if(void 0===h)a.addEventListener("dispose",e);else if(h.code!==g)f(a);else{if(void 0!==c.shaderID)return;k=!1}k&&(c.shaderID?(h=tb[c.shaderID],d.shader={name:a.type,uniforms:Ga.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}):d.shader={name:a.type,
    uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},a.onBeforeCompile(d.shader),h=ma.acquireProgram(a,d.shader,c,g),d.program=h,a.program=h);c=h.getAttributes();if(a.morphTargets)for(g=a.numSupportedMorphTargets=0;g<S.maxMorphTargets;g++)0<=c["morphTarget"+g]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(g=a.numSupportedMorphNormals=0;g<S.maxMorphNormals;g++)0<=c["morphNormal"+g]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||
    !0===a.clipping)d.numClippingPlanes=Ja.numPlanes,d.numIntersection=Ja.numIntersection,c.clippingPlanes=Ja.uniform;d.fog=b;d.lightsHash=ua.state.hash;a.lights&&(c.ambientLightColor.value=ua.state.ambient,c.directionalLights.value=ua.state.directional,c.spotLights.value=ua.state.spot,c.rectAreaLights.value=ua.state.rectArea,c.pointLights.value=ua.state.point,c.hemisphereLights.value=ua.state.hemi,c.directionalShadowMap.value=ua.state.directionalShadowMap,c.directionalShadowMatrix.value=ua.state.directionalShadowMatrix,
    c.spotShadowMap.value=ua.state.spotShadowMap,c.spotShadowMatrix.value=ua.state.spotShadowMatrix,c.pointShadowMap.value=ua.state.pointShadowMap,c.pointShadowMatrix.value=ua.state.pointShadowMatrix);a=d.program.getUniforms();a=mb.seqWithValue(a.seq,c);d.uniformsList=a}function u(a,b,c,d){Y=0;var e=ca.get(c);sd&&(ae||a!==V)&&Ja.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===V&&c.id===P);!1===c.needsUpdate&&(void 0===e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:c.lights&&
    e.lightsHash!==ua.state.hash?c.needsUpdate=!0:void 0===e.numClippingPlanes||e.numClippingPlanes===Ja.numPlanes&&e.numIntersection===Ja.numIntersection||(c.needsUpdate=!0));c.needsUpdate&&(n(c,b,d),c.needsUpdate=!1);var f=!1,g=!1,h=!1,k=e.program,m=k.getUniforms(),q=e.shader.uniforms;Z.useProgram(k.program)&&(h=g=f=!0);c.id!==P&&(P=c.id,g=!0);if(f||a!==V){m.setValue(F,"projectionMatrix",a.projectionMatrix);T.logarithmicDepthBuffer&&m.setValue(F,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));V!==(W||
    a)&&(V=W||a,h=g=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)f=m.map.cameraPosition,void 0!==f&&f.setValue(F,Ob.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||c.isMeshStandardMaterial||c.isShaderMaterial||c.skinning)&&m.setValue(F,"viewMatrix",a.matrixWorldInverse)}if(c.skinning&&(m.setOptional(F,d,"bindMatrix"),m.setOptional(F,d,"bindMatrixInverse"),a=d.skeleton))if(f=a.bones,T.floatVertexTextures){if(void 0===
    a.boneTexture){var f=Math.sqrt(4*f.length),f=Q.ceilPowerOfTwo(f),f=Math.max(f,4),u=new Float32Array(f*f*4);u.set(a.boneMatrices);var r=new lb(u,f,f,1023,1015);a.boneMatrices=u;a.boneTexture=r;a.boneTextureSize=f}m.setValue(F,"boneTexture",a.boneTexture);m.setValue(F,"boneTextureSize",a.boneTextureSize)}else m.setOptional(F,a,"boneMatrices");g&&(m.setValue(F,"toneMappingExposure",S.toneMappingExposure),m.setValue(F,"toneMappingWhitePoint",S.toneMappingWhitePoint),c.lights&&(g=h,q.ambientLightColor.needsUpdate=
    g,q.directionalLights.needsUpdate=g,q.pointLights.needsUpdate=g,q.spotLights.needsUpdate=g,q.rectAreaLights.needsUpdate=g,q.hemisphereLights.needsUpdate=g),b&&c.fog&&(q.fogColor.value=b.color,b.isFog?(q.fogNear.value=b.near,q.fogFar.value=b.far):b.isFogExp2&&(q.fogDensity.value=b.density)),c.isMeshBasicMaterial?l(q,c):c.isMeshLambertMaterial?(l(q,c),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(l(q,c),c.isMeshToonMaterial?(t(q,c),c.gradientMap&&(q.gradientMap.value=c.gradientMap)):
    t(q,c)):c.isMeshStandardMaterial?(l(q,c),c.isMeshPhysicalMaterial&&(q.clearCoat.value=c.clearCoat,q.clearCoatRoughness.value=c.clearCoatRoughness),q.roughness.value=c.roughness,q.metalness.value=c.metalness,c.roughnessMap&&(q.roughnessMap.value=c.roughnessMap),c.metalnessMap&&(q.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),
    c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),c.envMap&&(q.envMapIntensity.value=c.envMapIntensity)):c.isMeshDepthMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=
    c.displacementScale,q.displacementBias.value=c.displacementBias),q.referencePosition.value.copy(c.referencePosition),q.nearDistance.value=c.nearDistance,q.farDistance.value=c.farDistance):c.isMeshNormalMaterial?(l(q,c),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=
    c.displacementBias)):c.isLineBasicMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,c.isLineDashedMaterial&&(q.dashSize.value=c.dashSize,q.totalSize.value=c.dashSize+c.gapSize,q.scale.value=c.scale)):c.isPointsMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.size.value=c.size*wa,q.scale.value=.5*U,q.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&(b=c.map.offset,g=c.map.repeat,h=c.map.center,c.map.matrix.setUvTransform(b.x,b.y,g.x,g.y,c.map.rotation,h.x,h.y)),q.uvTransform.value.copy(c.map.matrix))):
    c.isShadowMaterial&&(q.color.value=c.color,q.opacity.value=c.opacity),void 0!==q.ltcMat&&(q.ltcMat.value=K.LTC_MAT_TEXTURE),void 0!==q.ltcMag&&(q.ltcMag.value=K.LTC_MAG_TEXTURE),mb.upload(F,e.uniformsList,q,S));m.setValue(F,"modelViewMatrix",d.modelViewMatrix);m.setValue(F,"normalMatrix",d.normalMatrix);m.setValue(F,"modelMatrix",d.matrixWorld);return k}function l(a,b){a.opacity.value=b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);
    b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var c=b.map;else b.specularMap?c=b.specularMap:
    b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);if(void 0!==c){c.isWebGLRenderTarget&&(c=c.texture);if(!0===c.matrixAutoUpdate){b=c.offset;var d=c.repeat,e=c.center;c.matrix.setUvTransform(b.x,b.y,d.x,d.y,c.rotation,e.x,e.y)}a.uvTransform.value.copy(c.matrix)}}function t(a,b){a.specular.value=b.specular;a.shininess.value=Math.max(b.shininess,
    1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}console.log("THREE.WebGLRenderer","89");a=a||{};var v=void 0!==a.canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml",
    "canvas"),w=void 0!==a.context?a.context:null,z=void 0!==a.alpha?a.alpha:!1,y=void 0!==a.depth?a.depth:!0,I=void 0!==a.stencil?a.stencil:!0,A=void 0!==a.antialias?a.antialias:!1,J=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,x=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,B=void 0!==a.powerPreference?a.powerPreference:"default",D=[],C=[],E=null,H=[],la=[];this.domElement=v;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=
    !0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var S=this,L=!1,N=null,M=null,P=-1,R="",V=null,W=null,nb=new aa,X=new aa,G=null,Y=0,ea=v.width,U=v.height,wa=1,da=new aa(0,0,ea,U),fa=new aa(0,0,ea,U),$e=!1,$d=new rd,Ja=new Fg,sd=!1,ae=!1,td=new O,Ob=new p,ha={geometries:0,textures:0},ba={frame:0,
    calls:0,vertices:0,faces:0,points:0};this.info={render:ba,memory:ha,programs:null};try{z={alpha:z,depth:y,stencil:I,antialias:A,premultipliedAlpha:J,preserveDrawingBuffer:x,powerPreference:B};v.addEventListener("webglcontextlost",c,!1);v.addEventListener("webglcontextrestored",d,!1);var F=w||v.getContext("webgl",z)||v.getContext("experimental-webgl",z);if(null===F){if(null!==v.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");
    }void 0===F.getShaderPrecisionFormat&&(F.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Gg){console.error("THREE.WebGLRenderer: "+Gg.message)}var ia,T,Z,ca,ga,qa,ra,ta,ua,ma,sa,ja,xa,ya,za,Aa,Ba,pa;b();var ka=new be(S);this.vr=ka;var Ea=new Ue(S,ta,T.maxTextureSize);this.shadowMap=Ea;this.getContext=function(){return F};this.getContextAttributes=function(){return F.getContextAttributes()};this.forceContextLoss=function(){var a=ia.get("WEBGL_lose_context");a&&
    a.loseContext()};this.forceContextRestore=function(){var a=ia.get("WEBGL_lose_context");a&&a.restoreContext()};this.getPixelRatio=function(){return wa};this.setPixelRatio=function(a){void 0!==a&&(wa=a,this.setSize(ea,U,!1))};this.getSize=function(){return{width:ea,height:U}};this.setSize=function(a,b,c){var d=ka.getDevice();d&&d.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ea=a,U=b,v.width=a*wa,v.height=b*wa,!1!==c&&(v.style.width=a+"px",v.style.height=
    b+"px"),this.setViewport(0,0,a,b))};this.getDrawingBufferSize=function(){return{width:ea*wa,height:U*wa}};this.setDrawingBufferSize=function(a,b,c){ea=a;U=b;wa=c;v.width=a*c;v.height=b*c;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){da.set(a,U-b-d,c,d);Z.viewport(nb.copy(da).multiplyScalar(wa))};this.setScissor=function(a,b,c,d){fa.set(a,U-b-d,c,d);Z.scissor(X.copy(fa).multiplyScalar(wa))};this.setScissorTest=function(a){Z.setScissorTest($e=a)};this.getClearColor=function(){return ja.getClearColor()};
    this.setClearColor=function(){ja.setClearColor.apply(ja,arguments)};this.getClearAlpha=function(){return ja.getClearAlpha()};this.setClearAlpha=function(){ja.setClearAlpha.apply(ja,arguments)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=F.COLOR_BUFFER_BIT;if(void 0===b||b)d|=F.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=F.STENCIL_BUFFER_BIT;F.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,
    !0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.dispose=function(){v.removeEventListener("webglcontextlost",c,!1);v.removeEventListener("webglcontextrestored",d,!1);sa.dispose();ka.dispose()};this.renderBufferImmediate=function(a,b,c){Z.initAttributes();var d=ca.get(a);a.hasPositions&&!d.position&&(d.position=F.createBuffer());a.hasNormals&&!d.normal&&(d.normal=F.createBuffer());a.hasUvs&&!d.uv&&(d.uv=F.createBuffer());a.hasColors&&!d.color&&(d.color=F.createBuffer());
    b=b.getAttributes();a.hasPositions&&(F.bindBuffer(F.ARRAY_BUFFER,d.position),F.bufferData(F.ARRAY_BUFFER,a.positionArray,F.DYNAMIC_DRAW),Z.enableAttribute(b.position),F.vertexAttribPointer(b.position,3,F.FLOAT,!1,0,0));if(a.hasNormals){F.bindBuffer(F.ARRAY_BUFFER,d.normal);if(!c.isMeshPhongMaterial&&!c.isMeshStandardMaterial&&!c.isMeshNormalMaterial&&!0===c.flatShading)for(var e=0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,k=(g[e+1]+g[e+4]+g[e+7])/3,m=(g[e+2]+g[e+5]+g[e+
    8])/3;g[e+0]=h;g[e+1]=k;g[e+2]=m;g[e+3]=h;g[e+4]=k;g[e+5]=m;g[e+6]=h;g[e+7]=k;g[e+8]=m}F.bufferData(F.ARRAY_BUFFER,a.normalArray,F.DYNAMIC_DRAW);Z.enableAttribute(b.normal);F.vertexAttribPointer(b.normal,3,F.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(F.bindBuffer(F.ARRAY_BUFFER,d.uv),F.bufferData(F.ARRAY_BUFFER,a.uvArray,F.DYNAMIC_DRAW),Z.enableAttribute(b.uv),F.vertexAttribPointer(b.uv,2,F.FLOAT,!1,0,0));a.hasColors&&0!==c.vertexColors&&(F.bindBuffer(F.ARRAY_BUFFER,d.color),F.bufferData(F.ARRAY_BUFFER,a.colorArray,
    F.DYNAMIC_DRAW),Z.enableAttribute(b.color),F.vertexAttribPointer(b.color,3,F.FLOAT,!1,0,0));Z.disableUnusedAttributes();F.drawArrays(F.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){var g=e.isMesh&&0>e.matrixWorld.determinant();Z.setMaterial(d,g);var h=u(a,b,d,e);a=c.id+"_"+h.id+"_"+(!0===d.wireframe);var k=!1;a!==R&&(R=a,k=!0);e.morphTargetInfluences&&(xa.update(e,c,d,h),k=!0);var g=c.index,m=c.attributes.position;b=1;!0===d.wireframe&&(g=ra.getWireframeAttribute(c),
    b=2);a=ya;if(null!==g){var q=qa.get(g);a=za;a.setIndex(q)}if(k){k=void 0;if(c&&c.isInstancedBufferGeometry&&null===ia.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===k&&(k=0);Z.initAttributes();var n=c.attributes,h=h.getAttributes(),l=d.defaultAttributeValues;for(J in h){var r=h[J];if(0<=r){var t=n[J];if(void 0!==t){var v=t.normalized,p=t.itemSize,
    w=qa.get(t);if(void 0!==w){var A=w.buffer,y=w.type,w=w.bytesPerElement;if(t.isInterleavedBufferAttribute){var z=t.data,I=z.stride,t=t.offset;z&&z.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(r,z.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=z.meshPerAttribute*z.count)):Z.enableAttribute(r);F.bindBuffer(F.ARRAY_BUFFER,A);F.vertexAttribPointer(r,p,y,v,I*w,(k*I+t)*w)}else t.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(r,t.meshPerAttribute),void 0===c.maxInstancedCount&&
    (c.maxInstancedCount=t.meshPerAttribute*t.count)):Z.enableAttribute(r),F.bindBuffer(F.ARRAY_BUFFER,A),F.vertexAttribPointer(r,p,y,v,0,k*p*w)}}else if(void 0!==l&&(v=l[J],void 0!==v))switch(v.length){case 2:F.vertexAttrib2fv(r,v);break;case 3:F.vertexAttrib3fv(r,v);break;case 4:F.vertexAttrib4fv(r,v);break;default:F.vertexAttrib1fv(r,v)}}}Z.disableUnusedAttributes()}null!==g&&F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,q.buffer)}q=0;null!==g?q=g.count:void 0!==m&&(q=m.count);g=c.drawRange.start*b;m=null!==
    f?f.start*b:0;var J=Math.max(g,m);f=Math.max(0,Math.min(q,g+c.drawRange.count*b,m+(null!==f?f.count*b:Infinity))-1-J+1);if(0!==f){if(e.isMesh)if(!0===d.wireframe)Z.setLineWidth(d.wireframeLinewidth*(null===N?wa:1)),a.setMode(F.LINES);else switch(e.drawMode){case 0:a.setMode(F.TRIANGLES);break;case 1:a.setMode(F.TRIANGLE_STRIP);break;case 2:a.setMode(F.TRIANGLE_FAN)}else e.isLine?(d=d.linewidth,void 0===d&&(d=1),Z.setLineWidth(d*(null===N?wa:1)),e.isLineSegments?a.setMode(F.LINES):e.isLineLoop?a.setMode(F.LINE_LOOP):
    a.setMode(F.LINE_STRIP)):e.isPoints&&a.setMode(F.POINTS);c&&c.isInstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,J,f):a.render(J,f)}};this.compile=function(a,b){D.length=0;C.length=0;a.traverse(function(a){a.isLight&&(D.push(a),a.castShadow&&C.push(a))});ua.setup(D,C,b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var c=0;c<b.material.length;c++)n(b.material[c],a.fog,b);else n(b.material,a.fog,b)})};var Fa=!1,Ca=null;this.animate=function(a){Ca=a;Fa||((a=
    ka.getDevice())&&a.isPresenting?a.requestAnimationFrame(h):window.requestAnimationFrame(h),Fa=!0)};this.render=function(a,b,c,d){if(!b||!b.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!L){R="";P=-1;V=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();ka.enabled&&(b=ka.getCamera(b));td.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);$d.setFromMatrix(td);D.length=0;C.length=0;H.length=0;la.length=
    0;ae=this.localClippingEnabled;sd=Ja.init(this.clippingPlanes,ae,b);E=sa.get(a,b);E.init();k(a,b,S.sortObjects);!0===S.sortObjects&&E.sort();ga.updateVideoTextures();sd&&Ja.beginShadows();Ea.render(C,a,b);ua.setup(D,C,b);sd&&Ja.endShadows();ba.frame++;ba.calls=0;ba.vertices=0;ba.faces=0;ba.points=0;void 0===c&&(c=null);this.setRenderTarget(c);ja.render(E,a,b,d);d=E.opaque;var e=E.transparent;if(a.overrideMaterial){var f=a.overrideMaterial;d.length&&m(d,a,b,f);e.length&&m(e,a,b,f)}else d.length&&m(d,
    a,b),e.length&&m(e,a,b);Ba.render(H,a,b);Aa.render(la,a,b,nb);c&&ga.updateRenderTargetMipmap(c);Z.buffers.depth.setTest(!0);Z.buffers.depth.setMask(!0);Z.buffers.color.setMask(!0);Z.setPolygonOffset(!1);ka.enabled&&ka.submitFrame()}};this.setFaceCulling=function(a,b){Z.setCullFace(a);Z.setFlipSided(0===b)};this.allocTextureUnit=function(){var a=Y;a>=T.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+a+" texture units while this GPU supports only "+T.maxTextures);Y+=1;return a};this.setTexture2D=
    function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);ga.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);ga.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&
    (a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?ga.setTextureCube(b,c):ga.setTextureCubeDynamic(b,c)}}();this.getRenderTarget=function(){return N};this.setRenderTarget=function(a){(N=a)&&void 0===ca.get(a).__webglFramebuffer&&ga.setupRenderTarget(a);var b=null,c=!1;a?(b=ca.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube&&(b=
    b[a.activeCubeFace],c=!0),nb.copy(a.viewport),X.copy(a.scissor),G=a.scissorTest):(nb.copy(da).multiplyScalar(wa),X.copy(fa).multiplyScalar(wa),G=$e);M!==b&&(F.bindFramebuffer(F.FRAMEBUFFER,b),M=b);Z.viewport(nb);Z.scissor(X);Z.setScissorTest(G);c&&(c=ca.get(a.texture),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=ca.get(a).__webglFramebuffer;
    if(g){var h=!1;g!==M&&(F.bindFramebuffer(F.FRAMEBUFFER,g),h=!0);try{var k=a.texture,m=k.format,q=k.type;1023!==m&&pa.convert(m)!==F.getParameter(F.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===q||pa.convert(q)===F.getParameter(F.IMPLEMENTATION_COLOR_READ_TYPE)||1015===q&&(ia.get("OES_texture_float")||ia.get("WEBGL_color_buffer_float"))||1016===q&&ia.get("EXT_color_buffer_half_float")?
    F.checkFramebufferStatus(F.FRAMEBUFFER)===F.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&F.readPixels(b,c,d,e,pa.convert(m),pa.convert(q),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&F.bindFramebuffer(F.FRAMEBUFFER,M)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}
    function Pb(a,b){this.name="";this.color=new H(a);this.density=void 0!==b?b:2.5E-4}function Qb(a,b,c){this.name="";this.color=new H(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3}function vd(){x.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function de(a,b,c,d,e){x.call(this);this.lensFlares=[];this.positionScreen=new p;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)}function hb(a){P.call(this);this.type="SpriteMaterial";
    this.color=new H(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)}function Cc(a){x.call(this);this.type="Sprite";this.material=void 0!==a?a:new hb}function Dc(){x.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ec(a,b){a=a||[];this.bones=a.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),
    this.boneInverses=[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new O)}function wd(){x.call(this);this.type="Bone"}function xd(a,b){ra.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new O;this.bindMatrixInverse=new O;a=this.initBones();a=new Ec(a);this.bind(a,this.matrixWorld);this.normalizeSkinWeights()}function W(a){P.call(this);this.type="LineBasicMaterial";this.color=new H(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;
    this.setValues(a)}function sa(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new X(a,b);x.call(this);this.type="Line";this.geometry=void 0!==a?a:new E;this.material=void 0!==b?b:new W({color:16777215*Math.random()})}function X(a,b){sa.call(this,a,b);this.type="LineSegments"}function yd(a,b){sa.call(this,a,b);this.type="LineLoop"}function Ka(a){P.call(this);this.type="PointsMaterial";this.color=new H(16777215);
    this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(a)}function Rb(a,b){x.call(this);this.type="Points";this.geometry=void 0!==a?a:new E;this.material=void 0!==b?b:new Ka({color:16777215*Math.random()})}function Fc(){x.call(this);this.type="Group"}function ee(a,b,c,d,e,f,g,h,k){function m(){a.removeEventListener("loadeddata",m,!1);q.needsUpdate=!0}U.call(this,a,b,c,d,e,f,g,h,k);this.generateMipmaps=!1;var q=this;a.addEventListener("loadeddata",m,!1)}function Sb(a,b,c,d,
    e,f,g,h,k,m,q,n){U.call(this,null,f,g,h,k,m,d,e,q,n);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function Gc(a,b,c,d,e,f,g,h,k,m){m=void 0!==m?m:1026;if(1026!==m&&1027!==m)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&1026===m&&(c=1012);void 0===c&&1027===m&&(c=1020);U.call(this,null,d,e,f,g,h,m,c,k);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=
    this.flipY=!1}function Tb(a){E.call(this);this.type="WireframeGeometry";var b=[],c,d,e,f=[0,0],g={},h=["a","b","c"];if(a&&a.isGeometry){var k=a.faces;var m=0;for(d=k.length;m<d;m++){var q=k[m];for(c=0;3>c;c++){var n=q[h[c]];var u=q[h[(c+1)%3]];f[0]=Math.min(n,u);f[1]=Math.max(n,u);n=f[0]+","+f[1];void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]})}}for(n in g)m=g[n],h=a.vertices[m.index1],b.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry){var h=new p;if(null!==
    a.index){k=a.attributes.position;q=a.index;var l=a.groups;0===l.length&&(l=[{start:0,count:q.count,materialIndex:0}]);a=0;for(e=l.length;a<e;++a)for(m=l[a],c=m.start,d=m.count,m=c,d=c+d;m<d;m+=3)for(c=0;3>c;c++)n=q.getX(m+c),u=q.getX(m+(c+1)%3),f[0]=Math.min(n,u),f[1]=Math.max(n,u),n=f[0]+","+f[1],void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]});for(n in g)m=g[n],h.fromBufferAttribute(k,m.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(k,m.index2),b.push(h.x,h.y,h.z)}else for(k=a.attributes.position,
    m=0,d=k.count/3;m<d;m++)for(c=0;3>c;c++)g=3*m+c,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z),g=3*m+(c+1)%3,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z)}this.addAttribute("position",new B(b,3))}function Hc(a,b,c){L.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Ub(a,b,c));this.mergeVertices()}function Ub(a,b,c){E.call(this);this.type="ParametricBufferGeometry";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=
    new p,k=new p,m=new p,q=new p,n=new p,u,l,t=b+1;for(u=0;u<=c;u++){var v=u/c;for(l=0;l<=b;l++){var w=l/b,k=a(w,v,k);e.push(k.x,k.y,k.z);0<=w-1E-5?(m=a(w-1E-5,v,m),q.subVectors(k,m)):(m=a(w+1E-5,v,m),q.subVectors(m,k));0<=v-1E-5?(m=a(w,v-1E-5,m),n.subVectors(k,m)):(m=a(w,v+1E-5,m),n.subVectors(m,k));h.crossVectors(q,n).normalize();f.push(h.x,h.y,h.z);g.push(w,v)}}for(u=0;u<c;u++)for(l=0;l<b;l++)a=u*t+l+1,h=(u+1)*t+l+1,k=(u+1)*t+l,d.push(u*t+l,a,k),d.push(a,h,k);this.setIndex(d);this.addAttribute("position",
    new B(e,3));this.addAttribute("normal",new B(f,3));this.addAttribute("uv",new B(g,2))}function Ic(a,b,c,d){L.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new ja(a,b,c,d));this.mergeVertices()}function ja(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){b*=3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function g(a,b,c,d){0>d&&1===a.x&&(k[b]=a.x-1);0===c.x&&0===c.z&&(k[b]=d/2/Math.PI+.5)}E.call(this);this.type="PolyhedronBufferGeometry";
    this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],k=[];(function(a){for(var c=new p,d=new p,g=new p,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var k,m,l=c,z=d,y=g,I=Math.pow(2,a),A=[];for(m=0;m<=I;m++){A[m]=[];var J=l.clone().lerp(y,m/I),x=z.clone().lerp(y,m/I),B=I-m;for(k=0;k<=B;k++)A[m][k]=0===k&&m===I?J:J.clone().lerp(x,k/B)}for(m=0;m<I;m++)for(k=0;k<2*(I-m)-1;k++)l=Math.floor(k/2),0===k%2?(e(A[m][l+1]),e(A[m+1][l]),e(A[m][l])):(e(A[m][l+1]),e(A[m+1][l+
    1]),e(A[m+1][l]))}})(d);(function(a){for(var b=new p,c=0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var a=new p,b=0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],k.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));for(var a=new p,b=new p,c=new p,d=new p,e=new D,f=new D,l=new D,w=0,z=0;w<h.length;w+=9,z+=6){a.set(h[w+0],h[w+1],h[w+2]);b.set(h[w+3],h[w+4],h[w+
    5]);c.set(h[w+6],h[w+7],h[w+8]);e.set(k[z+0],k[z+1]);f.set(k[z+2],k[z+3]);l.set(k[z+4],k[z+5]);d.copy(a).add(b).add(c).divideScalar(3);var y=Math.atan2(d.z,-d.x);g(e,z+0,a,y);g(f,z+2,b,y);g(l,z+4,c,y)}for(a=0;a<k.length;a+=6)b=k[a+0],c=k[a+2],d=k[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1>e&&(.2>b&&(k[a+0]+=1),.2>c&&(k[a+2]+=1),.2>d&&(k[a+4]+=1))})();this.addAttribute("position",new B(h,3));this.addAttribute("normal",new B(h.slice(),3));this.addAttribute("uv",new B(k,2));0===d?this.computeVertexNormals():
    this.normalizeNormals()}function Jc(a,b){L.call(this);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Vb(a,b));this.mergeVertices()}function Vb(a,b){ja.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Kc(a,b){L.call(this);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new ub(a,b));this.mergeVertices()}
    function ub(a,b){ja.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Lc(a,b){L.call(this);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Wb(a,b));this.mergeVertices()}function Wb(a,b){var c=(1+Math.sqrt(5))/2;ja.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,
    5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Mc(a,b){L.call(this);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Xb(a,b));this.mergeVertices()}function Xb(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;ja.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,
    d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Nc(a,b,c,d,e,f){L.call(this);this.type="TubeGeometry";this.parameters={path:a,
    tubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new Yb(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function Yb(a,b,c,d,e){function f(e){q=a.getPointAt(e/b,q);var f=g.normals[e];e=g.binormals[e];for(l=0;l<=d;l++){var m=l/d*Math.PI*2,n=Math.sin(m),m=-Math.cos(m);k.x=m*f.x+n*e.x;k.y=m*f.y+n*e.y;k.z=m*f.z+n*e.z;k.normalize();t.push(k.x,
    k.y,k.z);h.x=q.x+c*k.x;h.y=q.y+c*k.y;h.z=q.z+c*k.z;r.push(h.x,h.y,h.z)}}E.call(this);this.type="TubeBufferGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new p,k=new p,m=new D,q=new p,n,l,r=[],t=[],v=[],w=[];for(n=0;n<b;n++)f(n);f(!1===e?b:0);for(n=0;n<=b;n++)for(l=0;l<=d;l++)m.x=n/b,m.y=l/d,v.push(m.x,m.y);(function(){for(l=
    1;l<=b;l++)for(n=1;n<=d;n++){var a=(d+1)*l+(n-1),c=(d+1)*l+n,e=(d+1)*(l-1)+n;w.push((d+1)*(l-1)+(n-1),a,e);w.push(a,c,e)}})();this.setIndex(w);this.addAttribute("position",new B(r,3));this.addAttribute("normal",new B(t,3));this.addAttribute("uv",new B(v,2))}function Oc(a,b,c,d,e,f,g){L.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");
    this.fromBufferGeometry(new Zb(a,b,c,d,e,f));this.mergeVertices()}function Zb(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}E.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||1;b=b||.4;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=[],k=[],m=[],q=[],n,l=new p,r=new p,t=new p,v=new p,w=new p,z=new p,y=new p;for(n=0;n<=
    c;++n){var I=n/c*e*Math.PI*2;g(I,e,f,a,t);g(I+.01,e,f,a,v);z.subVectors(v,t);y.addVectors(v,t);w.crossVectors(z,y);y.crossVectors(w,z);w.normalize();y.normalize();for(I=0;I<=d;++I){var A=I/d*Math.PI*2,J=-b*Math.cos(A),A=b*Math.sin(A);l.x=t.x+(J*y.x+A*w.x);l.y=t.y+(J*y.y+A*w.y);l.z=t.z+(J*y.z+A*w.z);k.push(l.x,l.y,l.z);r.subVectors(l,t).normalize();m.push(r.x,r.y,r.z);q.push(n/c);q.push(I/d)}}for(I=1;I<=c;I++)for(n=1;n<=d;n++)a=(d+1)*I+(n-1),b=(d+1)*I+n,e=(d+1)*(I-1)+n,h.push((d+1)*(I-1)+(n-1),a,e),
    h.push(a,b,e);this.setIndex(h);this.addAttribute("position",new B(k,3));this.addAttribute("normal",new B(m,3));this.addAttribute("uv",new B(q,2))}function Pc(a,b,c,d,e){L.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new $b(a,b,c,d,e));this.mergeVertices()}function $b(a,b,c,d,e){E.call(this);this.type="TorusBufferGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||1;b=b||
    .4;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var f=[],g=[],h=[],k=[],m=new p,q=new p,n=new p,l,r;for(l=0;l<=c;l++)for(r=0;r<=d;r++){var t=r/d*e,v=l/c*Math.PI*2;q.x=(a+b*Math.cos(v))*Math.cos(t);q.y=(a+b*Math.cos(v))*Math.sin(t);q.z=b*Math.sin(v);g.push(q.x,q.y,q.z);m.x=a*Math.cos(t);m.y=a*Math.sin(t);n.subVectors(q,m).normalize();h.push(n.x,n.y,n.z);k.push(r/d);k.push(l/c)}for(l=1;l<=c;l++)for(r=1;r<=d;r++)a=(d+1)*(l-1)+r-1,b=(d+1)*(l-1)+r,e=(d+1)*l+r,f.push((d+1)*l+r-1,a,e),f.push(a,b,
    e);this.setIndex(f);this.addAttribute("position",new B(g,3));this.addAttribute("normal",new B(h,3));this.addAttribute("uv",new B(k,2))}function bf(a,b,c,d,e){for(var f,g=0,h=b,k=c-d;h<c;h+=d)g+=(a[k]-a[h])*(a[h+1]+a[k+1]),k=h;if(e===0<g)for(e=b;e<c;e+=d)f=cf(e,a[e],a[e+1],f);else for(e=c-d;e>=b;e-=d)f=cf(e,a[e],a[e+1],f);f&&vb(f,f.next)&&(Qc(f),f=f.next);return f}function Rc(a,b){if(!a)return a;b||(b=a);do{var c=!1;if(a.steiner||!vb(a,a.next)&&0!==ta(a.prev,a,a.next))a=a.next;else{Qc(a);a=b=a.prev;
    if(a===a.next)break;c=!0}}while(c||a!==b);return b}function Sc(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,k=h;do null===k.z&&(k.z=fe(k.x,k.y,d,e,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;var h=k,m,q,n,l,r=1;do{k=h;var t=h=null;for(q=0;k;){q++;var p=k;for(m=n=0;m<r&&(n++,p=p.nextZ,p);m++);for(l=r;0<n||0<l&&p;)0!==n&&(0===l||!p||k.z<=p.z)?(m=k,k=k.nextZ,n--):(m=p,p=p.nextZ,l--),t?t.nextZ=m:h=m,m.prevZ=t,t=m;k=p}t.nextZ=null;r*=2}while(1<q)}for(h=a;a.prev!==a.next;){k=
    a.prev;p=a.next;if(f)a:{t=a;l=d;var w=e,z=f;q=t.prev;n=t;r=t.next;if(0<=ta(q,n,r))t=!1;else{var y=q.x>n.x?q.x>r.x?q.x:r.x:n.x>r.x?n.x:r.x,I=q.y>n.y?q.y>r.y?q.y:r.y:n.y>r.y?n.y:r.y;m=fe(q.x<n.x?q.x<r.x?q.x:r.x:n.x<r.x?n.x:r.x,q.y<n.y?q.y<r.y?q.y:r.y:n.y<r.y?n.y:r.y,l,w,z);l=fe(y,I,l,w,z);for(w=t.nextZ;w&&w.z<=l;){if(w!==t.prev&&w!==t.next&&zd(q.x,q.y,n.x,n.y,r.x,r.y,w.x,w.y)&&0<=ta(w.prev,w,w.next)){t=!1;break a}w=w.nextZ}for(w=t.prevZ;w&&w.z>=m;){if(w!==t.prev&&w!==t.next&&zd(q.x,q.y,n.x,n.y,r.x,
    r.y,w.x,w.y)&&0<=ta(w.prev,w,w.next)){t=!1;break a}w=w.prevZ}t=!0}}else a:if(t=a,q=t.prev,n=t,r=t.next,0<=ta(q,n,r))t=!1;else{for(m=t.next.next;m!==t.prev;){if(zd(q.x,q.y,n.x,n.y,r.x,r.y,m.x,m.y)&&0<=ta(m.prev,m,m.next)){t=!1;break a}m=m.next}t=!0}if(t)b.push(k.i/c),b.push(a.i/c),b.push(p.i/c),Qc(a),h=a=p.next;else if(a=p,a===h){if(!g)Sc(Rc(a),b,c,d,e,f,1);else if(1===g){g=b;h=c;k=a;do p=k.prev,t=k.next.next,!vb(p,t)&&df(p,k,k.next,t)&&Tc(p,t)&&Tc(t,p)&&(g.push(p.i/h),g.push(k.i/h),g.push(t.i/h),
    Qc(k),Qc(k.next),k=a=t),k=k.next;while(k!==a);a=k;Sc(a,b,c,d,e,f,2)}else if(2===g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(k=g.i!==h.i){k=g;p=h;if(t=k.next.i!==p.i&&k.prev.i!==p.i){b:{t=k;do{if(t.i!==k.i&&t.next.i!==k.i&&t.i!==p.i&&t.next.i!==p.i&&df(t,t.next,k,p)){t=!0;break b}t=t.next}while(t!==k);t=!1}t=!t}if(t=t&&Tc(k,p)&&Tc(p,k)){t=k;q=!1;n=(k.x+p.x)/2;p=(k.y+p.y)/2;do t.y>p!==t.next.y>p&&t.next.y!==t.y&&n<(t.next.x-t.x)*(p-t.y)/(t.next.y-t.y)+t.x&&(q=!q),t=t.next;while(t!==k);t=q}k=t}if(k){a=
    ef(g,h);g=Rc(g,g.next);a=Rc(a,a.next);Sc(g,b,c,d,e,f);Sc(a,b,c,d,e,f);break a}h=h.next}g=g.next}while(g!==a)}break}}}}function Hg(a,b){return a.x-b.x}function Ig(a,b){var c=b,d=a.x,e=a.y,f=-Infinity;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d===f)return h.prev;b=h;for(var g=h.x,k=h.y,m=Infinity,q,c=h.next;c!==
    b;)d>=c.x&&c.x>=g&&d!==c.x&&zd(e<k?d:f,e,g,k,e<k?f:d,e,c.x,c.y)&&(q=Math.abs(e-c.y)/(d-c.x),(q<m||q===m&&c.x>h.x)&&Tc(c,a)&&(h=c,m=q)),c=c.next;return h}function fe(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function Jg(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function zd(a,b,c,d,e,f,g,h){return 0<=(e-
    g)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-g)*(b-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function ta(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function vb(a,b){return a.x===b.x&&a.y===b.y}function df(a,b,c,d){return vb(a,b)&&vb(c,d)||vb(a,d)&&vb(c,b)?!0:0<ta(a,b,c)!==0<ta(a,b,d)&&0<ta(c,d,a)!==0<ta(c,d,b)}function Tc(a,b){return 0>ta(a.prev,a,a.next)?0<=ta(a,b,a.next)&&0<=ta(a,a.prev,b):0>ta(a,b,a.prev)||0>ta(a,a.next,b)}function ef(a,b){var c=new ge(a.i,a.x,a.y),d=new ge(b.i,b.x,b.y),e=a.next,f=b.prev;
    a.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function cf(a,b,c,d){a=new ge(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function Qc(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function ge(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function ib(a,b){L.call(this);this.type="ExtrudeGeometry";this.parameters=
    {shapes:a,options:b};this.fromBufferGeometry(new La(a,b));this.mergeVertices()}function La(a,b){"undefined"!==typeof a&&(E.call(this),this.type="ExtrudeBufferGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeVertexNormals())}function Uc(a,b){L.call(this);this.type="TextGeometry";this.parameters={text:a,parameters:b};this.fromBufferGeometry(new ac(a,b));this.mergeVertices()}function ac(a,b){b=b||{};var c=b.font;if(!c||!c.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),
    new L;a=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);La.call(this,a,b);this.type="TextBufferGeometry"}function Vc(a,b,c,d,e,f,g){L.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new wb(a,b,c,d,e,f,g));this.mergeVertices()}
    function wb(a,b,c,d,e,f,g){E.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||1;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var h=f+g,k,m,q=0,n=[],l=new p,r=new p,t=[],v=[],w=[],z=[];for(m=0;m<=c;m++){var y=[],I=m/c;for(k=0;k<=b;k++){var A=k/b;l.x=-a*Math.cos(d+A*e)*Math.sin(f+I*g);l.y=a*Math.cos(f+
    I*g);l.z=a*Math.sin(d+A*e)*Math.sin(f+I*g);v.push(l.x,l.y,l.z);r.set(l.x,l.y,l.z).normalize();w.push(r.x,r.y,r.z);z.push(A,1-I);y.push(q++)}n.push(y)}for(m=0;m<c;m++)for(k=0;k<b;k++)a=n[m][k+1],d=n[m][k],e=n[m+1][k],g=n[m+1][k+1],(0!==m||0<f)&&t.push(a,d,g),(m!==c-1||h<Math.PI)&&t.push(d,e,g);this.setIndex(t);this.addAttribute("position",new B(v,3));this.addAttribute("normal",new B(w,3));this.addAttribute("uv",new B(z,2))}function Wc(a,b,c,d,e,f){L.call(this);this.type="RingGeometry";this.parameters=
    {innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new bc(a,b,c,d,e,f));this.mergeVertices()}function bc(a,b,c,d,e,f){E.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||.5;b=b||1;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=[],h=[],k=[],m=[],q=a,n=(b-a)/d,l=new p,r=new D,t,v;for(t=
    0;t<=d;t++){for(v=0;v<=c;v++)a=e+v/c*f,l.x=q*Math.cos(a),l.y=q*Math.sin(a),h.push(l.x,l.y,l.z),k.push(0,0,1),r.x=(l.x/b+1)/2,r.y=(l.y/b+1)/2,m.push(r.x,r.y);q+=n}for(t=0;t<d;t++)for(b=t*(c+1),v=0;v<c;v++)a=v+b,e=a+c+1,f=a+c+2,q=a+1,g.push(a,e,q),g.push(e,f,q);this.setIndex(g);this.addAttribute("position",new B(h,3));this.addAttribute("normal",new B(k,3));this.addAttribute("uv",new B(m,2))}function Xc(a,b,c,d){L.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};
    this.fromBufferGeometry(new cc(a,b,c,d));this.mergeVertices()}function cc(a,b,c,d){E.call(this);this.type="LatheBufferGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=Q.clamp(d,0,2*Math.PI);var e=[],f=[],g=[],h=1/b,k=new p,m=new D,q;for(q=0;q<=b;q++){var n=c+q*h*d;var l=Math.sin(n),r=Math.cos(n);for(n=0;n<=a.length-1;n++)k.x=a[n].x*l,k.y=a[n].y,k.z=a[n].x*r,f.push(k.x,k.y,k.z),m.x=q/b,m.y=n/(a.length-1),g.push(m.x,m.y)}for(q=0;q<b;q++)for(n=
    0;n<a.length-1;n++)c=n+q*a.length,h=c+a.length,k=c+a.length+1,m=c+1,e.push(c,h,m),e.push(h,k,m);this.setIndex(e);this.addAttribute("position",new B(f,3));this.addAttribute("uv",new B(g,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=this.attributes.normal.array,e=new p,f=new p,g=new p,c=b*a.length*3,n=q=0;q<a.length;q++,n+=3)e.x=d[n+0],e.y=d[n+1],e.z=d[n+2],f.x=d[c+n+0],f.y=d[c+n+1],f.z=d[c+n+2],g.addVectors(e,f).normalize(),d[n+0]=d[c+n+0]=g.x,d[n+1]=d[c+n+1]=g.y,d[n+2]=d[c+n+2]=g.z}function xb(a,
    b){L.call(this);this.type="ShapeGeometry";"object"===typeof b&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),b=b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new yb(a,b));this.mergeVertices()}function yb(a,b){function c(a){var c,h=e.length/3;a=a.extractPoints(b);var m=a.shape,q=a.holes;if(!1===$a.isClockWise(m))for(m=m.reverse(),a=0,c=q.length;a<c;a++){var l=q[a];!0===$a.isClockWise(l)&&(q[a]=l.reverse())}var p=$a.triangulateShape(m,
    q);a=0;for(c=q.length;a<c;a++)l=q[a],m=m.concat(l);a=0;for(c=m.length;a<c;a++)l=m[a],e.push(l.x,l.y,0),f.push(0,0,1),g.push(l.x,l.y);a=0;for(c=p.length;a<c;a++)m=p[a],d.push(m[0]+h,m[1]+h,m[2]+h),k+=3}E.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:a,curveSegments:b};b=b||12;var d=[],e=[],f=[],g=[],h=0,k=0;if(!1===Array.isArray(a))c(a);else for(var m=0;m<a.length;m++)c(a[m]),this.addGroup(h,k,m),h+=k,k=0;this.setIndex(d);this.addAttribute("position",new B(e,3));this.addAttribute("normal",
    new B(f,3));this.addAttribute("uv",new B(g,2))}function ff(a,b){b.shapes=[];if(Array.isArray(a))for(var c=0,d=a.length;c<d;c++)b.shapes.push(a[c].uuid);else b.shapes.push(a.uuid);return b}function dc(a,b){E.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:b};var c=[];b=Math.cos(Q.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},f=["a","b","c"];if(a.isBufferGeometry){var g=new L;g.fromBufferGeometry(a)}else g=a.clone();g.mergeVertices();g.computeFaceNormals();a=g.vertices;g=g.faces;for(var h=
    0,k=g.length;h<k;h++)for(var m=g[h],q=0;3>q;q++){var n=m[f[q]];var l=m[f[(q+1)%3]];d[0]=Math.min(n,l);d[1]=Math.max(n,l);n=d[0]+","+d[1];void 0===e[n]?e[n]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[n].face2=h}for(n in e)if(d=e[n],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z);this.addAttribute("position",new B(c,3))}function zb(a,b,c,d,e,f,g,h){L.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,
    radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new ab(a,b,c,d,e,f,g,h));this.mergeVertices()}function ab(a,b,c,d,e,f,g,h){function k(c){var e,f=new D,k=new p,u=0,v=!0===c?a:b,y=!0===c?1:-1;var x=t;for(e=1;e<=d;e++)n.push(0,w*y,0),l.push(0,y,0),r.push(.5,.5),t++;var B=t;for(e=0;e<=d;e++){var C=e/d*h+g,E=Math.cos(C),C=Math.sin(C);k.x=v*C;k.y=w*y;k.z=v*E;n.push(k.x,k.y,k.z);l.push(0,y,0);f.x=.5*E+.5;f.y=.5*C*y+.5;r.push(f.x,f.y);
    t++}for(e=0;e<d;e++)f=x+e,k=B+e,!0===c?q.push(k,k+1,f):q.push(k+1,k,f),u+=3;m.addGroup(z,u,!0===c?1:2);z+=u}E.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var m=this;a=void 0!==a?a:1;b=void 0!==b?b:1;c=c||1;d=Math.floor(d)||8;e=Math.floor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var q=[],n=[],l=[],r=[],t=0,v=[],w=c/2,z=0;(function(){var f,k,u=new p,
    J=new p,x=0,B=(b-a)/c;for(k=0;k<=e;k++){var D=[],C=k/e,E=C*(b-a)+a;for(f=0;f<=d;f++){var H=f/d,K=H*h+g,S=Math.sin(K),K=Math.cos(K);J.x=E*S;J.y=-C*c+w;J.z=E*K;n.push(J.x,J.y,J.z);u.set(S,B,K).normalize();l.push(u.x,u.y,u.z);r.push(H,1-C);D.push(t++)}v.push(D)}for(f=0;f<d;f++)for(k=0;k<e;k++)u=v[k+1][f],J=v[k+1][f+1],B=v[k][f+1],q.push(v[k][f],u,B),q.push(u,J,B),x+=6;m.addGroup(z,x,0);z+=x})();!1===f&&(0<a&&k(!0),0<b&&k(!1));this.setIndex(q);this.addAttribute("position",new B(n,3));this.addAttribute("normal",
    new B(l,3));this.addAttribute("uv",new B(r,2))}function Yc(a,b,c,d,e,f,g){zb.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function Zc(a,b,c,d,e,f,g){ab.call(this,0,a,b,c,d,e,f,g);this.type="ConeBufferGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function $c(a,b,c,d){L.call(this);this.type="CircleGeometry";this.parameters=
    {radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new ec(a,b,c,d));this.mergeVertices()}function ec(a,b,c,d){E.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||1;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=[],f=[],g=[],h=[],k,m=new p,q=new D;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);var n=0;for(k=3;n<=b;n++,k+=3){var l=c+n/b*d;m.x=a*Math.cos(l);m.y=a*Math.sin(l);f.push(m.x,m.y,
    m.z);g.push(0,0,1);q.x=(f[k]/a+1)/2;q.y=(f[k+1]/a+1)/2;h.push(q.x,q.y)}for(k=1;k<=b;k++)e.push(k,k+1,0);this.setIndex(e);this.addAttribute("position",new B(f,3));this.addAttribute("normal",new B(g,3));this.addAttribute("uv",new B(h,2))}function fc(a){P.call(this);this.type="ShadowMaterial";this.color=new H(0);this.opacity=1;this.transparent=this.lights=!0;this.setValues(a)}function gc(a){Fa.call(this,a);this.type="RawShaderMaterial"}function Ua(a){P.call(this);this.defines={STANDARD:""};this.type=
    "MeshStandardMaterial";this.color=new H(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new H(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=
    .98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Ab(a){Ua.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function Ma(a){P.call(this);this.type="MeshPhongMaterial";this.color=new H(16777215);this.specular=new H(1118481);this.shininess=30;this.lightMap=this.map=null;
    this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new H(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=
    this.morphTargets=this.skinning=!1;this.setValues(a)}function Bb(a){Ma.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(a)}function Cb(a){P.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=
    !1;this.setValues(a)}function Db(a){P.call(this);this.type="MeshLambertMaterial";this.color=new H(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new H(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=
    this.skinning=!1;this.setValues(a)}function Eb(a){W.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function he(a,b,c){var d=this,e=!1,f=0,g=0,h=void 0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==
    d.onError)d.onError(a)};this.resolveURL=function(a){return h?h(a):a};this.setURLModifier=function(a){h=a;return this}}function Na(a){this.manager=void 0!==a?a:xa}function gf(a){this.manager=void 0!==a?a:xa;this._parser=null}function ie(a){this.manager=void 0!==a?a:xa;this._parser=null}function ad(a){this.manager=void 0!==a?a:xa}function je(a){this.manager=void 0!==a?a:xa}function Ad(a){this.manager=void 0!==a?a:xa}function C(){this.type="Curve";this.arcLengthDivisions=200}function Ba(a,b,c,d,e,f,
    g,h){C.call(this);this.type="EllipseCurve";this.aX=a||0;this.aY=b||0;this.xRadius=c||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*Math.PI;this.aClockwise=g||!1;this.aRotation=h||0}function hc(a,b,c,d,e,f){Ba.call(this,a,b,c,c,d,e,f);this.type="ArcCurve"}function ke(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,f,g,h,k){e=k*(g-e);h=k*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,k,m,q){e=((f-e)/k-(g-e)/(k+m)+(g-f)/m)*m;h=((g-f)/m-
    (h-f)/(m+q)+(h-g)/q)*m;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=e*e;return a+b*e+c*f+d*f*e}}}function ca(a,b,c,d){C.call(this);this.type="CatmullRomCurve3";this.points=a||[];this.closed=b||!1;this.curveType=c||"centripetal";this.tension=d||.5}function hf(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function bd(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function cd(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*
    a*a*d+a*a*a*e}function Oa(a,b,c,d){C.call(this);this.type="CubicBezierCurve";this.v0=a||new D;this.v1=b||new D;this.v2=c||new D;this.v3=d||new D}function Va(a,b,c,d){C.call(this);this.type="CubicBezierCurve3";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p;this.v3=d||new p}function ya(a,b){C.call(this);this.type="LineCurve";this.v1=a||new D;this.v2=b||new D}function Pa(a,b){C.call(this);this.type="LineCurve3";this.v1=a||new p;this.v2=b||new p}function Qa(a,b,c){C.call(this);this.type="QuadraticBezierCurve";
    this.v0=a||new D;this.v1=b||new D;this.v2=c||new D}function Wa(a,b,c){C.call(this);this.type="QuadraticBezierCurve3";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p}function Ra(a){C.call(this);this.type="SplineCurve";this.points=a||[]}function bb(){C.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function Sa(a){bb.call(this);this.type="Path";this.currentPoint=new D;a&&this.setFromPoints(a)}function jb(a){Sa.call(this,a);this.uuid=Q.generateUUID();this.type="Shape";this.holes=
    []}function da(a,b){x.call(this);this.type="Light";this.color=new H(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0}function Bd(a,b,c){da.call(this,a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(x.DefaultUp);this.updateMatrix();this.groundColor=new H(b)}function Fb(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new D(512,512);this.map=null;this.matrix=new O}function Cd(){Fb.call(this,new ba(50,1,.5,500))}function Dd(a,b,c,d,e,f){da.call(this,a,b);this.type=
    "SpotLight";this.position.copy(x.DefaultUp);this.updateMatrix();this.target=new x;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new Cd}function Ed(a,b,c,d){da.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=
    a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new Fb(new ba(90,1,.5,500))}function Fd(){Fb.call(this,new Lb(-5,5,5,-5,.5,500))}function Gd(a,b){da.call(this,a,b);this.type="DirectionalLight";this.position.copy(x.DefaultUp);this.updateMatrix();this.target=new x;this.shadow=new Fd}function Hd(a,b){da.call(this,a,b);this.type="AmbientLight";this.castShadow=void 0}function Id(a,b,c,d){da.call(this,a,b);this.type="RectAreaLight";this.position.set(0,1,0);this.updateMatrix();
    this.width=void 0!==c?c:10;this.height=void 0!==d?d:10}function Jd(a,b,c,d){T.call(this,a,b,c,d)}function Kd(a,b,c){T.call(this,a,b,c)}function pa(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c}function Ld(a,b,c,d){pa.call(this,a,b,c,d)}function dd(a,b,c,d){T.call(this,a,b,c,d)}function Md(a,b,c,d){T.call(this,a,b,c,d)}function ic(a,b,c,d){T.call(this,a,b,c,d)}function Nd(a,b,c,d){pa.call(this,a,b,c,d);
    this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function ed(a,b,c,d){pa.call(this,a,b,c,d)}function Od(a,b,c,d){pa.call(this,a,b,c,d)}function T(a,b,c,d){if(void 0===a)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===b||0===b.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a;this.times=ga.convertArray(b,this.TimeBufferType);this.values=ga.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);
    this.validate();this.optimize()}function jc(a,b,c,d){T.call(this,a,b,c,d)}function Ca(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=Q.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Pd(a){this.manager=void 0!==a?a:xa;this.textures={}}function le(a){this.manager=void 0!==a?a:xa}function kc(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function me(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),
    a=void 0);this.manager=void 0!==a?a:xa;this.withCredentials=!1}function jf(a){this.manager=void 0!==a?a:xa;this.texturePath=""}function ne(a){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=void 0!==a?a:xa;this.options=void 0}function oe(){this.type="ShapePath";this.subPaths=[];this.currentPath=null}function pe(a){this.type="Font";
    this.data=a}function kf(a){this.manager=void 0!==a?a:xa}function qe(a){this.manager=void 0!==a?a:xa}function lf(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new ba;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new ba;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function fd(a,b,c){x.call(this);this.type="CubeCamera";var d=new ba(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new p(1,0,0));this.add(d);var e=new ba(90,1,a,b);e.up.set(0,-1,
    0);e.lookAt(new p(-1,0,0));this.add(e);var f=new ba(90,1,a,b);f.up.set(0,0,1);f.lookAt(new p(0,1,0));this.add(f);var g=new ba(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new p(0,-1,0));this.add(g);var h=new ba(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new p(0,0,1));this.add(h);var k=new ba(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new p(0,0,-1));this.add(k);this.renderTarget=new Jb(c,c,{format:1022,magFilter:1006,minFilter:1006});this.renderTarget.texture.name="CubeCamera";this.update=function(a,b){null===this.parent&&
    this.updateMatrixWorld();var c=this.renderTarget,m=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=m;c.activeCubeFace=5;a.render(b,k,c);a.setRenderTarget(null)};this.clear=function(a,b,c,d){for(var e=this.renderTarget,f=0;6>f;f++)e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d);a.setRenderTarget(null)}}
    function re(){x.call(this);this.type="AudioListener";this.context=se.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function lc(a){x.call(this);this.type="Audio";this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function te(a){lc.call(this,
    a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function ue(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function ve(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=
    b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function mf(a,b,c){c=c||qa.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function qa(a,b,c){this.path=b;this.parsedPath=c||qa.parseTrackName(b);this.node=qa.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function nf(){this.uuid=Q.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b)a[arguments[b].uuid]=
    b;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function of(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=
    d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function we(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=
    0;this.timeScale=1}function Qd(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a}function xe(){E.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function ye(a,b,c,d){this.uuid=Q.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function mc(a,b){this.uuid=Q.generateUUID();this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};
    this.onUploadCallback=function(){};this.version=0}function ze(a,b,c){mc.call(this,a,b);this.meshPerAttribute=c||1}function Ae(a,b,c){M.call(this,a,b);this.meshPerAttribute=c||1}function pf(a,b,c,d){this.ray=new sb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function qf(a,
    b){return a.distance-b.distance}function Be(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)Be(a[d],b,c,!0)}}function rf(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function sf(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this}function tf(a,b,c){this.radius=void 0!==a?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==c?c:0;return this}function gd(a){x.call(this);
    this.material=a;this.render=function(){}}function hd(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new E;b=new B(6*b,3);c.addAttribute("position",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function nc(a,b){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=
    !1;this.color=b;a=new E;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute("position",new B(b,3));b=new W({fog:!1});this.cone=new X(a,b);this.add(this.cone);this.update()}function uf(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,uf(a.children[c]));return b}function oc(a){for(var b=uf(a),c=new E,d=[],e=
    [],f=new H(0,0,1),g=new H(0,1,0),h=0;h<b.length;h++){var k=b[h];k.parent&&k.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute("position",new B(d,3));c.addAttribute("color",new B(e,3));d=new W({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});X.call(this,c,d);this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}function pc(a,b,c){this.light=a;this.light.updateMatrixWorld();this.color=c;a=new wb(b,4,2);b=new Aa({wireframe:!0,
    fog:!1});ra.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function qc(a,b){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new W({fog:!1});b=new E;b.addAttribute("position",new M(new Float32Array(15),3));this.line=new sa(b,a);this.add(this.line);this.update()}function rc(a,b,c){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=
    !1;this.color=c;a=new ub(b);a.rotateY(.5*Math.PI);this.material=new Aa({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);b=a.getAttribute("position");b=new Float32Array(3*b.count);a.addAttribute("color",new M(b,3));this.add(new ra(a,this.material));this.update()}function id(a,b,c,d){a=a||10;b=b||10;c=new H(void 0!==c?c:4473924);d=new H(void 0!==d?d:8947848);var e=b/2,f=a/b,g=a/2;a=[];for(var h=[],k=0,m=0,q=-g;k<=b;k++,q+=f){a.push(-g,0,q,g,0,q);a.push(q,0,-g,q,0,g);var n=
    k===e?c:d;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3}b=new E;b.addAttribute("position",new B(a,3));b.addAttribute("color",new B(h,3));c=new W({vertexColors:2});X.call(this,b,c)}function Rd(a,b,c,d,e,f){a=a||10;b=b||16;c=c||8;d=d||64;e=new H(void 0!==e?e:4473924);f=new H(void 0!==f?f:8947848);var g=[],h=[],k;for(k=0;k<=b;k++){var m=k/b*2*Math.PI;var q=Math.sin(m)*a;m=Math.cos(m)*a;g.push(0,0,0);g.push(q,0,m);var n=k&1?e:f;h.push(n.r,n.g,n.b);h.push(n.r,n.g,n.b)}for(k=
    0;k<=c;k++){n=k&1?e:f;var l=a-a/c*k;for(b=0;b<d;b++)m=b/d*2*Math.PI,q=Math.sin(m)*l,m=Math.cos(m)*l,g.push(q,0,m),h.push(n.r,n.g,n.b),m=(b+1)/d*2*Math.PI,q=Math.sin(m)*l,m=Math.cos(m)*l,g.push(q,0,m),h.push(n.r,n.g,n.b)}a=new E;a.addAttribute("position",new B(g,3));a.addAttribute("color",new B(h,3));g=new W({vertexColors:2});X.call(this,a,g)}function jd(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=c.faces.length:
    console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new E;b=new B(6*b,3);c.addAttribute("position",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function sc(a,b,c){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void 0===b&&(b=1);a=new E;a.addAttribute("position",new B([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new W({fog:!1});
    this.lightPlane=new sa(a,b);this.add(this.lightPlane);a=new E;a.addAttribute("position",new B([0,0,0,0,0,1],3));this.targetLine=new sa(a,b);this.add(this.targetLine);this.update()}function kd(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void 0===h[a]&&(h[a]=[]);h[a].push(f.length/3-1)}var d=new E,e=new W({color:16777215,vertexColors:1}),f=[],g=[],h={},k=new H(16755200),m=new H(16711680),q=new H(43775),l=new H(16777215),u=new H(3355443);b("n1","n2",k);b("n2",
    "n4",k);b("n4","n3",k);b("n3","n1",k);b("f1","f2",k);b("f2","f4",k);b("f4","f3",k);b("f3","f1",k);b("n1","f1",k);b("n2","f2",k);b("n3","f3",k);b("n4","f4",k);b("p","n1",m);b("p","n2",m);b("p","n3",m);b("p","n4",m);b("u1","u2",q);b("u2","u3",q);b("u3","u1",q);b("c","t",l);b("p","c",u);b("cn1","cn2",u);b("cn3","cn4",u);b("cf1","cf2",u);b("cf3","cf4",u);d.addAttribute("position",new B(f,3));d.addAttribute("color",new B(g,3));X.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();
    this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function Gb(a,b){this.object=a;void 0===b&&(b=16776960);a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new Float32Array(24),d=new E;d.setIndex(new M(a,1));d.addAttribute("position",new M(c,3));X.call(this,d,new W({color:b}));this.matrixAutoUpdate=!1;this.update()}function ld(a,b){this.type="Box3Helper";this.box=a;a=void 0!==b?b:16776960;b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,
    4,1,5,2,6,3,7]);var c=new E;c.setIndex(new M(b,1));c.addAttribute("position",new B([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));X.call(this,c,new W({color:a}));this.geometry.computeBoundingSphere()}function md(a,b,c){this.type="PlaneHelper";this.plane=a;this.size=void 0===b?1:b;a=void 0!==c?c:16776960;b=new E;b.addAttribute("position",new B([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeBoundingSphere();sa.call(this,b,new W({color:a}));b=new E;
    b.addAttribute("position",new B([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeBoundingSphere();this.add(new ra(b,new Aa({color:a,opacity:.2,transparent:!0,depthWrite:!1})))}function Hb(a,b,c,d,e,f){x.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=.2*c);void 0===f&&(f=.2*e);void 0===Sd&&(Sd=new E,Sd.addAttribute("position",new B([0,0,0,0,1,0],3)),Ce=new ab(0,.5,1,5,1),Ce.translate(0,-.5,0));this.position.copy(b);this.line=new sa(Sd,new W({color:d}));this.line.matrixAutoUpdate=
    !1;this.add(this.line);this.cone=new ra(Ce,new Aa({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}function nd(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new E;a.addAttribute("position",new B(b,3));a.addAttribute("color",new B([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new W({vertexColors:2});X.call(this,a,b)}function vf(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ca.call(this,
    a);this.type="catmullrom";this.closed=!0}function wf(a){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ca.call(this,a);this.type="catmullrom"}function De(a){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");ca.call(this,a);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a});void 0===
    Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,
    e)&&(b[e]=d[e])}return b}}();Object.assign(za.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==
    this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var b=b.slice(0),c=0,d=b.length;c<d;c++)b[c].call(this,a)}}}});var Q={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var a=[],b=0;256>b;b++)a[b]=(16>b?"0":"")+b.toString(16).toUpperCase();return function(){var b=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[d&255]+a[d>>8&
    255]+"-"+a[d>>16&15|64]+a[d>>24&255]+"-"+a[e&63|128]+a[e>>8&255]+"-"+a[e>>16&255]+a[e>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255]}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;
    a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*Q.DEG2RAD},radToDeg:function(a){return a*Q.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:function(a){return Math.pow(2,Math.floor(Math.log(a)/
    Math.LN2))}};Object.defineProperties(D.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(D.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+
    a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},
    addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=
    a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},applyMatrix3:function(a){var b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=a[1]*b+a[4]*c+a[7];return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,
    b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=new D,b=new D;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=
    Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||
    1)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,
    a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=
    this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});Object.assign(O.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,k,m,q,l,u,r,t,p){var n=this.elements;n[0]=a;n[4]=b;n[8]=c;n[12]=d;n[1]=e;n[5]=f;n[9]=g;n[13]=h;n[2]=k;n[6]=m;n[10]=q;n[14]=l;n[3]=u;n[7]=r;n[11]=t;n[15]=p;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new O).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=
    a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,
    1);return this},extractRotation:function(){var a=new p;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
    var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){var k=f*h;var m=f*e;var q=c*h;a=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=m+q*d;b[5]=k-a*d;b[9]=-c*g;b[2]=a-k*d;b[6]=q+m*d;b[10]=f*g}else"YXZ"===a.order?(k=g*h,m=g*e,q=d*h,a=d*e,b[0]=k+a*c,b[4]=q*c-m,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=m*c-q,b[6]=a+k*c,b[10]=f*g):"ZXY"===a.order?(k=g*h,m=g*e,q=d*h,a=d*e,b[0]=k-a*c,b[4]=-f*e,b[8]=q+m*c,b[1]=m+q*c,b[5]=f*h,b[9]=
    a-k*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(k=f*h,m=f*e,q=c*h,a=c*e,b[0]=g*h,b[4]=q*d-m,b[8]=k*d+a,b[1]=g*e,b[5]=a*d+k,b[9]=m*d-q,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(k=f*g,m=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=a-k*e,b[8]=q*e+m,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=m*e+q,b[10]=k-a*e):"XZY"===a.order&&(k=f*g,m=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=k*e+a,b[5]=f*h,b[9]=m*e-q,b[2]=q*e-m,b[6]=c*h,b[10]=a*e+k);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=
    this.elements,c=a._x,d=a._y,e=a._z,f=a._w,g=c+c,h=d+d,k=e+e;a=c*g;var m=c*h,c=c*k,q=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(q+e);b[4]=m-f;b[8]=c+h;b[1]=m+f;b[5]=1-(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+q);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new p,b=new p,c=new p;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,
    c.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;
    b=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],k=c[5],m=c[9],q=c[13],n=c[2],l=c[6],r=c[10],t=c[14],p=c[3],w=c[7],z=c[11],c=c[15],y=d[0],I=d[4],A=d[8],J=d[12],x=d[1],B=d[5],D=d[9],C=d[13],E=d[2],H=d[6],K=d[10],S=d[14],L=d[3],N=d[7],M=d[11],d=d[15];b[0]=a*y+e*x+f*E+g*L;b[4]=a*I+e*B+f*H+g*N;b[8]=a*A+e*D+f*K+g*M;b[12]=a*J+e*C+f*S+g*d;b[1]=h*y+k*x+m*E+q*L;b[5]=h*I+k*B+m*H+q*N;b[9]=h*A+k*D+m*K+q*M;b[13]=h*J+k*C+m*S+q*d;b[2]=n*y+l*x+r*E+t*L;b[6]=n*I+l*B+r*H+t*N;b[10]=n*A+l*D+r*K+t*M;b[14]=n*J+l*
    C+r*S+t*d;b[3]=p*y+w*x+z*E+c*L;b[7]=p*I+w*B+z*H+c*N;b[11]=p*A+w*D+z*K+c*M;b[15]=p*J+w*C+z*S+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),determinant:function(){var a=
    this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],m=a[2],q=a[6],n=a[10],l=a[14];return a[3]*(+e*h*q-d*k*q-e*g*n+c*k*n+d*g*l-c*h*l)+a[7]*(+b*h*l-b*k*n+e*f*n-d*f*l+d*k*m-e*h*m)+a[11]*(+b*k*q-b*g*l-e*f*q+c*f*l+e*g*m-c*k*m)+a[15]*(-d*g*m-b*h*q+b*g*n+d*f*q-c*f*n+c*h*m)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},setPosition:function(a){var b=
    this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],f=d[2],g=d[3],h=d[4],k=d[5],m=d[6],q=d[7],l=d[8],u=d[9],r=d[10],t=d[11],p=d[12],w=d[13],z=d[14],d=d[15],y=u*z*q-w*r*q+w*m*t-k*z*t-u*m*d+k*r*d,x=p*r*q-l*z*q-p*m*t+h*z*t+l*m*d-h*r*d,A=l*w*q-p*u*q+p*k*t-h*w*t-l*k*d+h*u*d,J=p*u*m-l*w*m-p*k*r+h*w*r+l*k*z-h*u*z,B=a*y+e*x+f*A+g*J;if(0===B){if(!0===b)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");
    console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}b=1/B;c[0]=y*b;c[1]=(w*r*g-u*z*g-w*f*t+e*z*t+u*f*d-e*r*d)*b;c[2]=(k*z*g-w*m*g+w*f*q-e*z*q-k*f*d+e*m*d)*b;c[3]=(u*m*g-k*r*g-u*f*q+e*r*q+k*f*t-e*m*t)*b;c[4]=x*b;c[5]=(l*z*g-p*r*g+p*f*t-a*z*t-l*f*d+a*r*d)*b;c[6]=(p*m*g-h*z*g-p*f*q+a*z*q+h*f*d-a*m*d)*b;c[7]=(h*r*g-l*m*g+l*f*q-a*r*q-h*f*t+a*m*t)*b;c[8]=A*b;c[9]=(p*u*g-l*w*g-p*e*t+a*w*t+l*e*d-a*u*d)*b;c[10]=(h*w*g-p*k*g+p*e*q-a*w*q-h*e*d+a*k*d)*b;c[11]=
    (l*k*g-h*u*g-l*e*q+a*u*q+h*e*t-a*k*t)*b;c[12]=J*b;c[13]=(l*w*f-p*u*f+p*e*r-a*w*r-l*e*z+a*u*z)*b;c[14]=(p*k*f-h*w*f-p*e*m+a*w*m+h*e*z-a*k*z)*b;c[15]=(h*u*f-l*k*f+l*e*m-a*u*m-h*e*r+a*k*r)*b;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],
    a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=
    Math.cos(b);b=Math.sin(b);var d=1-c,e=a.x,f=a.y;a=a.z;var g=d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new p,b=new O;return function(c,
    d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;var f=1/h,m=1/k;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=k;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
    var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),m=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*m;g[14]=-((f+e)*m);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;
    a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(ha,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,
    d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],m=c[d+2];c=c[d+3];d=e[f+0];var q=e[f+1],l=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==q||m!==l){f=1-g;var u=h*d+k*q+m*l+c*e,r=0<=u?1:-1,p=1-u*u;p>Number.EPSILON&&(p=Math.sqrt(p),u=Math.atan2(p,u*r),f=Math.sin(f*u)/p,g=Math.sin(g*u)/p);r*=g;h=h*f+d*r;k=k*f+q*r;m=m*f+l*r;c=c*f+e*r;f===1-g&&(g=1/Math.sqrt(h*h+k*k+m*m+c*c),h*=g,k*=g,m*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=m;a[b+3]=c}});Object.defineProperties(ha.prototype,{x:{get:function(){return this._x},
    set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=a;this.onChangeCallback()}}});Object.assign(ha.prototype,{set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,
    this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=a._x,d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),k=f(d/2),f=f(e/2),c=g(c/2),d=g(d/2),e=g(e/2);"XYZ"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):"YXZ"===a?(this._x=c*k*f+
    h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):"ZXY"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):"ZYX"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):"YZX"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f-c*d*e):"XZY"===a&&(this._x=c*k*f-h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
    b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6],b=b[10],m=c+f+b;0<m?(c=.5/Math.sqrt(m+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
    .25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new p,b;return function(c,d){void 0===a&&(a=new p);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=
    -1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
    multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();
    return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;a=Math.sqrt(1-g*g);if(.001>Math.abs(a))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var h=Math.atan2(a,g),g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;
    this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
    a;return this},onChangeCallback:function(){}});Object.assign(p.prototype,{isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;
    case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},
    addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=
    a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new ha;return function(b){b&&b.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");
    return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new ha;return function(b,c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+
    a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,k=a*c+g*b-e*d,m=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+k*-g-m*-f;this.y=k*a+b*-f+m*-e-h*-g;this.z=m*a+b*-g+h*-f-k*-e;return this},project:function(){var a=new O;return function(b){a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a=new O;return function(b){a.multiplyMatrices(b.matrixWorld,
    a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=
    Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a=new p,b=new p;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=
    Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=
    -this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-
    this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b)):this.crossVectors(this,a)},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=
    a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new p;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new p;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(Q.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-
    a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=
    a[13];this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=
    []);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(ma.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,k){var m=this.elements;m[0]=a;m[1]=d;m[2]=g;m[3]=b;m[4]=e;m[5]=h;m[6]=c;m[7]=f;m[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},
    copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplyMatrices(this,
    a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[3],f=c[6],g=c[1],h=c[4],k=c[7],m=c[2],q=c[5],c=c[8],l=d[0],p=d[3],r=d[6],t=d[1],v=d[4],w=d[7],z=d[2],y=d[5],d=d[8];b[0]=a*l+e*t+f*z;b[3]=a*p+e*v+f*y;b[6]=a*r+e*w+f*d;b[1]=g*l+h*t+k*z;b[4]=g*p+h*v+k*y;b[7]=g*r+h*w+k*d;b[2]=m*l+q*t+c*z;b[5]=m*p+q*v+c*y;b[8]=m*r+q*w+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;
    b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h},getInverse:function(a,b){a&&a.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var c=a.elements;a=this.elements;var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],m=c[6],q=c[7],c=c[8],l=c*h-k*q,p=k*m-c*g,r=q*g-h*m,t=d*l+e*p+f*r;if(0===t){if(!0===
    b)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}b=1/t;a[0]=l*b;a[1]=(f*q-c*e)*b;a[2]=(k*e-f*h)*b;a[3]=p*b;a[4]=(c*d-f*m)*b;a[5]=(f*g-k*d)*b;a[6]=r*b;a[7]=(e*m-q*d)*b;a[8]=(h*d-e*g)*b;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},
    transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},setUvTransform:function(a,b,c,d,e,f,g){var h=Math.cos(e);e=Math.sin(e);this.set(c*h,c*e,-c*(h*f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1)},scale:function(a,b){var c=this.elements;c[0]*=a;c[3]*=a;c[6]*=a;c[1]*=b;c[4]*=b;c[7]*=b;return this},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.elements,d=c[0],e=c[3],f=c[6],g=c[1],h=c[4],
    k=c[7];c[0]=b*d+a*g;c[3]=b*e+a*h;c[6]=b*f+a*k;c[1]=-a*d+b*g;c[4]=-a*e+b*h;c[7]=-a*f+b*k;return this},translate:function(a,b){var c=this.elements;c[0]+=a*c[2];c[3]+=a*c[5];c[6]+=a*c[8];c[1]+=b*c[2];c[4]+=b*c[5];c[7]+=b*c[8];return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=
    this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}});var Af=0;U.DEFAULT_IMAGE=void 0;U.DEFAULT_MAPPING=300;U.prototype=Object.assign(Object.create(za.prototype),{constructor:U,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=
    a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){var b=void 0===a||"string"===typeof a;if(!b&&void 0!==
    a.textures[this.uuid])return a.textures[this.uuid];var c={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=Q.generateUUID());
    if(!b&&void 0===a.images[d.uuid]){var e=a.images,f=d.uuid,g=d.uuid;if(d instanceof HTMLCanvasElement)var h=d;else{h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");h.width=d.width;h.height=d.height;var k=h.getContext("2d");d instanceof ImageData?k.putImageData(d,0,0):k.drawImage(d,0,0,d.width,d.height)}h=2048<h.width||2048<h.height?h.toDataURL("image/jpeg",.6):h.toDataURL("image/png");e[f]={uuid:g,url:h}}c.image=d.uuid}b||(a.textures[this.uuid]=c);return c},dispose:function(){this.dispatchEvent({type:"dispose"})},
    transformUv:function(a){if(300===this.mapping){a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}});Object.defineProperty(U.prototype,
    "needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(aa.prototype,{isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=
    b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
    this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,
    b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*
    e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var k=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(c+
    e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(b+f+m-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;f=(f+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+k)/4;b>f&&b>m?.01>b?(k=0,c=h=.707106781):(k=Math.sqrt(b),h=c/k,c=d/k):f>m?.01>f?(k=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),k=c/h,c=g/h):.01>m?(h=k=.707106781,c=0):(c=Math.sqrt(m),k=d/c,h=g/c);this.set(k,h,c,a);return this}a=Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(k-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;
    this.w=Math.acos((b+f+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,
    this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new aa,b=new aa);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);
    this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},
    dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=
    (a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,
    b,c){void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}});kb.prototype=Object.assign(Object.create(za.prototype),{constructor:kb,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=
    a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Jb.prototype=Object.create(kb.prototype);Jb.prototype.constructor=Jb;Jb.prototype.isWebGLRenderTargetCube=!0;lb.prototype=Object.create(U.prototype);lb.prototype.constructor=lb;lb.prototype.isDataTexture=!0;db.prototype=Object.create(U.prototype);
    db.prototype.constructor=db;db.prototype.isCubeTexture=!0;Object.defineProperty(db.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});var Ne=new U,Oe=new db,Ie=[],Ke=[],Me=new Float32Array(16),Le=new Float32Array(9);Se.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,b[f.id])}};var Vd=/([\w\d_]+)(\])?(\[|\.)?/g;mb.prototype.setValue=function(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};mb.prototype.setOptional=
    function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};mb.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};mb.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};var Kg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,
    cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,
    deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,
    lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,
    mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,
    royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(H.prototype,{isColor:!0,r:1,g:1,b:1,set:function(a){a&&
    a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=Q.euclideanModulo(b,
    1);c=Q.clamp(c,0,1);d=Q.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(255,
    parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var d=parseFloat(c[1])/360,
    e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=Kg[a],void 0!==
    c?this.setHex(c):console.warn("THREE.Color: Unknown color "+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},convertGammaToLinear:function(){var a=
    this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var k=e-f,f=.5>=h?k/(e+f):
    k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=
    a;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=
    0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},toJSON:function(){return this.getHex()}});var K={common:{diffuse:{value:new H(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ma},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},
    aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new D(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},
    fogFar:{value:2E3},fogColor:{value:new H(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},
    pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new H(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new ma}}},
    Ga={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}},R={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",
    alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",
    aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",
    bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",
    clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",
    clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",
    color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",
    cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",
    defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",
    emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",
    envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
    envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",
    envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",
    fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",
    gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",
    lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
    lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
    lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",
    lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",
    lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
    lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",
    logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",
    map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",
    metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",
    morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",
    normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",
    normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",
    packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
    premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",
    roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
    shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",
    shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",
    shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",
    skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",
    skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",
    specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",
    uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",
    uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
    uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",
    cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",
    depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",
    distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",
    distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",
    equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",
    linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
    linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",
    meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
    meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
    meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
    meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
    meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
    meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
    normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",
    points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
    points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},
    tb={basic:{uniforms:Ga.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.fog]),vertexShader:R.meshbasic_vert,fragmentShader:R.meshbasic_frag},lambert:{uniforms:Ga.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.fog,K.lights,{emissive:{value:new H(0)}}]),vertexShader:R.meshlambert_vert,fragmentShader:R.meshlambert_frag},phong:{uniforms:Ga.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.bumpmap,K.normalmap,K.displacementmap,K.gradientmap,
    K.fog,K.lights,{emissive:{value:new H(0)},specular:{value:new H(1118481)},shininess:{value:30}}]),vertexShader:R.meshphong_vert,fragmentShader:R.meshphong_frag},standard:{uniforms:Ga.merge([K.common,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.bumpmap,K.normalmap,K.displacementmap,K.roughnessmap,K.metalnessmap,K.fog,K.lights,{emissive:{value:new H(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:R.meshphysical_vert,fragmentShader:R.meshphysical_frag},points:{uniforms:Ga.merge([K.points,
    K.fog]),vertexShader:R.points_vert,fragmentShader:R.points_frag},dashed:{uniforms:Ga.merge([K.common,K.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:R.linedashed_vert,fragmentShader:R.linedashed_frag},depth:{uniforms:Ga.merge([K.common,K.displacementmap]),vertexShader:R.depth_vert,fragmentShader:R.depth_frag},normal:{uniforms:Ga.merge([K.common,K.bumpmap,K.normalmap,K.displacementmap,{opacity:{value:1}}]),vertexShader:R.normal_vert,fragmentShader:R.normal_frag},cube:{uniforms:{tCube:{value:null},
    tFlip:{value:-1},opacity:{value:1}},vertexShader:R.cube_vert,fragmentShader:R.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:R.equirect_vert,fragmentShader:R.equirect_frag},distanceRGBA:{uniforms:Ga.merge([K.common,K.displacementmap,{referencePosition:{value:new p},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:R.distanceRGBA_vert,fragmentShader:R.distanceRGBA_frag},shadow:{uniforms:Ga.merge([K.lights,K.fog,{color:{value:new H(0)},opacity:{value:1}}]),vertexShader:R.shadow_vert,
    fragmentShader:R.shadow_frag}};tb.physical={uniforms:Ga.merge([tb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:R.meshphysical_vert,fragmentShader:R.meshphysical_frag};Object.assign(od.prototype,{set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new D;return function(b,c){c=a.copy(c).multiplyScalar(.5);
    this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){a=a||new D;return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=
    a||new D;return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=
    this.max.y},getParameter:function(a,b){return(b||new D).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new D).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new D;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);
    this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});tc.prototype=Object.create(U.prototype);tc.prototype.constructor=tc;var ag=0;P.prototype=Object.assign(Object.create(za.prototype),{constructor:P,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===
    c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if("shading"===b)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c?!0:!1;else{var d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]="overdraw"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;
    b.push(d)}return b}var c=void 0===a||"string"===typeof a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&
    (d.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=
    this.lightMap.toJSON(a).uuid);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&
    (d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=
    this.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===this.flatShading&&(d.flatShading=this.flatShading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=
    this.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=
    this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},
    copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;
    this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;a=a.clippingPlanes;var b=null;if(null!==a)for(var c=
    a.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});eb.prototype=Object.create(P.prototype);eb.prototype.constructor=eb;eb.prototype.isMeshDepthMaterial=!0;eb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=
    a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};fb.prototype=Object.create(P.prototype);fb.prototype.constructor=fb;fb.prototype.isMeshDistanceMaterial=!0;fb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=
    a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};Object.assign(Xa.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var m=a[h],q=a[h+1],l=a[h+2];m<b&&(b=m);q<c&&(c=q);l<d&&(d=l);m>e&&(e=m);q>f&&(f=q);l>g&&(g=l)}this.min.set(b,c,d);this.max.set(e,
    f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.count;h<k;h++){var m=a.getX(h),q=a.getY(h),l=a.getZ(h);m<b&&(b=m);q<c&&(c=q);l<d&&(d=l);m>e&&(e=m);q>f&&(f=q);l>g&&(g=l)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new p;return function(b,c){c=a.copy(c).multiplyScalar(.5);
    this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function(a){this.makeEmpty();return this.expandByObject(a)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){a=
    a||new p;return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=a||new p;return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},expandByObject:function(){function a(a){var f=a.geometry;if(void 0!==f)if(f.isGeometry)for(f=
    f.vertices,c=0,d=f.length;c<d;c++)e.copy(f[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e);else if(f.isBufferGeometry&&(f=f.attributes.position,void 0!==f))for(c=0,d=f.count;c<d;c++)e.fromBufferAttribute(f,c).applyMatrix4(a.matrixWorld),b.expandByPoint(e)}var b,c,d,e=new p;return function(c){b=this;c.updateMatrixWorld(!0);c.traverse(a);return this}}(),containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=
    a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,b){return(b||new p).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new p;return function(b){this.clampPoint(b.center,
    a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var c=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,
    b){return(b||new p).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new p;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new p;return function(b){b=b||new Ia;this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=
    [new p,new p,new p,new p,new p,new p,new p,new p];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);
    a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Ia.prototype,{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Xa;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++)c=Math.max(c,
    d.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=
    b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);b=b||new p;b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){a=a||new Xa;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);
    this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(Ea.prototype,{set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=
    new p,b=new p;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+
    this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return(b||new p).copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new p;return function(b,c){c=c||new p;var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsLine:function(a){var b=
    this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new p).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new p,b=new ma;return function(c,d){d=d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return this}}(),
    translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}});Object.assign(rd.prototype,{set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,
    c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],m=c[7],q=c[8],l=c[9],p=c[10],r=c[11],t=c[12],v=c[13],w=c[14],c=c[15];b[0].setComponents(f-a,m-g,r-q,c-t).normalize();b[1].setComponents(f+a,m+g,r+q,c+t).normalize();b[2].setComponents(f+d,m+h,r+l,c+v).normalize();b[3].setComponents(f-d,m-h,r-l,c-v).normalize();b[4].setComponents(f-e,m-k,r-p,c-w).normalize();b[5].setComponents(f+e,m+k,r+p,c+w).normalize();return this},intersectsObject:function(){var a=new Ia;return function(b){var c=
    b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ia;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new p,b=
    new p;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});gb.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");
    gb.DefaultOrder="XYZ";Object.defineProperties(gb.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(a){this._order=a;this.onChangeCallback()}}});Object.assign(gb.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=
    c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=Q.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],k=e[5],m=e[9],l=e[2],n=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-m,e),this._z=
    Math.atan2(-f,a)):(this._x=Math.atan2(n,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-l,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(n,-1,1)),.99999>Math.abs(n)?(this._y=Math.atan2(-l,e),this._z=Math.atan2(-f,k)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(n,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):"YZX"===
    b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,k),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(g,e))):"XZY"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(n,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-m,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new O;return function(b,c,d){a.makeRotationFromQuaternion(b);
    return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new ha;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);
    void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new p(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(Wd.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask=this.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0!==(this.mask&
    a.mask)}});var cg=0;x.DefaultUp=new p(0,1,0);x.DefaultMatrixAutoUpdate=!0;x.prototype=Object.assign(Object.create(za.prototype),{constructor:x,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);return this},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,
    !0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new ha;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateOnWorldAxis:function(){var a=new ha;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.premultiply(a);return this}}(),rotateX:function(){var a=new p(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=
    new p(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new p(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new p;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new p(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new p(0,1,0);return function(b){return this.translateOnAxis(a,
    b)}}(),translateZ:function(){var a=new p(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new O;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new O,b=new p;return function(c,d,e){c.isVector3?b.copy(c):b.set(c,d,e);this.isCamera?a.lookAt(this.position,b,this.up):a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),
    add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);
    return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1));return this},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new p;this.updateMatrixWorld(!0);
    return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new p,b=new p;return function(c){c=c||new ha;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new ha;return function(b){b=b||new gb;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new p,b=new ha;return function(c){c=c||new p;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),
    getWorldDirection:function(){var a=new ha;return function(b){b=b||new p;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,
    this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].updateMatrixWorld(a)},toJSON:function(a){function b(b,c){void 0===b[c.uuid]&&(b[c.uuid]=c.toJSON(a));return c.uuid}function c(a){var b=
    [],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var d=void 0===a||"string"===typeof a,e={};d&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var f={};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData);
    f.matrix=this.matrix.toArray();if(void 0!==this.geometry){f.geometry=b(a.geometries,this.geometry);var g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes)if(g=g.shapes,Array.isArray(g))for(var h=0,k=g.length;h<k;h++)b(a.shapes,g[h]);else b(a.shapes,g)}if(void 0!==this.material)if(Array.isArray(this.material)){g=[];h=0;for(k=this.material.length;h<k;h++)g.push(b(a.materials,this.material[h]));f.material=g}else f.material=b(a.materials,this.material);if(0<this.children.length)for(f.children=
    [],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);if(d){var d=c(a.geometries),h=c(a.materials),k=c(a.textures),m=c(a.images);g=c(a.shapes);0<d.length&&(e.geometries=d);0<h.length&&(e.materials=h);0<k.length&&(e.textures=k);0<m.length&&(e.images=m);0<g.length&&(e.shapes=g)}e.object=f;return e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);
    this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});
    Ta.prototype=Object.assign(Object.create(x.prototype),{constructor:Ta,isCamera:!0,copy:function(a,b){x.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this},getWorldDirection:function(){var a=new ha;return function(b){b=b||new p;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}(),updateMatrixWorld:function(a){x.prototype.updateMatrixWorld.call(this,a);this.matrixWorldInverse.getInverse(this.matrixWorld)},
    clone:function(){return(new this.constructor).copy(this)}});Lb.prototype=Object.assign(Object.create(Ta.prototype),{constructor:Lb,isOrthographicCamera:!0,copy:function(a,b){Ta.prototype.copy.call(this,a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,
    offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,c=c+a,a=d+b,b=d-b;if(null!==
    this.view&&this.view.enabled)var c=this.zoom/(this.view.width/this.view.fullWidth),b=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height,e=e+this.view.offsetX/c*f,c=e+this.view.width/c*f,a=a-this.view.offsetY/b*d,b=a-this.view.height/b*d;this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=
    this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});Object.assign(Ya.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;
    for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}});var dg=0;L.prototype=Object.assign(Object.create(za.prototype),{constructor:L,isGeometry:!0,applyMatrix:function(a){for(var b=(new ma).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==
    this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=
    new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new x;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==g?[l[a].clone(),l[b].clone(),l[d].clone()]:[],q=void 0!==h?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[];e=new Ya(a,
    b,d,f,q,e);c.faces.push(e);void 0!==k&&c.faceVertexUvs[0].push([n[a].clone(),n[b].clone(),n[d].clone()]);void 0!==m&&c.faceVertexUvs[1].push([u[a].clone(),u[b].clone(),u[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,k=void 0!==e.uv?e.uv.array:void 0,m=void 0!==e.uv2?e.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var l=[],n=[],u=[],r=e=0;e<f.length;e+=3,
    r+=2)c.vertices.push(new p(f[e],f[e+1],f[e+2])),void 0!==g&&l.push(new p(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new H(h[e],h[e+1],h[e+2])),void 0!==k&&n.push(new D(k[r],k[r+1])),void 0!==m&&u.push(new D(m[r],m[r+1]));var t=a.groups;if(0<t.length)for(e=0;e<t.length;e++)for(var f=t[e],v=f.start,w=f.count,r=v,v=v+w;r<v;r+=3)void 0!==d?b(d[r],d[r+1],d[r+2],f.materialIndex):b(r,r+1,r+2,f.materialIndex);else if(void 0!==d)for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=
    3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new O;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);
    this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new p,b=new p,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b;var c=Array(this.vertices.length);var d=0;for(b=this.vertices.length;d<b;d++)c[d]=new p;if(a){var e=new p,f=new p;a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];
    var g=this.vertices[b.a];var h=this.vertices[b.b];var k=this.vertices[b.c];e.subVectors(k,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):
    (g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a;this.computeFaceNormals();var b=0;for(a=this.faces.length;b<a;b++){var c=this.faces[b];var d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),d[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=
    0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):d.__originalVertexNormals[e]=d.vertexNormals[e].clone()}var f=new L;f.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]=
    {};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var g=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var h=new p;var k={a:new p,b:new p,c:new p};d.push(h);g.push(k)}}g=this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(d.normal),k.a.copy(d.vertexNormals[0]),
    k.b.copy(d.vertexNormals[1]),k.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Xa);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&
    (this.boundingSphere=new Ia);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(a&&a.isGeometry){var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,m=this.faceVertexUvs[0],l=a.faceVertexUvs[0],n=this.colors,p=a.colors;void 0===c&&(c=0);void 0!==b&&(d=(new ma).getNormalMatrix(b));a=0;for(var r=g.length;a<r;a++){var t=g[a].clone();void 0!==b&&t.applyMatrix4(b);f.push(t)}a=0;for(r=p.length;a<r;a++)n.push(p[a].clone());a=0;for(r=k.length;a<r;a++){var g=
    k[a],v=g.vertexNormals,p=g.vertexColors,n=new Ya(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void 0!==d&&n.normal.applyMatrix3(d).normalize();b=0;for(f=v.length;b<f;b++)t=v[b].clone(),void 0!==d&&t.applyMatrix3(d).normalize(),n.vertexNormals.push(t);n.color.copy(g.color);b=0;for(f=p.length;b<f;b++)t=p[b],n.vertexColors.push(t.clone());n.materialIndex=g.materialIndex+c;h.push(n)}a=0;for(r=l.length;a<r;a++)if(c=l[a],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());m.push(d)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
    a)},mergeMesh:function(a){a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){var a={},b=[],c=[],d=Math.pow(10,4),e;var f=0;for(e=this.vertices.length;f<e;f++){var g=this.vertices[f];g=Math.round(g.x*d)+"_"+Math.round(g.y*d)+"_"+Math.round(g.z*d);void 0===a[g]?(a[g]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[g]]}a=[];f=0;for(e=this.faces.length;f<e;f++)for(d=
    this.faces[f],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],g=0;3>g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,1);f=this.vertices.length-b.length;this.vertices=b;return f},setFromPoints:function(a){this.vertices=[];for(var b=0,c=a.length;b<c;b++){var d=a[b];this.vertices.push(new p(d.x,d.y,d.z||0))}return this},sortFacesByMaterialIndex:function(){for(var a=this.faces,
    b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==m[b])return m[b];m[b]=k.length/3;k.push(a.x,
    a.y,a.z);return m[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==n[b])return n[b];n[b]=l.length;l.push(a.getHex());return n[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==r[b])return r[b];r[b]=p.length/2;p.push(a.x,a.y);return r[b]}var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var f=this.parameters,g;for(g in f)void 0!==f[g]&&
    (e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}var h=[],k=[],m={},l=[],n={},p=[],r={};for(g=0;g<this.faces.length;g++){var t=this.faces[g],v=void 0!==this.faceVertexUvs[0][g],w=0<t.normal.length(),z=0<t.vertexNormals.length,y=1!==t.color.r||1!==t.color.g||1!==t.color.b,x=0<t.vertexColors.length,A=0,A=a(A,0,0),A=a(A,1,!0),A=a(A,2,!1),A=a(A,3,v),A=a(A,4,w),A=a(A,5,z),A=a(A,6,y),A=a(A,7,x);h.push(A);h.push(t.a,t.b,t.c);h.push(t.materialIndex);
    v&&(v=this.faceVertexUvs[0][g],h.push(d(v[0]),d(v[1]),d(v[2])));w&&h.push(b(t.normal));z&&(w=t.vertexNormals,h.push(b(w[0]),b(w[1]),b(w[2])));y&&h.push(c(t.color));x&&(t=t.vertexColors,h.push(c(t[0]),c(t[1]),c(t[2])))}e.data={};e.data.vertices=f;e.data.normals=k;0<l.length&&(e.data.colors=l);0<p.length&&(e.data.uvs=[p]);e.data.faces=h;return e},clone:function(){return(new L).copy(this)},copy:function(a){var b,c,d;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=
    [];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var e=a.vertices;var f=0;for(b=e.length;f<b;f++)this.vertices.push(e[f].clone());e=a.colors;f=0;for(b=e.length;f<b;f++)this.colors.push(e[f].clone());e=a.faces;f=0;for(b=e.length;f<b;f++)this.faces.push(e[f].clone());f=0;for(b=a.faceVertexUvs.length;f<b;f++){var g=a.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<
    c;e++){var h=g[e],k=[];var m=0;for(d=h.length;m<d;m++)k.push(h[m].clone());this.faceVertexUvs[f].push(k)}}m=a.morphTargets;f=0;for(b=m.length;f<b;f++){d={};d.name=m[f].name;if(void 0!==m[f].vertices)for(d.vertices=[],e=0,c=m[f].vertices.length;e<c;e++)d.vertices.push(m[f].vertices[e].clone());if(void 0!==m[f].normals)for(d.normals=[],e=0,c=m[f].normals.length;e<c;e++)d.normals.push(m[f].normals[e].clone());this.morphTargets.push(d)}m=a.morphNormals;f=0;for(b=m.length;f<b;f++){d={};if(void 0!==m[f].vertexNormals)for(d.vertexNormals=
    [],e=0,c=m[f].vertexNormals.length;e<c;e++)g=m[f].vertexNormals[e],h={},h.a=g.a.clone(),h.b=g.b.clone(),h.c=g.c.clone(),d.vertexNormals.push(h);if(void 0!==m[f].faceNormals)for(d.faceNormals=[],e=0,c=m[f].faceNormals.length;e<c;e++)d.faceNormals.push(m[f].faceNormals[e].clone());this.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++)this.skinWeights.push(e[f].clone());e=a.skinIndices;f=0;for(b=e.length;f<b;f++)this.skinIndices.push(e[f].clone());e=a.lineDistances;f=0;for(b=e.length;f<
    b;f++)this.lineDistances.push(e[f]);f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
    Object.defineProperty(M.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(M.prototype,{isBufferAttribute:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0;this.array=a},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;
    this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),f=new H);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyIndicesArray:function(a){for(var b=this.array,
    c=0,d=0,e=a.length;d<e;d++){var f=a[d];b[c++]=f.a;b[c++]=f.b;b[c++]=f.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),f=new D);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),f=new p);
    b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),f=new aa);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*
    this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=
    d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},onUpload:function(a){this.onUploadCallback=a;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});uc.prototype=Object.create(M.prototype);uc.prototype.constructor=uc;vc.prototype=Object.create(M.prototype);vc.prototype.constructor=vc;wc.prototype=Object.create(M.prototype);wc.prototype.constructor=wc;xc.prototype=
    Object.create(M.prototype);xc.prototype.constructor=xc;ob.prototype=Object.create(M.prototype);ob.prototype.constructor=ob;yc.prototype=Object.create(M.prototype);yc.prototype.constructor=yc;pb.prototype=Object.create(M.prototype);pb.prototype.constructor=pb;B.prototype=Object.create(M.prototype);B.prototype.constructor=B;zc.prototype=Object.create(M.prototype);zc.prototype.constructor=zc;Object.assign(Ve.prototype,{computeGroups:function(a){var b=[],c=void 0;a=a.faces;for(var d=0;d<a.length;d++){var e=
    a[d];if(e.materialIndex!==c){c=e.materialIndex;void 0!==f&&(f.count=3*d-f.start,b.push(f));var f={start:3*d,materialIndex:c}}}void 0!==f&&(f.count=3*d-f.start,b.push(f));this.groups=b},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length;if(0<h){var k=[];for(var m=0;m<h;m++)k[m]=[];this.morphTargets.position=k}var l=a.morphNormals,n=l.length;if(0<n){var p=[];for(m=0;m<n;m++)p[m]=[];this.morphTargets.normal=p}for(var r=
    a.skinIndices,t=a.skinWeights,v=r.length===c.length,w=t.length===c.length,m=0;m<b.length;m++){var z=b[m];this.vertices.push(c[z.a],c[z.b],c[z.c]);var y=z.vertexNormals;3===y.length?this.normals.push(y[0],y[1],y[2]):(y=z.normal,this.normals.push(y,y,y));y=z.vertexColors;3===y.length?this.colors.push(y[0],y[1],y[2]):(y=z.color,this.colors.push(y,y,y));!0===e&&(y=d[0][m],void 0!==y?this.uvs.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new D,
    new D,new D)));!0===f&&(y=d[1][m],void 0!==y?this.uvs2.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new D,new D,new D)));for(y=0;y<h;y++){var x=g[y].vertices;k[y].push(x[z.a],x[z.b],x[z.c])}for(y=0;y<n;y++)x=l[y].vertexNormals[m],p[y].push(x.a,x.b,x.c);v&&this.skinIndices.push(r[z.a],r[z.b],r[z.c]);w&&this.skinWeights.push(t[z.a],t[z.b],t[z.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=
    a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this}});var eg=1;E.prototype=Object.assign(Object.create(za.prototype),{constructor:E,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new (65535<Xd(a)?pb:ob)(a,1):this.index=a},addAttribute:function(a,b,c){if(b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute)if("index"===a)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
    this.setIndex(b);else return this.attributes[a]=b,this;else console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new M(b,c))},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},
    applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new ma).getNormalMatrix(a).applyToBufferAttribute(b),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);
    this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new x;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();
    var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new B(3*b.vertices.length,3);var c=new B(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new B(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&
    (this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},setFromPoints:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];b.push(e.x,e.y,e.z||0)}this.addAttribute("position",new B(b,3));return this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);
    c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==
    c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),
    this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new Ve).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new M(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new M(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),
    this.addAttribute("color",(new M(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new M(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",(new M(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<Xd(a.indices)?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new M(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=
    [],d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],h=new B(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new B(4*a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new B(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=
    a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Xa);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=
    new Xa,b=new p;return function(){null===this.boundingSphere&&(this.boundingSphere=new Ia);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c);a.getCenter(d);for(var e=0,f=0,g=c.count;f<g;f++)b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
    this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new M(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++)e[f]=0;var e=b.normal.array,h=new p,k=new p,m=new p,l=new p,n=new p;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var u=0,r=c.length;u<r;++u){f=c[u];g=f.start;var t=f.count;f=g;for(g+=t;f<
    g;f+=3){t=3*a[f+0];var v=3*a[f+1];var w=3*a[f+2];h.fromArray(d,t);k.fromArray(d,v);m.fromArray(d,w);l.subVectors(m,k);n.subVectors(h,k);l.cross(n);e[t]+=l.x;e[t+1]+=l.y;e[t+2]+=l.z;e[v]+=l.x;e[v+1]+=l.y;e[v+2]+=l.z;e[w]+=l.x;e[w+1]+=l.y;e[w+2]+=l.z}}}else for(f=0,g=d.length;f<g;f+=9)h.fromArray(d,f),k.fromArray(d,f+3),m.fromArray(d,f+6),l.subVectors(m,k),n.subVectors(h,k),l.cross(n),e[f]=l.x,e[f+1]=l.y,e[f+2]=l.z,e[f+3]=l.x,e[f+4]=l.y,e[f+5]=l.z,e[f+6]=l.x,e[f+7]=l.y,e[f+8]=l.z;this.normalizeNormals();
    b.normal.needsUpdate=!0}},merge:function(a,b){if(a&&a.isBufferGeometry){void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,f=a.attributes[d],g=f.array,h=0,f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){var a=new p;return function(){for(var b=this.attributes.normal,c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),
    a.z=b.getZ(c),a.normalize(),b.setXYZ(c,a.x,a.y,a.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new E,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],f=e.array,e=e.itemSize,g=new f.constructor(b.length*e),h,k=0,m=0,l=b.length;m<l;m++){h=b[m]*e;for(var n=0;n<e;n++)g[k++]=f[h++]}a.addAttribute(d,new M(g,e))}return a},toJSON:function(){var a={metadata:{version:4.5,type:"BufferGeometry",
    generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c];b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,
    array:b,normalized:e.normalized}}c=this.groups;0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return a},clone:function(){return(new E).copy(this)},copy:function(a){var b;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(g in c)this.addAttribute(g,
    c[g].clone());var d=a.morphAttributes;for(g in d){var e=[],f=d[g];c=0;for(b=f.length;c<b;c++)e.push(f[c].clone());this.morphAttributes[g]=e}var g=a.groups;c=0;for(b=g.length;c<b;c++)d=g[c],this.addGroup(d.start,d.count,d.materialIndex);g=a.boundingBox;null!==g&&(this.boundingBox=g.clone());g=a.boundingSphere;null!==g&&(this.boundingSphere=g.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
    Mb.prototype=Object.create(L.prototype);Mb.prototype.constructor=Mb;qb.prototype=Object.create(E.prototype);qb.prototype.constructor=qb;Ac.prototype=Object.create(L.prototype);Ac.prototype.constructor=Ac;rb.prototype=Object.create(E.prototype);rb.prototype.constructor=rb;Aa.prototype=Object.create(P.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isMeshBasicMaterial=!0;Aa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;
    this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};Fa.prototype=
    Object.create(P.prototype);Fa.prototype.constructor=Fa;Fa.prototype.isShaderMaterial=!0;Fa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Ga.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=
    a.extensions;return this};Fa.prototype.toJSON=function(a){a=P.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};Object.assign(sb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new p).copy(this.direction).multiplyScalar(a).add(this.origin)},
    lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new p;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){b=b||new p;b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new p;return function(b){var c=
    a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),m=c.dot(this.direction),l=-c.dot(b),n=c.lengthSq(),p=Math.abs(1-k*k);if(0<p){d=k*l-m;e=k*
    m-l;var r=h*p;0<=d?e>=-r?e<=r?(h=1/p,d*=h,e*=h,k=d*(d+k*e+2*m)+e*(k*d+e+2*l)+n):(e=h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n):(e=-h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n):e<=-r?(d=Math.max(0,-(-k*h+m)),e=0<d?-h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+n):e<=r?(d=0,e=Math.min(Math.max(-h,-l),h),k=e*(e+2*l)+n):(d=Math.max(0,-(k*h+m)),e=0<d?h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+n)}else e=0<k?-h:h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);
    g&&g.copy(b).multiplyScalar(e).add(a);return k}}(),intersectSphere:function(){var a=new p;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?
    0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g=(a.min.x-f.x)*c;c*=a.max.x-f.x}else g=(a.max.x-f.x)*c,c*=a.min.x-f.x;if(0<=d){var h=(a.min.y-
    f.y)*d;d*=a.max.y-f.y}else h=(a.max.y-f.y)*d,d*=a.min.y-f.y;if(g>d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0>c?null:this.at(0<=g?g:c,b)},intersectsBox:function(){var a=new p;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new p,b=new p,c=new p,d=new p;return function(e,f,g,h,k){b.subVectors(f,
    e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});
    Object.assign(Nb.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){return(a||new p).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new p).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
    at:function(a,b){b=b||new p;return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new p,b=new p;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=Q.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new p;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);
    return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});Object.assign(Za,{normal:function(){var a=new p;return function(b,c,d,e){e=e||new p;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}(),barycoordFromPoint:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var k=b.dot(b);g=b.dot(c);var m=
    d*k-e*e;h=h||new p;if(0===m)return h.set(-2,-1,-1);m=1/m;k=(k*f-e*g)*m;d=(d*g-e*f)*m;return h.set(1-k-d,d,k)}}(),containsPoint:function(){var a=new p;return function(b,c,d,e){b=Za.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}()});Object.assign(Za.prototype,{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},
    copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new p,b=new p;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new p).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Za.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new Ea).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return Za.barycoordFromPoint(a,
    this.a,this.b,this.c,b)},containsPoint:function(a){return Za.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a=new Ea,b=[new Nb,new Nb,new Nb],c=new p,d=new p;return function(e,f){f=f||new p;var g=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))f.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++){b[e].closestPointToPoint(c,!0,d);var h=c.distanceToSquared(d);
    h<g&&(g=h,f.copy(d))}return f}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});ra.prototype=Object.assign(Object.create(x.prototype),{constructor:ra,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){x.prototype.copy.call(this,a);this.drawMode=a.drawMode;void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));
    return this},updateMorphTargets:function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length){var c=a[b[0]];if(void 0!==c)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++){var d=c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=a}}}else if(c=a.morphTargets,void 0!==c&&0<c.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++)d=c[a].name||
    String(a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a},raycast:function(){function a(a,b,c,d,e,f,g){Za.barycoordFromPoint(a,b,c,d,v);e.multiplyScalar(v.x);f.multiplyScalar(v.y);g.multiplyScalar(v.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g,h){if(null===(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return null;z.copy(h);z.applyMatrix4(a.matrixWorld);b=c.ray.origin.distanceTo(z);return b<c.near||b>c.far?null:{distance:b,
    point:z.clone(),object:a}}function c(c,d,e,f,m,l,q,n){g.fromBufferAttribute(f,l);h.fromBufferAttribute(f,q);k.fromBufferAttribute(f,n);if(c=b(c,c.material,d,e,g,h,k,w))m&&(u.fromBufferAttribute(m,l),r.fromBufferAttribute(m,q),t.fromBufferAttribute(m,n),c.uv=a(w,g,h,k,u,r,t)),c.face=new Ya(l,q,n,Za.normal(g,h,k)),c.faceIndex=l;return c}var d=new O,e=new sb,f=new Ia,g=new p,h=new p,k=new p,m=new p,l=new p,n=new p,u=new D,r=new D,t=new D,v=new p,w=new p,z=new p;return function(q,p){var v=this.geometry,
    z=this.material,y=this.matrixWorld;if(void 0!==z&&(null===v.boundingSphere&&v.computeBoundingSphere(),f.copy(v.boundingSphere),f.applyMatrix4(y),!1!==q.ray.intersectsSphere(f)&&(d.getInverse(y),e.copy(q.ray).applyMatrix4(d),null===v.boundingBox||!1!==e.intersectsBox(v.boundingBox)))){var x;if(v.isBufferGeometry){var z=v.index,B=v.attributes.position,y=v.attributes.uv,D;if(null!==z){var C=0;for(D=z.count;C<D;C+=3){v=z.getX(C);var I=z.getX(C+1);var E=z.getX(C+2);if(x=c(this,q,e,B,y,v,I,E))x.faceIndex=
    Math.floor(C/3),p.push(x)}}else if(void 0!==B)for(C=0,D=B.count;C<D;C+=3)if(v=C,I=C+1,E=C+2,x=c(this,q,e,B,y,v,I,E))x.index=v,p.push(x)}else if(v.isGeometry){var y=Array.isArray(z);C=v.vertices;D=v.faces;I=v.faceVertexUvs[0];0<I.length&&(B=I);for(var H=0,K=D.length;H<K;H++){var N=D[H];x=y?z[N.materialIndex]:z;if(void 0!==x){I=C[N.a];E=C[N.b];var L=C[N.c];if(!0===x.morphTargets){var M=v.morphTargets,O=this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);k.set(0,0,0);for(var P=0,Q=M.length;P<Q;P++){var R=
    O[P];if(0!==R){var U=M[P].vertices;g.addScaledVector(m.subVectors(U[N.a],I),R);h.addScaledVector(l.subVectors(U[N.b],E),R);k.addScaledVector(n.subVectors(U[N.c],L),R)}}g.add(I);h.add(E);k.add(L);I=g;E=h;L=k}if(x=b(this,x,q,e,I,E,L,w))B&&B[H]&&(M=B[H],u.copy(M[0]),r.copy(M[1]),t.copy(M[2]),x.uv=a(w,I,E,L,u,r,t)),x.face=N,x.faceIndex=H,p.push(x)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});var yg=0;ba.prototype=Object.assign(Object.create(Ta.prototype),
    {constructor:ba,isPerspectiveCamera:!0,copy:function(a,b){Ta.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*Q.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*Q.DEG2RAD*this.fov);
    return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*Q.RAD2DEG*Math.atan(Math.tan(.5*Q.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=
    c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*Q.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==this.view&&this.view.enabled)var g=f.fullWidth,h=f.fullHeight,e=e+f.offsetX*d/g,b=b-f.offsetY*c/h,d=f.width/g*d,c=f.height/h*c;f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());
    this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});ud.prototype=Object.assign(Object.create(ba.prototype),{constructor:ud,isArrayCamera:!0});Pb.prototype.isFogExp2=
    !0;Pb.prototype.clone=function(){return new Pb(this.color.getHex(),this.density)};Pb.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};Qb.prototype.isFog=!0;Qb.prototype.clone=function(){return new Qb(this.color.getHex(),this.near,this.far)};Qb.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};vd.prototype=Object.assign(Object.create(x.prototype),{constructor:vd,copy:function(a,b){x.prototype.copy.call(this,
    a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this},toJSON:function(a){var b=x.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=this.background.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return b}});de.prototype=Object.assign(Object.create(x.prototype),
    {constructor:de,isLensFlare:!0,copy:function(a){x.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new H(16777215));void 0===d&&(d=1);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,
    opacity:f,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c=2*-this.positionScreen.x,d=2*-this.positionScreen.y;for(a=0;a<b;a++){var e=this.lensFlares[a];e.x=this.positionScreen.x+c*e.distance;e.y=this.positionScreen.y+d*e.distance;e.wantedRotation=e.x*Math.PI*.25;e.rotation+=.25*(e.wantedRotation-e.rotation)}}});hb.prototype=Object.create(P.prototype);hb.prototype.constructor=hb;hb.prototype.isSpriteMaterial=!0;hb.prototype.copy=function(a){P.prototype.copy.call(this,
    a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};Cc.prototype=Object.assign(Object.create(x.prototype),{constructor:Cc,isSprite:!0,raycast:function(){var a=new p,b=new p,c=new p;return function(d,e){b.setFromMatrixPosition(this.matrixWorld);d.ray.closestPointToPoint(b,a);c.setFromMatrixScale(this.matrixWorld);var f=c.x*c.y/4;b.distanceToSquared(a)>f||(f=d.ray.origin.distanceTo(a),f<d.near||f>d.far||e.push({distance:f,point:a.clone(),face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});
    Dc.prototype=Object.assign(Object.create(x.prototype),{constructor:Dc,copy:function(a){x.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-
    1].object},raycast:function(){var a=new p;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new p,b=new p;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;
    for(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});Object.assign(Ec.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new O;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){var a,b;var c=0;for(b=this.bones.length;c<
    b;c++)(a=this.bones[c])&&a.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(b=this.bones.length;c<b;c++)if(a=this.bones[c])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new O,b=new O;return function(){for(var c=this.bones,d=this.boneInverses,e=this.boneMatrices,f=this.boneTexture,g=0,h=c.length;g<h;g++)a.multiplyMatrices(c[g]?c[g].matrixWorld:
    b,d[g]),a.toArray(e,16*g);void 0!==f&&(f.needsUpdate=!0)}}(),clone:function(){return new Ec(this.bones,this.boneInverses)}});wd.prototype=Object.assign(Object.create(x.prototype),{constructor:wd,isBone:!0});xd.prototype=Object.assign(Object.create(ra.prototype),{constructor:xd,isSkinnedMesh:!0,initBones:function(){var a=[],b;if(this.geometry&&void 0!==this.geometry.bones){var c=0;for(b=this.geometry.bones.length;c<b;c++){var d=this.geometry.bones[c];var e=new wd;a.push(e);e.name=d.name;e.position.fromArray(d.pos);
    e.quaternion.fromArray(d.rotq);void 0!==d.scl&&e.scale.fromArray(d.scl)}c=0;for(b=this.geometry.bones.length;c<b;c++)d=this.geometry.bones[c],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[c]):this.add(a[c])}this.updateMatrixWorld(!0);return a},bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var a;
    if(this.geometry&&this.geometry.isGeometry)for(a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a];var c=1/b.manhattanLength();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var b=new aa,d=this.geometry.attributes.skinWeight;for(a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.manhattanLength(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(a){ra.prototype.updateMatrixWorld.call(this,
    a);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});W.prototype=Object.create(P.prototype);W.prototype.constructor=W;W.prototype.isLineBasicMaterial=!0;W.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);
    this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};sa.prototype=Object.assign(Object.create(x.prototype),{constructor:sa,isLine:!0,raycast:function(){var a=new O,b=new sb,c=new Ia;return function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var k=new p,m=new p,h=new p,
    l=new p,n=this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var u=g.index;var r=g.attributes.position.array;if(null!==u)for(var t=u.array,g=0,v=t.length-1;g<v;g+=n)u=t[g+1],k.fromArray(r,3*t[g]),m.fromArray(r,3*u),u=b.distanceSqToSegment(k,m,l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}));else for(g=0,v=r.length/3-1;g<v;g+=n)k.fromArray(r,
    3*g),m.fromArray(r,3*g+3),u=b.distanceSqToSegment(k,m,l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(k=g.vertices,m=k.length,g=0;g<m-1;g+=n)u=b.distanceSqToSegment(k[g],k[g+1],l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),
    index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});X.prototype=Object.assign(Object.create(sa.prototype),{constructor:X,isLineSegments:!0});yd.prototype=Object.assign(Object.create(sa.prototype),{constructor:yd,isLineLoop:!0});Ka.prototype=Object.create(P.prototype);Ka.prototype.constructor=Ka;Ka.prototype.isPointsMaterial=!0;Ka.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);
    this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};Rb.prototype=Object.assign(Object.create(x.prototype),{constructor:Rb,isPoints:!0,raycast:function(){var a=new O,b=new sb,c=new Ia;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);if(f<l){a=b.closestPointToPoint(a);a.applyMatrix4(k);var h=d.ray.origin.distanceTo(a);h<d.near||h>d.far||e.push({distance:h,distanceToRay:Math.sqrt(f),point:a.clone(),index:c,face:null,object:g})}}var g=this,h=this.geometry,
    k=this.matrixWorld,m=d.params.Points.threshold;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);c.radius+=m;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);var m=m/((this.scale.x+this.scale.y+this.scale.z)/3),l=m*m,m=new p;if(h.isBufferGeometry){var n=h.index,h=h.attributes.position.array;if(null!==n)for(var u=n.array,n=0,r=u.length;n<r;n++){var t=u[n];m.fromArray(h,3*t);f(m,t)}else for(n=0,u=h.length/3;n<u;n++)m.fromArray(h,
    3*n),f(m,n)}else for(m=h.vertices,n=0,u=m.length;n<u;n++)f(m[n],n)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Fc.prototype=Object.assign(Object.create(x.prototype),{constructor:Fc,isGroup:!0});ee.prototype=Object.assign(Object.create(U.prototype),{constructor:ee,isVideoTexture:!0,update:function(){var a=this.image;a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Sb.prototype=Object.create(U.prototype);Sb.prototype.constructor=Sb;Sb.prototype.isCompressedTexture=
    !0;Gc.prototype=Object.create(U.prototype);Gc.prototype.constructor=Gc;Gc.prototype.isDepthTexture=!0;Tb.prototype=Object.create(E.prototype);Tb.prototype.constructor=Tb;Hc.prototype=Object.create(L.prototype);Hc.prototype.constructor=Hc;Ub.prototype=Object.create(E.prototype);Ub.prototype.constructor=Ub;Ic.prototype=Object.create(L.prototype);Ic.prototype.constructor=Ic;ja.prototype=Object.create(E.prototype);ja.prototype.constructor=ja;Jc.prototype=Object.create(L.prototype);Jc.prototype.constructor=
    Jc;Vb.prototype=Object.create(ja.prototype);Vb.prototype.constructor=Vb;Kc.prototype=Object.create(L.prototype);Kc.prototype.constructor=Kc;ub.prototype=Object.create(ja.prototype);ub.prototype.constructor=ub;Lc.prototype=Object.create(L.prototype);Lc.prototype.constructor=Lc;Wb.prototype=Object.create(ja.prototype);Wb.prototype.constructor=Wb;Mc.prototype=Object.create(L.prototype);Mc.prototype.constructor=Mc;Xb.prototype=Object.create(ja.prototype);Xb.prototype.constructor=Xb;Nc.prototype=Object.create(L.prototype);
    Nc.prototype.constructor=Nc;Yb.prototype=Object.create(E.prototype);Yb.prototype.constructor=Yb;Oc.prototype=Object.create(L.prototype);Oc.prototype.constructor=Oc;Zb.prototype=Object.create(E.prototype);Zb.prototype.constructor=Zb;Pc.prototype=Object.create(L.prototype);Pc.prototype.constructor=Pc;$b.prototype=Object.create(E.prototype);$b.prototype.constructor=$b;var Lg={triangulate:function(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=bf(a,0,e,c,!0),g=[];if(!f)return g;var h;if(d){var k=
    c,d=[],m;var l=0;for(m=b.length;l<m;l++){var n=b[l]*k;var p=l<m-1?b[l+1]*k:a.length;n=bf(a,n,p,k,!1);n===n.next&&(n.steiner=!0);d.push(Jg(n))}d.sort(Hg);for(l=0;l<d.length;l++){b=d[l];k=f;if(k=Ig(b,k))b=ef(k,b),Rc(b,b.next);f=Rc(f,f.next)}}if(a.length>80*c){var r=h=a[0];var t=d=a[1];for(k=c;k<e;k+=c)l=a[k],b=a[k+1],l<r&&(r=l),b<t&&(t=b),l>h&&(h=l),b>d&&(d=b);h=Math.max(h-r,d-t);h=0!==h?1/h:0}Sc(f,g,c,r,t,h);return g}},$a={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-
    a[e].x*a[d].y;return.5*c},isClockWise:function(a){return 0>$a.area(a)},triangulateShape:function(a,b){function c(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b){for(var c=0;c<b.length;c++)a.push(b[c].x),a.push(b[c].y)}var e=[],f=[],g=[];c(a);d(e,a);var h=a.length;b.forEach(c);for(a=0;a<b.length;a++)f.push(h),h+=b[a].length,d(e,b[a]);b=Lg.triangulate(e,f);for(a=0;a<b.length;a+=3)g.push(b.slice(a,a+3));return g}};ib.prototype=Object.create(L.prototype);ib.prototype.constructor=ib;
    La.prototype=Object.create(E.prototype);La.prototype.constructor=La;La.prototype.getArrays=function(){var a=this.getAttribute("position"),a=a?Array.prototype.slice.call(a.array):[],b=this.getAttribute("uv"),b=b?Array.prototype.slice.call(b.array):[],c=this.index,c=c?Array.prototype.slice.call(c.array):[];return{position:a,uv:b,index:c}};La.prototype.addShapeList=function(a,b){var c=a.length;b.arrays=this.getArrays();for(var d=0;d<c;d++)this.addShape(a[d],b);this.setIndex(b.arrays.index);this.addAttribute("position",
    new B(b.arrays.position,3));this.addAttribute("uv",new B(b.arrays.uv,2))};La.prototype.addShape=function(a,b){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=a.x-b.x;var e=a.y-b.y;var f=c.x-a.x;var g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),m=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;g=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new D(f,
    d);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(f=-e,e=Math.sqrt(h)):(f=d,d=e,e=Math.sqrt(h/2));return new D(f/e,d/e)}function e(a,b){for(G=a.length;0<=--G;){var c=G;var d=G-1;0>d&&(d=a.length-1);var e,f=x+2*w;for(e=0;e<f;e++){var g=X*e,m=X*(e+1),n=b+d+g,q=b+d+m,m=b+c+m;h(b+c+g);h(n);h(m);h(n);h(q);h(m);g=l.length/3;g=E.generateSideWallUV(S,l,g-6,g-3,g-2,g-1);k(g[0]);k(g[1]);k(g[3]);k(g[1]);
    k(g[2]);k(g[3])}}}function f(a,b,c){r.push(a);r.push(b);r.push(c)}function g(a,b,c){h(a);h(b);h(c);a=l.length/3;a=E.generateTopUV(S,l,a-3,a-2,a-1);k(a[0]);k(a[1]);k(a[2])}function h(a){n.push(l.length/3);l.push(r[3*a+0]);l.push(r[3*a+1]);l.push(r[3*a+2])}function k(a){u.push(a.x);u.push(a.y)}var m=b.arrays?b.arrays:this.getArrays(),l=m.position,n=m.index,u=m.uv,r=[],m=void 0!==b.amount?b.amount:100,t=void 0!==b.bevelThickness?b.bevelThickness:6,v=void 0!==b.bevelSize?b.bevelSize:t-2,w=void 0!==b.bevelSegments?
    b.bevelSegments:3,z=void 0!==b.bevelEnabled?b.bevelEnabled:!0,y=void 0!==b.curveSegments?b.curveSegments:12,x=void 0!==b.steps?b.steps:1,A=b.extrudePath,C=!1,E=void 0!==b.UVGenerator?b.UVGenerator:ib.WorldUVGenerator;if(A){var H=A.getSpacedPoints(x);C=!0;z=!1;var K=void 0!==b.frames?b.frames:A.computeFrenetFrames(x,!1);var L=new p;var M=new p;var P=new p}z||(v=t=w=0);var O,S=this,y=a.extractPoints(y);a=y.shape;var Q=y.holes;if(!$a.isClockWise(a)){a=a.reverse();var N=0;for(O=Q.length;N<O;N++){var R=
    Q[N];$a.isClockWise(R)&&(Q[N]=R.reverse())}}var U=$a.triangulateShape(a,Q),W=a;N=0;for(O=Q.length;N<O;N++)R=Q[N],a=a.concat(R);var V,X=a.length,T,ba=U.length,y=[],G=0;var Y=W.length;var ea=Y-1;for(V=G+1;G<Y;G++,ea++,V++)ea===Y&&(ea=0),V===Y&&(V=0),y[G]=d(W[G],W[ea],W[V]);var A=[],ca=y.concat();N=0;for(O=Q.length;N<O;N++){R=Q[N];var aa=[];G=0;Y=R.length;ea=Y-1;for(V=G+1;G<Y;G++,ea++,V++)ea===Y&&(ea=0),V===Y&&(V=0),aa[G]=d(R[G],R[ea],R[V]);A.push(aa);ca=ca.concat(aa)}for(ea=0;ea<w;ea++){Y=ea/w;var da=
    t*Math.cos(Y*Math.PI/2);V=v*Math.sin(Y*Math.PI/2);G=0;for(Y=W.length;G<Y;G++){var fa=c(W[G],y[G],V);f(fa.x,fa.y,-da)}N=0;for(O=Q.length;N<O;N++)for(R=Q[N],aa=A[N],G=0,Y=R.length;G<Y;G++)fa=c(R[G],aa[G],V),f(fa.x,fa.y,-da)}V=v;for(G=0;G<X;G++)fa=z?c(a[G],ca[G],V):a[G],C?(M.copy(K.normals[0]).multiplyScalar(fa.x),L.copy(K.binormals[0]).multiplyScalar(fa.y),P.copy(H[0]).add(M).add(L),f(P.x,P.y,P.z)):f(fa.x,fa.y,0);for(Y=1;Y<=x;Y++)for(G=0;G<X;G++)fa=z?c(a[G],ca[G],V):a[G],C?(M.copy(K.normals[Y]).multiplyScalar(fa.x),
    L.copy(K.binormals[Y]).multiplyScalar(fa.y),P.copy(H[Y]).add(M).add(L),f(P.x,P.y,P.z)):f(fa.x,fa.y,m/x*Y);for(ea=w-1;0<=ea;ea--){Y=ea/w;da=t*Math.cos(Y*Math.PI/2);V=v*Math.sin(Y*Math.PI/2);G=0;for(Y=W.length;G<Y;G++)fa=c(W[G],y[G],V),f(fa.x,fa.y,m+da);N=0;for(O=Q.length;N<O;N++)for(R=Q[N],aa=A[N],G=0,Y=R.length;G<Y;G++)fa=c(R[G],aa[G],V),C?f(fa.x,fa.y+H[x-1].y,H[x-1].x+da):f(fa.x,fa.y,m+da)}(function(){var a=l.length/3;if(z){var c=0*X;for(G=0;G<ba;G++)T=U[G],g(T[2]+c,T[1]+c,T[0]+c);c=X*(x+2*w);for(G=
    0;G<ba;G++)T=U[G],g(T[0]+c,T[1]+c,T[2]+c)}else{for(G=0;G<ba;G++)T=U[G],g(T[2],T[1],T[0]);for(G=0;G<ba;G++)T=U[G],g(T[0]+X*x,T[1]+X*x,T[2]+X*x)}S.addGroup(a,l.length/3-a,void 0!==b.material?b.material:0)})();(function(){var a=l.length/3,c=0;e(W,c);c+=W.length;N=0;for(O=Q.length;N<O;N++)R=Q[N],e(R,c),c+=R.length;S.addGroup(a,l.length/3-a,void 0!==b.extrudeMaterial?b.extrudeMaterial:1)})();b.arrays||(this.setIndex(n),this.addAttribute("position",new B(l,3)),this.addAttribute("uv",new B(u,2)))};ib.WorldUVGenerator=
    {generateTopUV:function(a,b,c,d,e){a=b[3*d];d=b[3*d+1];var f=b[3*e];e=b[3*e+1];return[new D(b[3*c],b[3*c+1]),new D(a,d),new D(f,e)]},generateSideWallUV:function(a,b,c,d,e,f){a=b[3*c];var g=b[3*c+1];c=b[3*c+2];var h=b[3*d],k=b[3*d+1];d=b[3*d+2];var m=b[3*e],l=b[3*e+1];e=b[3*e+2];var n=b[3*f],p=b[3*f+1];b=b[3*f+2];return.01>Math.abs(g-k)?[new D(a,1-c),new D(h,1-d),new D(m,1-e),new D(n,1-b)]:[new D(g,1-c),new D(k,1-d),new D(l,1-e),new D(p,1-b)]}};Uc.prototype=Object.create(L.prototype);Uc.prototype.constructor=
    Uc;ac.prototype=Object.create(La.prototype);ac.prototype.constructor=ac;Vc.prototype=Object.create(L.prototype);Vc.prototype.constructor=Vc;wb.prototype=Object.create(E.prototype);wb.prototype.constructor=wb;Wc.prototype=Object.create(L.prototype);Wc.prototype.constructor=Wc;bc.prototype=Object.create(E.prototype);bc.prototype.constructor=bc;Xc.prototype=Object.create(L.prototype);Xc.prototype.constructor=Xc;cc.prototype=Object.create(E.prototype);cc.prototype.constructor=cc;xb.prototype=Object.create(L.prototype);
    xb.prototype.constructor=xb;xb.prototype.toJSON=function(){var a=L.prototype.toJSON.call(this);return ff(this.parameters.shapes,a)};yb.prototype=Object.create(E.prototype);yb.prototype.constructor=yb;yb.prototype.toJSON=function(){var a=E.prototype.toJSON.call(this);return ff(this.parameters.shapes,a)};dc.prototype=Object.create(E.prototype);dc.prototype.constructor=dc;zb.prototype=Object.create(L.prototype);zb.prototype.constructor=zb;ab.prototype=Object.create(E.prototype);ab.prototype.constructor=
    ab;Yc.prototype=Object.create(zb.prototype);Yc.prototype.constructor=Yc;Zc.prototype=Object.create(ab.prototype);Zc.prototype.constructor=Zc;$c.prototype=Object.create(L.prototype);$c.prototype.constructor=$c;ec.prototype=Object.create(E.prototype);ec.prototype.constructor=ec;var ka=Object.freeze({WireframeGeometry:Tb,ParametricGeometry:Hc,ParametricBufferGeometry:Ub,TetrahedronGeometry:Jc,TetrahedronBufferGeometry:Vb,OctahedronGeometry:Kc,OctahedronBufferGeometry:ub,IcosahedronGeometry:Lc,IcosahedronBufferGeometry:Wb,
    DodecahedronGeometry:Mc,DodecahedronBufferGeometry:Xb,PolyhedronGeometry:Ic,PolyhedronBufferGeometry:ja,TubeGeometry:Nc,TubeBufferGeometry:Yb,TorusKnotGeometry:Oc,TorusKnotBufferGeometry:Zb,TorusGeometry:Pc,TorusBufferGeometry:$b,TextGeometry:Uc,TextBufferGeometry:ac,SphereGeometry:Vc,SphereBufferGeometry:wb,RingGeometry:Wc,RingBufferGeometry:bc,PlaneGeometry:Ac,PlaneBufferGeometry:rb,LatheGeometry:Xc,LatheBufferGeometry:cc,ShapeGeometry:xb,ShapeBufferGeometry:yb,ExtrudeGeometry:ib,ExtrudeBufferGeometry:La,
    EdgesGeometry:dc,ConeGeometry:Yc,ConeBufferGeometry:Zc,CylinderGeometry:zb,CylinderBufferGeometry:ab,CircleGeometry:$c,CircleBufferGeometry:ec,BoxGeometry:Mb,BoxBufferGeometry:qb});fc.prototype=Object.create(P.prototype);fc.prototype.constructor=fc;fc.prototype.isShadowMaterial=!0;gc.prototype=Object.create(Fa.prototype);gc.prototype.constructor=gc;gc.prototype.isRawShaderMaterial=!0;Ua.prototype=Object.create(P.prototype);Ua.prototype.constructor=Ua;Ua.prototype.isMeshStandardMaterial=!0;Ua.prototype.copy=
    function(a){P.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);
    this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=
    a.morphTargets;this.morphNormals=a.morphNormals;return this};Ab.prototype=Object.create(Ua.prototype);Ab.prototype.constructor=Ab;Ab.prototype.isMeshPhysicalMaterial=!0;Ab.prototype.copy=function(a){Ua.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Ma.prototype=Object.create(P.prototype);Ma.prototype.constructor=Ma;Ma.prototype.isMeshPhongMaterial=!0;Ma.prototype.copy=function(a){P.prototype.copy.call(this,
    a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=
    a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Bb.prototype=
    Object.create(Ma.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isMeshToonMaterial=!0;Bb.prototype.copy=function(a){Ma.prototype.copy.call(this,a);this.gradientMap=a.gradientMap;return this};Cb.prototype=Object.create(P.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isMeshNormalMaterial=!0;Cb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;
    this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Db.prototype=Object.create(P.prototype);Db.prototype.constructor=Db;Db.prototype.isMeshLambertMaterial=!0;Db.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=
    a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
    this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Eb.prototype=Object.create(W.prototype);Eb.prototype.constructor=Eb;Eb.prototype.isLineDashedMaterial=!0;Eb.prototype.copy=function(a){W.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var Mg=Object.freeze({ShadowMaterial:fc,SpriteMaterial:hb,RawShaderMaterial:gc,ShaderMaterial:Fa,PointsMaterial:Ka,MeshPhysicalMaterial:Ab,MeshStandardMaterial:Ua,
    MeshPhongMaterial:Ma,MeshToonMaterial:Bb,MeshNormalMaterial:Cb,MeshLambertMaterial:Db,MeshDepthMaterial:eb,MeshDistanceMaterial:fb,MeshBasicMaterial:Aa,LineDashedMaterial:Eb,LineBasicMaterial:W,Material:P}),Ib={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},xa=new he,cb={};Object.assign(Na.prototype,{load:function(a,b,c,d){void 0===a&&(a=
    "");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Ib.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;if(void 0!==cb[a])cb[a].push({onLoad:b,onProgress:c,onError:d});else{var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){c=g[1];var h=!!g[2],g=g[3],g=window.decodeURIComponent(g);h&&(g=window.atob(g));try{var k=(this.responseType||"").toLowerCase();switch(k){case "arraybuffer":case "blob":for(var m=new Uint8Array(g.length),
    h=0;h<g.length;h++)m[h]=g.charCodeAt(h);var l="blob"===k?new Blob([m.buffer],{type:c}):m.buffer;break;case "document":l=(new DOMParser).parseFromString(g,c);break;case "json":l=JSON.parse(g);break;default:l=g}window.setTimeout(function(){b&&b(l);e.manager.itemEnd(a)},0)}catch(u){window.setTimeout(function(){d&&d(u);e.manager.itemEnd(a);e.manager.itemError(a)},0)}}else{cb[a]=[];cb[a].push({onLoad:b,onProgress:c,onError:d});var n=new XMLHttpRequest;n.open("GET",a,!0);n.addEventListener("load",function(b){var c=
    this.response;Ib.add(a,c);var d=cb[a];delete cb[a];if(200===this.status){for(var f=0,g=d.length;f<g;f++){var h=d[f];if(h.onLoad)h.onLoad(c)}e.manager.itemEnd(a)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");f=0;for(g=d.length;f<g;f++)if(h=d[f],h.onLoad)h.onLoad(c);e.manager.itemEnd(a)}else{f=0;for(g=d.length;f<g;f++)if(h=d[f],h.onError)h.onError(b);e.manager.itemEnd(a);e.manager.itemError(a)}},!1);n.addEventListener("progress",function(b){for(var c=cb[a],d=0,e=
    c.length;d<e;d++){var f=c[d];if(f.onProgress)f.onProgress(b)}},!1);n.addEventListener("error",function(b){var c=cb[a];delete cb[a];for(var d=0,f=c.length;d<f;d++){var g=c[d];if(g.onError)g.onError(b)}e.manager.itemEnd(a);e.manager.itemError(a)},!1);void 0!==this.responseType&&(n.responseType=this.responseType);void 0!==this.withCredentials&&(n.withCredentials=this.withCredentials);n.overrideMimeType&&n.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(h in this.requestHeader)n.setRequestHeader(h,
    this.requestHeader[h]);n.send(null)}e.manager.itemStart(a);return n}},setPath:function(a){this.path=a;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=a;return this},setMimeType:function(a){this.mimeType=a;return this},setRequestHeader:function(a){this.requestHeader=a;return this}});Object.assign(gf.prototype,{load:function(a,b,c,d){function e(e){m.load(a[e],function(a){a=g._parser(a,!0);h[e]={width:a.width,height:a.height,
    format:a.format,mipmaps:a.mipmaps};f+=1;6===f&&(1===a.mipmapCount&&(k.minFilter=1006),k.format=a.format,k.needsUpdate=!0,b&&b(k))},c,d)}var f,g=this,h=[],k=new Sb;k.image=h;var m=new Na(this.manager);m.setPath(this.path);m.setResponseType("arraybuffer");if(Array.isArray(a))for(var l=f=0,n=a.length;l<n;++l)e(l);else m.load(a,function(a){a=g._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){h[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)h[d].mipmaps.push(a.mipmaps[d*
    a.mipmapCount+e]),h[d].format=a.format,h[d].width=a.width,h[d].height=a.height}else k.image.width=a.width,k.image.height=a.height,k.mipmaps=a.mipmaps;1===a.mipmapCount&&(k.minFilter=1006);k.format=a.format;k.needsUpdate=!0;b&&b(k)},c,d);return k},setPath:function(a){this.path=a;return this}});Object.assign(ie.prototype,{load:function(a,b,c,d){var e=this,f=new lb,g=new Na(this.manager);g.setResponseType("arraybuffer");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==
    a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==a.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});Object.assign(ad.prototype,
    {crossOrigin:"Anonymous",load:function(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Ib.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;c=document.createElementNS("http://www.w3.org/1999/xhtml","img");c.addEventListener("load",function(){Ib.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);c.addEventListener("error",function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)},
    !1);"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin);e.manager.itemStart(a);c.src=a;return c},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(je.prototype,{crossOrigin:"Anonymous",load:function(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new db,g=new ad(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);
    var h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(Ad.prototype,{crossOrigin:"Anonymous",load:function(a,b,c,d){var e=new U,f=new ad(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(c){e.image=c;c=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data\:image\/jpeg/);e.format=c?1022:1023;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=
    a;return this},setPath:function(a){this.path=a;return this}});Object.assign(C.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)},getPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();
    return a[a.length-1]},getLengths:function(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c=this.getPoint(0),d,e=0;b.push(0);for(d=1;d<=a;d++){var f=this.getPoint(d/a);e+=f.distanceTo(c);b.push(e);c=f}return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d=c.length;b=b?b:a*
    c[d-1];for(var e=0,f=d-1,g;e<=f;)if(a=Math.floor(e+(f-e)/2),g=c[a]-b,0>g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a/(d-1);e=c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)},computeFrenetFrames:function(a,b){var c=new p,d=[],e=[],f=[],g=new p,h=new O,k;for(k=0;k<=a;k++){var m=
    k/a;d[k]=this.getTangentAt(m);d[k].normalize()}e[0]=new p;f[0]=new p;k=Number.MAX_VALUE;m=Math.abs(d[0].x);var l=Math.abs(d[0].y),n=Math.abs(d[0].z);m<=k&&(k=m,c.set(1,0,0));l<=k&&(k=l,c.set(0,1,0));n<=k&&c.set(0,0,1);g.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],e[0]);for(k=1;k<=a;k++)e[k]=e[k-1].clone(),f[k]=f[k-1].clone(),g.crossVectors(d[k-1],d[k]),g.length()>Number.EPSILON&&(g.normalize(),c=Math.acos(Q.clamp(d[k-1].dot(d[k]),-1,1)),e[k].applyMatrix4(h.makeRotationAxis(g,
    c))),f[k].crossVectors(d[k],e[k]);if(!0===b)for(c=Math.acos(Q.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applyMatrix4(h.makeRotationAxis(d[k],c*k)),f[k].crossVectors(d[k],e[k]);return{tangents:d,normals:e,binormals:f}},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this},toJSON:function(){var a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=
    this.arcLengthDivisions;a.type=this.type;return a},fromJSON:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}});Ba.prototype=Object.create(C.prototype);Ba.prototype.constructor=Ba;Ba.prototype.isEllipseCurve=!0;Ba.prototype.getPoint=function(a,b){b=b||new D;for(var c=2*Math.PI,d=this.aEndAngle-this.aStartAngle,e=Math.abs(d)<Number.EPSILON;0>d;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(d=e?0:c);!0!==this.aClockwise||e||(d=d===c?-c:d-c);c=this.aStartAngle+a*d;a=this.aX+this.xRadius*
    Math.cos(c);var f=this.aY+this.yRadius*Math.sin(c);0!==this.aRotation&&(c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a-this.aX,f-=this.aY,a=e*c-f*d+this.aX,f=e*d+f*c+this.aY);return b.set(a,f)};Ba.prototype.copy=function(a){C.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};Ba.prototype.toJSON=function(){var a=
    C.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a};Ba.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};hc.prototype=
    Object.create(Ba.prototype);hc.prototype.constructor=hc;hc.prototype.isArcCurve=!0;var Td=new p,Ee=new ke,Fe=new ke,Ge=new ke;ca.prototype=Object.create(C.prototype);ca.prototype.constructor=ca;ca.prototype.isCatmullRomCurve3=!0;ca.prototype.getPoint=function(a,b){b=b||new p;var c=this.points,d=c.length;a*=d-(this.closed?0:1);var e=Math.floor(a);a-=e;this.closed?e+=0<e?0:(Math.floor(Math.abs(e)/c.length)+1)*c.length:0===a&&e===d-1&&(e=d-2,a=1);if(this.closed||0<e)var f=c[(e-1)%d];else Td.subVectors(c[0],
    c[1]).add(c[0]),f=Td;var g=c[e%d];var h=c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(Td.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=Td);if("centripetal"===this.curveType||"chordal"===this.curveType){var k="chordal"===this.curveType?.5:.25,d=Math.pow(f.distanceToSquared(g),k),e=Math.pow(g.distanceToSquared(h),k),k=Math.pow(h.distanceToSquared(c),k);1E-4>e&&(e=1);1E-4>d&&(d=e);1E-4>k&&(k=e);Ee.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,k);Fe.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,k);Ge.initNonuniformCatmullRom(f.z,
    g.z,h.z,c.z,d,e,k)}else"catmullrom"===this.curveType&&(Ee.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),Fe.initCatmullRom(f.y,g.y,h.y,c.y,this.tension),Ge.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(Ee.calc(a),Fe.calc(a),Ge.calc(a));return b};ca.prototype.copy=function(a){C.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};ca.prototype.toJSON=
    function(){var a=C.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return a};ca.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=a.points[b];this.points.push((new p).fromArray(d))}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};Oa.prototype=Object.create(C.prototype);
    Oa.prototype.constructor=Oa;Oa.prototype.isCubicBezierCurve=!0;Oa.prototype.getPoint=function(a,b){b=b||new D;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(cd(a,c.x,d.x,e.x,f.x),cd(a,c.y,d.y,e.y,f.y));return b};Oa.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Oa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=
    this.v3.toArray();return a};Oa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};Va.prototype=Object.create(C.prototype);Va.prototype.constructor=Va;Va.prototype.isCubicBezierCurve3=!0;Va.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(cd(a,c.x,d.x,e.x,f.x),cd(a,c.y,d.y,e.y,f.y),cd(a,c.z,d.z,e.z,f.z));return b};Va.prototype.copy=
    function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Va.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};Va.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};ya.prototype=Object.create(C.prototype);
    ya.prototype.constructor=ya;ya.prototype.isLineCurve=!0;ya.prototype.getPoint=function(a,b){b=b||new D;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};ya.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};ya.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};ya.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};ya.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);
    a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};ya.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Pa.prototype=Object.create(C.prototype);Pa.prototype.constructor=Pa;Pa.prototype.isLineCurve3=!0;Pa.prototype.getPoint=function(a,b){b=b||new p;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};Pa.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};Pa.prototype.copy=
    function(a){C.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Pa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Pa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Qa.prototype=Object.create(C.prototype);Qa.prototype.constructor=Qa;Qa.prototype.isQuadraticBezierCurve=!0;Qa.prototype.getPoint=function(a,b){b=b||new D;var c=
    this.v0,d=this.v1,e=this.v2;b.set(bd(a,c.x,d.x,e.x),bd(a,c.y,d.y,e.y));return b};Qa.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Qa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Qa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};
    Wa.prototype=Object.create(C.prototype);Wa.prototype.constructor=Wa;Wa.prototype.isQuadraticBezierCurve3=!0;Wa.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2;b.set(bd(a,c.x,d.x,e.x),bd(a,c.y,d.y,e.y),bd(a,c.z,d.z,e.z));return b};Wa.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Wa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();
    a.v2=this.v2.toArray();return a};Wa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Ra.prototype=Object.create(C.prototype);Ra.prototype.constructor=Ra;Ra.prototype.isSplineCurve=!0;Ra.prototype.getPoint=function(a,b){b=b||new D;var c=this.points,d=(c.length-1)*a;a=Math.floor(d);var d=d-a,e=c[0===a?a:a-1],f=c[a],g=c[a>c.length-2?c.length-1:a+1],c=c[a>c.length-3?c.length-1:a+2];b.set(hf(d,e.x,f.x,
    g.x,c.x),hf(d,e.y,f.y,g.y,c.y));return b};Ra.prototype.copy=function(a){C.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());return this};Ra.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return a};Ra.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=
    a.points[b];this.points.push((new D).fromArray(d))}return this};var Ng=Object.freeze({ArcCurve:hc,CatmullRomCurve3:ca,CubicBezierCurve:Oa,CubicBezierCurve3:Va,EllipseCurve:Ba,LineCurve:ya,LineCurve3:Pa,QuadraticBezierCurve:Qa,QuadraticBezierCurve3:Wa,SplineCurve:Ra});bb.prototype=Object.assign(Object.create(C.prototype),{constructor:bb,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new ya(b,
    a))},getPoint:function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],
    b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++)for(var f=e[d],f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a),g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}this.autoClose&&
    1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},copy:function(a){C.prototype.copy.call(this,a);this.curves=[];for(var b=0,c=a.curves.length;b<c;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;return this},toJSON:function(){var a=C.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var b=0,c=this.curves.length;b<c;b++)a.curves.push(this.curves[b].toJSON());return a},fromJSON:function(a){C.prototype.fromJSON.call(this,a);this.autoClose=a.autoClose;
    this.curves=[];for(var b=0,c=a.curves.length;b<c;b++){var d=a.curves[b];this.curves.push((new Ng[d.type]).fromJSON(d))}return this}});Sa.prototype=Object.assign(Object.create(bb.prototype),{constructor:Sa,setFromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new ya(this.currentPoint.clone(),new D(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,
    b,c,d){a=new Qa(this.currentPoint.clone(),new D(a,b),new D(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new Oa(this.currentPoint.clone(),new D(a,b),new D(c,d),new D(e,f));this.curves.push(a);this.currentPoint.set(e,f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),b=new Ra(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f)},absarc:function(a,
    b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new Ba(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)},copy:function(a){bb.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return this},toJSON:function(){var a=bb.prototype.toJSON.call(this);
    a.currentPoint=this.currentPoint.toArray();return a},fromJSON:function(a){bb.prototype.fromJSON.call(this,a);this.currentPoint.fromArray(a.currentPoint);return this}});jb.prototype=Object.assign(Object.create(Sa.prototype),{constructor:jb,getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},copy:function(a){Sa.prototype.copy.call(this,a);this.holes=[];
    for(var b=0,c=a.holes.length;b<c;b++)this.holes.push(a.holes[b].clone());return this},toJSON:function(){var a=Sa.prototype.toJSON.call(this);a.uuid=this.uuid;a.holes=[];for(var b=0,c=this.holes.length;b<c;b++)a.holes.push(this.holes[b].toJSON());return a},fromJSON:function(a){Sa.prototype.fromJSON.call(this,a);this.uuid=a.uuid;this.holes=[];for(var b=0,c=a.holes.length;b<c;b++){var d=a.holes[b];this.holes.push((new Sa).fromJSON(d))}return this}});da.prototype=Object.assign(Object.create(x.prototype),
    {constructor:da,isLight:!0,copy:function(a){x.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==
    this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});Bd.prototype=Object.assign(Object.create(da.prototype),{constructor:Bd,isHemisphereLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});Object.assign(Fb.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},
    toJSON:function(){var a={};0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}});Cd.prototype=Object.assign(Object.create(Fb.prototype),{constructor:Cd,isSpotLightShadow:!0,update:function(a){var b=this.camera,c=2*Q.RAD2DEG*a.angle,d=this.mapSize.width/this.mapSize.height;a=a.distance||b.far;if(c!==b.fov||d!==b.aspect||a!==b.far)b.fov=
    c,b.aspect=d,b.far=a,b.updateProjectionMatrix()}});Dd.prototype=Object.assign(Object.create(da.prototype),{constructor:Dd,isSpotLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Ed.prototype=Object.assign(Object.create(da.prototype),{constructor:Ed,isPointLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.distance=a.distance;
    this.decay=a.decay;this.shadow=a.shadow.clone();return this}});Fd.prototype=Object.assign(Object.create(Fb.prototype),{constructor:Fd});Gd.prototype=Object.assign(Object.create(da.prototype),{constructor:Gd,isDirectionalLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Hd.prototype=Object.assign(Object.create(da.prototype),{constructor:Hd,isAmbientLight:!0});Id.prototype=Object.assign(Object.create(da.prototype),{constructor:Id,
    isRectAreaLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this},toJSON:function(a){a=da.prototype.toJSON.call(this,a);a.object.width=this.width;a.object.height=this.height;return a}});Jd.prototype=Object.assign(Object.create(T.prototype),{constructor:Jd,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Kd.prototype=Object.assign(Object.create(T.prototype),
    {constructor:Kd,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Object.assign(pa.prototype,{evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&
    (c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||
    this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(){throw Error("call to abstract method");},intervalChanged_:function(){}});Object.assign(pa.prototype,{beforeStart_:pa.prototype.copySampleValue_,afterEnd_:pa.prototype.copySampleValue_});Ld.prototype=Object.assign(Object.create(pa.prototype),{constructor:Ld,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,
    g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)ha.slerpFlat(e,0,f,a-g,f,a,b);return e}});dd.prototype=Object.assign(Object.create(T.prototype),{constructor:dd,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return new Ld(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});Md.prototype=Object.assign(Object.create(T.prototype),{constructor:Md,ValueTypeName:"color"});ic.prototype=Object.assign(Object.create(T.prototype),
    {constructor:ic,ValueTypeName:"number"});Nd.prototype=Object.assign(Object.create(pa.prototype),{constructor:Nd,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=a;g=2*b-c;break;case 2402:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];
    break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g,k=this._offsetPrev,m=this._offsetNext,l=this._weightPrev,n=this._weightNext,p=(c-b)/(d-b);c=p*p;d=c*p;b=-l*d+2*l*c-l*p;l=(1+l)*d+(-1.5-2*l)*c+(-.5+l)*p+1;p=(-1-n)*d+(1.5+n)*c+.5*p;n=n*d-n*c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+l*f[h+c]+p*f[a+c]+n*f[m+c];
    return e}});ed.prototype=Object.assign(Object.create(pa.prototype),{constructor:ed,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+d]*c+f[a+d]*b;return e}});Od.prototype=Object.assign(Object.create(pa.prototype),{constructor:Od,interpolate_:function(a){return this.copySampleValue_(a-1)}});var ga={arraySlice:function(a,b,c){return ga.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:
    a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,k=0;k!==b;++k)e[g++]=
    a[h+k];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}}};Object.assign(T,{parse:function(a){if(void 0===a.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
    var b=T._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];ga.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{var b={name:a.name,times:ga.convertArray(a.times,Array),values:ga.convertArray(a.values,Array)},c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return ic;
    case "vector":case "vector2":case "vector3":case "vector4":return jc;case "color":return Md;case "quaternion":return dd;case "bool":case "boolean":return Kd;case "string":return Jd}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+a);}});Object.assign(T.prototype,{constructor:T,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return new Od(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new ed(this.times,
    this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Nd(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);
    else throw Error(b);console.warn("THREE.KeyframeTrack:",b)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=
    this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=ga.arraySlice(c,e,f),this.values=ga.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times,b=this.values,
    d=c.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if("number"===typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&ga.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,
    d);a=!1;break}return a},optimize:function(){for(var a,b,c=this.times,d=this.values,e=this.getValueSize(),f=2302===this.getInterpolation(),g=1,h=c.length-1,k=1;k<h;++k){a=!1;var m=c[k];if(m!==c[k+1]&&(1!==k||m!==m[0]))if(f)a=!0;else{b=k*e;for(var l=b-e,n=b+e,m=0;m!==e;++m){var p=d[b+m];if(p!==d[l+m]||p!==d[n+m]){a=!0;break}}}if(a){if(k!==g)for(c[g]=c[k],b=k*e,a=g*e,m=0;m!==e;++m)d[a+m]=d[b+m];++g}}if(0<h){c[g]=c[h];b=h*e;a=g*e;for(m=0;m!==e;++m)d[a+m]=d[b+m];++g}g!==c.length&&(this.times=ga.arraySlice(c,
    0,g),this.values=ga.arraySlice(d,0,g*e));return this}});jc.prototype=Object.assign(Object.create(T.prototype),{constructor:jc,ValueTypeName:"vector"});Object.assign(Ca,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(T.parse(c[e]).scale(d));return new Ca(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(T.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,
    b,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],k=[];h.push((g+e-1)%e,g,(g+1)%e);k.push(0,1,0);var m=ga.getKeyframeOrder(h),h=ga.sortedArray(h,1,m),k=ga.sortedArray(k,1,m);d||0!==h[0]||(h.push(e),k.push(k[0]));f.push((new ic(".morphTargetInfluences["+b[g].name+"]",h,k)).scale(1/c))}return new Ca(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,
    b,c){for(var d,e={},f=/^([\w-]*?)([\d]+)$/,g=0,h=a.length;g<h;g++){var k=a[g],m=k.name.match(f);m&&1<m.length&&(d=m[1],(m=e[d])||(e[d]=m=[]),m.push(k))}a=[];for(d in e)a.push(Ca.CreateFromMorphTargetSequence(d,e[d],b,c));return a},parseAnimation:function(a,b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];ga.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||"default",f=a.length||
    -1,g=a.fps||30;a=a.hierarchy||[];for(var h=0;h<a.length;h++){var k=a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){for(var f={},m=0;m<k.length;m++)if(k[m].morphTargets)for(var l=0;l<k[m].morphTargets.length;l++)f[k[m].morphTargets[l]]=-1;for(var n in f){for(var p=[],r=[],l=0;l!==k[m].morphTargets.length;++l){var t=k[m];p.push(t.time);r.push(t.morphTarget===n?1:0)}d.push(new ic(".morphTargetInfluence["+n+"]",p,r))}f=f.length*(g||1)}else m=".bones["+b[h].name+"]",c(jc,m+".position",k,"pos",d),c(dd,
    m+".quaternion",k,"rot",d),c(jc,m+".scale",k,"scl",d)}return 0===d.length?null:new Ca(e,f,d)}});Object.assign(Ca.prototype,{resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b)var d=this.tracks[b],a=Math.max(a,d.times[d.times.length-1]);this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}});Object.assign(Pd.prototype,
    {load:function(a,b,c,d){var e=this;(new Na(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function(a){this.textures=a},parse:function(a){function b(a){void 0===c[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return c[a]}var c=this.textures,d=new Mg[a.type];void 0!==a.uuid&&(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);
    void 0!==a.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&d.specular.setHex(a.specular);void 0!==a.shininess&&(d.shininess=a.shininess);void 0!==a.clearCoat&&(d.clearCoat=a.clearCoat);void 0!==a.clearCoatRoughness&&(d.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.uniforms&&(d.uniforms=a.uniforms);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(d.vertexColors=a.vertexColors);void 0!==
    a.fog&&(d.fog=a.fog);void 0!==a.flatShading&&(d.flatShading=a.flatShading);void 0!==a.blending&&(d.blending=a.blending);void 0!==a.side&&(d.side=a.side);void 0!==a.opacity&&(d.opacity=a.opacity);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);void 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==
    a.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(d.rotation=a.rotation);1!==a.linewidth&&(d.linewidth=a.linewidth);void 0!==a.dashSize&&(d.dashSize=a.dashSize);void 0!==a.gapSize&&(d.gapSize=a.gapSize);void 0!==a.scale&&(d.scale=a.scale);void 0!==a.skinning&&(d.skinning=a.skinning);void 0!==a.morphTargets&&(d.morphTargets=
    a.morphTargets);void 0!==a.dithering&&(d.dithering=a.dithering);void 0!==a.visible&&(d.visible=a.visible);void 0!==a.userData&&(d.userData=a.userData);void 0!==a.shading&&(d.flatShading=1===a.shading);void 0!==a.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap),d.transparent=!0);void 0!==a.bumpMap&&(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&
    (d.normalMap=b(a.normalMap));if(void 0!==a.normalScale){var e=a.normalScale;!1===Array.isArray(e)&&(e=[e,e]);d.normalScale=(new D).fromArray(e)}void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=
    b(a.emissiveMap));void 0!==a.emissiveIntensity&&(d.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.envMap&&(d.envMap=b(a.envMap));void 0!==a.reflectivity&&(d.reflectivity=a.reflectivity);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(d.gradientMap=
    b(a.gradientMap));return d}});Object.assign(le.prototype,{load:function(a,b,c,d){var e=this;(new Na(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new E;var c=a.data.index;void 0!==c&&(c=new xf[c.type](c.array),b.setIndex(new M(c,1)));var d=a.data.attributes;for(f in d){var e=d[f];c=new xf[e.type](e.array);b.addAttribute(f,new M(c,e.itemSize,e.normalized))}var f=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==f)for(c=0,d=f.length;c!==d;++c)e=f[c],
    b.addGroup(e.start,e.count,e.materialIndex);a=a.data.boundingSphere;void 0!==a&&(f=new p,void 0!==a.center&&f.fromArray(a.center),b.boundingSphere=new Ia(f,a.radius));return b}});var xf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};kc.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,
    b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};Object.assign(kc.prototype,{crossOrigin:void 0,initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},b=new H,c=new Ad,d=new Pd;return function(e,f,g){function h(a,b,d,e,h){a=f+a;var m=kc.Handlers.get(a);
    null!==m?a=m.load(a):(c.setCrossOrigin(g),a=c.load(a));void 0!==b&&(a.repeat.fromArray(b),1!==b[0]&&(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void 0!==d&&a.offset.fromArray(d);void 0!==e&&("repeat"===e[0]&&(a.wrapS=1E3),"mirror"===e[0]&&(a.wrapS=1002),"repeat"===e[1]&&(a.wrapT=1E3),"mirror"===e[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);b=Q.generateUUID();k[b]=a;return b}var k={},m={uuid:Q.generateUUID(),type:"MeshLambertMaterial"},l;for(l in e){var n=e[l];switch(l){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;
    case "DbgName":m.name=n;break;case "blending":m.blending=a[n];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case "colorDiffuse":m.color=b.fromArray(n).getHex();break;case "colorSpecular":m.specular=b.fromArray(n).getHex();break;case "colorEmissive":m.emissive=b.fromArray(n).getHex();break;case "specularCoef":m.shininess=n;break;case "shading":"basic"===n.toLowerCase()&&(m.type="MeshBasicMaterial");"phong"===n.toLowerCase()&&
    (m.type="MeshPhongMaterial");"standard"===n.toLowerCase()&&(m.type="MeshStandardMaterial");break;case "mapDiffuse":m.map=h(n,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapEmissive":m.emissiveMap=h(n,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case "mapEmissiveRepeat":case "mapEmissiveOffset":case "mapEmissiveWrap":case "mapEmissiveAnisotropy":break;
    case "mapLight":m.lightMap=h(n,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":m.aoMap=h(n,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;case "mapBump":m.bumpMap=h(n,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case "mapBumpScale":m.bumpScale=
    n;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":m.normalMap=h(n,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case "mapNormalFactor":m.normalScale=[n,n];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":m.specularMap=h(n,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;
    case "mapMetalness":m.metalnessMap=h(n,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case "mapMetalnessRepeat":case "mapMetalnessOffset":case "mapMetalnessWrap":case "mapMetalnessAnisotropy":break;case "mapRoughness":m.roughnessMap=h(n,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case "mapRoughnessRepeat":case "mapRoughnessOffset":case "mapRoughnessWrap":case "mapRoughnessAnisotropy":break;case "mapAlpha":m.alphaMap=
    h(n,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":m.side=1;break;case "doubleSided":m.side=2;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");m.opacity=n;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":m[l]=
    n;break;case "vertexColors":!0===n&&(m.vertexColors=2);"face"===n&&(m.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,n)}}"MeshBasicMaterial"===m.type&&delete m.emissive;"MeshPhongMaterial"!==m.type&&delete m.specular;1>m.opacity&&(m.transparent=!0);d.setTextures(k);return d.parse(m)}}()});var He={decodeText:function(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);for(var b="",c=0,d=a.length;c<d;c++)b+=String.fromCharCode(a[c]);return b},
    extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"}};Object.assign(me.prototype,{load:function(a,b,c,d){var e=this,f=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:He.extractUrlBase(a),g=new Na(this.manager);g.setWithCredentials(this.withCredentials);g.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d)){if("object"===d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");
    return}if("scene"===d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.");return}}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(){return function(a,b){void 0!==a.data&&(a=a.data);a.scale=void 0!==a.scale?1/a.scale:1;var c=new L,d=a,e,f,g,h=d.faces;var k=d.vertices;var m=d.normals,l=d.colors;var n=d.scale;var u=0;if(void 0!==d.uvs){for(e=0;e<d.uvs.length;e++)d.uvs[e].length&&u++;for(e=
    0;e<u;e++)c.faceVertexUvs[e]=[]}var r=0;for(g=k.length;r<g;)e=new p,e.x=k[r++]*n,e.y=k[r++]*n,e.z=k[r++]*n,c.vertices.push(e);r=0;for(g=h.length;r<g;){k=h[r++];var t=k&1;var v=k&2;e=k&8;var w=k&16;var z=k&32;n=k&64;k&=128;if(t){t=new Ya;t.a=h[r];t.b=h[r+1];t.c=h[r+3];var y=new Ya;y.a=h[r+1];y.b=h[r+2];y.c=h[r+3];r+=4;v&&(v=h[r++],t.materialIndex=v,y.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<u;e++){var x=d.uvs[e];c.faceVertexUvs[e][v]=[];c.faceVertexUvs[e][v+1]=[];for(f=0;4>f;f++){var A=h[r++];
    var B=x[2*A];A=x[2*A+1];B=new D(B,A);2!==f&&c.faceVertexUvs[e][v].push(B);0!==f&&c.faceVertexUvs[e][v+1].push(B)}}w&&(w=3*h[r++],t.normal.set(m[w++],m[w++],m[w]),y.normal.copy(t.normal));if(z)for(e=0;4>e;e++)w=3*h[r++],z=new p(m[w++],m[w++],m[w]),2!==e&&t.vertexNormals.push(z),0!==e&&y.vertexNormals.push(z);n&&(n=h[r++],n=l[n],t.color.setHex(n),y.color.setHex(n));if(k)for(e=0;4>e;e++)n=h[r++],n=l[n],2!==e&&t.vertexColors.push(new H(n)),0!==e&&y.vertexColors.push(new H(n));c.faces.push(t);c.faces.push(y)}else{t=
    new Ya;t.a=h[r++];t.b=h[r++];t.c=h[r++];v&&(v=h[r++],t.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<u;e++)for(x=d.uvs[e],c.faceVertexUvs[e][v]=[],f=0;3>f;f++)A=h[r++],B=x[2*A],A=x[2*A+1],B=new D(B,A),c.faceVertexUvs[e][v].push(B);w&&(w=3*h[r++],t.normal.set(m[w++],m[w++],m[w]));if(z)for(e=0;3>e;e++)w=3*h[r++],z=new p(m[w++],m[w++],m[w]),t.vertexNormals.push(z);n&&(n=h[r++],t.color.setHex(l[n]));if(k)for(e=0;3>e;e++)n=h[r++],t.vertexColors.push(new H(l[n]));c.faces.push(t)}}d=a;r=void 0!==d.influencesPerVertex?
    d.influencesPerVertex:2;if(d.skinWeights)for(g=0,h=d.skinWeights.length;g<h;g+=r)c.skinWeights.push(new aa(d.skinWeights[g],1<r?d.skinWeights[g+1]:0,2<r?d.skinWeights[g+2]:0,3<r?d.skinWeights[g+3]:0));if(d.skinIndices)for(g=0,h=d.skinIndices.length;g<h;g+=r)c.skinIndices.push(new aa(d.skinIndices[g],1<r?d.skinIndices[g+1]:0,2<r?d.skinIndices[g+2]:0,3<r?d.skinIndices[g+3]:0));c.bones=d.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&
    console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.");g=a;h=g.scale;if(void 0!==g.morphTargets)for(d=0,r=g.morphTargets.length;d<r;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=g.morphTargets[d].name,c.morphTargets[d].vertices=[],m=c.morphTargets[d].vertices,l=g.morphTargets[d].vertices,u=0,k=l.length;u<k;u+=3)n=new p,n.x=l[u]*h,n.y=l[u+1]*h,n.z=l[u+2]*h,m.push(n);if(void 0!==
    g.morphColors&&0<g.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),h=c.faces,g=g.morphColors[0].colors,d=0,r=h.length;d<r;d++)h[d].color.fromArray(g,3*d);g=a;d=[];r=[];void 0!==g.animation&&r.push(g.animation);void 0!==g.animations&&(g.animations.length?r=r.concat(g.animations):r.push(g.animations));for(g=0;g<r.length;g++)(h=Ca.parseAnimation(r[g],c.bones))&&d.push(h);c.morphTargets&&(r=Ca.CreateClipsFromMorphTargetSequences(c.morphTargets,
    10),d=d.concat(r));0<d.length&&(c.animations=d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};a=kc.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:a}}}()});Object.assign(jf.prototype,{load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;(new Na(e.manager)).load(a,function(c){var f=null;try{f=JSON.parse(c)}catch(h){void 0!==d&&d(h);console.error("THREE:ObjectLoader: Can't parse "+
    a+".",h.message);return}c=f.metadata;void 0===c||void 0===c.type||"geometry"===c.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+a+". Use THREE.JSONLoader instead."):e.parse(f,b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseShape(a.shapes),c=this.parseGeometries(a.geometries,c),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,
    d),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseShape:function(a){var b={};if(void 0!==a)for(var c=0,d=a.length;c<d;c++){var e=(new jb).fromJSON(a[c]);b[e.uuid]=e}return b},parseGeometries:function(a,b){var c={};if(void 0!==a)for(var d=new me,e=new le,f=0,g=a.length;f<g;f++){var h=a[f];switch(h.type){case "PlaneGeometry":case "PlaneBufferGeometry":var k=new ka[h.type](h.width,
    h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":k=new ka[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":k=new ka[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":k=new ka[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);
    break;case "ConeGeometry":case "ConeBufferGeometry":k=new ka[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":k=new ka[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":k=
    new ka[h.type](h.radius,h.detail);break;case "RingGeometry":case "RingBufferGeometry":k=new ka[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":k=new ka[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":k=new ka[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case "LatheGeometry":case "LatheBufferGeometry":k=
    new ka[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":k=new ka[h.type](h.vertices,h.indices,h.radius,h.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":k=[];f=0;for(g=h.shapes.length;f<g;f++)k.push(b[h.shapes[f]]);k=new ka[h.type](k,h.curveSegments);break;case "BufferGeometry":k=e.parse(h);break;case "Geometry":k=d.parse(h,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+
    h.type+'"');continue}k.uuid=h.uuid;void 0!==h.name&&(k.name=h.name);c[h.uuid]=k}return c},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new Pd;d.setTextures(b);b=0;for(var e=a.length;b<e;b++){var f=a[b];if("MultiMaterial"===f.type){for(var g=[],h=0;h<f.materials.length;h++)g.push(d.parse(f.materials[h]));c[f.uuid]=g}else c[f.uuid]=d.parse(f)}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=Ca.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);
    return f.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemEnd(a);d.manager.itemError(a)})}var d=this,e={};if(void 0!==a&&0<a.length){b=new he(b);var f=new ad(b);f.setCrossOrigin(this.crossOrigin);b=0;for(var g=a.length;b<g;b++){var h=a[b],k=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:d.texturePath+h.url;e[h.uuid]=c(k)}}return e},parseTextures:function(a,b){function c(a,b){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",
    a);return b[a]}var d={};if(void 0!==a)for(var e=0,f=a.length;e<f;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No "image" specified for',g.uuid);void 0===b[g.image]&&console.warn("THREE.ObjectLoader: Undefined image",g.image);var h=new U(b[g.image]);h.needsUpdate=!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,Og));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.center&&h.center.fromArray(g.center);
    void 0!==g.rotation&&(h.rotation=g.rotation);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],yf),h.wrapT=c(g.wrap[1],yf));void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,zf));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,zf));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);d[g.uuid]=h}return d},parseObject:function(){var a=new O;return function(b,c,d){function e(a){void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return c[a]}function f(a){if(void 0!==
    a){if(Array.isArray(a)){for(var b=[],c=0,e=a.length;c<e;c++){var f=a[c];void 0===d[f]&&console.warn("THREE.ObjectLoader: Undefined material",f);b.push(d[f])}return b}void 0===d[a]&&console.warn("THREE.ObjectLoader: Undefined material",a);return d[a]}}switch(b.type){case "Scene":var g=new vd;void 0!==b.background&&Number.isInteger(b.background)&&(g.background=new H(b.background));void 0!==b.fog&&("Fog"===b.fog.type?g.fog=new Qb(b.fog.color,b.fog.near,b.fog.far):"FogExp2"===b.fog.type&&(g.fog=new Pb(b.fog.color,
    b.fog.density)));break;case "PerspectiveCamera":g=new ba(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(g.focus=b.focus);void 0!==b.zoom&&(g.zoom=b.zoom);void 0!==b.filmGauge&&(g.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(g.filmOffset=b.filmOffset);void 0!==b.view&&(g.view=Object.assign({},b.view));break;case "OrthographicCamera":g=new Lb(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":g=new Hd(b.color,b.intensity);break;case "DirectionalLight":g=new Gd(b.color,b.intensity);
    break;case "PointLight":g=new Ed(b.color,b.intensity,b.distance,b.decay);break;case "RectAreaLight":g=new Id(b.color,b.intensity,b.width,b.height);break;case "SpotLight":g=new Dd(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case "HemisphereLight":g=new Bd(b.color,b.groundColor,b.intensity);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case "Mesh":g=e(b.geometry);var h=f(b.material);g=g.bones&&0<g.bones.length?new xd(g,
    h):new ra(g,h);break;case "LOD":g=new Dc;break;case "Line":g=new sa(e(b.geometry),f(b.material),b.mode);break;case "LineLoop":g=new yd(e(b.geometry),f(b.material));break;case "LineSegments":g=new X(e(b.geometry),f(b.material));break;case "PointCloud":case "Points":g=new Rb(e(b.geometry),f(b.material));break;case "Sprite":g=new Cc(f(b.material));break;case "Group":g=new Fc;break;default:g=new x}g.uuid=b.uuid;void 0!==b.name&&(g.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(g.position,
    g.quaternion,g.scale)):(void 0!==b.position&&g.position.fromArray(b.position),void 0!==b.rotation&&g.rotation.fromArray(b.rotation),void 0!==b.quaternion&&g.quaternion.fromArray(b.quaternion),void 0!==b.scale&&g.scale.fromArray(b.scale));void 0!==b.castShadow&&(g.castShadow=b.castShadow);void 0!==b.receiveShadow&&(g.receiveShadow=b.receiveShadow);b.shadow&&(void 0!==b.shadow.bias&&(g.shadow.bias=b.shadow.bias),void 0!==b.shadow.radius&&(g.shadow.radius=b.shadow.radius),void 0!==b.shadow.mapSize&&
    g.shadow.mapSize.fromArray(b.shadow.mapSize),void 0!==b.shadow.camera&&(g.shadow.camera=this.parseObject(b.shadow.camera)));void 0!==b.visible&&(g.visible=b.visible);void 0!==b.userData&&(g.userData=b.userData);if(void 0!==b.children)for(var h=b.children,k=0;k<h.length;k++)g.add(this.parseObject(h[k],c,d));if("LOD"===b.type)for(b=b.levels,h=0;h<b.length;h++){var k=b[h],m=g.getObjectByProperty("uuid",k.object);void 0!==m&&g.addLevel(m,k.distance)}return g}}()});var Og={UVMapping:300,CubeReflectionMapping:301,
    CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},yf={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},zf={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};ne.prototype={constructor:ne,setOptions:function(a){this.options=a;return this},
    load:function(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);var e=this,f=Ib.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;fetch(a).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,e.options)}).then(function(c){Ib.add(a,c);b&&b(c);e.manager.itemEnd(a)}).catch(function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)})},setCrossOrigin:function(){return this},setPath:function(a){this.path=
    a;return this}};Object.assign(oe.prototype,{moveTo:function(a,b){this.currentPath=new Sa;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=
    a[c],f=new jb;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,m=h.y-g.y;if(Math.abs(m)>Number.EPSILON){if(0>m&&(g=b[f],k=-k,h=b[e],m=-m),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=m*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=$a.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);b=[];if(1===
    f.length){var g=f[0];var h=new jb;h.curves=g.curves;b.push(h);return b}var k=!e(f[0].getPoints()),k=a?!k:k;h=[];var m=[],l=[],n=0;m[n]=void 0;l[n]=[];for(var p=0,r=f.length;p<r;p++){g=f[p];var t=g.getPoints();var v=e(t);(v=a?!v:v)?(!k&&m[n]&&n++,m[n]={s:new jb,p:t},m[n].s.curves=g.curves,k&&n++,l[n]=[]):l[n].push({h:g,p:t[0]})}if(!m[0])return c(f);if(1<m.length){p=!1;a=[];e=0;for(f=m.length;e<f;e++)h[e]=[];e=0;for(f=m.length;e<f;e++)for(g=l[e],v=0;v<g.length;v++){k=g[v];n=!0;for(t=0;t<m.length;t++)d(k.p,
    m[t].p)&&(e!==t&&a.push({froms:e,tos:t,hole:v}),n?(n=!1,h[t].push(k)):p=!0);n&&h[e].push(k)}0<a.length&&(p||(l=h))}p=0;for(e=m.length;p<e;p++)for(h=m[p].s,b.push(h),a=l[p],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return b}});Object.assign(pe.prototype,{isFont:!0,generateShapes:function(a,b,c){void 0===b&&(b=100);c=this.data;a=String(a).split("");var d=b/c.resolution,e=(c.boundingBox.yMax-c.boundingBox.yMin+c.underlineThickness)*d,f=0,g=0;b=[];for(var h=0;h<a.length;h++){var k=a[h];if("\n"===k)f=
    0,g-=e;else{var m=d;var l=f,n=g;if(k=c.glyphs[k]||c.glyphs["?"]){var p=new oe;if(k.o)for(var r=k._cachedOutline||(k._cachedOutline=k.o.split(" ")),t=0,v=r.length;t<v;)switch(r[t++]){case "m":var w=r[t++]*m+l;var x=r[t++]*m+n;p.moveTo(w,x);break;case "l":w=r[t++]*m+l;x=r[t++]*m+n;p.lineTo(w,x);break;case "q":var y=r[t++]*m+l;var B=r[t++]*m+n;var A=r[t++]*m+l;var C=r[t++]*m+n;p.quadraticCurveTo(A,C,y,B);break;case "b":y=r[t++]*m+l,B=r[t++]*m+n,A=r[t++]*m+l,C=r[t++]*m+n,w=r[t++]*m+l,x=r[t++]*m+n,p.bezierCurveTo(A,
    C,w,x,y,B)}m={offsetX:k.ha*m,path:p}}else m=void 0;f+=m.offsetX;b.push(m.path)}}c=[];a=0;for(d=b.length;a<d;a++)Array.prototype.push.apply(c,b[a].toShapes());return c}});Object.assign(kf.prototype,{load:function(a,b,c,d){var e=this,f=new Na(this.manager);f.setPath(this.path);f.load(a,function(a){try{var c=JSON.parse(a)}catch(k){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},
    parse:function(a){return new pe(a)},setPath:function(a){this.path=a;return this}});var Ud,se={getContext:function(){void 0===Ud&&(Ud=new (window.AudioContext||window.webkitAudioContext));return Ud},setContext:function(a){Ud=a}};Object.assign(qe.prototype,{load:function(a,b,c,d){var e=new Na(this.manager);e.setResponseType("arraybuffer");e.load(a,function(a){se.getContext().decodeAudioData(a,function(a){b(a)})},c,d)}});Object.assign(lf.prototype,{update:function(){var a,b,c,d,e,f,g,h,k=new O,m=new O;
    return function(l){if(a!==this||b!==l.focus||c!==l.fov||d!==l.aspect*this.aspect||e!==l.near||f!==l.far||g!==l.zoom||h!==this.eyeSep){a=this;b=l.focus;c=l.fov;d=l.aspect*this.aspect;e=l.near;f=l.far;g=l.zoom;var n=l.projectionMatrix.clone();h=this.eyeSep/2;var p=h*e/b,q=e*Math.tan(Q.DEG2RAD*c*.5)/g;m.elements[12]=-h;k.elements[12]=h;var t=-q*d+p;var v=q*d+p;n.elements[0]=2*e/(v-t);n.elements[8]=(v+t)/(v-t);this.cameraL.projectionMatrix.copy(n);t=-q*d-p;v=q*d-p;n.elements[0]=2*e/(v-t);n.elements[8]=
    (v+t)/(v-t);this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(m);this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(k)}}()});fd.prototype=Object.create(x.prototype);fd.prototype.constructor=fd;re.prototype=Object.assign(Object.create(x.prototype),{constructor:re,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),
    this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new p,b=new ha,c=new p,d=new p;return function(e){x.prototype.updateMatrixWorld.call(this,
    e);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.positionX?(e.positionX.setValueAtTime(a.x,this.context.currentTime),e.positionY.setValueAtTime(a.y,this.context.currentTime),e.positionZ.setValueAtTime(a.z,this.context.currentTime),e.forwardX.setValueAtTime(d.x,this.context.currentTime),e.forwardY.setValueAtTime(d.y,this.context.currentTime),e.forwardZ.setValueAtTime(d.z,this.context.currentTime),e.upX.setValueAtTime(f.x,this.context.currentTime),
    e.upY.setValueAtTime(f.y,this.context.currentTime),e.upZ.setValueAtTime(f.z,this.context.currentTime)):(e.setPosition(a.x,a.y,a.z),e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});lc.prototype=Object.assign(Object.create(x.prototype),{constructor:lc,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this},setBuffer:function(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},
    play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else{var a=this.context.createBufferSource();a.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;a.start(this.startTime,this.offset);this.isPlaying=!0;this.source=a;return this.connect()}},
    pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.offset=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);
    for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},
    getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,
    this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},
    setVolume:function(a){this.gain.gain.value=a;return this}});te.prototype=Object.assign(Object.create(lc.prototype),{constructor:te,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=
    a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new p;return function(b){x.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});Object.assign(ue.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=
    b[c];return a/b.length}});Object.assign(ve.prototype,{accumulate:function(a,b){var c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else e+=b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},
    saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){ha.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(mf.prototype,{getValue:function(a,
    b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()}});Object.assign(qa,{Composite:mf,create:function(a,
    b,c){return a&&a.isAnimationObjectGroup?new qa.Composite(a,b,c):new qa(a,b,c)},sanitizeNodeName:function(a){return a.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var a=new RegExp("^"+/((?:[\w-]+[\/:])*)/.source+/([\w-\.]+)?/.source+/(?:\.([\w-]+)(?:\[(.+)\])?)?/.source+/\.([\w-]+)(?:\[(.+)\])?/.source+"$"),b=["material","materials","bones"];return function(c){var d=a.exec(c);if(!d)throw Error("PropertyBinding: Cannot parse trackName: "+c);var d={nodeName:d[2],objectName:d[3],
    objectIndex:d[4],propertyName:d[5],propertyIndex:d[6]},e=d.nodeName&&d.nodeName.lastIndexOf(".");if(void 0!==e&&-1!==e){var f=d.nodeName.substring(e+1);-1!==b.indexOf(f)&&(d.nodeName=d.nodeName.substring(0,e),d.objectName=f)}if(null===d.propertyName||0===d.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+c);return d}}(),findNode:function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=function(a){for(var c=
    0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null};if(a=d(a.children))return a}return null}});Object.assign(qa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},
    GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.targetObject[this.propertyName]=a[b];
    this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];
    this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=
    this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=qa.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
    this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[c]}if(void 0!==f){if(void 0===a[f]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
    this,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error("THREE.PropertyBinding: Trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===d){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
    this);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(c=0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}else{if(!a.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",
    this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+
    this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(qa.prototype,{_getValue_unbound:qa.prototype.getValue,_setValue_unbound:qa.prototype.setValue});Object.assign(nf.prototype,{isAnimationObjectGroup:!0,add:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._paths,f=this._parsedPaths,g=this._bindings,h=g.length,k=0,m=arguments.length;k!==m;++k){var l=
    arguments[k],n=l.uuid,p=d[n];if(void 0===p){p=b++;d[n]=p;a.push(l);for(var n=0,r=h;n!==r;++n)g[n].push(new qa(l,e[n],f[n]))}else if(p<c){var t=--c,r=a[t];d[r.uuid]=p;a[p]=r;d[n]=t;a[t]=l;n=0;for(r=h;n!==r;++n){var v=g[n],w=v[p];v[p]=v[t];void 0===w&&(w=new qa(l,e[n],f[n]));v[t]=w}}else void 0!==a[p]&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){for(var a=
    this._objects,b=this.nCachedObjects_,c=this._indicesByUUID,d=this._bindings,e=d.length,f=0,g=arguments.length;f!==g;++f){var h=arguments[f],k=h.uuid,m=c[k];if(void 0!==m&&m>=b){var l=b++,n=a[l];c[n.uuid]=m;a[m]=n;c[k]=l;a[l]=h;h=0;for(k=e;h!==k;++h){var n=d[h],p=n[m];n[m]=n[l];n[l]=p}}}this.nCachedObjects_=b},uncache:function(){for(var a,b,c=this._objects,d=c.length,e=this.nCachedObjects_,f=this._indicesByUUID,g=this._bindings,h=g.length,k=0,m=arguments.length;k!==m;++k){b=arguments[k].uuid;var l=
    f[b];if(void 0!==l)if(delete f[b],l<e){var n=--e,p=c[n];b=--d;a=c[b];f[p.uuid]=l;c[l]=p;f[a.uuid]=n;c[n]=a;c.pop();for(var p=0,r=h;p!==r;++p){a=g[p];var t=a[b];a[l]=a[n];a[n]=t;a.pop()}}else for(b=--d,a=c[b],f[a.uuid]=l,c[l]=a,c.pop(),p=0,r=h;p!==r;++p)a=g[p],a[l]=a[b],a.pop()}this.nCachedObjects_=e},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_,m=Array(h.length),
    d=e.length;c[a]=d;f.push(a);g.push(b);e.push(m);c=k;for(d=h.length;c!==d;++c)m[c]=new qa(h[c],a,b);return m},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(of.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=
    !1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?
    a:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=
    null,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,
    b,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||
    this._mixer._root},_update:function(a,b,c,d){if(this.enabled){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e=this._propertyBindings,f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else this._updateWeight(a)},_updateWeight:function(a){var b=0;if(this.enabled){var b=this.weight,c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0],
    b=b*d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){var b=this.timeScale,c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===
    d)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c),b=b-c*f,e=e+Math.abs(f),g=this.repetitions-e;0>g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?
    c:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(0===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,
    b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});we.prototype=Object.assign(Object.create(za.prototype),{constructor:we,_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,k=h[g];void 0===k&&(k={},h[g]=k);for(h=0;h!==e;++h){var m=
    d[h],l=m.name,n=k[l];if(void 0===n){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,l));continue}n=new ve(qa.create(c,l,b&&b._propertyBindings[h].binding.parsedPath),m.ValueTypeName,m.getValueSize());++n.referenceCount;this._addInactiveBinding(n,g,l)}f[h]=n;a[h].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,
    d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip=
    {};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;
    return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var b=a._clip.uuid,c=this._actionsByClip,d=c[b],e=
    d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete d.actionByRoot[(a._localRoot||this._root).uuid];0===e.length&&delete c[b];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=
    d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;
    g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;delete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new ed(new Float32Array(2),
    new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(a,b){var c=b||this._root,d=c.uuid,c="string"===typeof a?Ca.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],f=null;if(void 0!==e){f=
    e.actionByRoot[d];if(void 0!==f)return f;f=e.knownActions[0];null===c&&(c=f._clip)}if(null===c)return null;b=new of(this,c,b);this._bindAction(b,f);this._addInactiveAction(b,a,d);return b},existingAction:function(a,b){var c=b||this._root;b=c.uuid;c="string"===typeof a?Ca.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=
    this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g)b[g]._update(d,a,e,f);a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,
    e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);var h=g._cacheIndex,k=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;k._cacheIndex=h;b[h]=k;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},
    uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Qd.prototype.clone=function(){return new Qd(void 0===this.value.clone?this.value:this.value.clone())};xe.prototype=Object.assign(Object.create(E.prototype),{constructor:xe,isInstancedBufferGeometry:!0,copy:function(a){E.prototype.copy.call(this,a);this.maxInstancedCount=a.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});Object.defineProperties(ye.prototype,
    {count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(ye.prototype,{isInterleavedBufferAttribute:!0,setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*
    this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},
    setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}});Object.defineProperty(mc.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(mc.prototype,{isInterleavedBuffer:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0;this.array=a},setDynamic:function(a){this.dynamic=
    a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){this.onUploadCallback=a;return this}});ze.prototype=Object.assign(Object.create(mc.prototype),
    {constructor:ze,isInstancedInterleavedBuffer:!0,copy:function(a){mc.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Ae.prototype=Object.assign(Object.create(M.prototype),{constructor:Ae,isInstancedBufferAttribute:!0,copy:function(a){M.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Object.assign(pf.prototype,{linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),
    this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,b){var c=[];Be(a,this,c,b);c.sort(qf);return c},intersectObjects:function(a,b){var c=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),
    c;for(var d=0,e=a.length;d<e;d++)Be(a[d],this,c,b);c.sort(qf);return c}});Object.assign(rf.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=("undefined"===typeof performance?
    Date:performance).now(),a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}});Object.assign(sf.prototype,{set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=
    0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(Q.clamp(a.y/this.radius,-1,1)));return this}});Object.assign(tf.prototype,{set:function(a,b,c){this.radius=a;this.theta=b;this.y=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this},setFromVector3:function(a){this.radius=Math.sqrt(a.x*a.x+a.z*a.z);this.theta=Math.atan2(a.x,a.z);this.y=a.y;return this}});gd.prototype=Object.create(x.prototype);gd.prototype.constructor=
    gd;gd.prototype.isImmediateRenderObject=!0;hd.prototype=Object.create(X.prototype);hd.prototype.constructor=hd;hd.prototype.update=function(){var a=new p,b=new p,c=new ma;return function(){var d,e=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var f=this.object.matrixWorld,g=this.geometry.attributes.position;if((d=this.object.geometry)&&d.isGeometry)for(var h=d.vertices,k=d.faces,l=d=0,p=k.length;l<p;l++)for(var n=k[l],u=0,r=n.vertexNormals.length;u<r;u++){var t=
    n.vertexNormals[u];a.copy(h[n[e[u]]]).applyMatrix4(f);b.copy(t).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(d,a.x,a.y,a.z);d+=1;g.setXYZ(d,b.x,b.y,b.z);d+=1}else if(d&&d.isBufferGeometry)for(e=d.attributes.position,h=d.attributes.normal,u=d=0,r=e.count;u<r;u++)a.set(e.getX(u),e.getY(u),e.getZ(u)).applyMatrix4(f),b.set(h.getX(u),h.getY(u),h.getZ(u)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(d,a.x,a.y,a.z),d+=1,g.setXYZ(d,b.x,b.y,b.z),d+=1;g.needsUpdate=
    !0}}();nc.prototype=Object.create(x.prototype);nc.prototype.constructor=nc;nc.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};nc.prototype.update=function(){var a=new p,b=new p;return function(){this.light.updateMatrixWorld();var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));
    void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();oc.prototype=Object.create(X.prototype);oc.prototype.constructor=oc;oc.prototype.updateMatrixWorld=function(){var a=new p,b=new O,c=new O;return function(d){var e=this.bones,f=this.geometry,g=f.getAttribute("position");c.getInverse(this.root.matrixWorld);for(var h=0,k=0;h<e.length;h++){var l=e[h];l.parent&&l.parent.isBone&&(b.multiplyMatrices(c,l.matrixWorld),a.setFromMatrixPosition(b),
    g.setXYZ(k,a.x,a.y,a.z),b.multiplyMatrices(c,l.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k+1,a.x,a.y,a.z),k+=2)}f.getAttribute("position").needsUpdate=!0;x.prototype.updateMatrixWorld.call(this,d)}}();pc.prototype=Object.create(ra.prototype);pc.prototype.constructor=pc;pc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};pc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};qc.prototype=
    Object.create(x.prototype);qc.prototype.constructor=qc;qc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};qc.prototype.update=function(){var a=.5*this.light.width,b=.5*this.light.height,c=this.line.geometry.attributes.position,d=c.array;d[0]=a;d[1]=-b;d[2]=0;d[3]=a;d[4]=b;d[5]=0;d[6]=-a;d[7]=b;d[8]=0;d[9]=-a;d[10]=-b;d[11]=0;d[12]=a;d[13]=-b;d[14]=0;c.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};
    rc.prototype=Object.create(x.prototype);rc.prototype.constructor=rc;rc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};rc.prototype.update=function(){var a=new p,b=new H,c=new H;return function(){var d=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=d.geometry.getAttribute("color");b.copy(this.light.color);c.copy(this.light.groundColor);for(var f=0,g=e.count;f<g;f++){var h=f<g/2?b:c;e.setXYZ(f,h.r,h.g,h.b)}e.needsUpdate=
    !0}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())}}();id.prototype=Object.create(X.prototype);id.prototype.constructor=id;Rd.prototype=Object.create(X.prototype);Rd.prototype.constructor=Rd;jd.prototype=Object.create(X.prototype);jd.prototype.constructor=jd;jd.prototype.update=function(){var a=new p,b=new p,c=new ma;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,
    f=this.object.geometry,g=f.vertices,f=f.faces,h=0,k=0,l=f.length;k<l;k++){var p=f[k],n=p.normal;a.copy(g[p.a]).add(g[p.b]).add(g[p.c]).divideScalar(3).applyMatrix4(d);b.copy(n).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();sc.prototype=Object.create(x.prototype);sc.prototype.constructor=sc;sc.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();
    this.targetLine.material.dispose()};sc.prototype.update=function(){var a=new p,b=new p,c=new p;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(c);
    this.targetLine.scale.z=c.length()}}();kd.prototype=Object.create(X.prototype);kd.prototype.constructor=kd;kd.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=b.getAttribute("position"),h=0,k=a.length;h<k;h++)g.setXYZ(a[h],d.x,d.y,d.z)}var b,c,d=new p,e=new Ta;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,
    1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.getAttribute("position").needsUpdate=!0}}();Gb.prototype=Object.create(X.prototype);Gb.prototype.constructor=Gb;Gb.prototype.update=function(){var a=new Xa;return function(b){void 0!==b&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");
    void 0!==this.object&&a.setFromObject(this.object);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();Gb.prototype.setFromObject=function(a){this.object=a;this.update();return this};
    ld.prototype=Object.create(X.prototype);ld.prototype.constructor=ld;ld.prototype.updateMatrixWorld=function(a){var b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),x.prototype.updateMatrixWorld.call(this,a))};md.prototype=Object.create(sa.prototype);md.prototype.constructor=md;md.prototype.updateMatrixWorld=function(a){var b=-this.plane.constant;1E-8>Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.lookAt(this.plane.normal);
    x.prototype.updateMatrixWorld.call(this,a)};var Sd,Ce;Hb.prototype=Object.create(x.prototype);Hb.prototype.constructor=Hb;Hb.prototype.setDirection=function(){var a=new p,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();Hb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();
    this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};Hb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};nd.prototype=Object.create(X.prototype);nd.prototype.constructor=nd;C.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(C.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign(bb.prototype,{createPointsGeometry:function(a){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
    a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var b=new L,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new p(e.x,
    e.y,e.z||0))}return b}});Object.assign(Sa.prototype,{fromPoints:function(a){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(a)}});vf.prototype=Object.create(ca.prototype);wf.prototype=Object.create(ca.prototype);De.prototype=Object.create(ca.prototype);Object.assign(De.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},
    reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});id.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};oc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(kc.prototype,{extractUrlBase:function(a){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");
    return He.extractUrlBase(a)}});Object.assign(od.prototype,{center:function(a){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},size:function(a){console.warn("THREE.Box2: .size() has been renamed to .getSize().");
    return this.getSize(a)}});Object.assign(Xa.prototype,{center:function(a){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");
    return this.intersectsSphere(a)},size:function(a){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(a)}});Nb.prototype.center=function(a){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(a)};Object.assign(Q,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(a){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");
    return Q.floorPowerOfTwo(a)},nextPowerOfTwo:function(a){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return Q.ceilPowerOfTwo(a)}});Object.assign(ma.prototype,{flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
    multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(a){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(O.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");
    return this.copyPosition(a)},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new p);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
    return this.makeRotationFromQuaternion(a)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},
    rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},
    rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(a,b,c,d,e,f){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");
    return this.makePerspective(a,b,d,c,e,f)}});Ea.prototype.isIntersectionLine=function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)};ha.prototype.multiplyVector3=function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)};Object.assign(sb.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");
    return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});Object.assign(jb.prototype,{extractAllPoints:function(a){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(a)},
    extrude:function(a){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new ib(this,a)},makeGeometry:function(a){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new xb(this,a)}});Object.assign(D.prototype,{fromAttribute:function(a,b,c){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
    return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(p.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},
    getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,
    a)},applyProjection:function(a){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(a)},fromAttribute:function(a,b,c){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");
    return this.manhattanLength()}});Object.assign(aa.prototype,{fromAttribute:function(a,b,c){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});L.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(x.prototype,
    {getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)}});Object.defineProperties(x.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");
    return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(Dc.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");
    return this.levels}}});Object.defineProperty(Ec.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(C.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(a){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");
    this.arcLengthDivisions=a}});ba.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(da.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},
    shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");
    this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");
    this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(M.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");
    return this.array.length}}});Object.assign(E.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");
    this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(E.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});
    Object.defineProperties(Qd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(P.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},
    wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new H}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===a}}});Object.defineProperties(Ma.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");
    return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Fa.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});Object.assign(ce.prototype,
    {getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");
    return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
    return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},
    supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");
    return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});
    Object.defineProperties(ce.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");
    this.shadowMap.cullFace=a}}});Object.defineProperties(Ue.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(a){a=1!==a;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+a+".");this.renderReverseSided=a}}});Object.defineProperties(kb.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");
    this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=
    a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=
    a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");
    return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},
    set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});Object.assign(be.prototype,{getStandingMatrix:function(){console.warn("THREE.WebVRManager: .getStandingMatrix() has been removed.")}});Object.defineProperties(be.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});lc.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
    var b=this;(new qe).load(a,function(a){b.setBuffer(a)});return this};ue.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};fd.prototype.updateCubeMap=function(a,b){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(a,b)};l.WebGLRenderTargetCube=Jb;l.WebGLRenderTarget=kb;l.WebGLRenderer=ce;l.ShaderLib=tb;l.UniformsLib=K;l.UniformsUtils=Ga;l.ShaderChunk=R;l.FogExp2=Pb;l.Fog=Qb;
    l.Scene=vd;l.LensFlare=de;l.Sprite=Cc;l.LOD=Dc;l.SkinnedMesh=xd;l.Skeleton=Ec;l.Bone=wd;l.Mesh=ra;l.LineSegments=X;l.LineLoop=yd;l.Line=sa;l.Points=Rb;l.Group=Fc;l.VideoTexture=ee;l.DataTexture=lb;l.CompressedTexture=Sb;l.CubeTexture=db;l.CanvasTexture=tc;l.DepthTexture=Gc;l.Texture=U;l.CompressedTextureLoader=gf;l.DataTextureLoader=ie;l.CubeTextureLoader=je;l.TextureLoader=Ad;l.ObjectLoader=jf;l.MaterialLoader=Pd;l.BufferGeometryLoader=le;l.DefaultLoadingManager=xa;l.LoadingManager=he;l.JSONLoader=
    me;l.ImageLoader=ad;l.ImageBitmapLoader=ne;l.FontLoader=kf;l.FileLoader=Na;l.Loader=kc;l.LoaderUtils=He;l.Cache=Ib;l.AudioLoader=qe;l.SpotLightShadow=Cd;l.SpotLight=Dd;l.PointLight=Ed;l.RectAreaLight=Id;l.HemisphereLight=Bd;l.DirectionalLightShadow=Fd;l.DirectionalLight=Gd;l.AmbientLight=Hd;l.LightShadow=Fb;l.Light=da;l.StereoCamera=lf;l.PerspectiveCamera=ba;l.OrthographicCamera=Lb;l.CubeCamera=fd;l.ArrayCamera=ud;l.Camera=Ta;l.AudioListener=re;l.PositionalAudio=te;l.AudioContext=se;l.AudioAnalyser=
    ue;l.Audio=lc;l.VectorKeyframeTrack=jc;l.StringKeyframeTrack=Jd;l.QuaternionKeyframeTrack=dd;l.NumberKeyframeTrack=ic;l.ColorKeyframeTrack=Md;l.BooleanKeyframeTrack=Kd;l.PropertyMixer=ve;l.PropertyBinding=qa;l.KeyframeTrack=T;l.AnimationUtils=ga;l.AnimationObjectGroup=nf;l.AnimationMixer=we;l.AnimationClip=Ca;l.Uniform=Qd;l.InstancedBufferGeometry=xe;l.BufferGeometry=E;l.Geometry=L;l.InterleavedBufferAttribute=ye;l.InstancedInterleavedBuffer=ze;l.InterleavedBuffer=mc;l.InstancedBufferAttribute=Ae;
    l.Face3=Ya;l.Object3D=x;l.Raycaster=pf;l.Layers=Wd;l.EventDispatcher=za;l.Clock=rf;l.QuaternionLinearInterpolant=Ld;l.LinearInterpolant=ed;l.DiscreteInterpolant=Od;l.CubicInterpolant=Nd;l.Interpolant=pa;l.Triangle=Za;l.Math=Q;l.Spherical=sf;l.Cylindrical=tf;l.Plane=Ea;l.Frustum=rd;l.Sphere=Ia;l.Ray=sb;l.Matrix4=O;l.Matrix3=ma;l.Box3=Xa;l.Box2=od;l.Line3=Nb;l.Euler=gb;l.Vector4=aa;l.Vector3=p;l.Vector2=D;l.Quaternion=ha;l.Color=H;l.ImmediateRenderObject=gd;l.VertexNormalsHelper=hd;l.SpotLightHelper=
    nc;l.SkeletonHelper=oc;l.PointLightHelper=pc;l.RectAreaLightHelper=qc;l.HemisphereLightHelper=rc;l.GridHelper=id;l.PolarGridHelper=Rd;l.FaceNormalsHelper=jd;l.DirectionalLightHelper=sc;l.CameraHelper=kd;l.BoxHelper=Gb;l.Box3Helper=ld;l.PlaneHelper=md;l.ArrowHelper=Hb;l.AxesHelper=nd;l.Shape=jb;l.Path=Sa;l.ShapePath=oe;l.Font=pe;l.CurvePath=bb;l.Curve=C;l.ShapeUtils=$a;l.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new Fc,d=0,e=b.length;d<e;d++)c.add(new ra(a,b[d]));return c},detach:function(a,
    b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){a.applyMatrix((new O).getInverse(c.matrixWorld));b.remove(a);c.add(a)}};l.WebGLUtils=af;l.WireframeGeometry=Tb;l.ParametricGeometry=Hc;l.ParametricBufferGeometry=Ub;l.TetrahedronGeometry=Jc;l.TetrahedronBufferGeometry=Vb;l.OctahedronGeometry=Kc;l.OctahedronBufferGeometry=ub;l.IcosahedronGeometry=Lc;l.IcosahedronBufferGeometry=Wb;l.DodecahedronGeometry=Mc;l.DodecahedronBufferGeometry=Xb;l.PolyhedronGeometry=Ic;l.PolyhedronBufferGeometry=
    ja;l.TubeGeometry=Nc;l.TubeBufferGeometry=Yb;l.TorusKnotGeometry=Oc;l.TorusKnotBufferGeometry=Zb;l.TorusGeometry=Pc;l.TorusBufferGeometry=$b;l.TextGeometry=Uc;l.TextBufferGeometry=ac;l.SphereGeometry=Vc;l.SphereBufferGeometry=wb;l.RingGeometry=Wc;l.RingBufferGeometry=bc;l.PlaneGeometry=Ac;l.PlaneBufferGeometry=rb;l.LatheGeometry=Xc;l.LatheBufferGeometry=cc;l.ShapeGeometry=xb;l.ShapeBufferGeometry=yb;l.ExtrudeGeometry=ib;l.ExtrudeBufferGeometry=La;l.EdgesGeometry=dc;l.ConeGeometry=Yc;l.ConeBufferGeometry=
    Zc;l.CylinderGeometry=zb;l.CylinderBufferGeometry=ab;l.CircleGeometry=$c;l.CircleBufferGeometry=ec;l.BoxGeometry=Mb;l.BoxBufferGeometry=qb;l.ShadowMaterial=fc;l.SpriteMaterial=hb;l.RawShaderMaterial=gc;l.ShaderMaterial=Fa;l.PointsMaterial=Ka;l.MeshPhysicalMaterial=Ab;l.MeshStandardMaterial=Ua;l.MeshPhongMaterial=Ma;l.MeshToonMaterial=Bb;l.MeshNormalMaterial=Cb;l.MeshLambertMaterial=Db;l.MeshDepthMaterial=eb;l.MeshDistanceMaterial=fb;l.MeshBasicMaterial=Aa;l.LineDashedMaterial=Eb;l.LineBasicMaterial=
    W;l.Material=P;l.Float64BufferAttribute=zc;l.Float32BufferAttribute=B;l.Uint32BufferAttribute=pb;l.Int32BufferAttribute=yc;l.Uint16BufferAttribute=ob;l.Int16BufferAttribute=xc;l.Uint8ClampedBufferAttribute=wc;l.Uint8BufferAttribute=vc;l.Int8BufferAttribute=uc;l.BufferAttribute=M;l.ArcCurve=hc;l.CatmullRomCurve3=ca;l.CubicBezierCurve=Oa;l.CubicBezierCurve3=Va;l.EllipseCurve=Ba;l.LineCurve=ya;l.LineCurve3=Pa;l.QuadraticBezierCurve=Qa;l.QuadraticBezierCurve3=Wa;l.SplineCurve=Ra;l.REVISION="89";l.MOUSE=
    {LEFT:0,MIDDLE:1,RIGHT:2};l.CullFaceNone=0;l.CullFaceBack=1;l.CullFaceFront=2;l.CullFaceFrontBack=3;l.FrontFaceDirectionCW=0;l.FrontFaceDirectionCCW=1;l.BasicShadowMap=0;l.PCFShadowMap=1;l.PCFSoftShadowMap=2;l.FrontSide=0;l.BackSide=1;l.DoubleSide=2;l.FlatShading=1;l.SmoothShading=2;l.NoColors=0;l.FaceColors=1;l.VertexColors=2;l.NoBlending=0;l.NormalBlending=1;l.AdditiveBlending=2;l.SubtractiveBlending=3;l.MultiplyBlending=4;l.CustomBlending=5;l.AddEquation=100;l.SubtractEquation=101;l.ReverseSubtractEquation=
    102;l.MinEquation=103;l.MaxEquation=104;l.ZeroFactor=200;l.OneFactor=201;l.SrcColorFactor=202;l.OneMinusSrcColorFactor=203;l.SrcAlphaFactor=204;l.OneMinusSrcAlphaFactor=205;l.DstAlphaFactor=206;l.OneMinusDstAlphaFactor=207;l.DstColorFactor=208;l.OneMinusDstColorFactor=209;l.SrcAlphaSaturateFactor=210;l.NeverDepth=0;l.AlwaysDepth=1;l.LessDepth=2;l.LessEqualDepth=3;l.EqualDepth=4;l.GreaterEqualDepth=5;l.GreaterDepth=6;l.NotEqualDepth=7;l.MultiplyOperation=0;l.MixOperation=1;l.AddOperation=2;l.NoToneMapping=
    0;l.LinearToneMapping=1;l.ReinhardToneMapping=2;l.Uncharted2ToneMapping=3;l.CineonToneMapping=4;l.UVMapping=300;l.CubeReflectionMapping=301;l.CubeRefractionMapping=302;l.EquirectangularReflectionMapping=303;l.EquirectangularRefractionMapping=304;l.SphericalReflectionMapping=305;l.CubeUVReflectionMapping=306;l.CubeUVRefractionMapping=307;l.RepeatWrapping=1E3;l.ClampToEdgeWrapping=1001;l.MirroredRepeatWrapping=1002;l.NearestFilter=1003;l.NearestMipMapNearestFilter=1004;l.NearestMipMapLinearFilter=1005;
    l.LinearFilter=1006;l.LinearMipMapNearestFilter=1007;l.LinearMipMapLinearFilter=1008;l.UnsignedByteType=1009;l.ByteType=1010;l.ShortType=1011;l.UnsignedShortType=1012;l.IntType=1013;l.UnsignedIntType=1014;l.FloatType=1015;l.HalfFloatType=1016;l.UnsignedShort4444Type=1017;l.UnsignedShort5551Type=1018;l.UnsignedShort565Type=1019;l.UnsignedInt248Type=1020;l.AlphaFormat=1021;l.RGBFormat=1022;l.RGBAFormat=1023;l.LuminanceFormat=1024;l.LuminanceAlphaFormat=1025;l.RGBEFormat=1023;l.DepthFormat=1026;l.DepthStencilFormat=
    1027;l.RGB_S3TC_DXT1_Format=2001;l.RGBA_S3TC_DXT1_Format=2002;l.RGBA_S3TC_DXT3_Format=2003;l.RGBA_S3TC_DXT5_Format=2004;l.RGB_PVRTC_4BPPV1_Format=2100;l.RGB_PVRTC_2BPPV1_Format=2101;l.RGBA_PVRTC_4BPPV1_Format=2102;l.RGBA_PVRTC_2BPPV1_Format=2103;l.RGB_ETC1_Format=2151;l.LoopOnce=2200;l.LoopRepeat=2201;l.LoopPingPong=2202;l.InterpolateDiscrete=2300;l.InterpolateLinear=2301;l.InterpolateSmooth=2302;l.ZeroCurvatureEnding=2400;l.ZeroSlopeEnding=2401;l.WrapAroundEnding=2402;l.TrianglesDrawMode=0;l.TriangleStripDrawMode=
    1;l.TriangleFanDrawMode=2;l.LinearEncoding=3E3;l.sRGBEncoding=3001;l.GammaEncoding=3007;l.RGBEEncoding=3002;l.LogLuvEncoding=3003;l.RGBM7Encoding=3004;l.RGBM16Encoding=3005;l.RGBDEncoding=3006;l.BasicDepthPacking=3200;l.RGBADepthPacking=3201;l.CubeGeometry=Mb;l.Face4=function(a,b,c,d,e,f,g){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new Ya(a,b,c,e,f,g)};l.LineStrip=0;l.LinePieces=1;l.MeshFaceMaterial=function(a){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");
    return a};l.MultiMaterial=function(a){void 0===a&&(a=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};l.PointCloud=function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Rb(a,b)};l.Particle=function(a){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Cc(a)};l.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");
    return new Rb(a,b)};l.PointCloudMaterial=function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new Ka(a)};l.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new Ka(a)};l.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new Ka(a)};l.Vertex=function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");
    return new p(a,b,c)};l.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new M(a,b)).setDynamic(!0)};l.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new uc(a,b)};l.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new vc(a,
    b)};l.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new wc(a,b)};l.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new xc(a,b)};l.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new ob(a,b)};l.Int32Attribute=
    function(a,b){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new yc(a,b)};l.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new pb(a,b)};l.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new B(a,b)};l.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");
    return new zc(a,b)};l.ClosedSplineCurve3=vf;l.SplineCurve3=wf;l.Spline=De;l.AxisHelper=function(a){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new nd(a)};l.BoundingBoxHelper=function(a,b){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Gb(a,b)};l.EdgesHelper=function(a,b){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new X(new dc(a.geometry),new W({color:void 0!==
    b?b:16777215}))};l.WireframeHelper=function(a,b){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new X(new Tb(a.geometry),new W({color:void 0!==b?b:16777215}))};l.XHRLoader=function(a){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Na(a)};l.BinaryTextureLoader=function(a){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new ie(a)};l.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
    if(b.isMesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};l.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var e=new Ad;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},
    loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new je;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
    l.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};l.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");
    this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};Object.defineProperty(l,"__esModule",{value:!0})});
},{}],"framer-form/form/loaders/Collada":[function(require,module,exports){
require('../lib/ColladaLoader.js');

exports.Collada = (function() {
  function Collada(properties, cb) {
    this.modelLoader = new THREE.ColladaLoader;
    this.modelLoader.load(properties.path, (function(_this) {
      return function(collada) {
        collada.scene.animations = collada.animations;
        return cb(collada.scene);
      };
    })(this), null, function(e) {
      return console.log(e);
    });
  }

  return Collada;

})();


},{"../lib/ColladaLoader.js":"framer-form/form/lib/ColladaLoader"}],"framer-form/form/loaders/FBX":[function(require,module,exports){
require('../lib/FBXLoader.js');

window.Zlib = require('../lib/inflate.min.js').Zlib;

exports.FBX = (function() {
  function FBX(properties, cb) {
    this.modelLoader = new THREE.FBXLoader;
    this.modelLoader.load(properties.path, (function(_this) {
      return function(model) {
        return cb(model);
      };
    })(this), null, function(e) {
      return console.log(e);
    });
  }

  return FBX;

})();


},{"../lib/FBXLoader.js":"framer-form/form/lib/FBXLoader","../lib/inflate.min.js":"framer-form/form/lib/inflate-min"}],"framer-form/form/loaders/GLTF":[function(require,module,exports){
require('../lib/GLTFLoader.js');

exports.GLTF = (function() {
  function GLTF(properties, cb) {
    this.modelLoader = new THREE.GLTFLoader;
    this.modelLoader.load(properties.path, function(model) {
      model.scene.animations = model.animations;
      return cb(model.scene);
    }, null, function(e) {
      return console.log(e);
    });
  }

  return GLTF;

})();


},{"../lib/GLTFLoader.js":"framer-form/form/lib/GLTFLoader"}],"framer-form/form/loaders/JSONObject":[function(require,module,exports){
exports.JSONObject = (function() {
  function JSONObject(properties, cb) {
    this.readJSON(properties.path, (function(_this) {
      return function(json) {
        var metadata;
        metadata = JSON.parse(json).metadata;
        if (metadata.type === 'Object') {
          return _this.loadObject(properties, cb);
        } else {
          return _this.loadGeometry(properties, cb);
        }
      };
    })(this));
  }

  JSONObject.prototype.loadObject = function(properties, cb) {
    this.modelLoader = new THREE.ObjectLoader;
    return this.modelLoader.load(properties.path, (function(_this) {
      return function(model) {
        return cb(model);
      };
    })(this), null, function(e) {
      return console.log(e);
    });
  };

  JSONObject.prototype.loadGeometry = function(properties, cb) {
    this.modelLoader = new THREE.JSONLoader;
    return this.modelLoader.load(properties.path, (function(_this) {
      return function(geometry, materials) {
        var material, model;
        material = materials[0];
        model = new THREE.Mesh(geometry, material);
        model.animations = geometry.animations;
        return cb(model);
      };
    })(this), null, function(e) {
      return console.log(e);
    });
  };

  JSONObject.prototype.readJSON = function(path, cb) {
    var rawFile;
    rawFile = new XMLHttpRequest;
    rawFile.overrideMimeType('application/json');
    rawFile.open('GET', path, true);
    rawFile.onreadystatechange = function() {
      if (rawFile.readyState === 4 && rawFile.status === 200) {
        return cb(rawFile.responseText);
      }
    };
    return rawFile.send(null);
  };

  return JSONObject;

})();


},{}],"framer-form/form/loaders/OBJ":[function(require,module,exports){
require('../lib/OBJLoader.js');

require('../lib/MTLLoader.js');

exports.OBJ = (function() {
  function OBJ(properties, cb) {
    var path;
    path = properties.path;
    this.dirPath = path.substring(0, path.indexOf(path.split('/').pop()));
    this.modelPath = path.split('/').pop();
    this.materialPath = this.modelPath.replace('.obj', '.mtl');
    this.materialLoader = new THREE.MTLLoader;
    this.modelLoader = new THREE.OBJLoader;
    this.materialLoader.setPath(this.dirPath);
    this.materialLoader.load(this.materialPath, (function(_this) {
      return function(materials) {
        materials.preload();
        _this.modelLoader.setMaterials(materials);
        _this.modelLoader.setPath(_this.dirPath);
        return _this.modelLoader.load(_this.modelPath, function(model) {
          return cb(model);
        });
      };
    })(this));
  }

  return OBJ;

})();


},{"../lib/MTLLoader.js":"framer-form/form/lib/MTLLoader","../lib/OBJLoader.js":"framer-form/form/lib/OBJLoader"}],"framer-form/form/loaders/TDS":[function(require,module,exports){
require('../lib/TDSLoader.js');

exports.TDS = (function() {
  function TDS(properties, cb) {
    this.modelLoader = new THREE.TDSLoader;
    this.modelLoader.setPath(properties.texturePath);
    this.modelLoader.load(properties.path, (function(_this) {
      return function(model) {
        return cb(model);
      };
    })(this), null, function(e) {
      return console.log(e);
    });
  }

  return TDS;

})();


},{"../lib/TDSLoader.js":"framer-form/form/lib/TDSLoader"}],"framer-form/form":[function(require,module,exports){
var Light, Mesh, Model, ParticleSystem, Scene, Studio;

window.THREE = require('./form/lib/three.min.js');

require('./form/GA.coffee');

Scene = require('./form/Scene.coffee').Scene;

Studio = require('./form/Studio.coffee').Studio;

Model = require('./form/Model.coffee').Model;

Mesh = require('./form/Mesh.coffee').Mesh;

Light = require('./form/Light.coffee').Light;

ParticleSystem = require('./form/ParticleSystem.coffee').ParticleSystem;

module.exports = {
  Scene: Scene,
  Studio: Studio,
  Model: Model,
  Mesh: Mesh,
  Light: Light,
  ParticleSystem: ParticleSystem,
  MeshPhongMaterial: THREE.MeshPhongMaterial,
  MeshNormalMaterial: THREE.MeshNormalMaterial,
  MeshStandardMaterial: THREE.MeshStandardMaterial,
  LineBasicMaterial: THREE.LineBasicMaterial,
  LineDashedMaterial: THREE.LineDashedMaterial,
  MeshBasicMaterial: THREE.MeshBasicMaterial,
  MeshDepthMaterial: THREE.MeshDepthMaterial,
  MeshLambertMaterial: THREE.MeshLambertMaterial,
  MeshPhysicalMaterial: THREE.MeshPhysicalMaterial,
  MeshToonMaterial: THREE.MeshToonMaterial,
  PointsMaterial: THREE.PointsMaterial,
  RawShaderMaterial: THREE.RawShaderMaterial,
  ShaderMaterial: THREE.ShaderMaterial,
  ShadowMaterial: THREE.ShadowMaterial,
  SpriteMaterial: THREE.SpriteMaterial
};


},{"./form/GA.coffee":"framer-form/form/GA","./form/Light.coffee":"framer-form/form/Light","./form/Mesh.coffee":"framer-form/form/Mesh","./form/Model.coffee":"framer-form/form/Model","./form/ParticleSystem.coffee":"framer-form/form/ParticleSystem","./form/Scene.coffee":"framer-form/form/Scene","./form/Studio.coffee":"framer-form/form/Studio","./form/lib/three.min.js":"framer-form/form/lib/three-min"}],"mapboxgl-control-minimap":[function(require,module,exports){
function Minimap ( options )
{
	mapboxgl.util.setOptions(this, options);

	this._ticking = false;
	this._lastMouseMoveEvent = null;
	this._parentMap = null;
	this._isDragging = false;
	this._isCursorOverFeature = false;
	this._previousPoint = [0, 0];
	this._currentPoint = [0, 0];
	this._trackingRectCoordinates = [[[], [], [], [], []]];
}

Minimap.prototype = mapboxgl.util.inherit(mapboxgl.Control, {

	options: {
		id: "mapboxgl-minimap",
		position: "bottom-left",
		width: "160px",
		height: "90px",
		style: "mapbox://styles/mapbox/streets-v8",
		center: [-73.94656812952897, 40.72912351406106],
		zoom: 0,

		// should be a function; will be bound to Minimap
		zoomAdjust: null,

		// if parent map zoom >= 18 and minimap zoom >= 14, set minimap zoom to 16
		zoomLevels: [
			[18, 14, 16],
			[16, 12, 14],
			[14, 10, 12],
			[12, 8, 10],
			[10, 6, 8]
		],

		bounds: "parent",

		lineColor: "#FF7900",
		lineWidth: 3,
		lineOpacity: 1,

		fillColor: "#000000",
		fillOpacity: 0.25,

		dragPan: false,
		scrollZoom: false,
		boxZoom: false,
		dragRotate: false,
		keyboard: false,
		doubleClickZoom: false,
		touchZoomRotate: false
	},

	onAdd: function ( parentMap )
	{
		this._parentMap = parentMap;

		var opts = this.options;
		var container = this._container = this._createContainer(parentMap);
		var miniMap = this._miniMap = new mapboxgl.Map({
			attributionControl: false,
			container: container,
			style: opts.style,
			zoom: opts.zoom,
			center: opts.center
		});

		miniMap.on("load", this._load.bind(this));

		return this._container;
	},

	_load: function ()
	{
		var opts = this.options;
		var parentMap = this._parentMap;
		var miniMap = this._miniMap;
		var interactions = [
			"dragPan", "scrollZoom", "boxZoom", "dragRotate",
			"keyboard", "doubleClickZoom", "touchZoomRotate"
		];

		interactions.forEach(function(i){
			if( opts[i] !== true ) {
				miniMap[i].disable();
			}
		});

		if( typeof opts.zoomAdjust === "function" ) {
			this.options.zoomAdjust = opts.zoomAdjust.bind(this);
		} else if( opts.zoomAdjust === null ) {
			this.options.zoomAdjust = this._zoomAdjust.bind(this);
		}

		if( opts.bounds === "parent" ) {
			opts.bounds = parentMap.getBounds();
		}

		if( typeof opts.bounds === "object" ) {
			miniMap.fitBounds(opts.bounds, {duration: 50});
		}

		var bounds = miniMap.getBounds();

		this._convertBoundsToPoints(bounds);

		miniMap.addSource("trackingRect", {
			"type": "geojson",
			"data": {
				"type": "Feature",
				"properties": {
					"name": "trackingRect"
				},
				"geometry": {
					"type": "Polygon",
					"coordinates": this._trackingRectCoordinates
				}
			}
		});

		miniMap.addLayer({
			"id": "trackingRectOutline",
			"type": "line",
			"source": "trackingRect",
			"layout": {},
			"paint": {
				"line-color": opts.lineColor,
				"line-width": opts.lineWidth,
				"line-opacity": opts.lineOpacity
			}
		});

		// needed for dragging
		miniMap.addLayer({
			"id": "trackingRectFill",
			"type": "fill",
			"source": "trackingRect",
			"layout": {},
			"paint": {
				"fill-color": opts.fillColor,
				"fill-opacity": opts.fillOpacity
			}
		});

		this._trackingRect = this._miniMap.getSource("trackingRect");

		this._update();

		parentMap.on("move", this._update.bind(this));

		miniMap.on("mousemove", this._mouseMove.bind(this));
		miniMap.on("mousedown", this._mouseDown.bind(this), true);
		miniMap.on("mouseup", this._mouseUp.bind(this));

		miniMap.on("touchmove", this._mouseMove.bind(this));
		miniMap.on("touchstart", this._mouseDown.bind(this), true);
		miniMap.on("touchend", this._mouseUp.bind(this));

		this._miniMapCanvas = miniMap.getCanvasContainer();
		this._miniMapCanvas.addEventListener("wheel", this._preventDefault);
		this._miniMapCanvas.addEventListener("mousewheel", this._preventDefault);
	},

	_mouseDown: function ( e )
	{
		if( this._isCursorOverFeature )
		{
			this._isDragging = true;
			this._previousPoint = this._currentPoint;
			this._currentPoint = [e.lngLat.lng, e.lngLat.lat];
		}
	},

	_mouseMove: function (e)
	{
		this._ticking = false;

		var miniMap = this._miniMap;
		var features = miniMap.queryRenderedFeatures(e.point, {
			layers: ["trackingRectFill"]
		});

		// don't update if we're still hovering the area
		if( ! (this._isCursorOverFeature && features.length > 0) )
		{
			this._isCursorOverFeature = features.length > 0;
			this._miniMapCanvas.style.cursor = this._isCursorOverFeature ? "move" : "";
		}

		if( this._isDragging )
		{
			this._previousPoint = this._currentPoint;
			this._currentPoint = [e.lngLat.lng, e.lngLat.lat];

			var offset = [
				this._previousPoint[0] - this._currentPoint[0],
				this._previousPoint[1] - this._currentPoint[1]
			];

			var newBounds = this._moveTrackingRect(offset);

			this._parentMap.fitBounds(newBounds, {
				duration: 80,
				noMoveStart: true
			});
		}
	},

	_mouseUp: function ()
	{
		this._isDragging = false;
		this._ticking = false;
	},

	_moveTrackingRect: function ( offset )
	{
		var source = this._trackingRect;
		var data = source._data;
		var bounds = data.properties.bounds;

		bounds._ne.lat -= offset[1];
		bounds._ne.lng -= offset[0];
		bounds._sw.lat -= offset[1];
		bounds._sw.lng -= offset[0];

		this._convertBoundsToPoints(bounds);
		source.setData(data);

		return bounds;
	},

	_setTrackingRectBounds: function ( bounds )
	{
		var source = this._trackingRect;
		var data = source._data;

		data.properties.bounds = bounds;
		this._convertBoundsToPoints(bounds);
		source.setData(data);
	},

	_convertBoundsToPoints: function ( bounds )
	{
		var ne = bounds._ne;
		var sw = bounds._sw;
		var trc = this._trackingRectCoordinates;

		trc[0][0][0] = ne.lng;
		trc[0][0][1] = ne.lat;
		trc[0][1][0] = sw.lng;
		trc[0][1][1] = ne.lat;
		trc[0][2][0] = sw.lng;
		trc[0][2][1] = sw.lat;
		trc[0][3][0] = ne.lng;
		trc[0][3][1] = sw.lat;
		trc[0][4][0] = ne.lng;
		trc[0][4][1] = ne.lat;
	},

	_update: function ( e )
	{
		if( this._isDragging  ) {
			return;
		}

		var parentBounds = this._parentMap.getBounds();

		this._setTrackingRectBounds(parentBounds);

		if( typeof this.options.zoomAdjust === "function" ) {
			this.options.zoomAdjust();
		}
	},

	_zoomAdjust: function ()
	{
		var miniMap = this._miniMap;
		var parentMap = this._parentMap;
		var miniZoom = parseInt(miniMap.getZoom(), 10);
		var parentZoom = parseInt(parentMap.getZoom(), 10);
		var levels = this.options.zoomLevels;
		var found = false;

		levels.forEach(function(zoom)
		{
			if( ! found && parentZoom >= zoom[0] )
			{
				if( miniZoom >= zoom[1] ) {
					miniMap.setZoom(zoom[2]);
				}

				miniMap.setCenter(parentMap.getCenter());
				found = true;
			}
		});

		if( ! found && miniZoom !== this.options.zoom )
		{
			if( typeof this.options.bounds === "object" ) {
				miniMap.fitBounds(this.options.bounds, {duration: 50});
			}

			miniMap.setZoom(this.options.zoom)
		}
	},

	_createContainer: function ( parentMap )
	{
		var opts = this.options;
		var container = document.createElement("div");

		container.className = "mapboxgl-ctrl-minimap";
		container.setAttribute('style', 'width: ' + opts.width + '; height: ' + opts.height + ';');
		container.addEventListener("contextmenu", this._preventDefault);

		parentMap.getContainer().appendChild(container);

		if( opts.id !== "" ) {
			container.id = opts.id;
		}

		return container;
	},

	_preventDefault: function ( e ) {
		e.preventDefault();
	}
});

mapboxgl.Minimap = Minimap;

},{}],"myModule":[function(require,module,exports){
exports.myVar = "myVariable";

exports.myFunction = function() {
  return print("myFunction is running");
};

exports.myArray = [1, 2, 3];


},{}],"npm":[function(require,module,exports){
exports.mapboxgl = require("mapbox-gl");


},{"mapbox-gl":1}]},{},[])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvbm9kZV9tb2R1bGVzL21hcGJveC1nbC9kaXN0L21hcGJveC1nbC5qcyIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL0R5bmFtaWNMb2FkZXIuY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvZnJhbWVyLWZvcm0vZm9ybS9HQS5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvY29tcG9uZW50LXByb3RvdHlwZXMvVmlzdWFsaXphdGlvbi9NYXBib3hfQXV0b19QZXJzcGVjdGl2ZS5mcmFtZXIvbW9kdWxlcy9mcmFtZXItZm9ybS9mb3JtL0xpZ2h0LmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vTWVzaC5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvY29tcG9uZW50LXByb3RvdHlwZXMvVmlzdWFsaXphdGlvbi9NYXBib3hfQXV0b19QZXJzcGVjdGl2ZS5mcmFtZXIvbW9kdWxlcy9mcmFtZXItZm9ybS9mb3JtL01vZGVsLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vUGFydGljbGVTeXN0ZW0uY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvZnJhbWVyLWZvcm0vZm9ybS9TY2VuZS5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvY29tcG9uZW50LXByb3RvdHlwZXMvVmlzdWFsaXphdGlvbi9NYXBib3hfQXV0b19QZXJzcGVjdGl2ZS5mcmFtZXIvbW9kdWxlcy9mcmFtZXItZm9ybS9mb3JtL1N0dWRpby5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvY29tcG9uZW50LXByb3RvdHlwZXMvVmlzdWFsaXphdGlvbi9NYXBib3hfQXV0b19QZXJzcGVjdGl2ZS5mcmFtZXIvbW9kdWxlcy9mcmFtZXItZm9ybS9mb3JtL19BbmltYXRpb24uY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvZnJhbWVyLWZvcm0vZm9ybS9fQmFzZUNsYXNzLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vX0NhbWVyYS5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvY29tcG9uZW50LXByb3RvdHlwZXMvVmlzdWFsaXphdGlvbi9NYXBib3hfQXV0b19QZXJzcGVjdGl2ZS5mcmFtZXIvbW9kdWxlcy9mcmFtZXItZm9ybS9mb3JtL19TdGF0ZXMuY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvZnJhbWVyLWZvcm0vZm9ybS9saWIvQ29sbGFkYUxvYWRlci5qcyIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vbGliL0ZCWExvYWRlci5qcyIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vbGliL0dMVEZMb2FkZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvY29tcG9uZW50LXByb3RvdHlwZXMvVmlzdWFsaXphdGlvbi9NYXBib3hfQXV0b19QZXJzcGVjdGl2ZS5mcmFtZXIvbW9kdWxlcy9mcmFtZXItZm9ybS9mb3JtL2xpYi9HUFVQYXJ0aWNsZVN5c3RlbS5qcyIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vbGliL01UTExvYWRlci5qcyIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vbGliL09CSkxvYWRlci5qcyIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vbGliL09yYml0Q29udHJvbHMuanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvY29tcG9uZW50LXByb3RvdHlwZXMvVmlzdWFsaXphdGlvbi9NYXBib3hfQXV0b19QZXJzcGVjdGl2ZS5mcmFtZXIvbW9kdWxlcy9mcmFtZXItZm9ybS9mb3JtL2xpYi9URFNMb2FkZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvY29tcG9uZW50LXByb3RvdHlwZXMvVmlzdWFsaXphdGlvbi9NYXBib3hfQXV0b19QZXJzcGVjdGl2ZS5mcmFtZXIvbW9kdWxlcy9mcmFtZXItZm9ybS9mb3JtL2xpYi9pbmZsYXRlLm1pbi5qcyIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vbGliL3RocmVlLm1pbi5qcyIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vbG9hZGVycy9Db2xsYWRhLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0vbG9hZGVycy9GQlguY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvZnJhbWVyLWZvcm0vZm9ybS9sb2FkZXJzL0dMVEYuY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvZnJhbWVyLWZvcm0vZm9ybS9sb2FkZXJzL0pTT05PYmplY3QuY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvZnJhbWVyLWZvcm0vZm9ybS9sb2FkZXJzL09CSi5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy94aWFveGl6aGVuZy9Eb2N1bWVudHMvY29tcG9uZW50LXByb3RvdHlwZXMvVmlzdWFsaXphdGlvbi9NYXBib3hfQXV0b19QZXJzcGVjdGl2ZS5mcmFtZXIvbW9kdWxlcy9mcmFtZXItZm9ybS9mb3JtL2xvYWRlcnMvVERTLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL3hpYW94aXpoZW5nL0RvY3VtZW50cy9jb21wb25lbnQtcHJvdG90eXBlcy9WaXN1YWxpemF0aW9uL01hcGJveF9BdXRvX1BlcnNwZWN0aXZlLmZyYW1lci9tb2R1bGVzL2ZyYW1lci1mb3JtL2Zvcm0uY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvbWFwYm94Z2wtY29udHJvbC1taW5pbWFwLmpzIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvbXlNb2R1bGUuY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMveGlhb3hpemhlbmcvRG9jdW1lbnRzL2NvbXBvbmVudC1wcm90b3R5cGVzL1Zpc3VhbGl6YXRpb24vTWFwYm94X0F1dG9fUGVyc3BlY3RpdmUuZnJhbWVyL21vZHVsZXMvbnBtLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN2Q0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdDTSxPQUFPLENBQUM7OztFQUdiLGFBQUMsQ0FBQSxHQUFELEdBQU8sU0FBQyxHQUFEO0FBQ04sUUFBQTtJQUFBLE9BQUEsR0FBYyxJQUFBLE9BQUEsQ0FBUSxTQUFDLE9BQUQsRUFBVSxNQUFWO0FBQ3JCLFVBQUE7TUFBQSxJQUFHLEdBQUcsQ0FBQyxNQUFKLENBQVksR0FBRyxDQUFDLFdBQUosQ0FBZ0IsR0FBaEIsQ0FBWixDQUFBLEtBQXNDLEtBQXpDO1FBRUMsTUFBQSxHQUFTLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQXJCLENBQTBCLFFBQVEsQ0FBQyxvQkFBVCxDQUE4QixRQUE5QixDQUExQixFQUFtRSxTQUFDLE9BQUQ7VUFDM0UsSUFBRyxPQUFPLENBQUMsWUFBUixDQUFxQixLQUFyQixDQUFBLEtBQStCLEdBQWxDO0FBQTJDLG1CQUFPLFFBQWxEOztRQUQyRSxDQUFuRTtRQUVULElBQUcsTUFBQSxLQUFZLE1BQWY7QUFBOEIsaUJBQU8sT0FBQSxDQUFRLGFBQVIsRUFBckM7O1FBRUEsSUFBQSxHQUFPLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCO1FBQ1AsSUFBSSxDQUFDLEdBQUwsR0FBVyxJQVBaO09BQUEsTUFRSyxJQUFHLEdBQUcsQ0FBQyxNQUFKLENBQVksR0FBRyxDQUFDLFdBQUosQ0FBZ0IsR0FBaEIsQ0FBWixDQUFBLEtBQXNDLE1BQXpDO1FBRUosTUFBQSxHQUFTLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQXJCLENBQTBCLFFBQVEsQ0FBQyxvQkFBVCxDQUE4QixNQUE5QixDQUExQixFQUFpRSxTQUFDLE9BQUQ7VUFDekUsSUFBRyxPQUFPLENBQUMsWUFBUixDQUFxQixLQUFyQixDQUFBLEtBQStCLEdBQWxDO0FBQTJDLG1CQUFPLFFBQWxEOztRQUR5RSxDQUFqRTtRQUVULElBQUcsTUFBQSxLQUFZLE1BQWY7QUFBOEIsaUJBQU8sT0FBQSxDQUFRLGFBQVIsRUFBckM7O1FBRUEsSUFBQSxHQUFPLFFBQVEsQ0FBQyxhQUFULENBQXVCLE1BQXZCO1FBQ1AsSUFBSSxDQUFDLEdBQUwsR0FBVztRQUNYLElBQUksQ0FBQyxJQUFMLEdBQVksSUFSUjs7TUFVTCxJQUFJLENBQUMsZ0JBQUwsQ0FBc0IsTUFBdEIsRUFBOEIsU0FBQTtlQUM3QixPQUFBLENBQVEsSUFBUjtNQUQ2QixDQUE5QjtNQUVBLElBQUksQ0FBQyxnQkFBTCxDQUFzQixPQUF0QixFQUErQixTQUFBO2VBQzlCLE1BQUEsQ0FBTyxJQUFQO01BRDhCLENBQS9CO2FBRUEsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFkLENBQTBCLElBQTFCO0lBdkJxQixDQUFSO0FBMEJkLFdBQU87RUEzQkQ7O0VBOEJQLGFBQUMsQ0FBQSxNQUFELEdBQVUsU0FBQyxJQUFEO0lBQ1QsSUFBRyxDQUFDLEtBQUssQ0FBQyxPQUFOLENBQWMsSUFBZCxDQUFELElBQXdCLElBQUksQ0FBQyxNQUFMLEtBQWUsQ0FBMUM7QUFBaUQsWUFBTSwwQkFBdkQ7O0FBRUEsV0FBTyxJQUFJLENBQUMsTUFBTCxDQUNOLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsR0FBVjtBQUNDLGVBQU8sT0FBTyxDQUFDLElBQVIsQ0FBYyxTQUFBO2lCQUFHLEtBQUMsQ0FBQSxHQUFELENBQUssR0FBTDtRQUFILENBQWQ7TUFEUjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FETSxFQUlOLE9BQU8sQ0FBQyxPQUFSLENBQUEsQ0FKTTtFQUhFOztFQVVWLGFBQUMsQ0FBQSxRQUFELEdBQVksU0FBQyxJQUFEO0lBQ1gsSUFBRyxDQUFDLEtBQUssQ0FBQyxPQUFOLENBQWMsSUFBZCxDQUFELElBQXdCLElBQUksQ0FBQyxNQUFMLEtBQWUsQ0FBMUM7QUFBaUQsWUFBTSwwQkFBdkQ7O1dBRUEsT0FBTyxDQUFDLEdBQVIsQ0FDQyxJQUFJLENBQUMsR0FBTCxDQUFVLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxHQUFEO0FBQ1QsZUFBTyxLQUFDLENBQUEsR0FBRCxDQUFLLEdBQUw7TUFERTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBVixDQUREO0VBSFc7Ozs7Ozs7O0FDM0ViLElBQUE7O0FBQUEsQ0FBQSxHQUFJLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCOztBQUNKLENBQUMsQ0FBQyxZQUFGLENBQWUsS0FBZixFQUFzQiwyREFBdEI7O0FBQ0EsQ0FBQyxDQUFDLFlBQUYsQ0FBZSxPQUFmLEVBQXdCLEVBQXhCOztBQUNBLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBZCxDQUEwQixDQUExQjs7QUFFQSxNQUFNLENBQUMsU0FBUCxHQUFtQixNQUFNLENBQUMsU0FBUCxJQUFvQjs7QUFFdkMsTUFBTSxDQUFDLElBQVAsR0FBYyxTQUFBO1NBQ1YsU0FBUyxDQUFDLElBQVYsQ0FBZSxTQUFmO0FBRFU7O0FBRWQsTUFBTSxDQUFDLElBQVAsQ0FBWSxJQUFaLEVBQXNCLElBQUEsSUFBQSxDQUFBLENBQXRCOztBQUNBLE1BQU0sQ0FBQyxJQUFQLENBQVksUUFBWixFQUFzQixlQUF0Qjs7QUFFQSxJQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQXJCLENBQThCLGNBQTlCLENBQUg7RUFDSSxNQUFNLENBQUMsSUFBUCxDQUFZLE9BQVosRUFBcUIsT0FBckIsRUFDSTtJQUFBLGdCQUFBLEVBQWtCLFVBQWxCO0dBREosRUFESjtDQUFBLE1BQUE7RUFJSSxNQUFNLENBQUMsSUFBUCxDQUFZLE9BQVosRUFBcUIsV0FBckIsRUFDSTtJQUFBLGdCQUFBLEVBQWtCLFVBQWxCO0dBREosRUFKSjs7Ozs7QUNaQSxJQUFBLCtCQUFBO0VBQUE7OztBQUFBLENBQUEsR0FBSSxNQUFNLENBQUM7O0FBRVYsWUFBYSxPQUFBLENBQVEscUJBQVI7O0FBQ2IsWUFBYSxPQUFBLENBQVEscUJBQVI7O0FBQ2IsU0FBVSxPQUFBLENBQVEsa0JBQVI7O0FBRUwsT0FBTyxDQUFDOzs7RUFDRyxlQUFDLFVBQUQ7SUFDVCxxQ0FBQTtJQUVBLElBQUcsQ0FBQyxVQUFVLENBQUMsSUFBZjtBQUNJLFlBQU0sS0FBQSxDQUFNLDhCQUFOLEVBRFY7O0lBR0EsSUFBQyxDQUFBLFVBQUQsR0FBYyxDQUFDLENBQUMsUUFBRixDQUFXLFVBQVgsRUFDVjtNQUFBLFVBQUEsRUFBWSxJQUFaO0tBRFU7SUFHZCxJQUFDLENBQUEsVUFBRCxDQUFBO0VBVFM7O2tCQVdiLFVBQUEsR0FBWSxTQUFBO0FBQ1IsWUFBTyxJQUFDLENBQUEsVUFBVSxDQUFDLElBQW5CO0FBQUEsV0FDUyxPQURUO1FBRVEsSUFBQyxDQUFBLEtBQUQsR0FBYSxJQUFBLEtBQUssQ0FBQyxVQUFOLENBQ0wsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLElBQUMsQ0FBQSxVQUFVLENBQUMsS0FBeEIsRUFDSixJQUFDLENBQUEsVUFBVSxDQUFDLFNBRFIsRUFFSixJQUFDLENBQUEsVUFBVSxDQUFDLFFBRlIsRUFHSixJQUFDLENBQUEsVUFBVSxDQUFDLEtBSFIsQ0FESztBQURaO0FBRFQsV0FRUyxhQVJUO1FBU1EsSUFBQyxDQUFBLEtBQUQsR0FBYSxJQUFBLEtBQUssQ0FBQyxnQkFBTixDQUNMLElBQUEsS0FBSyxDQUFDLEtBQU4sQ0FBWSxJQUFDLENBQUEsVUFBVSxDQUFDLEtBQXhCLEVBQ0osSUFBQyxDQUFBLFVBQVUsQ0FBQyxTQURSLENBREs7QUFEWjtBQVJULFdBYVMsU0FiVDtRQWNRLElBQUMsQ0FBQSxLQUFELEdBQWEsSUFBQSxLQUFLLENBQUMsWUFBTixDQUNMLElBQUEsS0FBSyxDQUFDLEtBQU4sQ0FBWSxJQUFDLENBQUEsVUFBVSxDQUFDLEtBQXhCLEVBQ0osSUFBQyxDQUFBLFVBQVUsQ0FBQyxTQURSLENBREs7QUFEWjtBQWJULFdBa0JTLFlBbEJUO1FBbUJRLElBQUMsQ0FBQSxLQUFELEdBQWEsSUFBQSxLQUFLLENBQUMsZUFBTixDQUNMLElBQUEsS0FBSyxDQUFDLEtBQU4sQ0FBWSxJQUFDLENBQUEsVUFBVSxDQUFDLFFBQXhCLEVBQ0EsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLElBQUMsQ0FBQSxVQUFVLENBQUMsV0FBeEIsRUFDSixJQUFDLENBQUEsVUFBVSxDQUFDLFNBRFIsQ0FEQSxDQURLO0FBRFo7QUFsQlQsV0F3QlMsVUF4QlQ7UUF5QlEsSUFBQyxDQUFBLEtBQUQsR0FBYSxJQUFBLEtBQUssQ0FBQyxhQUFOLENBQ0wsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLElBQUMsQ0FBQSxVQUFVLENBQUMsS0FBeEIsRUFDSixJQUFDLENBQUEsVUFBVSxDQUFDLFNBRFIsRUFFSixJQUFDLENBQUEsVUFBVSxDQUFDLEtBRlIsRUFHSixJQUFDLENBQUEsVUFBVSxDQUFDLE1BSFIsQ0FESztBQURaO0FBeEJULFdBK0JTLE1BL0JUO1FBZ0NRLElBQUMsQ0FBQSxLQUFELEdBQWEsSUFBQSxLQUFLLENBQUMsU0FBTixDQUNMLElBQUEsS0FBSyxDQUFDLEtBQU4sQ0FBWSxJQUFDLENBQUEsVUFBVSxDQUFDLEtBQXhCLEVBQ0osSUFBQyxDQUFBLFVBQVUsQ0FBQyxTQURSLEVBRUosSUFBQyxDQUFBLFVBQVUsQ0FBQyxRQUZSLEVBR0osSUFBQyxDQUFBLFVBQVUsQ0FBQyxLQUhSLEVBSUosSUFBQyxDQUFBLFVBQVUsQ0FBQyxRQUpSLEVBS0osSUFBQyxDQUFBLFVBQVUsQ0FBQyxLQUxSLENBREs7QUFoQ3JCO0lBeUNBLElBQUMsQ0FBQSxzQkFBRCxDQUF3QixJQUFDLENBQUEsVUFBVSxDQUFDLE1BQXBDO0lBRUEsSUFBQyxDQUFBLGVBQUQsQ0FBQTtJQUVBLElBQUMsQ0FBQSxxQkFBRCxDQUFBO1dBRUEsSUFBQyxDQUFBLE9BQUQsR0FBZSxJQUFBLE1BQUEsQ0FBTyxJQUFQO0VBaERQOztrQkFrRFosc0JBQUEsR0FBd0IsU0FBQyxNQUFEO0lBQ3BCLElBQUcsTUFBTSxDQUFDLEtBQVY7YUFBcUIsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFiLENBQWlCLElBQUMsQ0FBQSxLQUFsQixFQUFyQjtLQUFBLE1BQUE7YUFDSyxNQUFNLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxLQUFaLEVBREw7O0VBRG9COztrQkFJeEIsZUFBQSxHQUFpQixTQUFDLFVBQUQ7V0FDYixNQUFNLENBQUMsSUFBUCxDQUFZLElBQUMsQ0FBQSxVQUFiLENBQXdCLENBQUMsR0FBekIsQ0FBNkIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLENBQUQ7ZUFDekIsS0FBRSxDQUFBLENBQUEsQ0FBRixHQUFPLEtBQUMsQ0FBQSxVQUFXLENBQUEsQ0FBQTtNQURNO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE3QjtFQURhOztrQkFJakIscUJBQUEsR0FBdUIsU0FBQTtXQUNuQixJQUFDLENBQUEsaUJBQUQsR0FBcUI7RUFERjs7a0JBR3ZCLEVBQUEsR0FBSSxTQUFDLFNBQUQsRUFBWSxFQUFaO0FBRUEsUUFBQTtJQUFBLElBQUcsU0FBUyxDQUFDLFFBQVYsQ0FBbUIsUUFBbkIsQ0FBSDtNQUNJLFFBQUEsR0FBVyxTQUFDLENBQUQ7ZUFBTyxFQUFBLENBQUcsQ0FBQyxDQUFDLEtBQUw7TUFBUDtNQUNYLElBQUMsQ0FBQSxLQUFLLENBQUMsZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsUUFBbkM7YUFFQSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQXRCLENBQXlCLE9BQXpCLEVBQWtDLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQTtpQkFDOUIsS0FBQyxDQUFBLEtBQUssQ0FBQyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxRQUF0QztRQUQ4QjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbEMsRUFKSjs7RUFGQTs7a0JBU0osT0FBQSxHQUFTLFNBQUMsVUFBRDtXQUNELElBQUEsU0FBQSxDQUFVLElBQVYsRUFBYSxVQUFiO0VBREM7O2tCQUdULE1BQUEsR0FBUSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUDtJQUNKLElBQUcsU0FBUyxDQUFDLE1BQVYsS0FBb0IsQ0FBdkI7YUFDSSxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsQ0FBYyxDQUFkLEVBREo7S0FBQSxNQUVLLElBQUcsU0FBUyxDQUFDLE1BQVYsS0FBb0IsQ0FBdkI7YUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsQ0FBYyxDQUFkLEVBQWlCLENBQWpCLEVBQW9CLENBQXBCLEVBREM7O0VBSEQ7O2tCQU1SLFdBQUEsR0FBYSxTQUFDLEtBQUQ7V0FFVCxNQUFNLENBQUMsSUFBUCxDQUFZLElBQUMsQ0FBQSxNQUFiLENBQW9CLENBQUMsR0FBckIsQ0FBeUIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLENBQUQ7UUFDckIsSUFBRyxDQUFBLEtBQUssS0FBUjtVQUNJLEtBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixHQUFrQixLQUFDLENBQUEsTUFBTyxDQUFBLENBQUE7aUJBRzFCLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBQyxDQUFBLE1BQU0sQ0FBQyxPQUFwQixDQUE0QixDQUFDLEdBQTdCLENBQWlDLFNBQUMsRUFBRDttQkFDN0IsS0FBRSxDQUFBLEVBQUEsQ0FBRixHQUFRLEtBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUSxDQUFBLEVBQUE7VUFESyxDQUFqQyxFQUpKOztNQURxQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBekI7RUFGUzs7a0JBVWIsVUFBQSxHQUFZLFNBQUMsTUFBRCxFQUFTLE1BQVQ7QUFDUixRQUFBO0lBQUEsSUFBRyxTQUFTLENBQUMsTUFBYjtBQUVJLFdBQUEsbURBQUE7O1FBQ0ksSUFBRyxDQUFDLENBQUMsT0FBRixDQUFVLElBQUMsQ0FBQSxNQUFPLENBQUEsQ0FBQSxDQUFsQixFQUFzQixJQUFDLENBQUEsTUFBTSxDQUFDLE9BQTlCLENBQUg7VUFDSSxJQUFHLENBQUEsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFWLEdBQW1CLENBQXBCLENBQVI7WUFDSSxTQUFBLEdBQVksRUFEaEI7V0FBQSxNQUFBO1lBR0ksU0FBQSxHQUFZLENBQUEsR0FBSSxFQUhwQjtXQURKOztBQURKO01BT0EsSUFBRyxTQUFBLEtBQWEsTUFBaEI7UUFDSSxTQUFBLEdBQVksRUFEaEI7O2FBR0EsSUFBQyxDQUFBLE9BQUQsQ0FBUyxTQUFVLENBQUEsU0FBQSxDQUFuQixFQVpKO0tBQUEsTUFBQTtNQWVJLE1BQUEsR0FBUyxNQUFNLENBQUMsSUFBUCxDQUFZLElBQUMsQ0FBQSxNQUFiO01BQ1QsTUFBTSxDQUFDLE1BQVAsQ0FBYyxDQUFkLEVBQWlCLENBQWpCO0FBRUEsV0FBQSxrREFBQTs7UUFDSSxJQUFHLENBQUMsQ0FBQyxPQUFGLENBQVUsSUFBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQWxCLEVBQXNCLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBOUIsQ0FBSDtVQUNJLElBQUcsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsQ0FBakIsQ0FBUjtZQUNJLFNBQUEsR0FBWSxFQURoQjtXQUFBLE1BQUE7WUFHSSxTQUFBLEdBQVksQ0FBQSxHQUFJLEVBSHBCO1dBREo7O0FBREo7YUFPQSxJQUFDLENBQUEsT0FBRCxDQUFTLE1BQU8sQ0FBQSxTQUFBLENBQWhCLEVBekJKOztFQURROztFQStCWixLQUFDLENBQUEsTUFBRCxDQUFRLFVBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7R0FESjs7RUFHQSxLQUFDLENBQUEsTUFBRCxDQUFRLEdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUM7SUFBbkIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFoQixHQUFvQjthQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sVUFBUDtRQUFtQixLQUFBLEVBQU8sSUFBQyxDQUFBLENBQTNCO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsR0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUFuQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CO2FBQ3BCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxVQUFQO1FBQW1CLEtBQUEsRUFBTyxJQUFDLENBQUEsQ0FBM0I7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDO0lBQW5CLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBaEIsR0FBb0I7YUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLFVBQVA7UUFBbUIsS0FBQSxFQUFPLElBQUMsQ0FBQSxDQUEzQjtPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFVBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7R0FESjs7RUFHQSxLQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQXBDO0lBQUgsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFoQixHQUFvQixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsQ0FBcEI7YUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGtCQUFQO1FBQTJCLEtBQUEsRUFBTyxJQUFDLENBQUEsU0FBbkM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFwQztJQUFILENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBaEIsR0FBb0IsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLENBQXBCO2FBQ3BCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxrQkFBUDtRQUEyQixLQUFBLEVBQU8sSUFBQyxDQUFBLFNBQW5DO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBcEM7SUFBSCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixDQUFwQjthQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sa0JBQVA7UUFBMkIsS0FBQSxFQUFPLElBQUMsQ0FBQSxTQUFuQztPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFNBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxJQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxPQUFQLEdBQWlCO2FBQ2pCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxnQkFBUDtRQUF5QixLQUFBLEVBQU8sSUFBQyxDQUFBLE9BQWpDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsUUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFDRCxJQUFDLENBQUEsT0FBTyxDQUFDO0lBRFIsQ0FBTDtJQUVBLEdBQUEsRUFBSyxTQUFDLE1BQUQ7YUFDRCxDQUFDLENBQUMsTUFBRixDQUFTLElBQUMsQ0FBQSxNQUFWLEVBQWtCLE1BQWxCO0lBREMsQ0FGTDtHQURKOztFQVFBLEtBQUMsQ0FBQSxNQUFELENBQVEsT0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLEtBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQVAsR0FBbUIsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLEtBQVo7YUFDbkIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGNBQVA7UUFBdUIsS0FBQSxFQUFPLElBQUMsQ0FBQSxLQUEvQjtPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxTQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxTQUFQLEdBQW1CO2FBQ25CLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxrQkFBUDtRQUEyQixLQUFBLEVBQU8sSUFBQyxDQUFBLFNBQW5DO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsT0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLEtBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQVAsR0FBZTthQUNmLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxjQUFQO1FBQXVCLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBL0I7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxZQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsSUFBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBUCxHQUFvQjthQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sbUJBQVA7UUFBNEIsS0FBQSxFQUFPLElBQUMsQ0FBQSxVQUFwQztPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLE9BQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxLQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFQLEdBQWU7YUFDZixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sY0FBUDtRQUF1QixLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQS9CO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsVUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLFFBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVAsR0FBa0I7YUFDbEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGlCQUFQO1FBQTBCLEtBQUEsRUFBTyxJQUFDLENBQUEsUUFBbEM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsUUFBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUCxHQUFrQjthQUNsQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0saUJBQVA7UUFBMEIsS0FBQSxFQUFPLElBQUMsQ0FBQSxRQUFsQztPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLE9BQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxLQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFQLEdBQWU7YUFDZixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sY0FBUDtRQUF1QixLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQS9CO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsUUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLE1BQUQ7YUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsR0FBZ0I7SUFEZixDQURMO0dBREo7O0VBS0EsS0FBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsTUFBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxHQUFnQjthQUNoQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sZUFBUDtRQUF3QixLQUFBLEVBQU8sSUFBQyxDQUFBLE1BQWhDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsT0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLEtBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQVAsR0FBZTthQUNmLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxjQUFQO1FBQXVCLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBL0I7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsTUFBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxHQUFnQjthQUNoQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sZUFBUDtRQUF3QixLQUFBLEVBQU8sSUFBQyxDQUFBLE1BQWhDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsYUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLFdBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFdBQVAsR0FBeUIsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLFdBQVo7YUFDekIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLG9CQUFQO1FBQTZCLEtBQUEsRUFBTyxJQUFDLENBQUEsV0FBckM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsUUFBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUCxHQUFzQixJQUFBLEtBQUssQ0FBQyxLQUFOLENBQVksUUFBWjthQUN0QixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0saUJBQVA7UUFBMEIsS0FBQSxFQUFPLElBQUMsQ0FBQSxRQUFsQztPQUFyQjtJQUZDLENBREw7R0FESjs7OztHQXpRd0I7Ozs7QUNONUIsSUFBQSxDQUFBO0VBQUE7OztBQUFBLENBQUEsR0FBSSxNQUFNLENBQUM7O0FBRUwsT0FBTyxDQUFDOzs7RUFFVixJQUFDLENBQUEsTUFBRCxHQUFVLFNBQUMsWUFBRCxFQUFlLFVBQWY7SUFDTixJQUFHLFVBQVUsQ0FBQyxRQUFkO01BQ0ksVUFBVSxDQUFDLEdBQVgsR0FBaUIsU0FBQyxLQUFEO0FBQ2IsY0FBTSxLQUFBLENBQVMsSUFBQyxDQUFBLFdBQVcsQ0FBQyxJQUFkLEdBQW1CLEdBQW5CLEdBQXNCLFlBQXRCLEdBQW1DLGNBQTNDO01BRE8sRUFEckI7O1dBSUEsTUFBTSxDQUFDLGNBQVAsQ0FBc0IsSUFBQyxDQUFBLFNBQXZCLEVBQWtDLFlBQWxDLEVBQWdELFVBQWhEO0VBTE07O0VBT0csY0FBQyxVQUFEOztNQUFDLGFBQVc7O0lBQ3JCLHNDQUFNLFVBQVUsQ0FBQyxRQUFqQixFQUEyQixVQUFVLENBQUMsUUFBdEM7SUFFQSxDQUFDLENBQUMsUUFBRixDQUFXLFVBQVgsRUFDSTtNQUFBLFVBQUEsRUFBWSxJQUFaO01BQ0EsYUFBQSxFQUFlLElBRGY7S0FESjtJQUlBLElBQUMsQ0FBQSxtQkFBRCxDQUFxQixVQUFyQjtJQUVBLElBQUcsVUFBVSxDQUFDLE1BQWQ7TUFDSSxJQUFDLENBQUEsc0JBQUQsQ0FBd0IsVUFBVSxDQUFDLE1BQW5DLEVBREo7O0lBR0EsSUFBQyxDQUFBLFFBQUQsQ0FBVSxVQUFVLENBQUMsS0FBckIsRUFBNEIsVUFBVSxDQUFDLE1BQXZDLEVBQStDLFVBQVUsQ0FBQyxNQUExRCxFQUFrRSxVQUFVLENBQUMsTUFBN0U7SUFDQSxJQUFDLENBQUEsV0FBRCxDQUFhLENBQUMsVUFBVSxDQUFDLENBQVosRUFBZSxVQUFVLENBQUMsQ0FBMUIsRUFBNkIsVUFBVSxDQUFDLENBQXhDLENBQWI7SUFDQSxJQUFDLENBQUEsV0FBRCxDQUFhLENBQUMsVUFBVSxDQUFDLFNBQVosRUFBdUIsVUFBVSxDQUFDLFNBQWxDLEVBQTZDLFVBQVUsQ0FBQyxTQUF4RCxDQUFiO0VBZFM7O2lCQWdCYixtQkFBQSxHQUFxQixTQUFDLFVBQUQ7SUFDakIsSUFBQyxDQUFBLFVBQUQsR0FBYyxVQUFVLENBQUM7V0FDekIsSUFBQyxDQUFBLGFBQUQsR0FBaUIsVUFBVSxDQUFDO0VBRlg7O2lCQUlyQixzQkFBQSxHQUF3QixTQUFDLE1BQUQ7SUFDcEIsSUFBRyxNQUFNLENBQUMsS0FBVjthQUFxQixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBaUIsSUFBakIsRUFBckI7S0FBQSxNQUFBO2FBQ0ssTUFBTSxDQUFDLEdBQVAsQ0FBVyxJQUFYLEVBREw7O0VBRG9COztpQkFJeEIsUUFBQSxHQUFVLFNBQUMsWUFBRCxFQUFlLE1BQWYsRUFBdUIsTUFBdkIsRUFBK0IsTUFBL0I7SUFDTixJQUFHLFlBQUg7YUFDSSxJQUFDLENBQUEsS0FBRCxHQUFTLFlBQUEsSUFBZ0IsRUFEN0I7S0FBQSxNQUFBO01BR0ksSUFBQyxDQUFBLE1BQUQsR0FBVSxNQUFBLElBQVU7TUFDcEIsSUFBQyxDQUFBLE1BQUQsR0FBVSxNQUFBLElBQVU7YUFDcEIsSUFBQyxDQUFBLE1BQUQsR0FBVSxNQUFBLElBQVUsRUFMeEI7O0VBRE07O2lCQVFWLFdBQUEsR0FBYSxTQUFDLFFBQUQ7SUFDVCxJQUFDLENBQUEsQ0FBRCxHQUFLLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtJQUNwQixJQUFDLENBQUEsQ0FBRCxHQUFLLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtXQUNwQixJQUFDLENBQUEsQ0FBRCxHQUFLLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtFQUhYOztpQkFLYixXQUFBLEdBQWEsU0FBQyxRQUFEO0lBQ1QsSUFBQyxDQUFBLFNBQUQsR0FBYSxRQUFTLENBQUEsQ0FBQSxDQUFULElBQWU7SUFDNUIsSUFBQyxDQUFBLFNBQUQsR0FBYSxRQUFTLENBQUEsQ0FBQSxDQUFULElBQWU7V0FDNUIsSUFBQyxDQUFBLFNBQUQsR0FBYSxRQUFTLENBQUEsQ0FBQSxDQUFULElBQWU7RUFIbkI7O0VBS2IsSUFBQyxDQUFBLE1BQUQsQ0FBUSxPQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDthQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLEtBQVgsRUFBa0IsS0FBbEIsRUFBeUIsS0FBekI7SUFBWCxDQURMO0dBREo7O0VBSUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDthQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLEtBQVgsRUFBa0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxDQUF6QixFQUE0QixJQUFDLENBQUEsS0FBSyxDQUFDLENBQW5DO0lBQVgsQ0FETDtHQURKOztFQUlBLElBQUMsQ0FBQSxNQUFELENBQVEsUUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLEtBQUQ7YUFBVyxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsS0FBSyxDQUFDLENBQWxCLEVBQXFCLEtBQXJCLEVBQTRCLElBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBbkM7SUFBWCxDQURMO0dBREo7O0VBSUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDthQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBbEIsRUFBcUIsSUFBQyxDQUFBLEtBQUssQ0FBQyxDQUE1QixFQUErQixLQUEvQjtJQUFYLENBREw7R0FESjs7RUFJQSxJQUFDLENBQUEsTUFBRCxDQUFRLEdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQztJQUFiLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO2FBQU8sSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWM7SUFBckIsQ0FETDtHQURKOztFQUlBLElBQUMsQ0FBQSxNQUFELENBQVEsR0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDO0lBQWIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7YUFBTyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYztJQUFyQixDQURMO0dBREo7O0VBSUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxRQUFRLENBQUM7SUFBYixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDthQUFPLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjO0lBQXJCLENBREw7R0FESjs7RUFJQSxJQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBOUI7SUFBSCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDthQUFPLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixDQUFwQjtJQUFyQixDQURMO0dBREo7O0VBSUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixJQUFDLENBQUEsUUFBUSxDQUFDLENBQTlCO0lBQUgsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7YUFBTyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsQ0FBcEI7SUFBckIsQ0FETDtHQURKOztFQUlBLElBQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUE5QjtJQUFILENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO2FBQU8sSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLENBQXBCO0lBQXJCLENBREw7R0FESjs7OztHQXZGdUIsS0FBSyxDQUFDOzs7O0FDRmpDLElBQUEseUVBQUE7RUFBQTs7OztBQUFBLENBQUEsR0FBSSxNQUFNLENBQUM7O0FBSVYsWUFBYSxPQUFBLENBQVEscUJBQVI7O0FBQ2IsWUFBYSxPQUFBLENBQVEscUJBQVI7O0FBQ2IsU0FBVSxPQUFBLENBQVEsa0JBQVI7O0FBSVYsTUFBTyxPQUFBLENBQVEsc0JBQVI7O0FBQ1AsTUFBTyxPQUFBLENBQVEsc0JBQVI7O0FBQ1AsT0FBUSxPQUFBLENBQVEsdUJBQVI7O0FBQ1IsVUFBVyxPQUFBLENBQVEsMEJBQVI7O0FBQ1gsYUFBYyxPQUFBLENBQVEsNkJBQVI7O0FBQ2QsTUFBTyxPQUFBLENBQVEsc0JBQVI7O0FBRUYsT0FBTyxDQUFDOzs7RUFDRyxlQUFDLFVBQUQ7O01BQUMsYUFBVzs7O0lBQ3JCLHFDQUFBO0lBRUEsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxVQUFYLEVBQ0k7TUFBQSxPQUFBLEVBQVMsSUFBVDtNQUNBLFVBQUEsRUFBWSxJQURaO01BRUEsYUFBQSxFQUFlLElBRmY7TUFHQSxVQUFBLEVBQVksSUFIWjtLQURKO0lBTUEsSUFBQyxDQUFBLGFBQUQsR0FBcUIsSUFBQSxLQUFLLENBQUMsYUFBTixDQUFBO0FBRXJCLFlBQU8sSUFBQyxDQUFBLFlBQUQsQ0FBYyxVQUFVLENBQUMsSUFBekIsQ0FBUDtBQUFBLFdBQ1MsS0FEVDtRQUVZLElBQUEsR0FBQSxDQUFJLFVBQUosRUFBZ0IsQ0FBQSxTQUFBLEtBQUE7aUJBQUEsU0FBQyxLQUFEO1lBQ2hCLEtBQUMsQ0FBQSxJQUFELEdBQVE7bUJBQ1IsS0FBQyxDQUFBLFVBQUQsQ0FBWSxVQUFaO1VBRmdCO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFoQjtBQURIO0FBRFQsV0FLUyxLQUxUO1FBTVksSUFBQSxHQUFBLENBQUksVUFBSixFQUFnQixDQUFBLFNBQUEsS0FBQTtpQkFBQSxTQUFDLEtBQUQ7WUFDaEIsS0FBQyxDQUFBLElBQUQsR0FBUTttQkFDUixLQUFDLENBQUEsVUFBRCxDQUFZLFVBQVo7VUFGZ0I7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWhCO0FBREg7QUFMVCxXQVNTLE1BQUEsSUFBVSxLQVRuQjtRQVVZLElBQUEsSUFBQSxDQUFLLFVBQUwsRUFBaUIsQ0FBQSxTQUFBLEtBQUE7aUJBQUEsU0FBQyxLQUFEO1lBQ2pCLEtBQUMsQ0FBQSxJQUFELEdBQVE7bUJBQ1IsS0FBQyxDQUFBLFVBQUQsQ0FBWSxVQUFaO1VBRmlCO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFqQjtBQURIO0FBVFQsV0FhUyxLQWJUO1FBY1ksSUFBQSxPQUFBLENBQVEsVUFBUixFQUFvQixDQUFBLFNBQUEsS0FBQTtpQkFBQSxTQUFDLEtBQUQ7WUFDcEIsS0FBQyxDQUFBLElBQUQsR0FBUTttQkFDUixLQUFDLENBQUEsVUFBRCxDQUFZLFVBQVo7VUFGb0I7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXBCO0FBREg7QUFiVCxXQWlCUyxNQWpCVDtRQWtCWSxJQUFBLFVBQUEsQ0FBVyxVQUFYLEVBQXVCLENBQUEsU0FBQSxLQUFBO2lCQUFBLFNBQUMsS0FBRDtZQUN2QixLQUFDLENBQUEsSUFBRCxHQUFRO21CQUNSLEtBQUMsQ0FBQSxVQUFELENBQVksVUFBWjtVQUZ1QjtRQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBdkI7QUFESDtBQWpCVCxXQXFCUyxLQUFBLElBQVMsS0FyQmxCO1FBc0JZLElBQUEsR0FBQSxDQUFJLFVBQUosRUFBZ0IsQ0FBQSxTQUFBLEtBQUE7aUJBQUEsU0FBQyxLQUFEO1lBQ2hCLEtBQUMsQ0FBQSxJQUFELEdBQVE7bUJBQ1IsS0FBQyxDQUFBLFVBQUQsQ0FBWSxVQUFaO1VBRmdCO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFoQjtBQXRCWjtFQVhTOztrQkFzQ2IsWUFBQSxHQUFjLFNBQUMsSUFBRDtXQUNWLElBQUksQ0FBQyxLQUFMLENBQVcsR0FBWCxDQUFlLENBQUMsR0FBaEIsQ0FBQTtFQURVOztrQkFHZCxVQUFBLEdBQVksU0FBQyxVQUFEO0lBQ1IsSUFBRyxVQUFVLENBQUMsVUFBZDtNQUNJLElBQUMsQ0FBQSxjQUFELENBQUEsRUFESjs7SUFHQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksS0FBSyxDQUFDO0lBQ25CLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxJQUFaO0lBRUEsSUFBQyxDQUFBLHFCQUFELENBQUE7SUFFQSxJQUFHLFVBQVUsQ0FBQyxRQUFkO01BQ0ksSUFBQyxDQUFBLGFBQUQsQ0FBZSxVQUFVLENBQUMsUUFBMUIsRUFESjs7SUFHQSxJQUFDLENBQUEsbUJBQUQsQ0FBcUIsVUFBckI7SUFFQSxJQUFHLFVBQVUsQ0FBQyxhQUFkO01BQ0ksSUFBQyxDQUFBLElBQUksQ0FBQyxRQUFOLENBQWUsU0FBQyxDQUFEO1FBQ1gsSUFBRyxDQUFBLFlBQWEsS0FBSyxDQUFDLElBQXRCO2lCQUNJLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBWCxHQUFxQixLQUFLLENBQUMsY0FEL0I7O01BRFcsQ0FBZixFQURKOztJQUtBLElBQUcsVUFBVSxDQUFDLE9BQVgsSUFBc0IsSUFBQyxDQUFBLElBQUksQ0FBQyxVQUE1QixJQUEwQyxJQUFDLENBQUEsSUFBSSxDQUFDLFVBQVcsQ0FBQSxDQUFBLENBQTlEO01BQ0ksSUFBQyxDQUFBLGdCQUFELENBQWtCLFVBQWxCLEVBREo7O0lBR0EsSUFBRyxVQUFVLENBQUMsTUFBZDtNQUNJLElBQUMsQ0FBQSxzQkFBRCxDQUF3QixVQUFVLENBQUMsTUFBbkMsRUFESjs7SUFHQSxJQUFDLENBQUEsUUFBRCxDQUFVLFVBQVUsQ0FBQyxLQUFyQixFQUE0QixVQUFVLENBQUMsTUFBdkMsRUFBK0MsVUFBVSxDQUFDLE1BQTFELEVBQWtFLFVBQVUsQ0FBQyxNQUE3RTtJQUNBLElBQUMsQ0FBQSxXQUFELENBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBWixFQUFlLFVBQVUsQ0FBQyxDQUExQixFQUE2QixVQUFVLENBQUMsQ0FBeEMsQ0FBYjtJQUNBLElBQUMsQ0FBQSxXQUFELENBQWEsQ0FBQyxVQUFVLENBQUMsU0FBWixFQUF1QixVQUFVLENBQUMsU0FBbEMsRUFBNkMsVUFBVSxDQUFDLFNBQXhELENBQWI7SUFDQSxJQUFDLENBQUEsTUFBRCxDQUNJO01BQUEsSUFBQSxFQUFNLFVBQVUsQ0FBQyxJQUFqQjtNQUNBLElBQUEsRUFBTSxVQUFVLENBQUMsSUFEakI7TUFFQSxJQUFBLEVBQU0sVUFBVSxDQUFDLElBRmpCO0tBREo7SUFNQSxJQUFHLFVBQVUsQ0FBQyxPQUFkO01BQ0ksSUFBQyxDQUFBLE9BQUQsR0FBVyxVQUFVLENBQUMsUUFEMUI7O0lBR0EsSUFBQyxDQUFBLE9BQUQsR0FBZSxJQUFBLE1BQUEsQ0FBTyxJQUFQO0lBRWYsSUFBRyxVQUFVLENBQUMsTUFBZDtNQUNJLElBQUcsVUFBVSxDQUFDLEdBQWQ7ZUFDSSxJQUFDLENBQUEsYUFBYSxDQUFDLElBQWYsQ0FBb0IsVUFBVSxDQUFDLEdBQS9CLEVBQW9DLENBQUEsU0FBQSxLQUFBO2lCQUFBLFNBQUMsR0FBRDtZQUNoQyxLQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFmLEdBQXFCO1lBQ3JCLEtBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQWYsR0FBNkI7bUJBQzdCLFVBQVUsQ0FBQyxNQUFYLENBQWtCLEtBQWxCO1VBSGdDO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFwQyxFQURKO09BQUEsTUFBQTtlQU1JLFVBQVUsQ0FBQyxNQUFYLENBQWtCLElBQWxCLEVBTko7T0FESjtLQUFBLE1BUUssSUFBRyxVQUFVLENBQUMsR0FBZDthQUNELElBQUMsQ0FBQSxlQUFELENBQWlCLFVBQVUsQ0FBQyxHQUE1QixFQURDOztFQS9DRzs7a0JBa0RaLGNBQUEsR0FBZ0IsU0FBQTtJQUNaLElBQUMsQ0FBQSxXQUFELEdBQW1CLElBQUEsS0FBSyxDQUFDLElBQU4sQ0FBQSxDQUFZLENBQUMsYUFBYixDQUEyQixJQUFDLENBQUEsSUFBNUI7SUFDbkIsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFDLENBQUEsV0FBVyxDQUFDLFNBQWIsQ0FBdUIsSUFBQyxDQUFBLElBQUksQ0FBQyxRQUE3QjtXQUNWLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWYsQ0FBOEIsQ0FBQyxDQUEvQjtFQUhZOztrQkFLaEIscUJBQUEsR0FBdUIsU0FBQTtXQUNuQixJQUFDLENBQUEsaUJBQUQsR0FBcUI7RUFERjs7a0JBR3ZCLGFBQUEsR0FBZSxTQUFDLFFBQUQ7V0FDWCxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQU4sQ0FBZSxTQUFDLENBQUQ7TUFDWCxJQUFHLENBQUEsWUFBYSxLQUFLLENBQUMsSUFBdEI7ZUFDSSxDQUFDLENBQUMsUUFBRixHQUFhLFNBRGpCOztJQURXLENBQWY7RUFEVzs7a0JBS2YsZUFBQSxHQUFpQixTQUFDLElBQUQ7V0FDYixJQUFDLENBQUEsYUFBYSxDQUFDLElBQWYsQ0FBb0IsSUFBcEIsRUFBMEIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLEdBQUQ7UUFDdEIsS0FBQyxDQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBZixHQUFxQjtlQUNyQixLQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFmLEdBQTZCO01BRlA7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQTFCO0VBRGE7O2tCQUtqQixtQkFBQSxHQUFxQixTQUFDLFVBQUQ7V0FDakIsSUFBQyxDQUFBLElBQUksQ0FBQyxRQUFOLENBQWUsU0FBQyxDQUFEO01BQ1gsSUFBRyxDQUFBLFlBQWEsS0FBSyxDQUFDLElBQXRCO1FBQ0ksQ0FBQyxDQUFDLFVBQUYsR0FBZSxVQUFVLENBQUM7ZUFDMUIsQ0FBQyxDQUFDLGFBQUYsR0FBa0IsVUFBVSxDQUFDLGNBRmpDOztJQURXLENBQWY7RUFEaUI7O2tCQU1yQixzQkFBQSxHQUF3QixTQUFDLE1BQUQ7SUFDcEIsSUFBRyxNQUFNLENBQUMsS0FBVjthQUFxQixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBaUIsSUFBQyxDQUFBLEtBQWxCLEVBQXJCO0tBQUEsTUFBQTthQUNLLE1BQU0sQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLEtBQVosRUFETDs7RUFEb0I7O2tCQUl4QixnQkFBQSxHQUFrQixTQUFDLFVBQUQ7SUFDZCxJQUFHLENBQUMsQ0FBQyxRQUFGLENBQVcsVUFBVSxDQUFDLGFBQXRCLENBQUg7TUFDSSxJQUFDLENBQUEsY0FBRCxHQUFrQixVQUFVLENBQUMsYUFBWCxHQUEyQixFQURqRDtLQUFBLE1BQUE7TUFHSSxJQUFDLENBQUEsY0FBRCxHQUFrQixFQUh0Qjs7SUFLQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksS0FBSyxDQUFDO0lBQ25CLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBTixHQUFrQixJQUFBLEtBQUssQ0FBQyxjQUFOLENBQXFCLElBQUMsQ0FBQSxJQUF0QjtJQUVsQixJQUFDLENBQUEsTUFBRCxHQUFVLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVosQ0FBdUIsSUFBQyxDQUFBLElBQUksQ0FBQyxVQUFXLENBQUEsSUFBQyxDQUFBLGNBQUQsQ0FBeEM7SUFDVixJQUFDLENBQUEsTUFBTSxDQUFDLElBQVIsQ0FBQTtJQUVBLElBQUMsQ0FBQSxXQUFELENBQUE7V0FFQSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQXRCLENBQXlCLE9BQXpCLEVBQWtDLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUM5QixvQkFBQSxDQUFxQixLQUFDLENBQUEsY0FBdEI7TUFEOEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxDO0VBZGM7O2tCQWlCbEIsV0FBQSxHQUFhLFNBQUE7SUFDVCxJQUFDLENBQUEsY0FBRCxHQUFrQixxQkFBQSxDQUFzQixJQUFDLENBQUEsV0FBdkI7V0FDbEIsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBWixDQUFtQixJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVAsQ0FBQSxDQUFuQjtFQUZTOztrQkFJYixFQUFBLEdBQUksU0FBQyxTQUFELEVBQVksRUFBWjtBQUVBLFFBQUE7SUFBQSxJQUFHLFNBQVMsQ0FBQyxRQUFWLENBQW1CLFFBQW5CLENBQUg7TUFFSSxRQUFBLEdBQVcsU0FBQyxDQUFEO2VBQU8sRUFBQSxDQUFHLENBQUMsQ0FBQyxLQUFMO01BQVA7TUFFWCxJQUFDLENBQUEsS0FBSyxDQUFDLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLFFBQW5DO2FBRUEsTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUF0QixDQUF5QixPQUF6QixFQUFrQyxDQUFBLFNBQUEsS0FBQTtlQUFBLFNBQUE7aUJBQzlCLEtBQUMsQ0FBQSxLQUFLLENBQUMsbUJBQVAsQ0FBMkIsU0FBM0IsRUFBc0MsUUFBdEM7UUFEOEI7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxDLEVBTko7S0FBQSxNQUFBO2FBVUksSUFBQyxDQUFBLElBQUksQ0FBQyxRQUFOLENBQWUsU0FBQyxDQUFEO1FBQ1gsSUFBRyxDQUFBLFlBQWEsS0FBSyxDQUFDLElBQXRCO1VBRUksUUFBQSxHQUFXLFNBQUE7bUJBQU0sRUFBQSxDQUFBO1VBQU47VUFFWCxDQUFDLENBQUMsZ0JBQUYsQ0FBbUIsU0FBbkIsRUFBOEIsUUFBOUI7aUJBRUEsTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUF0QixDQUF5QixPQUF6QixFQUFrQyxDQUFBLFNBQUEsS0FBQTttQkFBQSxTQUFBO3FCQUM5QixDQUFDLENBQUMsbUJBQUYsQ0FBc0IsU0FBdEIsRUFBaUMsUUFBakM7WUFEOEI7VUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxDLEVBTko7O01BRFcsQ0FBZixFQVZKOztFQUZBOztrQkF1QkosUUFBQSxHQUFVLFNBQUMsWUFBRCxFQUFlLE1BQWYsRUFBdUIsTUFBdkIsRUFBK0IsTUFBL0I7SUFDTixJQUFHLFlBQUg7YUFDSSxJQUFDLENBQUEsS0FBRCxHQUFTLFlBQUEsSUFBZ0IsRUFEN0I7S0FBQSxNQUFBO01BR0ksSUFBQyxDQUFBLE1BQUQsR0FBVSxNQUFBLElBQVU7TUFDcEIsSUFBQyxDQUFBLE1BQUQsR0FBVSxNQUFBLElBQVU7YUFDcEIsSUFBQyxDQUFBLE1BQUQsR0FBVSxNQUFBLElBQVUsRUFMeEI7O0VBRE07O2tCQVFWLFdBQUEsR0FBYSxTQUFDLFFBQUQ7SUFDVCxJQUFDLENBQUEsQ0FBRCxHQUFLLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtJQUNwQixJQUFDLENBQUEsQ0FBRCxHQUFLLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtXQUNwQixJQUFDLENBQUEsQ0FBRCxHQUFLLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtFQUhYOztrQkFLYixXQUFBLEdBQWEsU0FBQyxRQUFEO0lBQ1QsSUFBQyxDQUFBLFNBQUQsR0FBYSxRQUFTLENBQUEsQ0FBQSxDQUFULElBQWU7SUFDNUIsSUFBQyxDQUFBLFNBQUQsR0FBYSxRQUFTLENBQUEsQ0FBQSxDQUFULElBQWU7V0FDNUIsSUFBQyxDQUFBLFNBQUQsR0FBYSxRQUFTLENBQUEsQ0FBQSxDQUFULElBQWU7RUFIbkI7O2tCQUtiLE1BQUEsR0FBUSxTQUFDLEdBQUQ7V0FDSixNQUFNLENBQUMsSUFBUCxDQUFZLEdBQVosQ0FBZ0IsQ0FBQyxHQUFqQixDQUFxQixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsQ0FBRDtRQUNqQixJQUFHLEdBQUksQ0FBQSxDQUFBLENBQVA7aUJBQ0ksS0FBRSxDQUFBLENBQUEsQ0FBRixHQUFPLEdBQUksQ0FBQSxDQUFBLEVBRGY7O01BRGlCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFyQjtFQURJOztrQkFLUixPQUFBLEdBQVMsU0FBQyxVQUFEO1dBQ0QsSUFBQSxTQUFBLENBQVUsSUFBVixFQUFhLFVBQWI7RUFEQzs7a0JBR1QsTUFBQSxHQUFRLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQO0lBQ0osSUFBRyxTQUFTLENBQUMsTUFBVixLQUFvQixDQUF2QjthQUNJLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxDQUFjLENBQWQsRUFESjtLQUFBLE1BRUssSUFBRyxTQUFTLENBQUMsTUFBVixLQUFvQixDQUF2QjthQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxDQUFjLENBQWQsRUFBaUIsQ0FBakIsRUFBb0IsQ0FBcEIsRUFEQzs7RUFIRDs7a0JBTVIsV0FBQSxHQUFhLFNBQUMsS0FBRDtXQUVULE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBQyxDQUFBLE1BQWIsQ0FBb0IsQ0FBQyxHQUFyQixDQUF5QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsQ0FBRDtRQUNyQixJQUFHLENBQUEsS0FBSyxLQUFSO1VBQ0ksS0FBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLEdBQWtCLEtBQUMsQ0FBQSxNQUFPLENBQUEsQ0FBQTtpQkFHMUIsTUFBTSxDQUFDLElBQVAsQ0FBWSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQXBCLENBQTRCLENBQUMsR0FBN0IsQ0FBaUMsU0FBQyxFQUFEO21CQUM3QixLQUFFLENBQUEsRUFBQSxDQUFGLEdBQVEsS0FBQyxDQUFBLE1BQU0sQ0FBQyxPQUFRLENBQUEsRUFBQTtVQURLLENBQWpDLEVBSko7O01BRHFCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF6QjtFQUZTOztrQkFVYixVQUFBLEdBQVksU0FBQTtBQUNSLFFBQUE7SUFBQSxJQUFHLFNBQVMsQ0FBQyxNQUFiO0FBRUksV0FBQSxtREFBQTs7UUFDSSxJQUFHLENBQUMsQ0FBQyxPQUFGLENBQVUsSUFBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQWxCLEVBQXNCLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBOUIsQ0FBSDtVQUNJLElBQUcsQ0FBQSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQVYsR0FBbUIsQ0FBcEIsQ0FBUjtZQUNJLFNBQUEsR0FBWSxFQURoQjtXQUFBLE1BQUE7WUFHSSxTQUFBLEdBQVksQ0FBQSxHQUFJLEVBSHBCO1dBREo7O0FBREo7TUFPQSxJQUFHLFNBQUEsS0FBYSxNQUFoQjtRQUNJLFNBQUEsR0FBWSxFQURoQjs7YUFHQSxJQUFDLENBQUEsT0FBRCxDQUFTLFNBQVUsQ0FBQSxTQUFBLENBQW5CLEVBWko7S0FBQSxNQUFBO01BZUksTUFBQSxHQUFTLE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBQyxDQUFBLE1BQWI7TUFDVCxNQUFNLENBQUMsTUFBUCxDQUFjLENBQWQsRUFBaUIsQ0FBakI7QUFFQSxXQUFBLGtEQUFBOztRQUNJLElBQUcsQ0FBQyxDQUFDLE9BQUYsQ0FBVSxJQUFDLENBQUEsTUFBTyxDQUFBLENBQUEsQ0FBbEIsRUFBc0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUE5QixDQUFIO1VBQ0ksSUFBRyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBUCxHQUFnQixDQUFqQixDQUFSO1lBQ0ksU0FBQSxHQUFZLEVBRGhCO1dBQUEsTUFBQTtZQUdJLFNBQUEsR0FBWSxDQUFBLEdBQUksRUFIcEI7V0FESjs7QUFESjthQU9BLElBQUMsQ0FBQSxPQUFELENBQVMsTUFBTyxDQUFBLFNBQUEsQ0FBaEIsRUF6Qko7O0VBRFE7O0VBNEJaLEtBQUMsQ0FBQSxNQUFELENBQVEsT0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUFoQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBaUIsS0FBakIsRUFBd0IsS0FBeEIsRUFBK0IsS0FBL0I7YUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sY0FBUDtRQUF1QixLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQS9CO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsUUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUFoQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBaUIsS0FBakIsRUFBd0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBckMsRUFBd0MsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBckQ7YUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sZUFBUDtRQUF3QixLQUFBLEVBQU8sSUFBQyxDQUFBLE1BQWhDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsUUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUFoQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBaUIsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBOUIsRUFBaUMsS0FBakMsRUFBd0MsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBckQ7YUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sZUFBUDtRQUF3QixLQUFBLEVBQU8sSUFBQyxDQUFBLE1BQWhDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsUUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUFoQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBaUIsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBOUIsRUFBaUMsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBOUMsRUFBaUQsS0FBakQ7YUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sZUFBUDtRQUF3QixLQUFBLEVBQU8sSUFBQyxDQUFBLE1BQWhDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsVUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtHQURKOztFQUdBLEtBQUMsQ0FBQSxNQUFELENBQVEsR0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUFuQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CO2FBQ3BCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxVQUFQO1FBQW1CLEtBQUEsRUFBTyxJQUFDLENBQUEsQ0FBM0I7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDO0lBQW5CLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBaEIsR0FBb0I7YUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLFVBQVA7UUFBbUIsS0FBQSxFQUFPLElBQUMsQ0FBQSxDQUEzQjtPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLEdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUM7SUFBbkIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFoQixHQUFvQjthQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sVUFBUDtRQUFtQixLQUFBLEVBQU8sSUFBQyxDQUFBLENBQTNCO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsVUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtHQURKOztFQUdBLEtBQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBcEM7SUFBSCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixDQUFwQjthQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sa0JBQVA7UUFBMkIsS0FBQSxFQUFPLElBQUMsQ0FBQSxTQUFuQztPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQXBDO0lBQUgsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFoQixHQUFvQixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsQ0FBcEI7YUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGtCQUFQO1FBQTJCLEtBQUEsRUFBTyxJQUFDLENBQUEsU0FBbkM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFwQztJQUFILENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBaEIsR0FBb0IsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLENBQXBCO2FBQ3BCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxrQkFBUDtRQUEyQixLQUFBLEVBQU8sSUFBQyxDQUFBLFNBQW5DO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsTUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUMsSUFBRDthQUFVLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQWYsR0FBbUIsQ0FBQztJQUE5QixDQUFMO0dBREo7O0VBR0EsS0FBQyxDQUFBLE1BQUQsQ0FBUSxNQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQyxJQUFEO2FBQVUsSUFBQyxDQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBZixHQUFtQixDQUFDO0lBQTlCLENBQUw7R0FESjs7RUFHQSxLQUFDLENBQUEsTUFBRCxDQUFRLE1BQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFDLElBQUQ7YUFBVSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFmLEdBQW1CLENBQUM7SUFBOUIsQ0FBTDtHQURKOztFQUdBLEtBQUMsQ0FBQSxNQUFELENBQVEsUUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLE1BQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsR0FBZ0I7YUFDaEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGVBQVA7UUFBd0IsS0FBQSxFQUFPLElBQUMsQ0FBQSxNQUFoQztPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFNBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxJQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxPQUFQLEdBQWlCO2FBQ2pCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxnQkFBUDtRQUF5QixLQUFBLEVBQU8sSUFBQyxDQUFBLE9BQWpDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsVUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtHQURKOztFQUdBLEtBQUMsQ0FBQSxNQUFELENBQVEsTUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRztRQUNKLE1BQUEsRUFBUSxJQUFDLENBQUEsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFqQixHQUFxQixJQUFDLENBQUEsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUQxQztRQUVKLEtBQUEsRUFBTyxJQUFDLENBQUEsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFqQixHQUFxQixJQUFDLENBQUEsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUZ6QztRQUdKLEtBQUEsRUFBTyxJQUFDLENBQUEsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFqQixHQUFxQixJQUFDLENBQUEsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUh6Qzs7SUFBSCxDQUFMO0dBREo7O0VBT0EsS0FBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUNELElBQUMsQ0FBQSxPQUFPLENBQUM7SUFEUixDQUFMO0lBRUEsR0FBQSxFQUFLLFNBQUMsTUFBRDthQUNELENBQUMsQ0FBQyxNQUFGLENBQVMsSUFBQyxDQUFBLE1BQVYsRUFBa0IsTUFBbEI7SUFEQyxDQUZMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxlQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxjQUFELEdBQWtCO0lBQXJCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxTQUFEO01BQ0QsSUFBRyxJQUFDLENBQUEsSUFBSSxDQUFDLFVBQVcsQ0FBQSxTQUFBLEdBQVksQ0FBWixDQUFwQjtRQUNJLElBQUMsQ0FBQSxjQUFELEdBQWtCLFNBQUEsR0FBWTtRQUM5QixJQUFDLENBQUEsTUFBRCxHQUFVLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVosQ0FBdUIsSUFBQyxDQUFBLElBQUksQ0FBQyxVQUFXLENBQUEsSUFBQyxDQUFBLGNBQUQsQ0FBeEM7ZUFDVixJQUFDLENBQUEsTUFBTSxDQUFDLElBQVIsQ0FBQSxFQUhKOztJQURDLENBREw7R0FESjs7RUFRQSxLQUFDLENBQUEsTUFBRCxDQUFRLEtBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLElBQUksQ0FBQyxRQUFRLENBQUM7SUFBbEIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLElBQUQ7YUFDRCxJQUFDLENBQUEsZUFBRCxDQUFpQixJQUFqQjtJQURDLENBREw7R0FESjs7OztHQXpWd0I7Ozs7QUNqQjVCLElBQUEsK0JBQUE7RUFBQTs7OztBQUFBLE9BQUEsQ0FBUSw0QkFBUjs7QUFFQSxDQUFBLEdBQUksTUFBTSxDQUFDOztBQUVWLFlBQWEsT0FBQSxDQUFRLHFCQUFSOztBQUNiLFlBQWEsT0FBQSxDQUFRLHFCQUFSOztBQUNiLFNBQVUsT0FBQSxDQUFRLGtCQUFSOztBQUVMLE9BQU8sQ0FBQzs7O0VBQ0csd0JBQUMsVUFBRDs7TUFBQyxhQUFXOzs7SUFDckIsOENBQUE7SUFFQSxDQUFDLENBQUMsUUFBRixDQUFXLFVBQVgsRUFDSTtNQUFBLFFBQUEsRUFBYyxJQUFBLEtBQUssQ0FBQyxPQUFOLENBQUEsQ0FBZDtNQUNBLGtCQUFBLEVBQW9CLEVBRHBCO01BRUEsUUFBQSxFQUFjLElBQUEsS0FBSyxDQUFDLE9BQU4sQ0FBQSxDQUZkO01BR0Esa0JBQUEsRUFBb0IsRUFIcEI7TUFJQSxLQUFBLEVBQU8sUUFKUDtNQUtBLGVBQUEsRUFBaUIsRUFMakI7TUFNQSxVQUFBLEVBQVksRUFOWjtNQU9BLFFBQUEsRUFBVSxDQVBWO01BUUEsSUFBQSxFQUFNLENBUk47TUFTQSxjQUFBLEVBQWdCLENBVGhCO01BVUEsU0FBQSxFQUFXLEtBVlg7TUFXQSxlQUFBLEVBQWlCLEdBWGpCO01BWUEsYUFBQSxFQUFlLElBWmY7TUFhQSxTQUFBLEVBQVcsQ0FiWDtNQWNBLG9CQUFBLEVBQXNCLDRDQWR0QjtNQWVBLHFCQUFBLEVBQXVCLDJDQWZ2QjtLQURKO0lBa0JBLElBQUMsQ0FBQSxVQUFELEdBQWM7SUFFZCxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksS0FBSyxDQUFDO0lBQ25CLElBQUMsQ0FBQSxJQUFELEdBQVE7SUFDUixJQUFDLENBQUEsYUFBRCxHQUFxQixJQUFBLEtBQUssQ0FBQyxhQUFOLENBQUE7SUFFckIsSUFBQyxDQUFBLGNBQUQsR0FBc0IsSUFBQSxLQUFLLENBQUMsaUJBQU4sQ0FDbEI7TUFBQSxZQUFBLEVBQWMsTUFBZDtNQUNBLGdCQUFBLEVBQWtCLElBQUMsQ0FBQSxhQUFhLENBQUMsSUFBZixDQUFvQixVQUFVLENBQUMsb0JBQS9CLENBRGxCO01BRUEsaUJBQUEsRUFBbUIsSUFBQyxDQUFBLGFBQWEsQ0FBQyxJQUFmLENBQW9CLFVBQVUsQ0FBQyxxQkFBL0IsQ0FGbkI7S0FEa0I7SUFLdEIsSUFBQyxDQUFBLHNCQUFELENBQXdCLFVBQVUsQ0FBQyxNQUFuQztJQUVBLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBdEIsQ0FBeUIsT0FBekIsRUFBa0MsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQzlCLG9CQUFBLENBQXFCLEtBQUMsQ0FBQSxzQkFBdEI7TUFEOEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxDO0lBR0EsSUFBQyxDQUFBLHNCQUFELEdBQTBCLHFCQUFBLENBQXNCLElBQUMsQ0FBQSxJQUF2QjtFQXJDakI7OzJCQXVDYixzQkFBQSxHQUF3QixTQUFDLE1BQUQ7SUFDcEIsSUFBRyxNQUFNLENBQUMsS0FBVjthQUFxQixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBaUIsSUFBQyxDQUFBLGNBQWxCLEVBQXJCO0tBQUEsTUFBQTthQUNLLE1BQU0sQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLGNBQVosRUFETDs7RUFEb0I7OzJCQUl4QixJQUFBLEdBQU0sU0FBQTtBQUVGLFFBQUE7SUFBQSxJQUFDLENBQUEsc0JBQUQsR0FBMEIscUJBQUEsQ0FBc0IsSUFBQyxDQUFBLElBQXZCO0lBRTFCLEtBQUEsR0FBUSxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVAsQ0FBQSxDQUFBLEdBQW9CLElBQUMsQ0FBQSxVQUFVLENBQUM7SUFDeEMsSUFBQyxDQUFBLElBQUQsSUFBUztJQUVULElBQUcsSUFBQyxDQUFBLElBQUQsR0FBUSxDQUFYO01BQ0ksSUFBQyxDQUFBLElBQUQsR0FBUSxFQURaOztJQUdBLElBQUcsS0FBQSxHQUFRLENBQVg7TUFFSSxJQUFDLENBQUEsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFyQixHQUF5QixJQUFJLENBQUMsR0FBTCxDQUFVLElBQUMsQ0FBQSxJQUFELEdBQVEsSUFBQyxDQUFBLFVBQVUsQ0FBQyxlQUE5QixDQUFBLEdBQWtEO01BQzNFLElBQUMsQ0FBQSxVQUFVLENBQUMsUUFBUSxDQUFDLENBQXJCLEdBQXlCLElBQUksQ0FBQyxHQUFMLENBQVUsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFDLENBQUEsVUFBVSxDQUFDLGFBQTlCLENBQUEsR0FBZ0Q7TUFDekUsSUFBQyxDQUFBLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBckIsR0FBeUIsSUFBSSxDQUFDLEdBQUwsQ0FBVSxJQUFDLENBQUEsSUFBRCxHQUFRLElBQUMsQ0FBQSxVQUFVLENBQUMsZUFBcEIsR0FBc0MsSUFBQyxDQUFBLFVBQVUsQ0FBQyxhQUE1RCxDQUFBLEdBQThFO0FBR3ZHLFdBQUksb0dBQUo7UUFDSSxJQUFDLENBQUEsY0FBYyxDQUFDLGFBQWhCLENBQ0k7VUFBQSxRQUFBLEVBQVUsSUFBQyxDQUFBLFVBQVUsQ0FBQyxRQUF0QjtVQUNBLGtCQUFBLEVBQW9CLElBQUMsQ0FBQSxVQUFVLENBQUMsa0JBRGhDO1VBRUEsUUFBQSxFQUFVLElBQUMsQ0FBQSxVQUFVLENBQUMsUUFGdEI7VUFHQSxrQkFBQSxFQUFvQixJQUFDLENBQUEsVUFBVSxDQUFDLGtCQUhoQztVQUlBLEtBQUEsRUFBTyxJQUFDLENBQUEsVUFBVSxDQUFDLEtBSm5CO1VBS0EsZUFBQSxFQUFpQixJQUFDLENBQUEsVUFBVSxDQUFDLGVBTDdCO1VBTUEsVUFBQSxFQUFZLElBQUMsQ0FBQSxVQUFVLENBQUMsVUFOeEI7VUFPQSxRQUFBLEVBQVUsSUFBQyxDQUFBLFVBQVUsQ0FBQyxRQVB0QjtVQVFBLElBQUEsRUFBTSxJQUFDLENBQUEsVUFBVSxDQUFDLElBUmxCO1VBU0EsY0FBQSxFQUFnQixJQUFDLENBQUEsVUFBVSxDQUFDLGNBVDVCO1NBREo7QUFESixPQVBKOztXQW9CQSxJQUFDLENBQUEsY0FBYyxDQUFDLE1BQWhCLENBQXVCLElBQUMsQ0FBQSxJQUF4QjtFQTlCRTs7OztHQTVDMkI7Ozs7QUNSckMsSUFBQSxTQUFBO0VBQUE7Ozs7QUFBQSxDQUFBLEdBQUksTUFBTSxDQUFDOztBQUVWLFNBQVUsT0FBQSxDQUFRLGtCQUFSOztBQUVMLE9BQU8sQ0FBQzs7O0VBQ0csZUFBQyxVQUFEO0FBQ1QsUUFBQTs7TUFEVSxhQUFXOzs7OztJQUNyQix1Q0FBTSxDQUFDLENBQUMsUUFBRixDQUFXLFVBQVgsRUFDRjtNQUFBLGVBQUEsRUFBaUIsTUFBakI7S0FERSxDQUFOO0lBS0EsSUFBQyxDQUFBLFFBQUQsR0FBZ0IsSUFBQSxLQUFLLENBQUMsYUFBTixDQUNaO01BQUEsU0FBQSxFQUFXLElBQVg7TUFDQSxLQUFBLEVBQU8sSUFEUDtLQURZO0lBSWhCLElBQUMsQ0FBQSxRQUFRLENBQUMsV0FBVixDQUFzQixJQUFDLENBQUEsUUFBUSxDQUFDLFVBQWhDO0lBQ0EsSUFBQyxDQUFBLFFBQVEsQ0FBQyxPQUFWLENBQWtCLElBQUMsQ0FBQSxLQUFuQixFQUEwQixJQUFDLENBQUEsTUFBM0I7SUFDQSxJQUFDLENBQUEsUUFBUSxDQUFDLGFBQVYsQ0FBd0IsTUFBTSxDQUFDLGdCQUEvQjtJQUNBLElBQUMsQ0FBQSxRQUFRLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUEzQixHQUFtQztJQUNuQyxJQUFDLENBQUEsUUFBUSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBM0IsR0FBb0M7SUFDcEMsSUFBQyxDQUFBLFFBQVEsQ0FBQyxTQUFTLENBQUMsT0FBcEIsR0FBOEI7SUFDOUIsSUFBQyxDQUFBLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBcEIsR0FBMkIsS0FBSyxDQUFDO0lBS2pDLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBSSxLQUFLLENBQUM7SUFLbkIsV0FBQSxHQUFjLENBQUMsQ0FBQyxRQUFGLENBQVcsVUFBVSxDQUFDLE1BQXRCLEVBQ1Y7TUFBQSxNQUFBLEVBQVEsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFDLENBQUEsTUFBbEI7S0FEVTtJQUdkLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxNQUFBLENBQU8sV0FBUCxFQUFvQixJQUFDLENBQUMsUUFBdEI7SUFLZCxNQUFNLENBQUMsUUFBUCxDQUFnQixJQUFDLENBQUEsY0FBakI7SUFLQSxJQUFDLENBQUEsU0FBRCxHQUFhLElBQUksS0FBSyxDQUFDO0lBQ3ZCLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBSSxLQUFLLENBQUM7SUFDbkIsSUFBQyxDQUFBLFdBQUQsR0FBZTtJQUNmLElBQUMsQ0FBQSx1QkFBRCxHQUEyQjtJQUMzQixJQUFDLENBQUEsU0FBRCxHQUFhO0lBRWIsSUFBQyxDQUFBLEVBQUQsQ0FBSSxXQUFKLEVBQWlCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxDQUFEO1FBQ2IsS0FBQyxDQUFBLEtBQUssQ0FBQyxDQUFQLEdBQVcsQ0FBQyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxLQUFkLENBQUEsR0FBdUIsQ0FBdkIsR0FBMkI7ZUFDdEMsS0FBQyxDQUFBLEtBQUssQ0FBQyxDQUFQLEdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE1BQWQsQ0FBRCxHQUF5QixDQUF6QixHQUE2QjtNQUYzQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBakI7SUFJQSxJQUFDLENBQUEsRUFBRCxDQUFJLFdBQUosRUFBaUIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLENBQUQ7UUFDYixLQUFDLENBQUEsU0FBRCxHQUFhO1FBQ2IsSUFBRyxLQUFDLENBQUEsV0FBSjtVQUNJLEtBQUMsQ0FBQSxXQUFXLENBQUMsTUFBTSxDQUFDLGFBQXBCLENBQWtDO1lBQUMsSUFBQSxFQUFNLFdBQVA7V0FBbEM7VUFDQSxLQUFDLENBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFwQixDQUFrQztZQUFDLElBQUEsRUFBTSxhQUFQO1dBQWxDO1VBQ0EsS0FBQyxDQUFBLFdBQVcsQ0FBQyxNQUFNLENBQUMsYUFBcEIsQ0FBa0M7WUFBQyxJQUFBLEVBQU0sT0FBUDtXQUFsQztpQkFDQSxLQUFDLENBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFwQixDQUFrQztZQUFDLElBQUEsRUFBTSxTQUFQO1dBQWxDLEVBSko7O01BRmE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWpCO0lBUUEsSUFBQyxDQUFBLEVBQUQsQ0FBSSxTQUFKLEVBQWUsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLENBQUQ7UUFDWCxLQUFDLENBQUEsU0FBRCxHQUFhO1FBQ2IsSUFBRyxLQUFDLENBQUEsV0FBSjtVQUNJLEtBQUMsQ0FBQSxXQUFXLENBQUMsTUFBTSxDQUFDLGFBQXBCLENBQWtDO1lBQUMsSUFBQSxFQUFNLFNBQVA7V0FBbEM7aUJBQ0EsS0FBQyxDQUFBLFdBQVcsQ0FBQyxNQUFNLENBQUMsYUFBcEIsQ0FBa0M7WUFBQyxJQUFBLEVBQU0sV0FBUDtXQUFsQyxFQUZKOztNQUZXO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFmO0lBU0EsSUFBQyxDQUFBLElBQUQsQ0FBQTtJQUVBLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBdEIsQ0FBeUIsT0FBekIsRUFBa0MsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQzlCLG9CQUFBLENBQXFCLEtBQUMsQ0FBQSxzQkFBdEI7TUFEOEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxDO0VBcEVTOztrQkF5RWIsSUFBQSxHQUFNLFNBQUE7SUFDRixJQUFDLENBQUEsc0JBQUQsR0FBMEIscUJBQUEsQ0FBc0IsSUFBQyxDQUFBLElBQXZCO0lBRTFCLElBQUcsSUFBQyxDQUFBLGFBQUo7TUFDSSxJQUFDLENBQUEsYUFBRCxDQUFBLEVBREo7O0lBR0EsSUFBRyxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVg7TUFDSSxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFqQixDQUFBLEVBREo7O0lBR0EsSUFBQyxDQUFBLGVBQUQsQ0FBQTtXQUVBLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixJQUFDLENBQUEsS0FBbEIsRUFBeUIsSUFBQyxDQUFBLE1BQU0sQ0FBQyxZQUFqQztFQVhFOztrQkFlTixlQUFBLEdBQWlCLFNBQUE7QUFDYixRQUFBO0lBQUEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxhQUFYLENBQXlCLElBQUMsQ0FBQSxLQUExQixFQUFpQyxJQUFDLENBQUEsTUFBTSxDQUFDLFlBQXpDO0lBQ0EsVUFBQSxHQUFhLElBQUMsQ0FBQSxTQUFTLENBQUMsZ0JBQVgsQ0FBNEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFuQyxFQUE2QyxJQUE3QztJQUViLElBQUcsVUFBVSxDQUFDLE1BQVgsSUFBcUIsSUFBQyxDQUFBLFdBQUQsS0FBZ0IsVUFBVyxDQUFBLENBQUEsQ0FBbkQ7TUFDSSxJQUFDLENBQUEsV0FBRCxHQUFlLFVBQVcsQ0FBQSxDQUFBLEVBRDlCOztJQUdBLElBQUcsSUFBQyxDQUFBLFdBQUQsSUFBZ0IsQ0FBQyxVQUFVLENBQUMsTUFBL0I7TUFDSSxJQUFDLENBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFwQixDQUFrQztRQUFDLElBQUEsRUFBTSxVQUFQO09BQWxDO01BQ0EsSUFBQyxDQUFBLFdBQVcsQ0FBQyxNQUFNLENBQUMsYUFBcEIsQ0FBa0M7UUFBQyxJQUFBLEVBQU0sWUFBUDtPQUFsQyxFQUZKOztJQUlBLElBQUcsQ0FBQyxVQUFVLENBQUMsTUFBZjtNQUNJLElBQUMsQ0FBQSxXQUFELEdBQWU7TUFDZixJQUFDLENBQUEsdUJBQUQsR0FBMkIsTUFGL0I7O0lBSUEsSUFBRyxDQUFDLElBQUMsQ0FBQSx1QkFBRixJQUE2QixJQUFDLENBQUEsV0FBakM7TUFDSSxJQUFDLENBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFwQixDQUFrQztRQUFDLElBQUEsRUFBTSxXQUFQO09BQWxDO01BQ0EsSUFBQyxDQUFBLFdBQVcsQ0FBQyxNQUFNLENBQUMsYUFBcEIsQ0FBa0M7UUFBQyxJQUFBLEVBQU0sYUFBUDtPQUFsQzthQUNBLElBQUMsQ0FBQSx1QkFBRCxHQUEyQixLQUgvQjs7RUFmYTs7a0JBb0JqQixjQUFBLEdBQWdCLFNBQUMsQ0FBRDtJQUNaLElBQUMsQ0FBQSxNQUFNLENBQUMsTUFBUixHQUFpQixJQUFDLENBQUEsS0FBRCxHQUFTLElBQUMsQ0FBQTtJQUMzQixJQUFDLENBQUEsTUFBTSxDQUFDLFlBQVksQ0FBQyxzQkFBckIsQ0FBQTtXQUNBLElBQUMsQ0FBQSxRQUFRLENBQUMsT0FBVixDQUFrQixJQUFDLENBQUEsS0FBbkIsRUFBMEIsSUFBQyxDQUFBLE1BQTNCO0VBSFk7Ozs7R0E3R1E7Ozs7QUNKNUIsSUFBQSxRQUFBO0VBQUE7OztBQUFBLENBQUEsR0FBSSxNQUFNLENBQUM7O0FBRVYsUUFBUyxPQUFBLENBQVEsZ0JBQVI7O0FBRUosT0FBTyxDQUFDOzs7RUFDRyxnQkFBQyxVQUFEOztNQUFDLGFBQVc7O0lBRXJCLENBQUMsQ0FBQyxRQUFGLENBQVcsVUFBWCxFQUNJO01BQUEsTUFBQSxFQUNJO1FBQUEsQ0FBQSxFQUFHLEdBQUg7UUFDQSxTQUFBLEVBQVcsQ0FBQyxFQURaO09BREo7S0FESjtJQUtBLHdDQUFNLFVBQU47SUFFQSxJQUFDLENBQUEsS0FBSyxDQUFDLFVBQVAsR0FBd0IsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLFFBQVo7SUFDeEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLEdBQWlCLElBQUEsS0FBSyxDQUFDLEdBQU4sQ0FBVSxRQUFWLEVBQW9CLEdBQXBCLEVBQXlCLElBQXpCO0lBRWpCLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxLQUFLLENBQUMsZUFBTixDQUFzQixRQUF0QixFQUFnQyxRQUFoQztJQUNkLElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQWpCLEdBQXFCO0lBQ3JCLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxNQUFaO0lBRUEsSUFBQyxDQUFBLEtBQUQsR0FBYSxJQUFBLEtBQUssQ0FBQyxVQUFOLENBQWlCLFFBQWpCLEVBQTJCLEVBQTNCO0lBQ2IsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBaEIsQ0FBb0IsQ0FBcEIsRUFBdUIsR0FBdkIsRUFBNEIsQ0FBNUI7SUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLFVBQVAsR0FBb0I7SUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQXJCLEdBQTRCO0lBQzVCLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFyQixHQUEyQjtJQUMzQixJQUFDLENBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFkLEdBQXFCO0lBQ3JCLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQWQsR0FBdUI7SUFDdkIsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQXRCLEdBQThCO0lBQzlCLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUF0QixHQUErQjtJQUMvQixJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsS0FBWjtJQUVBLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxLQUFLLENBQUMsZ0JBQU4sQ0FBdUIsUUFBdkIsRUFBaUMsRUFBakM7SUFDZCxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFqQixDQUFxQixDQUFDLEdBQXRCLEVBQTJCLEdBQTNCLEVBQWdDLENBQUMsR0FBakM7SUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsTUFBWjtJQUVBLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxLQUFLLENBQUMsZ0JBQU4sQ0FBdUIsUUFBdkIsRUFBaUMsRUFBakM7SUFDZCxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFqQixDQUFxQixHQUFyQixFQUEwQixHQUExQixFQUErQixDQUFDLEdBQWhDO0lBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLE1BQVo7SUFFQSxJQUFDLENBQUEsTUFBRCxHQUFjLElBQUEsS0FBSyxDQUFDLGdCQUFOLENBQXVCLFFBQXZCLEVBQWlDLEVBQWpDO0lBQ2QsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBakIsQ0FBcUIsQ0FBQyxHQUF0QixFQUEyQixHQUEzQixFQUFnQyxHQUFoQztJQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxNQUFaO0lBRUEsSUFBQyxDQUFBLE1BQUQsR0FBYyxJQUFBLEtBQUssQ0FBQyxnQkFBTixDQUF1QixRQUF2QixFQUFpQyxFQUFqQztJQUNkLElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQWpCLENBQXFCLEdBQXJCLEVBQTBCLEdBQTFCLEVBQStCLEdBQS9CO0lBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLE1BQVo7SUFFQSxJQUFDLENBQUEsUUFBRCxHQUFnQixJQUFBLEtBQUssQ0FBQyxjQUFOLENBQXFCLEdBQXJCLEVBQTBCLEdBQTFCO0lBQ2hCLElBQUMsQ0FBQSxRQUFELEdBQWdCLElBQUEsS0FBSyxDQUFDLG9CQUFOLENBQ1o7TUFBQSxTQUFBLEVBQVcsRUFBWDtNQUNBLEtBQUEsRUFBTyxRQURQO01BRUEsU0FBQSxFQUFXLEdBRlg7TUFHQSxTQUFBLEVBQVcsTUFIWDtLQURZO0lBS2hCLElBQUMsQ0FBQSxLQUFELEdBQWEsSUFBQSxLQUFLLENBQUMsSUFBTixDQUFXLElBQUMsQ0FBQSxRQUFaLEVBQXNCLElBQUMsQ0FBQSxRQUF2QjtJQUNiLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CLENBQUMsSUFBSSxDQUFDLEVBQU4sR0FBVztJQUMvQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsR0FBdUI7SUFDdkIsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLEtBQVo7O0FBRUE7Ozs7OztFQXREUzs7OztHQURZOzs7O0FDSjdCLElBQUEsQ0FBQTtFQUFBOzs7O0FBQUEsQ0FBQSxHQUFJLE1BQU0sQ0FBQzs7QUFFTCxPQUFPLENBQUM7OztFQUNHLG1CQUFDLEtBQUQsRUFBUSxVQUFSO0FBQ1QsUUFBQTs7TUFEaUIsYUFBVzs7O0lBQzVCLHlDQUFBO0lBRUEsSUFBRyxDQUFDLFVBQUo7QUFDUSxZQUFNLEtBQUEsQ0FBTSxrREFBTixFQURkOztJQUlBLElBQUcsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxVQUFYLENBQUg7TUFDSSxTQUFBLEdBQVk7TUFHWixNQUFNLENBQUMsSUFBUCxDQUFZLEtBQUssQ0FBQyxNQUFsQixDQUF5QixDQUFDLEdBQTFCLENBQThCLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQyxDQUFEO1VBQzFCLElBQUcsQ0FBQSxLQUFLLFNBQVI7WUFFSSxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQWIsR0FBdUIsS0FBSyxDQUFDLE1BQU8sQ0FBQSxDQUFBO21CQUNwQyxVQUFBLEdBQWEsS0FBSyxDQUFDLE1BQU8sQ0FBQSxTQUFBLEVBSDlCOztRQUQwQjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBOUIsRUFKSjs7SUFVQSxJQUFDLENBQUEsVUFBRCxHQUFjLElBQUMsQ0FBQSxnQkFBRCxDQUFrQixVQUFsQjtJQUNkLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxVQUFVLENBQUMsT0FBdEIsRUFDUDtNQUFBLElBQUEsRUFBTSxDQUFOO01BQ0EsS0FBQSxFQUFPLENBRFA7TUFFQSxLQUFBLEVBQU8sUUFGUDtLQURPO0lBTVgsS0FBSyxDQUFDLEtBQU4sQ0FBWSxJQUFDLENBQUEsT0FBTyxDQUFDLEtBQXJCLEVBQTRCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtRQUV4QixLQUFDLENBQUEsS0FBRCxHQUFTO1FBQ1QsS0FBQyxDQUFBLElBQUQsR0FBUSxLQUFLLENBQUMsSUFBTixJQUFjLEtBQUssQ0FBQyxLQUFwQixJQUE2QixLQUFLLENBQUM7UUFDM0MsS0FBQyxDQUFBLEdBQUQsR0FBTztRQUNQLEtBQUMsQ0FBQSxJQUFELEdBQVEsS0FBQyxDQUFBLE9BQU8sQ0FBQztRQUNqQixLQUFDLENBQUEsY0FBRCxHQUFrQjtRQUNsQixLQUFDLENBQUEsV0FBRCxHQUFlLEtBQUMsQ0FBQSxJQUFELEdBQVEsS0FBQyxDQUFBO1FBQ3hCLEtBQUMsQ0FBQSwwQkFBRCxHQUE4QjtRQUM5QixLQUFDLENBQUEsTUFBRCxHQUFVLEtBQUMsQ0FBQSxlQUFELENBQUE7UUFJVixJQUFHLEtBQUMsQ0FBQSxNQUFNLENBQUMsTUFBWDtVQUVJLEtBQUMsQ0FBQSxnQkFBRCxHQUFvQixXQUFBLENBQVksU0FBQTtZQUU1QixJQUFHLEtBQUMsQ0FBQSxjQUFELElBQW1CLEtBQUMsQ0FBQSxXQUF2QjtBQUVJLHFCQUFPLEtBQUMsQ0FBQSxnQkFGWjs7WUFLQSxxQkFBQSxDQUFzQixLQUFDLENBQUEsYUFBdkI7bUJBQ0EsS0FBQyxDQUFBLGNBQUQ7VUFSNEIsQ0FBWixFQVNsQixJQUFBLEdBQU8sS0FBQyxDQUFBLEdBVFUsRUFGeEI7O2VBZUEsTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUF0QixDQUF5QixPQUF6QixFQUFrQyxTQUFBO1VBQzlCLElBQUcsS0FBQyxDQUFBLGdCQUFKO21CQUNJLGFBQUEsQ0FBYyxLQUFDLENBQUEsZ0JBQWYsRUFESjs7UUFEOEIsQ0FBbEM7TUE1QndCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE1QjtFQXhCUzs7c0JBd0RiLGdCQUFBLEdBQWtCLFNBQUMsVUFBRDtBQUNkLFFBQUE7SUFBQSxLQUFBLEdBQVEsTUFBTSxDQUFDLE1BQVAsQ0FBYyxFQUFkLEVBQWtCLFVBQWxCO0lBQ1IsT0FBTyxLQUFLLENBQUM7V0FDYjtFQUhjOztzQkFLbEIsZUFBQSxHQUFpQixTQUFBO0FBS2IsUUFBQTtJQUFBLE1BQUEsR0FBUyxNQUFNLENBQUMsSUFBUCxDQUFZLElBQUMsQ0FBQSxVQUFiLENBQXdCLENBQUMsR0FBekIsQ0FBNkIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLENBQUQ7QUFFbEMsWUFBQTtRQUFBLEtBQUMsQ0FBQSwwQkFBMkIsQ0FBQSxDQUFBLENBQTVCLEdBQWlDLEtBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQTtRQUV4QyxNQUFBLEdBQVM7UUFDVCxJQUFHLEtBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQSxDQUFQLEdBQVksS0FBQyxDQUFBLFVBQVcsQ0FBQSxDQUFBLENBQTNCO1VBQ0ksTUFBTyxDQUFBLENBQUEsQ0FBUCxHQUFZLENBQUMsSUFBSSxDQUFDLEdBQUwsQ0FBUyxLQUFDLENBQUEsS0FBTSxDQUFBLENBQUEsQ0FBUCxHQUFZLEtBQUMsQ0FBQSxVQUFXLENBQUEsQ0FBQSxDQUFqQyxFQURqQjtTQUFBLE1BRUssSUFBRyxLQUFDLENBQUEsS0FBTSxDQUFBLENBQUEsQ0FBUCxHQUFZLEtBQUMsQ0FBQSxVQUFXLENBQUEsQ0FBQSxDQUEzQjtVQUNELE1BQU8sQ0FBQSxDQUFBLENBQVAsR0FBWSxJQUFJLENBQUMsR0FBTCxDQUFTLEtBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQSxDQUFQLEdBQVksS0FBQyxDQUFBLFVBQVcsQ0FBQSxDQUFBLENBQWpDLEVBRFg7U0FBQSxNQUFBO1VBR0QsS0FIQzs7ZUFJTDtNQVhrQztJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBN0I7V0FhVCxNQUFNLENBQUMsTUFBUCxDQUFjLFNBQUMsQ0FBRDthQUNWO0lBRFUsQ0FBZDtFQWxCYTs7c0JBcUJqQixXQUFBLEdBQWEsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO0lBRVQsSUFBRyxJQUFDLENBQUEsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFmLENBQXdCLE1BQXhCLENBQUg7YUFDSSxJQUFFLENBQUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQUYsQ0FBa0IsQ0FBbEIsRUFBcUIsQ0FBckIsRUFBd0IsQ0FBeEIsRUFBMkIsQ0FBM0IsRUFESjtLQUFBLE1BQUE7YUFHSSxJQUFDLENBQUEsTUFBRCxDQUFRLENBQVIsRUFBVyxDQUFYLEVBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUhKOztFQUZTOztzQkFPYixhQUFBLEdBQWUsU0FBQTtBQUVYLFFBQUE7QUFBQTtBQUFBO1NBQUEsNkNBQUE7O01BRUksSUFBQSxHQUFPLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBWixDQUFtQixDQUFBLENBQUE7TUFDMUIsVUFBQSxHQUFhLE1BQU0sQ0FBQyxNQUFQLENBQWMsS0FBZCxDQUFxQixDQUFBLENBQUE7TUFFbEMsVUFBQSxHQUFhLElBQUMsQ0FBQSxXQUFELENBQWEsSUFBQyxDQUFBLGNBQWQsRUFBOEIsSUFBQyxDQUFBLDBCQUEyQixDQUFBLElBQUEsQ0FBMUQsRUFBaUUsVUFBakUsRUFBNkUsSUFBQyxDQUFBLFdBQTlFO21CQUViLElBQUMsQ0FBQSxLQUFNLENBQUEsSUFBQSxDQUFQLEdBQWU7QUFQbkI7O0VBRlc7O3NCQVdmLGVBQUEsR0FBaUIsU0FBQTtXQUNiLGFBQUEsQ0FBYyxJQUFDLENBQUEsZ0JBQWY7RUFEYTs7c0JBTWpCLE1BQUEsR0FBUSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7V0FDSixDQUFBLEdBQUksQ0FBSixHQUFRLENBQVIsR0FBWTtFQURSOztzQkFHUixVQUFBLEdBQVksU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO1dBQ1IsQ0FBQSxHQUFJLENBQUMsQ0FBQSxJQUFLLENBQU4sQ0FBSixHQUFlLENBQWYsR0FBbUI7RUFEWDs7c0JBR1osV0FBQSxHQUFhLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNULENBQUMsQ0FBRCxHQUFLLENBQUMsQ0FBQSxJQUFLLENBQU4sQ0FBTCxHQUFnQixDQUFDLENBQUEsR0FBSSxDQUFMLENBQWhCLEdBQTBCO0VBRGpCOztzQkFHYixhQUFBLEdBQWUsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO0lBQ1gsSUFBRyxDQUFDLENBQUEsSUFBSyxDQUFBLEdBQUksQ0FBVixDQUFBLEdBQWUsQ0FBbEI7YUFDSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVIsR0FBWSxDQUFaLEdBQWdCLEVBRHBCO0tBQUEsTUFBQTthQUdJLENBQUMsQ0FBRCxHQUFLLENBQUwsR0FBUyxDQUFDLENBQUMsRUFBRSxDQUFILENBQUEsR0FBUSxDQUFDLENBQUEsR0FBSSxDQUFMLENBQVIsR0FBa0IsQ0FBbkIsQ0FBVCxHQUFpQyxFQUhyQzs7RUFEVzs7c0JBTWYsV0FBQSxHQUFhLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNULENBQUEsR0FBSSxDQUFDLENBQUEsSUFBSyxDQUFOLENBQUosR0FBZSxDQUFmLEdBQW1CLENBQW5CLEdBQXVCO0VBRGQ7O3NCQUdiLFlBQUEsR0FBYyxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7V0FDVixDQUFBLEdBQUksQ0FBQyxDQUFDLENBQUEsR0FBSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQWIsQ0FBQSxHQUFrQixDQUFsQixHQUFzQixDQUF0QixHQUEwQixDQUEzQixDQUFKLEdBQW9DO0VBRDFCOztzQkFHZCxjQUFBLEdBQWdCLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtJQUNaLElBQUcsQ0FBQyxDQUFBLElBQUssQ0FBQSxHQUFJLENBQVYsQ0FBQSxHQUFlLENBQWxCO2FBQ0ksQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFSLEdBQVksQ0FBWixHQUFnQixDQUFoQixHQUFvQixFQUR4QjtLQUFBLE1BQUE7YUFHSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQUMsQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFBLEdBQVcsQ0FBWCxHQUFlLENBQWYsR0FBbUIsQ0FBcEIsQ0FBUixHQUFpQyxFQUhyQzs7RUFEWTs7c0JBTWhCLFdBQUEsR0FBYSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7V0FDVCxDQUFBLEdBQUksQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFKLEdBQWUsQ0FBZixHQUFtQixDQUFuQixHQUF1QixDQUF2QixHQUEyQjtFQURsQjs7c0JBR2IsWUFBQSxHQUFjLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNWLENBQUMsQ0FBRCxHQUFLLENBQUMsQ0FBQyxDQUFBLEdBQUksQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFiLENBQUEsR0FBa0IsQ0FBbEIsR0FBc0IsQ0FBdEIsR0FBMEIsQ0FBMUIsR0FBOEIsQ0FBL0IsQ0FBTCxHQUF5QztFQUQvQjs7c0JBR2QsY0FBQSxHQUFnQixTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7SUFDWixJQUFHLENBQUMsQ0FBQSxJQUFLLENBQUEsR0FBSSxDQUFWLENBQUEsR0FBZSxDQUFsQjthQUNJLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBUixHQUFZLENBQVosR0FBZ0IsQ0FBaEIsR0FBb0IsQ0FBcEIsR0FBd0IsRUFENUI7S0FBQSxNQUFBO2FBR0ksQ0FBQyxDQUFELEdBQUssQ0FBTCxHQUFTLENBQUMsQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFBLEdBQVcsQ0FBWCxHQUFlLENBQWYsR0FBbUIsQ0FBbkIsR0FBdUIsQ0FBeEIsQ0FBVCxHQUFzQyxFQUgxQzs7RUFEWTs7c0JBTWhCLFdBQUEsR0FBYSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7V0FDVCxDQUFBLEdBQUksQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFKLEdBQWUsQ0FBZixHQUFtQixDQUFuQixHQUF1QixDQUF2QixHQUEyQixDQUEzQixHQUErQjtFQUR0Qjs7c0JBR2IsWUFBQSxHQUFjLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNWLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQSxHQUFJLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBYixDQUFBLEdBQWtCLENBQWxCLEdBQXNCLENBQXRCLEdBQTBCLENBQTFCLEdBQThCLENBQTlCLEdBQWtDLENBQW5DLENBQUosR0FBNEM7RUFEbEM7O3NCQUdkLGNBQUEsR0FBZ0IsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO0lBQ1osSUFBRyxDQUFDLENBQUEsSUFBSyxDQUFBLEdBQUksQ0FBVixDQUFBLEdBQWUsQ0FBbEI7YUFDSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVIsR0FBWSxDQUFaLEdBQWdCLENBQWhCLEdBQW9CLENBQXBCLEdBQXdCLENBQXhCLEdBQTRCLEVBRGhDO0tBQUEsTUFBQTthQUdJLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBQyxDQUFDLENBQUEsSUFBSyxDQUFOLENBQUEsR0FBVyxDQUFYLEdBQWUsQ0FBZixHQUFtQixDQUFuQixHQUF1QixDQUF2QixHQUEyQixDQUE1QixDQUFSLEdBQXlDLEVBSDdDOztFQURZOztzQkFNaEIsVUFBQSxHQUFZLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNSLENBQUMsQ0FBRCxHQUFLLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFDLElBQUksQ0FBQyxFQUFMLEdBQVUsQ0FBWCxDQUFqQixDQUFMLEdBQXVDLENBQXZDLEdBQTJDO0VBRG5DOztzQkFHWixXQUFBLEdBQWEsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO1dBQ1QsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFDLElBQUksQ0FBQyxFQUFMLEdBQVUsQ0FBWCxDQUFqQixDQUFKLEdBQXNDO0VBRDdCOztzQkFHYixhQUFBLEdBQWUsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO1dBQ1gsQ0FBQyxDQUFELEdBQUssQ0FBTCxHQUFTLENBQUMsSUFBSSxDQUFDLEdBQUwsQ0FBUyxJQUFJLENBQUMsRUFBTCxHQUFVLENBQVYsR0FBYyxDQUF2QixDQUFBLEdBQTRCLENBQTdCLENBQVQsR0FBMkM7RUFEaEM7O3NCQUdmLFVBQUEsR0FBWSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7QUFDUixRQUFBOzJDQUFXO01BQUEsQ0FBQSxFQUFJLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxFQUFBLEdBQUssQ0FBQyxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVQsQ0FBakIsQ0FBSixHQUFvQyxDQUF4Qzs7RUFESDs7c0JBR1osV0FBQSxHQUFhLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtBQUNULFFBQUE7MkNBQVcsQ0FBQSxHQUFJO01BQUEsQ0FBQSxFQUFJLENBQUEsR0FBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVksQ0FBQyxFQUFELEdBQU0sQ0FBTixHQUFVLENBQXRCLENBQUQsR0FBNEIsQ0FBN0IsQ0FBSixHQUFzQyxDQUExQzs7RUFETjs7c0JBR2IsYUFBQSxHQUFlLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtJQUNYLElBQUcsQ0FBQSxLQUFLLENBQVI7TUFDSSxFQURKOztJQUVBLElBQUcsQ0FBQSxLQUFLLENBQVI7TUFDSSxDQUFBLEdBQUksRUFEUjs7SUFFQSxJQUFHLENBQUMsQ0FBQSxJQUFLLENBQUEsR0FBSSxDQUFWLENBQUEsR0FBZSxDQUFsQjthQUNJLENBQUEsR0FBSSxDQUFKLEdBQVEsSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVksRUFBQSxHQUFLLENBQUMsQ0FBQSxHQUFJLENBQUwsQ0FBakIsQ0FBUixHQUFvQyxFQUR4QztLQUFBLE1BQUE7YUFHSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxDQUFDLEVBQUQsR0FBTSxFQUFFLENBQXBCLENBQUQsR0FBMEIsQ0FBM0IsQ0FBUixHQUF3QyxFQUg1Qzs7RUFMVzs7c0JBVWYsVUFBQSxHQUFZLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNSLENBQUMsQ0FBRCxHQUFLLENBQUMsSUFBSSxDQUFDLElBQUwsQ0FBVSxDQUFBLEdBQUksQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFBLEdBQVcsQ0FBekIsQ0FBQSxHQUE4QixDQUEvQixDQUFMLEdBQXlDO0VBRGpDOztzQkFHWixXQUFBLEdBQWEsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO1dBQ1QsQ0FBQSxHQUFJLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBQSxHQUFJLENBQUMsQ0FBQSxHQUFJLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBYixDQUFBLEdBQWtCLENBQWhDLENBQUosR0FBeUM7RUFEaEM7O3NCQUdiLGFBQUEsR0FBZSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7SUFDWCxJQUFHLENBQUMsQ0FBQSxJQUFLLENBQUEsR0FBSSxDQUFWLENBQUEsR0FBZSxDQUFsQjthQUNJLENBQUMsQ0FBRCxHQUFLLENBQUwsR0FBUyxDQUFDLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBQSxHQUFJLENBQUEsR0FBSSxDQUFsQixDQUFBLEdBQXVCLENBQXhCLENBQVQsR0FBc0MsRUFEMUM7S0FBQSxNQUFBO2FBR0ksQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFDLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBQSxHQUFJLENBQUMsQ0FBQSxJQUFLLENBQU4sQ0FBQSxHQUFXLENBQXpCLENBQUEsR0FBOEIsQ0FBL0IsQ0FBUixHQUE0QyxFQUhoRDs7RUFEVzs7c0JBTWYsYUFBQSxHQUFlLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtBQUNYLFFBQUE7SUFBQSxDQUFBLEdBQUk7SUFDSixDQUFBLEdBQUk7SUFDSixDQUFBLEdBQUk7SUFFSixJQUFHLENBQUEsS0FBSyxDQUFSO01BQ0ksRUFESjs7SUFFQSxJQUFHLENBQUMsQ0FBQSxJQUFLLENBQU4sQ0FBQSxLQUFZLENBQWY7TUFDSSxDQUFBLEdBQUksRUFEUjs7SUFHQSxJQUFHLENBQUMsQ0FBSjtNQUNJLENBQUEsR0FBSSxDQUFBLEdBQUksR0FEWjs7SUFFQSxJQUFHLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsQ0FBUDtNQUNJLENBQUEsR0FBSTtNQUNKLENBQUEsR0FBSSxDQUFBLEdBQUksRUFGWjtLQUFBLE1BQUE7TUFJSSxDQUFBLEdBQUksQ0FBQSxHQUFJLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUFWLENBQUosR0FBb0IsSUFBSSxDQUFDLElBQUwsQ0FBVyxDQUFBLEdBQUksQ0FBZixFQUo1Qjs7V0FNQSxDQUFDLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBVCxFQUFZLEVBQUEsR0FBSyxDQUFDLENBQUEsSUFBSyxDQUFOLENBQWpCLENBQUosR0FBaUMsSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFDLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBVCxDQUFBLEdBQWMsQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDLEVBQVYsQ0FBZCxHQUE4QixDQUF2QyxDQUFsQyxDQUFELEdBQWlGO0VBbEJ0RTs7c0JBb0JmLGNBQUEsR0FBZ0IsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO0FBQ1osUUFBQTtJQUFBLENBQUEsR0FBSTtJQUNKLENBQUEsR0FBSTtJQUNKLENBQUEsR0FBSTtJQUVKLElBQUcsQ0FBQSxLQUFLLENBQVI7TUFDSSxFQURKOztJQUVBLElBQUcsQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFBLEtBQVksQ0FBZjtNQUNJLENBQUEsR0FBSSxFQURSOztJQUdBLElBQUcsQ0FBQyxDQUFKO01BQ0ksQ0FBQSxHQUFJLENBQUEsR0FBSSxHQURaOztJQUVBLElBQUcsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBVCxDQUFQO01BQ0ksQ0FBQSxHQUFJO01BQ0osQ0FBQSxHQUFJLENBQUEsR0FBSSxFQUZaO0tBQUEsTUFBQTtNQUlJLENBQUEsR0FBSSxDQUFBLEdBQUksQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDLEVBQVYsQ0FBSixHQUFvQixJQUFJLENBQUMsSUFBTCxDQUFXLENBQUEsR0FBSSxDQUFmLEVBSjVCOztXQU1BLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxDQUFDLEVBQUQsR0FBTSxDQUFsQixDQUFKLEdBQTJCLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQyxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVQsQ0FBQSxHQUFjLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUFWLENBQWQsR0FBOEIsQ0FBdkMsQ0FBM0IsR0FBdUUsQ0FBdkUsR0FBMkU7RUFsQi9EOztzQkFvQmhCLGdCQUFBLEdBQWtCLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtBQUNkLFFBQUE7SUFBQSxDQUFBLEdBQUk7SUFDSixDQUFBLEdBQUk7SUFDSixDQUFBLEdBQUk7SUFFSixJQUFHLENBQUEsS0FBSyxDQUFSO01BQ0ksRUFESjs7SUFFQSxJQUFHLENBQUMsQ0FBQSxJQUFLLENBQUEsR0FBSSxDQUFWLENBQUEsS0FBZ0IsQ0FBbkI7TUFDSSxDQUFBLEdBQUksRUFEUjs7SUFHQSxJQUFHLENBQUMsQ0FBSjtNQUNJLENBQUEsR0FBSSxDQUFBLEdBQUksQ0FBQyxFQUFBLEdBQUssR0FBTixFQURaOztJQUVBLElBQUcsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBVCxDQUFQO01BQ0ksQ0FBQSxHQUFJO01BQ0osQ0FBQSxHQUFJLENBQUEsR0FBSSxFQUZaO0tBQUEsTUFBQTtNQUlJLENBQUEsR0FBSSxDQUFBLEdBQUksQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDLEVBQVYsQ0FBSixHQUFvQixJQUFJLENBQUMsSUFBTCxDQUFXLENBQUEsR0FBSSxDQUFmLEVBSjVCOztJQUtBLElBQUksQ0FBQSxHQUFJLENBQVI7TUFDSSxDQUFDLEVBQUQsR0FBTSxDQUFDLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxFQUFBLEdBQUssQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFqQixDQUFKLEdBQWlDLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQyxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVQsQ0FBQSxHQUFjLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUFWLENBQWQsR0FBOEIsQ0FBdkMsQ0FBbEMsQ0FBTixHQUFxRixFQUR6Rjs7V0FHQSxDQUFBLEdBQUksSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVksQ0FBQyxFQUFELEdBQU0sQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFsQixDQUFKLEdBQWtDLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQyxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVQsQ0FBQSxHQUFjLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUFWLENBQWQsR0FBOEIsQ0FBdkMsQ0FBbEMsR0FBOEUsRUFBOUUsR0FBbUYsQ0FBbkYsR0FBdUY7RUFwQnpFOzs7O0dBM09VLE1BQU0sQ0FBQzs7OztBQ0ZqQyxPQUFPLENBQUM7OztFQUVWLFNBQUMsQ0FBQSxNQUFELEdBQVUsU0FBQyxZQUFELEVBQWUsVUFBZjtJQUNOLElBQUcsVUFBVSxDQUFDLFFBQWQ7TUFDSSxVQUFVLENBQUMsR0FBWCxHQUFpQixTQUFDLEtBQUQ7QUFDYixjQUFNLEtBQUEsQ0FBUyxJQUFDLENBQUEsV0FBVyxDQUFDLElBQWQsR0FBbUIsR0FBbkIsR0FBc0IsWUFBdEIsR0FBbUMsY0FBM0M7TUFETyxFQURyQjs7V0FJQSxNQUFNLENBQUMsY0FBUCxDQUFzQixJQUFDLENBQUEsU0FBdkIsRUFBa0MsWUFBbEMsRUFBZ0QsVUFBaEQ7RUFMTTs7Ozs7Ozs7QUNGZCxJQUFBLCtCQUFBO0VBQUE7OztBQUFBLENBQUEsR0FBSSxNQUFNLENBQUM7O0FBRVgsT0FBQSxDQUFRLHFCQUFSOztBQUNDLFlBQWEsT0FBQSxDQUFRLHFCQUFSOztBQUNiLFlBQWEsT0FBQSxDQUFRLHFCQUFSOztBQUNiLFNBQVUsT0FBQSxDQUFRLGtCQUFSOztBQUVMLE9BQU8sQ0FBQzs7O0VBQ0csZ0JBQUMsVUFBRCxFQUFnQixRQUFoQjs7TUFBQyxhQUFXOztJQUNyQixzQ0FBQTtJQUVBLElBQUMsQ0FBQSxRQUFELEdBQVk7SUFFWixDQUFDLENBQUMsUUFBRixDQUFXLFVBQVgsRUFDSTtNQUFBLENBQUEsRUFBRyxDQUFIO01BQ0EsQ0FBQSxFQUFHLENBREg7TUFFQSxDQUFBLEVBQUcsR0FGSDtNQUdBLFNBQUEsRUFBVyxDQUhYO01BSUEsU0FBQSxFQUFXLENBSlg7TUFLQSxTQUFBLEVBQVcsQ0FMWDtNQU1BLEdBQUEsRUFBSyxFQU5MO01BT0EsSUFBQSxFQUFNLEdBUE47TUFRQSxHQUFBLEVBQUssS0FSTDtNQVNBLFNBQUEsRUFBVyxLQVRYO01BVUEsVUFBQSxFQUFZLEtBVlo7TUFXQSxZQUFBLEVBQWMsS0FYZDtNQVlBLGFBQUEsRUFBZSxLQVpmO01BYUEsYUFBQSxFQUFlLEdBYmY7TUFjQSxVQUFBLEVBQVksS0FkWjtNQWVBLGVBQUEsRUFBaUIsRUFmakI7TUFnQkEsTUFBQSxFQUFZLElBQUEsS0FBSyxDQUFDLE9BQU4sQ0FBYyxDQUFkLEVBQWlCLENBQWpCLEVBQW9CLENBQXBCLENBaEJaO0tBREo7SUFtQkEsSUFBQyxDQUFBLFlBQUQsR0FBb0IsSUFBQSxLQUFLLENBQUMsaUJBQU4sQ0FDaEIsVUFBVSxDQUFDLEdBREssRUFFaEIsVUFBVSxDQUFDLE1BRkssRUFHaEIsVUFBVSxDQUFDLElBSEssRUFJaEIsVUFBVSxDQUFDLEdBSks7SUFPcEIsSUFBRyxVQUFVLENBQUMsYUFBZDtNQUNJLElBQUMsQ0FBQSxrQkFBRCxDQUFvQixVQUFwQixFQURKOztJQUdBLElBQUMsQ0FBQSxXQUFELENBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBWixFQUFlLFVBQVUsQ0FBQyxDQUExQixFQUE2QixVQUFVLENBQUMsQ0FBeEMsQ0FBYjtJQUNBLElBQUMsQ0FBQSxXQUFELENBQWEsQ0FBQyxVQUFVLENBQUMsU0FBWixFQUF1QixVQUFVLENBQUMsU0FBbEMsRUFBNkMsVUFBVSxDQUFDLFNBQXhELENBQWI7SUFFQSxJQUFDLENBQUEscUJBQUQsQ0FBQTtJQUVBLElBQUMsQ0FBQSxPQUFELEdBQWUsSUFBQSxNQUFBLENBQU8sSUFBUDtFQXZDTjs7bUJBeUNiLGtCQUFBLEdBQW9CLFNBQUMsVUFBRDtJQUNoQixJQUFDLENBQUEsUUFBRCxHQUFnQixJQUFBLEtBQUssQ0FBQyxhQUFOLENBQW9CLElBQUMsQ0FBQSxZQUFyQixFQUFtQyxJQUFDLENBQUEsUUFBcEM7SUFDaEIsSUFBQyxDQUFBLFNBQUQsR0FBYSxVQUFVLENBQUM7SUFDeEIsSUFBQyxDQUFBLFVBQUQsR0FBYyxVQUFVLENBQUM7SUFDekIsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsVUFBVSxDQUFDO0lBQzNCLElBQUMsQ0FBQSxhQUFELEdBQWlCLFVBQVUsQ0FBQztJQUM1QixJQUFDLENBQUEsYUFBRCxHQUFpQixVQUFVLENBQUM7SUFDNUIsSUFBQyxDQUFBLFVBQUQsR0FBYyxVQUFVLENBQUM7SUFDekIsSUFBQyxDQUFBLGVBQUQsR0FBbUIsVUFBVSxDQUFDO1dBQzlCLElBQUMsQ0FBQSxNQUFELEdBQVUsVUFBVSxDQUFDO0VBVEw7O21CQVdwQixxQkFBQSxHQUF1QixTQUFBO1dBQ25CLElBQUMsQ0FBQSxpQkFBRCxHQUFxQjtFQURGOzttQkFHdkIsRUFBQSxHQUFJLFNBQUMsU0FBRCxFQUFZLEVBQVo7QUFFQSxRQUFBO0lBQUEsSUFBRyxTQUFTLENBQUMsUUFBVixDQUFtQixRQUFuQixDQUFIO01BQ0ksUUFBQSxHQUFXLFNBQUMsQ0FBRDtlQUFPLEVBQUEsQ0FBRyxDQUFDLENBQUMsS0FBTDtNQUFQO01BQ1gsSUFBQyxDQUFBLFlBQVksQ0FBQyxnQkFBZCxDQUErQixTQUEvQixFQUEwQyxRQUExQzthQUVBLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBdEIsQ0FBeUIsT0FBekIsRUFBa0MsQ0FBQSxTQUFBLEtBQUE7ZUFBQSxTQUFBO2lCQUM5QixLQUFDLENBQUEsWUFBWSxDQUFDLG1CQUFkLENBQWtDLFNBQWxDLEVBQTZDLFFBQTdDO1FBRDhCO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQyxFQUpKOztFQUZBOzttQkFTSixXQUFBLEdBQWEsU0FBQyxTQUFEO0lBQ1QsSUFBQyxDQUFBLENBQUQsR0FBSyxTQUFVLENBQUEsQ0FBQTtJQUNmLElBQUMsQ0FBQSxDQUFELEdBQUssU0FBVSxDQUFBLENBQUE7V0FDZixJQUFDLENBQUEsQ0FBRCxHQUFLLFNBQVUsQ0FBQSxDQUFBO0VBSE47O21CQUtiLFdBQUEsR0FBYSxTQUFDLFNBQUQ7SUFDVCxJQUFDLENBQUEsU0FBRCxHQUFhLFNBQVUsQ0FBQSxDQUFBO0lBQ3ZCLElBQUMsQ0FBQSxTQUFELEdBQWEsU0FBVSxDQUFBLENBQUE7V0FDdkIsSUFBQyxDQUFBLFNBQUQsR0FBYSxTQUFVLENBQUEsQ0FBQTtFQUhkOzttQkFLYixPQUFBLEdBQVMsU0FBQyxVQUFEO1dBQ0QsSUFBQSxTQUFBLENBQVUsSUFBVixFQUFhLFVBQWI7RUFEQzs7bUJBR1QsTUFBQSxHQUFRLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQO0lBQ0osSUFBRyxTQUFTLENBQUMsTUFBVixLQUFvQixDQUF2QjthQUNJLElBQUMsQ0FBQSxZQUFZLENBQUMsTUFBZCxDQUFxQixDQUFyQixFQURKO0tBQUEsTUFFSyxJQUFHLFNBQVMsQ0FBQyxNQUFWLEtBQW9CLENBQXZCO2FBQ0QsSUFBQyxDQUFBLFlBQVksQ0FBQyxNQUFkLENBQXFCLENBQXJCLEVBQXdCLENBQXhCLEVBQTJCLENBQTNCLEVBREM7O0VBSEQ7O21CQU1SLFdBQUEsR0FBYSxTQUFDLEtBQUQ7V0FFVCxNQUFNLENBQUMsSUFBUCxDQUFZLElBQUMsQ0FBQSxNQUFiLENBQW9CLENBQUMsR0FBckIsQ0FBeUIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLENBQUQ7UUFDckIsSUFBRyxDQUFBLEtBQUssS0FBUjtVQUNJLEtBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixHQUFrQixLQUFDLENBQUEsTUFBTyxDQUFBLENBQUE7aUJBRzFCLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBQyxDQUFBLE1BQU0sQ0FBQyxPQUFwQixDQUE0QixDQUFDLEdBQTdCLENBQWlDLFNBQUMsRUFBRDttQkFDN0IsS0FBRSxDQUFBLEVBQUEsQ0FBRixHQUFRLEtBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUSxDQUFBLEVBQUE7VUFESyxDQUFqQyxFQUpKOztNQURxQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBekI7RUFGUzs7bUJBVWIsVUFBQSxHQUFZLFNBQUE7QUFDUixRQUFBO0lBQUEsSUFBRyxTQUFTLENBQUMsTUFBYjtBQUVJLFdBQUEsbURBQUE7O1FBQ0ksSUFBRyxDQUFDLENBQUMsT0FBRixDQUFVLElBQUMsQ0FBQSxNQUFPLENBQUEsQ0FBQSxDQUFsQixFQUFzQixJQUFDLENBQUEsTUFBTSxDQUFDLE9BQTlCLENBQUg7VUFDSSxJQUFHLENBQUEsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFWLEdBQW1CLENBQXBCLENBQVI7WUFDSSxTQUFBLEdBQVksRUFEaEI7V0FBQSxNQUFBO1lBR0ksU0FBQSxHQUFZLENBQUEsR0FBSSxFQUhwQjtXQURKOztBQURKO01BT0EsSUFBRyxTQUFBLEtBQWEsTUFBaEI7UUFDSSxTQUFBLEdBQVksRUFEaEI7O2FBR0EsSUFBQyxDQUFBLE9BQUQsQ0FBUyxTQUFVLENBQUEsU0FBQSxDQUFuQixFQVpKO0tBQUEsTUFBQTtNQWVJLE1BQUEsR0FBUyxNQUFNLENBQUMsSUFBUCxDQUFZLElBQUMsQ0FBQSxNQUFiO01BQ1QsTUFBTSxDQUFDLE1BQVAsQ0FBYyxDQUFkLEVBQWlCLENBQWpCO0FBRUEsV0FBQSxrREFBQTs7UUFDSSxJQUFHLENBQUMsQ0FBQyxPQUFGLENBQVUsSUFBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQWxCLEVBQXNCLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBOUIsQ0FBSDtVQUNJLElBQUcsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsQ0FBakIsQ0FBUjtZQUNJLFNBQUEsR0FBWSxFQURoQjtXQUFBLE1BQUE7WUFHSSxTQUFBLEdBQVksQ0FBQSxHQUFJLEVBSHBCO1dBREo7O0FBREo7YUFPQSxJQUFDLENBQUEsT0FBRCxDQUFTLE1BQU8sQ0FBQSxTQUFBLENBQWhCLEVBekJKOztFQURROztFQTRCWixNQUFDLENBQUEsTUFBRCxDQUFRLFVBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFlBQVksQ0FBQztJQUFqQixDQUFMO0dBREo7O0VBR0EsTUFBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDO0lBQTFCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBdkIsR0FBMkI7TUFDM0IsSUFBc0IsSUFBQyxDQUFBLFFBQXZCO1FBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLENBQUEsRUFBQTs7YUFDQSxJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sVUFBUDtRQUFtQixLQUFBLEVBQU8sSUFBQyxDQUFBLENBQTNCO09BQTVCO0lBSEMsQ0FETDtHQURKOztFQU9BLE1BQUMsQ0FBQSxNQUFELENBQVEsR0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQztJQUExQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLEdBQTJCO01BQzNCLElBQXNCLElBQUMsQ0FBQSxRQUF2QjtRQUFBLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFBLEVBQUE7O2FBQ0EsSUFBQyxDQUFBLFlBQVksQ0FBQyxhQUFkLENBQTRCO1FBQUMsSUFBQSxFQUFNLFVBQVA7UUFBbUIsS0FBQSxFQUFPLElBQUMsQ0FBQSxDQUEzQjtPQUE1QjtJQUhDLENBREw7R0FESjs7RUFPQSxNQUFDLENBQUEsTUFBRCxDQUFRLEdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUM7SUFBMUIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixHQUEyQjtNQUMzQixJQUFzQixJQUFDLENBQUEsUUFBdkI7UUFBQSxJQUFDLENBQUEsUUFBUSxDQUFDLE1BQVYsQ0FBQSxFQUFBOzthQUNBLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxVQUFQO1FBQW1CLEtBQUEsRUFBTyxJQUFDLENBQUEsQ0FBM0I7T0FBNUI7SUFIQyxDQURMO0dBREo7O0VBT0EsTUFBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxZQUFZLENBQUM7SUFBakIsQ0FBTDtHQURKOztFQUdBLE1BQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBM0M7SUFBSCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLEdBQTJCLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixDQUFwQjtNQUMzQixJQUFzQixJQUFDLENBQUEsUUFBdkI7UUFBQSxJQUFDLENBQUEsUUFBUSxDQUFDLE1BQVYsQ0FBQSxFQUFBOzthQUNBLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxrQkFBUDtRQUEyQixLQUFBLEVBQU8sSUFBQyxDQUFBLFNBQW5DO09BQTVCO0lBSEMsQ0FETDtHQURKOztFQU9BLE1BQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBM0M7SUFBSCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLEdBQTJCLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixDQUFwQjtNQUMzQixJQUFzQixJQUFDLENBQUEsUUFBdkI7UUFBQSxJQUFDLENBQUEsUUFBUSxDQUFDLE1BQVYsQ0FBQSxFQUFBOzthQUNBLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxrQkFBUDtRQUEyQixLQUFBLEVBQU8sSUFBQyxDQUFBLFNBQW5DO09BQTVCO0lBSEMsQ0FETDtHQURKOztFQU9BLE1BQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBM0M7SUFBSCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLEdBQTJCLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixDQUFwQjtNQUMzQixJQUFzQixJQUFDLENBQUEsUUFBdkI7UUFBQSxJQUFDLENBQUEsUUFBUSxDQUFDLE1BQVYsQ0FBQSxFQUFBOzthQUNBLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxrQkFBUDtRQUEyQixLQUFBLEVBQU8sSUFBQyxDQUFBLFNBQW5DO09BQTVCO0lBSEMsQ0FETDtHQURKOztFQU9BLE1BQUMsQ0FBQSxNQUFELENBQVEsS0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDO0lBQWpCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxHQUFEO01BQ0QsSUFBQyxDQUFBLFlBQVksQ0FBQyxHQUFkLEdBQW9CO2FBQ3BCLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxZQUFQO1FBQXFCLEtBQUEsRUFBTyxJQUFDLENBQUEsR0FBN0I7T0FBNUI7SUFGQyxDQURMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxNQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxZQUFZLENBQUM7SUFBakIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLE1BQUQ7TUFDRCxJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsR0FBcUI7YUFDckIsSUFBQyxDQUFBLFlBQVksQ0FBQyxhQUFkLENBQTRCO1FBQUMsSUFBQSxFQUFNLGFBQVA7UUFBc0IsS0FBQSxFQUFPLElBQUMsQ0FBQSxJQUE5QjtPQUE1QjtJQUZDLENBREw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLE1BQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFlBQVksQ0FBQztJQUFqQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsSUFBRDtNQUNELElBQUMsQ0FBQSxZQUFZLENBQUMsSUFBZCxHQUFxQjthQUNyQixJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sYUFBUDtRQUFzQixLQUFBLEVBQU8sSUFBQyxDQUFBLElBQTlCO09BQTVCO0lBRkMsQ0FETDtHQURKOztFQU1BLE1BQUMsQ0FBQSxNQUFELENBQVEsS0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDO0lBQWpCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxHQUFEO01BQ0QsSUFBQyxDQUFBLFlBQVksQ0FBQyxHQUFkLEdBQW9CO2FBQ3BCLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxZQUFQO1FBQXFCLEtBQUEsRUFBTyxJQUFDLENBQUEsR0FBN0I7T0FBNUI7SUFGQyxDQURMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxZQUFZLENBQUM7SUFBakIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLE1BQUQ7TUFDRCxJQUFDLENBQUEsWUFBWSxDQUFDLE1BQWQsR0FBdUI7YUFDdkIsSUFBQyxDQUFBLFlBQVksQ0FBQyxhQUFkLENBQTRCO1FBQUMsSUFBQSxFQUFNLGVBQVA7UUFBd0IsS0FBQSxFQUFPLElBQUMsQ0FBQSxNQUFoQztPQUE1QjtJQUZDLENBREw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLFFBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQ0QsSUFBQyxDQUFBLE9BQU8sQ0FBQztJQURSLENBQUw7SUFFQSxHQUFBLEVBQUssU0FBQyxNQUFEO2FBQ0QsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxJQUFDLENBQUEsTUFBVixFQUFrQixNQUFsQjtJQURDLENBRkw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQztJQUFiLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxJQUFEO01BQ0QsSUFBQyxDQUFBLFFBQVEsQ0FBQyxTQUFWLEdBQXNCO2FBQ3RCLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxrQkFBUDtRQUEyQixLQUFBLEVBQU8sSUFBQyxDQUFBLFNBQW5DO09BQTVCO0lBRkMsQ0FETDtHQURKOztFQU1BLE1BQUMsQ0FBQSxNQUFELENBQVEsWUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDO0lBQWIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLElBQUQ7TUFDRCxJQUFDLENBQUEsUUFBUSxDQUFDLFVBQVYsR0FBdUI7YUFDdkIsSUFBQyxDQUFBLFlBQVksQ0FBQyxhQUFkLENBQTRCO1FBQUMsSUFBQSxFQUFNLG1CQUFQO1FBQTRCLEtBQUEsRUFBTyxJQUFDLENBQUEsVUFBcEM7T0FBNUI7SUFGQyxDQURMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxjQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxRQUFRLENBQUM7SUFBYixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsSUFBRDtNQUNELElBQUMsQ0FBQSxRQUFRLENBQUMsWUFBVixHQUF5QjthQUN6QixJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0scUJBQVA7UUFBOEIsS0FBQSxFQUFPLElBQUMsQ0FBQSxZQUF0QztPQUE1QjtJQUZDLENBREw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLGVBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQztJQUFiLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxJQUFEO01BQ0QsSUFBQyxDQUFBLFFBQVEsQ0FBQyxhQUFWLEdBQTBCO2FBQzFCLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxzQkFBUDtRQUErQixLQUFBLEVBQU8sSUFBQyxDQUFBLGFBQXZDO09BQTVCO0lBRkMsQ0FETDtHQURKOztFQU1BLE1BQUMsQ0FBQSxNQUFELENBQVEsZUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDO0lBQWIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLGFBQUQ7TUFDRCxJQUFDLENBQUEsUUFBUSxDQUFDLGFBQVYsR0FBMEI7YUFDMUIsSUFBQyxDQUFBLFlBQVksQ0FBQyxhQUFkLENBQTRCO1FBQUMsSUFBQSxFQUFNLHNCQUFQO1FBQStCLEtBQUEsRUFBTyxJQUFDLENBQUEsYUFBdkM7T0FBNUI7SUFGQyxDQURMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxZQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxRQUFRLENBQUM7SUFBYixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsSUFBRDtNQUNELElBQUMsQ0FBQSxRQUFRLENBQUMsVUFBVixHQUF1QjthQUN2QixJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sbUJBQVA7UUFBNEIsS0FBQSxFQUFPLElBQUMsQ0FBQSxVQUFwQztPQUE1QjtJQUZDLENBREw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLGlCQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxRQUFRLENBQUM7SUFBYixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxRQUFRLENBQUMsZUFBVixHQUE0QjthQUM1QixJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sd0JBQVA7UUFBaUMsS0FBQSxFQUFPLElBQUMsQ0FBQSxlQUF6QztPQUE1QjtJQUZDLENBREw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLFFBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQztJQUFiLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxPQUFEO01BQ0QsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLEdBQW1CO2FBQ25CLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxlQUFQO1FBQXdCLEtBQUEsRUFBTyxJQUFDLENBQUEsTUFBaEM7T0FBNUI7SUFGQyxDQURMO0dBREo7Ozs7R0F4UHlCOzs7O0FDUDdCLElBQUEsc0RBQUE7RUFBQTs7O0FBQUMsWUFBYSxPQUFBLENBQVEscUJBQVI7O0FBRWQsdUJBQUEsR0FBMEIsQ0FDdEIsR0FEc0IsRUFFdEIsR0FGc0IsRUFHdEIsR0FIc0IsRUFJdEIsV0FKc0IsRUFLdEIsV0FMc0IsRUFNdEIsV0FOc0IsRUFPdEIsT0FQc0IsRUFRdEIsUUFSc0IsRUFTdEIsUUFUc0IsRUFVdEIsUUFWc0IsRUFXdEIsU0FYc0I7O0FBYzFCLGtCQUFBLEdBQXFCLFNBQUMsSUFBRDtBQUNwQixRQUFNLEtBQUEsQ0FBTSxhQUFBLEdBQWMsSUFBZCxHQUFtQix1QkFBekI7QUFEYzs7QUFHZixPQUFPLENBQUM7OztFQUVHLGdCQUFDLEtBQUQ7SUFDVCxzQ0FBQTtJQUVBLElBQUMsQ0FBQSxLQUFELEdBQVM7SUFFVCxJQUFDLENBQUEsc0JBQUQsR0FBMEIsTUFBTSxDQUFDLG1CQUFQLENBQTJCLE1BQU0sQ0FBQyxjQUFQLENBQXNCLElBQUMsQ0FBQSxLQUFLLENBQUMsaUJBQTdCLENBQTNCO0lBRTFCLElBQUMsQ0FBQSxNQUFELEdBQ0k7TUFBQSxDQUFBLE9BQUEsQ0FBQSxFQUFTLElBQUMsQ0FBQSxnQkFBRCxDQUFrQixJQUFDLENBQUEsc0JBQW5CLENBQVQ7TUFDQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGdCQUFELENBQWtCLElBQUMsQ0FBQSxzQkFBbkIsQ0FEVDs7RUFSSzs7bUJBV2IsZ0JBQUEsR0FBa0IsU0FBQyxTQUFEO0FBQ2QsUUFBQTtJQUFBLGNBQUEsR0FBaUI7SUFDakIsU0FBUyxDQUFDLEdBQVYsQ0FBYyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsQ0FBRDtRQUNWLElBQUcsdUJBQXVCLENBQUMsUUFBeEIsQ0FBaUMsQ0FBakMsQ0FBSDtpQkFDSSxjQUFlLENBQUEsQ0FBQSxDQUFmLEdBQW9CLEtBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQSxFQUQvQjs7TUFEVTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBZDtBQUdBLFdBQU87RUFMTzs7RUFPbEIsTUFBQyxDQUFBLE1BQUQsQ0FBUSxTQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxNQUFNLENBQUM7SUFBWCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUixHQUFtQixJQUFDLENBQUEsTUFBTSxDQUFDO2FBQzNCLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixHQUFrQjtJQUZqQixDQURMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxNQUFNLENBQUM7SUFBWCxDQUFMO0dBREo7Ozs7R0ExQnlCOzs7O0FDbkI3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdmlIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzbEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ppQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcnVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcm5DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2w1QkEsT0FBQSxDQUFRLHlCQUFSOztBQUVNLE9BQU8sQ0FBQztFQUNHLGlCQUFDLFVBQUQsRUFBYSxFQUFiO0lBQ1QsSUFBQyxDQUFBLFdBQUQsR0FBZSxJQUFJLEtBQUssQ0FBQztJQUN6QixJQUFDLENBQUEsV0FBVyxDQUFDLElBQWIsQ0FBa0IsVUFBVSxDQUFDLElBQTdCLEVBQW1DLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFEO1FBQy9CLE9BQU8sQ0FBQyxLQUFLLENBQUMsVUFBZCxHQUEyQixPQUFPLENBQUM7ZUFDbkMsRUFBQSxDQUFHLE9BQU8sQ0FBQyxLQUFYO01BRitCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFuQyxFQUdFLElBSEYsRUFHUSxTQUFDLENBQUQ7YUFBTyxPQUFPLENBQUMsR0FBUixDQUFZLENBQVo7SUFBUCxDQUhSO0VBRlM7Ozs7Ozs7O0FDSGpCLE9BQUEsQ0FBUSxxQkFBUjs7QUFDQSxNQUFNLENBQUMsSUFBUCxHQUFjLE9BQUEsQ0FBUSx1QkFBUixDQUFnQyxDQUFDOztBQUV6QyxPQUFPLENBQUM7RUFDRyxhQUFDLFVBQUQsRUFBYSxFQUFiO0lBQ1QsSUFBQyxDQUFBLFdBQUQsR0FBZSxJQUFJLEtBQUssQ0FBQztJQUN6QixJQUFDLENBQUEsV0FBVyxDQUFDLElBQWIsQ0FBa0IsVUFBVSxDQUFDLElBQTdCLEVBQW1DLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxLQUFEO2VBQy9CLEVBQUEsQ0FBRyxLQUFIO01BRCtCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFuQyxFQUVFLElBRkYsRUFFUSxTQUFDLENBQUQ7YUFBTyxPQUFPLENBQUMsR0FBUixDQUFZLENBQVo7SUFBUCxDQUZSO0VBRlM7Ozs7Ozs7O0FDSmpCLE9BQUEsQ0FBUSxzQkFBUjs7QUFFTSxPQUFPLENBQUM7RUFDRyxjQUFDLFVBQUQsRUFBYSxFQUFiO0lBQ1QsSUFBQyxDQUFBLFdBQUQsR0FBZSxJQUFJLEtBQUssQ0FBQztJQUN6QixJQUFDLENBQUEsV0FBVyxDQUFDLElBQWIsQ0FBa0IsVUFBVSxDQUFDLElBQTdCLEVBQW1DLFNBQUMsS0FBRDtNQUMvQixLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVosR0FBeUIsS0FBSyxDQUFDO2FBQy9CLEVBQUEsQ0FBRyxLQUFLLENBQUMsS0FBVDtJQUYrQixDQUFuQyxFQUdFLElBSEYsRUFHUSxTQUFDLENBQUQ7YUFBTyxPQUFPLENBQUMsR0FBUixDQUFZLENBQVo7SUFBUCxDQUhSO0VBRlM7Ozs7Ozs7O0FDSFgsT0FBTyxDQUFDO0VBQ0csb0JBQUMsVUFBRCxFQUFhLEVBQWI7SUFFVCxJQUFDLENBQUEsUUFBRCxDQUFVLFVBQVUsQ0FBQyxJQUFyQixFQUEyQixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsSUFBRDtBQUN2QixZQUFBO1FBQUEsUUFBQSxHQUFXLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBWCxDQUFnQixDQUFDO1FBRTVCLElBQUcsUUFBUSxDQUFDLElBQVQsS0FBaUIsUUFBcEI7aUJBQWtDLEtBQUMsQ0FBQSxVQUFELENBQVksVUFBWixFQUF3QixFQUF4QixFQUFsQztTQUFBLE1BQUE7aUJBQ0ssS0FBQyxDQUFBLFlBQUQsQ0FBYyxVQUFkLEVBQTBCLEVBQTFCLEVBREw7O01BSHVCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUEzQjtFQUZTOzt1QkFTYixVQUFBLEdBQVksU0FBQyxVQUFELEVBQWEsRUFBYjtJQUNSLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBSSxLQUFLLENBQUM7V0FDekIsSUFBQyxDQUFBLFdBQVcsQ0FBQyxJQUFiLENBQWtCLFVBQVUsQ0FBQyxJQUE3QixFQUFtQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsS0FBRDtlQUMvQixFQUFBLENBQUcsS0FBSDtNQUQrQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbkMsRUFFRSxJQUZGLEVBRVEsU0FBQyxDQUFEO2FBQU8sT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUFaO0lBQVAsQ0FGUjtFQUZROzt1QkFNWixZQUFBLEdBQWMsU0FBQyxVQUFELEVBQWEsRUFBYjtJQUNWLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBSSxLQUFLLENBQUM7V0FDekIsSUFBQyxDQUFBLFdBQVcsQ0FBQyxJQUFiLENBQWtCLFVBQVUsQ0FBQyxJQUE3QixFQUFtQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsUUFBRCxFQUFXLFNBQVg7QUFDL0IsWUFBQTtRQUFBLFFBQUEsR0FBVyxTQUFVLENBQUEsQ0FBQTtRQUNyQixLQUFBLEdBQVksSUFBQSxLQUFLLENBQUMsSUFBTixDQUFXLFFBQVgsRUFBcUIsUUFBckI7UUFDWixLQUFLLENBQUMsVUFBTixHQUFtQixRQUFRLENBQUM7ZUFFNUIsRUFBQSxDQUFHLEtBQUg7TUFMK0I7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQW5DLEVBTUUsSUFORixFQU1RLFNBQUMsQ0FBRDthQUFPLE9BQU8sQ0FBQyxHQUFSLENBQVksQ0FBWjtJQUFQLENBTlI7RUFGVTs7dUJBVWQsUUFBQSxHQUFVLFNBQUMsSUFBRCxFQUFPLEVBQVA7QUFDTixRQUFBO0lBQUEsT0FBQSxHQUFVLElBQUk7SUFDZCxPQUFPLENBQUMsZ0JBQVIsQ0FBeUIsa0JBQXpCO0lBQ0EsT0FBTyxDQUFDLElBQVIsQ0FBYSxLQUFiLEVBQW9CLElBQXBCLEVBQTBCLElBQTFCO0lBQ0EsT0FBTyxDQUFDLGtCQUFSLEdBQTZCLFNBQUE7TUFDekIsSUFBRyxPQUFPLENBQUMsVUFBUixLQUFzQixDQUF0QixJQUEyQixPQUFPLENBQUMsTUFBUixLQUFrQixHQUFoRDtlQUNJLEVBQUEsQ0FBRyxPQUFPLENBQUMsWUFBWCxFQURKOztJQUR5QjtXQUc3QixPQUFPLENBQUMsSUFBUixDQUFhLElBQWI7RUFQTTs7Ozs7Ozs7QUMxQmQsT0FBQSxDQUFRLHFCQUFSOztBQUNBLE9BQUEsQ0FBUSxxQkFBUjs7QUFFTSxPQUFPLENBQUM7RUFDRyxhQUFDLFVBQUQsRUFBYSxFQUFiO0FBQ1QsUUFBQTtJQUFBLElBQUEsR0FBTyxVQUFVLENBQUM7SUFDbEIsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFJLENBQUMsU0FBTCxDQUFlLENBQWYsRUFBa0IsSUFBSSxDQUFDLE9BQUwsQ0FBYSxJQUFJLENBQUMsS0FBTCxDQUFXLEdBQVgsQ0FBZSxDQUFDLEdBQWhCLENBQUEsQ0FBYixDQUFsQjtJQUNYLElBQUMsQ0FBQSxTQUFELEdBQWEsSUFBSSxDQUFDLEtBQUwsQ0FBVyxHQUFYLENBQWUsQ0FBQyxHQUFoQixDQUFBO0lBQ2IsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsSUFBQyxDQUFBLFNBQVMsQ0FBQyxPQUFYLENBQW1CLE1BQW5CLEVBQTJCLE1BQTNCO0lBRWhCLElBQUMsQ0FBQSxjQUFELEdBQWtCLElBQUksS0FBSyxDQUFDO0lBQzVCLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBSSxLQUFLLENBQUM7SUFFekIsSUFBQyxDQUFBLGNBQWMsQ0FBQyxPQUFoQixDQUF3QixJQUFDLENBQUEsT0FBekI7SUFDQSxJQUFDLENBQUEsY0FBYyxDQUFDLElBQWhCLENBQXFCLElBQUMsQ0FBQSxZQUF0QixFQUFvQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsU0FBRDtRQUNoQyxTQUFTLENBQUMsT0FBVixDQUFBO1FBRUEsS0FBQyxDQUFBLFdBQVcsQ0FBQyxZQUFiLENBQTBCLFNBQTFCO1FBQ0EsS0FBQyxDQUFBLFdBQVcsQ0FBQyxPQUFiLENBQXFCLEtBQUMsQ0FBQSxPQUF0QjtlQUNBLEtBQUMsQ0FBQSxXQUFXLENBQUMsSUFBYixDQUFrQixLQUFDLENBQUEsU0FBbkIsRUFBOEIsU0FBQyxLQUFEO2lCQUMxQixFQUFBLENBQUcsS0FBSDtRQUQwQixDQUE5QjtNQUxnQztJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBcEM7RUFWUzs7Ozs7Ozs7QUNKakIsT0FBQSxDQUFRLHFCQUFSOztBQUVNLE9BQU8sQ0FBQztFQUNHLGFBQUMsVUFBRCxFQUFhLEVBQWI7SUFDVCxJQUFDLENBQUEsV0FBRCxHQUFlLElBQUksS0FBSyxDQUFDO0lBQ3pCLElBQUMsQ0FBQSxXQUFXLENBQUMsT0FBYixDQUFxQixVQUFVLENBQUMsV0FBaEM7SUFDQSxJQUFDLENBQUEsV0FBVyxDQUFDLElBQWIsQ0FBa0IsVUFBVSxDQUFDLElBQTdCLEVBQW1DLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxLQUFEO2VBQy9CLEVBQUEsQ0FBRyxLQUFIO01BRCtCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFuQyxFQUVFLElBRkYsRUFFUSxTQUFDLENBQUQ7YUFBTyxPQUFPLENBQUMsR0FBUixDQUFZLENBQVo7SUFBUCxDQUZSO0VBSFM7Ozs7Ozs7O0FDSGpCLElBQUE7O0FBQUEsTUFBTSxDQUFDLEtBQVAsR0FBZSxPQUFBLENBQVEseUJBQVI7O0FBQ2YsT0FBQSxDQUFRLGtCQUFSOztBQUVDLFFBQVMsT0FBQSxDQUFRLHFCQUFSOztBQUNULFNBQVUsT0FBQSxDQUFRLHNCQUFSOztBQUNWLFFBQVMsT0FBQSxDQUFRLHFCQUFSOztBQUNULE9BQVEsT0FBQSxDQUFRLG9CQUFSOztBQUNSLFFBQVMsT0FBQSxDQUFRLHFCQUFSOztBQUNULGlCQUFrQixPQUFBLENBQVEsOEJBQVI7O0FBRW5CLE1BQU0sQ0FBQyxPQUFQLEdBQ0k7RUFBQSxLQUFBLEVBQU8sS0FBUDtFQUNBLE1BQUEsRUFBUSxNQURSO0VBRUEsS0FBQSxFQUFPLEtBRlA7RUFHQSxJQUFBLEVBQU0sSUFITjtFQUlBLEtBQUEsRUFBTyxLQUpQO0VBS0EsY0FBQSxFQUFnQixjQUxoQjtFQVNBLGlCQUFBLEVBQW1CLEtBQUssQ0FBQyxpQkFUekI7RUFVQSxrQkFBQSxFQUFvQixLQUFLLENBQUMsa0JBVjFCO0VBV0Esb0JBQUEsRUFBc0IsS0FBSyxDQUFDLG9CQVg1QjtFQVlBLGlCQUFBLEVBQW1CLEtBQUssQ0FBQyxpQkFaekI7RUFhQSxrQkFBQSxFQUFvQixLQUFLLENBQUMsa0JBYjFCO0VBY0EsaUJBQUEsRUFBbUIsS0FBSyxDQUFDLGlCQWR6QjtFQWVBLGlCQUFBLEVBQW1CLEtBQUssQ0FBQyxpQkFmekI7RUFnQkEsbUJBQUEsRUFBcUIsS0FBSyxDQUFDLG1CQWhCM0I7RUFpQkEsb0JBQUEsRUFBc0IsS0FBSyxDQUFDLG9CQWpCNUI7RUFrQkEsZ0JBQUEsRUFBa0IsS0FBSyxDQUFDLGdCQWxCeEI7RUFtQkEsY0FBQSxFQUFnQixLQUFLLENBQUMsY0FuQnRCO0VBb0JBLGlCQUFBLEVBQW1CLEtBQUssQ0FBQyxpQkFwQnpCO0VBcUJBLGNBQUEsRUFBZ0IsS0FBSyxDQUFDLGNBckJ0QjtFQXNCQSxjQUFBLEVBQWdCLEtBQUssQ0FBQyxjQXRCdEI7RUF1QkEsY0FBQSxFQUFnQixLQUFLLENBQUMsY0F2QnRCOzs7OztBQ1hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4VUEsT0FBTyxDQUFDLEtBQVIsR0FBZ0I7O0FBRWhCLE9BQU8sQ0FBQyxVQUFSLEdBQXFCLFNBQUE7U0FDcEIsS0FBQSxDQUFNLHVCQUFOO0FBRG9COztBQUdyQixPQUFPLENBQUMsT0FBUixHQUFrQixDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUDs7OztBQ1RsQixPQUFPLENBQUMsUUFBUixHQUFtQixPQUFBLENBQVEsV0FBUiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdChnbG9iYWwubWFwYm94Z2wgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbi8qIGVzbGludC1kaXNhYmxlICovXG5cbnZhciBzaGFyZWQsIHdvcmtlciwgbWFwYm94Z2w7XG4vLyBkZWZpbmUgZ2V0cyBjYWxsZWQgdGhyZWUgdGltZXM6IG9uZSBmb3IgZWFjaCBjaHVuay4gd2UgcmVseSBvbiB0aGUgb3JkZXJcbi8vIHRoZXkncmUgaW1wb3J0ZWQgdG8ga25vdyB3aGljaCBpcyB3aGljaFxuZnVuY3Rpb24gZGVmaW5lKF8sIGNodW5rKSB7XG5pZiAoIXNoYXJlZCkge1xuICAgIHNoYXJlZCA9IGNodW5rO1xufSBlbHNlIGlmICghd29ya2VyKSB7XG4gICAgd29ya2VyID0gY2h1bms7XG59IGVsc2Uge1xuICAgIHZhciB3b3JrZXJCdW5kbGVTdHJpbmcgPSAndmFyIHNoYXJlZENodW5rID0ge307ICgnICsgc2hhcmVkICsgJykoc2hhcmVkQ2h1bmspOyAoJyArIHdvcmtlciArICcpKHNoYXJlZENodW5rKTsnXG5cbiAgICB2YXIgc2hhcmVkQ2h1bmsgPSB7fTtcbiAgICBzaGFyZWQoc2hhcmVkQ2h1bmspO1xuICAgIG1hcGJveGdsID0gY2h1bmsoc2hhcmVkQ2h1bmspO1xuICAgIG1hcGJveGdsLndvcmtlclVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFt3b3JrZXJCdW5kbGVTdHJpbmddLCB7IHR5cGU6ICd0ZXh0L2phdmFzY3JpcHQnIH0pKTtcbn1cbn1cblxuXG5kZWZpbmUoW1wiZXhwb3J0c1wiXSxmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsXCJkZWZhdWx0XCIpP3QuZGVmYXVsdDp0fWZ1bmN0aW9uIG4odCxlKXtyZXR1cm4gdChlPXtleHBvcnRzOnt9fSxlLmV4cG9ydHMpLGUuZXhwb3J0c312YXIgaT1zZWxmLnBlcmZvcm1hbmNlJiZzZWxmLnBlcmZvcm1hbmNlLm5vdz9zZWxmLnBlcmZvcm1hbmNlLm5vdy5iaW5kKHNlbGYucGVyZm9ybWFuY2UpOkRhdGUubm93LmJpbmQoRGF0ZSksYT1zZWxmLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8c2VsZi5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHNlbGYud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxzZWxmLm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lLG89c2VsZi5jYW5jZWxBbmltYXRpb25GcmFtZXx8c2VsZi5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8c2VsZi53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8c2VsZi5tc0NhbmNlbEFuaW1hdGlvbkZyYW1lLHM9e25vdzppLGZyYW1lOmZ1bmN0aW9uKHQpe3JldHVybiBhKHQpfSxjYW5jZWxGcmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gbyh0KX0sZ2V0SW1hZ2VEYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPXNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxyPWUuZ2V0Q29udGV4dChcIjJkXCIpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcImZhaWxlZCB0byBjcmVhdGUgY2FudmFzIDJkIGNvbnRleHRcIik7cmV0dXJuIGUud2lkdGg9dC53aWR0aCxlLmhlaWdodD10LmhlaWdodCxyLmRyYXdJbWFnZSh0LDAsMCx0LndpZHRoLHQuaGVpZ2h0KSxyLmdldEltYWdlRGF0YSgwLDAsdC53aWR0aCx0LmhlaWdodCl9LHJlc29sdmVVUkw6ZnVuY3Rpb24odCl7dmFyIGU9c2VsZi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtyZXR1cm4gZS5ocmVmPXQsZS5ocmVmfSxoYXJkd2FyZUNvbmN1cnJlbmN5OnNlbGYubmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3l8fDQsZ2V0IGRldmljZVBpeGVsUmF0aW8oKXtyZXR1cm4gc2VsZi5kZXZpY2VQaXhlbFJhdGlvfSxzdXBwb3J0c1dlYnA6ITF9O2lmKHNlbGYuZG9jdW1lbnQpe3ZhciB1PXNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTt1Lm9ubG9hZD1mdW5jdGlvbigpe3Muc3VwcG9ydHNXZWJwPSEwO30sdS5zcmM9XCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSaDRBQUFCWFJVSlFWbEE0VEJFQUFBQXZBUUFBQUFmUS8vNzN2LytCaU9oL0FBQT1cIjt9dmFyIGw9cDtmdW5jdGlvbiBwKHQsZSxyLG4pe3RoaXMuY3g9Myp0LHRoaXMuYng9Myooci10KS10aGlzLmN4LHRoaXMuYXg9MS10aGlzLmN4LXRoaXMuYngsdGhpcy5jeT0zKmUsdGhpcy5ieT0zKihuLWUpLXRoaXMuY3ksdGhpcy5heT0xLXRoaXMuY3ktdGhpcy5ieSx0aGlzLnAxeD10LHRoaXMucDF5PW4sdGhpcy5wMng9cix0aGlzLnAyeT1uO31wLnByb3RvdHlwZS5zYW1wbGVDdXJ2ZVg9ZnVuY3Rpb24odCl7cmV0dXJuKCh0aGlzLmF4KnQrdGhpcy5ieCkqdCt0aGlzLmN4KSp0fSxwLnByb3RvdHlwZS5zYW1wbGVDdXJ2ZVk9ZnVuY3Rpb24odCl7cmV0dXJuKCh0aGlzLmF5KnQrdGhpcy5ieSkqdCt0aGlzLmN5KSp0fSxwLnByb3RvdHlwZS5zYW1wbGVDdXJ2ZURlcml2YXRpdmVYPWZ1bmN0aW9uKHQpe3JldHVybigzKnRoaXMuYXgqdCsyKnRoaXMuYngpKnQrdGhpcy5jeH0scC5wcm90b3R5cGUuc29sdmVDdXJ2ZVg9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGksYSxvO2Zvcih2b2lkIDA9PT1lJiYoZT0xZS02KSxpPXQsbz0wO288ODtvKyspe2lmKGE9dGhpcy5zYW1wbGVDdXJ2ZVgoaSktdCxNYXRoLmFicyhhKTxlKXJldHVybiBpO3ZhciBzPXRoaXMuc2FtcGxlQ3VydmVEZXJpdmF0aXZlWChpKTtpZihNYXRoLmFicyhzKTwxZS02KWJyZWFrO2ktPWEvczt9aWYoKGk9dCk8KHI9MCkpcmV0dXJuIHI7aWYoaT4obj0xKSlyZXR1cm4gbjtmb3IoO3I8bjspe2lmKGE9dGhpcy5zYW1wbGVDdXJ2ZVgoaSksTWF0aC5hYnMoYS10KTxlKXJldHVybiBpO3Q+YT9yPWk6bj1pLGk9LjUqKG4tcikrcjt9cmV0dXJuIGl9LHAucHJvdG90eXBlLnNvbHZlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc2FtcGxlQ3VydmVZKHRoaXMuc29sdmVDdXJ2ZVgodCxlKSl9O3ZhciBoPWZ1bmN0aW9uKHQsZSxyKXt0aGlzLmNvbHVtbj10LHRoaXMucm93PWUsdGhpcy56b29tPXI7fTtoLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgaCh0aGlzLmNvbHVtbix0aGlzLnJvdyx0aGlzLnpvb20pfSxoLnByb3RvdHlwZS56b29tVG89ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fem9vbVRvKHQpfSxoLnByb3RvdHlwZS5zdWI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fc3ViKHQpfSxoLnByb3RvdHlwZS5fem9vbVRvPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucG93KDIsdC10aGlzLnpvb20pO3JldHVybiB0aGlzLmNvbHVtbio9ZSx0aGlzLnJvdyo9ZSx0aGlzLnpvb209dCx0aGlzfSxoLnByb3RvdHlwZS5fc3ViPWZ1bmN0aW9uKHQpe3JldHVybiB0PXQuem9vbVRvKHRoaXMuem9vbSksdGhpcy5jb2x1bW4tPXQuY29sdW1uLHRoaXMucm93LT10LnJvdyx0aGlzfTt2YXIgYz1mO2Z1bmN0aW9uIGYodCxlKXt0aGlzLng9dCx0aGlzLnk9ZTt9ZnVuY3Rpb24geSh0LGUpe2lmKEFycmF5LmlzQXJyYXkodCkpe2lmKCFBcnJheS5pc0FycmF5KGUpfHx0Lmxlbmd0aCE9PWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKCF5KHRbcl0sZVtyXSkpcmV0dXJuITE7cmV0dXJuITB9aWYoXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10JiZudWxsIT09ZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUpcmV0dXJuITE7aWYoT2JqZWN0LmtleXModCkubGVuZ3RoIT09T2JqZWN0LmtleXMoZSkubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbiBpbiB0KWlmKCF5KHRbbl0sZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIHQ9PT1lfWZ1bmN0aW9uIGQodCxlLHIsbil7dmFyIGk9bmV3IGwodCxlLHIsbik7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBpLnNvbHZlKHQpfX1mLnByb3RvdHlwZT17Y2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGYodGhpcy54LHRoaXMueSl9LGFkZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9hZGQodCl9LHN1YjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9zdWIodCl9LG11bHRCeVBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX211bHRCeVBvaW50KHQpfSxkaXZCeVBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX2RpdkJ5UG9pbnQodCl9LG11bHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fbXVsdCh0KX0sZGl2OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX2Rpdih0KX0scm90YXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX3JvdGF0ZSh0KX0scm90YXRlQXJvdW5kOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fcm90YXRlQXJvdW5kKHQsZSl9LG1hdE11bHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fbWF0TXVsdCh0KX0sdW5pdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb25lKCkuX3VuaXQoKX0scGVycDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb25lKCkuX3BlcnAoKX0scm91bmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9yb3VuZCgpfSxtYWc6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSl9LGVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PT09dC54JiZ0aGlzLnk9PT10Lnl9LGRpc3Q6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RTcXIodCkpfSxkaXN0U3FyOmZ1bmN0aW9uKHQpe3ZhciBlPXQueC10aGlzLngscj10LnktdGhpcy55O3JldHVybiBlKmUrcipyfSxhbmdsZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLmF0YW4yKHRoaXMueSx0aGlzLngpfSxhbmdsZVRvOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmF0YW4yKHRoaXMueS10LnksdGhpcy54LXQueCl9LGFuZ2xlV2l0aDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hbmdsZVdpdGhTZXAodC54LHQueSl9LGFuZ2xlV2l0aFNlcDpmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmF0YW4yKHRoaXMueCplLXRoaXMueSp0LHRoaXMueCp0K3RoaXMueSplKX0sX21hdE11bHQ6ZnVuY3Rpb24odCl7dmFyIGU9dFswXSp0aGlzLngrdFsxXSp0aGlzLnkscj10WzJdKnRoaXMueCt0WzNdKnRoaXMueTtyZXR1cm4gdGhpcy54PWUsdGhpcy55PXIsdGhpc30sX2FkZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Kz10LngsdGhpcy55Kz10LnksdGhpc30sX3N1YjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54LT10LngsdGhpcy55LT10LnksdGhpc30sX211bHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCo9dCx0aGlzLnkqPXQsdGhpc30sX2RpdjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Lz10LHRoaXMueS89dCx0aGlzfSxfbXVsdEJ5UG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCo9dC54LHRoaXMueSo9dC55LHRoaXN9LF9kaXZCeVBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngvPXQueCx0aGlzLnkvPXQueSx0aGlzfSxfdW5pdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXYodGhpcy5tYWcoKSksdGhpc30sX3BlcnA6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnk7cmV0dXJuIHRoaXMueT10aGlzLngsdGhpcy54PS10LHRoaXN9LF9yb3RhdGU6ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5jb3ModCkscj1NYXRoLnNpbih0KSxuPWUqdGhpcy54LXIqdGhpcy55LGk9cip0aGlzLngrZSp0aGlzLnk7cmV0dXJuIHRoaXMueD1uLHRoaXMueT1pLHRoaXN9LF9yb3RhdGVBcm91bmQ6ZnVuY3Rpb24odCxlKXt2YXIgcj1NYXRoLmNvcyh0KSxuPU1hdGguc2luKHQpLGk9ZS54K3IqKHRoaXMueC1lLngpLW4qKHRoaXMueS1lLnkpLGE9ZS55K24qKHRoaXMueC1lLngpK3IqKHRoaXMueS1lLnkpO3JldHVybiB0aGlzLng9aSx0aGlzLnk9YSx0aGlzfSxfcm91bmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PU1hdGgucm91bmQodGhpcy54KSx0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpLHRoaXN9fSxmLmNvbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBmP3Q6QXJyYXkuaXNBcnJheSh0KT9uZXcgZih0WzBdLHRbMV0pOnR9O3ZhciBtPWQoLjI1LC4xLC4yNSwxKTtmdW5jdGlvbiB2KHQsZSxyKXtyZXR1cm4gTWF0aC5taW4ocixNYXRoLm1heChlLHQpKX1mdW5jdGlvbiBnKHQpe2Zvcih2YXIgZT1bXSxyPWFyZ3VtZW50cy5sZW5ndGgtMTtyLS0gPjA7KWVbcl09YXJndW1lbnRzW3IrMV07Zm9yKHZhciBuPTAsaT1lO248aS5sZW5ndGg7bis9MSl7dmFyIGE9aVtuXTtmb3IodmFyIG8gaW4gYSl0W29dPWFbb107fXJldHVybiB0fXZhciB4PTE7ZnVuY3Rpb24gYigpe3JldHVybiB4Kyt9ZnVuY3Rpb24gdyh0LGUpe3QuZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdJiYoZVt0XT1lW3RdLmJpbmQoZSkpO30pO31mdW5jdGlvbiBfKHQsZSl7cmV0dXJuLTEhPT10LmluZGV4T2YoZSx0Lmxlbmd0aC1lLmxlbmd0aCl9ZnVuY3Rpb24gQSh0LGUscil7dmFyIG49e307Zm9yKHZhciBpIGluIHQpbltpXT1lLmNhbGwocnx8dGhpcyx0W2ldLGksdCk7cmV0dXJuIG59ZnVuY3Rpb24gayh0LGUscil7dmFyIG49e307Zm9yKHZhciBpIGluIHQpZS5jYWxsKHJ8fHRoaXMsdFtpXSxpLHQpJiYobltpXT10W2ldKTtyZXR1cm4gbn1mdW5jdGlvbiB6KHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP3QubWFwKHopOlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0P0EodCx6KTp0fXZhciBTPXt9O2Z1bmN0aW9uIE0odCl7U1t0XXx8KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4odCksU1t0XT0hMCk7fWZ1bmN0aW9uIEIodCxlLHIpe3JldHVybihyLnktdC55KSooZS54LXQueCk+KGUueS10LnkpKihyLngtdC54KX1mdW5jdGlvbiBWKHQpe2Zvcih2YXIgZT0wLHI9MCxuPXQubGVuZ3RoLGk9bi0xLGE9dm9pZCAwLG89dm9pZCAwO3I8bjtpPXIrKylhPXRbcl0sZSs9KChvPXRbaV0pLngtYS54KSooYS55K28ueSk7cmV0dXJuIGV9dmFyIEk9e1Vua25vd246XCJVbmtub3duXCIsU3R5bGU6XCJTdHlsZVwiLFNvdXJjZTpcIlNvdXJjZVwiLFRpbGU6XCJUaWxlXCIsR2x5cGhzOlwiR2x5cGhzXCIsU3ByaXRlSW1hZ2U6XCJTcHJpdGVJbWFnZVwiLFNwcml0ZUpTT046XCJTcHJpdGVKU09OXCIsSW1hZ2U6XCJJbWFnZVwifTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZnJlZXplJiZPYmplY3QuZnJlZXplKEkpO3ZhciBDPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyLG4pe3QuY2FsbCh0aGlzLGUpLHRoaXMuc3RhdHVzPXIsdGhpcy51cmw9bix0aGlzLm5hbWU9dGhpcy5jb25zdHJ1Y3Rvci5uYW1lLHRoaXMubWVzc2FnZT1lO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lK1wiOiBcIit0aGlzLm1lc3NhZ2UrXCIgKFwiK3RoaXMuc3RhdHVzK1wiKTogXCIrdGhpcy51cmx9LGV9KEVycm9yKTtmdW5jdGlvbiBFKHQpe3ZhciBlPW5ldyBzZWxmLlhNTEh0dHBSZXF1ZXN0O2Zvcih2YXIgciBpbiBlLm9wZW4oXCJHRVRcIix0LnVybCwhMCksdC5oZWFkZXJzKWUuc2V0UmVxdWVzdEhlYWRlcihyLHQuaGVhZGVyc1tyXSk7cmV0dXJuIGUud2l0aENyZWRlbnRpYWxzPVwiaW5jbHVkZVwiPT09dC5jcmVkZW50aWFscyxlfXZhciBUPWZ1bmN0aW9uKHQsZSl7dmFyIHI9RSh0KTtyZXR1cm4gci5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiLHIub25lcnJvcj1mdW5jdGlvbigpe2UobmV3IEVycm9yKHIuc3RhdHVzVGV4dCkpO30sci5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgbj1yLnJlc3BvbnNlO2lmKDA9PT1uLmJ5dGVMZW5ndGgmJjIwMD09PXIuc3RhdHVzKXJldHVybiBlKG5ldyBFcnJvcihcImh0dHAgc3RhdHVzIDIwMCByZXR1cm5lZCB3aXRob3V0IGNvbnRlbnQuXCIpKTtyLnN0YXR1cz49MjAwJiZyLnN0YXR1czwzMDAmJnIucmVzcG9uc2U/ZShudWxsLHtkYXRhOm4sY2FjaGVDb250cm9sOnIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDYWNoZS1Db250cm9sXCIpLGV4cGlyZXM6ci5nZXRSZXNwb25zZUhlYWRlcihcIkV4cGlyZXNcIil9KTplKG5ldyBDKHIuc3RhdHVzVGV4dCxyLnN0YXR1cyx0LnVybCkpO30sci5zZW5kKCkscn07ZnVuY3Rpb24gUCh0LGUscil7clt0XSYmLTEhPT1yW3RdLmluZGV4T2YoZSl8fChyW3RdPXJbdF18fFtdLHJbdF0ucHVzaChlKSk7fWZ1bmN0aW9uIEYodCxlLHIpe2lmKHImJnJbdF0pe3ZhciBuPXJbdF0uaW5kZXhPZihlKTstMSE9PW4mJnJbdF0uc3BsaWNlKG4sMSk7fX12YXIgTD1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KSxnKHRoaXMsZSksdGhpcy50eXBlPXQ7fSxPPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyKXt2b2lkIDA9PT1yJiYocj17fSksdC5jYWxsKHRoaXMsXCJlcnJvclwiLGcoe2Vycm9yOmV9LHIpKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGV9KEwpLEQ9ZnVuY3Rpb24oKXt9O0QucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2xpc3RlbmVycz10aGlzLl9saXN0ZW5lcnN8fHt9LFAodCxlLHRoaXMuX2xpc3RlbmVycyksdGhpc30sRC5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEYodCxlLHRoaXMuX2xpc3RlbmVycyksRih0LGUsdGhpcy5fb25lVGltZUxpc3RlbmVycyksdGhpc30sRC5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9vbmVUaW1lTGlzdGVuZXJzPXRoaXMuX29uZVRpbWVMaXN0ZW5lcnN8fHt9LFAodCxlLHRoaXMuX29uZVRpbWVMaXN0ZW5lcnMpLHRoaXN9LEQucHJvdG90eXBlLmZpcmU9ZnVuY3Rpb24odCl7XCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PW5ldyBMKHQsYXJndW1lbnRzWzFdfHx7fSkpO3ZhciBlPXQudHlwZTtpZih0aGlzLmxpc3RlbnMoZSkpe3QudGFyZ2V0PXRoaXM7Zm9yKHZhciByPTAsbj10aGlzLl9saXN0ZW5lcnMmJnRoaXMuX2xpc3RlbmVyc1tlXT90aGlzLl9saXN0ZW5lcnNbZV0uc2xpY2UoKTpbXTtyPG4ubGVuZ3RoO3IrPTEpe25bcl0uY2FsbCh0aGlzLHQpO31mb3IodmFyIGk9MCxhPXRoaXMuX29uZVRpbWVMaXN0ZW5lcnMmJnRoaXMuX29uZVRpbWVMaXN0ZW5lcnNbZV0/dGhpcy5fb25lVGltZUxpc3RlbmVyc1tlXS5zbGljZSgpOltdO2k8YS5sZW5ndGg7aSs9MSl7dmFyIG89YVtpXTtGKGUsbyx0aGlzLl9vbmVUaW1lTGlzdGVuZXJzKSxvLmNhbGwodGhpcyx0KTt9dmFyIHM9dGhpcy5fZXZlbnRlZFBhcmVudDtzJiYoZyh0LFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuX2V2ZW50ZWRQYXJlbnREYXRhP3RoaXMuX2V2ZW50ZWRQYXJlbnREYXRhKCk6dGhpcy5fZXZlbnRlZFBhcmVudERhdGEpLHMuZmlyZSh0KSk7fWVsc2UgdCBpbnN0YW5jZW9mIE8mJmNvbnNvbGUuZXJyb3IodC5lcnJvcik7cmV0dXJuIHRoaXN9LEQucHJvdG90eXBlLmxpc3RlbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xpc3RlbmVycyYmdGhpcy5fbGlzdGVuZXJzW3RdJiZ0aGlzLl9saXN0ZW5lcnNbdF0ubGVuZ3RoPjB8fHRoaXMuX29uZVRpbWVMaXN0ZW5lcnMmJnRoaXMuX29uZVRpbWVMaXN0ZW5lcnNbdF0mJnRoaXMuX29uZVRpbWVMaXN0ZW5lcnNbdF0ubGVuZ3RoPjB8fHRoaXMuX2V2ZW50ZWRQYXJlbnQmJnRoaXMuX2V2ZW50ZWRQYXJlbnQubGlzdGVucyh0KX0sRC5wcm90b3R5cGUuc2V0RXZlbnRlZFBhcmVudD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9ldmVudGVkUGFyZW50PXQsdGhpcy5fZXZlbnRlZFBhcmVudERhdGE9ZSx0aGlzfTt2YXIgcT17JHZlcnNpb246OCwkcm9vdDp7dmVyc2lvbjp7cmVxdWlyZWQ6ITAsdHlwZTpcImVudW1cIix2YWx1ZXM6WzhdfSxuYW1lOnt0eXBlOlwic3RyaW5nXCJ9LG1ldGFkYXRhOnt0eXBlOlwiKlwifSxjZW50ZXI6e3R5cGU6XCJhcnJheVwiLHZhbHVlOlwibnVtYmVyXCJ9LHpvb206e3R5cGU6XCJudW1iZXJcIn0sYmVhcmluZzp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MCxwZXJpb2Q6MzYwLHVuaXRzOlwiZGVncmVlc1wifSxwaXRjaDp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MCx1bml0czpcImRlZ3JlZXNcIn0sbGlnaHQ6e3R5cGU6XCJsaWdodFwifSxzb3VyY2VzOntyZXF1aXJlZDohMCx0eXBlOlwic291cmNlc1wifSxzcHJpdGU6e3R5cGU6XCJzdHJpbmdcIn0sZ2x5cGhzOnt0eXBlOlwic3RyaW5nXCJ9LHRyYW5zaXRpb246e3R5cGU6XCJ0cmFuc2l0aW9uXCJ9LGxheWVyczp7cmVxdWlyZWQ6ITAsdHlwZTpcImFycmF5XCIsdmFsdWU6XCJsYXllclwifX0sc291cmNlczp7XCIqXCI6e3R5cGU6XCJzb3VyY2VcIn19LHNvdXJjZTpbXCJzb3VyY2VfdmVjdG9yXCIsXCJzb3VyY2VfcmFzdGVyXCIsXCJzb3VyY2VfcmFzdGVyX2RlbVwiLFwic291cmNlX2dlb2pzb25cIixcInNvdXJjZV92aWRlb1wiLFwic291cmNlX2ltYWdlXCJdLHNvdXJjZV92ZWN0b3I6e3R5cGU6e3JlcXVpcmVkOiEwLHR5cGU6XCJlbnVtXCIsdmFsdWVzOnt2ZWN0b3I6e319fSx1cmw6e3R5cGU6XCJzdHJpbmdcIn0sdGlsZXM6e3R5cGU6XCJhcnJheVwiLHZhbHVlOlwic3RyaW5nXCJ9LGJvdW5kczp7dHlwZTpcImFycmF5XCIsdmFsdWU6XCJudW1iZXJcIixsZW5ndGg6NCxkZWZhdWx0OlstMTgwLC04NS4wNTExLDE4MCw4NS4wNTExXX0sbWluem9vbTp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MH0sbWF4em9vbTp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MjJ9LGF0dHJpYnV0aW9uOnt0eXBlOlwic3RyaW5nXCJ9LFwiKlwiOnt0eXBlOlwiKlwifX0sc291cmNlX3Jhc3Rlcjp7dHlwZTp7cmVxdWlyZWQ6ITAsdHlwZTpcImVudW1cIix2YWx1ZXM6e3Jhc3Rlcjp7fX19LHVybDp7dHlwZTpcInN0cmluZ1wifSx0aWxlczp7dHlwZTpcImFycmF5XCIsdmFsdWU6XCJzdHJpbmdcIn0sYm91bmRzOnt0eXBlOlwiYXJyYXlcIix2YWx1ZTpcIm51bWJlclwiLGxlbmd0aDo0LGRlZmF1bHQ6Wy0xODAsLTg1LjA1MTEsMTgwLDg1LjA1MTFdfSxtaW56b29tOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDowfSxtYXh6b29tOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoyMn0sdGlsZVNpemU6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjUxMix1bml0czpcInBpeGVsc1wifSxzY2hlbWU6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOnt4eXo6e30sdG1zOnt9fSxkZWZhdWx0OlwieHl6XCJ9LGF0dHJpYnV0aW9uOnt0eXBlOlwic3RyaW5nXCJ9LFwiKlwiOnt0eXBlOlwiKlwifX0sc291cmNlX3Jhc3Rlcl9kZW06e3R5cGU6e3JlcXVpcmVkOiEwLHR5cGU6XCJlbnVtXCIsdmFsdWVzOntcInJhc3Rlci1kZW1cIjp7fX19LHVybDp7dHlwZTpcInN0cmluZ1wifSx0aWxlczp7dHlwZTpcImFycmF5XCIsdmFsdWU6XCJzdHJpbmdcIn0sYm91bmRzOnt0eXBlOlwiYXJyYXlcIix2YWx1ZTpcIm51bWJlclwiLGxlbmd0aDo0LGRlZmF1bHQ6Wy0xODAsLTg1LjA1MTEsMTgwLDg1LjA1MTFdfSxtaW56b29tOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDowfSxtYXh6b29tOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoyMn0sdGlsZVNpemU6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjUxMix1bml0czpcInBpeGVsc1wifSxhdHRyaWJ1dGlvbjp7dHlwZTpcInN0cmluZ1wifSxlbmNvZGluZzp7dHlwZTpcImVudW1cIix2YWx1ZXM6e3RlcnJhcml1bTp7fSxtYXBib3g6e319LGRlZmF1bHQ6XCJtYXBib3hcIn0sXCIqXCI6e3R5cGU6XCIqXCJ9fSxzb3VyY2VfZ2VvanNvbjp7dHlwZTp7cmVxdWlyZWQ6ITAsdHlwZTpcImVudW1cIix2YWx1ZXM6e2dlb2pzb246e319fSxkYXRhOnt0eXBlOlwiKlwifSxtYXh6b29tOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoxOH0sYXR0cmlidXRpb246e3R5cGU6XCJzdHJpbmdcIn0sYnVmZmVyOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoxMjgsbWF4aW11bTo1MTIsbWluaW11bTowfSx0b2xlcmFuY2U6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0Oi4zNzV9LGNsdXN0ZXI6e3R5cGU6XCJib29sZWFuXCIsZGVmYXVsdDohMX0sY2x1c3RlclJhZGl1czp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6NTAsbWluaW11bTowfSxjbHVzdGVyTWF4Wm9vbTp7dHlwZTpcIm51bWJlclwifSxsaW5lTWV0cmljczp7dHlwZTpcImJvb2xlYW5cIixkZWZhdWx0OiExfX0sc291cmNlX3ZpZGVvOnt0eXBlOntyZXF1aXJlZDohMCx0eXBlOlwiZW51bVwiLHZhbHVlczp7dmlkZW86e319fSx1cmxzOntyZXF1aXJlZDohMCx0eXBlOlwiYXJyYXlcIix2YWx1ZTpcInN0cmluZ1wifSxjb29yZGluYXRlczp7cmVxdWlyZWQ6ITAsdHlwZTpcImFycmF5XCIsbGVuZ3RoOjQsdmFsdWU6e3R5cGU6XCJhcnJheVwiLGxlbmd0aDoyLHZhbHVlOlwibnVtYmVyXCJ9fX0sc291cmNlX2ltYWdlOnt0eXBlOntyZXF1aXJlZDohMCx0eXBlOlwiZW51bVwiLHZhbHVlczp7aW1hZ2U6e319fSx1cmw6e3JlcXVpcmVkOiEwLHR5cGU6XCJzdHJpbmdcIn0sY29vcmRpbmF0ZXM6e3JlcXVpcmVkOiEwLHR5cGU6XCJhcnJheVwiLGxlbmd0aDo0LHZhbHVlOnt0eXBlOlwiYXJyYXlcIixsZW5ndGg6Mix2YWx1ZTpcIm51bWJlclwifX19LGxheWVyOntpZDp7dHlwZTpcInN0cmluZ1wiLHJlcXVpcmVkOiEwfSx0eXBlOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7ZmlsbDp7fSxsaW5lOnt9LHN5bWJvbDp7fSxjaXJjbGU6e30saGVhdG1hcDp7fSxcImZpbGwtZXh0cnVzaW9uXCI6e30scmFzdGVyOnt9LGhpbGxzaGFkZTp7fSxiYWNrZ3JvdW5kOnt9fSxyZXF1aXJlZDohMH0sbWV0YWRhdGE6e3R5cGU6XCIqXCJ9LHNvdXJjZTp7dHlwZTpcInN0cmluZ1wifSxcInNvdXJjZS1sYXllclwiOnt0eXBlOlwic3RyaW5nXCJ9LG1pbnpvb206e3R5cGU6XCJudW1iZXJcIixtaW5pbXVtOjAsbWF4aW11bToyNH0sbWF4em9vbTp7dHlwZTpcIm51bWJlclwiLG1pbmltdW06MCxtYXhpbXVtOjI0fSxmaWx0ZXI6e3R5cGU6XCJmaWx0ZXJcIn0sbGF5b3V0Ont0eXBlOlwibGF5b3V0XCJ9LHBhaW50Ont0eXBlOlwicGFpbnRcIn19LGxheW91dDpbXCJsYXlvdXRfZmlsbFwiLFwibGF5b3V0X2xpbmVcIixcImxheW91dF9jaXJjbGVcIixcImxheW91dF9oZWF0bWFwXCIsXCJsYXlvdXRfZmlsbC1leHRydXNpb25cIixcImxheW91dF9zeW1ib2xcIixcImxheW91dF9yYXN0ZXJcIixcImxheW91dF9oaWxsc2hhZGVcIixcImxheW91dF9iYWNrZ3JvdW5kXCJdLGxheW91dF9iYWNrZ3JvdW5kOnt2aXNpYmlsaXR5Ont0eXBlOlwiZW51bVwiLHZhbHVlczp7dmlzaWJsZTp7fSxub25lOnt9fSxkZWZhdWx0OlwidmlzaWJsZVwiLFwicHJvcGVydHktdHlwZVwiOlwiY29uc3RhbnRcIn19LGxheW91dF9maWxsOnt2aXNpYmlsaXR5Ont0eXBlOlwiZW51bVwiLHZhbHVlczp7dmlzaWJsZTp7fSxub25lOnt9fSxkZWZhdWx0OlwidmlzaWJsZVwiLFwicHJvcGVydHktdHlwZVwiOlwiY29uc3RhbnRcIn19LGxheW91dF9jaXJjbGU6e3Zpc2liaWxpdHk6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOnt2aXNpYmxlOnt9LG5vbmU6e319LGRlZmF1bHQ6XCJ2aXNpYmxlXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJjb25zdGFudFwifX0sbGF5b3V0X2hlYXRtYXA6e3Zpc2liaWxpdHk6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOnt2aXNpYmxlOnt9LG5vbmU6e319LGRlZmF1bHQ6XCJ2aXNpYmxlXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJjb25zdGFudFwifX0sbGF5b3V0X2xpbmU6e1wibGluZS1jYXBcIjp7dHlwZTpcImVudW1cIix2YWx1ZXM6e2J1dHQ6e30scm91bmQ6e30sc3F1YXJlOnt9fSxkZWZhdWx0OlwiYnV0dFwiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImxpbmUtam9pblwiOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7YmV2ZWw6e30scm91bmQ6e30sbWl0ZXI6e319LGRlZmF1bHQ6XCJtaXRlclwiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLW1pdGVyLWxpbWl0XCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjIscmVxdWlyZXM6W3tcImxpbmUtam9pblwiOlwibWl0ZXJcIn1dLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImxpbmUtcm91bmQtbGltaXRcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MS4wNSxyZXF1aXJlczpbe1wibGluZS1qb2luXCI6XCJyb3VuZFwifV0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LHZpc2liaWxpdHk6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOnt2aXNpYmxlOnt9LG5vbmU6e319LGRlZmF1bHQ6XCJ2aXNpYmxlXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJjb25zdGFudFwifX0sbGF5b3V0X3N5bWJvbDp7XCJzeW1ib2wtcGxhY2VtZW50XCI6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOntwb2ludDp7fSxsaW5lOnt9fSxkZWZhdWx0OlwicG9pbnRcIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJzeW1ib2wtc3BhY2luZ1wiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoyNTAsbWluaW11bToxLHVuaXRzOlwicGl4ZWxzXCIscmVxdWlyZXM6W3tcInN5bWJvbC1wbGFjZW1lbnRcIjpcImxpbmVcIn1dLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInN5bWJvbC1hdm9pZC1lZGdlc1wiOnt0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHQ6ITEsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaWNvbi1hbGxvdy1vdmVybGFwXCI6e3R5cGU6XCJib29sZWFuXCIsZGVmYXVsdDohMSxyZXF1aXJlczpbXCJpY29uLWltYWdlXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImljb24taWdub3JlLXBsYWNlbWVudFwiOnt0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHQ6ITEscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJpY29uLW9wdGlvbmFsXCI6e3R5cGU6XCJib29sZWFuXCIsZGVmYXVsdDohMSxyZXF1aXJlczpbXCJpY29uLWltYWdlXCIsXCJ0ZXh0LWZpZWxkXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImljb24tcm90YXRpb24tYWxpZ25tZW50XCI6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOnttYXA6e30sdmlld3BvcnQ6e30sYXV0bzp7fX0sZGVmYXVsdDpcImF1dG9cIixyZXF1aXJlczpbXCJpY29uLWltYWdlXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImljb24tc2l6ZVwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoxLG1pbmltdW06MCx1bml0czpcImZhY3RvciBvZiB0aGUgb3JpZ2luYWwgaWNvbiBzaXplXCIscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiaWNvbi10ZXh0LWZpdFwiOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7bm9uZTp7fSx3aWR0aDp7fSxoZWlnaHQ6e30sYm90aDp7fX0sZGVmYXVsdDpcIm5vbmVcIixyZXF1aXJlczpbXCJpY29uLWltYWdlXCIsXCJ0ZXh0LWZpZWxkXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImljb24tdGV4dC1maXQtcGFkZGluZ1wiOnt0eXBlOlwiYXJyYXlcIix2YWx1ZTpcIm51bWJlclwiLGxlbmd0aDo0LGRlZmF1bHQ6WzAsMCwwLDBdLHVuaXRzOlwicGl4ZWxzXCIscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiLFwidGV4dC1maWVsZFwiLHtcImljb24tdGV4dC1maXRcIjpbXCJib3RoXCIsXCJ3aWR0aFwiLFwiaGVpZ2h0XCJdfV0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaWNvbi1pbWFnZVwiOnt0eXBlOlwic3RyaW5nXCIsdG9rZW5zOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJpY29uLXJvdGF0ZVwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDowLHBlcmlvZDozNjAsdW5pdHM6XCJkZWdyZWVzXCIscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiaWNvbi1wYWRkaW5nXCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjIsbWluaW11bTowLHVuaXRzOlwicGl4ZWxzXCIscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJpY29uLWtlZXAtdXByaWdodFwiOnt0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHQ6ITEscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiLHtcImljb24tcm90YXRpb24tYWxpZ25tZW50XCI6XCJtYXBcIn0se1wic3ltYm9sLXBsYWNlbWVudFwiOlwibGluZVwifV0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaWNvbi1vZmZzZXRcIjp7dHlwZTpcImFycmF5XCIsdmFsdWU6XCJudW1iZXJcIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHJlcXVpcmVzOltcImljb24taW1hZ2VcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImljb24tYW5jaG9yXCI6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOntjZW50ZXI6e30sbGVmdDp7fSxyaWdodDp7fSx0b3A6e30sYm90dG9tOnt9LFwidG9wLWxlZnRcIjp7fSxcInRvcC1yaWdodFwiOnt9LFwiYm90dG9tLWxlZnRcIjp7fSxcImJvdHRvbS1yaWdodFwiOnt9fSxkZWZhdWx0OlwiY2VudGVyXCIscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiaWNvbi1waXRjaC1hbGlnbm1lbnRcIjp7dHlwZTpcImVudW1cIix2YWx1ZXM6e21hcDp7fSx2aWV3cG9ydDp7fSxhdXRvOnt9fSxkZWZhdWx0OlwiYXV0b1wiLHJlcXVpcmVzOltcImljb24taW1hZ2VcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwidGV4dC1waXRjaC1hbGlnbm1lbnRcIjp7dHlwZTpcImVudW1cIix2YWx1ZXM6e21hcDp7fSx2aWV3cG9ydDp7fSxhdXRvOnt9fSxkZWZhdWx0OlwiYXV0b1wiLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIjp7dHlwZTpcImVudW1cIix2YWx1ZXM6e21hcDp7fSx2aWV3cG9ydDp7fSxhdXRvOnt9fSxkZWZhdWx0OlwiYXV0b1wiLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwidGV4dC1maWVsZFwiOnt0eXBlOlwic3RyaW5nXCIsZGVmYXVsdDpcIlwiLHRva2VuczohMCxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC1mb250XCI6e3R5cGU6XCJhcnJheVwiLHZhbHVlOlwic3RyaW5nXCIsZGVmYXVsdDpbXCJPcGVuIFNhbnMgUmVndWxhclwiLFwiQXJpYWwgVW5pY29kZSBNUyBSZWd1bGFyXCJdLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtc2l6ZVwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoxNixtaW5pbXVtOjAsdW5pdHM6XCJwaXhlbHNcIixyZXF1aXJlczpbXCJ0ZXh0LWZpZWxkXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJ0ZXh0LW1heC13aWR0aFwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoxMCxtaW5pbXVtOjAsdW5pdHM6XCJlbXNcIixyZXF1aXJlczpbXCJ0ZXh0LWZpZWxkXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJ0ZXh0LWxpbmUtaGVpZ2h0XCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjEuMix1bml0czpcImVtc1wiLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwidGV4dC1sZXR0ZXItc3BhY2luZ1wiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDowLHVuaXRzOlwiZW1zXCIscmVxdWlyZXM6W1widGV4dC1maWVsZFwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC1qdXN0aWZ5XCI6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOntsZWZ0Ont9LGNlbnRlcjp7fSxyaWdodDp7fX0sZGVmYXVsdDpcImNlbnRlclwiLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtYW5jaG9yXCI6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOntjZW50ZXI6e30sbGVmdDp7fSxyaWdodDp7fSx0b3A6e30sYm90dG9tOnt9LFwidG9wLWxlZnRcIjp7fSxcInRvcC1yaWdodFwiOnt9LFwiYm90dG9tLWxlZnRcIjp7fSxcImJvdHRvbS1yaWdodFwiOnt9fSxkZWZhdWx0OlwiY2VudGVyXCIscmVxdWlyZXM6W1widGV4dC1maWVsZFwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC1tYXgtYW5nbGVcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6NDUsdW5pdHM6XCJkZWdyZWVzXCIscmVxdWlyZXM6W1widGV4dC1maWVsZFwiLHtcInN5bWJvbC1wbGFjZW1lbnRcIjpcImxpbmVcIn1dLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInRleHQtcm90YXRlXCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjAscGVyaW9kOjM2MCx1bml0czpcImRlZ3JlZXNcIixyZXF1aXJlczpbXCJ0ZXh0LWZpZWxkXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJ0ZXh0LXBhZGRpbmdcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MixtaW5pbXVtOjAsdW5pdHM6XCJwaXhlbHNcIixyZXF1aXJlczpbXCJ0ZXh0LWZpZWxkXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInRleHQta2VlcC11cHJpZ2h0XCI6e3R5cGU6XCJib29sZWFuXCIsZGVmYXVsdDohMCxyZXF1aXJlczpbXCJ0ZXh0LWZpZWxkXCIse1widGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIjpcIm1hcFwifSx7XCJzeW1ib2wtcGxhY2VtZW50XCI6XCJsaW5lXCJ9XSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJ0ZXh0LXRyYW5zZm9ybVwiOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7bm9uZTp7fSx1cHBlcmNhc2U6e30sbG93ZXJjYXNlOnt9fSxkZWZhdWx0Olwibm9uZVwiLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtb2Zmc2V0XCI6e3R5cGU6XCJhcnJheVwiLHZhbHVlOlwibnVtYmVyXCIsdW5pdHM6XCJlbXNcIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtYWxsb3ctb3ZlcmxhcFwiOnt0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHQ6ITEscmVxdWlyZXM6W1widGV4dC1maWVsZFwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnRcIjp7dHlwZTpcImJvb2xlYW5cIixkZWZhdWx0OiExLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwidGV4dC1vcHRpb25hbFwiOnt0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHQ6ITEscmVxdWlyZXM6W1widGV4dC1maWVsZFwiLFwiaWNvbi1pbWFnZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sdmlzaWJpbGl0eTp7dHlwZTpcImVudW1cIix2YWx1ZXM6e3Zpc2libGU6e30sbm9uZTp7fX0sZGVmYXVsdDpcInZpc2libGVcIixcInByb3BlcnR5LXR5cGVcIjpcImNvbnN0YW50XCJ9fSxsYXlvdXRfcmFzdGVyOnt2aXNpYmlsaXR5Ont0eXBlOlwiZW51bVwiLHZhbHVlczp7dmlzaWJsZTp7fSxub25lOnt9fSxkZWZhdWx0OlwidmlzaWJsZVwiLFwicHJvcGVydHktdHlwZVwiOlwiY29uc3RhbnRcIn19LGxheW91dF9oaWxsc2hhZGU6e3Zpc2liaWxpdHk6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOnt2aXNpYmxlOnt9LG5vbmU6e319LGRlZmF1bHQ6XCJ2aXNpYmxlXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJjb25zdGFudFwifX0sZmlsdGVyOnt0eXBlOlwiYXJyYXlcIix2YWx1ZTpcIipcIn0sZmlsdGVyX29wZXJhdG9yOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7XCI9PVwiOnt9LFwiIT1cIjp7fSxcIj5cIjp7fSxcIj49XCI6e30sXCI8XCI6e30sXCI8PVwiOnt9LGluOnt9LFwiIWluXCI6e30sYWxsOnt9LGFueTp7fSxub25lOnt9LGhhczp7fSxcIiFoYXNcIjp7fX19LGdlb21ldHJ5X3R5cGU6e3R5cGU6XCJlbnVtXCIsdmFsdWVzOntQb2ludDp7fSxMaW5lU3RyaW5nOnt9LFBvbHlnb246e319fSxmdW5jdGlvbl9zdG9wOnt0eXBlOlwiYXJyYXlcIixtaW5pbXVtOjAsbWF4aW11bToyMix2YWx1ZTpbXCJudW1iZXJcIixcImNvbG9yXCJdLGxlbmd0aDoyfSxleHByZXNzaW9uOnt0eXBlOlwiYXJyYXlcIix2YWx1ZTpcIipcIixtaW5pbXVtOjF9LGV4cHJlc3Npb25fbmFtZTp7dHlwZTpcImVudW1cIix2YWx1ZXM6e2xldDp7Z3JvdXA6XCJWYXJpYWJsZSBiaW5kaW5nXCJ9LHZhcjp7Z3JvdXA6XCJWYXJpYWJsZSBiaW5kaW5nXCJ9LGxpdGVyYWw6e2dyb3VwOlwiVHlwZXNcIn0sYXJyYXk6e2dyb3VwOlwiVHlwZXNcIn0sYXQ6e2dyb3VwOlwiTG9va3VwXCJ9LGNhc2U6e2dyb3VwOlwiRGVjaXNpb25cIn0sbWF0Y2g6e2dyb3VwOlwiRGVjaXNpb25cIn0sY29hbGVzY2U6e2dyb3VwOlwiRGVjaXNpb25cIn0sc3RlcDp7Z3JvdXA6XCJSYW1wcywgc2NhbGVzLCBjdXJ2ZXNcIn0saW50ZXJwb2xhdGU6e2dyb3VwOlwiUmFtcHMsIHNjYWxlcywgY3VydmVzXCJ9LGxuMjp7Z3JvdXA6XCJNYXRoXCJ9LHBpOntncm91cDpcIk1hdGhcIn0sZTp7Z3JvdXA6XCJNYXRoXCJ9LHR5cGVvZjp7Z3JvdXA6XCJUeXBlc1wifSxzdHJpbmc6e2dyb3VwOlwiVHlwZXNcIn0sbnVtYmVyOntncm91cDpcIlR5cGVzXCJ9LGJvb2xlYW46e2dyb3VwOlwiVHlwZXNcIn0sb2JqZWN0Ontncm91cDpcIlR5cGVzXCJ9LGNvbGxhdG9yOntncm91cDpcIlR5cGVzXCJ9LFwidG8tc3RyaW5nXCI6e2dyb3VwOlwiVHlwZXNcIn0sXCJ0by1udW1iZXJcIjp7Z3JvdXA6XCJUeXBlc1wifSxcInRvLWJvb2xlYW5cIjp7Z3JvdXA6XCJUeXBlc1wifSxcInRvLXJnYmFcIjp7Z3JvdXA6XCJDb2xvclwifSxcInRvLWNvbG9yXCI6e2dyb3VwOlwiVHlwZXNcIn0scmdiOntncm91cDpcIkNvbG9yXCJ9LHJnYmE6e2dyb3VwOlwiQ29sb3JcIn0sZ2V0Ontncm91cDpcIkxvb2t1cFwifSxoYXM6e2dyb3VwOlwiTG9va3VwXCJ9LGxlbmd0aDp7Z3JvdXA6XCJMb29rdXBcIn0scHJvcGVydGllczp7Z3JvdXA6XCJGZWF0dXJlIGRhdGFcIn0sXCJmZWF0dXJlLXN0YXRlXCI6e2dyb3VwOlwiRmVhdHVyZSBkYXRhXCJ9LFwiZ2VvbWV0cnktdHlwZVwiOntncm91cDpcIkZlYXR1cmUgZGF0YVwifSxpZDp7Z3JvdXA6XCJGZWF0dXJlIGRhdGFcIn0sem9vbTp7Z3JvdXA6XCJab29tXCJ9LFwiaGVhdG1hcC1kZW5zaXR5XCI6e2dyb3VwOlwiSGVhdG1hcFwifSxcImxpbmUtcHJvZ3Jlc3NcIjp7Z3JvdXA6XCJIZWF0bWFwXCJ9LFwiK1wiOntncm91cDpcIk1hdGhcIn0sXCIqXCI6e2dyb3VwOlwiTWF0aFwifSxcIi1cIjp7Z3JvdXA6XCJNYXRoXCJ9LFwiL1wiOntncm91cDpcIk1hdGhcIn0sXCIlXCI6e2dyb3VwOlwiTWF0aFwifSxcIl5cIjp7Z3JvdXA6XCJNYXRoXCJ9LHNxcnQ6e2dyb3VwOlwiTWF0aFwifSxsb2cxMDp7Z3JvdXA6XCJNYXRoXCJ9LGxuOntncm91cDpcIk1hdGhcIn0sbG9nMjp7Z3JvdXA6XCJNYXRoXCJ9LHNpbjp7Z3JvdXA6XCJNYXRoXCJ9LGNvczp7Z3JvdXA6XCJNYXRoXCJ9LHRhbjp7Z3JvdXA6XCJNYXRoXCJ9LGFzaW46e2dyb3VwOlwiTWF0aFwifSxhY29zOntncm91cDpcIk1hdGhcIn0sYXRhbjp7Z3JvdXA6XCJNYXRoXCJ9LG1pbjp7Z3JvdXA6XCJNYXRoXCJ9LG1heDp7Z3JvdXA6XCJNYXRoXCJ9LHJvdW5kOntncm91cDpcIk1hdGhcIn0sYWJzOntncm91cDpcIk1hdGhcIn0sY2VpbDp7Z3JvdXA6XCJNYXRoXCJ9LGZsb29yOntncm91cDpcIk1hdGhcIn0sXCI9PVwiOntncm91cDpcIkRlY2lzaW9uXCJ9LFwiIT1cIjp7Z3JvdXA6XCJEZWNpc2lvblwifSxcIj5cIjp7Z3JvdXA6XCJEZWNpc2lvblwifSxcIjxcIjp7Z3JvdXA6XCJEZWNpc2lvblwifSxcIj49XCI6e2dyb3VwOlwiRGVjaXNpb25cIn0sXCI8PVwiOntncm91cDpcIkRlY2lzaW9uXCJ9LGFsbDp7Z3JvdXA6XCJEZWNpc2lvblwifSxhbnk6e2dyb3VwOlwiRGVjaXNpb25cIn0sXCIhXCI6e2dyb3VwOlwiRGVjaXNpb25cIn0sXCJpcy1zdXBwb3J0ZWQtc2NyaXB0XCI6e2dyb3VwOlwiU3RyaW5nXCJ9LHVwY2FzZTp7Z3JvdXA6XCJTdHJpbmdcIn0sZG93bmNhc2U6e2dyb3VwOlwiU3RyaW5nXCJ9LGNvbmNhdDp7Z3JvdXA6XCJTdHJpbmdcIn0sXCJyZXNvbHZlZC1sb2NhbGVcIjp7Z3JvdXA6XCJTdHJpbmdcIn19fSxsaWdodDp7YW5jaG9yOnt0eXBlOlwiZW51bVwiLGRlZmF1bHQ6XCJ2aWV3cG9ydFwiLHZhbHVlczp7bWFwOnt9LHZpZXdwb3J0Ont9fSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIix0cmFuc2l0aW9uOiExLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19fSxwb3NpdGlvbjp7dHlwZTpcImFycmF5XCIsZGVmYXVsdDpbMS4xNSwyMTAsMzBdLGxlbmd0aDozLHZhbHVlOlwibnVtYmVyXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCIsdHJhbnNpdGlvbjohMCxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCJdfX0sY29sb3I6e3R5cGU6XCJjb2xvclwiLFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwiLGRlZmF1bHQ6XCIjZmZmZmZmXCIsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sdHJhbnNpdGlvbjohMH0saW50ZW5zaXR5Ont0eXBlOlwibnVtYmVyXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCIsZGVmYXVsdDouNSxtaW5pbXVtOjAsbWF4aW11bToxLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LHRyYW5zaXRpb246ITB9fSxwYWludDpbXCJwYWludF9maWxsXCIsXCJwYWludF9saW5lXCIsXCJwYWludF9jaXJjbGVcIixcInBhaW50X2hlYXRtYXBcIixcInBhaW50X2ZpbGwtZXh0cnVzaW9uXCIsXCJwYWludF9zeW1ib2xcIixcInBhaW50X3Jhc3RlclwiLFwicGFpbnRfaGlsbHNoYWRlXCIsXCJwYWludF9iYWNrZ3JvdW5kXCJdLHBhaW50X2ZpbGw6e1wiZmlsbC1hbnRpYWxpYXNcIjp7dHlwZTpcImJvb2xlYW5cIixkZWZhdWx0OiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImZpbGwtb3BhY2l0eVwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoxLG1pbmltdW06MCxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiZmlsbC1jb2xvclwiOnt0eXBlOlwiY29sb3JcIixkZWZhdWx0OlwiIzAwMDAwMFwiLHRyYW5zaXRpb246ITAscmVxdWlyZXM6W3tcIiFcIjpcImZpbGwtcGF0dGVyblwifV0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImZpbGwtb3V0bGluZS1jb2xvclwiOnt0eXBlOlwiY29sb3JcIix0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOlt7XCIhXCI6XCJmaWxsLXBhdHRlcm5cIn0se1wiZmlsbC1hbnRpYWxpYXNcIjohMH1dLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJmaWxsLXRyYW5zbGF0ZVwiOnt0eXBlOlwiYXJyYXlcIix2YWx1ZTpcIm51bWJlclwiLGxlbmd0aDoyLGRlZmF1bHQ6WzAsMF0sdHJhbnNpdGlvbjohMCx1bml0czpcInBpeGVsc1wiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImZpbGwtdHJhbnNsYXRlLWFuY2hvclwiOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7bWFwOnt9LHZpZXdwb3J0Ont9fSxkZWZhdWx0OlwibWFwXCIscmVxdWlyZXM6W1wiZmlsbC10cmFuc2xhdGVcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiZmlsbC1wYXR0ZXJuXCI6e3R5cGU6XCJzdHJpbmdcIix0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiY3Jvc3MtZmFkZWRcIn19LHBhaW50X2xpbmU6e1wibGluZS1vcGFjaXR5XCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLWNvbG9yXCI6e3R5cGU6XCJjb2xvclwiLGRlZmF1bHQ6XCIjMDAwMDAwXCIsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbe1wiIVwiOlwibGluZS1wYXR0ZXJuXCJ9XSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwibGluZS10cmFuc2xhdGVcIjp7dHlwZTpcImFycmF5XCIsdmFsdWU6XCJudW1iZXJcIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHRyYW5zaXRpb246ITAsdW5pdHM6XCJwaXhlbHNcIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJsaW5lLXRyYW5zbGF0ZS1hbmNob3JcIjp7dHlwZTpcImVudW1cIix2YWx1ZXM6e21hcDp7fSx2aWV3cG9ydDp7fX0sZGVmYXVsdDpcIm1hcFwiLHJlcXVpcmVzOltcImxpbmUtdHJhbnNsYXRlXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImxpbmUtd2lkdGhcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsdHJhbnNpdGlvbjohMCx1bml0czpcInBpeGVsc1wiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLWdhcC13aWR0aFwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDowLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOlwicGl4ZWxzXCIsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImxpbmUtb2Zmc2V0XCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjAsdHJhbnNpdGlvbjohMCx1bml0czpcInBpeGVsc1wiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLWJsdXJcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MCxtaW5pbXVtOjAsdHJhbnNpdGlvbjohMCx1bml0czpcInBpeGVsc1wiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLWRhc2hhcnJheVwiOnt0eXBlOlwiYXJyYXlcIix2YWx1ZTpcIm51bWJlclwiLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOlwibGluZSB3aWR0aHNcIixyZXF1aXJlczpbe1wiIVwiOlwibGluZS1wYXR0ZXJuXCJ9XSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImNyb3NzLWZhZGVkXCJ9LFwibGluZS1wYXR0ZXJuXCI6e3R5cGU6XCJzdHJpbmdcIix0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiY3Jvc3MtZmFkZWRcIn0sXCJsaW5lLWdyYWRpZW50XCI6e3R5cGU6XCJjb2xvclwiLHRyYW5zaXRpb246ITEscmVxdWlyZXM6W3tcIiFcIjpcImxpbmUtZGFzaGFycmF5XCJ9LHtcIiFcIjpcImxpbmUtcGF0dGVyblwifSx7c291cmNlOlwiZ2VvanNvblwiLGhhczp7bGluZU1ldHJpY3M6ITB9fV0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wibGluZS1wcm9ncmVzc1wiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJjb2xvci1yYW1wXCJ9fSxwYWludF9jaXJjbGU6e1wiY2lyY2xlLXJhZGl1c1wiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDo1LG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOlwicGl4ZWxzXCIsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImNpcmNsZS1jb2xvclwiOnt0eXBlOlwiY29sb3JcIixkZWZhdWx0OlwiIzAwMDAwMFwiLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImNpcmNsZS1ibHVyXCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjAsdHJhbnNpdGlvbjohMCxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiY2lyY2xlLW9wYWNpdHlcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImNpcmNsZS10cmFuc2xhdGVcIjp7dHlwZTpcImFycmF5XCIsdmFsdWU6XCJudW1iZXJcIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHRyYW5zaXRpb246ITAsdW5pdHM6XCJwaXhlbHNcIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJjaXJjbGUtdHJhbnNsYXRlLWFuY2hvclwiOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7bWFwOnt9LHZpZXdwb3J0Ont9fSxkZWZhdWx0OlwibWFwXCIscmVxdWlyZXM6W1wiY2lyY2xlLXRyYW5zbGF0ZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJjaXJjbGUtcGl0Y2gtc2NhbGVcIjp7dHlwZTpcImVudW1cIix2YWx1ZXM6e21hcDp7fSx2aWV3cG9ydDp7fX0sZGVmYXVsdDpcIm1hcFwiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImNpcmNsZS1waXRjaC1hbGlnbm1lbnRcIjp7dHlwZTpcImVudW1cIix2YWx1ZXM6e21hcDp7fSx2aWV3cG9ydDp7fX0sZGVmYXVsdDpcInZpZXdwb3J0XCIsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiY2lyY2xlLXN0cm9rZS13aWR0aFwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDowLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOlwicGl4ZWxzXCIsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImNpcmNsZS1zdHJva2UtY29sb3JcIjp7dHlwZTpcImNvbG9yXCIsZGVmYXVsdDpcIiMwMDAwMDBcIix0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJjaXJjbGUtc3Ryb2tlLW9wYWNpdHlcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifX0scGFpbnRfaGVhdG1hcDp7XCJoZWF0bWFwLXJhZGl1c1wiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDozMCxtaW5pbXVtOjEsdHJhbnNpdGlvbjohMCx1bml0czpcInBpeGVsc1wiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJoZWF0bWFwLXdlaWdodFwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoxLG1pbmltdW06MCx0cmFuc2l0aW9uOiExLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJoZWF0bWFwLWludGVuc2l0eVwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoxLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImhlYXRtYXAtY29sb3JcIjp7dHlwZTpcImNvbG9yXCIsZGVmYXVsdDpbXCJpbnRlcnBvbGF0ZVwiLFtcImxpbmVhclwiXSxbXCJoZWF0bWFwLWRlbnNpdHlcIl0sMCxcInJnYmEoMCwgMCwgMjU1LCAwKVwiLC4xLFwicm95YWxibHVlXCIsLjMsXCJjeWFuXCIsLjUsXCJsaW1lXCIsLjcsXCJ5ZWxsb3dcIiwxLFwicmVkXCJdLHRyYW5zaXRpb246ITEsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiaGVhdG1hcC1kZW5zaXR5XCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImNvbG9yLXJhbXBcIn0sXCJoZWF0bWFwLW9wYWNpdHlcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9fSxwYWludF9zeW1ib2w6e1wiaWNvbi1vcGFjaXR5XCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOltcImljb24taW1hZ2VcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImljb24tY29sb3JcIjp7dHlwZTpcImNvbG9yXCIsZGVmYXVsdDpcIiMwMDAwMDBcIix0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOltcImljb24taW1hZ2VcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImljb24taGFsby1jb2xvclwiOnt0eXBlOlwiY29sb3JcIixkZWZhdWx0OlwicmdiYSgwLCAwLCAwLCAwKVwiLHRyYW5zaXRpb246ITAscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiaWNvbi1oYWxvLXdpZHRoXCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjAsbWluaW11bTowLHRyYW5zaXRpb246ITAsdW5pdHM6XCJwaXhlbHNcIixyZXF1aXJlczpbXCJpY29uLWltYWdlXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJpY29uLWhhbG8tYmx1clwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDowLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOlwicGl4ZWxzXCIscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiaWNvbi10cmFuc2xhdGVcIjp7dHlwZTpcImFycmF5XCIsdmFsdWU6XCJudW1iZXJcIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHRyYW5zaXRpb246ITAsdW5pdHM6XCJwaXhlbHNcIixyZXF1aXJlczpbXCJpY29uLWltYWdlXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImljb24tdHJhbnNsYXRlLWFuY2hvclwiOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7bWFwOnt9LHZpZXdwb3J0Ont9fSxkZWZhdWx0OlwibWFwXCIscmVxdWlyZXM6W1wiaWNvbi1pbWFnZVwiLFwiaWNvbi10cmFuc2xhdGVcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwidGV4dC1vcGFjaXR5XCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtY29sb3JcIjp7dHlwZTpcImNvbG9yXCIsZGVmYXVsdDpcIiMwMDAwMDBcIix0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOltcInRleHQtZmllbGRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtaGFsby1jb2xvclwiOnt0eXBlOlwiY29sb3JcIixkZWZhdWx0OlwicmdiYSgwLCAwLCAwLCAwKVwiLHRyYW5zaXRpb246ITAscmVxdWlyZXM6W1widGV4dC1maWVsZFwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC1oYWxvLXdpZHRoXCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjAsbWluaW11bTowLHRyYW5zaXRpb246ITAsdW5pdHM6XCJwaXhlbHNcIixyZXF1aXJlczpbXCJ0ZXh0LWZpZWxkXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJ0ZXh0LWhhbG8tYmx1clwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDowLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOlwicGl4ZWxzXCIscmVxdWlyZXM6W1widGV4dC1maWVsZFwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC10cmFuc2xhdGVcIjp7dHlwZTpcImFycmF5XCIsdmFsdWU6XCJudW1iZXJcIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHRyYW5zaXRpb246ITAsdW5pdHM6XCJwaXhlbHNcIixyZXF1aXJlczpbXCJ0ZXh0LWZpZWxkXCJdLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInRleHQtdHJhbnNsYXRlLWFuY2hvclwiOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7bWFwOnt9LHZpZXdwb3J0Ont9fSxkZWZhdWx0OlwibWFwXCIscmVxdWlyZXM6W1widGV4dC1maWVsZFwiLFwidGV4dC10cmFuc2xhdGVcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9fSxwYWludF9yYXN0ZXI6e1wicmFzdGVyLW9wYWNpdHlcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwicmFzdGVyLWh1ZS1yb3RhdGVcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MCxwZXJpb2Q6MzYwLHRyYW5zaXRpb246ITAsdW5pdHM6XCJkZWdyZWVzXCIsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwicmFzdGVyLWJyaWdodG5lc3MtbWluXCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjAsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInJhc3Rlci1icmlnaHRuZXNzLW1heFwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDoxLG1pbmltdW06MCxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJyYXN0ZXItc2F0dXJhdGlvblwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDowLG1pbmltdW06LTEsbWF4aW11bToxLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwicmFzdGVyLWNvbnRyYXN0XCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjAsbWluaW11bTotMSxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJyYXN0ZXItZmFkZS1kdXJhdGlvblwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDozMDAsbWluaW11bTowLHRyYW5zaXRpb246ITEsdW5pdHM6XCJtaWxsaXNlY29uZHNcIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn19LHBhaW50X2hpbGxzaGFkZTp7XCJoaWxsc2hhZGUtaWxsdW1pbmF0aW9uLWRpcmVjdGlvblwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDozMzUsbWluaW11bTowLG1heGltdW06MzU5LHRyYW5zaXRpb246ITEsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1hbmNob3JcIjp7dHlwZTpcImVudW1cIix2YWx1ZXM6e21hcDp7fSx2aWV3cG9ydDp7fX0sZGVmYXVsdDpcInZpZXdwb3J0XCIsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaGlsbHNoYWRlLWV4YWdnZXJhdGlvblwiOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDouNSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaGlsbHNoYWRlLXNoYWRvdy1jb2xvclwiOnt0eXBlOlwiY29sb3JcIixkZWZhdWx0OlwiIzAwMDAwMFwiLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaGlsbHNoYWRlLWhpZ2hsaWdodC1jb2xvclwiOnt0eXBlOlwiY29sb3JcIixkZWZhdWx0OlwiI0ZGRkZGRlwiLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaGlsbHNoYWRlLWFjY2VudC1jb2xvclwiOnt0eXBlOlwiY29sb3JcIixkZWZhdWx0OlwiIzAwMDAwMFwiLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9fSxwYWludF9iYWNrZ3JvdW5kOntcImJhY2tncm91bmQtY29sb3JcIjp7dHlwZTpcImNvbG9yXCIsZGVmYXVsdDpcIiMwMDAwMDBcIix0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOlt7XCIhXCI6XCJiYWNrZ3JvdW5kLXBhdHRlcm5cIn1dLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImJhY2tncm91bmQtcGF0dGVyblwiOnt0eXBlOlwic3RyaW5nXCIsdHJhbnNpdGlvbjohMCxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImNyb3NzLWZhZGVkXCJ9LFwiYmFja2dyb3VuZC1vcGFjaXR5XCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifX0sdHJhbnNpdGlvbjp7ZHVyYXRpb246e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjMwMCxtaW5pbXVtOjAsdW5pdHM6XCJtaWxsaXNlY29uZHNcIn0sZGVsYXk6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjAsbWluaW11bTowLHVuaXRzOlwibWlsbGlzZWNvbmRzXCJ9fSxcImxheW91dF9maWxsLWV4dHJ1c2lvblwiOnt2aXNpYmlsaXR5Ont0eXBlOlwiZW51bVwiLHZhbHVlczp7dmlzaWJsZTp7fSxub25lOnt9fSxkZWZhdWx0OlwidmlzaWJsZVwiLFwicHJvcGVydHktdHlwZVwiOlwiY29uc3RhbnRcIn19LGZ1bmN0aW9uOntleHByZXNzaW9uOnt0eXBlOlwiZXhwcmVzc2lvblwifSxzdG9wczp7dHlwZTpcImFycmF5XCIsdmFsdWU6XCJmdW5jdGlvbl9zdG9wXCJ9LGJhc2U6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjEsbWluaW11bTowfSxwcm9wZXJ0eTp7dHlwZTpcInN0cmluZ1wiLGRlZmF1bHQ6XCIkem9vbVwifSx0eXBlOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7aWRlbnRpdHk6e30sZXhwb25lbnRpYWw6e30saW50ZXJ2YWw6e30sY2F0ZWdvcmljYWw6e319LGRlZmF1bHQ6XCJleHBvbmVudGlhbFwifSxjb2xvclNwYWNlOnt0eXBlOlwiZW51bVwiLHZhbHVlczp7cmdiOnt9LGxhYjp7fSxoY2w6e319LGRlZmF1bHQ6XCJyZ2JcIn0sZGVmYXVsdDp7dHlwZTpcIipcIixyZXF1aXJlZDohMX19LFwicGFpbnRfZmlsbC1leHRydXNpb25cIjp7XCJmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5XCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImZpbGwtZXh0cnVzaW9uLWNvbG9yXCI6e3R5cGU6XCJjb2xvclwiLGRlZmF1bHQ6XCIjMDAwMDAwXCIsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbe1wiIVwiOlwiZmlsbC1leHRydXNpb24tcGF0dGVyblwifV0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZVwiOnt0eXBlOlwiYXJyYXlcIix2YWx1ZTpcIm51bWJlclwiLGxlbmd0aDoyLGRlZmF1bHQ6WzAsMF0sdHJhbnNpdGlvbjohMCx1bml0czpcInBpeGVsc1wiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZS1hbmNob3JcIjp7dHlwZTpcImVudW1cIix2YWx1ZXM6e21hcDp7fSx2aWV3cG9ydDp7fX0sZGVmYXVsdDpcIm1hcFwiLHJlcXVpcmVzOltcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZVwiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuXCI6e3R5cGU6XCJzdHJpbmdcIix0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiY3Jvc3MtZmFkZWRcIn0sXCJmaWxsLWV4dHJ1c2lvbi1oZWlnaHRcIjp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MCxtaW5pbXVtOjAsdW5pdHM6XCJtZXRlcnNcIix0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJmaWxsLWV4dHJ1c2lvbi1iYXNlXCI6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjAsbWluaW11bTowLHVuaXRzOlwibWV0ZXJzXCIsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbXCJmaWxsLWV4dHJ1c2lvbi1oZWlnaHRcIl0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifX0sXCJwcm9wZXJ0eS10eXBlXCI6e1wiZGF0YS1kcml2ZW5cIjp7dHlwZTpcInByb3BlcnR5LXR5cGVcIn0sXCJjcm9zcy1mYWRlZFwiOnt0eXBlOlwicHJvcGVydHktdHlwZVwifSxcImNyb3NzLWZhZGVkLWRhdGEtZHJpdmVuXCI6e3R5cGU6XCJwcm9wZXJ0eS10eXBlXCJ9LFwiY29sb3ItcmFtcFwiOnt0eXBlOlwicHJvcGVydHktdHlwZVwifSxcImRhdGEtY29uc3RhbnRcIjp7dHlwZTpcInByb3BlcnR5LXR5cGVcIn0sY29uc3RhbnQ6e3R5cGU6XCJwcm9wZXJ0eS10eXBlXCJ9fX0saj1mdW5jdGlvbih0LGUscixuKXt0aGlzLm1lc3NhZ2U9KHQ/dCtcIjogXCI6XCJcIikrcixuJiYodGhpcy5pZGVudGlmaWVyPW4pLG51bGwhPWUmJmUuX19saW5lX18mJih0aGlzLmxpbmU9ZS5fX2xpbmVfXyk7fTtmdW5jdGlvbiBSKHQpe3ZhciBlPXQua2V5LHI9dC52YWx1ZTtyZXR1cm4gcj9bbmV3IGooZSxyLFwiY29uc3RhbnRzIGhhdmUgYmVlbiBkZXByZWNhdGVkIGFzIG9mIHY4XCIpXTpbXX1mdW5jdGlvbiBVKHQpe2Zvcih2YXIgZT1bXSxyPWFyZ3VtZW50cy5sZW5ndGgtMTtyLS0gPjA7KWVbcl09YXJndW1lbnRzW3IrMV07Zm9yKHZhciBuPTAsaT1lO248aS5sZW5ndGg7bis9MSl7dmFyIGE9aVtuXTtmb3IodmFyIG8gaW4gYSl0W29dPWFbb107fXJldHVybiB0fWZ1bmN0aW9uIE4odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBOdW1iZXJ8fHQgaW5zdGFuY2VvZiBTdHJpbmd8fHQgaW5zdGFuY2VvZiBCb29sZWFuP3QudmFsdWVPZigpOnR9ZnVuY3Rpb24gWih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90Lm1hcChaKTpOKHQpfXZhciBYPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyKXt0LmNhbGwodGhpcyxyKSx0aGlzLm1lc3NhZ2U9cix0aGlzLmtleT1lO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZX0oRXJyb3IpLCQ9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1bXSksdGhpcy5wYXJlbnQ9dCx0aGlzLmJpbmRpbmdzPXt9O2Zvcih2YXIgcj0wLG49ZTtyPG4ubGVuZ3RoO3IrPTEpe3ZhciBpPW5bcl0sYT1pWzBdLG89aVsxXTt0aGlzLmJpbmRpbmdzW2FdPW87fX07JC5wcm90b3R5cGUuY29uY2F0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgJCh0aGlzLHQpfSwkLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5iaW5kaW5nc1t0XSlyZXR1cm4gdGhpcy5iaW5kaW5nc1t0XTtpZih0aGlzLnBhcmVudClyZXR1cm4gdGhpcy5wYXJlbnQuZ2V0KHQpO3Rocm93IG5ldyBFcnJvcih0K1wiIG5vdCBmb3VuZCBpbiBzY29wZS5cIil9LCQucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuYmluZGluZ3NbdF18fCEhdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50Lmhhcyh0KX07dmFyIEo9e2tpbmQ6XCJudWxsXCJ9LEc9e2tpbmQ6XCJudW1iZXJcIn0sSD17a2luZDpcInN0cmluZ1wifSxLPXtraW5kOlwiYm9vbGVhblwifSxZPXtraW5kOlwiY29sb3JcIn0sVz17a2luZDpcIm9iamVjdFwifSxRPXtraW5kOlwidmFsdWVcIn0sdHQ9e2tpbmQ6XCJjb2xsYXRvclwifTtmdW5jdGlvbiBldCh0LGUpe3JldHVybntraW5kOlwiYXJyYXlcIixpdGVtVHlwZTp0LE46ZX19ZnVuY3Rpb24gcnQodCl7aWYoXCJhcnJheVwiPT09dC5raW5kKXt2YXIgZT1ydCh0Lml0ZW1UeXBlKTtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdC5OP1wiYXJyYXk8XCIrZStcIiwgXCIrdC5OK1wiPlwiOlwidmFsdWVcIj09PXQuaXRlbVR5cGUua2luZD9cImFycmF5XCI6XCJhcnJheTxcIitlK1wiPlwifXJldHVybiB0LmtpbmR9dmFyIG50PVtKLEcsSCxLLFksVyxldChRKV07ZnVuY3Rpb24gaXQodCxlKXtpZihcImVycm9yXCI9PT1lLmtpbmQpcmV0dXJuIG51bGw7aWYoXCJhcnJheVwiPT09dC5raW5kKXtpZihcImFycmF5XCI9PT1lLmtpbmQmJiFpdCh0Lml0ZW1UeXBlLGUuaXRlbVR5cGUpJiYoXCJudW1iZXJcIiE9dHlwZW9mIHQuTnx8dC5OPT09ZS5OKSlyZXR1cm4gbnVsbH1lbHNle2lmKHQua2luZD09PWUua2luZClyZXR1cm4gbnVsbDtpZihcInZhbHVlXCI9PT10LmtpbmQpZm9yKHZhciByPTAsbj1udDtyPG4ubGVuZ3RoO3IrPTEpe2lmKCFpdChuW3JdLGUpKXJldHVybiBudWxsfX1yZXR1cm5cIkV4cGVjdGVkIFwiK3J0KHQpK1wiIGJ1dCBmb3VuZCBcIitydChlKStcIiBpbnN0ZWFkLlwifXZhciBhdD1uKGZ1bmN0aW9uKHQsZSl7dmFyIHI9e3RyYW5zcGFyZW50OlswLDAsMCwwXSxhbGljZWJsdWU6WzI0MCwyNDgsMjU1LDFdLGFudGlxdWV3aGl0ZTpbMjUwLDIzNSwyMTUsMV0sYXF1YTpbMCwyNTUsMjU1LDFdLGFxdWFtYXJpbmU6WzEyNywyNTUsMjEyLDFdLGF6dXJlOlsyNDAsMjU1LDI1NSwxXSxiZWlnZTpbMjQ1LDI0NSwyMjAsMV0sYmlzcXVlOlsyNTUsMjI4LDE5NiwxXSxibGFjazpbMCwwLDAsMV0sYmxhbmNoZWRhbG1vbmQ6WzI1NSwyMzUsMjA1LDFdLGJsdWU6WzAsMCwyNTUsMV0sYmx1ZXZpb2xldDpbMTM4LDQzLDIyNiwxXSxicm93bjpbMTY1LDQyLDQyLDFdLGJ1cmx5d29vZDpbMjIyLDE4NCwxMzUsMV0sY2FkZXRibHVlOls5NSwxNTgsMTYwLDFdLGNoYXJ0cmV1c2U6WzEyNywyNTUsMCwxXSxjaG9jb2xhdGU6WzIxMCwxMDUsMzAsMV0sY29yYWw6WzI1NSwxMjcsODAsMV0sY29ybmZsb3dlcmJsdWU6WzEwMCwxNDksMjM3LDFdLGNvcm5zaWxrOlsyNTUsMjQ4LDIyMCwxXSxjcmltc29uOlsyMjAsMjAsNjAsMV0sY3lhbjpbMCwyNTUsMjU1LDFdLGRhcmtibHVlOlswLDAsMTM5LDFdLGRhcmtjeWFuOlswLDEzOSwxMzksMV0sZGFya2dvbGRlbnJvZDpbMTg0LDEzNCwxMSwxXSxkYXJrZ3JheTpbMTY5LDE2OSwxNjksMV0sZGFya2dyZWVuOlswLDEwMCwwLDFdLGRhcmtncmV5OlsxNjksMTY5LDE2OSwxXSxkYXJra2hha2k6WzE4OSwxODMsMTA3LDFdLGRhcmttYWdlbnRhOlsxMzksMCwxMzksMV0sZGFya29saXZlZ3JlZW46Wzg1LDEwNyw0NywxXSxkYXJrb3JhbmdlOlsyNTUsMTQwLDAsMV0sZGFya29yY2hpZDpbMTUzLDUwLDIwNCwxXSxkYXJrcmVkOlsxMzksMCwwLDFdLGRhcmtzYWxtb246WzIzMywxNTAsMTIyLDFdLGRhcmtzZWFncmVlbjpbMTQzLDE4OCwxNDMsMV0sZGFya3NsYXRlYmx1ZTpbNzIsNjEsMTM5LDFdLGRhcmtzbGF0ZWdyYXk6WzQ3LDc5LDc5LDFdLGRhcmtzbGF0ZWdyZXk6WzQ3LDc5LDc5LDFdLGRhcmt0dXJxdW9pc2U6WzAsMjA2LDIwOSwxXSxkYXJrdmlvbGV0OlsxNDgsMCwyMTEsMV0sZGVlcHBpbms6WzI1NSwyMCwxNDcsMV0sZGVlcHNreWJsdWU6WzAsMTkxLDI1NSwxXSxkaW1ncmF5OlsxMDUsMTA1LDEwNSwxXSxkaW1ncmV5OlsxMDUsMTA1LDEwNSwxXSxkb2RnZXJibHVlOlszMCwxNDQsMjU1LDFdLGZpcmVicmljazpbMTc4LDM0LDM0LDFdLGZsb3JhbHdoaXRlOlsyNTUsMjUwLDI0MCwxXSxmb3Jlc3RncmVlbjpbMzQsMTM5LDM0LDFdLGZ1Y2hzaWE6WzI1NSwwLDI1NSwxXSxnYWluc2Jvcm86WzIyMCwyMjAsMjIwLDFdLGdob3N0d2hpdGU6WzI0OCwyNDgsMjU1LDFdLGdvbGQ6WzI1NSwyMTUsMCwxXSxnb2xkZW5yb2Q6WzIxOCwxNjUsMzIsMV0sZ3JheTpbMTI4LDEyOCwxMjgsMV0sZ3JlZW46WzAsMTI4LDAsMV0sZ3JlZW55ZWxsb3c6WzE3MywyNTUsNDcsMV0sZ3JleTpbMTI4LDEyOCwxMjgsMV0saG9uZXlkZXc6WzI0MCwyNTUsMjQwLDFdLGhvdHBpbms6WzI1NSwxMDUsMTgwLDFdLGluZGlhbnJlZDpbMjA1LDkyLDkyLDFdLGluZGlnbzpbNzUsMCwxMzAsMV0saXZvcnk6WzI1NSwyNTUsMjQwLDFdLGtoYWtpOlsyNDAsMjMwLDE0MCwxXSxsYXZlbmRlcjpbMjMwLDIzMCwyNTAsMV0sbGF2ZW5kZXJibHVzaDpbMjU1LDI0MCwyNDUsMV0sbGF3bmdyZWVuOlsxMjQsMjUyLDAsMV0sbGVtb25jaGlmZm9uOlsyNTUsMjUwLDIwNSwxXSxsaWdodGJsdWU6WzE3MywyMTYsMjMwLDFdLGxpZ2h0Y29yYWw6WzI0MCwxMjgsMTI4LDFdLGxpZ2h0Y3lhbjpbMjI0LDI1NSwyNTUsMV0sbGlnaHRnb2xkZW5yb2R5ZWxsb3c6WzI1MCwyNTAsMjEwLDFdLGxpZ2h0Z3JheTpbMjExLDIxMSwyMTEsMV0sbGlnaHRncmVlbjpbMTQ0LDIzOCwxNDQsMV0sbGlnaHRncmV5OlsyMTEsMjExLDIxMSwxXSxsaWdodHBpbms6WzI1NSwxODIsMTkzLDFdLGxpZ2h0c2FsbW9uOlsyNTUsMTYwLDEyMiwxXSxsaWdodHNlYWdyZWVuOlszMiwxNzgsMTcwLDFdLGxpZ2h0c2t5Ymx1ZTpbMTM1LDIwNiwyNTAsMV0sbGlnaHRzbGF0ZWdyYXk6WzExOSwxMzYsMTUzLDFdLGxpZ2h0c2xhdGVncmV5OlsxMTksMTM2LDE1MywxXSxsaWdodHN0ZWVsYmx1ZTpbMTc2LDE5NiwyMjIsMV0sbGlnaHR5ZWxsb3c6WzI1NSwyNTUsMjI0LDFdLGxpbWU6WzAsMjU1LDAsMV0sbGltZWdyZWVuOls1MCwyMDUsNTAsMV0sbGluZW46WzI1MCwyNDAsMjMwLDFdLG1hZ2VudGE6WzI1NSwwLDI1NSwxXSxtYXJvb246WzEyOCwwLDAsMV0sbWVkaXVtYXF1YW1hcmluZTpbMTAyLDIwNSwxNzAsMV0sbWVkaXVtYmx1ZTpbMCwwLDIwNSwxXSxtZWRpdW1vcmNoaWQ6WzE4Niw4NSwyMTEsMV0sbWVkaXVtcHVycGxlOlsxNDcsMTEyLDIxOSwxXSxtZWRpdW1zZWFncmVlbjpbNjAsMTc5LDExMywxXSxtZWRpdW1zbGF0ZWJsdWU6WzEyMywxMDQsMjM4LDFdLG1lZGl1bXNwcmluZ2dyZWVuOlswLDI1MCwxNTQsMV0sbWVkaXVtdHVycXVvaXNlOls3MiwyMDksMjA0LDFdLG1lZGl1bXZpb2xldHJlZDpbMTk5LDIxLDEzMywxXSxtaWRuaWdodGJsdWU6WzI1LDI1LDExMiwxXSxtaW50Y3JlYW06WzI0NSwyNTUsMjUwLDFdLG1pc3R5cm9zZTpbMjU1LDIyOCwyMjUsMV0sbW9jY2FzaW46WzI1NSwyMjgsMTgxLDFdLG5hdmFqb3doaXRlOlsyNTUsMjIyLDE3MywxXSxuYXZ5OlswLDAsMTI4LDFdLG9sZGxhY2U6WzI1MywyNDUsMjMwLDFdLG9saXZlOlsxMjgsMTI4LDAsMV0sb2xpdmVkcmFiOlsxMDcsMTQyLDM1LDFdLG9yYW5nZTpbMjU1LDE2NSwwLDFdLG9yYW5nZXJlZDpbMjU1LDY5LDAsMV0sb3JjaGlkOlsyMTgsMTEyLDIxNCwxXSxwYWxlZ29sZGVucm9kOlsyMzgsMjMyLDE3MCwxXSxwYWxlZ3JlZW46WzE1MiwyNTEsMTUyLDFdLHBhbGV0dXJxdW9pc2U6WzE3NSwyMzgsMjM4LDFdLHBhbGV2aW9sZXRyZWQ6WzIxOSwxMTIsMTQ3LDFdLHBhcGF5YXdoaXA6WzI1NSwyMzksMjEzLDFdLHBlYWNocHVmZjpbMjU1LDIxOCwxODUsMV0scGVydTpbMjA1LDEzMyw2MywxXSxwaW5rOlsyNTUsMTkyLDIwMywxXSxwbHVtOlsyMjEsMTYwLDIyMSwxXSxwb3dkZXJibHVlOlsxNzYsMjI0LDIzMCwxXSxwdXJwbGU6WzEyOCwwLDEyOCwxXSxyZWJlY2NhcHVycGxlOlsxMDIsNTEsMTUzLDFdLHJlZDpbMjU1LDAsMCwxXSxyb3N5YnJvd246WzE4OCwxNDMsMTQzLDFdLHJveWFsYmx1ZTpbNjUsMTA1LDIyNSwxXSxzYWRkbGVicm93bjpbMTM5LDY5LDE5LDFdLHNhbG1vbjpbMjUwLDEyOCwxMTQsMV0sc2FuZHlicm93bjpbMjQ0LDE2NCw5NiwxXSxzZWFncmVlbjpbNDYsMTM5LDg3LDFdLHNlYXNoZWxsOlsyNTUsMjQ1LDIzOCwxXSxzaWVubmE6WzE2MCw4Miw0NSwxXSxzaWx2ZXI6WzE5MiwxOTIsMTkyLDFdLHNreWJsdWU6WzEzNSwyMDYsMjM1LDFdLHNsYXRlYmx1ZTpbMTA2LDkwLDIwNSwxXSxzbGF0ZWdyYXk6WzExMiwxMjgsMTQ0LDFdLHNsYXRlZ3JleTpbMTEyLDEyOCwxNDQsMV0sc25vdzpbMjU1LDI1MCwyNTAsMV0sc3ByaW5nZ3JlZW46WzAsMjU1LDEyNywxXSxzdGVlbGJsdWU6WzcwLDEzMCwxODAsMV0sdGFuOlsyMTAsMTgwLDE0MCwxXSx0ZWFsOlswLDEyOCwxMjgsMV0sdGhpc3RsZTpbMjE2LDE5MSwyMTYsMV0sdG9tYXRvOlsyNTUsOTksNzEsMV0sdHVycXVvaXNlOls2NCwyMjQsMjA4LDFdLHZpb2xldDpbMjM4LDEzMCwyMzgsMV0sd2hlYXQ6WzI0NSwyMjIsMTc5LDFdLHdoaXRlOlsyNTUsMjU1LDI1NSwxXSx3aGl0ZXNtb2tlOlsyNDUsMjQ1LDI0NSwxXSx5ZWxsb3c6WzI1NSwyNTUsMCwxXSx5ZWxsb3dncmVlbjpbMTU0LDIwNSw1MCwxXX07ZnVuY3Rpb24gbih0KXtyZXR1cm4odD1NYXRoLnJvdW5kKHQpKTwwPzA6dD4yNTU/MjU1OnR9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdDwwPzA6dD4xPzE6dH1mdW5jdGlvbiBhKHQpe3JldHVyblwiJVwiPT09dFt0Lmxlbmd0aC0xXT9uKHBhcnNlRmxvYXQodCkvMTAwKjI1NSk6bihwYXJzZUludCh0KSl9ZnVuY3Rpb24gbyh0KXtyZXR1cm5cIiVcIj09PXRbdC5sZW5ndGgtMV0/aShwYXJzZUZsb2F0KHQpLzEwMCk6aShwYXJzZUZsb2F0KHQpKX1mdW5jdGlvbiBzKHQsZSxyKXtyZXR1cm4gcjwwP3IrPTE6cj4xJiYoci09MSksNipyPDE/dCsoZS10KSpyKjY6MipyPDE/ZTozKnI8Mj90KyhlLXQpKigyLzMtcikqNjp0fXRyeXtlLnBhcnNlQ1NTQ29sb3I9ZnVuY3Rpb24odCl7dmFyIGUsaT10LnJlcGxhY2UoLyAvZyxcIlwiKS50b0xvd2VyQ2FzZSgpO2lmKGkgaW4gcilyZXR1cm4gcltpXS5zbGljZSgpO2lmKFwiI1wiPT09aVswXSlyZXR1cm4gND09PWkubGVuZ3RoPyhlPXBhcnNlSW50KGkuc3Vic3RyKDEpLDE2KSk+PTAmJmU8PTQwOTU/WygzODQwJmUpPj40fCgzODQwJmUpPj44LDI0MCZlfCgyNDAmZSk+PjQsMTUmZXwoMTUmZSk8PDQsMV06bnVsbDo3PT09aS5sZW5ndGgmJihlPXBhcnNlSW50KGkuc3Vic3RyKDEpLDE2KSk+PTAmJmU8PTE2Nzc3MjE1P1soMTY3MTE2ODAmZSk+PjE2LCg2NTI4MCZlKT4+OCwyNTUmZSwxXTpudWxsO3ZhciB1PWkuaW5kZXhPZihcIihcIiksbD1pLmluZGV4T2YoXCIpXCIpO2lmKC0xIT09dSYmbCsxPT09aS5sZW5ndGgpe3ZhciBwPWkuc3Vic3RyKDAsdSksaD1pLnN1YnN0cih1KzEsbC0odSsxKSkuc3BsaXQoXCIsXCIpLGM9MTtzd2l0Y2gocCl7Y2FzZVwicmdiYVwiOmlmKDQhPT1oLmxlbmd0aClyZXR1cm4gbnVsbDtjPW8oaC5wb3AoKSk7Y2FzZVwicmdiXCI6cmV0dXJuIDMhPT1oLmxlbmd0aD9udWxsOlthKGhbMF0pLGEoaFsxXSksYShoWzJdKSxjXTtjYXNlXCJoc2xhXCI6aWYoNCE9PWgubGVuZ3RoKXJldHVybiBudWxsO2M9byhoLnBvcCgpKTtjYXNlXCJoc2xcIjppZigzIT09aC5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGY9KHBhcnNlRmxvYXQoaFswXSklMzYwKzM2MCklMzYwLzM2MCx5PW8oaFsxXSksZD1vKGhbMl0pLG09ZDw9LjU/ZCooeSsxKTpkK3ktZCp5LHY9MipkLW07cmV0dXJuW24oMjU1KnModixtLGYrMS8zKSksbigyNTUqcyh2LG0sZikpLG4oMjU1KnModixtLGYtMS8zKSksY107ZGVmYXVsdDpyZXR1cm4gbnVsbH19cmV0dXJuIG51bGx9O31jYXRjaCh0KXt9fSkucGFyc2VDU1NDb2xvcixvdD1mdW5jdGlvbih0LGUscixuKXt2b2lkIDA9PT1uJiYobj0xKSx0aGlzLnI9dCx0aGlzLmc9ZSx0aGlzLmI9cix0aGlzLmE9bjt9O290LnBhcnNlPWZ1bmN0aW9uKHQpe2lmKHQpe2lmKHQgaW5zdGFuY2VvZiBvdClyZXR1cm4gdDtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7dmFyIGU9YXQodCk7aWYoZSlyZXR1cm4gbmV3IG90KGVbMF0vMjU1KmVbM10sZVsxXS8yNTUqZVszXSxlWzJdLzI1NSplWzNdLGVbM10pfX19LG90LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PXRoaXMudG9BcnJheSgpLGU9dFswXSxyPXRbMV0sbj10WzJdLGk9dFszXTtyZXR1cm5cInJnYmEoXCIrTWF0aC5yb3VuZChlKStcIixcIitNYXRoLnJvdW5kKHIpK1wiLFwiK01hdGgucm91bmQobikrXCIsXCIraStcIilcIn0sb3QucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnIsZT10aGlzLmcscj10aGlzLmIsbj10aGlzLmE7cmV0dXJuIDA9PT1uP1swLDAsMCwwXTpbMjU1KnQvbiwyNTUqZS9uLDI1NSpyL24sbl19LG90LmJsYWNrPW5ldyBvdCgwLDAsMCwxKSxvdC53aGl0ZT1uZXcgb3QoMSwxLDEsMSksb3QudHJhbnNwYXJlbnQ9bmV3IG90KDAsMCwwLDApO3ZhciBzdD1mdW5jdGlvbih0LGUscil7dGhpcy5zZW5zaXRpdml0eT10P2U/XCJ2YXJpYW50XCI6XCJjYXNlXCI6ZT9cImFjY2VudFwiOlwiYmFzZVwiLHRoaXMubG9jYWxlPXIsdGhpcy5jb2xsYXRvcj1uZXcgSW50bC5Db2xsYXRvcih0aGlzLmxvY2FsZT90aGlzLmxvY2FsZTpbXSx7c2Vuc2l0aXZpdHk6dGhpcy5zZW5zaXRpdml0eSx1c2FnZTpcInNlYXJjaFwifSk7fTtzdC5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbGxhdG9yLmNvbXBhcmUodCxlKX0sc3QucHJvdG90eXBlLnJlc29sdmVkTG9jYWxlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBJbnRsLkNvbGxhdG9yKHRoaXMubG9jYWxlP3RoaXMubG9jYWxlOltdKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGV9O3ZhciB1dD1mdW5jdGlvbih0LGUscil7dGhpcy50eXBlPXR0LHRoaXMubG9jYWxlPXIsdGhpcy5jYXNlU2Vuc2l0aXZlPXQsdGhpcy5kaWFjcml0aWNTZW5zaXRpdmU9ZTt9O2Z1bmN0aW9uIGx0KHQsZSxyLG4pe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pj0wJiZ0PD0yNTUmJlwibnVtYmVyXCI9PXR5cGVvZiBlJiZlPj0wJiZlPD0yNTUmJlwibnVtYmVyXCI9PXR5cGVvZiByJiZyPj0wJiZyPD0yNTU/dm9pZCAwPT09bnx8XCJudW1iZXJcIj09dHlwZW9mIG4mJm4+PTAmJm48PTE/bnVsbDpcIkludmFsaWQgcmdiYSB2YWx1ZSBbXCIrW3QsZSxyLG5dLmpvaW4oXCIsIFwiKStcIl06ICdhJyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMS5cIjpcIkludmFsaWQgcmdiYSB2YWx1ZSBbXCIrKFwibnVtYmVyXCI9PXR5cGVvZiBuP1t0LGUscixuXTpbdCxlLHJdKS5qb2luKFwiLCBcIikrXCJdOiAncicsICdnJywgYW5kICdiJyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMjU1LlwifWZ1bmN0aW9uIHB0KHQpe2lmKG51bGw9PT10KXJldHVybiBKO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiBIO2lmKFwiYm9vbGVhblwiPT10eXBlb2YgdClyZXR1cm4gSztpZihcIm51bWJlclwiPT10eXBlb2YgdClyZXR1cm4gRztpZih0IGluc3RhbmNlb2Ygb3QpcmV0dXJuIFk7aWYodCBpbnN0YW5jZW9mIHN0KXJldHVybiB0dDtpZihBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIGUscj10Lmxlbmd0aCxuPTAsaT10O248aS5sZW5ndGg7bis9MSl7dmFyIGE9cHQoaVtuXSk7aWYoZSl7aWYoZT09PWEpY29udGludWU7ZT1RO2JyZWFrfWU9YTt9cmV0dXJuIGV0KGV8fFEscil9cmV0dXJuIFd9dXQucGFyc2U9ZnVuY3Rpb24odCxlKXtpZigyIT09dC5sZW5ndGgpcmV0dXJuIGUuZXJyb3IoXCJFeHBlY3RlZCBvbmUgYXJndW1lbnQuXCIpO3ZhciByPXRbMV07aWYoXCJvYmplY3RcIiE9dHlwZW9mIHJ8fEFycmF5LmlzQXJyYXkocikpcmV0dXJuIGUuZXJyb3IoXCJDb2xsYXRvciBvcHRpb25zIGFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0LlwiKTt2YXIgbj1lLnBhcnNlKHZvaWQgMCE9PXJbXCJjYXNlLXNlbnNpdGl2ZVwiXSYmcltcImNhc2Utc2Vuc2l0aXZlXCJdLDEsSyk7aWYoIW4pcmV0dXJuIG51bGw7dmFyIGk9ZS5wYXJzZSh2b2lkIDAhPT1yW1wiZGlhY3JpdGljLXNlbnNpdGl2ZVwiXSYmcltcImRpYWNyaXRpYy1zZW5zaXRpdmVcIl0sMSxLKTtpZighaSlyZXR1cm4gbnVsbDt2YXIgYT1udWxsO3JldHVybiByLmxvY2FsZSYmIShhPWUucGFyc2Uoci5sb2NhbGUsMSxIKSk/bnVsbDpuZXcgdXQobixpLGEpfSx1dC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzdCh0aGlzLmNhc2VTZW5zaXRpdmUuZXZhbHVhdGUodCksdGhpcy5kaWFjcml0aWNTZW5zaXRpdmUuZXZhbHVhdGUodCksdGhpcy5sb2NhbGU/dGhpcy5sb2NhbGUuZXZhbHVhdGUodCk6bnVsbCl9LHV0LnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24odCl7dCh0aGlzLmNhc2VTZW5zaXRpdmUpLHQodGhpcy5kaWFjcml0aWNTZW5zaXRpdmUpLHRoaXMubG9jYWxlJiZ0KHRoaXMubG9jYWxlKTt9LHV0LnByb3RvdHlwZS5wb3NzaWJsZU91dHB1dHM9ZnVuY3Rpb24oKXtyZXR1cm5bdm9pZCAwXX0sdXQucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0W1wiY2FzZS1zZW5zaXRpdmVcIl09dGhpcy5jYXNlU2Vuc2l0aXZlLnNlcmlhbGl6ZSgpLHRbXCJkaWFjcml0aWMtc2Vuc2l0aXZlXCJdPXRoaXMuZGlhY3JpdGljU2Vuc2l0aXZlLnNlcmlhbGl6ZSgpLHRoaXMubG9jYWxlJiYodC5sb2NhbGU9dGhpcy5sb2NhbGUuc2VyaWFsaXplKCkpLFtcImNvbGxhdG9yXCIsdF19O3ZhciBodD1mdW5jdGlvbih0LGUpe3RoaXMudHlwZT10LHRoaXMudmFsdWU9ZTt9O2h0LnBhcnNlPWZ1bmN0aW9uKHQsZSl7aWYoMiE9PXQubGVuZ3RoKXJldHVybiBlLmVycm9yKFwiJ2xpdGVyYWwnIGV4cHJlc3Npb24gcmVxdWlyZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIGJ1dCBmb3VuZCBcIisodC5sZW5ndGgtMSkrXCIgaW5zdGVhZC5cIik7aWYoIWZ1bmN0aW9uIHQoZSl7aWYobnVsbD09PWUpcmV0dXJuITA7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuITA7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBlKXJldHVybiEwO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVybiEwO2lmKGUgaW5zdGFuY2VvZiBvdClyZXR1cm4hMDtpZihlIGluc3RhbmNlb2Ygc3QpcmV0dXJuITA7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsbj1lO3I8bi5sZW5ndGg7cis9MSlpZighdChuW3JdKSlyZXR1cm4hMTtyZXR1cm4hMH1pZihcIm9iamVjdFwiPT10eXBlb2YgZSl7Zm9yKHZhciBpIGluIGUpaWYoIXQoZVtpXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9KHRbMV0pKXJldHVybiBlLmVycm9yKFwiaW52YWxpZCB2YWx1ZVwiKTt2YXIgcj10WzFdLG49cHQociksaT1lLmV4cGVjdGVkVHlwZTtyZXR1cm5cImFycmF5XCIhPT1uLmtpbmR8fDAhPT1uLk58fCFpfHxcImFycmF5XCIhPT1pLmtpbmR8fFwibnVtYmVyXCI9PXR5cGVvZiBpLk4mJjAhPT1pLk58fChuPWkpLG5ldyBodChuLHIpfSxodC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX0saHQucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbigpe30saHQucHJvdG90eXBlLnBvc3NpYmxlT3V0cHV0cz1mdW5jdGlvbigpe3JldHVyblt0aGlzLnZhbHVlXX0saHQucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3JldHVyblwiYXJyYXlcIj09PXRoaXMudHlwZS5raW5kfHxcIm9iamVjdFwiPT09dGhpcy50eXBlLmtpbmQ/W1wibGl0ZXJhbFwiLHRoaXMudmFsdWVdOnRoaXMudmFsdWUgaW5zdGFuY2VvZiBvdD9bXCJyZ2JhXCJdLmNvbmNhdCh0aGlzLnZhbHVlLnRvQXJyYXkoKSk6dGhpcy52YWx1ZX07dmFyIGN0PWZ1bmN0aW9uKHQpe3RoaXMubmFtZT1cIkV4cHJlc3Npb25FdmFsdWF0aW9uRXJyb3JcIix0aGlzLm1lc3NhZ2U9dDt9O2N0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZXNzYWdlfTt2YXIgZnQ9e3N0cmluZzpILG51bWJlcjpHLGJvb2xlYW46SyxvYmplY3Q6V30seXQ9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmFyZ3M9ZTt9O3l0LnBhcnNlPWZ1bmN0aW9uKHQsZSl7aWYodC5sZW5ndGg8MilyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBhcmd1bWVudC5cIik7Zm9yKHZhciByPXRbMF0sbj1mdFtyXSxpPVtdLGE9MTthPHQubGVuZ3RoO2ErKyl7dmFyIG89ZS5wYXJzZSh0W2FdLGEsUSk7aWYoIW8pcmV0dXJuIG51bGw7aS5wdXNoKG8pO31yZXR1cm4gbmV3IHl0KG4saSl9LHl0LnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuYXJncy5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmFyZ3NbZV0uZXZhbHVhdGUodCk7aWYoIWl0KHRoaXMudHlwZSxwdChyKSkpcmV0dXJuIHI7aWYoZT09PXRoaXMuYXJncy5sZW5ndGgtMSl0aHJvdyBuZXcgY3QoXCJFeHBlY3RlZCB2YWx1ZSB0byBiZSBvZiB0eXBlIFwiK3J0KHRoaXMudHlwZSkrXCIsIGJ1dCBmb3VuZCBcIitydChwdChyKSkrXCIgaW5zdGVhZC5cIil9cmV0dXJuIG51bGx9LHl0LnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24odCl7dGhpcy5hcmdzLmZvckVhY2godCk7fSx5dC5wcm90b3R5cGUucG9zc2libGVPdXRwdXRzPWZ1bmN0aW9uKCl7cmV0dXJuKHQ9W10pLmNvbmNhdC5hcHBseSh0LHRoaXMuYXJncy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zc2libGVPdXRwdXRzKCl9KSk7dmFyIHQ7fSx5dC5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMudHlwZS5raW5kXS5jb25jYXQodGhpcy5hcmdzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5zZXJpYWxpemUoKX0pKX07dmFyIGR0PXtzdHJpbmc6SCxudW1iZXI6Ryxib29sZWFuOkt9LG10PWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5pbnB1dD1lO307bXQucGFyc2U9ZnVuY3Rpb24odCxlKXtpZih0Lmxlbmd0aDwyfHx0Lmxlbmd0aD40KXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgMSwgMiwgb3IgMyBhcmd1bWVudHMsIGJ1dCBmb3VuZCBcIisodC5sZW5ndGgtMSkrXCIgaW5zdGVhZC5cIik7dmFyIHIsbjtpZih0Lmxlbmd0aD4yKXt2YXIgaT10WzFdO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBpfHwhKGkgaW4gZHQpKXJldHVybiBlLmVycm9yKCdUaGUgaXRlbSB0eXBlIGFyZ3VtZW50IG9mIFwiYXJyYXlcIiBtdXN0IGJlIG9uZSBvZiBzdHJpbmcsIG51bWJlciwgYm9vbGVhbicsMSk7cj1kdFtpXTt9ZWxzZSByPVE7aWYodC5sZW5ndGg+Myl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHRbMl18fHRbMl08MHx8dFsyXSE9PU1hdGguZmxvb3IodFsyXSkpcmV0dXJuIGUuZXJyb3IoJ1RoZSBsZW5ndGggYXJndW1lbnQgdG8gXCJhcnJheVwiIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIGxpdGVyYWwnLDIpO249dFsyXTt9dmFyIGE9ZXQocixuKSxvPWUucGFyc2UodFt0Lmxlbmd0aC0xXSx0Lmxlbmd0aC0xLFEpO3JldHVybiBvP25ldyBtdChhLG8pOm51bGx9LG10LnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmlucHV0LmV2YWx1YXRlKHQpO2lmKGl0KHRoaXMudHlwZSxwdChlKSkpdGhyb3cgbmV3IGN0KFwiRXhwZWN0ZWQgdmFsdWUgdG8gYmUgb2YgdHlwZSBcIitydCh0aGlzLnR5cGUpK1wiLCBidXQgZm91bmQgXCIrcnQocHQoZSkpK1wiIGluc3RlYWQuXCIpO3JldHVybiBlfSxtdC5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKHQpe3QodGhpcy5pbnB1dCk7fSxtdC5wcm90b3R5cGUucG9zc2libGVPdXRwdXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5wdXQucG9zc2libGVPdXRwdXRzKCl9LG10LnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgdD1bXCJhcnJheVwiXSxlPXRoaXMudHlwZS5pdGVtVHlwZTtpZihcInN0cmluZ1wiPT09ZS5raW5kfHxcIm51bWJlclwiPT09ZS5raW5kfHxcImJvb2xlYW5cIj09PWUua2luZCl7dC5wdXNoKGUua2luZCk7dmFyIHI9dGhpcy50eXBlLk47XCJudW1iZXJcIj09dHlwZW9mIHImJnQucHVzaChyKTt9cmV0dXJuIHQucHVzaCh0aGlzLmlucHV0LnNlcmlhbGl6ZSgpKSx0fTt2YXIgdnQ9e1widG8tbnVtYmVyXCI6RyxcInRvLWNvbG9yXCI6WX0sZ3Q9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmFyZ3M9ZTt9O2d0LnBhcnNlPWZ1bmN0aW9uKHQsZSl7aWYodC5sZW5ndGg8MilyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBhcmd1bWVudC5cIik7Zm9yKHZhciByPXRbMF0sbj12dFtyXSxpPVtdLGE9MTthPHQubGVuZ3RoO2ErKyl7dmFyIG89ZS5wYXJzZSh0W2FdLGEsUSk7aWYoIW8pcmV0dXJuIG51bGw7aS5wdXNoKG8pO31yZXR1cm4gbmV3IGd0KG4saSl9LGd0LnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih0KXtpZihcImNvbG9yXCI9PT10aGlzLnR5cGUua2luZCl7Zm9yKHZhciBlLHIsbj0wLGk9dGhpcy5hcmdzO248aS5sZW5ndGg7bis9MSl7aWYocj1udWxsLFwic3RyaW5nXCI9PXR5cGVvZihlPWlbbl0uZXZhbHVhdGUodCkpKXt2YXIgYT10LnBhcnNlQ29sb3IoZSk7aWYoYSlyZXR1cm4gYX1lbHNlIGlmKEFycmF5LmlzQXJyYXkoZSkmJiEocj1lLmxlbmd0aDwzfHxlLmxlbmd0aD40P1wiSW52YWxpZCByYmdhIHZhbHVlIFwiK0pTT04uc3RyaW5naWZ5KGUpK1wiOiBleHBlY3RlZCBhbiBhcnJheSBjb250YWluaW5nIGVpdGhlciB0aHJlZSBvciBmb3VyIG51bWVyaWMgdmFsdWVzLlwiOmx0KGVbMF0sZVsxXSxlWzJdLGVbM10pKSlyZXR1cm4gbmV3IG90KGVbMF0vMjU1LGVbMV0vMjU1LGVbMl0vMjU1LGVbM10pfXRocm93IG5ldyBjdChyfHxcIkNvdWxkIG5vdCBwYXJzZSBjb2xvciBmcm9tIHZhbHVlICdcIisoXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTpKU09OLnN0cmluZ2lmeShlKSkrXCInXCIpfWZvcih2YXIgbz1udWxsLHM9MCx1PXRoaXMuYXJncztzPHUubGVuZ3RoO3MrPTEpe2lmKG51bGwhPT0obz11W3NdLmV2YWx1YXRlKHQpKSl7dmFyIGw9TnVtYmVyKG8pO2lmKCFpc05hTihsKSlyZXR1cm4gbH19dGhyb3cgbmV3IGN0KFwiQ291bGQgbm90IGNvbnZlcnQgXCIrSlNPTi5zdHJpbmdpZnkobykrXCIgdG8gbnVtYmVyLlwiKX0sZ3QucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbih0KXt0aGlzLmFyZ3MuZm9yRWFjaCh0KTt9LGd0LnByb3RvdHlwZS5wb3NzaWJsZU91dHB1dHM9ZnVuY3Rpb24oKXtyZXR1cm4odD1bXSkuY29uY2F0LmFwcGx5KHQsdGhpcy5hcmdzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5wb3NzaWJsZU91dHB1dHMoKX0pKTt2YXIgdDt9LGd0LnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgdD1bXCJ0by1cIit0aGlzLnR5cGUua2luZF07cmV0dXJuIHRoaXMuZWFjaENoaWxkKGZ1bmN0aW9uKGUpe3QucHVzaChlLnNlcmlhbGl6ZSgpKTt9KSx0fTt2YXIgeHQ9W1wiVW5rbm93blwiLFwiUG9pbnRcIixcIkxpbmVTdHJpbmdcIixcIlBvbHlnb25cIl0sYnQ9ZnVuY3Rpb24oKXt0aGlzLl9wYXJzZUNvbG9yQ2FjaGU9e307fTtidC5wcm90b3R5cGUuaWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mZWF0dXJlJiZcImlkXCJpbiB0aGlzLmZlYXR1cmU/dGhpcy5mZWF0dXJlLmlkOm51bGx9LGJ0LnByb3RvdHlwZS5nZW9tZXRyeVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mZWF0dXJlP1wibnVtYmVyXCI9PXR5cGVvZiB0aGlzLmZlYXR1cmUudHlwZT94dFt0aGlzLmZlYXR1cmUudHlwZV06dGhpcy5mZWF0dXJlLnR5cGU6bnVsbH0sYnQucHJvdG90eXBlLnByb3BlcnRpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mZWF0dXJlJiZ0aGlzLmZlYXR1cmUucHJvcGVydGllc3x8e319LGJ0LnByb3RvdHlwZS5wYXJzZUNvbG9yPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3BhcnNlQ29sb3JDYWNoZVt0XTtyZXR1cm4gZXx8KGU9dGhpcy5fcGFyc2VDb2xvckNhY2hlW3RdPW90LnBhcnNlKHQpKSxlfTt2YXIgd3Q9ZnVuY3Rpb24odCxlLHIsbil7dGhpcy5uYW1lPXQsdGhpcy50eXBlPWUsdGhpcy5fZXZhbHVhdGU9cix0aGlzLmFyZ3M9bjt9O2Z1bmN0aW9uIF90KHQpe2lmKHQgaW5zdGFuY2VvZiB3dCl7aWYoXCJnZXRcIj09PXQubmFtZSYmMT09PXQuYXJncy5sZW5ndGgpcmV0dXJuITE7aWYoXCJmZWF0dXJlLXN0YXRlXCI9PT10Lm5hbWUpcmV0dXJuITE7aWYoXCJoYXNcIj09PXQubmFtZSYmMT09PXQuYXJncy5sZW5ndGgpcmV0dXJuITE7aWYoXCJwcm9wZXJ0aWVzXCI9PT10Lm5hbWV8fFwiZ2VvbWV0cnktdHlwZVwiPT09dC5uYW1lfHxcImlkXCI9PT10Lm5hbWUpcmV0dXJuITE7aWYoL15maWx0ZXItLy50ZXN0KHQubmFtZSkpcmV0dXJuITF9dmFyIGU9ITA7cmV0dXJuIHQuZWFjaENoaWxkKGZ1bmN0aW9uKHQpe2UmJiFfdCh0KSYmKGU9ITEpO30pLGV9ZnVuY3Rpb24gQXQodCl7aWYodCBpbnN0YW5jZW9mIHd0JiZcImZlYXR1cmUtc3RhdGVcIj09PXQubmFtZSlyZXR1cm4hMTt2YXIgZT0hMDtyZXR1cm4gdC5lYWNoQ2hpbGQoZnVuY3Rpb24odCl7ZSYmIUF0KHQpJiYoZT0hMSk7fSksZX1mdW5jdGlvbiBrdCh0LGUpe2lmKHQgaW5zdGFuY2VvZiB3dCYmZS5pbmRleE9mKHQubmFtZSk+PTApcmV0dXJuITE7dmFyIHI9ITA7cmV0dXJuIHQuZWFjaENoaWxkKGZ1bmN0aW9uKHQpe3ImJiFrdCh0LGUpJiYocj0hMSk7fSkscn13dC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2YWx1YXRlKHQsdGhpcy5hcmdzKX0sd3QucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbih0KXt0aGlzLmFyZ3MuZm9yRWFjaCh0KTt9LHd0LnByb3RvdHlwZS5wb3NzaWJsZU91dHB1dHM9ZnVuY3Rpb24oKXtyZXR1cm5bdm9pZCAwXX0sd3QucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3JldHVyblt0aGlzLm5hbWVdLmNvbmNhdCh0aGlzLmFyZ3MubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNlcmlhbGl6ZSgpfSkpfSx3dC5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciByPXRbMF0sbj13dC5kZWZpbml0aW9uc1tyXTtpZighbilyZXR1cm4gZS5lcnJvcignVW5rbm93biBleHByZXNzaW9uIFwiJytyKydcIi4gSWYgeW91IHdhbnRlZCBhIGxpdGVyYWwgYXJyYXksIHVzZSBbXCJsaXRlcmFsXCIsIFsuLi5dXS4nLDApO2Zvcih2YXIgaT1BcnJheS5pc0FycmF5KG4pP25bMF06bi50eXBlLGE9QXJyYXkuaXNBcnJheShuKT9bW25bMV0sblsyXV1dOm4ub3ZlcmxvYWRzLG89YS5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHI9ZVswXTtyZXR1cm4hQXJyYXkuaXNBcnJheShyKXx8ci5sZW5ndGg9PT10Lmxlbmd0aC0xfSkscz1bXSx1PTE7dTx0Lmxlbmd0aDt1Kyspe3ZhciBsPXRbdV0scD12b2lkIDA7aWYoMT09PW8ubGVuZ3RoKXt2YXIgaD1vWzBdWzBdO3A9QXJyYXkuaXNBcnJheShoKT9oW3UtMV06aC50eXBlO312YXIgYz1lLnBhcnNlKGwsMStzLmxlbmd0aCxwKTtpZighYylyZXR1cm4gbnVsbDtzLnB1c2goYyk7fWZvcih2YXIgZj1udWxsLHk9MCxkPW87eTxkLmxlbmd0aDt5Kz0xKXt2YXIgbT1kW3ldLHY9bVswXSxnPW1bMV07aWYoZj1uZXcgU3QoZS5yZWdpc3RyeSxlLnBhdGgsbnVsbCxlLnNjb3BlKSxBcnJheS5pc0FycmF5KHYpJiZ2Lmxlbmd0aCE9PXMubGVuZ3RoKWYuZXJyb3IoXCJFeHBlY3RlZCBcIit2Lmxlbmd0aCtcIiBhcmd1bWVudHMsIGJ1dCBmb3VuZCBcIitzLmxlbmd0aCtcIiBpbnN0ZWFkLlwiKTtlbHNle2Zvcih2YXIgeD0wO3g8cy5sZW5ndGg7eCsrKXt2YXIgYj1BcnJheS5pc0FycmF5KHYpP3ZbeF06di50eXBlLHc9c1t4XTtmLmNvbmNhdCh4KzEpLmNoZWNrU3VidHlwZShiLHcudHlwZSk7fWlmKDA9PT1mLmVycm9ycy5sZW5ndGgpcmV0dXJuIG5ldyB3dChyLGksZyxzKX19aWYoMT09PW8ubGVuZ3RoKWUuZXJyb3JzLnB1c2guYXBwbHkoZS5lcnJvcnMsZi5lcnJvcnMpO2Vsc2V7dmFyIF89KG8ubGVuZ3RoP286YSkubWFwKGZ1bmN0aW9uKHQpe3ZhciBlLHI9dFswXTtyZXR1cm4gZT1yLEFycmF5LmlzQXJyYXkoZSk/XCIoXCIrZS5tYXAocnQpLmpvaW4oXCIsIFwiKStcIilcIjpcIihcIitydChlLnR5cGUpK1wiLi4uKVwifSkuam9pbihcIiB8IFwiKSxBPXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBydCh0LnR5cGUpfSkuam9pbihcIiwgXCIpO2UuZXJyb3IoXCJFeHBlY3RlZCBhcmd1bWVudHMgb2YgdHlwZSBcIitfK1wiLCBidXQgZm91bmQgKFwiK0ErXCIpIGluc3RlYWQuXCIpO31yZXR1cm4gbnVsbH0sd3QucmVnaXN0ZXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gd3QuZGVmaW5pdGlvbnM9ZSxlKXRbcl09d3Q7fTt2YXIgenQ9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9ZS50eXBlLHRoaXMubmFtZT10LHRoaXMuYm91bmRFeHByZXNzaW9uPWU7fTt6dC5wYXJzZT1mdW5jdGlvbih0LGUpe2lmKDIhPT10Lmxlbmd0aHx8XCJzdHJpbmdcIiE9dHlwZW9mIHRbMV0pcmV0dXJuIGUuZXJyb3IoXCIndmFyJyBleHByZXNzaW9uIHJlcXVpcmVzIGV4YWN0bHkgb25lIHN0cmluZyBsaXRlcmFsIGFyZ3VtZW50LlwiKTt2YXIgcj10WzFdO3JldHVybiBlLnNjb3BlLmhhcyhyKT9uZXcgenQocixlLnNjb3BlLmdldChyKSk6ZS5lcnJvcignVW5rbm93biB2YXJpYWJsZSBcIicrcisnXCIuIE1ha2Ugc3VyZSBcIicrcisnXCIgaGFzIGJlZW4gYm91bmQgaW4gYW4gZW5jbG9zaW5nIFwibGV0XCIgZXhwcmVzc2lvbiBiZWZvcmUgdXNpbmcgaXQuJywxKX0senQucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmJvdW5kRXhwcmVzc2lvbi5ldmFsdWF0ZSh0KX0senQucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbigpe30senQucHJvdG90eXBlLnBvc3NpYmxlT3V0cHV0cz1mdW5jdGlvbigpe3JldHVyblt2b2lkIDBdfSx6dC5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuW1widmFyXCIsdGhpcy5uYW1lXX07dmFyIFN0PWZ1bmN0aW9uKHQsZSxyLG4saSl7dm9pZCAwPT09ZSYmKGU9W10pLHZvaWQgMD09PW4mJihuPW5ldyAkKSx2b2lkIDA9PT1pJiYoaT1bXSksdGhpcy5yZWdpc3RyeT10LHRoaXMucGF0aD1lLHRoaXMua2V5PWUubWFwKGZ1bmN0aW9uKHQpe3JldHVyblwiW1wiK3QrXCJdXCJ9KS5qb2luKFwiXCIpLHRoaXMuc2NvcGU9bix0aGlzLmVycm9ycz1pLHRoaXMuZXhwZWN0ZWRUeXBlPXI7fTtmdW5jdGlvbiBNdCh0LGUpe2Zvcih2YXIgcixuLGk9MCxhPXQubGVuZ3RoLTEsbz0wO2k8PWE7KXtpZihyPXRbbz1NYXRoLmZsb29yKChpK2EpLzIpXSxuPXRbbysxXSxlPT09cnx8ZT5yJiZlPG4pcmV0dXJuIG87aWYocjxlKWk9bysxO2Vsc2V7aWYoIShyPmUpKXRocm93IG5ldyBjdChcIklucHV0IGlzIG5vdCBhIG51bWJlci5cIik7YT1vLTE7fX1yZXR1cm4gTWF0aC5tYXgoby0xLDApfVN0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUscixuLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT17fSksZT90aGlzLmNvbmNhdChlLHIsbikuX3BhcnNlKHQsaSk6dGhpcy5fcGFyc2UodCxpKX0sU3QucHJvdG90eXBlLl9wYXJzZT1mdW5jdGlvbih0LGUpe2lmKG51bGwhPT10JiZcInN0cmluZ1wiIT10eXBlb2YgdCYmXCJib29sZWFuXCIhPXR5cGVvZiB0JiZcIm51bWJlclwiIT10eXBlb2YgdHx8KHQ9W1wibGl0ZXJhbFwiLHRdKSxBcnJheS5pc0FycmF5KHQpKXtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHRoaXMuZXJyb3IoJ0V4cGVjdGVkIGFuIGFycmF5IHdpdGggYXQgbGVhc3Qgb25lIGVsZW1lbnQuIElmIHlvdSB3YW50ZWQgYSBsaXRlcmFsIGFycmF5LCB1c2UgW1wibGl0ZXJhbFwiLCBbXV0uJyk7dmFyIHI9dFswXTtpZihcInN0cmluZ1wiIT10eXBlb2YgcilyZXR1cm4gdGhpcy5lcnJvcihcIkV4cHJlc3Npb24gbmFtZSBtdXN0IGJlIGEgc3RyaW5nLCBidXQgZm91bmQgXCIrdHlwZW9mIHIrJyBpbnN0ZWFkLiBJZiB5b3Ugd2FudGVkIGEgbGl0ZXJhbCBhcnJheSwgdXNlIFtcImxpdGVyYWxcIiwgWy4uLl1dLicsMCksbnVsbDt2YXIgbj10aGlzLnJlZ2lzdHJ5W3JdO2lmKG4pe3ZhciBpPW4ucGFyc2UodCx0aGlzKTtpZighaSlyZXR1cm4gbnVsbDtpZih0aGlzLmV4cGVjdGVkVHlwZSl7dmFyIGE9dGhpcy5leHBlY3RlZFR5cGUsbz1pLnR5cGU7aWYoXCJzdHJpbmdcIiE9PWEua2luZCYmXCJudW1iZXJcIiE9PWEua2luZCYmXCJib29sZWFuXCIhPT1hLmtpbmQmJlwib2JqZWN0XCIhPT1hLmtpbmR8fFwidmFsdWVcIiE9PW8ua2luZClpZihcImFycmF5XCI9PT1hLmtpbmQmJlwidmFsdWVcIj09PW8ua2luZCllLm9taXRUeXBlQW5ub3RhdGlvbnN8fChpPW5ldyBtdChhLGkpKTtlbHNlIGlmKFwiY29sb3JcIiE9PWEua2luZHx8XCJ2YWx1ZVwiIT09by5raW5kJiZcInN0cmluZ1wiIT09by5raW5kKXtpZih0aGlzLmNoZWNrU3VidHlwZSh0aGlzLmV4cGVjdGVkVHlwZSxpLnR5cGUpKXJldHVybiBudWxsfWVsc2UgZS5vbWl0VHlwZUFubm90YXRpb25zfHwoaT1uZXcgZ3QoYSxbaV0pKTtlbHNlIGUub21pdFR5cGVBbm5vdGF0aW9uc3x8KGk9bmV3IHl0KGEsW2ldKSk7fWlmKCEoaSBpbnN0YW5jZW9mIGh0KSYmZnVuY3Rpb24gdChlKXtpZihlIGluc3RhbmNlb2YgenQpcmV0dXJuIHQoZS5ib3VuZEV4cHJlc3Npb24pO2lmKGUgaW5zdGFuY2VvZiB3dCYmXCJlcnJvclwiPT09ZS5uYW1lKXJldHVybiExO2lmKGUgaW5zdGFuY2VvZiB1dClyZXR1cm4hMTt2YXIgcj1lIGluc3RhbmNlb2YgZ3R8fGUgaW5zdGFuY2VvZiB5dHx8ZSBpbnN0YW5jZW9mIG10O3ZhciBuPSEwO2UuZWFjaENoaWxkKGZ1bmN0aW9uKGUpe249cj9uJiZ0KGUpOm4mJmUgaW5zdGFuY2VvZiBodDt9KTtpZighbilyZXR1cm4hMTtyZXR1cm4gX3QoZSkmJmt0KGUsW1wiem9vbVwiLFwiaGVhdG1hcC1kZW5zaXR5XCIsXCJsaW5lLXByb2dyZXNzXCIsXCJpcy1zdXBwb3J0ZWQtc2NyaXB0XCJdKX0oaSkpe3ZhciBzPW5ldyBidDt0cnl7aT1uZXcgaHQoaS50eXBlLGkuZXZhbHVhdGUocykpO31jYXRjaCh0KXtyZXR1cm4gdGhpcy5lcnJvcih0Lm1lc3NhZ2UpLG51bGx9fXJldHVybiBpfXJldHVybiB0aGlzLmVycm9yKCdVbmtub3duIGV4cHJlc3Npb24gXCInK3IrJ1wiLiBJZiB5b3Ugd2FudGVkIGEgbGl0ZXJhbCBhcnJheSwgdXNlIFtcImxpdGVyYWxcIiwgWy4uLl1dLicsMCl9cmV0dXJuIHZvaWQgMD09PXQ/dGhpcy5lcnJvcihcIid1bmRlZmluZWQnIHZhbHVlIGludmFsaWQuIFVzZSBudWxsIGluc3RlYWQuXCIpOlwib2JqZWN0XCI9PXR5cGVvZiB0P3RoaXMuZXJyb3IoJ0JhcmUgb2JqZWN0cyBpbnZhbGlkLiBVc2UgW1wibGl0ZXJhbFwiLCB7Li4ufV0gaW5zdGVhZC4nKTp0aGlzLmVycm9yKFwiRXhwZWN0ZWQgYW4gYXJyYXksIGJ1dCBmb3VuZCBcIit0eXBlb2YgdCtcIiBpbnN0ZWFkLlwiKX0sU3QucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbih0LGUscil7dmFyIG49XCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5wYXRoLmNvbmNhdCh0KTp0aGlzLnBhdGgsaT1yP3RoaXMuc2NvcGUuY29uY2F0KHIpOnRoaXMuc2NvcGU7cmV0dXJuIG5ldyBTdCh0aGlzLnJlZ2lzdHJ5LG4sZXx8bnVsbCxpLHRoaXMuZXJyb3JzKX0sU3QucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxyPWFyZ3VtZW50cy5sZW5ndGgtMTtyLS0gPjA7KWVbcl09YXJndW1lbnRzW3IrMV07dmFyIG49XCJcIit0aGlzLmtleStlLm1hcChmdW5jdGlvbih0KXtyZXR1cm5cIltcIit0K1wiXVwifSkuam9pbihcIlwiKTt0aGlzLmVycm9ycy5wdXNoKG5ldyBYKG4sdCkpO30sU3QucHJvdG90eXBlLmNoZWNrU3VidHlwZT1mdW5jdGlvbih0LGUpe3ZhciByPWl0KHQsZSk7cmV0dXJuIHImJnRoaXMuZXJyb3Iocikscn07dmFyIEJ0PWZ1bmN0aW9uKHQsZSxyKXt0aGlzLnR5cGU9dCx0aGlzLmlucHV0PWUsdGhpcy5sYWJlbHM9W10sdGhpcy5vdXRwdXRzPVtdO2Zvcih2YXIgbj0wLGk9cjtuPGkubGVuZ3RoO24rPTEpe3ZhciBhPWlbbl0sbz1hWzBdLHM9YVsxXTt0aGlzLmxhYmVscy5wdXNoKG8pLHRoaXMub3V0cHV0cy5wdXNoKHMpO319O2Z1bmN0aW9uIFZ0KHQsZSxyKXtyZXR1cm4gdCooMS1yKStlKnJ9QnQucGFyc2U9ZnVuY3Rpb24odCxlKXt2YXIgcj10WzFdLG49dC5zbGljZSgyKTtpZih0Lmxlbmd0aC0xPDQpcmV0dXJuIGUuZXJyb3IoXCJFeHBlY3RlZCBhdCBsZWFzdCA0IGFyZ3VtZW50cywgYnV0IGZvdW5kIG9ubHkgXCIrKHQubGVuZ3RoLTEpK1wiLlwiKTtpZigodC5sZW5ndGgtMSklMiE9MClyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cy5cIik7aWYoIShyPWUucGFyc2UociwxLEcpKSlyZXR1cm4gbnVsbDt2YXIgaT1bXSxhPW51bGw7ZS5leHBlY3RlZFR5cGUmJlwidmFsdWVcIiE9PWUuZXhwZWN0ZWRUeXBlLmtpbmQmJihhPWUuZXhwZWN0ZWRUeXBlKSxuLnVuc2hpZnQoLTEvMCk7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKz0yKXt2YXIgcz1uW29dLHU9bltvKzFdLGw9bysxLHA9bysyO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBzKXJldHVybiBlLmVycm9yKCdJbnB1dC9vdXRwdXQgcGFpcnMgZm9yIFwic3RlcFwiIGV4cHJlc3Npb25zIG11c3QgYmUgZGVmaW5lZCB1c2luZyBsaXRlcmFsIG51bWVyaWMgdmFsdWVzIChub3QgY29tcHV0ZWQgZXhwcmVzc2lvbnMpIGZvciB0aGUgaW5wdXQgdmFsdWVzLicsbCk7aWYoaS5sZW5ndGgmJmlbaS5sZW5ndGgtMV1bMF0+PXMpcmV0dXJuIGUuZXJyb3IoJ0lucHV0L291dHB1dCBwYWlycyBmb3IgXCJzdGVwXCIgZXhwcmVzc2lvbnMgbXVzdCBiZSBhcnJhbmdlZCB3aXRoIGlucHV0IHZhbHVlcyBpbiBzdHJpY3RseSBhc2NlbmRpbmcgb3JkZXIuJyxsKTt2YXIgaD1lLnBhcnNlKHUscCxhKTtpZighaClyZXR1cm4gbnVsbDthPWF8fGgudHlwZSxpLnB1c2goW3MsaF0pO31yZXR1cm4gbmV3IEJ0KGEscixpKX0sQnQucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubGFiZWxzLHI9dGhpcy5vdXRwdXRzO2lmKDE9PT1lLmxlbmd0aClyZXR1cm4gclswXS5ldmFsdWF0ZSh0KTt2YXIgbj10aGlzLmlucHV0LmV2YWx1YXRlKHQpO2lmKG48PWVbMF0pcmV0dXJuIHJbMF0uZXZhbHVhdGUodCk7dmFyIGk9ZS5sZW5ndGg7cmV0dXJuIG4+PWVbaS0xXT9yW2ktMV0uZXZhbHVhdGUodCk6cltNdChlLG4pXS5ldmFsdWF0ZSh0KX0sQnQucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbih0KXt0KHRoaXMuaW5wdXQpO2Zvcih2YXIgZT0wLHI9dGhpcy5vdXRwdXRzO2U8ci5sZW5ndGg7ZSs9MSl7dChyW2VdKTt9fSxCdC5wcm90b3R5cGUucG9zc2libGVPdXRwdXRzPWZ1bmN0aW9uKCl7cmV0dXJuKHQ9W10pLmNvbmNhdC5hcHBseSh0LHRoaXMub3V0cHV0cy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zc2libGVPdXRwdXRzKCl9KSk7dmFyIHQ7fSxCdC5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtcInN0ZXBcIix0aGlzLmlucHV0LnNlcmlhbGl6ZSgpXSxlPTA7ZTx0aGlzLmxhYmVscy5sZW5ndGg7ZSsrKWU+MCYmdC5wdXNoKHRoaXMubGFiZWxzW2VdKSx0LnB1c2godGhpcy5vdXRwdXRzW2VdLnNlcmlhbGl6ZSgpKTtyZXR1cm4gdH07dmFyIEl0PU9iamVjdC5mcmVlemUoe251bWJlcjpWdCxjb2xvcjpmdW5jdGlvbih0LGUscil7cmV0dXJuIG5ldyBvdChWdCh0LnIsZS5yLHIpLFZ0KHQuZyxlLmcsciksVnQodC5iLGUuYixyKSxWdCh0LmEsZS5hLHIpKX0sYXJyYXk6ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0Lm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBWdCh0LGVbbl0scil9KX19KSxDdD1mdW5jdGlvbih0LGUscixuKXt0aGlzLnR5cGU9dCx0aGlzLmludGVycG9sYXRpb249ZSx0aGlzLmlucHV0PXIsdGhpcy5sYWJlbHM9W10sdGhpcy5vdXRwdXRzPVtdO2Zvcih2YXIgaT0wLGE9bjtpPGEubGVuZ3RoO2krPTEpe3ZhciBvPWFbaV0scz1vWzBdLHU9b1sxXTt0aGlzLmxhYmVscy5wdXNoKHMpLHRoaXMub3V0cHV0cy5wdXNoKHUpO319O2Z1bmN0aW9uIEV0KHQsZSxyLG4pe3ZhciBpPW4tcixhPXQtcjtyZXR1cm4gMD09PWk/MDoxPT09ZT9hL2k6KE1hdGgucG93KGUsYSktMSkvKE1hdGgucG93KGUsaSktMSl9Q3QuaW50ZXJwb2xhdGlvbkZhY3Rvcj1mdW5jdGlvbih0LGUscixuKXt2YXIgaT0wO2lmKFwiZXhwb25lbnRpYWxcIj09PXQubmFtZSlpPUV0KGUsdC5iYXNlLHIsbik7ZWxzZSBpZihcImxpbmVhclwiPT09dC5uYW1lKWk9RXQoZSwxLHIsbik7ZWxzZSBpZihcImN1YmljLWJlemllclwiPT09dC5uYW1lKXt2YXIgYT10LmNvbnRyb2xQb2ludHM7aT1uZXcgbChhWzBdLGFbMV0sYVsyXSxhWzNdKS5zb2x2ZShFdChlLDEscixuKSk7fXJldHVybiBpfSxDdC5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciByPXRbMV0sbj10WzJdLGk9dC5zbGljZSgzKTtpZighQXJyYXkuaXNBcnJheShyKXx8MD09PXIubGVuZ3RoKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYW4gaW50ZXJwb2xhdGlvbiB0eXBlIGV4cHJlc3Npb24uXCIsMSk7aWYoXCJsaW5lYXJcIj09PXJbMF0pcj17bmFtZTpcImxpbmVhclwifTtlbHNlIGlmKFwiZXhwb25lbnRpYWxcIj09PXJbMF0pe3ZhciBhPXJbMV07aWYoXCJudW1iZXJcIiE9dHlwZW9mIGEpcmV0dXJuIGUuZXJyb3IoXCJFeHBvbmVudGlhbCBpbnRlcnBvbGF0aW9uIHJlcXVpcmVzIGEgbnVtZXJpYyBiYXNlLlwiLDEsMSk7cj17bmFtZTpcImV4cG9uZW50aWFsXCIsYmFzZTphfTt9ZWxzZXtpZihcImN1YmljLWJlemllclwiIT09clswXSlyZXR1cm4gZS5lcnJvcihcIlVua25vd24gaW50ZXJwb2xhdGlvbiB0eXBlIFwiK1N0cmluZyhyWzBdKSwxLDApO3ZhciBvPXIuc2xpY2UoMSk7aWYoNCE9PW8ubGVuZ3RofHxvLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQ8MHx8dD4xfSkpcmV0dXJuIGUuZXJyb3IoXCJDdWJpYyBiZXppZXIgaW50ZXJwb2xhdGlvbiByZXF1aXJlcyBmb3VyIG51bWVyaWMgYXJndW1lbnRzIHdpdGggdmFsdWVzIGJldHdlZW4gMCBhbmQgMS5cIiwxKTtyPXtuYW1lOlwiY3ViaWMtYmV6aWVyXCIsY29udHJvbFBvaW50czpvfTt9aWYodC5sZW5ndGgtMTw0KXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYXQgbGVhc3QgNCBhcmd1bWVudHMsIGJ1dCBmb3VuZCBvbmx5IFwiKyh0Lmxlbmd0aC0xKStcIi5cIik7aWYoKHQubGVuZ3RoLTEpJTIhPTApcmV0dXJuIGUuZXJyb3IoXCJFeHBlY3RlZCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMuXCIpO2lmKCEobj1lLnBhcnNlKG4sMixHKSkpcmV0dXJuIG51bGw7dmFyIHM9W10sdT1udWxsO2UuZXhwZWN0ZWRUeXBlJiZcInZhbHVlXCIhPT1lLmV4cGVjdGVkVHlwZS5raW5kJiYodT1lLmV4cGVjdGVkVHlwZSk7Zm9yKHZhciBsPTA7bDxpLmxlbmd0aDtsKz0yKXt2YXIgcD1pW2xdLGg9aVtsKzFdLGM9bCszLGY9bCs0O2lmKFwibnVtYmVyXCIhPXR5cGVvZiBwKXJldHVybiBlLmVycm9yKCdJbnB1dC9vdXRwdXQgcGFpcnMgZm9yIFwiaW50ZXJwb2xhdGVcIiBleHByZXNzaW9ucyBtdXN0IGJlIGRlZmluZWQgdXNpbmcgbGl0ZXJhbCBudW1lcmljIHZhbHVlcyAobm90IGNvbXB1dGVkIGV4cHJlc3Npb25zKSBmb3IgdGhlIGlucHV0IHZhbHVlcy4nLGMpO2lmKHMubGVuZ3RoJiZzW3MubGVuZ3RoLTFdWzBdPj1wKXJldHVybiBlLmVycm9yKCdJbnB1dC9vdXRwdXQgcGFpcnMgZm9yIFwiaW50ZXJwb2xhdGVcIiBleHByZXNzaW9ucyBtdXN0IGJlIGFycmFuZ2VkIHdpdGggaW5wdXQgdmFsdWVzIGluIHN0cmljdGx5IGFzY2VuZGluZyBvcmRlci4nLGMpO3ZhciB5PWUucGFyc2UoaCxmLHUpO2lmKCF5KXJldHVybiBudWxsO3U9dXx8eS50eXBlLHMucHVzaChbcCx5XSk7fXJldHVyblwibnVtYmVyXCI9PT11LmtpbmR8fFwiY29sb3JcIj09PXUua2luZHx8XCJhcnJheVwiPT09dS5raW5kJiZcIm51bWJlclwiPT09dS5pdGVtVHlwZS5raW5kJiZcIm51bWJlclwiPT10eXBlb2YgdS5OP25ldyBDdCh1LHIsbixzKTplLmVycm9yKFwiVHlwZSBcIitydCh1KStcIiBpcyBub3QgaW50ZXJwb2xhdGFibGUuXCIpfSxDdC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sYWJlbHMscj10aGlzLm91dHB1dHM7aWYoMT09PWUubGVuZ3RoKXJldHVybiByWzBdLmV2YWx1YXRlKHQpO3ZhciBuPXRoaXMuaW5wdXQuZXZhbHVhdGUodCk7aWYobjw9ZVswXSlyZXR1cm4gclswXS5ldmFsdWF0ZSh0KTt2YXIgaT1lLmxlbmd0aDtpZihuPj1lW2ktMV0pcmV0dXJuIHJbaS0xXS5ldmFsdWF0ZSh0KTt2YXIgYT1NdChlLG4pLG89ZVthXSxzPWVbYSsxXSx1PUN0LmludGVycG9sYXRpb25GYWN0b3IodGhpcy5pbnRlcnBvbGF0aW9uLG4sbyxzKSxsPXJbYV0uZXZhbHVhdGUodCkscD1yW2ErMV0uZXZhbHVhdGUodCk7cmV0dXJuIEl0W3RoaXMudHlwZS5raW5kLnRvTG93ZXJDYXNlKCldKGwscCx1KX0sQ3QucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbih0KXt0KHRoaXMuaW5wdXQpO2Zvcih2YXIgZT0wLHI9dGhpcy5vdXRwdXRzO2U8ci5sZW5ndGg7ZSs9MSl7dChyW2VdKTt9fSxDdC5wcm90b3R5cGUucG9zc2libGVPdXRwdXRzPWZ1bmN0aW9uKCl7cmV0dXJuKHQ9W10pLmNvbmNhdC5hcHBseSh0LHRoaXMub3V0cHV0cy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zc2libGVPdXRwdXRzKCl9KSk7dmFyIHQ7fSxDdC5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtcImludGVycG9sYXRlXCIsXCJsaW5lYXJcIj09PXRoaXMuaW50ZXJwb2xhdGlvbi5uYW1lP1tcImxpbmVhclwiXTpcImV4cG9uZW50aWFsXCI9PT10aGlzLmludGVycG9sYXRpb24ubmFtZT8xPT09dGhpcy5pbnRlcnBvbGF0aW9uLmJhc2U/W1wibGluZWFyXCJdOltcImV4cG9uZW50aWFsXCIsdGhpcy5pbnRlcnBvbGF0aW9uLmJhc2VdOltcImN1YmljLWJlemllclwiXS5jb25jYXQodGhpcy5pbnRlcnBvbGF0aW9uLmNvbnRyb2xQb2ludHMpLHRoaXMuaW5wdXQuc2VyaWFsaXplKCldLGU9MDtlPHRoaXMubGFiZWxzLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMubGFiZWxzW2VdLHRoaXMub3V0cHV0c1tlXS5zZXJpYWxpemUoKSk7cmV0dXJuIHR9O3ZhciBUdD1mdW5jdGlvbih0LGUpe3RoaXMudHlwZT10LHRoaXMuYXJncz1lO307VHQucGFyc2U9ZnVuY3Rpb24odCxlKXtpZih0Lmxlbmd0aDwyKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWN0ZWQgYXQgbGVhc3Qgb25lIGFyZ3VtZW50LlwiKTt2YXIgcj1udWxsLG49ZS5leHBlY3RlZFR5cGU7biYmXCJ2YWx1ZVwiIT09bi5raW5kJiYocj1uKTtmb3IodmFyIGk9W10sYT0wLG89dC5zbGljZSgxKTthPG8ubGVuZ3RoO2ErPTEpe3ZhciBzPW9bYV0sdT1lLnBhcnNlKHMsMStpLmxlbmd0aCxyLHZvaWQgMCx7b21pdFR5cGVBbm5vdGF0aW9uczohMH0pO2lmKCF1KXJldHVybiBudWxsO3I9cnx8dS50eXBlLGkucHVzaCh1KTt9dmFyIGw9biYmaS5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiBpdChuLHQudHlwZSl9KTtyZXR1cm4gbmV3IFR0KGw/UTpyLGkpfSxUdC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW51bGwscj0wLG49dGhpcy5hcmdzO3I8bi5sZW5ndGg7cis9MSl7aWYobnVsbCE9PShlPW5bcl0uZXZhbHVhdGUodCkpKWJyZWFrfXJldHVybiBlfSxUdC5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKHQpe3RoaXMuYXJncy5mb3JFYWNoKHQpO30sVHQucHJvdG90eXBlLnBvc3NpYmxlT3V0cHV0cz1mdW5jdGlvbigpe3JldHVybih0PVtdKS5jb25jYXQuYXBwbHkodCx0aGlzLmFyZ3MubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnBvc3NpYmxlT3V0cHV0cygpfSkpO3ZhciB0O30sVHQucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciB0PVtcImNvYWxlc2NlXCJdO3JldHVybiB0aGlzLmVhY2hDaGlsZChmdW5jdGlvbihlKXt0LnB1c2goZS5zZXJpYWxpemUoKSk7fSksdH07dmFyIFB0PWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPWUudHlwZSx0aGlzLmJpbmRpbmdzPVtdLmNvbmNhdCh0KSx0aGlzLnJlc3VsdD1lO307UHQucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJlc3VsdC5ldmFsdWF0ZSh0KX0sUHQucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXRoaXMuYmluZGluZ3M7ZTxyLmxlbmd0aDtlKz0xKXt0KHJbZV1bMV0pO310KHRoaXMucmVzdWx0KTt9LFB0LnBhcnNlPWZ1bmN0aW9uKHQsZSl7aWYodC5sZW5ndGg8NClyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIGF0IGxlYXN0IDMgYXJndW1lbnRzLCBidXQgZm91bmQgXCIrKHQubGVuZ3RoLTEpK1wiIGluc3RlYWQuXCIpO2Zvcih2YXIgcj1bXSxuPTE7bjx0Lmxlbmd0aC0xO24rPTIpe3ZhciBpPXRbbl07aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGkpcmV0dXJuIGUuZXJyb3IoXCJFeHBlY3RlZCBzdHJpbmcsIGJ1dCBmb3VuZCBcIit0eXBlb2YgaStcIiBpbnN0ZWFkLlwiLG4pO2lmKC9bXmEtekEtWjAtOV9dLy50ZXN0KGkpKXJldHVybiBlLmVycm9yKFwiVmFyaWFibGUgbmFtZXMgbXVzdCBjb250YWluIG9ubHkgYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgb3IgJ18nLlwiLG4pO3ZhciBhPWUucGFyc2UodFtuKzFdLG4rMSk7aWYoIWEpcmV0dXJuIG51bGw7ci5wdXNoKFtpLGFdKTt9dmFyIG89ZS5wYXJzZSh0W3QubGVuZ3RoLTFdLHQubGVuZ3RoLTEsdm9pZCAwLHIpO3JldHVybiBvP25ldyBQdChyLG8pOm51bGx9LFB0LnByb3RvdHlwZS5wb3NzaWJsZU91dHB1dHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXN1bHQucG9zc2libGVPdXRwdXRzKCl9LFB0LnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W1wibGV0XCJdLGU9MCxyPXRoaXMuYmluZGluZ3M7ZTxyLmxlbmd0aDtlKz0xKXt2YXIgbj1yW2VdLGk9blswXSxhPW5bMV07dC5wdXNoKGksYS5zZXJpYWxpemUoKSk7fXJldHVybiB0LnB1c2godGhpcy5yZXN1bHQuc2VyaWFsaXplKCkpLHR9O3ZhciBGdD1mdW5jdGlvbih0LGUscil7dGhpcy50eXBlPXQsdGhpcy5pbmRleD1lLHRoaXMuaW5wdXQ9cjt9O0Z0LnBhcnNlPWZ1bmN0aW9uKHQsZSl7aWYoMyE9PXQubGVuZ3RoKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgMiBhcmd1bWVudHMsIGJ1dCBmb3VuZCBcIisodC5sZW5ndGgtMSkrXCIgaW5zdGVhZC5cIik7dmFyIHI9ZS5wYXJzZSh0WzFdLDEsRyksbj1lLnBhcnNlKHRbMl0sMixldChlLmV4cGVjdGVkVHlwZXx8USkpO2lmKCFyfHwhbilyZXR1cm4gbnVsbDt2YXIgaT1uLnR5cGU7cmV0dXJuIG5ldyBGdChpLml0ZW1UeXBlLHIsbil9LEZ0LnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmluZGV4LmV2YWx1YXRlKHQpLHI9dGhpcy5pbnB1dC5ldmFsdWF0ZSh0KTtpZihlPDApdGhyb3cgbmV3IGN0KFwiQXJyYXkgaW5kZXggb3V0IG9mIGJvdW5kczogXCIrZStcIiA8IDAuXCIpO2lmKGU+PXIubGVuZ3RoKXRocm93IG5ldyBjdChcIkFycmF5IGluZGV4IG91dCBvZiBib3VuZHM6IFwiK2UrXCIgPiBcIisoci5sZW5ndGgtMSkrXCIuXCIpO2lmKGUhPT1NYXRoLmZsb29yKGUpKXRocm93IG5ldyBjdChcIkFycmF5IGluZGV4IG11c3QgYmUgYW4gaW50ZWdlciwgYnV0IGZvdW5kIFwiK2UrXCIgaW5zdGVhZC5cIik7cmV0dXJuIHJbZV19LEZ0LnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24odCl7dCh0aGlzLmluZGV4KSx0KHRoaXMuaW5wdXQpO30sRnQucHJvdG90eXBlLnBvc3NpYmxlT3V0cHV0cz1mdW5jdGlvbigpe3JldHVyblt2b2lkIDBdfSxGdC5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuW1wiYXRcIix0aGlzLmluZGV4LnNlcmlhbGl6ZSgpLHRoaXMuaW5wdXQuc2VyaWFsaXplKCldfTt2YXIgTHQ9ZnVuY3Rpb24odCxlLHIsbixpLGEpe3RoaXMuaW5wdXRUeXBlPXQsdGhpcy50eXBlPWUsdGhpcy5pbnB1dD1yLHRoaXMuY2FzZXM9bix0aGlzLm91dHB1dHM9aSx0aGlzLm90aGVyd2lzZT1hO307THQucGFyc2U9ZnVuY3Rpb24odCxlKXtpZih0Lmxlbmd0aDw1KXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYXQgbGVhc3QgNCBhcmd1bWVudHMsIGJ1dCBmb3VuZCBvbmx5IFwiKyh0Lmxlbmd0aC0xKStcIi5cIik7aWYodC5sZW5ndGglMiE9MSlyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cy5cIik7dmFyIHIsbjtlLmV4cGVjdGVkVHlwZSYmXCJ2YWx1ZVwiIT09ZS5leHBlY3RlZFR5cGUua2luZCYmKG49ZS5leHBlY3RlZFR5cGUpO2Zvcih2YXIgaT17fSxhPVtdLG89MjtvPHQubGVuZ3RoLTE7bys9Mil7dmFyIHM9dFtvXSx1PXRbbysxXTtBcnJheS5pc0FycmF5KHMpfHwocz1bc10pO3ZhciBsPWUuY29uY2F0KG8pO2lmKDA9PT1zLmxlbmd0aClyZXR1cm4gbC5lcnJvcihcIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBicmFuY2ggbGFiZWwuXCIpO2Zvcih2YXIgcD0wLGg9cztwPGgubGVuZ3RoO3ArPTEpe3ZhciBjPWhbcF07aWYoXCJudW1iZXJcIiE9dHlwZW9mIGMmJlwic3RyaW5nXCIhPXR5cGVvZiBjKXJldHVybiBsLmVycm9yKFwiQnJhbmNoIGxhYmVscyBtdXN0IGJlIG51bWJlcnMgb3Igc3RyaW5ncy5cIik7aWYoXCJudW1iZXJcIj09dHlwZW9mIGMmJk1hdGguYWJzKGMpPk51bWJlci5NQVhfU0FGRV9JTlRFR0VSKXJldHVybiBsLmVycm9yKFwiQnJhbmNoIGxhYmVscyBtdXN0IGJlIGludGVnZXJzIG5vIGxhcmdlciB0aGFuIFwiK051bWJlci5NQVhfU0FGRV9JTlRFR0VSK1wiLlwiKTtpZihcIm51bWJlclwiPT10eXBlb2YgYyYmTWF0aC5mbG9vcihjKSE9PWMpcmV0dXJuIGwuZXJyb3IoXCJOdW1lcmljIGJyYW5jaCBsYWJlbHMgbXVzdCBiZSBpbnRlZ2VyIHZhbHVlcy5cIik7aWYocil7aWYobC5jaGVja1N1YnR5cGUocixwdChjKSkpcmV0dXJuIG51bGx9ZWxzZSByPXB0KGMpO2lmKHZvaWQgMCE9PWlbU3RyaW5nKGMpXSlyZXR1cm4gbC5lcnJvcihcIkJyYW5jaCBsYWJlbHMgbXVzdCBiZSB1bmlxdWUuXCIpO2lbU3RyaW5nKGMpXT1hLmxlbmd0aDt9dmFyIGY9ZS5wYXJzZSh1LG8sbik7aWYoIWYpcmV0dXJuIG51bGw7bj1ufHxmLnR5cGUsYS5wdXNoKGYpO312YXIgeT1lLnBhcnNlKHRbMV0sMSxRKTtpZigheSlyZXR1cm4gbnVsbDt2YXIgZD1lLnBhcnNlKHRbdC5sZW5ndGgtMV0sdC5sZW5ndGgtMSxuKTtyZXR1cm4gZD9cInZhbHVlXCIhPT15LnR5cGUua2luZCYmZS5jb25jYXQoMSkuY2hlY2tTdWJ0eXBlKHIseS50eXBlKT9udWxsOm5ldyBMdChyLG4seSxpLGEsZCk6bnVsbH0sTHQucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaW5wdXQuZXZhbHVhdGUodCk7cmV0dXJuKHB0KGUpPT09dGhpcy5pbnB1dFR5cGUmJnRoaXMub3V0cHV0c1t0aGlzLmNhc2VzW2VdXXx8dGhpcy5vdGhlcndpc2UpLmV2YWx1YXRlKHQpfSxMdC5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKHQpe3QodGhpcy5pbnB1dCksdGhpcy5vdXRwdXRzLmZvckVhY2godCksdCh0aGlzLm90aGVyd2lzZSk7fSxMdC5wcm90b3R5cGUucG9zc2libGVPdXRwdXRzPWZ1bmN0aW9uKCl7cmV0dXJuKHQ9W10pLmNvbmNhdC5hcHBseSh0LHRoaXMub3V0cHV0cy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zc2libGVPdXRwdXRzKCl9KSkuY29uY2F0KHRoaXMub3RoZXJ3aXNlLnBvc3NpYmxlT3V0cHV0cygpKTt2YXIgdDt9LEx0LnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPVtcIm1hdGNoXCIsdGhpcy5pbnB1dC5zZXJpYWxpemUoKV0scj1bXSxuPXt9LGk9MCxhPU9iamVjdC5rZXlzKHRoaXMuY2FzZXMpLnNvcnQoKTtpPGEubGVuZ3RoO2krPTEpe3ZhciBvPWFbaV0scz1uW3QuY2FzZXNbb11dO3ZvaWQgMD09PXM/KG5bdC5jYXNlc1tvXV09ci5sZW5ndGgsci5wdXNoKFt0LmNhc2VzW29dLFtvXV0pKTpyW3NdWzFdLnB1c2gobyk7fWZvcih2YXIgdT1mdW5jdGlvbihlKXtyZXR1cm5cIm51bWJlclwiPT09dC5pbnB1dFR5cGUua2luZD9OdW1iZXIoZSk6ZX0sbD0wLHA9cjtsPHAubGVuZ3RoO2wrPTEpe3ZhciBoPXBbbF0sYz1oWzBdLGY9aFsxXTsxPT09Zi5sZW5ndGg/ZS5wdXNoKHUoZlswXSkpOmUucHVzaChmLm1hcCh1KSksZS5wdXNoKHQub3V0cHV0c1tjXS5zZXJpYWxpemUoKSk7fXJldHVybiBlLnB1c2godGhpcy5vdGhlcndpc2Uuc2VyaWFsaXplKCkpLGV9O3ZhciBPdD1mdW5jdGlvbih0LGUscil7dGhpcy50eXBlPXQsdGhpcy5icmFuY2hlcz1lLHRoaXMub3RoZXJ3aXNlPXI7fTtmdW5jdGlvbiBEdCh0KXtyZXR1cm5cInN0cmluZ1wiPT09dC5raW5kfHxcIm51bWJlclwiPT09dC5raW5kfHxcImJvb2xlYW5cIj09PXQua2luZHx8XCJudWxsXCI9PT10LmtpbmR9ZnVuY3Rpb24gcXQodCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiByKHQsZSxyKXt0aGlzLnR5cGU9Syx0aGlzLmxocz10LHRoaXMucmhzPWUsdGhpcy5jb2xsYXRvcj1yO31yZXR1cm4gci5wYXJzZT1mdW5jdGlvbih0LGUpe2lmKDMhPT10Lmxlbmd0aCYmNCE9PXQubGVuZ3RoKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgdHdvIG9yIHRocmVlIGFyZ3VtZW50cy5cIik7dmFyIG49ZS5wYXJzZSh0WzFdLDEsUSk7aWYoIW4pcmV0dXJuIG51bGw7dmFyIGk9ZS5wYXJzZSh0WzJdLDIsUSk7aWYoIWkpcmV0dXJuIG51bGw7aWYoIUR0KG4udHlwZSkmJiFEdChpLnR5cGUpKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYXQgbGVhc3Qgb25lIGFyZ3VtZW50IHRvIGJlIGEgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9yIG51bGwsIGJ1dCBmb3VuZCAoXCIrcnQobi50eXBlKStcIiwgXCIrcnQoaS50eXBlKStcIikgaW5zdGVhZC5cIik7aWYobi50eXBlLmtpbmQhPT1pLnR5cGUua2luZCYmXCJ2YWx1ZVwiIT09bi50eXBlLmtpbmQmJlwidmFsdWVcIiE9PWkudHlwZS5raW5kKXJldHVybiBlLmVycm9yKFwiQ2Fubm90IGNvbXBhcmUgXCIrcnQobi50eXBlKStcIiBhbmQgXCIrcnQoaS50eXBlKStcIi5cIik7dmFyIGE9bnVsbDtpZig0PT09dC5sZW5ndGgpe2lmKFwic3RyaW5nXCIhPT1uLnR5cGUua2luZCYmXCJzdHJpbmdcIiE9PWkudHlwZS5raW5kKXJldHVybiBlLmVycm9yKFwiQ2Fubm90IHVzZSBjb2xsYXRvciB0byBjb21wYXJlIG5vbi1zdHJpbmcgdHlwZXMuXCIpO2lmKCEoYT1lLnBhcnNlKHRbM10sMyx0dCkpKXJldHVybiBudWxsfXJldHVybiBuZXcgcihuLGksYSl9LHIucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuY29sbGF0b3I/MD09PXRoaXMuY29sbGF0b3IuZXZhbHVhdGUodCkuY29tcGFyZSh0aGlzLmxocy5ldmFsdWF0ZSh0KSx0aGlzLnJocy5ldmFsdWF0ZSh0KSk6dGhpcy5saHMuZXZhbHVhdGUodCk9PT10aGlzLnJocy5ldmFsdWF0ZSh0KTtyZXR1cm4gZT8hcjpyfSxyLnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24odCl7dCh0aGlzLmxocyksdCh0aGlzLnJocyksdGhpcy5jb2xsYXRvciYmdCh0aGlzLmNvbGxhdG9yKTt9LHIucHJvdG90eXBlLnBvc3NpYmxlT3V0cHV0cz1mdW5jdGlvbigpe3JldHVyblshMCwhMV19LHIucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciBlPVt0XTtyZXR1cm4gdGhpcy5lYWNoQ2hpbGQoZnVuY3Rpb24odCl7ZS5wdXNoKHQuc2VyaWFsaXplKCkpO30pLGV9LHJ9KCl9T3QucGFyc2U9ZnVuY3Rpb24odCxlKXtpZih0Lmxlbmd0aDw0KXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYXQgbGVhc3QgMyBhcmd1bWVudHMsIGJ1dCBmb3VuZCBvbmx5IFwiKyh0Lmxlbmd0aC0xKStcIi5cIik7aWYodC5sZW5ndGglMiE9MClyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIGFuIG9kZCBudW1iZXIgb2YgYXJndW1lbnRzLlwiKTt2YXIgcjtlLmV4cGVjdGVkVHlwZSYmXCJ2YWx1ZVwiIT09ZS5leHBlY3RlZFR5cGUua2luZCYmKHI9ZS5leHBlY3RlZFR5cGUpO2Zvcih2YXIgbj1bXSxpPTE7aTx0Lmxlbmd0aC0xO2krPTIpe3ZhciBhPWUucGFyc2UodFtpXSxpLEspO2lmKCFhKXJldHVybiBudWxsO3ZhciBvPWUucGFyc2UodFtpKzFdLGkrMSxyKTtpZighbylyZXR1cm4gbnVsbDtuLnB1c2goW2Esb10pLHI9cnx8by50eXBlO312YXIgcz1lLnBhcnNlKHRbdC5sZW5ndGgtMV0sdC5sZW5ndGgtMSxyKTtyZXR1cm4gcz9uZXcgT3QocixuLHMpOm51bGx9LE90LnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXRoaXMuYnJhbmNoZXM7ZTxyLmxlbmd0aDtlKz0xKXt2YXIgbj1yW2VdLGk9blswXSxhPW5bMV07aWYoaS5ldmFsdWF0ZSh0KSlyZXR1cm4gYS5ldmFsdWF0ZSh0KX1yZXR1cm4gdGhpcy5vdGhlcndpc2UuZXZhbHVhdGUodCl9LE90LnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj10aGlzLmJyYW5jaGVzO2U8ci5sZW5ndGg7ZSs9MSl7dmFyIG49cltlXSxpPW5bMF0sYT1uWzFdO3QoaSksdChhKTt9dCh0aGlzLm90aGVyd2lzZSk7fSxPdC5wcm90b3R5cGUucG9zc2libGVPdXRwdXRzPWZ1bmN0aW9uKCl7cmV0dXJuKHQ9W10pLmNvbmNhdC5hcHBseSh0LHRoaXMuYnJhbmNoZXMubWFwKGZ1bmN0aW9uKHQpe3RbMF07cmV0dXJuIHRbMV0ucG9zc2libGVPdXRwdXRzKCl9KSkuY29uY2F0KHRoaXMub3RoZXJ3aXNlLnBvc3NpYmxlT3V0cHV0cygpKTt2YXIgdDt9LE90LnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgdD1bXCJjYXNlXCJdO3JldHVybiB0aGlzLmVhY2hDaGlsZChmdW5jdGlvbihlKXt0LnB1c2goZS5zZXJpYWxpemUoKSk7fSksdH07dmFyIGp0PXF0KFwiPT1cIiwhMSksUnQ9cXQoXCIhPVwiLCEwKSxVdD1mdW5jdGlvbih0KXt0aGlzLnR5cGU9Ryx0aGlzLmlucHV0PXQ7fTtVdC5wYXJzZT1mdW5jdGlvbih0LGUpe2lmKDIhPT10Lmxlbmd0aClyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIDEgYXJndW1lbnQsIGJ1dCBmb3VuZCBcIisodC5sZW5ndGgtMSkrXCIgaW5zdGVhZC5cIik7dmFyIHI9ZS5wYXJzZSh0WzFdLDEpO3JldHVybiByP1wiYXJyYXlcIiE9PXIudHlwZS5raW5kJiZcInN0cmluZ1wiIT09ci50eXBlLmtpbmQmJlwidmFsdWVcIiE9PXIudHlwZS5raW5kP2UuZXJyb3IoXCJFeHBlY3RlZCBhcmd1bWVudCBvZiB0eXBlIHN0cmluZyBvciBhcnJheSwgYnV0IGZvdW5kIFwiK3J0KHIudHlwZSkrXCIgaW5zdGVhZC5cIik6bmV3IFV0KHIpOm51bGx9LFV0LnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmlucHV0LmV2YWx1YXRlKHQpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBlLmxlbmd0aDtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlLmxlbmd0aDt0aHJvdyBuZXcgY3QoXCJFeHBlY3RlZCB2YWx1ZSB0byBiZSBvZiB0eXBlIHN0cmluZyBvciBhcnJheSwgYnV0IGZvdW5kIFwiK3J0KHB0KGUpKStcIiBpbnN0ZWFkLlwiKX0sVXQucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbih0KXt0KHRoaXMuaW5wdXQpO30sVXQucHJvdG90eXBlLnBvc3NpYmxlT3V0cHV0cz1mdW5jdGlvbigpe3JldHVyblt2b2lkIDBdfSxVdC5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIHQ9W1wibGVuZ3RoXCJdO3JldHVybiB0aGlzLmVhY2hDaGlsZChmdW5jdGlvbihlKXt0LnB1c2goZS5zZXJpYWxpemUoKSk7fSksdH07dmFyIE50PXtcIj09XCI6anQsXCIhPVwiOlJ0LGFycmF5Om10LGF0OkZ0LGJvb2xlYW46eXQsY2FzZTpPdCxjb2FsZXNjZTpUdCxjb2xsYXRvcjp1dCxpbnRlcnBvbGF0ZTpDdCxsZW5ndGg6VXQsbGV0OlB0LGxpdGVyYWw6aHQsbWF0Y2g6THQsbnVtYmVyOnl0LG9iamVjdDp5dCxzdGVwOkJ0LHN0cmluZzp5dCxcInRvLWNvbG9yXCI6Z3QsXCJ0by1udW1iZXJcIjpndCx2YXI6enR9O2Z1bmN0aW9uIFp0KHQsZSl7dmFyIHI9ZVswXSxuPWVbMV0saT1lWzJdLGE9ZVszXTtyPXIuZXZhbHVhdGUodCksbj1uLmV2YWx1YXRlKHQpLGk9aS5ldmFsdWF0ZSh0KTt2YXIgbz1hP2EuZXZhbHVhdGUodCk6MSxzPWx0KHIsbixpLG8pO2lmKHMpdGhyb3cgbmV3IGN0KHMpO3JldHVybiBuZXcgb3Qoci8yNTUqbyxuLzI1NSpvLGkvMjU1Km8sbyl9ZnVuY3Rpb24gWHQodCxlKXtyZXR1cm4gdCBpbiBlfWZ1bmN0aW9uICR0KHQsZSl7dmFyIHI9ZVt0XTtyZXR1cm4gdm9pZCAwPT09cj9udWxsOnJ9ZnVuY3Rpb24gSnQodCxlKXt2YXIgcj1lWzBdLG49ZVsxXTtyZXR1cm4gci5ldmFsdWF0ZSh0KTxuLmV2YWx1YXRlKHQpfWZ1bmN0aW9uIEd0KHQsZSl7dmFyIHI9ZVswXSxuPWVbMV07cmV0dXJuIHIuZXZhbHVhdGUodCk+bi5ldmFsdWF0ZSh0KX1mdW5jdGlvbiBIdCh0LGUpe3ZhciByPWVbMF0sbj1lWzFdO3JldHVybiByLmV2YWx1YXRlKHQpPD1uLmV2YWx1YXRlKHQpfWZ1bmN0aW9uIEt0KHQsZSl7dmFyIHI9ZVswXSxuPWVbMV07cmV0dXJuIHIuZXZhbHVhdGUodCk+PW4uZXZhbHVhdGUodCl9ZnVuY3Rpb24gWXQodCl7cmV0dXJue3R5cGU6dH19ZnVuY3Rpb24gV3QodCl7cmV0dXJue3Jlc3VsdDpcInN1Y2Nlc3NcIix2YWx1ZTp0fX1mdW5jdGlvbiBRdCh0KXtyZXR1cm57cmVzdWx0OlwiZXJyb3JcIix2YWx1ZTp0fX1mdW5jdGlvbiB0ZSh0KXtyZXR1cm5cImRhdGEtZHJpdmVuXCI9PT10W1wicHJvcGVydHktdHlwZVwiXXx8XCJjcm9zcy1mYWRlZC1kYXRhLWRyaXZlblwiPT09dFtcInByb3BlcnR5LXR5cGVcIl19ZnVuY3Rpb24gZWUodCl7cmV0dXJuISF0LmV4cHJlc3Npb24mJnQuZXhwcmVzc2lvbi5wYXJhbWV0ZXJzLmluZGV4T2YoXCJ6b29tXCIpPi0xfWZ1bmN0aW9uIHJlKHQpe3JldHVybiEhdC5leHByZXNzaW9uJiZ0LmV4cHJlc3Npb24uaW50ZXJwb2xhdGVkfXd0LnJlZ2lzdGVyKE50LHtlcnJvcjpbe2tpbmQ6XCJlcnJvclwifSxbSF0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdO3Rocm93IG5ldyBjdChyLmV2YWx1YXRlKHQpKX1dLHR5cGVvZjpbSCxbUV0sZnVuY3Rpb24odCxlKXtyZXR1cm4gcnQocHQoZVswXS5ldmFsdWF0ZSh0KSkpfV0sXCJ0by1zdHJpbmdcIjpbSCxbUV0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49dHlwZW9mKHI9ci5ldmFsdWF0ZSh0KSk7cmV0dXJuIG51bGw9PT1yP1wiXCI6XCJzdHJpbmdcIj09PW58fFwibnVtYmVyXCI9PT1ufHxcImJvb2xlYW5cIj09PW4/U3RyaW5nKHIpOnIgaW5zdGFuY2VvZiBvdD9yLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkocil9XSxcInRvLWJvb2xlYW5cIjpbSyxbUV0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdO3JldHVybiBCb29sZWFuKHIuZXZhbHVhdGUodCkpfV0sXCJ0by1yZ2JhXCI6W2V0KEcsNCksW1ldLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGVbMF0uZXZhbHVhdGUodCkudG9BcnJheSgpfV0scmdiOltZLFtHLEcsR10sWnRdLHJnYmE6W1ksW0csRyxHLEddLFp0XSxoYXM6e3R5cGU6SyxvdmVybG9hZHM6W1tbSF0sZnVuY3Rpb24odCxlKXtyZXR1cm4gWHQoZVswXS5ldmFsdWF0ZSh0KSx0LnByb3BlcnRpZXMoKSl9XSxbW0gsV10sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49ZVsxXTtyZXR1cm4gWHQoci5ldmFsdWF0ZSh0KSxuLmV2YWx1YXRlKHQpKX1dXX0sZ2V0Ont0eXBlOlEsb3ZlcmxvYWRzOltbW0hdLGZ1bmN0aW9uKHQsZSl7cmV0dXJuICR0KGVbMF0uZXZhbHVhdGUodCksdC5wcm9wZXJ0aWVzKCkpfV0sW1tILFddLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV07cmV0dXJuICR0KHIuZXZhbHVhdGUodCksbi5ldmFsdWF0ZSh0KSl9XV19LFwiZmVhdHVyZS1zdGF0ZVwiOltRLFtIXSxmdW5jdGlvbih0LGUpe3JldHVybiAkdChlWzBdLmV2YWx1YXRlKHQpLHQuZmVhdHVyZVN0YXRlfHx7fSl9XSxwcm9wZXJ0aWVzOltXLFtdLGZ1bmN0aW9uKHQpe3JldHVybiB0LnByb3BlcnRpZXMoKX1dLFwiZ2VvbWV0cnktdHlwZVwiOltILFtdLGZ1bmN0aW9uKHQpe3JldHVybiB0Lmdlb21ldHJ5VHlwZSgpfV0saWQ6W1EsW10sZnVuY3Rpb24odCl7cmV0dXJuIHQuaWQoKX1dLHpvb206W0csW10sZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2xvYmFscy56b29tfV0sXCJoZWF0bWFwLWRlbnNpdHlcIjpbRyxbXSxmdW5jdGlvbih0KXtyZXR1cm4gdC5nbG9iYWxzLmhlYXRtYXBEZW5zaXR5fHwwfV0sXCJsaW5lLXByb2dyZXNzXCI6W0csW10sZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2xvYmFscy5saW5lUHJvZ3Jlc3N8fDB9XSxcIitcIjpbRyxZdChHKSxmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wLG49MCxpPWU7bjxpLmxlbmd0aDtuKz0xKXtyKz1pW25dLmV2YWx1YXRlKHQpO31yZXR1cm4gcn1dLFwiKlwiOltHLFl0KEcpLGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTEsbj0wLGk9ZTtuPGkubGVuZ3RoO24rPTEpe3IqPWlbbl0uZXZhbHVhdGUodCk7fXJldHVybiByfV0sXCItXCI6e3R5cGU6RyxvdmVybG9hZHM6W1tbRyxHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF0sbj1lWzFdO3JldHVybiByLmV2YWx1YXRlKHQpLW4uZXZhbHVhdGUodCl9XSxbW0ddLGZ1bmN0aW9uKHQsZSl7cmV0dXJuLWVbMF0uZXZhbHVhdGUodCl9XV19LFwiL1wiOltHLFtHLEddLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV07cmV0dXJuIHIuZXZhbHVhdGUodCkvbi5ldmFsdWF0ZSh0KX1dLFwiJVwiOltHLFtHLEddLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV07cmV0dXJuIHIuZXZhbHVhdGUodCklbi5ldmFsdWF0ZSh0KX1dLGxuMjpbRyxbXSxmdW5jdGlvbigpe3JldHVybiBNYXRoLkxOMn1dLHBpOltHLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguUEl9XSxlOltHLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguRX1dLFwiXlwiOltHLFtHLEddLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV07cmV0dXJuIE1hdGgucG93KHIuZXZhbHVhdGUodCksbi5ldmFsdWF0ZSh0KSl9XSxzcXJ0OltHLFtHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF07cmV0dXJuIE1hdGguc3FydChyLmV2YWx1YXRlKHQpKX1dLGxvZzEwOltHLFtHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF07cmV0dXJuIE1hdGgubG9nMTAoci5ldmFsdWF0ZSh0KSl9XSxsbjpbRyxbR10sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdO3JldHVybiBNYXRoLmxvZyhyLmV2YWx1YXRlKHQpKX1dLGxvZzI6W0csW0ddLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXTtyZXR1cm4gTWF0aC5sb2cyKHIuZXZhbHVhdGUodCkpfV0sc2luOltHLFtHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF07cmV0dXJuIE1hdGguc2luKHIuZXZhbHVhdGUodCkpfV0sY29zOltHLFtHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF07cmV0dXJuIE1hdGguY29zKHIuZXZhbHVhdGUodCkpfV0sdGFuOltHLFtHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF07cmV0dXJuIE1hdGgudGFuKHIuZXZhbHVhdGUodCkpfV0sYXNpbjpbRyxbR10sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdO3JldHVybiBNYXRoLmFzaW4oci5ldmFsdWF0ZSh0KSl9XSxhY29zOltHLFtHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF07cmV0dXJuIE1hdGguYWNvcyhyLmV2YWx1YXRlKHQpKX1dLGF0YW46W0csW0ddLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXTtyZXR1cm4gTWF0aC5hdGFuKHIuZXZhbHVhdGUodCkpfV0sbWluOltHLFl0KEcpLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZXZhbHVhdGUodCl9KSl9XSxtYXg6W0csWXQoRyksZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCxlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5ldmFsdWF0ZSh0KX0pKX1dLGFiczpbRyxbR10sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdO3JldHVybiBNYXRoLmFicyhyLmV2YWx1YXRlKHQpKX1dLHJvdW5kOltHLFtHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF0uZXZhbHVhdGUodCk7cmV0dXJuIHI8MD8tTWF0aC5yb3VuZCgtcik6TWF0aC5yb3VuZChyKX1dLGZsb29yOltHLFtHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF07cmV0dXJuIE1hdGguZmxvb3Ioci5ldmFsdWF0ZSh0KSl9XSxjZWlsOltHLFtHXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF07cmV0dXJuIE1hdGguY2VpbChyLmV2YWx1YXRlKHQpKX1dLFwiZmlsdGVyLT09XCI6W0ssW0gsUV0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49ZVsxXTtyZXR1cm4gdC5wcm9wZXJ0aWVzKClbci52YWx1ZV09PT1uLnZhbHVlfV0sXCJmaWx0ZXItaWQtPT1cIjpbSyxbUV0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdO3JldHVybiB0LmlkKCk9PT1yLnZhbHVlfV0sXCJmaWx0ZXItdHlwZS09PVwiOltLLFtIXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF07cmV0dXJuIHQuZ2VvbWV0cnlUeXBlKCk9PT1yLnZhbHVlfV0sXCJmaWx0ZXItPFwiOltLLFtILFFdLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV0saT10LnByb3BlcnRpZXMoKVtyLnZhbHVlXSxhPW4udmFsdWU7cmV0dXJuIHR5cGVvZiBpPT10eXBlb2YgYSYmaTxhfV0sXCJmaWx0ZXItaWQtPFwiOltLLFtRXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF0sbj10LmlkKCksaT1yLnZhbHVlO3JldHVybiB0eXBlb2Ygbj09dHlwZW9mIGkmJm48aX1dLFwiZmlsdGVyLT5cIjpbSyxbSCxRXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF0sbj1lWzFdLGk9dC5wcm9wZXJ0aWVzKClbci52YWx1ZV0sYT1uLnZhbHVlO3JldHVybiB0eXBlb2YgaT09dHlwZW9mIGEmJmk+YX1dLFwiZmlsdGVyLWlkLT5cIjpbSyxbUV0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49dC5pZCgpLGk9ci52YWx1ZTtyZXR1cm4gdHlwZW9mIG49PXR5cGVvZiBpJiZuPml9XSxcImZpbHRlci08PVwiOltLLFtILFFdLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV0saT10LnByb3BlcnRpZXMoKVtyLnZhbHVlXSxhPW4udmFsdWU7cmV0dXJuIHR5cGVvZiBpPT10eXBlb2YgYSYmaTw9YX1dLFwiZmlsdGVyLWlkLTw9XCI6W0ssW1FdLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXSxuPXQuaWQoKSxpPXIudmFsdWU7cmV0dXJuIHR5cGVvZiBuPT10eXBlb2YgaSYmbjw9aX1dLFwiZmlsdGVyLT49XCI6W0ssW0gsUV0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49ZVsxXSxpPXQucHJvcGVydGllcygpW3IudmFsdWVdLGE9bi52YWx1ZTtyZXR1cm4gdHlwZW9mIGk9PXR5cGVvZiBhJiZpPj1hfV0sXCJmaWx0ZXItaWQtPj1cIjpbSyxbUV0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49dC5pZCgpLGk9ci52YWx1ZTtyZXR1cm4gdHlwZW9mIG49PXR5cGVvZiBpJiZuPj1pfV0sXCJmaWx0ZXItaGFzXCI6W0ssW1FdLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGVbMF0udmFsdWUgaW4gdC5wcm9wZXJ0aWVzKCl9XSxcImZpbHRlci1oYXMtaWRcIjpbSyxbXSxmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXQuaWQoKX1dLFwiZmlsdGVyLXR5cGUtaW5cIjpbSyxbZXQoSCldLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGVbMF0udmFsdWUuaW5kZXhPZih0Lmdlb21ldHJ5VHlwZSgpKT49MH1dLFwiZmlsdGVyLWlkLWluXCI6W0ssW2V0KFEpXSxmdW5jdGlvbih0LGUpe3JldHVybiBlWzBdLnZhbHVlLmluZGV4T2YodC5pZCgpKT49MH1dLFwiZmlsdGVyLWluLXNtYWxsXCI6W0ssW0gsZXQoUSldLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXTtyZXR1cm4gZVsxXS52YWx1ZS5pbmRleE9mKHQucHJvcGVydGllcygpW3IudmFsdWVdKT49MH1dLFwiZmlsdGVyLWluLWxhcmdlXCI6W0ssW0gsZXQoUSldLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV07cmV0dXJuIGZ1bmN0aW9uKHQsZSxyLG4pe2Zvcig7cjw9bjspe3ZhciBpPXIrbj4+MTtpZihlW2ldPT09dClyZXR1cm4hMDtlW2ldPnQ/bj1pLTE6cj1pKzE7fXJldHVybiExfSh0LnByb3BlcnRpZXMoKVtyLnZhbHVlXSxuLnZhbHVlLDAsbi52YWx1ZS5sZW5ndGgtMSl9XSxcIj5cIjp7dHlwZTpLLG92ZXJsb2FkczpbW1tHLEddLEd0XSxbW0gsSF0sR3RdLFtbSCxILHR0XSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF0sbj1lWzFdO3JldHVybiBlWzJdLmV2YWx1YXRlKHQpLmNvbXBhcmUoci5ldmFsdWF0ZSh0KSxuLmV2YWx1YXRlKHQpKT4wfV1dfSxcIjxcIjp7dHlwZTpLLG92ZXJsb2FkczpbW1tHLEddLEp0XSxbW0gsSF0sSnRdLFtbSCxILHR0XSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF0sbj1lWzFdO3JldHVybiBlWzJdLmV2YWx1YXRlKHQpLmNvbXBhcmUoci5ldmFsdWF0ZSh0KSxuLmV2YWx1YXRlKHQpKTwwfV1dfSxcIj49XCI6e3R5cGU6SyxvdmVybG9hZHM6W1tbRyxHXSxLdF0sW1tILEhdLEt0XSxbW0gsSCx0dF0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49ZVsxXTtyZXR1cm4gZVsyXS5ldmFsdWF0ZSh0KS5jb21wYXJlKHIuZXZhbHVhdGUodCksbi5ldmFsdWF0ZSh0KSk+PTB9XV19LFwiPD1cIjp7dHlwZTpLLG92ZXJsb2FkczpbW1tHLEddLEh0XSxbW0gsSF0sSHRdLFtbSCxILHR0XSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF0sbj1lWzFdO3JldHVybiBlWzJdLmV2YWx1YXRlKHQpLmNvbXBhcmUoci5ldmFsdWF0ZSh0KSxuLmV2YWx1YXRlKHQpKTw9MH1dXX0sYWxsOnt0eXBlOkssb3ZlcmxvYWRzOltbW0ssS10sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49ZVsxXTtyZXR1cm4gci5ldmFsdWF0ZSh0KSYmbi5ldmFsdWF0ZSh0KX1dLFtZdChLKSxmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wLG49ZTtyPG4ubGVuZ3RoO3IrPTEpe2lmKCFuW3JdLmV2YWx1YXRlKHQpKXJldHVybiExfXJldHVybiEwfV1dfSxhbnk6e3R5cGU6SyxvdmVybG9hZHM6W1tbSyxLXSxmdW5jdGlvbih0LGUpe3ZhciByPWVbMF0sbj1lWzFdO3JldHVybiByLmV2YWx1YXRlKHQpfHxuLmV2YWx1YXRlKHQpfV0sW1l0KEspLGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTAsbj1lO3I8bi5sZW5ndGg7cis9MSl7aWYobltyXS5ldmFsdWF0ZSh0KSlyZXR1cm4hMH1yZXR1cm4hMX1dXX0sXCIhXCI6W0ssW0tdLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIWVbMF0uZXZhbHVhdGUodCl9XSxcImlzLXN1cHBvcnRlZC1zY3JpcHRcIjpbSyxbSF0sZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49dC5nbG9iYWxzJiZ0Lmdsb2JhbHMuaXNTdXBwb3J0ZWRTY3JpcHQ7cmV0dXJuIW58fG4oci5ldmFsdWF0ZSh0KSl9XSx1cGNhc2U6W0gsW0hdLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGVbMF0uZXZhbHVhdGUodCkudG9VcHBlckNhc2UoKX1dLGRvd25jYXNlOltILFtIXSxmdW5jdGlvbih0LGUpe3JldHVybiBlWzBdLmV2YWx1YXRlKHQpLnRvTG93ZXJDYXNlKCl9XSxjb25jYXQ6W0gsWXQoSCksZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZXZhbHVhdGUodCl9KS5qb2luKFwiXCIpfV0sXCJyZXNvbHZlZC1sb2NhbGVcIjpbSCxbdHRdLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGVbMF0uZXZhbHVhdGUodCkucmVzb2x2ZWRMb2NhbGUoKX1dfSk7dmFyIG5lPS45NTA0NyxpZT0xLGFlPTEuMDg4ODMsb2U9NC8yOSxzZT02LzI5LHVlPTMqc2Uqc2UsbGU9c2Uqc2Uqc2UscGU9TWF0aC5QSS8xODAsaGU9MTgwL01hdGguUEk7ZnVuY3Rpb24gY2UodCl7cmV0dXJuIHQ+bGU/TWF0aC5wb3codCwxLzMpOnQvdWUrb2V9ZnVuY3Rpb24gZmUodCl7cmV0dXJuIHQ+c2U/dCp0KnQ6dWUqKHQtb2UpfWZ1bmN0aW9uIHllKHQpe3JldHVybiAyNTUqKHQ8PS4wMDMxMzA4PzEyLjkyKnQ6MS4wNTUqTWF0aC5wb3codCwxLzIuNCktLjA1NSl9ZnVuY3Rpb24gZGUodCl7cmV0dXJuKHQvPTI1NSk8PS4wNDA0NT90LzEyLjkyOk1hdGgucG93KCh0Ky4wNTUpLzEuMDU1LDIuNCl9ZnVuY3Rpb24gbWUodCl7dmFyIGU9ZGUodC5yKSxyPWRlKHQuZyksbj1kZSh0LmIpLGk9Y2UoKC40MTI0NTY0KmUrLjM1NzU3NjEqcisuMTgwNDM3NSpuKS9uZSksYT1jZSgoLjIxMjY3MjkqZSsuNzE1MTUyMipyKy4wNzIxNzUqbikvaWUpO3JldHVybntsOjExNiphLTE2LGE6NTAwKihpLWEpLGI6MjAwKihhLWNlKCguMDE5MzMzOSplKy4xMTkxOTIqcisuOTUwMzA0MSpuKS9hZSkpLGFscGhhOnQuYX19ZnVuY3Rpb24gdmUodCl7dmFyIGU9KHQubCsxNikvMTE2LHI9aXNOYU4odC5hKT9lOmUrdC5hLzUwMCxuPWlzTmFOKHQuYik/ZTplLXQuYi8yMDA7cmV0dXJuIGU9aWUqZmUoZSkscj1uZSpmZShyKSxuPWFlKmZlKG4pLG5ldyBvdCh5ZSgzLjI0MDQ1NDIqci0xLjUzNzEzODUqZS0uNDk4NTMxNCpuKSx5ZSgtLjk2OTI2NipyKzEuODc2MDEwOCplKy4wNDE1NTYqbikseWUoLjA1NTY0MzQqci0uMjA0MDI1OSplKzEuMDU3MjI1MipuKSx0LmFscGhhKX12YXIgZ2U9e2ZvcndhcmQ6bWUscmV2ZXJzZTp2ZSxpbnRlcnBvbGF0ZTpmdW5jdGlvbih0LGUscil7cmV0dXJue2w6VnQodC5sLGUubCxyKSxhOlZ0KHQuYSxlLmEsciksYjpWdCh0LmIsZS5iLHIpLGFscGhhOlZ0KHQuYWxwaGEsZS5hbHBoYSxyKX19fSx4ZT17Zm9yd2FyZDpmdW5jdGlvbih0KXt2YXIgZT1tZSh0KSxyPWUubCxuPWUuYSxpPWUuYixhPU1hdGguYXRhbjIoaSxuKSpoZTtyZXR1cm57aDphPDA/YSszNjA6YSxjOk1hdGguc3FydChuKm4raSppKSxsOnIsYWxwaGE6dC5hfX0scmV2ZXJzZTpmdW5jdGlvbih0KXt2YXIgZT10LmgqcGUscj10LmM7cmV0dXJuIHZlKHtsOnQubCxhOk1hdGguY29zKGUpKnIsYjpNYXRoLnNpbihlKSpyLGFscGhhOnQuYWxwaGF9KX0saW50ZXJwb2xhdGU6ZnVuY3Rpb24odCxlLHIpe3JldHVybntoOmZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1lLXQ7cmV0dXJuIHQrcioobj4xODB8fG48LTE4MD9uLTM2MCpNYXRoLnJvdW5kKG4vMzYwKTpuKX0odC5oLGUuaCxyKSxjOlZ0KHQuYyxlLmMsciksbDpWdCh0LmwsZS5sLHIpLGFscGhhOlZ0KHQuYWxwaGEsZS5hbHBoYSxyKX19fSxiZT1PYmplY3QuZnJlZXplKHtsYWI6Z2UsaGNsOnhlfSk7ZnVuY3Rpb24gd2UodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBOdW1iZXI/XCJudW1iZXJcIjp0IGluc3RhbmNlb2YgU3RyaW5nP1wic3RyaW5nXCI6dCBpbnN0YW5jZW9mIEJvb2xlYW4/XCJib29sZWFuXCI6QXJyYXkuaXNBcnJheSh0KT9cImFycmF5XCI6bnVsbD09PXQ/XCJudWxsXCI6dHlwZW9mIHR9ZnVuY3Rpb24gX2UodCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10JiYhQXJyYXkuaXNBcnJheSh0KX1mdW5jdGlvbiBBZSh0KXtyZXR1cm4gdH1mdW5jdGlvbiBrZSh0LGUscil7cmV0dXJuIHZvaWQgMCE9PXQ/dDp2b2lkIDAhPT1lP2U6dm9pZCAwIT09cj9yOnZvaWQgMH1mdW5jdGlvbiB6ZSh0LGUscixuLGkpe3JldHVybiBrZSh0eXBlb2Ygcj09PWk/bltyXTp2b2lkIDAsdC5kZWZhdWx0LGUuZGVmYXVsdCl9ZnVuY3Rpb24gU2UodCxlLHIpe2lmKFwibnVtYmVyXCIhPT13ZShyKSlyZXR1cm4ga2UodC5kZWZhdWx0LGUuZGVmYXVsdCk7dmFyIG49dC5zdG9wcy5sZW5ndGg7aWYoMT09PW4pcmV0dXJuIHQuc3RvcHNbMF1bMV07aWYocjw9dC5zdG9wc1swXVswXSlyZXR1cm4gdC5zdG9wc1swXVsxXTtpZihyPj10LnN0b3BzW24tMV1bMF0pcmV0dXJuIHQuc3RvcHNbbi0xXVsxXTt2YXIgaT1WZSh0LnN0b3BzLHIpO3JldHVybiB0LnN0b3BzW2ldWzFdfWZ1bmN0aW9uIE1lKHQsZSxyKXt2YXIgbj12b2lkIDAhPT10LmJhc2U/dC5iYXNlOjE7aWYoXCJudW1iZXJcIiE9PXdlKHIpKXJldHVybiBrZSh0LmRlZmF1bHQsZS5kZWZhdWx0KTt2YXIgaT10LnN0b3BzLmxlbmd0aDtpZigxPT09aSlyZXR1cm4gdC5zdG9wc1swXVsxXTtpZihyPD10LnN0b3BzWzBdWzBdKXJldHVybiB0LnN0b3BzWzBdWzFdO2lmKHI+PXQuc3RvcHNbaS0xXVswXSlyZXR1cm4gdC5zdG9wc1tpLTFdWzFdO3ZhciBhPVZlKHQuc3RvcHMsciksbz1mdW5jdGlvbih0LGUscixuKXt2YXIgaT1uLXIsYT10LXI7cmV0dXJuIDA9PT1pPzA6MT09PWU/YS9pOihNYXRoLnBvdyhlLGEpLTEpLyhNYXRoLnBvdyhlLGkpLTEpfShyLG4sdC5zdG9wc1thXVswXSx0LnN0b3BzW2ErMV1bMF0pLHM9dC5zdG9wc1thXVsxXSx1PXQuc3RvcHNbYSsxXVsxXSxsPUl0W2UudHlwZV18fEFlO2lmKHQuY29sb3JTcGFjZSYmXCJyZ2JcIiE9PXQuY29sb3JTcGFjZSl7dmFyIHA9YmVbdC5jb2xvclNwYWNlXTtsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHAucmV2ZXJzZShwLmludGVycG9sYXRlKHAuZm9yd2FyZCh0KSxwLmZvcndhcmQoZSksbykpfTt9cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2Ygcy5ldmFsdWF0ZT97ZXZhbHVhdGU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT1hcmd1bWVudHMubGVuZ3RoO2UtLTspdFtlXT1hcmd1bWVudHNbZV07dmFyIHI9cy5ldmFsdWF0ZS5hcHBseSh2b2lkIDAsdCksbj11LmV2YWx1YXRlLmFwcGx5KHZvaWQgMCx0KTtpZih2b2lkIDAhPT1yJiZ2b2lkIDAhPT1uKXJldHVybiBsKHIsbixvKX19Omwocyx1LG8pfWZ1bmN0aW9uIEJlKHQsZSxyKXtyZXR1cm5cImNvbG9yXCI9PT1lLnR5cGU/cj1vdC5wYXJzZShyKTp3ZShyKT09PWUudHlwZXx8XCJlbnVtXCI9PT1lLnR5cGUmJmUudmFsdWVzW3JdfHwocj12b2lkIDApLGtlKHIsdC5kZWZhdWx0LGUuZGVmYXVsdCl9ZnVuY3Rpb24gVmUodCxlKXtmb3IodmFyIHIsbixpPTAsYT10Lmxlbmd0aC0xLG89MDtpPD1hOyl7aWYocj10W289TWF0aC5mbG9vcigoaSthKS8yKV1bMF0sbj10W28rMV1bMF0sZT09PXJ8fGU+ciYmZTxuKXJldHVybiBvO3I8ZT9pPW8rMTpyPmUmJihhPW8tMSk7fXJldHVybiBNYXRoLm1heChvLTEsMCl9dmFyIEllPWZ1bmN0aW9uKHQsZSl7dmFyIHI7dGhpcy5leHByZXNzaW9uPXQsdGhpcy5fd2FybmluZ0hpc3Rvcnk9e30sdGhpcy5fZGVmYXVsdFZhbHVlPVwiY29sb3JcIj09PShyPWUpLnR5cGUmJl9lKHIuZGVmYXVsdCk/bmV3IG90KDAsMCwwLDApOlwiY29sb3JcIj09PXIudHlwZT9vdC5wYXJzZShyLmRlZmF1bHQpfHxudWxsOnZvaWQgMD09PXIuZGVmYXVsdD9udWxsOnIuZGVmYXVsdCxcImVudW1cIj09PWUudHlwZSYmKHRoaXMuX2VudW1WYWx1ZXM9ZS52YWx1ZXMpO307ZnVuY3Rpb24gQ2UodCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCkmJnQubGVuZ3RoPjAmJlwic3RyaW5nXCI9PXR5cGVvZiB0WzBdJiZ0WzBdaW4gTnR9ZnVuY3Rpb24gRWUodCxlKXt2YXIgcj1uZXcgU3QoTnQsW10sZnVuY3Rpb24odCl7dmFyIGU9e2NvbG9yOlksc3RyaW5nOkgsbnVtYmVyOkcsZW51bTpILGJvb2xlYW46S307aWYoXCJhcnJheVwiPT09dC50eXBlKXJldHVybiBldChlW3QudmFsdWVdfHxRLHQubGVuZ3RoKTtyZXR1cm4gZVt0LnR5cGVdfHxudWxsfShlKSksbj1yLnBhcnNlKHQpO3JldHVybiBuP1d0KG5ldyBJZShuLGUpKTpRdChyLmVycm9ycyl9SWUucHJvdG90eXBlLmV2YWx1YXRlV2l0aG91dEVycm9ySGFuZGxpbmc9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0aGlzLl9ldmFsdWF0b3J8fCh0aGlzLl9ldmFsdWF0b3I9bmV3IGJ0KSx0aGlzLl9ldmFsdWF0b3IuZ2xvYmFscz10LHRoaXMuX2V2YWx1YXRvci5mZWF0dXJlPWUsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmVTdGF0ZT1yLHRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZSh0aGlzLl9ldmFsdWF0b3IpfSxJZS5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24odCxlLHIpe3RoaXMuX2V2YWx1YXRvcnx8KHRoaXMuX2V2YWx1YXRvcj1uZXcgYnQpLHRoaXMuX2V2YWx1YXRvci5nbG9iYWxzPXQsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmU9ZSx0aGlzLl9ldmFsdWF0b3IuZmVhdHVyZVN0YXRlPXI7dHJ5e3ZhciBuPXRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZSh0aGlzLl9ldmFsdWF0b3IpO2lmKG51bGw9PW4pcmV0dXJuIHRoaXMuX2RlZmF1bHRWYWx1ZTtpZih0aGlzLl9lbnVtVmFsdWVzJiYhKG4gaW4gdGhpcy5fZW51bVZhbHVlcykpdGhyb3cgbmV3IGN0KFwiRXhwZWN0ZWQgdmFsdWUgdG8gYmUgb25lIG9mIFwiK09iamVjdC5rZXlzKHRoaXMuX2VudW1WYWx1ZXMpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodCl9KS5qb2luKFwiLCBcIikrXCIsIGJ1dCBmb3VuZCBcIitKU09OLnN0cmluZ2lmeShuKStcIiBpbnN0ZWFkLlwiKTtyZXR1cm4gbn1jYXRjaCh0KXtyZXR1cm4gdGhpcy5fd2FybmluZ0hpc3RvcnlbdC5tZXNzYWdlXXx8KHRoaXMuX3dhcm5pbmdIaXN0b3J5W3QubWVzc2FnZV09ITAsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUud2Fybih0Lm1lc3NhZ2UpKSx0aGlzLl9kZWZhdWx0VmFsdWV9fTt2YXIgVGU9ZnVuY3Rpb24odCxlKXt0aGlzLmtpbmQ9dCx0aGlzLl9zdHlsZUV4cHJlc3Npb249ZSx0aGlzLmlzU3RhdGVEZXBlbmRlbnQ9XCJjb25zdGFudFwiIT09dCYmIUF0KGUuZXhwcmVzc2lvbik7fTtUZS5wcm90b3R5cGUuZXZhbHVhdGVXaXRob3V0RXJyb3JIYW5kbGluZz1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMuX3N0eWxlRXhwcmVzc2lvbi5ldmFsdWF0ZVdpdGhvdXRFcnJvckhhbmRsaW5nKHQsZSxyKX0sVGUucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdGhpcy5fc3R5bGVFeHByZXNzaW9uLmV2YWx1YXRlKHQsZSxyKX07dmFyIFBlPWZ1bmN0aW9uKHQsZSxyKXt0aGlzLmtpbmQ9dCx0aGlzLnpvb21TdG9wcz1yLmxhYmVscyx0aGlzLl9zdHlsZUV4cHJlc3Npb249ZSx0aGlzLmlzU3RhdGVEZXBlbmRlbnQ9XCJjYW1lcmFcIiE9PXQmJiFBdChlLmV4cHJlc3Npb24pLHIgaW5zdGFuY2VvZiBDdCYmKHRoaXMuX2ludGVycG9sYXRpb25UeXBlPXIuaW50ZXJwb2xhdGlvbik7fTtmdW5jdGlvbiBGZSh0LGUpe2lmKFwiZXJyb3JcIj09PSh0PUVlKHQsZSkpLnJlc3VsdClyZXR1cm4gdDt2YXIgcj10LnZhbHVlLmV4cHJlc3Npb24sbj1fdChyKTtpZighbiYmIXRlKGUpKXJldHVybiBRdChbbmV3IFgoXCJcIixcImRhdGEgZXhwcmVzc2lvbnMgbm90IHN1cHBvcnRlZFwiKV0pO3ZhciBpPWt0KHIsW1wiem9vbVwiXSk7aWYoIWkmJiFlZShlKSlyZXR1cm4gUXQoW25ldyBYKFwiXCIsXCJ6b29tIGV4cHJlc3Npb25zIG5vdCBzdXBwb3J0ZWRcIildKTt2YXIgYT1mdW5jdGlvbiB0KGUpe3ZhciByPW51bGw7aWYoZSBpbnN0YW5jZW9mIFB0KXI9dChlLnJlc3VsdCk7ZWxzZSBpZihlIGluc3RhbmNlb2YgVHQpZm9yKHZhciBuPTAsaT1lLmFyZ3M7bjxpLmxlbmd0aDtuKz0xKXt2YXIgYT1pW25dO2lmKHI9dChhKSlicmVha31lbHNlKGUgaW5zdGFuY2VvZiBCdHx8ZSBpbnN0YW5jZW9mIEN0KSYmZS5pbnB1dCBpbnN0YW5jZW9mIHd0JiZcInpvb21cIj09PWUuaW5wdXQubmFtZSYmKHI9ZSk7aWYociBpbnN0YW5jZW9mIFgpcmV0dXJuIHI7ZS5lYWNoQ2hpbGQoZnVuY3Rpb24oZSl7dmFyIG49dChlKTtuIGluc3RhbmNlb2YgWD9yPW46IXImJm4/cj1uZXcgWChcIlwiLCdcInpvb21cIiBleHByZXNzaW9uIG1heSBvbmx5IGJlIHVzZWQgYXMgaW5wdXQgdG8gYSB0b3AtbGV2ZWwgXCJzdGVwXCIgb3IgXCJpbnRlcnBvbGF0ZVwiIGV4cHJlc3Npb24uJyk6ciYmbiYmciE9PW4mJihyPW5ldyBYKFwiXCIsJ09ubHkgb25lIHpvb20tYmFzZWQgXCJzdGVwXCIgb3IgXCJpbnRlcnBvbGF0ZVwiIHN1YmV4cHJlc3Npb24gbWF5IGJlIHVzZWQgaW4gYW4gZXhwcmVzc2lvbi4nKSk7fSk7cmV0dXJuIHJ9KHIpO3JldHVybiBhfHxpP2EgaW5zdGFuY2VvZiBYP1F0KFthXSk6YSBpbnN0YW5jZW9mIEN0JiYhcmUoZSk/UXQoW25ldyBYKFwiXCIsJ1wiaW50ZXJwb2xhdGVcIiBleHByZXNzaW9ucyBjYW5ub3QgYmUgdXNlZCB3aXRoIHRoaXMgcHJvcGVydHknKV0pOld0KGE/bmV3IFBlKG4/XCJjYW1lcmFcIjpcImNvbXBvc2l0ZVwiLHQudmFsdWUsYSk6bmV3IFRlKG4/XCJjb25zdGFudFwiOlwic291cmNlXCIsdC52YWx1ZSkpOlF0KFtuZXcgWChcIlwiLCdcInpvb21cIiBleHByZXNzaW9uIG1heSBvbmx5IGJlIHVzZWQgYXMgaW5wdXQgdG8gYSB0b3AtbGV2ZWwgXCJzdGVwXCIgb3IgXCJpbnRlcnBvbGF0ZVwiIGV4cHJlc3Npb24uJyldKX1QZS5wcm90b3R5cGUuZXZhbHVhdGVXaXRob3V0RXJyb3JIYW5kbGluZz1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMuX3N0eWxlRXhwcmVzc2lvbi5ldmFsdWF0ZVdpdGhvdXRFcnJvckhhbmRsaW5nKHQsZSxyKX0sUGUucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdGhpcy5fc3R5bGVFeHByZXNzaW9uLmV2YWx1YXRlKHQsZSxyKX0sUGUucHJvdG90eXBlLmludGVycG9sYXRpb25GYWN0b3I9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0aGlzLl9pbnRlcnBvbGF0aW9uVHlwZT9DdC5pbnRlcnBvbGF0aW9uRmFjdG9yKHRoaXMuX2ludGVycG9sYXRpb25UeXBlLHQsZSxyKTowfTt2YXIgTGU9ZnVuY3Rpb24odCxlKXt0aGlzLl9wYXJhbWV0ZXJzPXQsdGhpcy5fc3BlY2lmaWNhdGlvbj1lLFUodGhpcyxmdW5jdGlvbiB0KGUscil7dmFyIG4saSxhLG89XCJjb2xvclwiPT09ci50eXBlLHM9ZS5zdG9wcyYmXCJvYmplY3RcIj09dHlwZW9mIGUuc3RvcHNbMF1bMF0sdT1zfHx2b2lkIDAhPT1lLnByb3BlcnR5LGw9c3x8IXUscD1lLnR5cGV8fChyZShyKT9cImV4cG9uZW50aWFsXCI6XCJpbnRlcnZhbFwiKTtpZihvJiYoKGU9VSh7fSxlKSkuc3RvcHMmJihlLnN0b3BzPWUuc3RvcHMubWFwKGZ1bmN0aW9uKHQpe3JldHVyblt0WzBdLG90LnBhcnNlKHRbMV0pXX0pKSxlLmRlZmF1bHQ/ZS5kZWZhdWx0PW90LnBhcnNlKGUuZGVmYXVsdCk6ZS5kZWZhdWx0PW90LnBhcnNlKHIuZGVmYXVsdCkpLGUuY29sb3JTcGFjZSYmXCJyZ2JcIiE9PWUuY29sb3JTcGFjZSYmIWJlW2UuY29sb3JTcGFjZV0pdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBjb2xvciBzcGFjZTogXCIrZS5jb2xvclNwYWNlKTtpZihcImV4cG9uZW50aWFsXCI9PT1wKW49TWU7ZWxzZSBpZihcImludGVydmFsXCI9PT1wKW49U2U7ZWxzZSBpZihcImNhdGVnb3JpY2FsXCI9PT1wKXtuPXplLGk9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIGg9MCxjPWUuc3RvcHM7aDxjLmxlbmd0aDtoKz0xKXt2YXIgZj1jW2hdO2lbZlswXV09ZlsxXTt9YT10eXBlb2YgZS5zdG9wc1swXVswXTt9ZWxzZXtpZihcImlkZW50aXR5XCIhPT1wKXRocm93IG5ldyBFcnJvcignVW5rbm93biBmdW5jdGlvbiB0eXBlIFwiJytwKydcIicpO249QmU7fWlmKHMpe2Zvcih2YXIgeT17fSxkPVtdLG09MDttPGUuc3RvcHMubGVuZ3RoO20rKyl7dmFyIHY9ZS5zdG9wc1ttXSxnPXZbMF0uem9vbTt2b2lkIDA9PT15W2ddJiYoeVtnXT17em9vbTpnLHR5cGU6ZS50eXBlLHByb3BlcnR5OmUucHJvcGVydHksZGVmYXVsdDplLmRlZmF1bHQsc3RvcHM6W119LGQucHVzaChnKSkseVtnXS5zdG9wcy5wdXNoKFt2WzBdLnZhbHVlLHZbMV1dKTt9Zm9yKHZhciB4PVtdLGI9MCx3PWQ7Yjx3Lmxlbmd0aDtiKz0xKXt2YXIgXz13W2JdO3gucHVzaChbeVtfXS56b29tLHQoeVtfXSxyKV0pO31yZXR1cm57a2luZDpcImNvbXBvc2l0ZVwiLGludGVycG9sYXRpb25GYWN0b3I6Q3QuaW50ZXJwb2xhdGlvbkZhY3Rvci5iaW5kKHZvaWQgMCx7bmFtZTpcImxpbmVhclwifSksem9vbVN0b3BzOngubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0WzBdfSksZXZhbHVhdGU6ZnVuY3Rpb24odCxuKXt2YXIgaT10Lnpvb207cmV0dXJuIE1lKHtzdG9wczp4LGJhc2U6ZS5iYXNlfSxyLGkpLmV2YWx1YXRlKGksbil9fX1yZXR1cm4gbD97a2luZDpcImNhbWVyYVwiLGludGVycG9sYXRpb25GYWN0b3I6XCJleHBvbmVudGlhbFwiPT09cD9DdC5pbnRlcnBvbGF0aW9uRmFjdG9yLmJpbmQodm9pZCAwLHtuYW1lOlwiZXhwb25lbnRpYWxcIixiYXNlOnZvaWQgMCE9PWUuYmFzZT9lLmJhc2U6MX0pOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LHpvb21TdG9wczplLnN0b3BzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdFswXX0pLGV2YWx1YXRlOmZ1bmN0aW9uKHQpe3ZhciBvPXQuem9vbTtyZXR1cm4gbihlLHIsbyxpLGEpfX06e2tpbmQ6XCJzb3VyY2VcIixldmFsdWF0ZTpmdW5jdGlvbih0LG8pe3ZhciBzPW8mJm8ucHJvcGVydGllcz9vLnByb3BlcnRpZXNbZS5wcm9wZXJ0eV06dm9pZCAwO3JldHVybiB2b2lkIDA9PT1zP2tlKGUuZGVmYXVsdCxyLmRlZmF1bHQpOm4oZSxyLHMsaSxhKX19fSh0aGlzLl9wYXJhbWV0ZXJzLHRoaXMuX3NwZWNpZmljYXRpb24pKTt9O2Z1bmN0aW9uIE9lKHQsZSl7aWYoX2UodCkpcmV0dXJuIG5ldyBMZSh0LGUpO2lmKENlKHQpKXt2YXIgcj1GZSh0LGUpO2lmKFwiZXJyb3JcIj09PXIucmVzdWx0KXRocm93IG5ldyBFcnJvcihyLnZhbHVlLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5rZXkrXCI6IFwiK3QubWVzc2FnZX0pLmpvaW4oXCIsIFwiKSk7cmV0dXJuIHIudmFsdWV9dmFyIG49dDtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmXCJjb2xvclwiPT09ZS50eXBlJiYobj1vdC5wYXJzZSh0KSkse2tpbmQ6XCJjb25zdGFudFwiLGV2YWx1YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG59fX1mdW5jdGlvbiBEZSh0KXt2YXIgZT10LmtleSxyPXQudmFsdWUsbj10LnZhbHVlU3BlY3x8e30saT10Lm9iamVjdEVsZW1lbnRWYWxpZGF0b3JzfHx7fSxhPXQuc3R5bGUsbz10LnN0eWxlU3BlYyxzPVtdLHU9d2Uocik7aWYoXCJvYmplY3RcIiE9PXUpcmV0dXJuW25ldyBqKGUscixcIm9iamVjdCBleHBlY3RlZCwgXCIrdStcIiBmb3VuZFwiKV07Zm9yKHZhciBsIGluIHIpe3ZhciBwPWwuc3BsaXQoXCIuXCIpWzBdLGg9bltwXXx8bltcIipcIl0sYz12b2lkIDA7aWYoaVtwXSljPWlbcF07ZWxzZSBpZihuW3BdKWM9dXI7ZWxzZSBpZihpW1wiKlwiXSljPWlbXCIqXCJdO2Vsc2V7aWYoIW5bXCIqXCJdKXtzLnB1c2gobmV3IGooZSxyW2xdLCd1bmtub3duIHByb3BlcnR5IFwiJytsKydcIicpKTtjb250aW51ZX1jPXVyO31zPXMuY29uY2F0KGMoe2tleTooZT9lK1wiLlwiOmUpK2wsdmFsdWU6cltsXSx2YWx1ZVNwZWM6aCxzdHlsZTphLHN0eWxlU3BlYzpvLG9iamVjdDpyLG9iamVjdEtleTpsfSxyKSk7fWZvcih2YXIgZiBpbiBuKWlbZl18fG5bZl0ucmVxdWlyZWQmJnZvaWQgMD09PW5bZl0uZGVmYXVsdCYmdm9pZCAwPT09cltmXSYmcy5wdXNoKG5ldyBqKGUsciwnbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcIicrZisnXCInKSk7cmV0dXJuIHN9ZnVuY3Rpb24gcWUodCl7dmFyIGU9dC52YWx1ZSxyPXQudmFsdWVTcGVjLG49dC5zdHlsZSxpPXQuc3R5bGVTcGVjLGE9dC5rZXksbz10LmFycmF5RWxlbWVudFZhbGlkYXRvcnx8dXI7aWYoXCJhcnJheVwiIT09d2UoZSkpcmV0dXJuW25ldyBqKGEsZSxcImFycmF5IGV4cGVjdGVkLCBcIit3ZShlKStcIiBmb3VuZFwiKV07aWYoci5sZW5ndGgmJmUubGVuZ3RoIT09ci5sZW5ndGgpcmV0dXJuW25ldyBqKGEsZSxcImFycmF5IGxlbmd0aCBcIityLmxlbmd0aCtcIiBleHBlY3RlZCwgbGVuZ3RoIFwiK2UubGVuZ3RoK1wiIGZvdW5kXCIpXTtpZihyW1wibWluLWxlbmd0aFwiXSYmZS5sZW5ndGg8cltcIm1pbi1sZW5ndGhcIl0pcmV0dXJuW25ldyBqKGEsZSxcImFycmF5IGxlbmd0aCBhdCBsZWFzdCBcIityW1wibWluLWxlbmd0aFwiXStcIiBleHBlY3RlZCwgbGVuZ3RoIFwiK2UubGVuZ3RoK1wiIGZvdW5kXCIpXTt2YXIgcz17dHlwZTpyLnZhbHVlfTtpLiR2ZXJzaW9uPDcmJihzLmZ1bmN0aW9uPXIuZnVuY3Rpb24pLFwib2JqZWN0XCI9PT13ZShyLnZhbHVlKSYmKHM9ci52YWx1ZSk7Zm9yKHZhciB1PVtdLGw9MDtsPGUubGVuZ3RoO2wrKyl1PXUuY29uY2F0KG8oe2FycmF5OmUsYXJyYXlJbmRleDpsLHZhbHVlOmVbbF0sdmFsdWVTcGVjOnMsc3R5bGU6bixzdHlsZVNwZWM6aSxrZXk6YStcIltcIitsK1wiXVwifSkpO3JldHVybiB1fWZ1bmN0aW9uIGplKHQpe3ZhciBlPXQua2V5LHI9dC52YWx1ZSxuPXQudmFsdWVTcGVjLGk9d2Uocik7cmV0dXJuXCJudW1iZXJcIiE9PWk/W25ldyBqKGUscixcIm51bWJlciBleHBlY3RlZCwgXCIraStcIiBmb3VuZFwiKV06XCJtaW5pbXVtXCJpbiBuJiZyPG4ubWluaW11bT9bbmV3IGooZSxyLHIrXCIgaXMgbGVzcyB0aGFuIHRoZSBtaW5pbXVtIHZhbHVlIFwiK24ubWluaW11bSldOlwibWF4aW11bVwiaW4gbiYmcj5uLm1heGltdW0/W25ldyBqKGUscixyK1wiIGlzIGdyZWF0ZXIgdGhhbiB0aGUgbWF4aW11bSB2YWx1ZSBcIituLm1heGltdW0pXTpbXX1mdW5jdGlvbiBSZSh0KXt2YXIgZSxyLG4saT10LnZhbHVlU3BlYyxhPU4odC52YWx1ZS50eXBlKSxvPXt9LHM9XCJjYXRlZ29yaWNhbFwiIT09YSYmdm9pZCAwPT09dC52YWx1ZS5wcm9wZXJ0eSx1PSFzLGw9XCJhcnJheVwiPT09d2UodC52YWx1ZS5zdG9wcykmJlwiYXJyYXlcIj09PXdlKHQudmFsdWUuc3RvcHNbMF0pJiZcIm9iamVjdFwiPT09d2UodC52YWx1ZS5zdG9wc1swXVswXSkscD1EZSh7a2V5OnQua2V5LHZhbHVlOnQudmFsdWUsdmFsdWVTcGVjOnQuc3R5bGVTcGVjLmZ1bmN0aW9uLHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOntzdG9wczpmdW5jdGlvbih0KXtpZihcImlkZW50aXR5XCI9PT1hKXJldHVybltuZXcgaih0LmtleSx0LnZhbHVlLCdpZGVudGl0eSBmdW5jdGlvbiBtYXkgbm90IGhhdmUgYSBcInN0b3BzXCIgcHJvcGVydHknKV07dmFyIGU9W10scj10LnZhbHVlO2U9ZS5jb25jYXQocWUoe2tleTp0LmtleSx2YWx1ZTpyLHZhbHVlU3BlYzp0LnZhbHVlU3BlYyxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlYyxhcnJheUVsZW1lbnRWYWxpZGF0b3I6aH0pKSxcImFycmF5XCI9PT13ZShyKSYmMD09PXIubGVuZ3RoJiZlLnB1c2gobmV3IGoodC5rZXkscixcImFycmF5IG11c3QgaGF2ZSBhdCBsZWFzdCBvbmUgc3RvcFwiKSk7cmV0dXJuIGV9LGRlZmF1bHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHVyKHtrZXk6dC5rZXksdmFsdWU6dC52YWx1ZSx2YWx1ZVNwZWM6aSxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlY30pfX19KTtyZXR1cm5cImlkZW50aXR5XCI9PT1hJiZzJiZwLnB1c2gobmV3IGoodC5rZXksdC52YWx1ZSwnbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcInByb3BlcnR5XCInKSksXCJpZGVudGl0eVwiPT09YXx8dC52YWx1ZS5zdG9wc3x8cC5wdXNoKG5ldyBqKHQua2V5LHQudmFsdWUsJ21pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgXCJzdG9wc1wiJykpLFwiZXhwb25lbnRpYWxcIj09PWEmJnQudmFsdWVTcGVjLmV4cHJlc3Npb24mJiFyZSh0LnZhbHVlU3BlYykmJnAucHVzaChuZXcgaih0LmtleSx0LnZhbHVlLFwiZXhwb25lbnRpYWwgZnVuY3Rpb25zIG5vdCBzdXBwb3J0ZWRcIikpLHQuc3R5bGVTcGVjLiR2ZXJzaW9uPj04JiYodSYmIXRlKHQudmFsdWVTcGVjKT9wLnB1c2gobmV3IGoodC5rZXksdC52YWx1ZSxcInByb3BlcnR5IGZ1bmN0aW9ucyBub3Qgc3VwcG9ydGVkXCIpKTpzJiYhZWUodC52YWx1ZVNwZWMpJiZwLnB1c2gobmV3IGoodC5rZXksdC52YWx1ZSxcInpvb20gZnVuY3Rpb25zIG5vdCBzdXBwb3J0ZWRcIikpKSxcImNhdGVnb3JpY2FsXCIhPT1hJiYhbHx8dm9pZCAwIT09dC52YWx1ZS5wcm9wZXJ0eXx8cC5wdXNoKG5ldyBqKHQua2V5LHQudmFsdWUsJ1wicHJvcGVydHlcIiBwcm9wZXJ0eSBpcyByZXF1aXJlZCcpKSxwO2Z1bmN0aW9uIGgodCl7dmFyIGU9W10sYT10LnZhbHVlLHM9dC5rZXk7aWYoXCJhcnJheVwiIT09d2UoYSkpcmV0dXJuW25ldyBqKHMsYSxcImFycmF5IGV4cGVjdGVkLCBcIit3ZShhKStcIiBmb3VuZFwiKV07aWYoMiE9PWEubGVuZ3RoKXJldHVybltuZXcgaihzLGEsXCJhcnJheSBsZW5ndGggMiBleHBlY3RlZCwgbGVuZ3RoIFwiK2EubGVuZ3RoK1wiIGZvdW5kXCIpXTtpZihsKXtpZihcIm9iamVjdFwiIT09d2UoYVswXSkpcmV0dXJuW25ldyBqKHMsYSxcIm9iamVjdCBleHBlY3RlZCwgXCIrd2UoYVswXSkrXCIgZm91bmRcIildO2lmKHZvaWQgMD09PWFbMF0uem9vbSlyZXR1cm5bbmV3IGoocyxhLFwib2JqZWN0IHN0b3Aga2V5IG11c3QgaGF2ZSB6b29tXCIpXTtpZih2b2lkIDA9PT1hWzBdLnZhbHVlKXJldHVybltuZXcgaihzLGEsXCJvYmplY3Qgc3RvcCBrZXkgbXVzdCBoYXZlIHZhbHVlXCIpXTtpZihuJiZuPk4oYVswXS56b29tKSlyZXR1cm5bbmV3IGoocyxhWzBdLnpvb20sXCJzdG9wIHpvb20gdmFsdWVzIG11c3QgYXBwZWFyIGluIGFzY2VuZGluZyBvcmRlclwiKV07TihhWzBdLnpvb20pIT09biYmKG49TihhWzBdLnpvb20pLHI9dm9pZCAwLG89e30pLGU9ZS5jb25jYXQoRGUoe2tleTpzK1wiWzBdXCIsdmFsdWU6YVswXSx2YWx1ZVNwZWM6e3pvb206e319LHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOnt6b29tOmplLHZhbHVlOmN9fSkpO31lbHNlIGU9ZS5jb25jYXQoYyh7a2V5OnMrXCJbMF1cIix2YWx1ZTphWzBdLHZhbHVlU3BlYzp7fSxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlY30sYSkpO3JldHVybiBlLmNvbmNhdCh1cih7a2V5OnMrXCJbMV1cIix2YWx1ZTphWzFdLHZhbHVlU3BlYzppLHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjfSkpfWZ1bmN0aW9uIGModCxuKXt2YXIgcz13ZSh0LnZhbHVlKSx1PU4odC52YWx1ZSksbD1udWxsIT09dC52YWx1ZT90LnZhbHVlOm47aWYoZSl7aWYocyE9PWUpcmV0dXJuW25ldyBqKHQua2V5LGwscytcIiBzdG9wIGRvbWFpbiB0eXBlIG11c3QgbWF0Y2ggcHJldmlvdXMgc3RvcCBkb21haW4gdHlwZSBcIitlKV19ZWxzZSBlPXM7aWYoXCJudW1iZXJcIiE9PXMmJlwic3RyaW5nXCIhPT1zJiZcImJvb2xlYW5cIiE9PXMpcmV0dXJuW25ldyBqKHQua2V5LGwsXCJzdG9wIGRvbWFpbiB2YWx1ZSBtdXN0IGJlIGEgbnVtYmVyLCBzdHJpbmcsIG9yIGJvb2xlYW5cIildO2lmKFwibnVtYmVyXCIhPT1zJiZcImNhdGVnb3JpY2FsXCIhPT1hKXt2YXIgcD1cIm51bWJlciBleHBlY3RlZCwgXCIrcytcIiBmb3VuZFwiO3JldHVybiB0ZShpKSYmdm9pZCAwPT09YSYmKHArPSdcXG5JZiB5b3UgaW50ZW5kZWQgdG8gdXNlIGEgY2F0ZWdvcmljYWwgZnVuY3Rpb24sIHNwZWNpZnkgYFwidHlwZVwiOiBcImNhdGVnb3JpY2FsXCJgLicpLFtuZXcgaih0LmtleSxsLHApXX1yZXR1cm5cImNhdGVnb3JpY2FsXCIhPT1hfHxcIm51bWJlclwiIT09c3x8aXNGaW5pdGUodSkmJk1hdGguZmxvb3IodSk9PT11P1wiY2F0ZWdvcmljYWxcIiE9PWEmJlwibnVtYmVyXCI9PT1zJiZ2b2lkIDAhPT1yJiZ1PHI/W25ldyBqKHQua2V5LGwsXCJzdG9wIGRvbWFpbiB2YWx1ZXMgbXVzdCBhcHBlYXIgaW4gYXNjZW5kaW5nIG9yZGVyXCIpXToocj11LFwiY2F0ZWdvcmljYWxcIj09PWEmJnUgaW4gbz9bbmV3IGoodC5rZXksbCxcInN0b3AgZG9tYWluIHZhbHVlcyBtdXN0IGJlIHVuaXF1ZVwiKV06KG9bdV09ITAsW10pKTpbbmV3IGoodC5rZXksbCxcImludGVnZXIgZXhwZWN0ZWQsIGZvdW5kIFwiK3UpXX19ZnVuY3Rpb24gVWUodCl7dmFyIGU9KFwicHJvcGVydHlcIj09PXQuZXhwcmVzc2lvbkNvbnRleHQ/RmU6RWUpKFoodC52YWx1ZSksdC52YWx1ZVNwZWMpO3JldHVyblwiZXJyb3JcIj09PWUucmVzdWx0P2UudmFsdWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaihcIlwiK3Qua2V5K2Uua2V5LHQudmFsdWUsZS5tZXNzYWdlKX0pOlwicHJvcGVydHlcIj09PXQuZXhwcmVzc2lvbkNvbnRleHQmJlwidGV4dC1mb250XCI9PT10LnByb3BlcnR5S2V5JiYtMSE9PWUudmFsdWUuX3N0eWxlRXhwcmVzc2lvbi5leHByZXNzaW9uLnBvc3NpYmxlT3V0cHV0cygpLmluZGV4T2Yodm9pZCAwKT9bbmV3IGoodC5rZXksdC52YWx1ZSwnSW52YWxpZCBkYXRhIGV4cHJlc3Npb24gZm9yIFwidGV4dC1mb250XCIuIE91dHB1dCB2YWx1ZXMgbXVzdCBiZSBjb250YWluZWQgYXMgbGl0ZXJhbHMgd2l0aGluIHRoZSBleHByZXNzaW9uLicpXTpcInByb3BlcnR5XCIhPT10LmV4cHJlc3Npb25Db250ZXh0fHxcImxheW91dFwiIT09dC5wcm9wZXJ0eVR5cGV8fEF0KGUudmFsdWUuX3N0eWxlRXhwcmVzc2lvbi5leHByZXNzaW9uKT9bXTpbbmV3IGoodC5rZXksdC52YWx1ZSwnXCJmZWF0dXJlLXN0YXRlXCIgZGF0YSBleHByZXNzaW9ucyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIGxheW91dCBwcm9wZXJ0aWVzLicpXX1mdW5jdGlvbiBOZSh0KXt2YXIgZT10LmtleSxyPXQudmFsdWUsbj10LnZhbHVlU3BlYyxpPVtdO3JldHVybiBBcnJheS5pc0FycmF5KG4udmFsdWVzKT8tMT09PW4udmFsdWVzLmluZGV4T2YoTihyKSkmJmkucHVzaChuZXcgaihlLHIsXCJleHBlY3RlZCBvbmUgb2YgW1wiK24udmFsdWVzLmpvaW4oXCIsIFwiKStcIl0sIFwiK0pTT04uc3RyaW5naWZ5KHIpK1wiIGZvdW5kXCIpKTotMT09PU9iamVjdC5rZXlzKG4udmFsdWVzKS5pbmRleE9mKE4ocikpJiZpLnB1c2gobmV3IGooZSxyLFwiZXhwZWN0ZWQgb25lIG9mIFtcIitPYmplY3Qua2V5cyhuLnZhbHVlcykuam9pbihcIiwgXCIpK1wiXSwgXCIrSlNPTi5zdHJpbmdpZnkocikrXCIgZm91bmRcIikpLGl9ZnVuY3Rpb24gWmUodCl7aWYoIUFycmF5LmlzQXJyYXkodCl8fDA9PT10Lmxlbmd0aClyZXR1cm4hMTtzd2l0Y2godFswXSl7Y2FzZVwiaGFzXCI6cmV0dXJuIHQubGVuZ3RoPj0yJiZcIiRpZFwiIT09dFsxXSYmXCIkdHlwZVwiIT09dFsxXTtjYXNlXCJpblwiOmNhc2VcIiFpblwiOmNhc2VcIiFoYXNcIjpjYXNlXCJub25lXCI6cmV0dXJuITE7Y2FzZVwiPT1cIjpjYXNlXCIhPVwiOmNhc2VcIj5cIjpjYXNlXCI+PVwiOmNhc2VcIjxcIjpjYXNlXCI8PVwiOnJldHVybiAzPT09dC5sZW5ndGgmJihBcnJheS5pc0FycmF5KHRbMV0pfHxBcnJheS5pc0FycmF5KHRbMl0pKTtjYXNlXCJhbnlcIjpjYXNlXCJhbGxcIjpmb3IodmFyIGU9MCxyPXQuc2xpY2UoMSk7ZTxyLmxlbmd0aDtlKz0xKXt2YXIgbj1yW2VdO2lmKCFaZShuKSYmXCJib29sZWFuXCIhPXR5cGVvZiBuKXJldHVybiExfXJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITB9fUxlLmRlc2VyaWFsaXplPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgTGUodC5fcGFyYW1ldGVycyx0Ll9zcGVjaWZpY2F0aW9uKX0sTGUuc2VyaWFsaXplPWZ1bmN0aW9uKHQpe3JldHVybntfcGFyYW1ldGVyczp0Ll9wYXJhbWV0ZXJzLF9zcGVjaWZpY2F0aW9uOnQuX3NwZWNpZmljYXRpb259fTt2YXIgWGU9e3R5cGU6XCJib29sZWFuXCIsZGVmYXVsdDohMSx0cmFuc2l0aW9uOiExLFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfX07ZnVuY3Rpb24gJGUodCl7aWYoIXQpcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuITB9O1plKHQpfHwodD1HZSh0KSk7dmFyIGU9RWUodCxYZSk7aWYoXCJlcnJvclwiPT09ZS5yZXN1bHQpdGhyb3cgbmV3IEVycm9yKGUudmFsdWUubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmtleStcIjogXCIrdC5tZXNzYWdlfSkuam9pbihcIiwgXCIpKTtyZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gZS52YWx1ZS5ldmFsdWF0ZSh0LHIpfX1mdW5jdGlvbiBKZSh0LGUpe3JldHVybiB0PGU/LTE6dD5lPzE6MH1mdW5jdGlvbiBHZSh0KXtpZighdClyZXR1cm4hMDt2YXIgZSxyPXRbMF07cmV0dXJuIHQubGVuZ3RoPD0xP1wiYW55XCIhPT1yOlwiPT1cIj09PXI/SGUodFsxXSx0WzJdLFwiPT1cIik6XCIhPVwiPT09cj9XZShIZSh0WzFdLHRbMl0sXCI9PVwiKSk6XCI8XCI9PT1yfHxcIj5cIj09PXJ8fFwiPD1cIj09PXJ8fFwiPj1cIj09PXI/SGUodFsxXSx0WzJdLHIpOlwiYW55XCI9PT1yPyhlPXQuc2xpY2UoMSksW1wiYW55XCJdLmNvbmNhdChlLm1hcChHZSkpKTpcImFsbFwiPT09cj9bXCJhbGxcIl0uY29uY2F0KHQuc2xpY2UoMSkubWFwKEdlKSk6XCJub25lXCI9PT1yP1tcImFsbFwiXS5jb25jYXQodC5zbGljZSgxKS5tYXAoR2UpLm1hcChXZSkpOlwiaW5cIj09PXI/S2UodFsxXSx0LnNsaWNlKDIpKTpcIiFpblwiPT09cj9XZShLZSh0WzFdLHQuc2xpY2UoMikpKTpcImhhc1wiPT09cj9ZZSh0WzFdKTpcIiFoYXNcIiE9PXJ8fFdlKFllKHRbMV0pKX1mdW5jdGlvbiBIZSh0LGUscil7c3dpdGNoKHQpe2Nhc2VcIiR0eXBlXCI6cmV0dXJuW1wiZmlsdGVyLXR5cGUtXCIrcixlXTtjYXNlXCIkaWRcIjpyZXR1cm5bXCJmaWx0ZXItaWQtXCIrcixlXTtkZWZhdWx0OnJldHVybltcImZpbHRlci1cIityLHQsZV19fWZ1bmN0aW9uIEtlKHQsZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybiExO3N3aXRjaCh0KXtjYXNlXCIkdHlwZVwiOnJldHVybltcImZpbHRlci10eXBlLWluXCIsW1wibGl0ZXJhbFwiLGVdXTtjYXNlXCIkaWRcIjpyZXR1cm5bXCJmaWx0ZXItaWQtaW5cIixbXCJsaXRlcmFsXCIsZV1dO2RlZmF1bHQ6cmV0dXJuIGUubGVuZ3RoPjIwMCYmIWUuc29tZShmdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHQhPXR5cGVvZiBlWzBdfSk/W1wiZmlsdGVyLWluLWxhcmdlXCIsdCxbXCJsaXRlcmFsXCIsZS5zb3J0KEplKV1dOltcImZpbHRlci1pbi1zbWFsbFwiLHQsW1wibGl0ZXJhbFwiLGVdXX19ZnVuY3Rpb24gWWUodCl7c3dpdGNoKHQpe2Nhc2VcIiR0eXBlXCI6cmV0dXJuITA7Y2FzZVwiJGlkXCI6cmV0dXJuW1wiZmlsdGVyLWhhcy1pZFwiXTtkZWZhdWx0OnJldHVybltcImZpbHRlci1oYXNcIix0XX19ZnVuY3Rpb24gV2UodCl7cmV0dXJuW1wiIVwiLHRdfWZ1bmN0aW9uIFFlKHQpe3JldHVybiBaZShaKHQudmFsdWUpKT9VZShVKHt9LHQse2V4cHJlc3Npb25Db250ZXh0OlwiZmlsdGVyXCIsdmFsdWVTcGVjOnt2YWx1ZTpcImJvb2xlYW5cIn19KSk6ZnVuY3Rpb24gdChlKXt2YXIgcj1lLnZhbHVlO3ZhciBuPWUua2V5O2lmKFwiYXJyYXlcIiE9PXdlKHIpKXJldHVybltuZXcgaihuLHIsXCJhcnJheSBleHBlY3RlZCwgXCIrd2UocikrXCIgZm91bmRcIildO3ZhciBpPWUuc3R5bGVTcGVjO3ZhciBhO3ZhciBvPVtdO2lmKHIubGVuZ3RoPDEpcmV0dXJuW25ldyBqKG4scixcImZpbHRlciBhcnJheSBtdXN0IGhhdmUgYXQgbGVhc3QgMSBlbGVtZW50XCIpXTtvPW8uY29uY2F0KE5lKHtrZXk6bitcIlswXVwiLHZhbHVlOnJbMF0sdmFsdWVTcGVjOmkuZmlsdGVyX29wZXJhdG9yLHN0eWxlOmUuc3R5bGUsc3R5bGVTcGVjOmUuc3R5bGVTcGVjfSkpO3N3aXRjaChOKHJbMF0pKXtjYXNlXCI8XCI6Y2FzZVwiPD1cIjpjYXNlXCI+XCI6Y2FzZVwiPj1cIjpyLmxlbmd0aD49MiYmXCIkdHlwZVwiPT09TihyWzFdKSYmby5wdXNoKG5ldyBqKG4sciwnXCIkdHlwZVwiIGNhbm5vdCBiZSB1c2Ugd2l0aCBvcGVyYXRvciBcIicrclswXSsnXCInKSk7Y2FzZVwiPT1cIjpjYXNlXCIhPVwiOjMhPT1yLmxlbmd0aCYmby5wdXNoKG5ldyBqKG4sciwnZmlsdGVyIGFycmF5IGZvciBvcGVyYXRvciBcIicrclswXSsnXCIgbXVzdCBoYXZlIDMgZWxlbWVudHMnKSk7Y2FzZVwiaW5cIjpjYXNlXCIhaW5cIjpyLmxlbmd0aD49MiYmXCJzdHJpbmdcIiE9PShhPXdlKHJbMV0pKSYmby5wdXNoKG5ldyBqKG4rXCJbMV1cIixyWzFdLFwic3RyaW5nIGV4cGVjdGVkLCBcIithK1wiIGZvdW5kXCIpKTtmb3IodmFyIHM9MjtzPHIubGVuZ3RoO3MrKylhPXdlKHJbc10pLFwiJHR5cGVcIj09PU4oclsxXSk/bz1vLmNvbmNhdChOZSh7a2V5Om4rXCJbXCIrcytcIl1cIix2YWx1ZTpyW3NdLHZhbHVlU3BlYzppLmdlb21ldHJ5X3R5cGUsc3R5bGU6ZS5zdHlsZSxzdHlsZVNwZWM6ZS5zdHlsZVNwZWN9KSk6XCJzdHJpbmdcIiE9PWEmJlwibnVtYmVyXCIhPT1hJiZcImJvb2xlYW5cIiE9PWEmJm8ucHVzaChuZXcgaihuK1wiW1wiK3MrXCJdXCIscltzXSxcInN0cmluZywgbnVtYmVyLCBvciBib29sZWFuIGV4cGVjdGVkLCBcIithK1wiIGZvdW5kXCIpKTticmVhaztjYXNlXCJhbnlcIjpjYXNlXCJhbGxcIjpjYXNlXCJub25lXCI6Zm9yKHZhciB1PTE7dTxyLmxlbmd0aDt1Kyspbz1vLmNvbmNhdCh0KHtrZXk6bitcIltcIit1K1wiXVwiLHZhbHVlOnJbdV0sc3R5bGU6ZS5zdHlsZSxzdHlsZVNwZWM6ZS5zdHlsZVNwZWN9KSk7YnJlYWs7Y2FzZVwiaGFzXCI6Y2FzZVwiIWhhc1wiOmE9d2UoclsxXSksMiE9PXIubGVuZ3RoP28ucHVzaChuZXcgaihuLHIsJ2ZpbHRlciBhcnJheSBmb3IgXCInK3JbMF0rJ1wiIG9wZXJhdG9yIG11c3QgaGF2ZSAyIGVsZW1lbnRzJykpOlwic3RyaW5nXCIhPT1hJiZvLnB1c2gobmV3IGoobitcIlsxXVwiLHJbMV0sXCJzdHJpbmcgZXhwZWN0ZWQsIFwiK2ErXCIgZm91bmRcIikpO31yZXR1cm4gb30odCl9ZnVuY3Rpb24gdHIodCxlKXt2YXIgcj10LmtleSxuPXQuc3R5bGUsaT10LnN0eWxlU3BlYyxhPXQudmFsdWUsbz10Lm9iamVjdEtleSxzPWlbZStcIl9cIit0LmxheWVyVHlwZV07aWYoIXMpcmV0dXJuW107dmFyIHU9by5tYXRjaCgvXiguKiktdHJhbnNpdGlvbiQvKTtpZihcInBhaW50XCI9PT1lJiZ1JiZzW3VbMV1dJiZzW3VbMV1dLnRyYW5zaXRpb24pcmV0dXJuIHVyKHtrZXk6cix2YWx1ZTphLHZhbHVlU3BlYzppLnRyYW5zaXRpb24sc3R5bGU6bixzdHlsZVNwZWM6aX0pO3ZhciBsLHA9dC52YWx1ZVNwZWN8fHNbb107aWYoIXApcmV0dXJuW25ldyBqKHIsYSwndW5rbm93biBwcm9wZXJ0eSBcIicrbysnXCInKV07aWYoXCJzdHJpbmdcIj09PXdlKGEpJiZ0ZShwKSYmIXAudG9rZW5zJiYobD0vXnsoW159XSspfSQvLmV4ZWMoYSkpKXJldHVybltuZXcgaihyLGEsJ1wiJytvKydcIiBkb2VzIG5vdCBzdXBwb3J0IGludGVycG9sYXRpb24gc3ludGF4XFxuVXNlIGFuIGlkZW50aXR5IHByb3BlcnR5IGZ1bmN0aW9uIGluc3RlYWQ6IGB7IFwidHlwZVwiOiBcImlkZW50aXR5XCIsIFwicHJvcGVydHlcIjogJytKU09OLnN0cmluZ2lmeShsWzFdKStcIiB9YC5cIildO3ZhciBoPVtdO3JldHVyblwic3ltYm9sXCI9PT10LmxheWVyVHlwZSYmKFwidGV4dC1maWVsZFwiPT09byYmbiYmIW4uZ2x5cGhzJiZoLnB1c2gobmV3IGoocixhLCd1c2Ugb2YgXCJ0ZXh0LWZpZWxkXCIgcmVxdWlyZXMgYSBzdHlsZSBcImdseXBoc1wiIHByb3BlcnR5JykpLFwidGV4dC1mb250XCI9PT1vJiZfZShaKGEpKSYmXCJpZGVudGl0eVwiPT09TihhLnR5cGUpJiZoLnB1c2gobmV3IGoocixhLCdcInRleHQtZm9udFwiIGRvZXMgbm90IHN1cHBvcnQgaWRlbnRpdHkgZnVuY3Rpb25zJykpKSxoLmNvbmNhdCh1cih7a2V5OnQua2V5LHZhbHVlOmEsdmFsdWVTcGVjOnAsc3R5bGU6bixzdHlsZVNwZWM6aSxleHByZXNzaW9uQ29udGV4dDpcInByb3BlcnR5XCIscHJvcGVydHlUeXBlOmUscHJvcGVydHlLZXk6b30pKX1mdW5jdGlvbiBlcih0KXtyZXR1cm4gdHIodCxcInBhaW50XCIpfWZ1bmN0aW9uIHJyKHQpe3JldHVybiB0cih0LFwibGF5b3V0XCIpfWZ1bmN0aW9uIG5yKHQpe3ZhciBlPVtdLHI9dC52YWx1ZSxuPXQua2V5LGk9dC5zdHlsZSxhPXQuc3R5bGVTcGVjO3IudHlwZXx8ci5yZWZ8fGUucHVzaChuZXcgaihuLHIsJ2VpdGhlciBcInR5cGVcIiBvciBcInJlZlwiIGlzIHJlcXVpcmVkJykpO3ZhciBvLHM9TihyLnR5cGUpLHU9TihyLnJlZik7aWYoci5pZClmb3IodmFyIGw9TihyLmlkKSxwPTA7cDx0LmFycmF5SW5kZXg7cCsrKXt2YXIgaD1pLmxheWVyc1twXTtOKGguaWQpPT09bCYmZS5wdXNoKG5ldyBqKG4sci5pZCwnZHVwbGljYXRlIGxheWVyIGlkIFwiJytyLmlkKydcIiwgcHJldmlvdXNseSB1c2VkIGF0IGxpbmUgJytoLmlkLl9fbGluZV9fKSk7fWlmKFwicmVmXCJpbiByKVtcInR5cGVcIixcInNvdXJjZVwiLFwic291cmNlLWxheWVyXCIsXCJmaWx0ZXJcIixcImxheW91dFwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QgaW4gciYmZS5wdXNoKG5ldyBqKG4sclt0XSwnXCInK3QrJ1wiIGlzIHByb2hpYml0ZWQgZm9yIHJlZiBsYXllcnMnKSk7fSksaS5sYXllcnMuZm9yRWFjaChmdW5jdGlvbih0KXtOKHQuaWQpPT09dSYmKG89dCk7fSksbz9vLnJlZj9lLnB1c2gobmV3IGoobixyLnJlZixcInJlZiBjYW5ub3QgcmVmZXJlbmNlIGFub3RoZXIgcmVmIGxheWVyXCIpKTpzPU4oby50eXBlKTplLnB1c2gobmV3IGoobixyLnJlZiwncmVmIGxheWVyIFwiJyt1KydcIiBub3QgZm91bmQnKSk7ZWxzZSBpZihcImJhY2tncm91bmRcIiE9PXMpaWYoci5zb3VyY2Upe3ZhciBjPWkuc291cmNlcyYmaS5zb3VyY2VzW3Iuc291cmNlXSxmPWMmJk4oYy50eXBlKTtjP1widmVjdG9yXCI9PT1mJiZcInJhc3RlclwiPT09cz9lLnB1c2gobmV3IGoobixyLnNvdXJjZSwnbGF5ZXIgXCInK3IuaWQrJ1wiIHJlcXVpcmVzIGEgcmFzdGVyIHNvdXJjZScpKTpcInJhc3RlclwiPT09ZiYmXCJyYXN0ZXJcIiE9PXM/ZS5wdXNoKG5ldyBqKG4sci5zb3VyY2UsJ2xheWVyIFwiJytyLmlkKydcIiByZXF1aXJlcyBhIHZlY3RvciBzb3VyY2UnKSk6XCJ2ZWN0b3JcIiE9PWZ8fHJbXCJzb3VyY2UtbGF5ZXJcIl0/XCJyYXN0ZXItZGVtXCI9PT1mJiZcImhpbGxzaGFkZVwiIT09cz9lLnB1c2gobmV3IGoobixyLnNvdXJjZSxcInJhc3Rlci1kZW0gc291cmNlIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBsYXllciB0eXBlICdoaWxsc2hhZGUnLlwiKSk6XCJsaW5lXCIhPT1zfHwhci5wYWludHx8IXIucGFpbnRbXCJsaW5lLWdyYWRpZW50XCJdfHxcImdlb2pzb25cIj09PWYmJmMubGluZU1ldHJpY3N8fGUucHVzaChuZXcgaihuLHIsJ2xheWVyIFwiJytyLmlkKydcIiBzcGVjaWZpZXMgYSBsaW5lLWdyYWRpZW50LCB3aGljaCByZXF1aXJlcyBhIEdlb0pTT04gc291cmNlIHdpdGggYGxpbmVNZXRyaWNzYCBlbmFibGVkLicpKTplLnB1c2gobmV3IGoobixyLCdsYXllciBcIicrci5pZCsnXCIgbXVzdCBzcGVjaWZ5IGEgXCJzb3VyY2UtbGF5ZXJcIicpKTplLnB1c2gobmV3IGoobixyLnNvdXJjZSwnc291cmNlIFwiJytyLnNvdXJjZSsnXCIgbm90IGZvdW5kJykpO31lbHNlIGUucHVzaChuZXcgaihuLHIsJ21pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgXCJzb3VyY2VcIicpKTtyZXR1cm4gZT1lLmNvbmNhdChEZSh7a2V5Om4sdmFsdWU6cix2YWx1ZVNwZWM6YS5sYXllcixzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlYyxvYmplY3RFbGVtZW50VmFsaWRhdG9yczp7XCIqXCI6ZnVuY3Rpb24oKXtyZXR1cm5bXX0sdHlwZTpmdW5jdGlvbigpe3JldHVybiB1cih7a2V5Om4rXCIudHlwZVwiLHZhbHVlOnIudHlwZSx2YWx1ZVNwZWM6YS5sYXllci50eXBlLHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjLG9iamVjdDpyLG9iamVjdEtleTpcInR5cGVcIn0pfSxmaWx0ZXI6UWUsbGF5b3V0OmZ1bmN0aW9uKHQpe3JldHVybiBEZSh7bGF5ZXI6cixrZXk6dC5rZXksdmFsdWU6dC52YWx1ZSxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlYyxvYmplY3RFbGVtZW50VmFsaWRhdG9yczp7XCIqXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHJyKFUoe2xheWVyVHlwZTpzfSx0KSl9fX0pfSxwYWludDpmdW5jdGlvbih0KXtyZXR1cm4gRGUoe2xheWVyOnIsa2V5OnQua2V5LHZhbHVlOnQudmFsdWUsc3R5bGU6dC5zdHlsZSxzdHlsZVNwZWM6dC5zdHlsZVNwZWMsb2JqZWN0RWxlbWVudFZhbGlkYXRvcnM6e1wiKlwiOmZ1bmN0aW9uKHQpe3JldHVybiBlcihVKHtsYXllclR5cGU6c30sdCkpfX19KX19fSkpfWZ1bmN0aW9uIGlyKHQpe3ZhciBlPXQudmFsdWUscj10LmtleSxuPXQuc3R5bGVTcGVjLGk9dC5zdHlsZTtpZighZS50eXBlKXJldHVybltuZXcgaihyLGUsJ1widHlwZVwiIGlzIHJlcXVpcmVkJyldO3ZhciBhPU4oZS50eXBlKSxvPVtdO3N3aXRjaChhKXtjYXNlXCJ2ZWN0b3JcIjpjYXNlXCJyYXN0ZXJcIjpjYXNlXCJyYXN0ZXItZGVtXCI6aWYobz1vLmNvbmNhdChEZSh7a2V5OnIsdmFsdWU6ZSx2YWx1ZVNwZWM6bltcInNvdXJjZV9cIithLnJlcGxhY2UoXCItXCIsXCJfXCIpXSxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzpufSkpLFwidXJsXCJpbiBlKWZvcih2YXIgcyBpbiBlKVtcInR5cGVcIixcInVybFwiLFwidGlsZVNpemVcIl0uaW5kZXhPZihzKTwwJiZvLnB1c2gobmV3IGoocitcIi5cIitzLGVbc10sJ2Egc291cmNlIHdpdGggYSBcInVybFwiIHByb3BlcnR5IG1heSBub3QgaW5jbHVkZSBhIFwiJytzKydcIiBwcm9wZXJ0eScpKTtyZXR1cm4gbztjYXNlXCJnZW9qc29uXCI6cmV0dXJuIERlKHtrZXk6cix2YWx1ZTplLHZhbHVlU3BlYzpuLnNvdXJjZV9nZW9qc29uLHN0eWxlOmksc3R5bGVTcGVjOm59KTtjYXNlXCJ2aWRlb1wiOnJldHVybiBEZSh7a2V5OnIsdmFsdWU6ZSx2YWx1ZVNwZWM6bi5zb3VyY2VfdmlkZW8sc3R5bGU6aSxzdHlsZVNwZWM6bn0pO2Nhc2VcImltYWdlXCI6cmV0dXJuIERlKHtrZXk6cix2YWx1ZTplLHZhbHVlU3BlYzpuLnNvdXJjZV9pbWFnZSxzdHlsZTppLHN0eWxlU3BlYzpufSk7Y2FzZVwiY2FudmFzXCI6cmV0dXJuIG8ucHVzaChuZXcgaihyLG51bGwsXCJQbGVhc2UgdXNlIHJ1bnRpbWUgQVBJcyB0byBhZGQgY2FudmFzIHNvdXJjZXMsIHJhdGhlciB0aGFuIGluY2x1ZGluZyB0aGVtIGluIHN0eWxlc2hlZXRzLlwiLFwic291cmNlLmNhbnZhc1wiKSksbztkZWZhdWx0OnJldHVybiBOZSh7a2V5OnIrXCIudHlwZVwiLHZhbHVlOmUudHlwZSx2YWx1ZVNwZWM6e3ZhbHVlczpbXCJ2ZWN0b3JcIixcInJhc3RlclwiLFwicmFzdGVyLWRlbVwiLFwiZ2VvanNvblwiLFwidmlkZW9cIixcImltYWdlXCJdfSxzdHlsZTppLHN0eWxlU3BlYzpufSl9fWZ1bmN0aW9uIGFyKHQpe3ZhciBlPXQudmFsdWUscj10LnN0eWxlU3BlYyxuPXIubGlnaHQsaT10LnN0eWxlLGE9W10sbz13ZShlKTtpZih2b2lkIDA9PT1lKXJldHVybiBhO2lmKFwib2JqZWN0XCIhPT1vKXJldHVybiBhPWEuY29uY2F0KFtuZXcgaihcImxpZ2h0XCIsZSxcIm9iamVjdCBleHBlY3RlZCwgXCIrbytcIiBmb3VuZFwiKV0pO2Zvcih2YXIgcyBpbiBlKXt2YXIgdT1zLm1hdGNoKC9eKC4qKS10cmFuc2l0aW9uJC8pO2E9dSYmblt1WzFdXSYmblt1WzFdXS50cmFuc2l0aW9uP2EuY29uY2F0KHVyKHtrZXk6cyx2YWx1ZTplW3NdLHZhbHVlU3BlYzpyLnRyYW5zaXRpb24sc3R5bGU6aSxzdHlsZVNwZWM6cn0pKTpuW3NdP2EuY29uY2F0KHVyKHtrZXk6cyx2YWx1ZTplW3NdLHZhbHVlU3BlYzpuW3NdLHN0eWxlOmksc3R5bGVTcGVjOnJ9KSk6YS5jb25jYXQoW25ldyBqKHMsZVtzXSwndW5rbm93biBwcm9wZXJ0eSBcIicrcysnXCInKV0pO31yZXR1cm4gYX1mdW5jdGlvbiBvcih0KXt2YXIgZT10LnZhbHVlLHI9dC5rZXksbj13ZShlKTtyZXR1cm5cInN0cmluZ1wiIT09bj9bbmV3IGoocixlLFwic3RyaW5nIGV4cGVjdGVkLCBcIituK1wiIGZvdW5kXCIpXTpbXX12YXIgc3I9e1wiKlwiOmZ1bmN0aW9uKCl7cmV0dXJuW119LGFycmF5OnFlLGJvb2xlYW46ZnVuY3Rpb24odCl7dmFyIGU9dC52YWx1ZSxyPXQua2V5LG49d2UoZSk7cmV0dXJuXCJib29sZWFuXCIhPT1uP1tuZXcgaihyLGUsXCJib29sZWFuIGV4cGVjdGVkLCBcIituK1wiIGZvdW5kXCIpXTpbXX0sbnVtYmVyOmplLGNvbG9yOmZ1bmN0aW9uKHQpe3ZhciBlPXQua2V5LHI9dC52YWx1ZSxuPXdlKHIpO3JldHVyblwic3RyaW5nXCIhPT1uP1tuZXcgaihlLHIsXCJjb2xvciBleHBlY3RlZCwgXCIrbitcIiBmb3VuZFwiKV06bnVsbD09PWF0KHIpP1tuZXcgaihlLHIsJ2NvbG9yIGV4cGVjdGVkLCBcIicrcisnXCIgZm91bmQnKV06W119LGNvbnN0YW50czpSLGVudW06TmUsZmlsdGVyOlFlLGZ1bmN0aW9uOlJlLGxheWVyOm5yLG9iamVjdDpEZSxzb3VyY2U6aXIsbGlnaHQ6YXIsc3RyaW5nOm9yfTtmdW5jdGlvbiB1cih0KXt2YXIgZT10LnZhbHVlLHI9dC52YWx1ZVNwZWMsbj10LnN0eWxlU3BlYztyZXR1cm4gci5leHByZXNzaW9uJiZfZShOKGUpKT9SZSh0KTpyLmV4cHJlc3Npb24mJkNlKFooZSkpP1VlKHQpOnIudHlwZSYmc3Jbci50eXBlXT9zcltyLnR5cGVdKHQpOkRlKFUoe30sdCx7dmFsdWVTcGVjOnIudHlwZT9uW3IudHlwZV06cn0pKX1mdW5jdGlvbiBscih0KXt2YXIgZT10LnZhbHVlLHI9dC5rZXksbj1vcih0KTtyZXR1cm4gbi5sZW5ndGg/bjooLTE9PT1lLmluZGV4T2YoXCJ7Zm9udHN0YWNrfVwiKSYmbi5wdXNoKG5ldyBqKHIsZSwnXCJnbHlwaHNcIiB1cmwgbXVzdCBpbmNsdWRlIGEgXCJ7Zm9udHN0YWNrfVwiIHRva2VuJykpLC0xPT09ZS5pbmRleE9mKFwie3JhbmdlfVwiKSYmbi5wdXNoKG5ldyBqKHIsZSwnXCJnbHlwaHNcIiB1cmwgbXVzdCBpbmNsdWRlIGEgXCJ7cmFuZ2V9XCIgdG9rZW4nKSksbil9ZnVuY3Rpb24gcHIodCxlKXtlPWV8fHE7dmFyIHI9W107cmV0dXJuIHI9ci5jb25jYXQodXIoe2tleTpcIlwiLHZhbHVlOnQsdmFsdWVTcGVjOmUuJHJvb3Qsc3R5bGVTcGVjOmUsc3R5bGU6dCxvYmplY3RFbGVtZW50VmFsaWRhdG9yczp7Z2x5cGhzOmxyLFwiKlwiOmZ1bmN0aW9uKCl7cmV0dXJuW119fX0pKSx0LmNvbnN0YW50cyYmKHI9ci5jb25jYXQoUih7a2V5OlwiY29uc3RhbnRzXCIsdmFsdWU6dC5jb25zdGFudHMsc3R5bGU6dCxzdHlsZVNwZWM6ZX0pKSksaHIocil9ZnVuY3Rpb24gaHIodCl7cmV0dXJuW10uY29uY2F0KHQpLnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5saW5lLWUubGluZX0pfWZ1bmN0aW9uIGNyKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBocih0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fXByLnNvdXJjZT1jcihpcikscHIubGlnaHQ9Y3IoYXIpLHByLmxheWVyPWNyKG5yKSxwci5maWx0ZXI9Y3IoUWUpLHByLnBhaW50UHJvcGVydHk9Y3IoZXIpLHByLmxheW91dFByb3BlcnR5PWNyKHJyKTt2YXIgZnI9cHIseXI9cHIubGlnaHQsZHI9cHIucGFpbnRQcm9wZXJ0eSxtcj1wci5sYXlvdXRQcm9wZXJ0eTtmdW5jdGlvbiB2cih0LGUpe3ZhciByPSExO2lmKGUmJmUubGVuZ3RoKWZvcih2YXIgbj0wLGk9ZTtuPGkubGVuZ3RoO24rPTEpe3ZhciBhPWlbbl07dC5maXJlKG5ldyBPKG5ldyBFcnJvcihhLm1lc3NhZ2UpKSkscj0hMDt9cmV0dXJuIHJ9dmFyIGdyPWJyLHhyPTM7ZnVuY3Rpb24gYnIodCxlLHIpe3ZhciBuPXRoaXMuY2VsbHM9W107aWYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXt0aGlzLmFycmF5QnVmZmVyPXQ7dmFyIGk9bmV3IEludDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7dD1pWzBdLGU9aVsxXSxyPWlbMl0sdGhpcy5kPWUrMipyO2Zvcih2YXIgYT0wO2E8dGhpcy5kKnRoaXMuZDthKyspe3ZhciBvPWlbeHIrYV0scz1pW3hyK2ErMV07bi5wdXNoKG89PT1zP251bGw6aS5zdWJhcnJheShvLHMpKTt9dmFyIHU9aVt4cituLmxlbmd0aF0sbD1pW3hyK24ubGVuZ3RoKzFdO3RoaXMua2V5cz1pLnN1YmFycmF5KHUsbCksdGhpcy5iYm94ZXM9aS5zdWJhcnJheShsKSx0aGlzLmluc2VydD10aGlzLl9pbnNlcnRSZWFkb25seTt9ZWxzZXt0aGlzLmQ9ZSsyKnI7Zm9yKHZhciBwPTA7cDx0aGlzLmQqdGhpcy5kO3ArKyluLnB1c2goW10pO3RoaXMua2V5cz1bXSx0aGlzLmJib3hlcz1bXTt9dGhpcy5uPWUsdGhpcy5leHRlbnQ9dCx0aGlzLnBhZGRpbmc9cix0aGlzLnNjYWxlPWUvdCx0aGlzLnVpZD0wO3ZhciBoPXIvZSp0O3RoaXMubWluPS1oLHRoaXMubWF4PXQraDt9YnIucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0LGUscixuLGkpe3RoaXMuX2ZvckVhY2hDZWxsKGUscixuLGksdGhpcy5faW5zZXJ0Q2VsbCx0aGlzLnVpZCsrKSx0aGlzLmtleXMucHVzaCh0KSx0aGlzLmJib3hlcy5wdXNoKGUpLHRoaXMuYmJveGVzLnB1c2gociksdGhpcy5iYm94ZXMucHVzaChuKSx0aGlzLmJib3hlcy5wdXNoKGkpO30sYnIucHJvdG90eXBlLl9pbnNlcnRSZWFkb25seT1mdW5jdGlvbigpe3Rocm93XCJDYW5ub3QgaW5zZXJ0IGludG8gYSBHcmlkSW5kZXggY3JlYXRlZCBmcm9tIGFuIEFycmF5QnVmZmVyLlwifSxici5wcm90b3R5cGUuX2luc2VydENlbGw9ZnVuY3Rpb24odCxlLHIsbixpLGEpe3RoaXMuY2VsbHNbaV0ucHVzaChhKTt9LGJyLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbih0LGUscixuKXt2YXIgaT10aGlzLm1pbixhPXRoaXMubWF4O2lmKHQ8PWkmJmU8PWkmJmE8PXImJmE8PW4pcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMua2V5cyk7dmFyIG89W107cmV0dXJuIHRoaXMuX2ZvckVhY2hDZWxsKHQsZSxyLG4sdGhpcy5fcXVlcnlDZWxsLG8se30pLG99LGJyLnByb3RvdHlwZS5fcXVlcnlDZWxsPWZ1bmN0aW9uKHQsZSxyLG4saSxhLG8pe3ZhciBzPXRoaXMuY2VsbHNbaV07aWYobnVsbCE9PXMpZm9yKHZhciB1PXRoaXMua2V5cyxsPXRoaXMuYmJveGVzLHA9MDtwPHMubGVuZ3RoO3ArKyl7dmFyIGg9c1twXTtpZih2b2lkIDA9PT1vW2hdKXt2YXIgYz00Kmg7dDw9bFtjKzJdJiZlPD1sW2MrM10mJnI+PWxbYyswXSYmbj49bFtjKzFdPyhvW2hdPSEwLGEucHVzaCh1W2hdKSk6b1toXT0hMTt9fX0sYnIucHJvdG90eXBlLl9mb3JFYWNoQ2VsbD1mdW5jdGlvbih0LGUscixuLGksYSxvKXtmb3IodmFyIHM9dGhpcy5fY29udmVydFRvQ2VsbENvb3JkKHQpLHU9dGhpcy5fY29udmVydFRvQ2VsbENvb3JkKGUpLGw9dGhpcy5fY29udmVydFRvQ2VsbENvb3JkKHIpLHA9dGhpcy5fY29udmVydFRvQ2VsbENvb3JkKG4pLGg9cztoPD1sO2grKylmb3IodmFyIGM9dTtjPD1wO2MrKyl7dmFyIGY9dGhpcy5kKmMraDtpZihpLmNhbGwodGhpcyx0LGUscixuLGYsYSxvKSlyZXR1cm59fSxici5wcm90b3R5cGUuX2NvbnZlcnRUb0NlbGxDb29yZD1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLmQtMSxNYXRoLmZsb29yKHQqdGhpcy5zY2FsZSkrdGhpcy5wYWRkaW5nKSl9LGJyLnByb3RvdHlwZS50b0FycmF5QnVmZmVyPWZ1bmN0aW9uKCl7aWYodGhpcy5hcnJheUJ1ZmZlcilyZXR1cm4gdGhpcy5hcnJheUJ1ZmZlcjtmb3IodmFyIHQ9dGhpcy5jZWxscyxlPXhyK3RoaXMuY2VsbHMubGVuZ3RoKzErMSxyPTAsbj0wO248dGhpcy5jZWxscy5sZW5ndGg7bisrKXIrPXRoaXMuY2VsbHNbbl0ubGVuZ3RoO3ZhciBpPW5ldyBJbnQzMkFycmF5KGUrcit0aGlzLmtleXMubGVuZ3RoK3RoaXMuYmJveGVzLmxlbmd0aCk7aVswXT10aGlzLmV4dGVudCxpWzFdPXRoaXMubixpWzJdPXRoaXMucGFkZGluZztmb3IodmFyIGE9ZSxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBzPXRbb107aVt4citvXT1hLGkuc2V0KHMsYSksYSs9cy5sZW5ndGg7fXJldHVybiBpW3hyK3QubGVuZ3RoXT1hLGkuc2V0KHRoaXMua2V5cyxhKSxhKz10aGlzLmtleXMubGVuZ3RoLGlbeHIrdC5sZW5ndGgrMV09YSxpLnNldCh0aGlzLmJib3hlcyxhKSxhKz10aGlzLmJib3hlcy5sZW5ndGgsaS5idWZmZXJ9O3ZhciB3cj1zZWxmLkltYWdlRGF0YSxfcj17fTtmdW5jdGlvbiBBcih0LGUscil7dm9pZCAwPT09ciYmKHI9e30pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX2NsYXNzUmVnaXN0cnlLZXlcIix7dmFsdWU6dCx3cml0ZWFibGU6ITF9KSxfclt0XT17a2xhc3M6ZSxvbWl0OnIub21pdHx8W10sc2hhbGxvdzpyLnNoYWxsb3d8fFtdfTt9Zm9yKHZhciBrciBpbiBBcihcIk9iamVjdFwiLE9iamVjdCksZ3Iuc2VyaWFsaXplPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dC50b0FycmF5QnVmZmVyKCk7cmV0dXJuIGUmJmUucHVzaChyKSxyfSxnci5kZXNlcmlhbGl6ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGdyKHQpfSxBcihcIkdyaWRcIixnciksQXIoXCJDb2xvclwiLG90KSxBcihcIkVycm9yXCIsRXJyb3IpLEFyKFwiU3R5bGVQcm9wZXJ0eUZ1bmN0aW9uXCIsTGUpLEFyKFwiU3R5bGVFeHByZXNzaW9uXCIsSWUse29taXQ6W1wiX2V2YWx1YXRvclwiXX0pLEFyKFwiWm9vbURlcGVuZGVudEV4cHJlc3Npb25cIixQZSksQXIoXCJab29tQ29uc3RhbnRFeHByZXNzaW9uXCIsVGUpLEFyKFwiQ29tcG91bmRFeHByZXNzaW9uXCIsd3Qse29taXQ6W1wiX2V2YWx1YXRlXCJdfSksTnQpTnRba3JdLl9jbGFzc1JlZ2lzdHJ5S2V5fHxBcihcIkV4cHJlc3Npb25fXCIra3IsTnRba3JdKTtmdW5jdGlvbiB6cih0LGUpe2lmKG51bGw9PXR8fFwiYm9vbGVhblwiPT10eXBlb2YgdHx8XCJudW1iZXJcIj09dHlwZW9mIHR8fFwic3RyaW5nXCI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgQm9vbGVhbnx8dCBpbnN0YW5jZW9mIE51bWJlcnx8dCBpbnN0YW5jZW9mIFN0cmluZ3x8dCBpbnN0YW5jZW9mIERhdGV8fHQgaW5zdGFuY2VvZiBSZWdFeHApcmV0dXJuIHQ7aWYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXJldHVybiBlJiZlLnB1c2godCksdDtpZihBcnJheUJ1ZmZlci5pc1ZpZXcodCkpe3ZhciByPXQ7cmV0dXJuIGUmJmUucHVzaChyLmJ1ZmZlcikscn1pZih0IGluc3RhbmNlb2Ygd3IpcmV0dXJuIGUmJmUucHVzaCh0LmRhdGEuYnVmZmVyKSx0O2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgbj1bXSxpPTAsYT10O2k8YS5sZW5ndGg7aSs9MSl7dmFyIG89YVtpXTtuLnB1c2goenIobyxlKSk7fXJldHVybiBufWlmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXt2YXIgcz10LmNvbnN0cnVjdG9yLHU9cy5fY2xhc3NSZWdpc3RyeUtleTtpZighdSl0aHJvdyBuZXcgRXJyb3IoXCJjYW4ndCBzZXJpYWxpemUgb2JqZWN0IG9mIHVucmVnaXN0ZXJlZCBjbGFzc1wiKTt2YXIgbD17fTtpZihzLnNlcmlhbGl6ZSlsLl9zZXJpYWxpemVkPXMuc2VyaWFsaXplKHQsZSk7ZWxzZXtmb3IodmFyIHAgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHApJiYhKF9yW3VdLm9taXQuaW5kZXhPZihwKT49MCkpe3ZhciBoPXRbcF07bFtwXT1fclt1XS5zaGFsbG93LmluZGV4T2YocCk+PTA/aDp6cihoLGUpO310IGluc3RhbmNlb2YgRXJyb3ImJihsLm1lc3NhZ2U9dC5tZXNzYWdlKTt9cmV0dXJue25hbWU6dSxwcm9wZXJ0aWVzOmx9fXRocm93IG5ldyBFcnJvcihcImNhbid0IHNlcmlhbGl6ZSBvYmplY3Qgb2YgdHlwZSBcIit0eXBlb2YgdCl9ZnVuY3Rpb24gU3IodCl7aWYobnVsbD09dHx8XCJib29sZWFuXCI9PXR5cGVvZiB0fHxcIm51bWJlclwiPT10eXBlb2YgdHx8XCJzdHJpbmdcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBCb29sZWFufHx0IGluc3RhbmNlb2YgTnVtYmVyfHx0IGluc3RhbmNlb2YgU3RyaW5nfHx0IGluc3RhbmNlb2YgRGF0ZXx8dCBpbnN0YW5jZW9mIFJlZ0V4cHx8dCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxBcnJheUJ1ZmZlci5pc1ZpZXcodCl8fHQgaW5zdGFuY2VvZiB3cilyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gU3IodCl9KTtpZihcIm9iamVjdFwiPT10eXBlb2YgdCl7dmFyIGU9dCxyPWUubmFtZSxuPWUucHJvcGVydGllcztpZighcil0aHJvdyBuZXcgRXJyb3IoXCJjYW4ndCBkZXNlcmlhbGl6ZSBvYmplY3Qgb2YgYW5vbnltb3VzIGNsYXNzXCIpO3ZhciBpPV9yW3JdLmtsYXNzO2lmKCFpKXRocm93IG5ldyBFcnJvcihcImNhbid0IGRlc2VyaWFsaXplIHVucmVnaXN0ZXJlZCBjbGFzcyBcIityKTtpZihpLmRlc2VyaWFsaXplKXJldHVybiBpLmRlc2VyaWFsaXplKG4uX3NlcmlhbGl6ZWQpO2Zvcih2YXIgYT1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSxvPTAscz1PYmplY3Qua2V5cyhuKTtvPHMubGVuZ3RoO28rPTEpe3ZhciB1PXNbb107YVt1XT1fcltyXS5zaGFsbG93LmluZGV4T2YodSk+PTA/blt1XTpTcihuW3VdKTt9cmV0dXJuIGF9dGhyb3cgbmV3IEVycm9yKFwiY2FuJ3QgZGVzZXJpYWxpemUgb2JqZWN0IG9mIHR5cGUgXCIrdHlwZW9mIHQpfXZhciBNcj1mdW5jdGlvbigpe3RoaXMuZmlyc3Q9ITA7fTtNci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9TWF0aC5mbG9vcih0KTtyZXR1cm4gdGhpcy5maXJzdD8odGhpcy5maXJzdD0hMSx0aGlzLmxhc3RJbnRlZ2VyWm9vbT1yLHRoaXMubGFzdEludGVnZXJab29tVGltZT0wLHRoaXMubGFzdFpvb209dCx0aGlzLmxhc3RGbG9vclpvb209ciwhMCk6KHRoaXMubGFzdEZsb29yWm9vbT5yPyh0aGlzLmxhc3RJbnRlZ2VyWm9vbT1yKzEsdGhpcy5sYXN0SW50ZWdlclpvb21UaW1lPWUpOnRoaXMubGFzdEZsb29yWm9vbTxyJiYodGhpcy5sYXN0SW50ZWdlclpvb209cix0aGlzLmxhc3RJbnRlZ2VyWm9vbVRpbWU9ZSksdCE9PXRoaXMubGFzdFpvb20mJih0aGlzLmxhc3Rab29tPXQsdGhpcy5sYXN0Rmxvb3Jab29tPXIsITApKX07dmFyIEJyPXtcIkxhdGluLTEgU3VwcGxlbWVudFwiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xMjgmJnQ8PTI1NX0sQXJhYmljOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xNTM2JiZ0PD0xNzkxfSxcIkFyYWJpYyBTdXBwbGVtZW50XCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTE4NzImJnQ8PTE5MTl9LFwiQXJhYmljIEV4dGVuZGVkLUFcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49MjIwOCYmdDw9MjMwM30sXCJIYW5ndWwgSmFtb1wiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj00MzUyJiZ0PD00NjA3fSxcIlVuaWZpZWQgQ2FuYWRpYW4gQWJvcmlnaW5hbCBTeWxsYWJpY3NcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49NTEyMCYmdDw9NTc1OX0sS2htZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTYwMTYmJnQ8PTYxNDN9LFwiVW5pZmllZCBDYW5hZGlhbiBBYm9yaWdpbmFsIFN5bGxhYmljcyBFeHRlbmRlZFwiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj02MzIwJiZ0PD02Mzk5fSxcIkdlbmVyYWwgUHVuY3R1YXRpb25cIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49ODE5MiYmdDw9ODMwM30sXCJMZXR0ZXJsaWtlIFN5bWJvbHNcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49ODQ0OCYmdDw9ODUyN30sXCJOdW1iZXIgRm9ybXNcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49ODUyOCYmdDw9ODU5MX0sXCJNaXNjZWxsYW5lb3VzIFRlY2huaWNhbFwiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj04OTYwJiZ0PD05MjE1fSxcIkNvbnRyb2wgUGljdHVyZXNcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49OTIxNiYmdDw9OTI3OX0sXCJPcHRpY2FsIENoYXJhY3RlciBSZWNvZ25pdGlvblwiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj05MjgwJiZ0PD05MzExfSxcIkVuY2xvc2VkIEFscGhhbnVtZXJpY3NcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49OTMxMiYmdDw9OTQ3MX0sXCJHZW9tZXRyaWMgU2hhcGVzXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTk2MzImJnQ8PTk3Mjd9LFwiTWlzY2VsbGFuZW91cyBTeW1ib2xzXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTk3MjgmJnQ8PTk5ODN9LFwiTWlzY2VsbGFuZW91cyBTeW1ib2xzIGFuZCBBcnJvd3NcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49MTEwMDgmJnQ8PTExMjYzfSxcIkNKSyBSYWRpY2FscyBTdXBwbGVtZW50XCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTExOTA0JiZ0PD0xMjAzMX0sXCJLYW5neGkgUmFkaWNhbHNcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49MTIwMzImJnQ8PTEyMjU1fSxcIklkZW9ncmFwaGljIERlc2NyaXB0aW9uIENoYXJhY3RlcnNcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49MTIyNzImJnQ8PTEyMjg3fSxcIkNKSyBTeW1ib2xzIGFuZCBQdW5jdHVhdGlvblwiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xMjI4OCYmdDw9MTIzNTF9LEhpcmFnYW5hOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xMjM1MiYmdDw9MTI0NDd9LEthdGFrYW5hOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xMjQ0OCYmdDw9MTI1NDN9LEJvcG9tb2ZvOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xMjU0NCYmdDw9MTI1OTF9LFwiSGFuZ3VsIENvbXBhdGliaWxpdHkgSmFtb1wiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xMjU5MiYmdDw9MTI2ODd9LEthbmJ1bjpmdW5jdGlvbih0KXtyZXR1cm4gdD49MTI2ODgmJnQ8PTEyNzAzfSxcIkJvcG9tb2ZvIEV4dGVuZGVkXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTEyNzA0JiZ0PD0xMjczNX0sXCJDSksgU3Ryb2tlc1wiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xMjczNiYmdDw9MTI3ODN9LFwiS2F0YWthbmEgUGhvbmV0aWMgRXh0ZW5zaW9uc1wiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xMjc4NCYmdDw9MTI3OTl9LFwiRW5jbG9zZWQgQ0pLIExldHRlcnMgYW5kIE1vbnRoc1wiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xMjgwMCYmdDw9MTMwNTV9LFwiQ0pLIENvbXBhdGliaWxpdHlcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49MTMwNTYmJnQ8PTEzMzExfSxcIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEFcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49MTMzMTImJnQ8PTE5OTAzfSxcIllpamluZyBIZXhhZ3JhbSBTeW1ib2xzXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTE5OTA0JiZ0PD0xOTk2N30sXCJDSksgVW5pZmllZCBJZGVvZ3JhcGhzXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTE5OTY4JiZ0PD00MDk1OX0sXCJZaSBTeWxsYWJsZXNcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49NDA5NjAmJnQ8PTQyMTI3fSxcIllpIFJhZGljYWxzXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTQyMTI4JiZ0PD00MjE5MX0sXCJIYW5ndWwgSmFtbyBFeHRlbmRlZC1BXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTQzMzYwJiZ0PD00MzM5MX0sXCJIYW5ndWwgU3lsbGFibGVzXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTQ0MDMyJiZ0PD01NTIxNX0sXCJIYW5ndWwgSmFtbyBFeHRlbmRlZC1CXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTU1MjE2JiZ0PD01NTI5NX0sXCJQcml2YXRlIFVzZSBBcmVhXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTU3MzQ0JiZ0PD02Mzc0M30sXCJDSksgQ29tcGF0aWJpbGl0eSBJZGVvZ3JhcGhzXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTYzNzQ0JiZ0PD02NDI1NX0sXCJBcmFiaWMgUHJlc2VudGF0aW9uIEZvcm1zLUFcIjpmdW5jdGlvbih0KXtyZXR1cm4gdD49NjQzMzYmJnQ8PTY1MDIzfSxcIlZlcnRpY2FsIEZvcm1zXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTY1MDQwJiZ0PD02NTA1NX0sXCJDSksgQ29tcGF0aWJpbGl0eSBGb3Jtc1wiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj02NTA3MiYmdDw9NjUxMDN9LFwiU21hbGwgRm9ybSBWYXJpYW50c1wiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj02NTEwNCYmdDw9NjUxMzV9LFwiQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1CXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTY1MTM2JiZ0PD02NTI3OX0sXCJIYWxmd2lkdGggYW5kIEZ1bGx3aWR0aCBGb3Jtc1wiOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj02NTI4MCYmdDw9NjU1MTl9fTtmdW5jdGlvbiBWcih0KXtmb3IodmFyIGU9MCxyPXQ7ZTxyLmxlbmd0aDtlKz0xKXtpZihDcihyW2VdLmNoYXJDb2RlQXQoMCkpKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIElyKHQpe3JldHVybiFCci5BcmFiaWModCkmJighQnJbXCJBcmFiaWMgU3VwcGxlbWVudFwiXSh0KSYmKCFCcltcIkFyYWJpYyBFeHRlbmRlZC1BXCJdKHQpJiYoIUJyW1wiQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1BXCJdKHQpJiYhQnJbXCJBcmFiaWMgUHJlc2VudGF0aW9uIEZvcm1zLUJcIl0odCkpKSl9ZnVuY3Rpb24gQ3IodCl7cmV0dXJuIDc0Nj09PXR8fDc0Nz09PXR8fCEodDw0MzUyKSYmKCEhQnJbXCJCb3BvbW9mbyBFeHRlbmRlZFwiXSh0KXx8KCEhQnIuQm9wb21vZm8odCl8fCghKCFCcltcIkNKSyBDb21wYXRpYmlsaXR5IEZvcm1zXCJdKHQpfHx0Pj02NTA5NyYmdDw9NjUxMDMpfHwoISFCcltcIkNKSyBDb21wYXRpYmlsaXR5IElkZW9ncmFwaHNcIl0odCl8fCghIUJyW1wiQ0pLIENvbXBhdGliaWxpdHlcIl0odCl8fCghIUJyW1wiQ0pLIFJhZGljYWxzIFN1cHBsZW1lbnRcIl0odCl8fCghIUJyW1wiQ0pLIFN0cm9rZXNcIl0odCl8fCghKCFCcltcIkNKSyBTeW1ib2xzIGFuZCBQdW5jdHVhdGlvblwiXSh0KXx8dD49MTIyOTYmJnQ8PTEyMzA1fHx0Pj0xMjMwOCYmdDw9MTIzMTl8fDEyMzM2PT09dCl8fCghIUJyW1wiQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyBFeHRlbnNpb24gQVwiXSh0KXx8KCEhQnJbXCJDSksgVW5pZmllZCBJZGVvZ3JhcGhzXCJdKHQpfHwoISFCcltcIkVuY2xvc2VkIENKSyBMZXR0ZXJzIGFuZCBNb250aHNcIl0odCl8fCghIUJyW1wiSGFuZ3VsIENvbXBhdGliaWxpdHkgSmFtb1wiXSh0KXx8KCEhQnJbXCJIYW5ndWwgSmFtbyBFeHRlbmRlZC1BXCJdKHQpfHwoISFCcltcIkhhbmd1bCBKYW1vIEV4dGVuZGVkLUJcIl0odCl8fCghIUJyW1wiSGFuZ3VsIEphbW9cIl0odCl8fCghIUJyW1wiSGFuZ3VsIFN5bGxhYmxlc1wiXSh0KXx8KCEhQnIuSGlyYWdhbmEodCl8fCghIUJyW1wiSWRlb2dyYXBoaWMgRGVzY3JpcHRpb24gQ2hhcmFjdGVyc1wiXSh0KXx8KCEhQnIuS2FuYnVuKHQpfHwoISFCcltcIkthbmd4aSBSYWRpY2Fsc1wiXSh0KXx8KCEhQnJbXCJLYXRha2FuYSBQaG9uZXRpYyBFeHRlbnNpb25zXCJdKHQpfHwoISghQnIuS2F0YWthbmEodCl8fDEyNTQwPT09dCl8fCghKCFCcltcIkhhbGZ3aWR0aCBhbmQgRnVsbHdpZHRoIEZvcm1zXCJdKHQpfHw2NTI4OD09PXR8fDY1Mjg5PT09dHx8NjUyOTM9PT10fHx0Pj02NTMwNiYmdDw9NjUzMTB8fDY1MzM5PT09dHx8NjUzNDE9PT10fHw2NTM0Mz09PXR8fHQ+PTY1MzcxJiZ0PD02NTUwM3x8NjU1MDc9PT10fHx0Pj02NTUxMiYmdDw9NjU1MTkpfHwoISghQnJbXCJTbWFsbCBGb3JtIFZhcmlhbnRzXCJdKHQpfHx0Pj02NTExMiYmdDw9NjUxMTh8fHQ+PTY1MTIzJiZ0PD02NTEyNil8fCghIUJyW1wiVW5pZmllZCBDYW5hZGlhbiBBYm9yaWdpbmFsIFN5bGxhYmljc1wiXSh0KXx8KCEhQnJbXCJVbmlmaWVkIENhbmFkaWFuIEFib3JpZ2luYWwgU3lsbGFiaWNzIEV4dGVuZGVkXCJdKHQpfHwoISFCcltcIlZlcnRpY2FsIEZvcm1zXCJdKHQpfHwoISFCcltcIllpamluZyBIZXhhZ3JhbSBTeW1ib2xzXCJdKHQpfHwoISFCcltcIllpIFN5bGxhYmxlc1wiXSh0KXx8ISFCcltcIllpIFJhZGljYWxzXCJdKHQpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSl9ZnVuY3Rpb24gRXIodCl7cmV0dXJuIShDcih0KXx8ZnVuY3Rpb24odCl7cmV0dXJuISEoQnJbXCJMYXRpbi0xIFN1cHBsZW1lbnRcIl0odCkmJigxNjc9PT10fHwxNjk9PT10fHwxNzQ9PT10fHwxNzc9PT10fHwxODg9PT10fHwxODk9PT10fHwxOTA9PT10fHwyMTU9PT10fHwyNDc9PT10KXx8QnJbXCJHZW5lcmFsIFB1bmN0dWF0aW9uXCJdKHQpJiYoODIxND09PXR8fDgyMjQ9PT10fHw4MjI1PT09dHx8ODI0MD09PXR8fDgyNDE9PT10fHw4MjUxPT09dHx8ODI1Mj09PXR8fDgyNTg9PT10fHw4MjYzPT09dHx8ODI2ND09PXR8fDgyNjU9PT10fHw4MjczPT09dCl8fEJyW1wiTGV0dGVybGlrZSBTeW1ib2xzXCJdKHQpfHxCcltcIk51bWJlciBGb3Jtc1wiXSh0KXx8QnJbXCJNaXNjZWxsYW5lb3VzIFRlY2huaWNhbFwiXSh0KSYmKHQ+PTg5NjAmJnQ8PTg5Njd8fHQ+PTg5NzImJnQ8PTg5OTF8fHQ+PTg5OTYmJnQ8PTllM3x8OTAwMz09PXR8fHQ+PTkwODUmJnQ8PTkxMTR8fHQ+PTkxNTAmJnQ8PTkxNjV8fDkxNjc9PT10fHx0Pj05MTY5JiZ0PD05MTc5fHx0Pj05MTg2JiZ0PD05MjE1KXx8QnJbXCJDb250cm9sIFBpY3R1cmVzXCJdKHQpJiY5MjUxIT09dHx8QnJbXCJPcHRpY2FsIENoYXJhY3RlciBSZWNvZ25pdGlvblwiXSh0KXx8QnJbXCJFbmNsb3NlZCBBbHBoYW51bWVyaWNzXCJdKHQpfHxCcltcIkdlb21ldHJpYyBTaGFwZXNcIl0odCl8fEJyW1wiTWlzY2VsbGFuZW91cyBTeW1ib2xzXCJdKHQpJiYhKHQ+PTk3NTQmJnQ8PTk3NTkpfHxCcltcIk1pc2NlbGxhbmVvdXMgU3ltYm9scyBhbmQgQXJyb3dzXCJdKHQpJiYodD49MTEwMjYmJnQ8PTExMDU1fHx0Pj0xMTA4OCYmdDw9MTEwOTd8fHQ+PTExMTkyJiZ0PD0xMTI0Myl8fEJyW1wiQ0pLIFN5bWJvbHMgYW5kIFB1bmN0dWF0aW9uXCJdKHQpfHxCci5LYXRha2FuYSh0KXx8QnJbXCJQcml2YXRlIFVzZSBBcmVhXCJdKHQpfHxCcltcIkNKSyBDb21wYXRpYmlsaXR5IEZvcm1zXCJdKHQpfHxCcltcIlNtYWxsIEZvcm0gVmFyaWFudHNcIl0odCl8fEJyW1wiSGFsZndpZHRoIGFuZCBGdWxsd2lkdGggRm9ybXNcIl0odCl8fDg3MzQ9PT10fHw4NzU2PT09dHx8ODc1Nz09PXR8fHQ+PTk5ODQmJnQ8PTEwMDg3fHx0Pj0xMDEwMiYmdDw9MTAxMzF8fDY1NTMyPT09dHx8NjU1MzM9PT10KX0odCkpfWZ1bmN0aW9uIFRyKHQsZSl7cmV0dXJuISghZSYmKHQ+PTE0MjQmJnQ8PTIzMDN8fEJyW1wiQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1BXCJdKHQpfHxCcltcIkFyYWJpYyBQcmVzZW50YXRpb24gRm9ybXMtQlwiXSh0KSkpJiYhKHQ+PTIzMDQmJnQ8PTM1ODN8fHQ+PTM4NDAmJnQ8PTQyNTV8fEJyLktobWVyKHQpKX12YXIgUHIsRnI9ITEsTHI9bnVsbCxPcj0hMSxEcj1uZXcgRCxxcj17YXBwbHlBcmFiaWNTaGFwaW5nOm51bGwscHJvY2Vzc0JpZGlyZWN0aW9uYWxUZXh0Om51bGwsaXNMb2FkZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gT3J8fG51bGwhPXFyLmFwcGx5QXJhYmljU2hhcGluZ319LGpyPWZ1bmN0aW9uKHQsZSl7dGhpcy56b29tPXQsZT8odGhpcy5ub3c9ZS5ub3csdGhpcy5mYWRlRHVyYXRpb249ZS5mYWRlRHVyYXRpb24sdGhpcy56b29tSGlzdG9yeT1lLnpvb21IaXN0b3J5LHRoaXMudHJhbnNpdGlvbj1lLnRyYW5zaXRpb24pOih0aGlzLm5vdz0wLHRoaXMuZmFkZUR1cmF0aW9uPTAsdGhpcy56b29tSGlzdG9yeT1uZXcgTXIsdGhpcy50cmFuc2l0aW9uPXt9KTt9O2pyLnByb3RvdHlwZS5pc1N1cHBvcnRlZFNjcmlwdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9MCxuPXQ7cjxuLmxlbmd0aDtyKz0xKWlmKCFUcihuW3JdLmNoYXJDb2RlQXQoMCksZSkpcmV0dXJuITE7cmV0dXJuITB9KHQscXIuaXNMb2FkZWQoKSl9LGpyLnByb3RvdHlwZS5jcm9zc0ZhZGluZ0ZhY3Rvcj1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5mYWRlRHVyYXRpb24/MTpNYXRoLm1pbigodGhpcy5ub3ctdGhpcy56b29tSGlzdG9yeS5sYXN0SW50ZWdlclpvb21UaW1lKS90aGlzLmZhZGVEdXJhdGlvbiwxKX07dmFyIFJyPWZ1bmN0aW9uKHQsZSl7dGhpcy5wcm9wZXJ0eT10LHRoaXMudmFsdWU9ZSx0aGlzLmV4cHJlc3Npb249T2Uodm9pZCAwPT09ZT90LnNwZWNpZmljYXRpb24uZGVmYXVsdDplLHQuc3BlY2lmaWNhdGlvbik7fTtSci5wcm90b3R5cGUuaXNEYXRhRHJpdmVuPWZ1bmN0aW9uKCl7cmV0dXJuXCJzb3VyY2VcIj09PXRoaXMuZXhwcmVzc2lvbi5raW5kfHxcImNvbXBvc2l0ZVwiPT09dGhpcy5leHByZXNzaW9uLmtpbmR9LFJyLnByb3RvdHlwZS5wb3NzaWJseUV2YWx1YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnByb3BlcnR5LnBvc3NpYmx5RXZhbHVhdGUodGhpcyx0KX07dmFyIFVyPWZ1bmN0aW9uKHQpe3RoaXMucHJvcGVydHk9dCx0aGlzLnZhbHVlPW5ldyBScih0LHZvaWQgMCk7fTtVci5wcm90b3R5cGUudHJhbnNpdGlvbmVkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBacih0aGlzLnByb3BlcnR5LHRoaXMudmFsdWUsZSxnKHt9LHQudHJhbnNpdGlvbix0aGlzLnRyYW5zaXRpb24pLHQubm93KX0sVXIucHJvdG90eXBlLnVudHJhbnNpdGlvbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBacih0aGlzLnByb3BlcnR5LHRoaXMudmFsdWUsbnVsbCx7fSwwKX07dmFyIE5yPWZ1bmN0aW9uKHQpe3RoaXMuX3Byb3BlcnRpZXM9dCx0aGlzLl92YWx1ZXM9T2JqZWN0LmNyZWF0ZSh0LmRlZmF1bHRUcmFuc2l0aW9uYWJsZVByb3BlcnR5VmFsdWVzKTt9O05yLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbih0KXtyZXR1cm4geih0aGlzLl92YWx1ZXNbdF0udmFsdWUudmFsdWUpfSxOci5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCxlKXt0aGlzLl92YWx1ZXMuaGFzT3duUHJvcGVydHkodCl8fCh0aGlzLl92YWx1ZXNbdF09bmV3IFVyKHRoaXMuX3ZhbHVlc1t0XS5wcm9wZXJ0eSkpLHRoaXMuX3ZhbHVlc1t0XS52YWx1ZT1uZXcgUnIodGhpcy5fdmFsdWVzW3RdLnByb3BlcnR5LG51bGw9PT1lP3ZvaWQgMDp6KGUpKTt9LE5yLnByb3RvdHlwZS5nZXRUcmFuc2l0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB6KHRoaXMuX3ZhbHVlc1t0XS50cmFuc2l0aW9uKX0sTnIucHJvdG90eXBlLnNldFRyYW5zaXRpb249ZnVuY3Rpb24odCxlKXt0aGlzLl92YWx1ZXMuaGFzT3duUHJvcGVydHkodCl8fCh0aGlzLl92YWx1ZXNbdF09bmV3IFVyKHRoaXMuX3ZhbHVlc1t0XS5wcm9wZXJ0eSkpLHRoaXMuX3ZhbHVlc1t0XS50cmFuc2l0aW9uPXooZSl8fHZvaWQgMDt9LE5yLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9e30sZT0wLHI9T2JqZWN0LmtleXModGhpcy5fdmFsdWVzKTtlPHIubGVuZ3RoO2UrPTEpe3ZhciBuPXJbZV0saT10aGlzLmdldFZhbHVlKG4pO3ZvaWQgMCE9PWkmJih0W25dPWkpO3ZhciBhPXRoaXMuZ2V0VHJhbnNpdGlvbihuKTt2b2lkIDAhPT1hJiYodFtuK1wiLXRyYW5zaXRpb25cIl09YSk7fXJldHVybiB0fSxOci5wcm90b3R5cGUudHJhbnNpdGlvbmVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPW5ldyBYcih0aGlzLl9wcm9wZXJ0aWVzKSxuPTAsaT1PYmplY3Qua2V5cyh0aGlzLl92YWx1ZXMpO248aS5sZW5ndGg7bis9MSl7dmFyIGE9aVtuXTtyLl92YWx1ZXNbYV09dGhpcy5fdmFsdWVzW2FdLnRyYW5zaXRpb25lZCh0LGUuX3ZhbHVlc1thXSk7fXJldHVybiByfSxOci5wcm90b3R5cGUudW50cmFuc2l0aW9uZWQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IFhyKHRoaXMuX3Byb3BlcnRpZXMpLGU9MCxyPU9iamVjdC5rZXlzKHRoaXMuX3ZhbHVlcyk7ZTxyLmxlbmd0aDtlKz0xKXt2YXIgbj1yW2VdO3QuX3ZhbHVlc1tuXT10aGlzLl92YWx1ZXNbbl0udW50cmFuc2l0aW9uZWQoKTt9cmV0dXJuIHR9O3ZhciBacj1mdW5jdGlvbih0LGUscixuLGkpe3RoaXMucHJvcGVydHk9dCx0aGlzLnZhbHVlPWUsdGhpcy5iZWdpbj1pK24uZGVsYXl8fDAsdGhpcy5lbmQ9dGhpcy5iZWdpbituLmR1cmF0aW9ufHwwLHQuc3BlY2lmaWNhdGlvbi50cmFuc2l0aW9uJiYobi5kZWxheXx8bi5kdXJhdGlvbikmJih0aGlzLnByaW9yPXIpO307WnIucHJvdG90eXBlLnBvc3NpYmx5RXZhbHVhdGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub3d8fDAscj10aGlzLnZhbHVlLnBvc3NpYmx5RXZhbHVhdGUodCksbj10aGlzLnByaW9yO2lmKG4pe2lmKGU+dGhpcy5lbmQpcmV0dXJuIHRoaXMucHJpb3I9bnVsbCxyO2lmKHRoaXMudmFsdWUuaXNEYXRhRHJpdmVuKCkpcmV0dXJuIHRoaXMucHJpb3I9bnVsbCxyO2lmKGU8dGhpcy5iZWdpbilyZXR1cm4gbi5wb3NzaWJseUV2YWx1YXRlKHQpO3ZhciBpPShlLXRoaXMuYmVnaW4pLyh0aGlzLmVuZC10aGlzLmJlZ2luKTtyZXR1cm4gdGhpcy5wcm9wZXJ0eS5pbnRlcnBvbGF0ZShuLnBvc3NpYmx5RXZhbHVhdGUodCkscixmdW5jdGlvbih0KXtpZih0PD0wKXJldHVybiAwO2lmKHQ+PTEpcmV0dXJuIDE7dmFyIGU9dCp0LHI9ZSp0O3JldHVybiA0Kih0PC41P3I6MyoodC1lKStyLS43NSl9KGkpKX1yZXR1cm4gcn07dmFyIFhyPWZ1bmN0aW9uKHQpe3RoaXMuX3Byb3BlcnRpZXM9dCx0aGlzLl92YWx1ZXM9T2JqZWN0LmNyZWF0ZSh0LmRlZmF1bHRUcmFuc2l0aW9uaW5nUHJvcGVydHlWYWx1ZXMpO307WHIucHJvdG90eXBlLnBvc3NpYmx5RXZhbHVhdGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBHcih0aGlzLl9wcm9wZXJ0aWVzKSxyPTAsbj1PYmplY3Qua2V5cyh0aGlzLl92YWx1ZXMpO3I8bi5sZW5ndGg7cis9MSl7dmFyIGk9bltyXTtlLl92YWx1ZXNbaV09dGhpcy5fdmFsdWVzW2ldLnBvc3NpYmx5RXZhbHVhdGUodCk7fXJldHVybiBlfSxYci5wcm90b3R5cGUuaGFzVHJhbnNpdGlvbj1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9T2JqZWN0LmtleXModGhpcy5fdmFsdWVzKTt0PGUubGVuZ3RoO3QrPTEpe3ZhciByPWVbdF07aWYodGhpcy5fdmFsdWVzW3JdLnByaW9yKXJldHVybiEwfXJldHVybiExfTt2YXIgJHI9ZnVuY3Rpb24odCl7dGhpcy5fcHJvcGVydGllcz10LHRoaXMuX3ZhbHVlcz1PYmplY3QuY3JlYXRlKHQuZGVmYXVsdFByb3BlcnR5VmFsdWVzKTt9OyRyLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbih0KXtyZXR1cm4geih0aGlzLl92YWx1ZXNbdF0udmFsdWUpfSwkci5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCxlKXt0aGlzLl92YWx1ZXNbdF09bmV3IFJyKHRoaXMuX3ZhbHVlc1t0XS5wcm9wZXJ0eSxudWxsPT09ZT92b2lkIDA6eihlKSk7fSwkci5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXt9LGU9MCxyPU9iamVjdC5rZXlzKHRoaXMuX3ZhbHVlcyk7ZTxyLmxlbmd0aDtlKz0xKXt2YXIgbj1yW2VdLGk9dGhpcy5nZXRWYWx1ZShuKTt2b2lkIDAhPT1pJiYodFtuXT1pKTt9cmV0dXJuIHR9LCRyLnByb3RvdHlwZS5wb3NzaWJseUV2YWx1YXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgR3IodGhpcy5fcHJvcGVydGllcykscj0wLG49T2JqZWN0LmtleXModGhpcy5fdmFsdWVzKTtyPG4ubGVuZ3RoO3IrPTEpe3ZhciBpPW5bcl07ZS5fdmFsdWVzW2ldPXRoaXMuX3ZhbHVlc1tpXS5wb3NzaWJseUV2YWx1YXRlKHQpO31yZXR1cm4gZX07dmFyIEpyPWZ1bmN0aW9uKHQsZSxyKXt0aGlzLnByb3BlcnR5PXQsdGhpcy52YWx1ZT1lLHRoaXMuZ2xvYmFscz1yO307SnIucHJvdG90eXBlLmlzQ29uc3RhbnQ9ZnVuY3Rpb24oKXtyZXR1cm5cImNvbnN0YW50XCI9PT10aGlzLnZhbHVlLmtpbmR9LEpyLnByb3RvdHlwZS5jb25zdGFudE9yPWZ1bmN0aW9uKHQpe3JldHVyblwiY29uc3RhbnRcIj09PXRoaXMudmFsdWUua2luZD90aGlzLnZhbHVlLnZhbHVlOnR9LEpyLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnByb3BlcnR5LmV2YWx1YXRlKHRoaXMudmFsdWUsdGhpcy5nbG9iYWxzLHQsZSl9O3ZhciBHcj1mdW5jdGlvbih0KXt0aGlzLl9wcm9wZXJ0aWVzPXQsdGhpcy5fdmFsdWVzPU9iamVjdC5jcmVhdGUodC5kZWZhdWx0UG9zc2libHlFdmFsdWF0ZWRWYWx1ZXMpO307R3IucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdmFsdWVzW3RdfTt2YXIgSHI9ZnVuY3Rpb24odCl7dGhpcy5zcGVjaWZpY2F0aW9uPXQ7fTtIci5wcm90b3R5cGUucG9zc2libHlFdmFsdWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiB0LmV4cHJlc3Npb24uZXZhbHVhdGUoZSl9LEhyLnByb3RvdHlwZS5pbnRlcnBvbGF0ZT1mdW5jdGlvbih0LGUscil7dmFyIG49SXRbdGhpcy5zcGVjaWZpY2F0aW9uLnR5cGVdO3JldHVybiBuP24odCxlLHIpOnR9O3ZhciBLcj1mdW5jdGlvbih0KXt0aGlzLnNwZWNpZmljYXRpb249dDt9O0tyLnByb3RvdHlwZS5wb3NzaWJseUV2YWx1YXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJjb25zdGFudFwiPT09dC5leHByZXNzaW9uLmtpbmR8fFwiY2FtZXJhXCI9PT10LmV4cHJlc3Npb24ua2luZD9uZXcgSnIodGhpcyx7a2luZDpcImNvbnN0YW50XCIsdmFsdWU6dC5leHByZXNzaW9uLmV2YWx1YXRlKGUpfSxlKTpuZXcgSnIodGhpcyx0LmV4cHJlc3Npb24sZSl9LEtyLnByb3RvdHlwZS5pbnRlcnBvbGF0ZT1mdW5jdGlvbih0LGUscil7aWYoXCJjb25zdGFudFwiIT09dC52YWx1ZS5raW5kfHxcImNvbnN0YW50XCIhPT1lLnZhbHVlLmtpbmQpcmV0dXJuIHQ7aWYodm9pZCAwPT09dC52YWx1ZS52YWx1ZXx8dm9pZCAwPT09ZS52YWx1ZS52YWx1ZSlyZXR1cm4gbmV3IEpyKHRoaXMse2tpbmQ6XCJjb25zdGFudFwiLHZhbHVlOnZvaWQgMH0sdC5nbG9iYWxzKTt2YXIgbj1JdFt0aGlzLnNwZWNpZmljYXRpb24udHlwZV07cmV0dXJuIG4/bmV3IEpyKHRoaXMse2tpbmQ6XCJjb25zdGFudFwiLHZhbHVlOm4odC52YWx1ZS52YWx1ZSxlLnZhbHVlLnZhbHVlLHIpfSx0Lmdsb2JhbHMpOnR9LEtyLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih0LGUscixuKXtyZXR1cm5cImNvbnN0YW50XCI9PT10LmtpbmQ/dC52YWx1ZTp0LmV2YWx1YXRlKGUscixuKX07dmFyIFlyPWZ1bmN0aW9uKHQpe3RoaXMuc3BlY2lmaWNhdGlvbj10O307WXIucHJvdG90eXBlLnBvc3NpYmx5RXZhbHVhdGU9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDAhPT10LnZhbHVlKXtpZihcImNvbnN0YW50XCI9PT10LmV4cHJlc3Npb24ua2luZCl7dmFyIHI9dC5leHByZXNzaW9uLmV2YWx1YXRlKGUpO3JldHVybiB0aGlzLl9jYWxjdWxhdGUocixyLHIsZSl9cmV0dXJuIHRoaXMuX2NhbGN1bGF0ZSh0LmV4cHJlc3Npb24uZXZhbHVhdGUobmV3IGpyKE1hdGguZmxvb3IoZS56b29tLTEpLGUpKSx0LmV4cHJlc3Npb24uZXZhbHVhdGUobmV3IGpyKE1hdGguZmxvb3IoZS56b29tKSxlKSksdC5leHByZXNzaW9uLmV2YWx1YXRlKG5ldyBqcihNYXRoLmZsb29yKGUuem9vbSsxKSxlKSksZSl9fSxZci5wcm90b3R5cGUuX2NhbGN1bGF0ZT1mdW5jdGlvbih0LGUscixuKXt2YXIgaT1uLnpvb20sYT1pLU1hdGguZmxvb3IoaSksbz1uLmNyb3NzRmFkaW5nRmFjdG9yKCk7cmV0dXJuIGk+bi56b29tSGlzdG9yeS5sYXN0SW50ZWdlclpvb20/e2Zyb206dCx0bzplLGZyb21TY2FsZToyLHRvU2NhbGU6MSx0OmErKDEtYSkqb306e2Zyb206cix0bzplLGZyb21TY2FsZTouNSx0b1NjYWxlOjEsdDoxLSgxLW8pKmF9fSxZci5wcm90b3R5cGUuaW50ZXJwb2xhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHR9O3ZhciBXcj1mdW5jdGlvbih0KXt0aGlzLnNwZWNpZmljYXRpb249dDt9O1dyLnByb3RvdHlwZS5wb3NzaWJseUV2YWx1YXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0LmV4cHJlc3Npb24uZXZhbHVhdGUoZSl9LFdyLnByb3RvdHlwZS5pbnRlcnBvbGF0ZT1mdW5jdGlvbigpe3JldHVybiExfTt2YXIgUXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMucHJvcGVydGllcz10LHRoaXMuZGVmYXVsdFByb3BlcnR5VmFsdWVzPXt9LHRoaXMuZGVmYXVsdFRyYW5zaXRpb25hYmxlUHJvcGVydHlWYWx1ZXM9e30sdGhpcy5kZWZhdWx0VHJhbnNpdGlvbmluZ1Byb3BlcnR5VmFsdWVzPXt9LHRoaXMuZGVmYXVsdFBvc3NpYmx5RXZhbHVhdGVkVmFsdWVzPXt9LHQpe3ZhciByPXRbZV0sbj10aGlzLmRlZmF1bHRQcm9wZXJ0eVZhbHVlc1tlXT1uZXcgUnIocix2b2lkIDApLGk9dGhpcy5kZWZhdWx0VHJhbnNpdGlvbmFibGVQcm9wZXJ0eVZhbHVlc1tlXT1uZXcgVXIocik7dGhpcy5kZWZhdWx0VHJhbnNpdGlvbmluZ1Byb3BlcnR5VmFsdWVzW2VdPWkudW50cmFuc2l0aW9uZWQoKSx0aGlzLmRlZmF1bHRQb3NzaWJseUV2YWx1YXRlZFZhbHVlc1tlXT1uLnBvc3NpYmx5RXZhbHVhdGUoe30pO319O0FyKFwiRGF0YURyaXZlblByb3BlcnR5XCIsS3IpLEFyKFwiRGF0YUNvbnN0YW50UHJvcGVydHlcIixIciksQXIoXCJDcm9zc0ZhZGVkUHJvcGVydHlcIixZciksQXIoXCJDb2xvclJhbXBQcm9wZXJ0eVwiLFdyKTt2YXIgdG49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe2Zvcih2YXIgbiBpbiB0LmNhbGwodGhpcyksdGhpcy5pZD1lLmlkLHRoaXMubWV0YWRhdGE9ZS5tZXRhZGF0YSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMubWluem9vbT1lLm1pbnpvb20sdGhpcy5tYXh6b29tPWUubWF4em9vbSx0aGlzLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCIsXCJiYWNrZ3JvdW5kXCIhPT1lLnR5cGUmJih0aGlzLnNvdXJjZT1lLnNvdXJjZSx0aGlzLnNvdXJjZUxheWVyPWVbXCJzb3VyY2UtbGF5ZXJcIl0sdGhpcy5maWx0ZXI9ZS5maWx0ZXIpLHRoaXMuX2ZlYXR1cmVGaWx0ZXI9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sci5sYXlvdXQmJih0aGlzLl91bmV2YWx1YXRlZExheW91dD1uZXcgJHIoci5sYXlvdXQpKSx0aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50PW5ldyBOcihyLnBhaW50KSxlLnBhaW50KXRoaXMuc2V0UGFpbnRQcm9wZXJ0eShuLGUucGFpbnRbbl0se3ZhbGlkYXRlOiExfSk7Zm9yKHZhciBpIGluIGUubGF5b3V0KXRoaXMuc2V0TGF5b3V0UHJvcGVydHkoaSxlLmxheW91dFtpXSx7dmFsaWRhdGU6ITF9KTt0aGlzLl90cmFuc2l0aW9uaW5nUGFpbnQ9dGhpcy5fdHJhbnNpdGlvbmFibGVQYWludC51bnRyYW5zaXRpb25lZCgpO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuZ2V0TGF5b3V0UHJvcGVydHk9ZnVuY3Rpb24odCl7cmV0dXJuXCJ2aXNpYmlsaXR5XCI9PT10P3RoaXMudmlzaWJpbGl0eTp0aGlzLl91bmV2YWx1YXRlZExheW91dC5nZXRWYWx1ZSh0KX0sZS5wcm90b3R5cGUuc2V0TGF5b3V0UHJvcGVydHk9ZnVuY3Rpb24odCxlLHIpe2lmKG51bGwhPWUpe3ZhciBuPVwibGF5ZXJzLlwiK3RoaXMuaWQrXCIubGF5b3V0LlwiK3Q7aWYodGhpcy5fdmFsaWRhdGUobXIsbix0LGUscikpcmV0dXJufVwidmlzaWJpbGl0eVwiIT09dD90aGlzLl91bmV2YWx1YXRlZExheW91dC5zZXRWYWx1ZSh0LGUpOnRoaXMudmlzaWJpbGl0eT1cIm5vbmVcIj09PWU/ZTpcInZpc2libGVcIjt9LGUucHJvdG90eXBlLmdldFBhaW50UHJvcGVydHk9ZnVuY3Rpb24odCl7cmV0dXJuIF8odCxcIi10cmFuc2l0aW9uXCIpP3RoaXMuX3RyYW5zaXRpb25hYmxlUGFpbnQuZ2V0VHJhbnNpdGlvbih0LnNsaWNlKDAsLVwiLXRyYW5zaXRpb25cIi5sZW5ndGgpKTp0aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50LmdldFZhbHVlKHQpfSxlLnByb3RvdHlwZS5zZXRQYWludFByb3BlcnR5PWZ1bmN0aW9uKHQsZSxyKXtpZihudWxsIT1lKXt2YXIgbj1cImxheWVycy5cIit0aGlzLmlkK1wiLnBhaW50LlwiK3Q7aWYodGhpcy5fdmFsaWRhdGUoZHIsbix0LGUscikpcmV0dXJuITF9aWYoXyh0LFwiLXRyYW5zaXRpb25cIikpcmV0dXJuIHRoaXMuX3RyYW5zaXRpb25hYmxlUGFpbnQuc2V0VHJhbnNpdGlvbih0LnNsaWNlKDAsLVwiLXRyYW5zaXRpb25cIi5sZW5ndGgpLGV8fHZvaWQgMCksITE7dmFyIGk9dGhpcy5fdHJhbnNpdGlvbmFibGVQYWludC5fdmFsdWVzW3RdLnZhbHVlLmlzRGF0YURyaXZlbigpO3RoaXMuX3RyYW5zaXRpb25hYmxlUGFpbnQuc2V0VmFsdWUodCxlKTt2YXIgYT10aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50Ll92YWx1ZXNbdF0udmFsdWUuaXNEYXRhRHJpdmVuKCk7cmV0dXJuIHRoaXMuX2hhbmRsZVNwZWNpYWxQYWludFByb3BlcnR5VXBkYXRlKHQpLGF8fGl9LGUucHJvdG90eXBlLl9oYW5kbGVTcGVjaWFsUGFpbnRQcm9wZXJ0eVVwZGF0ZT1mdW5jdGlvbih0KXt9LGUucHJvdG90eXBlLmlzSGlkZGVuPWZ1bmN0aW9uKHQpe3JldHVybiEhKHRoaXMubWluem9vbSYmdDx0aGlzLm1pbnpvb20pfHwoISEodGhpcy5tYXh6b29tJiZ0Pj10aGlzLm1heHpvb20pfHxcIm5vbmVcIj09PXRoaXMudmlzaWJpbGl0eSl9LGUucHJvdG90eXBlLnVwZGF0ZVRyYW5zaXRpb25zPWZ1bmN0aW9uKHQpe3RoaXMuX3RyYW5zaXRpb25pbmdQYWludD10aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50LnRyYW5zaXRpb25lZCh0LHRoaXMuX3RyYW5zaXRpb25pbmdQYWludCk7fSxlLnByb3RvdHlwZS5oYXNUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zaXRpb25pbmdQYWludC5oYXNUcmFuc2l0aW9uKCl9LGUucHJvdG90eXBlLnJlY2FsY3VsYXRlPWZ1bmN0aW9uKHQpe3RoaXMuX3VuZXZhbHVhdGVkTGF5b3V0JiYodGhpcy5sYXlvdXQ9dGhpcy5fdW5ldmFsdWF0ZWRMYXlvdXQucG9zc2libHlFdmFsdWF0ZSh0KSksdGhpcy5wYWludD10aGlzLl90cmFuc2l0aW9uaW5nUGFpbnQucG9zc2libHlFdmFsdWF0ZSh0KTt9LGUucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciB0PXtpZDp0aGlzLmlkLHR5cGU6dGhpcy50eXBlLHNvdXJjZTp0aGlzLnNvdXJjZSxcInNvdXJjZS1sYXllclwiOnRoaXMuc291cmNlTGF5ZXIsbWV0YWRhdGE6dGhpcy5tZXRhZGF0YSxtaW56b29tOnRoaXMubWluem9vbSxtYXh6b29tOnRoaXMubWF4em9vbSxmaWx0ZXI6dGhpcy5maWx0ZXIsbGF5b3V0OnRoaXMuX3VuZXZhbHVhdGVkTGF5b3V0JiZ0aGlzLl91bmV2YWx1YXRlZExheW91dC5zZXJpYWxpemUoKSxwYWludDp0aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50JiZ0aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50LnNlcmlhbGl6ZSgpfTtyZXR1cm5cIm5vbmVcIj09PXRoaXMudmlzaWJpbGl0eSYmKHQubGF5b3V0PXQubGF5b3V0fHx7fSx0LmxheW91dC52aXNpYmlsaXR5PVwibm9uZVwiKSxrKHQsZnVuY3Rpb24odCxlKXtyZXR1cm4hKHZvaWQgMD09PXR8fFwibGF5b3V0XCI9PT1lJiYhT2JqZWN0LmtleXModCkubGVuZ3RofHxcInBhaW50XCI9PT1lJiYhT2JqZWN0LmtleXModCkubGVuZ3RoKX0pfSxlLnByb3RvdHlwZS5fdmFsaWRhdGU9ZnVuY3Rpb24odCxlLHIsbixpKXtyZXR1cm4oIWl8fCExIT09aS52YWxpZGF0ZSkmJnZyKHRoaXMsdC5jYWxsKGZyLHtrZXk6ZSxsYXllclR5cGU6dGhpcy50eXBlLG9iamVjdEtleTpyLHZhbHVlOm4sc3R5bGVTcGVjOnEsc3R5bGU6e2dseXBoczohMCxzcHJpdGU6ITB9fSkpfSxlLnByb3RvdHlwZS5oYXNPZmZzY3JlZW5QYXNzPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuaXNTdGF0ZURlcGVuZGVudD1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLnBhaW50Ll92YWx1ZXMpe3ZhciBlPXRoaXMucGFpbnQuZ2V0KHQpO2lmKGUgaW5zdGFuY2VvZiBKciYmdGUoZS5wcm9wZXJ0eS5zcGVjaWZpY2F0aW9uKSYmKChcInNvdXJjZVwiPT09ZS52YWx1ZS5raW5kfHxcImNvbXBvc2l0ZVwiPT09ZS52YWx1ZS5raW5kKSYmZS52YWx1ZS5pc1N0YXRlRGVwZW5kZW50KSlyZXR1cm4hMH1yZXR1cm4hMX0sZX0oRCksZW49e0ludDg6SW50OEFycmF5LFVpbnQ4OlVpbnQ4QXJyYXksSW50MTY6SW50MTZBcnJheSxVaW50MTY6VWludDE2QXJyYXksSW50MzI6SW50MzJBcnJheSxVaW50MzI6VWludDMyQXJyYXksRmxvYXQzMjpGbG9hdDMyQXJyYXl9LHJuPWZ1bmN0aW9uKHQsZSl7dGhpcy5fc3RydWN0QXJyYXk9dCx0aGlzLl9wb3MxPWUqdGhpcy5zaXplLHRoaXMuX3BvczI9dGhpcy5fcG9zMS8yLHRoaXMuX3BvczQ9dGhpcy5fcG9zMS80LHRoaXMuX3Bvczg9dGhpcy5fcG9zMS84O30sbm49ZnVuY3Rpb24oKXt0aGlzLmlzVHJhbnNmZXJyZWQ9ITEsdGhpcy5jYXBhY2l0eT0tMSx0aGlzLnJlc2l6ZSgwKTt9O2Z1bmN0aW9uIGFuKHQsZSl7dm9pZCAwPT09ZSYmKGU9MSk7dmFyIHI9MCxuPTA7cmV0dXJue21lbWJlcnM6dC5tYXAoZnVuY3Rpb24odCl7dmFyIGksYT0oaT10LnR5cGUsZW5baV0uQllURVNfUEVSX0VMRU1FTlQpLG89cj1vbihyLE1hdGgubWF4KGUsYSkpLHM9dC5jb21wb25lbnRzfHwxO3JldHVybiBuPU1hdGgubWF4KG4sYSkscis9YSpzLHtuYW1lOnQubmFtZSx0eXBlOnQudHlwZSxjb21wb25lbnRzOnMsb2Zmc2V0Om99fSksc2l6ZTpvbihyLE1hdGgubWF4KG4sZSkpLGFsaWdubWVudDplfX1mdW5jdGlvbiBvbih0LGUpe3JldHVybiBNYXRoLmNlaWwodC9lKSplfW5uLnNlcmlhbGl6ZT1mdW5jdGlvbih0LGUpe3JldHVybiB0Ll90cmltKCksZSYmKHQuaXNUcmFuc2ZlcnJlZD0hMCxlLnB1c2godC5hcnJheUJ1ZmZlcikpLHtsZW5ndGg6dC5sZW5ndGgsYXJyYXlCdWZmZXI6dC5hcnJheUJ1ZmZlcn19LG5uLmRlc2VyaWFsaXplPWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUodGhpcy5wcm90b3R5cGUpO3JldHVybiBlLmFycmF5QnVmZmVyPXQuYXJyYXlCdWZmZXIsZS5sZW5ndGg9dC5sZW5ndGgsZS5jYXBhY2l0eT10LmFycmF5QnVmZmVyLmJ5dGVMZW5ndGgvZS5ieXRlc1BlckVsZW1lbnQsZS5fcmVmcmVzaFZpZXdzKCksZX0sbm4ucHJvdG90eXBlLl90cmltPWZ1bmN0aW9uKCl7dGhpcy5sZW5ndGghPT10aGlzLmNhcGFjaXR5JiYodGhpcy5jYXBhY2l0eT10aGlzLmxlbmd0aCx0aGlzLmFycmF5QnVmZmVyPXRoaXMuYXJyYXlCdWZmZXIuc2xpY2UoMCx0aGlzLmxlbmd0aCp0aGlzLmJ5dGVzUGVyRWxlbWVudCksdGhpcy5fcmVmcmVzaFZpZXdzKCkpO30sbm4ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5sZW5ndGg9MDt9LG5uLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCl7dGhpcy5yZXNlcnZlKHQpLHRoaXMubGVuZ3RoPXQ7fSxubi5wcm90b3R5cGUucmVzZXJ2ZT1mdW5jdGlvbih0KXtpZih0PnRoaXMuY2FwYWNpdHkpe3RoaXMuY2FwYWNpdHk9TWF0aC5tYXgodCxNYXRoLmZsb29yKDUqdGhpcy5jYXBhY2l0eSksMTI4KSx0aGlzLmFycmF5QnVmZmVyPW5ldyBBcnJheUJ1ZmZlcih0aGlzLmNhcGFjaXR5KnRoaXMuYnl0ZXNQZXJFbGVtZW50KTt2YXIgZT10aGlzLnVpbnQ4O3RoaXMuX3JlZnJlc2hWaWV3cygpLGUmJnRoaXMudWludDguc2V0KGUpO319LG5uLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiX3JlZnJlc2hWaWV3cygpIG11c3QgYmUgaW1wbGVtZW50ZWQgYnkgZWFjaCBjb25jcmV0ZSBTdHJ1Y3RBcnJheSBsYXlvdXRcIil9O3ZhciBzbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO30sZS5wcm90b3R5cGUuZW1wbGFjZUJhY2s9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmxlbmd0aDt0aGlzLnJlc2l6ZShyKzEpO3ZhciBuPTIqcjtyZXR1cm4gdGhpcy5pbnQxNltuKzBdPXQsdGhpcy5pbnQxNltuKzFdPWUscn0sZS5wcm90b3R5cGUuZW1wbGFjZT1mdW5jdGlvbih0LGUscil7dmFyIG49Mip0O3JldHVybiB0aGlzLmludDE2W24rMF09ZSx0aGlzLmludDE2W24rMV09cix0fSxlfShubik7c24ucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD00LEFyKFwiU3RydWN0QXJyYXlMYXlvdXQyaTRcIixzbik7dmFyIHVuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLl9yZWZyZXNoVmlld3M9ZnVuY3Rpb24oKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuaW50MTY9bmV3IEludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fSxlLnByb3RvdHlwZS5lbXBsYWNlQmFjaz1mdW5jdGlvbih0LGUscixuKXt2YXIgaT10aGlzLmxlbmd0aDt0aGlzLnJlc2l6ZShpKzEpO3ZhciBhPTQqaTtyZXR1cm4gdGhpcy5pbnQxNlthKzBdPXQsdGhpcy5pbnQxNlthKzFdPWUsdGhpcy5pbnQxNlthKzJdPXIsdGhpcy5pbnQxNlthKzNdPW4saX0sZS5wcm90b3R5cGUuZW1wbGFjZT1mdW5jdGlvbih0LGUscixuLGkpe3ZhciBhPTQqdDtyZXR1cm4gdGhpcy5pbnQxNlthKzBdPWUsdGhpcy5pbnQxNlthKzFdPXIsdGhpcy5pbnQxNlthKzJdPW4sdGhpcy5pbnQxNlthKzNdPWksdH0sZX0obm4pO3VuLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9OCxBcihcIlN0cnVjdEFycmF5TGF5b3V0NGk4XCIsdW4pO3ZhciBsbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO30sZS5wcm90b3R5cGUuZW1wbGFjZUJhY2s9ZnVuY3Rpb24odCxlLHIsbixpLGEpe3ZhciBvPXRoaXMubGVuZ3RoO3RoaXMucmVzaXplKG8rMSk7dmFyIHM9NipvO3JldHVybiB0aGlzLmludDE2W3MrMF09dCx0aGlzLmludDE2W3MrMV09ZSx0aGlzLmludDE2W3MrMl09cix0aGlzLmludDE2W3MrM109bix0aGlzLmludDE2W3MrNF09aSx0aGlzLmludDE2W3MrNV09YSxvfSxlLnByb3RvdHlwZS5lbXBsYWNlPWZ1bmN0aW9uKHQsZSxyLG4saSxhLG8pe3ZhciBzPTYqdDtyZXR1cm4gdGhpcy5pbnQxNltzKzBdPWUsdGhpcy5pbnQxNltzKzFdPXIsdGhpcy5pbnQxNltzKzJdPW4sdGhpcy5pbnQxNltzKzNdPWksdGhpcy5pbnQxNltzKzRdPWEsdGhpcy5pbnQxNltzKzVdPW8sdH0sZX0obm4pO2xuLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9MTIsQXIoXCJTdHJ1Y3RBcnJheUxheW91dDJpNGkxMlwiLGxuKTt2YXIgcG49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuX3JlZnJlc2hWaWV3cz1mdW5jdGlvbigpe3RoaXMudWludDg9bmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy5pbnQxNj1uZXcgSW50MTZBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9LGUucHJvdG90eXBlLmVtcGxhY2VCYWNrPWZ1bmN0aW9uKHQsZSxyLG4saSxhLG8scyl7dmFyIHU9dGhpcy5sZW5ndGg7dGhpcy5yZXNpemUodSsxKTt2YXIgbD02KnUscD0xMip1O3JldHVybiB0aGlzLmludDE2W2wrMF09dCx0aGlzLmludDE2W2wrMV09ZSx0aGlzLmludDE2W2wrMl09cix0aGlzLmludDE2W2wrM109bix0aGlzLnVpbnQ4W3ArOF09aSx0aGlzLnVpbnQ4W3ArOV09YSx0aGlzLnVpbnQ4W3ArMTBdPW8sdGhpcy51aW50OFtwKzExXT1zLHV9LGUucHJvdG90eXBlLmVtcGxhY2U9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyxzLHUpe3ZhciBsPTYqdCxwPTEyKnQ7cmV0dXJuIHRoaXMuaW50MTZbbCswXT1lLHRoaXMuaW50MTZbbCsxXT1yLHRoaXMuaW50MTZbbCsyXT1uLHRoaXMuaW50MTZbbCszXT1pLHRoaXMudWludDhbcCs4XT1hLHRoaXMudWludDhbcCs5XT1vLHRoaXMudWludDhbcCsxMF09cyx0aGlzLnVpbnQ4W3ArMTFdPXUsdH0sZX0obm4pO3BuLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9MTIsQXIoXCJTdHJ1Y3RBcnJheUxheW91dDRpNHViMTJcIixwbik7dmFyIGhuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLl9yZWZyZXNoVmlld3M9ZnVuY3Rpb24oKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuaW50MTY9bmV3IEludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy51aW50MTY9bmV3IFVpbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO30sZS5wcm90b3R5cGUuZW1wbGFjZUJhY2s9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyxzKXt2YXIgdT10aGlzLmxlbmd0aDt0aGlzLnJlc2l6ZSh1KzEpO3ZhciBsPTgqdTtyZXR1cm4gdGhpcy5pbnQxNltsKzBdPXQsdGhpcy5pbnQxNltsKzFdPWUsdGhpcy5pbnQxNltsKzJdPXIsdGhpcy5pbnQxNltsKzNdPW4sdGhpcy51aW50MTZbbCs0XT1pLHRoaXMudWludDE2W2wrNV09YSx0aGlzLnVpbnQxNltsKzZdPW8sdGhpcy51aW50MTZbbCs3XT1zLHV9LGUucHJvdG90eXBlLmVtcGxhY2U9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyxzLHUpe3ZhciBsPTgqdDtyZXR1cm4gdGhpcy5pbnQxNltsKzBdPWUsdGhpcy5pbnQxNltsKzFdPXIsdGhpcy5pbnQxNltsKzJdPW4sdGhpcy5pbnQxNltsKzNdPWksdGhpcy51aW50MTZbbCs0XT1hLHRoaXMudWludDE2W2wrNV09byx0aGlzLnVpbnQxNltsKzZdPXMsdGhpcy51aW50MTZbbCs3XT11LHR9LGV9KG5uKTtobi5wcm90b3R5cGUuYnl0ZXNQZXJFbGVtZW50PTE2LEFyKFwiU3RydWN0QXJyYXlMYXlvdXQ0aTR1aTE2XCIsaG4pO3ZhciBjbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmZsb2F0MzI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9LGUucHJvdG90eXBlLmVtcGxhY2VCYWNrPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj10aGlzLmxlbmd0aDt0aGlzLnJlc2l6ZShuKzEpO3ZhciBpPTMqbjtyZXR1cm4gdGhpcy5mbG9hdDMyW2krMF09dCx0aGlzLmZsb2F0MzJbaSsxXT1lLHRoaXMuZmxvYXQzMltpKzJdPXIsbn0sZS5wcm90b3R5cGUuZW1wbGFjZT1mdW5jdGlvbih0LGUscixuKXt2YXIgaT0zKnQ7cmV0dXJuIHRoaXMuZmxvYXQzMltpKzBdPWUsdGhpcy5mbG9hdDMyW2krMV09cix0aGlzLmZsb2F0MzJbaSsyXT1uLHR9LGV9KG5uKTtjbi5wcm90b3R5cGUuYnl0ZXNQZXJFbGVtZW50PTEyLEFyKFwiU3RydWN0QXJyYXlMYXlvdXQzZjEyXCIsY24pO3ZhciBmbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQzMj1uZXcgVWludDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fSxlLnByb3RvdHlwZS5lbXBsYWNlQmFjaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmxlbmd0aDt0aGlzLnJlc2l6ZShlKzEpO3ZhciByPTEqZTtyZXR1cm4gdGhpcy51aW50MzJbciswXT10LGV9LGUucHJvdG90eXBlLmVtcGxhY2U9ZnVuY3Rpb24odCxlKXt2YXIgcj0xKnQ7cmV0dXJuIHRoaXMudWludDMyW3IrMF09ZSx0fSxlfShubik7Zm4ucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD00LEFyKFwiU3RydWN0QXJyYXlMYXlvdXQxdWw0XCIsZm4pO3ZhciB5bj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMudWludDMyPW5ldyBVaW50MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQxNj1uZXcgVWludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fSxlLnByb3RvdHlwZS5lbXBsYWNlQmFjaz1mdW5jdGlvbih0LGUscixuLGksYSxvLHMsdSxsLHApe3ZhciBoPXRoaXMubGVuZ3RoO3RoaXMucmVzaXplKGgrMSk7dmFyIGM9MTIqaCxmPTYqaDtyZXR1cm4gdGhpcy5pbnQxNltjKzBdPXQsdGhpcy5pbnQxNltjKzFdPWUsdGhpcy5pbnQxNltjKzJdPXIsdGhpcy5pbnQxNltjKzNdPW4sdGhpcy5pbnQxNltjKzRdPWksdGhpcy5pbnQxNltjKzVdPWEsdGhpcy51aW50MzJbZiszXT1vLHRoaXMudWludDE2W2MrOF09cyx0aGlzLnVpbnQxNltjKzldPXUsdGhpcy5pbnQxNltjKzEwXT1sLHRoaXMuaW50MTZbYysxMV09cCxofSxlLnByb3RvdHlwZS5lbXBsYWNlPWZ1bmN0aW9uKHQsZSxyLG4saSxhLG8scyx1LGwscCxoKXt2YXIgYz0xMip0LGY9Nip0O3JldHVybiB0aGlzLmludDE2W2MrMF09ZSx0aGlzLmludDE2W2MrMV09cix0aGlzLmludDE2W2MrMl09bix0aGlzLmludDE2W2MrM109aSx0aGlzLmludDE2W2MrNF09YSx0aGlzLmludDE2W2MrNV09byx0aGlzLnVpbnQzMltmKzNdPXMsdGhpcy51aW50MTZbYys4XT11LHRoaXMudWludDE2W2MrOV09bCx0aGlzLmludDE2W2MrMTBdPXAsdGhpcy5pbnQxNltjKzExXT1oLHR9LGV9KG5uKTt5bi5wcm90b3R5cGUuYnl0ZXNQZXJFbGVtZW50PTI0LEFyKFwiU3RydWN0QXJyYXlMYXlvdXQ2aTF1bDJ1aTJpMjRcIix5bik7dmFyIGRuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLl9yZWZyZXNoVmlld3M9ZnVuY3Rpb24oKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuaW50MTY9bmV3IEludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fSxlLnByb3RvdHlwZS5lbXBsYWNlQmFjaz1mdW5jdGlvbih0LGUscixuLGksYSl7dmFyIG89dGhpcy5sZW5ndGg7dGhpcy5yZXNpemUobysxKTt2YXIgcz02Km87cmV0dXJuIHRoaXMuaW50MTZbcyswXT10LHRoaXMuaW50MTZbcysxXT1lLHRoaXMuaW50MTZbcysyXT1yLHRoaXMuaW50MTZbcyszXT1uLHRoaXMuaW50MTZbcys0XT1pLHRoaXMuaW50MTZbcys1XT1hLG99LGUucHJvdG90eXBlLmVtcGxhY2U9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyl7dmFyIHM9Nip0O3JldHVybiB0aGlzLmludDE2W3MrMF09ZSx0aGlzLmludDE2W3MrMV09cix0aGlzLmludDE2W3MrMl09bix0aGlzLmludDE2W3MrM109aSx0aGlzLmludDE2W3MrNF09YSx0aGlzLmludDE2W3MrNV09byx0fSxlfShubik7ZG4ucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD0xMixBcihcIlN0cnVjdEFycmF5TGF5b3V0MmkyaTJpMTJcIixkbik7dmFyIG1uPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLl9yZWZyZXNoVmlld3M9ZnVuY3Rpb24oKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO30sZS5wcm90b3R5cGUuZW1wbGFjZUJhY2s9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmxlbmd0aDt0aGlzLnJlc2l6ZShyKzEpO3ZhciBuPTQqcjtyZXR1cm4gdGhpcy51aW50OFtuKzBdPXQsdGhpcy51aW50OFtuKzFdPWUscn0sZS5wcm90b3R5cGUuZW1wbGFjZT1mdW5jdGlvbih0LGUscil7dmFyIG49NCp0O3JldHVybiB0aGlzLnVpbnQ4W24rMF09ZSx0aGlzLnVpbnQ4W24rMV09cix0fSxlfShubik7bW4ucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD00LEFyKFwiU3RydWN0QXJyYXlMYXlvdXQydWI0XCIsbW4pO3ZhciB2bj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMudWludDE2PW5ldyBVaW50MTZBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQzMj1uZXcgVWludDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy5mbG9hdDMyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fSxlLnByb3RvdHlwZS5lbXBsYWNlQmFjaz1mdW5jdGlvbih0LGUscixuLGksYSxvLHMsdSxsLHAsaCxjLGYpe3ZhciB5PXRoaXMubGVuZ3RoO3RoaXMucmVzaXplKHkrMSk7dmFyIGQ9MjAqeSxtPTEwKnksdj00MCp5O3JldHVybiB0aGlzLmludDE2W2QrMF09dCx0aGlzLmludDE2W2QrMV09ZSx0aGlzLnVpbnQxNltkKzJdPXIsdGhpcy51aW50MTZbZCszXT1uLHRoaXMudWludDMyW20rMl09aSx0aGlzLnVpbnQzMlttKzNdPWEsdGhpcy51aW50MzJbbSs0XT1vLHRoaXMudWludDE2W2QrMTBdPXMsdGhpcy51aW50MTZbZCsxMV09dSx0aGlzLnVpbnQxNltkKzEyXT1sLHRoaXMuZmxvYXQzMlttKzddPXAsdGhpcy5mbG9hdDMyW20rOF09aCx0aGlzLnVpbnQ4W3YrMzZdPWMsdGhpcy51aW50OFt2KzM3XT1mLHl9LGUucHJvdG90eXBlLmVtcGxhY2U9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyxzLHUsbCxwLGgsYyxmLHkpe3ZhciBkPTIwKnQsbT0xMCp0LHY9NDAqdDtyZXR1cm4gdGhpcy5pbnQxNltkKzBdPWUsdGhpcy5pbnQxNltkKzFdPXIsdGhpcy51aW50MTZbZCsyXT1uLHRoaXMudWludDE2W2QrM109aSx0aGlzLnVpbnQzMlttKzJdPWEsdGhpcy51aW50MzJbbSszXT1vLHRoaXMudWludDMyW20rNF09cyx0aGlzLnVpbnQxNltkKzEwXT11LHRoaXMudWludDE2W2QrMTFdPWwsdGhpcy51aW50MTZbZCsxMl09cCx0aGlzLmZsb2F0MzJbbSs3XT1oLHRoaXMuZmxvYXQzMlttKzhdPWMsdGhpcy51aW50OFt2KzM2XT1mLHRoaXMudWludDhbdiszN109eSx0fSxlfShubik7dm4ucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD00MCxBcihcIlN0cnVjdEFycmF5TGF5b3V0MmkydWkzdWwzdWkyZjJ1YjQwXCIsdm4pO3ZhciBnbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmZsb2F0MzI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9LGUucHJvdG90eXBlLmVtcGxhY2VCYWNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubGVuZ3RoO3RoaXMucmVzaXplKGUrMSk7dmFyIHI9MSplO3JldHVybiB0aGlzLmZsb2F0MzJbciswXT10LGV9LGUucHJvdG90eXBlLmVtcGxhY2U9ZnVuY3Rpb24odCxlKXt2YXIgcj0xKnQ7cmV0dXJuIHRoaXMuZmxvYXQzMltyKzBdPWUsdH0sZX0obm4pO2duLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9NCxBcihcIlN0cnVjdEFycmF5TGF5b3V0MWY0XCIsZ24pO3ZhciB4bj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO30sZS5wcm90b3R5cGUuZW1wbGFjZUJhY2s9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXRoaXMubGVuZ3RoO3RoaXMucmVzaXplKG4rMSk7dmFyIGk9MypuO3JldHVybiB0aGlzLmludDE2W2krMF09dCx0aGlzLmludDE2W2krMV09ZSx0aGlzLmludDE2W2krMl09cixufSxlLnByb3RvdHlwZS5lbXBsYWNlPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPTMqdDtyZXR1cm4gdGhpcy5pbnQxNltpKzBdPWUsdGhpcy5pbnQxNltpKzFdPXIsdGhpcy5pbnQxNltpKzJdPW4sdH0sZX0obm4pO3huLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9NixBcihcIlN0cnVjdEFycmF5TGF5b3V0M2k2XCIseG4pO3ZhciBibj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQzMj1uZXcgVWludDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy51aW50MTY9bmV3IFVpbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO30sZS5wcm90b3R5cGUuZW1wbGFjZUJhY2s9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXRoaXMubGVuZ3RoO3RoaXMucmVzaXplKG4rMSk7dmFyIGk9MipuLGE9NCpuO3JldHVybiB0aGlzLnVpbnQzMltpKzBdPXQsdGhpcy51aW50MTZbYSsyXT1lLHRoaXMudWludDE2W2ErM109cixufSxlLnByb3RvdHlwZS5lbXBsYWNlPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPTIqdCxhPTQqdDtyZXR1cm4gdGhpcy51aW50MzJbaSswXT1lLHRoaXMudWludDE2W2ErMl09cix0aGlzLnVpbnQxNlthKzNdPW4sdH0sZX0obm4pO2JuLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9OCxBcihcIlN0cnVjdEFycmF5TGF5b3V0MXVsMnVpOFwiLGJuKTt2YXIgd249ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuX3JlZnJlc2hWaWV3cz1mdW5jdGlvbigpe3RoaXMudWludDg9bmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy51aW50MTY9bmV3IFVpbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO30sZS5wcm90b3R5cGUuZW1wbGFjZUJhY2s9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXRoaXMubGVuZ3RoO3RoaXMucmVzaXplKG4rMSk7dmFyIGk9MypuO3JldHVybiB0aGlzLnVpbnQxNltpKzBdPXQsdGhpcy51aW50MTZbaSsxXT1lLHRoaXMudWludDE2W2krMl09cixufSxlLnByb3RvdHlwZS5lbXBsYWNlPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPTMqdDtyZXR1cm4gdGhpcy51aW50MTZbaSswXT1lLHRoaXMudWludDE2W2krMV09cix0aGlzLnVpbnQxNltpKzJdPW4sdH0sZX0obm4pO3duLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9NixBcihcIlN0cnVjdEFycmF5TGF5b3V0M3VpNlwiLHduKTt2YXIgX249ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuX3JlZnJlc2hWaWV3cz1mdW5jdGlvbigpe3RoaXMudWludDg9bmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy51aW50MTY9bmV3IFVpbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO30sZS5wcm90b3R5cGUuZW1wbGFjZUJhY2s9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmxlbmd0aDt0aGlzLnJlc2l6ZShyKzEpO3ZhciBuPTIqcjtyZXR1cm4gdGhpcy51aW50MTZbbiswXT10LHRoaXMudWludDE2W24rMV09ZSxyfSxlLnByb3RvdHlwZS5lbXBsYWNlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj0yKnQ7cmV0dXJuIHRoaXMudWludDE2W24rMF09ZSx0aGlzLnVpbnQxNltuKzFdPXIsdH0sZX0obm4pO19uLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9NCxBcihcIlN0cnVjdEFycmF5TGF5b3V0MnVpNFwiLF9uKTt2YXIgQW49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuX3JlZnJlc2hWaWV3cz1mdW5jdGlvbigpe3RoaXMudWludDg9bmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy5mbG9hdDMyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fSxlLnByb3RvdHlwZS5lbXBsYWNlQmFjaz1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMubGVuZ3RoO3RoaXMucmVzaXplKHIrMSk7dmFyIG49MipyO3JldHVybiB0aGlzLmZsb2F0MzJbbiswXT10LHRoaXMuZmxvYXQzMltuKzFdPWUscn0sZS5wcm90b3R5cGUuZW1wbGFjZT1mdW5jdGlvbih0LGUscil7dmFyIG49Mip0O3JldHVybiB0aGlzLmZsb2F0MzJbbiswXT1lLHRoaXMuZmxvYXQzMltuKzFdPXIsdH0sZX0obm4pO0FuLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9OCxBcihcIlN0cnVjdEFycmF5TGF5b3V0MmY4XCIsQW4pO3ZhciBrbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5fcmVmcmVzaFZpZXdzPWZ1bmN0aW9uKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmZsb2F0MzI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9LGUucHJvdG90eXBlLmVtcGxhY2VCYWNrPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPXRoaXMubGVuZ3RoO3RoaXMucmVzaXplKGkrMSk7dmFyIGE9NCppO3JldHVybiB0aGlzLmZsb2F0MzJbYSswXT10LHRoaXMuZmxvYXQzMlthKzFdPWUsdGhpcy5mbG9hdDMyW2ErMl09cix0aGlzLmZsb2F0MzJbYSszXT1uLGl9LGUucHJvdG90eXBlLmVtcGxhY2U9ZnVuY3Rpb24odCxlLHIsbixpKXt2YXIgYT00KnQ7cmV0dXJuIHRoaXMuZmxvYXQzMlthKzBdPWUsdGhpcy5mbG9hdDMyW2ErMV09cix0aGlzLmZsb2F0MzJbYSsyXT1uLHRoaXMuZmxvYXQzMlthKzNdPWksdH0sZX0obm4pO2tuLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9MTYsQXIoXCJTdHJ1Y3RBcnJheUxheW91dDRmMTZcIixrbik7dmFyIHpuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIHI9e2FuY2hvclBvaW50WDp7Y29uZmlndXJhYmxlOiEwfSxhbmNob3JQb2ludFk6e2NvbmZpZ3VyYWJsZTohMH0seDE6e2NvbmZpZ3VyYWJsZTohMH0seTE6e2NvbmZpZ3VyYWJsZTohMH0seDI6e2NvbmZpZ3VyYWJsZTohMH0seTI6e2NvbmZpZ3VyYWJsZTohMH0sZmVhdHVyZUluZGV4Ontjb25maWd1cmFibGU6ITB9LHNvdXJjZUxheWVySW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0sYnVja2V0SW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0scmFkaXVzOntjb25maWd1cmFibGU6ITB9LHNpZ25lZERpc3RhbmNlRnJvbUFuY2hvcjp7Y29uZmlndXJhYmxlOiEwfSxhbmNob3JQb2ludDp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIHIuYW5jaG9yUG9pbnRYLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzBdfSxyLmFuY2hvclBvaW50WC5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMiswXT10O30sci5hbmNob3JQb2ludFkuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMV19LHIuYW5jaG9yUG9pbnRZLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzFdPXQ7fSxyLngxLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzJdfSxyLngxLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzJdPXQ7fSxyLnkxLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzNdfSxyLnkxLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzNdPXQ7fSxyLngyLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzRdfSxyLngyLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzRdPXQ7fSxyLnkyLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzVdfSxyLnkyLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzVdPXQ7fSxyLmZlYXR1cmVJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDMyW3RoaXMuX3BvczQrM119LHIuZmVhdHVyZUluZGV4LnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50MzJbdGhpcy5fcG9zNCszXT10O30sci5zb3VyY2VMYXllckluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMis4XX0sci5zb3VyY2VMYXllckluZGV4LnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMis4XT10O30sci5idWNrZXRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrOV19LHIuYnVja2V0SW5kZXguc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzldPXQ7fSxyLnJhZGl1cy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMisxMF19LHIucmFkaXVzLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzEwXT10O30sci5zaWduZWREaXN0YW5jZUZyb21BbmNob3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMTFdfSxyLnNpZ25lZERpc3RhbmNlRnJvbUFuY2hvci5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMisxMV09dDt9LHIuYW5jaG9yUG9pbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBjKHRoaXMuYW5jaG9yUG9pbnRYLHRoaXMuYW5jaG9yUG9pbnRZKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsciksZX0ocm4pO3puLnByb3RvdHlwZS5zaXplPTI0O3ZhciBTbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB6bih0aGlzLHQpfSxlfSh5bik7QXIoXCJDb2xsaXNpb25Cb3hBcnJheVwiLFNuKTt2YXIgTW49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO310JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgcj17YW5jaG9yWDp7Y29uZmlndXJhYmxlOiEwfSxhbmNob3JZOntjb25maWd1cmFibGU6ITB9LGdseXBoU3RhcnRJbmRleDp7Y29uZmlndXJhYmxlOiEwfSxudW1HbHlwaHM6e2NvbmZpZ3VyYWJsZTohMH0sdmVydGV4U3RhcnRJbmRleDp7Y29uZmlndXJhYmxlOiEwfSxsaW5lU3RhcnRJbmRleDp7Y29uZmlndXJhYmxlOiEwfSxsaW5lTGVuZ3RoOntjb25maWd1cmFibGU6ITB9LHNlZ21lbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbG93ZXJTaXplOntjb25maWd1cmFibGU6ITB9LHVwcGVyU2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxsaW5lT2Zmc2V0WDp7Y29uZmlndXJhYmxlOiEwfSxsaW5lT2Zmc2V0WTp7Y29uZmlndXJhYmxlOiEwfSx3cml0aW5nTW9kZTp7Y29uZmlndXJhYmxlOiEwfSxoaWRkZW46e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiByLmFuY2hvclguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMF19LHIuYW5jaG9yWC5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMiswXT10O30sci5hbmNob3JZLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzFdfSxyLmFuY2hvclkuc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMV09dDt9LHIuZ2x5cGhTdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisyXX0sci5nbHlwaFN0YXJ0SW5kZXguc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzJdPXQ7fSxyLm51bUdseXBocy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrM119LHIubnVtR2x5cGhzLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMiszXT10O30sci52ZXJ0ZXhTdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MzJbdGhpcy5fcG9zNCsyXX0sci52ZXJ0ZXhTdGFydEluZGV4LnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50MzJbdGhpcy5fcG9zNCsyXT10O30sci5saW5lU3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDMyW3RoaXMuX3BvczQrM119LHIubGluZVN0YXJ0SW5kZXguc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3N0cnVjdEFycmF5LnVpbnQzMlt0aGlzLl9wb3M0KzNdPXQ7fSxyLmxpbmVMZW5ndGguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQzMlt0aGlzLl9wb3M0KzRdfSxyLmxpbmVMZW5ndGguc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3N0cnVjdEFycmF5LnVpbnQzMlt0aGlzLl9wb3M0KzRdPXQ7fSxyLnNlZ21lbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzEwXX0sci5zZWdtZW50LnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxMF09dDt9LHIubG93ZXJTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxMV19LHIubG93ZXJTaXplLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxMV09dDt9LHIudXBwZXJTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxMl19LHIudXBwZXJTaXplLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxMl09dDt9LHIubGluZU9mZnNldFguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCs3XX0sci5saW5lT2Zmc2V0WC5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fc3RydWN0QXJyYXkuZmxvYXQzMlt0aGlzLl9wb3M0KzddPXQ7fSxyLmxpbmVPZmZzZXRZLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5mbG9hdDMyW3RoaXMuX3BvczQrOF19LHIubGluZU9mZnNldFkuc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCs4XT10O30sci53cml0aW5nTW9kZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDhbdGhpcy5fcG9zMSszNl19LHIud3JpdGluZ01vZGUuc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3N0cnVjdEFycmF5LnVpbnQ4W3RoaXMuX3BvczErMzZdPXQ7fSxyLmhpZGRlbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDhbdGhpcy5fcG9zMSszN119LHIuaGlkZGVuLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50OFt0aGlzLl9wb3MxKzM3XT10O30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsciksZX0ocm4pO01uLnByb3RvdHlwZS5zaXplPTQwO3ZhciBCbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBNbih0aGlzLHQpfSxlfSh2bik7QXIoXCJQbGFjZWRTeW1ib2xBcnJheVwiLEJuKTt2YXIgVm49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO310JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgcj17b2Zmc2V0WDp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIHIub2Zmc2V0WC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuZmxvYXQzMlt0aGlzLl9wb3M0KzBdfSxyLm9mZnNldFguc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCswXT10O30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsciksZX0ocm4pO1ZuLnByb3RvdHlwZS5zaXplPTQ7dmFyIEluPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmdldG9mZnNldFg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZmxvYXQzMlsxKnQrMF19LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFZuKHRoaXMsdCl9LGV9KGduKTtBcihcIkdseXBoT2Zmc2V0QXJyYXlcIixJbik7dmFyIENuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIHI9e3g6e2NvbmZpZ3VyYWJsZTohMH0seTp7Y29uZmlndXJhYmxlOiEwfSx0aWxlVW5pdERpc3RhbmNlRnJvbUFuY2hvcjp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIHIueC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMiswXX0sci54LnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzBdPXQ7fSxyLnkuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMV19LHIueS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMisxXT10O30sci50aWxlVW5pdERpc3RhbmNlRnJvbUFuY2hvci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMisyXX0sci50aWxlVW5pdERpc3RhbmNlRnJvbUFuY2hvci5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMisyXT10O30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsciksZX0ocm4pO0NuLnByb3RvdHlwZS5zaXplPTY7dmFyIEVuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmdldHg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW50MTZbMyp0KzBdfSxlLnByb3RvdHlwZS5nZXR5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmludDE2WzMqdCsxXX0sZS5wcm90b3R5cGUuZ2V0dGlsZVVuaXREaXN0YW5jZUZyb21BbmNob3I9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW50MTZbMyp0KzJdfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBDbih0aGlzLHQpfSxlfSh4bik7QXIoXCJTeW1ib2xMaW5lVmVydGV4QXJyYXlcIixFbik7dmFyIFRuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIHI9e2ZlYXR1cmVJbmRleDp7Y29uZmlndXJhYmxlOiEwfSxzb3VyY2VMYXllckluZGV4Ontjb25maWd1cmFibGU6ITB9LGJ1Y2tldEluZGV4Ontjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gci5mZWF0dXJlSW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQzMlt0aGlzLl9wb3M0KzBdfSxyLmZlYXR1cmVJbmRleC5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fc3RydWN0QXJyYXkudWludDMyW3RoaXMuX3BvczQrMF09dDt9LHIuc291cmNlTGF5ZXJJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrMl19LHIuc291cmNlTGF5ZXJJbmRleC5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrMl09dDt9LHIuYnVja2V0SW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzNdfSxyLmJ1Y2tldEluZGV4LnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMiszXT10O30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsciksZX0ocm4pO1RuLnByb3RvdHlwZS5zaXplPTg7dmFyIFBuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFRuKHRoaXMsdCl9LGV9KGJuKTtBcihcIkZlYXR1cmVJbmRleEFycmF5XCIsUG4pO3ZhciBGbj1hbihbe25hbWU6XCJhX3Bvc1wiLGNvbXBvbmVudHM6Mix0eXBlOlwiSW50MTZcIn1dLDQpLm1lbWJlcnMsTG49ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9W10pLHRoaXMuc2VnbWVudHM9dDt9O0xuLnByb3RvdHlwZS5wcmVwYXJlU2VnbWVudD1mdW5jdGlvbih0LGUscil7dmFyIG49dGhpcy5zZWdtZW50c1t0aGlzLnNlZ21lbnRzLmxlbmd0aC0xXTtyZXR1cm4gdD5Mbi5NQVhfVkVSVEVYX0FSUkFZX0xFTkdUSCYmTShcIk1heCB2ZXJ0aWNlcyBwZXIgc2VnbWVudCBpcyBcIitMbi5NQVhfVkVSVEVYX0FSUkFZX0xFTkdUSCtcIjogYnVja2V0IHJlcXVlc3RlZCBcIit0KSwoIW58fG4udmVydGV4TGVuZ3RoK3Q+TG4uTUFYX1ZFUlRFWF9BUlJBWV9MRU5HVEgpJiYobj17dmVydGV4T2Zmc2V0OmUubGVuZ3RoLHByaW1pdGl2ZU9mZnNldDpyLmxlbmd0aCx2ZXJ0ZXhMZW5ndGg6MCxwcmltaXRpdmVMZW5ndGg6MH0sdGhpcy5zZWdtZW50cy5wdXNoKG4pKSxufSxMbi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VnbWVudHN9LExuLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLnNlZ21lbnRzO3Q8ZS5sZW5ndGg7dCs9MSl7dmFyIHI9ZVt0XTtmb3IodmFyIG4gaW4gci52YW9zKXIudmFvc1tuXS5kZXN0cm95KCk7fX0sTG4uTUFYX1ZFUlRFWF9BUlJBWV9MRU5HVEg9TWF0aC5wb3coMiwxNiktMSxBcihcIlNlZ21lbnRWZWN0b3JcIixMbik7dmFyIE9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDI1NioodD12KE1hdGguZmxvb3IodCksMCwyNTUpKSsoZT12KE1hdGguZmxvb3IoZSksMCwyNTUpKX07ZnVuY3Rpb24gRG4odCl7cmV0dXJuW09uKDI1NSp0LnIsMjU1KnQuZyksT24oMjU1KnQuYiwyNTUqdC5hKV19dmFyIHFuPWZ1bmN0aW9uKHQsZSxyKXt0aGlzLnZhbHVlPXQsdGhpcy5uYW1lPWUsdGhpcy50eXBlPXIsdGhpcy5zdGF0aXN0aWNzPXttYXg6LTEvMH07fTtxbi5wcm90b3R5cGUuZGVmaW5lcz1mdW5jdGlvbigpe3JldHVybltcIiNkZWZpbmUgSEFTX1VOSUZPUk1fdV9cIit0aGlzLm5hbWVdfSxxbi5wcm90b3R5cGUucG9wdWxhdGVQYWludEFycmF5PWZ1bmN0aW9uKCl7fSxxbi5wcm90b3R5cGUudXBkYXRlUGFpbnRBcnJheT1mdW5jdGlvbigpe30scW4ucHJvdG90eXBlLnVwbG9hZD1mdW5jdGlvbigpe30scW4ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt9LHFuLnByb3RvdHlwZS5zZXRVbmlmb3Jtcz1mdW5jdGlvbih0LGUscixuKXt2YXIgaT1uLmNvbnN0YW50T3IodGhpcy52YWx1ZSksYT10LmdsO1wiY29sb3JcIj09PXRoaXMudHlwZT9hLnVuaWZvcm00ZihlLnVuaWZvcm1zW1widV9cIit0aGlzLm5hbWVdLGkucixpLmcsaS5iLGkuYSk6YS51bmlmb3JtMWYoZS51bmlmb3Jtc1tcInVfXCIrdGhpcy5uYW1lXSxpKTt9O3ZhciBqbj1mdW5jdGlvbih0LGUscil7dGhpcy5leHByZXNzaW9uPXQsdGhpcy5uYW1lPWUsdGhpcy50eXBlPXIsdGhpcy5zdGF0aXN0aWNzPXttYXg6LTEvMH07dmFyIG49XCJjb2xvclwiPT09cj9Bbjpnbjt0aGlzLnBhaW50VmVydGV4QXR0cmlidXRlcz1be25hbWU6XCJhX1wiK2UsdHlwZTpcIkZsb2F0MzJcIixjb21wb25lbnRzOlwiY29sb3JcIj09PXI/MjoxLG9mZnNldDowfV0sdGhpcy5wYWludFZlcnRleEFycmF5PW5ldyBuO307am4ucHJvdG90eXBlLmRlZmluZXM9ZnVuY3Rpb24oKXtyZXR1cm5bXX0sam4ucHJvdG90eXBlLnBvcHVsYXRlUGFpbnRBcnJheT1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMucGFpbnRWZXJ0ZXhBcnJheSxuPXIubGVuZ3RoO3IucmVzZXJ2ZSh0KTt2YXIgaT10aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUobmV3IGpyKDApLGUse30pO2lmKFwiY29sb3JcIj09PXRoaXMudHlwZSlmb3IodmFyIGE9RG4oaSksbz1uO288dDtvKyspci5lbXBsYWNlQmFjayhhWzBdLGFbMV0pO2Vsc2V7Zm9yKHZhciBzPW47czx0O3MrKylyLmVtcGxhY2VCYWNrKGkpO3RoaXMuc3RhdGlzdGljcy5tYXg9TWF0aC5tYXgodGhpcy5zdGF0aXN0aWNzLm1heCxpKTt9fSxqbi5wcm90b3R5cGUudXBkYXRlUGFpbnRBcnJheT1mdW5jdGlvbih0LGUscixuKXt2YXIgaT10aGlzLnBhaW50VmVydGV4QXJyYXksYT10aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoe3pvb206MH0scixuKTtpZihcImNvbG9yXCI9PT10aGlzLnR5cGUpZm9yKHZhciBvPURuKGEpLHM9dDtzPGU7cysrKWkuZW1wbGFjZShzLG9bMF0sb1sxXSk7ZWxzZXtmb3IodmFyIHU9dDt1PGU7dSsrKWkuZW1wbGFjZSh1LGEpO3RoaXMuc3RhdGlzdGljcy5tYXg9TWF0aC5tYXgodGhpcy5zdGF0aXN0aWNzLm1heCxhKTt9fSxqbi5wcm90b3R5cGUudXBsb2FkPWZ1bmN0aW9uKHQpe3RoaXMucGFpbnRWZXJ0ZXhBcnJheSYmdGhpcy5wYWludFZlcnRleEFycmF5LmFycmF5QnVmZmVyJiYodGhpcy5wYWludFZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLnBhaW50VmVydGV4QXJyYXksdGhpcy5wYWludFZlcnRleEF0dHJpYnV0ZXMsdGhpcy5leHByZXNzaW9uLmlzU3RhdGVEZXBlbmRlbnQpKTt9LGpuLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5wYWludFZlcnRleEJ1ZmZlciYmdGhpcy5wYWludFZlcnRleEJ1ZmZlci5kZXN0cm95KCk7fSxqbi5wcm90b3R5cGUuc2V0VW5pZm9ybXM9ZnVuY3Rpb24odCxlKXt0LmdsLnVuaWZvcm0xZihlLnVuaWZvcm1zW1wiYV9cIit0aGlzLm5hbWUrXCJfdFwiXSwwKTt9O3ZhciBSbj1mdW5jdGlvbih0LGUscixuLGkpe3RoaXMuZXhwcmVzc2lvbj10LHRoaXMubmFtZT1lLHRoaXMudHlwZT1yLHRoaXMudXNlSW50ZWdlclpvb209bix0aGlzLnpvb209aSx0aGlzLnN0YXRpc3RpY3M9e21heDotMS8wfTt2YXIgYT1cImNvbG9yXCI9PT1yP2tuOkFuO3RoaXMucGFpbnRWZXJ0ZXhBdHRyaWJ1dGVzPVt7bmFtZTpcImFfXCIrZSx0eXBlOlwiRmxvYXQzMlwiLGNvbXBvbmVudHM6XCJjb2xvclwiPT09cj80OjIsb2Zmc2V0OjB9XSx0aGlzLnBhaW50VmVydGV4QXJyYXk9bmV3IGE7fTtSbi5wcm90b3R5cGUuZGVmaW5lcz1mdW5jdGlvbigpe3JldHVybltdfSxSbi5wcm90b3R5cGUucG9wdWxhdGVQYWludEFycmF5PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5wYWludFZlcnRleEFycmF5LG49ci5sZW5ndGg7ci5yZXNlcnZlKHQpO3ZhciBpPXRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZShuZXcganIodGhpcy56b29tKSxlLHt9KSxhPXRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZShuZXcganIodGhpcy56b29tKzEpLGUse30pO2lmKFwiY29sb3JcIj09PXRoaXMudHlwZSlmb3IodmFyIG89RG4oaSkscz1EbihhKSx1PW47dTx0O3UrKylyLmVtcGxhY2VCYWNrKG9bMF0sb1sxXSxzWzBdLHNbMV0pO2Vsc2V7Zm9yKHZhciBsPW47bDx0O2wrKylyLmVtcGxhY2VCYWNrKGksYSk7dGhpcy5zdGF0aXN0aWNzLm1heD1NYXRoLm1heCh0aGlzLnN0YXRpc3RpY3MubWF4LGksYSk7fX0sUm4ucHJvdG90eXBlLnVwZGF0ZVBhaW50QXJyYXk9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9dGhpcy5wYWludFZlcnRleEFycmF5LGE9dGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHt6b29tOnRoaXMuem9vbX0scixuKSxvPXRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZSh7em9vbTp0aGlzLnpvb20rMX0scixuKTtpZihcImNvbG9yXCI9PT10aGlzLnR5cGUpZm9yKHZhciBzPURuKGEpLHU9RG4obyksbD10O2w8ZTtsKyspaS5lbXBsYWNlKGwsc1swXSxzWzFdLHVbMF0sdVsxXSk7ZWxzZXtmb3IodmFyIHA9dDtwPGU7cCsrKWkuZW1wbGFjZShwLGEsbyk7dGhpcy5zdGF0aXN0aWNzLm1heD1NYXRoLm1heCh0aGlzLnN0YXRpc3RpY3MubWF4LGEsbyk7fX0sUm4ucHJvdG90eXBlLnVwbG9hZD1mdW5jdGlvbih0KXt0aGlzLnBhaW50VmVydGV4QXJyYXkmJnRoaXMucGFpbnRWZXJ0ZXhBcnJheS5hcnJheUJ1ZmZlciYmKHRoaXMucGFpbnRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5wYWludFZlcnRleEFycmF5LHRoaXMucGFpbnRWZXJ0ZXhBdHRyaWJ1dGVzLHRoaXMuZXhwcmVzc2lvbi5pc1N0YXRlRGVwZW5kZW50KSk7fSxSbi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMucGFpbnRWZXJ0ZXhCdWZmZXImJnRoaXMucGFpbnRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpO30sUm4ucHJvdG90eXBlLmludGVycG9sYXRpb25GYWN0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudXNlSW50ZWdlclpvb20/dGhpcy5leHByZXNzaW9uLmludGVycG9sYXRpb25GYWN0b3IoTWF0aC5mbG9vcih0KSx0aGlzLnpvb20sdGhpcy56b29tKzEpOnRoaXMuZXhwcmVzc2lvbi5pbnRlcnBvbGF0aW9uRmFjdG9yKHQsdGhpcy56b29tLHRoaXMuem9vbSsxKX0sUm4ucHJvdG90eXBlLnNldFVuaWZvcm1zPWZ1bmN0aW9uKHQsZSxyKXt0LmdsLnVuaWZvcm0xZihlLnVuaWZvcm1zW1wiYV9cIit0aGlzLm5hbWUrXCJfdFwiXSx0aGlzLmludGVycG9sYXRpb25GYWN0b3Ioci56b29tKSk7fTt2YXIgVW49ZnVuY3Rpb24oKXt0aGlzLmJpbmRlcnM9e30sdGhpcy5jYWNoZUtleT1cIlwiLHRoaXMuX2J1ZmZlcnM9W10sdGhpcy5faWRNYXA9e30sdGhpcy5fYnVmZmVyT2Zmc2V0PTA7fTtVbi5jcmVhdGVEeW5hbWljPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1uZXcgVW4saT1bXTtmb3IodmFyIGEgaW4gdC5wYWludC5fdmFsdWVzKWlmKHIoYSkpe3ZhciBvPXQucGFpbnQuZ2V0KGEpO2lmKG8gaW5zdGFuY2VvZiBKciYmdGUoby5wcm9wZXJ0eS5zcGVjaWZpY2F0aW9uKSl7dmFyIHM9Wm4oYSx0LnR5cGUpLHU9by5wcm9wZXJ0eS5zcGVjaWZpY2F0aW9uLnR5cGUsbD1vLnByb3BlcnR5LnVzZUludGVnZXJab29tO1wiY29uc3RhbnRcIj09PW8udmFsdWUua2luZD8obi5iaW5kZXJzW2FdPW5ldyBxbihvLnZhbHVlLHMsdSksaS5wdXNoKFwiL3VfXCIrcykpOlwic291cmNlXCI9PT1vLnZhbHVlLmtpbmQ/KG4uYmluZGVyc1thXT1uZXcgam4oby52YWx1ZSxzLHUpLGkucHVzaChcIi9hX1wiK3MpKToobi5iaW5kZXJzW2FdPW5ldyBSbihvLnZhbHVlLHMsdSxsLGUpLGkucHVzaChcIi96X1wiK3MpKTt9fXJldHVybiBuLmNhY2hlS2V5PWkuc29ydCgpLmpvaW4oXCJcIiksbn0sVW4ucHJvdG90eXBlLnBvcHVsYXRlUGFpbnRBcnJheXM9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbiBpbiB0aGlzLmJpbmRlcnMpdGhpcy5iaW5kZXJzW25dLnBvcHVsYXRlUGFpbnRBcnJheSh0LGUpO2lmKGUuaWQpe3ZhciBpPVN0cmluZyhlLmlkKTt0aGlzLl9pZE1hcFtpXT10aGlzLl9pZE1hcFtpXXx8W10sdGhpcy5faWRNYXBbaV0ucHVzaCh7aW5kZXg6cixzdGFydDp0aGlzLl9idWZmZXJPZmZzZXQsZW5kOnR9KTt9dGhpcy5fYnVmZmVyT2Zmc2V0PXQ7fSxVbi5wcm90b3R5cGUudXBkYXRlUGFpbnRBcnJheXM9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPSExO2Zvcih2YXIgaSBpbiB0KXt2YXIgYT10aGlzLl9pZE1hcFtpXTtpZihhKWZvcih2YXIgbz10W2ldLHM9MCx1PWE7czx1Lmxlbmd0aDtzKz0xKXt2YXIgbD11W3NdLHA9ZS5mZWF0dXJlKGwuaW5kZXgpO2Zvcih2YXIgaCBpbiB0aGlzLmJpbmRlcnMpe3ZhciBjPXRoaXMuYmluZGVyc1toXTtpZighKGMgaW5zdGFuY2VvZiBxbikmJiEwPT09Yy5leHByZXNzaW9uLmlzU3RhdGVEZXBlbmRlbnQpe3ZhciBmPXIucGFpbnQuZ2V0KGgpO2MuZXhwcmVzc2lvbj1mLnZhbHVlLGMudXBkYXRlUGFpbnRBcnJheShsLnN0YXJ0LGwuZW5kLHAsbyksbj0hMDt9fX19cmV0dXJuIG59LFVuLnByb3RvdHlwZS5kZWZpbmVzPWZ1bmN0aW9uKCl7dmFyIHQ9W107Zm9yKHZhciBlIGluIHRoaXMuYmluZGVycyl0LnB1c2guYXBwbHkodCx0aGlzLmJpbmRlcnNbZV0uZGVmaW5lcygpKTtyZXR1cm4gdH0sVW4ucHJvdG90eXBlLnNldFVuaWZvcm1zPWZ1bmN0aW9uKHQsZSxyLG4pe2Zvcih2YXIgaSBpbiB0aGlzLmJpbmRlcnMpe3RoaXMuYmluZGVyc1tpXS5zZXRVbmlmb3Jtcyh0LGUsbixyLmdldChpKSk7fX0sVW4ucHJvdG90eXBlLmdldFBhaW50VmVydGV4QnVmZmVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJzfSxVbi5wcm90b3R5cGUudXBsb2FkPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLmJpbmRlcnMpdGhpcy5iaW5kZXJzW2VdLnVwbG9hZCh0KTt2YXIgcj1bXTtmb3IodmFyIG4gaW4gdGhpcy5iaW5kZXJzKXt2YXIgaT10aGlzLmJpbmRlcnNbbl07KGkgaW5zdGFuY2VvZiBqbnx8aSBpbnN0YW5jZW9mIFJuKSYmaS5wYWludFZlcnRleEJ1ZmZlciYmci5wdXNoKGkucGFpbnRWZXJ0ZXhCdWZmZXIpO310aGlzLl9idWZmZXJzPXI7fSxVbi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLmJpbmRlcnMpdGhpcy5iaW5kZXJzW3RdLmRlc3Ryb3koKTt9O3ZhciBObj1mdW5jdGlvbih0LGUscixuKXt2b2lkIDA9PT1uJiYobj1mdW5jdGlvbigpe3JldHVybiEwfSksdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnM9e307Zm9yKHZhciBpPTAsYT1lO2k8YS5sZW5ndGg7aSs9MSl7dmFyIG89YVtpXTt0aGlzLnByb2dyYW1Db25maWd1cmF0aW9uc1tvLmlkXT1Vbi5jcmVhdGVEeW5hbWljKG8scixuKSx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9uc1tvLmlkXS5sYXlvdXRBdHRyaWJ1dGVzPXQ7fXRoaXMubmVlZHNVcGxvYWQ9ITE7fTtmdW5jdGlvbiBabih0LGUpe3JldHVybntcInRleHQtb3BhY2l0eVwiOlwib3BhY2l0eVwiLFwiaWNvbi1vcGFjaXR5XCI6XCJvcGFjaXR5XCIsXCJ0ZXh0LWNvbG9yXCI6XCJmaWxsX2NvbG9yXCIsXCJpY29uLWNvbG9yXCI6XCJmaWxsX2NvbG9yXCIsXCJ0ZXh0LWhhbG8tY29sb3JcIjpcImhhbG9fY29sb3JcIixcImljb24taGFsby1jb2xvclwiOlwiaGFsb19jb2xvclwiLFwidGV4dC1oYWxvLWJsdXJcIjpcImhhbG9fYmx1clwiLFwiaWNvbi1oYWxvLWJsdXJcIjpcImhhbG9fYmx1clwiLFwidGV4dC1oYWxvLXdpZHRoXCI6XCJoYWxvX3dpZHRoXCIsXCJpY29uLWhhbG8td2lkdGhcIjpcImhhbG9fd2lkdGhcIixcImxpbmUtZ2FwLXdpZHRoXCI6XCJnYXB3aWR0aFwifVt0XXx8dC5yZXBsYWNlKGUrXCItXCIsXCJcIikucmVwbGFjZSgvLS9nLFwiX1wiKX1Obi5wcm90b3R5cGUucG9wdWxhdGVQYWludEFycmF5cz1mdW5jdGlvbih0LGUscil7Zm9yKHZhciBuIGluIHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zKXRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zW25dLnBvcHVsYXRlUGFpbnRBcnJheXModCxlLHIpO3RoaXMubmVlZHNVcGxvYWQ9ITA7fSxObi5wcm90b3R5cGUudXBkYXRlUGFpbnRBcnJheXM9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbj0wLGk9cjtuPGkubGVuZ3RoO24rPTEpe3ZhciBhPWlbbl07dGhpcy5uZWVkc1VwbG9hZD10aGlzLnByb2dyYW1Db25maWd1cmF0aW9uc1thLmlkXS51cGRhdGVQYWludEFycmF5cyh0LGUsYSl8fHRoaXMubmVlZHNVcGxvYWQ7fX0sTm4ucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnNbdF19LE5uLnByb3RvdHlwZS51cGxvYWQ9ZnVuY3Rpb24odCl7aWYodGhpcy5uZWVkc1VwbG9hZCl7Zm9yKHZhciBlIGluIHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zKXRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zW2VdLnVwbG9hZCh0KTt0aGlzLm5lZWRzVXBsb2FkPSExO319LE5uLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zKXRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zW3RdLmRlc3Ryb3koKTt9LEFyKFwiQ29uc3RhbnRCaW5kZXJcIixxbiksQXIoXCJTb3VyY2VFeHByZXNzaW9uQmluZGVyXCIsam4pLEFyKFwiQ29tcG9zaXRlRXhwcmVzc2lvbkJpbmRlclwiLFJuKSxBcihcIlByb2dyYW1Db25maWd1cmF0aW9uXCIsVW4se29taXQ6W1wiX2J1ZmZlcnNcIl19KSxBcihcIlByb2dyYW1Db25maWd1cmF0aW9uU2V0XCIsTm4pO3ZhciBYbj04MTkyO3ZhciAkbixKbj0oJG49MTYse21pbjotMSpNYXRoLnBvdygyLCRuLTEpLG1heDpNYXRoLnBvdygyLCRuLTEpLTF9KTtmdW5jdGlvbiBHbih0KXtmb3IodmFyIGU9WG4vdC5leHRlbnQscj10LmxvYWRHZW9tZXRyeSgpLG49MDtuPHIubGVuZ3RoO24rKylmb3IodmFyIGk9cltuXSxhPTA7YTxpLmxlbmd0aDthKyspe3ZhciBvPWlbYV07by54PU1hdGgucm91bmQoby54KmUpLG8ueT1NYXRoLnJvdW5kKG8ueSplKSwoby54PEpuLm1pbnx8by54PkpuLm1heHx8by55PEpuLm1pbnx8by55PkpuLm1heCkmJk0oXCJHZW9tZXRyeSBleGNlZWRzIGFsbG93ZWQgZXh0ZW50LCByZWR1Y2UgeW91ciB2ZWN0b3IgdGlsZSBidWZmZXIgc2l6ZVwiKTt9cmV0dXJuIHJ9ZnVuY3Rpb24gSG4odCxlLHIsbixpKXt0LmVtcGxhY2VCYWNrKDIqZSsobisxKS8yLDIqcisoaSsxKS8yKTt9dmFyIEtuPWZ1bmN0aW9uKHQpe3RoaXMuem9vbT10Lnpvb20sdGhpcy5vdmVyc2NhbGluZz10Lm92ZXJzY2FsaW5nLHRoaXMubGF5ZXJzPXQubGF5ZXJzLHRoaXMubGF5ZXJJZHM9dGhpcy5sYXllcnMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlkfSksdGhpcy5pbmRleD10LmluZGV4LHRoaXMubGF5b3V0VmVydGV4QXJyYXk9bmV3IHNuLHRoaXMuaW5kZXhBcnJheT1uZXcgd24sdGhpcy5zZWdtZW50cz1uZXcgTG4sdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnM9bmV3IE5uKEZuLHQubGF5ZXJzLHQuem9vbSk7fTtmdW5jdGlvbiBZbih0LGUscil7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aWYob2koaSxlKSlyZXR1cm4hMDtpZihuaShlLGkscikpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gV24odCxlKXtpZigxPT09dC5sZW5ndGgmJjE9PT10WzBdLmxlbmd0aClyZXR1cm4gYWkoZSx0WzBdWzBdKTtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKylmb3IodmFyIG49ZVtyXSxpPTA7aTxuLmxlbmd0aDtpKyspaWYoYWkodCxuW2ldKSlyZXR1cm4hMDtmb3IodmFyIGE9MDthPHQubGVuZ3RoO2ErKyl7Zm9yKHZhciBvPXRbYV0scz0wO3M8by5sZW5ndGg7cysrKWlmKGFpKGUsb1tzXSkpcmV0dXJuITA7Zm9yKHZhciB1PTA7dTxlLmxlbmd0aDt1KyspaWYoZWkobyxlW3VdKSlyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBRbih0LGUscil7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspZm9yKHZhciBpPWVbbl0sYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgbz10W2FdO2lmKG8ubGVuZ3RoPj0zKWZvcih2YXIgcz0wO3M8aS5sZW5ndGg7cysrKWlmKG9pKG8saVtzXSkpcmV0dXJuITA7aWYodGkobyxpLHIpKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHRpKHQsZSxyKXtpZih0Lmxlbmd0aD4xKXtpZihlaSh0LGUpKXJldHVybiEwO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWlmKG5pKGVbbl0sdCxyKSlyZXR1cm4hMH1mb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKylpZihuaSh0W2ldLGUscikpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gZWkodCxlKXtpZigwPT09dC5sZW5ndGh8fDA9PT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoLTE7cisrKWZvcih2YXIgbj10W3JdLGk9dFtyKzFdLGE9MDthPGUubGVuZ3RoLTE7YSsrKXtpZihyaShuLGksZVthXSxlW2ErMV0pKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHJpKHQsZSxyLG4pe3JldHVybiBCKHQscixuKSE9PUIoZSxyLG4pJiZCKHQsZSxyKSE9PUIodCxlLG4pfWZ1bmN0aW9uIG5pKHQsZSxyKXt2YXIgbj1yKnI7aWYoMT09PWUubGVuZ3RoKXJldHVybiB0LmRpc3RTcXIoZVswXSk8bjtmb3IodmFyIGk9MTtpPGUubGVuZ3RoO2krKyl7aWYoaWkodCxlW2ktMV0sZVtpXSk8bilyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBpaSh0LGUscil7dmFyIG49ZS5kaXN0U3FyKHIpO2lmKDA9PT1uKXJldHVybiB0LmRpc3RTcXIoZSk7dmFyIGk9KCh0LngtZS54KSooci54LWUueCkrKHQueS1lLnkpKihyLnktZS55KSkvbjtyZXR1cm4gaTwwP3QuZGlzdFNxcihlKTppPjE/dC5kaXN0U3FyKHIpOnQuZGlzdFNxcihyLnN1YihlKS5fbXVsdChpKS5fYWRkKGUpKX1mdW5jdGlvbiBhaSh0LGUpe2Zvcih2YXIgcixuLGksYT0hMSxvPTA7bzx0Lmxlbmd0aDtvKyspZm9yKHZhciBzPTAsdT0ocj10W29dKS5sZW5ndGgtMTtzPHIubGVuZ3RoO3U9cysrKW49cltzXSxpPXJbdV0sbi55PmUueSE9aS55PmUueSYmZS54PChpLngtbi54KSooZS55LW4ueSkvKGkueS1uLnkpK24ueCYmKGE9IWEpO3JldHVybiBhfWZ1bmN0aW9uIG9pKHQsZSl7Zm9yKHZhciByPSExLG49MCxpPXQubGVuZ3RoLTE7bjx0Lmxlbmd0aDtpPW4rKyl7dmFyIGE9dFtuXSxvPXRbaV07YS55PmUueSE9by55PmUueSYmZS54PChvLngtYS54KSooZS55LWEueSkvKG8ueS1hLnkpK2EueCYmKHI9IXIpO31yZXR1cm4gcn1mdW5jdGlvbiBzaSh0LGUscil7dmFyIG49ZS5wYWludC5nZXQodCkudmFsdWU7cmV0dXJuXCJjb25zdGFudFwiPT09bi5raW5kP24udmFsdWU6ci5wcm9ncmFtQ29uZmlndXJhdGlvbnMuZ2V0KGUuaWQpLmJpbmRlcnNbdF0uc3RhdGlzdGljcy5tYXh9ZnVuY3Rpb24gdWkodCl7cmV0dXJuIE1hdGguc3FydCh0WzBdKnRbMF0rdFsxXSp0WzFdKX1mdW5jdGlvbiBsaSh0LGUscixuLGkpe2lmKCFlWzBdJiYhZVsxXSlyZXR1cm4gdDt2YXIgYT1jLmNvbnZlcnQoZSk7XCJ2aWV3cG9ydFwiPT09ciYmYS5fcm90YXRlKC1uKTtmb3IodmFyIG89W10scz0wO3M8dC5sZW5ndGg7cysrKXtmb3IodmFyIHU9dFtzXSxsPVtdLHA9MDtwPHUubGVuZ3RoO3ArKylsLnB1c2godVtwXS5zdWIoYS5fbXVsdChpKSkpO28ucHVzaChsKTt9cmV0dXJuIG99S24ucHJvdG90eXBlLnBvcHVsYXRlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTAsbj10O3I8bi5sZW5ndGg7cis9MSl7dmFyIGk9bltyXSxhPWkuZmVhdHVyZSxvPWkuaW5kZXgscz1pLnNvdXJjZUxheWVySW5kZXg7aWYodGhpcy5sYXllcnNbMF0uX2ZlYXR1cmVGaWx0ZXIobmV3IGpyKHRoaXMuem9vbSksYSkpe3ZhciB1PUduKGEpO3RoaXMuYWRkRmVhdHVyZShhLHUsbyksZS5mZWF0dXJlSW5kZXguaW5zZXJ0KGEsdSxvLHMsdGhpcy5pbmRleCk7fX19LEtuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXt0aGlzLnN0YXRlRGVwZW5kZW50TGF5ZXJzLmxlbmd0aCYmdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMudXBkYXRlUGFpbnRBcnJheXModCxlLHRoaXMuc3RhdGVEZXBlbmRlbnRMYXllcnMpO30sS24ucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMubGF5b3V0VmVydGV4QXJyYXkubGVuZ3RofSxLbi5wcm90b3R5cGUudXBsb2FkUGVuZGluZz1mdW5jdGlvbigpe3JldHVybiF0aGlzLnVwbG9hZGVkfHx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5uZWVkc1VwbG9hZH0sS24ucHJvdG90eXBlLnVwbG9hZD1mdW5jdGlvbih0KXt0aGlzLnVwbG9hZGVkfHwodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSxGbiksdGhpcy5pbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKHRoaXMuaW5kZXhBcnJheSkpLHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnVwbG9hZCh0KSx0aGlzLnVwbG9hZGVkPSEwO30sS24ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmxheW91dFZlcnRleEJ1ZmZlciYmKHRoaXMubGF5b3V0VmVydGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLmluZGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5kZXN0cm95KCksdGhpcy5zZWdtZW50cy5kZXN0cm95KCkpO30sS24ucHJvdG90eXBlLmFkZEZlYXR1cmU9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbj0wLGk9ZTtuPGkubGVuZ3RoO24rPTEpZm9yKHZhciBhPTAsbz1pW25dO2E8by5sZW5ndGg7YSs9MSl7dmFyIHM9b1thXSx1PXMueCxsPXMueTtpZighKHU8MHx8dT49WG58fGw8MHx8bD49WG4pKXt2YXIgcD10aGlzLnNlZ21lbnRzLnByZXBhcmVTZWdtZW50KDQsdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx0aGlzLmluZGV4QXJyYXkpLGg9cC52ZXJ0ZXhMZW5ndGg7SG4odGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx1LGwsLTEsLTEpLEhuKHRoaXMubGF5b3V0VmVydGV4QXJyYXksdSxsLDEsLTEpLEhuKHRoaXMubGF5b3V0VmVydGV4QXJyYXksdSxsLDEsMSksSG4odGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx1LGwsLTEsMSksdGhpcy5pbmRleEFycmF5LmVtcGxhY2VCYWNrKGgsaCsxLGgrMiksdGhpcy5pbmRleEFycmF5LmVtcGxhY2VCYWNrKGgsaCszLGgrMikscC52ZXJ0ZXhMZW5ndGgrPTQscC5wcmltaXRpdmVMZW5ndGgrPTI7fX10aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5wb3B1bGF0ZVBhaW50QXJyYXlzKHRoaXMubGF5b3V0VmVydGV4QXJyYXkubGVuZ3RoLHQscik7fSxBcihcIkNpcmNsZUJ1Y2tldFwiLEtuLHtvbWl0OltcImxheWVyc1wiXX0pO3ZhciBwaT17cGFpbnQ6bmV3IFFyKHtcImNpcmNsZS1yYWRpdXNcIjpuZXcgS3IocS5wYWludF9jaXJjbGVbXCJjaXJjbGUtcmFkaXVzXCJdKSxcImNpcmNsZS1jb2xvclwiOm5ldyBLcihxLnBhaW50X2NpcmNsZVtcImNpcmNsZS1jb2xvclwiXSksXCJjaXJjbGUtYmx1clwiOm5ldyBLcihxLnBhaW50X2NpcmNsZVtcImNpcmNsZS1ibHVyXCJdKSxcImNpcmNsZS1vcGFjaXR5XCI6bmV3IEtyKHEucGFpbnRfY2lyY2xlW1wiY2lyY2xlLW9wYWNpdHlcIl0pLFwiY2lyY2xlLXRyYW5zbGF0ZVwiOm5ldyBIcihxLnBhaW50X2NpcmNsZVtcImNpcmNsZS10cmFuc2xhdGVcIl0pLFwiY2lyY2xlLXRyYW5zbGF0ZS1hbmNob3JcIjpuZXcgSHIocS5wYWludF9jaXJjbGVbXCJjaXJjbGUtdHJhbnNsYXRlLWFuY2hvclwiXSksXCJjaXJjbGUtcGl0Y2gtc2NhbGVcIjpuZXcgSHIocS5wYWludF9jaXJjbGVbXCJjaXJjbGUtcGl0Y2gtc2NhbGVcIl0pLFwiY2lyY2xlLXBpdGNoLWFsaWdubWVudFwiOm5ldyBIcihxLnBhaW50X2NpcmNsZVtcImNpcmNsZS1waXRjaC1hbGlnbm1lbnRcIl0pLFwiY2lyY2xlLXN0cm9rZS13aWR0aFwiOm5ldyBLcihxLnBhaW50X2NpcmNsZVtcImNpcmNsZS1zdHJva2Utd2lkdGhcIl0pLFwiY2lyY2xlLXN0cm9rZS1jb2xvclwiOm5ldyBLcihxLnBhaW50X2NpcmNsZVtcImNpcmNsZS1zdHJva2UtY29sb3JcIl0pLFwiY2lyY2xlLXN0cm9rZS1vcGFjaXR5XCI6bmV3IEtyKHEucGFpbnRfY2lyY2xlW1wiY2lyY2xlLXN0cm9rZS1vcGFjaXR5XCJdKX0pfSxoaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgRmxvYXQzMkFycmF5P0Zsb2F0MzJBcnJheTpBcnJheTtNYXRoLlBJO2Z1bmN0aW9uIGNpKCl7dmFyIHQ9bmV3IGhpKDkpO3JldHVybiB0WzBdPTEsdFsxXT0wLHRbMl09MCx0WzNdPTAsdFs0XT0xLHRbNV09MCx0WzZdPTAsdFs3XT0wLHRbOF09MSx0fWZ1bmN0aW9uIGZpKCl7dmFyIHQ9bmV3IGhpKDMpO3JldHVybiB0WzBdPTAsdFsxXT0wLHRbMl09MCx0fWZ1bmN0aW9uIHlpKHQpe3ZhciBlPXRbMF0scj10WzFdLG49dFsyXTtyZXR1cm4gTWF0aC5zcXJ0KGUqZStyKnIrbipuKX1mdW5jdGlvbiBkaSh0LGUscil7dmFyIG49bmV3IGhpKDMpO3JldHVybiBuWzBdPXQsblsxXT1lLG5bMl09cixufWZ1bmN0aW9uIG1pKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV0saT1lWzJdLGE9cipyK24qbitpKmk7cmV0dXJuIGE+MCYmKGE9MS9NYXRoLnNxcnQoYSksdFswXT1lWzBdKmEsdFsxXT1lWzFdKmEsdFsyXT1lWzJdKmEpLHR9ZnVuY3Rpb24gdmkodCxlKXtyZXR1cm4gdFswXSplWzBdK3RbMV0qZVsxXSt0WzJdKmVbMl19ZnVuY3Rpb24gZ2kodCxlLHIpe3ZhciBuPWVbMF0saT1lWzFdLGE9ZVsyXSxvPXJbMF0scz1yWzFdLHU9clsyXTtyZXR1cm4gdFswXT1pKnUtYSpzLHRbMV09YSpvLW4qdSx0WzJdPW4qcy1pKm8sdH12YXIgeGksYmk9eWksd2k9KHhpPWZpKCksZnVuY3Rpb24odCxlLHIsbixpLGEpe3ZhciBvLHM7Zm9yKGV8fChlPTMpLHJ8fChyPTApLHM9bj9NYXRoLm1pbihuKmUrcix0Lmxlbmd0aCk6dC5sZW5ndGgsbz1yO288cztvKz1lKXhpWzBdPXRbb10seGlbMV09dFtvKzFdLHhpWzJdPXRbbysyXSxpKHhpLHhpLGEpLHRbb109eGlbMF0sdFtvKzFdPXhpWzFdLHRbbysyXT14aVsyXTtyZXR1cm4gdH0pO2Z1bmN0aW9uIF9pKCl7dmFyIHQ9bmV3IGhpKDQpO3JldHVybiB0WzBdPTAsdFsxXT0wLHRbMl09MCx0WzNdPTAsdH1mdW5jdGlvbiBBaSh0LGUpe3ZhciByPWVbMF0sbj1lWzFdLGk9ZVsyXSxhPWVbM10sbz1yKnIrbipuK2kqaSthKmE7cmV0dXJuIG8+MCYmKG89MS9NYXRoLnNxcnQobyksdFswXT1yKm8sdFsxXT1uKm8sdFsyXT1pKm8sdFszXT1hKm8pLHR9ZnVuY3Rpb24ga2kodCxlLHIpe3ZhciBuPWVbMF0saT1lWzFdLGE9ZVsyXSxvPWVbM107cmV0dXJuIHRbMF09clswXSpuK3JbNF0qaStyWzhdKmErclsxMl0qbyx0WzFdPXJbMV0qbityWzVdKmkrcls5XSphK3JbMTNdKm8sdFsyXT1yWzJdKm4rcls2XSppK3JbMTBdKmErclsxNF0qbyx0WzNdPXJbM10qbityWzddKmkrclsxMV0qYStyWzE1XSpvLHR9dmFyIHppPWZ1bmN0aW9uKCl7dmFyIHQ9X2koKTtyZXR1cm4gZnVuY3Rpb24oZSxyLG4saSxhLG8pe3ZhciBzLHU7Zm9yKHJ8fChyPTQpLG58fChuPTApLHU9aT9NYXRoLm1pbihpKnIrbixlLmxlbmd0aCk6ZS5sZW5ndGgscz1uO3M8dTtzKz1yKXRbMF09ZVtzXSx0WzFdPWVbcysxXSx0WzJdPWVbcysyXSx0WzNdPWVbcyszXSxhKHQsdCxvKSxlW3NdPXRbMF0sZVtzKzFdPXRbMV0sZVtzKzJdPXRbMl0sZVtzKzNdPXRbM107cmV0dXJuIGV9fSgpO2Z1bmN0aW9uIFNpKCl7dmFyIHQ9bmV3IGhpKDQpO3JldHVybiB0WzBdPTAsdFsxXT0wLHRbMl09MCx0WzNdPTEsdH1mdW5jdGlvbiBNaSh0LGUscixuKXt2YXIgaSxhLG8scyx1LGw9ZVswXSxwPWVbMV0saD1lWzJdLGM9ZVszXSxmPXJbMF0seT1yWzFdLGQ9clsyXSxtPXJbM107cmV0dXJuKGE9bCpmK3AqeStoKmQrYyptKTwwJiYoYT0tYSxmPS1mLHk9LXksZD0tZCxtPS1tKSwxLWE+MWUtNj8oaT1NYXRoLmFjb3MoYSksbz1NYXRoLnNpbihpKSxzPU1hdGguc2luKCgxLW4pKmkpL28sdT1NYXRoLnNpbihuKmkpL28pOihzPTEtbix1PW4pLHRbMF09cypsK3UqZix0WzFdPXMqcCt1KnksdFsyXT1zKmgrdSpkLHRbM109cypjK3UqbSx0fXZhciBCaSxWaSxJaSxDaSxFaSxUaSxQaT1BaTtCaT1maSgpLFZpPWRpKDEsMCwwKSxJaT1kaSgwLDEsMCksQ2k9U2koKSxFaT1TaSgpLFRpPWNpKCk7IWZ1bmN0aW9uKCl7dmFyIHQsZT0oKHQ9bmV3IGhpKDIpKVswXT0wLHRbMV09MCx0KTt9KCk7dmFyIEZpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZSxwaSk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5jcmVhdGVCdWNrZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBLbih0KX0sZS5wcm90b3R5cGUucXVlcnlSYWRpdXM9ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gc2koXCJjaXJjbGUtcmFkaXVzXCIsdGhpcyxlKStzaShcImNpcmNsZS1zdHJva2Utd2lkdGhcIix0aGlzLGUpK3VpKHRoaXMucGFpbnQuZ2V0KFwiY2lyY2xlLXRyYW5zbGF0ZVwiKSl9LGUucHJvdG90eXBlLnF1ZXJ5SW50ZXJzZWN0c0ZlYXR1cmU9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyxzKXtmb3IodmFyIHU9bGkodCx0aGlzLnBhaW50LmdldChcImNpcmNsZS10cmFuc2xhdGVcIiksdGhpcy5wYWludC5nZXQoXCJjaXJjbGUtdHJhbnNsYXRlLWFuY2hvclwiKSxhLmFuZ2xlLG8pLGw9dGhpcy5wYWludC5nZXQoXCJjaXJjbGUtcmFkaXVzXCIpLmV2YWx1YXRlKGUscikrdGhpcy5wYWludC5nZXQoXCJjaXJjbGUtc3Ryb2tlLXdpZHRoXCIpLmV2YWx1YXRlKGUscikscD1cIm1hcFwiPT09dGhpcy5wYWludC5nZXQoXCJjaXJjbGUtcGl0Y2gtYWxpZ25tZW50XCIpLGg9cD91OmZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBMaSh0LGUscil9KX0pfSh1LHMsYSksYz1wP2wqbzpsLGY9MCx5PW47Zjx5Lmxlbmd0aDtmKz0xKWZvcih2YXIgZD0wLG09eVtmXTtkPG0ubGVuZ3RoO2QrPTEpe3ZhciB2PW1bZF0sZz1wP3Y6TGkodixzLGEpLHg9YyxiPWtpKFtdLFt2Lngsdi55LDAsMV0scyk7aWYoXCJ2aWV3cG9ydFwiPT09dGhpcy5wYWludC5nZXQoXCJjaXJjbGUtcGl0Y2gtc2NhbGVcIikmJlwibWFwXCI9PT10aGlzLnBhaW50LmdldChcImNpcmNsZS1waXRjaC1hbGlnbm1lbnRcIik/eCo9YlszXS9hLmNhbWVyYVRvQ2VudGVyRGlzdGFuY2U6XCJtYXBcIj09PXRoaXMucGFpbnQuZ2V0KFwiY2lyY2xlLXBpdGNoLXNjYWxlXCIpJiZcInZpZXdwb3J0XCI9PT10aGlzLnBhaW50LmdldChcImNpcmNsZS1waXRjaC1hbGlnbm1lbnRcIikmJih4Kj1hLmNhbWVyYVRvQ2VudGVyRGlzdGFuY2UvYlszXSksWW4oaCxnLHgpKXJldHVybiEwfXJldHVybiExfSxlfSh0bik7ZnVuY3Rpb24gTGkodCxlLHIpe3ZhciBuPWtpKFtdLFt0LngsdC55LDAsMV0sZSk7cmV0dXJuIG5ldyBjKChuWzBdL25bM10rMSkqci53aWR0aCouNSwoblsxXS9uWzNdKzEpKnIuaGVpZ2h0Ki41KX12YXIgT2k9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZX0oS24pO2Z1bmN0aW9uIERpKHQsZSxyLG4pe3ZhciBpPWUud2lkdGgsYT1lLmhlaWdodDtpZihuKXtpZihuLmxlbmd0aCE9PWkqYSpyKXRocm93IG5ldyBSYW5nZUVycm9yKFwibWlzbWF0Y2hlZCBpbWFnZSBzaXplXCIpfWVsc2Ugbj1uZXcgVWludDhBcnJheShpKmEqcik7cmV0dXJuIHQud2lkdGg9aSx0LmhlaWdodD1hLHQuZGF0YT1uLHR9ZnVuY3Rpb24gcWkodCxlLHIpe3ZhciBuPWUud2lkdGgsaT1lLmhlaWdodDtpZihuIT09dC53aWR0aHx8aSE9PXQuaGVpZ2h0KXt2YXIgYT1EaSh7fSx7d2lkdGg6bixoZWlnaHQ6aX0scik7amkodCxhLHt4OjAseTowfSx7eDowLHk6MH0se3dpZHRoOk1hdGgubWluKHQud2lkdGgsbiksaGVpZ2h0Ok1hdGgubWluKHQuaGVpZ2h0LGkpfSxyKSx0LndpZHRoPW4sdC5oZWlnaHQ9aSx0LmRhdGE9YS5kYXRhO319ZnVuY3Rpb24gamkodCxlLHIsbixpLGEpe2lmKDA9PT1pLndpZHRofHwwPT09aS5oZWlnaHQpcmV0dXJuIGU7aWYoaS53aWR0aD50LndpZHRofHxpLmhlaWdodD50LmhlaWdodHx8ci54PnQud2lkdGgtaS53aWR0aHx8ci55PnQuaGVpZ2h0LWkuaGVpZ2h0KXRocm93IG5ldyBSYW5nZUVycm9yKFwib3V0IG9mIHJhbmdlIHNvdXJjZSBjb29yZGluYXRlcyBmb3IgaW1hZ2UgY29weVwiKTtpZihpLndpZHRoPmUud2lkdGh8fGkuaGVpZ2h0PmUuaGVpZ2h0fHxuLng+ZS53aWR0aC1pLndpZHRofHxuLnk+ZS5oZWlnaHQtaS5oZWlnaHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvdXQgb2YgcmFuZ2UgZGVzdGluYXRpb24gY29vcmRpbmF0ZXMgZm9yIGltYWdlIGNvcHlcIik7Zm9yKHZhciBvPXQuZGF0YSxzPWUuZGF0YSx1PTA7dTxpLmhlaWdodDt1KyspZm9yKHZhciBsPSgoci55K3UpKnQud2lkdGgrci54KSphLHA9KChuLnkrdSkqZS53aWR0aCtuLngpKmEsaD0wO2g8aS53aWR0aCphO2grKylzW3AraF09b1tsK2hdO3JldHVybiBlfUFyKFwiSGVhdG1hcEJ1Y2tldFwiLE9pLHtvbWl0OltcImxheWVyc1wiXX0pO3ZhciBSaT1mdW5jdGlvbih0LGUpe0RpKHRoaXMsdCwxLGUpO307UmkucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0KXtxaSh0aGlzLHQsMSk7fSxSaS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFJpKHt3aWR0aDp0aGlzLndpZHRoLGhlaWdodDp0aGlzLmhlaWdodH0sbmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhKSl9LFJpLmNvcHk9ZnVuY3Rpb24odCxlLHIsbixpKXtqaSh0LGUscixuLGksMSk7fTt2YXIgVWk9ZnVuY3Rpb24odCxlKXtEaSh0aGlzLHQsNCxlKTt9O1VpLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCl7cWkodGhpcyx0LDQpO30sVWkucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBVaSh7d2lkdGg6dGhpcy53aWR0aCxoZWlnaHQ6dGhpcy5oZWlnaHR9LG5ldyBVaW50OEFycmF5KHRoaXMuZGF0YSkpfSxVaS5jb3B5PWZ1bmN0aW9uKHQsZSxyLG4saSl7amkodCxlLHIsbixpLDQpO30sQXIoXCJBbHBoYUltYWdlXCIsUmkpLEFyKFwiUkdCQUltYWdlXCIsVWkpO3ZhciBOaT17cGFpbnQ6bmV3IFFyKHtcImhlYXRtYXAtcmFkaXVzXCI6bmV3IEtyKHEucGFpbnRfaGVhdG1hcFtcImhlYXRtYXAtcmFkaXVzXCJdKSxcImhlYXRtYXAtd2VpZ2h0XCI6bmV3IEtyKHEucGFpbnRfaGVhdG1hcFtcImhlYXRtYXAtd2VpZ2h0XCJdKSxcImhlYXRtYXAtaW50ZW5zaXR5XCI6bmV3IEhyKHEucGFpbnRfaGVhdG1hcFtcImhlYXRtYXAtaW50ZW5zaXR5XCJdKSxcImhlYXRtYXAtY29sb3JcIjpuZXcgV3IocS5wYWludF9oZWF0bWFwW1wiaGVhdG1hcC1jb2xvclwiXSksXCJoZWF0bWFwLW9wYWNpdHlcIjpuZXcgSHIocS5wYWludF9oZWF0bWFwW1wiaGVhdG1hcC1vcGFjaXR5XCJdKX0pfTtmdW5jdGlvbiBaaSh0LGUpe2Zvcih2YXIgcj1uZXcgVWludDhBcnJheSgxMDI0KSxuPXt9LGk9MCxhPTA7aTwyNTY7aSsrLGErPTQpe25bZV09aS8yNTU7dmFyIG89dC5ldmFsdWF0ZShuKTtyW2ErMF09TWF0aC5mbG9vcigyNTUqby5yL28uYSksclthKzFdPU1hdGguZmxvb3IoMjU1Km8uZy9vLmEpLHJbYSsyXT1NYXRoLmZsb29yKDI1NSpvLmIvby5hKSxyW2ErM109TWF0aC5mbG9vcigyNTUqby5hKTt9cmV0dXJuIG5ldyBVaSh7d2lkdGg6MjU2LGhlaWdodDoxfSxyKX12YXIgWGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLE5pKSx0aGlzLl91cGRhdGVDb2xvclJhbXAoKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmNyZWF0ZUJ1Y2tldD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IE9pKHQpfSxlLnByb3RvdHlwZS5faGFuZGxlU3BlY2lhbFBhaW50UHJvcGVydHlVcGRhdGU9ZnVuY3Rpb24odCl7XCJoZWF0bWFwLWNvbG9yXCI9PT10JiZ0aGlzLl91cGRhdGVDb2xvclJhbXAoKTt9LGUucHJvdG90eXBlLl91cGRhdGVDb2xvclJhbXA9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50Ll92YWx1ZXNbXCJoZWF0bWFwLWNvbG9yXCJdLnZhbHVlLmV4cHJlc3Npb247dGhpcy5jb2xvclJhbXA9WmkodCxcImhlYXRtYXBEZW5zaXR5XCIpLHRoaXMuY29sb3JSYW1wVGV4dHVyZT1udWxsO30sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5oZWF0bWFwRmJvJiYodGhpcy5oZWF0bWFwRmJvLmRlc3Ryb3koKSx0aGlzLmhlYXRtYXBGYm89bnVsbCk7fSxlLnByb3RvdHlwZS5xdWVyeVJhZGl1cz1mdW5jdGlvbigpe3JldHVybiAwfSxlLnByb3RvdHlwZS5xdWVyeUludGVyc2VjdHNGZWF0dXJlPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGUucHJvdG90eXBlLmhhc09mZnNjcmVlblBhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMucGFpbnQuZ2V0KFwiaGVhdG1hcC1vcGFjaXR5XCIpJiZcIm5vbmVcIiE9PXRoaXMudmlzaWJpbGl0eX0sZX0odG4pLCRpPXtwYWludDpuZXcgUXIoe1wiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1kaXJlY3Rpb25cIjpuZXcgSHIocS5wYWludF9oaWxsc2hhZGVbXCJoaWxsc2hhZGUtaWxsdW1pbmF0aW9uLWRpcmVjdGlvblwiXSksXCJoaWxsc2hhZGUtaWxsdW1pbmF0aW9uLWFuY2hvclwiOm5ldyBIcihxLnBhaW50X2hpbGxzaGFkZVtcImhpbGxzaGFkZS1pbGx1bWluYXRpb24tYW5jaG9yXCJdKSxcImhpbGxzaGFkZS1leGFnZ2VyYXRpb25cIjpuZXcgSHIocS5wYWludF9oaWxsc2hhZGVbXCJoaWxsc2hhZGUtZXhhZ2dlcmF0aW9uXCJdKSxcImhpbGxzaGFkZS1zaGFkb3ctY29sb3JcIjpuZXcgSHIocS5wYWludF9oaWxsc2hhZGVbXCJoaWxsc2hhZGUtc2hhZG93LWNvbG9yXCJdKSxcImhpbGxzaGFkZS1oaWdobGlnaHQtY29sb3JcIjpuZXcgSHIocS5wYWludF9oaWxsc2hhZGVbXCJoaWxsc2hhZGUtaGlnaGxpZ2h0LWNvbG9yXCJdKSxcImhpbGxzaGFkZS1hY2NlbnQtY29sb3JcIjpuZXcgSHIocS5wYWludF9oaWxsc2hhZGVbXCJoaWxsc2hhZGUtYWNjZW50LWNvbG9yXCJdKX0pfSxKaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLGUsJGkpO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuaGFzT2Zmc2NyZWVuUGFzcz1mdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5wYWludC5nZXQoXCJoaWxsc2hhZGUtZXhhZ2dlcmF0aW9uXCIpJiZcIm5vbmVcIiE9PXRoaXMudmlzaWJpbGl0eX0sZX0odG4pLEdpPWFuKFt7bmFtZTpcImFfcG9zXCIsY29tcG9uZW50czoyLHR5cGU6XCJJbnQxNlwifV0sNCkubWVtYmVycyxIaT1ZaSxLaT1ZaTtmdW5jdGlvbiBZaSh0LGUscil7cj1yfHwyO3ZhciBuLGksYSxvLHMsdSxsLHA9ZSYmZS5sZW5ndGgsaD1wP2VbMF0qcjp0Lmxlbmd0aCxjPVdpKHQsMCxoLHIsITApLGY9W107aWYoIWMpcmV0dXJuIGY7aWYocCYmKGM9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGksYSxvLHMsdSxsPVtdO2ZvcihpPTAsYT1lLmxlbmd0aDtpPGE7aSsrKW89ZVtpXSpuLHM9aTxhLTE/ZVtpKzFdKm46dC5sZW5ndGgsKHU9V2kodCxvLHMsbiwhMSkpPT09dS5uZXh0JiYodS5zdGVpbmVyPSEwKSxsLnB1c2godWEodSkpO2ZvcihsLnNvcnQoYWEpLGk9MDtpPGwubGVuZ3RoO2krKylvYShsW2ldLHIpLHI9UWkocixyLm5leHQpO3JldHVybiByfSh0LGUsYyxyKSksdC5sZW5ndGg+ODAqcil7bj1hPXRbMF0saT1vPXRbMV07Zm9yKHZhciB5PXI7eTxoO3krPXIpKHM9dFt5XSk8biYmKG49cyksKHU9dFt5KzFdKTxpJiYoaT11KSxzPmEmJihhPXMpLHU+byYmKG89dSk7bD0wIT09KGw9TWF0aC5tYXgoYS1uLG8taSkpPzEvbDowO31yZXR1cm4gdGEoYyxmLHIsbixpLGwpLGZ9ZnVuY3Rpb24gV2kodCxlLHIsbixpKXt2YXIgYSxvO2lmKGk9PT14YSh0LGUscixuKT4wKWZvcihhPWU7YTxyO2ErPW4pbz1tYShhLHRbYV0sdFthKzFdLG8pO2Vsc2UgZm9yKGE9ci1uO2E+PWU7YS09bilvPW1hKGEsdFthXSx0W2ErMV0sbyk7cmV0dXJuIG8mJmNhKG8sby5uZXh0KSYmKHZhKG8pLG89by5uZXh0KSxvfWZ1bmN0aW9uIFFpKHQsZSl7aWYoIXQpcmV0dXJuIHQ7ZXx8KGU9dCk7dmFyIHIsbj10O2Rve2lmKHI9ITEsbi5zdGVpbmVyfHwhY2EobixuLm5leHQpJiYwIT09aGEobi5wcmV2LG4sbi5uZXh0KSluPW4ubmV4dDtlbHNle2lmKHZhKG4pLChuPWU9bi5wcmV2KT09PW4ubmV4dClicmVhaztyPSEwO319d2hpbGUocnx8biE9PWUpO3JldHVybiBlfWZ1bmN0aW9uIHRhKHQsZSxyLG4saSxhLG8pe2lmKHQpeyFvJiZhJiZmdW5jdGlvbih0LGUscixuKXt2YXIgaT10O2Rve251bGw9PT1pLnomJihpLno9c2EoaS54LGkueSxlLHIsbikpLGkucHJldlo9aS5wcmV2LGkubmV4dFo9aS5uZXh0LGk9aS5uZXh0O313aGlsZShpIT09dCk7aS5wcmV2Wi5uZXh0Wj1udWxsLGkucHJldlo9bnVsbCxmdW5jdGlvbih0KXt2YXIgZSxyLG4saSxhLG8scyx1LGw9MTtkb3tmb3Iocj10LHQ9bnVsbCxhPW51bGwsbz0wO3I7KXtmb3IobysrLG49cixzPTAsZT0wO2U8bCYmKHMrKyxuPW4ubmV4dFopO2UrKyk7Zm9yKHU9bDtzPjB8fHU+MCYmbjspMCE9PXMmJigwPT09dXx8IW58fHIuejw9bi56KT8oaT1yLHI9ci5uZXh0WixzLS0pOihpPW4sbj1uLm5leHRaLHUtLSksYT9hLm5leHRaPWk6dD1pLGkucHJldlo9YSxhPWk7cj1uO31hLm5leHRaPW51bGwsbCo9Mjt9d2hpbGUobz4xKX0oaSk7fSh0LG4saSxhKTtmb3IodmFyIHMsdSxsPXQ7dC5wcmV2IT09dC5uZXh0OylpZihzPXQucHJldix1PXQubmV4dCxhP3JhKHQsbixpLGEpOmVhKHQpKWUucHVzaChzLmkvciksZS5wdXNoKHQuaS9yKSxlLnB1c2godS5pL3IpLHZhKHQpLHQ9dS5uZXh0LGw9dS5uZXh0O2Vsc2UgaWYoKHQ9dSk9PT1sKXtvPzE9PT1vP3RhKHQ9bmEodCxlLHIpLGUscixuLGksYSwyKToyPT09byYmaWEodCxlLHIsbixpLGEpOnRhKFFpKHQpLGUscixuLGksYSwxKTticmVha319fWZ1bmN0aW9uIGVhKHQpe3ZhciBlPXQucHJldixyPXQsbj10Lm5leHQ7aWYoaGEoZSxyLG4pPj0wKXJldHVybiExO2Zvcih2YXIgaT10Lm5leHQubmV4dDtpIT09dC5wcmV2Oyl7aWYobGEoZS54LGUueSxyLngsci55LG4ueCxuLnksaS54LGkueSkmJmhhKGkucHJldixpLGkubmV4dCk+PTApcmV0dXJuITE7aT1pLm5leHQ7fXJldHVybiEwfWZ1bmN0aW9uIHJhKHQsZSxyLG4pe3ZhciBpPXQucHJldixhPXQsbz10Lm5leHQ7aWYoaGEoaSxhLG8pPj0wKXJldHVybiExO2Zvcih2YXIgcz1pLng8YS54P2kueDxvLng/aS54Om8ueDphLng8by54P2EueDpvLngsdT1pLnk8YS55P2kueTxvLnk/aS55Om8ueTphLnk8by55P2EueTpvLnksbD1pLng+YS54P2kueD5vLng/aS54Om8ueDphLng+by54P2EueDpvLngscD1pLnk+YS55P2kueT5vLnk/aS55Om8ueTphLnk+by55P2EueTpvLnksaD1zYShzLHUsZSxyLG4pLGM9c2EobCxwLGUscixuKSxmPXQucHJldloseT10Lm5leHRaO2YmJmYuej49aCYmeSYmeS56PD1jOyl7aWYoZiE9PXQucHJldiYmZiE9PXQubmV4dCYmbGEoaS54LGkueSxhLngsYS55LG8ueCxvLnksZi54LGYueSkmJmhhKGYucHJldixmLGYubmV4dCk+PTApcmV0dXJuITE7aWYoZj1mLnByZXZaLHkhPT10LnByZXYmJnkhPT10Lm5leHQmJmxhKGkueCxpLnksYS54LGEueSxvLngsby55LHkueCx5LnkpJiZoYSh5LnByZXYseSx5Lm5leHQpPj0wKXJldHVybiExO3k9eS5uZXh0Wjt9Zm9yKDtmJiZmLno+PWg7KXtpZihmIT09dC5wcmV2JiZmIT09dC5uZXh0JiZsYShpLngsaS55LGEueCxhLnksby54LG8ueSxmLngsZi55KSYmaGEoZi5wcmV2LGYsZi5uZXh0KT49MClyZXR1cm4hMTtmPWYucHJldlo7fWZvcig7eSYmeS56PD1jOyl7aWYoeSE9PXQucHJldiYmeSE9PXQubmV4dCYmbGEoaS54LGkueSxhLngsYS55LG8ueCxvLnkseS54LHkueSkmJmhhKHkucHJldix5LHkubmV4dCk+PTApcmV0dXJuITE7eT15Lm5leHRaO31yZXR1cm4hMH1mdW5jdGlvbiBuYSh0LGUscil7dmFyIG49dDtkb3t2YXIgaT1uLnByZXYsYT1uLm5leHQubmV4dDshY2EoaSxhKSYmZmEoaSxuLG4ubmV4dCxhKSYmeWEoaSxhKSYmeWEoYSxpKSYmKGUucHVzaChpLmkvciksZS5wdXNoKG4uaS9yKSxlLnB1c2goYS5pL3IpLHZhKG4pLHZhKG4ubmV4dCksbj10PWEpLG49bi5uZXh0O313aGlsZShuIT09dCk7cmV0dXJuIG59ZnVuY3Rpb24gaWEodCxlLHIsbixpLGEpe3ZhciBvPXQ7ZG97Zm9yKHZhciBzPW8ubmV4dC5uZXh0O3MhPT1vLnByZXY7KXtpZihvLmkhPT1zLmkmJnBhKG8scykpe3ZhciB1PWRhKG8scyk7cmV0dXJuIG89UWkobyxvLm5leHQpLHU9UWkodSx1Lm5leHQpLHRhKG8sZSxyLG4saSxhKSx2b2lkIHRhKHUsZSxyLG4saSxhKX1zPXMubmV4dDt9bz1vLm5leHQ7fXdoaWxlKG8hPT10KX1mdW5jdGlvbiBhYSh0LGUpe3JldHVybiB0LngtZS54fWZ1bmN0aW9uIG9hKHQsZSl7aWYoZT1mdW5jdGlvbih0LGUpe3ZhciByLG49ZSxpPXQueCxhPXQueSxvPS0xLzA7ZG97aWYoYTw9bi55JiZhPj1uLm5leHQueSYmbi5uZXh0LnkhPT1uLnkpe3ZhciBzPW4ueCsoYS1uLnkpKihuLm5leHQueC1uLngpLyhuLm5leHQueS1uLnkpO2lmKHM8PWkmJnM+byl7aWYobz1zLHM9PT1pKXtpZihhPT09bi55KXJldHVybiBuO2lmKGE9PT1uLm5leHQueSlyZXR1cm4gbi5uZXh0fXI9bi54PG4ubmV4dC54P246bi5uZXh0O319bj1uLm5leHQ7fXdoaWxlKG4hPT1lKTtpZighcilyZXR1cm4gbnVsbDtpZihpPT09bylyZXR1cm4gci5wcmV2O3ZhciB1LGw9cixwPXIueCxoPXIueSxjPTEvMDtuPXIubmV4dDtmb3IoO24hPT1sOylpPj1uLngmJm4ueD49cCYmaSE9PW4ueCYmbGEoYTxoP2k6byxhLHAsaCxhPGg/bzppLGEsbi54LG4ueSkmJigodT1NYXRoLmFicyhhLW4ueSkvKGktbi54KSk8Y3x8dT09PWMmJm4ueD5yLngpJiZ5YShuLHQpJiYocj1uLGM9dSksbj1uLm5leHQ7cmV0dXJuIHJ9KHQsZSkpe3ZhciByPWRhKGUsdCk7UWkocixyLm5leHQpO319ZnVuY3Rpb24gc2EodCxlLHIsbixpKXtyZXR1cm4odD0xNDMxNjU1NzY1JigodD04NTg5OTM0NTkmKCh0PTI1MjY0NTEzNSYoKHQ9MTY3MTE5MzUmKCh0PTMyNzY3Kih0LXIpKmkpfHQ8PDgpKXx0PDw0KSl8dDw8MikpfHQ8PDEpKXwoZT0xNDMxNjU1NzY1JigoZT04NTg5OTM0NTkmKChlPTI1MjY0NTEzNSYoKGU9MTY3MTE5MzUmKChlPTMyNzY3KihlLW4pKmkpfGU8PDgpKXxlPDw0KSl8ZTw8MikpfGU8PDEpKTw8MX1mdW5jdGlvbiB1YSh0KXt2YXIgZT10LHI9dDtkb3tlLng8ci54JiYocj1lKSxlPWUubmV4dDt9d2hpbGUoZSE9PXQpO3JldHVybiByfWZ1bmN0aW9uIGxhKHQsZSxyLG4saSxhLG8scyl7cmV0dXJuKGktbykqKGUtcyktKHQtbykqKGEtcyk+PTAmJih0LW8pKihuLXMpLShyLW8pKihlLXMpPj0wJiYoci1vKSooYS1zKS0oaS1vKSoobi1zKT49MH1mdW5jdGlvbiBwYSh0LGUpe3JldHVybiB0Lm5leHQuaSE9PWUuaSYmdC5wcmV2LmkhPT1lLmkmJiFmdW5jdGlvbih0LGUpe3ZhciByPXQ7ZG97aWYoci5pIT09dC5pJiZyLm5leHQuaSE9PXQuaSYmci5pIT09ZS5pJiZyLm5leHQuaSE9PWUuaSYmZmEocixyLm5leHQsdCxlKSlyZXR1cm4hMDtyPXIubmV4dDt9d2hpbGUociE9PXQpO3JldHVybiExfSh0LGUpJiZ5YSh0LGUpJiZ5YShlLHQpJiZmdW5jdGlvbih0LGUpe3ZhciByPXQsbj0hMSxpPSh0LngrZS54KS8yLGE9KHQueStlLnkpLzI7ZG97ci55PmEhPXIubmV4dC55PmEmJnIubmV4dC55IT09ci55JiZpPChyLm5leHQueC1yLngpKihhLXIueSkvKHIubmV4dC55LXIueSkrci54JiYobj0hbikscj1yLm5leHQ7fXdoaWxlKHIhPT10KTtyZXR1cm4gbn0odCxlKX1mdW5jdGlvbiBoYSh0LGUscil7cmV0dXJuKGUueS10LnkpKihyLngtZS54KS0oZS54LXQueCkqKHIueS1lLnkpfWZ1bmN0aW9uIGNhKHQsZSl7cmV0dXJuIHQueD09PWUueCYmdC55PT09ZS55fWZ1bmN0aW9uIGZhKHQsZSxyLG4pe3JldHVybiEhKGNhKHQsZSkmJmNhKHIsbil8fGNhKHQsbikmJmNhKHIsZSkpfHxoYSh0LGUscik+MCE9aGEodCxlLG4pPjAmJmhhKHIsbix0KT4wIT1oYShyLG4sZSk+MH1mdW5jdGlvbiB5YSh0LGUpe3JldHVybiBoYSh0LnByZXYsdCx0Lm5leHQpPDA/aGEodCxlLHQubmV4dCk+PTAmJmhhKHQsdC5wcmV2LGUpPj0wOmhhKHQsZSx0LnByZXYpPDB8fGhhKHQsdC5uZXh0LGUpPDB9ZnVuY3Rpb24gZGEodCxlKXt2YXIgcj1uZXcgZ2EodC5pLHQueCx0LnkpLG49bmV3IGdhKGUuaSxlLngsZS55KSxpPXQubmV4dCxhPWUucHJldjtyZXR1cm4gdC5uZXh0PWUsZS5wcmV2PXQsci5uZXh0PWksaS5wcmV2PXIsbi5uZXh0PXIsci5wcmV2PW4sYS5uZXh0PW4sbi5wcmV2PWEsbn1mdW5jdGlvbiBtYSh0LGUscixuKXt2YXIgaT1uZXcgZ2EodCxlLHIpO3JldHVybiBuPyhpLm5leHQ9bi5uZXh0LGkucHJldj1uLG4ubmV4dC5wcmV2PWksbi5uZXh0PWkpOihpLnByZXY9aSxpLm5leHQ9aSksaX1mdW5jdGlvbiB2YSh0KXt0Lm5leHQucHJldj10LnByZXYsdC5wcmV2Lm5leHQ9dC5uZXh0LHQucHJldlomJih0LnByZXZaLm5leHRaPXQubmV4dFopLHQubmV4dFomJih0Lm5leHRaLnByZXZaPXQucHJldlopO31mdW5jdGlvbiBnYSh0LGUscil7dGhpcy5pPXQsdGhpcy54PWUsdGhpcy55PXIsdGhpcy5wcmV2PW51bGwsdGhpcy5uZXh0PW51bGwsdGhpcy56PW51bGwsdGhpcy5wcmV2Wj1udWxsLHRoaXMubmV4dFo9bnVsbCx0aGlzLnN0ZWluZXI9ITE7fWZ1bmN0aW9uIHhhKHQsZSxyLG4pe2Zvcih2YXIgaT0wLGE9ZSxvPXItbjthPHI7YSs9bilpKz0odFtvXS10W2FdKSoodFthKzFdK3RbbysxXSksbz1hO3JldHVybiBpfVlpLmRldmlhdGlvbj1mdW5jdGlvbih0LGUscixuKXt2YXIgaT1lJiZlLmxlbmd0aCxhPWk/ZVswXSpyOnQubGVuZ3RoLG89TWF0aC5hYnMoeGEodCwwLGEscikpO2lmKGkpZm9yKHZhciBzPTAsdT1lLmxlbmd0aDtzPHU7cysrKXt2YXIgbD1lW3NdKnIscD1zPHUtMT9lW3MrMV0qcjp0Lmxlbmd0aDtvLT1NYXRoLmFicyh4YSh0LGwscCxyKSk7fXZhciBoPTA7Zm9yKHM9MDtzPG4ubGVuZ3RoO3MrPTMpe3ZhciBjPW5bc10qcixmPW5bcysxXSpyLHk9bltzKzJdKnI7aCs9TWF0aC5hYnMoKHRbY10tdFt5XSkqKHRbZisxXS10W2MrMV0pLSh0W2NdLXRbZl0pKih0W3krMV0tdFtjKzFdKSk7fXJldHVybiAwPT09byYmMD09PWg/MDpNYXRoLmFicygoaC1vKS9vKX0sWWkuZmxhdHRlbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9dFswXVswXS5sZW5ndGgscj17dmVydGljZXM6W10saG9sZXM6W10sZGltZW5zaW9uczplfSxuPTAsaT0wO2k8dC5sZW5ndGg7aSsrKXtmb3IodmFyIGE9MDthPHRbaV0ubGVuZ3RoO2ErKylmb3IodmFyIG89MDtvPGU7bysrKXIudmVydGljZXMucHVzaCh0W2ldW2FdW29dKTtpPjAmJihuKz10W2ktMV0ubGVuZ3RoLHIuaG9sZXMucHVzaChuKSk7fXJldHVybiByfSxIaS5kZWZhdWx0PUtpO3ZhciBiYT1fYSx3YT1fYTtmdW5jdGlvbiBfYSh0LGUscixuLGkpeyFmdW5jdGlvbiB0KGUscixuLGksYSl7Zm9yKDtpPm47KXtpZihpLW4+NjAwKXt2YXIgbz1pLW4rMSxzPXItbisxLHU9TWF0aC5sb2cobyksbD0uNSpNYXRoLmV4cCgyKnUvMykscD0uNSpNYXRoLnNxcnQodSpsKihvLWwpL28pKihzLW8vMjwwPy0xOjEpLGg9TWF0aC5tYXgobixNYXRoLmZsb29yKHItcypsL28rcCkpLGM9TWF0aC5taW4oaSxNYXRoLmZsb29yKHIrKG8tcykqbC9vK3ApKTt0KGUscixoLGMsYSk7fXZhciBmPWVbcl0seT1uLGQ9aTtmb3IoQWEoZSxuLHIpLGEoZVtpXSxmKT4wJiZBYShlLG4saSk7eTxkOyl7Zm9yKEFhKGUseSxkKSx5KyssZC0tO2EoZVt5XSxmKTwwOyl5Kys7Zm9yKDthKGVbZF0sZik+MDspZC0tO30wPT09YShlW25dLGYpP0FhKGUsbixkKTpBYShlLCsrZCxpKSxkPD1yJiYobj1kKzEpLHI8PWQmJihpPWQtMSk7fX0odCxlLHJ8fDAsbnx8dC5sZW5ndGgtMSxpfHxrYSk7fWZ1bmN0aW9uIEFhKHQsZSxyKXt2YXIgbj10W2VdO3RbZV09dFtyXSx0W3JdPW47fWZ1bmN0aW9uIGthKHQsZSl7cmV0dXJuIHQ8ZT8tMTp0PmU/MTowfWZ1bmN0aW9uIHphKHQsZSl7dmFyIHI9dC5sZW5ndGg7aWYocjw9MSlyZXR1cm5bdF07Zm9yKHZhciBuLGksYT1bXSxvPTA7bzxyO28rKyl7dmFyIHM9Vih0W29dKTswIT09cyYmKHRbb10uYXJlYT1NYXRoLmFicyhzKSx2b2lkIDA9PT1pJiYoaT1zPDApLGk9PT1zPDA/KG4mJmEucHVzaChuKSxuPVt0W29dXSk6bi5wdXNoKHRbb10pKTt9aWYobiYmYS5wdXNoKG4pLGU+MSlmb3IodmFyIHU9MDt1PGEubGVuZ3RoO3UrKylhW3VdLmxlbmd0aDw9ZXx8KGJhKGFbdV0sZSwxLGFbdV0ubGVuZ3RoLTEsU2EpLGFbdV09YVt1XS5zbGljZSgwLGUpKTtyZXR1cm4gYX1mdW5jdGlvbiBTYSh0LGUpe3JldHVybiBlLmFyZWEtdC5hcmVhfWJhLmRlZmF1bHQ9d2E7dmFyIE1hPWZ1bmN0aW9uKHQpe3RoaXMuem9vbT10Lnpvb20sdGhpcy5vdmVyc2NhbGluZz10Lm92ZXJzY2FsaW5nLHRoaXMubGF5ZXJzPXQubGF5ZXJzLHRoaXMubGF5ZXJJZHM9dGhpcy5sYXllcnMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlkfSksdGhpcy5pbmRleD10LmluZGV4LHRoaXMubGF5b3V0VmVydGV4QXJyYXk9bmV3IHNuLHRoaXMuaW5kZXhBcnJheT1uZXcgd24sdGhpcy5pbmRleEFycmF5Mj1uZXcgX24sdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnM9bmV3IE5uKEdpLHQubGF5ZXJzLHQuem9vbSksdGhpcy5zZWdtZW50cz1uZXcgTG4sdGhpcy5zZWdtZW50czI9bmV3IExuO307TWEucHJvdG90eXBlLnBvcHVsYXRlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTAsbj10O3I8bi5sZW5ndGg7cis9MSl7dmFyIGk9bltyXSxhPWkuZmVhdHVyZSxvPWkuaW5kZXgscz1pLnNvdXJjZUxheWVySW5kZXg7aWYodGhpcy5sYXllcnNbMF0uX2ZlYXR1cmVGaWx0ZXIobmV3IGpyKHRoaXMuem9vbSksYSkpe3ZhciB1PUduKGEpO3RoaXMuYWRkRmVhdHVyZShhLHUsbyksZS5mZWF0dXJlSW5kZXguaW5zZXJ0KGEsdSxvLHMsdGhpcy5pbmRleCk7fX19LE1hLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXt0aGlzLnN0YXRlRGVwZW5kZW50TGF5ZXJzLmxlbmd0aCYmdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMudXBkYXRlUGFpbnRBcnJheXModCxlLHRoaXMuc3RhdGVEZXBlbmRlbnRMYXllcnMpO30sTWEucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMubGF5b3V0VmVydGV4QXJyYXkubGVuZ3RofSxNYS5wcm90b3R5cGUudXBsb2FkUGVuZGluZz1mdW5jdGlvbigpe3JldHVybiF0aGlzLnVwbG9hZGVkfHx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5uZWVkc1VwbG9hZH0sTWEucHJvdG90eXBlLnVwbG9hZD1mdW5jdGlvbih0KXt0aGlzLnVwbG9hZGVkfHwodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSxHaSksdGhpcy5pbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKHRoaXMuaW5kZXhBcnJheSksdGhpcy5pbmRleEJ1ZmZlcjI9dC5jcmVhdGVJbmRleEJ1ZmZlcih0aGlzLmluZGV4QXJyYXkyKSksdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMudXBsb2FkKHQpLHRoaXMudXBsb2FkZWQ9ITA7fSxNYS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMubGF5b3V0VmVydGV4QnVmZmVyJiYodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuaW5kZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuaW5kZXhCdWZmZXIyLmRlc3Ryb3koKSx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5kZXN0cm95KCksdGhpcy5zZWdtZW50cy5kZXN0cm95KCksdGhpcy5zZWdtZW50czIuZGVzdHJveSgpKTt9LE1hLnByb3RvdHlwZS5hZGRGZWF0dXJlPWZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG49MCxpPXphKGUsNTAwKTtuPGkubGVuZ3RoO24rPTEpe2Zvcih2YXIgYT1pW25dLG89MCxzPTAsdT1hO3M8dS5sZW5ndGg7cys9MSl7bys9dVtzXS5sZW5ndGg7fWZvcih2YXIgbD10aGlzLnNlZ21lbnRzLnByZXBhcmVTZWdtZW50KG8sdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx0aGlzLmluZGV4QXJyYXkpLHA9bC52ZXJ0ZXhMZW5ndGgsaD1bXSxjPVtdLGY9MCx5PWE7Zjx5Lmxlbmd0aDtmKz0xKXt2YXIgZD15W2ZdO2lmKDAhPT1kLmxlbmd0aCl7ZCE9PWFbMF0mJmMucHVzaChoLmxlbmd0aC8yKTt2YXIgbT10aGlzLnNlZ21lbnRzMi5wcmVwYXJlU2VnbWVudChkLmxlbmd0aCx0aGlzLmxheW91dFZlcnRleEFycmF5LHRoaXMuaW5kZXhBcnJheTIpLHY9bS52ZXJ0ZXhMZW5ndGg7dGhpcy5sYXlvdXRWZXJ0ZXhBcnJheS5lbXBsYWNlQmFjayhkWzBdLngsZFswXS55KSx0aGlzLmluZGV4QXJyYXkyLmVtcGxhY2VCYWNrKHYrZC5sZW5ndGgtMSx2KSxoLnB1c2goZFswXS54KSxoLnB1c2goZFswXS55KTtmb3IodmFyIGc9MTtnPGQubGVuZ3RoO2crKyl0aGlzLmxheW91dFZlcnRleEFycmF5LmVtcGxhY2VCYWNrKGRbZ10ueCxkW2ddLnkpLHRoaXMuaW5kZXhBcnJheTIuZW1wbGFjZUJhY2soditnLTEsditnKSxoLnB1c2goZFtnXS54KSxoLnB1c2goZFtnXS55KTttLnZlcnRleExlbmd0aCs9ZC5sZW5ndGgsbS5wcmltaXRpdmVMZW5ndGgrPWQubGVuZ3RoO319Zm9yKHZhciB4PUhpKGgsYyksYj0wO2I8eC5sZW5ndGg7Yis9Myl0aGlzLmluZGV4QXJyYXkuZW1wbGFjZUJhY2socCt4W2JdLHAreFtiKzFdLHAreFtiKzJdKTtsLnZlcnRleExlbmd0aCs9byxsLnByaW1pdGl2ZUxlbmd0aCs9eC5sZW5ndGgvMzt9dGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMucG9wdWxhdGVQYWludEFycmF5cyh0aGlzLmxheW91dFZlcnRleEFycmF5Lmxlbmd0aCx0LHIpO30sQXIoXCJGaWxsQnVja2V0XCIsTWEse29taXQ6W1wibGF5ZXJzXCJdfSk7dmFyIEJhPXtwYWludDpuZXcgUXIoe1wiZmlsbC1hbnRpYWxpYXNcIjpuZXcgSHIocS5wYWludF9maWxsW1wiZmlsbC1hbnRpYWxpYXNcIl0pLFwiZmlsbC1vcGFjaXR5XCI6bmV3IEtyKHEucGFpbnRfZmlsbFtcImZpbGwtb3BhY2l0eVwiXSksXCJmaWxsLWNvbG9yXCI6bmV3IEtyKHEucGFpbnRfZmlsbFtcImZpbGwtY29sb3JcIl0pLFwiZmlsbC1vdXRsaW5lLWNvbG9yXCI6bmV3IEtyKHEucGFpbnRfZmlsbFtcImZpbGwtb3V0bGluZS1jb2xvclwiXSksXCJmaWxsLXRyYW5zbGF0ZVwiOm5ldyBIcihxLnBhaW50X2ZpbGxbXCJmaWxsLXRyYW5zbGF0ZVwiXSksXCJmaWxsLXRyYW5zbGF0ZS1hbmNob3JcIjpuZXcgSHIocS5wYWludF9maWxsW1wiZmlsbC10cmFuc2xhdGUtYW5jaG9yXCJdKSxcImZpbGwtcGF0dGVyblwiOm5ldyBZcihxLnBhaW50X2ZpbGxbXCJmaWxsLXBhdHRlcm5cIl0pfSl9LFZhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZSxCYSk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5yZWNhbGN1bGF0ZT1mdW5jdGlvbih0KXt0aGlzLnBhaW50PXRoaXMuX3RyYW5zaXRpb25pbmdQYWludC5wb3NzaWJseUV2YWx1YXRlKHQpO3ZhciBlPXRoaXMucGFpbnQuX3ZhbHVlc1tcImZpbGwtb3V0bGluZS1jb2xvclwiXTtcImNvbnN0YW50XCI9PT1lLnZhbHVlLmtpbmQmJnZvaWQgMD09PWUudmFsdWUudmFsdWUmJih0aGlzLnBhaW50Ll92YWx1ZXNbXCJmaWxsLW91dGxpbmUtY29sb3JcIl09dGhpcy5wYWludC5fdmFsdWVzW1wiZmlsbC1jb2xvclwiXSk7fSxlLnByb3RvdHlwZS5jcmVhdGVCdWNrZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBNYSh0KX0sZS5wcm90b3R5cGUucXVlcnlSYWRpdXM9ZnVuY3Rpb24oKXtyZXR1cm4gdWkodGhpcy5wYWludC5nZXQoXCJmaWxsLXRyYW5zbGF0ZVwiKSl9LGUucHJvdG90eXBlLnF1ZXJ5SW50ZXJzZWN0c0ZlYXR1cmU9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyl7cmV0dXJuIFduKGxpKHQsdGhpcy5wYWludC5nZXQoXCJmaWxsLXRyYW5zbGF0ZVwiKSx0aGlzLnBhaW50LmdldChcImZpbGwtdHJhbnNsYXRlLWFuY2hvclwiKSxhLmFuZ2xlLG8pLG4pfSxlfSh0biksSWE9YW4oW3tuYW1lOlwiYV9wb3NcIixjb21wb25lbnRzOjIsdHlwZTpcIkludDE2XCJ9LHtuYW1lOlwiYV9ub3JtYWxfZWRcIixjb21wb25lbnRzOjQsdHlwZTpcIkludDE2XCJ9XSw0KS5tZW1iZXJzLENhPU1hdGgucG93KDIsMTMpO2Z1bmN0aW9uIEVhKHQsZSxyLG4saSxhLG8scyl7dC5lbXBsYWNlQmFjayhlLHIsMipNYXRoLmZsb29yKG4qQ2EpK28saSpDYSoyLGEqQ2EqMixNYXRoLnJvdW5kKHMpKTt9dmFyIFRhPWZ1bmN0aW9uKHQpe3RoaXMuem9vbT10Lnpvb20sdGhpcy5vdmVyc2NhbGluZz10Lm92ZXJzY2FsaW5nLHRoaXMubGF5ZXJzPXQubGF5ZXJzLHRoaXMubGF5ZXJJZHM9dGhpcy5sYXllcnMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlkfSksdGhpcy5pbmRleD10LmluZGV4LHRoaXMubGF5b3V0VmVydGV4QXJyYXk9bmV3IGxuLHRoaXMuaW5kZXhBcnJheT1uZXcgd24sdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnM9bmV3IE5uKElhLHQubGF5ZXJzLHQuem9vbSksdGhpcy5zZWdtZW50cz1uZXcgTG47fTtmdW5jdGlvbiBQYSh0LGUpe3JldHVybiB0Lng9PT1lLngmJih0Lng8MHx8dC54PlhuKXx8dC55PT09ZS55JiYodC55PDB8fHQueT5Ybil9ZnVuY3Rpb24gRmEodCl7cmV0dXJuIHQuZXZlcnkoZnVuY3Rpb24odCl7cmV0dXJuIHQueDwwfSl8fHQuZXZlcnkoZnVuY3Rpb24odCl7cmV0dXJuIHQueD5Ybn0pfHx0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiB0Lnk8MH0pfHx0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiB0Lnk+WG59KX1UYS5wcm90b3R5cGUucG9wdWxhdGU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9MCxuPXQ7cjxuLmxlbmd0aDtyKz0xKXt2YXIgaT1uW3JdLGE9aS5mZWF0dXJlLG89aS5pbmRleCxzPWkuc291cmNlTGF5ZXJJbmRleDtpZih0aGlzLmxheWVyc1swXS5fZmVhdHVyZUZpbHRlcihuZXcganIodGhpcy56b29tKSxhKSl7dmFyIHU9R24oYSk7dGhpcy5hZGRGZWF0dXJlKGEsdSxvKSxlLmZlYXR1cmVJbmRleC5pbnNlcnQoYSx1LG8scyx0aGlzLmluZGV4KTt9fX0sVGEucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3RoaXMuc3RhdGVEZXBlbmRlbnRMYXllcnMubGVuZ3RoJiZ0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy51cGRhdGVQYWludEFycmF5cyh0LGUsdGhpcy5zdGF0ZURlcGVuZGVudExheWVycyk7fSxUYS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5sYXlvdXRWZXJ0ZXhBcnJheS5sZW5ndGh9LFRhLnByb3RvdHlwZS51cGxvYWRQZW5kaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMudXBsb2FkZWR8fHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLm5lZWRzVXBsb2FkfSxUYS5wcm90b3R5cGUudXBsb2FkPWZ1bmN0aW9uKHQpe3RoaXMudXBsb2FkZWR8fCh0aGlzLmxheW91dFZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLmxheW91dFZlcnRleEFycmF5LElhKSx0aGlzLmluZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIodGhpcy5pbmRleEFycmF5KSksdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMudXBsb2FkKHQpLHRoaXMudXBsb2FkZWQ9ITA7fSxUYS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMubGF5b3V0VmVydGV4QnVmZmVyJiYodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuaW5kZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLmRlc3Ryb3koKSx0aGlzLnNlZ21lbnRzLmRlc3Ryb3koKSk7fSxUYS5wcm90b3R5cGUuYWRkRmVhdHVyZT1mdW5jdGlvbih0LGUscil7Zm9yKHZhciBuPTAsaT16YShlLDUwMCk7bjxpLmxlbmd0aDtuKz0xKXtmb3IodmFyIGE9aVtuXSxvPTAscz0wLHU9YTtzPHUubGVuZ3RoO3MrPTEpe28rPXVbc10ubGVuZ3RoO31mb3IodmFyIGw9dGhpcy5zZWdtZW50cy5wcmVwYXJlU2VnbWVudCg0LHRoaXMubGF5b3V0VmVydGV4QXJyYXksdGhpcy5pbmRleEFycmF5KSxwPTAsaD1hO3A8aC5sZW5ndGg7cCs9MSl7dmFyIGM9aFtwXTtpZigwIT09Yy5sZW5ndGgmJiFGYShjKSlmb3IodmFyIGY9MCx5PTA7eTxjLmxlbmd0aDt5Kyspe3ZhciBkPWNbeV07aWYoeT49MSl7dmFyIG09Y1t5LTFdO2lmKCFQYShkLG0pKXtsLnZlcnRleExlbmd0aCs0PkxuLk1BWF9WRVJURVhfQVJSQVlfTEVOR1RIJiYobD10aGlzLnNlZ21lbnRzLnByZXBhcmVTZWdtZW50KDQsdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx0aGlzLmluZGV4QXJyYXkpKTt2YXIgdj1kLnN1YihtKS5fcGVycCgpLl91bml0KCksZz1tLmRpc3QoZCk7ZitnPjMyNzY4JiYoZj0wKSxFYSh0aGlzLmxheW91dFZlcnRleEFycmF5LGQueCxkLnksdi54LHYueSwwLDAsZiksRWEodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSxkLngsZC55LHYueCx2LnksMCwxLGYpLGYrPWcsRWEodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSxtLngsbS55LHYueCx2LnksMCwwLGYpLEVhKHRoaXMubGF5b3V0VmVydGV4QXJyYXksbS54LG0ueSx2Lngsdi55LDAsMSxmKTt2YXIgeD1sLnZlcnRleExlbmd0aDt0aGlzLmluZGV4QXJyYXkuZW1wbGFjZUJhY2soeCx4KzEseCsyKSx0aGlzLmluZGV4QXJyYXkuZW1wbGFjZUJhY2soeCsxLHgrMix4KzMpLGwudmVydGV4TGVuZ3RoKz00LGwucHJpbWl0aXZlTGVuZ3RoKz0yO319fX1sLnZlcnRleExlbmd0aCtvPkxuLk1BWF9WRVJURVhfQVJSQVlfTEVOR1RIJiYobD10aGlzLnNlZ21lbnRzLnByZXBhcmVTZWdtZW50KG8sdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx0aGlzLmluZGV4QXJyYXkpKTtmb3IodmFyIGI9W10sdz1bXSxfPWwudmVydGV4TGVuZ3RoLEE9MCxrPWE7QTxrLmxlbmd0aDtBKz0xKXt2YXIgej1rW0FdO2lmKDAhPT16Lmxlbmd0aCl7eiE9PWFbMF0mJncucHVzaChiLmxlbmd0aC8yKTtmb3IodmFyIFM9MDtTPHoubGVuZ3RoO1MrKyl7dmFyIE09eltTXTtFYSh0aGlzLmxheW91dFZlcnRleEFycmF5LE0ueCxNLnksMCwwLDEsMSwwKSxiLnB1c2goTS54KSxiLnB1c2goTS55KTt9fX1mb3IodmFyIEI9SGkoYix3KSxWPTA7VjxCLmxlbmd0aDtWKz0zKXRoaXMuaW5kZXhBcnJheS5lbXBsYWNlQmFjayhfK0JbVl0sXytCW1YrMV0sXytCW1YrMl0pO2wucHJpbWl0aXZlTGVuZ3RoKz1CLmxlbmd0aC8zLGwudmVydGV4TGVuZ3RoKz1vO310aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5wb3B1bGF0ZVBhaW50QXJyYXlzKHRoaXMubGF5b3V0VmVydGV4QXJyYXkubGVuZ3RoLHQscik7fSxBcihcIkZpbGxFeHRydXNpb25CdWNrZXRcIixUYSx7b21pdDpbXCJsYXllcnNcIl19KTt2YXIgTGE9e3BhaW50Om5ldyBRcih7XCJmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5XCI6bmV3IEhyKHFbXCJwYWludF9maWxsLWV4dHJ1c2lvblwiXVtcImZpbGwtZXh0cnVzaW9uLW9wYWNpdHlcIl0pLFwiZmlsbC1leHRydXNpb24tY29sb3JcIjpuZXcgS3IocVtcInBhaW50X2ZpbGwtZXh0cnVzaW9uXCJdW1wiZmlsbC1leHRydXNpb24tY29sb3JcIl0pLFwiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlXCI6bmV3IEhyKHFbXCJwYWludF9maWxsLWV4dHJ1c2lvblwiXVtcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZVwiXSksXCJmaWxsLWV4dHJ1c2lvbi10cmFuc2xhdGUtYW5jaG9yXCI6bmV3IEhyKHFbXCJwYWludF9maWxsLWV4dHJ1c2lvblwiXVtcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZS1hbmNob3JcIl0pLFwiZmlsbC1leHRydXNpb24tcGF0dGVyblwiOm5ldyBZcihxW1wicGFpbnRfZmlsbC1leHRydXNpb25cIl1bXCJmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuXCJdKSxcImZpbGwtZXh0cnVzaW9uLWhlaWdodFwiOm5ldyBLcihxW1wicGFpbnRfZmlsbC1leHRydXNpb25cIl1bXCJmaWxsLWV4dHJ1c2lvbi1oZWlnaHRcIl0pLFwiZmlsbC1leHRydXNpb24tYmFzZVwiOm5ldyBLcihxW1wicGFpbnRfZmlsbC1leHRydXNpb25cIl1bXCJmaWxsLWV4dHJ1c2lvbi1iYXNlXCJdKX0pfSxPYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLGUsTGEpO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuY3JlYXRlQnVja2V0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgVGEodCl9LGUucHJvdG90eXBlLnF1ZXJ5UmFkaXVzPWZ1bmN0aW9uKCl7cmV0dXJuIHVpKHRoaXMucGFpbnQuZ2V0KFwiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlXCIpKX0sZS5wcm90b3R5cGUucXVlcnlJbnRlcnNlY3RzRmVhdHVyZT1mdW5jdGlvbih0LGUscixuLGksYSxvKXtyZXR1cm4gV24obGkodCx0aGlzLnBhaW50LmdldChcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZVwiKSx0aGlzLnBhaW50LmdldChcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZS1hbmNob3JcIiksYS5hbmdsZSxvKSxuKX0sZS5wcm90b3R5cGUuaGFzT2Zmc2NyZWVuUGFzcz1mdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5wYWludC5nZXQoXCJmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5XCIpJiZcIm5vbmVcIiE9PXRoaXMudmlzaWJpbGl0eX0sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKCl7dGhpcy52aWV3cG9ydEZyYW1lJiYodGhpcy52aWV3cG9ydEZyYW1lLmRlc3Ryb3koKSx0aGlzLnZpZXdwb3J0RnJhbWU9bnVsbCk7fSxlfSh0biksRGE9YW4oW3tuYW1lOlwiYV9wb3Nfbm9ybWFsXCIsY29tcG9uZW50czo0LHR5cGU6XCJJbnQxNlwifSx7bmFtZTpcImFfZGF0YVwiLGNvbXBvbmVudHM6NCx0eXBlOlwiVWludDhcIn1dLDQpLm1lbWJlcnMscWE9amE7ZnVuY3Rpb24gamEodCxlLHIsbixpKXt0aGlzLnByb3BlcnRpZXM9e30sdGhpcy5leHRlbnQ9cix0aGlzLnR5cGU9MCx0aGlzLl9wYmY9dCx0aGlzLl9nZW9tZXRyeT0tMSx0aGlzLl9rZXlzPW4sdGhpcy5fdmFsdWVzPWksdC5yZWFkRmllbGRzKFJhLHRoaXMsZSk7fWZ1bmN0aW9uIFJhKHQsZSxyKXsxPT10P2UuaWQ9ci5yZWFkVmFyaW50KCk6Mj09dD9mdW5jdGlvbih0LGUpe3ZhciByPXQucmVhZFZhcmludCgpK3QucG9zO2Zvcig7dC5wb3M8cjspe3ZhciBuPWUuX2tleXNbdC5yZWFkVmFyaW50KCldLGk9ZS5fdmFsdWVzW3QucmVhZFZhcmludCgpXTtlLnByb3BlcnRpZXNbbl09aTt9fShyLGUpOjM9PXQ/ZS50eXBlPXIucmVhZFZhcmludCgpOjQ9PXQmJihlLl9nZW9tZXRyeT1yLnBvcyk7fWZ1bmN0aW9uIFVhKHQpe2Zvcih2YXIgZSxyLG49MCxpPTAsYT10Lmxlbmd0aCxvPWEtMTtpPGE7bz1pKyspZT10W2ldLG4rPSgocj10W29dKS54LWUueCkqKGUueStyLnkpO3JldHVybiBufWphLnR5cGVzPVtcIlVua25vd25cIixcIlBvaW50XCIsXCJMaW5lU3RyaW5nXCIsXCJQb2x5Z29uXCJdLGphLnByb3RvdHlwZS5sb2FkR2VvbWV0cnk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9wYmY7dC5wb3M9dGhpcy5fZ2VvbWV0cnk7Zm9yKHZhciBlLHI9dC5yZWFkVmFyaW50KCkrdC5wb3Msbj0xLGk9MCxhPTAsbz0wLHM9W107dC5wb3M8cjspe2lmKGk8PTApe3ZhciB1PXQucmVhZFZhcmludCgpO249NyZ1LGk9dT4+Mzt9aWYoaS0tLDE9PT1ufHwyPT09bilhKz10LnJlYWRTVmFyaW50KCksbys9dC5yZWFkU1ZhcmludCgpLDE9PT1uJiYoZSYmcy5wdXNoKGUpLGU9W10pLGUucHVzaChuZXcgYyhhLG8pKTtlbHNle2lmKDchPT1uKXRocm93IG5ldyBFcnJvcihcInVua25vd24gY29tbWFuZCBcIituKTtlJiZlLnB1c2goZVswXS5jbG9uZSgpKTt9fXJldHVybiBlJiZzLnB1c2goZSksc30samEucHJvdG90eXBlLmJib3g9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9wYmY7dC5wb3M9dGhpcy5fZ2VvbWV0cnk7Zm9yKHZhciBlPXQucmVhZFZhcmludCgpK3QucG9zLHI9MSxuPTAsaT0wLGE9MCxvPTEvMCxzPS0xLzAsdT0xLzAsbD0tMS8wO3QucG9zPGU7KXtpZihuPD0wKXt2YXIgcD10LnJlYWRWYXJpbnQoKTtyPTcmcCxuPXA+PjM7fWlmKG4tLSwxPT09cnx8Mj09PXIpKGkrPXQucmVhZFNWYXJpbnQoKSk8byYmKG89aSksaT5zJiYocz1pKSwoYSs9dC5yZWFkU1ZhcmludCgpKTx1JiYodT1hKSxhPmwmJihsPWEpO2Vsc2UgaWYoNyE9PXIpdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biBjb21tYW5kIFwiK3IpfXJldHVybltvLHUscyxsXX0samEucHJvdG90eXBlLnRvR2VvSlNPTj1mdW5jdGlvbih0LGUscil7dmFyIG4saSxhPXRoaXMuZXh0ZW50Kk1hdGgucG93KDIsciksbz10aGlzLmV4dGVudCp0LHM9dGhpcy5leHRlbnQqZSx1PXRoaXMubG9hZEdlb21ldHJ5KCksbD1qYS50eXBlc1t0aGlzLnR5cGVdO2Z1bmN0aW9uIHAodCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspe3ZhciByPXRbZV0sbj0xODAtMzYwKihyLnkrcykvYTt0W2VdPVszNjAqKHIueCtvKS9hLTE4MCwzNjAvTWF0aC5QSSpNYXRoLmF0YW4oTWF0aC5leHAobipNYXRoLlBJLzE4MCkpLTkwXTt9fXN3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgMTp2YXIgaD1bXTtmb3Iobj0wO248dS5sZW5ndGg7bisrKWhbbl09dVtuXVswXTtwKHU9aCk7YnJlYWs7Y2FzZSAyOmZvcihuPTA7bjx1Lmxlbmd0aDtuKyspcCh1W25dKTticmVhaztjYXNlIDM6Zm9yKHU9ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGg7aWYoZTw9MSlyZXR1cm5bdF07Zm9yKHZhciByLG4saT1bXSxhPTA7YTxlO2ErKyl7dmFyIG89VWEodFthXSk7MCE9PW8mJih2b2lkIDA9PT1uJiYobj1vPDApLG49PT1vPDA/KHImJmkucHVzaChyKSxyPVt0W2FdXSk6ci5wdXNoKHRbYV0pKTt9ciYmaS5wdXNoKHIpO3JldHVybiBpfSh1KSxuPTA7bjx1Lmxlbmd0aDtuKyspZm9yKGk9MDtpPHVbbl0ubGVuZ3RoO2krKylwKHVbbl1baV0pO30xPT09dS5sZW5ndGg/dT11WzBdOmw9XCJNdWx0aVwiK2w7dmFyIGM9e3R5cGU6XCJGZWF0dXJlXCIsZ2VvbWV0cnk6e3R5cGU6bCxjb29yZGluYXRlczp1fSxwcm9wZXJ0aWVzOnRoaXMucHJvcGVydGllc307cmV0dXJuXCJpZFwiaW4gdGhpcyYmKGMuaWQ9dGhpcy5pZCksY307dmFyIE5hPVphO2Z1bmN0aW9uIFphKHQsZSl7dGhpcy52ZXJzaW9uPTEsdGhpcy5uYW1lPW51bGwsdGhpcy5leHRlbnQ9NDA5Nix0aGlzLmxlbmd0aD0wLHRoaXMuX3BiZj10LHRoaXMuX2tleXM9W10sdGhpcy5fdmFsdWVzPVtdLHRoaXMuX2ZlYXR1cmVzPVtdLHQucmVhZEZpZWxkcyhYYSx0aGlzLGUpLHRoaXMubGVuZ3RoPXRoaXMuX2ZlYXR1cmVzLmxlbmd0aDt9ZnVuY3Rpb24gWGEodCxlLHIpezE1PT09dD9lLnZlcnNpb249ci5yZWFkVmFyaW50KCk6MT09PXQ/ZS5uYW1lPXIucmVhZFN0cmluZygpOjU9PT10P2UuZXh0ZW50PXIucmVhZFZhcmludCgpOjI9PT10P2UuX2ZlYXR1cmVzLnB1c2goci5wb3MpOjM9PT10P2UuX2tleXMucHVzaChyLnJlYWRTdHJpbmcoKSk6ND09PXQmJmUuX3ZhbHVlcy5wdXNoKGZ1bmN0aW9uKHQpe3ZhciBlPW51bGwscj10LnJlYWRWYXJpbnQoKSt0LnBvcztmb3IoO3QucG9zPHI7KXt2YXIgbj10LnJlYWRWYXJpbnQoKT4+MztlPTE9PT1uP3QucmVhZFN0cmluZygpOjI9PT1uP3QucmVhZEZsb2F0KCk6Mz09PW4/dC5yZWFkRG91YmxlKCk6ND09PW4/dC5yZWFkVmFyaW50NjQoKTo1PT09bj90LnJlYWRWYXJpbnQoKTo2PT09bj90LnJlYWRTVmFyaW50KCk6Nz09PW4/dC5yZWFkQm9vbGVhbigpOm51bGw7fXJldHVybiBlfShyKSk7fWZ1bmN0aW9uICRhKHQsZSxyKXtpZigzPT09dCl7dmFyIG49bmV3IE5hKHIsci5yZWFkVmFyaW50KCkrci5wb3MpO24ubGVuZ3RoJiYoZVtuLm5hbWVdPW4pO319WmEucHJvdG90eXBlLmZlYXR1cmU9ZnVuY3Rpb24odCl7aWYodDwwfHx0Pj10aGlzLl9mZWF0dXJlcy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiZmVhdHVyZSBpbmRleCBvdXQgb2YgYm91bmRzXCIpO3RoaXMuX3BiZi5wb3M9dGhpcy5fZmVhdHVyZXNbdF07dmFyIGU9dGhpcy5fcGJmLnJlYWRWYXJpbnQoKSt0aGlzLl9wYmYucG9zO3JldHVybiBuZXcgcWEodGhpcy5fcGJmLGUsdGhpcy5leHRlbnQsdGhpcy5fa2V5cyx0aGlzLl92YWx1ZXMpfTt2YXIgSmE9e1ZlY3RvclRpbGU6ZnVuY3Rpb24odCxlKXt0aGlzLmxheWVycz10LnJlYWRGaWVsZHMoJGEse30sZSk7fSxWZWN0b3JUaWxlRmVhdHVyZTpxYSxWZWN0b3JUaWxlTGF5ZXI6TmF9LEdhPUphLlZlY3RvclRpbGVGZWF0dXJlLnR5cGVzLEhhPTYzLEthPU1hdGguY29zKE1hdGguUEkvMTgwKjM3LjUpLFlhPS41LFdhPU1hdGgucG93KDIsMTQpL1lhO2Z1bmN0aW9uIFFhKHQsZSxyLG4saSxhLG8pe3QuZW1wbGFjZUJhY2soZS54LGUueSxuPzE6MCxpPzE6LTEsTWF0aC5yb3VuZChIYSpyLngpKzEyOCxNYXRoLnJvdW5kKEhhKnIueSkrMTI4LDErKDA9PT1hPzA6YTwwPy0xOjEpfChvKllhJjYzKTw8MixvKllhPj42KTt9dmFyIHRvPWZ1bmN0aW9uKHQpe3RoaXMuem9vbT10Lnpvb20sdGhpcy5vdmVyc2NhbGluZz10Lm92ZXJzY2FsaW5nLHRoaXMubGF5ZXJzPXQubGF5ZXJzLHRoaXMubGF5ZXJJZHM9dGhpcy5sYXllcnMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlkfSksdGhpcy5pbmRleD10LmluZGV4LHRoaXMubGF5b3V0VmVydGV4QXJyYXk9bmV3IHBuLHRoaXMuaW5kZXhBcnJheT1uZXcgd24sdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnM9bmV3IE5uKERhLHQubGF5ZXJzLHQuem9vbSksdGhpcy5zZWdtZW50cz1uZXcgTG47fTtmdW5jdGlvbiBlbyh0LGUpe3JldHVybih0L2UudGlsZVRvdGFsKihlLmVuZC1lLnN0YXJ0KStlLnN0YXJ0KSooV2EtMSl9dG8ucHJvdG90eXBlLnBvcHVsYXRlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTAsbj10O3I8bi5sZW5ndGg7cis9MSl7dmFyIGk9bltyXSxhPWkuZmVhdHVyZSxvPWkuaW5kZXgscz1pLnNvdXJjZUxheWVySW5kZXg7aWYodGhpcy5sYXllcnNbMF0uX2ZlYXR1cmVGaWx0ZXIobmV3IGpyKHRoaXMuem9vbSksYSkpe3ZhciB1PUduKGEpO3RoaXMuYWRkRmVhdHVyZShhLHUsbyksZS5mZWF0dXJlSW5kZXguaW5zZXJ0KGEsdSxvLHMsdGhpcy5pbmRleCk7fX19LHRvLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXt0aGlzLnN0YXRlRGVwZW5kZW50TGF5ZXJzLmxlbmd0aCYmdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMudXBkYXRlUGFpbnRBcnJheXModCxlLHRoaXMuc3RhdGVEZXBlbmRlbnRMYXllcnMpO30sdG8ucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMubGF5b3V0VmVydGV4QXJyYXkubGVuZ3RofSx0by5wcm90b3R5cGUudXBsb2FkUGVuZGluZz1mdW5jdGlvbigpe3JldHVybiF0aGlzLnVwbG9hZGVkfHx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5uZWVkc1VwbG9hZH0sdG8ucHJvdG90eXBlLnVwbG9hZD1mdW5jdGlvbih0KXt0aGlzLnVwbG9hZGVkfHwodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSxEYSksdGhpcy5pbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKHRoaXMuaW5kZXhBcnJheSkpLHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnVwbG9hZCh0KSx0aGlzLnVwbG9hZGVkPSEwO30sdG8ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmxheW91dFZlcnRleEJ1ZmZlciYmKHRoaXMubGF5b3V0VmVydGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLmluZGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5kZXN0cm95KCksdGhpcy5zZWdtZW50cy5kZXN0cm95KCkpO30sdG8ucHJvdG90eXBlLmFkZEZlYXR1cmU9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbj10aGlzLmxheWVyc1swXS5sYXlvdXQsaT1uLmdldChcImxpbmUtam9pblwiKS5ldmFsdWF0ZSh0LHt9KSxhPW4uZ2V0KFwibGluZS1jYXBcIiksbz1uLmdldChcImxpbmUtbWl0ZXItbGltaXRcIikscz1uLmdldChcImxpbmUtcm91bmQtbGltaXRcIiksdT0wLGw9ZTt1PGwubGVuZ3RoO3UrPTEpe3ZhciBwPWxbdV07dGhpcy5hZGRMaW5lKHAsdCxpLGEsbyxzLHIpO319LHRvLnByb3RvdHlwZS5hZGRMaW5lPWZ1bmN0aW9uKHQsZSxyLG4saSxhLG8pe3ZhciBzPW51bGw7ZS5wcm9wZXJ0aWVzJiZlLnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoXCJtYXBib3hfY2xpcF9zdGFydFwiKSYmZS5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KFwibWFwYm94X2NsaXBfZW5kXCIpJiYocz17c3RhcnQ6ZS5wcm9wZXJ0aWVzLm1hcGJveF9jbGlwX3N0YXJ0LGVuZDplLnByb3BlcnRpZXMubWFwYm94X2NsaXBfZW5kLHRpbGVUb3RhbDp2b2lkIDB9KTtmb3IodmFyIHU9XCJQb2x5Z29uXCI9PT1HYVtlLnR5cGVdLGw9dC5sZW5ndGg7bD49MiYmdFtsLTFdLmVxdWFscyh0W2wtMl0pOylsLS07Zm9yKHZhciBwPTA7cDxsLTEmJnRbcF0uZXF1YWxzKHRbcCsxXSk7KXArKztpZighKGw8KHU/MzoyKSkpe3MmJihzLnRpbGVUb3RhbD1mdW5jdGlvbih0LGUscil7Zm9yKHZhciBuLGksYT0wLG89ZTtvPHItMTtvKyspbj10W29dLGk9dFtvKzFdLGErPW4uZGlzdChpKTtyZXR1cm4gYX0odCxwLGwpKSxcImJldmVsXCI9PT1yJiYoaT0xLjA1KTt2YXIgaD1Ybi8oNTEyKnRoaXMub3ZlcnNjYWxpbmcpKjE1LGM9dFtwXSxmPXRoaXMuc2VnbWVudHMucHJlcGFyZVNlZ21lbnQoMTAqbCx0aGlzLmxheW91dFZlcnRleEFycmF5LHRoaXMuaW5kZXhBcnJheSk7dGhpcy5kaXN0YW5jZT0wO3ZhciB5LGQsbSx2PW4sZz11P1wiYnV0dFwiOm4seD0hMCxiPXZvaWQgMCx3PXZvaWQgMCxfPXZvaWQgMCxBPXZvaWQgMDt0aGlzLmUxPXRoaXMuZTI9dGhpcy5lMz0tMSx1JiYoeT10W2wtMl0sQT1jLnN1Yih5KS5fdW5pdCgpLl9wZXJwKCkpO2Zvcih2YXIgaz1wO2s8bDtrKyspaWYoISh3PXUmJms9PT1sLTE/dFtwKzFdOnRbaysxXSl8fCF0W2tdLmVxdWFscyh3KSl7QSYmKF89QSkseSYmKGI9eSkseT10W2tdLEE9dz93LnN1Yih5KS5fdW5pdCgpLl9wZXJwKCk6Xzt2YXIgej0oXz1ffHxBKS5hZGQoQSk7MD09PXoueCYmMD09PXoueXx8ei5fdW5pdCgpO3ZhciBTPXoueCpBLngrei55KkEueSxNPTAhPT1TPzEvUzoxLzAsQj1TPEthJiZiJiZ3O2lmKEImJms+cCl7dmFyIFY9eS5kaXN0KGIpO2lmKFY+MipoKXt2YXIgST15LnN1Yih5LnN1YihiKS5fbXVsdChoL1YpLl9yb3VuZCgpKTt0aGlzLmRpc3RhbmNlKz1JLmRpc3QoYiksdGhpcy5hZGRDdXJyZW50VmVydGV4KEksdGhpcy5kaXN0YW5jZSxfLm11bHQoMSksMCwwLCExLGYscyksYj1JO319dmFyIEM9YiYmdyxFPUM/cjp3P3Y6ZztpZihDJiZcInJvdW5kXCI9PT1FJiYoTTxhP0U9XCJtaXRlclwiOk08PTImJihFPVwiZmFrZXJvdW5kXCIpKSxcIm1pdGVyXCI9PT1FJiZNPmkmJihFPVwiYmV2ZWxcIiksXCJiZXZlbFwiPT09RSYmKE0+MiYmKEU9XCJmbGlwYmV2ZWxcIiksTTxpJiYoRT1cIm1pdGVyXCIpKSxiJiYodGhpcy5kaXN0YW5jZSs9eS5kaXN0KGIpKSxcIm1pdGVyXCI9PT1FKXouX211bHQoTSksdGhpcy5hZGRDdXJyZW50VmVydGV4KHksdGhpcy5kaXN0YW5jZSx6LDAsMCwhMSxmLHMpO2Vsc2UgaWYoXCJmbGlwYmV2ZWxcIj09PUUpe2lmKE0+MTAwKXo9QS5jbG9uZSgpLm11bHQoLTEpO2Vsc2V7dmFyIFQ9Xy54KkEueS1fLnkqQS54PjA/LTE6MSxQPU0qXy5hZGQoQSkubWFnKCkvXy5zdWIoQSkubWFnKCk7ei5fcGVycCgpLl9tdWx0KFAqVCk7fXRoaXMuYWRkQ3VycmVudFZlcnRleCh5LHRoaXMuZGlzdGFuY2UseiwwLDAsITEsZixzKSx0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoeSx0aGlzLmRpc3RhbmNlLHoubXVsdCgtMSksMCwwLCExLGYscyk7fWVsc2UgaWYoXCJiZXZlbFwiPT09RXx8XCJmYWtlcm91bmRcIj09PUUpe3ZhciBGPV8ueCpBLnktXy55KkEueD4wLEw9LU1hdGguc3FydChNKk0tMSk7aWYoRj8obT0wLGQ9TCk6KGQ9MCxtPUwpLHh8fHRoaXMuYWRkQ3VycmVudFZlcnRleCh5LHRoaXMuZGlzdGFuY2UsXyxkLG0sITEsZixzKSxcImZha2Vyb3VuZFwiPT09RSl7Zm9yKHZhciBPPU1hdGguZmxvb3IoOCooLjUtKFMtLjUpKSksRD12b2lkIDAscT0wO3E8TztxKyspRD1BLm11bHQoKHErMSkvKE8rMSkpLl9hZGQoXykuX3VuaXQoKSx0aGlzLmFkZFBpZVNsaWNlVmVydGV4KHksdGhpcy5kaXN0YW5jZSxELEYsZixzKTt0aGlzLmFkZFBpZVNsaWNlVmVydGV4KHksdGhpcy5kaXN0YW5jZSx6LEYsZixzKTtmb3IodmFyIGo9Ty0xO2o+PTA7ai0tKUQ9Xy5tdWx0KChqKzEpLyhPKzEpKS5fYWRkKEEpLl91bml0KCksdGhpcy5hZGRQaWVTbGljZVZlcnRleCh5LHRoaXMuZGlzdGFuY2UsRCxGLGYscyk7fXcmJnRoaXMuYWRkQ3VycmVudFZlcnRleCh5LHRoaXMuZGlzdGFuY2UsQSwtZCwtbSwhMSxmLHMpO31lbHNlXCJidXR0XCI9PT1FPyh4fHx0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoeSx0aGlzLmRpc3RhbmNlLF8sMCwwLCExLGYscyksdyYmdGhpcy5hZGRDdXJyZW50VmVydGV4KHksdGhpcy5kaXN0YW5jZSxBLDAsMCwhMSxmLHMpKTpcInNxdWFyZVwiPT09RT8oeHx8KHRoaXMuYWRkQ3VycmVudFZlcnRleCh5LHRoaXMuZGlzdGFuY2UsXywxLDEsITEsZixzKSx0aGlzLmUxPXRoaXMuZTI9LTEpLHcmJnRoaXMuYWRkQ3VycmVudFZlcnRleCh5LHRoaXMuZGlzdGFuY2UsQSwtMSwtMSwhMSxmLHMpKTpcInJvdW5kXCI9PT1FJiYoeHx8KHRoaXMuYWRkQ3VycmVudFZlcnRleCh5LHRoaXMuZGlzdGFuY2UsXywwLDAsITEsZixzKSx0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoeSx0aGlzLmRpc3RhbmNlLF8sMSwxLCEwLGYscyksdGhpcy5lMT10aGlzLmUyPS0xKSx3JiYodGhpcy5hZGRDdXJyZW50VmVydGV4KHksdGhpcy5kaXN0YW5jZSxBLC0xLC0xLCEwLGYscyksdGhpcy5hZGRDdXJyZW50VmVydGV4KHksdGhpcy5kaXN0YW5jZSxBLDAsMCwhMSxmLHMpKSk7aWYoQiYmazxsLTEpe3ZhciBSPXkuZGlzdCh3KTtpZihSPjIqaCl7dmFyIFU9eS5hZGQody5zdWIoeSkuX211bHQoaC9SKS5fcm91bmQoKSk7dGhpcy5kaXN0YW5jZSs9VS5kaXN0KHkpLHRoaXMuYWRkQ3VycmVudFZlcnRleChVLHRoaXMuZGlzdGFuY2UsQS5tdWx0KDEpLDAsMCwhMSxmLHMpLHk9VTt9fXg9ITE7fXRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnBvcHVsYXRlUGFpbnRBcnJheXModGhpcy5sYXlvdXRWZXJ0ZXhBcnJheS5sZW5ndGgsZSxvKTt9fSx0by5wcm90b3R5cGUuYWRkQ3VycmVudFZlcnRleD1mdW5jdGlvbih0LGUscixuLGksYSxvLHMpe3ZhciB1LGw9dGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSxwPXRoaXMuaW5kZXhBcnJheTtzJiYoZT1lbyhlLHMpKSx1PXIuY2xvbmUoKSxuJiZ1Ll9zdWIoci5wZXJwKCkuX211bHQobikpLFFhKGwsdCx1LGEsITEsbixlKSx0aGlzLmUzPW8udmVydGV4TGVuZ3RoKyssdGhpcy5lMT49MCYmdGhpcy5lMj49MCYmKHAuZW1wbGFjZUJhY2sodGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMpLG8ucHJpbWl0aXZlTGVuZ3RoKyspLHRoaXMuZTE9dGhpcy5lMix0aGlzLmUyPXRoaXMuZTMsdT1yLm11bHQoLTEpLGkmJnUuX3N1YihyLnBlcnAoKS5fbXVsdChpKSksUWEobCx0LHUsYSwhMCwtaSxlKSx0aGlzLmUzPW8udmVydGV4TGVuZ3RoKyssdGhpcy5lMT49MCYmdGhpcy5lMj49MCYmKHAuZW1wbGFjZUJhY2sodGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMpLG8ucHJpbWl0aXZlTGVuZ3RoKyspLHRoaXMuZTE9dGhpcy5lMix0aGlzLmUyPXRoaXMuZTMsZT5XYS8yJiYhcyYmKHRoaXMuZGlzdGFuY2U9MCx0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgodCx0aGlzLmRpc3RhbmNlLHIsbixpLGEsbykpO30sdG8ucHJvdG90eXBlLmFkZFBpZVNsaWNlVmVydGV4PWZ1bmN0aW9uKHQsZSxyLG4saSxhKXtyPXIubXVsdChuPy0xOjEpO3ZhciBvPXRoaXMubGF5b3V0VmVydGV4QXJyYXkscz10aGlzLmluZGV4QXJyYXk7YSYmKGU9ZW8oZSxhKSksUWEobyx0LHIsITEsbiwwLGUpLHRoaXMuZTM9aS52ZXJ0ZXhMZW5ndGgrKyx0aGlzLmUxPj0wJiZ0aGlzLmUyPj0wJiYocy5lbXBsYWNlQmFjayh0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyksaS5wcmltaXRpdmVMZW5ndGgrKyksbj90aGlzLmUyPXRoaXMuZTM6dGhpcy5lMT10aGlzLmUzO30sQXIoXCJMaW5lQnVja2V0XCIsdG8se29taXQ6W1wibGF5ZXJzXCJdfSk7dmFyIHJvPW5ldyBRcih7XCJsaW5lLWNhcFwiOm5ldyBIcihxLmxheW91dF9saW5lW1wibGluZS1jYXBcIl0pLFwibGluZS1qb2luXCI6bmV3IEtyKHEubGF5b3V0X2xpbmVbXCJsaW5lLWpvaW5cIl0pLFwibGluZS1taXRlci1saW1pdFwiOm5ldyBIcihxLmxheW91dF9saW5lW1wibGluZS1taXRlci1saW1pdFwiXSksXCJsaW5lLXJvdW5kLWxpbWl0XCI6bmV3IEhyKHEubGF5b3V0X2xpbmVbXCJsaW5lLXJvdW5kLWxpbWl0XCJdKX0pLG5vPXtwYWludDpuZXcgUXIoe1wibGluZS1vcGFjaXR5XCI6bmV3IEtyKHEucGFpbnRfbGluZVtcImxpbmUtb3BhY2l0eVwiXSksXCJsaW5lLWNvbG9yXCI6bmV3IEtyKHEucGFpbnRfbGluZVtcImxpbmUtY29sb3JcIl0pLFwibGluZS10cmFuc2xhdGVcIjpuZXcgSHIocS5wYWludF9saW5lW1wibGluZS10cmFuc2xhdGVcIl0pLFwibGluZS10cmFuc2xhdGUtYW5jaG9yXCI6bmV3IEhyKHEucGFpbnRfbGluZVtcImxpbmUtdHJhbnNsYXRlLWFuY2hvclwiXSksXCJsaW5lLXdpZHRoXCI6bmV3IEtyKHEucGFpbnRfbGluZVtcImxpbmUtd2lkdGhcIl0pLFwibGluZS1nYXAtd2lkdGhcIjpuZXcgS3IocS5wYWludF9saW5lW1wibGluZS1nYXAtd2lkdGhcIl0pLFwibGluZS1vZmZzZXRcIjpuZXcgS3IocS5wYWludF9saW5lW1wibGluZS1vZmZzZXRcIl0pLFwibGluZS1ibHVyXCI6bmV3IEtyKHEucGFpbnRfbGluZVtcImxpbmUtYmx1clwiXSksXCJsaW5lLWRhc2hhcnJheVwiOm5ldyBZcihxLnBhaW50X2xpbmVbXCJsaW5lLWRhc2hhcnJheVwiXSksXCJsaW5lLXBhdHRlcm5cIjpuZXcgWXIocS5wYWludF9saW5lW1wibGluZS1wYXR0ZXJuXCJdKSxcImxpbmUtZ3JhZGllbnRcIjpuZXcgV3IocS5wYWludF9saW5lW1wibGluZS1ncmFkaWVudFwiXSl9KSxsYXlvdXQ6cm99LGlvPW5ldyhmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5wb3NzaWJseUV2YWx1YXRlPWZ1bmN0aW9uKGUscil7cmV0dXJuIHI9bmV3IGpyKE1hdGguZmxvb3Ioci56b29tKSx7bm93OnIubm93LGZhZGVEdXJhdGlvbjpyLmZhZGVEdXJhdGlvbix6b29tSGlzdG9yeTpyLnpvb21IaXN0b3J5LHRyYW5zaXRpb246ci50cmFuc2l0aW9ufSksdC5wcm90b3R5cGUucG9zc2libHlFdmFsdWF0ZS5jYWxsKHRoaXMsZSxyKX0sZS5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oZSxyLG4saSl7cmV0dXJuIHI9Zyh7fSxyLHt6b29tOk1hdGguZmxvb3Ioci56b29tKX0pLHQucHJvdG90eXBlLmV2YWx1YXRlLmNhbGwodGhpcyxlLHIsbixpKX0sZX0oS3IpKShuby5wYWludC5wcm9wZXJ0aWVzW1wibGluZS13aWR0aFwiXS5zcGVjaWZpY2F0aW9uKTtpby51c2VJbnRlZ2VyWm9vbT0hMDt2YXIgYW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLG5vKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLl9oYW5kbGVTcGVjaWFsUGFpbnRQcm9wZXJ0eVVwZGF0ZT1mdW5jdGlvbih0KXtcImxpbmUtZ3JhZGllbnRcIj09PXQmJnRoaXMuX3VwZGF0ZUdyYWRpZW50KCk7fSxlLnByb3RvdHlwZS5fdXBkYXRlR3JhZGllbnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50Ll92YWx1ZXNbXCJsaW5lLWdyYWRpZW50XCJdLnZhbHVlLmV4cHJlc3Npb247dGhpcy5ncmFkaWVudD1aaSh0LFwibGluZVByb2dyZXNzXCIpLHRoaXMuZ3JhZGllbnRUZXh0dXJlPW51bGw7fSxlLnByb3RvdHlwZS5yZWNhbGN1bGF0ZT1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5yZWNhbGN1bGF0ZS5jYWxsKHRoaXMsZSksdGhpcy5wYWludC5fdmFsdWVzW1wibGluZS1mbG9vcndpZHRoXCJdPWlvLnBvc3NpYmx5RXZhbHVhdGUodGhpcy5fdHJhbnNpdGlvbmluZ1BhaW50Ll92YWx1ZXNbXCJsaW5lLXdpZHRoXCJdLnZhbHVlLGUpO30sZS5wcm90b3R5cGUuY3JlYXRlQnVja2V0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdG8odCl9LGUucHJvdG90eXBlLnF1ZXJ5UmFkaXVzPWZ1bmN0aW9uKHQpe3ZhciBlPXQscj1vbyhzaShcImxpbmUtd2lkdGhcIix0aGlzLGUpLHNpKFwibGluZS1nYXAtd2lkdGhcIix0aGlzLGUpKSxuPXNpKFwibGluZS1vZmZzZXRcIix0aGlzLGUpO3JldHVybiByLzIrTWF0aC5hYnMobikrdWkodGhpcy5wYWludC5nZXQoXCJsaW5lLXRyYW5zbGF0ZVwiKSl9LGUucHJvdG90eXBlLnF1ZXJ5SW50ZXJzZWN0c0ZlYXR1cmU9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyl7dmFyIHM9bGkodCx0aGlzLnBhaW50LmdldChcImxpbmUtdHJhbnNsYXRlXCIpLHRoaXMucGFpbnQuZ2V0KFwibGluZS10cmFuc2xhdGUtYW5jaG9yXCIpLGEuYW5nbGUsbyksdT1vLzIqb28odGhpcy5wYWludC5nZXQoXCJsaW5lLXdpZHRoXCIpLmV2YWx1YXRlKGUsciksdGhpcy5wYWludC5nZXQoXCJsaW5lLWdhcC13aWR0aFwiKS5ldmFsdWF0ZShlLHIpKSxsPXRoaXMucGFpbnQuZ2V0KFwibGluZS1vZmZzZXRcIikuZXZhbHVhdGUoZSxyKTtyZXR1cm4gbCYmKG49ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9W10sbj1uZXcgYygwLDApLGk9MDtpPHQubGVuZ3RoO2krKyl7Zm9yKHZhciBhPXRbaV0sbz1bXSxzPTA7czxhLmxlbmd0aDtzKyspe3ZhciB1PWFbcy0xXSxsPWFbc10scD1hW3MrMV0saD0wPT09cz9uOmwuc3ViKHUpLl91bml0KCkuX3BlcnAoKSxmPXM9PT1hLmxlbmd0aC0xP246cC5zdWIobCkuX3VuaXQoKS5fcGVycCgpLHk9aC5fYWRkKGYpLl91bml0KCksZD15LngqZi54K3kueSpmLnk7eS5fbXVsdCgxL2QpLG8ucHVzaCh5Ll9tdWx0KGUpLl9hZGQobCkpO31yLnB1c2gobyk7fXJldHVybiByfShuLGwqbykpLFFuKHMsbix1KX0sZX0odG4pO2Z1bmN0aW9uIG9vKHQsZSl7cmV0dXJuIGU+MD9lKzIqdDp0fXZhciBzbz1hbihbe25hbWU6XCJhX3Bvc19vZmZzZXRcIixjb21wb25lbnRzOjQsdHlwZTpcIkludDE2XCJ9LHtuYW1lOlwiYV9kYXRhXCIsY29tcG9uZW50czo0LHR5cGU6XCJVaW50MTZcIn1dKSx1bz1hbihbe25hbWU6XCJhX3Byb2plY3RlZF9wb3NcIixjb21wb25lbnRzOjMsdHlwZTpcIkZsb2F0MzJcIn1dLDQpLGxvPShhbihbe25hbWU6XCJhX2ZhZGVfb3BhY2l0eVwiLGNvbXBvbmVudHM6MSx0eXBlOlwiVWludDMyXCJ9XSw0KSxhbihbe25hbWU6XCJhX3BsYWNlZFwiLGNvbXBvbmVudHM6Mix0eXBlOlwiVWludDhcIn1dLDQpKSxwbz0oYW4oW3t0eXBlOlwiSW50MTZcIixuYW1lOlwiYW5jaG9yUG9pbnRYXCJ9LHt0eXBlOlwiSW50MTZcIixuYW1lOlwiYW5jaG9yUG9pbnRZXCJ9LHt0eXBlOlwiSW50MTZcIixuYW1lOlwieDFcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJ5MVwifSx7dHlwZTpcIkludDE2XCIsbmFtZTpcIngyXCJ9LHt0eXBlOlwiSW50MTZcIixuYW1lOlwieTJcIn0se3R5cGU6XCJVaW50MzJcIixuYW1lOlwiZmVhdHVyZUluZGV4XCJ9LHt0eXBlOlwiVWludDE2XCIsbmFtZTpcInNvdXJjZUxheWVySW5kZXhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwiYnVja2V0SW5kZXhcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJyYWRpdXNcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJzaWduZWREaXN0YW5jZUZyb21BbmNob3JcIn1dKSxhbihbe25hbWU6XCJhX3Bvc1wiLGNvbXBvbmVudHM6Mix0eXBlOlwiSW50MTZcIn0se25hbWU6XCJhX2FuY2hvcl9wb3NcIixjb21wb25lbnRzOjIsdHlwZTpcIkludDE2XCJ9LHtuYW1lOlwiYV9leHRydWRlXCIsY29tcG9uZW50czoyLHR5cGU6XCJJbnQxNlwifV0sNCkpLGhvPWFuKFt7bmFtZTpcImFfcG9zXCIsY29tcG9uZW50czoyLHR5cGU6XCJJbnQxNlwifSx7bmFtZTpcImFfYW5jaG9yX3Bvc1wiLGNvbXBvbmVudHM6Mix0eXBlOlwiSW50MTZcIn0se25hbWU6XCJhX2V4dHJ1ZGVcIixjb21wb25lbnRzOjIsdHlwZTpcIkludDE2XCJ9XSw0KTthbihbe3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJhbmNob3JYXCJ9LHt0eXBlOlwiSW50MTZcIixuYW1lOlwiYW5jaG9yWVwifSx7dHlwZTpcIlVpbnQxNlwiLG5hbWU6XCJnbHlwaFN0YXJ0SW5kZXhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwibnVtR2x5cGhzXCJ9LHt0eXBlOlwiVWludDMyXCIsbmFtZTpcInZlcnRleFN0YXJ0SW5kZXhcIn0se3R5cGU6XCJVaW50MzJcIixuYW1lOlwibGluZVN0YXJ0SW5kZXhcIn0se3R5cGU6XCJVaW50MzJcIixuYW1lOlwibGluZUxlbmd0aFwifSx7dHlwZTpcIlVpbnQxNlwiLG5hbWU6XCJzZWdtZW50XCJ9LHt0eXBlOlwiVWludDE2XCIsbmFtZTpcImxvd2VyU2l6ZVwifSx7dHlwZTpcIlVpbnQxNlwiLG5hbWU6XCJ1cHBlclNpemVcIn0se3R5cGU6XCJGbG9hdDMyXCIsbmFtZTpcImxpbmVPZmZzZXRYXCJ9LHt0eXBlOlwiRmxvYXQzMlwiLG5hbWU6XCJsaW5lT2Zmc2V0WVwifSx7dHlwZTpcIlVpbnQ4XCIsbmFtZTpcIndyaXRpbmdNb2RlXCJ9LHt0eXBlOlwiVWludDhcIixuYW1lOlwiaGlkZGVuXCJ9XSksYW4oW3t0eXBlOlwiRmxvYXQzMlwiLG5hbWU6XCJvZmZzZXRYXCJ9XSksYW4oW3t0eXBlOlwiSW50MTZcIixuYW1lOlwieFwifSx7dHlwZTpcIkludDE2XCIsbmFtZTpcInlcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJ0aWxlVW5pdERpc3RhbmNlRnJvbUFuY2hvclwifV0pO2Z1bmN0aW9uIGNvKHQsZSxyKXt2YXIgbj1lLmxheW91dC5nZXQoXCJ0ZXh0LXRyYW5zZm9ybVwiKS5ldmFsdWF0ZShyLHt9KTtyZXR1cm5cInVwcGVyY2FzZVwiPT09bj90PXQudG9Mb2NhbGVVcHBlckNhc2UoKTpcImxvd2VyY2FzZVwiPT09biYmKHQ9dC50b0xvY2FsZUxvd2VyQ2FzZSgpKSxxci5hcHBseUFyYWJpY1NoYXBpbmcmJih0PXFyLmFwcGx5QXJhYmljU2hhcGluZyh0KSksdH12YXIgZm89e1wiIVwiOlwi77iVXCIsXCIjXCI6XCLvvINcIiwkOlwi77yEXCIsXCIlXCI6XCLvvIVcIixcIiZcIjpcIu+8hlwiLFwiKFwiOlwi77i1XCIsXCIpXCI6XCLvuLZcIixcIipcIjpcIu+8ilwiLFwiK1wiOlwi77yLXCIsXCIsXCI6XCLvuJBcIixcIi1cIjpcIu+4slwiLFwiLlwiOlwi44O7XCIsXCIvXCI6XCLvvI9cIixcIjpcIjpcIu+4k1wiLFwiO1wiOlwi77iUXCIsXCI8XCI6XCLvuL9cIixcIj1cIjpcIu+8nVwiLFwiPlwiOlwi77mAXCIsXCI/XCI6XCLvuJZcIixcIkBcIjpcIu+8oFwiLFwiW1wiOlwi77mHXCIsXCJcXFxcXCI6XCLvvLxcIixcIl1cIjpcIu+5iFwiLFwiXlwiOlwi77y+XCIsXzpcIu+4s1wiLFwiYFwiOlwi772AXCIsXCJ7XCI6XCLvuLdcIixcInxcIjpcIuKAlVwiLFwifVwiOlwi77i4XCIsXCJ+XCI6XCLvvZ5cIixcIsKiXCI6XCLvv6BcIixcIsKjXCI6XCLvv6FcIixcIsKlXCI6XCLvv6VcIixcIsKmXCI6XCLvv6RcIixcIsKsXCI6XCLvv6JcIixcIsKvXCI6XCLvv6NcIixcIuKAk1wiOlwi77iyXCIsXCLigJRcIjpcIu+4sVwiLFwi4oCYXCI6XCLvuYNcIixcIuKAmVwiOlwi77mEXCIsXCLigJxcIjpcIu+5gVwiLFwi4oCdXCI6XCLvuYJcIixcIuKAplwiOlwi77iZXCIsXCLigKdcIjpcIuODu1wiLFwi4oKpXCI6XCLvv6ZcIixcIuOAgVwiOlwi77iRXCIsXCLjgIJcIjpcIu+4klwiLFwi44CIXCI6XCLvuL9cIixcIuOAiVwiOlwi77mAXCIsXCLjgIpcIjpcIu+4vVwiLFwi44CLXCI6XCLvuL5cIixcIuOAjFwiOlwi77mBXCIsXCLjgI1cIjpcIu+5glwiLFwi44COXCI6XCLvuYNcIixcIuOAj1wiOlwi77mEXCIsXCLjgJBcIjpcIu+4u1wiLFwi44CRXCI6XCLvuLxcIixcIuOAlFwiOlwi77i5XCIsXCLjgJVcIjpcIu+4ulwiLFwi44CWXCI6XCLvuJdcIixcIuOAl1wiOlwi77iYXCIsXCLvvIFcIjpcIu+4lVwiLFwi77yIXCI6XCLvuLVcIixcIu+8iVwiOlwi77i2XCIsXCLvvIxcIjpcIu+4kFwiLFwi77yNXCI6XCLvuLJcIixcIu+8jlwiOlwi44O7XCIsXCLvvJpcIjpcIu+4k1wiLFwi77ybXCI6XCLvuJRcIixcIu+8nFwiOlwi77i/XCIsXCLvvJ5cIjpcIu+5gFwiLFwi77yfXCI6XCLvuJZcIixcIu+8u1wiOlwi77mHXCIsXCLvvL1cIjpcIu+5iFwiLFwi77y/XCI6XCLvuLNcIixcIu+9m1wiOlwi77i3XCIsXCLvvZxcIjpcIuKAlVwiLFwi772dXCI6XCLvuLhcIixcIu+9n1wiOlwi77i1XCIsXCLvvaBcIjpcIu+4tlwiLFwi772hXCI6XCLvuJJcIixcIu+9olwiOlwi77mBXCIsXCLvvaNcIjpcIu+5glwifTt2YXIgeW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsbixpKXt0LmNhbGwodGhpcyxlLHIpLHRoaXMuYW5nbGU9bix2b2lkIDAhPT1pJiYodGhpcy5zZWdtZW50PWkpO31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy54LHRoaXMueSx0aGlzLmFuZ2xlLHRoaXMuc2VnbWVudCl9LGV9KGMpO2Z1bmN0aW9uIG1vKHQsZSl7dmFyIHI9ZS5leHByZXNzaW9uO2lmKFwiY29uc3RhbnRcIj09PXIua2luZClyZXR1cm57ZnVuY3Rpb25UeXBlOlwiY29uc3RhbnRcIixsYXlvdXRTaXplOnIuZXZhbHVhdGUobmV3IGpyKHQrMSkpfTtpZihcInNvdXJjZVwiPT09ci5raW5kKXJldHVybntmdW5jdGlvblR5cGU6XCJzb3VyY2VcIn07Zm9yKHZhciBuPXIuem9vbVN0b3BzLGk9MDtpPG4ubGVuZ3RoJiZuW2ldPD10OylpKys7Zm9yKHZhciBhPWk9TWF0aC5tYXgoMCxpLTEpO2E8bi5sZW5ndGgmJm5bYV08dCsxOylhKys7YT1NYXRoLm1pbihuLmxlbmd0aC0xLGEpO3ZhciBvPXttaW46bltpXSxtYXg6blthXX07cmV0dXJuXCJjb21wb3NpdGVcIj09PXIua2luZD97ZnVuY3Rpb25UeXBlOlwiY29tcG9zaXRlXCIsem9vbVJhbmdlOm8scHJvcGVydHlWYWx1ZTplLnZhbHVlfTp7ZnVuY3Rpb25UeXBlOlwiY2FtZXJhXCIsbGF5b3V0U2l6ZTpyLmV2YWx1YXRlKG5ldyBqcih0KzEpKSx6b29tUmFuZ2U6byxzaXplUmFuZ2U6e21pbjpyLmV2YWx1YXRlKG5ldyBqcihvLm1pbikpLG1heDpyLmV2YWx1YXRlKG5ldyBqcihvLm1heCkpfSxwcm9wZXJ0eVZhbHVlOmUudmFsdWV9fUFyKFwiQW5jaG9yXCIseW8pO3ZhciB2bz1KYS5WZWN0b3JUaWxlRmVhdHVyZS50eXBlcyxnbz1be25hbWU6XCJhX2ZhZGVfb3BhY2l0eVwiLGNvbXBvbmVudHM6MSx0eXBlOlwiVWludDhcIixvZmZzZXQ6MH1dO2Z1bmN0aW9uIHhvKHQsZSxyLG4saSxhLG8scyl7dC5lbXBsYWNlQmFjayhlLHIsTWF0aC5yb3VuZCgzMipuKSxNYXRoLnJvdW5kKDMyKmkpLGEsbyxzP3NbMF06MCxzP3NbMV06MCk7fWZ1bmN0aW9uIGJvKHQsZSxyKXt0LmVtcGxhY2VCYWNrKGUueCxlLnksciksdC5lbXBsYWNlQmFjayhlLngsZS55LHIpLHQuZW1wbGFjZUJhY2soZS54LGUueSxyKSx0LmVtcGxhY2VCYWNrKGUueCxlLnkscik7fXZhciB3bz1mdW5jdGlvbih0KXt0aGlzLmxheW91dFZlcnRleEFycmF5PW5ldyBobix0aGlzLmluZGV4QXJyYXk9bmV3IHduLHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zPXQsdGhpcy5zZWdtZW50cz1uZXcgTG4sdGhpcy5keW5hbWljTGF5b3V0VmVydGV4QXJyYXk9bmV3IGNuLHRoaXMub3BhY2l0eVZlcnRleEFycmF5PW5ldyBmbix0aGlzLnBsYWNlZFN5bWJvbEFycmF5PW5ldyBCbjt9O3dvLnByb3RvdHlwZS51cGxvYWQ9ZnVuY3Rpb24odCxlLHIsbil7ciYmKHRoaXMubGF5b3V0VmVydGV4QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKHRoaXMubGF5b3V0VmVydGV4QXJyYXksc28ubWVtYmVycyksdGhpcy5pbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKHRoaXMuaW5kZXhBcnJheSxlKSx0aGlzLmR5bmFtaWNMYXlvdXRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5keW5hbWljTGF5b3V0VmVydGV4QXJyYXksdW8ubWVtYmVycywhMCksdGhpcy5vcGFjaXR5VmVydGV4QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKHRoaXMub3BhY2l0eVZlcnRleEFycmF5LGdvLCEwKSx0aGlzLm9wYWNpdHlWZXJ0ZXhCdWZmZXIuaXRlbVNpemU9MSksKHJ8fG4pJiZ0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy51cGxvYWQodCk7fSx3by5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMubGF5b3V0VmVydGV4QnVmZmVyJiYodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuaW5kZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLmRlc3Ryb3koKSx0aGlzLnNlZ21lbnRzLmRlc3Ryb3koKSx0aGlzLmR5bmFtaWNMYXlvdXRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMub3BhY2l0eVZlcnRleEJ1ZmZlci5kZXN0cm95KCkpO30sQXIoXCJTeW1ib2xCdWZmZXJzXCIsd28pO3ZhciBfbz1mdW5jdGlvbih0LGUscil7dGhpcy5sYXlvdXRWZXJ0ZXhBcnJheT1uZXcgdCx0aGlzLmxheW91dEF0dHJpYnV0ZXM9ZSx0aGlzLmluZGV4QXJyYXk9bmV3IHIsdGhpcy5zZWdtZW50cz1uZXcgTG4sdGhpcy5jb2xsaXNpb25WZXJ0ZXhBcnJheT1uZXcgbW47fTtfby5wcm90b3R5cGUudXBsb2FkPWZ1bmN0aW9uKHQpe3RoaXMubGF5b3V0VmVydGV4QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKHRoaXMubGF5b3V0VmVydGV4QXJyYXksdGhpcy5sYXlvdXRBdHRyaWJ1dGVzKSx0aGlzLmluZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIodGhpcy5pbmRleEFycmF5KSx0aGlzLmNvbGxpc2lvblZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLmNvbGxpc2lvblZlcnRleEFycmF5LGxvLm1lbWJlcnMsITApO30sX28ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmxheW91dFZlcnRleEJ1ZmZlciYmKHRoaXMubGF5b3V0VmVydGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLmluZGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLnNlZ21lbnRzLmRlc3Ryb3koKSx0aGlzLmNvbGxpc2lvblZlcnRleEJ1ZmZlci5kZXN0cm95KCkpO30sQXIoXCJDb2xsaXNpb25CdWZmZXJzXCIsX28pO3ZhciBBbz1mdW5jdGlvbih0KXt0aGlzLmNvbGxpc2lvbkJveEFycmF5PXQuY29sbGlzaW9uQm94QXJyYXksdGhpcy56b29tPXQuem9vbSx0aGlzLm92ZXJzY2FsaW5nPXQub3ZlcnNjYWxpbmcsdGhpcy5sYXllcnM9dC5sYXllcnMsdGhpcy5sYXllcklkcz10aGlzLmxheWVycy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuaWR9KSx0aGlzLmluZGV4PXQuaW5kZXgsdGhpcy5waXhlbFJhdGlvPXQucGl4ZWxSYXRpbyx0aGlzLnNvdXJjZUxheWVySW5kZXg9dC5zb3VyY2VMYXllckluZGV4O3ZhciBlPXRoaXMubGF5ZXJzWzBdLl91bmV2YWx1YXRlZExheW91dC5fdmFsdWVzO3RoaXMudGV4dFNpemVEYXRhPW1vKHRoaXMuem9vbSxlW1widGV4dC1zaXplXCJdKSx0aGlzLmljb25TaXplRGF0YT1tbyh0aGlzLnpvb20sZVtcImljb24tc2l6ZVwiXSk7dmFyIHI9dGhpcy5sYXllcnNbMF0ubGF5b3V0O3RoaXMuc29ydEZlYXR1cmVzQnlZPXIuZ2V0KFwidGV4dC1hbGxvdy1vdmVybGFwXCIpfHxyLmdldChcImljb24tYWxsb3ctb3ZlcmxhcFwiKXx8ci5nZXQoXCJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnRcIil8fHIuZ2V0KFwiaWNvbi1pZ25vcmUtcGxhY2VtZW50XCIpLHRoaXMuc291cmNlSUQ9dC5zb3VyY2VJRDt9O0FvLnByb3RvdHlwZS5jcmVhdGVBcnJheXM9ZnVuY3Rpb24oKXt0aGlzLnRleHQ9bmV3IHdvKG5ldyBObihzby5tZW1iZXJzLHRoaXMubGF5ZXJzLHRoaXMuem9vbSxmdW5jdGlvbih0KXtyZXR1cm4vXnRleHQvLnRlc3QodCl9KSksdGhpcy5pY29uPW5ldyB3byhuZXcgTm4oc28ubWVtYmVycyx0aGlzLmxheWVycyx0aGlzLnpvb20sZnVuY3Rpb24odCl7cmV0dXJuL15pY29uLy50ZXN0KHQpfSkpLHRoaXMuY29sbGlzaW9uQm94PW5ldyBfbyhkbixwby5tZW1iZXJzLF9uKSx0aGlzLmNvbGxpc2lvbkNpcmNsZT1uZXcgX28oZG4saG8ubWVtYmVycyx3biksdGhpcy5nbHlwaE9mZnNldEFycmF5PW5ldyBJbix0aGlzLmxpbmVWZXJ0ZXhBcnJheT1uZXcgRW47fSxBby5wcm90b3R5cGUucG9wdWxhdGU9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmxheWVyc1swXSxuPXIubGF5b3V0LGk9bi5nZXQoXCJ0ZXh0LWZvbnRcIiksYT1uLmdldChcInRleHQtZmllbGRcIiksbz1uLmdldChcImljb24taW1hZ2VcIikscz0oXCJjb25zdGFudFwiIT09YS52YWx1ZS5raW5kfHxhLnZhbHVlLnZhbHVlLmxlbmd0aD4wKSYmKFwiY29uc3RhbnRcIiE9PWkudmFsdWUua2luZHx8aS52YWx1ZS52YWx1ZS5sZW5ndGg+MCksdT1cImNvbnN0YW50XCIhPT1vLnZhbHVlLmtpbmR8fG8udmFsdWUudmFsdWUmJm8udmFsdWUudmFsdWUubGVuZ3RoPjA7aWYodGhpcy5mZWF0dXJlcz1bXSxzfHx1KXtmb3IodmFyIGw9ZS5pY29uRGVwZW5kZW5jaWVzLHA9ZS5nbHlwaERlcGVuZGVuY2llcyxoPW5ldyBqcih0aGlzLnpvb20pLGM9MCxmPXQ7YzxmLmxlbmd0aDtjKz0xKXt2YXIgeT1mW2NdLGQ9eS5mZWF0dXJlLG09eS5pbmRleCx2PXkuc291cmNlTGF5ZXJJbmRleDtpZihyLl9mZWF0dXJlRmlsdGVyKGgsZCkpe3ZhciBnPXZvaWQgMDtzJiYoZz1jbyhnPXIuZ2V0VmFsdWVBbmRSZXNvbHZlVG9rZW5zKFwidGV4dC1maWVsZFwiLGQpLHIsZCkpO3ZhciB4PXZvaWQgMDtpZih1JiYoeD1yLmdldFZhbHVlQW5kUmVzb2x2ZVRva2VucyhcImljb24taW1hZ2VcIixkKSksZ3x8eCl7dmFyIGI9e3RleHQ6ZyxpY29uOngsaW5kZXg6bSxzb3VyY2VMYXllckluZGV4OnYsZ2VvbWV0cnk6R24oZCkscHJvcGVydGllczpkLnByb3BlcnRpZXMsdHlwZTp2b1tkLnR5cGVdfTtpZih2b2lkIDAhPT1kLmlkJiYoYi5pZD1kLmlkKSx0aGlzLmZlYXR1cmVzLnB1c2goYikseCYmKGxbeF09ITApLGcpZm9yKHZhciB3PWkuZXZhbHVhdGUoZCx7fSkuam9pbihcIixcIiksXz1wW3ddPXBbd118fHt9LEE9XCJtYXBcIj09PW4uZ2V0KFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIikmJlwibGluZVwiPT09bi5nZXQoXCJzeW1ib2wtcGxhY2VtZW50XCIpLGs9VnIoZyksej0wO3o8Zy5sZW5ndGg7eisrKWlmKF9bZy5jaGFyQ29kZUF0KHopXT0hMCxBJiZrKXt2YXIgUz1mb1tnLmNoYXJBdCh6KV07UyYmKF9bUy5jaGFyQ29kZUF0KDApXT0hMCk7fX19fVwibGluZVwiPT09bi5nZXQoXCJzeW1ib2wtcGxhY2VtZW50XCIpJiYodGhpcy5mZWF0dXJlcz1mdW5jdGlvbih0KXt2YXIgZT17fSxyPXt9LG49W10saT0wO2Z1bmN0aW9uIGEoZSl7bi5wdXNoKHRbZV0pLGkrKzt9ZnVuY3Rpb24gbyh0LGUsaSl7dmFyIGE9clt0XTtyZXR1cm4gZGVsZXRlIHJbdF0scltlXT1hLG5bYV0uZ2VvbWV0cnlbMF0ucG9wKCksblthXS5nZW9tZXRyeVswXT1uW2FdLmdlb21ldHJ5WzBdLmNvbmNhdChpWzBdKSxhfWZ1bmN0aW9uIHModCxyLGkpe3ZhciBhPWVbcl07cmV0dXJuIGRlbGV0ZSBlW3JdLGVbdF09YSxuW2FdLmdlb21ldHJ5WzBdLnNoaWZ0KCksblthXS5nZW9tZXRyeVswXT1pWzBdLmNvbmNhdChuW2FdLmdlb21ldHJ5WzBdKSxhfWZ1bmN0aW9uIHUodCxlLHIpe3ZhciBuPXI/ZVswXVtlWzBdLmxlbmd0aC0xXTplWzBdWzBdO3JldHVybiB0K1wiOlwiK24ueCtcIjpcIituLnl9Zm9yKHZhciBsPTA7bDx0Lmxlbmd0aDtsKyspe3ZhciBwPXRbbF0saD1wLmdlb21ldHJ5LGM9cC50ZXh0O2lmKGMpe3ZhciBmPXUoYyxoKSx5PXUoYyxoLCEwKTtpZihmIGluIHImJnkgaW4gZSYmcltmXSE9PWVbeV0pe3ZhciBkPXMoZix5LGgpLG09byhmLHksbltkXS5nZW9tZXRyeSk7ZGVsZXRlIGVbZl0sZGVsZXRlIHJbeV0sclt1KGMsblttXS5nZW9tZXRyeSwhMCldPW0sbltkXS5nZW9tZXRyeT1udWxsO31lbHNlIGYgaW4gcj9vKGYseSxoKTp5IGluIGU/cyhmLHksaCk6KGEobCksZVtmXT1pLTEsclt5XT1pLTEpO31lbHNlIGEobCk7fXJldHVybiBuLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5nZW9tZXRyeX0pfSh0aGlzLmZlYXR1cmVzKSk7fX0sQW8ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3RoaXMuc3RhdGVEZXBlbmRlbnRMYXllcnMubGVuZ3RoJiYodGhpcy50ZXh0LnByb2dyYW1Db25maWd1cmF0aW9ucy51cGRhdGVQYWludEFycmF5cyh0LGUsdGhpcy5sYXllcnMpLHRoaXMuaWNvbi5wcm9ncmFtQ29uZmlndXJhdGlvbnMudXBkYXRlUGFpbnRBcnJheXModCxlLHRoaXMubGF5ZXJzKSk7fSxBby5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5zeW1ib2xJbnN0YW5jZXMubGVuZ3RofSxBby5wcm90b3R5cGUudXBsb2FkUGVuZGluZz1mdW5jdGlvbigpe3JldHVybiF0aGlzLnVwbG9hZGVkfHx0aGlzLnRleHQucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLm5lZWRzVXBsb2FkfHx0aGlzLmljb24ucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLm5lZWRzVXBsb2FkfSxBby5wcm90b3R5cGUudXBsb2FkPWZ1bmN0aW9uKHQpe3RoaXMudXBsb2FkZWR8fCh0aGlzLmNvbGxpc2lvbkJveC51cGxvYWQodCksdGhpcy5jb2xsaXNpb25DaXJjbGUudXBsb2FkKHQpKSx0aGlzLnRleHQudXBsb2FkKHQsdGhpcy5zb3J0RmVhdHVyZXNCeVksIXRoaXMudXBsb2FkZWQsdGhpcy50ZXh0LnByb2dyYW1Db25maWd1cmF0aW9ucy5uZWVkc1VwbG9hZCksdGhpcy5pY29uLnVwbG9hZCh0LHRoaXMuc29ydEZlYXR1cmVzQnlZLCF0aGlzLnVwbG9hZGVkLHRoaXMuaWNvbi5wcm9ncmFtQ29uZmlndXJhdGlvbnMubmVlZHNVcGxvYWQpLHRoaXMudXBsb2FkZWQ9ITA7fSxBby5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMudGV4dC5kZXN0cm95KCksdGhpcy5pY29uLmRlc3Ryb3koKSx0aGlzLmNvbGxpc2lvbkJveC5kZXN0cm95KCksdGhpcy5jb2xsaXNpb25DaXJjbGUuZGVzdHJveSgpO30sQW8ucHJvdG90eXBlLmFkZFRvTGluZVZlcnRleEFycmF5PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5saW5lVmVydGV4QXJyYXkubGVuZ3RoO2lmKHZvaWQgMCE9PXQuc2VnbWVudCl7Zm9yKHZhciBuPXQuZGlzdChlW3Quc2VnbWVudCsxXSksaT10LmRpc3QoZVt0LnNlZ21lbnRdKSxhPXt9LG89dC5zZWdtZW50KzE7bzxlLmxlbmd0aDtvKyspYVtvXT17eDplW29dLngseTplW29dLnksdGlsZVVuaXREaXN0YW5jZUZyb21BbmNob3I6bn0sbzxlLmxlbmd0aC0xJiYobis9ZVtvKzFdLmRpc3QoZVtvXSkpO2Zvcih2YXIgcz10LnNlZ21lbnR8fDA7cz49MDtzLS0pYVtzXT17eDplW3NdLngseTplW3NdLnksdGlsZVVuaXREaXN0YW5jZUZyb21BbmNob3I6aX0scz4wJiYoaSs9ZVtzLTFdLmRpc3QoZVtzXSkpO2Zvcih2YXIgdT0wO3U8ZS5sZW5ndGg7dSsrKXt2YXIgbD1hW3VdO3RoaXMubGluZVZlcnRleEFycmF5LmVtcGxhY2VCYWNrKGwueCxsLnksbC50aWxlVW5pdERpc3RhbmNlRnJvbUFuY2hvcik7fX1yZXR1cm57bGluZVN0YXJ0SW5kZXg6cixsaW5lTGVuZ3RoOnRoaXMubGluZVZlcnRleEFycmF5Lmxlbmd0aC1yfX0sQW8ucHJvdG90eXBlLmFkZFN5bWJvbHM9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyxzLHUsbCl7Zm9yKHZhciBwPXQuaW5kZXhBcnJheSxoPXQubGF5b3V0VmVydGV4QXJyYXksYz10LmR5bmFtaWNMYXlvdXRWZXJ0ZXhBcnJheSxmPXQuc2VnbWVudHMucHJlcGFyZVNlZ21lbnQoNCplLmxlbmd0aCx0LmxheW91dFZlcnRleEFycmF5LHQuaW5kZXhBcnJheSkseT10aGlzLmdseXBoT2Zmc2V0QXJyYXkubGVuZ3RoLGQ9Zi52ZXJ0ZXhMZW5ndGgsbT0wLHY9ZTttPHYubGVuZ3RoO20rPTEpe3ZhciBnPXZbbV0seD1nLnRsLGI9Zy50cix3PWcuYmwsXz1nLmJyLEE9Zy50ZXgsaz1mLnZlcnRleExlbmd0aCx6PWcuZ2x5cGhPZmZzZXRbMV07eG8oaCxzLngscy55LHgueCx6K3gueSxBLngsQS55LHIpLHhvKGgscy54LHMueSxiLngseitiLnksQS54K0EudyxBLnkscikseG8oaCxzLngscy55LHcueCx6K3cueSxBLngsQS55K0EuaCxyKSx4byhoLHMueCxzLnksXy54LHorXy55LEEueCtBLncsQS55K0EuaCxyKSxibyhjLHMsMCkscC5lbXBsYWNlQmFjayhrLGsrMSxrKzIpLHAuZW1wbGFjZUJhY2soaysxLGsrMixrKzMpLGYudmVydGV4TGVuZ3RoKz00LGYucHJpbWl0aXZlTGVuZ3RoKz0yLHRoaXMuZ2x5cGhPZmZzZXRBcnJheS5lbXBsYWNlQmFjayhnLmdseXBoT2Zmc2V0WzBdKTt9dC5wbGFjZWRTeW1ib2xBcnJheS5lbXBsYWNlQmFjayhzLngscy55LHksdGhpcy5nbHlwaE9mZnNldEFycmF5Lmxlbmd0aC15LGQsdSxsLHMuc2VnbWVudCxyP3JbMF06MCxyP3JbMV06MCxuWzBdLG5bMV0sbywhMSksdC5wcm9ncmFtQ29uZmlndXJhdGlvbnMucG9wdWxhdGVQYWludEFycmF5cyh0LmxheW91dFZlcnRleEFycmF5Lmxlbmd0aCxhLGEuaW5kZXgpO30sQW8ucHJvdG90eXBlLl9hZGRDb2xsaXNpb25EZWJ1Z1ZlcnRleD1mdW5jdGlvbih0LGUscixuLGkpe3JldHVybiBlLmVtcGxhY2VCYWNrKDAsMCksdC5lbXBsYWNlQmFjayhyLngsci55LG4ueCxuLnksTWF0aC5yb3VuZChpLngpLE1hdGgucm91bmQoaS55KSl9LEFvLnByb3RvdHlwZS5hZGRDb2xsaXNpb25EZWJ1Z1ZlcnRpY2VzPWZ1bmN0aW9uKHQsZSxyLG4saSxhLG8scyl7dmFyIHU9aS5zZWdtZW50cy5wcmVwYXJlU2VnbWVudCg0LGkubGF5b3V0VmVydGV4QXJyYXksaS5pbmRleEFycmF5KSxsPXUudmVydGV4TGVuZ3RoLHA9aS5sYXlvdXRWZXJ0ZXhBcnJheSxoPWkuY29sbGlzaW9uVmVydGV4QXJyYXk7aWYodGhpcy5fYWRkQ29sbGlzaW9uRGVidWdWZXJ0ZXgocCxoLGEsby5hbmNob3IsbmV3IGModCxlKSksdGhpcy5fYWRkQ29sbGlzaW9uRGVidWdWZXJ0ZXgocCxoLGEsby5hbmNob3IsbmV3IGMocixlKSksdGhpcy5fYWRkQ29sbGlzaW9uRGVidWdWZXJ0ZXgocCxoLGEsby5hbmNob3IsbmV3IGMocixuKSksdGhpcy5fYWRkQ29sbGlzaW9uRGVidWdWZXJ0ZXgocCxoLGEsby5hbmNob3IsbmV3IGModCxuKSksdS52ZXJ0ZXhMZW5ndGgrPTQscyl7dmFyIGY9aS5pbmRleEFycmF5O2YuZW1wbGFjZUJhY2sobCxsKzEsbCsyKSxmLmVtcGxhY2VCYWNrKGwsbCsyLGwrMyksdS5wcmltaXRpdmVMZW5ndGgrPTI7fWVsc2V7dmFyIHk9aS5pbmRleEFycmF5O3kuZW1wbGFjZUJhY2sobCxsKzEpLHkuZW1wbGFjZUJhY2sobCsxLGwrMikseS5lbXBsYWNlQmFjayhsKzIsbCszKSx5LmVtcGxhY2VCYWNrKGwrMyxsKSx1LnByaW1pdGl2ZUxlbmd0aCs9NDt9fSxBby5wcm90b3R5cGUuZ2VuZXJhdGVDb2xsaXNpb25EZWJ1Z0J1ZmZlcnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMuc3ltYm9sSW5zdGFuY2VzO3Q8ZS5sZW5ndGg7dCs9MSl7dmFyIHI9ZVt0XTtyLnRleHRDb2xsaXNpb25GZWF0dXJlPXtib3hTdGFydEluZGV4OnIudGV4dEJveFN0YXJ0SW5kZXgsYm94RW5kSW5kZXg6ci50ZXh0Qm94RW5kSW5kZXh9LHIuaWNvbkNvbGxpc2lvbkZlYXR1cmU9e2JveFN0YXJ0SW5kZXg6ci5pY29uQm94U3RhcnRJbmRleCxib3hFbmRJbmRleDpyLmljb25Cb3hFbmRJbmRleH07Zm9yKHZhciBuPTA7bjwyO24rKyl7dmFyIGk9clswPT09bj9cInRleHRDb2xsaXNpb25GZWF0dXJlXCI6XCJpY29uQ29sbGlzaW9uRmVhdHVyZVwiXTtpZihpKWZvcih2YXIgYT1pLmJveFN0YXJ0SW5kZXg7YTxpLmJveEVuZEluZGV4O2ErKyl7dmFyIG89dGhpcy5jb2xsaXNpb25Cb3hBcnJheS5nZXQoYSkscz1vLngxLHU9by55MSxsPW8ueDIscD1vLnkyLGg9by5yYWRpdXM+MDt0aGlzLmFkZENvbGxpc2lvbkRlYnVnVmVydGljZXMocyx1LGwscCxoP3RoaXMuY29sbGlzaW9uQ2lyY2xlOnRoaXMuY29sbGlzaW9uQm94LG8uYW5jaG9yUG9pbnQscixoKTt9fX19LEFvLnByb3RvdHlwZS5kZXNlcmlhbGl6ZUNvbGxpc2lvbkJveGVzPWZ1bmN0aW9uKHQsZSxyLG4saSl7Zm9yKHZhciBhPXt9LG89ZTtvPHI7bysrKXt2YXIgcz10LmdldChvKTtpZigwPT09cy5yYWRpdXMpe2EudGV4dEJveD17eDE6cy54MSx5MTpzLnkxLHgyOnMueDIseTI6cy55MixhbmNob3JQb2ludFg6cy5hbmNob3JQb2ludFgsYW5jaG9yUG9pbnRZOnMuYW5jaG9yUG9pbnRZfSxhLnRleHRGZWF0dXJlSW5kZXg9cy5mZWF0dXJlSW5kZXg7YnJlYWt9YS50ZXh0Q2lyY2xlc3x8KGEudGV4dENpcmNsZXM9W10sYS50ZXh0RmVhdHVyZUluZGV4PXMuZmVhdHVyZUluZGV4KTthLnRleHRDaXJjbGVzLnB1c2gocy5hbmNob3JQb2ludFgscy5hbmNob3JQb2ludFkscy5yYWRpdXMscy5zaWduZWREaXN0YW5jZUZyb21BbmNob3IsMSk7fWZvcih2YXIgdT1uO3U8aTt1Kyspe3ZhciBsPXQuZ2V0KHUpO2lmKDA9PT1sLnJhZGl1cyl7YS5pY29uQm94PXt4MTpsLngxLHkxOmwueTEseDI6bC54Mix5MjpsLnkyLGFuY2hvclBvaW50WDpsLmFuY2hvclBvaW50WCxhbmNob3JQb2ludFk6bC5hbmNob3JQb2ludFl9LGEuaWNvbkZlYXR1cmVJbmRleD1sLmZlYXR1cmVJbmRleDticmVha319cmV0dXJuIGF9LEFvLnByb3RvdHlwZS5oYXNUZXh0RGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQuc2VnbWVudHMuZ2V0KCkubGVuZ3RoPjB9LEFvLnByb3RvdHlwZS5oYXNJY29uRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmljb24uc2VnbWVudHMuZ2V0KCkubGVuZ3RoPjB9LEFvLnByb3RvdHlwZS5oYXNDb2xsaXNpb25Cb3hEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29sbGlzaW9uQm94LnNlZ21lbnRzLmdldCgpLmxlbmd0aD4wfSxBby5wcm90b3R5cGUuaGFzQ29sbGlzaW9uQ2lyY2xlRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbGxpc2lvbkNpcmNsZS5zZWdtZW50cy5nZXQoKS5sZW5ndGg+MH0sQW8ucHJvdG90eXBlLnNvcnRGZWF0dXJlcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMuc29ydEZlYXR1cmVzQnlZJiZ0aGlzLnNvcnRlZEFuZ2xlIT09dCYmKHRoaXMuc29ydGVkQW5nbGU9dCwhKHRoaXMudGV4dC5zZWdtZW50cy5nZXQoKS5sZW5ndGg+MXx8dGhpcy5pY29uLnNlZ21lbnRzLmdldCgpLmxlbmd0aD4xKSkpe2Zvcih2YXIgcj1bXSxuPTA7bjx0aGlzLnN5bWJvbEluc3RhbmNlcy5sZW5ndGg7bisrKXIucHVzaChuKTt2YXIgaT1NYXRoLnNpbih0KSxhPU1hdGguY29zKHQpO3Iuc29ydChmdW5jdGlvbih0LHIpe3ZhciBuPWUuc3ltYm9sSW5zdGFuY2VzW3RdLG89ZS5zeW1ib2xJbnN0YW5jZXNbcl07cmV0dXJuKGkqbi5hbmNob3IueCthKm4uYW5jaG9yLnl8MCktKGkqby5hbmNob3IueCthKm8uYW5jaG9yLnl8MCl8fG8uZmVhdHVyZUluZGV4LW4uZmVhdHVyZUluZGV4fSksdGhpcy50ZXh0LmluZGV4QXJyYXkuY2xlYXIoKSx0aGlzLmljb24uaW5kZXhBcnJheS5jbGVhcigpLHRoaXMuZmVhdHVyZVNvcnRPcmRlcj1bXTtmb3IodmFyIG89MCxzPXI7bzxzLmxlbmd0aDtvKz0xKXt2YXIgdT1zW29dLGw9ZS5zeW1ib2xJbnN0YW5jZXNbdV07ZS5mZWF0dXJlU29ydE9yZGVyLnB1c2gobC5mZWF0dXJlSW5kZXgpO2Zvcih2YXIgcD0wLGg9bC5wbGFjZWRUZXh0U3ltYm9sSW5kaWNlcztwPGgubGVuZ3RoO3ArPTEpZm9yKHZhciBjPWhbcF0sZj1lLnRleHQucGxhY2VkU3ltYm9sQXJyYXkuZ2V0KGMpLHk9Zi52ZXJ0ZXhTdGFydEluZGV4KzQqZi5udW1HbHlwaHMsZD1mLnZlcnRleFN0YXJ0SW5kZXg7ZDx5O2QrPTQpZS50ZXh0LmluZGV4QXJyYXkuZW1wbGFjZUJhY2soZCxkKzEsZCsyKSxlLnRleHQuaW5kZXhBcnJheS5lbXBsYWNlQmFjayhkKzEsZCsyLGQrMyk7dmFyIG09ZS5pY29uLnBsYWNlZFN5bWJvbEFycmF5LmdldCh1KTtpZihtLm51bUdseXBocyl7dmFyIHY9bS52ZXJ0ZXhTdGFydEluZGV4O2UuaWNvbi5pbmRleEFycmF5LmVtcGxhY2VCYWNrKHYsdisxLHYrMiksZS5pY29uLmluZGV4QXJyYXkuZW1wbGFjZUJhY2sodisxLHYrMix2KzMpO319dGhpcy50ZXh0LmluZGV4QnVmZmVyJiZ0aGlzLnRleHQuaW5kZXhCdWZmZXIudXBkYXRlRGF0YSh0aGlzLnRleHQuaW5kZXhBcnJheSksdGhpcy5pY29uLmluZGV4QnVmZmVyJiZ0aGlzLmljb24uaW5kZXhCdWZmZXIudXBkYXRlRGF0YSh0aGlzLmljb24uaW5kZXhBcnJheSk7fX0sQXIoXCJTeW1ib2xCdWNrZXRcIixBbyx7b21pdDpbXCJsYXllcnNcIixcImNvbGxpc2lvbkJveEFycmF5XCIsXCJmZWF0dXJlc1wiLFwiY29tcGFyZVRleHRcIl0sc2hhbGxvdzpbXCJzeW1ib2xJbnN0YW5jZXNcIl19KSxBby5NQVhfR0xZUEhTPTY1NTM1LEFvLmFkZER5bmFtaWNBdHRyaWJ1dGVzPWJvO3ZhciBrbz1uZXcgUXIoe1wic3ltYm9sLXBsYWNlbWVudFwiOm5ldyBIcihxLmxheW91dF9zeW1ib2xbXCJzeW1ib2wtcGxhY2VtZW50XCJdKSxcInN5bWJvbC1zcGFjaW5nXCI6bmV3IEhyKHEubGF5b3V0X3N5bWJvbFtcInN5bWJvbC1zcGFjaW5nXCJdKSxcInN5bWJvbC1hdm9pZC1lZGdlc1wiOm5ldyBIcihxLmxheW91dF9zeW1ib2xbXCJzeW1ib2wtYXZvaWQtZWRnZXNcIl0pLFwiaWNvbi1hbGxvdy1vdmVybGFwXCI6bmV3IEhyKHEubGF5b3V0X3N5bWJvbFtcImljb24tYWxsb3ctb3ZlcmxhcFwiXSksXCJpY29uLWlnbm9yZS1wbGFjZW1lbnRcIjpuZXcgSHIocS5sYXlvdXRfc3ltYm9sW1wiaWNvbi1pZ25vcmUtcGxhY2VtZW50XCJdKSxcImljb24tb3B0aW9uYWxcIjpuZXcgSHIocS5sYXlvdXRfc3ltYm9sW1wiaWNvbi1vcHRpb25hbFwiXSksXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiOm5ldyBIcihxLmxheW91dF9zeW1ib2xbXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiXSksXCJpY29uLXNpemVcIjpuZXcgS3IocS5sYXlvdXRfc3ltYm9sW1wiaWNvbi1zaXplXCJdKSxcImljb24tdGV4dC1maXRcIjpuZXcgSHIocS5sYXlvdXRfc3ltYm9sW1wiaWNvbi10ZXh0LWZpdFwiXSksXCJpY29uLXRleHQtZml0LXBhZGRpbmdcIjpuZXcgSHIocS5sYXlvdXRfc3ltYm9sW1wiaWNvbi10ZXh0LWZpdC1wYWRkaW5nXCJdKSxcImljb24taW1hZ2VcIjpuZXcgS3IocS5sYXlvdXRfc3ltYm9sW1wiaWNvbi1pbWFnZVwiXSksXCJpY29uLXJvdGF0ZVwiOm5ldyBLcihxLmxheW91dF9zeW1ib2xbXCJpY29uLXJvdGF0ZVwiXSksXCJpY29uLXBhZGRpbmdcIjpuZXcgSHIocS5sYXlvdXRfc3ltYm9sW1wiaWNvbi1wYWRkaW5nXCJdKSxcImljb24ta2VlcC11cHJpZ2h0XCI6bmV3IEhyKHEubGF5b3V0X3N5bWJvbFtcImljb24ta2VlcC11cHJpZ2h0XCJdKSxcImljb24tb2Zmc2V0XCI6bmV3IEtyKHEubGF5b3V0X3N5bWJvbFtcImljb24tb2Zmc2V0XCJdKSxcImljb24tYW5jaG9yXCI6bmV3IEtyKHEubGF5b3V0X3N5bWJvbFtcImljb24tYW5jaG9yXCJdKSxcImljb24tcGl0Y2gtYWxpZ25tZW50XCI6bmV3IEhyKHEubGF5b3V0X3N5bWJvbFtcImljb24tcGl0Y2gtYWxpZ25tZW50XCJdKSxcInRleHQtcGl0Y2gtYWxpZ25tZW50XCI6bmV3IEhyKHEubGF5b3V0X3N5bWJvbFtcInRleHQtcGl0Y2gtYWxpZ25tZW50XCJdKSxcInRleHQtcm90YXRpb24tYWxpZ25tZW50XCI6bmV3IEhyKHEubGF5b3V0X3N5bWJvbFtcInRleHQtcm90YXRpb24tYWxpZ25tZW50XCJdKSxcInRleHQtZmllbGRcIjpuZXcgS3IocS5sYXlvdXRfc3ltYm9sW1widGV4dC1maWVsZFwiXSksXCJ0ZXh0LWZvbnRcIjpuZXcgS3IocS5sYXlvdXRfc3ltYm9sW1widGV4dC1mb250XCJdKSxcInRleHQtc2l6ZVwiOm5ldyBLcihxLmxheW91dF9zeW1ib2xbXCJ0ZXh0LXNpemVcIl0pLFwidGV4dC1tYXgtd2lkdGhcIjpuZXcgS3IocS5sYXlvdXRfc3ltYm9sW1widGV4dC1tYXgtd2lkdGhcIl0pLFwidGV4dC1saW5lLWhlaWdodFwiOm5ldyBIcihxLmxheW91dF9zeW1ib2xbXCJ0ZXh0LWxpbmUtaGVpZ2h0XCJdKSxcInRleHQtbGV0dGVyLXNwYWNpbmdcIjpuZXcgS3IocS5sYXlvdXRfc3ltYm9sW1widGV4dC1sZXR0ZXItc3BhY2luZ1wiXSksXCJ0ZXh0LWp1c3RpZnlcIjpuZXcgS3IocS5sYXlvdXRfc3ltYm9sW1widGV4dC1qdXN0aWZ5XCJdKSxcInRleHQtYW5jaG9yXCI6bmV3IEtyKHEubGF5b3V0X3N5bWJvbFtcInRleHQtYW5jaG9yXCJdKSxcInRleHQtbWF4LWFuZ2xlXCI6bmV3IEhyKHEubGF5b3V0X3N5bWJvbFtcInRleHQtbWF4LWFuZ2xlXCJdKSxcInRleHQtcm90YXRlXCI6bmV3IEtyKHEubGF5b3V0X3N5bWJvbFtcInRleHQtcm90YXRlXCJdKSxcInRleHQtcGFkZGluZ1wiOm5ldyBIcihxLmxheW91dF9zeW1ib2xbXCJ0ZXh0LXBhZGRpbmdcIl0pLFwidGV4dC1rZWVwLXVwcmlnaHRcIjpuZXcgSHIocS5sYXlvdXRfc3ltYm9sW1widGV4dC1rZWVwLXVwcmlnaHRcIl0pLFwidGV4dC10cmFuc2Zvcm1cIjpuZXcgS3IocS5sYXlvdXRfc3ltYm9sW1widGV4dC10cmFuc2Zvcm1cIl0pLFwidGV4dC1vZmZzZXRcIjpuZXcgS3IocS5sYXlvdXRfc3ltYm9sW1widGV4dC1vZmZzZXRcIl0pLFwidGV4dC1hbGxvdy1vdmVybGFwXCI6bmV3IEhyKHEubGF5b3V0X3N5bWJvbFtcInRleHQtYWxsb3ctb3ZlcmxhcFwiXSksXCJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnRcIjpuZXcgSHIocS5sYXlvdXRfc3ltYm9sW1widGV4dC1pZ25vcmUtcGxhY2VtZW50XCJdKSxcInRleHQtb3B0aW9uYWxcIjpuZXcgSHIocS5sYXlvdXRfc3ltYm9sW1widGV4dC1vcHRpb25hbFwiXSl9KSx6bz17cGFpbnQ6bmV3IFFyKHtcImljb24tb3BhY2l0eVwiOm5ldyBLcihxLnBhaW50X3N5bWJvbFtcImljb24tb3BhY2l0eVwiXSksXCJpY29uLWNvbG9yXCI6bmV3IEtyKHEucGFpbnRfc3ltYm9sW1wiaWNvbi1jb2xvclwiXSksXCJpY29uLWhhbG8tY29sb3JcIjpuZXcgS3IocS5wYWludF9zeW1ib2xbXCJpY29uLWhhbG8tY29sb3JcIl0pLFwiaWNvbi1oYWxvLXdpZHRoXCI6bmV3IEtyKHEucGFpbnRfc3ltYm9sW1wiaWNvbi1oYWxvLXdpZHRoXCJdKSxcImljb24taGFsby1ibHVyXCI6bmV3IEtyKHEucGFpbnRfc3ltYm9sW1wiaWNvbi1oYWxvLWJsdXJcIl0pLFwiaWNvbi10cmFuc2xhdGVcIjpuZXcgSHIocS5wYWludF9zeW1ib2xbXCJpY29uLXRyYW5zbGF0ZVwiXSksXCJpY29uLXRyYW5zbGF0ZS1hbmNob3JcIjpuZXcgSHIocS5wYWludF9zeW1ib2xbXCJpY29uLXRyYW5zbGF0ZS1hbmNob3JcIl0pLFwidGV4dC1vcGFjaXR5XCI6bmV3IEtyKHEucGFpbnRfc3ltYm9sW1widGV4dC1vcGFjaXR5XCJdKSxcInRleHQtY29sb3JcIjpuZXcgS3IocS5wYWludF9zeW1ib2xbXCJ0ZXh0LWNvbG9yXCJdKSxcInRleHQtaGFsby1jb2xvclwiOm5ldyBLcihxLnBhaW50X3N5bWJvbFtcInRleHQtaGFsby1jb2xvclwiXSksXCJ0ZXh0LWhhbG8td2lkdGhcIjpuZXcgS3IocS5wYWludF9zeW1ib2xbXCJ0ZXh0LWhhbG8td2lkdGhcIl0pLFwidGV4dC1oYWxvLWJsdXJcIjpuZXcgS3IocS5wYWludF9zeW1ib2xbXCJ0ZXh0LWhhbG8tYmx1clwiXSksXCJ0ZXh0LXRyYW5zbGF0ZVwiOm5ldyBIcihxLnBhaW50X3N5bWJvbFtcInRleHQtdHJhbnNsYXRlXCJdKSxcInRleHQtdHJhbnNsYXRlLWFuY2hvclwiOm5ldyBIcihxLnBhaW50X3N5bWJvbFtcInRleHQtdHJhbnNsYXRlLWFuY2hvclwiXSl9KSxsYXlvdXQ6a299LFNvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZSx6byk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5yZWNhbGN1bGF0ZT1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5yZWNhbGN1bGF0ZS5jYWxsKHRoaXMsZSksXCJhdXRvXCI9PT10aGlzLmxheW91dC5nZXQoXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiKSYmKFwibGluZVwiPT09dGhpcy5sYXlvdXQuZ2V0KFwic3ltYm9sLXBsYWNlbWVudFwiKT90aGlzLmxheW91dC5fdmFsdWVzW1wiaWNvbi1yb3RhdGlvbi1hbGlnbm1lbnRcIl09XCJtYXBcIjp0aGlzLmxheW91dC5fdmFsdWVzW1wiaWNvbi1yb3RhdGlvbi1hbGlnbm1lbnRcIl09XCJ2aWV3cG9ydFwiKSxcImF1dG9cIj09PXRoaXMubGF5b3V0LmdldChcInRleHQtcm90YXRpb24tYWxpZ25tZW50XCIpJiYoXCJsaW5lXCI9PT10aGlzLmxheW91dC5nZXQoXCJzeW1ib2wtcGxhY2VtZW50XCIpP3RoaXMubGF5b3V0Ll92YWx1ZXNbXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiXT1cIm1hcFwiOnRoaXMubGF5b3V0Ll92YWx1ZXNbXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiXT1cInZpZXdwb3J0XCIpLFwiYXV0b1wiPT09dGhpcy5sYXlvdXQuZ2V0KFwidGV4dC1waXRjaC1hbGlnbm1lbnRcIikmJih0aGlzLmxheW91dC5fdmFsdWVzW1widGV4dC1waXRjaC1hbGlnbm1lbnRcIl09dGhpcy5sYXlvdXQuZ2V0KFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIikpLFwiYXV0b1wiPT09dGhpcy5sYXlvdXQuZ2V0KFwiaWNvbi1waXRjaC1hbGlnbm1lbnRcIikmJih0aGlzLmxheW91dC5fdmFsdWVzW1wiaWNvbi1waXRjaC1hbGlnbm1lbnRcIl09dGhpcy5sYXlvdXQuZ2V0KFwiaWNvbi1yb3RhdGlvbi1hbGlnbm1lbnRcIikpO30sZS5wcm90b3R5cGUuZ2V0VmFsdWVBbmRSZXNvbHZlVG9rZW5zPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbj10aGlzLmxheW91dC5nZXQodCkuZXZhbHVhdGUoZSx7fSksaT10aGlzLl91bmV2YWx1YXRlZExheW91dC5fdmFsdWVzW3RdO3JldHVybiBpLmlzRGF0YURyaXZlbigpfHxDZShpLnZhbHVlKT9uOihyPWUucHJvcGVydGllcyxuLnJlcGxhY2UoL3soW157fV0rKX0vZyxmdW5jdGlvbih0LGUpe3JldHVybiBlIGluIHI/U3RyaW5nKHJbZV0pOlwiXCJ9KSl9LGUucHJvdG90eXBlLmNyZWF0ZUJ1Y2tldD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEFvKHQpfSxlLnByb3RvdHlwZS5xdWVyeVJhZGl1cz1mdW5jdGlvbigpe3JldHVybiAwfSxlLnByb3RvdHlwZS5xdWVyeUludGVyc2VjdHNGZWF0dXJlPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGV9KHRuKSxNbz17cGFpbnQ6bmV3IFFyKHtcImJhY2tncm91bmQtY29sb3JcIjpuZXcgSHIocS5wYWludF9iYWNrZ3JvdW5kW1wiYmFja2dyb3VuZC1jb2xvclwiXSksXCJiYWNrZ3JvdW5kLXBhdHRlcm5cIjpuZXcgWXIocS5wYWludF9iYWNrZ3JvdW5kW1wiYmFja2dyb3VuZC1wYXR0ZXJuXCJdKSxcImJhY2tncm91bmQtb3BhY2l0eVwiOm5ldyBIcihxLnBhaW50X2JhY2tncm91bmRbXCJiYWNrZ3JvdW5kLW9wYWNpdHlcIl0pfSl9LEJvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZSxNbyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlfSh0biksVm89e3BhaW50Om5ldyBRcih7XCJyYXN0ZXItb3BhY2l0eVwiOm5ldyBIcihxLnBhaW50X3Jhc3RlcltcInJhc3Rlci1vcGFjaXR5XCJdKSxcInJhc3Rlci1odWUtcm90YXRlXCI6bmV3IEhyKHEucGFpbnRfcmFzdGVyW1wicmFzdGVyLWh1ZS1yb3RhdGVcIl0pLFwicmFzdGVyLWJyaWdodG5lc3MtbWluXCI6bmV3IEhyKHEucGFpbnRfcmFzdGVyW1wicmFzdGVyLWJyaWdodG5lc3MtbWluXCJdKSxcInJhc3Rlci1icmlnaHRuZXNzLW1heFwiOm5ldyBIcihxLnBhaW50X3Jhc3RlcltcInJhc3Rlci1icmlnaHRuZXNzLW1heFwiXSksXCJyYXN0ZXItc2F0dXJhdGlvblwiOm5ldyBIcihxLnBhaW50X3Jhc3RlcltcInJhc3Rlci1zYXR1cmF0aW9uXCJdKSxcInJhc3Rlci1jb250cmFzdFwiOm5ldyBIcihxLnBhaW50X3Jhc3RlcltcInJhc3Rlci1jb250cmFzdFwiXSksXCJyYXN0ZXItZmFkZS1kdXJhdGlvblwiOm5ldyBIcihxLnBhaW50X3Jhc3RlcltcInJhc3Rlci1mYWRlLWR1cmF0aW9uXCJdKX0pfSxJbz17Y2lyY2xlOkZpLGhlYXRtYXA6WGksaGlsbHNoYWRlOkppLGZpbGw6VmEsXCJmaWxsLWV4dHJ1c2lvblwiOk9hLGxpbmU6YW8sc3ltYm9sOlNvLGJhY2tncm91bmQ6Qm8scmFzdGVyOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZSxWbyk7fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlfSh0bil9O3ZhciBDbz1uKGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7cj1yfHx7fSx0aGlzLnc9dHx8NjQsdGhpcy5oPWV8fDY0LHRoaXMuYXV0b1Jlc2l6ZT0hIXIuYXV0b1Jlc2l6ZSx0aGlzLnNoZWx2ZXM9W10sdGhpcy5mcmVlYmlucz1bXSx0aGlzLnN0YXRzPXt9LHRoaXMuYmlucz17fSx0aGlzLm1heElkPTA7fWZ1bmN0aW9uIGUodCxlLHIpe3RoaXMueD0wLHRoaXMueT10LHRoaXMudz10aGlzLmZyZWU9ZSx0aGlzLmg9cjt9cmV0dXJuIHQucHJvdG90eXBlLnBhY2s9ZnVuY3Rpb24odCxlKXt0PVtdLmNvbmNhdCh0KSxlPWV8fHt9O2Zvcih2YXIgcixuLGksYSxvPVtdLHM9MDtzPHQubGVuZ3RoO3MrKylpZihyPXRbc10ud3x8dFtzXS53aWR0aCxuPXRbc10uaHx8dFtzXS5oZWlnaHQsaT10W3NdLmlkLHImJm4pe2lmKCEoYT10aGlzLnBhY2tPbmUocixuLGkpKSljb250aW51ZTtlLmluUGxhY2UmJih0W3NdLng9YS54LHRbc10ueT1hLnksdFtzXS5pZD1hLmlkKSxvLnB1c2goYSk7fXJldHVybiB0aGlzLnNocmluaygpLG99LHQucHJvdG90eXBlLnBhY2tPbmU9ZnVuY3Rpb24odCxyLG4pe3ZhciBpLGEsbyxzLHUsbCxwLGgsYz17ZnJlZWJpbjotMSxzaGVsZjotMSx3YXN0ZToxLzB9LGY9MDtpZihcInN0cmluZ1wiPT10eXBlb2Ygbnx8XCJudW1iZXJcIj09dHlwZW9mIG4pe2lmKGk9dGhpcy5nZXRCaW4obikpcmV0dXJuIHRoaXMucmVmKGkpLGk7XCJudW1iZXJcIj09dHlwZW9mIG4mJih0aGlzLm1heElkPU1hdGgubWF4KG4sdGhpcy5tYXhJZCkpO31lbHNlIG49Kyt0aGlzLm1heElkO2ZvcihzPTA7czx0aGlzLmZyZWViaW5zLmxlbmd0aDtzKyspe2lmKHI9PT0oaT10aGlzLmZyZWViaW5zW3NdKS5tYXhoJiZ0PT09aS5tYXh3KXJldHVybiB0aGlzLmFsbG9jRnJlZWJpbihzLHQscixuKTtyPmkubWF4aHx8dD5pLm1heHd8fHI8PWkubWF4aCYmdDw9aS5tYXh3JiYobz1pLm1heHcqaS5tYXhoLXQqcik8Yy53YXN0ZSYmKGMud2FzdGU9byxjLmZyZWViaW49cyk7fWZvcihzPTA7czx0aGlzLnNoZWx2ZXMubGVuZ3RoO3MrKylpZihmKz0oYT10aGlzLnNoZWx2ZXNbc10pLmgsISh0PmEuZnJlZSkpe2lmKHI9PT1hLmgpcmV0dXJuIHRoaXMuYWxsb2NTaGVsZihzLHQscixuKTtyPmEuaHx8cjxhLmgmJihvPShhLmgtcikqdCk8Yy53YXN0ZSYmKGMuZnJlZWJpbj0tMSxjLndhc3RlPW8sYy5zaGVsZj1zKTt9cmV0dXJuLTEhPT1jLmZyZWViaW4/dGhpcy5hbGxvY0ZyZWViaW4oYy5mcmVlYmluLHQscixuKTotMSE9PWMuc2hlbGY/dGhpcy5hbGxvY1NoZWxmKGMuc2hlbGYsdCxyLG4pOnI8PXRoaXMuaC1mJiZ0PD10aGlzLnc/KGE9bmV3IGUoZix0aGlzLncsciksdGhpcy5hbGxvY1NoZWxmKHRoaXMuc2hlbHZlcy5wdXNoKGEpLTEsdCxyLG4pKTp0aGlzLmF1dG9SZXNpemU/KHU9bD10aGlzLmgsKChwPWg9dGhpcy53KTw9dXx8dD5wKSYmKGg9MipNYXRoLm1heCh0LHApKSwodTxwfHxyPnUpJiYobD0yKk1hdGgubWF4KHIsdSkpLHRoaXMucmVzaXplKGgsbCksdGhpcy5wYWNrT25lKHQscixuKSk6bnVsbH0sdC5wcm90b3R5cGUuYWxsb2NGcmVlYmluPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPXRoaXMuZnJlZWJpbnMuc3BsaWNlKHQsMSlbMF07cmV0dXJuIGkuaWQ9bixpLnc9ZSxpLmg9cixpLnJlZmNvdW50PTAsdGhpcy5iaW5zW25dPWksdGhpcy5yZWYoaSksaX0sdC5wcm90b3R5cGUuYWxsb2NTaGVsZj1mdW5jdGlvbih0LGUscixuKXt2YXIgaT10aGlzLnNoZWx2ZXNbdF0uYWxsb2MoZSxyLG4pO3JldHVybiB0aGlzLmJpbnNbbl09aSx0aGlzLnJlZihpKSxpfSx0LnByb3RvdHlwZS5zaHJpbms9ZnVuY3Rpb24oKXtpZih0aGlzLnNoZWx2ZXMubGVuZ3RoPjApe2Zvcih2YXIgdD0wLGU9MCxyPTA7cjx0aGlzLnNoZWx2ZXMubGVuZ3RoO3IrKyl7dmFyIG49dGhpcy5zaGVsdmVzW3JdO2UrPW4uaCx0PU1hdGgubWF4KG4udy1uLmZyZWUsdCk7fXRoaXMucmVzaXplKHQsZSk7fX0sdC5wcm90b3R5cGUuZ2V0QmluPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmJpbnNbdF19LHQucHJvdG90eXBlLnJlZj1mdW5jdGlvbih0KXtpZigxPT0rK3QucmVmY291bnQpe3ZhciBlPXQuaDt0aGlzLnN0YXRzW2VdPTErKDB8dGhpcy5zdGF0c1tlXSk7fXJldHVybiB0LnJlZmNvdW50fSx0LnByb3RvdHlwZS51bnJlZj1mdW5jdGlvbih0KXtyZXR1cm4gMD09PXQucmVmY291bnQ/MDooMD09LS10LnJlZmNvdW50JiYodGhpcy5zdGF0c1t0LmhdLS0sZGVsZXRlIHRoaXMuYmluc1t0LmlkXSx0aGlzLmZyZWViaW5zLnB1c2godCkpLHQucmVmY291bnQpfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuc2hlbHZlcz1bXSx0aGlzLmZyZWViaW5zPVtdLHRoaXMuc3RhdHM9e30sdGhpcy5iaW5zPXt9LHRoaXMubWF4SWQ9MDt9LHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0LGUpe3RoaXMudz10LHRoaXMuaD1lO2Zvcih2YXIgcj0wO3I8dGhpcy5zaGVsdmVzLmxlbmd0aDtyKyspdGhpcy5zaGVsdmVzW3JdLnJlc2l6ZSh0KTtyZXR1cm4hMH0sZS5wcm90b3R5cGUuYWxsb2M9ZnVuY3Rpb24odCxlLHIpe2lmKHQ+dGhpcy5mcmVlfHxlPnRoaXMuaClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLng7cmV0dXJuIHRoaXMueCs9dCx0aGlzLmZyZWUtPXQsbmV3IGZ1bmN0aW9uKHQsZSxyLG4saSxhLG8pe3RoaXMuaWQ9dCx0aGlzLng9ZSx0aGlzLnk9cix0aGlzLnc9bix0aGlzLmg9aSx0aGlzLm1heHc9YXx8bix0aGlzLm1heGg9b3x8aSx0aGlzLnJlZmNvdW50PTA7fShyLG4sdGhpcy55LHQsZSx0LHRoaXMuaCl9LGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5mcmVlKz10LXRoaXMudyx0aGlzLnc9dCwhMH0sdH0oKTt9KSxFbz1mdW5jdGlvbih0LGUpe3ZhciByPWUucGl4ZWxSYXRpbzt0aGlzLnBhZGRlZFJlY3Q9dCx0aGlzLnBpeGVsUmF0aW89cjt9LFRvPXt0bDp7Y29uZmlndXJhYmxlOiEwfSxicjp7Y29uZmlndXJhYmxlOiEwfSxkaXNwbGF5U2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07VG8udGwuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMucGFkZGVkUmVjdC54KzEsdGhpcy5wYWRkZWRSZWN0LnkrMV19LFRvLmJyLmdldD1mdW5jdGlvbigpe3JldHVyblt0aGlzLnBhZGRlZFJlY3QueCt0aGlzLnBhZGRlZFJlY3Qudy0xLHRoaXMucGFkZGVkUmVjdC55K3RoaXMucGFkZGVkUmVjdC5oLTFdfSxUby5kaXNwbGF5U2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm5bKHRoaXMucGFkZGVkUmVjdC53LTIpL3RoaXMucGl4ZWxSYXRpbywodGhpcy5wYWRkZWRSZWN0LmgtMikvdGhpcy5waXhlbFJhdGlvXX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRW8ucHJvdG90eXBlLFRvKTt2YXIgUG89ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFVpKHt3aWR0aDowLGhlaWdodDowfSkscj17fSxuPW5ldyBDbygwLDAse2F1dG9SZXNpemU6ITB9KTtmb3IodmFyIGkgaW4gdCl7dmFyIGE9dFtpXSxvPW4ucGFja09uZShhLmRhdGEud2lkdGgrMixhLmRhdGEuaGVpZ2h0KzIpO2UucmVzaXplKHt3aWR0aDpuLncsaGVpZ2h0Om4uaH0pLFVpLmNvcHkoYS5kYXRhLGUse3g6MCx5OjB9LHt4Om8ueCsxLHk6by55KzF9LGEuZGF0YSkscltpXT1uZXcgRW8obyxhKTt9bi5zaHJpbmsoKSxlLnJlc2l6ZSh7d2lkdGg6bi53LGhlaWdodDpuLmh9KSx0aGlzLmltYWdlPWUsdGhpcy5wb3NpdGlvbnM9cjt9O0FyKFwiSW1hZ2VQb3NpdGlvblwiLEVvKSxBcihcIkltYWdlQXRsYXNcIixQbyk7dmFyIEZvPXNlbGYuSFRNTEltYWdlRWxlbWVudCxMbz1zZWxmLkhUTUxDYW52YXNFbGVtZW50LE9vPXNlbGYuSFRNTFZpZGVvRWxlbWVudCxEbz1zZWxmLkltYWdlRGF0YSxxbz1mdW5jdGlvbih0LGUscixuKXt0aGlzLmNvbnRleHQ9dCx0aGlzLmZvcm1hdD1yLHRoaXMudGV4dHVyZT10LmdsLmNyZWF0ZVRleHR1cmUoKSx0aGlzLnVwZGF0ZShlLG4pO307cW8ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3ZhciByPXQud2lkdGgsbj10LmhlaWdodCxpPSF0aGlzLnNpemV8fHRoaXMuc2l6ZVswXSE9PXJ8fHRoaXMuc2l6ZVsxXSE9PW4sYT10aGlzLmNvbnRleHQsbz1hLmdsO3RoaXMudXNlTWlwbWFwPUJvb2xlYW4oZSYmZS51c2VNaXBtYXApLG8uYmluZFRleHR1cmUoby5URVhUVVJFXzJELHRoaXMudGV4dHVyZSksaT8odGhpcy5zaXplPVtyLG5dLGEucGl4ZWxTdG9yZVVucGFjay5zZXQoMSksdGhpcy5mb3JtYXQhPT1vLlJHQkF8fGUmJiExPT09ZS5wcmVtdWx0aXBseXx8YS5waXhlbFN0b3JlVW5wYWNrUHJlbXVsdGlwbHlBbHBoYS5zZXQoITApLHQgaW5zdGFuY2VvZiBGb3x8dCBpbnN0YW5jZW9mIExvfHx0IGluc3RhbmNlb2YgT298fHQgaW5zdGFuY2VvZiBEbz9vLnRleEltYWdlMkQoby5URVhUVVJFXzJELDAsdGhpcy5mb3JtYXQsdGhpcy5mb3JtYXQsby5VTlNJR05FRF9CWVRFLHQpOm8udGV4SW1hZ2UyRChvLlRFWFRVUkVfMkQsMCx0aGlzLmZvcm1hdCxyLG4sMCx0aGlzLmZvcm1hdCxvLlVOU0lHTkVEX0JZVEUsdC5kYXRhKSk6dCBpbnN0YW5jZW9mIEZvfHx0IGluc3RhbmNlb2YgTG98fHQgaW5zdGFuY2VvZiBPb3x8dCBpbnN0YW5jZW9mIERvP28udGV4U3ViSW1hZ2UyRChvLlRFWFRVUkVfMkQsMCwwLDAsby5SR0JBLG8uVU5TSUdORURfQllURSx0KTpvLnRleFN1YkltYWdlMkQoby5URVhUVVJFXzJELDAsMCwwLHIsbixvLlJHQkEsby5VTlNJR05FRF9CWVRFLHQuZGF0YSksdGhpcy51c2VNaXBtYXAmJnRoaXMuaXNTaXplUG93ZXJPZlR3bygpJiZvLmdlbmVyYXRlTWlwbWFwKG8uVEVYVFVSRV8yRCk7fSxxby5wcm90b3R5cGUuYmluZD1mdW5jdGlvbih0LGUscil7dmFyIG49dGhpcy5jb250ZXh0LmdsO24uYmluZFRleHR1cmUobi5URVhUVVJFXzJELHRoaXMudGV4dHVyZSksciE9PW4uTElORUFSX01JUE1BUF9ORUFSRVNUfHx0aGlzLmlzU2l6ZVBvd2VyT2ZUd28oKXx8KHI9bi5MSU5FQVIpLHQhPT10aGlzLmZpbHRlciYmKG4udGV4UGFyYW1ldGVyaShuLlRFWFRVUkVfMkQsbi5URVhUVVJFX01BR19GSUxURVIsdCksbi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfTUlOX0ZJTFRFUixyfHx0KSx0aGlzLmZpbHRlcj10KSxlIT09dGhpcy53cmFwJiYobi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfV1JBUF9TLGUpLG4udGV4UGFyYW1ldGVyaShuLlRFWFRVUkVfMkQsbi5URVhUVVJFX1dSQVBfVCxlKSx0aGlzLndyYXA9ZSk7fSxxby5wcm90b3R5cGUuaXNTaXplUG93ZXJPZlR3bz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemVbMF09PT10aGlzLnNpemVbMV0mJk1hdGgubG9nKHRoaXMuc2l6ZVswXSkvTWF0aC5MTjIlMT09MH0scW8ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQuZ2wuZGVsZXRlVGV4dHVyZSh0aGlzLnRleHR1cmUpLHRoaXMudGV4dHVyZT1udWxsO307dmFyIGpvPWZ1bmN0aW9uKHQsZSxyLG4saSl7dmFyIGEsbyxzPTgqaS1uLTEsdT0oMTw8cyktMSxsPXU+PjEscD0tNyxoPXI/aS0xOjAsYz1yPy0xOjEsZj10W2UraF07Zm9yKGgrPWMsYT1mJigxPDwtcCktMSxmPj49LXAscCs9cztwPjA7YT0yNTYqYSt0W2UraF0saCs9YyxwLT04KTtmb3Iobz1hJigxPDwtcCktMSxhPj49LXAscCs9bjtwPjA7bz0yNTYqbyt0W2UraF0saCs9YyxwLT04KTtpZigwPT09YSlhPTEtbDtlbHNle2lmKGE9PT11KXJldHVybiBvP05hTjoxLzAqKGY/LTE6MSk7bys9TWF0aC5wb3coMixuKSxhLT1sO31yZXR1cm4oZj8tMToxKSpvKk1hdGgucG93KDIsYS1uKX0sUm89ZnVuY3Rpb24odCxlLHIsbixpLGEpe3ZhciBvLHMsdSxsPTgqYS1pLTEscD0oMTw8bCktMSxoPXA+PjEsYz0yMz09PWk/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowLGY9bj8wOmEtMSx5PW4/MTotMSxkPWU8MHx8MD09PWUmJjEvZTwwPzE6MDtmb3IoZT1NYXRoLmFicyhlKSxpc05hTihlKXx8ZT09PTEvMD8ocz1pc05hTihlKT8xOjAsbz1wKToobz1NYXRoLmZsb29yKE1hdGgubG9nKGUpL01hdGguTE4yKSxlKih1PU1hdGgucG93KDIsLW8pKTwxJiYoby0tLHUqPTIpLChlKz1vK2g+PTE/Yy91OmMqTWF0aC5wb3coMiwxLWgpKSp1Pj0yJiYobysrLHUvPTIpLG8raD49cD8ocz0wLG89cCk6bytoPj0xPyhzPShlKnUtMSkqTWF0aC5wb3coMixpKSxvKz1oKToocz1lKk1hdGgucG93KDIsaC0xKSpNYXRoLnBvdygyLGkpLG89MCkpO2k+PTg7dFtyK2ZdPTI1NSZzLGYrPXkscy89MjU2LGktPTgpO2ZvcihvPW88PGl8cyxsKz1pO2w+MDt0W3IrZl09MjU1Jm8sZis9eSxvLz0yNTYsbC09OCk7dFtyK2YteV18PTEyOCpkO30sVW89Tm87ZnVuY3Rpb24gTm8odCl7dGhpcy5idWY9QXJyYXlCdWZmZXIuaXNWaWV3JiZBcnJheUJ1ZmZlci5pc1ZpZXcodCk/dDpuZXcgVWludDhBcnJheSh0fHwwKSx0aGlzLnBvcz0wLHRoaXMudHlwZT0wLHRoaXMubGVuZ3RoPXRoaXMuYnVmLmxlbmd0aDt9Tm8uVmFyaW50PTAsTm8uRml4ZWQ2ND0xLE5vLkJ5dGVzPTIsTm8uRml4ZWQzMj01O2Z1bmN0aW9uIFpvKHQpe3JldHVybiB0LnR5cGU9PT1Oby5CeXRlcz90LnJlYWRWYXJpbnQoKSt0LnBvczp0LnBvcysxfWZ1bmN0aW9uIFhvKHQsZSxyKXtyZXR1cm4gcj80Mjk0OTY3Mjk2KmUrKHQ+Pj4wKTo0Mjk0OTY3Mjk2KihlPj4+MCkrKHQ+Pj4wKX1mdW5jdGlvbiAkbyh0LGUscil7dmFyIG49ZTw9MTYzODM/MTplPD0yMDk3MTUxPzI6ZTw9MjY4NDM1NDU1PzM6TWF0aC5jZWlsKE1hdGgubG9nKGUpLyg3Kk1hdGguTE4yKSk7ci5yZWFsbG9jKG4pO2Zvcih2YXIgaT1yLnBvcy0xO2k+PXQ7aS0tKXIuYnVmW2krbl09ci5idWZbaV07fWZ1bmN0aW9uIEpvKHQsZSl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspZS53cml0ZVZhcmludCh0W3JdKTt9ZnVuY3Rpb24gR28odCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllLndyaXRlU1ZhcmludCh0W3JdKTt9ZnVuY3Rpb24gSG8odCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllLndyaXRlRmxvYXQodFtyXSk7fWZ1bmN0aW9uIEtvKHQsZSl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspZS53cml0ZURvdWJsZSh0W3JdKTt9ZnVuY3Rpb24gWW8odCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllLndyaXRlQm9vbGVhbih0W3JdKTt9ZnVuY3Rpb24gV28odCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllLndyaXRlRml4ZWQzMih0W3JdKTt9ZnVuY3Rpb24gUW8odCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllLndyaXRlU0ZpeGVkMzIodFtyXSk7fWZ1bmN0aW9uIHRzKHQsZSl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspZS53cml0ZUZpeGVkNjQodFtyXSk7fWZ1bmN0aW9uIGVzKHQsZSl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspZS53cml0ZVNGaXhlZDY0KHRbcl0pO31mdW5jdGlvbiBycyh0LGUpe3JldHVybih0W2VdfHRbZSsxXTw8OHx0W2UrMl08PDE2KSsxNjc3NzIxNip0W2UrM119ZnVuY3Rpb24gbnModCxlLHIpe3Rbcl09ZSx0W3IrMV09ZT4+PjgsdFtyKzJdPWU+Pj4xNix0W3IrM109ZT4+PjI0O31mdW5jdGlvbiBpcyh0LGUpe3JldHVybih0W2VdfHRbZSsxXTw8OHx0W2UrMl08PDE2KSsodFtlKzNdPDwyNCl9Tm8ucHJvdG90eXBlPXtkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5idWY9bnVsbDt9LHJlYWRGaWVsZHM6ZnVuY3Rpb24odCxlLHIpe2ZvcihyPXJ8fHRoaXMubGVuZ3RoO3RoaXMucG9zPHI7KXt2YXIgbj10aGlzLnJlYWRWYXJpbnQoKSxpPW4+PjMsYT10aGlzLnBvczt0aGlzLnR5cGU9NyZuLHQoaSxlLHRoaXMpLHRoaXMucG9zPT09YSYmdGhpcy5za2lwKG4pO31yZXR1cm4gZX0scmVhZE1lc3NhZ2U6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZWFkRmllbGRzKHQsZSx0aGlzLnJlYWRWYXJpbnQoKSt0aGlzLnBvcyl9LHJlYWRGaXhlZDMyOmZ1bmN0aW9uKCl7dmFyIHQ9cnModGhpcy5idWYsdGhpcy5wb3MpO3JldHVybiB0aGlzLnBvcys9NCx0fSxyZWFkU0ZpeGVkMzI6ZnVuY3Rpb24oKXt2YXIgdD1pcyh0aGlzLmJ1Zix0aGlzLnBvcyk7cmV0dXJuIHRoaXMucG9zKz00LHR9LHJlYWRGaXhlZDY0OmZ1bmN0aW9uKCl7dmFyIHQ9cnModGhpcy5idWYsdGhpcy5wb3MpKzQyOTQ5NjcyOTYqcnModGhpcy5idWYsdGhpcy5wb3MrNCk7cmV0dXJuIHRoaXMucG9zKz04LHR9LHJlYWRTRml4ZWQ2NDpmdW5jdGlvbigpe3ZhciB0PXJzKHRoaXMuYnVmLHRoaXMucG9zKSs0Mjk0OTY3Mjk2KmlzKHRoaXMuYnVmLHRoaXMucG9zKzQpO3JldHVybiB0aGlzLnBvcys9OCx0fSxyZWFkRmxvYXQ6ZnVuY3Rpb24oKXt2YXIgdD1qbyh0aGlzLmJ1Zix0aGlzLnBvcywhMCwyMyw0KTtyZXR1cm4gdGhpcy5wb3MrPTQsdH0scmVhZERvdWJsZTpmdW5jdGlvbigpe3ZhciB0PWpvKHRoaXMuYnVmLHRoaXMucG9zLCEwLDUyLDgpO3JldHVybiB0aGlzLnBvcys9OCx0fSxyZWFkVmFyaW50OmZ1bmN0aW9uKHQpe3ZhciBlLHIsbj10aGlzLmJ1ZjtyZXR1cm4gZT0xMjcmKHI9blt0aGlzLnBvcysrXSkscjwxMjg/ZTooZXw9KDEyNyYocj1uW3RoaXMucG9zKytdKSk8PDcscjwxMjg/ZTooZXw9KDEyNyYocj1uW3RoaXMucG9zKytdKSk8PDE0LHI8MTI4P2U6KGV8PSgxMjcmKHI9blt0aGlzLnBvcysrXSkpPDwyMSxyPDEyOD9lOmZ1bmN0aW9uKHQsZSxyKXt2YXIgbixpLGE9ci5idWY7aWYoaT1hW3IucG9zKytdLG49KDExMiZpKT4+NCxpPDEyOClyZXR1cm4gWG8odCxuLGUpO2lmKGk9YVtyLnBvcysrXSxufD0oMTI3JmkpPDwzLGk8MTI4KXJldHVybiBYbyh0LG4sZSk7aWYoaT1hW3IucG9zKytdLG58PSgxMjcmaSk8PDEwLGk8MTI4KXJldHVybiBYbyh0LG4sZSk7aWYoaT1hW3IucG9zKytdLG58PSgxMjcmaSk8PDE3LGk8MTI4KXJldHVybiBYbyh0LG4sZSk7aWYoaT1hW3IucG9zKytdLG58PSgxMjcmaSk8PDI0LGk8MTI4KXJldHVybiBYbyh0LG4sZSk7aWYoaT1hW3IucG9zKytdLG58PSgxJmkpPDwzMSxpPDEyOClyZXR1cm4gWG8odCxuLGUpO3Rocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIHZhcmludCBub3QgbW9yZSB0aGFuIDEwIGJ5dGVzXCIpfShlfD0oMTUmKHI9blt0aGlzLnBvc10pKTw8MjgsdCx0aGlzKSkpKX0scmVhZFZhcmludDY0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZFZhcmludCghMCl9LHJlYWRTVmFyaW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkVmFyaW50KCk7cmV0dXJuIHQlMj09MT8odCsxKS8tMjp0LzJ9LHJlYWRCb29sZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5yZWFkVmFyaW50KCkpfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkVmFyaW50KCkrdGhpcy5wb3MsZT1mdW5jdGlvbih0LGUscil7dmFyIG49XCJcIixpPWU7Zm9yKDtpPHI7KXt2YXIgYSxvLHMsdT10W2ldLGw9bnVsbCxwPXU+MjM5PzQ6dT4yMjM/Mzp1PjE5MT8yOjE7aWYoaStwPnIpYnJlYWs7MT09PXA/dTwxMjgmJihsPXUpOjI9PT1wPzEyOD09KDE5MiYoYT10W2krMV0pKSYmKGw9KDMxJnUpPDw2fDYzJmEpPD0xMjcmJihsPW51bGwpOjM9PT1wPyhhPXRbaSsxXSxvPXRbaSsyXSwxMjg9PSgxOTImYSkmJjEyOD09KDE5MiZvKSYmKChsPSgxNSZ1KTw8MTJ8KDYzJmEpPDw2fDYzJm8pPD0yMDQ3fHxsPj01NTI5NiYmbDw9NTczNDMpJiYobD1udWxsKSk6ND09PXAmJihhPXRbaSsxXSxvPXRbaSsyXSxzPXRbaSszXSwxMjg9PSgxOTImYSkmJjEyOD09KDE5MiZvKSYmMTI4PT0oMTkyJnMpJiYoKGw9KDE1JnUpPDwxOHwoNjMmYSk8PDEyfCg2MyZvKTw8Nnw2MyZzKTw9NjU1MzV8fGw+PTExMTQxMTIpJiYobD1udWxsKSksbnVsbD09PWw/KGw9NjU1MzMscD0xKTpsPjY1NTM1JiYobC09NjU1MzYsbis9U3RyaW5nLmZyb21DaGFyQ29kZShsPj4+MTAmMTAyM3w1NTI5NiksbD01NjMyMHwxMDIzJmwpLG4rPVN0cmluZy5mcm9tQ2hhckNvZGUobCksaSs9cDt9cmV0dXJuIG59KHRoaXMuYnVmLHRoaXMucG9zLHQpO3JldHVybiB0aGlzLnBvcz10LGV9LHJlYWRCeXRlczpmdW5jdGlvbigpe3ZhciB0PXRoaXMucmVhZFZhcmludCgpK3RoaXMucG9zLGU9dGhpcy5idWYuc3ViYXJyYXkodGhpcy5wb3MsdCk7cmV0dXJuIHRoaXMucG9zPXQsZX0scmVhZFBhY2tlZFZhcmludDpmdW5jdGlvbih0LGUpe3ZhciByPVpvKHRoaXMpO2Zvcih0PXR8fFtdO3RoaXMucG9zPHI7KXQucHVzaCh0aGlzLnJlYWRWYXJpbnQoZSkpO3JldHVybiB0fSxyZWFkUGFja2VkU1ZhcmludDpmdW5jdGlvbih0KXt2YXIgZT1abyh0aGlzKTtmb3IodD10fHxbXTt0aGlzLnBvczxlOyl0LnB1c2godGhpcy5yZWFkU1ZhcmludCgpKTtyZXR1cm4gdH0scmVhZFBhY2tlZEJvb2xlYW46ZnVuY3Rpb24odCl7dmFyIGU9Wm8odGhpcyk7Zm9yKHQ9dHx8W107dGhpcy5wb3M8ZTspdC5wdXNoKHRoaXMucmVhZEJvb2xlYW4oKSk7cmV0dXJuIHR9LHJlYWRQYWNrZWRGbG9hdDpmdW5jdGlvbih0KXt2YXIgZT1abyh0aGlzKTtmb3IodD10fHxbXTt0aGlzLnBvczxlOyl0LnB1c2godGhpcy5yZWFkRmxvYXQoKSk7cmV0dXJuIHR9LHJlYWRQYWNrZWREb3VibGU6ZnVuY3Rpb24odCl7dmFyIGU9Wm8odGhpcyk7Zm9yKHQ9dHx8W107dGhpcy5wb3M8ZTspdC5wdXNoKHRoaXMucmVhZERvdWJsZSgpKTtyZXR1cm4gdH0scmVhZFBhY2tlZEZpeGVkMzI6ZnVuY3Rpb24odCl7dmFyIGU9Wm8odGhpcyk7Zm9yKHQ9dHx8W107dGhpcy5wb3M8ZTspdC5wdXNoKHRoaXMucmVhZEZpeGVkMzIoKSk7cmV0dXJuIHR9LHJlYWRQYWNrZWRTRml4ZWQzMjpmdW5jdGlvbih0KXt2YXIgZT1abyh0aGlzKTtmb3IodD10fHxbXTt0aGlzLnBvczxlOyl0LnB1c2godGhpcy5yZWFkU0ZpeGVkMzIoKSk7cmV0dXJuIHR9LHJlYWRQYWNrZWRGaXhlZDY0OmZ1bmN0aW9uKHQpe3ZhciBlPVpvKHRoaXMpO2Zvcih0PXR8fFtdO3RoaXMucG9zPGU7KXQucHVzaCh0aGlzLnJlYWRGaXhlZDY0KCkpO3JldHVybiB0fSxyZWFkUGFja2VkU0ZpeGVkNjQ6ZnVuY3Rpb24odCl7dmFyIGU9Wm8odGhpcyk7Zm9yKHQ9dHx8W107dGhpcy5wb3M8ZTspdC5wdXNoKHRoaXMucmVhZFNGaXhlZDY0KCkpO3JldHVybiB0fSxza2lwOmZ1bmN0aW9uKHQpe3ZhciBlPTcmdDtpZihlPT09Tm8uVmFyaW50KWZvcig7dGhpcy5idWZbdGhpcy5wb3MrK10+MTI3Oyk7ZWxzZSBpZihlPT09Tm8uQnl0ZXMpdGhpcy5wb3M9dGhpcy5yZWFkVmFyaW50KCkrdGhpcy5wb3M7ZWxzZSBpZihlPT09Tm8uRml4ZWQzMil0aGlzLnBvcys9NDtlbHNle2lmKGUhPT1Oby5GaXhlZDY0KXRocm93IG5ldyBFcnJvcihcIlVuaW1wbGVtZW50ZWQgdHlwZTogXCIrZSk7dGhpcy5wb3MrPTg7fX0sd3JpdGVUYWc6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlVmFyaW50KHQ8PDN8ZSk7fSxyZWFsbG9jOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmxlbmd0aHx8MTY7ZTx0aGlzLnBvcyt0OyllKj0yO2lmKGUhPT10aGlzLmxlbmd0aCl7dmFyIHI9bmV3IFVpbnQ4QXJyYXkoZSk7ci5zZXQodGhpcy5idWYpLHRoaXMuYnVmPXIsdGhpcy5sZW5ndGg9ZTt9fSxmaW5pc2g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGg9dGhpcy5wb3MsdGhpcy5wb3M9MCx0aGlzLmJ1Zi5zdWJhcnJheSgwLHRoaXMubGVuZ3RoKX0sd3JpdGVGaXhlZDMyOmZ1bmN0aW9uKHQpe3RoaXMucmVhbGxvYyg0KSxucyh0aGlzLmJ1Zix0LHRoaXMucG9zKSx0aGlzLnBvcys9NDt9LHdyaXRlU0ZpeGVkMzI6ZnVuY3Rpb24odCl7dGhpcy5yZWFsbG9jKDQpLG5zKHRoaXMuYnVmLHQsdGhpcy5wb3MpLHRoaXMucG9zKz00O30sd3JpdGVGaXhlZDY0OmZ1bmN0aW9uKHQpe3RoaXMucmVhbGxvYyg4KSxucyh0aGlzLmJ1ZiwtMSZ0LHRoaXMucG9zKSxucyh0aGlzLmJ1ZixNYXRoLmZsb29yKHQqKDEvNDI5NDk2NzI5NikpLHRoaXMucG9zKzQpLHRoaXMucG9zKz04O30sd3JpdGVTRml4ZWQ2NDpmdW5jdGlvbih0KXt0aGlzLnJlYWxsb2MoOCksbnModGhpcy5idWYsLTEmdCx0aGlzLnBvcyksbnModGhpcy5idWYsTWF0aC5mbG9vcih0KigxLzQyOTQ5NjcyOTYpKSx0aGlzLnBvcys0KSx0aGlzLnBvcys9ODt9LHdyaXRlVmFyaW50OmZ1bmN0aW9uKHQpeyh0PSt0fHwwKT4yNjg0MzU0NTV8fHQ8MD9mdW5jdGlvbih0LGUpe3ZhciByLG47dD49MD8ocj10JTQyOTQ5NjcyOTZ8MCxuPXQvNDI5NDk2NzI5NnwwKToobj1+KC10LzQyOTQ5NjcyOTYpLDQyOTQ5NjcyOTVeKHI9figtdCU0Mjk0OTY3Mjk2KSk/cj1yKzF8MDoocj0wLG49bisxfDApKTtpZih0Pj0weDEwMDAwMDAwMDAwMDAwMDAwfHx0PC0weDEwMDAwMDAwMDAwMDAwMDAwKXRocm93IG5ldyBFcnJvcihcIkdpdmVuIHZhcmludCBkb2Vzbid0IGZpdCBpbnRvIDEwIGJ5dGVzXCIpO2UucmVhbGxvYygxMCksZnVuY3Rpb24odCxlLHIpe3IuYnVmW3IucG9zKytdPTEyNyZ0fDEyOCx0Pj4+PTcsci5idWZbci5wb3MrK109MTI3JnR8MTI4LHQ+Pj49NyxyLmJ1ZltyLnBvcysrXT0xMjcmdHwxMjgsdD4+Pj03LHIuYnVmW3IucG9zKytdPTEyNyZ0fDEyOCx0Pj4+PTcsci5idWZbci5wb3NdPTEyNyZ0O30ociwwLGUpLGZ1bmN0aW9uKHQsZSl7dmFyIHI9KDcmdCk8PDQ7aWYoZS5idWZbZS5wb3MrK118PXJ8KCh0Pj4+PTMpPzEyODowKSwhdClyZXR1cm47aWYoZS5idWZbZS5wb3MrK109MTI3JnR8KCh0Pj4+PTcpPzEyODowKSwhdClyZXR1cm47aWYoZS5idWZbZS5wb3MrK109MTI3JnR8KCh0Pj4+PTcpPzEyODowKSwhdClyZXR1cm47aWYoZS5idWZbZS5wb3MrK109MTI3JnR8KCh0Pj4+PTcpPzEyODowKSwhdClyZXR1cm47aWYoZS5idWZbZS5wb3MrK109MTI3JnR8KCh0Pj4+PTcpPzEyODowKSwhdClyZXR1cm47ZS5idWZbZS5wb3MrK109MTI3JnQ7fShuLGUpO30odCx0aGlzKToodGhpcy5yZWFsbG9jKDQpLHRoaXMuYnVmW3RoaXMucG9zKytdPTEyNyZ0fCh0PjEyNz8xMjg6MCksdDw9MTI3fHwodGhpcy5idWZbdGhpcy5wb3MrK109MTI3Jih0Pj4+PTcpfCh0PjEyNz8xMjg6MCksdDw9MTI3fHwodGhpcy5idWZbdGhpcy5wb3MrK109MTI3Jih0Pj4+PTcpfCh0PjEyNz8xMjg6MCksdDw9MTI3fHwodGhpcy5idWZbdGhpcy5wb3MrK109dD4+PjcmMTI3KSkpKTt9LHdyaXRlU1ZhcmludDpmdW5jdGlvbih0KXt0aGlzLndyaXRlVmFyaW50KHQ8MD8yKi10LTE6Mip0KTt9LHdyaXRlQm9vbGVhbjpmdW5jdGlvbih0KXt0aGlzLndyaXRlVmFyaW50KEJvb2xlYW4odCkpO30sd3JpdGVTdHJpbmc6ZnVuY3Rpb24odCl7dD1TdHJpbmcodCksdGhpcy5yZWFsbG9jKDQqdC5sZW5ndGgpLHRoaXMucG9zKys7dmFyIGU9dGhpcy5wb3M7dGhpcy5wb3M9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbixpLGE9MDthPGUubGVuZ3RoO2ErKyl7aWYoKG49ZS5jaGFyQ29kZUF0KGEpKT41NTI5NSYmbjw1NzM0NCl7aWYoIWkpe24+NTYzMTl8fGErMT09PWUubGVuZ3RoPyh0W3IrK109MjM5LHRbcisrXT0xOTEsdFtyKytdPTE4OSk6aT1uO2NvbnRpbnVlfWlmKG48NTYzMjApe3RbcisrXT0yMzksdFtyKytdPTE5MSx0W3IrK109MTg5LGk9bjtjb250aW51ZX1uPWktNTUyOTY8PDEwfG4tNTYzMjB8NjU1MzYsaT1udWxsO31lbHNlIGkmJih0W3IrK109MjM5LHRbcisrXT0xOTEsdFtyKytdPTE4OSxpPW51bGwpO248MTI4P3RbcisrXT1uOihuPDIwNDg/dFtyKytdPW4+PjZ8MTkyOihuPDY1NTM2P3RbcisrXT1uPj4xMnwyMjQ6KHRbcisrXT1uPj4xOHwyNDAsdFtyKytdPW4+PjEyJjYzfDEyOCksdFtyKytdPW4+PjYmNjN8MTI4KSx0W3IrK109NjMmbnwxMjgpO31yZXR1cm4gcn0odGhpcy5idWYsdCx0aGlzLnBvcyk7dmFyIHI9dGhpcy5wb3MtZTtyPj0xMjgmJiRvKGUscix0aGlzKSx0aGlzLnBvcz1lLTEsdGhpcy53cml0ZVZhcmludChyKSx0aGlzLnBvcys9cjt9LHdyaXRlRmxvYXQ6ZnVuY3Rpb24odCl7dGhpcy5yZWFsbG9jKDQpLFJvKHRoaXMuYnVmLHQsdGhpcy5wb3MsITAsMjMsNCksdGhpcy5wb3MrPTQ7fSx3cml0ZURvdWJsZTpmdW5jdGlvbih0KXt0aGlzLnJlYWxsb2MoOCksUm8odGhpcy5idWYsdCx0aGlzLnBvcywhMCw1Miw4KSx0aGlzLnBvcys9ODt9LHdyaXRlQnl0ZXM6ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGg7dGhpcy53cml0ZVZhcmludChlKSx0aGlzLnJlYWxsb2MoZSk7Zm9yKHZhciByPTA7cjxlO3IrKyl0aGlzLmJ1Zlt0aGlzLnBvcysrXT10W3JdO30sd3JpdGVSYXdNZXNzYWdlOmZ1bmN0aW9uKHQsZSl7dGhpcy5wb3MrKzt2YXIgcj10aGlzLnBvczt0KGUsdGhpcyk7dmFyIG49dGhpcy5wb3MtcjtuPj0xMjgmJiRvKHIsbix0aGlzKSx0aGlzLnBvcz1yLTEsdGhpcy53cml0ZVZhcmludChuKSx0aGlzLnBvcys9bjt9LHdyaXRlTWVzc2FnZTpmdW5jdGlvbih0LGUscil7dGhpcy53cml0ZVRhZyh0LE5vLkJ5dGVzKSx0aGlzLndyaXRlUmF3TWVzc2FnZShlLHIpO30sd3JpdGVQYWNrZWRWYXJpbnQ6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlTWVzc2FnZSh0LEpvLGUpO30sd3JpdGVQYWNrZWRTVmFyaW50OmZ1bmN0aW9uKHQsZSl7dGhpcy53cml0ZU1lc3NhZ2UodCxHbyxlKTt9LHdyaXRlUGFja2VkQm9vbGVhbjpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVNZXNzYWdlKHQsWW8sZSk7fSx3cml0ZVBhY2tlZEZsb2F0OmZ1bmN0aW9uKHQsZSl7dGhpcy53cml0ZU1lc3NhZ2UodCxIbyxlKTt9LHdyaXRlUGFja2VkRG91YmxlOmZ1bmN0aW9uKHQsZSl7dGhpcy53cml0ZU1lc3NhZ2UodCxLbyxlKTt9LHdyaXRlUGFja2VkRml4ZWQzMjpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVNZXNzYWdlKHQsV28sZSk7fSx3cml0ZVBhY2tlZFNGaXhlZDMyOmZ1bmN0aW9uKHQsZSl7dGhpcy53cml0ZU1lc3NhZ2UodCxRbyxlKTt9LHdyaXRlUGFja2VkRml4ZWQ2NDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVNZXNzYWdlKHQsdHMsZSk7fSx3cml0ZVBhY2tlZFNGaXhlZDY0OmZ1bmN0aW9uKHQsZSl7dGhpcy53cml0ZU1lc3NhZ2UodCxlcyxlKTt9LHdyaXRlQnl0ZXNGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxOby5CeXRlcyksdGhpcy53cml0ZUJ5dGVzKGUpO30sd3JpdGVGaXhlZDMyRmllbGQ6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlVGFnKHQsTm8uRml4ZWQzMiksdGhpcy53cml0ZUZpeGVkMzIoZSk7fSx3cml0ZVNGaXhlZDMyRmllbGQ6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlVGFnKHQsTm8uRml4ZWQzMiksdGhpcy53cml0ZVNGaXhlZDMyKGUpO30sd3JpdGVGaXhlZDY0RmllbGQ6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlVGFnKHQsTm8uRml4ZWQ2NCksdGhpcy53cml0ZUZpeGVkNjQoZSk7fSx3cml0ZVNGaXhlZDY0RmllbGQ6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlVGFnKHQsTm8uRml4ZWQ2NCksdGhpcy53cml0ZVNGaXhlZDY0KGUpO30sd3JpdGVWYXJpbnRGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxOby5WYXJpbnQpLHRoaXMud3JpdGVWYXJpbnQoZSk7fSx3cml0ZVNWYXJpbnRGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxOby5WYXJpbnQpLHRoaXMud3JpdGVTVmFyaW50KGUpO30sd3JpdGVTdHJpbmdGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxOby5CeXRlcyksdGhpcy53cml0ZVN0cmluZyhlKTt9LHdyaXRlRmxvYXRGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxOby5GaXhlZDMyKSx0aGlzLndyaXRlRmxvYXQoZSk7fSx3cml0ZURvdWJsZUZpZWxkOmZ1bmN0aW9uKHQsZSl7dGhpcy53cml0ZVRhZyh0LE5vLkZpeGVkNjQpLHRoaXMud3JpdGVEb3VibGUoZSk7fSx3cml0ZUJvb2xlYW5GaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVWYXJpbnRGaWVsZCh0LEJvb2xlYW4oZSkpO319O3ZhciBhcz0zO2Z1bmN0aW9uIG9zKHQsZSxyKXsxPT09dCYmci5yZWFkTWVzc2FnZShzcyxlKTt9ZnVuY3Rpb24gc3ModCxlLHIpe2lmKDM9PT10KXt2YXIgbj1yLnJlYWRNZXNzYWdlKHVzLHt9KSxpPW4uaWQsYT1uLmJpdG1hcCxvPW4ud2lkdGgscz1uLmhlaWdodCx1PW4ubGVmdCxsPW4udG9wLHA9bi5hZHZhbmNlO2UucHVzaCh7aWQ6aSxiaXRtYXA6bmV3IFJpKHt3aWR0aDpvKzIqYXMsaGVpZ2h0OnMrMiphc30sYSksbWV0cmljczp7d2lkdGg6byxoZWlnaHQ6cyxsZWZ0OnUsdG9wOmwsYWR2YW5jZTpwfX0pO319ZnVuY3Rpb24gdXModCxlLHIpezE9PT10P2UuaWQ9ci5yZWFkVmFyaW50KCk6Mj09PXQ/ZS5iaXRtYXA9ci5yZWFkQnl0ZXMoKTozPT09dD9lLndpZHRoPXIucmVhZFZhcmludCgpOjQ9PT10P2UuaGVpZ2h0PXIucmVhZFZhcmludCgpOjU9PT10P2UubGVmdD1yLnJlYWRTVmFyaW50KCk6Nj09PXQ/ZS50b3A9ci5yZWFkU1ZhcmludCgpOjc9PT10JiYoZS5hZHZhbmNlPXIucmVhZFZhcmludCgpKTt9dmFyIGxzPWFzLHBzPWZ1bmN0aW9uKHQsZSxyKXt0aGlzLnRhcmdldD10LHRoaXMucGFyZW50PWUsdGhpcy5tYXBJZD1yLHRoaXMuY2FsbGJhY2tzPXt9LHRoaXMuY2FsbGJhY2tJRD0wLHcoW1wicmVjZWl2ZVwiXSx0aGlzKSx0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHRoaXMucmVjZWl2ZSwhMSk7fTtwcy5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0LGUscixuKXt2YXIgaT1yP3RoaXMubWFwSWQrXCI6XCIrdGhpcy5jYWxsYmFja0lEKys6bnVsbDtyJiYodGhpcy5jYWxsYmFja3NbaV09cik7dmFyIGE9W107dGhpcy50YXJnZXQucG9zdE1lc3NhZ2Uoe3RhcmdldE1hcElkOm4sc291cmNlTWFwSWQ6dGhpcy5tYXBJZCx0eXBlOnQsaWQ6U3RyaW5nKGkpLGRhdGE6enIoZSxhKX0sYSk7fSxwcy5wcm90b3R5cGUucmVjZWl2ZT1mdW5jdGlvbih0KXt2YXIgZSxyPXRoaXMsbj10LmRhdGEsaT1uLmlkO2lmKCFuLnRhcmdldE1hcElkfHx0aGlzLm1hcElkPT09bi50YXJnZXRNYXBJZCl7dmFyIGE9ZnVuY3Rpb24odCxlKXt2YXIgbj1bXTtyLnRhcmdldC5wb3N0TWVzc2FnZSh7c291cmNlTWFwSWQ6ci5tYXBJZCx0eXBlOlwiPHJlc3BvbnNlPlwiLGlkOlN0cmluZyhpKSxlcnJvcjp0P3pyKHQpOm51bGwsZGF0YTp6cihlLG4pfSxuKTt9O2lmKFwiPHJlc3BvbnNlPlwiPT09bi50eXBlKWU9dGhpcy5jYWxsYmFja3Nbbi5pZF0sZGVsZXRlIHRoaXMuY2FsbGJhY2tzW24uaWRdLGUmJm4uZXJyb3I/ZShTcihuLmVycm9yKSk6ZSYmZShudWxsLFNyKG4uZGF0YSkpO2Vsc2UgaWYodm9pZCAwIT09bi5pZCYmdGhpcy5wYXJlbnRbbi50eXBlXSl0aGlzLnBhcmVudFtuLnR5cGVdKG4uc291cmNlTWFwSWQsU3Iobi5kYXRhKSxhKTtlbHNlIGlmKHZvaWQgMCE9PW4uaWQmJnRoaXMucGFyZW50LmdldFdvcmtlclNvdXJjZSl7dmFyIG89bi50eXBlLnNwbGl0KFwiLlwiKSxzPVNyKG4uZGF0YSk7dGhpcy5wYXJlbnQuZ2V0V29ya2VyU291cmNlKG4uc291cmNlTWFwSWQsb1swXSxzLnNvdXJjZSlbb1sxXV0ocyxhKTt9ZWxzZSB0aGlzLnBhcmVudFtuLnR5cGVdKFNyKG4uZGF0YSkpO319LHBzLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHRoaXMucmVjZWl2ZSwhMSk7fTt2YXIgaHM9bihmdW5jdGlvbih0LGUpeyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSxuKXtlPU1hdGgucG93KDIsbiktZS0xO3ZhciBpPXIoMjU2KnQsMjU2KmUsbiksYT1yKDI1NioodCsxKSwyNTYqKGUrMSksbik7cmV0dXJuIGlbMF0rXCIsXCIraVsxXStcIixcIithWzBdK1wiLFwiK2FbMV19ZnVuY3Rpb24gcih0LGUscil7dmFyIG49MipNYXRoLlBJKjYzNzgxMzcvMjU2L01hdGgucG93KDIsciksaT10Km4tMipNYXRoLlBJKjYzNzgxMzcvMixhPWUqbi0yKk1hdGguUEkqNjM3ODEzNy8yO3JldHVybltpLGFdfXQuZ2V0VVJMPWZ1bmN0aW9uKHQscixuLGksYSxvKXtyZXR1cm4gbz1vfHx7fSx0K1wiP1wiK1tcImJib3g9XCIrZShuLGksYSksXCJmb3JtYXQ9XCIrKG8uZm9ybWF0fHxcImltYWdlL3BuZ1wiKSxcInNlcnZpY2U9XCIrKG8uc2VydmljZXx8XCJXTVNcIiksXCJ2ZXJzaW9uPVwiKyhvLnZlcnNpb258fFwiMS4xLjFcIiksXCJyZXF1ZXN0PVwiKyhvLnJlcXVlc3R8fFwiR2V0TWFwXCIpLFwic3JzPVwiKyhvLnNyc3x8XCJFUFNHOjM4NTdcIiksXCJ3aWR0aD1cIisoby53aWR0aHx8MjU2KSxcImhlaWdodD1cIisoby5oZWlnaHR8fDI1NiksXCJsYXllcnM9XCIrcl0uam9pbihcIiZcIil9LHQuZ2V0VGlsZUJCb3g9ZSx0LmdldE1lcmNDb29yZHM9cixPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt9KGUpO30pO3IoaHMpO3ZhciBjcz1ocy5nZXRUaWxlQkJveCxmcz1mdW5jdGlvbih0LGUscil7dGhpcy56PXQsdGhpcy54PWUsdGhpcy55PXIsdGhpcy5rZXk9bXMoMCx0LGUscik7fTtmcy5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLno9PT10LnomJnRoaXMueD09PXQueCYmdGhpcy55PT09dC55fSxmcy5wcm90b3R5cGUudXJsPWZ1bmN0aW9uKHQsZSl7dmFyIHI9Y3ModGhpcy54LHRoaXMueSx0aGlzLnopLG49ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbixpPVwiXCIsYT10O2E+MDthLS0paSs9KGUmKG49MTw8YS0xKT8xOjApKyhyJm4/MjowKTtyZXR1cm4gaX0odGhpcy56LHRoaXMueCx0aGlzLnkpO3JldHVybiB0Wyh0aGlzLngrdGhpcy55KSV0Lmxlbmd0aF0ucmVwbGFjZShcIntwcmVmaXh9XCIsKHRoaXMueCUxNikudG9TdHJpbmcoMTYpKyh0aGlzLnklMTYpLnRvU3RyaW5nKDE2KSkucmVwbGFjZShcInt6fVwiLFN0cmluZyh0aGlzLnopKS5yZXBsYWNlKFwie3h9XCIsU3RyaW5nKHRoaXMueCkpLnJlcGxhY2UoXCJ7eX1cIixTdHJpbmcoXCJ0bXNcIj09PWU/TWF0aC5wb3coMix0aGlzLnopLXRoaXMueS0xOnRoaXMueSkpLnJlcGxhY2UoXCJ7cXVhZGtleX1cIixuKS5yZXBsYWNlKFwie2Jib3gtZXBzZy0zODU3fVwiLHIpfTt2YXIgeXM9ZnVuY3Rpb24odCxlKXt0aGlzLndyYXA9dCx0aGlzLmNhbm9uaWNhbD1lLHRoaXMua2V5PW1zKHQsZS56LGUueCxlLnkpO30sZHM9ZnVuY3Rpb24odCxlLHIsbixpKXt0aGlzLm92ZXJzY2FsZWRaPXQsdGhpcy53cmFwPWUsdGhpcy5jYW5vbmljYWw9bmV3IGZzKHIsK24sK2kpLHRoaXMua2V5PW1zKGUsdCxuLGkpO307ZnVuY3Rpb24gbXModCxlLHIsbil7KHQqPTIpPDAmJih0PS0xKnQtMSk7dmFyIGk9MTw8ZTtyZXR1cm4gMzIqKGkqaSp0K2kqbityKStlfWRzLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3ZlcnNjYWxlZFo9PT10Lm92ZXJzY2FsZWRaJiZ0aGlzLndyYXA9PT10LndyYXAmJnRoaXMuY2Fub25pY2FsLmVxdWFscyh0LmNhbm9uaWNhbCl9LGRzLnByb3RvdHlwZS5zY2FsZWRUbz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNhbm9uaWNhbC56LXQ7cmV0dXJuIHQ+dGhpcy5jYW5vbmljYWwuej9uZXcgZHModCx0aGlzLndyYXAsdGhpcy5jYW5vbmljYWwueix0aGlzLmNhbm9uaWNhbC54LHRoaXMuY2Fub25pY2FsLnkpOm5ldyBkcyh0LHRoaXMud3JhcCx0LHRoaXMuY2Fub25pY2FsLng+PmUsdGhpcy5jYW5vbmljYWwueT4+ZSl9LGRzLnByb3RvdHlwZS5pc0NoaWxkT2Y9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jYW5vbmljYWwuei10LmNhbm9uaWNhbC56O3JldHVybiAwPT09dC5vdmVyc2NhbGVkWnx8dC5vdmVyc2NhbGVkWjx0aGlzLm92ZXJzY2FsZWRaJiZ0LmNhbm9uaWNhbC54PT09dGhpcy5jYW5vbmljYWwueD4+ZSYmdC5jYW5vbmljYWwueT09PXRoaXMuY2Fub25pY2FsLnk+PmV9LGRzLnByb3RvdHlwZS5jaGlsZHJlbj1mdW5jdGlvbih0KXtpZih0aGlzLm92ZXJzY2FsZWRaPj10KXJldHVybltuZXcgZHModGhpcy5vdmVyc2NhbGVkWisxLHRoaXMud3JhcCx0aGlzLmNhbm9uaWNhbC56LHRoaXMuY2Fub25pY2FsLngsdGhpcy5jYW5vbmljYWwueSldO3ZhciBlPXRoaXMuY2Fub25pY2FsLnorMSxyPTIqdGhpcy5jYW5vbmljYWwueCxuPTIqdGhpcy5jYW5vbmljYWwueTtyZXR1cm5bbmV3IGRzKGUsdGhpcy53cmFwLGUscixuKSxuZXcgZHMoZSx0aGlzLndyYXAsZSxyKzEsbiksbmV3IGRzKGUsdGhpcy53cmFwLGUscixuKzEpLG5ldyBkcyhlLHRoaXMud3JhcCxlLHIrMSxuKzEpXX0sZHMucHJvdG90eXBlLmlzTGVzc1RoYW49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMud3JhcDx0LndyYXB8fCEodGhpcy53cmFwPnQud3JhcCkmJih0aGlzLm92ZXJzY2FsZWRaPHQub3ZlcnNjYWxlZFp8fCEodGhpcy5vdmVyc2NhbGVkWj50Lm92ZXJzY2FsZWRaKSYmKHRoaXMuY2Fub25pY2FsLng8dC5jYW5vbmljYWwueHx8ISh0aGlzLmNhbm9uaWNhbC54PnQuY2Fub25pY2FsLngpJiZ0aGlzLmNhbm9uaWNhbC55PHQuY2Fub25pY2FsLnkpKX0sZHMucHJvdG90eXBlLndyYXBwZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGRzKHRoaXMub3ZlcnNjYWxlZFosMCx0aGlzLmNhbm9uaWNhbC56LHRoaXMuY2Fub25pY2FsLngsdGhpcy5jYW5vbmljYWwueSl9LGRzLnByb3RvdHlwZS51bndyYXBUbz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGRzKHRoaXMub3ZlcnNjYWxlZFosdCx0aGlzLmNhbm9uaWNhbC56LHRoaXMuY2Fub25pY2FsLngsdGhpcy5jYW5vbmljYWwueSl9LGRzLnByb3RvdHlwZS5vdmVyc2NhbGVGYWN0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5wb3coMix0aGlzLm92ZXJzY2FsZWRaLXRoaXMuY2Fub25pY2FsLnopfSxkcy5wcm90b3R5cGUudG9VbndyYXBwZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHlzKHRoaXMud3JhcCx0aGlzLmNhbm9uaWNhbCl9LGRzLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm92ZXJzY2FsZWRaK1wiL1wiK3RoaXMuY2Fub25pY2FsLngrXCIvXCIrdGhpcy5jYW5vbmljYWwueX0sZHMucHJvdG90eXBlLnRvQ29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiBuZXcgaCh0aGlzLmNhbm9uaWNhbC54K01hdGgucG93KDIsdGhpcy53cmFwKSx0aGlzLmNhbm9uaWNhbC55LHRoaXMuY2Fub25pY2FsLnopfSxBcihcIkNhbm9uaWNhbFRpbGVJRFwiLGZzKSxBcihcIk92ZXJzY2FsZWRUaWxlSURcIixkcyx7b21pdDpbXCJwb3NNYXRyaXhcIl19KTt2YXIgdnM9ZnVuY3Rpb24odCxlLHIpe2lmKHQ8PTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJMZXZlbCBtdXN0IGhhdmUgcG9zaXRpdmUgZGltZW5zaW9uXCIpO3RoaXMuZGltPXQsdGhpcy5ib3JkZXI9ZSx0aGlzLnN0cmlkZT10aGlzLmRpbSsyKnRoaXMuYm9yZGVyLHRoaXMuZGF0YT1yfHxuZXcgSW50MzJBcnJheSgodGhpcy5kaW0rMip0aGlzLmJvcmRlcikqKHRoaXMuZGltKzIqdGhpcy5ib3JkZXIpKTt9O3ZzLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlLHIpe3RoaXMuZGF0YVt0aGlzLl9pZHgodCxlKV09cis2NTUzNjt9LHZzLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kYXRhW3RoaXMuX2lkeCh0LGUpXS02NTUzNn0sdnMucHJvdG90eXBlLl9pZHg9ZnVuY3Rpb24odCxlKXtpZih0PC10aGlzLmJvcmRlcnx8dD49dGhpcy5kaW0rdGhpcy5ib3JkZXJ8fGU8LXRoaXMuYm9yZGVyfHxlPj10aGlzLmRpbSt0aGlzLmJvcmRlcil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm91dCBvZiByYW5nZSBzb3VyY2UgY29vcmRpbmF0ZXMgZm9yIERFTSBkYXRhXCIpO3JldHVybihlK3RoaXMuYm9yZGVyKSp0aGlzLnN0cmlkZSsodCt0aGlzLmJvcmRlcil9LEFyKFwiTGV2ZWxcIix2cyk7dmFyIGdzPWZ1bmN0aW9uKHQsZSxyKXt0aGlzLnVpZD10LHRoaXMuc2NhbGU9ZXx8MSx0aGlzLmxldmVsPXJ8fG5ldyB2cygyNTYsNTEyKSx0aGlzLmxvYWRlZD0hIXI7fTtncy5wcm90b3R5cGUubG9hZEZyb21JbWFnZT1mdW5jdGlvbih0LGUpe2lmKHQuaGVpZ2h0IT09dC53aWR0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkRFTSB0aWxlcyBtdXN0IGJlIHNxdWFyZVwiKTtpZihlJiZcIm1hcGJveFwiIT09ZSYmXCJ0ZXJyYXJpdW1cIiE9PWUpcmV0dXJuIE0oJ1wiJytlKydcIiBpcyBub3QgYSB2YWxpZCBlbmNvZGluZyB0eXBlLiBWYWxpZCB0eXBlcyBpbmNsdWRlIFwibWFwYm94XCIgYW5kIFwidGVycmFyaXVtXCIuJyk7dmFyIHI9dGhpcy5sZXZlbD1uZXcgdnModC53aWR0aCx0LndpZHRoLzIpLG49dC5kYXRhO3RoaXMuX3VucGFja0RhdGEocixuLGV8fFwibWFwYm94XCIpO2Zvcih2YXIgaT0wO2k8ci5kaW07aSsrKXIuc2V0KC0xLGksci5nZXQoMCxpKSksci5zZXQoci5kaW0saSxyLmdldChyLmRpbS0xLGkpKSxyLnNldChpLC0xLHIuZ2V0KGksMCkpLHIuc2V0KGksci5kaW0sci5nZXQoaSxyLmRpbS0xKSk7ci5zZXQoLTEsLTEsci5nZXQoMCwwKSksci5zZXQoci5kaW0sLTEsci5nZXQoci5kaW0tMSwwKSksci5zZXQoLTEsci5kaW0sci5nZXQoMCxyLmRpbS0xKSksci5zZXQoci5kaW0sci5kaW0sci5nZXQoci5kaW0tMSxyLmRpbS0xKSksdGhpcy5sb2FkZWQ9ITA7fSxncy5wcm90b3R5cGUuX3VucGFja01hcGJveD1mdW5jdGlvbih0LGUscil7cmV0dXJuKDI1Nip0KjI1NisyNTYqZStyKS8xMC0xZTR9LGdzLnByb3RvdHlwZS5fdW5wYWNrVGVycmFyaXVtPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gMjU2KnQrZStyLzI1Ni0zMjc2OH0sZ3MucHJvdG90eXBlLl91bnBhY2tEYXRhPWZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG49e21hcGJveDp0aGlzLl91bnBhY2tNYXBib3gsdGVycmFyaXVtOnRoaXMuX3VucGFja1RlcnJhcml1bX1bcl0saT0wO2k8dC5kaW07aSsrKWZvcih2YXIgYT0wO2E8dC5kaW07YSsrKXt2YXIgbz00KihpKnQuZGltK2EpO3Quc2V0KGEsaSx0aGlzLnNjYWxlKm4oZVtvXSxlW28rMV0sZVtvKzJdKSk7fX0sZ3MucHJvdG90eXBlLmdldFBpeGVscz1mdW5jdGlvbigpe3JldHVybiBuZXcgVWkoe3dpZHRoOnRoaXMubGV2ZWwuZGltKzIqdGhpcy5sZXZlbC5ib3JkZXIsaGVpZ2h0OnRoaXMubGV2ZWwuZGltKzIqdGhpcy5sZXZlbC5ib3JkZXJ9LG5ldyBVaW50OEFycmF5KHRoaXMubGV2ZWwuZGF0YS5idWZmZXIpKX0sZ3MucHJvdG90eXBlLmJhY2tmaWxsQm9yZGVyPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj10aGlzLmxldmVsLGk9dC5sZXZlbDtpZihuLmRpbSE9PWkuZGltKXRocm93IG5ldyBFcnJvcihcImxldmVsIG1pc21hdGNoIChkZW0gZGltZW5zaW9uKVwiKTt2YXIgYT1lKm4uZGltLG89ZSpuLmRpbStuLmRpbSxzPXIqbi5kaW0sdT1yKm4uZGltK24uZGltO3N3aXRjaChlKXtjYXNlLTE6YT1vLTE7YnJlYWs7Y2FzZSAxOm89YSsxO31zd2l0Y2gocil7Y2FzZS0xOnM9dS0xO2JyZWFrO2Nhc2UgMTp1PXMrMTt9Zm9yKHZhciBsPXYoYSwtbi5ib3JkZXIsbi5kaW0rbi5ib3JkZXIpLHA9dihvLC1uLmJvcmRlcixuLmRpbStuLmJvcmRlciksaD12KHMsLW4uYm9yZGVyLG4uZGltK24uYm9yZGVyKSxjPXYodSwtbi5ib3JkZXIsbi5kaW0rbi5ib3JkZXIpLGY9LWUqbi5kaW0seT0tcipuLmRpbSxkPWg7ZDxjO2QrKylmb3IodmFyIG09bDttPHA7bSsrKW4uc2V0KG0sZCxpLmdldChtK2YsZCt5KSk7fSxBcihcIkRFTURhdGFcIixncyk7dmFyIHhzPWFuKFt7bmFtZTpcImFfcG9zXCIsdHlwZTpcIkludDE2XCIsY29tcG9uZW50czoyfSx7bmFtZTpcImFfdGV4dHVyZV9wb3NcIix0eXBlOlwiSW50MTZcIixjb21wb25lbnRzOjJ9XSk7dmFyIGJzPWZ1bmN0aW9uKHQpe3RoaXMuX3N0cmluZ1RvTnVtYmVyPXt9LHRoaXMuX251bWJlclRvU3RyaW5nPVtdO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXt2YXIgcj10W2VdO3RoaXMuX3N0cmluZ1RvTnVtYmVyW3JdPWUsdGhpcy5fbnVtYmVyVG9TdHJpbmdbZV09cjt9fTticy5wcm90b3R5cGUuZW5jb2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zdHJpbmdUb051bWJlclt0XX0sYnMucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbnVtYmVyVG9TdHJpbmdbdF19O3ZhciB3cz1mdW5jdGlvbih0LGUscixuKXt0aGlzLnR5cGU9XCJGZWF0dXJlXCIsdGhpcy5fdmVjdG9yVGlsZUZlYXR1cmU9dCx0Ll96PWUsdC5feD1yLHQuX3k9bix0aGlzLnByb3BlcnRpZXM9dC5wcm9wZXJ0aWVzLG51bGwhPXQuaWQmJih0aGlzLmlkPXQuaWQpO30sX3M9e2dlb21ldHJ5Ontjb25maWd1cmFibGU6ITB9fTtfcy5nZW9tZXRyeS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fZ2VvbWV0cnkmJih0aGlzLl9nZW9tZXRyeT10aGlzLl92ZWN0b3JUaWxlRmVhdHVyZS50b0dlb0pTT04odGhpcy5fdmVjdG9yVGlsZUZlYXR1cmUuX3gsdGhpcy5fdmVjdG9yVGlsZUZlYXR1cmUuX3ksdGhpcy5fdmVjdG9yVGlsZUZlYXR1cmUuX3opLmdlb21ldHJ5KSx0aGlzLl9nZW9tZXRyeX0sX3MuZ2VvbWV0cnkuc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX2dlb21ldHJ5PXQ7fSx3cy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e2dlb21ldHJ5OnRoaXMuZ2VvbWV0cnl9O2Zvcih2YXIgZSBpbiB0aGlzKVwiX2dlb21ldHJ5XCIhPT1lJiZcIl92ZWN0b3JUaWxlRmVhdHVyZVwiIT09ZSYmKHRbZV09dGhpc1tlXSk7cmV0dXJuIHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHdzLnByb3RvdHlwZSxfcyk7dmFyIEFzPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT17fSx0aGlzLnN0YXRlQ2hhbmdlcz17fTt9O0FzLnByb3RvdHlwZS51cGRhdGVTdGF0ZT1mdW5jdGlvbih0LGUscil7ZT1TdHJpbmcoZSksdGhpcy5zdGF0ZUNoYW5nZXNbdF09dGhpcy5zdGF0ZUNoYW5nZXNbdF18fHt9LHRoaXMuc3RhdGVDaGFuZ2VzW3RdW2VdPXRoaXMuc3RhdGVDaGFuZ2VzW3RdW2VdfHx7fSxnKHRoaXMuc3RhdGVDaGFuZ2VzW3RdW2VdLHIpO30sQXMucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKHQsZSl7ZT1TdHJpbmcoZSk7dmFyIHI9dGhpcy5zdGF0ZVt0XXx8e30sbj10aGlzLnN0YXRlQ2hhbmdlc1t0XXx8e307cmV0dXJuIGcoe30scltlXSxuW2VdKX0sQXMucHJvdG90eXBlLmluaXRpYWxpemVUaWxlU3RhdGU9ZnVuY3Rpb24odCxlKXt0LnNldEZlYXR1cmVTdGF0ZSh0aGlzLnN0YXRlLGUpO30sQXMucHJvdG90eXBlLmNvYWxlc2NlQ2hhbmdlcz1mdW5jdGlvbih0LGUpe3ZhciByPXt9O2Zvcih2YXIgbiBpbiB0aGlzLnN0YXRlQ2hhbmdlcyl7dGhpcy5zdGF0ZVtuXT10aGlzLnN0YXRlW25dfHx7fTt2YXIgaT17fTtmb3IodmFyIGEgaW4gdGhpcy5zdGF0ZUNoYW5nZXNbbl0pdGhpcy5zdGF0ZVtuXVthXXx8KHRoaXMuc3RhdGVbbl1bYV09e30pLGcodGhpcy5zdGF0ZVtuXVthXSx0aGlzLnN0YXRlQ2hhbmdlc1tuXVthXSksaVthXT10aGlzLnN0YXRlW25dW2FdO3Jbbl09aTt9aWYodGhpcy5zdGF0ZUNoYW5nZXM9e30sMCE9PU9iamVjdC5rZXlzKHIpLmxlbmd0aClmb3IodmFyIG8gaW4gdCl7dFtvXS5zZXRGZWF0dXJlU3RhdGUocixlKTt9fTt2YXIga3M9ZnVuY3Rpb24odCxlLHIpe3RoaXMudGlsZUlEPXQsdGhpcy54PXQuY2Fub25pY2FsLngsdGhpcy55PXQuY2Fub25pY2FsLnksdGhpcy56PXQuY2Fub25pY2FsLnosdGhpcy5ncmlkPWV8fG5ldyBncihYbiwxNiwwKSx0aGlzLmZlYXR1cmVJbmRleEFycmF5PXJ8fG5ldyBQbjt9O2Z1bmN0aW9uIHpzKHQsZSl7cmV0dXJuIGUtdH1rcy5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHQsZSxyLG4saSl7dmFyIGE9dGhpcy5mZWF0dXJlSW5kZXhBcnJheS5sZW5ndGg7dGhpcy5mZWF0dXJlSW5kZXhBcnJheS5lbXBsYWNlQmFjayhyLG4saSk7Zm9yKHZhciBvPTA7bzxlLmxlbmd0aDtvKyspe2Zvcih2YXIgcz1lW29dLHU9WzEvMCwxLzAsLTEvMCwtMS8wXSxsPTA7bDxzLmxlbmd0aDtsKyspe3ZhciBwPXNbbF07dVswXT1NYXRoLm1pbih1WzBdLHAueCksdVsxXT1NYXRoLm1pbih1WzFdLHAueSksdVsyXT1NYXRoLm1heCh1WzJdLHAueCksdVszXT1NYXRoLm1heCh1WzNdLHAueSk7fXVbMF08WG4mJnVbMV08WG4mJnVbMl0+PTAmJnVbM10+PTAmJnRoaXMuZ3JpZC5pbnNlcnQoYSx1WzBdLHVbMV0sdVsyXSx1WzNdKTt9fSxrcy5wcm90b3R5cGUubG9hZFZUTGF5ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudnRMYXllcnN8fCh0aGlzLnZ0TGF5ZXJzPW5ldyBKYS5WZWN0b3JUaWxlKG5ldyBVbyh0aGlzLnJhd1RpbGVEYXRhKSkubGF5ZXJzLHRoaXMuc291cmNlTGF5ZXJDb2Rlcj1uZXcgYnModGhpcy52dExheWVycz9PYmplY3Qua2V5cyh0aGlzLnZ0TGF5ZXJzKS5zb3J0KCk6W1wiX2dlb2pzb25UaWxlTGF5ZXJcIl0pKSx0aGlzLnZ0TGF5ZXJzfSxrcy5wcm90b3R5cGUucXVlcnk9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXRoaXM7dGhpcy5sb2FkVlRMYXllcnMoKTtmb3IodmFyIGk9dC5wYXJhbXN8fHt9LGE9WG4vdC50aWxlU2l6ZS90LnNjYWxlLG89JGUoaS5maWx0ZXIpLHM9dC5xdWVyeUdlb21ldHJ5LHU9dC5xdWVyeVBhZGRpbmcqYSxsPTEvMCxwPTEvMCxoPS0xLzAsYz0tMS8wLGY9MDtmPHMubGVuZ3RoO2YrKylmb3IodmFyIHk9c1tmXSxkPTA7ZDx5Lmxlbmd0aDtkKyspe3ZhciBtPXlbZF07bD1NYXRoLm1pbihsLG0ueCkscD1NYXRoLm1pbihwLG0ueSksaD1NYXRoLm1heChoLG0ueCksYz1NYXRoLm1heChjLG0ueSk7fXZhciB2PXRoaXMuZ3JpZC5xdWVyeShsLXUscC11LGgrdSxjK3UpO3Yuc29ydCh6cyk7Zm9yKHZhciBnLHg9e30sYj1mdW5jdGlvbih1KXt2YXIgbD12W3VdO2lmKGwhPT1nKXtnPWw7dmFyIHA9bi5mZWF0dXJlSW5kZXhBcnJheS5nZXQobCksaD1udWxsO24ubG9hZE1hdGNoaW5nRmVhdHVyZSh4LHAuYnVja2V0SW5kZXgscC5zb3VyY2VMYXllckluZGV4LHAuZmVhdHVyZUluZGV4LG8saS5sYXllcnMsZSxmdW5jdGlvbihlLGkpe2h8fChoPUduKGUpKTt2YXIgbz17fTtyZXR1cm4gZS5pZCYmKG89ci5nZXRTdGF0ZShpLnNvdXJjZUxheWVyfHxcIl9nZW9qc29uVGlsZUxheWVyXCIsU3RyaW5nKGUuaWQpKSksaS5xdWVyeUludGVyc2VjdHNGZWF0dXJlKHMsZSxvLGgsbi56LHQudHJhbnNmb3JtLGEsdC5wb3NNYXRyaXgpfSk7fX0sdz0wO3c8di5sZW5ndGg7dysrKWIodyk7cmV0dXJuIHh9LGtzLnByb3RvdHlwZS5sb2FkTWF0Y2hpbmdGZWF0dXJlPWZ1bmN0aW9uKHQsZSxyLG4saSxhLG8scyl7dmFyIHU9dGhpcy5idWNrZXRMYXllcklEc1tlXTtpZighYXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZihlLmluZGV4T2YodFtyXSk+PTApcmV0dXJuITA7cmV0dXJuITF9KGEsdSkpe3ZhciBsPXRoaXMuc291cmNlTGF5ZXJDb2Rlci5kZWNvZGUocikscD10aGlzLnZ0TGF5ZXJzW2xdLmZlYXR1cmUobik7aWYoaShuZXcganIodGhpcy50aWxlSUQub3ZlcnNjYWxlZFopLHApKWZvcih2YXIgaD0wO2g8dS5sZW5ndGg7aCsrKXt2YXIgYz11W2hdO2lmKCEoYSYmYS5pbmRleE9mKGMpPDApKXt2YXIgZj1vW2NdO2lmKGYmJighc3x8cyhwLGYpKSl7dmFyIHk9bmV3IHdzKHAsdGhpcy56LHRoaXMueCx0aGlzLnkpO3kubGF5ZXI9Zi5zZXJpYWxpemUoKTt2YXIgZD10W2NdO3ZvaWQgMD09PWQmJihkPXRbY109W10pLGQucHVzaCh7ZmVhdHVyZUluZGV4Om4sZmVhdHVyZTp5fSk7fX19fX0sa3MucHJvdG90eXBlLmxvb2t1cFN5bWJvbEZlYXR1cmVzPWZ1bmN0aW9uKHQsZSxyLG4saSxhKXt2YXIgbz17fTt0aGlzLmxvYWRWVExheWVycygpO2Zvcih2YXIgcz0kZShuKSx1PTAsbD10O3U8bC5sZW5ndGg7dSs9MSl7dmFyIHA9bFt1XTt0aGlzLmxvYWRNYXRjaGluZ0ZlYXR1cmUobyxlLHIscCxzLGksYSk7fXJldHVybiBvfSxrcy5wcm90b3R5cGUuaGFzTGF5ZXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj10aGlzLmJ1Y2tldExheWVySURzO2U8ci5sZW5ndGg7ZSs9MSlmb3IodmFyIG49MCxpPXJbZV07bjxpLmxlbmd0aDtuKz0xKXtpZih0PT09aVtuXSlyZXR1cm4hMH1yZXR1cm4hMX0sQXIoXCJGZWF0dXJlSW5kZXhcIixrcyx7b21pdDpbXCJyYXdUaWxlRGF0YVwiLFwic291cmNlTGF5ZXJDb2RlclwiXX0pO3ZhciBTcz1mdW5jdGlvbih0LGUpe3RoaXMudGlsZUlEPXQsdGhpcy51aWQ9YigpLHRoaXMudXNlcz0wLHRoaXMudGlsZVNpemU9ZSx0aGlzLmJ1Y2tldHM9e30sdGhpcy5leHBpcmF0aW9uVGltZT1udWxsLHRoaXMucXVlcnlQYWRkaW5nPTAsdGhpcy5leHBpcmVkUmVxdWVzdENvdW50PTAsdGhpcy5zdGF0ZT1cImxvYWRpbmdcIjt9O1NzLnByb3RvdHlwZS5yZWdpc3RlckZhZGVEdXJhdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10K3RoaXMudGltZUFkZGVkO2U8cy5ub3coKXx8dGhpcy5mYWRlRW5kVGltZSYmZTx0aGlzLmZhZGVFbmRUaW1lfHwodGhpcy5mYWRlRW5kVGltZT1lKTt9LFNzLnByb3RvdHlwZS53YXNSZXF1ZXN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm5cImVycm9yZWRcIj09PXRoaXMuc3RhdGV8fFwibG9hZGVkXCI9PT10aGlzLnN0YXRlfHxcInJlbG9hZGluZ1wiPT09dGhpcy5zdGF0ZX0sU3MucHJvdG90eXBlLmxvYWRWZWN0b3JEYXRhPWZ1bmN0aW9uKHQsZSxyKXtpZih0aGlzLmhhc0RhdGEoKSYmdGhpcy51bmxvYWRWZWN0b3JEYXRhKCksdGhpcy5zdGF0ZT1cImxvYWRlZFwiLHQpe2lmKHQuZmVhdHVyZUluZGV4JiYodGhpcy5sYXRlc3RGZWF0dXJlSW5kZXg9dC5mZWF0dXJlSW5kZXgsdC5yYXdUaWxlRGF0YT8odGhpcy5sYXRlc3RSYXdUaWxlRGF0YT10LnJhd1RpbGVEYXRhLHRoaXMubGF0ZXN0RmVhdHVyZUluZGV4LnJhd1RpbGVEYXRhPXQucmF3VGlsZURhdGEpOnRoaXMubGF0ZXN0UmF3VGlsZURhdGEmJih0aGlzLmxhdGVzdEZlYXR1cmVJbmRleC5yYXdUaWxlRGF0YT10aGlzLmxhdGVzdFJhd1RpbGVEYXRhKSksdGhpcy5jb2xsaXNpb25Cb3hBcnJheT10LmNvbGxpc2lvbkJveEFycmF5LHRoaXMuYnVja2V0cz1mdW5jdGlvbih0LGUpe3ZhciByPXt9O2lmKCFlKXJldHVybiByO2Zvcih2YXIgbj0wLGk9dDtuPGkubGVuZ3RoO24rPTEpe3ZhciBhPWlbbl0sbz1hLmxheWVySWRzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZS5nZXRMYXllcih0KX0pLmZpbHRlcihCb29sZWFuKTtpZigwIT09by5sZW5ndGgpe2EubGF5ZXJzPW8sYS5zdGF0ZURlcGVuZGVudExheWVycz1vLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5pc1N0YXRlRGVwZW5kZW50KCl9KTtmb3IodmFyIHM9MCx1PW87czx1Lmxlbmd0aDtzKz0xKXJbdVtzXS5pZF09YTt9fXJldHVybiByfSh0LmJ1Y2tldHMsZS5zdHlsZSkscilmb3IodmFyIG4gaW4gdGhpcy5idWNrZXRzKXt2YXIgaT10aGlzLmJ1Y2tldHNbbl07aSBpbnN0YW5jZW9mIEFvJiYoaS5qdXN0UmVsb2FkZWQ9ITApO31mb3IodmFyIGEgaW4gdGhpcy5xdWVyeVBhZGRpbmc9MCx0aGlzLmJ1Y2tldHMpe3ZhciBvPXRoaXMuYnVja2V0c1thXTt0aGlzLnF1ZXJ5UGFkZGluZz1NYXRoLm1heCh0aGlzLnF1ZXJ5UGFkZGluZyxlLnN0eWxlLmdldExheWVyKG8ubGF5ZXJJZHNbMF0pLnF1ZXJ5UmFkaXVzKG8pKTt9dC5pY29uQXRsYXNJbWFnZSYmKHRoaXMuaWNvbkF0bGFzSW1hZ2U9dC5pY29uQXRsYXNJbWFnZSksdC5nbHlwaEF0bGFzSW1hZ2UmJih0aGlzLmdseXBoQXRsYXNJbWFnZT10LmdseXBoQXRsYXNJbWFnZSk7fWVsc2UgdGhpcy5jb2xsaXNpb25Cb3hBcnJheT1uZXcgU247fSxTcy5wcm90b3R5cGUudW5sb2FkVmVjdG9yRGF0YT1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLmJ1Y2tldHMpdGhpcy5idWNrZXRzW3RdLmRlc3Ryb3koKTt0aGlzLmJ1Y2tldHM9e30sdGhpcy5pY29uQXRsYXNUZXh0dXJlJiZ0aGlzLmljb25BdGxhc1RleHR1cmUuZGVzdHJveSgpLHRoaXMuZ2x5cGhBdGxhc1RleHR1cmUmJnRoaXMuZ2x5cGhBdGxhc1RleHR1cmUuZGVzdHJveSgpLHRoaXMubGF0ZXN0RmVhdHVyZUluZGV4PW51bGwsdGhpcy5zdGF0ZT1cInVubG9hZGVkXCI7fSxTcy5wcm90b3R5cGUudW5sb2FkREVNRGF0YT1mdW5jdGlvbigpe3RoaXMuZGVtPW51bGwsdGhpcy5uZWlnaGJvcmluZ1RpbGVzPW51bGwsdGhpcy5zdGF0ZT1cInVubG9hZGVkXCI7fSxTcy5wcm90b3R5cGUuZ2V0QnVja2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmJ1Y2tldHNbdC5pZF19LFNzLnByb3RvdHlwZS51cGxvYWQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuYnVja2V0cyl7dmFyIHI9dGhpcy5idWNrZXRzW2VdO3IudXBsb2FkUGVuZGluZygpJiZyLnVwbG9hZCh0KTt9dmFyIG49dC5nbDt0aGlzLmljb25BdGxhc0ltYWdlJiYodGhpcy5pY29uQXRsYXNUZXh0dXJlPW5ldyBxbyh0LHRoaXMuaWNvbkF0bGFzSW1hZ2Usbi5SR0JBKSx0aGlzLmljb25BdGxhc0ltYWdlPW51bGwpLHRoaXMuZ2x5cGhBdGxhc0ltYWdlJiYodGhpcy5nbHlwaEF0bGFzVGV4dHVyZT1uZXcgcW8odCx0aGlzLmdseXBoQXRsYXNJbWFnZSxuLkFMUEhBKSx0aGlzLmdseXBoQXRsYXNJbWFnZT1udWxsKTt9LFNzLnByb3RvdHlwZS5xdWVyeVJlbmRlcmVkRmVhdHVyZXM9ZnVuY3Rpb24odCxlLHIsbixpLGEsbyxzKXtyZXR1cm4gdGhpcy5sYXRlc3RGZWF0dXJlSW5kZXgmJnRoaXMubGF0ZXN0RmVhdHVyZUluZGV4LnJhd1RpbGVEYXRhP3RoaXMubGF0ZXN0RmVhdHVyZUluZGV4LnF1ZXJ5KHtxdWVyeUdlb21ldHJ5OnIsc2NhbGU6bix0aWxlU2l6ZTp0aGlzLnRpbGVTaXplLHBvc01hdHJpeDpzLHRyYW5zZm9ybTphLHBhcmFtczppLHF1ZXJ5UGFkZGluZzp0aGlzLnF1ZXJ5UGFkZGluZypvfSx0LGUpOnt9fSxTcy5wcm90b3R5cGUucXVlcnlTb3VyY2VGZWF0dXJlcz1mdW5jdGlvbih0LGUpe2lmKHRoaXMubGF0ZXN0RmVhdHVyZUluZGV4JiZ0aGlzLmxhdGVzdEZlYXR1cmVJbmRleC5yYXdUaWxlRGF0YSl7dmFyIHI9dGhpcy5sYXRlc3RGZWF0dXJlSW5kZXgubG9hZFZUTGF5ZXJzKCksbj1lP2Uuc291cmNlTGF5ZXI6XCJcIixpPXIuX2dlb2pzb25UaWxlTGF5ZXJ8fHJbbl07aWYoaSlmb3IodmFyIGE9JGUoZSYmZS5maWx0ZXIpLG89e3o6dGhpcy50aWxlSUQub3ZlcnNjYWxlZFoseDp0aGlzLnRpbGVJRC5jYW5vbmljYWwueCx5OnRoaXMudGlsZUlELmNhbm9uaWNhbC55fSxzPTA7czxpLmxlbmd0aDtzKyspe3ZhciB1PWkuZmVhdHVyZShzKTtpZihhKG5ldyBqcih0aGlzLnRpbGVJRC5vdmVyc2NhbGVkWiksdSkpe3ZhciBsPW5ldyB3cyh1LG8ueixvLngsby55KTtsLnRpbGU9byx0LnB1c2gobCk7fX19fSxTcy5wcm90b3R5cGUuY2xlYXJNYXNrPWZ1bmN0aW9uKCl7dGhpcy5zZWdtZW50cyYmKHRoaXMuc2VnbWVudHMuZGVzdHJveSgpLGRlbGV0ZSB0aGlzLnNlZ21lbnRzKSx0aGlzLm1hc2tlZEJvdW5kc0J1ZmZlciYmKHRoaXMubWFza2VkQm91bmRzQnVmZmVyLmRlc3Ryb3koKSxkZWxldGUgdGhpcy5tYXNrZWRCb3VuZHNCdWZmZXIpLHRoaXMubWFza2VkSW5kZXhCdWZmZXImJih0aGlzLm1hc2tlZEluZGV4QnVmZmVyLmRlc3Ryb3koKSxkZWxldGUgdGhpcy5tYXNrZWRJbmRleEJ1ZmZlcik7fSxTcy5wcm90b3R5cGUuc2V0TWFzaz1mdW5jdGlvbih0LGUpe2lmKCF5KHRoaXMubWFzayx0KSYmKHRoaXMubWFzaz10LHRoaXMuY2xlYXJNYXNrKCksIXkodCx7MDohMH0pKSl7dmFyIHI9bmV3IHVuLG49bmV3IHduO3RoaXMuc2VnbWVudHM9bmV3IExuLHRoaXMuc2VnbWVudHMucHJlcGFyZVNlZ21lbnQoMCxyLG4pO2Zvcih2YXIgaT1PYmplY3Qua2V5cyh0KSxhPTA7YTxpLmxlbmd0aDthKyspe3ZhciBvPXRbaVthXV0scz1Ybj4+by56LHU9bmV3IGMoby54KnMsby55KnMpLGw9bmV3IGModS54K3MsdS55K3MpLHA9dGhpcy5zZWdtZW50cy5wcmVwYXJlU2VnbWVudCg0LHIsbik7ci5lbXBsYWNlQmFjayh1LngsdS55LHUueCx1LnkpLHIuZW1wbGFjZUJhY2sobC54LHUueSxsLngsdS55KSxyLmVtcGxhY2VCYWNrKHUueCxsLnksdS54LGwueSksci5lbXBsYWNlQmFjayhsLngsbC55LGwueCxsLnkpO3ZhciBoPXAudmVydGV4TGVuZ3RoO24uZW1wbGFjZUJhY2soaCxoKzEsaCsyKSxuLmVtcGxhY2VCYWNrKGgrMSxoKzIsaCszKSxwLnZlcnRleExlbmd0aCs9NCxwLnByaW1pdGl2ZUxlbmd0aCs9Mjt9dGhpcy5tYXNrZWRCb3VuZHNCdWZmZXI9ZS5jcmVhdGVWZXJ0ZXhCdWZmZXIocix4cy5tZW1iZXJzKSx0aGlzLm1hc2tlZEluZGV4QnVmZmVyPWUuY3JlYXRlSW5kZXhCdWZmZXIobik7fX0sU3MucHJvdG90eXBlLmhhc0RhdGE9ZnVuY3Rpb24oKXtyZXR1cm5cImxvYWRlZFwiPT09dGhpcy5zdGF0ZXx8XCJyZWxvYWRpbmdcIj09PXRoaXMuc3RhdGV8fFwiZXhwaXJlZFwiPT09dGhpcy5zdGF0ZX0sU3MucHJvdG90eXBlLnNldEV4cGlyeURhdGE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5leHBpcmF0aW9uVGltZTtpZih0LmNhY2hlQ29udHJvbCl7dmFyIHI9ZnVuY3Rpb24odCl7dmFyIGU9e307aWYodC5yZXBsYWNlKC8oPzpefCg/OlxccypcXCxcXHMqKSkoW15cXHgwMC1cXHgyMFxcKFxcKTw+QFxcLDtcXDpcXFxcXCJcXC9cXFtcXF1cXD9cXD1cXHtcXH1cXHg3Rl0rKSg/OlxcPSg/OihbXlxceDAwLVxceDIwXFwoXFwpPD5AXFwsO1xcOlxcXFxcIlxcL1xcW1xcXVxcP1xcPVxce1xcfVxceDdGXSspfCg/OlxcXCIoKD86W15cIlxcXFxdfFxcXFwuKSopXFxcIikpKT8vZyxmdW5jdGlvbih0LHIsbixpKXt2YXIgYT1ufHxpO3JldHVybiBlW3JdPSFhfHxhLnRvTG93ZXJDYXNlKCksXCJcIn0pLGVbXCJtYXgtYWdlXCJdKXt2YXIgcj1wYXJzZUludChlW1wibWF4LWFnZVwiXSwxMCk7aXNOYU4ocik/ZGVsZXRlIGVbXCJtYXgtYWdlXCJdOmVbXCJtYXgtYWdlXCJdPXI7fXJldHVybiBlfSh0LmNhY2hlQ29udHJvbCk7cltcIm1heC1hZ2VcIl0mJih0aGlzLmV4cGlyYXRpb25UaW1lPURhdGUubm93KCkrMWUzKnJbXCJtYXgtYWdlXCJdKTt9ZWxzZSB0LmV4cGlyZXMmJih0aGlzLmV4cGlyYXRpb25UaW1lPW5ldyBEYXRlKHQuZXhwaXJlcykuZ2V0VGltZSgpKTtpZih0aGlzLmV4cGlyYXRpb25UaW1lKXt2YXIgbj1EYXRlLm5vdygpLGk9ITE7aWYodGhpcy5leHBpcmF0aW9uVGltZT5uKWk9ITE7ZWxzZSBpZihlKWlmKHRoaXMuZXhwaXJhdGlvblRpbWU8ZSlpPSEwO2Vsc2V7dmFyIGE9dGhpcy5leHBpcmF0aW9uVGltZS1lO2E/dGhpcy5leHBpcmF0aW9uVGltZT1uK01hdGgubWF4KGEsM2U0KTppPSEwO31lbHNlIGk9ITA7aT8odGhpcy5leHBpcmVkUmVxdWVzdENvdW50KyssdGhpcy5zdGF0ZT1cImV4cGlyZWRcIik6dGhpcy5leHBpcmVkUmVxdWVzdENvdW50PTA7fX0sU3MucHJvdG90eXBlLmdldEV4cGlyeVRpbWVvdXQ9ZnVuY3Rpb24oKXtpZih0aGlzLmV4cGlyYXRpb25UaW1lKXJldHVybiB0aGlzLmV4cGlyZWRSZXF1ZXN0Q291bnQ/MWUzKigxPDxNYXRoLm1pbih0aGlzLmV4cGlyZWRSZXF1ZXN0Q291bnQtMSwzMSkpOk1hdGgubWluKHRoaXMuZXhwaXJhdGlvblRpbWUtKG5ldyBEYXRlKS5nZXRUaW1lKCksTWF0aC5wb3coMiwzMSktMSl9LFNzLnByb3RvdHlwZS5zZXRGZWF0dXJlU3RhdGU9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmxhdGVzdEZlYXR1cmVJbmRleCYmdGhpcy5sYXRlc3RGZWF0dXJlSW5kZXgucmF3VGlsZURhdGEmJjAhPT1PYmplY3Qua2V5cyh0KS5sZW5ndGgpe3ZhciByPXRoaXMubGF0ZXN0RmVhdHVyZUluZGV4LmxvYWRWVExheWVycygpO2Zvcih2YXIgbiBpbiB0aGlzLmJ1Y2tldHMpe3ZhciBpPXRoaXMuYnVja2V0c1tuXSxhPWkubGF5ZXJzWzBdLnNvdXJjZUxheWVyfHxcIl9nZW9qc29uVGlsZUxheWVyXCIsbz1yW2FdLHM9dFthXTtvJiZzJiYwIT09T2JqZWN0LmtleXMocykubGVuZ3RoJiYoaS51cGRhdGUocyxvKSxlJiZlLnN0eWxlJiYodGhpcy5xdWVyeVBhZGRpbmc9TWF0aC5tYXgodGhpcy5xdWVyeVBhZGRpbmcsZS5zdHlsZS5nZXRMYXllcihpLmxheWVySWRzWzBdKS5xdWVyeVJhZGl1cyhpKSkpKTt9fX07dmFyIE1zPXtob3Jpem9udGFsOjEsdmVydGljYWw6Mixob3Jpem9udGFsT25seTozfTt2YXIgQnM9ezk6ITAsMTA6ITAsMTE6ITAsMTI6ITAsMTM6ITAsMzI6ITB9LFZzPXt9O2Z1bmN0aW9uIElzKHQsZSxyLG4pe3ZhciBpPU1hdGgucG93KHQtZSwyKTtyZXR1cm4gbj90PGU/aS8yOjIqaTppK01hdGguYWJzKHIpKnJ9ZnVuY3Rpb24gQ3ModCxlKXt2YXIgcj0wO3JldHVybiAxMD09PXQmJihyLT0xZTQpLDQwIT09dCYmNjUyODghPT10fHwocis9NTApLDQxIT09ZSYmNjUyODkhPT1lfHwocis9NTApLHJ9ZnVuY3Rpb24gRXModCxlLHIsbixpLGEpe2Zvcih2YXIgbz1udWxsLHM9SXMoZSxyLGksYSksdT0wLGw9bjt1PGwubGVuZ3RoO3UrPTEpe3ZhciBwPWxbdV0saD1JcyhlLXAueCxyLGksYSkrcC5iYWRuZXNzO2g8PXMmJihvPXAscz1oKTt9cmV0dXJue2luZGV4OnQseDplLHByaW9yQnJlYWs6byxiYWRuZXNzOnN9fWZ1bmN0aW9uIFRzKHQsZSxyLG4pe2lmKCFyKXJldHVybltdO2lmKCF0KXJldHVybltdO2Zvcih2YXIgaSxhPVtdLG89ZnVuY3Rpb24odCxlLHIsbil7Zm9yKHZhciBpPTAsYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgbz1uW3QuY2hhckNvZGVBdChhKV07byYmKGkrPW8ubWV0cmljcy5hZHZhbmNlK2UpO31yZXR1cm4gaS9NYXRoLm1heCgxLE1hdGguY2VpbChpL3IpKX0odCxlLHIsbikscz0wLHU9MDt1PHQubGVuZ3RoO3UrKyl7dmFyIGw9dC5jaGFyQ29kZUF0KHUpLHA9bltsXTtwJiYhQnNbbF0mJihzKz1wLm1ldHJpY3MuYWR2YW5jZStlKSx1PHQubGVuZ3RoLTEmJihWc1tsXXx8ISgoaT1sKTwxMTkwNCkmJihCcltcIkJvcG9tb2ZvIEV4dGVuZGVkXCJdKGkpfHxCci5Cb3BvbW9mbyhpKXx8QnJbXCJDSksgQ29tcGF0aWJpbGl0eSBGb3Jtc1wiXShpKXx8QnJbXCJDSksgQ29tcGF0aWJpbGl0eSBJZGVvZ3JhcGhzXCJdKGkpfHxCcltcIkNKSyBDb21wYXRpYmlsaXR5XCJdKGkpfHxCcltcIkNKSyBSYWRpY2FscyBTdXBwbGVtZW50XCJdKGkpfHxCcltcIkNKSyBTdHJva2VzXCJdKGkpfHxCcltcIkNKSyBTeW1ib2xzIGFuZCBQdW5jdHVhdGlvblwiXShpKXx8QnJbXCJDSksgVW5pZmllZCBJZGVvZ3JhcGhzIEV4dGVuc2lvbiBBXCJdKGkpfHxCcltcIkNKSyBVbmlmaWVkIElkZW9ncmFwaHNcIl0oaSl8fEJyW1wiRW5jbG9zZWQgQ0pLIExldHRlcnMgYW5kIE1vbnRoc1wiXShpKXx8QnJbXCJIYWxmd2lkdGggYW5kIEZ1bGx3aWR0aCBGb3Jtc1wiXShpKXx8QnIuSGlyYWdhbmEoaSl8fEJyW1wiSWRlb2dyYXBoaWMgRGVzY3JpcHRpb24gQ2hhcmFjdGVyc1wiXShpKXx8QnJbXCJLYW5neGkgUmFkaWNhbHNcIl0oaSl8fEJyW1wiS2F0YWthbmEgUGhvbmV0aWMgRXh0ZW5zaW9uc1wiXShpKXx8QnIuS2F0YWthbmEoaSl8fEJyW1wiVmVydGljYWwgRm9ybXNcIl0oaSl8fEJyW1wiWWkgUmFkaWNhbHNcIl0oaSl8fEJyW1wiWWkgU3lsbGFibGVzXCJdKGkpKSkmJmEucHVzaChFcyh1KzEscyxvLGEsQ3MobCx0LmNoYXJDb2RlQXQodSsxKSksITEpKTt9cmV0dXJuIGZ1bmN0aW9uIHQoZSl7cmV0dXJuIGU/dChlLnByaW9yQnJlYWspLmNvbmNhdChlLmluZGV4KTpbXX0oRXModC5sZW5ndGgscyxvLGEsMCwhMCkpfWZ1bmN0aW9uIFBzKHQpe3ZhciBlPS41LHI9LjU7c3dpdGNoKHQpe2Nhc2VcInJpZ2h0XCI6Y2FzZVwidG9wLXJpZ2h0XCI6Y2FzZVwiYm90dG9tLXJpZ2h0XCI6ZT0xO2JyZWFrO2Nhc2VcImxlZnRcIjpjYXNlXCJ0b3AtbGVmdFwiOmNhc2VcImJvdHRvbS1sZWZ0XCI6ZT0wO31zd2l0Y2godCl7Y2FzZVwiYm90dG9tXCI6Y2FzZVwiYm90dG9tLXJpZ2h0XCI6Y2FzZVwiYm90dG9tLWxlZnRcIjpyPTE7YnJlYWs7Y2FzZVwidG9wXCI6Y2FzZVwidG9wLXJpZ2h0XCI6Y2FzZVwidG9wLWxlZnRcIjpyPTA7fXJldHVybntob3Jpem9udGFsQWxpZ246ZSx2ZXJ0aWNhbEFsaWduOnJ9fWZ1bmN0aW9uIEZzKHQsZSxyLG4saSl7aWYoaSl7dmFyIGE9ZVt0W25dLmdseXBoXTtpZihhKWZvcih2YXIgbz1hLm1ldHJpY3MuYWR2YW5jZSxzPSh0W25dLngrbykqaSx1PXI7dTw9bjt1KyspdFt1XS54LT1zO319VnNbMTBdPSEwLFZzWzMyXT0hMCxWc1szOF09ITAsVnNbNDBdPSEwLFZzWzQxXT0hMCxWc1s0M109ITAsVnNbNDVdPSEwLFZzWzQ3XT0hMCxWc1sxNzNdPSEwLFZzWzE4M109ITAsVnNbODIwM109ITAsVnNbODIwOF09ITAsVnNbODIxMV09ITAsVnNbODIzMV09ITAsdC5jb21tb25qc0dsb2JhbD1lLHQudW53cmFwRXhwb3J0cz1yLHQuY3JlYXRlQ29tbW9uanNNb2R1bGU9bix0LmRlZmF1bHQ9Yyx0LmRlZmF1bHQkMT1zZWxmLHQuZGVmYXVsdCQyPXMsdC5nZXRKU09OPWZ1bmN0aW9uKHQsZSl7dmFyIHI9RSh0KTtyZXR1cm4gci5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsXCJhcHBsaWNhdGlvbi9qc29uXCIpLHIub25lcnJvcj1mdW5jdGlvbigpe2UobmV3IEVycm9yKHIuc3RhdHVzVGV4dCkpO30sci5vbmxvYWQ9ZnVuY3Rpb24oKXtpZihyLnN0YXR1cz49MjAwJiZyLnN0YXR1czwzMDAmJnIucmVzcG9uc2Upe3ZhciBuO3RyeXtuPUpTT04ucGFyc2Uoci5yZXNwb25zZSk7fWNhdGNoKHQpe3JldHVybiBlKHQpfWUobnVsbCxuKTt9ZWxzZSA0MDE9PT1yLnN0YXR1cyYmdC51cmwubWF0Y2goL21hcGJveC5jb20vKT9lKG5ldyBDKHIuc3RhdHVzVGV4dCtcIjogeW91IG1heSBoYXZlIHByb3ZpZGVkIGFuIGludmFsaWQgTWFwYm94IGFjY2VzcyB0b2tlbi4gU2VlIGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYXBpLWRvY3VtZW50YXRpb24vI2FjY2Vzcy10b2tlbnNcIixyLnN0YXR1cyx0LnVybCkpOmUobmV3IEMoci5zdGF0dXNUZXh0LHIuc3RhdHVzLHQudXJsKSk7fSxyLnNlbmQoKSxyfSx0LmdldEltYWdlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFQodCxmdW5jdGlvbih0LHIpe2lmKHQpZSh0KTtlbHNlIGlmKHIpe3ZhciBuPW5ldyBzZWxmLkltYWdlLGk9c2VsZi5VUkx8fHNlbGYud2Via2l0VVJMO24ub25sb2FkPWZ1bmN0aW9uKCl7ZShudWxsLG4pLGkucmV2b2tlT2JqZWN0VVJMKG4uc3JjKTt9O3ZhciBhPW5ldyBzZWxmLkJsb2IoW25ldyBVaW50OEFycmF5KHIuZGF0YSldLHt0eXBlOlwiaW1hZ2UvcG5nXCJ9KTtuLmNhY2hlQ29udHJvbD1yLmNhY2hlQ29udHJvbCxuLmV4cGlyZXM9ci5leHBpcmVzLG4uc3JjPXIuZGF0YS5ieXRlTGVuZ3RoP2kuY3JlYXRlT2JqZWN0VVJMKGEpOlwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQUMwbEVRVlFZVjJOZ0FBSUFBQVVBQWFyVnlGRUFBQUFBU1VWT1JLNUNZSUk9XCI7fX0pfSx0LlJlc291cmNlVHlwZT1JLHQuUkdCQUltYWdlPVVpLHQuZGVmYXVsdCQzPUNvLHQuSW1hZ2VQb3NpdGlvbj1Fbyx0LmRlZmF1bHQkND1xbyx0LmdldEFycmF5QnVmZmVyPVQsdC5kZWZhdWx0JDU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBVbyh0KS5yZWFkRmllbGRzKG9zLFtdKX0sdC5kZWZhdWx0JDY9QnIsdC5hc3luY0FsbD1mdW5jdGlvbih0LGUscil7aWYoIXQubGVuZ3RoKXJldHVybiByKG51bGwsW10pO3ZhciBuPXQubGVuZ3RoLGk9bmV3IEFycmF5KHQubGVuZ3RoKSxhPW51bGw7dC5mb3JFYWNoKGZ1bmN0aW9uKHQsbyl7ZSh0LGZ1bmN0aW9uKHQsZSl7dCYmKGE9dCksaVtvXT1lLDA9PS0tbiYmcihhLGkpO30pO30pO30sdC5BbHBoYUltYWdlPVJpLHQuZGVmYXVsdCQ3PXEsdC5lbmRzV2l0aD1fLHQuZXh0ZW5kPWcsdC5zcGhlcmljYWxUb0NhcnRlc2lhbj1mdW5jdGlvbih0KXt2YXIgZT10WzBdLHI9dFsxXSxuPXRbMl07cmV0dXJuIHIrPTkwLHIqPU1hdGguUEkvMTgwLG4qPU1hdGguUEkvMTgwLHt4OmUqTWF0aC5jb3MocikqTWF0aC5zaW4obikseTplKk1hdGguc2luKHIpKk1hdGguc2luKG4pLHo6ZSpNYXRoLmNvcyhuKX19LHQuRXZlbnRlZD1ELHQudmFsaWRhdGVTdHlsZT1mcix0LnZhbGlkYXRlTGlnaHQ9eXIsdC5lbWl0VmFsaWRhdGlvbkVycm9ycz12cix0LmRlZmF1bHQkOD1vdCx0Lm51bWJlcj1WdCx0LlByb3BlcnRpZXM9UXIsdC5UcmFuc2l0aW9uYWJsZT1Ocix0LlRyYW5zaXRpb25pbmc9WHIsdC5Qb3NzaWJseUV2YWx1YXRlZD1Hcix0LkRhdGFDb25zdGFudFByb3BlcnR5PUhyLHQud2Fybk9uY2U9TSx0LnVuaXF1ZUlkPWIsdC5kZWZhdWx0JDk9cHMsdC5waWNrPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXt9LG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpIGluIHQmJihyW2ldPXRbaV0pO31yZXR1cm4gcn0sdC53cmFwPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yLWUsaT0oKHQtZSklbituKSVuK2U7cmV0dXJuIGk9PT1lP3I6aX0sdC5jbGFtcD12LHQuRXZlbnQ9TCx0LkVycm9yRXZlbnQ9Tyx0Lk92ZXJzY2FsZWRUaWxlSUQ9ZHMsdC5kZWZhdWx0JDEwPVhuLHQuZ2V0Q29vcmRpbmF0ZXNDZW50ZXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTEvMCxyPTEvMCxuPS0xLzAsaT0tMS8wLGE9MDthPHQubGVuZ3RoO2ErKyllPU1hdGgubWluKGUsdFthXS5jb2x1bW4pLHI9TWF0aC5taW4ocix0W2FdLnJvdyksbj1NYXRoLm1heChuLHRbYV0uY29sdW1uKSxpPU1hdGgubWF4KGksdFthXS5yb3cpO3ZhciBvPW4tZSxzPWktcix1PU1hdGgubWF4KG8scyksbD1NYXRoLm1heCgwLE1hdGguZmxvb3IoLU1hdGgubG9nKHUpL01hdGguTE4yKSk7cmV0dXJuIG5ldyBoKChlK24pLzIsKHIraSkvMiwwKS56b29tVG8obCl9LHQuQ2Fub25pY2FsVGlsZUlEPWZzLHQuUmFzdGVyQm91bmRzQXJyYXk9dW4sdC5kZWZhdWx0JDExPXhzLHQuZ2V0VmlkZW89ZnVuY3Rpb24odCxlKXt2YXIgcixuLGk9c2VsZi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7aS5vbmxvYWRzdGFydD1mdW5jdGlvbigpe2UobnVsbCxpKTt9O2Zvcih2YXIgYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgbz1zZWxmLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7cj10W2FdLG49dm9pZCAwLChuPXNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIikpLmhyZWY9ciwobi5wcm90b2NvbCE9PXNlbGYuZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2x8fG4uaG9zdCE9PXNlbGYuZG9jdW1lbnQubG9jYXRpb24uaG9zdCkmJihpLmNyb3NzT3JpZ2luPVwiQW5vbnltb3VzXCIpLG8uc3JjPXRbYV0saS5hcHBlbmRDaGlsZChvKTt9cmV0dXJuIGl9LHQuZGVmYXVsdCQxMj1qLHQuYmluZEFsbD13LHQuZGVmYXVsdCQxMz15LHQuZGVmYXVsdCQxND1Tcyx0LmRlZmF1bHQkMTU9aCx0LmtleXNEaWZmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9W107Zm9yKHZhciBuIGluIHQpbiBpbiBlfHxyLnB1c2gobik7cmV0dXJuIHJ9LHQuZGVmYXVsdCQxNj1Bcyx0LmRlZmF1bHQkMTc9W1widHlwZVwiLFwic291cmNlXCIsXCJzb3VyY2UtbGF5ZXJcIixcIm1pbnpvb21cIixcIm1heHpvb21cIixcImZpbHRlclwiLFwibGF5b3V0XCJdLHQuY3JlYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGhpKDE2KTtyZXR1cm4gdFswXT0xLHRbMV09MCx0WzJdPTAsdFszXT0wLHRbNF09MCx0WzVdPTEsdFs2XT0wLHRbN109MCx0WzhdPTAsdFs5XT0wLHRbMTBdPTEsdFsxMV09MCx0WzEyXT0wLHRbMTNdPTAsdFsxNF09MCx0WzE1XT0xLHR9LHQuaWRlbnRpdHk9ZnVuY3Rpb24odCl7cmV0dXJuIHRbMF09MSx0WzFdPTAsdFsyXT0wLHRbM109MCx0WzRdPTAsdFs1XT0xLHRbNl09MCx0WzddPTAsdFs4XT0wLHRbOV09MCx0WzEwXT0xLHRbMTFdPTAsdFsxMl09MCx0WzEzXT0wLHRbMTRdPTAsdFsxNV09MSx0fSx0LmludmVydD1mdW5jdGlvbih0LGUpe3ZhciByPWVbMF0sbj1lWzFdLGk9ZVsyXSxhPWVbM10sbz1lWzRdLHM9ZVs1XSx1PWVbNl0sbD1lWzddLHA9ZVs4XSxoPWVbOV0sYz1lWzEwXSxmPWVbMTFdLHk9ZVsxMl0sZD1lWzEzXSxtPWVbMTRdLHY9ZVsxNV0sZz1yKnMtbipvLHg9cip1LWkqbyxiPXIqbC1hKm8sdz1uKnUtaSpzLF89bipsLWEqcyxBPWkqbC1hKnUsaz1wKmQtaCp5LHo9cCptLWMqeSxTPXAqdi1mKnksTT1oKm0tYypkLEI9aCp2LWYqZCxWPWMqdi1mKm0sST1nKlYteCpCK2IqTSt3KlMtXyp6K0EqaztyZXR1cm4gST8oST0xL0ksdFswXT0ocypWLXUqQitsKk0pKkksdFsxXT0oaSpCLW4qVi1hKk0pKkksdFsyXT0oZCpBLW0qXyt2KncpKkksdFszXT0oYypfLWgqQS1mKncpKkksdFs0XT0odSpTLW8qVi1sKnopKkksdFs1XT0ocipWLWkqUythKnopKkksdFs2XT0obSpiLXkqQS12KngpKkksdFs3XT0ocCpBLWMqYitmKngpKkksdFs4XT0obypCLXMqUytsKmspKkksdFs5XT0obipTLXIqQi1hKmspKkksdFsxMF09KHkqXy1kKmIrdipnKSpJLHRbMTFdPShoKmItcCpfLWYqZykqSSx0WzEyXT0ocyp6LW8qTS11KmspKkksdFsxM109KHIqTS1uKnoraSprKSpJLHRbMTRdPShkKngteSp3LW0qZykqSSx0WzE1XT0ocCp3LWgqeCtjKmcpKkksdCk6bnVsbH0sdC5tdWx0aXBseT1mdW5jdGlvbih0LGUscil7dmFyIG49ZVswXSxpPWVbMV0sYT1lWzJdLG89ZVszXSxzPWVbNF0sdT1lWzVdLGw9ZVs2XSxwPWVbN10saD1lWzhdLGM9ZVs5XSxmPWVbMTBdLHk9ZVsxMV0sZD1lWzEyXSxtPWVbMTNdLHY9ZVsxNF0sZz1lWzE1XSx4PXJbMF0sYj1yWzFdLHc9clsyXSxfPXJbM107cmV0dXJuIHRbMF09eCpuK2Iqcyt3KmgrXypkLHRbMV09eCppK2IqdSt3KmMrXyptLHRbMl09eCphK2IqbCt3KmYrXyp2LHRbM109eCpvK2IqcCt3KnkrXypnLHg9cls0XSxiPXJbNV0sdz1yWzZdLF89cls3XSx0WzRdPXgqbitiKnMrdypoK18qZCx0WzVdPXgqaStiKnUrdypjK18qbSx0WzZdPXgqYStiKmwrdypmK18qdix0WzddPXgqbytiKnArdyp5K18qZyx4PXJbOF0sYj1yWzldLHc9clsxMF0sXz1yWzExXSx0WzhdPXgqbitiKnMrdypoK18qZCx0WzldPXgqaStiKnUrdypjK18qbSx0WzEwXT14KmErYipsK3cqZitfKnYsdFsxMV09eCpvK2IqcCt3KnkrXypnLHg9clsxMl0sYj1yWzEzXSx3PXJbMTRdLF89clsxNV0sdFsxMl09eCpuK2Iqcyt3KmgrXypkLHRbMTNdPXgqaStiKnUrdypjK18qbSx0WzE0XT14KmErYipsK3cqZitfKnYsdFsxNV09eCpvK2IqcCt3KnkrXypnLHR9LHQudHJhbnNsYXRlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbixpLGEsbyxzLHUsbCxwLGgsYyxmLHksZD1yWzBdLG09clsxXSx2PXJbMl07cmV0dXJuIGU9PT10Pyh0WzEyXT1lWzBdKmQrZVs0XSptK2VbOF0qditlWzEyXSx0WzEzXT1lWzFdKmQrZVs1XSptK2VbOV0qditlWzEzXSx0WzE0XT1lWzJdKmQrZVs2XSptK2VbMTBdKnYrZVsxNF0sdFsxNV09ZVszXSpkK2VbN10qbStlWzExXSp2K2VbMTVdKToobj1lWzBdLGk9ZVsxXSxhPWVbMl0sbz1lWzNdLHM9ZVs0XSx1PWVbNV0sbD1lWzZdLHA9ZVs3XSxoPWVbOF0sYz1lWzldLGY9ZVsxMF0seT1lWzExXSx0WzBdPW4sdFsxXT1pLHRbMl09YSx0WzNdPW8sdFs0XT1zLHRbNV09dSx0WzZdPWwsdFs3XT1wLHRbOF09aCx0WzldPWMsdFsxMF09Zix0WzExXT15LHRbMTJdPW4qZCtzKm0raCp2K2VbMTJdLHRbMTNdPWkqZCt1Km0rYyp2K2VbMTNdLHRbMTRdPWEqZCtsKm0rZip2K2VbMTRdLHRbMTVdPW8qZCtwKm0reSp2K2VbMTVdKSx0fSx0LnNjYWxlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yWzBdLGk9clsxXSxhPXJbMl07cmV0dXJuIHRbMF09ZVswXSpuLHRbMV09ZVsxXSpuLHRbMl09ZVsyXSpuLHRbM109ZVszXSpuLHRbNF09ZVs0XSppLHRbNV09ZVs1XSppLHRbNl09ZVs2XSppLHRbN109ZVs3XSppLHRbOF09ZVs4XSphLHRbOV09ZVs5XSphLHRbMTBdPWVbMTBdKmEsdFsxMV09ZVsxMV0qYSx0WzEyXT1lWzEyXSx0WzEzXT1lWzEzXSx0WzE0XT1lWzE0XSx0WzE1XT1lWzE1XSx0fSx0LnJvdGF0ZVg9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPU1hdGguc2luKHIpLGk9TWF0aC5jb3MociksYT1lWzRdLG89ZVs1XSxzPWVbNl0sdT1lWzddLGw9ZVs4XSxwPWVbOV0saD1lWzEwXSxjPWVbMTFdO3JldHVybiBlIT09dCYmKHRbMF09ZVswXSx0WzFdPWVbMV0sdFsyXT1lWzJdLHRbM109ZVszXSx0WzEyXT1lWzEyXSx0WzEzXT1lWzEzXSx0WzE0XT1lWzE0XSx0WzE1XT1lWzE1XSksdFs0XT1hKmkrbCpuLHRbNV09byppK3Aqbix0WzZdPXMqaStoKm4sdFs3XT11KmkrYypuLHRbOF09bCppLWEqbix0WzldPXAqaS1vKm4sdFsxMF09aCppLXMqbix0WzExXT1jKmktdSpuLHR9LHQucm90YXRlWj1mdW5jdGlvbih0LGUscil7dmFyIG49TWF0aC5zaW4ociksaT1NYXRoLmNvcyhyKSxhPWVbMF0sbz1lWzFdLHM9ZVsyXSx1PWVbM10sbD1lWzRdLHA9ZVs1XSxoPWVbNl0sYz1lWzddO3JldHVybiBlIT09dCYmKHRbOF09ZVs4XSx0WzldPWVbOV0sdFsxMF09ZVsxMF0sdFsxMV09ZVsxMV0sdFsxMl09ZVsxMl0sdFsxM109ZVsxM10sdFsxNF09ZVsxNF0sdFsxNV09ZVsxNV0pLHRbMF09YSppK2wqbix0WzFdPW8qaStwKm4sdFsyXT1zKmkraCpuLHRbM109dSppK2Mqbix0WzRdPWwqaS1hKm4sdFs1XT1wKmktbypuLHRbNl09aCppLXMqbix0WzddPWMqaS11Km4sdH0sdC5wZXJzcGVjdGl2ZT1mdW5jdGlvbih0LGUscixuLGkpe3ZhciBhPTEvTWF0aC50YW4oZS8yKSxvPTEvKG4taSk7cmV0dXJuIHRbMF09YS9yLHRbMV09MCx0WzJdPTAsdFszXT0wLHRbNF09MCx0WzVdPWEsdFs2XT0wLHRbN109MCx0WzhdPTAsdFs5XT0wLHRbMTBdPShpK24pKm8sdFsxMV09LTEsdFsxMl09MCx0WzEzXT0wLHRbMTRdPTIqaSpuKm8sdFsxNV09MCx0fSx0Lm9ydGhvPWZ1bmN0aW9uKHQsZSxyLG4saSxhLG8pe3ZhciBzPTEvKGUtciksdT0xLyhuLWkpLGw9MS8oYS1vKTtyZXR1cm4gdFswXT0tMipzLHRbMV09MCx0WzJdPTAsdFszXT0wLHRbNF09MCx0WzVdPS0yKnUsdFs2XT0wLHRbN109MCx0WzhdPTAsdFs5XT0wLHRbMTBdPTIqbCx0WzExXT0wLHRbMTJdPShlK3IpKnMsdFsxM109KGkrbikqdSx0WzE0XT0obythKSpsLHRbMTVdPTEsdH0sdC5jcmVhdGUkMT1faSx0Lm5vcm1hbGl6ZT1BaSx0LnRyYW5zZm9ybU1hdDQ9a2ksdC5mb3JFYWNoPXppLHQuZ2V0U2l6ZURhdGE9bW8sdC5ldmFsdWF0ZVNpemVGb3JGZWF0dXJlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1lO3JldHVyblwic291cmNlXCI9PT10LmZ1bmN0aW9uVHlwZT9yLmxvd2VyU2l6ZS8xMDpcImNvbXBvc2l0ZVwiPT09dC5mdW5jdGlvblR5cGU/VnQoci5sb3dlclNpemUvMTAsci51cHBlclNpemUvMTAsbi51U2l6ZVQpOm4udVNpemV9LHQuZXZhbHVhdGVTaXplRm9yWm9vbT1mdW5jdGlvbih0LGUscil7aWYoXCJjb25zdGFudFwiPT09dC5mdW5jdGlvblR5cGUpcmV0dXJue3VTaXplVDowLHVTaXplOnQubGF5b3V0U2l6ZX07aWYoXCJzb3VyY2VcIj09PXQuZnVuY3Rpb25UeXBlKXJldHVybnt1U2l6ZVQ6MCx1U2l6ZTowfTtpZihcImNhbWVyYVwiPT09dC5mdW5jdGlvblR5cGUpe3ZhciBuPXQucHJvcGVydHlWYWx1ZSxpPXQuem9vbVJhbmdlLGE9dC5zaXplUmFuZ2Usbz12KE9lKG4sci5zcGVjaWZpY2F0aW9uKS5pbnRlcnBvbGF0aW9uRmFjdG9yKGUsaS5taW4saS5tYXgpLDAsMSk7cmV0dXJue3VTaXplVDowLHVTaXplOmEubWluK28qKGEubWF4LWEubWluKX19dmFyIHM9dC5wcm9wZXJ0eVZhbHVlLHU9dC56b29tUmFuZ2U7cmV0dXJue3VTaXplVDp2KE9lKHMsci5zcGVjaWZpY2F0aW9uKS5pbnRlcnBvbGF0aW9uRmFjdG9yKGUsdS5taW4sdS5tYXgpLDAsMSksdVNpemU6MH19LHQuYWRkRHluYW1pY0F0dHJpYnV0ZXM9Ym8sdC5kZWZhdWx0JDE4PXpvLHQuV3JpdGluZ01vZGU9TXMsdC5tdWx0aVBvbHlnb25JbnRlcnNlY3RzQnVmZmVyZWRQb2ludD1Zbix0Lm11bHRpUG9seWdvbkludGVyc2VjdHNNdWx0aVBvbHlnb249V24sdC5tdWx0aVBvbHlnb25JbnRlcnNlY3RzQnVmZmVyZWRNdWx0aUxpbmU9UW4sdC5wb2x5Z29uSW50ZXJzZWN0c1BvbHlnb249ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZihvaShlLHRbcl0pKXJldHVybiEwO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWlmKG9pKHQsZVtuXSkpcmV0dXJuITA7cmV0dXJuISFlaSh0LGUpfSx0LmRpc3RUb1NlZ21lbnRTcXVhcmVkPWlpLHQuZGVmYXVsdCQxOT10bix0LmRlZmF1bHQkMjA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBJb1t0LnR5cGVdKHQpfSx0LmNsb25lPXosdC5maWx0ZXJPYmplY3Q9ayx0Lm1hcE9iamVjdD1BLHQucmVnaXN0ZXJGb3JQbHVnaW5BdmFpbGFiaWxpdHk9ZnVuY3Rpb24odCl7cmV0dXJuIExyP3Qoe3BsdWdpblVSTDpMcixjb21wbGV0aW9uQ2FsbGJhY2s6UHJ9KTpEci5vbmNlKFwicGx1Z2luQXZhaWxhYmxlXCIsdCksdH0sdC5ldmVudGVkPURyLHQuZGVmYXVsdCQyMT1Ncix0LmNyZWF0ZUxheW91dD1hbix0LmRlZmF1bHQkMjI9VW4sdC5jcmVhdGUkMj1jaSx0LmZyb21Sb3RhdGlvbj1mdW5jdGlvbih0LGUpe3ZhciByPU1hdGguc2luKGUpLG49TWF0aC5jb3MoZSk7cmV0dXJuIHRbMF09bix0WzFdPXIsdFsyXT0wLHRbM109LXIsdFs0XT1uLHRbNV09MCx0WzZdPTAsdFs3XT0wLHRbOF09MSx0fSx0LmNyZWF0ZSQzPWZpLHQubGVuZ3RoPXlpLHQuZnJvbVZhbHVlcz1kaSx0Lm5vcm1hbGl6ZSQxPW1pLHQuZG90PXZpLHQuY3Jvc3M9Z2ksdC50cmFuc2Zvcm1NYXQzPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1lWzBdLGk9ZVsxXSxhPWVbMl07cmV0dXJuIHRbMF09bipyWzBdK2kqclszXSthKnJbNl0sdFsxXT1uKnJbMV0raSpyWzRdK2Eqcls3XSx0WzJdPW4qclsyXStpKnJbNV0rYSpyWzhdLHR9LHQubGVuPWJpLHQuZm9yRWFjaCQxPXdpLHQuUG9zQXJyYXk9c24sdC5VbndyYXBwZWRUaWxlSUQ9eXMsdC5jcmVhdGUkND1mdW5jdGlvbigpe3ZhciB0PW5ldyBoaSg0KTtyZXR1cm4gdFswXT0xLHRbMV09MCx0WzJdPTAsdFszXT0xLHR9LHQucm90YXRlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1lWzBdLGk9ZVsxXSxhPWVbMl0sbz1lWzNdLHM9TWF0aC5zaW4ociksdT1NYXRoLmNvcyhyKTtyZXR1cm4gdFswXT1uKnUrYSpzLHRbMV09aSp1K28qcyx0WzJdPW4qLXMrYSp1LHRbM109aSotcytvKnUsdH0sdC5lYXNlPW0sdC5iZXppZXI9ZCx0LmRlZmF1bHQkMjM9anIsdC5zZXRSVExUZXh0UGx1Z2luPWZ1bmN0aW9uKHQsZSl7aWYoRnIpdGhyb3cgbmV3IEVycm9yKFwic2V0UlRMVGV4dFBsdWdpbiBjYW5ub3QgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzLlwiKTtGcj0hMCxMcj1zLnJlc29sdmVVUkwodCksUHI9ZnVuY3Rpb24odCl7dD8oRnI9ITEsTHI9bnVsbCxlJiZlKHQpKTpPcj0hMDt9LERyLmZpcmUobmV3IEwoXCJwbHVnaW5BdmFpbGFibGVcIix7cGx1Z2luVVJMOkxyLGNvbXBsZXRpb25DYWxsYmFjazpQcn0pKTt9LHQudmFsdWVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Zvcih2YXIgciBpbiB0KWUucHVzaCh0W3JdKTtyZXR1cm4gZX0sdC5kZWZhdWx0JDI0PSRlLHQuZGVmYXVsdCQyNT15byx0LnJlZ2lzdGVyPUFyLHQuR0xZUEhfUEJGX0JPUkRFUj1scyx0LnNoYXBlVGV4dD1mdW5jdGlvbih0LGUscixuLGksYSxvLHMsdSxsKXt2YXIgcD10LnRyaW0oKTtsPT09TXMudmVydGljYWwmJihwPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1cIlwiLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dC5jaGFyQ29kZUF0KHIrMSl8fG51bGwsaT10LmNoYXJDb2RlQXQoci0xKXx8bnVsbDtuJiZFcihuKSYmIWZvW3RbcisxXV18fGkmJkVyKGkpJiYhZm9bdFtyLTFdXXx8IWZvW3Rbcl1dP2UrPXRbcl06ZSs9Zm9bdFtyXV07fXJldHVybiBlfShwKSk7dmFyIGg9W10sYz17cG9zaXRpb25lZEdseXBoczpoLHRleHQ6cCx0b3A6c1sxXSxib3R0b206c1sxXSxsZWZ0OnNbMF0scmlnaHQ6c1swXSx3cml0aW5nTW9kZTpsfSxmPXFyLnByb2Nlc3NCaWRpcmVjdGlvbmFsVGV4dDtyZXR1cm4gZnVuY3Rpb24odCxlLHIsbixpLGEsbyxzLHUpe2Zvcih2YXIgbD0wLHA9LTE3LGg9MCxjPXQucG9zaXRpb25lZEdseXBocyxmPVwicmlnaHRcIj09PWE/MTpcImxlZnRcIj09PWE/MDouNSx5PTAsZD1yO3k8ZC5sZW5ndGg7eSs9MSl7dmFyIG09ZFt5XTtpZigobT1tLnRyaW0oKSkubGVuZ3RoKXtmb3IodmFyIHY9Yy5sZW5ndGgsZz0wO2c8bS5sZW5ndGg7ZysrKXt2YXIgeD1tLmNoYXJDb2RlQXQoZyksYj1lW3hdO2ImJihDcih4KSYmbyE9PU1zLmhvcml6b250YWw/KGMucHVzaCh7Z2x5cGg6eCx4OmwseTowLHZlcnRpY2FsOiEwfSksbCs9dStzKTooYy5wdXNoKHtnbHlwaDp4LHg6bCx5OnAsdmVydGljYWw6ITF9KSxsKz1iLm1ldHJpY3MuYWR2YW5jZStzKSk7fWlmKGMubGVuZ3RoIT09dil7dmFyIHc9bC1zO2g9TWF0aC5tYXgodyxoKSxGcyhjLGUsdixjLmxlbmd0aC0xLGYpO31sPTAscCs9bjt9ZWxzZSBwKz1uO312YXIgXz1QcyhpKSxBPV8uaG9yaXpvbnRhbEFsaWduLGs9Xy52ZXJ0aWNhbEFsaWduOyFmdW5jdGlvbih0LGUscixuLGksYSxvKXtmb3IodmFyIHM9KGUtcikqaSx1PSgtbipvKy41KSphLGw9MDtsPHQubGVuZ3RoO2wrKyl0W2xdLngrPXMsdFtsXS55Kz11O30oYyxmLEEsayxoLG4sci5sZW5ndGgpO3ZhciB6PXIubGVuZ3RoKm47dC50b3ArPS1rKnosdC5ib3R0b209dC50b3Areix0LmxlZnQrPS1BKmgsdC5yaWdodD10LmxlZnQraDt9KGMsZSxmP2YocCxUcyhwLG8scixlKSk6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9W10sbj0wLGk9MCxhPWU7aTxhLmxlbmd0aDtpKz0xKXt2YXIgbz1hW2ldO3IucHVzaCh0LnN1YnN0cmluZyhuLG8pKSxuPW87fXJldHVybiBuPHQubGVuZ3RoJiZyLnB1c2godC5zdWJzdHJpbmcobix0Lmxlbmd0aCkpLHJ9KHAsVHMocCxvLHIsZSkpLG4saSxhLGwsbyx1KSwhIWgubGVuZ3RoJiZjfSx0LnNoYXBlSWNvbj1mdW5jdGlvbih0LGUscil7dmFyIG49UHMociksaT1uLmhvcml6b250YWxBbGlnbixhPW4udmVydGljYWxBbGlnbixvPWVbMF0scz1lWzFdLHU9by10LmRpc3BsYXlTaXplWzBdKmksbD11K3QuZGlzcGxheVNpemVbMF0scD1zLXQuZGlzcGxheVNpemVbMV0qYTtyZXR1cm57aW1hZ2U6dCx0b3A6cCxib3R0b206cCt0LmRpc3BsYXlTaXplWzFdLGxlZnQ6dSxyaWdodDpsfX0sdC5hbGxvd3NWZXJ0aWNhbFdyaXRpbmdNb2RlPVZyLHQuYWxsb3dzTGV0dGVyU3BhY2luZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXQ7ZTxyLmxlbmd0aDtlKz0xKWlmKCFJcihyW2VdLmNoYXJDb2RlQXQoMCkpKXJldHVybiExO3JldHVybiEwfSx0LmRlZmF1bHQkMjY9emEsdC5kZWZhdWx0JDI3PUFvLHQuZGVmYXVsdCQyOD1rcyx0LkNvbGxpc2lvbkJveEFycmF5PVNuLHQuZGVmYXVsdCQyOT1icyx0LmRlZmF1bHQkMzA9UG8sdC5kZWZhdWx0JDMxPUphLHQuZGVmYXVsdCQzMj1Vbyx0LmRlZmF1bHQkMzM9Z3MsdC5fX21vZHVsZUV4cG9ydHM9SmEsdC5kZWZhdWx0JDM0PWMsdC5fX21vZHVsZUV4cG9ydHMkMT1Vbyx0LnBsdWdpbj1xcjt9KTtcblxuZGVmaW5lKFtcIi4vY2h1bmsxLmpzXCJdLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7dmFyIHI9dHlwZW9mIGU7aWYoXCJudW1iZXJcIj09PXJ8fFwiYm9vbGVhblwiPT09cnx8XCJzdHJpbmdcIj09PXJ8fG51bGw9PWUpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpO2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgaT1cIltcIixuPTAsbz1lO248by5sZW5ndGg7bis9MSl7aSs9dChvW25dKStcIixcIjt9cmV0dXJuIGkrXCJdXCJ9Zm9yKHZhciBhPU9iamVjdC5rZXlzKGUpLnNvcnQoKSxzPVwie1wiLGw9MDtsPGEubGVuZ3RoO2wrKylzKz1KU09OLnN0cmluZ2lmeShhW2xdKStcIjpcIit0KGVbYVtsXV0pK1wiLFwiO3JldHVybiBzK1wifVwifWZ1bmN0aW9uIHIocil7Zm9yKHZhciBpPVwiXCIsbj0wLG89ZS5kZWZhdWx0JDE3O248by5sZW5ndGg7bis9MSl7aSs9XCIvXCIrdChyW29bbl1dKTt9cmV0dXJuIGl9dmFyIGk9ZnVuY3Rpb24oZSl7ZSYmdGhpcy5yZXBsYWNlKGUpO307ZnVuY3Rpb24gbihlLHQscixpLG4pe2lmKHZvaWQgMD09PXQuc2VnbWVudClyZXR1cm4hMDtmb3IodmFyIG89dCxhPXQuc2VnbWVudCsxLHM9MDtzPi1yLzI7KXtpZigtLWE8MClyZXR1cm4hMTtzLT1lW2FdLmRpc3Qobyksbz1lW2FdO31zKz1lW2FdLmRpc3QoZVthKzFdKSxhKys7Zm9yKHZhciBsPVtdLHU9MDtzPHIvMjspe3ZhciBoPWVbYS0xXSxjPWVbYV0sZj1lW2ErMV07aWYoIWYpcmV0dXJuITE7dmFyIHA9aC5hbmdsZVRvKGMpLWMuYW5nbGVUbyhmKTtmb3IocD1NYXRoLmFicygocCszKk1hdGguUEkpJSgyKk1hdGguUEkpLU1hdGguUEkpLGwucHVzaCh7ZGlzdGFuY2U6cyxhbmdsZURlbHRhOnB9KSx1Kz1wO3MtbFswXS5kaXN0YW5jZT5pOyl1LT1sLnNoaWZ0KCkuYW5nbGVEZWx0YTtpZih1Pm4pcmV0dXJuITE7YSsrLHMrPWMuZGlzdChmKTt9cmV0dXJuITB9ZnVuY3Rpb24gbyh0LHIsaSxvLGEscyxsLHUsaCl7dmFyIGM9bz8uNipzKmw6MCxmPU1hdGgubWF4KG8/by5yaWdodC1vLmxlZnQ6MCxhP2EucmlnaHQtYS5sZWZ0OjApLHA9MD09PXRbMF0ueHx8dFswXS54PT09aHx8MD09PXRbMF0ueXx8dFswXS55PT09aDtyZXR1cm4gci1mKmw8ci80JiYocj1mKmwrci80KSxmdW5jdGlvbiB0KHIsaSxvLGEscyxsLHUsaCxjKXt2YXIgZj1sLzI7dmFyIHA9MDtmb3IodmFyIGQ9MDtkPHIubGVuZ3RoLTE7ZCsrKXArPXJbZF0uZGlzdChyW2QrMV0pO3ZhciBnPTAsbT1pLW87dmFyIHk9W107Zm9yKHZhciB2PTA7djxyLmxlbmd0aC0xO3YrKyl7Zm9yKHZhciB4PXJbdl0sdz1yW3YrMV0sTT14LmRpc3QodyksUz13LmFuZ2xlVG8oeCk7bStvPGcrTTspe3ZhciBfPSgobSs9byktZykvTSxiPWUubnVtYmVyKHgueCx3LngsXyksST1lLm51bWJlcih4Lnksdy55LF8pO2lmKGI+PTAmJmI8YyYmST49MCYmSTxjJiZtLWY+PTAmJm0rZjw9cCl7dmFyIGs9bmV3IGUuZGVmYXVsdCQyNShiLEksUyx2KTtrLl9yb3VuZCgpLGEmJiFuKHIsayxsLGEscyl8fHkucHVzaChrKTt9fWcrPU07fWh8fHkubGVuZ3RofHx1fHwoeT10KHIsZy8yLG8sYSxzLGwsdSwhMCxjKSk7cmV0dXJuIHl9KHQscD9yLzIqdSVyOihmLzIrMipzKSpsKnUlcixyLGMsaSxmKmwscCwhMSxoKX1pLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUpe3RoaXMuX2xheWVyQ29uZmlncz17fSx0aGlzLl9sYXllcnM9e30sdGhpcy51cGRhdGUoZSxbXSk7fSxpLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxpKXtmb3IodmFyIG49dGhpcyxvPTAsYT10O288YS5sZW5ndGg7bys9MSl7dmFyIHM9YVtvXTtuLl9sYXllckNvbmZpZ3Nbcy5pZF09czt2YXIgbD1uLl9sYXllcnNbcy5pZF09ZS5kZWZhdWx0JDIwKHMpO2wuX2ZlYXR1cmVGaWx0ZXI9ZS5kZWZhdWx0JDI0KGwuZmlsdGVyKTt9Zm9yKHZhciB1PTAsaD1pO3U8aC5sZW5ndGg7dSs9MSl7dmFyIGM9aFt1XTtkZWxldGUgbi5fbGF5ZXJDb25maWdzW2NdLGRlbGV0ZSBuLl9sYXllcnNbY107fXRoaXMuZmFtaWxpZXNCeVNvdXJjZT17fTtmb3IodmFyIGY9MCxwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17fSxpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBuPXIoZVtpXSksbz10W25dO298fChvPXRbbl09W10pLG8ucHVzaChlW2ldKTt9dmFyIGE9W107Zm9yKHZhciBzIGluIHQpYS5wdXNoKHRbc10pO3JldHVybiBhfShlLnZhbHVlcyh0aGlzLl9sYXllckNvbmZpZ3MpKTtmPHAubGVuZ3RoO2YrPTEpe3ZhciBkPXBbZl0ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuLl9sYXllcnNbZS5pZF19KSxnPWRbMF07aWYoXCJub25lXCIhPT1nLnZpc2liaWxpdHkpe3ZhciBtPWcuc291cmNlfHxcIlwiLHk9bi5mYW1pbGllc0J5U291cmNlW21dO3l8fCh5PW4uZmFtaWxpZXNCeVNvdXJjZVttXT17fSk7dmFyIHY9Zy5zb3VyY2VMYXllcnx8XCJfZ2VvanNvblRpbGVMYXllclwiLHg9eVt2XTt4fHwoeD15W3ZdPVtdKSx4LnB1c2goZCk7fX19O3ZhciBhPWZ1bmN0aW9uKCl7dGhpcy5vcGFjaXR5PTAsdGhpcy50YXJnZXRPcGFjaXR5PTAsdGhpcy50aW1lPTA7fTthLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBhO3JldHVybiBlLm9wYWNpdHk9dGhpcy5vcGFjaXR5LGUudGFyZ2V0T3BhY2l0eT10aGlzLnRhcmdldE9wYWNpdHksZS50aW1lPXRoaXMudGltZSxlfSxlLnJlZ2lzdGVyKFwiT3BhY2l0eVN0YXRlXCIsYSk7dmFyIHM9ZnVuY3Rpb24odCxyLGksbixvLGEscyxsLHUsaCxjLGYpe3ZhciBwPXMudG9wKmwtdSxkPXMuYm90dG9tKmwrdSxnPXMubGVmdCpsLXUsbT1zLnJpZ2h0KmwrdTtpZih0aGlzLmJveFN0YXJ0SW5kZXg9dC5sZW5ndGgsaCl7dmFyIHk9ZC1wLHY9bS1nO3k+MCYmKHk9TWF0aC5tYXgoMTAqbCx5KSx0aGlzLl9hZGRMaW5lQ29sbGlzaW9uQ2lyY2xlcyh0LHIsaSxpLnNlZ21lbnQsdix5LG4sbyxhLGMpKTt9ZWxzZXtpZihmKXt2YXIgeD1uZXcgZS5kZWZhdWx0KGcscCksdz1uZXcgZS5kZWZhdWx0KG0scCksTT1uZXcgZS5kZWZhdWx0KGcsZCksUz1uZXcgZS5kZWZhdWx0KG0sZCksXz1mKk1hdGguUEkvMTgwO3guX3JvdGF0ZShfKSx3Ll9yb3RhdGUoXyksTS5fcm90YXRlKF8pLFMuX3JvdGF0ZShfKSxnPU1hdGgubWluKHgueCx3LngsTS54LFMueCksbT1NYXRoLm1heCh4Lngsdy54LE0ueCxTLngpLHA9TWF0aC5taW4oeC55LHcueSxNLnksUy55KSxkPU1hdGgubWF4KHgueSx3LnksTS55LFMueSk7fXQuZW1wbGFjZUJhY2soaS54LGkueSxnLHAsbSxkLG4sbyxhLDAsMCk7fXRoaXMuYm94RW5kSW5kZXg9dC5sZW5ndGg7fTtzLnByb3RvdHlwZS5fYWRkTGluZUNvbGxpc2lvbkNpcmNsZXM9ZnVuY3Rpb24oZSx0LHIsaSxuLG8sYSxzLGwsdSl7dmFyIGg9by8yLGM9TWF0aC5mbG9vcihuL2gpLGY9MSsuNCpNYXRoLmxvZyh1KS9NYXRoLkxOMixwPU1hdGguZmxvb3IoYypmLzIpLGQ9LW8vMixnPXIsbT1pKzEseT1kLHY9LW4vMix4PXYtbi80O2Rve2lmKC0tbTwwKXtpZih5PnYpcmV0dXJuO209MDticmVha315LT10W21dLmRpc3QoZyksZz10W21dO313aGlsZSh5PngpO2Zvcih2YXIgdz10W21dLmRpc3QodFttKzFdKSxNPS1wO008YytwO00rKyl7dmFyIFM9TSpoLF89ditTO2lmKFM8MCYmKF8rPVMpLFM+biYmKF8rPVMtbiksIShfPHkpKXtmb3IoO3krdzxfOyl7aWYoeSs9dywrK20rMT49dC5sZW5ndGgpcmV0dXJuO3c9dFttXS5kaXN0KHRbbSsxXSk7fXZhciBiPV8teSxJPXRbbV0saz10W20rMV0uc3ViKEkpLl91bml0KCkuX211bHQoYikuX2FkZChJKS5fcm91bmQoKSx6PU1hdGguYWJzKF8tZCk8aD8wOi44KihfLWQpO2UuZW1wbGFjZUJhY2soay54LGsueSwtby8yLC1vLzIsby8yLG8vMixhLHMsbCxvLzIseik7fX19O3ZhciBsPWgsdT1oO2Z1bmN0aW9uIGgoZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBoKSlyZXR1cm4gbmV3IGgoZSx0KTtpZih0aGlzLmRhdGE9ZXx8W10sdGhpcy5sZW5ndGg9dGhpcy5kYXRhLmxlbmd0aCx0aGlzLmNvbXBhcmU9dHx8Yyx0aGlzLmxlbmd0aD4wKWZvcih2YXIgcj0odGhpcy5sZW5ndGg+PjEpLTE7cj49MDtyLS0pdGhpcy5fZG93bihyKTt9ZnVuY3Rpb24gYyhlLHQpe3JldHVybiBlPHQ/LTE6ZT50PzE6MH1mdW5jdGlvbiBmKHQscixpKXt2b2lkIDA9PT1yJiYocj0xKSx2b2lkIDA9PT1pJiYoaT0hMSk7Zm9yKHZhciBuPTEvMCxvPTEvMCxhPS0xLzAscz0tMS8wLHU9dFswXSxoPTA7aDx1Lmxlbmd0aDtoKyspe3ZhciBjPXVbaF07KCFofHxjLng8bikmJihuPWMueCksKCFofHxjLnk8bykmJihvPWMueSksKCFofHxjLng+YSkmJihhPWMueCksKCFofHxjLnk+cykmJihzPWMueSk7fXZhciBmPWEtbixnPXMtbyxtPU1hdGgubWluKGYsZykseT1tLzIsdj1uZXcgbChudWxsLHApO2lmKDA9PT1tKXJldHVybiBuZXcgZS5kZWZhdWx0KG4sbyk7Zm9yKHZhciB4PW47eDxhO3grPW0pZm9yKHZhciB3PW87dzxzO3crPW0pdi5wdXNoKG5ldyBkKHgreSx3K3kseSx0KSk7Zm9yKHZhciBNPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9MCxpPTAsbj1lWzBdLG89MCxhPW4ubGVuZ3RoLHM9YS0xO288YTtzPW8rKyl7dmFyIGw9bltvXSx1PW5bc10saD1sLngqdS55LXUueCpsLnk7cis9KGwueCt1LngpKmgsaSs9KGwueSt1LnkpKmgsdCs9MypoO31yZXR1cm4gbmV3IGQoci90LGkvdCwwLGUpfSh0KSxTPXYubGVuZ3RoO3YubGVuZ3RoOyl7dmFyIF89di5wb3AoKTsoXy5kPk0uZHx8IU0uZCkmJihNPV8saSYmY29uc29sZS5sb2coXCJmb3VuZCBiZXN0ICVkIGFmdGVyICVkIHByb2Jlc1wiLE1hdGgucm91bmQoMWU0Kl8uZCkvMWU0LFMpKSxfLm1heC1NLmQ8PXJ8fCh5PV8uaC8yLHYucHVzaChuZXcgZChfLnAueC15LF8ucC55LXkseSx0KSksdi5wdXNoKG5ldyBkKF8ucC54K3ksXy5wLnkteSx5LHQpKSx2LnB1c2gobmV3IGQoXy5wLngteSxfLnAueSt5LHksdCkpLHYucHVzaChuZXcgZChfLnAueCt5LF8ucC55K3kseSx0KSksUys9NCk7fXJldHVybiBpJiYoY29uc29sZS5sb2coXCJudW0gcHJvYmVzOiBcIitTKSxjb25zb2xlLmxvZyhcImJlc3QgZGlzdGFuY2U6IFwiK00uZCkpLE0ucH1mdW5jdGlvbiBwKGUsdCl7cmV0dXJuIHQubWF4LWUubWF4fWZ1bmN0aW9uIGQodCxyLGksbil7dGhpcy5wPW5ldyBlLmRlZmF1bHQodCxyKSx0aGlzLmg9aSx0aGlzLmQ9ZnVuY3Rpb24odCxyKXtmb3IodmFyIGk9ITEsbj0xLzAsbz0wO288ci5sZW5ndGg7bysrKWZvcih2YXIgYT1yW29dLHM9MCxsPWEubGVuZ3RoLHU9bC0xO3M8bDt1PXMrKyl7dmFyIGg9YVtzXSxjPWFbdV07aC55PnQueSE9Yy55PnQueSYmdC54PChjLngtaC54KSoodC55LWgueSkvKGMueS1oLnkpK2gueCYmKGk9IWkpLG49TWF0aC5taW4obixlLmRpc3RUb1NlZ21lbnRTcXVhcmVkKHQsaCxjKSk7fXJldHVybihpPzE6LTEpKk1hdGguc3FydChuKX0odGhpcy5wLG4pLHRoaXMubWF4PXRoaXMuZCt0aGlzLmgqTWF0aC5TUVJUMjt9ZnVuY3Rpb24gZyh0LHIsaSxuLG8sYSl7dC5jcmVhdGVBcnJheXMoKSx0LnN5bWJvbEluc3RhbmNlcz1bXTt2YXIgcz01MTIqdC5vdmVyc2NhbGluZzt0LnRpbGVQaXhlbFJhdGlvPWUuZGVmYXVsdCQxMC9zLHQuY29tcGFyZVRleHQ9e30sdC5pY29uc05lZWRMaW5lYXI9ITE7dmFyIGw9dC5sYXllcnNbMF0ubGF5b3V0LHU9dC5sYXllcnNbMF0uX3VuZXZhbHVhdGVkTGF5b3V0Ll92YWx1ZXMsaD17fTtpZihcImNvbXBvc2l0ZVwiPT09dC50ZXh0U2l6ZURhdGEuZnVuY3Rpb25UeXBlKXt2YXIgYz10LnRleHRTaXplRGF0YS56b29tUmFuZ2UsZj1jLm1pbixwPWMubWF4O2guY29tcG9zaXRlVGV4dFNpemVzPVt1W1widGV4dC1zaXplXCJdLnBvc3NpYmx5RXZhbHVhdGUobmV3IGUuZGVmYXVsdCQyMyhmKSksdVtcInRleHQtc2l6ZVwiXS5wb3NzaWJseUV2YWx1YXRlKG5ldyBlLmRlZmF1bHQkMjMocCkpXTt9aWYoXCJjb21wb3NpdGVcIj09PXQuaWNvblNpemVEYXRhLmZ1bmN0aW9uVHlwZSl7dmFyIGQ9dC5pY29uU2l6ZURhdGEuem9vbVJhbmdlLGc9ZC5taW4seT1kLm1heDtoLmNvbXBvc2l0ZUljb25TaXplcz1bdVtcImljb24tc2l6ZVwiXS5wb3NzaWJseUV2YWx1YXRlKG5ldyBlLmRlZmF1bHQkMjMoZykpLHVbXCJpY29uLXNpemVcIl0ucG9zc2libHlFdmFsdWF0ZShuZXcgZS5kZWZhdWx0JDIzKHkpKV07fWgubGF5b3V0VGV4dFNpemU9dVtcInRleHQtc2l6ZVwiXS5wb3NzaWJseUV2YWx1YXRlKG5ldyBlLmRlZmF1bHQkMjModC56b29tKzEpKSxoLmxheW91dEljb25TaXplPXVbXCJpY29uLXNpemVcIl0ucG9zc2libHlFdmFsdWF0ZShuZXcgZS5kZWZhdWx0JDIzKHQuem9vbSsxKSksaC50ZXh0TWF4U2l6ZT11W1widGV4dC1zaXplXCJdLnBvc3NpYmx5RXZhbHVhdGUobmV3IGUuZGVmYXVsdCQyMygxOCkpO2Zvcih2YXIgdj0yNCpsLmdldChcInRleHQtbGluZS1oZWlnaHRcIikseD1cIm1hcFwiPT09bC5nZXQoXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiKSYmXCJsaW5lXCI9PT1sLmdldChcInN5bWJvbC1wbGFjZW1lbnRcIiksdz1sLmdldChcInRleHQta2VlcC11cHJpZ2h0XCIpLE09MCxTPXQuZmVhdHVyZXM7TTxTLmxlbmd0aDtNKz0xKXt2YXIgXz1TW01dLGI9bC5nZXQoXCJ0ZXh0LWZvbnRcIikuZXZhbHVhdGUoXyx7fSkuam9pbihcIixcIiksST1yW2JdfHx7fSxrPWlbYl18fHt9LHo9e30sUD1fLnRleHQ7aWYoUCl7dmFyIFQ9bC5nZXQoXCJ0ZXh0LW9mZnNldFwiKS5ldmFsdWF0ZShfLHt9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIDI0KmV9KSxMPTI0KmwuZ2V0KFwidGV4dC1sZXR0ZXItc3BhY2luZ1wiKS5ldmFsdWF0ZShfLHt9KSxEPWUuYWxsb3dzTGV0dGVyU3BhY2luZyhQKT9MOjAsTz1sLmdldChcInRleHQtYW5jaG9yXCIpLmV2YWx1YXRlKF8se30pLEM9bC5nZXQoXCJ0ZXh0LWp1c3RpZnlcIikuZXZhbHVhdGUoXyx7fSksRT1cImxpbmVcIiE9PWwuZ2V0KFwic3ltYm9sLXBsYWNlbWVudFwiKT8yNCpsLmdldChcInRleHQtbWF4LXdpZHRoXCIpLmV2YWx1YXRlKF8se30pOjA7ei5ob3Jpem9udGFsPWUuc2hhcGVUZXh0KFAsSSxFLHYsTyxDLEQsVCwyNCxlLldyaXRpbmdNb2RlLmhvcml6b250YWwpLGUuYWxsb3dzVmVydGljYWxXcml0aW5nTW9kZShQKSYmeCYmdyYmKHoudmVydGljYWw9ZS5zaGFwZVRleHQoUCxJLEUsdixPLEMsRCxULDI0LGUuV3JpdGluZ01vZGUudmVydGljYWwpKTt9dmFyIEE9dm9pZCAwO2lmKF8uaWNvbil7dmFyIE49bltfLmljb25dO04mJihBPWUuc2hhcGVJY29uKG9bXy5pY29uXSxsLmdldChcImljb24tb2Zmc2V0XCIpLmV2YWx1YXRlKF8se30pLGwuZ2V0KFwiaWNvbi1hbmNob3JcIikuZXZhbHVhdGUoXyx7fSkpLHZvaWQgMD09PXQuc2RmSWNvbnM/dC5zZGZJY29ucz1OLnNkZjp0LnNkZkljb25zIT09Ti5zZGYmJmUud2Fybk9uY2UoXCJTdHlsZSBzaGVldCB3YXJuaW5nOiBDYW5ub3QgbWl4IFNERiBhbmQgbm9uLVNERiBpY29ucyBpbiBvbmUgYnVmZmVyXCIpLE4ucGl4ZWxSYXRpbyE9PXQucGl4ZWxSYXRpbz90Lmljb25zTmVlZExpbmVhcj0hMDowIT09bC5nZXQoXCJpY29uLXJvdGF0ZVwiKS5jb25zdGFudE9yKDEpJiYodC5pY29uc05lZWRMaW5lYXI9ITApKTt9KHouaG9yaXpvbnRhbHx8QSkmJm0odCxfLHosQSxrLGgpO31hJiZ0LmdlbmVyYXRlQ29sbGlzaW9uRGVidWdCdWZmZXJzKCk7fWZ1bmN0aW9uIG0odCxyLGksbixsLHUpe3ZhciBoPXUubGF5b3V0VGV4dFNpemUuZXZhbHVhdGUocix7fSksYz11LmxheW91dEljb25TaXplLmV2YWx1YXRlKHIse30pLHA9dS50ZXh0TWF4U2l6ZS5ldmFsdWF0ZShyLHt9KTt2b2lkIDA9PT1wJiYocD1oKTt2YXIgZD10LmxheWVyc1swXS5sYXlvdXQsZz1kLmdldChcInRleHQtb2Zmc2V0XCIpLmV2YWx1YXRlKHIse30pLG09ZC5nZXQoXCJpY29uLW9mZnNldFwiKS5ldmFsdWF0ZShyLHt9KSx4PWgvMjQsdz10LnRpbGVQaXhlbFJhdGlvKngsTT10LnRpbGVQaXhlbFJhdGlvKnAvMjQsUz10LnRpbGVQaXhlbFJhdGlvKmMsXz10LnRpbGVQaXhlbFJhdGlvKmQuZ2V0KFwic3ltYm9sLXNwYWNpbmdcIiksYj1kLmdldChcInRleHQtcGFkZGluZ1wiKSp0LnRpbGVQaXhlbFJhdGlvLEk9ZC5nZXQoXCJpY29uLXBhZGRpbmdcIikqdC50aWxlUGl4ZWxSYXRpbyxrPWQuZ2V0KFwidGV4dC1tYXgtYW5nbGVcIikvMTgwKk1hdGguUEksej1cIm1hcFwiPT09ZC5nZXQoXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiKSYmXCJsaW5lXCI9PT1kLmdldChcInN5bWJvbC1wbGFjZW1lbnRcIiksUD1cIm1hcFwiPT09ZC5nZXQoXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiKSYmXCJsaW5lXCI9PT1kLmdldChcInN5bWJvbC1wbGFjZW1lbnRcIiksVD1fLzIsTD1mdW5jdGlvbihvLGgpe2gueDwwfHxoLng+PWUuZGVmYXVsdCQxMHx8aC55PDB8fGgueT49ZS5kZWZhdWx0JDEwfHx0LnN5bWJvbEluc3RhbmNlcy5wdXNoKGZ1bmN0aW9uKHQscixpLG4sbyxsLHUsaCxjLGYscCxkLGcsbSx2LHgsdyxNLFMsXyxiKXt2YXIgSSxrLHo9dC5hZGRUb0xpbmVWZXJ0ZXhBcnJheShyLGkpLFA9MCxUPTAsTD0wLEQ9bi5ob3Jpem9udGFsP24uaG9yaXpvbnRhbC50ZXh0OlwiXCIsTz1bXTtpZihuLmhvcml6b250YWwpe3ZhciBDPWwubGF5b3V0LmdldChcInRleHQtcm90YXRlXCIpLmV2YWx1YXRlKFMse30pO0k9bmV3IHModSxpLHIsaCxjLGYsbi5ob3Jpem9udGFsLHAsZCxnLHQub3ZlcnNjYWxpbmcsQyksVCs9eSh0LHIsbi5ob3Jpem9udGFsLGwsZyxTLG0seixuLnZlcnRpY2FsP2UuV3JpdGluZ01vZGUuaG9yaXpvbnRhbDplLldyaXRpbmdNb2RlLmhvcml6b250YWxPbmx5LE8sXyxiKSxuLnZlcnRpY2FsJiYoTCs9eSh0LHIsbi52ZXJ0aWNhbCxsLGcsUyxtLHosZS5Xcml0aW5nTW9kZS52ZXJ0aWNhbCxPLF8sYikpO312YXIgRT1JP0kuYm94U3RhcnRJbmRleDp0LmNvbGxpc2lvbkJveEFycmF5Lmxlbmd0aCxBPUk/SS5ib3hFbmRJbmRleDp0LmNvbGxpc2lvbkJveEFycmF5Lmxlbmd0aDtpZihvKXt2YXIgTj1mdW5jdGlvbih0LHIsaSxuLG8sYSl7dmFyIHMsbCx1LGgsYz1yLmltYWdlLGY9aS5sYXlvdXQscD1yLnRvcC0xL2MucGl4ZWxSYXRpbyxkPXIubGVmdC0xL2MucGl4ZWxSYXRpbyxnPXIuYm90dG9tKzEvYy5waXhlbFJhdGlvLG09ci5yaWdodCsxL2MucGl4ZWxSYXRpbztpZihcIm5vbmVcIiE9PWYuZ2V0KFwiaWNvbi10ZXh0LWZpdFwiKSYmbyl7dmFyIHk9bS1kLHY9Zy1wLHg9Zi5nZXQoXCJ0ZXh0LXNpemVcIikuZXZhbHVhdGUoYSx7fSkvMjQsdz1vLmxlZnQqeCxNPW8ucmlnaHQqeCxTPW8udG9wKngsXz1NLXcsYj1vLmJvdHRvbSp4LVMsST1mLmdldChcImljb24tdGV4dC1maXQtcGFkZGluZ1wiKVswXSxrPWYuZ2V0KFwiaWNvbi10ZXh0LWZpdC1wYWRkaW5nXCIpWzFdLHo9Zi5nZXQoXCJpY29uLXRleHQtZml0LXBhZGRpbmdcIilbMl0sUD1mLmdldChcImljb24tdGV4dC1maXQtcGFkZGluZ1wiKVszXSxUPVwid2lkdGhcIj09PWYuZ2V0KFwiaWNvbi10ZXh0LWZpdFwiKT8uNSooYi12KTowLEw9XCJoZWlnaHRcIj09PWYuZ2V0KFwiaWNvbi10ZXh0LWZpdFwiKT8uNSooXy15KTowLEQ9XCJ3aWR0aFwiPT09Zi5nZXQoXCJpY29uLXRleHQtZml0XCIpfHxcImJvdGhcIj09PWYuZ2V0KFwiaWNvbi10ZXh0LWZpdFwiKT9fOnksTz1cImhlaWdodFwiPT09Zi5nZXQoXCJpY29uLXRleHQtZml0XCIpfHxcImJvdGhcIj09PWYuZ2V0KFwiaWNvbi10ZXh0LWZpdFwiKT9iOnY7cz1uZXcgZS5kZWZhdWx0KHcrTC1QLFMrVC1JKSxsPW5ldyBlLmRlZmF1bHQodytMK2srRCxTK1QtSSksdT1uZXcgZS5kZWZhdWx0KHcrTCtrK0QsUytUK3orTyksaD1uZXcgZS5kZWZhdWx0KHcrTC1QLFMrVCt6K08pO31lbHNlIHM9bmV3IGUuZGVmYXVsdChkLHApLGw9bmV3IGUuZGVmYXVsdChtLHApLHU9bmV3IGUuZGVmYXVsdChtLGcpLGg9bmV3IGUuZGVmYXVsdChkLGcpO3ZhciBDPWkubGF5b3V0LmdldChcImljb24tcm90YXRlXCIpLmV2YWx1YXRlKGEse30pKk1hdGguUEkvMTgwO2lmKEMpe3ZhciBFPU1hdGguc2luKEMpLEE9TWF0aC5jb3MoQyksTj1bQSwtRSxFLEFdO3MuX21hdE11bHQoTiksbC5fbWF0TXVsdChOKSxoLl9tYXRNdWx0KE4pLHUuX21hdE11bHQoTik7fXJldHVyblt7dGw6cyx0cjpsLGJsOmgsYnI6dSx0ZXg6Yy5wYWRkZWRSZWN0LHdyaXRpbmdNb2RlOnZvaWQgMCxnbHlwaE9mZnNldDpbMCwwXX1dfSgwLG8sbCwwLG4uaG9yaXpvbnRhbCxTKSxCPWwubGF5b3V0LmdldChcImljb24tcm90YXRlXCIpLmV2YWx1YXRlKFMse30pO2s9bmV3IHModSxpLHIsaCxjLGYsbyx2LHgsITEsdC5vdmVyc2NhbGluZyxCKSxQPTQqTi5sZW5ndGg7dmFyIFI9dC5pY29uU2l6ZURhdGEsJD1udWxsO1wic291cmNlXCI9PT1SLmZ1bmN0aW9uVHlwZT8kPVsxMCpsLmxheW91dC5nZXQoXCJpY29uLXNpemVcIikuZXZhbHVhdGUoUyx7fSldOlwiY29tcG9zaXRlXCI9PT1SLmZ1bmN0aW9uVHlwZSYmKCQ9WzEwKmIuY29tcG9zaXRlSWNvblNpemVzWzBdLmV2YWx1YXRlKFMse30pLDEwKmIuY29tcG9zaXRlSWNvblNpemVzWzFdLmV2YWx1YXRlKFMse30pXSksdC5hZGRTeW1ib2xzKHQuaWNvbixOLCQsTSx3LFMsITEscix6LmxpbmVTdGFydEluZGV4LHoubGluZUxlbmd0aCk7fXZhciBGPWs/ay5ib3hTdGFydEluZGV4OnQuY29sbGlzaW9uQm94QXJyYXkubGVuZ3RoLEc9az9rLmJveEVuZEluZGV4OnQuY29sbGlzaW9uQm94QXJyYXkubGVuZ3RoO3QuZ2x5cGhPZmZzZXRBcnJheS5sZW5ndGg+PWUuZGVmYXVsdCQyNy5NQVhfR0xZUEhTJiZlLndhcm5PbmNlKFwiVG9vIG1hbnkgZ2x5cGhzIGJlaW5nIHJlbmRlcmVkIGluIGEgdGlsZS4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2lzc3Vlcy8yOTA3XCIpO3ZhciBWPW5ldyBhLGo9bmV3IGE7cmV0dXJue2tleTpELHRleHRCb3hTdGFydEluZGV4OkUsdGV4dEJveEVuZEluZGV4OkEsaWNvbkJveFN0YXJ0SW5kZXg6RixpY29uQm94RW5kSW5kZXg6Ryx0ZXh0T2Zmc2V0Om0saWNvbk9mZnNldDpNLGFuY2hvcjpyLGxpbmU6aSxmZWF0dXJlSW5kZXg6aCxmZWF0dXJlOlMsbnVtR2x5cGhWZXJ0aWNlczpULG51bVZlcnRpY2FsR2x5cGhWZXJ0aWNlczpMLG51bUljb25WZXJ0aWNlczpQLHRleHRPcGFjaXR5U3RhdGU6VixpY29uT3BhY2l0eVN0YXRlOmosaXNEdXBsaWNhdGU6ITEscGxhY2VkVGV4dFN5bWJvbEluZGljZXM6Tyxjcm9zc1RpbGVJRDowfX0odCxoLG8saSxuLHQubGF5ZXJzWzBdLHQuY29sbGlzaW9uQm94QXJyYXksci5pbmRleCxyLnNvdXJjZUxheWVySW5kZXgsdC5pbmRleCx3LGIseixnLFMsSSxQLG0scixsLHUpKTt9O2lmKFwibGluZVwiPT09ZC5nZXQoXCJzeW1ib2wtcGxhY2VtZW50XCIpKWZvcih2YXIgRD0wLE89ZnVuY3Rpb24odCxyLGksbixvKXtmb3IodmFyIGE9W10scz0wO3M8dC5sZW5ndGg7cysrKWZvcih2YXIgbD10W3NdLHU9dm9pZCAwLGg9MDtoPGwubGVuZ3RoLTE7aCsrKXt2YXIgYz1sW2hdLGY9bFtoKzFdO2MueDxyJiZmLng8cnx8KGMueDxyP2M9bmV3IGUuZGVmYXVsdChyLGMueSsoZi55LWMueSkqKChyLWMueCkvKGYueC1jLngpKSkuX3JvdW5kKCk6Zi54PHImJihmPW5ldyBlLmRlZmF1bHQocixjLnkrKGYueS1jLnkpKigoci1jLngpLyhmLngtYy54KSkpLl9yb3VuZCgpKSxjLnk8aSYmZi55PGl8fChjLnk8aT9jPW5ldyBlLmRlZmF1bHQoYy54KyhmLngtYy54KSooKGktYy55KS8oZi55LWMueSkpLGkpLl9yb3VuZCgpOmYueTxpJiYoZj1uZXcgZS5kZWZhdWx0KGMueCsoZi54LWMueCkqKChpLWMueSkvKGYueS1jLnkpKSxpKS5fcm91bmQoKSksYy54Pj1uJiZmLng+PW58fChjLng+PW4/Yz1uZXcgZS5kZWZhdWx0KG4sYy55KyhmLnktYy55KSooKG4tYy54KS8oZi54LWMueCkpKS5fcm91bmQoKTpmLng+PW4mJihmPW5ldyBlLmRlZmF1bHQobixjLnkrKGYueS1jLnkpKigobi1jLngpLyhmLngtYy54KSkpLl9yb3VuZCgpKSxjLnk+PW8mJmYueT49b3x8KGMueT49bz9jPW5ldyBlLmRlZmF1bHQoYy54KyhmLngtYy54KSooKG8tYy55KS8oZi55LWMueSkpLG8pLl9yb3VuZCgpOmYueT49byYmKGY9bmV3IGUuZGVmYXVsdChjLngrKGYueC1jLngpKigoby1jLnkpLyhmLnktYy55KSksbykuX3JvdW5kKCkpLHUmJmMuZXF1YWxzKHVbdS5sZW5ndGgtMV0pfHwodT1bY10sYS5wdXNoKHUpKSx1LnB1c2goZikpKSkpO31yZXR1cm4gYX0oci5nZW9tZXRyeSwwLDAsZS5kZWZhdWx0JDEwLGUuZGVmYXVsdCQxMCk7RDxPLmxlbmd0aDtEKz0xKWZvcih2YXIgQz1PW0RdLEU9MCxBPW8oQyxfLGssaS52ZXJ0aWNhbHx8aS5ob3Jpem9udGFsLG4sMjQsTSx0Lm92ZXJzY2FsaW5nLGUuZGVmYXVsdCQxMCk7RTxBLmxlbmd0aDtFKz0xKXt2YXIgTj1BW0VdLEI9aS5ob3Jpem9udGFsO0ImJnYodCxCLnRleHQsVCxOKXx8TChDLE4pO31lbHNlIGlmKFwiUG9seWdvblwiPT09ci50eXBlKWZvcih2YXIgUj0wLCQ9ZS5kZWZhdWx0JDI2KHIuZ2VvbWV0cnksMCk7UjwkLmxlbmd0aDtSKz0xKXt2YXIgRj0kW1JdLEc9ZihGLDE2KTtMKEZbMF0sbmV3IGUuZGVmYXVsdCQyNShHLngsRy55LDApKTt9ZWxzZSBpZihcIkxpbmVTdHJpbmdcIj09PXIudHlwZSlmb3IodmFyIFY9MCxqPXIuZ2VvbWV0cnk7VjxqLmxlbmd0aDtWKz0xKXt2YXIgSj1qW1ZdO0woSixuZXcgZS5kZWZhdWx0JDI1KEpbMF0ueCxKWzBdLnksMCkpO31lbHNlIGlmKFwiUG9pbnRcIj09PXIudHlwZSlmb3IodmFyIFc9MCxZPXIuZ2VvbWV0cnk7VzxZLmxlbmd0aDtXKz0xKWZvcih2YXIgWj0wLFg9WVtXXTtaPFgubGVuZ3RoO1orPTEpe3ZhciBxPVhbWl07TChbcV0sbmV3IGUuZGVmYXVsdCQyNShxLngscS55LDApKTt9fWZ1bmN0aW9uIHkodCxyLGksbixvLGEscyxsLHUsaCxjLGYpe3ZhciBwPWZ1bmN0aW9uKHQscixpLG4sbyxhKXtmb3IodmFyIHM9aS5sYXlvdXQuZ2V0KFwidGV4dC1yb3RhdGVcIikuZXZhbHVhdGUobyx7fSkqTWF0aC5QSS8xODAsbD1pLmxheW91dC5nZXQoXCJ0ZXh0LW9mZnNldFwiKS5ldmFsdWF0ZShvLHt9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIDI0KmV9KSx1PXIucG9zaXRpb25lZEdseXBocyxoPVtdLGM9MDtjPHUubGVuZ3RoO2MrKyl7dmFyIGY9dVtjXSxwPWFbZi5nbHlwaF07aWYocCl7dmFyIGQ9cC5yZWN0O2lmKGQpe3ZhciBnPWUuR0xZUEhfUEJGX0JPUkRFUisxLG09cC5tZXRyaWNzLmFkdmFuY2UvMix5PW4/W2YueCttLGYueV06WzAsMF0sdj1uP1swLDBdOltmLngrbStsWzBdLGYueStsWzFdXSx4PXAubWV0cmljcy5sZWZ0LWctbSt2WzBdLHc9LXAubWV0cmljcy50b3AtZyt2WzFdLE09eCtkLncsUz13K2QuaCxfPW5ldyBlLmRlZmF1bHQoeCx3KSxiPW5ldyBlLmRlZmF1bHQoTSx3KSxJPW5ldyBlLmRlZmF1bHQoeCxTKSxrPW5ldyBlLmRlZmF1bHQoTSxTKTtpZihuJiZmLnZlcnRpY2FsKXt2YXIgej1uZXcgZS5kZWZhdWx0KC1tLG0pLFA9LU1hdGguUEkvMixUPW5ldyBlLmRlZmF1bHQoNSwwKTtfLl9yb3RhdGVBcm91bmQoUCx6KS5fYWRkKFQpLGIuX3JvdGF0ZUFyb3VuZChQLHopLl9hZGQoVCksSS5fcm90YXRlQXJvdW5kKFAseikuX2FkZChUKSxrLl9yb3RhdGVBcm91bmQoUCx6KS5fYWRkKFQpO31pZihzKXt2YXIgTD1NYXRoLnNpbihzKSxEPU1hdGguY29zKHMpLE89W0QsLUwsTCxEXTtfLl9tYXRNdWx0KE8pLGIuX21hdE11bHQoTyksSS5fbWF0TXVsdChPKSxrLl9tYXRNdWx0KE8pO31oLnB1c2goe3RsOl8sdHI6YixibDpJLGJyOmssdGV4OmQsd3JpdGluZ01vZGU6ci53cml0aW5nTW9kZSxnbHlwaE9mZnNldDp5fSk7fX19cmV0dXJuIGh9KDAsaSxuLG8sYSxjKSxkPXQudGV4dFNpemVEYXRhLGc9bnVsbDtyZXR1cm5cInNvdXJjZVwiPT09ZC5mdW5jdGlvblR5cGU/Zz1bMTAqbi5sYXlvdXQuZ2V0KFwidGV4dC1zaXplXCIpLmV2YWx1YXRlKGEse30pXTpcImNvbXBvc2l0ZVwiPT09ZC5mdW5jdGlvblR5cGUmJihnPVsxMCpmLmNvbXBvc2l0ZVRleHRTaXplc1swXS5ldmFsdWF0ZShhLHt9KSwxMCpmLmNvbXBvc2l0ZVRleHRTaXplc1sxXS5ldmFsdWF0ZShhLHt9KV0pLHQuYWRkU3ltYm9scyh0LnRleHQscCxnLHMsbyxhLHUscixsLmxpbmVTdGFydEluZGV4LGwubGluZUxlbmd0aCksaC5wdXNoKHQudGV4dC5wbGFjZWRTeW1ib2xBcnJheS5sZW5ndGgtMSksNCpwLmxlbmd0aH1mdW5jdGlvbiB2KGUsdCxyLGkpe3ZhciBuPWUuY29tcGFyZVRleHQ7aWYodCBpbiBuKXtmb3IodmFyIG89blt0XSxhPW8ubGVuZ3RoLTE7YT49MDthLS0paWYoaS5kaXN0KG9bYV0pPHIpcmV0dXJuITB9ZWxzZSBuW3RdPVtdO3JldHVybiBuW3RdLnB1c2goaSksITF9aC5wcm90b3R5cGU9e3B1c2g6ZnVuY3Rpb24oZSl7dGhpcy5kYXRhLnB1c2goZSksdGhpcy5sZW5ndGgrKyx0aGlzLl91cCh0aGlzLmxlbmd0aC0xKTt9LHBvcDpmdW5jdGlvbigpe2lmKDAhPT10aGlzLmxlbmd0aCl7dmFyIGU9dGhpcy5kYXRhWzBdO3JldHVybiB0aGlzLmxlbmd0aC0tLHRoaXMubGVuZ3RoPjAmJih0aGlzLmRhdGFbMF09dGhpcy5kYXRhW3RoaXMubGVuZ3RoXSx0aGlzLl9kb3duKDApKSx0aGlzLmRhdGEucG9wKCksZX19LHBlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhWzBdfSxfdXA6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuZGF0YSxyPXRoaXMuY29tcGFyZSxpPXRbZV07ZT4wOyl7dmFyIG49ZS0xPj4xLG89dFtuXTtpZihyKGksbyk+PTApYnJlYWs7dFtlXT1vLGU9bjt9dFtlXT1pO30sX2Rvd246ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuZGF0YSxyPXRoaXMuY29tcGFyZSxpPXRoaXMubGVuZ3RoPj4xLG49dFtlXTtlPGk7KXt2YXIgbz0xKyhlPDwxKSxhPW8rMSxzPXRbb107aWYoYTx0aGlzLmxlbmd0aCYmcih0W2FdLHMpPDAmJihvPWEscz10W2FdKSxyKHMsbik+PTApYnJlYWs7dFtlXT1zLGU9bzt9dFtlXT1uO319LGwuZGVmYXVsdD11O3ZhciB4PWZ1bmN0aW9uKHQpe3ZhciByPW5ldyBlLkFscGhhSW1hZ2Uoe3dpZHRoOjAsaGVpZ2h0OjB9KSxpPXt9LG49bmV3IGUuZGVmYXVsdCQzKDAsMCx7YXV0b1Jlc2l6ZTohMH0pO2Zvcih2YXIgbyBpbiB0KXt2YXIgYT10W29dLHM9aVtvXT17fTtmb3IodmFyIGwgaW4gYSl7dmFyIHU9YVsrbF07aWYodSYmMCE9PXUuYml0bWFwLndpZHRoJiYwIT09dS5iaXRtYXAuaGVpZ2h0KXt2YXIgaD1uLnBhY2tPbmUodS5iaXRtYXAud2lkdGgrMix1LmJpdG1hcC5oZWlnaHQrMik7ci5yZXNpemUoe3dpZHRoOm4udyxoZWlnaHQ6bi5ofSksZS5BbHBoYUltYWdlLmNvcHkodS5iaXRtYXAscix7eDowLHk6MH0se3g6aC54KzEseTpoLnkrMX0sdS5iaXRtYXApLHNbbF09e3JlY3Q6aCxtZXRyaWNzOnUubWV0cmljc307fX19bi5zaHJpbmsoKSxyLnJlc2l6ZSh7d2lkdGg6bi53LGhlaWdodDpuLmh9KSx0aGlzLmltYWdlPXIsdGhpcy5wb3NpdGlvbnM9aTt9O2UucmVnaXN0ZXIoXCJHbHlwaEF0bGFzXCIseCk7dmFyIHc9ZnVuY3Rpb24odCl7dGhpcy50aWxlSUQ9bmV3IGUuT3ZlcnNjYWxlZFRpbGVJRCh0LnRpbGVJRC5vdmVyc2NhbGVkWix0LnRpbGVJRC53cmFwLHQudGlsZUlELmNhbm9uaWNhbC56LHQudGlsZUlELmNhbm9uaWNhbC54LHQudGlsZUlELmNhbm9uaWNhbC55KSx0aGlzLnVpZD10LnVpZCx0aGlzLnpvb209dC56b29tLHRoaXMucGl4ZWxSYXRpbz10LnBpeGVsUmF0aW8sdGhpcy50aWxlU2l6ZT10LnRpbGVTaXplLHRoaXMuc291cmNlPXQuc291cmNlLHRoaXMub3ZlcnNjYWxpbmc9dGhpcy50aWxlSUQub3ZlcnNjYWxlRmFjdG9yKCksdGhpcy5zaG93Q29sbGlzaW9uQm94ZXM9dC5zaG93Q29sbGlzaW9uQm94ZXMsdGhpcy5jb2xsZWN0UmVzb3VyY2VUaW1pbmc9ISF0LmNvbGxlY3RSZXNvdXJjZVRpbWluZzt9O2Z1bmN0aW9uIE0odCxyKXtmb3IodmFyIGk9bmV3IGUuZGVmYXVsdCQyMyhyKSxuPTAsbz10O248by5sZW5ndGg7bis9MSl7b1tuXS5yZWNhbGN1bGF0ZShpKTt9fXcucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQscixpLG4pe3ZhciBvPXRoaXM7dGhpcy5zdGF0dXM9XCJwYXJzaW5nXCIsdGhpcy5kYXRhPXQsdGhpcy5jb2xsaXNpb25Cb3hBcnJheT1uZXcgZS5Db2xsaXNpb25Cb3hBcnJheTt2YXIgYT1uZXcgZS5kZWZhdWx0JDI5KE9iamVjdC5rZXlzKHQubGF5ZXJzKS5zb3J0KCkpLHM9bmV3IGUuZGVmYXVsdCQyOCh0aGlzLnRpbGVJRCk7cy5idWNrZXRMYXllcklEcz1bXTt2YXIgbCx1LGgsYz17fSxmPXtmZWF0dXJlSW5kZXg6cyxpY29uRGVwZW5kZW5jaWVzOnt9LGdseXBoRGVwZW5kZW5jaWVzOnt9fSxwPXIuZmFtaWxpZXNCeVNvdXJjZVt0aGlzLnNvdXJjZV07Zm9yKHZhciBkIGluIHApe3ZhciBtPXQubGF5ZXJzW2RdO2lmKG0pezE9PT1tLnZlcnNpb24mJmUud2Fybk9uY2UoJ1ZlY3RvciB0aWxlIHNvdXJjZSBcIicrby5zb3VyY2UrJ1wiIGxheWVyIFwiJytkKydcIiBkb2VzIG5vdCB1c2UgdmVjdG9yIHRpbGUgc3BlYyB2MiBhbmQgdGhlcmVmb3JlIG1heSBoYXZlIHNvbWUgcmVuZGVyaW5nIGVycm9ycy4nKTtmb3IodmFyIHk9YS5lbmNvZGUoZCksdj1bXSx3PTA7dzxtLmxlbmd0aDt3Kyspe3ZhciBTPW0uZmVhdHVyZSh3KTt2LnB1c2goe2ZlYXR1cmU6UyxpbmRleDp3LHNvdXJjZUxheWVySW5kZXg6eX0pO31mb3IodmFyIF89MCxiPXBbZF07XzxiLmxlbmd0aDtfKz0xKXt2YXIgST1iW19dLGs9SVswXTtpZighKGsubWluem9vbSYmby56b29tPE1hdGguZmxvb3Ioay5taW56b29tKSkpaWYoIShrLm1heHpvb20mJm8uem9vbT49ay5tYXh6b29tKSlpZihcIm5vbmVcIiE9PWsudmlzaWJpbGl0eSlNKEksby56b29tKSwoY1trLmlkXT1rLmNyZWF0ZUJ1Y2tldCh7aW5kZXg6cy5idWNrZXRMYXllcklEcy5sZW5ndGgsbGF5ZXJzOkksem9vbTpvLnpvb20scGl4ZWxSYXRpbzpvLnBpeGVsUmF0aW8sb3ZlcnNjYWxpbmc6by5vdmVyc2NhbGluZyxjb2xsaXNpb25Cb3hBcnJheTpvLmNvbGxpc2lvbkJveEFycmF5LHNvdXJjZUxheWVySW5kZXg6eSxzb3VyY2VJRDpvLnNvdXJjZX0pKS5wb3B1bGF0ZSh2LGYpLHMuYnVja2V0TGF5ZXJJRHMucHVzaChJLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5pZH0pKTt9fX12YXIgej1lLm1hcE9iamVjdChmLmdseXBoRGVwZW5kZW5jaWVzLGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Qua2V5cyhlKS5tYXAoTnVtYmVyKX0pO09iamVjdC5rZXlzKHopLmxlbmd0aD9pLnNlbmQoXCJnZXRHbHlwaHNcIix7dWlkOnRoaXMudWlkLHN0YWNrczp6fSxmdW5jdGlvbihlLHQpe2x8fChsPWUsdT10LFQuY2FsbChvKSk7fSk6dT17fTt2YXIgUD1PYmplY3Qua2V5cyhmLmljb25EZXBlbmRlbmNpZXMpO2Z1bmN0aW9uIFQoKXtpZihsKXJldHVybiBuKGwpO2lmKHUmJmgpe3ZhciB0PW5ldyB4KHUpLHI9bmV3IGUuZGVmYXVsdCQzMChoKTtmb3IodmFyIGkgaW4gYyl7dmFyIG89Y1tpXTtvIGluc3RhbmNlb2YgZS5kZWZhdWx0JDI3JiYoTShvLmxheWVycyx0aGlzLnpvb20pLGcobyx1LHQucG9zaXRpb25zLGgsci5wb3NpdGlvbnMsdGhpcy5zaG93Q29sbGlzaW9uQm94ZXMpKTt9dGhpcy5zdGF0dXM9XCJkb25lXCIsbihudWxsLHtidWNrZXRzOmUudmFsdWVzKGMpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hZS5pc0VtcHR5KCl9KSxmZWF0dXJlSW5kZXg6cyxjb2xsaXNpb25Cb3hBcnJheTp0aGlzLmNvbGxpc2lvbkJveEFycmF5LGdseXBoQXRsYXNJbWFnZTp0LmltYWdlLGljb25BdGxhc0ltYWdlOnIuaW1hZ2V9KTt9fVAubGVuZ3RoP2kuc2VuZChcImdldEltYWdlc1wiLHtpY29uczpQfSxmdW5jdGlvbihlLHQpe2x8fChsPWUsaD10LFQuY2FsbChvKSk7fSk6aD17fSxULmNhbGwodGhpcyk7fTt2YXIgUz1cInVuZGVmaW5lZFwiIT10eXBlb2YgcGVyZm9ybWFuY2UsXz17Z2V0RW50cmllc0J5TmFtZTpmdW5jdGlvbihlKXtyZXR1cm4hIShTJiZwZXJmb3JtYW5jZSYmcGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5TmFtZSkmJnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeU5hbWUoZSl9LG1hcms6ZnVuY3Rpb24oZSl7cmV0dXJuISEoUyYmcGVyZm9ybWFuY2UmJnBlcmZvcm1hbmNlLm1hcmspJiZwZXJmb3JtYW5jZS5tYXJrKGUpfSxtZWFzdXJlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4hIShTJiZwZXJmb3JtYW5jZSYmcGVyZm9ybWFuY2UubWVhc3VyZSkmJnBlcmZvcm1hbmNlLm1lYXN1cmUoZSx0LHIpfSxjbGVhck1hcmtzOmZ1bmN0aW9uKGUpe3JldHVybiEhKFMmJnBlcmZvcm1hbmNlJiZwZXJmb3JtYW5jZS5jbGVhck1hcmtzKSYmcGVyZm9ybWFuY2UuY2xlYXJNYXJrcyhlKX0sY2xlYXJNZWFzdXJlczpmdW5jdGlvbihlKXtyZXR1cm4hIShTJiZwZXJmb3JtYW5jZSYmcGVyZm9ybWFuY2UuY2xlYXJNZWFzdXJlcykmJnBlcmZvcm1hbmNlLmNsZWFyTWVhc3VyZXMoZSl9fSxiPWZ1bmN0aW9uKGUpe3RoaXMuX21hcmtzPXtzdGFydDpbZS51cmwsXCJzdGFydFwiXS5qb2luKFwiI1wiKSxlbmQ6W2UudXJsLFwiZW5kXCJdLmpvaW4oXCIjXCIpLG1lYXN1cmU6ZS51cmwudG9TdHJpbmcoKX0sXy5tYXJrKHRoaXMuX21hcmtzLnN0YXJ0KTt9O2Z1bmN0aW9uIEkodCxyKXt2YXIgaT1lLmdldEFycmF5QnVmZmVyKHQucmVxdWVzdCxmdW5jdGlvbih0LGkpe3Q/cih0KTppJiZyKG51bGwse3ZlY3RvclRpbGU6bmV3IGUuZGVmYXVsdCQzMS5WZWN0b3JUaWxlKG5ldyBlLmRlZmF1bHQkMzIoaS5kYXRhKSkscmF3RGF0YTppLmRhdGEsY2FjaGVDb250cm9sOmkuY2FjaGVDb250cm9sLGV4cGlyZXM6aS5leHBpcmVzfSk7fSk7cmV0dXJuIGZ1bmN0aW9uKCl7aS5hYm9ydCgpLHIoKTt9fWIucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe18ubWFyayh0aGlzLl9tYXJrcy5lbmQpO3ZhciBlPV8uZ2V0RW50cmllc0J5TmFtZSh0aGlzLl9tYXJrcy5tZWFzdXJlKTtyZXR1cm4gMD09PWUubGVuZ3RoJiYoXy5tZWFzdXJlKHRoaXMuX21hcmtzLm1lYXN1cmUsdGhpcy5fbWFya3Muc3RhcnQsdGhpcy5fbWFya3MuZW5kKSxlPV8uZ2V0RW50cmllc0J5TmFtZSh0aGlzLl9tYXJrcy5tZWFzdXJlKSxfLmNsZWFyTWFya3ModGhpcy5fbWFya3Muc3RhcnQpLF8uY2xlYXJNYXJrcyh0aGlzLl9tYXJrcy5lbmQpLF8uY2xlYXJNZWFzdXJlcyh0aGlzLl9tYXJrcy5tZWFzdXJlKSksZX0sXy5QZXJmb3JtYW5jZT1iO3ZhciBrPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmFjdG9yPWUsdGhpcy5sYXllckluZGV4PXQsdGhpcy5sb2FkVmVjdG9yRGF0YT1yfHxJLHRoaXMubG9hZGluZz17fSx0aGlzLmxvYWRlZD17fTt9O2sucHJvdG90eXBlLmxvYWRUaWxlPWZ1bmN0aW9uKHQscil7dmFyIGk9dGhpcyxuPXQudWlkO3RoaXMubG9hZGluZ3x8KHRoaXMubG9hZGluZz17fSk7dmFyIG89ISEodCYmdC5yZXF1ZXN0JiZ0LnJlcXVlc3QuY29sbGVjdFJlc291cmNlVGltaW5nKSYmbmV3IF8uUGVyZm9ybWFuY2UodC5yZXF1ZXN0KSxhPXRoaXMubG9hZGluZ1tuXT1uZXcgdyh0KTthLmFib3J0PXRoaXMubG9hZFZlY3RvckRhdGEodCxmdW5jdGlvbih0LHMpe2lmKGRlbGV0ZSBpLmxvYWRpbmdbbl0sdHx8IXMpcmV0dXJuIHIodCk7dmFyIGw9cy5yYXdEYXRhLHU9e307cy5leHBpcmVzJiYodS5leHBpcmVzPXMuZXhwaXJlcykscy5jYWNoZUNvbnRyb2wmJih1LmNhY2hlQ29udHJvbD1zLmNhY2hlQ29udHJvbCk7dmFyIGg9e307aWYobyl7dmFyIGM9by5maW5pc2goKTtjJiYoaC5yZXNvdXJjZVRpbWluZz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKSk7fWEudmVjdG9yVGlsZT1zLnZlY3RvclRpbGUsYS5wYXJzZShzLnZlY3RvclRpbGUsaS5sYXllckluZGV4LGkuYWN0b3IsZnVuY3Rpb24odCxpKXtpZih0fHwhaSlyZXR1cm4gcih0KTtyKG51bGwsZS5leHRlbmQoe3Jhd1RpbGVEYXRhOmwuc2xpY2UoMCl9LGksdSxoKSk7fSksaS5sb2FkZWQ9aS5sb2FkZWR8fHt9LGkubG9hZGVkW25dPWE7fSk7fSxrLnByb3RvdHlwZS5yZWxvYWRUaWxlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5sb2FkZWQsaT1lLnVpZCxuPXRoaXM7aWYociYmcltpXSl7dmFyIG89cltpXTtvLnNob3dDb2xsaXNpb25Cb3hlcz1lLnNob3dDb2xsaXNpb25Cb3hlczt2YXIgYT1mdW5jdGlvbihlLHIpe3ZhciBpPW8ucmVsb2FkQ2FsbGJhY2s7aSYmKGRlbGV0ZSBvLnJlbG9hZENhbGxiYWNrLG8ucGFyc2Uoby52ZWN0b3JUaWxlLG4ubGF5ZXJJbmRleCxuLmFjdG9yLGkpKSx0KGUscik7fTtcInBhcnNpbmdcIj09PW8uc3RhdHVzP28ucmVsb2FkQ2FsbGJhY2s9YTpcImRvbmVcIj09PW8uc3RhdHVzJiZvLnBhcnNlKG8udmVjdG9yVGlsZSx0aGlzLmxheWVySW5kZXgsdGhpcy5hY3RvcixhKTt9fSxrLnByb3RvdHlwZS5hYm9ydFRpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmxvYWRpbmcsaT1lLnVpZDtyJiZyW2ldJiZyW2ldLmFib3J0JiYocltpXS5hYm9ydCgpLGRlbGV0ZSByW2ldKSx0KCk7fSxrLnByb3RvdHlwZS5yZW1vdmVUaWxlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5sb2FkZWQsaT1lLnVpZDtyJiZyW2ldJiZkZWxldGUgcltpXSx0KCk7fTt2YXIgej1mdW5jdGlvbigpe3RoaXMubG9hZGluZz17fSx0aGlzLmxvYWRlZD17fTt9O3oucHJvdG90eXBlLmxvYWRUaWxlPWZ1bmN0aW9uKHQscil7dmFyIGk9dC51aWQsbj10LmVuY29kaW5nLG89bmV3IGUuZGVmYXVsdCQzMyhpKTt0aGlzLmxvYWRpbmdbaV09byxvLmxvYWRGcm9tSW1hZ2UodC5yYXdJbWFnZURhdGEsbiksZGVsZXRlIHRoaXMubG9hZGluZ1tpXSx0aGlzLmxvYWRlZD10aGlzLmxvYWRlZHx8e30sdGhpcy5sb2FkZWRbaV09byxyKG51bGwsbyk7fSx6LnByb3RvdHlwZS5yZW1vdmVUaWxlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubG9hZGVkLHI9ZS51aWQ7dCYmdFtyXSYmZGVsZXRlIHRbcl07fTt2YXIgUD17UkFESVVTOjYzNzgxMzcsRkxBVFRFTklORzoxLzI5OC4yNTcyMjM1NjMsUE9MQVJfUkFESVVTOjYzNTY3NTIuMzE0Mn07ZnVuY3Rpb24gVChlKXt2YXIgdD0wO2lmKGUmJmUubGVuZ3RoPjApe3QrPU1hdGguYWJzKEwoZVswXSkpO2Zvcih2YXIgcj0xO3I8ZS5sZW5ndGg7cisrKXQtPU1hdGguYWJzKEwoZVtyXSkpO31yZXR1cm4gdH1mdW5jdGlvbiBMKGUpe3ZhciB0LHIsaSxuLG8sYSxzPTAsbD1lLmxlbmd0aDtpZihsPjIpe2ZvcihhPTA7YTxsO2ErKylhPT09bC0yPyhpPWwtMixuPWwtMSxvPTApOmE9PT1sLTE/KGk9bC0xLG49MCxvPTEpOihpPWEsbj1hKzEsbz1hKzIpLHQ9ZVtpXSxyPWVbbl0scys9KEQoZVtvXVswXSktRCh0WzBdKSkqTWF0aC5zaW4oRChyWzFdKSk7cz1zKlAuUkFESVVTKlAuUkFESVVTLzI7fXJldHVybiBzfWZ1bmN0aW9uIEQoZSl7cmV0dXJuIGUqTWF0aC5QSS8xODB9dmFyIE89e2dlb21ldHJ5OmZ1bmN0aW9uIGUodCl7dmFyIHIsaT0wO3N3aXRjaCh0LnR5cGUpe2Nhc2VcIlBvbHlnb25cIjpyZXR1cm4gVCh0LmNvb3JkaW5hdGVzKTtjYXNlXCJNdWx0aVBvbHlnb25cIjpmb3Iocj0wO3I8dC5jb29yZGluYXRlcy5sZW5ndGg7cisrKWkrPVQodC5jb29yZGluYXRlc1tyXSk7cmV0dXJuIGk7Y2FzZVwiUG9pbnRcIjpjYXNlXCJNdWx0aVBvaW50XCI6Y2FzZVwiTGluZVN0cmluZ1wiOmNhc2VcIk11bHRpTGluZVN0cmluZ1wiOnJldHVybiAwO2Nhc2VcIkdlb21ldHJ5Q29sbGVjdGlvblwiOmZvcihyPTA7cjx0Lmdlb21ldHJpZXMubGVuZ3RoO3IrKylpKz1lKHQuZ2VvbWV0cmllc1tyXSk7cmV0dXJuIGl9fSxyaW5nOkx9LEM9ZnVuY3Rpb24gZSh0LHIpe3N3aXRjaCh0JiZ0LnR5cGV8fG51bGwpe2Nhc2VcIkZlYXR1cmVDb2xsZWN0aW9uXCI6cmV0dXJuIHQuZmVhdHVyZXM9dC5mZWF0dXJlcy5tYXAoRShlLHIpKSx0O2Nhc2VcIkZlYXR1cmVcIjpyZXR1cm4gdC5nZW9tZXRyeT1lKHQuZ2VvbWV0cnksciksdDtjYXNlXCJQb2x5Z29uXCI6Y2FzZVwiTXVsdGlQb2x5Z29uXCI6cmV0dXJuIGZ1bmN0aW9uKGUsdCl7XCJQb2x5Z29uXCI9PT1lLnR5cGU/ZS5jb29yZGluYXRlcz1BKGUuY29vcmRpbmF0ZXMsdCk6XCJNdWx0aVBvbHlnb25cIj09PWUudHlwZSYmKGUuY29vcmRpbmF0ZXM9ZS5jb29yZGluYXRlcy5tYXAoRShBLHQpKSk7cmV0dXJuIGV9KHQscik7ZGVmYXVsdDpyZXR1cm4gdH19O2Z1bmN0aW9uIEUoZSx0KXtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUocix0KX19ZnVuY3Rpb24gQShlLHQpe3Q9ISF0LGVbMF09TihlWzBdLHQpO2Zvcih2YXIgcj0xO3I8ZS5sZW5ndGg7cisrKWVbcl09TihlW3JdLCF0KTtyZXR1cm4gZX1mdW5jdGlvbiBOKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBPLnJpbmcoZSk+PTB9KGUpPT09dD9lOmUucmV2ZXJzZSgpfXZhciBCPWUuZGVmYXVsdCQzMS5WZWN0b3JUaWxlRmVhdHVyZS5wcm90b3R5cGUudG9HZW9KU09OLFI9ZnVuY3Rpb24odCl7dGhpcy5fZmVhdHVyZT10LHRoaXMuZXh0ZW50PWUuZGVmYXVsdCQxMCx0aGlzLnR5cGU9dC50eXBlLHRoaXMucHJvcGVydGllcz10LnRhZ3MsXCJpZFwiaW4gdCYmIWlzTmFOKHQuaWQpJiYodGhpcy5pZD1wYXJzZUludCh0LmlkLDEwKSk7fTtSLnByb3RvdHlwZS5sb2FkR2VvbWV0cnk9ZnVuY3Rpb24oKXtpZigxPT09dGhpcy5fZmVhdHVyZS50eXBlKXtmb3IodmFyIHQ9W10scj0wLGk9dGhpcy5fZmVhdHVyZS5nZW9tZXRyeTtyPGkubGVuZ3RoO3IrPTEpe3ZhciBuPWlbcl07dC5wdXNoKFtuZXcgZS5kZWZhdWx0KG5bMF0sblsxXSldKTt9cmV0dXJuIHR9Zm9yKHZhciBvPVtdLGE9MCxzPXRoaXMuX2ZlYXR1cmUuZ2VvbWV0cnk7YTxzLmxlbmd0aDthKz0xKXtmb3IodmFyIGw9W10sdT0wLGg9c1thXTt1PGgubGVuZ3RoO3UrPTEpe3ZhciBjPWhbdV07bC5wdXNoKG5ldyBlLmRlZmF1bHQoY1swXSxjWzFdKSk7fW8ucHVzaChsKTt9cmV0dXJuIG99LFIucHJvdG90eXBlLnRvR2VvSlNPTj1mdW5jdGlvbihlLHQscil7cmV0dXJuIEIuY2FsbCh0aGlzLGUsdCxyKX07dmFyICQ9ZnVuY3Rpb24odCl7dGhpcy5sYXllcnM9e19nZW9qc29uVGlsZUxheWVyOnRoaXN9LHRoaXMubmFtZT1cIl9nZW9qc29uVGlsZUxheWVyXCIsdGhpcy5leHRlbnQ9ZS5kZWZhdWx0JDEwLHRoaXMubGVuZ3RoPXQubGVuZ3RoLHRoaXMuX2ZlYXR1cmVzPXQ7fTskLnByb3RvdHlwZS5mZWF0dXJlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUih0aGlzLl9mZWF0dXJlc1tlXSl9O3ZhciBGPWUuX19tb2R1bGVFeHBvcnRzLlZlY3RvclRpbGVGZWF0dXJlLEc9VjtmdW5jdGlvbiBWKGUsdCl7dGhpcy5vcHRpb25zPXR8fHt9LHRoaXMuZmVhdHVyZXM9ZSx0aGlzLmxlbmd0aD1lLmxlbmd0aDt9ZnVuY3Rpb24gaihlLHQpe3RoaXMuaWQ9XCJudW1iZXJcIj09dHlwZW9mIGUuaWQ/ZS5pZDp2b2lkIDAsdGhpcy50eXBlPWUudHlwZSx0aGlzLnJhd0dlb21ldHJ5PTE9PT1lLnR5cGU/W2UuZ2VvbWV0cnldOmUuZ2VvbWV0cnksdGhpcy5wcm9wZXJ0aWVzPWUudGFncyx0aGlzLmV4dGVudD10fHw0MDk2O31WLnByb3RvdHlwZS5mZWF0dXJlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaih0aGlzLmZlYXR1cmVzW2VdLHRoaXMub3B0aW9ucy5leHRlbnQpfSxqLnByb3RvdHlwZS5sb2FkR2VvbWV0cnk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJhd0dlb21ldHJ5O3RoaXMuZ2VvbWV0cnk9W107Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe2Zvcih2YXIgaT10W3JdLG49W10sbz0wO288aS5sZW5ndGg7bysrKW4ucHVzaChuZXcgZS5kZWZhdWx0JDM0KGlbb11bMF0saVtvXVsxXSkpO3RoaXMuZ2VvbWV0cnkucHVzaChuKTt9cmV0dXJuIHRoaXMuZ2VvbWV0cnl9LGoucHJvdG90eXBlLmJib3g9ZnVuY3Rpb24oKXt0aGlzLmdlb21ldHJ5fHx0aGlzLmxvYWRHZW9tZXRyeSgpO2Zvcih2YXIgZT10aGlzLmdlb21ldHJ5LHQ9MS8wLHI9LTEvMCxpPTEvMCxuPS0xLzAsbz0wO288ZS5sZW5ndGg7bysrKWZvcih2YXIgYT1lW29dLHM9MDtzPGEubGVuZ3RoO3MrKyl7dmFyIGw9YVtzXTt0PU1hdGgubWluKHQsbC54KSxyPU1hdGgubWF4KHIsbC54KSxpPU1hdGgubWluKGksbC55KSxuPU1hdGgubWF4KG4sbC55KTt9cmV0dXJuW3QsaSxyLG5dfSxqLnByb3RvdHlwZS50b0dlb0pTT049Ri5wcm90b3R5cGUudG9HZW9KU09OO3ZhciBKPVgsVz1YLFk9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciByPXt9O2Zvcih2YXIgaSBpbiBlKXJbaV09bmV3IEcoZVtpXS5mZWF0dXJlcyx0KSxyW2ldLm5hbWU9aSxyW2ldLnZlcnNpb249dC52ZXJzaW9uLHJbaV0uZXh0ZW50PXQuZXh0ZW50O3JldHVybiBYKHtsYXllcnM6cn0pfSxaPUc7ZnVuY3Rpb24gWCh0KXt2YXIgcj1uZXcgZS5fX21vZHVsZUV4cG9ydHMkMTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gZS5sYXllcnMpdC53cml0ZU1lc3NhZ2UoMyxxLGUubGF5ZXJzW3JdKTt9KHQsciksci5maW5pc2goKX1mdW5jdGlvbiBxKGUsdCl7dmFyIHI7dC53cml0ZVZhcmludEZpZWxkKDE1LGUudmVyc2lvbnx8MSksdC53cml0ZVN0cmluZ0ZpZWxkKDEsZS5uYW1lfHxcIlwiKSx0LndyaXRlVmFyaW50RmllbGQoNSxlLmV4dGVudHx8NDA5Nik7dmFyIGk9e2tleXM6W10sdmFsdWVzOltdLGtleWNhY2hlOnt9LHZhbHVlY2FjaGU6e319O2ZvcihyPTA7cjxlLmxlbmd0aDtyKyspaS5mZWF0dXJlPWUuZmVhdHVyZShyKSx0LndyaXRlTWVzc2FnZSgyLFUsaSk7dmFyIG49aS5rZXlzO2ZvcihyPTA7cjxuLmxlbmd0aDtyKyspdC53cml0ZVN0cmluZ0ZpZWxkKDMsbltyXSk7dmFyIG89aS52YWx1ZXM7Zm9yKHI9MDtyPG8ubGVuZ3RoO3IrKyl0LndyaXRlTWVzc2FnZSg0LHRlLG9bcl0pO31mdW5jdGlvbiBVKGUsdCl7dmFyIHI9ZS5mZWF0dXJlO3ZvaWQgMCE9PXIuaWQmJnQud3JpdGVWYXJpbnRGaWVsZCgxLHIuaWQpLHQud3JpdGVNZXNzYWdlKDIsSCxlKSx0LndyaXRlVmFyaW50RmllbGQoMyxyLnR5cGUpLHQud3JpdGVNZXNzYWdlKDQsZWUscik7fWZ1bmN0aW9uIEgoZSx0KXt2YXIgcj1lLmZlYXR1cmUsaT1lLmtleXMsbj1lLnZhbHVlcyxvPWUua2V5Y2FjaGUsYT1lLnZhbHVlY2FjaGU7Zm9yKHZhciBzIGluIHIucHJvcGVydGllcyl7dmFyIGw9b1tzXTt2b2lkIDA9PT1sJiYoaS5wdXNoKHMpLGw9aS5sZW5ndGgtMSxvW3NdPWwpLHQud3JpdGVWYXJpbnQobCk7dmFyIHU9ci5wcm9wZXJ0aWVzW3NdLGg9dHlwZW9mIHU7XCJzdHJpbmdcIiE9PWgmJlwiYm9vbGVhblwiIT09aCYmXCJudW1iZXJcIiE9PWgmJih1PUpTT04uc3RyaW5naWZ5KHUpKTt2YXIgYz1oK1wiOlwiK3UsZj1hW2NdO3ZvaWQgMD09PWYmJihuLnB1c2godSksZj1uLmxlbmd0aC0xLGFbY109ZiksdC53cml0ZVZhcmludChmKTt9fWZ1bmN0aW9uIFEoZSx0KXtyZXR1cm4odDw8MykrKDcmZSl9ZnVuY3Rpb24gSyhlKXtyZXR1cm4gZTw8MV5lPj4zMX1mdW5jdGlvbiBlZShlLHQpe2Zvcih2YXIgcj1lLmxvYWRHZW9tZXRyeSgpLGk9ZS50eXBlLG49MCxvPTAsYT1yLmxlbmd0aCxzPTA7czxhO3MrKyl7dmFyIGw9cltzXSx1PTE7MT09PWkmJih1PWwubGVuZ3RoKSx0LndyaXRlVmFyaW50KFEoMSx1KSk7Zm9yKHZhciBoPTM9PT1pP2wubGVuZ3RoLTE6bC5sZW5ndGgsYz0wO2M8aDtjKyspezE9PT1jJiYxIT09aSYmdC53cml0ZVZhcmludChRKDIsaC0xKSk7dmFyIGY9bFtjXS54LW4scD1sW2NdLnktbzt0LndyaXRlVmFyaW50KEsoZikpLHQud3JpdGVWYXJpbnQoSyhwKSksbis9ZixvKz1wO30zPT09aSYmdC53cml0ZVZhcmludChRKDcsMCkpO319ZnVuY3Rpb24gdGUoZSx0KXt2YXIgcj10eXBlb2YgZTtcInN0cmluZ1wiPT09cj90LndyaXRlU3RyaW5nRmllbGQoMSxlKTpcImJvb2xlYW5cIj09PXI/dC53cml0ZUJvb2xlYW5GaWVsZCg3LGUpOlwibnVtYmVyXCI9PT1yJiYoZSUxIT0wP3Qud3JpdGVEb3VibGVGaWVsZCgzLGUpOmU8MD90LndyaXRlU1ZhcmludEZpZWxkKDYsZSk6dC53cml0ZVZhcmludEZpZWxkKDUsZSkpO31KLmZyb21WZWN0b3JUaWxlSnM9VyxKLmZyb21HZW9qc29uVnQ9WSxKLkdlb0pTT05XcmFwcGVyPVo7dmFyIHJlPWZ1bmN0aW9uIGUodCxyLGksbixvLGEpe2lmKG8tbjw9aSlyZXR1cm47dmFyIHM9TWF0aC5mbG9vcigobitvKS8yKTshZnVuY3Rpb24gZSh0LHIsaSxuLG8sYSl7Zm9yKDtvPm47KXtpZihvLW4+NjAwKXt2YXIgcz1vLW4rMSxsPWktbisxLHU9TWF0aC5sb2cocyksaD0uNSpNYXRoLmV4cCgyKnUvMyksYz0uNSpNYXRoLnNxcnQodSpoKihzLWgpL3MpKihsLXMvMjwwPy0xOjEpLGY9TWF0aC5tYXgobixNYXRoLmZsb29yKGktbCpoL3MrYykpLHA9TWF0aC5taW4obyxNYXRoLmZsb29yKGkrKHMtbCkqaC9zK2MpKTtlKHQscixpLGYscCxhKTt9dmFyIGQ9clsyKmkrYV0sZz1uLG09bztmb3IoaWUodCxyLG4saSksclsyKm8rYV0+ZCYmaWUodCxyLG4sbyk7ZzxtOyl7Zm9yKGllKHQscixnLG0pLGcrKyxtLS07clsyKmcrYV08ZDspZysrO2Zvcig7clsyKm0rYV0+ZDspbS0tO31yWzIqbithXT09PWQ/aWUodCxyLG4sbSk6aWUodCxyLCsrbSxvKSxtPD1pJiYobj1tKzEpLGk8PW0mJihvPW0tMSk7fX0odCxyLHMsbixvLGElMik7ZSh0LHIsaSxuLHMtMSxhKzEpO2UodCxyLGkscysxLG8sYSsxKTt9O2Z1bmN0aW9uIGllKGUsdCxyLGkpe25lKGUscixpKSxuZSh0LDIqciwyKmkpLG5lKHQsMipyKzEsMippKzEpO31mdW5jdGlvbiBuZShlLHQscil7dmFyIGk9ZVt0XTtlW3RdPWVbcl0sZVtyXT1pO312YXIgb2U9ZnVuY3Rpb24oZSx0LHIsaSxuLG8sYSl7dmFyIHMsbCx1PVswLGUubGVuZ3RoLTEsMF0saD1bXTtmb3IoO3UubGVuZ3RoOyl7dmFyIGM9dS5wb3AoKSxmPXUucG9wKCkscD11LnBvcCgpO2lmKGYtcDw9YSlmb3IodmFyIGQ9cDtkPD1mO2QrKylzPXRbMipkXSxsPXRbMipkKzFdLHM+PXImJnM8PW4mJmw+PWkmJmw8PW8mJmgucHVzaChlW2RdKTtlbHNle3ZhciBnPU1hdGguZmxvb3IoKHArZikvMik7cz10WzIqZ10sbD10WzIqZysxXSxzPj1yJiZzPD1uJiZsPj1pJiZsPD1vJiZoLnB1c2goZVtnXSk7dmFyIG09KGMrMSklMjsoMD09PWM/cjw9czppPD1sKSYmKHUucHVzaChwKSx1LnB1c2goZy0xKSx1LnB1c2gobSkpLCgwPT09Yz9uPj1zOm8+PWwpJiYodS5wdXNoKGcrMSksdS5wdXNoKGYpLHUucHVzaChtKSk7fX1yZXR1cm4gaH07dmFyIGFlPWZ1bmN0aW9uKGUsdCxyLGksbixvKXt2YXIgYT1bMCxlLmxlbmd0aC0xLDBdLHM9W10sbD1uKm47Zm9yKDthLmxlbmd0aDspe3ZhciB1PWEucG9wKCksaD1hLnBvcCgpLGM9YS5wb3AoKTtpZihoLWM8PW8pZm9yKHZhciBmPWM7Zjw9aDtmKyspc2UodFsyKmZdLHRbMipmKzFdLHIsaSk8PWwmJnMucHVzaChlW2ZdKTtlbHNle3ZhciBwPU1hdGguZmxvb3IoKGMraCkvMiksZD10WzIqcF0sZz10WzIqcCsxXTtzZShkLGcscixpKTw9bCYmcy5wdXNoKGVbcF0pO3ZhciBtPSh1KzEpJTI7KDA9PT11P3Itbjw9ZDppLW48PWcpJiYoYS5wdXNoKGMpLGEucHVzaChwLTEpLGEucHVzaChtKSksKDA9PT11P3Irbj49ZDppK24+PWcpJiYoYS5wdXNoKHArMSksYS5wdXNoKGgpLGEucHVzaChtKSk7fX1yZXR1cm4gc307ZnVuY3Rpb24gc2UoZSx0LHIsaSl7dmFyIG49ZS1yLG89dC1pO3JldHVybiBuKm4rbypvfXZhciBsZT1mdW5jdGlvbihlLHQscixpLG4pe3JldHVybiBuZXcgdWUoZSx0LHIsaSxuKX07ZnVuY3Rpb24gdWUoZSx0LHIsaSxuKXt0PXR8fGhlLHI9cnx8Y2Usbj1ufHxBcnJheSx0aGlzLm5vZGVTaXplPWl8fDY0LHRoaXMucG9pbnRzPWUsdGhpcy5pZHM9bmV3IG4oZS5sZW5ndGgpLHRoaXMuY29vcmRzPW5ldyBuKDIqZS5sZW5ndGgpO2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKXRoaXMuaWRzW29dPW8sdGhpcy5jb29yZHNbMipvXT10KGVbb10pLHRoaXMuY29vcmRzWzIqbysxXT1yKGVbb10pO3JlKHRoaXMuaWRzLHRoaXMuY29vcmRzLHRoaXMubm9kZVNpemUsMCx0aGlzLmlkcy5sZW5ndGgtMSwwKTt9ZnVuY3Rpb24gaGUoZSl7cmV0dXJuIGVbMF19ZnVuY3Rpb24gY2UoZSl7cmV0dXJuIGVbMV19dWUucHJvdG90eXBlPXtyYW5nZTpmdW5jdGlvbihlLHQscixpKXtyZXR1cm4gb2UodGhpcy5pZHMsdGhpcy5jb29yZHMsZSx0LHIsaSx0aGlzLm5vZGVTaXplKX0sd2l0aGluOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gYWUodGhpcy5pZHMsdGhpcy5jb29yZHMsZSx0LHIsdGhpcy5ub2RlU2l6ZSl9fTt2YXIgZmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBwZShlKX07ZnVuY3Rpb24gcGUoZSl7dGhpcy5vcHRpb25zPXdlKE9iamVjdC5jcmVhdGUodGhpcy5vcHRpb25zKSxlKSx0aGlzLnRyZWVzPW5ldyBBcnJheSh0aGlzLm9wdGlvbnMubWF4Wm9vbSsxKTt9ZnVuY3Rpb24gZGUoZSx0LHIsaSxuKXtyZXR1cm57eDplLHk6dCx6b29tOjEvMCxpZDppLHByb3BlcnRpZXM6bixwYXJlbnRJZDotMSxudW1Qb2ludHM6cn19ZnVuY3Rpb24gZ2UoZSx0KXt2YXIgcj1lLmdlb21ldHJ5LmNvb3JkaW5hdGVzO3JldHVybnt4OnZlKHJbMF0pLHk6eGUoclsxXSksem9vbToxLzAsaWQ6dCxwYXJlbnRJZDotMX19ZnVuY3Rpb24gbWUoZSl7cmV0dXJue3R5cGU6XCJGZWF0dXJlXCIscHJvcGVydGllczp5ZShlKSxnZW9tZXRyeTp7dHlwZTpcIlBvaW50XCIsY29vcmRpbmF0ZXM6WyhpPWUueCwzNjAqKGktLjUpKSwodD1lLnkscj0oMTgwLTM2MCp0KSpNYXRoLlBJLzE4MCwzNjAqTWF0aC5hdGFuKE1hdGguZXhwKHIpKS9NYXRoLlBJLTkwKV19fTt2YXIgdCxyLGk7fWZ1bmN0aW9uIHllKGUpe3ZhciB0PWUubnVtUG9pbnRzLHI9dD49MWU0P01hdGgucm91bmQodC8xZTMpK1wia1wiOnQ+PTFlMz9NYXRoLnJvdW5kKHQvMTAwKS8xMCtcImtcIjp0O3JldHVybiB3ZSh3ZSh7fSxlLnByb3BlcnRpZXMpLHtjbHVzdGVyOiEwLGNsdXN0ZXJfaWQ6ZS5pZCxwb2ludF9jb3VudDp0LHBvaW50X2NvdW50X2FiYnJldmlhdGVkOnJ9KX1mdW5jdGlvbiB2ZShlKXtyZXR1cm4gZS8zNjArLjV9ZnVuY3Rpb24geGUoZSl7dmFyIHQ9TWF0aC5zaW4oZSpNYXRoLlBJLzE4MCkscj0uNS0uMjUqTWF0aC5sb2coKDErdCkvKDEtdCkpL01hdGguUEk7cmV0dXJuIHI8MD8wOnI+MT8xOnJ9ZnVuY3Rpb24gd2UoZSx0KXtmb3IodmFyIHIgaW4gdCllW3JdPXRbcl07cmV0dXJuIGV9ZnVuY3Rpb24gTWUoZSl7cmV0dXJuIGUueH1mdW5jdGlvbiBTZShlKXtyZXR1cm4gZS55fWZ1bmN0aW9uIF9lKGUsdCxyLGksbixvKXt2YXIgYT1uLXIscz1vLWk7aWYoMCE9PWF8fDAhPT1zKXt2YXIgbD0oKGUtcikqYSsodC1pKSpzKS8oYSphK3Mqcyk7bD4xPyhyPW4saT1vKTpsPjAmJihyKz1hKmwsaSs9cypsKTt9cmV0dXJuKGE9ZS1yKSphKyhzPXQtaSkqc31mdW5jdGlvbiBiZShlLHQscixpKXt2YXIgbj17aWQ6ZXx8bnVsbCx0eXBlOnQsZ2VvbWV0cnk6cix0YWdzOmksbWluWDoxLzAsbWluWToxLzAsbWF4WDotMS8wLG1heFk6LTEvMH07cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2VvbWV0cnkscj1lLnR5cGU7aWYoXCJQb2ludFwiPT09cnx8XCJNdWx0aVBvaW50XCI9PT1yfHxcIkxpbmVTdHJpbmdcIj09PXIpSWUoZSx0KTtlbHNlIGlmKFwiUG9seWdvblwiPT09cnx8XCJNdWx0aUxpbmVTdHJpbmdcIj09PXIpZm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspSWUoZSx0W2ldKTtlbHNlIGlmKFwiTXVsdGlQb2x5Z29uXCI9PT1yKWZvcihpPTA7aTx0Lmxlbmd0aDtpKyspZm9yKHZhciBuPTA7bjx0W2ldLmxlbmd0aDtuKyspSWUoZSx0W2ldW25dKTt9KG4pLG59ZnVuY3Rpb24gSWUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrPTMpZS5taW5YPU1hdGgubWluKGUubWluWCx0W3JdKSxlLm1pblk9TWF0aC5taW4oZS5taW5ZLHRbcisxXSksZS5tYXhYPU1hdGgubWF4KGUubWF4WCx0W3JdKSxlLm1heFk9TWF0aC5tYXgoZS5tYXhZLHRbcisxXSk7fWZ1bmN0aW9uIGtlKGUsdCxyKXtpZih0Lmdlb21ldHJ5KXt2YXIgaT10Lmdlb21ldHJ5LmNvb3JkaW5hdGVzLG49dC5nZW9tZXRyeS50eXBlLG89TWF0aC5wb3coci50b2xlcmFuY2UvKCgxPDxyLm1heFpvb20pKnIuZXh0ZW50KSwyKSxhPVtdO2lmKFwiUG9pbnRcIj09PW4pemUoaSxhKTtlbHNlIGlmKFwiTXVsdGlQb2ludFwiPT09bilmb3IodmFyIHM9MDtzPGkubGVuZ3RoO3MrKyl6ZShpW3NdLGEpO2Vsc2UgaWYoXCJMaW5lU3RyaW5nXCI9PT1uKVBlKGksYSxvLCExKTtlbHNlIGlmKFwiTXVsdGlMaW5lU3RyaW5nXCI9PT1uKXtpZihyLmxpbmVNZXRyaWNzKXtmb3Iocz0wO3M8aS5sZW5ndGg7cysrKWE9W10sUGUoaVtzXSxhLG8sITEpLGUucHVzaChiZSh0LmlkLFwiTGluZVN0cmluZ1wiLGEsdC5wcm9wZXJ0aWVzKSk7cmV0dXJufVRlKGksYSxvLCExKTt9ZWxzZSBpZihcIlBvbHlnb25cIj09PW4pVGUoaSxhLG8sITApO2Vsc2V7aWYoXCJNdWx0aVBvbHlnb25cIiE9PW4pe2lmKFwiR2VvbWV0cnlDb2xsZWN0aW9uXCI9PT1uKXtmb3Iocz0wO3M8dC5nZW9tZXRyeS5nZW9tZXRyaWVzLmxlbmd0aDtzKyspa2UoZSx7aWQ6dC5pZCxnZW9tZXRyeTp0Lmdlb21ldHJ5Lmdlb21ldHJpZXNbc10scHJvcGVydGllczp0LnByb3BlcnRpZXN9LHIpO3JldHVybn10aHJvdyBuZXcgRXJyb3IoXCJJbnB1dCBkYXRhIGlzIG5vdCBhIHZhbGlkIEdlb0pTT04gb2JqZWN0LlwiKX1mb3Iocz0wO3M8aS5sZW5ndGg7cysrKXt2YXIgbD1bXTtUZShpW3NdLGwsbywhMCksYS5wdXNoKGwpO319ZS5wdXNoKGJlKHQuaWQsbixhLHQucHJvcGVydGllcykpO319ZnVuY3Rpb24gemUoZSx0KXt0LnB1c2goTGUoZVswXSkpLHQucHVzaChEZShlWzFdKSksdC5wdXNoKDApO31mdW5jdGlvbiBQZShlLHQscixpKXtmb3IodmFyIG4sbyxhPTAscz0wO3M8ZS5sZW5ndGg7cysrKXt2YXIgbD1MZShlW3NdWzBdKSx1PURlKGVbc11bMV0pO3QucHVzaChsKSx0LnB1c2godSksdC5wdXNoKDApLHM+MCYmKGErPWk/KG4qdS1sKm8pLzI6TWF0aC5zcXJ0KE1hdGgucG93KGwtbiwyKStNYXRoLnBvdyh1LW8sMikpKSxuPWwsbz11O312YXIgaD10Lmxlbmd0aC0zO3RbMl09MSxmdW5jdGlvbiBlKHQscixpLG4pe2Zvcih2YXIgbyxhPW4scz10W3JdLGw9dFtyKzFdLHU9dFtpXSxoPXRbaSsxXSxjPXIrMztjPGk7Yys9Myl7dmFyIGY9X2UodFtjXSx0W2MrMV0scyxsLHUsaCk7Zj5hJiYobz1jLGE9Zik7fWE+biYmKG8tcj4zJiZlKHQscixvLG4pLHRbbysyXT1hLGktbz4zJiZlKHQsbyxpLG4pKTt9KHQsMCxoLHIpLHRbaCsyXT0xLHQuc2l6ZT1NYXRoLmFicyhhKSx0LnN0YXJ0PTAsdC5lbmQ9dC5zaXplO31mdW5jdGlvbiBUZShlLHQscixpKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89W107UGUoZVtuXSxvLHIsaSksdC5wdXNoKG8pO319ZnVuY3Rpb24gTGUoZSl7cmV0dXJuIGUvMzYwKy41fWZ1bmN0aW9uIERlKGUpe3ZhciB0PU1hdGguc2luKGUqTWF0aC5QSS8xODApLHI9LjUtLjI1Kk1hdGgubG9nKCgxK3QpLygxLXQpKS9NYXRoLlBJO3JldHVybiByPDA/MDpyPjE/MTpyfWZ1bmN0aW9uIE9lKGUsdCxyLGksbixvLGEscyl7aWYoaS89dCxvPj0oci89dCkmJmE8aSlyZXR1cm4gZTtpZihhPHJ8fG8+PWkpcmV0dXJuIG51bGw7Zm9yKHZhciBsPVtdLHU9MDt1PGUubGVuZ3RoO3UrKyl7dmFyIGg9ZVt1XSxjPWguZ2VvbWV0cnksZj1oLnR5cGUscD0wPT09bj9oLm1pblg6aC5taW5ZLGQ9MD09PW4/aC5tYXhYOmgubWF4WTtpZihwPj1yJiZkPGkpbC5wdXNoKGgpO2Vsc2UgaWYoIShkPHJ8fHA+PWkpKXt2YXIgZz1bXTtpZihcIlBvaW50XCI9PT1mfHxcIk11bHRpUG9pbnRcIj09PWYpQ2UoYyxnLHIsaSxuKTtlbHNlIGlmKFwiTGluZVN0cmluZ1wiPT09ZilFZShjLGcscixpLG4sITEscy5saW5lTWV0cmljcyk7ZWxzZSBpZihcIk11bHRpTGluZVN0cmluZ1wiPT09ZilOZShjLGcscixpLG4sITEpO2Vsc2UgaWYoXCJQb2x5Z29uXCI9PT1mKU5lKGMsZyxyLGksbiwhMCk7ZWxzZSBpZihcIk11bHRpUG9seWdvblwiPT09Zilmb3IodmFyIG09MDttPGMubGVuZ3RoO20rKyl7dmFyIHk9W107TmUoY1ttXSx5LHIsaSxuLCEwKSx5Lmxlbmd0aCYmZy5wdXNoKHkpO31pZihnLmxlbmd0aCl7aWYocy5saW5lTWV0cmljcyYmXCJMaW5lU3RyaW5nXCI9PT1mKXtmb3IobT0wO208Zy5sZW5ndGg7bSsrKWwucHVzaChiZShoLmlkLGYsZ1ttXSxoLnRhZ3MpKTtjb250aW51ZX1cIkxpbmVTdHJpbmdcIiE9PWYmJlwiTXVsdGlMaW5lU3RyaW5nXCIhPT1mfHwoMT09PWcubGVuZ3RoPyhmPVwiTGluZVN0cmluZ1wiLGc9Z1swXSk6Zj1cIk11bHRpTGluZVN0cmluZ1wiKSxcIlBvaW50XCIhPT1mJiZcIk11bHRpUG9pbnRcIiE9PWZ8fChmPTM9PT1nLmxlbmd0aD9cIlBvaW50XCI6XCJNdWx0aVBvaW50XCIpLGwucHVzaChiZShoLmlkLGYsZyxoLnRhZ3MpKTt9fX1yZXR1cm4gbC5sZW5ndGg/bDpudWxsfWZ1bmN0aW9uIENlKGUsdCxyLGksbil7Zm9yKHZhciBvPTA7bzxlLmxlbmd0aDtvKz0zKXt2YXIgYT1lW28rbl07YT49ciYmYTw9aSYmKHQucHVzaChlW29dKSx0LnB1c2goZVtvKzFdKSx0LnB1c2goZVtvKzJdKSk7fX1mdW5jdGlvbiBFZShlLHQscixpLG4sbyxhKXtmb3IodmFyIHMsbCx1PUFlKGUpLGg9MD09PW4/UmU6JGUsYz1lLnN0YXJ0LGY9MDtmPGUubGVuZ3RoLTM7Zis9Myl7dmFyIHA9ZVtmXSxkPWVbZisxXSxnPWVbZisyXSxtPWVbZiszXSx5PWVbZis0XSx2PTA9PT1uP3A6ZCx4PTA9PT1uP206eSx3PSExO2EmJihzPU1hdGguc3FydChNYXRoLnBvdyhwLW0sMikrTWF0aC5wb3coZC15LDIpKSksdjxyP3g+PXImJihsPWgodSxwLGQsbSx5LHIpLGEmJih1LnN0YXJ0PWMrcypsKSk6dj49aT94PGkmJihsPWgodSxwLGQsbSx5LGkpLGEmJih1LnN0YXJ0PWMrcypsKSk6QmUodSxwLGQsZykseDxyJiZ2Pj1yJiYobD1oKHUscCxkLG0seSxyKSx3PSEwKSx4PmkmJnY8PWkmJihsPWgodSxwLGQsbSx5LGkpLHc9ITApLCFvJiZ3JiYoYSYmKHUuZW5kPWMrcypsKSx0LnB1c2godSksdT1BZShlKSksYSYmKGMrPXMpO312YXIgTT1lLmxlbmd0aC0zO3A9ZVtNXSxkPWVbTSsxXSxnPWVbTSsyXSwodj0wPT09bj9wOmQpPj1yJiZ2PD1pJiZCZSh1LHAsZCxnKSxNPXUubGVuZ3RoLTMsbyYmTT49MyYmKHVbTV0hPT11WzBdfHx1W00rMV0hPT11WzFdKSYmQmUodSx1WzBdLHVbMV0sdVsyXSksdS5sZW5ndGgmJnQucHVzaCh1KTt9ZnVuY3Rpb24gQWUoZSl7dmFyIHQ9W107cmV0dXJuIHQuc2l6ZT1lLnNpemUsdC5zdGFydD1lLnN0YXJ0LHQuZW5kPWUuZW5kLHR9ZnVuY3Rpb24gTmUoZSx0LHIsaSxuLG8pe2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKUVlKGVbYV0sdCxyLGksbixvLCExKTt9ZnVuY3Rpb24gQmUoZSx0LHIsaSl7ZS5wdXNoKHQpLGUucHVzaChyKSxlLnB1c2goaSk7fWZ1bmN0aW9uIFJlKGUsdCxyLGksbixvKXt2YXIgYT0oby10KS8oaS10KTtyZXR1cm4gZS5wdXNoKG8pLGUucHVzaChyKyhuLXIpKmEpLGUucHVzaCgxKSxhfWZ1bmN0aW9uICRlKGUsdCxyLGksbixvKXt2YXIgYT0oby1yKS8obi1yKTtyZXR1cm4gZS5wdXNoKHQrKGktdCkqYSksZS5wdXNoKG8pLGUucHVzaCgxKSxhfWZ1bmN0aW9uIEZlKGUsdCl7Zm9yKHZhciByPVtdLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG4sbz1lW2ldLGE9by50eXBlO2lmKFwiUG9pbnRcIj09PWF8fFwiTXVsdGlQb2ludFwiPT09YXx8XCJMaW5lU3RyaW5nXCI9PT1hKW49R2Uoby5nZW9tZXRyeSx0KTtlbHNlIGlmKFwiTXVsdGlMaW5lU3RyaW5nXCI9PT1hfHxcIlBvbHlnb25cIj09PWEpe249W107Zm9yKHZhciBzPTA7czxvLmdlb21ldHJ5Lmxlbmd0aDtzKyspbi5wdXNoKEdlKG8uZ2VvbWV0cnlbc10sdCkpO31lbHNlIGlmKFwiTXVsdGlQb2x5Z29uXCI9PT1hKWZvcihuPVtdLHM9MDtzPG8uZ2VvbWV0cnkubGVuZ3RoO3MrKyl7Zm9yKHZhciBsPVtdLHU9MDt1PG8uZ2VvbWV0cnlbc10ubGVuZ3RoO3UrKylsLnB1c2goR2Uoby5nZW9tZXRyeVtzXVt1XSx0KSk7bi5wdXNoKGwpO31yLnB1c2goYmUoby5pZCxhLG4sby50YWdzKSk7fXJldHVybiByfWZ1bmN0aW9uIEdlKGUsdCl7dmFyIHI9W107ci5zaXplPWUuc2l6ZSx2b2lkIDAhPT1lLnN0YXJ0JiYoci5zdGFydD1lLnN0YXJ0LHIuZW5kPWUuZW5kKTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krPTMpci5wdXNoKGVbaV0rdCxlW2krMV0sZVtpKzJdKTtyZXR1cm4gcn1mdW5jdGlvbiBWZShlLHQpe2lmKGUudHJhbnNmb3JtZWQpcmV0dXJuIGU7dmFyIHIsaSxuLG89MTw8ZS56LGE9ZS54LHM9ZS55O2ZvcihyPTA7cjxlLmZlYXR1cmVzLmxlbmd0aDtyKyspe3ZhciBsPWUuZmVhdHVyZXNbcl0sdT1sLmdlb21ldHJ5LGg9bC50eXBlO2lmKGwuZ2VvbWV0cnk9W10sMT09PWgpZm9yKGk9MDtpPHUubGVuZ3RoO2krPTIpbC5nZW9tZXRyeS5wdXNoKGplKHVbaV0sdVtpKzFdLHQsbyxhLHMpKTtlbHNlIGZvcihpPTA7aTx1Lmxlbmd0aDtpKyspe3ZhciBjPVtdO2ZvcihuPTA7bjx1W2ldLmxlbmd0aDtuKz0yKWMucHVzaChqZSh1W2ldW25dLHVbaV1bbisxXSx0LG8sYSxzKSk7bC5nZW9tZXRyeS5wdXNoKGMpO319cmV0dXJuIGUudHJhbnNmb3JtZWQ9ITAsZX1mdW5jdGlvbiBqZShlLHQscixpLG4sbyl7cmV0dXJuW01hdGgucm91bmQociooZSppLW4pKSxNYXRoLnJvdW5kKHIqKHQqaS1vKSldfWZ1bmN0aW9uIEplKGUsdCxyLGksbil7Zm9yKHZhciBvPXQ9PT1uLm1heFpvb20/MDpuLnRvbGVyYW5jZS8oKDE8PHQpKm4uZXh0ZW50KSxhPXtmZWF0dXJlczpbXSxudW1Qb2ludHM6MCxudW1TaW1wbGlmaWVkOjAsbnVtRmVhdHVyZXM6MCxzb3VyY2U6bnVsbCx4OnIseTppLHo6dCx0cmFuc2Zvcm1lZDohMSxtaW5YOjIsbWluWToxLG1heFg6LTEsbWF4WTowfSxzPTA7czxlLmxlbmd0aDtzKyspe2EubnVtRmVhdHVyZXMrKyxXZShhLGVbc10sbyxuKTt2YXIgbD1lW3NdLm1pblgsdT1lW3NdLm1pblksaD1lW3NdLm1heFgsYz1lW3NdLm1heFk7bDxhLm1pblgmJihhLm1pblg9bCksdTxhLm1pblkmJihhLm1pblk9dSksaD5hLm1heFgmJihhLm1heFg9aCksYz5hLm1heFkmJihhLm1heFk9Yyk7fXJldHVybiBhfWZ1bmN0aW9uIFdlKGUsdCxyLGkpe3ZhciBuPXQuZ2VvbWV0cnksbz10LnR5cGUsYT1bXTtpZihcIlBvaW50XCI9PT1vfHxcIk11bHRpUG9pbnRcIj09PW8pZm9yKHZhciBzPTA7czxuLmxlbmd0aDtzKz0zKWEucHVzaChuW3NdKSxhLnB1c2gobltzKzFdKSxlLm51bVBvaW50cysrLGUubnVtU2ltcGxpZmllZCsrO2Vsc2UgaWYoXCJMaW5lU3RyaW5nXCI9PT1vKVllKGEsbixlLHIsITEsITEpO2Vsc2UgaWYoXCJNdWx0aUxpbmVTdHJpbmdcIj09PW98fFwiUG9seWdvblwiPT09bylmb3Iocz0wO3M8bi5sZW5ndGg7cysrKVllKGEsbltzXSxlLHIsXCJQb2x5Z29uXCI9PT1vLDA9PT1zKTtlbHNlIGlmKFwiTXVsdGlQb2x5Z29uXCI9PT1vKWZvcih2YXIgbD0wO2w8bi5sZW5ndGg7bCsrKXt2YXIgdT1uW2xdO2ZvcihzPTA7czx1Lmxlbmd0aDtzKyspWWUoYSx1W3NdLGUsciwhMCwwPT09cyk7fWlmKGEubGVuZ3RoKXt2YXIgaD10LnRhZ3N8fG51bGw7aWYoXCJMaW5lU3RyaW5nXCI9PT1vJiZpLmxpbmVNZXRyaWNzKXtmb3IodmFyIGMgaW4gaD17fSx0LnRhZ3MpaFtjXT10LnRhZ3NbY107aC5tYXBib3hfY2xpcF9zdGFydD1uLnN0YXJ0L24uc2l6ZSxoLm1hcGJveF9jbGlwX2VuZD1uLmVuZC9uLnNpemU7fXZhciBmPXtnZW9tZXRyeTphLHR5cGU6XCJQb2x5Z29uXCI9PT1vfHxcIk11bHRpUG9seWdvblwiPT09bz8zOlwiTGluZVN0cmluZ1wiPT09b3x8XCJNdWx0aUxpbmVTdHJpbmdcIj09PW8/MjoxLHRhZ3M6aH07bnVsbCE9PXQuaWQmJihmLmlkPXQuaWQpLGUuZmVhdHVyZXMucHVzaChmKTt9fWZ1bmN0aW9uIFllKGUsdCxyLGksbixvKXt2YXIgYT1pKmk7aWYoaT4wJiZ0LnNpemU8KG4/YTppKSlyLm51bVBvaW50cys9dC5sZW5ndGgvMztlbHNle2Zvcih2YXIgcz1bXSxsPTA7bDx0Lmxlbmd0aDtsKz0zKSgwPT09aXx8dFtsKzJdPmEpJiYoci5udW1TaW1wbGlmaWVkKysscy5wdXNoKHRbbF0pLHMucHVzaCh0W2wrMV0pKSxyLm51bVBvaW50cysrO24mJmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTAsaT0wLG49ZS5sZW5ndGgsbz1uLTI7aTxuO289aSxpKz0yKXIrPShlW2ldLWVbb10pKihlW2krMV0rZVtvKzFdKTtpZihyPjA9PT10KWZvcihpPTAsbj1lLmxlbmd0aDtpPG4vMjtpKz0yKXt2YXIgYT1lW2ldLHM9ZVtpKzFdO2VbaV09ZVtuLTItaV0sZVtpKzFdPWVbbi0xLWldLGVbbi0yLWldPWEsZVtuLTEtaV09czt9fShzLG8pLGUucHVzaChzKTt9fWZ1bmN0aW9uIFplKGUsdCl7dmFyIHI9KHQ9dGhpcy5vcHRpb25zPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpZVtyXT10W3JdO3JldHVybiBlfShPYmplY3QuY3JlYXRlKHRoaXMub3B0aW9ucyksdCkpLmRlYnVnO2lmKHImJmNvbnNvbGUudGltZShcInByZXByb2Nlc3MgZGF0YVwiKSx0Lm1heFpvb208MHx8dC5tYXhab29tPjI0KXRocm93IG5ldyBFcnJvcihcIm1heFpvb20gc2hvdWxkIGJlIGluIHRoZSAwLTI0IHJhbmdlXCIpO3ZhciBpPWZ1bmN0aW9uKGUsdCl7dmFyIHI9W107aWYoXCJGZWF0dXJlQ29sbGVjdGlvblwiPT09ZS50eXBlKWZvcih2YXIgaT0wO2k8ZS5mZWF0dXJlcy5sZW5ndGg7aSsrKWtlKHIsZS5mZWF0dXJlc1tpXSx0KTtlbHNlXCJGZWF0dXJlXCI9PT1lLnR5cGU/a2UocixlLHQpOmtlKHIse2dlb21ldHJ5OmV9LHQpO3JldHVybiByfShlLHQpO3RoaXMudGlsZXM9e30sdGhpcy50aWxlQ29vcmRzPVtdLHImJihjb25zb2xlLnRpbWVFbmQoXCJwcmVwcm9jZXNzIGRhdGFcIiksY29uc29sZS5sb2coXCJpbmRleDogbWF4Wm9vbTogJWQsIG1heFBvaW50czogJWRcIix0LmluZGV4TWF4Wm9vbSx0LmluZGV4TWF4UG9pbnRzKSxjb25zb2xlLnRpbWUoXCJnZW5lcmF0ZSB0aWxlc1wiKSx0aGlzLnN0YXRzPXt9LHRoaXMudG90YWw9MCksKGk9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LmJ1ZmZlci90LmV4dGVudCxpPWUsbj1PZShlLDEsLTEtcixyLDAsLTEsMix0KSxvPU9lKGUsMSwxLXIsMityLDAsLTEsMix0KTtyZXR1cm4obnx8bykmJihpPU9lKGUsMSwtciwxK3IsMCwtMSwyLHQpfHxbXSxuJiYoaT1GZShuLDEpLmNvbmNhdChpKSksbyYmKGk9aS5jb25jYXQoRmUobywtMSkpKSksaX0oaSx0KSkubGVuZ3RoJiZ0aGlzLnNwbGl0VGlsZShpLDAsMCwwKSxyJiYoaS5sZW5ndGgmJmNvbnNvbGUubG9nKFwiZmVhdHVyZXM6ICVkLCBwb2ludHM6ICVkXCIsdGhpcy50aWxlc1swXS5udW1GZWF0dXJlcyx0aGlzLnRpbGVzWzBdLm51bVBvaW50cyksY29uc29sZS50aW1lRW5kKFwiZ2VuZXJhdGUgdGlsZXNcIiksY29uc29sZS5sb2coXCJ0aWxlcyBnZW5lcmF0ZWQ6XCIsdGhpcy50b3RhbCxKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRzKSkpO31mdW5jdGlvbiBYZShlLHQscil7cmV0dXJuIDMyKigoMTw8ZSkqcit0KStlfWZ1bmN0aW9uIHFlKGUsdCl7dmFyIHI9ZS50aWxlSUQuY2Fub25pY2FsO2lmKCF0aGlzLl9nZW9KU09OSW5kZXgpcmV0dXJuIHQobnVsbCxudWxsKTt2YXIgaT10aGlzLl9nZW9KU09OSW5kZXguZ2V0VGlsZShyLnosci54LHIueSk7aWYoIWkpcmV0dXJuIHQobnVsbCxudWxsKTt2YXIgbj1uZXcgJChpLmZlYXR1cmVzKSxvPUoobik7MD09PW8uYnl0ZU9mZnNldCYmby5ieXRlTGVuZ3RoPT09by5idWZmZXIuYnl0ZUxlbmd0aHx8KG89bmV3IFVpbnQ4QXJyYXkobykpLHQobnVsbCx7dmVjdG9yVGlsZTpuLHJhd0RhdGE6by5idWZmZXJ9KTt9cGUucHJvdG90eXBlPXtvcHRpb25zOnttaW5ab29tOjAsbWF4Wm9vbToxNixyYWRpdXM6NDAsZXh0ZW50OjUxMixub2RlU2l6ZTo2NCxsb2c6ITEscmVkdWNlOm51bGwsaW5pdGlhbDpmdW5jdGlvbigpe3JldHVybnt9fSxtYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fSxsb2FkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucy5sb2c7dCYmY29uc29sZS50aW1lKFwidG90YWwgdGltZVwiKTt2YXIgcj1cInByZXBhcmUgXCIrZS5sZW5ndGgrXCIgcG9pbnRzXCI7dCYmY29uc29sZS50aW1lKHIpLHRoaXMucG9pbnRzPWU7dmFyIGk9ZS5tYXAoZ2UpO3QmJmNvbnNvbGUudGltZUVuZChyKTtmb3IodmFyIG49dGhpcy5vcHRpb25zLm1heFpvb207bj49dGhpcy5vcHRpb25zLm1pblpvb207bi0tKXt2YXIgbz0rRGF0ZS5ub3coKTt0aGlzLnRyZWVzW24rMV09bGUoaSxNZSxTZSx0aGlzLm9wdGlvbnMubm9kZVNpemUsRmxvYXQzMkFycmF5KSxpPXRoaXMuX2NsdXN0ZXIoaSxuKSx0JiZjb25zb2xlLmxvZyhcInolZDogJWQgY2x1c3RlcnMgaW4gJWRtc1wiLG4saS5sZW5ndGgsK0RhdGUubm93KCktbyk7fXJldHVybiB0aGlzLnRyZWVzW3RoaXMub3B0aW9ucy5taW5ab29tXT1sZShpLE1lLFNlLHRoaXMub3B0aW9ucy5ub2RlU2l6ZSxGbG9hdDMyQXJyYXkpLHQmJmNvbnNvbGUudGltZUVuZChcInRvdGFsIHRpbWVcIiksdGhpc30sZ2V0Q2x1c3RlcnM6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy50cmVlc1t0aGlzLl9saW1pdFpvb20odCldLGk9ci5yYW5nZSh2ZShlWzBdKSx4ZShlWzNdKSx2ZShlWzJdKSx4ZShlWzFdKSksbj1bXSxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBhPXIucG9pbnRzW2lbb11dO24ucHVzaChhLm51bVBvaW50cz9tZShhKTp0aGlzLnBvaW50c1thLmlkXSk7fXJldHVybiBufSxnZXRDaGlsZHJlbjpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLnRyZWVzW3QrMV0ucG9pbnRzW2VdLGk9dGhpcy5vcHRpb25zLnJhZGl1cy8odGhpcy5vcHRpb25zLmV4dGVudCpNYXRoLnBvdygyLHQpKSxuPXRoaXMudHJlZXNbdCsxXS53aXRoaW4oci54LHIueSxpKSxvPVtdLGE9MDthPG4ubGVuZ3RoO2ErKyl7dmFyIHM9dGhpcy50cmVlc1t0KzFdLnBvaW50c1tuW2FdXTtzLnBhcmVudElkPT09ZSYmby5wdXNoKHMubnVtUG9pbnRzP21lKHMpOnRoaXMucG9pbnRzW3MuaWRdKTt9cmV0dXJuIG99LGdldExlYXZlczpmdW5jdGlvbihlLHQscixpKXtyPXJ8fDEwLGk9aXx8MDt2YXIgbj1bXTtyZXR1cm4gdGhpcy5fYXBwZW5kTGVhdmVzKG4sZSx0LHIsaSwwKSxufSxnZXRUaWxlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLnRyZWVzW3RoaXMuX2xpbWl0Wm9vbShlKV0sbj1NYXRoLnBvdygyLGUpLG89dGhpcy5vcHRpb25zLmV4dGVudCxhPXRoaXMub3B0aW9ucy5yYWRpdXMvbyxzPShyLWEpL24sbD0ocisxK2EpL24sdT17ZmVhdHVyZXM6W119O3JldHVybiB0aGlzLl9hZGRUaWxlRmVhdHVyZXMoaS5yYW5nZSgodC1hKS9uLHMsKHQrMSthKS9uLGwpLGkucG9pbnRzLHQscixuLHUpLDA9PT10JiZ0aGlzLl9hZGRUaWxlRmVhdHVyZXMoaS5yYW5nZSgxLWEvbixzLDEsbCksaS5wb2ludHMsbixyLG4sdSksdD09PW4tMSYmdGhpcy5fYWRkVGlsZUZlYXR1cmVzKGkucmFuZ2UoMCxzLGEvbixsKSxpLnBvaW50cywtMSxyLG4sdSksdS5mZWF0dXJlcy5sZW5ndGg/dTpudWxsfSxnZXRDbHVzdGVyRXhwYW5zaW9uWm9vbTpmdW5jdGlvbihlLHQpe2Zvcig7dDx0aGlzLm9wdGlvbnMubWF4Wm9vbTspe3ZhciByPXRoaXMuZ2V0Q2hpbGRyZW4oZSx0KTtpZih0KyssMSE9PXIubGVuZ3RoKWJyZWFrO2U9clswXS5wcm9wZXJ0aWVzLmNsdXN0ZXJfaWQ7fXJldHVybiB0fSxfYXBwZW5kTGVhdmVzOmZ1bmN0aW9uKGUsdCxyLGksbixvKXtmb3IodmFyIGE9dGhpcy5nZXRDaGlsZHJlbih0LHIpLHM9MDtzPGEubGVuZ3RoO3MrKyl7dmFyIGw9YVtzXS5wcm9wZXJ0aWVzO2lmKGwuY2x1c3Rlcj9vK2wucG9pbnRfY291bnQ8PW4/bys9bC5wb2ludF9jb3VudDpvPXRoaXMuX2FwcGVuZExlYXZlcyhlLGwuY2x1c3Rlcl9pZCxyKzEsaSxuLG8pOm88bj9vKys6ZS5wdXNoKGFbc10pLGUubGVuZ3RoPT09aSlicmVha31yZXR1cm4gb30sX2FkZFRpbGVGZWF0dXJlczpmdW5jdGlvbihlLHQscixpLG4sbyl7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBzPXRbZVthXV07by5mZWF0dXJlcy5wdXNoKHt0eXBlOjEsZ2VvbWV0cnk6W1tNYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5leHRlbnQqKHMueCpuLXIpKSxNYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5leHRlbnQqKHMueSpuLWkpKV1dLHRhZ3M6cy5udW1Qb2ludHM/eWUocyk6dGhpcy5wb2ludHNbcy5pZF0ucHJvcGVydGllc30pO319LF9saW1pdFpvb206ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgubWF4KHRoaXMub3B0aW9ucy5taW5ab29tLE1hdGgubWluKGUsdGhpcy5vcHRpb25zLm1heFpvb20rMSkpfSxfY2x1c3RlcjpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxpPXRoaXMub3B0aW9ucy5yYWRpdXMvKHRoaXMub3B0aW9ucy5leHRlbnQqTWF0aC5wb3coMix0KSksbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgbz1lW25dO2lmKCEoby56b29tPD10KSl7by56b29tPXQ7dmFyIGE9dGhpcy50cmVlc1t0KzFdLHM9YS53aXRoaW4oby54LG8ueSxpKSxsPW8ubnVtUG9pbnRzfHwxLHU9by54KmwsaD1vLnkqbCxjPW51bGw7dGhpcy5vcHRpb25zLnJlZHVjZSYmKGM9dGhpcy5vcHRpb25zLmluaXRpYWwoKSx0aGlzLl9hY2N1bXVsYXRlKGMsbykpO2Zvcih2YXIgZj0wO2Y8cy5sZW5ndGg7ZisrKXt2YXIgcD1hLnBvaW50c1tzW2ZdXTtpZih0PHAuem9vbSl7dmFyIGQ9cC5udW1Qb2ludHN8fDE7cC56b29tPXQsdSs9cC54KmQsaCs9cC55KmQsbCs9ZCxwLnBhcmVudElkPW4sdGhpcy5vcHRpb25zLnJlZHVjZSYmdGhpcy5fYWNjdW11bGF0ZShjLHApO319MT09PWw/ci5wdXNoKG8pOihvLnBhcmVudElkPW4sci5wdXNoKGRlKHUvbCxoL2wsbCxuLGMpKSk7fX1yZXR1cm4gcn0sX2FjY3VtdWxhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10Lm51bVBvaW50cz90LnByb3BlcnRpZXM6dGhpcy5vcHRpb25zLm1hcCh0aGlzLnBvaW50c1t0LmlkXS5wcm9wZXJ0aWVzKTt0aGlzLm9wdGlvbnMucmVkdWNlKGUscik7fX0sWmUucHJvdG90eXBlLm9wdGlvbnM9e21heFpvb206MTQsaW5kZXhNYXhab29tOjUsaW5kZXhNYXhQb2ludHM6MWU1LHRvbGVyYW5jZTozLGV4dGVudDo0MDk2LGJ1ZmZlcjo2NCxsaW5lTWV0cmljczohMSxkZWJ1ZzowfSxaZS5wcm90b3R5cGUuc3BsaXRUaWxlPWZ1bmN0aW9uKGUsdCxyLGksbixvLGEpe2Zvcih2YXIgcz1bZSx0LHIsaV0sbD10aGlzLm9wdGlvbnMsdT1sLmRlYnVnO3MubGVuZ3RoOyl7aT1zLnBvcCgpLHI9cy5wb3AoKSx0PXMucG9wKCksZT1zLnBvcCgpO3ZhciBoPTE8PHQsYz1YZSh0LHIsaSksZj10aGlzLnRpbGVzW2NdO2lmKCFmJiYodT4xJiZjb25zb2xlLnRpbWUoXCJjcmVhdGlvblwiKSxmPXRoaXMudGlsZXNbY109SmUoZSx0LHIsaSxsKSx0aGlzLnRpbGVDb29yZHMucHVzaCh7ejp0LHg6cix5Oml9KSx1KSl7dT4xJiYoY29uc29sZS5sb2coXCJ0aWxlIHolZC0lZC0lZCAoZmVhdHVyZXM6ICVkLCBwb2ludHM6ICVkLCBzaW1wbGlmaWVkOiAlZClcIix0LHIsaSxmLm51bUZlYXR1cmVzLGYubnVtUG9pbnRzLGYubnVtU2ltcGxpZmllZCksY29uc29sZS50aW1lRW5kKFwiY3JlYXRpb25cIikpO3ZhciBwPVwielwiK3Q7dGhpcy5zdGF0c1twXT0odGhpcy5zdGF0c1twXXx8MCkrMSx0aGlzLnRvdGFsKys7fWlmKGYuc291cmNlPWUsbil7aWYodD09PWwubWF4Wm9vbXx8dD09PW4pY29udGludWU7dmFyIGQ9MTw8bi10O2lmKHIhPT1NYXRoLmZsb29yKG8vZCl8fGkhPT1NYXRoLmZsb29yKGEvZCkpY29udGludWV9ZWxzZSBpZih0PT09bC5pbmRleE1heFpvb218fGYubnVtUG9pbnRzPD1sLmluZGV4TWF4UG9pbnRzKWNvbnRpbnVlO2lmKGYuc291cmNlPW51bGwsMCE9PWUubGVuZ3RoKXt1PjEmJmNvbnNvbGUudGltZShcImNsaXBwaW5nXCIpO3ZhciBnLG0seSx2LHgsdyxNPS41KmwuYnVmZmVyL2wuZXh0ZW50LFM9LjUtTSxfPS41K00sYj0xK007Zz1tPXk9dj1udWxsLHg9T2UoZSxoLHItTSxyK18sMCxmLm1pblgsZi5tYXhYLGwpLHc9T2UoZSxoLHIrUyxyK2IsMCxmLm1pblgsZi5tYXhYLGwpLGU9bnVsbCx4JiYoZz1PZSh4LGgsaS1NLGkrXywxLGYubWluWSxmLm1heFksbCksbT1PZSh4LGgsaStTLGkrYiwxLGYubWluWSxmLm1heFksbCkseD1udWxsKSx3JiYoeT1PZSh3LGgsaS1NLGkrXywxLGYubWluWSxmLm1heFksbCksdj1PZSh3LGgsaStTLGkrYiwxLGYubWluWSxmLm1heFksbCksdz1udWxsKSx1PjEmJmNvbnNvbGUudGltZUVuZChcImNsaXBwaW5nXCIpLHMucHVzaChnfHxbXSx0KzEsMipyLDIqaSkscy5wdXNoKG18fFtdLHQrMSwyKnIsMippKzEpLHMucHVzaCh5fHxbXSx0KzEsMipyKzEsMippKSxzLnB1c2godnx8W10sdCsxLDIqcisxLDIqaSsxKTt9fX0sWmUucHJvdG90eXBlLmdldFRpbGU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMub3B0aW9ucyxuPWkuZXh0ZW50LG89aS5kZWJ1ZztpZihlPDB8fGU+MjQpcmV0dXJuIG51bGw7dmFyIGE9MTw8ZSxzPVhlKGUsdD0odCVhK2EpJWEscik7aWYodGhpcy50aWxlc1tzXSlyZXR1cm4gVmUodGhpcy50aWxlc1tzXSxuKTtvPjEmJmNvbnNvbGUubG9nKFwiZHJpbGxpbmcgZG93biB0byB6JWQtJWQtJWRcIixlLHQscik7Zm9yKHZhciBsLHU9ZSxoPXQsYz1yOyFsJiZ1PjA7KXUtLSxoPU1hdGguZmxvb3IoaC8yKSxjPU1hdGguZmxvb3IoYy8yKSxsPXRoaXMudGlsZXNbWGUodSxoLGMpXTtyZXR1cm4gbCYmbC5zb3VyY2U/KG8+MSYmY29uc29sZS5sb2coXCJmb3VuZCBwYXJlbnQgdGlsZSB6JWQtJWQtJWRcIix1LGgsYyksbz4xJiZjb25zb2xlLnRpbWUoXCJkcmlsbGluZyBkb3duXCIpLHRoaXMuc3BsaXRUaWxlKGwuc291cmNlLHUsaCxjLGUsdCxyKSxvPjEmJmNvbnNvbGUudGltZUVuZChcImRyaWxsaW5nIGRvd25cIiksdGhpcy50aWxlc1tzXT9WZSh0aGlzLnRpbGVzW3NdLG4pOm51bGwpOm51bGx9O3ZhciBVZT1mdW5jdGlvbih0KXtmdW5jdGlvbiByKGUscixpKXt0LmNhbGwodGhpcyxlLHIscWUpLGkmJih0aGlzLmxvYWRHZW9KU09OPWkpO31yZXR1cm4gdCYmKHIuX19wcm90b19fPXQpLHIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLHIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXIsci5wcm90b3R5cGUubG9hZERhdGE9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wZW5kaW5nQ2FsbGJhY2smJnRoaXMuX3BlbmRpbmdDYWxsYmFjayhudWxsLHthYmFuZG9uZWQ6ITB9KSx0aGlzLl9wZW5kaW5nQ2FsbGJhY2s9dCx0aGlzLl9wZW5kaW5nTG9hZERhdGFQYXJhbXM9ZSx0aGlzLl9zdGF0ZSYmXCJJZGxlXCIhPT10aGlzLl9zdGF0ZT90aGlzLl9zdGF0ZT1cIk5lZWRzTG9hZERhdGFcIjoodGhpcy5fc3RhdGU9XCJDb2FsZXNjaW5nXCIsdGhpcy5fbG9hZERhdGEoKSk7fSxyLnByb3RvdHlwZS5fbG9hZERhdGE9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuX3BlbmRpbmdDYWxsYmFjayYmdGhpcy5fcGVuZGluZ0xvYWREYXRhUGFyYW1zKXt2YXIgdD10aGlzLl9wZW5kaW5nQ2FsbGJhY2sscj10aGlzLl9wZW5kaW5nTG9hZERhdGFQYXJhbXM7ZGVsZXRlIHRoaXMuX3BlbmRpbmdDYWxsYmFjayxkZWxldGUgdGhpcy5fcGVuZGluZ0xvYWREYXRhUGFyYW1zO3ZhciBpPSEhKHImJnIucmVxdWVzdCYmci5yZXF1ZXN0LmNvbGxlY3RSZXNvdXJjZVRpbWluZykmJm5ldyBfLlBlcmZvcm1hbmNlKHIucmVxdWVzdCk7dGhpcy5sb2FkR2VvSlNPTihyLGZ1bmN0aW9uKG4sbyl7aWYobnx8IW8pcmV0dXJuIHQobik7aWYoXCJvYmplY3RcIiE9dHlwZW9mIG8pcmV0dXJuIHQobmV3IEVycm9yKFwiSW5wdXQgZGF0YSBpcyBub3QgYSB2YWxpZCBHZW9KU09OIG9iamVjdC5cIikpO0MobywhMCk7dHJ5e2UuX2dlb0pTT05JbmRleD1yLmNsdXN0ZXI/ZmUoci5zdXBlcmNsdXN0ZXJPcHRpb25zKS5sb2FkKG8uZmVhdHVyZXMpOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBaZShlLHQpfShvLHIuZ2VvanNvblZ0T3B0aW9ucyk7fWNhdGNoKG4pe3JldHVybiB0KG4pfWUubG9hZGVkPXt9O3ZhciBhPXt9O2lmKGkpe3ZhciBzPWkuZmluaXNoKCk7cyYmKGEucmVzb3VyY2VUaW1pbmc9e30sYS5yZXNvdXJjZVRpbWluZ1tyLnNvdXJjZV09SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzKSkpO310KG51bGwsYSk7fSk7fX0sci5wcm90b3R5cGUuY29hbGVzY2U9ZnVuY3Rpb24oKXtcIkNvYWxlc2NpbmdcIj09PXRoaXMuX3N0YXRlP3RoaXMuX3N0YXRlPVwiSWRsZVwiOlwiTmVlZHNMb2FkRGF0YVwiPT09dGhpcy5fc3RhdGUmJih0aGlzLl9zdGF0ZT1cIkNvYWxlc2NpbmdcIix0aGlzLl9sb2FkRGF0YSgpKTt9LHIucHJvdG90eXBlLnJlbG9hZFRpbGU9ZnVuY3Rpb24oZSxyKXt2YXIgaT10aGlzLmxvYWRlZCxuPWUudWlkO3JldHVybiBpJiZpW25dP3QucHJvdG90eXBlLnJlbG9hZFRpbGUuY2FsbCh0aGlzLGUscik6dGhpcy5sb2FkVGlsZShlLHIpfSxyLnByb3RvdHlwZS5sb2FkR2VvSlNPTj1mdW5jdGlvbih0LHIpe2lmKHQucmVxdWVzdCllLmdldEpTT04odC5yZXF1ZXN0LHIpO2Vsc2V7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQuZGF0YSlyZXR1cm4gcihuZXcgRXJyb3IoXCJJbnB1dCBkYXRhIGlzIG5vdCBhIHZhbGlkIEdlb0pTT04gb2JqZWN0LlwiKSk7dHJ5e3JldHVybiByKG51bGwsSlNPTi5wYXJzZSh0LmRhdGEpKX1jYXRjaChlKXtyZXR1cm4gcihuZXcgRXJyb3IoXCJJbnB1dCBkYXRhIGlzIG5vdCBhIHZhbGlkIEdlb0pTT04gb2JqZWN0LlwiKSl9fX0sci5wcm90b3R5cGUucmVtb3ZlU291cmNlPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcGVuZGluZ0NhbGxiYWNrJiZ0aGlzLl9wZW5kaW5nQ2FsbGJhY2sobnVsbCx7YWJhbmRvbmVkOiEwfSksdCgpO30scn0oayksSGU9ZnVuY3Rpb24odCl7dmFyIHI9dGhpczt0aGlzLnNlbGY9dCx0aGlzLmFjdG9yPW5ldyBlLmRlZmF1bHQkOSh0LHRoaXMpLHRoaXMubGF5ZXJJbmRleGVzPXt9LHRoaXMud29ya2VyU291cmNlVHlwZXM9e3ZlY3RvcjprLGdlb2pzb246VWV9LHRoaXMud29ya2VyU291cmNlcz17fSx0aGlzLmRlbVdvcmtlclNvdXJjZXM9e30sdGhpcy5zZWxmLnJlZ2lzdGVyV29ya2VyU291cmNlPWZ1bmN0aW9uKGUsdCl7aWYoci53b3JrZXJTb3VyY2VUeXBlc1tlXSl0aHJvdyBuZXcgRXJyb3IoJ1dvcmtlciBzb3VyY2Ugd2l0aCBuYW1lIFwiJytlKydcIiBhbHJlYWR5IHJlZ2lzdGVyZWQuJyk7ci53b3JrZXJTb3VyY2VUeXBlc1tlXT10O30sdGhpcy5zZWxmLnJlZ2lzdGVyUlRMVGV4dFBsdWdpbj1mdW5jdGlvbih0KXtpZihlLnBsdWdpbi5pc0xvYWRlZCgpKXRocm93IG5ldyBFcnJvcihcIlJUTCB0ZXh0IHBsdWdpbiBhbHJlYWR5IHJlZ2lzdGVyZWQuXCIpO2UucGx1Z2luLmFwcGx5QXJhYmljU2hhcGluZz10LmFwcGx5QXJhYmljU2hhcGluZyxlLnBsdWdpbi5wcm9jZXNzQmlkaXJlY3Rpb25hbFRleHQ9dC5wcm9jZXNzQmlkaXJlY3Rpb25hbFRleHQ7fTt9O3JldHVybiBIZS5wcm90b3R5cGUuc2V0TGF5ZXJzPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmdldExheWVySW5kZXgoZSkucmVwbGFjZSh0KSxyKCk7fSxIZS5wcm90b3R5cGUudXBkYXRlTGF5ZXJzPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmdldExheWVySW5kZXgoZSkudXBkYXRlKHQubGF5ZXJzLHQucmVtb3ZlZElkcykscigpO30sSGUucHJvdG90eXBlLmxvYWRUaWxlPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmdldFdvcmtlclNvdXJjZShlLHQudHlwZSx0LnNvdXJjZSkubG9hZFRpbGUodCxyKTt9LEhlLnByb3RvdHlwZS5sb2FkREVNVGlsZT1mdW5jdGlvbihlLHQscil7dGhpcy5nZXRERU1Xb3JrZXJTb3VyY2UoZSx0LnNvdXJjZSkubG9hZFRpbGUodCxyKTt9LEhlLnByb3RvdHlwZS5yZWxvYWRUaWxlPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmdldFdvcmtlclNvdXJjZShlLHQudHlwZSx0LnNvdXJjZSkucmVsb2FkVGlsZSh0LHIpO30sSGUucHJvdG90eXBlLmFib3J0VGlsZT1mdW5jdGlvbihlLHQscil7dGhpcy5nZXRXb3JrZXJTb3VyY2UoZSx0LnR5cGUsdC5zb3VyY2UpLmFib3J0VGlsZSh0LHIpO30sSGUucHJvdG90eXBlLnJlbW92ZVRpbGU9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuZ2V0V29ya2VyU291cmNlKGUsdC50eXBlLHQuc291cmNlKS5yZW1vdmVUaWxlKHQscik7fSxIZS5wcm90b3R5cGUucmVtb3ZlREVNVGlsZT1mdW5jdGlvbihlLHQpe3RoaXMuZ2V0REVNV29ya2VyU291cmNlKGUsdC5zb3VyY2UpLnJlbW92ZVRpbGUodCk7fSxIZS5wcm90b3R5cGUucmVtb3ZlU291cmNlPWZ1bmN0aW9uKGUsdCxyKXtpZih0aGlzLndvcmtlclNvdXJjZXNbZV0mJnRoaXMud29ya2VyU291cmNlc1tlXVt0LnR5cGVdJiZ0aGlzLndvcmtlclNvdXJjZXNbZV1bdC50eXBlXVt0LnNvdXJjZV0pe3ZhciBpPXRoaXMud29ya2VyU291cmNlc1tlXVt0LnR5cGVdW3Quc291cmNlXTtkZWxldGUgdGhpcy53b3JrZXJTb3VyY2VzW2VdW3QudHlwZV1bdC5zb3VyY2VdLHZvaWQgMCE9PWkucmVtb3ZlU291cmNlP2kucmVtb3ZlU291cmNlKHQscik6cigpO319LEhlLnByb3RvdHlwZS5sb2FkV29ya2VyU291cmNlPWZ1bmN0aW9uKGUsdCxyKXt0cnl7dGhpcy5zZWxmLmltcG9ydFNjcmlwdHModC51cmwpLHIoKTt9Y2F0Y2goZSl7cihlLnRvU3RyaW5nKCkpO319LEhlLnByb3RvdHlwZS5sb2FkUlRMVGV4dFBsdWdpbj1mdW5jdGlvbih0LHIsaSl7dHJ5e2UucGx1Z2luLmlzTG9hZGVkKCl8fCh0aGlzLnNlbGYuaW1wb3J0U2NyaXB0cyhyKSxpKGUucGx1Z2luLmlzTG9hZGVkKCk/bnVsbDpuZXcgRXJyb3IoXCJSVEwgVGV4dCBQbHVnaW4gZmFpbGVkIHRvIGltcG9ydCBzY3JpcHRzIGZyb20gXCIrcikpKTt9Y2F0Y2goZSl7aShlLnRvU3RyaW5nKCkpO319LEhlLnByb3RvdHlwZS5nZXRMYXllckluZGV4PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGF5ZXJJbmRleGVzW2VdO3JldHVybiB0fHwodD10aGlzLmxheWVySW5kZXhlc1tlXT1uZXcgaSksdH0sSGUucHJvdG90eXBlLmdldFdvcmtlclNvdXJjZT1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcztpZih0aGlzLndvcmtlclNvdXJjZXNbZV18fCh0aGlzLndvcmtlclNvdXJjZXNbZV09e30pLHRoaXMud29ya2VyU291cmNlc1tlXVt0XXx8KHRoaXMud29ya2VyU291cmNlc1tlXVt0XT17fSksIXRoaXMud29ya2VyU291cmNlc1tlXVt0XVtyXSl7dmFyIG49e3NlbmQ6ZnVuY3Rpb24odCxyLG4pe2kuYWN0b3Iuc2VuZCh0LHIsbixlKTt9fTt0aGlzLndvcmtlclNvdXJjZXNbZV1bdF1bcl09bmV3IHRoaXMud29ya2VyU291cmNlVHlwZXNbdF0obix0aGlzLmdldExheWVySW5kZXgoZSkpO31yZXR1cm4gdGhpcy53b3JrZXJTb3VyY2VzW2VdW3RdW3JdfSxIZS5wcm90b3R5cGUuZ2V0REVNV29ya2VyU291cmNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZGVtV29ya2VyU291cmNlc1tlXXx8KHRoaXMuZGVtV29ya2VyU291cmNlc1tlXT17fSksdGhpcy5kZW1Xb3JrZXJTb3VyY2VzW2VdW3RdfHwodGhpcy5kZW1Xb3JrZXJTb3VyY2VzW2VdW3RdPW5ldyB6KSx0aGlzLmRlbVdvcmtlclNvdXJjZXNbZV1bdF19LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSYmbmV3IEhlKHNlbGYpLEhlfSk7XG5cbmRlZmluZShbXCIuL2NodW5rMS5qc1wiXSxmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZT10LmNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuISEoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50JiZBcnJheS5wcm90b3R5cGUmJkFycmF5LnByb3RvdHlwZS5ldmVyeSYmQXJyYXkucHJvdG90eXBlLmZpbHRlciYmQXJyYXkucHJvdG90eXBlLmZvckVhY2gmJkFycmF5LnByb3RvdHlwZS5pbmRleE9mJiZBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YmJkFycmF5LnByb3RvdHlwZS5tYXAmJkFycmF5LnByb3RvdHlwZS5zb21lJiZBcnJheS5wcm90b3R5cGUucmVkdWNlJiZBcnJheS5wcm90b3R5cGUucmVkdWNlUmlnaHQmJkFycmF5LmlzQXJyYXkmJkZ1bmN0aW9uLnByb3RvdHlwZSYmRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJk9iamVjdC5rZXlzJiZPYmplY3QuY3JlYXRlJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzJiZPYmplY3QuaXNTZWFsZWQmJk9iamVjdC5pc0Zyb3plbiYmT2JqZWN0LmlzRXh0ZW5zaWJsZSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciYmT2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydGllcyYmT2JqZWN0LnNlYWwmJk9iamVjdC5mcmVlemUmJk9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyYmXCJKU09OXCJpbiB3aW5kb3cmJlwicGFyc2VcImluIEpTT04mJlwic3RyaW5naWZ5XCJpbiBKU09OJiZmdW5jdGlvbigpe2lmKCEoXCJXb3JrZXJcImluIHdpbmRvdyYmXCJCbG9iXCJpbiB3aW5kb3cmJlwiVVJMXCJpbiB3aW5kb3cpKXJldHVybiExO3ZhciB0LGUsaT1uZXcgQmxvYihbXCJcIl0se3R5cGU6XCJ0ZXh0L2phdmFzY3JpcHRcIn0pLG49VVJMLmNyZWF0ZU9iamVjdFVSTChpKTt0cnl7ZT1uZXcgV29ya2VyKG4pLHQ9ITA7fWNhdGNoKGUpe3Q9ITE7fWUmJmUudGVybWluYXRlKCk7cmV0dXJuIFVSTC5yZXZva2VPYmplY3RVUkwobiksdH0oKSYmXCJVaW50OENsYW1wZWRBcnJheVwiaW4gd2luZG93JiZBcnJheUJ1ZmZlci5pc1ZpZXcmJmZ1bmN0aW9uKHQpe3ZvaWQgMD09PWlbdF0mJihpW3RdPWZ1bmN0aW9uKHQpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksbj1PYmplY3QuY3JlYXRlKGUud2ViR0xDb250ZXh0QXR0cmlidXRlcyk7cmV0dXJuIG4uZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdD10LGkucHJvYmFibHlTdXBwb3J0c0NvbnRleHQ/aS5wcm9iYWJseVN1cHBvcnRzQ29udGV4dChcIndlYmdsXCIsbil8fGkucHJvYmFibHlTdXBwb3J0c0NvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIixuKTppLnN1cHBvcnRzQ29udGV4dD9pLnN1cHBvcnRzQ29udGV4dChcIndlYmdsXCIsbil8fGkuc3VwcG9ydHNDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIsbik6aS5nZXRDb250ZXh0KFwid2ViZ2xcIixuKXx8aS5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIsbil9KHQpKTtyZXR1cm4gaVt0XX0odCYmdC5mYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0KSl9dC5leHBvcnRzP3QuZXhwb3J0cz1lOndpbmRvdyYmKHdpbmRvdy5tYXBib3hnbD13aW5kb3cubWFwYm94Z2x8fHt9LHdpbmRvdy5tYXBib3hnbC5zdXBwb3J0ZWQ9ZSk7dmFyIGk9e307ZS53ZWJHTENvbnRleHRBdHRyaWJ1dGVzPXthbnRpYWxpYXM6ITEsYWxwaGE6ITAsc3RlbmNpbDohMCxkZXB0aDohMH07fSksaT17Y3JlYXRlOmZ1bmN0aW9uKGUsaSxuKXt2YXIgbz10LmRlZmF1bHQkMS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBpJiYoby5jbGFzc05hbWU9aSksbiYmbi5hcHBlbmRDaGlsZChvKSxvfSxjcmVhdGVOUzpmdW5jdGlvbihlLGkpe3JldHVybiB0LmRlZmF1bHQkMS5kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZSxpKX19LG49dC5kZWZhdWx0JDEuZG9jdW1lbnQ/dC5kZWZhdWx0JDEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlOm51bGw7ZnVuY3Rpb24gbyh0KXtpZighbilyZXR1cm4gbnVsbDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdaW4gbilyZXR1cm4gdFtlXTtyZXR1cm4gdFswXX12YXIgcixhPW8oW1widXNlclNlbGVjdFwiLFwiTW96VXNlclNlbGVjdFwiLFwiV2Via2l0VXNlclNlbGVjdFwiLFwibXNVc2VyU2VsZWN0XCJdKTtpLmRpc2FibGVEcmFnPWZ1bmN0aW9uKCl7biYmYSYmKHI9blthXSxuW2FdPVwibm9uZVwiKTt9LGkuZW5hYmxlRHJhZz1mdW5jdGlvbigpe24mJmEmJihuW2FdPXIpO307dmFyIHM9byhbXCJ0cmFuc2Zvcm1cIixcIldlYmtpdFRyYW5zZm9ybVwiXSk7aS5zZXRUcmFuc2Zvcm09ZnVuY3Rpb24odCxlKXt0LnN0eWxlW3NdPWU7fTt2YXIgbD0hMTt0cnl7dmFyIGM9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwicGFzc2l2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtsPSEwO319KTt0LmRlZmF1bHQkMS5hZGRFdmVudExpc3RlbmVyKFwidGVzdFwiLGMsYyksdC5kZWZhdWx0JDEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RcIixjLGMpO31jYXRjaCh0KXtsPSExO31pLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxlLGksbil7dm9pZCAwPT09biYmKG49e30pLFwicGFzc2l2ZVwiaW4gbiYmbD90LmFkZEV2ZW50TGlzdGVuZXIoZSxpLG4pOnQuYWRkRXZlbnRMaXN0ZW5lcihlLGksbi5jYXB0dXJlKTt9LGkucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUsaSxuKXt2b2lkIDA9PT1uJiYobj17fSksXCJwYXNzaXZlXCJpbiBuJiZsP3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLGksbik6dC5yZW1vdmVFdmVudExpc3RlbmVyKGUsaSxuLmNhcHR1cmUpO307dmFyIHU9ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksdC5kZWZhdWx0JDEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdSwhMCk7fTtpLnN1cHByZXNzQ2xpY2s9ZnVuY3Rpb24oKXt0LmRlZmF1bHQkMS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix1LCEwKSx0LmRlZmF1bHQkMS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5kZWZhdWx0JDEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdSwhMCk7fSwwKTt9LGkubW91c2VQb3M9ZnVuY3Rpb24oZSxpKXt2YXIgbj1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiBpPWkudG91Y2hlcz9pLnRvdWNoZXNbMF06aSxuZXcgdC5kZWZhdWx0KGkuY2xpZW50WC1uLmxlZnQtZS5jbGllbnRMZWZ0LGkuY2xpZW50WS1uLnRvcC1lLmNsaWVudFRvcCl9LGkudG91Y2hQb3M9ZnVuY3Rpb24oZSxpKXtmb3IodmFyIG49ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPVtdLHI9XCJ0b3VjaGVuZFwiPT09aS50eXBlP2kuY2hhbmdlZFRvdWNoZXM6aS50b3VjaGVzLGE9MDthPHIubGVuZ3RoO2ErKylvLnB1c2gobmV3IHQuZGVmYXVsdChyW2FdLmNsaWVudFgtbi5sZWZ0LWUuY2xpZW50TGVmdCxyW2FdLmNsaWVudFktbi50b3AtZS5jbGllbnRUb3ApKTtyZXR1cm4gb30saS5tb3VzZUJ1dHRvbj1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09dC5kZWZhdWx0JDEuSW5zdGFsbFRyaWdnZXImJjI9PT1lLmJ1dHRvbiYmZS5jdHJsS2V5JiZ0LmRlZmF1bHQkMS5uYXZpZ2F0b3IucGxhdGZvcm0udG9VcHBlckNhc2UoKS5pbmRleE9mKFwiTUFDXCIpPj0wPzA6ZS5idXR0b259LGkucmVtb3ZlPWZ1bmN0aW9uKHQpe3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpO307dmFyIGg9e0FQSV9VUkw6XCJodHRwczovL2FwaS5tYXBib3guY29tXCIsUkVRVUlSRV9BQ0NFU1NfVE9LRU46ITAsQUNDRVNTX1RPS0VOOm51bGx9LHA9XCJTZWUgaHR0cHM6Ly93d3cubWFwYm94LmNvbS9hcGktZG9jdW1lbnRhdGlvbi8jYWNjZXNzLXRva2Vuc1wiO2Z1bmN0aW9uIGQodCxlKXt2YXIgaT1iKGguQVBJX1VSTCk7aWYodC5wcm90b2NvbD1pLnByb3RvY29sLHQuYXV0aG9yaXR5PWkuYXV0aG9yaXR5LFwiL1wiIT09aS5wYXRoJiYodC5wYXRoPVwiXCIraS5wYXRoK3QucGF0aCksIWguUkVRVUlSRV9BQ0NFU1NfVE9LRU4pcmV0dXJuIHcodCk7aWYoIShlPWV8fGguQUNDRVNTX1RPS0VOKSl0aHJvdyBuZXcgRXJyb3IoXCJBbiBBUEkgYWNjZXNzIHRva2VuIGlzIHJlcXVpcmVkIHRvIHVzZSBNYXBib3ggR0wuIFwiK3ApO2lmKFwic1wiPT09ZVswXSl0aHJvdyBuZXcgRXJyb3IoXCJVc2UgYSBwdWJsaWMgYWNjZXNzIHRva2VuIChway4qKSB3aXRoIE1hcGJveCBHTCwgbm90IGEgc2VjcmV0IGFjY2VzcyB0b2tlbiAoc2suKikuIFwiK3ApO3JldHVybiB0LnBhcmFtcy5wdXNoKFwiYWNjZXNzX3Rva2VuPVwiK2UpLHcodCl9ZnVuY3Rpb24gZih0KXtyZXR1cm4gMD09PXQuaW5kZXhPZihcIm1hcGJveDpcIil9dmFyIG09ZnVuY3Rpb24odCxlKXtpZighZih0KSlyZXR1cm4gdDt2YXIgaT1iKHQpO3JldHVybiBpLnBhdGg9XCIvZm9udHMvdjFcIitpLnBhdGgsZChpLGUpfSxfPWZ1bmN0aW9uKHQsZSl7aWYoIWYodCkpcmV0dXJuIHQ7dmFyIGk9Yih0KTtyZXR1cm4gaS5wYXRoPVwiL3Y0L1wiK2kuYXV0aG9yaXR5K1wiLmpzb25cIixpLnBhcmFtcy5wdXNoKFwic2VjdXJlXCIpLGQoaSxlKX0sZz1mdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1iKHQpO3JldHVybiBmKHQpPyhvLnBhdGg9XCIvc3R5bGVzL3YxXCIrby5wYXRoK1wiL3Nwcml0ZVwiK2UraSxkKG8sbikpOihvLnBhdGgrPVwiXCIrZStpLHcobykpfSx2PS8oXFwuKHBuZ3xqcGcpXFxkKikoPz0kKS8seT1mdW5jdGlvbihlLGksbil7aWYoIWl8fCFmKGkpKXJldHVybiBlO3ZhciBvPWIoZSkscj10LmRlZmF1bHQkMi5kZXZpY2VQaXhlbFJhdGlvPj0yfHw1MTI9PT1uP1wiQDJ4XCI6XCJcIixhPXQuZGVmYXVsdCQyLnN1cHBvcnRzV2VicD9cIi53ZWJwXCI6XCIkMVwiO3JldHVybiBvLnBhdGg9by5wYXRoLnJlcGxhY2UodixcIlwiK3IrYSksZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspMD09PXRbZV0uaW5kZXhPZihcImFjY2Vzc190b2tlbj10ay5cIikmJih0W2VdPVwiYWNjZXNzX3Rva2VuPVwiKyhoLkFDQ0VTU19UT0tFTnx8XCJcIikpO30oby5wYXJhbXMpLHcobyl9O3ZhciB4PS9eKFxcdyspOlxcL1xcLyhbXi8/XSopKFxcL1teP10rKT9cXD8/KC4rKT8vO2Z1bmN0aW9uIGIodCl7dmFyIGU9dC5tYXRjaCh4KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gcGFyc2UgVVJMIG9iamVjdFwiKTtyZXR1cm57cHJvdG9jb2w6ZVsxXSxhdXRob3JpdHk6ZVsyXSxwYXRoOmVbM118fFwiL1wiLHBhcmFtczplWzRdP2VbNF0uc3BsaXQoXCImXCIpOltdfX1mdW5jdGlvbiB3KHQpe3ZhciBlPXQucGFyYW1zLmxlbmd0aD9cIj9cIit0LnBhcmFtcy5qb2luKFwiJlwiKTpcIlwiO3JldHVybiB0LnByb3RvY29sK1wiOi8vXCIrdC5hdXRob3JpdHkrdC5wYXRoK2V9dmFyIEU9ZnVuY3Rpb24oKXt0aGlzLmltYWdlcz17fSx0aGlzLmxvYWRlZD0hMSx0aGlzLnJlcXVlc3RvcnM9W10sdGhpcy5zaGVsZlBhY2s9bmV3IHQuZGVmYXVsdCQzKDY0LDY0LHthdXRvUmVzaXplOiEwfSksdGhpcy5wYXR0ZXJucz17fSx0aGlzLmF0bGFzSW1hZ2U9bmV3IHQuUkdCQUltYWdlKHt3aWR0aDo2NCxoZWlnaHQ6NjR9KSx0aGlzLmRpcnR5PSEwO307RS5wcm90b3R5cGUuaXNMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2FkZWR9LEUucHJvdG90eXBlLnNldExvYWRlZD1mdW5jdGlvbih0KXtpZih0aGlzLmxvYWRlZCE9PXQmJih0aGlzLmxvYWRlZD10LHQpKXtmb3IodmFyIGU9MCxpPXRoaXMucmVxdWVzdG9ycztlPGkubGVuZ3RoO2UrPTEpe3ZhciBuPWlbZV0sbz1uLmlkcyxyPW4uY2FsbGJhY2s7dGhpcy5fbm90aWZ5KG8scik7fXRoaXMucmVxdWVzdG9ycz1bXTt9fSxFLnByb3RvdHlwZS5nZXRJbWFnZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pbWFnZXNbdF19LEUucHJvdG90eXBlLmFkZEltYWdlPWZ1bmN0aW9uKHQsZSl7dGhpcy5pbWFnZXNbdF09ZTt9LEUucHJvdG90eXBlLnJlbW92ZUltYWdlPWZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLmltYWdlc1t0XTt2YXIgZT10aGlzLnBhdHRlcm5zW3RdO2UmJih0aGlzLnNoZWxmUGFjay51bnJlZihlLmJpbiksZGVsZXRlIHRoaXMucGF0dGVybnNbdF0pO30sRS5wcm90b3R5cGUubGlzdEltYWdlcz1mdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLmltYWdlcyl9LEUucHJvdG90eXBlLmdldEltYWdlcz1mdW5jdGlvbih0LGUpe3ZhciBpPSEwO2lmKCF0aGlzLmlzTG9hZGVkKCkpZm9yKHZhciBuPTAsbz10O248by5sZW5ndGg7bis9MSl7dmFyIHI9b1tuXTt0aGlzLmltYWdlc1tyXXx8KGk9ITEpO310aGlzLmlzTG9hZGVkKCl8fGk/dGhpcy5fbm90aWZ5KHQsZSk6dGhpcy5yZXF1ZXN0b3JzLnB1c2goe2lkczp0LGNhbGxiYWNrOmV9KTt9LEUucHJvdG90eXBlLl9ub3RpZnk9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9e30sbj0wLG89dDtuPG8ubGVuZ3RoO24rPTEpe3ZhciByPW9bbl0sYT10aGlzLmltYWdlc1tyXTthJiYoaVtyXT17ZGF0YTphLmRhdGEuY2xvbmUoKSxwaXhlbFJhdGlvOmEucGl4ZWxSYXRpbyxzZGY6YS5zZGZ9KTt9ZShudWxsLGkpO30sRS5wcm90b3R5cGUuZ2V0UGl4ZWxTaXplPWZ1bmN0aW9uKCl7cmV0dXJue3dpZHRoOnRoaXMuc2hlbGZQYWNrLncsaGVpZ2h0OnRoaXMuc2hlbGZQYWNrLmh9fSxFLnByb3RvdHlwZS5nZXRQYXR0ZXJuPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMucGF0dGVybnNbZV07aWYoaSlyZXR1cm4gaS5wb3NpdGlvbjt2YXIgbj10aGlzLmdldEltYWdlKGUpO2lmKCFuKXJldHVybiBudWxsO3ZhciBvPW4uZGF0YS53aWR0aCsyLHI9bi5kYXRhLmhlaWdodCsyLGE9dGhpcy5zaGVsZlBhY2sucGFja09uZShvLHIpO2lmKCFhKXJldHVybiBudWxsO3RoaXMuYXRsYXNJbWFnZS5yZXNpemUodGhpcy5nZXRQaXhlbFNpemUoKSk7dmFyIHM9bi5kYXRhLGw9dGhpcy5hdGxhc0ltYWdlLGM9YS54KzEsdT1hLnkrMSxoPXMud2lkdGgscD1zLmhlaWdodDt0LlJHQkFJbWFnZS5jb3B5KHMsbCx7eDowLHk6MH0se3g6Yyx5OnV9LHt3aWR0aDpoLGhlaWdodDpwfSksdC5SR0JBSW1hZ2UuY29weShzLGwse3g6MCx5OnAtMX0se3g6Yyx5OnUtMX0se3dpZHRoOmgsaGVpZ2h0OjF9KSx0LlJHQkFJbWFnZS5jb3B5KHMsbCx7eDowLHk6MH0se3g6Yyx5OnUrcH0se3dpZHRoOmgsaGVpZ2h0OjF9KSx0LlJHQkFJbWFnZS5jb3B5KHMsbCx7eDpoLTEseTowfSx7eDpjLTEseTp1fSx7d2lkdGg6MSxoZWlnaHQ6cH0pLHQuUkdCQUltYWdlLmNvcHkocyxsLHt4OjAseTowfSx7eDpjK2gseTp1fSx7d2lkdGg6MSxoZWlnaHQ6cH0pLHRoaXMuZGlydHk9ITA7dmFyIGQ9bmV3IHQuSW1hZ2VQb3NpdGlvbihhLG4pO3JldHVybiB0aGlzLnBhdHRlcm5zW2VdPXtiaW46YSxwb3NpdGlvbjpkfSxkfSxFLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGUpe3ZhciBpPWUuZ2w7dGhpcy5hdGxhc1RleHR1cmU/dGhpcy5kaXJ0eSYmKHRoaXMuYXRsYXNUZXh0dXJlLnVwZGF0ZSh0aGlzLmF0bGFzSW1hZ2UpLHRoaXMuZGlydHk9ITEpOnRoaXMuYXRsYXNUZXh0dXJlPW5ldyB0LmRlZmF1bHQkNChlLHRoaXMuYXRsYXNJbWFnZSxpLlJHQkEpLHRoaXMuYXRsYXNUZXh0dXJlLmJpbmQoaS5MSU5FQVIsaS5DTEFNUF9UT19FREdFKTt9O3ZhciBUPUMsST0xZTIwO2Z1bmN0aW9uIEModCxlLGksbixvLHIpe3RoaXMuZm9udFNpemU9dHx8MjQsdGhpcy5idWZmZXI9dm9pZCAwPT09ZT8zOmUsdGhpcy5jdXRvZmY9bnx8LjI1LHRoaXMuZm9udEZhbWlseT1vfHxcInNhbnMtc2VyaWZcIix0aGlzLmZvbnRXZWlnaHQ9cnx8XCJub3JtYWxcIix0aGlzLnJhZGl1cz1pfHw4O3ZhciBhPXRoaXMuc2l6ZT10aGlzLmZvbnRTaXplKzIqdGhpcy5idWZmZXI7dGhpcy5jYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSx0aGlzLmNhbnZhcy53aWR0aD10aGlzLmNhbnZhcy5oZWlnaHQ9YSx0aGlzLmN0eD10aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksdGhpcy5jdHguZm9udD10aGlzLmZvbnRXZWlnaHQrXCIgXCIrdGhpcy5mb250U2l6ZStcInB4IFwiK3RoaXMuZm9udEZhbWlseSx0aGlzLmN0eC50ZXh0QmFzZWxpbmU9XCJtaWRkbGVcIix0aGlzLmN0eC5maWxsU3R5bGU9XCJibGFja1wiLHRoaXMuZ3JpZE91dGVyPW5ldyBGbG9hdDY0QXJyYXkoYSphKSx0aGlzLmdyaWRJbm5lcj1uZXcgRmxvYXQ2NEFycmF5KGEqYSksdGhpcy5mPW5ldyBGbG9hdDY0QXJyYXkoYSksdGhpcy5kPW5ldyBGbG9hdDY0QXJyYXkoYSksdGhpcy56PW5ldyBGbG9hdDY0QXJyYXkoYSsxKSx0aGlzLnY9bmV3IEludDE2QXJyYXkoYSksdGhpcy5taWRkbGU9TWF0aC5yb3VuZChhLzIqKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkdlY2tvL1wiKT49MD8xLjI6MSkpO31mdW5jdGlvbiBTKHQsZSxpLG4sbyxyLGEpe2Zvcih2YXIgcz0wO3M8ZTtzKyspe2Zvcih2YXIgbD0wO2w8aTtsKyspbltsXT10W2wqZStzXTtmb3IoeihuLG8scixhLGkpLGw9MDtsPGk7bCsrKXRbbCplK3NdPW9bbF07fWZvcihsPTA7bDxpO2wrKyl7Zm9yKHM9MDtzPGU7cysrKW5bc109dFtsKmUrc107Zm9yKHoobixvLHIsYSxlKSxzPTA7czxlO3MrKyl0W2wqZStzXT1NYXRoLnNxcnQob1tzXSk7fX1mdW5jdGlvbiB6KHQsZSxpLG4sbyl7aVswXT0wLG5bMF09LUksblsxXT0rSTtmb3IodmFyIHI9MSxhPTA7cjxvO3IrKyl7Zm9yKHZhciBzPSh0W3JdK3Iqci0odFtpW2FdXStpW2FdKmlbYV0pKS8oMipyLTIqaVthXSk7czw9blthXTspYS0tLHM9KHRbcl0rcipyLSh0W2lbYV1dK2lbYV0qaVthXSkpLygyKnItMippW2FdKTtpWysrYV09cixuW2FdPXMsblthKzFdPStJO31mb3Iocj0wLGE9MDtyPG87cisrKXtmb3IoO25bYSsxXTxyOylhKys7ZVtyXT0oci1pW2FdKSooci1pW2FdKSt0W2lbYV1dO319Qy5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbih0KXt0aGlzLmN0eC5jbGVhclJlY3QoMCwwLHRoaXMuc2l6ZSx0aGlzLnNpemUpLHRoaXMuY3R4LmZpbGxUZXh0KHQsdGhpcy5idWZmZXIsdGhpcy5taWRkbGUpO2Zvcih2YXIgZT10aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwwLHRoaXMuc2l6ZSx0aGlzLnNpemUpLGk9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMuc2l6ZSp0aGlzLnNpemUpLG49MDtuPHRoaXMuc2l6ZSp0aGlzLnNpemU7bisrKXt2YXIgbz1lLmRhdGFbNCpuKzNdLzI1NTt0aGlzLmdyaWRPdXRlcltuXT0xPT09bz8wOjA9PT1vP0k6TWF0aC5wb3coTWF0aC5tYXgoMCwuNS1vKSwyKSx0aGlzLmdyaWRJbm5lcltuXT0xPT09bz9JOjA9PT1vPzA6TWF0aC5wb3coTWF0aC5tYXgoMCxvLS41KSwyKTt9Zm9yKFModGhpcy5ncmlkT3V0ZXIsdGhpcy5zaXplLHRoaXMuc2l6ZSx0aGlzLmYsdGhpcy5kLHRoaXMudix0aGlzLnopLFModGhpcy5ncmlkSW5uZXIsdGhpcy5zaXplLHRoaXMuc2l6ZSx0aGlzLmYsdGhpcy5kLHRoaXMudix0aGlzLnopLG49MDtuPHRoaXMuc2l6ZSp0aGlzLnNpemU7bisrKXt2YXIgcj10aGlzLmdyaWRPdXRlcltuXS10aGlzLmdyaWRJbm5lcltuXTtpW25dPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LE1hdGgucm91bmQoMjU1LTI1NSooci90aGlzLnJhZGl1cyt0aGlzLmN1dG9mZikpKSk7fXJldHVybiBpfTt2YXIgQT1mdW5jdGlvbih0LGUpe3RoaXMucmVxdWVzdFRyYW5zZm9ybT10LHRoaXMubG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5PWUsdGhpcy5lbnRyaWVzPXt9O307QS5wcm90b3R5cGUuc2V0VVJMPWZ1bmN0aW9uKHQpe3RoaXMudXJsPXQ7fSxBLnByb3RvdHlwZS5nZXRHbHlwaHM9ZnVuY3Rpb24oZSxpKXt2YXIgbj10aGlzLG89W107Zm9yKHZhciByIGluIGUpZm9yKHZhciBhPTAscz1lW3JdO2E8cy5sZW5ndGg7YSs9MSl7dmFyIGw9c1thXTtvLnB1c2goe3N0YWNrOnIsaWQ6bH0pO310LmFzeW5jQWxsKG8sZnVuY3Rpb24odCxlKXt2YXIgaT10LnN0YWNrLG89dC5pZCxyPW4uZW50cmllc1tpXTtyfHwocj1uLmVudHJpZXNbaV09e2dseXBoczp7fSxyZXF1ZXN0czp7fX0pO3ZhciBhPXIuZ2x5cGhzW29dO2lmKHZvaWQgMD09PWEpaWYoYT1uLl90aW55U0RGKHIsaSxvKSllKG51bGwse3N0YWNrOmksaWQ6byxnbHlwaDphfSk7ZWxzZXt2YXIgcz1NYXRoLmZsb29yKG8vMjU2KTtpZigyNTYqcz42NTUzNSllKG5ldyBFcnJvcihcImdseXBocyA+IDY1NTM1IG5vdCBzdXBwb3J0ZWRcIikpO2Vsc2V7dmFyIGw9ci5yZXF1ZXN0c1tzXTtsfHwobD1yLnJlcXVlc3RzW3NdPVtdLEEubG9hZEdseXBoUmFuZ2UoaSxzLG4udXJsLG4ucmVxdWVzdFRyYW5zZm9ybSxmdW5jdGlvbih0LGUpe2lmKGUpZm9yKHZhciBpIGluIGUpci5nbHlwaHNbK2ldPWVbK2ldO2Zvcih2YXIgbj0wLG89bDtuPG8ubGVuZ3RoO24rPTEpeygwLG9bbl0pKHQsZSk7fWRlbGV0ZSByLnJlcXVlc3RzW3NdO30pKSxsLnB1c2goZnVuY3Rpb24odCxuKXt0P2UodCk6biYmZShudWxsLHtzdGFjazppLGlkOm8sZ2x5cGg6bltvXXx8bnVsbH0pO30pO319ZWxzZSBlKG51bGwse3N0YWNrOmksaWQ6byxnbHlwaDphfSk7fSxmdW5jdGlvbih0LGUpe2lmKHQpaSh0KTtlbHNlIGlmKGUpe2Zvcih2YXIgbj17fSxvPTAscj1lO288ci5sZW5ndGg7bys9MSl7dmFyIGE9cltvXSxzPWEuc3RhY2ssbD1hLmlkLGM9YS5nbHlwaDsobltzXXx8KG5bc109e30pKVtsXT1jJiZ7aWQ6Yy5pZCxiaXRtYXA6Yy5iaXRtYXAuY2xvbmUoKSxtZXRyaWNzOmMubWV0cmljc307fWkobnVsbCxuKTt9fSk7fSxBLnByb3RvdHlwZS5fdGlueVNERj1mdW5jdGlvbihlLGksbil7dmFyIG89dGhpcy5sb2NhbElkZW9ncmFwaEZvbnRGYW1pbHk7aWYobyYmKHQuZGVmYXVsdCQ2W1wiQ0pLIFVuaWZpZWQgSWRlb2dyYXBoc1wiXShuKXx8dC5kZWZhdWx0JDZbXCJIYW5ndWwgU3lsbGFibGVzXCJdKG4pKSl7dmFyIHI9ZS50aW55U0RGO2lmKCFyKXt2YXIgYT1cIjQwMFwiOy9ib2xkL2kudGVzdChpKT9hPVwiOTAwXCI6L21lZGl1bS9pLnRlc3QoaSk/YT1cIjUwMFwiOi9saWdodC9pLnRlc3QoaSkmJihhPVwiMjAwXCIpLHI9ZS50aW55U0RGPW5ldyBBLlRpbnlTREYoMjQsMyw4LC4yNSxvLGEpO31yZXR1cm57aWQ6bixiaXRtYXA6bmV3IHQuQWxwaGFJbWFnZSh7d2lkdGg6MzAsaGVpZ2h0OjMwfSxyLmRyYXcoU3RyaW5nLmZyb21DaGFyQ29kZShuKSkpLG1ldHJpY3M6e3dpZHRoOjI0LGhlaWdodDoyNCxsZWZ0OjAsdG9wOi04LGFkdmFuY2U6MjR9fX19LEEubG9hZEdseXBoUmFuZ2U9ZnVuY3Rpb24oZSxpLG4sbyxyKXt2YXIgYT0yNTYqaSxzPWErMjU1LGw9byhtKG4pLnJlcGxhY2UoXCJ7Zm9udHN0YWNrfVwiLGUpLnJlcGxhY2UoXCJ7cmFuZ2V9XCIsYStcIi1cIitzKSx0LlJlc291cmNlVHlwZS5HbHlwaHMpO3QuZ2V0QXJyYXlCdWZmZXIobCxmdW5jdGlvbihlLGkpe2lmKGUpcihlKTtlbHNlIGlmKGkpe2Zvcih2YXIgbj17fSxvPTAsYT10LmRlZmF1bHQkNShpLmRhdGEpO288YS5sZW5ndGg7bys9MSl7dmFyIHM9YVtvXTtuW3MuaWRdPXM7fXIobnVsbCxuKTt9fSk7fSxBLlRpbnlTREY9VDt2YXIgTT1mdW5jdGlvbigpe3RoaXMuc3BlY2lmaWNhdGlvbj10LmRlZmF1bHQkNy5saWdodC5wb3NpdGlvbjt9O00ucHJvdG90eXBlLnBvc3NpYmx5RXZhbHVhdGU9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdC5zcGhlcmljYWxUb0NhcnRlc2lhbihlLmV4cHJlc3Npb24uZXZhbHVhdGUoaSkpfSxNLnByb3RvdHlwZS5pbnRlcnBvbGF0ZT1mdW5jdGlvbihlLGksbil7cmV0dXJue3g6dC5udW1iZXIoZS54LGkueCxuKSx5OnQubnVtYmVyKGUueSxpLnksbiksejp0Lm51bWJlcihlLnosaS56LG4pfX07dmFyIEw9bmV3IHQuUHJvcGVydGllcyh7YW5jaG9yOm5ldyB0LkRhdGFDb25zdGFudFByb3BlcnR5KHQuZGVmYXVsdCQ3LmxpZ2h0LmFuY2hvcikscG9zaXRpb246bmV3IE0sY29sb3I6bmV3IHQuRGF0YUNvbnN0YW50UHJvcGVydHkodC5kZWZhdWx0JDcubGlnaHQuY29sb3IpLGludGVuc2l0eTpuZXcgdC5EYXRhQ29uc3RhbnRQcm9wZXJ0eSh0LmRlZmF1bHQkNy5saWdodC5pbnRlbnNpdHkpfSksRD1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKGkpe2UuY2FsbCh0aGlzKSx0aGlzLl90cmFuc2l0aW9uYWJsZT1uZXcgdC5UcmFuc2l0aW9uYWJsZShMKSx0aGlzLnNldExpZ2h0KGkpLHRoaXMuX3RyYW5zaXRpb25pbmc9dGhpcy5fdHJhbnNpdGlvbmFibGUudW50cmFuc2l0aW9uZWQoKTt9cmV0dXJuIGUmJihpLl9fcHJvdG9fXz1lKSxpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlKSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pLGkucHJvdG90eXBlLmdldExpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zaXRpb25hYmxlLnNlcmlhbGl6ZSgpfSxpLnByb3RvdHlwZS5zZXRMaWdodD1mdW5jdGlvbihlKXtpZighdGhpcy5fdmFsaWRhdGUodC52YWxpZGF0ZUxpZ2h0LGUpKWZvcih2YXIgaSBpbiBlKXt2YXIgbj1lW2ldO3QuZW5kc1dpdGgoaSxcIi10cmFuc2l0aW9uXCIpP3RoaXMuX3RyYW5zaXRpb25hYmxlLnNldFRyYW5zaXRpb24oaS5zbGljZSgwLC1cIi10cmFuc2l0aW9uXCIubGVuZ3RoKSxuKTp0aGlzLl90cmFuc2l0aW9uYWJsZS5zZXRWYWx1ZShpLG4pO319LGkucHJvdG90eXBlLnVwZGF0ZVRyYW5zaXRpb25zPWZ1bmN0aW9uKHQpe3RoaXMuX3RyYW5zaXRpb25pbmc9dGhpcy5fdHJhbnNpdGlvbmFibGUudHJhbnNpdGlvbmVkKHQsdGhpcy5fdHJhbnNpdGlvbmluZyk7fSxpLnByb3RvdHlwZS5oYXNUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zaXRpb25pbmcuaGFzVHJhbnNpdGlvbigpfSxpLnByb3RvdHlwZS5yZWNhbGN1bGF0ZT1mdW5jdGlvbih0KXt0aGlzLnByb3BlcnRpZXM9dGhpcy5fdHJhbnNpdGlvbmluZy5wb3NzaWJseUV2YWx1YXRlKHQpO30saS5wcm90b3R5cGUuX3ZhbGlkYXRlPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIHQuZW1pdFZhbGlkYXRpb25FcnJvcnModGhpcyxlLmNhbGwodC52YWxpZGF0ZVN0eWxlLHQuZXh0ZW5kKHt2YWx1ZTppLHN0eWxlOntnbHlwaHM6ITAsc3ByaXRlOiEwfSxzdHlsZVNwZWM6dC5kZWZhdWx0JDd9KSkpfSxpfSh0LkV2ZW50ZWQpLFI9ZnVuY3Rpb24odCxlKXt0aGlzLndpZHRoPXQsdGhpcy5oZWlnaHQ9ZSx0aGlzLm5leHRSb3c9MCx0aGlzLmJ5dGVzPTQsdGhpcy5kYXRhPW5ldyBVaW50OEFycmF5KHRoaXMud2lkdGgqdGhpcy5oZWlnaHQqdGhpcy5ieXRlcyksdGhpcy5wb3NpdGlvbnM9e307fTtSLnByb3RvdHlwZS5nZXREYXNoPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5qb2luKFwiLFwiKStTdHJpbmcoZSk7cmV0dXJuIHRoaXMucG9zaXRpb25zW2ldfHwodGhpcy5wb3NpdGlvbnNbaV09dGhpcy5hZGREYXNoKHQsZSkpLHRoaXMucG9zaXRpb25zW2ldfSxSLnByb3RvdHlwZS5hZGREYXNoPWZ1bmN0aW9uKGUsaSl7dmFyIG49aT83OjAsbz0yKm4rMTtpZih0aGlzLm5leHRSb3crbz50aGlzLmhlaWdodClyZXR1cm4gdC53YXJuT25jZShcIkxpbmVBdGxhcyBvdXQgb2Ygc3BhY2VcIiksbnVsbDtmb3IodmFyIHI9MCxhPTA7YTxlLmxlbmd0aDthKyspcis9ZVthXTtmb3IodmFyIHM9dGhpcy53aWR0aC9yLGw9cy8yLGM9ZS5sZW5ndGglMj09MSx1PS1uO3U8PW47dSsrKWZvcih2YXIgaD10aGlzLm5leHRSb3crbit1LHA9dGhpcy53aWR0aCpoLGQ9Yz8tZVtlLmxlbmd0aC0xXTowLGY9ZVswXSxtPTEsXz0wO188dGhpcy53aWR0aDtfKyspe2Zvcig7ZjxfL3M7KWQ9ZixmKz1lW21dLGMmJm09PT1lLmxlbmd0aC0xJiYoZis9ZVswXSksbSsrO3ZhciBnPU1hdGguYWJzKF8tZCpzKSx2PU1hdGguYWJzKF8tZipzKSx5PU1hdGgubWluKGcsdikseD1tJTI9PTEsYj12b2lkIDA7aWYoaSl7dmFyIHc9bj91L24qKGwrMSk6MDtpZih4KXt2YXIgRT1sLU1hdGguYWJzKHcpO2I9TWF0aC5zcXJ0KHkqeStFKkUpO31lbHNlIGI9bC1NYXRoLnNxcnQoeSp5K3cqdyk7fWVsc2UgYj0oeD8xOi0xKSp5O3RoaXMuZGF0YVszKzQqKHArXyldPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGIrMTI4KSk7fXZhciBUPXt5Oih0aGlzLm5leHRSb3crbisuNSkvdGhpcy5oZWlnaHQsaGVpZ2h0OjIqbi90aGlzLmhlaWdodCx3aWR0aDpyfTtyZXR1cm4gdGhpcy5uZXh0Um93Kz1vLHRoaXMuZGlydHk9ITAsVH0sUi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbih0KXt2YXIgZT10LmdsO3RoaXMudGV4dHVyZT8oZS5iaW5kVGV4dHVyZShlLlRFWFRVUkVfMkQsdGhpcy50ZXh0dXJlKSx0aGlzLmRpcnR5JiYodGhpcy5kaXJ0eT0hMSxlLnRleFN1YkltYWdlMkQoZS5URVhUVVJFXzJELDAsMCwwLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsZS5SR0JBLGUuVU5TSUdORURfQllURSx0aGlzLmRhdGEpKSk6KHRoaXMudGV4dHVyZT1lLmNyZWF0ZVRleHR1cmUoKSxlLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCx0aGlzLnRleHR1cmUpLGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX1dSQVBfUyxlLlJFUEVBVCksZS50ZXhQYXJhbWV0ZXJpKGUuVEVYVFVSRV8yRCxlLlRFWFRVUkVfV1JBUF9ULGUuUkVQRUFUKSxlLnRleFBhcmFtZXRlcmkoZS5URVhUVVJFXzJELGUuVEVYVFVSRV9NSU5fRklMVEVSLGUuTElORUFSKSxlLnRleFBhcmFtZXRlcmkoZS5URVhUVVJFXzJELGUuVEVYVFVSRV9NQUdfRklMVEVSLGUuTElORUFSKSxlLnRleEltYWdlMkQoZS5URVhUVVJFXzJELDAsZS5SR0JBLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsMCxlLlJHQkEsZS5VTlNJR05FRF9CWVRFLHRoaXMuZGF0YSkpO307dmFyIFA9ZnVuY3Rpb24gZShpLG4pe3RoaXMud29ya2VyUG9vbD1pLHRoaXMuYWN0b3JzPVtdLHRoaXMuY3VycmVudEFjdG9yPTAsdGhpcy5pZD10LnVuaXF1ZUlkKCk7Zm9yKHZhciBvPXRoaXMud29ya2VyUG9vbC5hY3F1aXJlKHRoaXMuaWQpLHI9MDtyPG8ubGVuZ3RoO3IrKyl7dmFyIGE9b1tyXSxzPW5ldyBlLkFjdG9yKGEsbix0aGlzLmlkKTtzLm5hbWU9XCJXb3JrZXIgXCIrcix0aGlzLmFjdG9ycy5wdXNoKHMpO319O2Z1bmN0aW9uIGsoZSxpLG4pe3ZhciBvPWZ1bmN0aW9uKGUsaSl7aWYoZSlyZXR1cm4gbihlKTtpZihpKXt2YXIgbz10LnBpY2soaSxbXCJ0aWxlc1wiLFwibWluem9vbVwiLFwibWF4em9vbVwiLFwiYXR0cmlidXRpb25cIixcIm1hcGJveF9sb2dvXCIsXCJib3VuZHNcIl0pO2kudmVjdG9yX2xheWVycyYmKG8udmVjdG9yTGF5ZXJzPWkudmVjdG9yX2xheWVycyxvLnZlY3RvckxheWVySWRzPW8udmVjdG9yTGF5ZXJzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5pZH0pKSxuKG51bGwsbyk7fX07ZS51cmw/dC5nZXRKU09OKGkoXyhlLnVybCksdC5SZXNvdXJjZVR5cGUuU291cmNlKSxvKTp0LmRlZmF1bHQkMi5mcmFtZShmdW5jdGlvbigpe3JldHVybiBvKG51bGwsZSl9KTt9UC5wcm90b3R5cGUuYnJvYWRjYXN0PWZ1bmN0aW9uKGUsaSxuKXtuPW58fGZ1bmN0aW9uKCl7fSx0LmFzeW5jQWxsKHRoaXMuYWN0b3JzLGZ1bmN0aW9uKHQsbil7dC5zZW5kKGUsaSxuKTt9LG4pO30sUC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4oXCJudW1iZXJcIiE9dHlwZW9mIG58fGlzTmFOKG4pKSYmKG49dGhpcy5jdXJyZW50QWN0b3I9KHRoaXMuY3VycmVudEFjdG9yKzEpJXRoaXMuYWN0b3JzLmxlbmd0aCksdGhpcy5hY3RvcnNbbl0uc2VuZCh0LGUsaSksbn0sUC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5hY3RvcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0LnJlbW92ZSgpO30pLHRoaXMuYWN0b3JzPVtdLHRoaXMud29ya2VyUG9vbC5yZWxlYXNlKHRoaXMuaWQpO30sUC5BY3Rvcj10LmRlZmF1bHQkOTt2YXIgQj1mdW5jdGlvbih0LGUpe2lmKGlzTmFOKHQpfHxpc05hTihlKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIExuZ0xhdCBvYmplY3Q6IChcIit0K1wiLCBcIitlK1wiKVwiKTtpZih0aGlzLmxuZz0rdCx0aGlzLmxhdD0rZSx0aGlzLmxhdD45MHx8dGhpcy5sYXQ8LTkwKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgTG5nTGF0IGxhdGl0dWRlIHZhbHVlOiBtdXN0IGJlIGJldHdlZW4gLTkwIGFuZCA5MFwiKX07Qi5wcm90b3R5cGUud3JhcD1mdW5jdGlvbigpe3JldHVybiBuZXcgQih0LndyYXAodGhpcy5sbmcsLTE4MCwxODApLHRoaXMubGF0KX0sQi5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVyblt0aGlzLmxuZyx0aGlzLmxhdF19LEIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJMbmdMYXQoXCIrdGhpcy5sbmcrXCIsIFwiK3RoaXMubGF0K1wiKVwifSxCLnByb3RvdHlwZS50b0JvdW5kcz1mdW5jdGlvbih0KXt2YXIgZT0zNjAqdC80MDA3NTAxNyxpPWUvTWF0aC5jb3MoTWF0aC5QSS8xODAqdGhpcy5sYXQpO3JldHVybiBuZXcgTyhuZXcgQih0aGlzLmxuZy1pLHRoaXMubGF0LWUpLG5ldyBCKHRoaXMubG5nK2ksdGhpcy5sYXQrZSkpfSxCLmNvbnZlcnQ9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEIpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSYmKDI9PT10Lmxlbmd0aHx8Mz09PXQubGVuZ3RoKSlyZXR1cm4gbmV3IEIoTnVtYmVyKHRbMF0pLE51bWJlcih0WzFdKSk7aWYoIUFycmF5LmlzQXJyYXkodCkmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dClyZXR1cm4gbmV3IEIoTnVtYmVyKHQubG5nKSxOdW1iZXIodC5sYXQpKTt0aHJvdyBuZXcgRXJyb3IoXCJgTG5nTGF0TGlrZWAgYXJndW1lbnQgbXVzdCBiZSBzcGVjaWZpZWQgYXMgYSBMbmdMYXQgaW5zdGFuY2UsIGFuIG9iamVjdCB7bG5nOiA8bG5nPiwgbGF0OiA8bGF0Pn0sIG9yIGFuIGFycmF5IG9mIFs8bG5nPiwgPGxhdD5dXCIpfTt2YXIgTz1mdW5jdGlvbih0LGUpe3QmJihlP3RoaXMuc2V0U291dGhXZXN0KHQpLnNldE5vcnRoRWFzdChlKTo0PT09dC5sZW5ndGg/dGhpcy5zZXRTb3V0aFdlc3QoW3RbMF0sdFsxXV0pLnNldE5vcnRoRWFzdChbdFsyXSx0WzNdXSk6dGhpcy5zZXRTb3V0aFdlc3QodFswXSkuc2V0Tm9ydGhFYXN0KHRbMV0pKTt9O08ucHJvdG90eXBlLnNldE5vcnRoRWFzdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbmU9dCBpbnN0YW5jZW9mIEI/bmV3IEIodC5sbmcsdC5sYXQpOkIuY29udmVydCh0KSx0aGlzfSxPLnByb3RvdHlwZS5zZXRTb3V0aFdlc3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3N3PXQgaW5zdGFuY2VvZiBCP25ldyBCKHQubG5nLHQubGF0KTpCLmNvbnZlcnQodCksdGhpc30sTy5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKHQpe3ZhciBlLGksbj10aGlzLl9zdyxvPXRoaXMuX25lO2lmKHQgaW5zdGFuY2VvZiBCKWU9dCxpPXQ7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBPKSlyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90LmV2ZXJ5KEFycmF5LmlzQXJyYXkpP3RoaXMuZXh0ZW5kKE8uY29udmVydCh0KSk6dGhpcy5leHRlbmQoQi5jb252ZXJ0KHQpKTp0aGlzO2lmKGU9dC5fc3csaT10Ll9uZSwhZXx8IWkpcmV0dXJuIHRoaXN9cmV0dXJuIG58fG8/KG4ubG5nPU1hdGgubWluKGUubG5nLG4ubG5nKSxuLmxhdD1NYXRoLm1pbihlLmxhdCxuLmxhdCksby5sbmc9TWF0aC5tYXgoaS5sbmcsby5sbmcpLG8ubGF0PU1hdGgubWF4KGkubGF0LG8ubGF0KSk6KHRoaXMuX3N3PW5ldyBCKGUubG5nLGUubGF0KSx0aGlzLl9uZT1uZXcgQihpLmxuZyxpLmxhdCkpLHRoaXN9LE8ucHJvdG90eXBlLmdldENlbnRlcj1mdW5jdGlvbigpe3JldHVybiBuZXcgQigodGhpcy5fc3cubG5nK3RoaXMuX25lLmxuZykvMiwodGhpcy5fc3cubGF0K3RoaXMuX25lLmxhdCkvMil9LE8ucHJvdG90eXBlLmdldFNvdXRoV2VzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zd30sTy5wcm90b3R5cGUuZ2V0Tm9ydGhFYXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25lfSxPLnByb3RvdHlwZS5nZXROb3J0aFdlc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEIodGhpcy5nZXRXZXN0KCksdGhpcy5nZXROb3J0aCgpKX0sTy5wcm90b3R5cGUuZ2V0U291dGhFYXN0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBCKHRoaXMuZ2V0RWFzdCgpLHRoaXMuZ2V0U291dGgoKSl9LE8ucHJvdG90eXBlLmdldFdlc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3cubG5nfSxPLnByb3RvdHlwZS5nZXRTb3V0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdy5sYXR9LE8ucHJvdG90eXBlLmdldEVhc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmUubG5nfSxPLnByb3RvdHlwZS5nZXROb3J0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZS5sYXR9LE8ucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5fc3cudG9BcnJheSgpLHRoaXMuX25lLnRvQXJyYXkoKV19LE8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJMbmdMYXRCb3VuZHMoXCIrdGhpcy5fc3cudG9TdHJpbmcoKStcIiwgXCIrdGhpcy5fbmUudG9TdHJpbmcoKStcIilcIn0sTy5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiEodGhpcy5fc3cmJnRoaXMuX25lKX0sTy5jb252ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiF0fHx0IGluc3RhbmNlb2YgTz90Om5ldyBPKHQpfTt2YXIgRj1mdW5jdGlvbih0LGUsaSl7dGhpcy5ib3VuZHM9Ty5jb252ZXJ0KHRoaXMudmFsaWRhdGVCb3VuZHModCkpLHRoaXMubWluem9vbT1lfHwwLHRoaXMubWF4em9vbT1pfHwyNDt9O0YucHJvdG90eXBlLnZhbGlkYXRlQm91bmRzPWZ1bmN0aW9uKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpJiY0PT09dC5sZW5ndGg/W01hdGgubWF4KC0xODAsdFswXSksTWF0aC5tYXgoLTkwLHRbMV0pLE1hdGgubWluKDE4MCx0WzJdKSxNYXRoLm1pbig5MCx0WzNdKV06Wy0xODAsLTkwLDE4MCw5MF19LEYucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguZmxvb3IodGhpcy5sbmdYKHRoaXMuYm91bmRzLmdldFdlc3QoKSx0LnopKSxpPU1hdGguZmxvb3IodGhpcy5sYXRZKHRoaXMuYm91bmRzLmdldE5vcnRoKCksdC56KSksbj1NYXRoLmNlaWwodGhpcy5sbmdYKHRoaXMuYm91bmRzLmdldEVhc3QoKSx0LnopKSxvPU1hdGguY2VpbCh0aGlzLmxhdFkodGhpcy5ib3VuZHMuZ2V0U291dGgoKSx0LnopKTtyZXR1cm4gdC54Pj1lJiZ0Lng8biYmdC55Pj1pJiZ0Lnk8b30sRi5wcm90b3R5cGUubG5nWD1mdW5jdGlvbih0LGUpe3JldHVybih0KzE4MCkqKE1hdGgucG93KDIsZSkvMzYwKX0sRi5wcm90b3R5cGUubGF0WT1mdW5jdGlvbihlLGkpe3ZhciBuPXQuY2xhbXAoTWF0aC5zaW4oTWF0aC5QSS8xODAqZSksLS45OTk5LC45OTk5KSxvPU1hdGgucG93KDIsaSkvKDIqTWF0aC5QSSk7cmV0dXJuIE1hdGgucG93KDIsaS0xKSsuNSpNYXRoLmxvZygoMStuKS8oMS1uKSkqLW99O3ZhciBOPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoaSxuLG8scil7aWYoZS5jYWxsKHRoaXMpLHRoaXMuaWQ9aSx0aGlzLmRpc3BhdGNoZXI9byx0aGlzLnR5cGU9XCJ2ZWN0b3JcIix0aGlzLm1pbnpvb209MCx0aGlzLm1heHpvb209MjIsdGhpcy5zY2hlbWU9XCJ4eXpcIix0aGlzLnRpbGVTaXplPTUxMix0aGlzLnJlcGFyc2VPdmVyc2NhbGVkPSEwLHRoaXMuaXNUaWxlQ2xpcHBlZD0hMCx0LmV4dGVuZCh0aGlzLHQucGljayhuLFtcInVybFwiLFwic2NoZW1lXCIsXCJ0aWxlU2l6ZVwiXSkpLHRoaXMuX29wdGlvbnM9dC5leHRlbmQoe3R5cGU6XCJ2ZWN0b3JcIn0sbiksdGhpcy5fY29sbGVjdFJlc291cmNlVGltaW5nPW4uY29sbGVjdFJlc291cmNlVGltaW5nLDUxMiE9PXRoaXMudGlsZVNpemUpdGhyb3cgbmV3IEVycm9yKFwidmVjdG9yIHRpbGUgc291cmNlcyBtdXN0IGhhdmUgYSB0aWxlU2l6ZSBvZiA1MTJcIik7dGhpcy5zZXRFdmVudGVkUGFyZW50KHIpO31yZXR1cm4gZSYmKGkuX19wcm90b19fPWUpLGkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUpLGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPWksaS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YWxvYWRpbmdcIix7ZGF0YVR5cGU6XCJzb3VyY2VcIn0pKSxrKHRoaXMuX29wdGlvbnMsdGhpcy5tYXAuX3RyYW5zZm9ybVJlcXVlc3QsZnVuY3Rpb24oaSxuKXtpP2UuZmlyZShuZXcgdC5FcnJvckV2ZW50KGkpKTpuJiYodC5leHRlbmQoZSxuKSxuLmJvdW5kcyYmKGUudGlsZUJvdW5kcz1uZXcgRihuLmJvdW5kcyxlLm1pbnpvb20sZS5tYXh6b29tKSksZS5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwibWV0YWRhdGFcIn0pKSxlLmZpcmUobmV3IHQuRXZlbnQoXCJkYXRhXCIse2RhdGFUeXBlOlwic291cmNlXCIsc291cmNlRGF0YVR5cGU6XCJjb250ZW50XCJ9KSkpO30pO30saS5wcm90b3R5cGUuaGFzVGlsZT1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy50aWxlQm91bmRzfHx0aGlzLnRpbGVCb3VuZHMuY29udGFpbnModC5jYW5vbmljYWwpfSxpLnByb3RvdHlwZS5vbkFkZD1mdW5jdGlvbih0KXt0aGlzLm1hcD10LHRoaXMubG9hZCgpO30saS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZXh0ZW5kKHt9LHRoaXMuX29wdGlvbnMpfSxpLnByb3RvdHlwZS5sb2FkVGlsZT1mdW5jdGlvbihlLGkpe3ZhciBuPXkoZS50aWxlSUQuY2Fub25pY2FsLnVybCh0aGlzLnRpbGVzLHRoaXMuc2NoZW1lKSx0aGlzLnVybCksbz17cmVxdWVzdDp0aGlzLm1hcC5fdHJhbnNmb3JtUmVxdWVzdChuLHQuUmVzb3VyY2VUeXBlLlRpbGUpLHVpZDplLnVpZCx0aWxlSUQ6ZS50aWxlSUQsem9vbTplLnRpbGVJRC5vdmVyc2NhbGVkWix0aWxlU2l6ZTp0aGlzLnRpbGVTaXplKmUudGlsZUlELm92ZXJzY2FsZUZhY3RvcigpLHR5cGU6dGhpcy50eXBlLHNvdXJjZTp0aGlzLmlkLHBpeGVsUmF0aW86dC5kZWZhdWx0JDIuZGV2aWNlUGl4ZWxSYXRpbyxzaG93Q29sbGlzaW9uQm94ZXM6dGhpcy5tYXAuc2hvd0NvbGxpc2lvbkJveGVzfTtmdW5jdGlvbiByKHQsbil7cmV0dXJuIGUuYWJvcnRlZD9pKG51bGwpOnQ/aSh0KToobiYmbi5yZXNvdXJjZVRpbWluZyYmKGUucmVzb3VyY2VUaW1pbmc9bi5yZXNvdXJjZVRpbWluZyksdGhpcy5tYXAuX3JlZnJlc2hFeHBpcmVkVGlsZXMmJmUuc2V0RXhwaXJ5RGF0YShuKSxlLmxvYWRWZWN0b3JEYXRhKG4sdGhpcy5tYXAucGFpbnRlciksaShudWxsKSx2b2lkKGUucmVsb2FkQ2FsbGJhY2smJih0aGlzLmxvYWRUaWxlKGUsZS5yZWxvYWRDYWxsYmFjayksZS5yZWxvYWRDYWxsYmFjaz1udWxsKSkpfW8ucmVxdWVzdC5jb2xsZWN0UmVzb3VyY2VUaW1pbmc9dGhpcy5fY29sbGVjdFJlc291cmNlVGltaW5nLHZvaWQgMD09PWUud29ya2VySUR8fFwiZXhwaXJlZFwiPT09ZS5zdGF0ZT9lLndvcmtlcklEPXRoaXMuZGlzcGF0Y2hlci5zZW5kKFwibG9hZFRpbGVcIixvLHIuYmluZCh0aGlzKSk6XCJsb2FkaW5nXCI9PT1lLnN0YXRlP2UucmVsb2FkQ2FsbGJhY2s9aTp0aGlzLmRpc3BhdGNoZXIuc2VuZChcInJlbG9hZFRpbGVcIixvLHIuYmluZCh0aGlzKSxlLndvcmtlcklEKTt9LGkucHJvdG90eXBlLmFib3J0VGlsZT1mdW5jdGlvbih0KXt0aGlzLmRpc3BhdGNoZXIuc2VuZChcImFib3J0VGlsZVwiLHt1aWQ6dC51aWQsdHlwZTp0aGlzLnR5cGUsc291cmNlOnRoaXMuaWR9LHZvaWQgMCx0LndvcmtlcklEKTt9LGkucHJvdG90eXBlLnVubG9hZFRpbGU9ZnVuY3Rpb24odCl7dC51bmxvYWRWZWN0b3JEYXRhKCksdGhpcy5kaXNwYXRjaGVyLnNlbmQoXCJyZW1vdmVUaWxlXCIse3VpZDp0LnVpZCx0eXBlOnRoaXMudHlwZSxzb3VyY2U6dGhpcy5pZH0sdm9pZCAwLHQud29ya2VySUQpO30saS5wcm90b3R5cGUuaGFzVHJhbnNpdGlvbj1mdW5jdGlvbigpe3JldHVybiExfSxpfSh0LkV2ZW50ZWQpLCQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaShpLG4sbyxyKXtlLmNhbGwodGhpcyksdGhpcy5pZD1pLHRoaXMuZGlzcGF0Y2hlcj1vLHRoaXMuc2V0RXZlbnRlZFBhcmVudChyKSx0aGlzLnR5cGU9XCJyYXN0ZXJcIix0aGlzLm1pbnpvb209MCx0aGlzLm1heHpvb209MjIsdGhpcy5yb3VuZFpvb209ITAsdGhpcy5zY2hlbWU9XCJ4eXpcIix0aGlzLnRpbGVTaXplPTUxMix0aGlzLl9sb2FkZWQ9ITEsdGhpcy5fb3B0aW9ucz10LmV4dGVuZCh7fSxuKSx0LmV4dGVuZCh0aGlzLHQucGljayhuLFtcInVybFwiLFwic2NoZW1lXCIsXCJ0aWxlU2l6ZVwiXSkpO31yZXR1cm4gZSYmKGkuX19wcm90b19fPWUpLGkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUpLGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPWksaS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YWxvYWRpbmdcIix7ZGF0YVR5cGU6XCJzb3VyY2VcIn0pKSxrKHRoaXMuX29wdGlvbnMsdGhpcy5tYXAuX3RyYW5zZm9ybVJlcXVlc3QsZnVuY3Rpb24oaSxuKXtpP2UuZmlyZShuZXcgdC5FcnJvckV2ZW50KGkpKTpuJiYodC5leHRlbmQoZSxuKSxuLmJvdW5kcyYmKGUudGlsZUJvdW5kcz1uZXcgRihuLmJvdW5kcyxlLm1pbnpvb20sZS5tYXh6b29tKSksZS5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwibWV0YWRhdGFcIn0pKSxlLmZpcmUobmV3IHQuRXZlbnQoXCJkYXRhXCIse2RhdGFUeXBlOlwic291cmNlXCIsc291cmNlRGF0YVR5cGU6XCJjb250ZW50XCJ9KSkpO30pO30saS5wcm90b3R5cGUub25BZGQ9ZnVuY3Rpb24odCl7dGhpcy5tYXA9dCx0aGlzLmxvYWQoKTt9LGkucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3JldHVybiB0LmV4dGVuZCh7fSx0aGlzLl9vcHRpb25zKX0saS5wcm90b3R5cGUuaGFzVGlsZT1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy50aWxlQm91bmRzfHx0aGlzLnRpbGVCb3VuZHMuY29udGFpbnModC5jYW5vbmljYWwpfSxpLnByb3RvdHlwZS5sb2FkVGlsZT1mdW5jdGlvbihlLGkpe3ZhciBuPXRoaXMsbz15KGUudGlsZUlELmNhbm9uaWNhbC51cmwodGhpcy50aWxlcyx0aGlzLnNjaGVtZSksdGhpcy51cmwsdGhpcy50aWxlU2l6ZSk7ZS5yZXF1ZXN0PXQuZ2V0SW1hZ2UodGhpcy5tYXAuX3RyYW5zZm9ybVJlcXVlc3Qobyx0LlJlc291cmNlVHlwZS5UaWxlKSxmdW5jdGlvbihvLHIpe2lmKGRlbGV0ZSBlLnJlcXVlc3QsZS5hYm9ydGVkKWUuc3RhdGU9XCJ1bmxvYWRlZFwiLGkobnVsbCk7ZWxzZSBpZihvKWUuc3RhdGU9XCJlcnJvcmVkXCIsaShvKTtlbHNlIGlmKHIpe24ubWFwLl9yZWZyZXNoRXhwaXJlZFRpbGVzJiZlLnNldEV4cGlyeURhdGEociksZGVsZXRlIHIuY2FjaGVDb250cm9sLGRlbGV0ZSByLmV4cGlyZXM7dmFyIGE9bi5tYXAucGFpbnRlci5jb250ZXh0LHM9YS5nbDtlLnRleHR1cmU9bi5tYXAucGFpbnRlci5nZXRUaWxlVGV4dHVyZShyLndpZHRoKSxlLnRleHR1cmU/ZS50ZXh0dXJlLnVwZGF0ZShyLHt1c2VNaXBtYXA6ITB9KTooZS50ZXh0dXJlPW5ldyB0LmRlZmF1bHQkNChhLHIscy5SR0JBLHt1c2VNaXBtYXA6ITB9KSxlLnRleHR1cmUuYmluZChzLkxJTkVBUixzLkNMQU1QX1RPX0VER0Uscy5MSU5FQVJfTUlQTUFQX05FQVJFU1QpLGEuZXh0VGV4dHVyZUZpbHRlckFuaXNvdHJvcGljJiZzLnRleFBhcmFtZXRlcmYocy5URVhUVVJFXzJELGEuZXh0VGV4dHVyZUZpbHRlckFuaXNvdHJvcGljLlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULGEuZXh0VGV4dHVyZUZpbHRlckFuaXNvdHJvcGljTWF4KSksZS5zdGF0ZT1cImxvYWRlZFwiLGkobnVsbCk7fX0pO30saS5wcm90b3R5cGUuYWJvcnRUaWxlPWZ1bmN0aW9uKHQsZSl7dC5yZXF1ZXN0JiYodC5yZXF1ZXN0LmFib3J0KCksZGVsZXRlIHQucmVxdWVzdCksZSgpO30saS5wcm90b3R5cGUudW5sb2FkVGlsZT1mdW5jdGlvbih0LGUpe3QudGV4dHVyZSYmdGhpcy5tYXAucGFpbnRlci5zYXZlVGlsZVRleHR1cmUodC50ZXh0dXJlKSxlKCk7fSxpLnByb3RvdHlwZS5oYXNUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGl9KHQuRXZlbnRlZCksVT1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKGksbixvLHIpe2UuY2FsbCh0aGlzLGksbixvLHIpLHRoaXMudHlwZT1cInJhc3Rlci1kZW1cIix0aGlzLm1heHpvb209MjIsdGhpcy5fb3B0aW9ucz10LmV4dGVuZCh7fSxuKSx0aGlzLmVuY29kaW5nPW4uZW5jb2Rpbmd8fFwibWFwYm94XCI7fXJldHVybiBlJiYoaS5fX3Byb3RvX189ZSksaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY29uc3RydWN0b3I9aSxpLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcInJhc3Rlci1kZW1cIix1cmw6dGhpcy51cmwsdGlsZVNpemU6dGhpcy50aWxlU2l6ZSx0aWxlczp0aGlzLnRpbGVzLGJvdW5kczp0aGlzLmJvdW5kcyxlbmNvZGluZzp0aGlzLmVuY29kaW5nfX0saS5wcm90b3R5cGUubG9hZFRpbGU9ZnVuY3Rpb24oZSxpKXt2YXIgbj15KGUudGlsZUlELmNhbm9uaWNhbC51cmwodGhpcy50aWxlcyx0aGlzLnNjaGVtZSksdGhpcy51cmwsdGhpcy50aWxlU2l6ZSk7ZS5yZXF1ZXN0PXQuZ2V0SW1hZ2UodGhpcy5tYXAuX3RyYW5zZm9ybVJlcXVlc3Qobix0LlJlc291cmNlVHlwZS5UaWxlKSxmdW5jdGlvbihuLG8pe2lmKGRlbGV0ZSBlLnJlcXVlc3QsZS5hYm9ydGVkKWUuc3RhdGU9XCJ1bmxvYWRlZFwiLGkobnVsbCk7ZWxzZSBpZihuKWUuc3RhdGU9XCJlcnJvcmVkXCIsaShuKTtlbHNlIGlmKG8pe3RoaXMubWFwLl9yZWZyZXNoRXhwaXJlZFRpbGVzJiZlLnNldEV4cGlyeURhdGEobyksZGVsZXRlIG8uY2FjaGVDb250cm9sLGRlbGV0ZSBvLmV4cGlyZXM7dmFyIHI9dC5kZWZhdWx0JDIuZ2V0SW1hZ2VEYXRhKG8pLGE9e3VpZDplLnVpZCxjb29yZDplLnRpbGVJRCxzb3VyY2U6dGhpcy5pZCxyYXdJbWFnZURhdGE6cixlbmNvZGluZzp0aGlzLmVuY29kaW5nfTtlLndvcmtlcklEJiZcImV4cGlyZWRcIiE9PWUuc3RhdGV8fChlLndvcmtlcklEPXRoaXMuZGlzcGF0Y2hlci5zZW5kKFwibG9hZERFTVRpbGVcIixhLGZ1bmN0aW9uKHQsbil7dCYmKGUuc3RhdGU9XCJlcnJvcmVkXCIsaSh0KSk7biYmKGUuZGVtPW4sZS5uZWVkc0hpbGxzaGFkZVByZXBhcmU9ITAsZS5zdGF0ZT1cImxvYWRlZFwiLGkobnVsbCkpO30uYmluZCh0aGlzKSkpO319LmJpbmQodGhpcykpLGUubmVpZ2hib3JpbmdUaWxlcz10aGlzLl9nZXROZWlnaGJvcmluZ1RpbGVzKGUudGlsZUlEKTt9LGkucHJvdG90eXBlLl9nZXROZWlnaGJvcmluZ1RpbGVzPWZ1bmN0aW9uKGUpe3ZhciBpPWUuY2Fub25pY2FsLG49TWF0aC5wb3coMixpLnopLG89KGkueC0xK24pJW4scj0wPT09aS54P2Uud3JhcC0xOmUud3JhcCxhPShpLngrMStuKSVuLHM9aS54KzE9PT1uP2Uud3JhcCsxOmUud3JhcCxsPXt9O3JldHVybiBsW25ldyB0Lk92ZXJzY2FsZWRUaWxlSUQoZS5vdmVyc2NhbGVkWixyLGkueixvLGkueSkua2V5XT17YmFja2ZpbGxlZDohMX0sbFtuZXcgdC5PdmVyc2NhbGVkVGlsZUlEKGUub3ZlcnNjYWxlZFoscyxpLnosYSxpLnkpLmtleV09e2JhY2tmaWxsZWQ6ITF9LGkueT4wJiYobFtuZXcgdC5PdmVyc2NhbGVkVGlsZUlEKGUub3ZlcnNjYWxlZFoscixpLnosbyxpLnktMSkua2V5XT17YmFja2ZpbGxlZDohMX0sbFtuZXcgdC5PdmVyc2NhbGVkVGlsZUlEKGUub3ZlcnNjYWxlZFosZS53cmFwLGkueixpLngsaS55LTEpLmtleV09e2JhY2tmaWxsZWQ6ITF9LGxbbmV3IHQuT3ZlcnNjYWxlZFRpbGVJRChlLm92ZXJzY2FsZWRaLHMsaS56LGEsaS55LTEpLmtleV09e2JhY2tmaWxsZWQ6ITF9KSxpLnkrMTxuJiYobFtuZXcgdC5PdmVyc2NhbGVkVGlsZUlEKGUub3ZlcnNjYWxlZFoscixpLnosbyxpLnkrMSkua2V5XT17YmFja2ZpbGxlZDohMX0sbFtuZXcgdC5PdmVyc2NhbGVkVGlsZUlEKGUub3ZlcnNjYWxlZFosZS53cmFwLGkueixpLngsaS55KzEpLmtleV09e2JhY2tmaWxsZWQ6ITF9LGxbbmV3IHQuT3ZlcnNjYWxlZFRpbGVJRChlLm92ZXJzY2FsZWRaLHMsaS56LGEsaS55KzEpLmtleV09e2JhY2tmaWxsZWQ6ITF9KSxsfSxpLnByb3RvdHlwZS51bmxvYWRUaWxlPWZ1bmN0aW9uKHQpe3QuZGVtVGV4dHVyZSYmdGhpcy5tYXAucGFpbnRlci5zYXZlVGlsZVRleHR1cmUodC5kZW1UZXh0dXJlKSx0LmZibyYmKHQuZmJvLmRlc3Ryb3koKSxkZWxldGUgdC5mYm8pLHQuZGVtJiZkZWxldGUgdC5kZW0sZGVsZXRlIHQubmVpZ2hib3JpbmdUaWxlcyx0LnN0YXRlPVwidW5sb2FkZWRcIix0aGlzLmRpc3BhdGNoZXIuc2VuZChcInJlbW92ZURFTVRpbGVcIix7dWlkOnQudWlkLHNvdXJjZTp0aGlzLmlkfSx2b2lkIDAsdC53b3JrZXJJRCk7fSxpfSgkKSxaPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoaSxuLG8scil7ZS5jYWxsKHRoaXMpLHRoaXMuaWQ9aSx0aGlzLnR5cGU9XCJnZW9qc29uXCIsdGhpcy5taW56b29tPTAsdGhpcy5tYXh6b29tPTE4LHRoaXMudGlsZVNpemU9NTEyLHRoaXMuaXNUaWxlQ2xpcHBlZD0hMCx0aGlzLnJlcGFyc2VPdmVyc2NhbGVkPSEwLHRoaXMuX3JlbW92ZWQ9ITEsdGhpcy5kaXNwYXRjaGVyPW8sdGhpcy5zZXRFdmVudGVkUGFyZW50KHIpLHRoaXMuX2RhdGE9bi5kYXRhLHRoaXMuX29wdGlvbnM9dC5leHRlbmQoe30sbiksdGhpcy5fY29sbGVjdFJlc291cmNlVGltaW5nPW4uY29sbGVjdFJlc291cmNlVGltaW5nLHRoaXMuX3Jlc291cmNlVGltaW5nPVtdLHZvaWQgMCE9PW4ubWF4em9vbSYmKHRoaXMubWF4em9vbT1uLm1heHpvb20pLG4udHlwZSYmKHRoaXMudHlwZT1uLnR5cGUpLG4uYXR0cmlidXRpb24mJih0aGlzLmF0dHJpYnV0aW9uPW4uYXR0cmlidXRpb24pO3ZhciBhPXQuZGVmYXVsdCQxMC90aGlzLnRpbGVTaXplO3RoaXMud29ya2VyT3B0aW9ucz10LmV4dGVuZCh7c291cmNlOnRoaXMuaWQsY2x1c3RlcjpuLmNsdXN0ZXJ8fCExLGdlb2pzb25WdE9wdGlvbnM6e2J1ZmZlcjoodm9pZCAwIT09bi5idWZmZXI/bi5idWZmZXI6MTI4KSphLHRvbGVyYW5jZToodm9pZCAwIT09bi50b2xlcmFuY2U/bi50b2xlcmFuY2U6LjM3NSkqYSxleHRlbnQ6dC5kZWZhdWx0JDEwLG1heFpvb206dGhpcy5tYXh6b29tLGxpbmVNZXRyaWNzOm4ubGluZU1ldHJpY3N8fCExfSxzdXBlcmNsdXN0ZXJPcHRpb25zOnttYXhab29tOnZvaWQgMCE9PW4uY2x1c3Rlck1heFpvb20/TWF0aC5taW4obi5jbHVzdGVyTWF4Wm9vbSx0aGlzLm1heHpvb20tMSk6dGhpcy5tYXh6b29tLTEsZXh0ZW50OnQuZGVmYXVsdCQxMCxyYWRpdXM6KG4uY2x1c3RlclJhZGl1c3x8NTApKmEsbG9nOiExfX0sbi53b3JrZXJPcHRpb25zKTt9cmV0dXJuIGUmJihpLl9fcHJvdG9fXz1lKSxpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlKSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pLGkucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZmlyZShuZXcgdC5FdmVudChcImRhdGFsb2FkaW5nXCIse2RhdGFUeXBlOlwic291cmNlXCJ9KSksdGhpcy5fdXBkYXRlV29ya2VyRGF0YShmdW5jdGlvbihpKXtpZihpKWUuZmlyZShuZXcgdC5FcnJvckV2ZW50KGkpKTtlbHNle3ZhciBuPXtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwibWV0YWRhdGFcIn07ZS5fY29sbGVjdFJlc291cmNlVGltaW5nJiZlLl9yZXNvdXJjZVRpbWluZyYmZS5fcmVzb3VyY2VUaW1pbmcubGVuZ3RoPjAmJihuLnJlc291cmNlVGltaW5nPWUuX3Jlc291cmNlVGltaW5nLGUuX3Jlc291cmNlVGltaW5nPVtdKSxlLmZpcmUobmV3IHQuRXZlbnQoXCJkYXRhXCIsbikpO319KTt9LGkucHJvdG90eXBlLm9uQWRkPWZ1bmN0aW9uKHQpe3RoaXMubWFwPXQsdGhpcy5sb2FkKCk7fSxpLnByb3RvdHlwZS5zZXREYXRhPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXM7cmV0dXJuIHRoaXMuX2RhdGE9ZSx0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJkYXRhbG9hZGluZ1wiLHtkYXRhVHlwZTpcInNvdXJjZVwifSkpLHRoaXMuX3VwZGF0ZVdvcmtlckRhdGEoZnVuY3Rpb24oZSl7aWYoZSlyZXR1cm4gaS5maXJlKG5ldyB0LkVycm9yRXZlbnQoZSkpO3ZhciBuPXtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwiY29udGVudFwifTtpLl9jb2xsZWN0UmVzb3VyY2VUaW1pbmcmJmkuX3Jlc291cmNlVGltaW5nJiZpLl9yZXNvdXJjZVRpbWluZy5sZW5ndGg+MCYmKG4ucmVzb3VyY2VUaW1pbmc9aS5fcmVzb3VyY2VUaW1pbmcsaS5fcmVzb3VyY2VUaW1pbmc9W10pLGkuZmlyZShuZXcgdC5FdmVudChcImRhdGFcIixuKSk7fSksdGhpc30saS5wcm90b3R5cGUuX3VwZGF0ZVdvcmtlckRhdGE9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcyxuPXQuZXh0ZW5kKHt9LHRoaXMud29ya2VyT3B0aW9ucyksbz10aGlzLl9kYXRhO1wic3RyaW5nXCI9PXR5cGVvZiBvPyhuLnJlcXVlc3Q9dGhpcy5tYXAuX3RyYW5zZm9ybVJlcXVlc3QodC5kZWZhdWx0JDIucmVzb2x2ZVVSTChvKSx0LlJlc291cmNlVHlwZS5Tb3VyY2UpLG4ucmVxdWVzdC5jb2xsZWN0UmVzb3VyY2VUaW1pbmc9dGhpcy5fY29sbGVjdFJlc291cmNlVGltaW5nKTpuLmRhdGE9SlNPTi5zdHJpbmdpZnkobyksdGhpcy53b3JrZXJJRD10aGlzLmRpc3BhdGNoZXIuc2VuZCh0aGlzLnR5cGUrXCIubG9hZERhdGFcIixuLGZ1bmN0aW9uKHQsbyl7aS5fcmVtb3ZlZHx8byYmby5hYmFuZG9uZWR8fChpLl9sb2FkZWQ9ITAsbyYmby5yZXNvdXJjZVRpbWluZyYmby5yZXNvdXJjZVRpbWluZ1tpLmlkXSYmKGkuX3Jlc291cmNlVGltaW5nPW8ucmVzb3VyY2VUaW1pbmdbaS5pZF0uc2xpY2UoMCkpLGkuZGlzcGF0Y2hlci5zZW5kKGkudHlwZStcIi5jb2FsZXNjZVwiLHtzb3VyY2U6bi5zb3VyY2V9LG51bGwsaS53b3JrZXJJRCksZSh0KSk7fSx0aGlzLndvcmtlcklEKTt9LGkucHJvdG90eXBlLmxvYWRUaWxlPWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpcyxvPXZvaWQgMD09PWUud29ya2VySUQ/XCJsb2FkVGlsZVwiOlwicmVsb2FkVGlsZVwiLHI9e3R5cGU6dGhpcy50eXBlLHVpZDplLnVpZCx0aWxlSUQ6ZS50aWxlSUQsem9vbTplLnRpbGVJRC5vdmVyc2NhbGVkWixtYXhab29tOnRoaXMubWF4em9vbSx0aWxlU2l6ZTp0aGlzLnRpbGVTaXplLHNvdXJjZTp0aGlzLmlkLHBpeGVsUmF0aW86dC5kZWZhdWx0JDIuZGV2aWNlUGl4ZWxSYXRpbyxzaG93Q29sbGlzaW9uQm94ZXM6dGhpcy5tYXAuc2hvd0NvbGxpc2lvbkJveGVzfTtlLndvcmtlcklEPXRoaXMuZGlzcGF0Y2hlci5zZW5kKG8scixmdW5jdGlvbih0LHIpe3JldHVybiBlLnVubG9hZFZlY3RvckRhdGEoKSxlLmFib3J0ZWQ/aShudWxsKTp0P2kodCk6KGUubG9hZFZlY3RvckRhdGEocixuLm1hcC5wYWludGVyLFwicmVsb2FkVGlsZVwiPT09byksaShudWxsKSl9LHRoaXMud29ya2VySUQpO30saS5wcm90b3R5cGUuYWJvcnRUaWxlPWZ1bmN0aW9uKHQpe3QuYWJvcnRlZD0hMDt9LGkucHJvdG90eXBlLnVubG9hZFRpbGU9ZnVuY3Rpb24odCl7dC51bmxvYWRWZWN0b3JEYXRhKCksdGhpcy5kaXNwYXRjaGVyLnNlbmQoXCJyZW1vdmVUaWxlXCIse3VpZDp0LnVpZCx0eXBlOnRoaXMudHlwZSxzb3VyY2U6dGhpcy5pZH0sbnVsbCx0LndvcmtlcklEKTt9LGkucHJvdG90eXBlLm9uUmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlZD0hMCx0aGlzLmRpc3BhdGNoZXIuc2VuZChcInJlbW92ZVNvdXJjZVwiLHt0eXBlOnRoaXMudHlwZSxzb3VyY2U6dGhpcy5pZH0sbnVsbCx0aGlzLndvcmtlcklEKTt9LGkucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3JldHVybiB0LmV4dGVuZCh7fSx0aGlzLl9vcHRpb25zLHt0eXBlOnRoaXMudHlwZSxkYXRhOnRoaXMuX2RhdGF9KX0saS5wcm90b3R5cGUuaGFzVHJhbnNpdGlvbj1mdW5jdGlvbigpe3JldHVybiExfSxpfSh0LkV2ZW50ZWQpLFY9ZnVuY3Rpb24oKXt0aGlzLmJvdW5kUHJvZ3JhbT1udWxsLHRoaXMuYm91bmRMYXlvdXRWZXJ0ZXhCdWZmZXI9bnVsbCx0aGlzLmJvdW5kUGFpbnRWZXJ0ZXhCdWZmZXJzPVtdLHRoaXMuYm91bmRJbmRleEJ1ZmZlcj1udWxsLHRoaXMuYm91bmRWZXJ0ZXhPZmZzZXQ9bnVsbCx0aGlzLmJvdW5kRHluYW1pY1ZlcnRleEJ1ZmZlcj1udWxsLHRoaXMudmFvPW51bGw7fTtWLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHQsZSxpLG4sbyxyLGEscyl7dGhpcy5jb250ZXh0PXQ7Zm9yKHZhciBsPXRoaXMuYm91bmRQYWludFZlcnRleEJ1ZmZlcnMubGVuZ3RoIT09bi5sZW5ndGgsYz0wOyFsJiZjPG4ubGVuZ3RoO2MrKyl0aGlzLmJvdW5kUGFpbnRWZXJ0ZXhCdWZmZXJzW2NdIT09bltjXSYmKGw9ITApO3ZhciB1PSF0aGlzLnZhb3x8dGhpcy5ib3VuZFByb2dyYW0hPT1lfHx0aGlzLmJvdW5kTGF5b3V0VmVydGV4QnVmZmVyIT09aXx8bHx8dGhpcy5ib3VuZEluZGV4QnVmZmVyIT09b3x8dGhpcy5ib3VuZFZlcnRleE9mZnNldCE9PXJ8fHRoaXMuYm91bmREeW5hbWljVmVydGV4QnVmZmVyIT09YXx8dGhpcy5ib3VuZER5bmFtaWNWZXJ0ZXhCdWZmZXIyIT09czshdC5leHRWZXJ0ZXhBcnJheU9iamVjdHx8dT90aGlzLmZyZXNoQmluZChlLGksbixvLHIsYSxzKToodC5iaW5kVmVydGV4QXJyYXlPRVMuc2V0KHRoaXMudmFvKSxhJiZhLmJpbmQoKSxvJiZvLmR5bmFtaWNEcmF3JiZvLmJpbmQoKSxzJiZzLmJpbmQoKSk7fSxWLnByb3RvdHlwZS5mcmVzaEJpbmQ9ZnVuY3Rpb24odCxlLGksbixvLHIsYSl7dmFyIHMsbD10Lm51bUF0dHJpYnV0ZXMsYz10aGlzLmNvbnRleHQsdT1jLmdsO2lmKGMuZXh0VmVydGV4QXJyYXlPYmplY3QpdGhpcy52YW8mJnRoaXMuZGVzdHJveSgpLHRoaXMudmFvPWMuZXh0VmVydGV4QXJyYXlPYmplY3QuY3JlYXRlVmVydGV4QXJyYXlPRVMoKSxjLmJpbmRWZXJ0ZXhBcnJheU9FUy5zZXQodGhpcy52YW8pLHM9MCx0aGlzLmJvdW5kUHJvZ3JhbT10LHRoaXMuYm91bmRMYXlvdXRWZXJ0ZXhCdWZmZXI9ZSx0aGlzLmJvdW5kUGFpbnRWZXJ0ZXhCdWZmZXJzPWksdGhpcy5ib3VuZEluZGV4QnVmZmVyPW4sdGhpcy5ib3VuZFZlcnRleE9mZnNldD1vLHRoaXMuYm91bmREeW5hbWljVmVydGV4QnVmZmVyPXIsdGhpcy5ib3VuZER5bmFtaWNWZXJ0ZXhCdWZmZXIyPWE7ZWxzZXtzPWMuY3VycmVudE51bUF0dHJpYnV0ZXN8fDA7Zm9yKHZhciBoPWw7aDxzO2grKyl1LmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShoKTt9ZS5lbmFibGVBdHRyaWJ1dGVzKHUsdCk7Zm9yKHZhciBwPTAsZD1pO3A8ZC5sZW5ndGg7cCs9MSl7ZFtwXS5lbmFibGVBdHRyaWJ1dGVzKHUsdCk7fXImJnIuZW5hYmxlQXR0cmlidXRlcyh1LHQpLGEmJmEuZW5hYmxlQXR0cmlidXRlcyh1LHQpLGUuYmluZCgpLGUuc2V0VmVydGV4QXR0cmliUG9pbnRlcnModSx0LG8pO2Zvcih2YXIgZj0wLG09aTtmPG0ubGVuZ3RoO2YrPTEpe3ZhciBfPW1bZl07Xy5iaW5kKCksXy5zZXRWZXJ0ZXhBdHRyaWJQb2ludGVycyh1LHQsbyk7fXImJihyLmJpbmQoKSxyLnNldFZlcnRleEF0dHJpYlBvaW50ZXJzKHUsdCxvKSksbiYmbi5iaW5kKCksYSYmKGEuYmluZCgpLGEuc2V0VmVydGV4QXR0cmliUG9pbnRlcnModSx0LG8pKSxjLmN1cnJlbnROdW1BdHRyaWJ1dGVzPWw7fSxWLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy52YW8mJih0aGlzLmNvbnRleHQuZXh0VmVydGV4QXJyYXlPYmplY3QuZGVsZXRlVmVydGV4QXJyYXlPRVModGhpcy52YW8pLHRoaXMudmFvPW51bGwpO307dmFyIGo9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGksbixvKXtlLmNhbGwodGhpcyksdGhpcy5pZD10LHRoaXMuZGlzcGF0Y2hlcj1uLHRoaXMuY29vcmRpbmF0ZXM9aS5jb29yZGluYXRlcyx0aGlzLnR5cGU9XCJpbWFnZVwiLHRoaXMubWluem9vbT0wLHRoaXMubWF4em9vbT0yMix0aGlzLnRpbGVTaXplPTUxMix0aGlzLnRpbGVzPXt9LHRoaXMuc2V0RXZlbnRlZFBhcmVudChvKSx0aGlzLm9wdGlvbnM9aTt9cmV0dXJuIGUmJihpLl9fcHJvdG9fXz1lKSxpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlKSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pLGkucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZmlyZShuZXcgdC5FdmVudChcImRhdGFsb2FkaW5nXCIse2RhdGFUeXBlOlwic291cmNlXCJ9KSksdGhpcy51cmw9dGhpcy5vcHRpb25zLnVybCx0LmdldEltYWdlKHRoaXMubWFwLl90cmFuc2Zvcm1SZXF1ZXN0KHRoaXMudXJsLHQuUmVzb3VyY2VUeXBlLkltYWdlKSxmdW5jdGlvbihpLG4pe2k/ZS5maXJlKG5ldyB0LkVycm9yRXZlbnQoaSkpOm4mJihlLmltYWdlPXQuZGVmYXVsdCQyLmdldEltYWdlRGF0YShuKSxlLl9maW5pc2hMb2FkaW5nKCkpO30pO30saS5wcm90b3R5cGUuX2ZpbmlzaExvYWRpbmc9ZnVuY3Rpb24oKXt0aGlzLm1hcCYmKHRoaXMuc2V0Q29vcmRpbmF0ZXModGhpcy5jb29yZGluYXRlcyksdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwibWV0YWRhdGFcIn0pKSk7fSxpLnByb3RvdHlwZS5vbkFkZD1mdW5jdGlvbih0KXt0aGlzLm1hcD10LHRoaXMubG9hZCgpO30saS5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oZSl7dGhpcy5jb29yZGluYXRlcz1lO3ZhciBpPXRoaXMubWFwLG49ZS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGkudHJhbnNmb3JtLmxvY2F0aW9uQ29vcmRpbmF0ZShCLmNvbnZlcnQodCkpLnpvb21UbygwKX0pLG89dGhpcy5jZW50ZXJDb29yZD10LmdldENvb3JkaW5hdGVzQ2VudGVyKG4pO28uY29sdW1uPU1hdGguZmxvb3Ioby5jb2x1bW4pLG8ucm93PU1hdGguZmxvb3Ioby5yb3cpLHRoaXMudGlsZUlEPW5ldyB0LkNhbm9uaWNhbFRpbGVJRChvLnpvb20sby5jb2x1bW4sby5yb3cpLHRoaXMubWluem9vbT10aGlzLm1heHpvb209by56b29tO3ZhciByPW4ubWFwKGZ1bmN0aW9uKGUpe3ZhciBpPWUuem9vbVRvKG8uem9vbSk7cmV0dXJuIG5ldyB0LmRlZmF1bHQoTWF0aC5yb3VuZCgoaS5jb2x1bW4tby5jb2x1bW4pKnQuZGVmYXVsdCQxMCksTWF0aC5yb3VuZCgoaS5yb3ctby5yb3cpKnQuZGVmYXVsdCQxMCkpfSk7cmV0dXJuIHRoaXMuX2JvdW5kc0FycmF5PW5ldyB0LlJhc3RlckJvdW5kc0FycmF5LHRoaXMuX2JvdW5kc0FycmF5LmVtcGxhY2VCYWNrKHJbMF0ueCxyWzBdLnksMCwwKSx0aGlzLl9ib3VuZHNBcnJheS5lbXBsYWNlQmFjayhyWzFdLngsclsxXS55LHQuZGVmYXVsdCQxMCwwKSx0aGlzLl9ib3VuZHNBcnJheS5lbXBsYWNlQmFjayhyWzNdLngsclszXS55LDAsdC5kZWZhdWx0JDEwKSx0aGlzLl9ib3VuZHNBcnJheS5lbXBsYWNlQmFjayhyWzJdLngsclsyXS55LHQuZGVmYXVsdCQxMCx0LmRlZmF1bHQkMTApLHRoaXMuYm91bmRzQnVmZmVyJiYodGhpcy5ib3VuZHNCdWZmZXIuZGVzdHJveSgpLGRlbGV0ZSB0aGlzLmJvdW5kc0J1ZmZlciksdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwiY29udGVudFwifSkpLHRoaXN9LGkucHJvdG90eXBlLnByZXBhcmU9ZnVuY3Rpb24oKXtpZigwIT09T2JqZWN0LmtleXModGhpcy50aWxlcykubGVuZ3RoJiZ0aGlzLmltYWdlKXt2YXIgZT10aGlzLm1hcC5wYWludGVyLmNvbnRleHQsaT1lLmdsO2Zvcih2YXIgbiBpbiB0aGlzLmJvdW5kc0J1ZmZlcnx8KHRoaXMuYm91bmRzQnVmZmVyPWUuY3JlYXRlVmVydGV4QnVmZmVyKHRoaXMuX2JvdW5kc0FycmF5LHQuZGVmYXVsdCQxMS5tZW1iZXJzKSksdGhpcy5ib3VuZHNWQU98fCh0aGlzLmJvdW5kc1ZBTz1uZXcgViksdGhpcy50ZXh0dXJlfHwodGhpcy50ZXh0dXJlPW5ldyB0LmRlZmF1bHQkNChlLHRoaXMuaW1hZ2UsaS5SR0JBKSx0aGlzLnRleHR1cmUuYmluZChpLkxJTkVBUixpLkNMQU1QX1RPX0VER0UpKSx0aGlzLnRpbGVzKXt2YXIgbz10aGlzLnRpbGVzW25dO1wibG9hZGVkXCIhPT1vLnN0YXRlJiYoby5zdGF0ZT1cImxvYWRlZFwiLG8udGV4dHVyZT10aGlzLnRleHR1cmUpO319fSxpLnByb3RvdHlwZS5sb2FkVGlsZT1mdW5jdGlvbih0LGUpe3RoaXMudGlsZUlEJiZ0aGlzLnRpbGVJRC5lcXVhbHModC50aWxlSUQuY2Fub25pY2FsKT8odGhpcy50aWxlc1tTdHJpbmcodC50aWxlSUQud3JhcCldPXQsdC5idWNrZXRzPXt9LGUobnVsbCkpOih0LnN0YXRlPVwiZXJyb3JlZFwiLGUobnVsbCkpO30saS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJpbWFnZVwiLHVybDp0aGlzLm9wdGlvbnMudXJsLGNvb3JkaW5hdGVzOnRoaXMuY29vcmRpbmF0ZXN9fSxpLnByb3RvdHlwZS5oYXNUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGl9KHQuRXZlbnRlZCksRz1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKHQsaSxuLG8pe2UuY2FsbCh0aGlzLHQsaSxuLG8pLHRoaXMucm91bmRab29tPSEwLHRoaXMudHlwZT1cInZpZGVvXCIsdGhpcy5vcHRpb25zPWk7fXJldHVybiBlJiYoaS5fX3Byb3RvX189ZSksaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY29uc3RydWN0b3I9aSxpLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxpPXRoaXMub3B0aW9uczt0aGlzLnVybHM9W107Zm9yKHZhciBuPTAsbz1pLnVybHM7bjxvLmxlbmd0aDtuKz0xKXt2YXIgcj1vW25dO2UudXJscy5wdXNoKGUubWFwLl90cmFuc2Zvcm1SZXF1ZXN0KHIsdC5SZXNvdXJjZVR5cGUuU291cmNlKS51cmwpO310LmdldFZpZGVvKHRoaXMudXJscyxmdW5jdGlvbihpLG4pe2k/ZS5maXJlKG5ldyB0LkVycm9yRXZlbnQoaSkpOm4mJihlLnZpZGVvPW4sZS52aWRlby5sb29wPSEwLGUudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlpbmdcIixmdW5jdGlvbigpe2UubWFwLl9yZXJlbmRlcigpO30pLGUubWFwJiZlLnZpZGVvLnBsYXkoKSxlLl9maW5pc2hMb2FkaW5nKCkpO30pO30saS5wcm90b3R5cGUuZ2V0VmlkZW89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWRlb30saS5wcm90b3R5cGUub25BZGQ9ZnVuY3Rpb24odCl7dGhpcy5tYXB8fCh0aGlzLm1hcD10LHRoaXMubG9hZCgpLHRoaXMudmlkZW8mJih0aGlzLnZpZGVvLnBsYXkoKSx0aGlzLnNldENvb3JkaW5hdGVzKHRoaXMuY29vcmRpbmF0ZXMpKSk7fSxpLnByb3RvdHlwZS5wcmVwYXJlPWZ1bmN0aW9uKCl7aWYoISgwPT09T2JqZWN0LmtleXModGhpcy50aWxlcykubGVuZ3RofHx0aGlzLnZpZGVvLnJlYWR5U3RhdGU8Mikpe3ZhciBlPXRoaXMubWFwLnBhaW50ZXIuY29udGV4dCxpPWUuZ2w7Zm9yKHZhciBuIGluIHRoaXMuYm91bmRzQnVmZmVyfHwodGhpcy5ib3VuZHNCdWZmZXI9ZS5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5fYm91bmRzQXJyYXksdC5kZWZhdWx0JDExLm1lbWJlcnMpKSx0aGlzLmJvdW5kc1ZBT3x8KHRoaXMuYm91bmRzVkFPPW5ldyBWKSx0aGlzLnRleHR1cmU/dGhpcy52aWRlby5wYXVzZWR8fCh0aGlzLnRleHR1cmUuYmluZChpLkxJTkVBUixpLkNMQU1QX1RPX0VER0UpLGkudGV4U3ViSW1hZ2UyRChpLlRFWFRVUkVfMkQsMCwwLDAsaS5SR0JBLGkuVU5TSUdORURfQllURSx0aGlzLnZpZGVvKSk6KHRoaXMudGV4dHVyZT1uZXcgdC5kZWZhdWx0JDQoZSx0aGlzLnZpZGVvLGkuUkdCQSksdGhpcy50ZXh0dXJlLmJpbmQoaS5MSU5FQVIsaS5DTEFNUF9UT19FREdFKSksdGhpcy50aWxlcyl7dmFyIG89dGhpcy50aWxlc1tuXTtcImxvYWRlZFwiIT09by5zdGF0ZSYmKG8uc3RhdGU9XCJsb2FkZWRcIixvLnRleHR1cmU9dGhpcy50ZXh0dXJlKTt9fX0saS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJ2aWRlb1wiLHVybHM6dGhpcy51cmxzLGNvb3JkaW5hdGVzOnRoaXMuY29vcmRpbmF0ZXN9fSxpLnByb3RvdHlwZS5oYXNUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlkZW8mJiF0aGlzLnZpZGVvLnBhdXNlZH0saX0oaiksVz1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKGksbixvLHIpe2UuY2FsbCh0aGlzLGksbixvLHIpLG4uY29vcmRpbmF0ZXM/QXJyYXkuaXNBcnJheShuLmNvb3JkaW5hdGVzKSYmND09PW4uY29vcmRpbmF0ZXMubGVuZ3RoJiYhbi5jb29yZGluYXRlcy5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiFBcnJheS5pc0FycmF5KHQpfHwyIT09dC5sZW5ndGh8fHQuc29tZShmdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgdH0pfSl8fHRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyB0LmRlZmF1bHQkMTIoXCJzb3VyY2VzLlwiK2ksbnVsbCwnXCJjb29yZGluYXRlc1wiIHByb3BlcnR5IG11c3QgYmUgYW4gYXJyYXkgb2YgNCBsb25naXR1ZGUvbGF0aXR1ZGUgYXJyYXkgcGFpcnMnKSkpOnRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyB0LmRlZmF1bHQkMTIoXCJzb3VyY2VzLlwiK2ksbnVsbCwnbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcImNvb3JkaW5hdGVzXCInKSkpLG4uYW5pbWF0ZSYmXCJib29sZWFuXCIhPXR5cGVvZiBuLmFuaW1hdGUmJnRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyB0LmRlZmF1bHQkMTIoXCJzb3VyY2VzLlwiK2ksbnVsbCwnb3B0aW9uYWwgXCJhbmltYXRlXCIgcHJvcGVydHkgbXVzdCBiZSBhIGJvb2xlYW4gdmFsdWUnKSkpLG4uY2FudmFzP1wic3RyaW5nXCI9PXR5cGVvZiBuLmNhbnZhc3x8bi5jYW52YXMgaW5zdGFuY2VvZiB0LmRlZmF1bHQkMS5IVE1MQ2FudmFzRWxlbWVudHx8dGhpcy5maXJlKG5ldyB0LkVycm9yRXZlbnQobmV3IHQuZGVmYXVsdCQxMihcInNvdXJjZXMuXCIraSxudWxsLCdcImNhbnZhc1wiIG11c3QgYmUgZWl0aGVyIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgSUQgb2YgdGhlIGNhbnZhcyBlbGVtZW50IGZyb20gd2hpY2ggdG8gcmVhZCwgb3IgYW4gSFRNTENhbnZhc0VsZW1lbnQgaW5zdGFuY2UnKSkpOnRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyB0LmRlZmF1bHQkMTIoXCJzb3VyY2VzLlwiK2ksbnVsbCwnbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcImNhbnZhc1wiJykpKSx0aGlzLm9wdGlvbnM9bix0aGlzLmFuaW1hdGU9dm9pZCAwPT09bi5hbmltYXRlfHxuLmFuaW1hdGU7fXJldHVybiBlJiYoaS5fX3Byb3RvX189ZSksaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY29uc3RydWN0b3I9aSxpLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKCl7dGhpcy5jYW52YXN8fCh0aGlzLmNhbnZhcz10aGlzLm9wdGlvbnMuY2FudmFzIGluc3RhbmNlb2YgdC5kZWZhdWx0JDEuSFRNTENhbnZhc0VsZW1lbnQ/dGhpcy5vcHRpb25zLmNhbnZhczp0LmRlZmF1bHQkMS5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm9wdGlvbnMuY2FudmFzKSksdGhpcy53aWR0aD10aGlzLmNhbnZhcy53aWR0aCx0aGlzLmhlaWdodD10aGlzLmNhbnZhcy5oZWlnaHQsdGhpcy5faGFzSW52YWxpZERpbWVuc2lvbnMoKT90aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJDYW52YXMgZGltZW5zaW9ucyBjYW5ub3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHplcm8uXCIpKSk6KHRoaXMucGxheT1mdW5jdGlvbigpe3RoaXMuX3BsYXlpbmc9ITAsdGhpcy5tYXAuX3JlcmVuZGVyKCk7fSx0aGlzLnBhdXNlPWZ1bmN0aW9uKCl7dGhpcy5fcGxheWluZz0hMTt9LHRoaXMuX2ZpbmlzaExvYWRpbmcoKSk7fSxpLnByb3RvdHlwZS5nZXRDYW52YXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW52YXN9LGkucHJvdG90eXBlLm9uQWRkPWZ1bmN0aW9uKHQpe3RoaXMubWFwPXQsdGhpcy5sb2FkKCksdGhpcy5jYW52YXMmJnRoaXMuYW5pbWF0ZSYmdGhpcy5wbGF5KCk7fSxpLnByb3RvdHlwZS5vblJlbW92ZT1mdW5jdGlvbigpe3RoaXMucGF1c2UoKTt9LGkucHJvdG90eXBlLnByZXBhcmU9ZnVuY3Rpb24oKXt2YXIgZT0hMTtpZih0aGlzLmNhbnZhcy53aWR0aCE9PXRoaXMud2lkdGgmJih0aGlzLndpZHRoPXRoaXMuY2FudmFzLndpZHRoLGU9ITApLHRoaXMuY2FudmFzLmhlaWdodCE9PXRoaXMuaGVpZ2h0JiYodGhpcy5oZWlnaHQ9dGhpcy5jYW52YXMuaGVpZ2h0LGU9ITApLCF0aGlzLl9oYXNJbnZhbGlkRGltZW5zaW9ucygpJiYwIT09T2JqZWN0LmtleXModGhpcy50aWxlcykubGVuZ3RoKXt2YXIgaT10aGlzLm1hcC5wYWludGVyLmNvbnRleHQsbj1pLmdsO2Zvcih2YXIgbyBpbiB0aGlzLmJvdW5kc0J1ZmZlcnx8KHRoaXMuYm91bmRzQnVmZmVyPWkuY3JlYXRlVmVydGV4QnVmZmVyKHRoaXMuX2JvdW5kc0FycmF5LHQuZGVmYXVsdCQxMS5tZW1iZXJzKSksdGhpcy5ib3VuZHNWQU98fCh0aGlzLmJvdW5kc1ZBTz1uZXcgViksdGhpcy50ZXh0dXJlP2U/dGhpcy50ZXh0dXJlLnVwZGF0ZSh0aGlzLmNhbnZhcyk6dGhpcy5fcGxheWluZyYmKHRoaXMudGV4dHVyZS5iaW5kKG4uTElORUFSLG4uQ0xBTVBfVE9fRURHRSksbi50ZXhTdWJJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLDAsMCxuLlJHQkEsbi5VTlNJR05FRF9CWVRFLHRoaXMuY2FudmFzKSk6KHRoaXMudGV4dHVyZT1uZXcgdC5kZWZhdWx0JDQoaSx0aGlzLmNhbnZhcyxuLlJHQkEpLHRoaXMudGV4dHVyZS5iaW5kKG4uTElORUFSLG4uQ0xBTVBfVE9fRURHRSkpLHRoaXMudGlsZXMpe3ZhciByPXRoaXMudGlsZXNbb107XCJsb2FkZWRcIiE9PXIuc3RhdGUmJihyLnN0YXRlPVwibG9hZGVkXCIsci50ZXh0dXJlPXRoaXMudGV4dHVyZSk7fX19LGkucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3JldHVybnt0eXBlOlwiY2FudmFzXCIsY29vcmRpbmF0ZXM6dGhpcy5jb29yZGluYXRlc319LGkucHJvdG90eXBlLmhhc1RyYW5zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWluZ30saS5wcm90b3R5cGUuX2hhc0ludmFsaWREaW1lbnNpb25zPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT1bdGhpcy5jYW52YXMud2lkdGgsdGhpcy5jYW52YXMuaGVpZ2h0XTt0PGUubGVuZ3RoO3QrPTEpe3ZhciBpPWVbdF07aWYoaXNOYU4oaSl8fGk8PTApcmV0dXJuITB9cmV0dXJuITF9LGl9KGopLHE9e3ZlY3RvcjpOLHJhc3RlcjokLFwicmFzdGVyLWRlbVwiOlUsZ2VvanNvbjpaLHZpZGVvOkcsaW1hZ2U6aixjYW52YXM6V30sWD1mdW5jdGlvbihlLGksbixvKXt2YXIgcj1uZXcgcVtpLnR5cGVdKGUsaSxuLG8pO2lmKHIuaWQhPT1lKXRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIFNvdXJjZSBpZCB0byBiZSBcIitlK1wiIGluc3RlYWQgb2YgXCIrci5pZCk7cmV0dXJuIHQuYmluZEFsbChbXCJsb2FkXCIsXCJhYm9ydFwiLFwidW5sb2FkXCIsXCJzZXJpYWxpemVcIixcInByZXBhcmVcIl0scikscn07ZnVuY3Rpb24gSCh0LGUsaSxuLG8pe3ZhciByPW8ubWF4UGl0Y2hTY2FsZUZhY3RvcigpLGE9dC50aWxlc0luKGkscik7YS5zb3J0KEspO2Zvcih2YXIgcz1bXSxsPTAsYz1hO2w8Yy5sZW5ndGg7bCs9MSl7dmFyIHU9Y1tsXTtzLnB1c2goe3dyYXBwZWRUaWxlSUQ6dS50aWxlSUQud3JhcHBlZCgpLmtleSxxdWVyeVJlc3VsdHM6dS50aWxlLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlLHQuX3N0YXRlLHUucXVlcnlHZW9tZXRyeSx1LnNjYWxlLG4sbyxyLHQudHJhbnNmb3JtLmNhbGN1bGF0ZVBvc01hdHJpeCh1LnRpbGVJRC50b1Vud3JhcHBlZCgpKSl9KTt9dmFyIGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LGk9e30sbj0wLG89dDtuPG8ubGVuZ3RoO24rPTEpe3ZhciByPW9bbl0sYT1yLnF1ZXJ5UmVzdWx0cyxzPXIud3JhcHBlZFRpbGVJRCxsPWlbc109aVtzXXx8e307Zm9yKHZhciBjIGluIGEpZm9yKHZhciB1PWFbY10saD1sW2NdPWxbY118fHt9LHA9ZVtjXT1lW2NdfHxbXSxkPTAsZj11O2Q8Zi5sZW5ndGg7ZCs9MSl7dmFyIG09ZltkXTtoW20uZmVhdHVyZUluZGV4XXx8KGhbbS5mZWF0dXJlSW5kZXhdPSEwLHAucHVzaChtLmZlYXR1cmUpKTt9fXJldHVybiBlfShzKTtmb3IodmFyIHAgaW4gaCloW3BdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGk9dC5nZXRGZWF0dXJlU3RhdGUoZS5sYXllcltcInNvdXJjZS1sYXllclwiXSxlLmlkKTtlLnNvdXJjZT1lLmxheWVyLnNvdXJjZSxlLmxheWVyW1wic291cmNlLWxheWVyXCJdJiYoZS5zb3VyY2VMYXllcj1lLmxheWVyW1wic291cmNlLWxheWVyXCJdKSxlLnN0YXRlPWk7fSk7cmV0dXJuIGh9ZnVuY3Rpb24gSyh0LGUpe3ZhciBpPXQudGlsZUlELG49ZS50aWxlSUQ7cmV0dXJuIGkub3ZlcnNjYWxlZFotbi5vdmVyc2NhbGVkWnx8aS5jYW5vbmljYWwueS1uLmNhbm9uaWNhbC55fHxpLndyYXAtbi53cmFwfHxpLmNhbm9uaWNhbC54LW4uY2Fub25pY2FsLnh9dmFyIFk9ZnVuY3Rpb24odCxlKXt0aGlzLm1heD10LHRoaXMub25SZW1vdmU9ZSx0aGlzLnJlc2V0KCk7fTtZLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLmRhdGEpZm9yKHZhciBlPTAsaT10aGlzLmRhdGFbdF07ZTxpLmxlbmd0aDtlKz0xKXt2YXIgbj1pW2VdO24udGltZW91dCYmY2xlYXJUaW1lb3V0KG4udGltZW91dCksdGhpcy5vblJlbW92ZShuLnZhbHVlKTt9cmV0dXJuIHRoaXMuZGF0YT17fSx0aGlzLm9yZGVyPVtdLHRoaXN9LFkucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcyxvPXQud3JhcHBlZCgpLmtleTt2b2lkIDA9PT10aGlzLmRhdGFbb10mJih0aGlzLmRhdGFbb109W10pO3ZhciByPXt2YWx1ZTplLHRpbWVvdXQ6dm9pZCAwfTtpZih2b2lkIDAhPT1pJiYoci50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLnJlbW92ZSh0LHIpO30saSkpLHRoaXMuZGF0YVtvXS5wdXNoKHIpLHRoaXMub3JkZXIucHVzaChvKSx0aGlzLm9yZGVyLmxlbmd0aD50aGlzLm1heCl7dmFyIGE9dGhpcy5fZ2V0QW5kUmVtb3ZlQnlLZXkodGhpcy5vcmRlclswXSk7YSYmdGhpcy5vblJlbW92ZShhKTt9cmV0dXJuIHRoaXN9LFkucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXtyZXR1cm4gdC53cmFwcGVkKCkua2V5IGluIHRoaXMuZGF0YX0sWS5wcm90b3R5cGUuZ2V0QW5kUmVtb3ZlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhcyh0KT90aGlzLl9nZXRBbmRSZW1vdmVCeUtleSh0LndyYXBwZWQoKS5rZXkpOm51bGx9LFkucHJvdG90eXBlLl9nZXRBbmRSZW1vdmVCeUtleT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmRhdGFbdF0uc2hpZnQoKTtyZXR1cm4gZS50aW1lb3V0JiZjbGVhclRpbWVvdXQoZS50aW1lb3V0KSwwPT09dGhpcy5kYXRhW3RdLmxlbmd0aCYmZGVsZXRlIHRoaXMuZGF0YVt0XSx0aGlzLm9yZGVyLnNwbGljZSh0aGlzLm9yZGVyLmluZGV4T2YodCksMSksZS52YWx1ZX0sWS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhcyh0KT90aGlzLmRhdGFbdC53cmFwcGVkKCkua2V5XVswXS52YWx1ZTpudWxsfSxZLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5oYXModCkpcmV0dXJuIHRoaXM7dmFyIGk9dC53cmFwcGVkKCkua2V5LG49dm9pZCAwPT09ZT8wOnRoaXMuZGF0YVtpXS5pbmRleE9mKGUpLG89dGhpcy5kYXRhW2ldW25dO3JldHVybiB0aGlzLmRhdGFbaV0uc3BsaWNlKG4sMSksby50aW1lb3V0JiZjbGVhclRpbWVvdXQoby50aW1lb3V0KSwwPT09dGhpcy5kYXRhW2ldLmxlbmd0aCYmZGVsZXRlIHRoaXMuZGF0YVtpXSx0aGlzLm9uUmVtb3ZlKG8udmFsdWUpLHRoaXMub3JkZXIuc3BsaWNlKHRoaXMub3JkZXIuaW5kZXhPZihpKSwxKSx0aGlzfSxZLnByb3RvdHlwZS5zZXRNYXhTaXplPWZ1bmN0aW9uKHQpe2Zvcih0aGlzLm1heD10O3RoaXMub3JkZXIubGVuZ3RoPnRoaXMubWF4Oyl7dmFyIGU9dGhpcy5fZ2V0QW5kUmVtb3ZlQnlLZXkodGhpcy5vcmRlclswXSk7ZSYmdGhpcy5vblJlbW92ZShlKTt9cmV0dXJuIHRoaXN9O3ZhciBKPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLmNvbnRleHQ9dDt2YXIgbj10LmdsO3RoaXMuYnVmZmVyPW4uY3JlYXRlQnVmZmVyKCksdGhpcy5keW5hbWljRHJhdz1Cb29sZWFuKGkpLHRoaXMudW5iaW5kVkFPKCksdC5iaW5kRWxlbWVudEJ1ZmZlci5zZXQodGhpcy5idWZmZXIpLG4uYnVmZmVyRGF0YShuLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGUuYXJyYXlCdWZmZXIsdGhpcy5keW5hbWljRHJhdz9uLkRZTkFNSUNfRFJBVzpuLlNUQVRJQ19EUkFXKSx0aGlzLmR5bmFtaWNEcmF3fHxkZWxldGUgZS5hcnJheUJ1ZmZlcjt9O0oucHJvdG90eXBlLnVuYmluZFZBTz1mdW5jdGlvbigpe3RoaXMuY29udGV4dC5leHRWZXJ0ZXhBcnJheU9iamVjdCYmdGhpcy5jb250ZXh0LmJpbmRWZXJ0ZXhBcnJheU9FUy5zZXQobnVsbCk7fSxKLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKCl7dGhpcy5jb250ZXh0LmJpbmRFbGVtZW50QnVmZmVyLnNldCh0aGlzLmJ1ZmZlcik7fSxKLnByb3RvdHlwZS51cGRhdGVEYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGV4dC5nbDt0aGlzLnVuYmluZFZBTygpLHRoaXMuYmluZCgpLGUuYnVmZmVyU3ViRGF0YShlLkVMRU1FTlRfQVJSQVlfQlVGRkVSLDAsdC5hcnJheUJ1ZmZlcik7fSxKLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb250ZXh0LmdsO3RoaXMuYnVmZmVyJiYodC5kZWxldGVCdWZmZXIodGhpcy5idWZmZXIpLGRlbGV0ZSB0aGlzLmJ1ZmZlcik7fTt2YXIgUT17SW50ODpcIkJZVEVcIixVaW50ODpcIlVOU0lHTkVEX0JZVEVcIixJbnQxNjpcIlNIT1JUXCIsVWludDE2OlwiVU5TSUdORURfU0hPUlRcIixJbnQzMjpcIklOVFwiLFVpbnQzMjpcIlVOU0lHTkVEX0lOVFwiLEZsb2F0MzI6XCJGTE9BVFwifSx0dD1mdW5jdGlvbih0LGUsaSxuKXt0aGlzLmxlbmd0aD1lLmxlbmd0aCx0aGlzLmF0dHJpYnV0ZXM9aSx0aGlzLml0ZW1TaXplPWUuYnl0ZXNQZXJFbGVtZW50LHRoaXMuZHluYW1pY0RyYXc9bix0aGlzLmNvbnRleHQ9dDt2YXIgbz10LmdsO3RoaXMuYnVmZmVyPW8uY3JlYXRlQnVmZmVyKCksdC5iaW5kVmVydGV4QnVmZmVyLnNldCh0aGlzLmJ1ZmZlciksby5idWZmZXJEYXRhKG8uQVJSQVlfQlVGRkVSLGUuYXJyYXlCdWZmZXIsdGhpcy5keW5hbWljRHJhdz9vLkRZTkFNSUNfRFJBVzpvLlNUQVRJQ19EUkFXKSx0aGlzLmR5bmFtaWNEcmF3fHxkZWxldGUgZS5hcnJheUJ1ZmZlcjt9O3R0LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKCl7dGhpcy5jb250ZXh0LmJpbmRWZXJ0ZXhCdWZmZXIuc2V0KHRoaXMuYnVmZmVyKTt9LHR0LnByb3RvdHlwZS51cGRhdGVEYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGV4dC5nbDt0aGlzLmJpbmQoKSxlLmJ1ZmZlclN1YkRhdGEoZS5BUlJBWV9CVUZGRVIsMCx0LmFycmF5QnVmZmVyKTt9LHR0LnByb3RvdHlwZS5lbmFibGVBdHRyaWJ1dGVzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTA7aTx0aGlzLmF0dHJpYnV0ZXMubGVuZ3RoO2krKyl7dmFyIG49dGhpcy5hdHRyaWJ1dGVzW2ldLG89ZS5hdHRyaWJ1dGVzW24ubmFtZV07dm9pZCAwIT09byYmdC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShvKTt9fSx0dC5wcm90b3R5cGUuc2V0VmVydGV4QXR0cmliUG9pbnRlcnM9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj0wO248dGhpcy5hdHRyaWJ1dGVzLmxlbmd0aDtuKyspe3ZhciBvPXRoaXMuYXR0cmlidXRlc1tuXSxyPWUuYXR0cmlidXRlc1tvLm5hbWVdO3ZvaWQgMCE9PXImJnQudmVydGV4QXR0cmliUG9pbnRlcihyLG8uY29tcG9uZW50cyx0W1Fbby50eXBlXV0sITEsdGhpcy5pdGVtU2l6ZSxvLm9mZnNldCt0aGlzLml0ZW1TaXplKihpfHwwKSk7fX0sdHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbnRleHQuZ2w7dGhpcy5idWZmZXImJih0LmRlbGV0ZUJ1ZmZlcih0aGlzLmJ1ZmZlciksZGVsZXRlIHRoaXMuYnVmZmVyKTt9O3ZhciBldD1mdW5jdGlvbihlKXt0aGlzLmNvbnRleHQ9ZSx0aGlzLmN1cnJlbnQ9dC5kZWZhdWx0JDgudHJhbnNwYXJlbnQ7fTtldC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0sZXQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmN1cnJlbnQ7dC5yPT09ZS5yJiZ0Lmc9PT1lLmcmJnQuYj09PWUuYiYmdC5hPT09ZS5hfHwodGhpcy5jb250ZXh0LmdsLmNsZWFyQ29sb3IodC5yLHQuZyx0LmIsdC5hKSx0aGlzLmN1cnJlbnQ9dCk7fTt2YXIgaXQ9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQsdGhpcy5jdXJyZW50PTE7fTtpdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0saXQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0aGlzLmN1cnJlbnQhPT10JiYodGhpcy5jb250ZXh0LmdsLmNsZWFyRGVwdGgodCksdGhpcy5jdXJyZW50PXQpO307dmFyIG50PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10LHRoaXMuY3VycmVudD0wO307bnQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LG50LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5jdXJyZW50IT09dCYmKHRoaXMuY29udGV4dC5nbC5jbGVhclN0ZW5jaWwodCksdGhpcy5jdXJyZW50PXQpO307dmFyIG90PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10LHRoaXMuY3VycmVudD1bITAsITAsITAsITBdO307b3QucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LG90LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jdXJyZW50O3RbMF09PT1lWzBdJiZ0WzFdPT09ZVsxXSYmdFsyXT09PWVbMl0mJnRbM109PT1lWzNdfHwodGhpcy5jb250ZXh0LmdsLmNvbG9yTWFzayh0WzBdLHRbMV0sdFsyXSx0WzNdKSx0aGlzLmN1cnJlbnQ9dCk7fTt2YXIgcnQ9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQsdGhpcy5jdXJyZW50PSEwO307cnQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LHJ0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5jdXJyZW50IT09dCYmKHRoaXMuY29udGV4dC5nbC5kZXB0aE1hc2sodCksdGhpcy5jdXJyZW50PXQpO307dmFyIGF0PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10LHRoaXMuY3VycmVudD0yNTU7fTthdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0sYXQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0aGlzLmN1cnJlbnQhPT10JiYodGhpcy5jb250ZXh0LmdsLnN0ZW5jaWxNYXNrKHQpLHRoaXMuY3VycmVudD10KTt9O3ZhciBzdD1mdW5jdGlvbih0KXt0aGlzLmNvbnRleHQ9dCx0aGlzLmN1cnJlbnQ9e2Z1bmM6dC5nbC5BTFdBWVMscmVmOjAsbWFzazoyNTV9O307c3QucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LHN0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jdXJyZW50O3QuZnVuYz09PWUuZnVuYyYmdC5yZWY9PT1lLnJlZiYmdC5tYXNrPT09ZS5tYXNrfHwodGhpcy5jb250ZXh0LmdsLnN0ZW5jaWxGdW5jKHQuZnVuYyx0LnJlZix0Lm1hc2spLHRoaXMuY3VycmVudD10KTt9O3ZhciBsdD1mdW5jdGlvbih0KXt0aGlzLmNvbnRleHQ9dDt2YXIgZT10aGlzLmNvbnRleHQuZ2w7dGhpcy5jdXJyZW50PVtlLktFRVAsZS5LRUVQLGUuS0VFUF07fTtsdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0sbHQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmN1cnJlbnQ7dFswXT09PWVbMF0mJnRbMV09PT1lWzFdJiZ0WzJdPT09ZVsyXXx8KHRoaXMuY29udGV4dC5nbC5zdGVuY2lsT3AodFswXSx0WzFdLHRbMl0pLHRoaXMuY3VycmVudD10KTt9O3ZhciBjdD1mdW5jdGlvbih0KXt0aGlzLmNvbnRleHQ9dCx0aGlzLmN1cnJlbnQ9ITE7fTtjdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0sY3QucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXtpZih0aGlzLmN1cnJlbnQhPT10KXt2YXIgZT10aGlzLmNvbnRleHQuZ2w7dD9lLmVuYWJsZShlLlNURU5DSUxfVEVTVCk6ZS5kaXNhYmxlKGUuU1RFTkNJTF9URVNUKSx0aGlzLmN1cnJlbnQ9dDt9fTt2YXIgdXQ9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQsdGhpcy5jdXJyZW50PVswLDFdO307dXQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LHV0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jdXJyZW50O3RbMF09PT1lWzBdJiZ0WzFdPT09ZVsxXXx8KHRoaXMuY29udGV4dC5nbC5kZXB0aFJhbmdlKHRbMF0sdFsxXSksdGhpcy5jdXJyZW50PXQpO307dmFyIGh0PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10LHRoaXMuY3VycmVudD0hMTt9O2h0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50fSxodC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuY3VycmVudCE9PXQpe3ZhciBlPXRoaXMuY29udGV4dC5nbDt0P2UuZW5hYmxlKGUuREVQVEhfVEVTVCk6ZS5kaXNhYmxlKGUuREVQVEhfVEVTVCksdGhpcy5jdXJyZW50PXQ7fX07dmFyIHB0PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10LHRoaXMuY3VycmVudD10LmdsLkxFU1M7fTtwdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0scHQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0aGlzLmN1cnJlbnQhPT10JiYodGhpcy5jb250ZXh0LmdsLmRlcHRoRnVuYyh0KSx0aGlzLmN1cnJlbnQ9dCk7fTt2YXIgZHQ9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQsdGhpcy5jdXJyZW50PSExO307ZHQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LGR0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5jdXJyZW50IT09dCl7dmFyIGU9dGhpcy5jb250ZXh0LmdsO3Q/ZS5lbmFibGUoZS5CTEVORCk6ZS5kaXNhYmxlKGUuQkxFTkQpLHRoaXMuY3VycmVudD10O319O3ZhciBmdD1mdW5jdGlvbih0KXt0aGlzLmNvbnRleHQ9dDt2YXIgZT10aGlzLmNvbnRleHQuZ2w7dGhpcy5jdXJyZW50PVtlLk9ORSxlLlpFUk9dO307ZnQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LGZ0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jdXJyZW50O3RbMF09PT1lWzBdJiZ0WzFdPT09ZVsxXXx8KHRoaXMuY29udGV4dC5nbC5ibGVuZEZ1bmModFswXSx0WzFdKSx0aGlzLmN1cnJlbnQ9dCk7fTt2YXIgbXQ9ZnVuY3Rpb24oZSl7dGhpcy5jb250ZXh0PWUsdGhpcy5jdXJyZW50PXQuZGVmYXVsdCQ4LnRyYW5zcGFyZW50O307bXQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LG10LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jdXJyZW50O3Qucj09PWUuciYmdC5nPT09ZS5nJiZ0LmI9PT1lLmImJnQuYT09PWUuYXx8KHRoaXMuY29udGV4dC5nbC5ibGVuZENvbG9yKHQucix0LmcsdC5iLHQuYSksdGhpcy5jdXJyZW50PXQpO307dmFyIF90PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10LHRoaXMuY3VycmVudD1udWxsO307X3QucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LF90LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5jdXJyZW50IT09dCYmKHRoaXMuY29udGV4dC5nbC51c2VQcm9ncmFtKHQpLHRoaXMuY3VycmVudD10KTt9O3ZhciBndD1mdW5jdGlvbih0KXt0aGlzLmNvbnRleHQ9dCx0aGlzLmN1cnJlbnQ9dC5nbC5URVhUVVJFMDt9O2d0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50fSxndC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQpe3RoaXMuY3VycmVudCE9PXQmJih0aGlzLmNvbnRleHQuZ2wuYWN0aXZlVGV4dHVyZSh0KSx0aGlzLmN1cnJlbnQ9dCk7fTt2YXIgdnQ9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQ7dmFyIGU9dGhpcy5jb250ZXh0LmdsO3RoaXMuY3VycmVudD1bMCwwLGUuZHJhd2luZ0J1ZmZlcldpZHRoLGUuZHJhd2luZ0J1ZmZlckhlaWdodF07fTt2dC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0sdnQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmN1cnJlbnQ7dFswXT09PWVbMF0mJnRbMV09PT1lWzFdJiZ0WzJdPT09ZVsyXSYmdFszXT09PWVbM118fCh0aGlzLmNvbnRleHQuZ2wudmlld3BvcnQodFswXSx0WzFdLHRbMl0sdFszXSksdGhpcy5jdXJyZW50PXQpO307dmFyIHl0PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10LHRoaXMuY3VycmVudD1udWxsO307eXQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LHl0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5jdXJyZW50IT09dCl7dmFyIGU9dGhpcy5jb250ZXh0LmdsO2UuYmluZEZyYW1lYnVmZmVyKGUuRlJBTUVCVUZGRVIsdCksdGhpcy5jdXJyZW50PXQ7fX07dmFyIHh0PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10LHRoaXMuY3VycmVudD1udWxsO307eHQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LHh0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5jdXJyZW50IT09dCl7dmFyIGU9dGhpcy5jb250ZXh0LmdsO2UuYmluZFJlbmRlcmJ1ZmZlcihlLlJFTkRFUkJVRkZFUix0KSx0aGlzLmN1cnJlbnQ9dDt9fTt2YXIgYnQ9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQsdGhpcy5jdXJyZW50PW51bGw7fTtidC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0sYnQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXtpZih0aGlzLmN1cnJlbnQhPT10KXt2YXIgZT10aGlzLmNvbnRleHQuZ2w7ZS5iaW5kVGV4dHVyZShlLlRFWFRVUkVfMkQsdCksdGhpcy5jdXJyZW50PXQ7fX07dmFyIHd0PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10LHRoaXMuY3VycmVudD1udWxsO307d3QucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LHd0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5jdXJyZW50IT09dCl7dmFyIGU9dGhpcy5jb250ZXh0LmdsO2UuYmluZEJ1ZmZlcihlLkFSUkFZX0JVRkZFUix0KSx0aGlzLmN1cnJlbnQ9dDt9fTt2YXIgRXQ9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQsdGhpcy5jdXJyZW50PW51bGw7fTtFdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0sRXQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRleHQuZ2w7ZS5iaW5kQnVmZmVyKGUuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdCksdGhpcy5jdXJyZW50PXQ7fTt2YXIgVHQ9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQsdGhpcy5jdXJyZW50PW51bGw7fTtUdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0sVHQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0aGlzLmN1cnJlbnQhPT10JiZ0aGlzLmNvbnRleHQuZXh0VmVydGV4QXJyYXlPYmplY3QmJih0aGlzLmNvbnRleHQuZXh0VmVydGV4QXJyYXlPYmplY3QuYmluZFZlcnRleEFycmF5T0VTKHQpLHRoaXMuY3VycmVudD10KTt9O3ZhciBJdD1mdW5jdGlvbih0KXt0aGlzLmNvbnRleHQ9dCx0aGlzLmN1cnJlbnQ9NDt9O0l0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50fSxJdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuY3VycmVudCE9PXQpe3ZhciBlPXRoaXMuY29udGV4dC5nbDtlLnBpeGVsU3RvcmVpKGUuVU5QQUNLX0FMSUdOTUVOVCx0KSx0aGlzLmN1cnJlbnQ9dDt9fTt2YXIgQ3Q9ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQsdGhpcy5jdXJyZW50PSExO307Q3QucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnR9LEN0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5jdXJyZW50IT09dCl7dmFyIGU9dGhpcy5jb250ZXh0LmdsO2UucGl4ZWxTdG9yZWkoZS5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsdCksdGhpcy5jdXJyZW50PXQ7fX07dmFyIFN0PWZ1bmN0aW9uKHQsZSl7dGhpcy5jb250ZXh0PXQsdGhpcy5jdXJyZW50PW51bGwsdGhpcy5wYXJlbnQ9ZTt9O1N0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50fTt2YXIgenQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3QuY2FsbCh0aGlzLGUsaSksdGhpcy5kaXJ0eT0hMTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXtpZih0aGlzLmRpcnR5fHx0aGlzLmN1cnJlbnQhPT10KXt2YXIgZT10aGlzLmNvbnRleHQuZ2w7dGhpcy5jb250ZXh0LmJpbmRGcmFtZWJ1ZmZlci5zZXQodGhpcy5wYXJlbnQpLGUuZnJhbWVidWZmZXJUZXh0dXJlMkQoZS5GUkFNRUJVRkZFUixlLkNPTE9SX0FUVEFDSE1FTlQwLGUuVEVYVFVSRV8yRCx0LDApLHRoaXMuY3VycmVudD10LHRoaXMuZGlydHk9ITE7fX0sZS5wcm90b3R5cGUuc2V0RGlydHk9ZnVuY3Rpb24oKXt0aGlzLmRpcnR5PSEwO30sZX0oU3QpLEF0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXtpZih0aGlzLmN1cnJlbnQhPT10KXt2YXIgZT10aGlzLmNvbnRleHQuZ2w7dGhpcy5jb250ZXh0LmJpbmRGcmFtZWJ1ZmZlci5zZXQodGhpcy5wYXJlbnQpLGUuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoZS5GUkFNRUJVRkZFUixlLkRFUFRIX0FUVEFDSE1FTlQsZS5SRU5ERVJCVUZGRVIsdCksdGhpcy5jdXJyZW50PXQ7fX0sZX0oU3QpLE10PWZ1bmN0aW9uKHQsZSxpKXt0aGlzLmNvbnRleHQ9dCx0aGlzLndpZHRoPWUsdGhpcy5oZWlnaHQ9aTt2YXIgbj10LmdsLG89dGhpcy5mcmFtZWJ1ZmZlcj1uLmNyZWF0ZUZyYW1lYnVmZmVyKCk7dGhpcy5jb2xvckF0dGFjaG1lbnQ9bmV3IHp0KHQsbyksdGhpcy5kZXB0aEF0dGFjaG1lbnQ9bmV3IEF0KHQsbyk7fTtNdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29udGV4dC5nbCxlPXRoaXMuY29sb3JBdHRhY2htZW50LmdldCgpO2UmJnQuZGVsZXRlVGV4dHVyZShlKTt2YXIgaT10aGlzLmRlcHRoQXR0YWNobWVudC5nZXQoKTtpJiZ0LmRlbGV0ZVJlbmRlcmJ1ZmZlcihpKSx0LmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuZnJhbWVidWZmZXIpO307dmFyIEx0PWZ1bmN0aW9uKHQsZSxpKXt0aGlzLmZ1bmM9dCx0aGlzLm1hc2s9ZSx0aGlzLnJhbmdlPWk7fTtMdC5SZWFkT25seT0hMSxMdC5SZWFkV3JpdGU9ITAsTHQuZGlzYWJsZWQ9bmV3IEx0KDUxOSxMdC5SZWFkT25seSxbMCwxXSk7dmFyIER0PWZ1bmN0aW9uKHQsZSxpLG4sbyxyKXt0aGlzLnRlc3Q9dCx0aGlzLnJlZj1lLHRoaXMubWFzaz1pLHRoaXMuZmFpbD1uLHRoaXMuZGVwdGhGYWlsPW8sdGhpcy5wYXNzPXI7fTtEdC5kaXNhYmxlZD1uZXcgRHQoe2Z1bmM6NTE5LG1hc2s6MH0sMCwwLDc2ODAsNzY4MCw3NjgwKTt2YXIgUnQ9ZnVuY3Rpb24odCxlLGkpe3RoaXMuYmxlbmRGdW5jdGlvbj10LHRoaXMuYmxlbmRDb2xvcj1lLHRoaXMubWFzaz1pO307UnQuUmVwbGFjZT1bMSwwXSxSdC5kaXNhYmxlZD1uZXcgUnQoUnQuUmVwbGFjZSx0LmRlZmF1bHQkOC50cmFuc3BhcmVudCxbITEsITEsITEsITFdKSxSdC51bmJsZW5kZWQ9bmV3IFJ0KFJ0LlJlcGxhY2UsdC5kZWZhdWx0JDgudHJhbnNwYXJlbnQsWyEwLCEwLCEwLCEwXSksUnQuYWxwaGFCbGVuZGVkPW5ldyBSdChbMSw3NzFdLHQuZGVmYXVsdCQ4LnRyYW5zcGFyZW50LFshMCwhMCwhMCwhMF0pO3ZhciBQdD1mdW5jdGlvbih0KXt0aGlzLmdsPXQsdGhpcy5leHRWZXJ0ZXhBcnJheU9iamVjdD10aGlzLmdsLmdldEV4dGVuc2lvbihcIk9FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0XCIpLHRoaXMuY2xlYXJDb2xvcj1uZXcgZXQodGhpcyksdGhpcy5jbGVhckRlcHRoPW5ldyBpdCh0aGlzKSx0aGlzLmNsZWFyU3RlbmNpbD1uZXcgbnQodGhpcyksdGhpcy5jb2xvck1hc2s9bmV3IG90KHRoaXMpLHRoaXMuZGVwdGhNYXNrPW5ldyBydCh0aGlzKSx0aGlzLnN0ZW5jaWxNYXNrPW5ldyBhdCh0aGlzKSx0aGlzLnN0ZW5jaWxGdW5jPW5ldyBzdCh0aGlzKSx0aGlzLnN0ZW5jaWxPcD1uZXcgbHQodGhpcyksdGhpcy5zdGVuY2lsVGVzdD1uZXcgY3QodGhpcyksdGhpcy5kZXB0aFJhbmdlPW5ldyB1dCh0aGlzKSx0aGlzLmRlcHRoVGVzdD1uZXcgaHQodGhpcyksdGhpcy5kZXB0aEZ1bmM9bmV3IHB0KHRoaXMpLHRoaXMuYmxlbmQ9bmV3IGR0KHRoaXMpLHRoaXMuYmxlbmRGdW5jPW5ldyBmdCh0aGlzKSx0aGlzLmJsZW5kQ29sb3I9bmV3IG10KHRoaXMpLHRoaXMucHJvZ3JhbT1uZXcgX3QodGhpcyksdGhpcy5hY3RpdmVUZXh0dXJlPW5ldyBndCh0aGlzKSx0aGlzLnZpZXdwb3J0PW5ldyB2dCh0aGlzKSx0aGlzLmJpbmRGcmFtZWJ1ZmZlcj1uZXcgeXQodGhpcyksdGhpcy5iaW5kUmVuZGVyYnVmZmVyPW5ldyB4dCh0aGlzKSx0aGlzLmJpbmRUZXh0dXJlPW5ldyBidCh0aGlzKSx0aGlzLmJpbmRWZXJ0ZXhCdWZmZXI9bmV3IHd0KHRoaXMpLHRoaXMuYmluZEVsZW1lbnRCdWZmZXI9bmV3IEV0KHRoaXMpLHRoaXMuYmluZFZlcnRleEFycmF5T0VTPXRoaXMuZXh0VmVydGV4QXJyYXlPYmplY3QmJm5ldyBUdCh0aGlzKSx0aGlzLnBpeGVsU3RvcmVVbnBhY2s9bmV3IEl0KHRoaXMpLHRoaXMucGl4ZWxTdG9yZVVucGFja1ByZW11bHRpcGx5QWxwaGE9bmV3IEN0KHRoaXMpLHRoaXMuZXh0VGV4dHVyZUZpbHRlckFuaXNvdHJvcGljPXQuZ2V0RXh0ZW5zaW9uKFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHx0LmdldEV4dGVuc2lvbihcIk1PWl9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIil8fHQuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKSx0aGlzLmV4dFRleHR1cmVGaWx0ZXJBbmlzb3Ryb3BpYyYmKHRoaXMuZXh0VGV4dHVyZUZpbHRlckFuaXNvdHJvcGljTWF4PXQuZ2V0UGFyYW1ldGVyKHRoaXMuZXh0VGV4dHVyZUZpbHRlckFuaXNvdHJvcGljLk1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCkpLHRoaXMuZXh0VGV4dHVyZUhhbGZGbG9hdD10LmdldEV4dGVuc2lvbihcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIiksdGhpcy5leHRUZXh0dXJlSGFsZkZsb2F0JiZ0LmdldEV4dGVuc2lvbihcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCIpO307UHQucHJvdG90eXBlLmNyZWF0ZUluZGV4QnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBKKHRoaXMsdCxlKX0sUHQucHJvdG90eXBlLmNyZWF0ZVZlcnRleEJ1ZmZlcj1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIG5ldyB0dCh0aGlzLHQsZSxpKX0sUHQucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmJ1ZmZlcj1mdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5nbCxvPW4uY3JlYXRlUmVuZGVyYnVmZmVyKCk7cmV0dXJuIHRoaXMuYmluZFJlbmRlcmJ1ZmZlci5zZXQobyksbi5yZW5kZXJidWZmZXJTdG9yYWdlKG4uUkVOREVSQlVGRkVSLHQsZSxpKSx0aGlzLmJpbmRSZW5kZXJidWZmZXIuc2V0KG51bGwpLG99LFB0LnByb3RvdHlwZS5jcmVhdGVGcmFtZWJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgTXQodGhpcyx0LGUpfSxQdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24odCl7dmFyIGU9dC5jb2xvcixpPXQuZGVwdGgsbj10aGlzLmdsLG89MDtlJiYob3w9bi5DT0xPUl9CVUZGRVJfQklULHRoaXMuY2xlYXJDb2xvci5zZXQoZSksdGhpcy5jb2xvck1hc2suc2V0KFshMCwhMCwhMCwhMF0pKSx2b2lkIDAhPT1pJiYob3w9bi5ERVBUSF9CVUZGRVJfQklULHRoaXMuY2xlYXJEZXB0aC5zZXQoaSksdGhpcy5kZXB0aE1hc2suc2V0KCEwKSksbi5jbGVhcihvKTt9LFB0LnByb3RvdHlwZS5zZXREZXB0aE1vZGU9ZnVuY3Rpb24odCl7dC5mdW5jIT09dGhpcy5nbC5BTFdBWVN8fHQubWFzaz8odGhpcy5kZXB0aFRlc3Quc2V0KCEwKSx0aGlzLmRlcHRoRnVuYy5zZXQodC5mdW5jKSx0aGlzLmRlcHRoTWFzay5zZXQodC5tYXNrKSx0aGlzLmRlcHRoUmFuZ2Uuc2V0KHQucmFuZ2UpKTp0aGlzLmRlcHRoVGVzdC5zZXQoITEpO30sUHQucHJvdG90eXBlLnNldFN0ZW5jaWxNb2RlPWZ1bmN0aW9uKHQpe3QudGVzdC5mdW5jIT09dGhpcy5nbC5BTFdBWVN8fHQubWFzaz8odGhpcy5zdGVuY2lsVGVzdC5zZXQoITApLHRoaXMuc3RlbmNpbE1hc2suc2V0KHQubWFzayksdGhpcy5zdGVuY2lsT3Auc2V0KFt0LmZhaWwsdC5kZXB0aEZhaWwsdC5wYXNzXSksdGhpcy5zdGVuY2lsRnVuYy5zZXQoe2Z1bmM6dC50ZXN0LmZ1bmMscmVmOnQucmVmLG1hc2s6dC50ZXN0Lm1hc2t9KSk6dGhpcy5zdGVuY2lsVGVzdC5zZXQoITEpO30sUHQucHJvdG90eXBlLnNldENvbG9yTW9kZT1mdW5jdGlvbihlKXt0LmRlZmF1bHQkMTMoZS5ibGVuZEZ1bmN0aW9uLFJ0LlJlcGxhY2UpP3RoaXMuYmxlbmQuc2V0KCExKToodGhpcy5ibGVuZC5zZXQoITApLHRoaXMuYmxlbmRGdW5jLnNldChlLmJsZW5kRnVuY3Rpb24pLHRoaXMuYmxlbmRDb2xvci5zZXQoZS5ibGVuZENvbG9yKSksdGhpcy5jb2xvck1hc2suc2V0KGUubWFzayk7fTt2YXIga3Q9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaShpLG4sbyl7dmFyIHI9dGhpcztlLmNhbGwodGhpcyksdGhpcy5pZD1pLHRoaXMuZGlzcGF0Y2hlcj1vLHRoaXMub24oXCJkYXRhXCIsZnVuY3Rpb24odCl7XCJzb3VyY2VcIj09PXQuZGF0YVR5cGUmJlwibWV0YWRhdGFcIj09PXQuc291cmNlRGF0YVR5cGUmJihyLl9zb3VyY2VMb2FkZWQ9ITApLHIuX3NvdXJjZUxvYWRlZCYmIXIuX3BhdXNlZCYmXCJzb3VyY2VcIj09PXQuZGF0YVR5cGUmJlwiY29udGVudFwiPT09dC5zb3VyY2VEYXRhVHlwZSYmKHIucmVsb2FkKCksci50cmFuc2Zvcm0mJnIudXBkYXRlKHIudHJhbnNmb3JtKSk7fSksdGhpcy5vbihcImVycm9yXCIsZnVuY3Rpb24oKXtyLl9zb3VyY2VFcnJvcmVkPSEwO30pLHRoaXMuX3NvdXJjZT1YKGksbixvLHRoaXMpLHRoaXMuX3RpbGVzPXt9LHRoaXMuX2NhY2hlPW5ldyBZKDAsdGhpcy5fdW5sb2FkVGlsZS5iaW5kKHRoaXMpKSx0aGlzLl90aW1lcnM9e30sdGhpcy5fY2FjaGVUaW1lcnM9e30sdGhpcy5fbWF4VGlsZUNhY2hlU2l6ZT1udWxsLHRoaXMuX2lzSWRSZW5kZXJhYmxlPXRoaXMuX2lzSWRSZW5kZXJhYmxlLmJpbmQodGhpcyksdGhpcy5fY292ZXJlZFRpbGVzPXt9LHRoaXMuX3N0YXRlPW5ldyB0LmRlZmF1bHQkMTY7fXJldHVybiBlJiYoaS5fX3Byb3RvX189ZSksaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY29uc3RydWN0b3I9aSxpLnByb3RvdHlwZS5vbkFkZD1mdW5jdGlvbih0KXt0aGlzLm1hcD10LHRoaXMuX21heFRpbGVDYWNoZVNpemU9dD90Ll9tYXhUaWxlQ2FjaGVTaXplOm51bGwsdGhpcy5fc291cmNlJiZ0aGlzLl9zb3VyY2Uub25BZGQmJnRoaXMuX3NvdXJjZS5vbkFkZCh0KTt9LGkucHJvdG90eXBlLm9uUmVtb3ZlPWZ1bmN0aW9uKHQpe3RoaXMuX3NvdXJjZSYmdGhpcy5fc291cmNlLm9uUmVtb3ZlJiZ0aGlzLl9zb3VyY2Uub25SZW1vdmUodCk7fSxpLnByb3RvdHlwZS5sb2FkZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9zb3VyY2VFcnJvcmVkKXJldHVybiEwO2lmKCF0aGlzLl9zb3VyY2VMb2FkZWQpcmV0dXJuITE7Zm9yKHZhciB0IGluIHRoaXMuX3RpbGVzKXt2YXIgZT10aGlzLl90aWxlc1t0XTtpZihcImxvYWRlZFwiIT09ZS5zdGF0ZSYmXCJlcnJvcmVkXCIhPT1lLnN0YXRlKXJldHVybiExfXJldHVybiEwfSxpLnByb3RvdHlwZS5nZXRTb3VyY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlfSxpLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3RoaXMuX3BhdXNlZD0hMDt9LGkucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe2lmKHRoaXMuX3BhdXNlZCl7dmFyIHQ9dGhpcy5fc2hvdWxkUmVsb2FkT25SZXN1bWU7dGhpcy5fcGF1c2VkPSExLHRoaXMuX3Nob3VsZFJlbG9hZE9uUmVzdW1lPSExLHQmJnRoaXMucmVsb2FkKCksdGhpcy50cmFuc2Zvcm0mJnRoaXMudXBkYXRlKHRoaXMudHJhbnNmb3JtKTt9fSxpLnByb3RvdHlwZS5fbG9hZFRpbGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fc291cmNlLmxvYWRUaWxlKHQsZSl9LGkucHJvdG90eXBlLl91bmxvYWRUaWxlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX3NvdXJjZS51bmxvYWRUaWxlKXJldHVybiB0aGlzLl9zb3VyY2UudW5sb2FkVGlsZSh0LGZ1bmN0aW9uKCl7fSl9LGkucHJvdG90eXBlLl9hYm9ydFRpbGU9ZnVuY3Rpb24odCl7aWYodGhpcy5fc291cmNlLmFib3J0VGlsZSlyZXR1cm4gdGhpcy5fc291cmNlLmFib3J0VGlsZSh0LGZ1bmN0aW9uKCl7fSl9LGkucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2Uuc2VyaWFsaXplKCl9LGkucHJvdG90eXBlLnByZXBhcmU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuX3NvdXJjZS5wcmVwYXJlJiZ0aGlzLl9zb3VyY2UucHJlcGFyZSgpLHRoaXMuX3N0YXRlLmNvYWxlc2NlQ2hhbmdlcyh0aGlzLl90aWxlcyx0aGlzLm1hcD90aGlzLm1hcC5wYWludGVyOm51bGwpLHRoaXMuX3RpbGVzKXRoaXMuX3RpbGVzW2VdLnVwbG9hZCh0KTt9LGkucHJvdG90eXBlLmdldElkcz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3RpbGVzKS5tYXAoTnVtYmVyKS5zb3J0KGZ1bmN0aW9uKGksbil7dmFyIG89ZS5fdGlsZXNbaV0udGlsZUlELHI9ZS5fdGlsZXNbbl0udGlsZUlELGE9bmV3IHQuZGVmYXVsdChvLmNhbm9uaWNhbC54LG8uY2Fub25pY2FsLnkpLnJvdGF0ZShlLnRyYW5zZm9ybS5hbmdsZSkscz1uZXcgdC5kZWZhdWx0KHIuY2Fub25pY2FsLngsci5jYW5vbmljYWwueSkucm90YXRlKGUudHJhbnNmb3JtLmFuZ2xlKTtyZXR1cm4gby5vdmVyc2NhbGVkWi1yLm92ZXJzY2FsZWRafHxzLnktYS55fHxzLngtYS54fSl9LGkucHJvdG90eXBlLmdldFJlbmRlcmFibGVJZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJZHMoKS5maWx0ZXIodGhpcy5faXNJZFJlbmRlcmFibGUpfSxpLnByb3RvdHlwZS5oYXNSZW5kZXJhYmxlUGFyZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZmluZExvYWRlZFBhcmVudCh0LDAse30pO3JldHVybiEhZSYmdGhpcy5faXNJZFJlbmRlcmFibGUoZS50aWxlSUQua2V5KX0saS5wcm90b3R5cGUuX2lzSWRSZW5kZXJhYmxlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90aWxlc1t0XSYmdGhpcy5fdGlsZXNbdF0uaGFzRGF0YSgpJiYhdGhpcy5fY292ZXJlZFRpbGVzW3RdfSxpLnByb3RvdHlwZS5yZWxvYWQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9wYXVzZWQpdGhpcy5fc2hvdWxkUmVsb2FkT25SZXN1bWU9ITA7ZWxzZSBmb3IodmFyIHQgaW4gdGhpcy5fY2FjaGUucmVzZXQoKSx0aGlzLl90aWxlcyl0aGlzLl9yZWxvYWRUaWxlKHQsXCJyZWxvYWRpbmdcIik7fSxpLnByb3RvdHlwZS5fcmVsb2FkVGlsZT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3RpbGVzW3RdO2kmJihcImxvYWRpbmdcIiE9PWkuc3RhdGUmJihpLnN0YXRlPWUpLHRoaXMuX2xvYWRUaWxlKGksdGhpcy5fdGlsZUxvYWRlZC5iaW5kKHRoaXMsaSx0LGUpKSk7fSxpLnByb3RvdHlwZS5fdGlsZUxvYWRlZD1mdW5jdGlvbihlLGksbixvKXtpZihvKXJldHVybiBlLnN0YXRlPVwiZXJyb3JlZFwiLHZvaWQoNDA0IT09by5zdGF0dXM/dGhpcy5fc291cmNlLmZpcmUobmV3IHQuRXJyb3JFdmVudChvLHt0aWxlOmV9KSk6dGhpcy51cGRhdGUodGhpcy50cmFuc2Zvcm0pKTtlLnRpbWVBZGRlZD10LmRlZmF1bHQkMi5ub3coKSxcImV4cGlyZWRcIj09PW4mJihlLnJlZnJlc2hlZFVwb25FeHBpcmF0aW9uPSEwKSx0aGlzLl9zZXRUaWxlUmVsb2FkVGltZXIoaSxlKSxcInJhc3Rlci1kZW1cIj09PXRoaXMuZ2V0U291cmNlKCkudHlwZSYmZS5kZW0mJnRoaXMuX2JhY2tmaWxsREVNKGUpLHRoaXMuX3N0YXRlLmluaXRpYWxpemVUaWxlU3RhdGUoZSx0aGlzLm1hcD90aGlzLm1hcC5wYWludGVyOm51bGwpLHRoaXMuX3NvdXJjZS5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInNvdXJjZVwiLHRpbGU6ZSxjb29yZDplLnRpbGVJRH0pKSx0aGlzLm1hcCYmKHRoaXMubWFwLnBhaW50ZXIudGlsZUV4dGVudFZBTy52YW89bnVsbCk7fSxpLnByb3RvdHlwZS5fYmFja2ZpbGxERU09ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZ2V0UmVuZGVyYWJsZUlkcygpLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG49ZVtpXTtpZih0Lm5laWdoYm9yaW5nVGlsZXMmJnQubmVpZ2hib3JpbmdUaWxlc1tuXSl7dmFyIG89dGhpcy5nZXRUaWxlQnlJRChuKTtyKHQsbykscihvLHQpO319ZnVuY3Rpb24gcih0LGUpe3QubmVlZHNIaWxsc2hhZGVQcmVwYXJlPSEwO3ZhciBpPWUudGlsZUlELmNhbm9uaWNhbC54LXQudGlsZUlELmNhbm9uaWNhbC54LG49ZS50aWxlSUQuY2Fub25pY2FsLnktdC50aWxlSUQuY2Fub25pY2FsLnksbz1NYXRoLnBvdygyLHQudGlsZUlELmNhbm9uaWNhbC56KSxyPWUudGlsZUlELmtleTswPT09aSYmMD09PW58fE1hdGguYWJzKG4pPjF8fChNYXRoLmFicyhpKT4xJiYoMT09PU1hdGguYWJzKGkrbyk/aSs9bzoxPT09TWF0aC5hYnMoaS1vKSYmKGktPW8pKSxlLmRlbSYmdC5kZW0mJih0LmRlbS5iYWNrZmlsbEJvcmRlcihlLmRlbSxpLG4pLHQubmVpZ2hib3JpbmdUaWxlcyYmdC5uZWlnaGJvcmluZ1RpbGVzW3JdJiYodC5uZWlnaGJvcmluZ1RpbGVzW3JdLmJhY2tmaWxsZWQ9ITApKSk7fX0saS5wcm90b3R5cGUuZ2V0VGlsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRUaWxlQnlJRCh0LmtleSl9LGkucHJvdG90eXBlLmdldFRpbGVCeUlEPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90aWxlc1t0XX0saS5wcm90b3R5cGUuZ2V0Wm9vbT1mdW5jdGlvbih0KXtyZXR1cm4gdC56b29tK3Quc2NhbGVab29tKHQudGlsZVNpemUvdGhpcy5fc291cmNlLnRpbGVTaXplKX0saS5wcm90b3R5cGUuX2ZpbmRMb2FkZWRDaGlsZHJlbj1mdW5jdGlvbih0LGUsaSl7dmFyIG49ITE7Zm9yKHZhciBvIGluIHRoaXMuX3RpbGVzKXt2YXIgcj10aGlzLl90aWxlc1tvXTtpZighKGlbb118fCFyLmhhc0RhdGEoKXx8ci50aWxlSUQub3ZlcnNjYWxlZFo8PXQub3ZlcnNjYWxlZFp8fHIudGlsZUlELm92ZXJzY2FsZWRaPmUpKXt2YXIgYT1NYXRoLnBvdygyLHIudGlsZUlELmNhbm9uaWNhbC56LXQuY2Fub25pY2FsLnopO2lmKE1hdGguZmxvb3Ioci50aWxlSUQuY2Fub25pY2FsLngvYSk9PT10LmNhbm9uaWNhbC54JiZNYXRoLmZsb29yKHIudGlsZUlELmNhbm9uaWNhbC55L2EpPT09dC5jYW5vbmljYWwueSlmb3IoaVtvXT1yLnRpbGVJRCxuPSEwO3ImJnIudGlsZUlELm92ZXJzY2FsZWRaLTE+dC5vdmVyc2NhbGVkWjspe3ZhciBzPXIudGlsZUlELnNjYWxlZFRvKHIudGlsZUlELm92ZXJzY2FsZWRaLTEpO2lmKCFzKWJyZWFrOyhyPXRoaXMuX3RpbGVzW3Mua2V5XSkmJnIuaGFzRGF0YSgpJiYoZGVsZXRlIGlbb10saVtzLmtleV09cyk7fX19cmV0dXJuIG59LGkucHJvdG90eXBlLmZpbmRMb2FkZWRQYXJlbnQ9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj10Lm92ZXJzY2FsZWRaLTE7bj49ZTtuLS0pe3ZhciBvPXQuc2NhbGVkVG8obik7aWYoIW8pcmV0dXJuO3ZhciByPVN0cmluZyhvLmtleSksYT10aGlzLl90aWxlc1tyXTtpZihhJiZhLmhhc0RhdGEoKSlyZXR1cm4gaVtyXT1vLGE7aWYodGhpcy5fY2FjaGUuaGFzKG8pKXJldHVybiBpW3JdPW8sdGhpcy5fY2FjaGUuZ2V0KG8pfX0saS5wcm90b3R5cGUudXBkYXRlQ2FjaGVTaXplPWZ1bmN0aW9uKHQpe3ZhciBlPShNYXRoLmNlaWwodC53aWR0aC90aGlzLl9zb3VyY2UudGlsZVNpemUpKzEpKihNYXRoLmNlaWwodC5oZWlnaHQvdGhpcy5fc291cmNlLnRpbGVTaXplKSsxKSxpPU1hdGguZmxvb3IoNSplKSxuPVwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLl9tYXhUaWxlQ2FjaGVTaXplP01hdGgubWluKHRoaXMuX21heFRpbGVDYWNoZVNpemUsaSk6aTt0aGlzLl9jYWNoZS5zZXRNYXhTaXplKG4pO30saS5wcm90b3R5cGUuaGFuZGxlV3JhcEp1bXA9ZnVuY3Rpb24odCl7dmFyIGU9KHQtKHZvaWQgMD09PXRoaXMuX3ByZXZMbmc/dDp0aGlzLl9wcmV2TG5nKSkvMzYwLGk9TWF0aC5yb3VuZChlKTtpZih0aGlzLl9wcmV2TG5nPXQsaSl7dmFyIG49e307Zm9yKHZhciBvIGluIHRoaXMuX3RpbGVzKXt2YXIgcj10aGlzLl90aWxlc1tvXTtyLnRpbGVJRD1yLnRpbGVJRC51bndyYXBUbyhyLnRpbGVJRC53cmFwK2kpLG5bci50aWxlSUQua2V5XT1yO31mb3IodmFyIGEgaW4gdGhpcy5fdGlsZXM9bix0aGlzLl90aW1lcnMpY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyc1thXSksZGVsZXRlIHRoaXMuX3RpbWVyc1thXTtmb3IodmFyIHMgaW4gdGhpcy5fdGlsZXMpe3ZhciBsPXRoaXMuX3RpbGVzW3NdO3RoaXMuX3NldFRpbGVSZWxvYWRUaW1lcihzLGwpO319fSxpLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztpZih0aGlzLnRyYW5zZm9ybT1lLHRoaXMuX3NvdXJjZUxvYWRlZCYmIXRoaXMuX3BhdXNlZCl7dmFyIG87dGhpcy51cGRhdGVDYWNoZVNpemUoZSksdGhpcy5oYW5kbGVXcmFwSnVtcCh0aGlzLnRyYW5zZm9ybS5jZW50ZXIubG5nKSx0aGlzLl9jb3ZlcmVkVGlsZXM9e30sdGhpcy51c2VkP3RoaXMuX3NvdXJjZS50aWxlSUQ/bz1lLmdldFZpc2libGVVbndyYXBwZWRDb29yZGluYXRlcyh0aGlzLl9zb3VyY2UudGlsZUlEKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0Lk92ZXJzY2FsZWRUaWxlSUQoZS5jYW5vbmljYWwueixlLndyYXAsZS5jYW5vbmljYWwueixlLmNhbm9uaWNhbC54LGUuY2Fub25pY2FsLnkpfSk6KG89ZS5jb3ZlcmluZ1RpbGVzKHt0aWxlU2l6ZTp0aGlzLl9zb3VyY2UudGlsZVNpemUsbWluem9vbTp0aGlzLl9zb3VyY2UubWluem9vbSxtYXh6b29tOnRoaXMuX3NvdXJjZS5tYXh6b29tLHJvdW5kWm9vbTp0aGlzLl9zb3VyY2Uucm91bmRab29tLHJlcGFyc2VPdmVyc2NhbGVkOnRoaXMuX3NvdXJjZS5yZXBhcnNlT3ZlcnNjYWxlZH0pLHRoaXMuX3NvdXJjZS5oYXNUaWxlJiYobz1vLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gbi5fc291cmNlLmhhc1RpbGUodCl9KSkpOm89W107dmFyIHIsYT0odGhpcy5fc291cmNlLnJvdW5kWm9vbT9NYXRoLnJvdW5kOk1hdGguZmxvb3IpKHRoaXMuZ2V0Wm9vbShlKSkscz1NYXRoLm1heChhLWkubWF4T3Zlcnpvb21pbmcsdGhpcy5fc291cmNlLm1pbnpvb20pLGw9TWF0aC5tYXgoYStpLm1heFVuZGVyem9vbWluZyx0aGlzLl9zb3VyY2UubWluem9vbSksYz10aGlzLl91cGRhdGVSZXRhaW5lZFRpbGVzKG8sYSksdT17fTtpZihPdCh0aGlzLl9zb3VyY2UudHlwZSkpZm9yKHZhciBoPU9iamVjdC5rZXlzKGMpLHA9MDtwPGgubGVuZ3RoO3ArKyl7dmFyIGQ9aFtwXSxmPWNbZF0sbT1uLl90aWxlc1tkXTtpZihtJiYodm9pZCAwPT09bS5mYWRlRW5kVGltZXx8bS5mYWRlRW5kVGltZT49dC5kZWZhdWx0JDIubm93KCkpKXtuLl9maW5kTG9hZGVkQ2hpbGRyZW4oZixsLGMpJiYoY1tkXT1mKTt2YXIgXz1uLmZpbmRMb2FkZWRQYXJlbnQoZixzLHUpO18mJm4uX2FkZFRpbGUoXy50aWxlSUQpO319Zm9yKHIgaW4gdSljW3JdfHwobi5fY292ZXJlZFRpbGVzW3JdPSEwKTtmb3IociBpbiB1KWNbcl09dVtyXTtmb3IodmFyIGc9dC5rZXlzRGlmZmVyZW5jZSh0aGlzLl90aWxlcyxjKSx2PTA7djxnLmxlbmd0aDt2Kyspbi5fcmVtb3ZlVGlsZShnW3ZdKTt9fSxpLnByb3RvdHlwZS5fdXBkYXRlUmV0YWluZWRUaWxlcz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj17fSxvPXt9LHI9TWF0aC5tYXgoZS1pLm1heE92ZXJ6b29taW5nLHRoaXMuX3NvdXJjZS5taW56b29tKSxhPU1hdGgubWF4KGUraS5tYXhVbmRlcnpvb21pbmcsdGhpcy5fc291cmNlLm1pbnpvb20pLHM9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIGw9dFtzXSxjPXRoaXMuX2FkZFRpbGUobCksdT0hMTtpZihjLmhhc0RhdGEoKSluW2wua2V5XT1sO2Vsc2V7dT1jLndhc1JlcXVlc3RlZCgpLG5bbC5rZXldPWw7dmFyIGg9ITA7aWYoZSsxPnRoaXMuX3NvdXJjZS5tYXh6b29tKXt2YXIgcD1sLmNoaWxkcmVuKHRoaXMuX3NvdXJjZS5tYXh6b29tKVswXSxkPXRoaXMuZ2V0VGlsZShwKTtkJiZkLmhhc0RhdGEoKT9uW3Aua2V5XT1wOmg9ITE7fWVsc2V7dGhpcy5fZmluZExvYWRlZENoaWxkcmVuKGwsYSxuKTtmb3IodmFyIGY9bC5jaGlsZHJlbih0aGlzLl9zb3VyY2UubWF4em9vbSksbT0wO208Zi5sZW5ndGg7bSsrKWlmKCFuW2ZbbV0ua2V5XSl7aD0hMTticmVha319aWYoIWgpZm9yKHZhciBfPWwub3ZlcnNjYWxlZFotMTtfPj1yOy0tXyl7dmFyIGc9bC5zY2FsZWRUbyhfKTtpZihvW2cua2V5XSlicmVhaztpZihvW2cua2V5XT0hMCwhKGM9dGhpcy5nZXRUaWxlKGcpKSYmdSYmKGM9dGhpcy5fYWRkVGlsZShnKSksYyYmKG5bZy5rZXldPWcsdT1jLndhc1JlcXVlc3RlZCgpLGMuaGFzRGF0YSgpKSlicmVha319fXJldHVybiBufSxpLnByb3RvdHlwZS5fYWRkVGlsZT1mdW5jdGlvbihlKXt2YXIgaT10aGlzLl90aWxlc1tlLmtleV07aWYoaSlyZXR1cm4gaTsoaT10aGlzLl9jYWNoZS5nZXRBbmRSZW1vdmUoZSkpJiYodGhpcy5fc2V0VGlsZVJlbG9hZFRpbWVyKGUua2V5LGkpLGkudGlsZUlEPWUsdGhpcy5fc3RhdGUuaW5pdGlhbGl6ZVRpbGVTdGF0ZShpLHRoaXMubWFwP3RoaXMubWFwLnBhaW50ZXI6bnVsbCksdGhpcy5fY2FjaGVUaW1lcnNbZS5rZXldJiYoY2xlYXJUaW1lb3V0KHRoaXMuX2NhY2hlVGltZXJzW2Uua2V5XSksZGVsZXRlIHRoaXMuX2NhY2hlVGltZXJzW2Uua2V5XSx0aGlzLl9zZXRUaWxlUmVsb2FkVGltZXIoZS5rZXksaSkpKTt2YXIgbj1Cb29sZWFuKGkpO3JldHVybiBufHwoaT1uZXcgdC5kZWZhdWx0JDE0KGUsdGhpcy5fc291cmNlLnRpbGVTaXplKmUub3ZlcnNjYWxlRmFjdG9yKCkpLHRoaXMuX2xvYWRUaWxlKGksdGhpcy5fdGlsZUxvYWRlZC5iaW5kKHRoaXMsaSxlLmtleSxpLnN0YXRlKSkpLGk/KGkudXNlcysrLHRoaXMuX3RpbGVzW2Uua2V5XT1pLG58fHRoaXMuX3NvdXJjZS5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YWxvYWRpbmdcIix7dGlsZTppLGNvb3JkOmkudGlsZUlELGRhdGFUeXBlOlwic291cmNlXCJ9KSksaSk6bnVsbH0saS5wcm90b3R5cGUuX3NldFRpbGVSZWxvYWRUaW1lcj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXM7dCBpbiB0aGlzLl90aW1lcnMmJihjbGVhclRpbWVvdXQodGhpcy5fdGltZXJzW3RdKSxkZWxldGUgdGhpcy5fdGltZXJzW3RdKTt2YXIgbj1lLmdldEV4cGlyeVRpbWVvdXQoKTtuJiYodGhpcy5fdGltZXJzW3RdPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLl9yZWxvYWRUaWxlKHQsXCJleHBpcmVkXCIpLGRlbGV0ZSBpLl90aW1lcnNbdF07fSxuKSk7fSxpLnByb3RvdHlwZS5fcmVtb3ZlVGlsZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl90aWxlc1t0XTtlJiYoZS51c2VzLS0sZGVsZXRlIHRoaXMuX3RpbGVzW3RdLHRoaXMuX3RpbWVyc1t0XSYmKGNsZWFyVGltZW91dCh0aGlzLl90aW1lcnNbdF0pLGRlbGV0ZSB0aGlzLl90aW1lcnNbdF0pLGUudXNlcz4wfHwoZS5oYXNEYXRhKCk/dGhpcy5fY2FjaGUuYWRkKGUudGlsZUlELGUsZS5nZXRFeHBpcnlUaW1lb3V0KCkpOihlLmFib3J0ZWQ9ITAsdGhpcy5fYWJvcnRUaWxlKGUpLHRoaXMuX3VubG9hZFRpbGUoZSkpKSk7fSxpLnByb3RvdHlwZS5jbGVhclRpbGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX3Nob3VsZFJlbG9hZE9uUmVzdW1lPSExLHRoaXMuX3BhdXNlZD0hMSx0aGlzLl90aWxlcyl0aGlzLl9yZW1vdmVUaWxlKHQpO3RoaXMuX2NhY2hlLnJlc2V0KCk7fSxpLnByb3RvdHlwZS50aWxlc0luPWZ1bmN0aW9uKGUsaSl7Zm9yKHZhciBuPVtdLG89dGhpcy5nZXRJZHMoKSxyPTEvMCxhPTEvMCxzPS0xLzAsbD0tMS8wLGM9ZVswXS56b29tLHU9MDt1PGUubGVuZ3RoO3UrKyl7dmFyIGg9ZVt1XTtyPU1hdGgubWluKHIsaC5jb2x1bW4pLGE9TWF0aC5taW4oYSxoLnJvdykscz1NYXRoLm1heChzLGguY29sdW1uKSxsPU1hdGgubWF4KGwsaC5yb3cpO31mb3IodmFyIHA9MDtwPG8ubGVuZ3RoO3ArKyl7dmFyIGQ9dGhpcy5fdGlsZXNbb1twXV0sZj1kLnRpbGVJRCxtPU1hdGgucG93KDIsdGhpcy50cmFuc2Zvcm0uem9vbS1kLnRpbGVJRC5vdmVyc2NhbGVkWiksXz1pKmQucXVlcnlQYWRkaW5nKnQuZGVmYXVsdCQxMC9kLnRpbGVTaXplL20sZz1bQnQoZixuZXcgdC5kZWZhdWx0JDE1KHIsYSxjKSksQnQoZixuZXcgdC5kZWZhdWx0JDE1KHMsbCxjKSldO2lmKGdbMF0ueC1fPHQuZGVmYXVsdCQxMCYmZ1swXS55LV88dC5kZWZhdWx0JDEwJiZnWzFdLngrXz49MCYmZ1sxXS55K18+PTApe2Zvcih2YXIgdj1bXSx5PTA7eTxlLmxlbmd0aDt5Kyspdi5wdXNoKEJ0KGYsZVt5XSkpO24ucHVzaCh7dGlsZTpkLHRpbGVJRDpmLHF1ZXJ5R2VvbWV0cnk6W3ZdLHNjYWxlOm19KTt9fXJldHVybiBufSxpLnByb3RvdHlwZS5nZXRWaXNpYmxlQ29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPXRoaXMuZ2V0UmVuZGVyYWJsZUlkcygpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5fdGlsZXNbZV0udGlsZUlEfSksaT0wLG49ZTtpPG4ubGVuZ3RoO2krPTEpe3ZhciBvPW5baV07by5wb3NNYXRyaXg9dC50cmFuc2Zvcm0uY2FsY3VsYXRlUG9zTWF0cml4KG8udG9VbndyYXBwZWQoKSk7fXJldHVybiBlfSxpLnByb3RvdHlwZS5oYXNUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5fc291cmNlLmhhc1RyYW5zaXRpb24oKSlyZXR1cm4hMDtpZihPdCh0aGlzLl9zb3VyY2UudHlwZSkpZm9yKHZhciBlIGluIHRoaXMuX3RpbGVzKXt2YXIgaT10aGlzLl90aWxlc1tlXTtpZih2b2lkIDAhPT1pLmZhZGVFbmRUaW1lJiZpLmZhZGVFbmRUaW1lPj10LmRlZmF1bHQkMi5ub3coKSlyZXR1cm4hMH1yZXR1cm4hMX0saS5wcm90b3R5cGUuc2V0RmVhdHVyZVN0YXRlPWZ1bmN0aW9uKHQsZSxpKXt0PXR8fFwiX2dlb2pzb25UaWxlTGF5ZXJcIix0aGlzLl9zdGF0ZS51cGRhdGVTdGF0ZSh0LGUsaSk7fSxpLnByb3RvdHlwZS5nZXRGZWF0dXJlU3RhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10fHxcIl9nZW9qc29uVGlsZUxheWVyXCIsdGhpcy5fc3RhdGUuZ2V0U3RhdGUodCxlKX0saX0odC5FdmVudGVkKTtmdW5jdGlvbiBCdChlLGkpe3ZhciBuPWkuem9vbVRvKGUuY2Fub25pY2FsLnopO3JldHVybiBuZXcgdC5kZWZhdWx0KChuLmNvbHVtbi0oZS5jYW5vbmljYWwueCtlLndyYXAqTWF0aC5wb3coMixlLmNhbm9uaWNhbC56KSkpKnQuZGVmYXVsdCQxMCwobi5yb3ctZS5jYW5vbmljYWwueSkqdC5kZWZhdWx0JDEwKX1mdW5jdGlvbiBPdCh0KXtyZXR1cm5cInJhc3RlclwiPT09dHx8XCJpbWFnZVwiPT09dHx8XCJ2aWRlb1wiPT09dH1mdW5jdGlvbiBGdCgpe3JldHVybiBuZXcgdC5kZWZhdWx0JDEuV29ya2VyKHBuLndvcmtlclVybCl9a3QubWF4T3Zlcnpvb21pbmc9MTAsa3QubWF4VW5kZXJ6b29taW5nPTM7dmFyIE50LCR0PWZ1bmN0aW9uKCl7dGhpcy5hY3RpdmU9e307fTtmdW5jdGlvbiBVdChlLGkpe3ZhciBuPXt9O2Zvcih2YXIgbyBpbiBlKVwicmVmXCIhPT1vJiYobltvXT1lW29dKTtyZXR1cm4gdC5kZWZhdWx0JDE3LmZvckVhY2goZnVuY3Rpb24odCl7dCBpbiBpJiYoblt0XT1pW3RdKTt9KSxufWZ1bmN0aW9uIFp0KHQpe3Q9dC5zbGljZSgpO2Zvcih2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpLGk9MDtpPHQubGVuZ3RoO2krKyllW3RbaV0uaWRdPXRbaV07Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspXCJyZWZcImluIHRbbl0mJih0W25dPVV0KHRbbl0sZVt0W25dLnJlZl0pKTtyZXR1cm4gdH0kdC5wcm90b3R5cGUuYWNxdWlyZT1mdW5jdGlvbih0KXtpZighdGhpcy53b3JrZXJzKXt2YXIgZT1wbi53b3JrZXJDb3VudDtmb3IodGhpcy53b3JrZXJzPVtdO3RoaXMud29ya2Vycy5sZW5ndGg8ZTspdGhpcy53b3JrZXJzLnB1c2gobmV3IEZ0KTt9cmV0dXJuIHRoaXMuYWN0aXZlW3RdPSEwLHRoaXMud29ya2Vycy5zbGljZSgpfSwkdC5wcm90b3R5cGUucmVsZWFzZT1mdW5jdGlvbih0KXtkZWxldGUgdGhpcy5hY3RpdmVbdF0sMD09PU9iamVjdC5rZXlzKHRoaXMuYWN0aXZlKS5sZW5ndGgmJih0aGlzLndvcmtlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0LnRlcm1pbmF0ZSgpO30pLHRoaXMud29ya2Vycz1udWxsKTt9O3ZhciBWdD17c2V0U3R5bGU6XCJzZXRTdHlsZVwiLGFkZExheWVyOlwiYWRkTGF5ZXJcIixyZW1vdmVMYXllcjpcInJlbW92ZUxheWVyXCIsc2V0UGFpbnRQcm9wZXJ0eTpcInNldFBhaW50UHJvcGVydHlcIixzZXRMYXlvdXRQcm9wZXJ0eTpcInNldExheW91dFByb3BlcnR5XCIsc2V0RmlsdGVyOlwic2V0RmlsdGVyXCIsYWRkU291cmNlOlwiYWRkU291cmNlXCIscmVtb3ZlU291cmNlOlwicmVtb3ZlU291cmNlXCIsc2V0R2VvSlNPTlNvdXJjZURhdGE6XCJzZXRHZW9KU09OU291cmNlRGF0YVwiLHNldExheWVyWm9vbVJhbmdlOlwic2V0TGF5ZXJab29tUmFuZ2VcIixzZXRMYXllclByb3BlcnR5Olwic2V0TGF5ZXJQcm9wZXJ0eVwiLHNldENlbnRlcjpcInNldENlbnRlclwiLHNldFpvb206XCJzZXRab29tXCIsc2V0QmVhcmluZzpcInNldEJlYXJpbmdcIixzZXRQaXRjaDpcInNldFBpdGNoXCIsc2V0U3ByaXRlOlwic2V0U3ByaXRlXCIsc2V0R2x5cGhzOlwic2V0R2x5cGhzXCIsc2V0VHJhbnNpdGlvbjpcInNldFRyYW5zaXRpb25cIixzZXRMaWdodDpcInNldExpZ2h0XCJ9O2Z1bmN0aW9uIGp0KHQsZSxpKXtpLnB1c2goe2NvbW1hbmQ6VnQuYWRkU291cmNlLGFyZ3M6W3QsZVt0XV19KTt9ZnVuY3Rpb24gR3QodCxlLGkpe2UucHVzaCh7Y29tbWFuZDpWdC5yZW1vdmVTb3VyY2UsYXJnczpbdF19KSxpW3RdPSEwO31mdW5jdGlvbiBXdCh0LGUsaSxuKXtHdCh0LGksbiksanQodCxlLGkpO31mdW5jdGlvbiBxdChlLGksbil7dmFyIG87Zm9yKG8gaW4gZVtuXSlpZihlW25dLmhhc093blByb3BlcnR5KG8pJiZcImRhdGFcIiE9PW8mJiF0LmRlZmF1bHQkMTMoZVtuXVtvXSxpW25dW29dKSlyZXR1cm4hMTtmb3IobyBpbiBpW25dKWlmKGlbbl0uaGFzT3duUHJvcGVydHkobykmJlwiZGF0YVwiIT09byYmIXQuZGVmYXVsdCQxMyhlW25dW29dLGlbbl1bb10pKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFh0KGUsaSxuLG8scixhKXt2YXIgcztmb3IocyBpbiBpPWl8fHt9LGU9ZXx8e30pZS5oYXNPd25Qcm9wZXJ0eShzKSYmKHQuZGVmYXVsdCQxMyhlW3NdLGlbc10pfHxuLnB1c2goe2NvbW1hbmQ6YSxhcmdzOltvLHMsaVtzXSxyXX0pKTtmb3IocyBpbiBpKWkuaGFzT3duUHJvcGVydHkocykmJiFlLmhhc093blByb3BlcnR5KHMpJiYodC5kZWZhdWx0JDEzKGVbc10saVtzXSl8fG4ucHVzaCh7Y29tbWFuZDphLGFyZ3M6W28scyxpW3NdLHJdfSkpO31mdW5jdGlvbiBIdCh0KXtyZXR1cm4gdC5pZH1mdW5jdGlvbiBLdCh0LGUpe3JldHVybiB0W2UuaWRdPWUsdH1mdW5jdGlvbiBZdChlLGkpe2lmKCFlKXJldHVyblt7Y29tbWFuZDpWdC5zZXRTdHlsZSxhcmdzOltpXX1dO3ZhciBuPVtdO3RyeXtpZighdC5kZWZhdWx0JDEzKGUudmVyc2lvbixpLnZlcnNpb24pKXJldHVyblt7Y29tbWFuZDpWdC5zZXRTdHlsZSxhcmdzOltpXX1dO3QuZGVmYXVsdCQxMyhlLmNlbnRlcixpLmNlbnRlcil8fG4ucHVzaCh7Y29tbWFuZDpWdC5zZXRDZW50ZXIsYXJnczpbaS5jZW50ZXJdfSksdC5kZWZhdWx0JDEzKGUuem9vbSxpLnpvb20pfHxuLnB1c2goe2NvbW1hbmQ6VnQuc2V0Wm9vbSxhcmdzOltpLnpvb21dfSksdC5kZWZhdWx0JDEzKGUuYmVhcmluZyxpLmJlYXJpbmcpfHxuLnB1c2goe2NvbW1hbmQ6VnQuc2V0QmVhcmluZyxhcmdzOltpLmJlYXJpbmddfSksdC5kZWZhdWx0JDEzKGUucGl0Y2gsaS5waXRjaCl8fG4ucHVzaCh7Y29tbWFuZDpWdC5zZXRQaXRjaCxhcmdzOltpLnBpdGNoXX0pLHQuZGVmYXVsdCQxMyhlLnNwcml0ZSxpLnNwcml0ZSl8fG4ucHVzaCh7Y29tbWFuZDpWdC5zZXRTcHJpdGUsYXJnczpbaS5zcHJpdGVdfSksdC5kZWZhdWx0JDEzKGUuZ2x5cGhzLGkuZ2x5cGhzKXx8bi5wdXNoKHtjb21tYW5kOlZ0LnNldEdseXBocyxhcmdzOltpLmdseXBoc119KSx0LmRlZmF1bHQkMTMoZS50cmFuc2l0aW9uLGkudHJhbnNpdGlvbil8fG4ucHVzaCh7Y29tbWFuZDpWdC5zZXRUcmFuc2l0aW9uLGFyZ3M6W2kudHJhbnNpdGlvbl19KSx0LmRlZmF1bHQkMTMoZS5saWdodCxpLmxpZ2h0KXx8bi5wdXNoKHtjb21tYW5kOlZ0LnNldExpZ2h0LGFyZ3M6W2kubGlnaHRdfSk7dmFyIG89e30scj1bXTshZnVuY3Rpb24oZSxpLG4sbyl7dmFyIHI7Zm9yKHIgaW4gaT1pfHx7fSxlPWV8fHt9KWUuaGFzT3duUHJvcGVydHkocikmJihpLmhhc093blByb3BlcnR5KHIpfHxHdChyLG4sbykpO2ZvcihyIGluIGkpaS5oYXNPd25Qcm9wZXJ0eShyKSYmKGUuaGFzT3duUHJvcGVydHkocik/dC5kZWZhdWx0JDEzKGVbcl0saVtyXSl8fChcImdlb2pzb25cIj09PWVbcl0udHlwZSYmXCJnZW9qc29uXCI9PT1pW3JdLnR5cGUmJnF0KGUsaSxyKT9uLnB1c2goe2NvbW1hbmQ6VnQuc2V0R2VvSlNPTlNvdXJjZURhdGEsYXJnczpbcixpW3JdLmRhdGFdfSk6V3QocixpLG4sbykpOmp0KHIsaSxuKSk7fShlLnNvdXJjZXMsaS5zb3VyY2VzLHIsbyk7dmFyIGE9W107ZS5sYXllcnMmJmUubGF5ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7b1t0LnNvdXJjZV0/bi5wdXNoKHtjb21tYW5kOlZ0LnJlbW92ZUxheWVyLGFyZ3M6W3QuaWRdfSk6YS5wdXNoKHQpO30pLG49bi5jb25jYXQociksZnVuY3Rpb24oZSxpLG4pe2k9aXx8W107dmFyIG8scixhLHMsbCxjLHUsaD0oZT1lfHxbXSkubWFwKEh0KSxwPWkubWFwKEh0KSxkPWUucmVkdWNlKEt0LHt9KSxmPWkucmVkdWNlKEt0LHt9KSxtPWguc2xpY2UoKSxfPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKG89MCxyPTA7bzxoLmxlbmd0aDtvKyspYT1oW29dLGYuaGFzT3duUHJvcGVydHkoYSk/cisrOihuLnB1c2goe2NvbW1hbmQ6VnQucmVtb3ZlTGF5ZXIsYXJnczpbYV19KSxtLnNwbGljZShtLmluZGV4T2YoYSxyKSwxKSk7Zm9yKG89MCxyPTA7bzxwLmxlbmd0aDtvKyspYT1wW3AubGVuZ3RoLTEtb10sbVttLmxlbmd0aC0xLW9dIT09YSYmKGQuaGFzT3duUHJvcGVydHkoYSk/KG4ucHVzaCh7Y29tbWFuZDpWdC5yZW1vdmVMYXllcixhcmdzOlthXX0pLG0uc3BsaWNlKG0ubGFzdEluZGV4T2YoYSxtLmxlbmd0aC1yKSwxKSk6cisrLGM9bVttLmxlbmd0aC1vXSxuLnB1c2goe2NvbW1hbmQ6VnQuYWRkTGF5ZXIsYXJnczpbZlthXSxjXX0pLG0uc3BsaWNlKG0ubGVuZ3RoLW8sMCxhKSxfW2FdPSEwKTtmb3Iobz0wO288cC5sZW5ndGg7bysrKWlmKHM9ZFthPXBbb11dLGw9ZlthXSwhX1thXSYmIXQuZGVmYXVsdCQxMyhzLGwpKWlmKHQuZGVmYXVsdCQxMyhzLnNvdXJjZSxsLnNvdXJjZSkmJnQuZGVmYXVsdCQxMyhzW1wic291cmNlLWxheWVyXCJdLGxbXCJzb3VyY2UtbGF5ZXJcIl0pJiZ0LmRlZmF1bHQkMTMocy50eXBlLGwudHlwZSkpe2Zvcih1IGluIFh0KHMubGF5b3V0LGwubGF5b3V0LG4sYSxudWxsLFZ0LnNldExheW91dFByb3BlcnR5KSxYdChzLnBhaW50LGwucGFpbnQsbixhLG51bGwsVnQuc2V0UGFpbnRQcm9wZXJ0eSksdC5kZWZhdWx0JDEzKHMuZmlsdGVyLGwuZmlsdGVyKXx8bi5wdXNoKHtjb21tYW5kOlZ0LnNldEZpbHRlcixhcmdzOlthLGwuZmlsdGVyXX0pLHQuZGVmYXVsdCQxMyhzLm1pbnpvb20sbC5taW56b29tKSYmdC5kZWZhdWx0JDEzKHMubWF4em9vbSxsLm1heHpvb20pfHxuLnB1c2goe2NvbW1hbmQ6VnQuc2V0TGF5ZXJab29tUmFuZ2UsYXJnczpbYSxsLm1pbnpvb20sbC5tYXh6b29tXX0pLHMpcy5oYXNPd25Qcm9wZXJ0eSh1KSYmXCJsYXlvdXRcIiE9PXUmJlwicGFpbnRcIiE9PXUmJlwiZmlsdGVyXCIhPT11JiZcIm1ldGFkYXRhXCIhPT11JiZcIm1pbnpvb21cIiE9PXUmJlwibWF4em9vbVwiIT09dSYmKDA9PT11LmluZGV4T2YoXCJwYWludC5cIik/WHQoc1t1XSxsW3VdLG4sYSx1LnNsaWNlKDYpLFZ0LnNldFBhaW50UHJvcGVydHkpOnQuZGVmYXVsdCQxMyhzW3VdLGxbdV0pfHxuLnB1c2goe2NvbW1hbmQ6VnQuc2V0TGF5ZXJQcm9wZXJ0eSxhcmdzOlthLHUsbFt1XV19KSk7Zm9yKHUgaW4gbClsLmhhc093blByb3BlcnR5KHUpJiYhcy5oYXNPd25Qcm9wZXJ0eSh1KSYmXCJsYXlvdXRcIiE9PXUmJlwicGFpbnRcIiE9PXUmJlwiZmlsdGVyXCIhPT11JiZcIm1ldGFkYXRhXCIhPT11JiZcIm1pbnpvb21cIiE9PXUmJlwibWF4em9vbVwiIT09dSYmKDA9PT11LmluZGV4T2YoXCJwYWludC5cIik/WHQoc1t1XSxsW3VdLG4sYSx1LnNsaWNlKDYpLFZ0LnNldFBhaW50UHJvcGVydHkpOnQuZGVmYXVsdCQxMyhzW3VdLGxbdV0pfHxuLnB1c2goe2NvbW1hbmQ6VnQuc2V0TGF5ZXJQcm9wZXJ0eSxhcmdzOlthLHUsbFt1XV19KSk7fWVsc2Ugbi5wdXNoKHtjb21tYW5kOlZ0LnJlbW92ZUxheWVyLGFyZ3M6W2FdfSksYz1tW20ubGFzdEluZGV4T2YoYSkrMV0sbi5wdXNoKHtjb21tYW5kOlZ0LmFkZExheWVyLGFyZ3M6W2wsY119KTt9KGEsaS5sYXllcnMsbik7fWNhdGNoKHQpe2NvbnNvbGUud2FybihcIlVuYWJsZSB0byBjb21wdXRlIHN0eWxlIGRpZmY6XCIsdCksbj1be2NvbW1hbmQ6VnQuc2V0U3R5bGUsYXJnczpbaV19XTt9cmV0dXJuIG59dmFyIEp0PWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLmJveENlbGxzPVtdLG89dGhpcy5jaXJjbGVDZWxscz1bXTt0aGlzLnhDZWxsQ291bnQ9TWF0aC5jZWlsKHQvaSksdGhpcy55Q2VsbENvdW50PU1hdGguY2VpbChlL2kpO2Zvcih2YXIgcj0wO3I8dGhpcy54Q2VsbENvdW50KnRoaXMueUNlbGxDb3VudDtyKyspbi5wdXNoKFtdKSxvLnB1c2goW10pO3RoaXMuY2lyY2xlS2V5cz1bXSx0aGlzLmJveEtleXM9W10sdGhpcy5iYm94ZXM9W10sdGhpcy5jaXJjbGVzPVtdLHRoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1lLHRoaXMueFNjYWxlPXRoaXMueENlbGxDb3VudC90LHRoaXMueVNjYWxlPXRoaXMueUNlbGxDb3VudC9lLHRoaXMuYm94VWlkPTAsdGhpcy5jaXJjbGVVaWQ9MDt9O0p0LnByb3RvdHlwZS5rZXlzTGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm94S2V5cy5sZW5ndGgrdGhpcy5jaXJjbGVLZXlzLmxlbmd0aH0sSnQucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0LGUsaSxuLG8pe3RoaXMuX2ZvckVhY2hDZWxsKGUsaSxuLG8sdGhpcy5faW5zZXJ0Qm94Q2VsbCx0aGlzLmJveFVpZCsrKSx0aGlzLmJveEtleXMucHVzaCh0KSx0aGlzLmJib3hlcy5wdXNoKGUpLHRoaXMuYmJveGVzLnB1c2goaSksdGhpcy5iYm94ZXMucHVzaChuKSx0aGlzLmJib3hlcy5wdXNoKG8pO30sSnQucHJvdG90eXBlLmluc2VydENpcmNsZT1mdW5jdGlvbih0LGUsaSxuKXt0aGlzLl9mb3JFYWNoQ2VsbChlLW4saS1uLGUrbixpK24sdGhpcy5faW5zZXJ0Q2lyY2xlQ2VsbCx0aGlzLmNpcmNsZVVpZCsrKSx0aGlzLmNpcmNsZUtleXMucHVzaCh0KSx0aGlzLmNpcmNsZXMucHVzaChlKSx0aGlzLmNpcmNsZXMucHVzaChpKSx0aGlzLmNpcmNsZXMucHVzaChuKTt9LEp0LnByb3RvdHlwZS5faW5zZXJ0Qm94Q2VsbD1mdW5jdGlvbih0LGUsaSxuLG8scil7dGhpcy5ib3hDZWxsc1tvXS5wdXNoKHIpO30sSnQucHJvdG90eXBlLl9pbnNlcnRDaXJjbGVDZWxsPWZ1bmN0aW9uKHQsZSxpLG4sbyxyKXt0aGlzLmNpcmNsZUNlbGxzW29dLnB1c2gocik7fSxKdC5wcm90b3R5cGUuX3F1ZXJ5PWZ1bmN0aW9uKHQsZSxpLG4sbyxyKXtpZihpPDB8fHQ+dGhpcy53aWR0aHx8bjwwfHxlPnRoaXMuaGVpZ2h0KXJldHVybiFvJiZbXTt2YXIgYT1bXTtpZih0PD0wJiZlPD0wJiZ0aGlzLndpZHRoPD1pJiZ0aGlzLmhlaWdodDw9bil7aWYobylyZXR1cm4hMDtmb3IodmFyIHM9MDtzPHRoaXMuYm94S2V5cy5sZW5ndGg7cysrKWEucHVzaCh7a2V5OnRoaXMuYm94S2V5c1tzXSx4MTp0aGlzLmJib3hlc1s0KnNdLHkxOnRoaXMuYmJveGVzWzQqcysxXSx4Mjp0aGlzLmJib3hlc1s0KnMrMl0seTI6dGhpcy5iYm94ZXNbNCpzKzNdfSk7Zm9yKHZhciBsPTA7bDx0aGlzLmNpcmNsZUtleXMubGVuZ3RoO2wrKyl7dmFyIGM9dGhpcy5jaXJjbGVzWzMqbF0sdT10aGlzLmNpcmNsZXNbMypsKzFdLGg9dGhpcy5jaXJjbGVzWzMqbCsyXTthLnB1c2goe2tleTp0aGlzLmNpcmNsZUtleXNbbF0seDE6Yy1oLHkxOnUtaCx4MjpjK2gseTI6dStofSk7fXJldHVybiByP2EuZmlsdGVyKHIpOmF9dmFyIHA9e2hpdFRlc3Q6byxzZWVuVWlkczp7Ym94Ont9LGNpcmNsZTp7fX19O3JldHVybiB0aGlzLl9mb3JFYWNoQ2VsbCh0LGUsaSxuLHRoaXMuX3F1ZXJ5Q2VsbCxhLHAsciksbz9hLmxlbmd0aD4wOmF9LEp0LnByb3RvdHlwZS5fcXVlcnlDaXJjbGU9ZnVuY3Rpb24odCxlLGksbixvKXt2YXIgcj10LWksYT10K2kscz1lLWksbD1lK2k7aWYoYTwwfHxyPnRoaXMud2lkdGh8fGw8MHx8cz50aGlzLmhlaWdodClyZXR1cm4hbiYmW107dmFyIGM9W10sdT17aGl0VGVzdDpuLGNpcmNsZTp7eDp0LHk6ZSxyYWRpdXM6aX0sc2VlblVpZHM6e2JveDp7fSxjaXJjbGU6e319fTtyZXR1cm4gdGhpcy5fZm9yRWFjaENlbGwocixzLGEsbCx0aGlzLl9xdWVyeUNlbGxDaXJjbGUsYyx1LG8pLG4/Yy5sZW5ndGg+MDpjfSxKdC5wcm90b3R5cGUucXVlcnk9ZnVuY3Rpb24odCxlLGksbixvKXtyZXR1cm4gdGhpcy5fcXVlcnkodCxlLGksbiwhMSxvKX0sSnQucHJvdG90eXBlLmhpdFRlc3Q9ZnVuY3Rpb24odCxlLGksbixvKXtyZXR1cm4gdGhpcy5fcXVlcnkodCxlLGksbiwhMCxvKX0sSnQucHJvdG90eXBlLmhpdFRlc3RDaXJjbGU9ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIHRoaXMuX3F1ZXJ5Q2lyY2xlKHQsZSxpLCEwLG4pfSxKdC5wcm90b3R5cGUuX3F1ZXJ5Q2VsbD1mdW5jdGlvbih0LGUsaSxuLG8scixhLHMpe3ZhciBsPWEuc2VlblVpZHMsYz10aGlzLmJveENlbGxzW29dO2lmKG51bGwhPT1jKWZvcih2YXIgdT10aGlzLmJib3hlcyxoPTAscD1jO2g8cC5sZW5ndGg7aCs9MSl7dmFyIGQ9cFtoXTtpZighbC5ib3hbZF0pe2wuYm94W2RdPSEwO3ZhciBmPTQqZDtpZih0PD11W2YrMl0mJmU8PXVbZiszXSYmaT49dVtmKzBdJiZuPj11W2YrMV0mJighc3x8cyh0aGlzLmJveEtleXNbZF0pKSl7aWYoYS5oaXRUZXN0KXJldHVybiByLnB1c2goITApLCEwO3IucHVzaCh7a2V5OnRoaXMuYm94S2V5c1tkXSx4MTp1W2ZdLHkxOnVbZisxXSx4Mjp1W2YrMl0seTI6dVtmKzNdfSk7fX19dmFyIG09dGhpcy5jaXJjbGVDZWxsc1tvXTtpZihudWxsIT09bSlmb3IodmFyIF89dGhpcy5jaXJjbGVzLGc9MCx2PW07Zzx2Lmxlbmd0aDtnKz0xKXt2YXIgeT12W2ddO2lmKCFsLmNpcmNsZVt5XSl7bC5jaXJjbGVbeV09ITA7dmFyIHg9Myp5O2lmKHRoaXMuX2NpcmNsZUFuZFJlY3RDb2xsaWRlKF9beF0sX1t4KzFdLF9beCsyXSx0LGUsaSxuKSYmKCFzfHxzKHRoaXMuY2lyY2xlS2V5c1t5XSkpKXtpZihhLmhpdFRlc3QpcmV0dXJuIHIucHVzaCghMCksITA7dmFyIGI9X1t4XSx3PV9beCsxXSxFPV9beCsyXTtyLnB1c2goe2tleTp0aGlzLmNpcmNsZUtleXNbeV0seDE6Yi1FLHkxOnctRSx4MjpiK0UseTI6dytFfSk7fX19fSxKdC5wcm90b3R5cGUuX3F1ZXJ5Q2VsbENpcmNsZT1mdW5jdGlvbih0LGUsaSxuLG8scixhLHMpe3ZhciBsPWEuY2lyY2xlLGM9YS5zZWVuVWlkcyx1PXRoaXMuYm94Q2VsbHNbb107aWYobnVsbCE9PXUpZm9yKHZhciBoPXRoaXMuYmJveGVzLHA9MCxkPXU7cDxkLmxlbmd0aDtwKz0xKXt2YXIgZj1kW3BdO2lmKCFjLmJveFtmXSl7Yy5ib3hbZl09ITA7dmFyIG09NCpmO2lmKHRoaXMuX2NpcmNsZUFuZFJlY3RDb2xsaWRlKGwueCxsLnksbC5yYWRpdXMsaFttKzBdLGhbbSsxXSxoW20rMl0saFttKzNdKSYmKCFzfHxzKHRoaXMuYm94S2V5c1tmXSkpKXJldHVybiByLnB1c2goITApLCEwfX12YXIgXz10aGlzLmNpcmNsZUNlbGxzW29dO2lmKG51bGwhPT1fKWZvcih2YXIgZz10aGlzLmNpcmNsZXMsdj0wLHk9Xzt2PHkubGVuZ3RoO3YrPTEpe3ZhciB4PXlbdl07aWYoIWMuY2lyY2xlW3hdKXtjLmNpcmNsZVt4XT0hMDt2YXIgYj0zKng7aWYodGhpcy5fY2lyY2xlc0NvbGxpZGUoZ1tiXSxnW2IrMV0sZ1tiKzJdLGwueCxsLnksbC5yYWRpdXMpJiYoIXN8fHModGhpcy5jaXJjbGVLZXlzW3hdKSkpcmV0dXJuIHIucHVzaCghMCksITB9fX0sSnQucHJvdG90eXBlLl9mb3JFYWNoQ2VsbD1mdW5jdGlvbih0LGUsaSxuLG8scixhLHMpe2Zvcih2YXIgbD10aGlzLl9jb252ZXJ0VG9YQ2VsbENvb3JkKHQpLGM9dGhpcy5fY29udmVydFRvWUNlbGxDb29yZChlKSx1PXRoaXMuX2NvbnZlcnRUb1hDZWxsQ29vcmQoaSksaD10aGlzLl9jb252ZXJ0VG9ZQ2VsbENvb3JkKG4pLHA9bDtwPD11O3ArKylmb3IodmFyIGQ9YztkPD1oO2QrKyl7dmFyIGY9dGhpcy54Q2VsbENvdW50KmQrcDtpZihvLmNhbGwodGhpcyx0LGUsaSxuLGYscixhLHMpKXJldHVybn19LEp0LnByb3RvdHlwZS5fY29udmVydFRvWENlbGxDb29yZD1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLnhDZWxsQ291bnQtMSxNYXRoLmZsb29yKHQqdGhpcy54U2NhbGUpKSl9LEp0LnByb3RvdHlwZS5fY29udmVydFRvWUNlbGxDb29yZD1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLnlDZWxsQ291bnQtMSxNYXRoLmZsb29yKHQqdGhpcy55U2NhbGUpKSl9LEp0LnByb3RvdHlwZS5fY2lyY2xlc0NvbGxpZGU9ZnVuY3Rpb24odCxlLGksbixvLHIpe3ZhciBhPW4tdCxzPW8tZSxsPWkrcjtyZXR1cm4gbCpsPmEqYStzKnN9LEp0LnByb3RvdHlwZS5fY2lyY2xlQW5kUmVjdENvbGxpZGU9ZnVuY3Rpb24odCxlLGksbixvLHIsYSl7dmFyIHM9KHItbikvMixsPU1hdGguYWJzKHQtKG4rcykpO2lmKGw+cytpKXJldHVybiExO3ZhciBjPShhLW8pLzIsdT1NYXRoLmFicyhlLShvK2MpKTtpZih1PmMraSlyZXR1cm4hMTtpZihsPD1zfHx1PD1jKXJldHVybiEwO3ZhciBoPWwtcyxwPXUtYztyZXR1cm4gaCpoK3AqcDw9aSppfTt2YXIgUXQ9dC5kZWZhdWx0JDE4LmxheW91dDtmdW5jdGlvbiB0ZShlLGksbixvLHIpe3ZhciBhPXQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpO3JldHVybiBpPyh0LmlkZW50aXR5KGEpLHQuc2NhbGUoYSxhLFsxL3IsMS9yLDFdKSxufHx0LnJvdGF0ZVooYSxhLG8uYW5nbGUpKToodC5zY2FsZShhLGEsW28ud2lkdGgvMiwtby5oZWlnaHQvMiwxXSksdC50cmFuc2xhdGUoYSxhLFsxLC0xLDBdKSx0Lm11bHRpcGx5KGEsYSxlKSksYX1mdW5jdGlvbiBlZShlLGksbixvLHIpe3ZhciBhPXQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpO3JldHVybiBpPyh0Lm11bHRpcGx5KGEsYSxlKSx0LnNjYWxlKGEsYSxbcixyLDFdKSxufHx0LnJvdGF0ZVooYSxhLC1vLmFuZ2xlKSk6KHQuc2NhbGUoYSxhLFsxLC0xLDFdKSx0LnRyYW5zbGF0ZShhLGEsWy0xLC0xLDBdKSx0LnNjYWxlKGEsYSxbMi9vLndpZHRoLDIvby5oZWlnaHQsMV0pKSxhfWZ1bmN0aW9uIGllKGUsaSl7dmFyIG49W2UueCxlLnksMCwxXTtwZShuLG4saSk7dmFyIG89blszXTtyZXR1cm57cG9pbnQ6bmV3IHQuZGVmYXVsdChuWzBdL28sblsxXS9vKSxzaWduZWREaXN0YW5jZUZyb21DYW1lcmE6b319ZnVuY3Rpb24gbmUodCxlKXt2YXIgaT10WzBdL3RbM10sbj10WzFdL3RbM107cmV0dXJuIGk+PS1lWzBdJiZpPD1lWzBdJiZuPj0tZVsxXSYmbjw9ZVsxXX1mdW5jdGlvbiBvZShlLGksbixvLHIsYSxzLGwpe3ZhciBjPW8/ZS50ZXh0U2l6ZURhdGE6ZS5pY29uU2l6ZURhdGEsdT10LmV2YWx1YXRlU2l6ZUZvclpvb20oYyxuLnRyYW5zZm9ybS56b29tLFF0LnByb3BlcnRpZXNbbz9cInRleHQtc2l6ZVwiOlwiaWNvbi1zaXplXCJdKSxoPVsyNTYvbi53aWR0aCoyKzEsMjU2L24uaGVpZ2h0KjIrMV0scD1vP2UudGV4dC5keW5hbWljTGF5b3V0VmVydGV4QXJyYXk6ZS5pY29uLmR5bmFtaWNMYXlvdXRWZXJ0ZXhBcnJheTtwLmNsZWFyKCk7Zm9yKHZhciBkPWUubGluZVZlcnRleEFycmF5LGY9bz9lLnRleHQucGxhY2VkU3ltYm9sQXJyYXk6ZS5pY29uLnBsYWNlZFN5bWJvbEFycmF5LG09bi50cmFuc2Zvcm0ud2lkdGgvbi50cmFuc2Zvcm0uaGVpZ2h0LF89ITEsZz0wO2c8Zi5sZW5ndGg7ZysrKXt2YXIgdj1mLmdldChnKTtpZih2LmhpZGRlbnx8di53cml0aW5nTW9kZT09PXQuV3JpdGluZ01vZGUudmVydGljYWwmJiFfKWhlKHYubnVtR2x5cGhzLHApO2Vsc2V7Xz0hMTt2YXIgeT1bdi5hbmNob3JYLHYuYW5jaG9yWSwwLDFdO2lmKHQudHJhbnNmb3JtTWF0NCh5LHksaSksbmUoeSxoKSl7dmFyIHg9LjUreVszXS9uLnRyYW5zZm9ybS5jYW1lcmFUb0NlbnRlckRpc3RhbmNlKi41LGI9dC5ldmFsdWF0ZVNpemVGb3JGZWF0dXJlKGMsdSx2KSx3PXM/Yip4OmIveCxFPW5ldyB0LmRlZmF1bHQodi5hbmNob3JYLHYuYW5jaG9yWSksVD1pZShFLHIpLnBvaW50LEk9e30sQz1zZSh2LHcsITEsbCxpLHIsYSxlLmdseXBoT2Zmc2V0QXJyYXksZCxwLFQsRSxJLG0pO189Qy51c2VWZXJ0aWNhbCwoQy5ub3RFbm91Z2hSb29tfHxffHxDLm5lZWRzRmxpcHBpbmcmJnNlKHYsdywhMCxsLGkscixhLGUuZ2x5cGhPZmZzZXRBcnJheSxkLHAsVCxFLEksbSkubm90RW5vdWdoUm9vbSkmJmhlKHYubnVtR2x5cGhzLHApO31lbHNlIGhlKHYubnVtR2x5cGhzLHApO319bz9lLnRleHQuZHluYW1pY0xheW91dFZlcnRleEJ1ZmZlci51cGRhdGVEYXRhKHApOmUuaWNvbi5keW5hbWljTGF5b3V0VmVydGV4QnVmZmVyLnVwZGF0ZURhdGEocCk7fWZ1bmN0aW9uIHJlKHQsZSxpLG4sbyxyLGEscyxsLGMsdSxoKXt2YXIgcD1zLmdseXBoU3RhcnRJbmRleCtzLm51bUdseXBocyxkPXMubGluZVN0YXJ0SW5kZXgsZj1zLmxpbmVTdGFydEluZGV4K3MubGluZUxlbmd0aCxtPWUuZ2V0b2Zmc2V0WChzLmdseXBoU3RhcnRJbmRleCksXz1lLmdldG9mZnNldFgocC0xKSxnPWNlKHQqbSxpLG4sbyxyLGEscy5zZWdtZW50LGQsZixsLGMsdSxoKTtpZighZylyZXR1cm4gbnVsbDt2YXIgdj1jZSh0Kl8saSxuLG8scixhLHMuc2VnbWVudCxkLGYsbCxjLHUsaCk7cmV0dXJuIHY/e2ZpcnN0OmcsbGFzdDp2fTpudWxsfWZ1bmN0aW9uIGFlKGUsaSxuLG8pe2lmKGU9PT10LldyaXRpbmdNb2RlLmhvcml6b250YWwmJk1hdGguYWJzKG4ueS1pLnkpPk1hdGguYWJzKG4ueC1pLngpKm8pcmV0dXJue3VzZVZlcnRpY2FsOiEwfTtyZXR1cm4oZT09PXQuV3JpdGluZ01vZGUudmVydGljYWw/aS55PG4ueTppLng+bi54KT97bmVlZHNGbGlwcGluZzohMH06bnVsbH1mdW5jdGlvbiBzZShlLGksbixvLHIsYSxzLGwsYyx1LGgscCxkLGYpe3ZhciBtLF89aS8yNCxnPWUubGluZU9mZnNldFgqaSx2PWUubGluZU9mZnNldFkqaTtpZihlLm51bUdseXBocz4xKXt2YXIgeT1lLmdseXBoU3RhcnRJbmRleCtlLm51bUdseXBocyx4PWUubGluZVN0YXJ0SW5kZXgsYj1lLmxpbmVTdGFydEluZGV4K2UubGluZUxlbmd0aCx3PXJlKF8sbCxnLHYsbixoLHAsZSxjLGEsZCwhMSk7aWYoIXcpcmV0dXJue25vdEVub3VnaFJvb206ITB9O3ZhciBFPWllKHcuZmlyc3QucG9pbnQscykucG9pbnQsVD1pZSh3Lmxhc3QucG9pbnQscykucG9pbnQ7aWYobyYmIW4pe3ZhciBJPWFlKGUud3JpdGluZ01vZGUsRSxULGYpO2lmKEkpcmV0dXJuIEl9bT1bdy5maXJzdF07Zm9yKHZhciBDPWUuZ2x5cGhTdGFydEluZGV4KzE7Qzx5LTE7QysrKW0ucHVzaChjZShfKmwuZ2V0b2Zmc2V0WChDKSxnLHYsbixoLHAsZS5zZWdtZW50LHgsYixjLGEsZCwhMSkpO20ucHVzaCh3Lmxhc3QpO31lbHNle2lmKG8mJiFuKXt2YXIgUz1pZShwLHIpLnBvaW50LHo9ZS5saW5lU3RhcnRJbmRleCtlLnNlZ21lbnQrMSxBPW5ldyB0LmRlZmF1bHQoYy5nZXR4KHopLGMuZ2V0eSh6KSksTT1pZShBLHIpLEw9TS5zaWduZWREaXN0YW5jZUZyb21DYW1lcmE+MD9NLnBvaW50OmxlKHAsQSxTLDEsciksRD1hZShlLndyaXRpbmdNb2RlLFMsTCxmKTtpZihEKXJldHVybiBEfXZhciBSPWNlKF8qbC5nZXRvZmZzZXRYKGUuZ2x5cGhTdGFydEluZGV4KSxnLHYsbixoLHAsZS5zZWdtZW50LGUubGluZVN0YXJ0SW5kZXgsZS5saW5lU3RhcnRJbmRleCtlLmxpbmVMZW5ndGgsYyxhLGQsITEpO2lmKCFSKXJldHVybntub3RFbm91Z2hSb29tOiEwfTttPVtSXTt9Zm9yKHZhciBQPTAsaz1tO1A8ay5sZW5ndGg7UCs9MSl7dmFyIEI9a1tQXTt0LmFkZER5bmFtaWNBdHRyaWJ1dGVzKHUsQi5wb2ludCxCLmFuZ2xlKTt9cmV0dXJue319ZnVuY3Rpb24gbGUodCxlLGksbixvKXt2YXIgcj1pZSh0LmFkZCh0LnN1YihlKS5fdW5pdCgpKSxvKS5wb2ludCxhPWkuc3ViKHIpO3JldHVybiBpLmFkZChhLl9tdWx0KG4vYS5tYWcoKSkpfWZ1bmN0aW9uIGNlKGUsaSxuLG8scixhLHMsbCxjLHUsaCxwLGQpe3ZhciBmPW8/ZS1pOmUraSxtPWY+MD8xOi0xLF89MDtvJiYobSo9LTEsXz1NYXRoLlBJKSxtPDAmJihfKz1NYXRoLlBJKTtmb3IodmFyIGc9bT4wP2wrczpsK3MrMSx2PWcseT1yLHg9cixiPTAsdz0wLEU9TWF0aC5hYnMoZik7Yit3PD1FOyl7aWYoKGcrPW0pPGx8fGc+PWMpcmV0dXJuIG51bGw7aWYoeD15LHZvaWQgMD09PSh5PXBbZ10pKXt2YXIgVD1uZXcgdC5kZWZhdWx0KHUuZ2V0eChnKSx1LmdldHkoZykpLEk9aWUoVCxoKTtpZihJLnNpZ25lZERpc3RhbmNlRnJvbUNhbWVyYT4wKXk9cFtnXT1JLnBvaW50O2Vsc2V7dmFyIEM9Zy1tO3k9bGUoMD09PWI/YTpuZXcgdC5kZWZhdWx0KHUuZ2V0eChDKSx1LmdldHkoQykpLFQseCxFLWIrMSxoKTt9fWIrPXcsdz14LmRpc3QoeSk7fXZhciBTPShFLWIpL3csej15LnN1Yih4KSxBPXoubXVsdChTKS5fYWRkKHgpO3JldHVybiBBLl9hZGQoei5fdW5pdCgpLl9wZXJwKCkuX211bHQobiptKSkse3BvaW50OkEsYW5nbGU6XytNYXRoLmF0YW4yKHkueS14LnkseS54LXgueCksdGlsZURpc3RhbmNlOmQ/e3ByZXZUaWxlRGlzdGFuY2U6Zy1tPT09dj8wOnUuZ2V0dGlsZVVuaXREaXN0YW5jZUZyb21BbmNob3IoZy1tKSxsYXN0U2VnbWVudFZpZXdwb3J0RGlzdGFuY2U6RS1ifTpudWxsfX12YXIgdWU9bmV3IEZsb2F0MzJBcnJheShbLTEvMCwtMS8wLDAsLTEvMCwtMS8wLDAsLTEvMCwtMS8wLDAsLTEvMCwtMS8wLDBdKTtmdW5jdGlvbiBoZSh0LGUpe2Zvcih2YXIgaT0wO2k8dDtpKyspe3ZhciBuPWUubGVuZ3RoO2UucmVzaXplKG4rNCksZS5mbG9hdDMyLnNldCh1ZSwzKm4pO319ZnVuY3Rpb24gcGUodCxlLGkpe3ZhciBuPWVbMF0sbz1lWzFdO3JldHVybiB0WzBdPWlbMF0qbitpWzRdKm8raVsxMl0sdFsxXT1pWzFdKm4raVs1XSpvK2lbMTNdLHRbM109aVszXSpuK2lbN10qbytpWzE1XSx0fXZhciBkZT1mdW5jdGlvbih0LGUsaSl7dm9pZCAwPT09ZSYmKGU9bmV3IEp0KHQud2lkdGgrMjAwLHQuaGVpZ2h0KzIwMCwyNSkpLHZvaWQgMD09PWkmJihpPW5ldyBKdCh0LndpZHRoKzIwMCx0LmhlaWdodCsyMDAsMjUpKSx0aGlzLnRyYW5zZm9ybT10LHRoaXMuZ3JpZD1lLHRoaXMuaWdub3JlZEdyaWQ9aSx0aGlzLnBpdGNoZmFjdG9yPU1hdGguY29zKHQuX3BpdGNoKSp0LmNhbWVyYVRvQ2VudGVyRGlzdGFuY2UsdGhpcy5zY3JlZW5SaWdodEJvdW5kYXJ5PXQud2lkdGgrMTAwLHRoaXMuc2NyZWVuQm90dG9tQm91bmRhcnk9dC5oZWlnaHQrMTAwLHRoaXMuZ3JpZFJpZ2h0Qm91bmRhcnk9dC53aWR0aCsyMDAsdGhpcy5ncmlkQm90dG9tQm91bmRhcnk9dC5oZWlnaHQrMjAwO307ZnVuY3Rpb24gZmUodCxlLGkpe3RbZSs0XT1pPzE6MDt9ZnVuY3Rpb24gbWUoZSxpLG4pe3JldHVybiBpKih0LmRlZmF1bHQkMTAvKGUudGlsZVNpemUqTWF0aC5wb3coMixuLWUudGlsZUlELm92ZXJzY2FsZWRaKSkpfWRlLnByb3RvdHlwZS5wbGFjZUNvbGxpc2lvbkJveD1mdW5jdGlvbih0LGUsaSxuLG8pe3ZhciByPXRoaXMucHJvamVjdEFuZEdldFBlcnNwZWN0aXZlUmF0aW8obix0LmFuY2hvclBvaW50WCx0LmFuY2hvclBvaW50WSksYT1pKnIucGVyc3BlY3RpdmVSYXRpbyxzPXQueDEqYStyLnBvaW50LngsbD10LnkxKmErci5wb2ludC55LGM9dC54MiphK3IucG9pbnQueCx1PXQueTIqYStyLnBvaW50Lnk7cmV0dXJuIXRoaXMuaXNJbnNpZGVHcmlkKHMsbCxjLHUpfHwhZSYmdGhpcy5ncmlkLmhpdFRlc3QocyxsLGMsdSxvKT97Ym94OltdLG9mZnNjcmVlbjohMX06e2JveDpbcyxsLGMsdV0sb2Zmc2NyZWVuOnRoaXMuaXNPZmZzY3JlZW4ocyxsLGMsdSl9fSxkZS5wcm90b3R5cGUuYXBwcm94aW1hdGVUaWxlRGlzdGFuY2U9ZnVuY3Rpb24odCxlLGksbixvKXt2YXIgcj1vPzE6bi90aGlzLnBpdGNoZmFjdG9yLGE9dC5sYXN0U2VnbWVudFZpZXdwb3J0RGlzdGFuY2UqaTtyZXR1cm4gdC5wcmV2VGlsZURpc3RhbmNlK2ErKHItMSkqYSpNYXRoLmFicyhNYXRoLnNpbihlKSl9LGRlLnByb3RvdHlwZS5wbGFjZUNvbGxpc2lvbkNpcmNsZXM9ZnVuY3Rpb24oZSxpLG4sbyxyLGEscyxsLGMsdSxoLHAsZCxmKXt2YXIgbT1bXSxfPXRoaXMucHJvamVjdEFuY2hvcih1LGEuYW5jaG9yWCxhLmFuY2hvclkpLGc9Yy8yNCx2PWEubGluZU9mZnNldFgqYyx5PWEubGluZU9mZnNldFkqYyx4PW5ldyB0LmRlZmF1bHQoYS5hbmNob3JYLGEuYW5jaG9yWSksYj1yZShnLGwsdix5LCExLGllKHgsaCkucG9pbnQseCxhLHMsaCx7fSwhMCksdz0hMSxFPSExLFQ9ITAsST1fLnBlcnNwZWN0aXZlUmF0aW8qbyxDPTEvKG8qbiksUz0wLHo9MDtiJiYoUz10aGlzLmFwcHJveGltYXRlVGlsZURpc3RhbmNlKGIuZmlyc3QudGlsZURpc3RhbmNlLGIuZmlyc3QuYW5nbGUsQyxfLmNhbWVyYURpc3RhbmNlLGQpLHo9dGhpcy5hcHByb3hpbWF0ZVRpbGVEaXN0YW5jZShiLmxhc3QudGlsZURpc3RhbmNlLGIubGFzdC5hbmdsZSxDLF8uY2FtZXJhRGlzdGFuY2UsZCkpO2Zvcih2YXIgQT0wO0E8ZS5sZW5ndGg7QSs9NSl7dmFyIE09ZVtBXSxMPWVbQSsxXSxEPWVbQSsyXSxSPWVbQSszXTtpZighYnx8UjwtU3x8Uj56KWZlKGUsQSwhMSk7ZWxzZXt2YXIgUD10aGlzLnByb2plY3RQb2ludCh1LE0sTCksaz1EKkk7aWYobS5sZW5ndGg+MCl7dmFyIEI9UC54LW1bbS5sZW5ndGgtNF0sTz1QLnktbVttLmxlbmd0aC0zXTtpZihrKmsqMj5CKkIrTypPKWlmKEErODxlLmxlbmd0aCl7dmFyIEY9ZVtBKzhdO2lmKEY+LVMmJkY8eil7ZmUoZSxBLCExKTtjb250aW51ZX19fXZhciBOPUEvNTttLnB1c2goUC54LFAueSxrLE4pLGZlKGUsQSwhMCk7dmFyICQ9UC54LWssVT1QLnktayxaPVAueCtrLFY9UC55K2s7aWYoVD1UJiZ0aGlzLmlzT2Zmc2NyZWVuKCQsVSxaLFYpLEU9RXx8dGhpcy5pc0luc2lkZUdyaWQoJCxVLFosViksIWkmJnRoaXMuZ3JpZC5oaXRUZXN0Q2lyY2xlKFAueCxQLnksayxmKSl7aWYoIXApcmV0dXJue2NpcmNsZXM6W10sb2Zmc2NyZWVuOiExfTt3PSEwO319fXJldHVybntjaXJjbGVzOnd8fCFFP1tdOm0sb2Zmc2NyZWVuOlR9fSxkZS5wcm90b3R5cGUucXVlcnlSZW5kZXJlZFN5bWJvbHM9ZnVuY3Rpb24oZSl7aWYoMD09PWUubGVuZ3RofHwwPT09dGhpcy5ncmlkLmtleXNMZW5ndGgoKSYmMD09PXRoaXMuaWdub3JlZEdyaWQua2V5c0xlbmd0aCgpKXJldHVybnt9O2Zvcih2YXIgaT1bXSxuPTEvMCxvPTEvMCxyPS0xLzAsYT0tMS8wLHM9MCxsPWU7czxsLmxlbmd0aDtzKz0xKXt2YXIgYz1sW3NdLHU9bmV3IHQuZGVmYXVsdChjLngrMTAwLGMueSsxMDApO249TWF0aC5taW4obix1LngpLG89TWF0aC5taW4obyx1LnkpLHI9TWF0aC5tYXgocix1LngpLGE9TWF0aC5tYXgoYSx1LnkpLGkucHVzaCh1KTt9Zm9yKHZhciBoPXt9LHA9e30sZD0wLGY9dGhpcy5ncmlkLnF1ZXJ5KG4sbyxyLGEpLmNvbmNhdCh0aGlzLmlnbm9yZWRHcmlkLnF1ZXJ5KG4sbyxyLGEpKTtkPGYubGVuZ3RoO2QrPTEpe3ZhciBtPWZbZF0sXz1tLmtleTtpZih2b2lkIDA9PT1oW18uYnVja2V0SW5zdGFuY2VJZF0mJihoW18uYnVja2V0SW5zdGFuY2VJZF09e30pLCFoW18uYnVja2V0SW5zdGFuY2VJZF1bXy5mZWF0dXJlSW5kZXhdKXt2YXIgZz1bbmV3IHQuZGVmYXVsdChtLngxLG0ueTEpLG5ldyB0LmRlZmF1bHQobS54MixtLnkxKSxuZXcgdC5kZWZhdWx0KG0ueDIsbS55MiksbmV3IHQuZGVmYXVsdChtLngxLG0ueTIpXTt0LnBvbHlnb25JbnRlcnNlY3RzUG9seWdvbihpLGcpJiYoaFtfLmJ1Y2tldEluc3RhbmNlSWRdW18uZmVhdHVyZUluZGV4XT0hMCx2b2lkIDA9PT1wW18uYnVja2V0SW5zdGFuY2VJZF0mJihwW18uYnVja2V0SW5zdGFuY2VJZF09W10pLHBbXy5idWNrZXRJbnN0YW5jZUlkXS5wdXNoKF8uZmVhdHVyZUluZGV4KSk7fX1yZXR1cm4gcH0sZGUucHJvdG90eXBlLmluc2VydENvbGxpc2lvbkJveD1mdW5jdGlvbih0LGUsaSxuLG8pe3ZhciByPXtidWNrZXRJbnN0YW5jZUlkOmksZmVhdHVyZUluZGV4Om4sY29sbGlzaW9uR3JvdXBJRDpvfTsoZT90aGlzLmlnbm9yZWRHcmlkOnRoaXMuZ3JpZCkuaW5zZXJ0KHIsdFswXSx0WzFdLHRbMl0sdFszXSk7fSxkZS5wcm90b3R5cGUuaW5zZXJ0Q29sbGlzaW9uQ2lyY2xlcz1mdW5jdGlvbih0LGUsaSxuLG8pe2Zvcih2YXIgcj1lP3RoaXMuaWdub3JlZEdyaWQ6dGhpcy5ncmlkLGE9e2J1Y2tldEluc3RhbmNlSWQ6aSxmZWF0dXJlSW5kZXg6bixjb2xsaXNpb25Hcm91cElEOm99LHM9MDtzPHQubGVuZ3RoO3MrPTQpci5pbnNlcnRDaXJjbGUoYSx0W3NdLHRbcysxXSx0W3MrMl0pO30sZGUucHJvdG90eXBlLnByb2plY3RBbmNob3I9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPVtlLGksMCwxXTtyZXR1cm4gcGUobixuLHQpLHtwZXJzcGVjdGl2ZVJhdGlvOi41K3RoaXMudHJhbnNmb3JtLmNhbWVyYVRvQ2VudGVyRGlzdGFuY2UvblszXSouNSxjYW1lcmFEaXN0YW5jZTpuWzNdfX0sZGUucHJvdG90eXBlLnByb2plY3RQb2ludD1mdW5jdGlvbihlLGksbil7dmFyIG89W2ksbiwwLDFdO3JldHVybiBwZShvLG8sZSksbmV3IHQuZGVmYXVsdCgob1swXS9vWzNdKzEpLzIqdGhpcy50cmFuc2Zvcm0ud2lkdGgrMTAwLCgtb1sxXS9vWzNdKzEpLzIqdGhpcy50cmFuc2Zvcm0uaGVpZ2h0KzEwMCl9LGRlLnByb3RvdHlwZS5wcm9qZWN0QW5kR2V0UGVyc3BlY3RpdmVSYXRpbz1mdW5jdGlvbihlLGksbil7dmFyIG89W2ksbiwwLDFdO3JldHVybiBwZShvLG8sZSkse3BvaW50Om5ldyB0LmRlZmF1bHQoKG9bMF0vb1szXSsxKS8yKnRoaXMudHJhbnNmb3JtLndpZHRoKzEwMCwoLW9bMV0vb1szXSsxKS8yKnRoaXMudHJhbnNmb3JtLmhlaWdodCsxMDApLHBlcnNwZWN0aXZlUmF0aW86LjUrdGhpcy50cmFuc2Zvcm0uY2FtZXJhVG9DZW50ZXJEaXN0YW5jZS9vWzNdKi41fX0sZGUucHJvdG90eXBlLmlzT2Zmc2NyZWVuPWZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiBpPDEwMHx8dD49dGhpcy5zY3JlZW5SaWdodEJvdW5kYXJ5fHxuPDEwMHx8ZT50aGlzLnNjcmVlbkJvdHRvbUJvdW5kYXJ5fSxkZS5wcm90b3R5cGUuaXNJbnNpZGVHcmlkPWZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiBpPj0wJiZ0PHRoaXMuZ3JpZFJpZ2h0Qm91bmRhcnkmJm4+PTAmJmU8dGhpcy5ncmlkQm90dG9tQm91bmRhcnl9O3ZhciBfZT10LmRlZmF1bHQkMTgubGF5b3V0LGdlPWZ1bmN0aW9uKHQsZSxpLG4pe3RoaXMub3BhY2l0eT10P01hdGgubWF4KDAsTWF0aC5taW4oMSx0Lm9wYWNpdHkrKHQucGxhY2VkP2U6LWUpKSk6biYmaT8xOjAsdGhpcy5wbGFjZWQ9aTt9O2dlLnByb3RvdHlwZS5pc0hpZGRlbj1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5vcGFjaXR5JiYhdGhpcy5wbGFjZWR9O3ZhciB2ZT1mdW5jdGlvbih0LGUsaSxuLG8pe3RoaXMudGV4dD1uZXcgZ2UodD90LnRleHQ6bnVsbCxlLGksbyksdGhpcy5pY29uPW5ldyBnZSh0P3QuaWNvbjpudWxsLGUsbixvKTt9O3ZlLnByb3RvdHlwZS5pc0hpZGRlbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQuaXNIaWRkZW4oKSYmdGhpcy5pY29uLmlzSGlkZGVuKCl9O3ZhciB5ZT1mdW5jdGlvbih0LGUsaSl7dGhpcy50ZXh0PXQsdGhpcy5pY29uPWUsdGhpcy5za2lwRmFkZT1pO30seGU9ZnVuY3Rpb24odCl7dGhpcy5jcm9zc1NvdXJjZUNvbGxpc2lvbnM9dCx0aGlzLm1heEdyb3VwSUQ9MCx0aGlzLmNvbGxpc2lvbkdyb3Vwcz17fTt9O3hlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5jcm9zc1NvdXJjZUNvbGxpc2lvbnMpcmV0dXJue0lEOjAscHJlZGljYXRlOm51bGx9O2lmKCF0aGlzLmNvbGxpc2lvbkdyb3Vwc1t0XSl7dmFyIGU9Kyt0aGlzLm1heEdyb3VwSUQ7dGhpcy5jb2xsaXNpb25Hcm91cHNbdF09e0lEOmUscHJlZGljYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbGxpc2lvbkdyb3VwSUQ9PT1lfX07fXJldHVybiB0aGlzLmNvbGxpc2lvbkdyb3Vwc1t0XX07dmFyIGJlPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLnRyYW5zZm9ybT10LmNsb25lKCksdGhpcy5jb2xsaXNpb25JbmRleD1uZXcgZGUodGhpcy50cmFuc2Zvcm0pLHRoaXMucGxhY2VtZW50cz17fSx0aGlzLm9wYWNpdGllcz17fSx0aGlzLnN0YWxlPSExLHRoaXMuZmFkZUR1cmF0aW9uPWUsdGhpcy5yZXRhaW5lZFF1ZXJ5RGF0YT17fSx0aGlzLmNvbGxpc2lvbkdyb3Vwcz1uZXcgeGUoaSk7fTtmdW5jdGlvbiB3ZSh0LGUsaSl7dC5lbXBsYWNlQmFjayhlPzE6MCxpPzE6MCksdC5lbXBsYWNlQmFjayhlPzE6MCxpPzE6MCksdC5lbXBsYWNlQmFjayhlPzE6MCxpPzE6MCksdC5lbXBsYWNlQmFjayhlPzE6MCxpPzE6MCk7fWJlLnByb3RvdHlwZS5wbGFjZUxheWVyVGlsZT1mdW5jdGlvbihlLGksbixvKXt2YXIgcj1pLmdldEJ1Y2tldChlKSxhPWkubGF0ZXN0RmVhdHVyZUluZGV4O2lmKHImJmEmJmUuaWQ9PT1yLmxheWVySWRzWzBdKXt2YXIgcz1pLmNvbGxpc2lvbkJveEFycmF5LGw9ci5sYXllcnNbMF0ubGF5b3V0LGM9TWF0aC5wb3coMix0aGlzLnRyYW5zZm9ybS56b29tLWkudGlsZUlELm92ZXJzY2FsZWRaKSx1PWkudGlsZVNpemUvdC5kZWZhdWx0JDEwLGg9dGhpcy50cmFuc2Zvcm0uY2FsY3VsYXRlUG9zTWF0cml4KGkudGlsZUlELnRvVW53cmFwcGVkKCkpLHA9dGUoaCxcIm1hcFwiPT09bC5nZXQoXCJ0ZXh0LXBpdGNoLWFsaWdubWVudFwiKSxcIm1hcFwiPT09bC5nZXQoXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiKSx0aGlzLnRyYW5zZm9ybSxtZShpLDEsdGhpcy50cmFuc2Zvcm0uem9vbSkpLGQ9dGUoaCxcIm1hcFwiPT09bC5nZXQoXCJpY29uLXBpdGNoLWFsaWdubWVudFwiKSxcIm1hcFwiPT09bC5nZXQoXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiKSx0aGlzLnRyYW5zZm9ybSxtZShpLDEsdGhpcy50cmFuc2Zvcm0uem9vbSkpO3RoaXMucmV0YWluZWRRdWVyeURhdGFbci5idWNrZXRJbnN0YW5jZUlkXT1uZXcgZnVuY3Rpb24odCxlLGksbixvKXt0aGlzLmJ1Y2tldEluc3RhbmNlSWQ9dCx0aGlzLmZlYXR1cmVJbmRleD1lLHRoaXMuc291cmNlTGF5ZXJJbmRleD1pLHRoaXMuYnVja2V0SW5kZXg9bix0aGlzLnRpbGVJRD1vO30oci5idWNrZXRJbnN0YW5jZUlkLGEsci5zb3VyY2VMYXllckluZGV4LHIuaW5kZXgsaS50aWxlSUQpLHRoaXMucGxhY2VMYXllckJ1Y2tldChyLGgscCxkLGMsdSxuLG8scyk7fX0sYmUucHJvdG90eXBlLnBsYWNlTGF5ZXJCdWNrZXQ9ZnVuY3Rpb24oZSxpLG4sbyxyLGEscyxsLGMpe2Zvcih2YXIgdT1lLmxheWVyc1swXS5sYXlvdXQsaD10LmV2YWx1YXRlU2l6ZUZvclpvb20oZS50ZXh0U2l6ZURhdGEsdGhpcy50cmFuc2Zvcm0uem9vbSxfZS5wcm9wZXJ0aWVzW1widGV4dC1zaXplXCJdKSxwPSFlLmhhc1RleHREYXRhKCl8fHUuZ2V0KFwidGV4dC1vcHRpb25hbFwiKSxkPSFlLmhhc0ljb25EYXRhKCl8fHUuZ2V0KFwiaWNvbi1vcHRpb25hbFwiKSxmPXRoaXMuY29sbGlzaW9uR3JvdXBzLmdldChlLnNvdXJjZUlEKSxtPTAsXz1lLnN5bWJvbEluc3RhbmNlczttPF8ubGVuZ3RoO20rPTEpe3ZhciBnPV9bbV07aWYoIWxbZy5jcm9zc1RpbGVJRF0pe3ZhciB2PXZvaWQgMCE9PWcuZmVhdHVyZS50ZXh0LHk9dm9pZCAwIT09Zy5mZWF0dXJlLmljb24seD0hMCxiPW51bGwsdz1udWxsLEU9bnVsbCxUPTAsST0wO2cuY29sbGlzaW9uQXJyYXlzfHwoZy5jb2xsaXNpb25BcnJheXM9ZS5kZXNlcmlhbGl6ZUNvbGxpc2lvbkJveGVzKGMsZy50ZXh0Qm94U3RhcnRJbmRleCxnLnRleHRCb3hFbmRJbmRleCxnLmljb25Cb3hTdGFydEluZGV4LGcuaWNvbkJveEVuZEluZGV4KSksZy5jb2xsaXNpb25BcnJheXMudGV4dEZlYXR1cmVJbmRleCYmKFQ9Zy5jb2xsaXNpb25BcnJheXMudGV4dEZlYXR1cmVJbmRleCksZy5jb2xsaXNpb25BcnJheXMudGV4dEJveCYmKHY9KGI9dGhpcy5jb2xsaXNpb25JbmRleC5wbGFjZUNvbGxpc2lvbkJveChnLmNvbGxpc2lvbkFycmF5cy50ZXh0Qm94LHUuZ2V0KFwidGV4dC1hbGxvdy1vdmVybGFwXCIpLGEsaSxmLnByZWRpY2F0ZSkpLmJveC5sZW5ndGg+MCx4PXgmJmIub2Zmc2NyZWVuKTt2YXIgQz1nLmNvbGxpc2lvbkFycmF5cy50ZXh0Q2lyY2xlcztpZihDKXt2YXIgUz1lLnRleHQucGxhY2VkU3ltYm9sQXJyYXkuZ2V0KGcucGxhY2VkVGV4dFN5bWJvbEluZGljZXNbMF0pLHo9dC5ldmFsdWF0ZVNpemVGb3JGZWF0dXJlKGUudGV4dFNpemVEYXRhLGgsUyk7dz10aGlzLmNvbGxpc2lvbkluZGV4LnBsYWNlQ29sbGlzaW9uQ2lyY2xlcyhDLHUuZ2V0KFwidGV4dC1hbGxvdy1vdmVybGFwXCIpLHIsYSxnLmtleSxTLGUubGluZVZlcnRleEFycmF5LGUuZ2x5cGhPZmZzZXRBcnJheSx6LGksbixzLFwibWFwXCI9PT11LmdldChcInRleHQtcGl0Y2gtYWxpZ25tZW50XCIpLGYucHJlZGljYXRlKSx2PXUuZ2V0KFwidGV4dC1hbGxvdy1vdmVybGFwXCIpfHx3LmNpcmNsZXMubGVuZ3RoPjAseD14JiZ3Lm9mZnNjcmVlbjt9Zy5jb2xsaXNpb25BcnJheXMuaWNvbkZlYXR1cmVJbmRleCYmKEk9Zy5jb2xsaXNpb25BcnJheXMuaWNvbkZlYXR1cmVJbmRleCksZy5jb2xsaXNpb25BcnJheXMuaWNvbkJveCYmKHk9KEU9dGhpcy5jb2xsaXNpb25JbmRleC5wbGFjZUNvbGxpc2lvbkJveChnLmNvbGxpc2lvbkFycmF5cy5pY29uQm94LHUuZ2V0KFwiaWNvbi1hbGxvdy1vdmVybGFwXCIpLGEsaSxmLnByZWRpY2F0ZSkpLmJveC5sZW5ndGg+MCx4PXgmJkUub2Zmc2NyZWVuKSxwfHxkP2Q/cHx8KHk9eSYmdik6dj15JiZ2Onk9dj15JiZ2LHYmJmImJnRoaXMuY29sbGlzaW9uSW5kZXguaW5zZXJ0Q29sbGlzaW9uQm94KGIuYm94LHUuZ2V0KFwidGV4dC1pZ25vcmUtcGxhY2VtZW50XCIpLGUuYnVja2V0SW5zdGFuY2VJZCxULGYuSUQpLHkmJkUmJnRoaXMuY29sbGlzaW9uSW5kZXguaW5zZXJ0Q29sbGlzaW9uQm94KEUuYm94LHUuZ2V0KFwiaWNvbi1pZ25vcmUtcGxhY2VtZW50XCIpLGUuYnVja2V0SW5zdGFuY2VJZCxJLGYuSUQpLHYmJncmJnRoaXMuY29sbGlzaW9uSW5kZXguaW5zZXJ0Q29sbGlzaW9uQ2lyY2xlcyh3LmNpcmNsZXMsdS5nZXQoXCJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnRcIiksZS5idWNrZXRJbnN0YW5jZUlkLFQsZi5JRCksdGhpcy5wbGFjZW1lbnRzW2cuY3Jvc3NUaWxlSURdPW5ldyB5ZSh2LHkseHx8ZS5qdXN0UmVsb2FkZWQpLGxbZy5jcm9zc1RpbGVJRF09ITA7fX1lLmp1c3RSZWxvYWRlZD0hMTt9LGJlLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24odCxlKXt0aGlzLmNvbW1pdFRpbWU9ZTt2YXIgaT0hMSxuPXQmJjAhPT10aGlzLmZhZGVEdXJhdGlvbj8odGhpcy5jb21taXRUaW1lLXQuY29tbWl0VGltZSkvdGhpcy5mYWRlRHVyYXRpb246MSxvPXQ/dC5vcGFjaXRpZXM6e307Zm9yKHZhciByIGluIHRoaXMucGxhY2VtZW50cyl7dmFyIGE9dGhpcy5wbGFjZW1lbnRzW3JdLHM9b1tyXTtzPyh0aGlzLm9wYWNpdGllc1tyXT1uZXcgdmUocyxuLGEudGV4dCxhLmljb24pLGk9aXx8YS50ZXh0IT09cy50ZXh0LnBsYWNlZHx8YS5pY29uIT09cy5pY29uLnBsYWNlZCk6KHRoaXMub3BhY2l0aWVzW3JdPW5ldyB2ZShudWxsLG4sYS50ZXh0LGEuaWNvbixhLnNraXBGYWRlKSxpPWl8fGEudGV4dHx8YS5pY29uKTt9Zm9yKHZhciBsIGluIG8pe3ZhciBjPW9bbF07aWYoIXRoaXMub3BhY2l0aWVzW2xdKXt2YXIgdT1uZXcgdmUoYyxuLCExLCExKTt1LmlzSGlkZGVuKCl8fCh0aGlzLm9wYWNpdGllc1tsXT11LGk9aXx8Yy50ZXh0LnBsYWNlZHx8Yy5pY29uLnBsYWNlZCk7fX1pP3RoaXMubGFzdFBsYWNlbWVudENoYW5nZVRpbWU9ZTpcIm51bWJlclwiIT10eXBlb2YgdGhpcy5sYXN0UGxhY2VtZW50Q2hhbmdlVGltZSYmKHRoaXMubGFzdFBsYWNlbWVudENoYW5nZVRpbWU9dD90Lmxhc3RQbGFjZW1lbnRDaGFuZ2VUaW1lOmUpO30sYmUucHJvdG90eXBlLnVwZGF0ZUxheWVyT3BhY2l0aWVzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXt9LG49MCxvPWU7bjxvLmxlbmd0aDtuKz0xKXt2YXIgcj1vW25dLGE9ci5nZXRCdWNrZXQodCk7YSYmci5sYXRlc3RGZWF0dXJlSW5kZXgmJnQuaWQ9PT1hLmxheWVySWRzWzBdJiZ0aGlzLnVwZGF0ZUJ1Y2tldE9wYWNpdGllcyhhLGksci5jb2xsaXNpb25Cb3hBcnJheSk7fX0sYmUucHJvdG90eXBlLnVwZGF0ZUJ1Y2tldE9wYWNpdGllcz1mdW5jdGlvbih0LGUsaSl7dC5oYXNUZXh0RGF0YSgpJiZ0LnRleHQub3BhY2l0eVZlcnRleEFycmF5LmNsZWFyKCksdC5oYXNJY29uRGF0YSgpJiZ0Lmljb24ub3BhY2l0eVZlcnRleEFycmF5LmNsZWFyKCksdC5oYXNDb2xsaXNpb25Cb3hEYXRhKCkmJnQuY29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEFycmF5LmNsZWFyKCksdC5oYXNDb2xsaXNpb25DaXJjbGVEYXRhKCkmJnQuY29sbGlzaW9uQ2lyY2xlLmNvbGxpc2lvblZlcnRleEFycmF5LmNsZWFyKCk7Zm9yKHZhciBuPXQubGF5ZXJzWzBdLmxheW91dCxvPW5ldyB2ZShudWxsLDAsITEsITEsITApLHI9bmV3IHZlKG51bGwsMCxuLmdldChcInRleHQtYWxsb3ctb3ZlcmxhcFwiKSxuLmdldChcImljb24tYWxsb3ctb3ZlcmxhcFwiKSwhMCksYT0wO2E8dC5zeW1ib2xJbnN0YW5jZXMubGVuZ3RoO2ErKyl7dmFyIHM9dC5zeW1ib2xJbnN0YW5jZXNbYV0sbD1lW3MuY3Jvc3NUaWxlSURdLGM9dGhpcy5vcGFjaXRpZXNbcy5jcm9zc1RpbGVJRF07bD9jPW86Y3x8KGM9cix0aGlzLm9wYWNpdGllc1tzLmNyb3NzVGlsZUlEXT1jKSxlW3MuY3Jvc3NUaWxlSURdPSEwO3ZhciB1PXMubnVtR2x5cGhWZXJ0aWNlcz4wfHxzLm51bVZlcnRpY2FsR2x5cGhWZXJ0aWNlcz4wLGg9cy5udW1JY29uVmVydGljZXM+MDtpZih1KXtmb3IodmFyIHA9TWUoYy50ZXh0KSxkPShzLm51bUdseXBoVmVydGljZXMrcy5udW1WZXJ0aWNhbEdseXBoVmVydGljZXMpLzQsZj0wO2Y8ZDtmKyspdC50ZXh0Lm9wYWNpdHlWZXJ0ZXhBcnJheS5lbXBsYWNlQmFjayhwKTtmb3IodmFyIG09MCxfPXMucGxhY2VkVGV4dFN5bWJvbEluZGljZXM7bTxfLmxlbmd0aDttKz0xKXt2YXIgZz1fW21dO3QudGV4dC5wbGFjZWRTeW1ib2xBcnJheS5nZXQoZykuaGlkZGVuPWMudGV4dC5pc0hpZGRlbigpO319aWYoaCl7Zm9yKHZhciB2PU1lKGMuaWNvbikseT0wO3k8cy5udW1JY29uVmVydGljZXMvNDt5KyspdC5pY29uLm9wYWNpdHlWZXJ0ZXhBcnJheS5lbXBsYWNlQmFjayh2KTt0Lmljb24ucGxhY2VkU3ltYm9sQXJyYXkuZ2V0KGEpLmhpZGRlbj1jLmljb24uaXNIaWRkZW4oKTt9cy5jb2xsaXNpb25BcnJheXN8fChzLmNvbGxpc2lvbkFycmF5cz10LmRlc2VyaWFsaXplQ29sbGlzaW9uQm94ZXMoaSxzLnRleHRCb3hTdGFydEluZGV4LHMudGV4dEJveEVuZEluZGV4LHMuaWNvbkJveFN0YXJ0SW5kZXgscy5pY29uQm94RW5kSW5kZXgpKTt2YXIgeD1zLmNvbGxpc2lvbkFycmF5cztpZih4KXt4LnRleHRCb3gmJnQuaGFzQ29sbGlzaW9uQm94RGF0YSgpJiZ3ZSh0LmNvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhBcnJheSxjLnRleHQucGxhY2VkLCExKSx4Lmljb25Cb3gmJnQuaGFzQ29sbGlzaW9uQm94RGF0YSgpJiZ3ZSh0LmNvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhBcnJheSxjLmljb24ucGxhY2VkLCExKTt2YXIgYj14LnRleHRDaXJjbGVzO2lmKGImJnQuaGFzQ29sbGlzaW9uQ2lyY2xlRGF0YSgpKWZvcih2YXIgdz0wO3c8Yi5sZW5ndGg7dys9NSl7dmFyIEU9bHx8MD09PWJbdys0XTt3ZSh0LmNvbGxpc2lvbkNpcmNsZS5jb2xsaXNpb25WZXJ0ZXhBcnJheSxjLnRleHQucGxhY2VkLEUpO319fXQuc29ydEZlYXR1cmVzKHRoaXMudHJhbnNmb3JtLmFuZ2xlKSx0aGlzLnJldGFpbmVkUXVlcnlEYXRhW3QuYnVja2V0SW5zdGFuY2VJZF0mJih0aGlzLnJldGFpbmVkUXVlcnlEYXRhW3QuYnVja2V0SW5zdGFuY2VJZF0uZmVhdHVyZVNvcnRPcmRlcj10LmZlYXR1cmVTb3J0T3JkZXIpLHQuaGFzVGV4dERhdGEoKSYmdC50ZXh0Lm9wYWNpdHlWZXJ0ZXhCdWZmZXImJnQudGV4dC5vcGFjaXR5VmVydGV4QnVmZmVyLnVwZGF0ZURhdGEodC50ZXh0Lm9wYWNpdHlWZXJ0ZXhBcnJheSksdC5oYXNJY29uRGF0YSgpJiZ0Lmljb24ub3BhY2l0eVZlcnRleEJ1ZmZlciYmdC5pY29uLm9wYWNpdHlWZXJ0ZXhCdWZmZXIudXBkYXRlRGF0YSh0Lmljb24ub3BhY2l0eVZlcnRleEFycmF5KSx0Lmhhc0NvbGxpc2lvbkJveERhdGEoKSYmdC5jb2xsaXNpb25Cb3guY29sbGlzaW9uVmVydGV4QnVmZmVyJiZ0LmNvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhCdWZmZXIudXBkYXRlRGF0YSh0LmNvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhBcnJheSksdC5oYXNDb2xsaXNpb25DaXJjbGVEYXRhKCkmJnQuY29sbGlzaW9uQ2lyY2xlLmNvbGxpc2lvblZlcnRleEJ1ZmZlciYmdC5jb2xsaXNpb25DaXJjbGUuY29sbGlzaW9uVmVydGV4QnVmZmVyLnVwZGF0ZURhdGEodC5jb2xsaXNpb25DaXJjbGUuY29sbGlzaW9uVmVydGV4QXJyYXkpO30sYmUucHJvdG90eXBlLnN5bWJvbEZhZGVDaGFuZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10aGlzLmZhZGVEdXJhdGlvbj8xOih0LXRoaXMuY29tbWl0VGltZSkvdGhpcy5mYWRlRHVyYXRpb259LGJlLnByb3RvdHlwZS5oYXNUcmFuc2l0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdGFsZXx8dC10aGlzLmxhc3RQbGFjZW1lbnRDaGFuZ2VUaW1lPHRoaXMuZmFkZUR1cmF0aW9ufSxiZS5wcm90b3R5cGUuc3RpbGxSZWNlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9PXRoaXMuY29tbWl0VGltZSYmdGhpcy5jb21taXRUaW1lK3RoaXMuZmFkZUR1cmF0aW9uPnR9LGJlLnByb3RvdHlwZS5zZXRTdGFsZT1mdW5jdGlvbigpe3RoaXMuc3RhbGU9ITA7fTt2YXIgRWU9TWF0aC5wb3coMiwyNSksVGU9TWF0aC5wb3coMiwyNCksSWU9TWF0aC5wb3coMiwxNyksQ2U9TWF0aC5wb3coMiwxNiksU2U9TWF0aC5wb3coMiw5KSx6ZT1NYXRoLnBvdygyLDgpLEFlPU1hdGgucG93KDIsMSk7ZnVuY3Rpb24gTWUodCl7aWYoMD09PXQub3BhY2l0eSYmIXQucGxhY2VkKXJldHVybiAwO2lmKDE9PT10Lm9wYWNpdHkmJnQucGxhY2VkKXJldHVybiA0Mjk0OTY3Mjk1O3ZhciBlPXQucGxhY2VkPzE6MCxpPU1hdGguZmxvb3IoMTI3KnQub3BhY2l0eSk7cmV0dXJuIGkqRWUrZSpUZStpKkllK2UqQ2UraSpTZStlKnplK2kqQWUrZX12YXIgTGU9ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50VGlsZUluZGV4PTAsdGhpcy5fc2VlbkNyb3NzVGlsZUlEcz17fTt9O0xlLnByb3RvdHlwZS5jb250aW51ZVBsYWNlbWVudD1mdW5jdGlvbih0LGUsaSxuLG8pe2Zvcig7dGhpcy5fY3VycmVudFRpbGVJbmRleDx0Lmxlbmd0aDspe3ZhciByPXRbdGhpcy5fY3VycmVudFRpbGVJbmRleF07aWYoZS5wbGFjZUxheWVyVGlsZShuLHIsaSx0aGlzLl9zZWVuQ3Jvc3NUaWxlSURzKSx0aGlzLl9jdXJyZW50VGlsZUluZGV4KyssbygpKXJldHVybiEwfX07dmFyIERlPWZ1bmN0aW9uKHQsZSxpLG4sbyxyKXt0aGlzLnBsYWNlbWVudD1uZXcgYmUodCxvLHIpLHRoaXMuX2N1cnJlbnRQbGFjZW1lbnRJbmRleD1lLmxlbmd0aC0xLHRoaXMuX2ZvcmNlRnVsbFBsYWNlbWVudD1pLHRoaXMuX3Nob3dDb2xsaXNpb25Cb3hlcz1uLHRoaXMuX2RvbmU9ITE7fTtEZS5wcm90b3R5cGUuaXNEb25lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvbmV9LERlLnByb3RvdHlwZS5jb250aW51ZVBsYWNlbWVudD1mdW5jdGlvbihlLGksbil7Zm9yKHZhciBvPXRoaXMscj10LmRlZmF1bHQkMi5ub3coKSxhPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0JDIubm93KCktcjtyZXR1cm4hby5fZm9yY2VGdWxsUGxhY2VtZW50JiZlPjJ9O3RoaXMuX2N1cnJlbnRQbGFjZW1lbnRJbmRleD49MDspe3ZhciBzPWlbZVtvLl9jdXJyZW50UGxhY2VtZW50SW5kZXhdXSxsPW8ucGxhY2VtZW50LmNvbGxpc2lvbkluZGV4LnRyYW5zZm9ybS56b29tO2lmKFwic3ltYm9sXCI9PT1zLnR5cGUmJighcy5taW56b29tfHxzLm1pbnpvb208PWwpJiYoIXMubWF4em9vbXx8cy5tYXh6b29tPmwpKXtpZihvLl9pblByb2dyZXNzTGF5ZXJ8fChvLl9pblByb2dyZXNzTGF5ZXI9bmV3IExlKSxvLl9pblByb2dyZXNzTGF5ZXIuY29udGludWVQbGFjZW1lbnQobltzLnNvdXJjZV0sby5wbGFjZW1lbnQsby5fc2hvd0NvbGxpc2lvbkJveGVzLHMsYSkpcmV0dXJuO2RlbGV0ZSBvLl9pblByb2dyZXNzTGF5ZXI7fW8uX2N1cnJlbnRQbGFjZW1lbnRJbmRleC0tO310aGlzLl9kb25lPSEwO30sRGUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnBsYWNlbWVudC5jb21taXQodCxlKSx0aGlzLnBsYWNlbWVudH07dmFyIFJlPTUxMi90LmRlZmF1bHQkMTAvMixQZT1mdW5jdGlvbih0LGUsaSl7dGhpcy50aWxlSUQ9dCx0aGlzLmluZGV4ZWRTeW1ib2xJbnN0YW5jZXM9e30sdGhpcy5idWNrZXRJbnN0YW5jZUlkPWk7Zm9yKHZhciBuPTAsbz1lO248by5sZW5ndGg7bis9MSl7dmFyIHI9b1tuXSxhPXIua2V5O3RoaXMuaW5kZXhlZFN5bWJvbEluc3RhbmNlc1thXXx8KHRoaXMuaW5kZXhlZFN5bWJvbEluc3RhbmNlc1thXT1bXSksdGhpcy5pbmRleGVkU3ltYm9sSW5zdGFuY2VzW2FdLnB1c2goe2Nyb3NzVGlsZUlEOnIuY3Jvc3NUaWxlSUQsY29vcmQ6dGhpcy5nZXRTY2FsZWRDb29yZGluYXRlcyhyLHQpfSk7fX07UGUucHJvdG90eXBlLmdldFNjYWxlZENvb3JkaW5hdGVzPWZ1bmN0aW9uKGUsaSl7dmFyIG49aS5jYW5vbmljYWwuei10aGlzLnRpbGVJRC5jYW5vbmljYWwueixvPVJlL01hdGgucG93KDIsbikscj1lLmFuY2hvcjtyZXR1cm57eDpNYXRoLmZsb29yKChpLmNhbm9uaWNhbC54KnQuZGVmYXVsdCQxMCtyLngpKm8pLHk6TWF0aC5mbG9vcigoaS5jYW5vbmljYWwueSp0LmRlZmF1bHQkMTArci55KSpvKX19LFBlLnByb3RvdHlwZS5maW5kTWF0Y2hlcz1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuPXRoaXMudGlsZUlELmNhbm9uaWNhbC56PGUuY2Fub25pY2FsLno/MTpNYXRoLnBvdygyLHRoaXMudGlsZUlELmNhbm9uaWNhbC56LWUuY2Fub25pY2FsLnopLG89MCxyPXQ7bzxyLmxlbmd0aDtvKz0xKXt2YXIgYT1yW29dO2lmKCFhLmNyb3NzVGlsZUlEKXt2YXIgcz10aGlzLmluZGV4ZWRTeW1ib2xJbnN0YW5jZXNbYS5rZXldO2lmKHMpZm9yKHZhciBsPXRoaXMuZ2V0U2NhbGVkQ29vcmRpbmF0ZXMoYSxlKSxjPTAsdT1zO2M8dS5sZW5ndGg7Yys9MSl7dmFyIGg9dVtjXTtpZihNYXRoLmFicyhoLmNvb3JkLngtbC54KTw9biYmTWF0aC5hYnMoaC5jb29yZC55LWwueSk8PW4mJiFpW2guY3Jvc3NUaWxlSURdKXtpW2guY3Jvc3NUaWxlSURdPSEwLGEuY3Jvc3NUaWxlSUQ9aC5jcm9zc1RpbGVJRDticmVha319fX19O3ZhciBrZT1mdW5jdGlvbigpe3RoaXMubWF4Q3Jvc3NUaWxlSUQ9MDt9O2tlLnByb3RvdHlwZS5nZW5lcmF0ZT1mdW5jdGlvbigpe3JldHVybisrdGhpcy5tYXhDcm9zc1RpbGVJRH07dmFyIEJlPWZ1bmN0aW9uKCl7dGhpcy5pbmRleGVzPXt9LHRoaXMudXNlZENyb3NzVGlsZUlEcz17fSx0aGlzLmxuZz0wO307QmUucHJvdG90eXBlLmhhbmRsZVdyYXBKdW1wPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucm91bmQoKHQtdGhpcy5sbmcpLzM2MCk7aWYoMCE9PWUpZm9yKHZhciBpIGluIHRoaXMuaW5kZXhlcyl7dmFyIG49dGhpcy5pbmRleGVzW2ldLG89e307Zm9yKHZhciByIGluIG4pe3ZhciBhPW5bcl07YS50aWxlSUQ9YS50aWxlSUQudW53cmFwVG8oYS50aWxlSUQud3JhcCtlKSxvW2EudGlsZUlELmtleV09YTt9dGhpcy5pbmRleGVzW2ldPW87fXRoaXMubG5nPXQ7fSxCZS5wcm90b3R5cGUuYWRkQnVja2V0PWZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLmluZGV4ZXNbdC5vdmVyc2NhbGVkWl0mJnRoaXMuaW5kZXhlc1t0Lm92ZXJzY2FsZWRaXVt0LmtleV0pe2lmKHRoaXMuaW5kZXhlc1t0Lm92ZXJzY2FsZWRaXVt0LmtleV0uYnVja2V0SW5zdGFuY2VJZD09PWUuYnVja2V0SW5zdGFuY2VJZClyZXR1cm4hMTt0aGlzLnJlbW92ZUJ1Y2tldENyb3NzVGlsZUlEcyh0Lm92ZXJzY2FsZWRaLHRoaXMuaW5kZXhlc1t0Lm92ZXJzY2FsZWRaXVt0LmtleV0pO31mb3IodmFyIG49MCxvPWUuc3ltYm9sSW5zdGFuY2VzO248by5sZW5ndGg7bis9MSl7b1tuXS5jcm9zc1RpbGVJRD0wO310aGlzLnVzZWRDcm9zc1RpbGVJRHNbdC5vdmVyc2NhbGVkWl18fCh0aGlzLnVzZWRDcm9zc1RpbGVJRHNbdC5vdmVyc2NhbGVkWl09e30pO3ZhciByPXRoaXMudXNlZENyb3NzVGlsZUlEc1t0Lm92ZXJzY2FsZWRaXTtmb3IodmFyIGEgaW4gdGhpcy5pbmRleGVzKXt2YXIgcz10aGlzLmluZGV4ZXNbYV07aWYoTnVtYmVyKGEpPnQub3ZlcnNjYWxlZFopZm9yKHZhciBsIGluIHMpe3ZhciBjPXNbbF07Yy50aWxlSUQuaXNDaGlsZE9mKHQpJiZjLmZpbmRNYXRjaGVzKGUuc3ltYm9sSW5zdGFuY2VzLHQscik7fWVsc2V7dmFyIHU9c1t0LnNjYWxlZFRvKE51bWJlcihhKSkua2V5XTt1JiZ1LmZpbmRNYXRjaGVzKGUuc3ltYm9sSW5zdGFuY2VzLHQscik7fX1mb3IodmFyIGg9MCxwPWUuc3ltYm9sSW5zdGFuY2VzO2g8cC5sZW5ndGg7aCs9MSl7dmFyIGQ9cFtoXTtkLmNyb3NzVGlsZUlEfHwoZC5jcm9zc1RpbGVJRD1pLmdlbmVyYXRlKCkscltkLmNyb3NzVGlsZUlEXT0hMCk7fXJldHVybiB2b2lkIDA9PT10aGlzLmluZGV4ZXNbdC5vdmVyc2NhbGVkWl0mJih0aGlzLmluZGV4ZXNbdC5vdmVyc2NhbGVkWl09e30pLHRoaXMuaW5kZXhlc1t0Lm92ZXJzY2FsZWRaXVt0LmtleV09bmV3IFBlKHQsZS5zeW1ib2xJbnN0YW5jZXMsZS5idWNrZXRJbnN0YW5jZUlkKSwhMH0sQmUucHJvdG90eXBlLnJlbW92ZUJ1Y2tldENyb3NzVGlsZUlEcz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlLmluZGV4ZWRTeW1ib2xJbnN0YW5jZXMpZm9yKHZhciBuPTAsbz1lLmluZGV4ZWRTeW1ib2xJbnN0YW5jZXNbaV07bjxvLmxlbmd0aDtuKz0xKXt2YXIgcj1vW25dO2RlbGV0ZSB0aGlzLnVzZWRDcm9zc1RpbGVJRHNbdF1bci5jcm9zc1RpbGVJRF07fX0sQmUucHJvdG90eXBlLnJlbW92ZVN0YWxlQnVja2V0cz1mdW5jdGlvbih0KXt2YXIgZT0hMTtmb3IodmFyIGkgaW4gdGhpcy5pbmRleGVzKXt2YXIgbj10aGlzLmluZGV4ZXNbaV07Zm9yKHZhciBvIGluIG4pdFtuW29dLmJ1Y2tldEluc3RhbmNlSWRdfHwodGhpcy5yZW1vdmVCdWNrZXRDcm9zc1RpbGVJRHMoaSxuW29dKSxkZWxldGUgbltvXSxlPSEwKTt9cmV0dXJuIGV9O3ZhciBPZT1mdW5jdGlvbigpe3RoaXMubGF5ZXJJbmRleGVzPXt9LHRoaXMuY3Jvc3NUaWxlSURzPW5ldyBrZSx0aGlzLm1heEJ1Y2tldEluc3RhbmNlSWQ9MCx0aGlzLmJ1Y2tldHNJbkN1cnJlbnRQbGFjZW1lbnQ9e307fTtPZS5wcm90b3R5cGUuYWRkTGF5ZXI9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMubGF5ZXJJbmRleGVzW3QuaWRdO3ZvaWQgMD09PW4mJihuPXRoaXMubGF5ZXJJbmRleGVzW3QuaWRdPW5ldyBCZSk7dmFyIG89ITEscj17fTtuLmhhbmRsZVdyYXBKdW1wKGkpO2Zvcih2YXIgYT0wLHM9ZTthPHMubGVuZ3RoO2ErPTEpe3ZhciBsPXNbYV0sYz1sLmdldEJ1Y2tldCh0KTtjJiZ0LmlkPT09Yy5sYXllcklkc1swXSYmKGMuYnVja2V0SW5zdGFuY2VJZHx8KGMuYnVja2V0SW5zdGFuY2VJZD0rK3RoaXMubWF4QnVja2V0SW5zdGFuY2VJZCksbi5hZGRCdWNrZXQobC50aWxlSUQsYyx0aGlzLmNyb3NzVGlsZUlEcykmJihvPSEwKSxyW2MuYnVja2V0SW5zdGFuY2VJZF09ITApO31yZXR1cm4gbi5yZW1vdmVTdGFsZUJ1Y2tldHMocikmJihvPSEwKSxvfSxPZS5wcm90b3R5cGUucHJ1bmVVbnVzZWRMYXllcnM9ZnVuY3Rpb24odCl7dmFyIGU9e307Zm9yKHZhciBpIGluIHQuZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdPSEwO30pLHRoaXMubGF5ZXJJbmRleGVzKWVbaV18fGRlbGV0ZSB0aGlzLmxheWVySW5kZXhlc1tpXTt9O3ZhciBGZT1mdW5jdGlvbihlLGkpe3JldHVybiB0LmVtaXRWYWxpZGF0aW9uRXJyb3JzKGUsaSYmaS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuXCJzb3VyY2UuY2FudmFzXCIhPT10LmlkZW50aWZpZXJ9KSl9LE5lPXQucGljayhWdCxbXCJhZGRMYXllclwiLFwicmVtb3ZlTGF5ZXJcIixcInNldFBhaW50UHJvcGVydHlcIixcInNldExheW91dFByb3BlcnR5XCIsXCJzZXRGaWx0ZXJcIixcImFkZFNvdXJjZVwiLFwicmVtb3ZlU291cmNlXCIsXCJzZXRMYXllclpvb21SYW5nZVwiLFwic2V0TGlnaHRcIixcInNldFRyYW5zaXRpb25cIixcInNldEdlb0pTT05Tb3VyY2VEYXRhXCJdKSwkZT10LnBpY2soVnQsW1wic2V0Q2VudGVyXCIsXCJzZXRab29tXCIsXCJzZXRCZWFyaW5nXCIsXCJzZXRQaXRjaFwiXSksVWU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaShuLG8pe3ZhciByPXRoaXM7dm9pZCAwPT09byYmKG89e30pLGUuY2FsbCh0aGlzKSx0aGlzLm1hcD1uLHRoaXMuZGlzcGF0Y2hlcj1uZXcgUCgoTnR8fChOdD1uZXcgJHQpLE50KSx0aGlzKSx0aGlzLmltYWdlTWFuYWdlcj1uZXcgRSx0aGlzLmdseXBoTWFuYWdlcj1uZXcgQShuLl90cmFuc2Zvcm1SZXF1ZXN0LG8ubG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5KSx0aGlzLmxpbmVBdGxhcz1uZXcgUigyNTYsNTEyKSx0aGlzLmNyb3NzVGlsZVN5bWJvbEluZGV4PW5ldyBPZSx0aGlzLl9sYXllcnM9e30sdGhpcy5fb3JkZXI9W10sdGhpcy5zb3VyY2VDYWNoZXM9e30sdGhpcy56b29tSGlzdG9yeT1uZXcgdC5kZWZhdWx0JDIxLHRoaXMuX2xvYWRlZD0hMSx0aGlzLl9yZXNldFVwZGF0ZXMoKTt2YXIgYT10aGlzO3RoaXMuX3J0bFRleHRQbHVnaW5DYWxsYmFjaz1pLnJlZ2lzdGVyRm9yUGx1Z2luQXZhaWxhYmlsaXR5KGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiBhLmRpc3BhdGNoZXIuYnJvYWRjYXN0KFwibG9hZFJUTFRleHRQbHVnaW5cIix0LnBsdWdpblVSTCx0LmNvbXBsZXRpb25DYWxsYmFjayksYS5zb3VyY2VDYWNoZXMpYS5zb3VyY2VDYWNoZXNbZV0ucmVsb2FkKCk7fSksdGhpcy5vbihcImRhdGFcIixmdW5jdGlvbih0KXtpZihcInNvdXJjZVwiPT09dC5kYXRhVHlwZSYmXCJtZXRhZGF0YVwiPT09dC5zb3VyY2VEYXRhVHlwZSl7dmFyIGU9ci5zb3VyY2VDYWNoZXNbdC5zb3VyY2VJZF07aWYoZSl7dmFyIGk9ZS5nZXRTb3VyY2UoKTtpZihpJiZpLnZlY3RvckxheWVySWRzKWZvcih2YXIgbiBpbiByLl9sYXllcnMpe3ZhciBvPXIuX2xheWVyc1tuXTtvLnNvdXJjZT09PWkuaWQmJnIuX3ZhbGlkYXRlTGF5ZXIobyk7fX19fSk7fXJldHVybiBlJiYoaS5fX3Byb3RvX189ZSksaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY29uc3RydWN0b3I9aSxpLnByb3RvdHlwZS5sb2FkVVJMPWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpczt2b2lkIDA9PT1pJiYoaT17fSksdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YWxvYWRpbmdcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpO3ZhciBvPVwiYm9vbGVhblwiPT10eXBlb2YgaS52YWxpZGF0ZT9pLnZhbGlkYXRlOiFmKGUpO2U9ZnVuY3Rpb24odCxlKXtpZighZih0KSlyZXR1cm4gdDt2YXIgaT1iKHQpO3JldHVybiBpLnBhdGg9XCIvc3R5bGVzL3YxXCIraS5wYXRoLGQoaSxlKX0oZSxpLmFjY2Vzc1Rva2VuKTt2YXIgcj10aGlzLm1hcC5fdHJhbnNmb3JtUmVxdWVzdChlLHQuUmVzb3VyY2VUeXBlLlN0eWxlKTt0LmdldEpTT04ocixmdW5jdGlvbihlLGkpe2U/bi5maXJlKG5ldyB0LkVycm9yRXZlbnQoZSkpOmkmJm4uX2xvYWQoaSxvKTt9KTt9LGkucHJvdG90eXBlLmxvYWRKU09OPWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpczt2b2lkIDA9PT1pJiYoaT17fSksdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YWxvYWRpbmdcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpLHQuZGVmYXVsdCQyLmZyYW1lKGZ1bmN0aW9uKCl7bi5fbG9hZChlLCExIT09aS52YWxpZGF0ZSk7fSk7fSxpLnByb3RvdHlwZS5fbG9hZD1mdW5jdGlvbihlLGkpe3ZhciBuPXRoaXM7aWYoIWl8fCFGZSh0aGlzLHQudmFsaWRhdGVTdHlsZShlKSkpe2Zvcih2YXIgbyBpbiB0aGlzLl9sb2FkZWQ9ITAsdGhpcy5zdHlsZXNoZWV0PWUsZS5zb3VyY2VzKW4uYWRkU291cmNlKG8sZS5zb3VyY2VzW29dLHt2YWxpZGF0ZTohMX0pO2Uuc3ByaXRlP2Z1bmN0aW9uKGUsaSxuKXt2YXIgbyxyLGEscz10LmRlZmF1bHQkMi5kZXZpY2VQaXhlbFJhdGlvPjE/XCJAMnhcIjpcIlwiO2Z1bmN0aW9uIGwoKXtpZihhKW4oYSk7ZWxzZSBpZihvJiZyKXt2YXIgZT10LmRlZmF1bHQkMi5nZXRJbWFnZURhdGEociksaT17fTtmb3IodmFyIHMgaW4gbyl7dmFyIGw9b1tzXSxjPWwud2lkdGgsdT1sLmhlaWdodCxoPWwueCxwPWwueSxkPWwuc2RmLGY9bC5waXhlbFJhdGlvLG09bmV3IHQuUkdCQUltYWdlKHt3aWR0aDpjLGhlaWdodDp1fSk7dC5SR0JBSW1hZ2UuY29weShlLG0se3g6aCx5OnB9LHt4OjAseTowfSx7d2lkdGg6YyxoZWlnaHQ6dX0pLGlbc109e2RhdGE6bSxwaXhlbFJhdGlvOmYsc2RmOmR9O31uKG51bGwsaSk7fX10LmdldEpTT04oaShnKGUscyxcIi5qc29uXCIpLHQuUmVzb3VyY2VUeXBlLlNwcml0ZUpTT04pLGZ1bmN0aW9uKHQsZSl7YXx8KGE9dCxvPWUsbCgpKTt9KSx0LmdldEltYWdlKGkoZyhlLHMsXCIucG5nXCIpLHQuUmVzb3VyY2VUeXBlLlNwcml0ZUltYWdlKSxmdW5jdGlvbih0LGUpe2F8fChhPXQscj1lLGwoKSk7fSk7fShlLnNwcml0ZSx0aGlzLm1hcC5fdHJhbnNmb3JtUmVxdWVzdCxmdW5jdGlvbihlLGkpe2lmKGUpbi5maXJlKG5ldyB0LkVycm9yRXZlbnQoZSkpO2Vsc2UgaWYoaSlmb3IodmFyIG8gaW4gaSluLmltYWdlTWFuYWdlci5hZGRJbWFnZShvLGlbb10pO24uaW1hZ2VNYW5hZ2VyLnNldExvYWRlZCghMCksbi5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInN0eWxlXCJ9KSk7fSk6dGhpcy5pbWFnZU1hbmFnZXIuc2V0TG9hZGVkKCEwKSx0aGlzLmdseXBoTWFuYWdlci5zZXRVUkwoZS5nbHlwaHMpO3ZhciByPVp0KHRoaXMuc3R5bGVzaGVldC5sYXllcnMpO3RoaXMuX29yZGVyPXIubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlkfSksdGhpcy5fbGF5ZXJzPXt9O2Zvcih2YXIgYT0wLHM9cjthPHMubGVuZ3RoO2ErPTEpe3ZhciBsPXNbYV07KGw9dC5kZWZhdWx0JDIwKGwpKS5zZXRFdmVudGVkUGFyZW50KG4se2xheWVyOntpZDpsLmlkfX0pLG4uX2xheWVyc1tsLmlkXT1sO310aGlzLmRpc3BhdGNoZXIuYnJvYWRjYXN0KFwic2V0TGF5ZXJzXCIsdGhpcy5fc2VyaWFsaXplTGF5ZXJzKHRoaXMuX29yZGVyKSksdGhpcy5saWdodD1uZXcgRCh0aGlzLnN0eWxlc2hlZXQubGlnaHQpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcImRhdGFcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcInN0eWxlLmxvYWRcIikpO319LGkucHJvdG90eXBlLl92YWxpZGF0ZUxheWVyPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuc291cmNlQ2FjaGVzW2Uuc291cmNlXTtpZihpKXt2YXIgbj1lLnNvdXJjZUxheWVyO2lmKG4pe3ZhciBvPWkuZ2V0U291cmNlKCk7KFwiZ2VvanNvblwiPT09by50eXBlfHxvLnZlY3RvckxheWVySWRzJiYtMT09PW8udmVjdG9yTGF5ZXJJZHMuaW5kZXhPZihuKSkmJnRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyBFcnJvcignU291cmNlIGxheWVyIFwiJytuKydcIiBkb2VzIG5vdCBleGlzdCBvbiBzb3VyY2UgXCInK28uaWQrJ1wiIGFzIHNwZWNpZmllZCBieSBzdHlsZSBsYXllciBcIicrZS5pZCsnXCInKSkpO319fSxpLnByb3RvdHlwZS5sb2FkZWQ9ZnVuY3Rpb24oKXtpZighdGhpcy5fbG9hZGVkKXJldHVybiExO2lmKE9iamVjdC5rZXlzKHRoaXMuX3VwZGF0ZWRTb3VyY2VzKS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciB0IGluIHRoaXMuc291cmNlQ2FjaGVzKWlmKCF0aGlzLnNvdXJjZUNhY2hlc1t0XS5sb2FkZWQoKSlyZXR1cm4hMTtyZXR1cm4hIXRoaXMuaW1hZ2VNYW5hZ2VyLmlzTG9hZGVkKCl9LGkucHJvdG90eXBlLl9zZXJpYWxpemVMYXllcnM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2xheWVyc1t0XS5zZXJpYWxpemUoKX0pfSxpLnByb3RvdHlwZS5oYXNUcmFuc2l0aW9ucz1mdW5jdGlvbigpe2lmKHRoaXMubGlnaHQmJnRoaXMubGlnaHQuaGFzVHJhbnNpdGlvbigpKXJldHVybiEwO2Zvcih2YXIgdCBpbiB0aGlzLnNvdXJjZUNhY2hlcylpZih0aGlzLnNvdXJjZUNhY2hlc1t0XS5oYXNUcmFuc2l0aW9uKCkpcmV0dXJuITA7Zm9yKHZhciBlIGluIHRoaXMuX2xheWVycylpZih0aGlzLl9sYXllcnNbZV0uaGFzVHJhbnNpdGlvbigpKXJldHVybiEwO3JldHVybiExfSxpLnByb3RvdHlwZS5fY2hlY2tMb2FkZWQ9ZnVuY3Rpb24oKXtpZighdGhpcy5fbG9hZGVkKXRocm93IG5ldyBFcnJvcihcIlN0eWxlIGlzIG5vdCBkb25lIGxvYWRpbmdcIil9LGkucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlKXtpZih0aGlzLl9sb2FkZWQpe2lmKHRoaXMuX2NoYW5nZWQpe3ZhciBpPU9iamVjdC5rZXlzKHRoaXMuX3VwZGF0ZWRMYXllcnMpLG49T2JqZWN0LmtleXModGhpcy5fcmVtb3ZlZExheWVycyk7Zm9yKHZhciBvIGluKGkubGVuZ3RofHxuLmxlbmd0aCkmJnRoaXMuX3VwZGF0ZVdvcmtlckxheWVycyhpLG4pLHRoaXMuX3VwZGF0ZWRTb3VyY2VzKXt2YXIgcj10aGlzLl91cGRhdGVkU291cmNlc1tvXTtcInJlbG9hZFwiPT09cj90aGlzLl9yZWxvYWRTb3VyY2Uobyk6XCJjbGVhclwiPT09ciYmdGhpcy5fY2xlYXJTb3VyY2Uobyk7fWZvcih2YXIgYSBpbiB0aGlzLl91cGRhdGVkUGFpbnRQcm9wcyl0aGlzLl9sYXllcnNbYV0udXBkYXRlVHJhbnNpdGlvbnMoZSk7dGhpcy5saWdodC51cGRhdGVUcmFuc2l0aW9ucyhlKSx0aGlzLl9yZXNldFVwZGF0ZXMoKSx0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJkYXRhXCIse2RhdGFUeXBlOlwic3R5bGVcIn0pKTt9Zm9yKHZhciBzIGluIHRoaXMuc291cmNlQ2FjaGVzKXRoaXMuc291cmNlQ2FjaGVzW3NdLnVzZWQ9ITE7Zm9yKHZhciBsPTAsYz10aGlzLl9vcmRlcjtsPGMubGVuZ3RoO2wrPTEpe3ZhciB1PWNbbF0saD10aGlzLl9sYXllcnNbdV07aC5yZWNhbGN1bGF0ZShlKSwhaC5pc0hpZGRlbihlLnpvb20pJiZoLnNvdXJjZSYmKHRoaXMuc291cmNlQ2FjaGVzW2guc291cmNlXS51c2VkPSEwKTt9dGhpcy5saWdodC5yZWNhbGN1bGF0ZShlKSx0aGlzLno9ZS56b29tO319LGkucHJvdG90eXBlLl91cGRhdGVXb3JrZXJMYXllcnM9ZnVuY3Rpb24odCxlKXt0aGlzLmRpc3BhdGNoZXIuYnJvYWRjYXN0KFwidXBkYXRlTGF5ZXJzXCIse2xheWVyczp0aGlzLl9zZXJpYWxpemVMYXllcnModCkscmVtb3ZlZElkczplfSk7fSxpLnByb3RvdHlwZS5fcmVzZXRVcGRhdGVzPWZ1bmN0aW9uKCl7dGhpcy5fY2hhbmdlZD0hMSx0aGlzLl91cGRhdGVkTGF5ZXJzPXt9LHRoaXMuX3JlbW92ZWRMYXllcnM9e30sdGhpcy5fdXBkYXRlZFNvdXJjZXM9e30sdGhpcy5fdXBkYXRlZFBhaW50UHJvcHM9e307fSxpLnByb3RvdHlwZS5zZXRTdGF0ZT1mdW5jdGlvbihlKXt2YXIgaT10aGlzO2lmKHRoaXMuX2NoZWNrTG9hZGVkKCksRmUodGhpcyx0LnZhbGlkYXRlU3R5bGUoZSkpKXJldHVybiExOyhlPXQuY2xvbmUoZSkpLmxheWVycz1adChlLmxheWVycyk7dmFyIG49WXQodGhpcy5zZXJpYWxpemUoKSxlKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuISh0LmNvbW1hbmQgaW4gJGUpfSk7aWYoMD09PW4ubGVuZ3RoKXJldHVybiExO3ZhciBvPW4uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiEodC5jb21tYW5kIGluIE5lKX0pO2lmKG8ubGVuZ3RoPjApdGhyb3cgbmV3IEVycm9yKFwiVW5pbXBsZW1lbnRlZDogXCIrby5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29tbWFuZH0pLmpvaW4oXCIsIFwiKStcIi5cIik7cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbih0KXtcInNldFRyYW5zaXRpb25cIiE9PXQuY29tbWFuZCYmaVt0LmNvbW1hbmRdLmFwcGx5KGksdC5hcmdzKTt9KSx0aGlzLnN0eWxlc2hlZXQ9ZSwhMH0saS5wcm90b3R5cGUuYWRkSW1hZ2U9ZnVuY3Rpb24oZSxpKXtpZih0aGlzLmdldEltYWdlKGUpKXJldHVybiB0aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJBbiBpbWFnZSB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0cy5cIikpKTt0aGlzLmltYWdlTWFuYWdlci5hZGRJbWFnZShlLGkpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcImRhdGFcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpO30saS5wcm90b3R5cGUuZ2V0SW1hZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW1hZ2VNYW5hZ2VyLmdldEltYWdlKHQpfSxpLnByb3RvdHlwZS5yZW1vdmVJbWFnZT1mdW5jdGlvbihlKXtpZighdGhpcy5nZXRJbWFnZShlKSlyZXR1cm4gdGhpcy5maXJlKG5ldyB0LkVycm9yRXZlbnQobmV3IEVycm9yKFwiTm8gaW1hZ2Ugd2l0aCB0aGlzIG5hbWUgZXhpc3RzLlwiKSkpO3RoaXMuaW1hZ2VNYW5hZ2VyLnJlbW92ZUltYWdlKGUpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcImRhdGFcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpO30saS5wcm90b3R5cGUubGlzdEltYWdlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja0xvYWRlZCgpLHRoaXMuaW1hZ2VNYW5hZ2VyLmxpc3RJbWFnZXMoKX0saS5wcm90b3R5cGUuYWRkU291cmNlPWZ1bmN0aW9uKGUsaSxuKXt2YXIgbz10aGlzO2lmKHRoaXMuX2NoZWNrTG9hZGVkKCksdm9pZCAwIT09dGhpcy5zb3VyY2VDYWNoZXNbZV0pdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgYWxyZWFkeSBhIHNvdXJjZSB3aXRoIHRoaXMgSURcIik7aWYoIWkudHlwZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdHlwZSBwcm9wZXJ0eSBtdXN0IGJlIGRlZmluZWQsIGJ1dCB0aGUgb25seSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXMgd2VyZSBnaXZlbjogXCIrT2JqZWN0LmtleXMoaSkuam9pbihcIiwgXCIpK1wiLlwiKTtpZighKFtcInZlY3RvclwiLFwicmFzdGVyXCIsXCJnZW9qc29uXCIsXCJ2aWRlb1wiLFwiaW1hZ2VcIl0uaW5kZXhPZihpLnR5cGUpPj0wKXx8IXRoaXMuX3ZhbGlkYXRlKHQudmFsaWRhdGVTdHlsZS5zb3VyY2UsXCJzb3VyY2VzLlwiK2UsaSxudWxsLG4pKXt0aGlzLm1hcCYmdGhpcy5tYXAuX2NvbGxlY3RSZXNvdXJjZVRpbWluZyYmKGkuY29sbGVjdFJlc291cmNlVGltaW5nPSEwKTt2YXIgcj10aGlzLnNvdXJjZUNhY2hlc1tlXT1uZXcga3QoZSxpLHRoaXMuZGlzcGF0Y2hlcik7ci5zdHlsZT10aGlzLHIuc2V0RXZlbnRlZFBhcmVudCh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJue2lzU291cmNlTG9hZGVkOm8ubG9hZGVkKCksc291cmNlOnIuc2VyaWFsaXplKCksc291cmNlSWQ6ZX19KSxyLm9uQWRkKHRoaXMubWFwKSx0aGlzLl9jaGFuZ2VkPSEwO319LGkucHJvdG90eXBlLnJlbW92ZVNvdXJjZT1mdW5jdGlvbihlKXtpZih0aGlzLl9jaGVja0xvYWRlZCgpLHZvaWQgMD09PXRoaXMuc291cmNlQ2FjaGVzW2VdKXRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHNvdXJjZSB3aXRoIHRoaXMgSURcIik7Zm9yKHZhciBpIGluIHRoaXMuX2xheWVycylpZih0aGlzLl9sYXllcnNbaV0uc291cmNlPT09ZSlyZXR1cm4gdGhpcy5maXJlKG5ldyB0LkVycm9yRXZlbnQobmV3IEVycm9yKCdTb3VyY2UgXCInK2UrJ1wiIGNhbm5vdCBiZSByZW1vdmVkIHdoaWxlIGxheWVyIFwiJytpKydcIiBpcyB1c2luZyBpdC4nKSkpO3ZhciBuPXRoaXMuc291cmNlQ2FjaGVzW2VdO2RlbGV0ZSB0aGlzLnNvdXJjZUNhY2hlc1tlXSxkZWxldGUgdGhpcy5fdXBkYXRlZFNvdXJjZXNbZV0sbi5maXJlKG5ldyB0LkV2ZW50KFwiZGF0YVwiLHtzb3VyY2VEYXRhVHlwZTpcIm1ldGFkYXRhXCIsZGF0YVR5cGU6XCJzb3VyY2VcIixzb3VyY2VJZDplfSkpLG4uc2V0RXZlbnRlZFBhcmVudChudWxsKSxuLmNsZWFyVGlsZXMoKSxuLm9uUmVtb3ZlJiZuLm9uUmVtb3ZlKHRoaXMubWFwKSx0aGlzLl9jaGFuZ2VkPSEwO30saS5wcm90b3R5cGUuc2V0R2VvSlNPTlNvdXJjZURhdGE9ZnVuY3Rpb24odCxlKXt0aGlzLl9jaGVja0xvYWRlZCgpLHRoaXMuc291cmNlQ2FjaGVzW3RdLmdldFNvdXJjZSgpLnNldERhdGEoZSksdGhpcy5fY2hhbmdlZD0hMDt9LGkucHJvdG90eXBlLmdldFNvdXJjZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zb3VyY2VDYWNoZXNbdF0mJnRoaXMuc291cmNlQ2FjaGVzW3RdLmdldFNvdXJjZSgpfSxpLnByb3RvdHlwZS5hZGRMYXllcj1mdW5jdGlvbihlLGksbil7dGhpcy5fY2hlY2tMb2FkZWQoKTt2YXIgbz1lLmlkO2lmKHRoaXMuZ2V0TGF5ZXIobykpdGhpcy5maXJlKG5ldyB0LkVycm9yRXZlbnQobmV3IEVycm9yKCdMYXllciB3aXRoIGlkIFwiJytvKydcIiBhbHJlYWR5IGV4aXN0cyBvbiB0aGlzIG1hcCcpKSk7ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgZS5zb3VyY2UmJih0aGlzLmFkZFNvdXJjZShvLGUuc291cmNlKSxlPXQuY2xvbmUoZSksZT10LmV4dGVuZChlLHtzb3VyY2U6b30pKSwhdGhpcy5fdmFsaWRhdGUodC52YWxpZGF0ZVN0eWxlLmxheWVyLFwibGF5ZXJzLlwiK28sZSx7YXJyYXlJbmRleDotMX0sbikpe3ZhciByPXQuZGVmYXVsdCQyMChlKTt0aGlzLl92YWxpZGF0ZUxheWVyKHIpLHIuc2V0RXZlbnRlZFBhcmVudCh0aGlzLHtsYXllcjp7aWQ6b319KTt2YXIgYT1pP3RoaXMuX29yZGVyLmluZGV4T2YoaSk6dGhpcy5fb3JkZXIubGVuZ3RoO2lmKGkmJi0xPT09YSl0aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoJ0xheWVyIHdpdGggaWQgXCInK2krJ1wiIGRvZXMgbm90IGV4aXN0IG9uIHRoaXMgbWFwLicpKSk7ZWxzZXtpZih0aGlzLl9vcmRlci5zcGxpY2UoYSwwLG8pLHRoaXMuX2xheWVyT3JkZXJDaGFuZ2VkPSEwLHRoaXMuX2xheWVyc1tvXT1yLHRoaXMuX3JlbW92ZWRMYXllcnNbb10mJnIuc291cmNlKXt2YXIgcz10aGlzLl9yZW1vdmVkTGF5ZXJzW29dO2RlbGV0ZSB0aGlzLl9yZW1vdmVkTGF5ZXJzW29dLHMudHlwZSE9PXIudHlwZT90aGlzLl91cGRhdGVkU291cmNlc1tyLnNvdXJjZV09XCJjbGVhclwiOih0aGlzLl91cGRhdGVkU291cmNlc1tyLnNvdXJjZV09XCJyZWxvYWRcIix0aGlzLnNvdXJjZUNhY2hlc1tyLnNvdXJjZV0ucGF1c2UoKSk7fXRoaXMuX3VwZGF0ZUxheWVyKHIpO319fSxpLnByb3RvdHlwZS5tb3ZlTGF5ZXI9ZnVuY3Rpb24oZSxpKXtpZih0aGlzLl9jaGVja0xvYWRlZCgpLHRoaXMuX2NoYW5nZWQ9ITAsdGhpcy5fbGF5ZXJzW2VdKXtpZihlIT09aSl7dmFyIG49dGhpcy5fb3JkZXIuaW5kZXhPZihlKTt0aGlzLl9vcmRlci5zcGxpY2UobiwxKTt2YXIgbz1pP3RoaXMuX29yZGVyLmluZGV4T2YoaSk6dGhpcy5fb3JkZXIubGVuZ3RoO2kmJi0xPT09bz90aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoJ0xheWVyIHdpdGggaWQgXCInK2krJ1wiIGRvZXMgbm90IGV4aXN0IG9uIHRoaXMgbWFwLicpKSk6KHRoaXMuX29yZGVyLnNwbGljZShvLDAsZSksdGhpcy5fbGF5ZXJPcmRlckNoYW5nZWQ9ITApO319ZWxzZSB0aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJUaGUgbGF5ZXIgJ1wiK2UrXCInIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZSBhbmQgY2Fubm90IGJlIG1vdmVkLlwiKSkpO30saS5wcm90b3R5cGUucmVtb3ZlTGF5ZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY2hlY2tMb2FkZWQoKTt2YXIgaT10aGlzLl9sYXllcnNbZV07aWYoaSl7aS5zZXRFdmVudGVkUGFyZW50KG51bGwpO3ZhciBuPXRoaXMuX29yZGVyLmluZGV4T2YoZSk7dGhpcy5fb3JkZXIuc3BsaWNlKG4sMSksdGhpcy5fbGF5ZXJPcmRlckNoYW5nZWQ9ITAsdGhpcy5fY2hhbmdlZD0hMCx0aGlzLl9yZW1vdmVkTGF5ZXJzW2VdPWksZGVsZXRlIHRoaXMuX2xheWVyc1tlXSxkZWxldGUgdGhpcy5fdXBkYXRlZExheWVyc1tlXSxkZWxldGUgdGhpcy5fdXBkYXRlZFBhaW50UHJvcHNbZV07fWVsc2UgdGhpcy5maXJlKG5ldyB0LkVycm9yRXZlbnQobmV3IEVycm9yKFwiVGhlIGxheWVyICdcIitlK1wiJyBkb2VzIG5vdCBleGlzdCBpbiB0aGUgbWFwJ3Mgc3R5bGUgYW5kIGNhbm5vdCBiZSByZW1vdmVkLlwiKSkpO30saS5wcm90b3R5cGUuZ2V0TGF5ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xheWVyc1t0XX0saS5wcm90b3R5cGUuc2V0TGF5ZXJab29tUmFuZ2U9ZnVuY3Rpb24oZSxpLG4pe3RoaXMuX2NoZWNrTG9hZGVkKCk7dmFyIG89dGhpcy5nZXRMYXllcihlKTtvP28ubWluem9vbT09PWkmJm8ubWF4em9vbT09PW58fChudWxsIT1pJiYoby5taW56b29tPWkpLG51bGwhPW4mJihvLm1heHpvb209biksdGhpcy5fdXBkYXRlTGF5ZXIobykpOnRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyBFcnJvcihcIlRoZSBsYXllciAnXCIrZStcIicgZG9lcyBub3QgZXhpc3QgaW4gdGhlIG1hcCdzIHN0eWxlIGFuZCBjYW5ub3QgaGF2ZSB6b29tIGV4dGVudC5cIikpKTt9LGkucHJvdG90eXBlLnNldEZpbHRlcj1mdW5jdGlvbihlLGkpe3RoaXMuX2NoZWNrTG9hZGVkKCk7dmFyIG49dGhpcy5nZXRMYXllcihlKTtpZihuKXtpZighdC5kZWZhdWx0JDEzKG4uZmlsdGVyLGkpKXJldHVybiBudWxsPT1pPyhuLmZpbHRlcj12b2lkIDAsdm9pZCB0aGlzLl91cGRhdGVMYXllcihuKSk6dm9pZCh0aGlzLl92YWxpZGF0ZSh0LnZhbGlkYXRlU3R5bGUuZmlsdGVyLFwibGF5ZXJzLlwiK24uaWQrXCIuZmlsdGVyXCIsaSl8fChuLmZpbHRlcj10LmNsb25lKGkpLHRoaXMuX3VwZGF0ZUxheWVyKG4pKSl9ZWxzZSB0aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJUaGUgbGF5ZXIgJ1wiK2UrXCInIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZSBhbmQgY2Fubm90IGJlIGZpbHRlcmVkLlwiKSkpO30saS5wcm90b3R5cGUuZ2V0RmlsdGVyPWZ1bmN0aW9uKGUpe3JldHVybiB0LmNsb25lKHRoaXMuZ2V0TGF5ZXIoZSkuZmlsdGVyKX0saS5wcm90b3R5cGUuc2V0TGF5b3V0UHJvcGVydHk9ZnVuY3Rpb24oZSxpLG4pe3RoaXMuX2NoZWNrTG9hZGVkKCk7dmFyIG89dGhpcy5nZXRMYXllcihlKTtvP3QuZGVmYXVsdCQxMyhvLmdldExheW91dFByb3BlcnR5KGkpLG4pfHwoby5zZXRMYXlvdXRQcm9wZXJ0eShpLG4pLHRoaXMuX3VwZGF0ZUxheWVyKG8pKTp0aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJUaGUgbGF5ZXIgJ1wiK2UrXCInIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZSBhbmQgY2Fubm90IGJlIHN0eWxlZC5cIikpKTt9LGkucHJvdG90eXBlLmdldExheW91dFByb3BlcnR5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZ2V0TGF5ZXIodCkuZ2V0TGF5b3V0UHJvcGVydHkoZSl9LGkucHJvdG90eXBlLnNldFBhaW50UHJvcGVydHk9ZnVuY3Rpb24oZSxpLG4pe3RoaXMuX2NoZWNrTG9hZGVkKCk7dmFyIG89dGhpcy5nZXRMYXllcihlKTtvP3QuZGVmYXVsdCQxMyhvLmdldFBhaW50UHJvcGVydHkoaSksbil8fChvLnNldFBhaW50UHJvcGVydHkoaSxuKSYmdGhpcy5fdXBkYXRlTGF5ZXIobyksdGhpcy5fY2hhbmdlZD0hMCx0aGlzLl91cGRhdGVkUGFpbnRQcm9wc1tlXT0hMCk6dGhpcy5maXJlKG5ldyB0LkVycm9yRXZlbnQobmV3IEVycm9yKFwiVGhlIGxheWVyICdcIitlK1wiJyBkb2VzIG5vdCBleGlzdCBpbiB0aGUgbWFwJ3Mgc3R5bGUgYW5kIGNhbm5vdCBiZSBzdHlsZWQuXCIpKSk7fSxpLnByb3RvdHlwZS5nZXRQYWludFByb3BlcnR5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZ2V0TGF5ZXIodCkuZ2V0UGFpbnRQcm9wZXJ0eShlKX0saS5wcm90b3R5cGUuc2V0RmVhdHVyZVN0YXRlPWZ1bmN0aW9uKGUsaSl7dGhpcy5fY2hlY2tMb2FkZWQoKTt2YXIgbj1lLnNvdXJjZSxvPWUuc291cmNlTGF5ZXIscj10aGlzLnNvdXJjZUNhY2hlc1tuXTt2b2lkIDAhPT1yP1widmVjdG9yXCIhPT1yLmdldFNvdXJjZSgpLnR5cGV8fG8/ci5zZXRGZWF0dXJlU3RhdGUobyxlLmlkLGkpOnRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyBFcnJvcihcIlRoZSBzb3VyY2VMYXllciBwYXJhbWV0ZXIgbXVzdCBiZSBwcm92aWRlZCBmb3IgdmVjdG9yIHNvdXJjZSB0eXBlcy5cIikpKTp0aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJUaGUgc291cmNlICdcIituK1wiJyBkb2VzIG5vdCBleGlzdCBpbiB0aGUgbWFwJ3Mgc3R5bGUuXCIpKSk7fSxpLnByb3RvdHlwZS5nZXRGZWF0dXJlU3RhdGU9ZnVuY3Rpb24oZSl7dGhpcy5fY2hlY2tMb2FkZWQoKTt2YXIgaT1lLnNvdXJjZSxuPWUuc291cmNlTGF5ZXIsbz10aGlzLnNvdXJjZUNhY2hlc1tpXTtpZih2b2lkIDAhPT1vKXtpZihcInZlY3RvclwiIT09by5nZXRTb3VyY2UoKS50eXBlfHxuKXJldHVybiBvLmdldEZlYXR1cmVTdGF0ZShuLGUuaWQpO3RoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyBFcnJvcihcIlRoZSBzb3VyY2VMYXllciBwYXJhbWV0ZXIgbXVzdCBiZSBwcm92aWRlZCBmb3IgdmVjdG9yIHNvdXJjZSB0eXBlcy5cIikpKTt9ZWxzZSB0aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJUaGUgc291cmNlICdcIitpK1wiJyBkb2VzIG5vdCBleGlzdCBpbiB0aGUgbWFwJ3Mgc3R5bGUuXCIpKSk7fSxpLnByb3RvdHlwZS5nZXRUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZXh0ZW5kKHtkdXJhdGlvbjozMDAsZGVsYXk6MH0sdGhpcy5zdHlsZXNoZWV0JiZ0aGlzLnN0eWxlc2hlZXQudHJhbnNpdGlvbil9LGkucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHQuZmlsdGVyT2JqZWN0KHt2ZXJzaW9uOnRoaXMuc3R5bGVzaGVldC52ZXJzaW9uLG5hbWU6dGhpcy5zdHlsZXNoZWV0Lm5hbWUsbWV0YWRhdGE6dGhpcy5zdHlsZXNoZWV0Lm1ldGFkYXRhLGxpZ2h0OnRoaXMuc3R5bGVzaGVldC5saWdodCxjZW50ZXI6dGhpcy5zdHlsZXNoZWV0LmNlbnRlcix6b29tOnRoaXMuc3R5bGVzaGVldC56b29tLGJlYXJpbmc6dGhpcy5zdHlsZXNoZWV0LmJlYXJpbmcscGl0Y2g6dGhpcy5zdHlsZXNoZWV0LnBpdGNoLHNwcml0ZTp0aGlzLnN0eWxlc2hlZXQuc3ByaXRlLGdseXBoczp0aGlzLnN0eWxlc2hlZXQuZ2x5cGhzLHRyYW5zaXRpb246dGhpcy5zdHlsZXNoZWV0LnRyYW5zaXRpb24sc291cmNlczp0Lm1hcE9iamVjdCh0aGlzLnNvdXJjZUNhY2hlcyxmdW5jdGlvbih0KXtyZXR1cm4gdC5zZXJpYWxpemUoKX0pLGxheWVyczp0aGlzLl9vcmRlci5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2xheWVyc1t0XS5zZXJpYWxpemUoKX0pfSxmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dH0pfSxpLnByb3RvdHlwZS5fdXBkYXRlTGF5ZXI9ZnVuY3Rpb24odCl7dGhpcy5fdXBkYXRlZExheWVyc1t0LmlkXT0hMCx0LnNvdXJjZSYmIXRoaXMuX3VwZGF0ZWRTb3VyY2VzW3Quc291cmNlXSYmKHRoaXMuX3VwZGF0ZWRTb3VyY2VzW3Quc291cmNlXT1cInJlbG9hZFwiLHRoaXMuc291cmNlQ2FjaGVzW3Quc291cmNlXS5wYXVzZSgpKSx0aGlzLl9jaGFuZ2VkPSEwO30saS5wcm90b3R5cGUuX2ZsYXR0ZW5SZW5kZXJlZEZlYXR1cmVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxpPXRoaXMuX29yZGVyLmxlbmd0aC0xO2k+PTA7aS0tKWZvcih2YXIgbj10aGlzLl9vcmRlcltpXSxvPTAscj10O288ci5sZW5ndGg7bys9MSl7dmFyIGE9cltvXVtuXTtpZihhKWZvcih2YXIgcz0wLGw9YTtzPGwubGVuZ3RoO3MrPTEpe3ZhciBjPWxbc107ZS5wdXNoKGMpO319cmV0dXJuIGV9LGkucHJvdG90eXBlLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcz1mdW5jdGlvbihlLGksbil7aSYmaS5maWx0ZXImJnRoaXMuX3ZhbGlkYXRlKHQudmFsaWRhdGVTdHlsZS5maWx0ZXIsXCJxdWVyeVJlbmRlcmVkRmVhdHVyZXMuZmlsdGVyXCIsaS5maWx0ZXIpO3ZhciBvPXt9O2lmKGkmJmkubGF5ZXJzKXtpZighQXJyYXkuaXNBcnJheShpLmxheWVycykpcmV0dXJuIHRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyBFcnJvcihcInBhcmFtZXRlcnMubGF5ZXJzIG11c3QgYmUgYW4gQXJyYXkuXCIpKSksW107Zm9yKHZhciByPTAsYT1pLmxheWVycztyPGEubGVuZ3RoO3IrPTEpe3ZhciBzPWFbcl0sbD10aGlzLl9sYXllcnNbc107aWYoIWwpcmV0dXJuIHRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyBFcnJvcihcIlRoZSBsYXllciAnXCIrcytcIicgZG9lcyBub3QgZXhpc3QgaW4gdGhlIG1hcCdzIHN0eWxlIGFuZCBjYW5ub3QgYmUgcXVlcmllZCBmb3IgZmVhdHVyZXMuXCIpKSksW107b1tsLnNvdXJjZV09ITA7fX12YXIgYz1bXTtmb3IodmFyIHUgaW4gdGhpcy5zb3VyY2VDYWNoZXMpaS5sYXllcnMmJiFvW3VdfHxjLnB1c2goSCh0aGlzLnNvdXJjZUNhY2hlc1t1XSx0aGlzLl9sYXllcnMsZS53b3JsZENvb3JkaW5hdGUsaSxuKSk7cmV0dXJuIHRoaXMucGxhY2VtZW50JiZjLnB1c2goZnVuY3Rpb24odCxlLGksbixvLHIpe2Zvcih2YXIgYT17fSxzPW8ucXVlcnlSZW5kZXJlZFN5bWJvbHMoaSksbD1bXSxjPTAsdT1PYmplY3Qua2V5cyhzKS5tYXAoTnVtYmVyKTtjPHUubGVuZ3RoO2MrPTEpe3ZhciBoPXVbY107bC5wdXNoKHJbaF0pO31sLnNvcnQoSyk7Zm9yKHZhciBwPWZ1bmN0aW9uKCl7dmFyIGU9ZltkXSxpPWUuZmVhdHVyZUluZGV4Lmxvb2t1cFN5bWJvbEZlYXR1cmVzKHNbZS5idWNrZXRJbnN0YW5jZUlkXSxlLmJ1Y2tldEluZGV4LGUuc291cmNlTGF5ZXJJbmRleCxuLmZpbHRlcixuLmxheWVycyx0KTtmb3IodmFyIG8gaW4gaSl7dmFyIHI9YVtvXT1hW29dfHxbXSxsPWlbb107bC5zb3J0KGZ1bmN0aW9uKHQsaSl7dmFyIG49ZS5mZWF0dXJlU29ydE9yZGVyO2lmKG4pe3ZhciBvPW4uaW5kZXhPZih0LmZlYXR1cmVJbmRleCk7cmV0dXJuIG4uaW5kZXhPZihpLmZlYXR1cmVJbmRleCktb31yZXR1cm4gaS5mZWF0dXJlSW5kZXgtdC5mZWF0dXJlSW5kZXh9KTtmb3IodmFyIGM9MCx1PWw7Yzx1Lmxlbmd0aDtjKz0xKXt2YXIgaD11W2NdO3IucHVzaChoLmZlYXR1cmUpO319fSxkPTAsZj1sO2Q8Zi5sZW5ndGg7ZCs9MSlwKCk7dmFyIG09ZnVuY3Rpb24oaSl7YVtpXS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciBvPXRbaV0scj1lW28uc291cmNlXS5nZXRGZWF0dXJlU3RhdGUobi5sYXllcltcInNvdXJjZS1sYXllclwiXSxuLmlkKTtuLnNvdXJjZT1uLmxheWVyLnNvdXJjZSxuLmxheWVyW1wic291cmNlLWxheWVyXCJdJiYobi5zb3VyY2VMYXllcj1uLmxheWVyW1wic291cmNlLWxheWVyXCJdKSxuLnN0YXRlPXI7fSk7fTtmb3IodmFyIF8gaW4gYSltKF8pO3JldHVybiBhfSh0aGlzLl9sYXllcnMsdGhpcy5zb3VyY2VDYWNoZXMsZS52aWV3cG9ydCxpLHRoaXMucGxhY2VtZW50LmNvbGxpc2lvbkluZGV4LHRoaXMucGxhY2VtZW50LnJldGFpbmVkUXVlcnlEYXRhKSksdGhpcy5fZmxhdHRlblJlbmRlcmVkRmVhdHVyZXMoYyl9LGkucHJvdG90eXBlLnF1ZXJ5U291cmNlRmVhdHVyZXM9ZnVuY3Rpb24oZSxpKXtpJiZpLmZpbHRlciYmdGhpcy5fdmFsaWRhdGUodC52YWxpZGF0ZVN0eWxlLmZpbHRlcixcInF1ZXJ5U291cmNlRmVhdHVyZXMuZmlsdGVyXCIsaS5maWx0ZXIpO3ZhciBuPXRoaXMuc291cmNlQ2FjaGVzW2VdO3JldHVybiBuP2Z1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXQuZ2V0UmVuZGVyYWJsZUlkcygpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5nZXRUaWxlQnlJRChlKX0pLG49W10sbz17fSxyPTA7cjxpLmxlbmd0aDtyKyspe3ZhciBhPWlbcl0scz1hLnRpbGVJRC5jYW5vbmljYWwua2V5O29bc118fChvW3NdPSEwLGEucXVlcnlTb3VyY2VGZWF0dXJlcyhuLGUpKTt9cmV0dXJuIG59KG4saSk6W119LGkucHJvdG90eXBlLmFkZFNvdXJjZVR5cGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBpLmdldFNvdXJjZVR5cGUodCk/bihuZXcgRXJyb3IoJ0Egc291cmNlIHR5cGUgY2FsbGVkIFwiJyt0KydcIiBhbHJlYWR5IGV4aXN0cy4nKSk6KGkuc2V0U291cmNlVHlwZSh0LGUpLGUud29ya2VyU291cmNlVVJMP3ZvaWQgdGhpcy5kaXNwYXRjaGVyLmJyb2FkY2FzdChcImxvYWRXb3JrZXJTb3VyY2VcIix7bmFtZTp0LHVybDplLndvcmtlclNvdXJjZVVSTH0sbik6bihudWxsLG51bGwpKX0saS5wcm90b3R5cGUuZ2V0TGlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saWdodC5nZXRMaWdodCgpfSxpLnByb3RvdHlwZS5zZXRMaWdodD1mdW5jdGlvbihlKXt0aGlzLl9jaGVja0xvYWRlZCgpO3ZhciBpPXRoaXMubGlnaHQuZ2V0TGlnaHQoKSxuPSExO2Zvcih2YXIgbyBpbiBlKWlmKCF0LmRlZmF1bHQkMTMoZVtvXSxpW29dKSl7bj0hMDticmVha31pZihuKXt2YXIgcj17bm93OnQuZGVmYXVsdCQyLm5vdygpLHRyYW5zaXRpb246dC5leHRlbmQoe2R1cmF0aW9uOjMwMCxkZWxheTowfSx0aGlzLnN0eWxlc2hlZXQudHJhbnNpdGlvbil9O3RoaXMubGlnaHQuc2V0TGlnaHQoZSksdGhpcy5saWdodC51cGRhdGVUcmFuc2l0aW9ucyhyKTt9fSxpLnByb3RvdHlwZS5fdmFsaWRhdGU9ZnVuY3Rpb24oZSxpLG4sbyxyKXtyZXR1cm4oIXJ8fCExIT09ci52YWxpZGF0ZSkmJkZlKHRoaXMsZS5jYWxsKHQudmFsaWRhdGVTdHlsZSx0LmV4dGVuZCh7a2V5Omksc3R5bGU6dGhpcy5zZXJpYWxpemUoKSx2YWx1ZTpuLHN0eWxlU3BlYzp0LmRlZmF1bHQkN30sbykpKX0saS5wcm90b3R5cGUuX3JlbW92ZT1mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB0LmV2ZW50ZWQub2ZmKFwicGx1Z2luQXZhaWxhYmxlXCIsdGhpcy5fcnRsVGV4dFBsdWdpbkNhbGxiYWNrKSx0aGlzLnNvdXJjZUNhY2hlcyl0aGlzLnNvdXJjZUNhY2hlc1tlXS5jbGVhclRpbGVzKCk7dGhpcy5kaXNwYXRjaGVyLnJlbW92ZSgpO30saS5wcm90b3R5cGUuX2NsZWFyU291cmNlPWZ1bmN0aW9uKHQpe3RoaXMuc291cmNlQ2FjaGVzW3RdLmNsZWFyVGlsZXMoKTt9LGkucHJvdG90eXBlLl9yZWxvYWRTb3VyY2U9ZnVuY3Rpb24odCl7dGhpcy5zb3VyY2VDYWNoZXNbdF0ucmVzdW1lKCksdGhpcy5zb3VyY2VDYWNoZXNbdF0ucmVsb2FkKCk7fSxpLnByb3RvdHlwZS5fdXBkYXRlU291cmNlcz1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5zb3VyY2VDYWNoZXMpdGhpcy5zb3VyY2VDYWNoZXNbZV0udXBkYXRlKHQpO30saS5wcm90b3R5cGUuX2dlbmVyYXRlQ29sbGlzaW9uQm94ZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5zb3VyY2VDYWNoZXMpdGhpcy5fcmVsb2FkU291cmNlKHQpO30saS5wcm90b3R5cGUuX3VwZGF0ZVBsYWNlbWVudD1mdW5jdGlvbihlLGksbixvKXtmb3IodmFyIHI9ITEsYT0hMSxzPXt9LGw9MCxjPXRoaXMuX29yZGVyO2w8Yy5sZW5ndGg7bCs9MSl7dmFyIHU9Y1tsXSxoPXRoaXMuX2xheWVyc1t1XTtpZihcInN5bWJvbFwiPT09aC50eXBlKXtpZighc1toLnNvdXJjZV0pe3ZhciBwPXRoaXMuc291cmNlQ2FjaGVzW2guc291cmNlXTtzW2guc291cmNlXT1wLmdldFJlbmRlcmFibGVJZHMoKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHAuZ2V0VGlsZUJ5SUQodCl9KS5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUudGlsZUlELm92ZXJzY2FsZWRaLXQudGlsZUlELm92ZXJzY2FsZWRafHwodC50aWxlSUQuaXNMZXNzVGhhbihlLnRpbGVJRCk/LTE6MSl9KTt9dmFyIGQ9dGhpcy5jcm9zc1RpbGVTeW1ib2xJbmRleC5hZGRMYXllcihoLHNbaC5zb3VyY2VdLGUuY2VudGVyLmxuZyk7cj1yfHxkO319dGhpcy5jcm9zc1RpbGVTeW1ib2xJbmRleC5wcnVuZVVudXNlZExheWVycyh0aGlzLl9vcmRlcik7dmFyIGY9dGhpcy5fbGF5ZXJPcmRlckNoYW5nZWQ7aWYoKGZ8fCF0aGlzLnBhdXNlYWJsZVBsYWNlbWVudHx8dGhpcy5wYXVzZWFibGVQbGFjZW1lbnQuaXNEb25lKCkmJiF0aGlzLnBsYWNlbWVudC5zdGlsbFJlY2VudCh0LmRlZmF1bHQkMi5ub3coKSkpJiYodGhpcy5wYXVzZWFibGVQbGFjZW1lbnQ9bmV3IERlKGUsdGhpcy5fb3JkZXIsZixpLG4sbyksdGhpcy5fbGF5ZXJPcmRlckNoYW5nZWQ9ITEpLHRoaXMucGF1c2VhYmxlUGxhY2VtZW50LmlzRG9uZSgpP3RoaXMucGxhY2VtZW50LnNldFN0YWxlKCk6KHRoaXMucGF1c2VhYmxlUGxhY2VtZW50LmNvbnRpbnVlUGxhY2VtZW50KHRoaXMuX29yZGVyLHRoaXMuX2xheWVycyxzKSx0aGlzLnBhdXNlYWJsZVBsYWNlbWVudC5pc0RvbmUoKSYmKHRoaXMucGxhY2VtZW50PXRoaXMucGF1c2VhYmxlUGxhY2VtZW50LmNvbW1pdCh0aGlzLnBsYWNlbWVudCx0LmRlZmF1bHQkMi5ub3coKSksYT0hMCksciYmdGhpcy5wYXVzZWFibGVQbGFjZW1lbnQucGxhY2VtZW50LnNldFN0YWxlKCkpLGF8fHIpZm9yKHZhciBtPTAsXz10aGlzLl9vcmRlcjttPF8ubGVuZ3RoO20rPTEpe3ZhciBnPV9bbV0sdj10aGlzLl9sYXllcnNbZ107XCJzeW1ib2xcIj09PXYudHlwZSYmdGhpcy5wbGFjZW1lbnQudXBkYXRlTGF5ZXJPcGFjaXRpZXModixzW3Yuc291cmNlXSk7fXJldHVybiF0aGlzLnBhdXNlYWJsZVBsYWNlbWVudC5pc0RvbmUoKXx8dGhpcy5wbGFjZW1lbnQuaGFzVHJhbnNpdGlvbnModC5kZWZhdWx0JDIubm93KCkpfSxpLnByb3RvdHlwZS5nZXRJbWFnZXM9ZnVuY3Rpb24odCxlLGkpe3RoaXMuaW1hZ2VNYW5hZ2VyLmdldEltYWdlcyhlLmljb25zLGkpO30saS5wcm90b3R5cGUuZ2V0R2x5cGhzPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLmdseXBoTWFuYWdlci5nZXRHbHlwaHMoZS5zdGFja3MsaSk7fSxpfSh0LkV2ZW50ZWQpO1VlLmdldFNvdXJjZVR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHFbdF19LFVlLnNldFNvdXJjZVR5cGU9ZnVuY3Rpb24odCxlKXtxW3RdPWU7fSxVZS5yZWdpc3RlckZvclBsdWdpbkF2YWlsYWJpbGl0eT10LnJlZ2lzdGVyRm9yUGx1Z2luQXZhaWxhYmlsaXR5O3ZhciBaZT10LmNyZWF0ZUxheW91dChbe25hbWU6XCJhX3Bvc1wiLHR5cGU6XCJJbnQxNlwiLGNvbXBvbmVudHM6Mn1dKSxWZT17cHJlbHVkZTp7ZnJhZ21lbnRTb3VyY2U6XCIjaWZkZWYgR0xfRVNcXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG4jZWxzZVxcblxcbiNpZiAhZGVmaW5lZChsb3dwKVxcbiNkZWZpbmUgbG93cFxcbiNlbmRpZlxcblxcbiNpZiAhZGVmaW5lZChtZWRpdW1wKVxcbiNkZWZpbmUgbWVkaXVtcFxcbiNlbmRpZlxcblxcbiNpZiAhZGVmaW5lZChoaWdocClcXG4jZGVmaW5lIGhpZ2hwXFxuI2VuZGlmXFxuXFxuI2VuZGlmXFxuXCIsdmVydGV4U291cmNlOlwiI2lmZGVmIEdMX0VTXFxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiNlbHNlXFxuXFxuI2lmICFkZWZpbmVkKGxvd3ApXFxuI2RlZmluZSBsb3dwXFxuI2VuZGlmXFxuXFxuI2lmICFkZWZpbmVkKG1lZGl1bXApXFxuI2RlZmluZSBtZWRpdW1wXFxuI2VuZGlmXFxuXFxuI2lmICFkZWZpbmVkKGhpZ2hwKVxcbiNkZWZpbmUgaGlnaHBcXG4jZW5kaWZcXG5cXG4jZW5kaWZcXG5cXG4vLyBVbnBhY2sgYSBwYWlyIG9mIHZhbHVlcyB0aGF0IGhhdmUgYmVlbiBwYWNrZWQgaW50byBhIHNpbmdsZSBmbG9hdC5cXG4vLyBUaGUgcGFja2VkIHZhbHVlcyBhcmUgYXNzdW1lZCB0byBiZSA4LWJpdCB1bnNpZ25lZCBpbnRlZ2VycywgYW5kIGFyZVxcbi8vIHBhY2tlZCBsaWtlIHNvOlxcbi8vIHBhY2tlZFZhbHVlID0gZmxvb3IoaW5wdXRbMF0pICogMjU2ICsgaW5wdXRbMV0sXFxudmVjMiB1bnBhY2tfZmxvYXQoY29uc3QgZmxvYXQgcGFja2VkVmFsdWUpIHtcXG4gICAgaW50IHBhY2tlZEludFZhbHVlID0gaW50KHBhY2tlZFZhbHVlKTtcXG4gICAgaW50IHYwID0gcGFja2VkSW50VmFsdWUgLyAyNTY7XFxuICAgIHJldHVybiB2ZWMyKHYwLCBwYWNrZWRJbnRWYWx1ZSAtIHYwICogMjU2KTtcXG59XFxuXFxudmVjMiB1bnBhY2tfb3BhY2l0eShjb25zdCBmbG9hdCBwYWNrZWRPcGFjaXR5KSB7XFxuICAgIGludCBpbnRPcGFjaXR5ID0gaW50KHBhY2tlZE9wYWNpdHkpIC8gMjtcXG4gICAgcmV0dXJuIHZlYzIoZmxvYXQoaW50T3BhY2l0eSkgLyAxMjcuMCwgbW9kKHBhY2tlZE9wYWNpdHksIDIuMCkpO1xcbn1cXG5cXG4vLyBUbyBtaW5pbWl6ZSB0aGUgbnVtYmVyIG9mIGF0dHJpYnV0ZXMgbmVlZGVkLCB3ZSBlbmNvZGUgYSA0LWNvbXBvbmVudFxcbi8vIGNvbG9yIGludG8gYSBwYWlyIG9mIGZsb2F0cyAoaS5lLiBhIHZlYzIpIGFzIGZvbGxvd3M6XFxuLy8gWyBmbG9vcihjb2xvci5yICogMjU1KSAqIDI1NiArIGNvbG9yLmcgKiAyNTUsXFxuLy8gICBmbG9vcihjb2xvci5iICogMjU1KSAqIDI1NiArIGNvbG9yLmcgKiAyNTUgXVxcbnZlYzQgZGVjb2RlX2NvbG9yKGNvbnN0IHZlYzIgZW5jb2RlZENvbG9yKSB7XFxuICAgIHJldHVybiB2ZWM0KFxcbiAgICAgICAgdW5wYWNrX2Zsb2F0KGVuY29kZWRDb2xvclswXSkgLyAyNTUuMCxcXG4gICAgICAgIHVucGFja19mbG9hdChlbmNvZGVkQ29sb3JbMV0pIC8gMjU1LjBcXG4gICAgKTtcXG59XFxuXFxuLy8gVW5wYWNrIGEgcGFpciBvZiBwYWludCB2YWx1ZXMgYW5kIGludGVycG9sYXRlIGJldHdlZW4gdGhlbS5cXG5mbG9hdCB1bnBhY2tfbWl4X3ZlYzIoY29uc3QgdmVjMiBwYWNrZWRWYWx1ZSwgY29uc3QgZmxvYXQgdCkge1xcbiAgICByZXR1cm4gbWl4KHBhY2tlZFZhbHVlWzBdLCBwYWNrZWRWYWx1ZVsxXSwgdCk7XFxufVxcblxcbi8vIFVucGFjayBhIHBhaXIgb2YgcGFpbnQgdmFsdWVzIGFuZCBpbnRlcnBvbGF0ZSBiZXR3ZWVuIHRoZW0uXFxudmVjNCB1bnBhY2tfbWl4X3ZlYzQoY29uc3QgdmVjNCBwYWNrZWRDb2xvcnMsIGNvbnN0IGZsb2F0IHQpIHtcXG4gICAgdmVjNCBtaW5Db2xvciA9IGRlY29kZV9jb2xvcih2ZWMyKHBhY2tlZENvbG9yc1swXSwgcGFja2VkQ29sb3JzWzFdKSk7XFxuICAgIHZlYzQgbWF4Q29sb3IgPSBkZWNvZGVfY29sb3IodmVjMihwYWNrZWRDb2xvcnNbMl0sIHBhY2tlZENvbG9yc1szXSkpO1xcbiAgICByZXR1cm4gbWl4KG1pbkNvbG9yLCBtYXhDb2xvciwgdCk7XFxufVxcblxcbi8vIFRoZSBvZmZzZXQgZGVwZW5kcyBvbiBob3cgbWFueSBwaXhlbHMgYXJlIGJldHdlZW4gdGhlIHdvcmxkIG9yaWdpbiBhbmQgdGhlIGVkZ2Ugb2YgdGhlIHRpbGU6XFxuLy8gdmVjMiBvZmZzZXQgPSBtb2QocGl4ZWxfY29vcmQsIHNpemUpXFxuLy9cXG4vLyBBdCBoaWdoIHpvb20gbGV2ZWxzIHRoZXJlIGFyZSBhIHRvbiBvZiBwaXhlbHMgYmV0d2VlbiB0aGUgd29ybGQgb3JpZ2luIGFuZCB0aGUgZWRnZSBvZiB0aGUgdGlsZS5cXG4vLyBUaGUgZ2xzbCBzcGVjIG9ubHkgZ3VhcmFudGVlcyAxNiBiaXRzIG9mIHByZWNpc2lvbiBmb3IgaGlnaHAgZmxvYXRzLiBXZSBuZWVkIG1vcmUgdGhhbiB0aGF0Llxcbi8vXFxuLy8gVGhlIHBpeGVsX2Nvb3JkIGlzIHBhc3NlZCBpbiBhcyB0d28gMTYgYml0IHZhbHVlczpcXG4vLyBwaXhlbF9jb29yZF91cHBlciA9IGZsb29yKHBpeGVsX2Nvb3JkIC8gMl4xNilcXG4vLyBwaXhlbF9jb29yZF9sb3dlciA9IG1vZChwaXhlbF9jb29yZCwgMl4xNilcXG4vL1xcbi8vIFRoZSBvZmZzZXQgaXMgY2FsY3VsYXRlZCBpbiBhIHNlcmllcyBvZiBzdGVwcyB0aGF0IHNob3VsZCBwcmVzZXJ2ZSB0aGlzIHByZWNpc2lvbjpcXG52ZWMyIGdldF9wYXR0ZXJuX3Bvcyhjb25zdCB2ZWMyIHBpeGVsX2Nvb3JkX3VwcGVyLCBjb25zdCB2ZWMyIHBpeGVsX2Nvb3JkX2xvd2VyLFxcbiAgICBjb25zdCB2ZWMyIHBhdHRlcm5fc2l6ZSwgY29uc3QgZmxvYXQgdGlsZV91bml0c190b19waXhlbHMsIGNvbnN0IHZlYzIgcG9zKSB7XFxuXFxuICAgIHZlYzIgb2Zmc2V0ID0gbW9kKG1vZChtb2QocGl4ZWxfY29vcmRfdXBwZXIsIHBhdHRlcm5fc2l6ZSkgKiAyNTYuMCwgcGF0dGVybl9zaXplKSAqIDI1Ni4wICsgcGl4ZWxfY29vcmRfbG93ZXIsIHBhdHRlcm5fc2l6ZSk7XFxuICAgIHJldHVybiAodGlsZV91bml0c190b19waXhlbHMgKiBwb3MgKyBvZmZzZXQpIC8gcGF0dGVybl9zaXplO1xcbn1cXG5cIn0sYmFja2dyb3VuZDp7ZnJhZ21lbnRTb3VyY2U6XCJ1bmlmb3JtIHZlYzQgdV9jb2xvcjtcXG51bmlmb3JtIGZsb2F0IHVfb3BhY2l0eTtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGdsX0ZyYWdDb2xvciA9IHVfY29sb3IgKiB1X29wYWNpdHk7XFxuXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVxcblwiLHZlcnRleFNvdXJjZTpcImF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcblxcbnVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGdsX1Bvc2l0aW9uID0gdV9tYXRyaXggKiB2ZWM0KGFfcG9zLCAwLCAxKTtcXG59XFxuXCJ9LGJhY2tncm91bmRQYXR0ZXJuOntmcmFnbWVudFNvdXJjZTpcInVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fdGxfYTtcXG51bmlmb3JtIHZlYzIgdV9wYXR0ZXJuX2JyX2E7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl90bF9iO1xcbnVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fYnJfYjtcXG51bmlmb3JtIHZlYzIgdV90ZXhzaXplO1xcbnVuaWZvcm0gZmxvYXQgdV9taXg7XFxudW5pZm9ybSBmbG9hdCB1X29wYWNpdHk7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcXG5cXG52YXJ5aW5nIHZlYzIgdl9wb3NfYTtcXG52YXJ5aW5nIHZlYzIgdl9wb3NfYjtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIHZlYzIgaW1hZ2Vjb29yZCA9IG1vZCh2X3Bvc19hLCAxLjApO1xcbiAgICB2ZWMyIHBvcyA9IG1peCh1X3BhdHRlcm5fdGxfYSAvIHVfdGV4c2l6ZSwgdV9wYXR0ZXJuX2JyX2EgLyB1X3RleHNpemUsIGltYWdlY29vcmQpO1xcbiAgICB2ZWM0IGNvbG9yMSA9IHRleHR1cmUyRCh1X2ltYWdlLCBwb3MpO1xcblxcbiAgICB2ZWMyIGltYWdlY29vcmRfYiA9IG1vZCh2X3Bvc19iLCAxLjApO1xcbiAgICB2ZWMyIHBvczIgPSBtaXgodV9wYXR0ZXJuX3RsX2IgLyB1X3RleHNpemUsIHVfcGF0dGVybl9icl9iIC8gdV90ZXhzaXplLCBpbWFnZWNvb3JkX2IpO1xcbiAgICB2ZWM0IGNvbG9yMiA9IHRleHR1cmUyRCh1X2ltYWdlLCBwb3MyKTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gbWl4KGNvbG9yMSwgY29sb3IyLCB1X21peCkgKiB1X29wYWNpdHk7XFxuXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVxcblwiLHZlcnRleFNvdXJjZTpcInVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG51bmlmb3JtIHZlYzIgdV9wYXR0ZXJuX3NpemVfYTtcXG51bmlmb3JtIHZlYzIgdV9wYXR0ZXJuX3NpemVfYjtcXG51bmlmb3JtIHZlYzIgdV9waXhlbF9jb29yZF91cHBlcjtcXG51bmlmb3JtIHZlYzIgdV9waXhlbF9jb29yZF9sb3dlcjtcXG51bmlmb3JtIGZsb2F0IHVfc2NhbGVfYTtcXG51bmlmb3JtIGZsb2F0IHVfc2NhbGVfYjtcXG51bmlmb3JtIGZsb2F0IHVfdGlsZV91bml0c190b19waXhlbHM7XFxuXFxuYXR0cmlidXRlIHZlYzIgYV9wb3M7XFxuXFxudmFyeWluZyB2ZWMyIHZfcG9zX2E7XFxudmFyeWluZyB2ZWMyIHZfcG9zX2I7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogdmVjNChhX3BvcywgMCwgMSk7XFxuXFxuICAgIHZfcG9zX2EgPSBnZXRfcGF0dGVybl9wb3ModV9waXhlbF9jb29yZF91cHBlciwgdV9waXhlbF9jb29yZF9sb3dlciwgdV9zY2FsZV9hICogdV9wYXR0ZXJuX3NpemVfYSwgdV90aWxlX3VuaXRzX3RvX3BpeGVscywgYV9wb3MpO1xcbiAgICB2X3Bvc19iID0gZ2V0X3BhdHRlcm5fcG9zKHVfcGl4ZWxfY29vcmRfdXBwZXIsIHVfcGl4ZWxfY29vcmRfbG93ZXIsIHVfc2NhbGVfYiAqIHVfcGF0dGVybl9zaXplX2IsIHVfdGlsZV91bml0c190b19waXhlbHMsIGFfcG9zKTtcXG59XFxuXCJ9LGNpcmNsZTp7ZnJhZ21lbnRTb3VyY2U6XCIjcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgcmFkaXVzXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGJsdXJcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBzdHJva2VfY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgc3Ryb2tlX3dpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IHN0cm9rZV9vcGFjaXR5XFxuXFxudmFyeWluZyB2ZWMzIHZfZGF0YTtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgY29sb3JcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCByYWRpdXNcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBibHVyXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IHN0cm9rZV9jb2xvclxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBtZWRpdW1wIGZsb2F0IHN0cm9rZV93aWR0aFxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IHN0cm9rZV9vcGFjaXR5XFxuXFxuICAgIHZlYzIgZXh0cnVkZSA9IHZfZGF0YS54eTtcXG4gICAgZmxvYXQgZXh0cnVkZV9sZW5ndGggPSBsZW5ndGgoZXh0cnVkZSk7XFxuXFxuICAgIGxvd3AgZmxvYXQgYW50aWFsaWFzYmx1ciA9IHZfZGF0YS56O1xcbiAgICBmbG9hdCBhbnRpYWxpYXNlZF9ibHVyID0gLW1heChibHVyLCBhbnRpYWxpYXNibHVyKTtcXG5cXG4gICAgZmxvYXQgb3BhY2l0eV90ID0gc21vb3Roc3RlcCgwLjAsIGFudGlhbGlhc2VkX2JsdXIsIGV4dHJ1ZGVfbGVuZ3RoIC0gMS4wKTtcXG5cXG4gICAgZmxvYXQgY29sb3JfdCA9IHN0cm9rZV93aWR0aCA8IDAuMDEgPyAwLjAgOiBzbW9vdGhzdGVwKFxcbiAgICAgICAgYW50aWFsaWFzZWRfYmx1cixcXG4gICAgICAgIDAuMCxcXG4gICAgICAgIGV4dHJ1ZGVfbGVuZ3RoIC0gcmFkaXVzIC8gKHJhZGl1cyArIHN0cm9rZV93aWR0aClcXG4gICAgKTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gb3BhY2l0eV90ICogbWl4KGNvbG9yICogb3BhY2l0eSwgc3Ryb2tlX2NvbG9yICogc3Ryb2tlX29wYWNpdHksIGNvbG9yX3QpO1xcblxcbiNpZmRlZiBPVkVSRFJBV19JTlNQRUNUT1JcXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbiNlbmRpZlxcbn1cXG5cIix2ZXJ0ZXhTb3VyY2U6XCJ1bmlmb3JtIG1hdDQgdV9tYXRyaXg7XFxudW5pZm9ybSBib29sIHVfc2NhbGVfd2l0aF9tYXA7XFxudW5pZm9ybSBib29sIHVfcGl0Y2hfd2l0aF9tYXA7XFxudW5pZm9ybSB2ZWMyIHVfZXh0cnVkZV9zY2FsZTtcXG51bmlmb3JtIGhpZ2hwIGZsb2F0IHVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZTtcXG5cXG5hdHRyaWJ1dGUgdmVjMiBhX3BvcztcXG5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgcmFkaXVzXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGJsdXJcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBzdHJva2VfY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgc3Ryb2tlX3dpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IHN0cm9rZV9vcGFjaXR5XFxuXFxudmFyeWluZyB2ZWMzIHZfZGF0YTtcXG5cXG52b2lkIG1haW4odm9pZCkge1xcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGNvbG9yXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgZmxvYXQgcmFkaXVzXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgYmx1clxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBzdHJva2VfY29sb3JcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCBzdHJva2Vfd2lkdGhcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBzdHJva2Vfb3BhY2l0eVxcblxcbiAgICAvLyB1bmVuY29kZSB0aGUgZXh0cnVzaW9uIHZlY3RvciB0aGF0IHdlIHNudWNrIGludG8gdGhlIGFfcG9zIHZlY3RvclxcbiAgICB2ZWMyIGV4dHJ1ZGUgPSB2ZWMyKG1vZChhX3BvcywgMi4wKSAqIDIuMCAtIDEuMCk7XFxuXFxuICAgIC8vIG11bHRpcGx5IGFfcG9zIGJ5IDAuNSwgc2luY2Ugd2UgaGFkIGl0ICogMiBpbiBvcmRlciB0byBzbmVha1xcbiAgICAvLyBpbiBleHRydXNpb24gZGF0YVxcbiAgICB2ZWMyIGNpcmNsZV9jZW50ZXIgPSBmbG9vcihhX3BvcyAqIDAuNSk7XFxuICAgIGlmICh1X3BpdGNoX3dpdGhfbWFwKSB7XFxuICAgICAgICB2ZWMyIGNvcm5lcl9wb3NpdGlvbiA9IGNpcmNsZV9jZW50ZXI7XFxuICAgICAgICBpZiAodV9zY2FsZV93aXRoX21hcCkge1xcbiAgICAgICAgICAgIGNvcm5lcl9wb3NpdGlvbiArPSBleHRydWRlICogKHJhZGl1cyArIHN0cm9rZV93aWR0aCkgKiB1X2V4dHJ1ZGVfc2NhbGU7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIC8vIFBpdGNoaW5nIHRoZSBjaXJjbGUgd2l0aCB0aGUgbWFwIGVmZmVjdGl2ZWx5IHNjYWxlcyBpdCB3aXRoIHRoZSBtYXBcXG4gICAgICAgICAgICAvLyBUbyBjb3VudGVyYWN0IHRoZSBlZmZlY3QgZm9yIHBpdGNoLXNjYWxlOiB2aWV3cG9ydCwgd2UgcmVzY2FsZSB0aGVcXG4gICAgICAgICAgICAvLyB3aG9sZSBjaXJjbGUgYmFzZWQgb24gdGhlIHBpdGNoIHNjYWxpbmcgZWZmZWN0IGF0IGl0cyBjZW50cmFsIHBvaW50XFxuICAgICAgICAgICAgdmVjNCBwcm9qZWN0ZWRfY2VudGVyID0gdV9tYXRyaXggKiB2ZWM0KGNpcmNsZV9jZW50ZXIsIDAsIDEpO1xcbiAgICAgICAgICAgIGNvcm5lcl9wb3NpdGlvbiArPSBleHRydWRlICogKHJhZGl1cyArIHN0cm9rZV93aWR0aCkgKiB1X2V4dHJ1ZGVfc2NhbGUgKiAocHJvamVjdGVkX2NlbnRlci53IC8gdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlKTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gdV9tYXRyaXggKiB2ZWM0KGNvcm5lcl9wb3NpdGlvbiwgMCwgMSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogdmVjNChjaXJjbGVfY2VudGVyLCAwLCAxKTtcXG5cXG4gICAgICAgIGlmICh1X3NjYWxlX3dpdGhfbWFwKSB7XFxuICAgICAgICAgICAgZ2xfUG9zaXRpb24ueHkgKz0gZXh0cnVkZSAqIChyYWRpdXMgKyBzdHJva2Vfd2lkdGgpICogdV9leHRydWRlX3NjYWxlICogdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBnbF9Qb3NpdGlvbi54eSArPSBleHRydWRlICogKHJhZGl1cyArIHN0cm9rZV93aWR0aCkgKiB1X2V4dHJ1ZGVfc2NhbGUgKiBnbF9Qb3NpdGlvbi53O1xcbiAgICAgICAgfVxcbiAgICB9XFxuXFxuICAgIC8vIFRoaXMgaXMgYSBtaW5pbXVtIGJsdXIgZGlzdGFuY2UgdGhhdCBzZXJ2ZXMgYXMgYSBmYXV4LWFudGlhbGlhc2luZyBmb3JcXG4gICAgLy8gdGhlIGNpcmNsZS4gc2luY2UgYmx1ciBpcyBhIHJhdGlvIG9mIHRoZSBjaXJjbGUncyBzaXplIGFuZCB0aGUgaW50ZW50IGlzXFxuICAgIC8vIHRvIGtlZXAgdGhlIGJsdXIgYXQgcm91Z2hseSAxcHgsIHRoZSB0d28gYXJlIGludmVyc2VseSByZWxhdGVkLlxcbiAgICBsb3dwIGZsb2F0IGFudGlhbGlhc2JsdXIgPSAxLjAgLyBERVZJQ0VfUElYRUxfUkFUSU8gLyAocmFkaXVzICsgc3Ryb2tlX3dpZHRoKTtcXG5cXG4gICAgdl9kYXRhID0gdmVjMyhleHRydWRlLngsIGV4dHJ1ZGUueSwgYW50aWFsaWFzYmx1cik7XFxufVxcblwifSxjbGlwcGluZ01hc2s6e2ZyYWdtZW50U291cmNlOlwidm9pZCBtYWluKCkge1xcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDEuMCk7XFxufVxcblwiLHZlcnRleFNvdXJjZTpcImF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcblxcbnVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGdsX1Bvc2l0aW9uID0gdV9tYXRyaXggKiB2ZWM0KGFfcG9zLCAwLCAxKTtcXG59XFxuXCJ9LGhlYXRtYXA6e2ZyYWdtZW50U291cmNlOlwiI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCBmbG9hdCB3ZWlnaHRcXG5cXG51bmlmb3JtIGhpZ2hwIGZsb2F0IHVfaW50ZW5zaXR5O1xcbnZhcnlpbmcgdmVjMiB2X2V4dHJ1ZGU7XFxuXFxuLy8gR2F1c3NpYW4ga2VybmVsIGNvZWZmaWNpZW50OiAxIC8gc3FydCgyICogUEkpXFxuI2RlZmluZSBHQVVTU19DT0VGIDAuMzk4OTQyMjgwNDAxNDMyN1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgZmxvYXQgd2VpZ2h0XFxuXFxuICAgIC8vIEtlcm5lbCBkZW5zaXR5IGVzdGltYXRpb24gd2l0aCBhIEdhdXNzaWFuIGtlcm5lbCBvZiBzaXplIDV4NVxcbiAgICBmbG9hdCBkID0gLTAuNSAqIDMuMCAqIDMuMCAqIGRvdCh2X2V4dHJ1ZGUsIHZfZXh0cnVkZSk7XFxuICAgIGZsb2F0IHZhbCA9IHdlaWdodCAqIHVfaW50ZW5zaXR5ICogR0FVU1NfQ09FRiAqIGV4cChkKTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2YWwsIDEuMCwgMS4wLCAxLjApO1xcblxcbiNpZmRlZiBPVkVSRFJBV19JTlNQRUNUT1JcXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbiNlbmRpZlxcbn1cXG5cIix2ZXJ0ZXhTb3VyY2U6XCIjcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIGZsb2F0IHdlaWdodFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbWVkaXVtcCBmbG9hdCByYWRpdXNcXG5cXG51bmlmb3JtIG1hdDQgdV9tYXRyaXg7XFxudW5pZm9ybSBmbG9hdCB1X2V4dHJ1ZGVfc2NhbGU7XFxudW5pZm9ybSBmbG9hdCB1X29wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCB1X2ludGVuc2l0eTtcXG5cXG5hdHRyaWJ1dGUgdmVjMiBhX3BvcztcXG5cXG52YXJ5aW5nIHZlYzIgdl9leHRydWRlO1xcblxcbi8vIEVmZmVjdGl2ZSBcXFwiMFxcXCIgaW4gdGhlIGtlcm5lbCBkZW5zaXR5IHRleHR1cmUgdG8gYWRqdXN0IHRoZSBrZXJuZWwgc2l6ZSB0bztcXG4vLyB0aGlzIGVtcGlyaWNhbGx5IGNob3NlbiBudW1iZXIgbWluaW1pemVzIGFydGlmYWN0cyBvbiBvdmVybGFwcGluZyBrZXJuZWxzXFxuLy8gZm9yIHR5cGljYWwgaGVhdG1hcCBjYXNlcyAoYXNzdW1pbmcgY2x1c3RlcmVkIHNvdXJjZSlcXG5jb25zdCBoaWdocCBmbG9hdCBaRVJPID0gMS4wIC8gMjU1LjAgLyAxNi4wO1xcblxcbi8vIEdhdXNzaWFuIGtlcm5lbCBjb2VmZmljaWVudDogMSAvIHNxcnQoMiAqIFBJKVxcbiNkZWZpbmUgR0FVU1NfQ09FRiAwLjM5ODk0MjI4MDQwMTQzMjdcXG5cXG52b2lkIG1haW4odm9pZCkge1xcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCBmbG9hdCB3ZWlnaHRcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCByYWRpdXNcXG5cXG4gICAgLy8gdW5lbmNvZGUgdGhlIGV4dHJ1c2lvbiB2ZWN0b3IgdGhhdCB3ZSBzbnVjayBpbnRvIHRoZSBhX3BvcyB2ZWN0b3JcXG4gICAgdmVjMiB1bnNjYWxlZF9leHRydWRlID0gdmVjMihtb2QoYV9wb3MsIDIuMCkgKiAyLjAgLSAxLjApO1xcblxcbiAgICAvLyBUaGlzICdleHRydWRlJyBjb21lcyBpbiByYW5naW5nIGZyb20gWy0xLCAtMV0sIHRvIFsxLCAxXS4gIFdlJ2xsIHVzZVxcbiAgICAvLyBpdCB0byBwcm9kdWNlIHRoZSB2ZXJ0aWNlcyBvZiBhIHNxdWFyZSBtZXNoIGZyYW1pbmcgdGhlIHBvaW50IGZlYXR1cmVcXG4gICAgLy8gd2UncmUgYWRkaW5nIHRvIHRoZSBrZXJuZWwgZGVuc2l0eSB0ZXh0dXJlLiAgV2UnbGwgYWxzbyBwYXNzIGl0IGFzXFxuICAgIC8vIGEgdmFyeWluZywgc28gdGhhdCB0aGUgZnJhZ21lbnQgc2hhZGVyIGNhbiBkZXRlcm1pbmUgdGhlIGRpc3RhbmNlIG9mXFxuICAgIC8vIGVhY2ggZnJhZ21lbnQgZnJvbSB0aGUgcG9pbnQgZmVhdHVyZS5cXG4gICAgLy8gQmVmb3JlIHdlIGRvIHNvLCB3ZSBuZWVkIHRvIHNjYWxlIGl0IHVwIHN1ZmZpY2llbnRseSBzbyB0aGF0IHRoZVxcbiAgICAvLyBrZXJuZWwgZmFsbHMgZWZmZWN0aXZlbHkgdG8gemVybyBhdCB0aGUgZWRnZSBvZiB0aGUgbWVzaC5cXG4gICAgLy8gVGhhdCBpcywgd2Ugd2FudCB0byBrbm93IFMgc3VjaCB0aGF0XFxuICAgIC8vIHdlaWdodCAqIHVfaW50ZW5zaXR5ICogR0FVU1NfQ09FRiAqIGV4cCgtMC41ICogMy4wXjIgKiBTXjIpID09IFpFUk9cXG4gICAgLy8gV2hpY2ggc29sdmVzIHRvOlxcbiAgICAvLyBTID0gc3FydCgtMi4wICogbG9nKFpFUk8gLyAod2VpZ2h0ICogdV9pbnRlbnNpdHkgKiBHQVVTU19DT0VGKSkpIC8gMy4wXFxuICAgIGZsb2F0IFMgPSBzcXJ0KC0yLjAgKiBsb2coWkVSTyAvIHdlaWdodCAvIHVfaW50ZW5zaXR5IC8gR0FVU1NfQ09FRikpIC8gMy4wO1xcblxcbiAgICAvLyBQYXNzIHRoZSB2YXJ5aW5nIGluIHVuaXRzIG9mIHJhZGl1c1xcbiAgICB2X2V4dHJ1ZGUgPSBTICogdW5zY2FsZWRfZXh0cnVkZTtcXG5cXG4gICAgLy8gU2NhbGUgYnkgcmFkaXVzIGFuZCB0aGUgem9vbS1iYXNlZCBzY2FsZSBmYWN0b3IgdG8gcHJvZHVjZSBhY3R1YWxcXG4gICAgLy8gbWVzaCBwb3NpdGlvblxcbiAgICB2ZWMyIGV4dHJ1ZGUgPSB2X2V4dHJ1ZGUgKiByYWRpdXMgKiB1X2V4dHJ1ZGVfc2NhbGU7XFxuXFxuICAgIC8vIG11bHRpcGx5IGFfcG9zIGJ5IDAuNSwgc2luY2Ugd2UgaGFkIGl0ICogMiBpbiBvcmRlciB0byBzbmVha1xcbiAgICAvLyBpbiBleHRydXNpb24gZGF0YVxcbiAgICB2ZWM0IHBvcyA9IHZlYzQoZmxvb3IoYV9wb3MgKiAwLjUpICsgZXh0cnVkZSwgMCwgMSk7XFxuXFxuICAgIGdsX1Bvc2l0aW9uID0gdV9tYXRyaXggKiBwb3M7XFxufVxcblwifSxoZWF0bWFwVGV4dHVyZTp7ZnJhZ21lbnRTb3VyY2U6XCJ1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVfY29sb3JfcmFtcDtcXG51bmlmb3JtIGZsb2F0IHVfb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzIgdl9wb3M7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICBmbG9hdCB0ID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHZfcG9zKS5yO1xcbiAgICB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVfY29sb3JfcmFtcCwgdmVjMih0LCAwLjUpKTtcXG4gICAgZ2xfRnJhZ0NvbG9yID0gY29sb3IgKiB1X29wYWNpdHk7XFxuXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCk7XFxuI2VuZGlmXFxufVxcblwiLHZlcnRleFNvdXJjZTpcInVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG51bmlmb3JtIHZlYzIgdV93b3JsZDtcXG5hdHRyaWJ1dGUgdmVjMiBhX3BvcztcXG52YXJ5aW5nIHZlYzIgdl9wb3M7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogdmVjNChhX3BvcyAqIHVfd29ybGQsIDAsIDEpO1xcblxcbiAgICB2X3Bvcy54ID0gYV9wb3MueDtcXG4gICAgdl9wb3MueSA9IDEuMCAtIGFfcG9zLnk7XFxufVxcblwifSxjb2xsaXNpb25Cb3g6e2ZyYWdtZW50U291cmNlOlwiXFxudmFyeWluZyBmbG9hdCB2X3BsYWNlZDtcXG52YXJ5aW5nIGZsb2F0IHZfbm90VXNlZDtcXG5cXG52b2lkIG1haW4oKSB7XFxuXFxuICAgIGZsb2F0IGFscGhhID0gMC41O1xcblxcbiAgICAvLyBSZWQgPSBjb2xsaXNpb24sIGhpZGUgbGFiZWxcXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjAsIDAuMCwgMC4wLCAxLjApICogYWxwaGE7XFxuXFxuICAgIC8vIEJsdWUgPSBubyBjb2xsaXNpb24sIGxhYmVsIGlzIHNob3dpbmdcXG4gICAgaWYgKHZfcGxhY2VkID4gMC41KSB7XFxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCwgMC4wLCAxLjAsIDAuNSkgKiBhbHBoYTtcXG4gICAgfVxcblxcbiAgICBpZiAodl9ub3RVc2VkID4gMC41KSB7XFxuICAgICAgICAvLyBUaGlzIGJveCBub3QgdXNlZCwgZmFkZSBpdCBvdXRcXG4gICAgICAgIGdsX0ZyYWdDb2xvciAqPSAuMTtcXG4gICAgfVxcbn1cIix2ZXJ0ZXhTb3VyY2U6XCJhdHRyaWJ1dGUgdmVjMiBhX3BvcztcXG5hdHRyaWJ1dGUgdmVjMiBhX2FuY2hvcl9wb3M7XFxuYXR0cmlidXRlIHZlYzIgYV9leHRydWRlO1xcbmF0dHJpYnV0ZSB2ZWMyIGFfcGxhY2VkO1xcblxcbnVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG51bmlmb3JtIHZlYzIgdV9leHRydWRlX3NjYWxlO1xcbnVuaWZvcm0gZmxvYXQgdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlO1xcblxcbnZhcnlpbmcgZmxvYXQgdl9wbGFjZWQ7XFxudmFyeWluZyBmbG9hdCB2X25vdFVzZWQ7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICB2ZWM0IHByb2plY3RlZFBvaW50ID0gdV9tYXRyaXggKiB2ZWM0KGFfYW5jaG9yX3BvcywgMCwgMSk7XFxuICAgIGhpZ2hwIGZsb2F0IGNhbWVyYV90b19hbmNob3JfZGlzdGFuY2UgPSBwcm9qZWN0ZWRQb2ludC53O1xcbiAgICBoaWdocCBmbG9hdCBjb2xsaXNpb25fcGVyc3BlY3RpdmVfcmF0aW8gPSBjbGFtcChcXG4gICAgICAgIDAuNSArIDAuNSAqICh1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2UgLyBjYW1lcmFfdG9fYW5jaG9yX2Rpc3RhbmNlKSxcXG4gICAgICAgIDAuMCwgLy8gUHJldmVudHMgb3ZlcnNpemVkIG5lYXItZmllbGQgYm94ZXMgaW4gcGl0Y2hlZC9vdmVyem9vbWVkIHRpbGVzXFxuICAgICAgICA0LjApO1xcblxcbiAgICBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogdmVjNChhX3BvcywgMC4wLCAxLjApO1xcbiAgICBnbF9Qb3NpdGlvbi54eSArPSBhX2V4dHJ1ZGUgKiB1X2V4dHJ1ZGVfc2NhbGUgKiBnbF9Qb3NpdGlvbi53ICogY29sbGlzaW9uX3BlcnNwZWN0aXZlX3JhdGlvO1xcblxcbiAgICB2X3BsYWNlZCA9IGFfcGxhY2VkLng7XFxuICAgIHZfbm90VXNlZCA9IGFfcGxhY2VkLnk7XFxufVxcblwifSxjb2xsaXNpb25DaXJjbGU6e2ZyYWdtZW50U291cmNlOlwidW5pZm9ybSBmbG9hdCB1X292ZXJzY2FsZV9mYWN0b3I7XFxuXFxudmFyeWluZyBmbG9hdCB2X3BsYWNlZDtcXG52YXJ5aW5nIGZsb2F0IHZfbm90VXNlZDtcXG52YXJ5aW5nIGZsb2F0IHZfcmFkaXVzO1xcbnZhcnlpbmcgdmVjMiB2X2V4dHJ1ZGU7XFxudmFyeWluZyB2ZWMyIHZfZXh0cnVkZV9zY2FsZTtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGZsb2F0IGFscGhhID0gMC41O1xcblxcbiAgICAvLyBSZWQgPSBjb2xsaXNpb24sIGhpZGUgbGFiZWxcXG4gICAgdmVjNCBjb2xvciA9IHZlYzQoMS4wLCAwLjAsIDAuMCwgMS4wKSAqIGFscGhhO1xcblxcbiAgICAvLyBCbHVlID0gbm8gY29sbGlzaW9uLCBsYWJlbCBpcyBzaG93aW5nXFxuICAgIGlmICh2X3BsYWNlZCA+IDAuNSkge1xcbiAgICAgICAgY29sb3IgPSB2ZWM0KDAuMCwgMC4wLCAxLjAsIDAuNSkgKiBhbHBoYTtcXG4gICAgfVxcblxcbiAgICBpZiAodl9ub3RVc2VkID4gMC41KSB7XFxuICAgICAgICAvLyBUaGlzIGJveCBub3QgdXNlZCwgZmFkZSBpdCBvdXRcXG4gICAgICAgIGNvbG9yICo9IC4yO1xcbiAgICB9XFxuXFxuICAgIGZsb2F0IGV4dHJ1ZGVfc2NhbGVfbGVuZ3RoID0gbGVuZ3RoKHZfZXh0cnVkZV9zY2FsZSk7XFxuICAgIGZsb2F0IGV4dHJ1ZGVfbGVuZ3RoID0gbGVuZ3RoKHZfZXh0cnVkZSkgKiBleHRydWRlX3NjYWxlX2xlbmd0aDtcXG4gICAgZmxvYXQgc3Ryb2tlX3dpZHRoID0gMTUuMCAqIGV4dHJ1ZGVfc2NhbGVfbGVuZ3RoIC8gdV9vdmVyc2NhbGVfZmFjdG9yO1xcbiAgICBmbG9hdCByYWRpdXMgPSB2X3JhZGl1cyAqIGV4dHJ1ZGVfc2NhbGVfbGVuZ3RoO1xcblxcbiAgICBmbG9hdCBkaXN0YW5jZV90b19lZGdlID0gYWJzKGV4dHJ1ZGVfbGVuZ3RoIC0gcmFkaXVzKTtcXG4gICAgZmxvYXQgb3BhY2l0eV90ID0gc21vb3Roc3RlcCgtc3Ryb2tlX3dpZHRoLCAwLjAsIC1kaXN0YW5jZV90b19lZGdlKTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gb3BhY2l0eV90ICogY29sb3I7XFxufVxcblwiLHZlcnRleFNvdXJjZTpcImF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcbmF0dHJpYnV0ZSB2ZWMyIGFfYW5jaG9yX3BvcztcXG5hdHRyaWJ1dGUgdmVjMiBhX2V4dHJ1ZGU7XFxuYXR0cmlidXRlIHZlYzIgYV9wbGFjZWQ7XFxuXFxudW5pZm9ybSBtYXQ0IHVfbWF0cml4O1xcbnVuaWZvcm0gdmVjMiB1X2V4dHJ1ZGVfc2NhbGU7XFxudW5pZm9ybSBmbG9hdCB1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2U7XFxuXFxudmFyeWluZyBmbG9hdCB2X3BsYWNlZDtcXG52YXJ5aW5nIGZsb2F0IHZfbm90VXNlZDtcXG52YXJ5aW5nIGZsb2F0IHZfcmFkaXVzO1xcblxcbnZhcnlpbmcgdmVjMiB2X2V4dHJ1ZGU7XFxudmFyeWluZyB2ZWMyIHZfZXh0cnVkZV9zY2FsZTtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIHZlYzQgcHJvamVjdGVkUG9pbnQgPSB1X21hdHJpeCAqIHZlYzQoYV9hbmNob3JfcG9zLCAwLCAxKTtcXG4gICAgaGlnaHAgZmxvYXQgY2FtZXJhX3RvX2FuY2hvcl9kaXN0YW5jZSA9IHByb2plY3RlZFBvaW50Lnc7XFxuICAgIGhpZ2hwIGZsb2F0IGNvbGxpc2lvbl9wZXJzcGVjdGl2ZV9yYXRpbyA9IGNsYW1wKFxcbiAgICAgICAgMC41ICsgMC41ICogKHVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZSAvIGNhbWVyYV90b19hbmNob3JfZGlzdGFuY2UpLFxcbiAgICAgICAgMC4wLCAvLyBQcmV2ZW50cyBvdmVyc2l6ZWQgbmVhci1maWVsZCBjaXJjbGVzIGluIHBpdGNoZWQvb3Zlcnpvb21lZCB0aWxlc1xcbiAgICAgICAgNC4wKTtcXG5cXG4gICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHZlYzQoYV9wb3MsIDAuMCwgMS4wKTtcXG5cXG4gICAgaGlnaHAgZmxvYXQgcGFkZGluZ19mYWN0b3IgPSAxLjI7IC8vIFBhZCB0aGUgdmVydGljZXMgc2xpZ2h0bHkgdG8gbWFrZSByb29tIGZvciBhbnRpLWFsaWFzIGJsdXJcXG4gICAgZ2xfUG9zaXRpb24ueHkgKz0gYV9leHRydWRlICogdV9leHRydWRlX3NjYWxlICogcGFkZGluZ19mYWN0b3IgKiBnbF9Qb3NpdGlvbi53ICogY29sbGlzaW9uX3BlcnNwZWN0aXZlX3JhdGlvO1xcblxcbiAgICB2X3BsYWNlZCA9IGFfcGxhY2VkLng7XFxuICAgIHZfbm90VXNlZCA9IGFfcGxhY2VkLnk7XFxuICAgIHZfcmFkaXVzID0gYWJzKGFfZXh0cnVkZS55KTsgLy8gV2UgZG9uJ3QgcGl0Y2ggdGhlIGNpcmNsZXMsIHNvIGJvdGggdW5pdHMgb2YgdGhlIGV4dHJ1c2lvbiB2ZWN0b3IgYXJlIGVxdWFsIGluIG1hZ25pdHVkZSB0byB0aGUgcmFkaXVzXFxuXFxuICAgIHZfZXh0cnVkZSA9IGFfZXh0cnVkZSAqIHBhZGRpbmdfZmFjdG9yO1xcbiAgICB2X2V4dHJ1ZGVfc2NhbGUgPSB1X2V4dHJ1ZGVfc2NhbGUgKiB1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2UgKiBjb2xsaXNpb25fcGVyc3BlY3RpdmVfcmF0aW87XFxufVxcblwifSxkZWJ1Zzp7ZnJhZ21lbnRTb3VyY2U6XCJ1bmlmb3JtIGhpZ2hwIHZlYzQgdV9jb2xvcjtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGdsX0ZyYWdDb2xvciA9IHVfY29sb3I7XFxufVxcblwiLHZlcnRleFNvdXJjZTpcImF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcblxcbnVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGdsX1Bvc2l0aW9uID0gdV9tYXRyaXggKiB2ZWM0KGFfcG9zLCAwLCAxKTtcXG59XFxuXCJ9LGZpbGw6e2ZyYWdtZW50U291cmNlOlwiI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCB2ZWM0IGNvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgY29sb3JcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxuICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yICogb3BhY2l0eTtcXG5cXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XFxuXCIsdmVydGV4U291cmNlOlwiYXR0cmlidXRlIHZlYzIgYV9wb3M7XFxuXFxudW5pZm9ybSBtYXQ0IHVfbWF0cml4O1xcblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBjb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGNvbG9yXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcblxcbiAgICBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogdmVjNChhX3BvcywgMCwgMSk7XFxufVxcblwifSxmaWxsT3V0bGluZTp7ZnJhZ21lbnRTb3VyY2U6XCIjcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgb3V0bGluZV9jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxudmFyeWluZyB2ZWMyIHZfcG9zO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBvdXRsaW5lX2NvbG9yXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcblxcbiAgICBmbG9hdCBkaXN0ID0gbGVuZ3RoKHZfcG9zIC0gZ2xfRnJhZ0Nvb3JkLnh5KTtcXG4gICAgZmxvYXQgYWxwaGEgPSAxLjAgLSBzbW9vdGhzdGVwKDAuMCwgMS4wLCBkaXN0KTtcXG4gICAgZ2xfRnJhZ0NvbG9yID0gb3V0bGluZV9jb2xvciAqIChhbHBoYSAqIG9wYWNpdHkpO1xcblxcbiNpZmRlZiBPVkVSRFJBV19JTlNQRUNUT1JcXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbiNlbmRpZlxcbn1cXG5cIix2ZXJ0ZXhTb3VyY2U6XCJhdHRyaWJ1dGUgdmVjMiBhX3BvcztcXG5cXG51bmlmb3JtIG1hdDQgdV9tYXRyaXg7XFxudW5pZm9ybSB2ZWMyIHVfd29ybGQ7XFxuXFxudmFyeWluZyB2ZWMyIHZfcG9zO1xcblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBvdXRsaW5lX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgb3V0bGluZV9jb2xvclxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5cXG4gICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHZlYzQoYV9wb3MsIDAsIDEpO1xcbiAgICB2X3BvcyA9IChnbF9Qb3NpdGlvbi54eSAvIGdsX1Bvc2l0aW9uLncgKyAxLjApIC8gMi4wICogdV93b3JsZDtcXG59XFxuXCJ9LGZpbGxPdXRsaW5lUGF0dGVybjp7ZnJhZ21lbnRTb3VyY2U6XCJ1bmlmb3JtIHZlYzIgdV9wYXR0ZXJuX3RsX2E7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9icl9hO1xcbnVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fdGxfYjtcXG51bmlmb3JtIHZlYzIgdV9wYXR0ZXJuX2JyX2I7XFxudW5pZm9ybSB2ZWMyIHVfdGV4c2l6ZTtcXG51bmlmb3JtIGZsb2F0IHVfbWl4O1xcblxcbnVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7XFxuXFxudmFyeWluZyB2ZWMyIHZfcG9zX2E7XFxudmFyeWluZyB2ZWMyIHZfcG9zX2I7XFxudmFyeWluZyB2ZWMyIHZfcG9zO1xcblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5cXG4gICAgdmVjMiBpbWFnZWNvb3JkID0gbW9kKHZfcG9zX2EsIDEuMCk7XFxuICAgIHZlYzIgcG9zID0gbWl4KHVfcGF0dGVybl90bF9hIC8gdV90ZXhzaXplLCB1X3BhdHRlcm5fYnJfYSAvIHVfdGV4c2l6ZSwgaW1hZ2Vjb29yZCk7XFxuICAgIHZlYzQgY29sb3IxID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHBvcyk7XFxuXFxuICAgIHZlYzIgaW1hZ2Vjb29yZF9iID0gbW9kKHZfcG9zX2IsIDEuMCk7XFxuICAgIHZlYzIgcG9zMiA9IG1peCh1X3BhdHRlcm5fdGxfYiAvIHVfdGV4c2l6ZSwgdV9wYXR0ZXJuX2JyX2IgLyB1X3RleHNpemUsIGltYWdlY29vcmRfYik7XFxuICAgIHZlYzQgY29sb3IyID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHBvczIpO1xcblxcbiAgICAvLyBmaW5kIGRpc3RhbmNlIHRvIG91dGxpbmUgZm9yIGFscGhhIGludGVycG9sYXRpb25cXG5cXG4gICAgZmxvYXQgZGlzdCA9IGxlbmd0aCh2X3BvcyAtIGdsX0ZyYWdDb29yZC54eSk7XFxuICAgIGZsb2F0IGFscGhhID0gMS4wIC0gc21vb3Roc3RlcCgwLjAsIDEuMCwgZGlzdCk7XFxuXFxuXFxuICAgIGdsX0ZyYWdDb2xvciA9IG1peChjb2xvcjEsIGNvbG9yMiwgdV9taXgpICogYWxwaGEgKiBvcGFjaXR5O1xcblxcbiNpZmRlZiBPVkVSRFJBV19JTlNQRUNUT1JcXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbiNlbmRpZlxcbn1cXG5cIix2ZXJ0ZXhTb3VyY2U6XCJ1bmlmb3JtIG1hdDQgdV9tYXRyaXg7XFxudW5pZm9ybSB2ZWMyIHVfd29ybGQ7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9zaXplX2E7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9zaXplX2I7XFxudW5pZm9ybSB2ZWMyIHVfcGl4ZWxfY29vcmRfdXBwZXI7XFxudW5pZm9ybSB2ZWMyIHVfcGl4ZWxfY29vcmRfbG93ZXI7XFxudW5pZm9ybSBmbG9hdCB1X3NjYWxlX2E7XFxudW5pZm9ybSBmbG9hdCB1X3NjYWxlX2I7XFxudW5pZm9ybSBmbG9hdCB1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzO1xcblxcbmF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcblxcbnZhcnlpbmcgdmVjMiB2X3Bvc19hO1xcbnZhcnlpbmcgdmVjMiB2X3Bvc19iO1xcbnZhcnlpbmcgdmVjMiB2X3BvcztcXG5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxuICAgIGdsX1Bvc2l0aW9uID0gdV9tYXRyaXggKiB2ZWM0KGFfcG9zLCAwLCAxKTtcXG5cXG4gICAgdl9wb3NfYSA9IGdldF9wYXR0ZXJuX3Bvcyh1X3BpeGVsX2Nvb3JkX3VwcGVyLCB1X3BpeGVsX2Nvb3JkX2xvd2VyLCB1X3NjYWxlX2EgKiB1X3BhdHRlcm5fc2l6ZV9hLCB1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzLCBhX3Bvcyk7XFxuICAgIHZfcG9zX2IgPSBnZXRfcGF0dGVybl9wb3ModV9waXhlbF9jb29yZF91cHBlciwgdV9waXhlbF9jb29yZF9sb3dlciwgdV9zY2FsZV9iICogdV9wYXR0ZXJuX3NpemVfYiwgdV90aWxlX3VuaXRzX3RvX3BpeGVscywgYV9wb3MpO1xcblxcbiAgICB2X3BvcyA9IChnbF9Qb3NpdGlvbi54eSAvIGdsX1Bvc2l0aW9uLncgKyAxLjApIC8gMi4wICogdV93b3JsZDtcXG59XFxuXCJ9LGZpbGxQYXR0ZXJuOntmcmFnbWVudFNvdXJjZTpcInVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fdGxfYTtcXG51bmlmb3JtIHZlYzIgdV9wYXR0ZXJuX2JyX2E7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl90bF9iO1xcbnVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fYnJfYjtcXG51bmlmb3JtIHZlYzIgdV90ZXhzaXplO1xcbnVuaWZvcm0gZmxvYXQgdV9taXg7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcXG5cXG52YXJ5aW5nIHZlYzIgdl9wb3NfYTtcXG52YXJ5aW5nIHZlYzIgdl9wb3NfYjtcXG5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxuICAgIHZlYzIgaW1hZ2Vjb29yZCA9IG1vZCh2X3Bvc19hLCAxLjApO1xcbiAgICB2ZWMyIHBvcyA9IG1peCh1X3BhdHRlcm5fdGxfYSAvIHVfdGV4c2l6ZSwgdV9wYXR0ZXJuX2JyX2EgLyB1X3RleHNpemUsIGltYWdlY29vcmQpO1xcbiAgICB2ZWM0IGNvbG9yMSA9IHRleHR1cmUyRCh1X2ltYWdlLCBwb3MpO1xcblxcbiAgICB2ZWMyIGltYWdlY29vcmRfYiA9IG1vZCh2X3Bvc19iLCAxLjApO1xcbiAgICB2ZWMyIHBvczIgPSBtaXgodV9wYXR0ZXJuX3RsX2IgLyB1X3RleHNpemUsIHVfcGF0dGVybl9icl9iIC8gdV90ZXhzaXplLCBpbWFnZWNvb3JkX2IpO1xcbiAgICB2ZWM0IGNvbG9yMiA9IHRleHR1cmUyRCh1X2ltYWdlLCBwb3MyKTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gbWl4KGNvbG9yMSwgY29sb3IyLCB1X21peCkgKiBvcGFjaXR5O1xcblxcbiNpZmRlZiBPVkVSRFJBV19JTlNQRUNUT1JcXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbiNlbmRpZlxcbn1cXG5cIix2ZXJ0ZXhTb3VyY2U6XCJ1bmlmb3JtIG1hdDQgdV9tYXRyaXg7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9zaXplX2E7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9zaXplX2I7XFxudW5pZm9ybSB2ZWMyIHVfcGl4ZWxfY29vcmRfdXBwZXI7XFxudW5pZm9ybSB2ZWMyIHVfcGl4ZWxfY29vcmRfbG93ZXI7XFxudW5pZm9ybSBmbG9hdCB1X3NjYWxlX2E7XFxudW5pZm9ybSBmbG9hdCB1X3NjYWxlX2I7XFxudW5pZm9ybSBmbG9hdCB1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzO1xcblxcbmF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcblxcbnZhcnlpbmcgdmVjMiB2X3Bvc19hO1xcbnZhcnlpbmcgdmVjMiB2X3Bvc19iO1xcblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5cXG4gICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHZlYzQoYV9wb3MsIDAsIDEpO1xcblxcbiAgICB2X3Bvc19hID0gZ2V0X3BhdHRlcm5fcG9zKHVfcGl4ZWxfY29vcmRfdXBwZXIsIHVfcGl4ZWxfY29vcmRfbG93ZXIsIHVfc2NhbGVfYSAqIHVfcGF0dGVybl9zaXplX2EsIHVfdGlsZV91bml0c190b19waXhlbHMsIGFfcG9zKTtcXG4gICAgdl9wb3NfYiA9IGdldF9wYXR0ZXJuX3Bvcyh1X3BpeGVsX2Nvb3JkX3VwcGVyLCB1X3BpeGVsX2Nvb3JkX2xvd2VyLCB1X3NjYWxlX2IgKiB1X3BhdHRlcm5fc2l6ZV9iLCB1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzLCBhX3Bvcyk7XFxufVxcblwifSxmaWxsRXh0cnVzaW9uOntmcmFnbWVudFNvdXJjZTpcInZhcnlpbmcgdmVjNCB2X2NvbG9yO1xcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBiYXNlXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGhlaWdodFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBjb2xvclxcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBiYXNlXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgaGVpZ2h0XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgY29sb3JcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gdl9jb2xvcjtcXG5cXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XFxuXCIsdmVydGV4U291cmNlOlwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O1xcbnVuaWZvcm0gdmVjMyB1X2xpZ2h0Y29sb3I7XFxudW5pZm9ybSBsb3dwIHZlYzMgdV9saWdodHBvcztcXG51bmlmb3JtIGxvd3AgZmxvYXQgdV9saWdodGludGVuc2l0eTtcXG5cXG5hdHRyaWJ1dGUgdmVjMiBhX3BvcztcXG5hdHRyaWJ1dGUgdmVjNCBhX25vcm1hbF9lZDtcXG5cXG52YXJ5aW5nIHZlYzQgdl9jb2xvcjtcXG5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgYmFzZVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBoZWlnaHRcXG5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgY29sb3JcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgYmFzZVxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGhlaWdodFxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGNvbG9yXFxuXFxuICAgIHZlYzMgbm9ybWFsID0gYV9ub3JtYWxfZWQueHl6O1xcblxcbiAgICBiYXNlID0gbWF4KDAuMCwgYmFzZSk7XFxuICAgIGhlaWdodCA9IG1heCgwLjAsIGhlaWdodCk7XFxuXFxuICAgIGZsb2F0IHQgPSBtb2Qobm9ybWFsLngsIDIuMCk7XFxuXFxuICAgIGdsX1Bvc2l0aW9uID0gdV9tYXRyaXggKiB2ZWM0KGFfcG9zLCB0ID4gMC4wID8gaGVpZ2h0IDogYmFzZSwgMSk7XFxuXFxuICAgIC8vIFJlbGF0aXZlIGx1bWluYW5jZSAoaG93IGRhcmsvYnJpZ2h0IGlzIHRoZSBzdXJmYWNlIGNvbG9yPylcXG4gICAgZmxvYXQgY29sb3J2YWx1ZSA9IGNvbG9yLnIgKiAwLjIxMjYgKyBjb2xvci5nICogMC43MTUyICsgY29sb3IuYiAqIDAuMDcyMjtcXG5cXG4gICAgdl9jb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcXG5cXG4gICAgLy8gQWRkIHNsaWdodCBhbWJpZW50IGxpZ2h0aW5nIHNvIG5vIGV4dHJ1c2lvbnMgYXJlIHRvdGFsbHkgYmxhY2tcXG4gICAgdmVjNCBhbWJpZW50bGlnaHQgPSB2ZWM0KDAuMDMsIDAuMDMsIDAuMDMsIDEuMCk7XFxuICAgIGNvbG9yICs9IGFtYmllbnRsaWdodDtcXG5cXG4gICAgLy8gQ2FsY3VsYXRlIGNvcyh0aGV0YSksIHdoZXJlIHRoZXRhIGlzIHRoZSBhbmdsZSBiZXR3ZWVuIHN1cmZhY2Ugbm9ybWFsIGFuZCBkaWZmdXNlIGxpZ2h0IHJheVxcbiAgICBmbG9hdCBkaXJlY3Rpb25hbCA9IGNsYW1wKGRvdChub3JtYWwgLyAxNjM4NC4wLCB1X2xpZ2h0cG9zKSwgMC4wLCAxLjApO1xcblxcbiAgICAvLyBBZGp1c3QgZGlyZWN0aW9uYWwgc28gdGhhdFxcbiAgICAvLyB0aGUgcmFuZ2Ugb2YgdmFsdWVzIGZvciBoaWdobGlnaHQvc2hhZGluZyBpcyBuYXJyb3dlclxcbiAgICAvLyB3aXRoIGxvd2VyIGxpZ2h0IGludGVuc2l0eVxcbiAgICAvLyBhbmQgd2l0aCBsaWdodGVyL2JyaWdodGVyIHN1cmZhY2UgY29sb3JzXFxuICAgIGRpcmVjdGlvbmFsID0gbWl4KCgxLjAgLSB1X2xpZ2h0aW50ZW5zaXR5KSwgbWF4KCgxLjAgLSBjb2xvcnZhbHVlICsgdV9saWdodGludGVuc2l0eSksIDEuMCksIGRpcmVjdGlvbmFsKTtcXG5cXG4gICAgLy8gQWRkIGdyYWRpZW50IGFsb25nIHogYXhpcyBvZiBzaWRlIHN1cmZhY2VzXFxuICAgIGlmIChub3JtYWwueSAhPSAwLjApIHtcXG4gICAgICAgIGRpcmVjdGlvbmFsICo9IGNsYW1wKCh0ICsgYmFzZSkgKiBwb3coaGVpZ2h0IC8gMTUwLjAsIDAuNSksIG1peCgwLjcsIDAuOTgsIDEuMCAtIHVfbGlnaHRpbnRlbnNpdHkpLCAxLjApO1xcbiAgICB9XFxuXFxuICAgIC8vIEFzc2lnbiBmaW5hbCBjb2xvciBiYXNlZCBvbiBzdXJmYWNlICsgYW1iaWVudCBsaWdodCBjb2xvciwgZGlmZnVzZSBsaWdodCBkaXJlY3Rpb25hbCwgYW5kIGxpZ2h0IGNvbG9yXFxuICAgIC8vIHdpdGggbG93ZXIgYm91bmRzIGFkanVzdGVkIHRvIGh1ZSBvZiBsaWdodFxcbiAgICAvLyBzbyB0aGF0IHNoYWRpbmcgaXMgdGludGVkIHdpdGggdGhlIGNvbXBsZW1lbnRhcnkgKG9wcG9zaXRlKSBjb2xvciB0byB0aGUgbGlnaHQgY29sb3JcXG4gICAgdl9jb2xvci5yICs9IGNsYW1wKGNvbG9yLnIgKiBkaXJlY3Rpb25hbCAqIHVfbGlnaHRjb2xvci5yLCBtaXgoMC4wLCAwLjMsIDEuMCAtIHVfbGlnaHRjb2xvci5yKSwgMS4wKTtcXG4gICAgdl9jb2xvci5nICs9IGNsYW1wKGNvbG9yLmcgKiBkaXJlY3Rpb25hbCAqIHVfbGlnaHRjb2xvci5nLCBtaXgoMC4wLCAwLjMsIDEuMCAtIHVfbGlnaHRjb2xvci5nKSwgMS4wKTtcXG4gICAgdl9jb2xvci5iICs9IGNsYW1wKGNvbG9yLmIgKiBkaXJlY3Rpb25hbCAqIHVfbGlnaHRjb2xvci5iLCBtaXgoMC4wLCAwLjMsIDEuMCAtIHVfbGlnaHRjb2xvci5iKSwgMS4wKTtcXG59XFxuXCJ9LGZpbGxFeHRydXNpb25QYXR0ZXJuOntmcmFnbWVudFNvdXJjZTpcInVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fdGxfYTtcXG51bmlmb3JtIHZlYzIgdV9wYXR0ZXJuX2JyX2E7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl90bF9iO1xcbnVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fYnJfYjtcXG51bmlmb3JtIHZlYzIgdV90ZXhzaXplO1xcbnVuaWZvcm0gZmxvYXQgdV9taXg7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcXG5cXG52YXJ5aW5nIHZlYzIgdl9wb3NfYTtcXG52YXJ5aW5nIHZlYzIgdl9wb3NfYjtcXG52YXJ5aW5nIHZlYzQgdl9saWdodGluZztcXG5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgYmFzZVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBoZWlnaHRcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgYmFzZVxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGhlaWdodFxcblxcbiAgICB2ZWMyIGltYWdlY29vcmQgPSBtb2Qodl9wb3NfYSwgMS4wKTtcXG4gICAgdmVjMiBwb3MgPSBtaXgodV9wYXR0ZXJuX3RsX2EgLyB1X3RleHNpemUsIHVfcGF0dGVybl9icl9hIC8gdV90ZXhzaXplLCBpbWFnZWNvb3JkKTtcXG4gICAgdmVjNCBjb2xvcjEgPSB0ZXh0dXJlMkQodV9pbWFnZSwgcG9zKTtcXG5cXG4gICAgdmVjMiBpbWFnZWNvb3JkX2IgPSBtb2Qodl9wb3NfYiwgMS4wKTtcXG4gICAgdmVjMiBwb3MyID0gbWl4KHVfcGF0dGVybl90bF9iIC8gdV90ZXhzaXplLCB1X3BhdHRlcm5fYnJfYiAvIHVfdGV4c2l6ZSwgaW1hZ2Vjb29yZF9iKTtcXG4gICAgdmVjNCBjb2xvcjIgPSB0ZXh0dXJlMkQodV9pbWFnZSwgcG9zMik7XFxuXFxuICAgIHZlYzQgbWl4ZWRDb2xvciA9IG1peChjb2xvcjEsIGNvbG9yMiwgdV9taXgpO1xcblxcbiAgICBnbF9GcmFnQ29sb3IgPSBtaXhlZENvbG9yICogdl9saWdodGluZztcXG5cXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XFxuXCIsdmVydGV4U291cmNlOlwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O1xcbnVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fc2l6ZV9hO1xcbnVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fc2l6ZV9iO1xcbnVuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX3VwcGVyO1xcbnVuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX2xvd2VyO1xcbnVuaWZvcm0gZmxvYXQgdV9zY2FsZV9hO1xcbnVuaWZvcm0gZmxvYXQgdV9zY2FsZV9iO1xcbnVuaWZvcm0gZmxvYXQgdV90aWxlX3VuaXRzX3RvX3BpeGVscztcXG51bmlmb3JtIGZsb2F0IHVfaGVpZ2h0X2ZhY3RvcjtcXG5cXG51bmlmb3JtIHZlYzMgdV9saWdodGNvbG9yO1xcbnVuaWZvcm0gbG93cCB2ZWMzIHVfbGlnaHRwb3M7XFxudW5pZm9ybSBsb3dwIGZsb2F0IHVfbGlnaHRpbnRlbnNpdHk7XFxuXFxuYXR0cmlidXRlIHZlYzIgYV9wb3M7XFxuYXR0cmlidXRlIHZlYzQgYV9ub3JtYWxfZWQ7XFxuXFxudmFyeWluZyB2ZWMyIHZfcG9zX2E7XFxudmFyeWluZyB2ZWMyIHZfcG9zX2I7XFxudmFyeWluZyB2ZWM0IHZfbGlnaHRpbmc7XFxudmFyeWluZyBmbG9hdCB2X2RpcmVjdGlvbmFsO1xcblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBiYXNlXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGhlaWdodFxcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBiYXNlXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgaGVpZ2h0XFxuXFxuICAgIHZlYzMgbm9ybWFsID0gYV9ub3JtYWxfZWQueHl6O1xcbiAgICBmbG9hdCBlZGdlZGlzdGFuY2UgPSBhX25vcm1hbF9lZC53O1xcblxcbiAgICBiYXNlID0gbWF4KDAuMCwgYmFzZSk7XFxuICAgIGhlaWdodCA9IG1heCgwLjAsIGhlaWdodCk7XFxuXFxuICAgIGZsb2F0IHQgPSBtb2Qobm9ybWFsLngsIDIuMCk7XFxuICAgIGZsb2F0IHogPSB0ID4gMC4wID8gaGVpZ2h0IDogYmFzZTtcXG5cXG4gICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHZlYzQoYV9wb3MsIHosIDEpO1xcblxcbiAgICB2ZWMyIHBvcyA9IG5vcm1hbC54ID09IDEuMCAmJiBub3JtYWwueSA9PSAwLjAgJiYgbm9ybWFsLnogPT0gMTYzODQuMFxcbiAgICAgICAgPyBhX3BvcyAvLyBleHRydXNpb24gdG9wXFxuICAgICAgICA6IHZlYzIoZWRnZWRpc3RhbmNlLCB6ICogdV9oZWlnaHRfZmFjdG9yKTsgLy8gZXh0cnVzaW9uIHNpZGVcXG5cXG4gICAgdl9wb3NfYSA9IGdldF9wYXR0ZXJuX3Bvcyh1X3BpeGVsX2Nvb3JkX3VwcGVyLCB1X3BpeGVsX2Nvb3JkX2xvd2VyLCB1X3NjYWxlX2EgKiB1X3BhdHRlcm5fc2l6ZV9hLCB1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzLCBwb3MpO1xcbiAgICB2X3Bvc19iID0gZ2V0X3BhdHRlcm5fcG9zKHVfcGl4ZWxfY29vcmRfdXBwZXIsIHVfcGl4ZWxfY29vcmRfbG93ZXIsIHVfc2NhbGVfYiAqIHVfcGF0dGVybl9zaXplX2IsIHVfdGlsZV91bml0c190b19waXhlbHMsIHBvcyk7XFxuXFxuICAgIHZfbGlnaHRpbmcgPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIDEuMCk7XFxuICAgIGZsb2F0IGRpcmVjdGlvbmFsID0gY2xhbXAoZG90KG5vcm1hbCAvIDE2MzgzLjAsIHVfbGlnaHRwb3MpLCAwLjAsIDEuMCk7XFxuICAgIGRpcmVjdGlvbmFsID0gbWl4KCgxLjAgLSB1X2xpZ2h0aW50ZW5zaXR5KSwgbWF4KCgwLjUgKyB1X2xpZ2h0aW50ZW5zaXR5KSwgMS4wKSwgZGlyZWN0aW9uYWwpO1xcblxcbiAgICBpZiAobm9ybWFsLnkgIT0gMC4wKSB7XFxuICAgICAgICBkaXJlY3Rpb25hbCAqPSBjbGFtcCgodCArIGJhc2UpICogcG93KGhlaWdodCAvIDE1MC4wLCAwLjUpLCBtaXgoMC43LCAwLjk4LCAxLjAgLSB1X2xpZ2h0aW50ZW5zaXR5KSwgMS4wKTtcXG4gICAgfVxcblxcbiAgICB2X2xpZ2h0aW5nLnJnYiArPSBjbGFtcChkaXJlY3Rpb25hbCAqIHVfbGlnaHRjb2xvciwgbWl4KHZlYzMoMC4wKSwgdmVjMygwLjMpLCAxLjAgLSB1X2xpZ2h0Y29sb3IpLCB2ZWMzKDEuMCkpO1xcbn1cXG5cIn0sZXh0cnVzaW9uVGV4dHVyZTp7ZnJhZ21lbnRTb3VyY2U6XCJ1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xcbnVuaWZvcm0gZmxvYXQgdV9vcGFjaXR5O1xcbnZhcnlpbmcgdmVjMiB2X3BvcztcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3BvcykgKiB1X29wYWNpdHk7XFxuXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCk7XFxuI2VuZGlmXFxufVxcblwiLHZlcnRleFNvdXJjZTpcInVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG51bmlmb3JtIHZlYzIgdV93b3JsZDtcXG5hdHRyaWJ1dGUgdmVjMiBhX3BvcztcXG52YXJ5aW5nIHZlYzIgdl9wb3M7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogdmVjNChhX3BvcyAqIHVfd29ybGQsIDAsIDEpO1xcblxcbiAgICB2X3Bvcy54ID0gYV9wb3MueDtcXG4gICAgdl9wb3MueSA9IDEuMCAtIGFfcG9zLnk7XFxufVxcblwifSxoaWxsc2hhZGVQcmVwYXJlOntmcmFnbWVudFNvdXJjZTpcIiNpZmRlZiBHTF9FU1xcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xcbnZhcnlpbmcgdmVjMiB2X3BvcztcXG51bmlmb3JtIHZlYzIgdV9kaW1lbnNpb247XFxudW5pZm9ybSBmbG9hdCB1X3pvb207XFxudW5pZm9ybSBmbG9hdCB1X21heHpvb207XFxuXFxuZmxvYXQgZ2V0RWxldmF0aW9uKHZlYzIgY29vcmQsIGZsb2F0IGJpYXMpIHtcXG4gICAgLy8gQ29udmVydCBlbmNvZGVkIGVsZXZhdGlvbiB2YWx1ZSB0byBtZXRlcnNcXG4gICAgdmVjNCBkYXRhID0gdGV4dHVyZTJEKHVfaW1hZ2UsIGNvb3JkKSAqIDI1NS4wO1xcbiAgICByZXR1cm4gKGRhdGEuciArIGRhdGEuZyAqIDI1Ni4wICsgZGF0YS5iICogMjU2LjAgKiAyNTYuMCkgLyA0LjA7XFxufVxcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgdmVjMiBlcHNpbG9uID0gMS4wIC8gdV9kaW1lbnNpb247XFxuXFxuICAgIC8vIHF1ZXJpZWQgcGl4ZWxzOlxcbiAgICAvLyArLS0tLS0tLS0tLS0rXFxuICAgIC8vIHwgICB8ICAgfCAgIHxcXG4gICAgLy8gfCBhIHwgYiB8IGMgfFxcbiAgICAvLyB8ICAgfCAgIHwgICB8XFxuICAgIC8vICstLS0tLS0tLS0tLStcXG4gICAgLy8gfCAgIHwgICB8ICAgfFxcbiAgICAvLyB8IGQgfCBlIHwgZiB8XFxuICAgIC8vIHwgICB8ICAgfCAgIHxcXG4gICAgLy8gKy0tLS0tLS0tLS0tK1xcbiAgICAvLyB8ICAgfCAgIHwgICB8XFxuICAgIC8vIHwgZyB8IGggfCBpIHxcXG4gICAgLy8gfCAgIHwgICB8ICAgfFxcbiAgICAvLyArLS0tLS0tLS0tLS0rXFxuXFxuICAgIGZsb2F0IGEgPSBnZXRFbGV2YXRpb24odl9wb3MgKyB2ZWMyKC1lcHNpbG9uLngsIC1lcHNpbG9uLnkpLCAwLjApO1xcbiAgICBmbG9hdCBiID0gZ2V0RWxldmF0aW9uKHZfcG9zICsgdmVjMigwLCAtZXBzaWxvbi55KSwgMC4wKTtcXG4gICAgZmxvYXQgYyA9IGdldEVsZXZhdGlvbih2X3BvcyArIHZlYzIoZXBzaWxvbi54LCAtZXBzaWxvbi55KSwgMC4wKTtcXG4gICAgZmxvYXQgZCA9IGdldEVsZXZhdGlvbih2X3BvcyArIHZlYzIoLWVwc2lsb24ueCwgMCksIDAuMCk7XFxuICAgIGZsb2F0IGUgPSBnZXRFbGV2YXRpb24odl9wb3MsIDAuMCk7XFxuICAgIGZsb2F0IGYgPSBnZXRFbGV2YXRpb24odl9wb3MgKyB2ZWMyKGVwc2lsb24ueCwgMCksIDAuMCk7XFxuICAgIGZsb2F0IGcgPSBnZXRFbGV2YXRpb24odl9wb3MgKyB2ZWMyKC1lcHNpbG9uLngsIGVwc2lsb24ueSksIDAuMCk7XFxuICAgIGZsb2F0IGggPSBnZXRFbGV2YXRpb24odl9wb3MgKyB2ZWMyKDAsIGVwc2lsb24ueSksIDAuMCk7XFxuICAgIGZsb2F0IGkgPSBnZXRFbGV2YXRpb24odl9wb3MgKyB2ZWMyKGVwc2lsb24ueCwgZXBzaWxvbi55KSwgMC4wKTtcXG5cXG4gICAgLy8gaGVyZSB3ZSBkaXZpZGUgdGhlIHggYW5kIHkgc2xvcGVzIGJ5IDggKiBwaXhlbCBzaXplXFxuICAgIC8vIHdoZXJlIHBpeGVsIHNpemUgKGFrYSBtZXRlcnMvcGl4ZWwpIGlzOlxcbiAgICAvLyBjaXJjdW1mZXJlbmNlIG9mIHRoZSB3b3JsZCAvIChwaXhlbHMgcGVyIHRpbGUgKiBudW1iZXIgb2YgdGlsZXMpXFxuICAgIC8vIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG86IDggKiA0MDA3NTAxNi42ODU1Nzg1IC8gKDUxMiAqIHBvdygyLCB1X3pvb20pKVxcbiAgICAvLyB3aGljaCBjYW4gYmUgcmVkdWNlZCB0bzogcG93KDIsIDE5LjI1NjE5OTc4NTI3IC0gdV96b29tKVxcbiAgICAvLyB3ZSB3YW50IHRvIHZlcnRpY2FsbHkgZXhhZ2dlcmF0ZSB0aGUgaGlsbHNoYWRpbmcgdGhvdWdoLCBiZWNhdXNlIG90aGVyd2lzZVxcbiAgICAvLyBpdCBpcyBiYXJlbHkgbm90aWNlYWJsZSBhdCBsb3cgem9vbXMuIHRvIGRvIHRoaXMsIHdlIG11bHRpcGx5IHRoaXMgYnkgc29tZVxcbiAgICAvLyBzY2FsZSBmYWN0b3IgcG93KDIsICh1X3pvb20gLSB1X21heHpvb20pICogYSkgd2hlcmUgYSBpcyBhbiBhcmJpdHJhcnkgdmFsdWVcXG4gICAgLy8gSGVyZSB3ZSB1c2UgYT0wLjMgd2hpY2ggd29ya3Mgb3V0IHRvIHRoZSBleHByZXNzaW9uIGJlbG93LiBzZWUgXFxuICAgIC8vIG5pY2tpZGx1Z2FzaCdzIGF3ZXNvbWUgYnJlYWtkb3duIGZvciBtb3JlIGluZm9cXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBib3gtZ2wtanMvcHVsbC81Mjg2I2Rpc2N1c3Npb25fcjE0ODQxOTU1NlxcbiAgICBmbG9hdCBleGFnZ2VyYXRpb24gPSB1X3pvb20gPCAyLjAgPyAwLjQgOiB1X3pvb20gPCA0LjUgPyAwLjM1IDogMC4zO1xcblxcbiAgICB2ZWMyIGRlcml2ID0gdmVjMihcXG4gICAgICAgIChjICsgZiArIGYgKyBpKSAtIChhICsgZCArIGQgKyBnKSxcXG4gICAgICAgIChnICsgaCArIGggKyBpKSAtIChhICsgYiArIGIgKyBjKVxcbiAgICApIC8gIHBvdygyLjAsICh1X3pvb20gLSB1X21heHpvb20pICogZXhhZ2dlcmF0aW9uICsgMTkuMjU2MiAtIHVfem9vbSk7XFxuXFxuICAgIGdsX0ZyYWdDb2xvciA9IGNsYW1wKHZlYzQoXFxuICAgICAgICBkZXJpdi54IC8gMi4wICsgMC41LFxcbiAgICAgICAgZGVyaXYueSAvIDIuMCArIDAuNSxcXG4gICAgICAgIDEuMCxcXG4gICAgICAgIDEuMCksIDAuMCwgMS4wKTtcXG5cXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XFxuXCIsdmVydGV4U291cmNlOlwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O1xcblxcbmF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcbmF0dHJpYnV0ZSB2ZWMyIGFfdGV4dHVyZV9wb3M7XFxuXFxudmFyeWluZyB2ZWMyIHZfcG9zO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHZlYzQoYV9wb3MsIDAsIDEpO1xcbiAgICB2X3BvcyA9IChhX3RleHR1cmVfcG9zIC8gODE5Mi4wKSAvIDIuMCArIDAuMjU7XFxufVxcblwifSxoaWxsc2hhZGU6e2ZyYWdtZW50U291cmNlOlwidW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcXG52YXJ5aW5nIHZlYzIgdl9wb3M7XFxuXFxudW5pZm9ybSB2ZWMyIHVfbGF0cmFuZ2U7XFxudW5pZm9ybSB2ZWMyIHVfbGlnaHQ7XFxudW5pZm9ybSB2ZWM0IHVfc2hhZG93O1xcbnVuaWZvcm0gdmVjNCB1X2hpZ2hsaWdodDtcXG51bmlmb3JtIHZlYzQgdV9hY2NlbnQ7XFxuXFxuI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU4OTc5M1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgdmVjNCBwaXhlbCA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3Bvcyk7XFxuXFxuICAgIHZlYzIgZGVyaXYgPSAoKHBpeGVsLnJnICogMi4wKSAtIDEuMCk7XFxuXFxuICAgIC8vIFdlIGRpdmlkZSB0aGUgc2xvcGUgYnkgYSBzY2FsZSBmYWN0b3IgYmFzZWQgb24gdGhlIGNvc2luIG9mIHRoZSBwaXhlbCdzIGFwcHJveGltYXRlIGxhdGl0dWRlXFxuICAgIC8vIHRvIGFjY291bnQgZm9yIG1lcmNhdG9yIHByb2plY3Rpb24gZGlzdG9ydGlvbi4gc2VlICM0ODA3IGZvciBkZXRhaWxzXFxuICAgIGZsb2F0IHNjYWxlRmFjdG9yID0gY29zKHJhZGlhbnMoKHVfbGF0cmFuZ2VbMF0gLSB1X2xhdHJhbmdlWzFdKSAqICgxLjAgLSB2X3Bvcy55KSArIHVfbGF0cmFuZ2VbMV0pKTtcXG4gICAgLy8gV2UgYWxzbyBtdWx0aXBseSB0aGUgc2xvcGUgYnkgYW4gYXJiaXRyYXJ5IHotZmFjdG9yIG9mIDEuMjVcXG4gICAgZmxvYXQgc2xvcGUgPSBhdGFuKDEuMjUgKiBsZW5ndGgoZGVyaXYpIC8gc2NhbGVGYWN0b3IpO1xcbiAgICBmbG9hdCBhc3BlY3QgPSBkZXJpdi54ICE9IDAuMCA/IGF0YW4oZGVyaXYueSwgLWRlcml2LngpIDogUEkgLyAyLjAgKiAoZGVyaXYueSA+IDAuMCA/IDEuMCA6IC0xLjApO1xcblxcbiAgICBmbG9hdCBpbnRlbnNpdHkgPSB1X2xpZ2h0Lng7XFxuICAgIC8vIFdlIGFkZCBQSSB0byBtYWtlIHRoaXMgcHJvcGVydHkgbWF0Y2ggdGhlIGdsb2JhbCBsaWdodCBvYmplY3QsIHdoaWNoIGFkZHMgUEkvMiB0byB0aGUgbGlnaHQncyBhemltdXRoYWxcXG4gICAgLy8gcG9zaXRpb24gcHJvcGVydHkgdG8gYWNjb3VudCBmb3IgMGRlZyBjb3JyZXNwb25kaW5nIHRvIG5vcnRoL3RoZSB0b3Agb2YgdGhlIHZpZXdwb3J0IGluIHRoZSBzdHlsZSBzcGVjXFxuICAgIC8vIGFuZCB0aGUgb3JpZ2luYWwgc2hhZGVyIHdhcyB3cml0dGVuIHRvIGFjY2VwdCAoLWlsbHVtaW5hdGlvbkRpcmVjdGlvbiAtIDkwKSBhcyB0aGUgYXppbXV0aGFsLlxcbiAgICBmbG9hdCBhemltdXRoID0gdV9saWdodC55ICsgUEk7XFxuXFxuICAgIC8vIFdlIHNjYWxlIHRoZSBzbG9wZSBleHBvbmVudGlhbGx5IGJhc2VkIG9uIGludGVuc2l0eSwgdXNpbmcgYSBjYWxjdWxhdGlvbiBzaW1pbGFyIHRvXFxuICAgIC8vIHRoZSBleHBvbmVudGlhbCBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uIGluIHRoZSBzdHlsZSBzcGVjOlxcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L21hcGJveC1nbC1qcy9ibG9iL21hc3Rlci9zcmMvc3R5bGUtc3BlYy9leHByZXNzaW9uL2RlZmluaXRpb25zL2ludGVycG9sYXRlLmpzI0wyMTctTDIyOFxcbiAgICAvLyBzbyB0aGF0IGhpZ2hlciBpbnRlbnNpdHkgdmFsdWVzIGNyZWF0ZSBtb3JlIG9wYXF1ZSBoaWxsc2hhZGluZy5cXG4gICAgZmxvYXQgYmFzZSA9IDEuODc1IC0gaW50ZW5zaXR5ICogMS43NTtcXG4gICAgZmxvYXQgbWF4VmFsdWUgPSAwLjUgKiBQSTtcXG4gICAgZmxvYXQgc2NhbGVkU2xvcGUgPSBpbnRlbnNpdHkgIT0gMC41ID8gKChwb3coYmFzZSwgc2xvcGUpIC0gMS4wKSAvIChwb3coYmFzZSwgbWF4VmFsdWUpIC0gMS4wKSkgKiBtYXhWYWx1ZSA6IHNsb3BlO1xcblxcbiAgICAvLyBUaGUgYWNjZW50IGNvbG9yIGlzIGNhbGN1bGF0ZWQgd2l0aCB0aGUgY29zaW5lIG9mIHRoZSBzbG9wZSB3aGlsZSB0aGUgc2hhZGUgY29sb3IgaXMgY2FsY3VsYXRlZCB3aXRoIHRoZSBzaW5lXFxuICAgIC8vIHNvIHRoYXQgdGhlIGFjY2VudCBjb2xvcidzIHJhdGUgb2YgY2hhbmdlIGVhc2VzIGluIHdoaWxlIHRoZSBzaGFkZSBjb2xvcidzIGVhc2VzIG91dC5cXG4gICAgZmxvYXQgYWNjZW50ID0gY29zKHNjYWxlZFNsb3BlKTtcXG4gICAgLy8gV2UgbXVsdGlwbHkgYm90aCB0aGUgYWNjZW50IGFuZCBzaGFkZSBjb2xvciBieSBhIGNsYW1wZWQgaW50ZW5zaXR5IHZhbHVlXFxuICAgIC8vIHNvIHRoYXQgaW50ZW5zaXRpZXMgPj0gMC41IGRvIG5vdCBhZGRpdGlvbmFsbHkgYWZmZWN0IHRoZSBjb2xvciB2YWx1ZXNcXG4gICAgLy8gd2hpbGUgaW50ZW5zaXR5IHZhbHVlcyA8IDAuNSBtYWtlIHRoZSBvdmVyYWxsIGNvbG9yIG1vcmUgdHJhbnNwYXJlbnQuXFxuICAgIHZlYzQgYWNjZW50X2NvbG9yID0gKDEuMCAtIGFjY2VudCkgKiB1X2FjY2VudCAqIGNsYW1wKGludGVuc2l0eSAqIDIuMCwgMC4wLCAxLjApO1xcbiAgICBmbG9hdCBzaGFkZSA9IGFicyhtb2QoKGFzcGVjdCArIGF6aW11dGgpIC8gUEkgKyAwLjUsIDIuMCkgLSAxLjApO1xcbiAgICB2ZWM0IHNoYWRlX2NvbG9yID0gbWl4KHVfc2hhZG93LCB1X2hpZ2hsaWdodCwgc2hhZGUpICogc2luKHNjYWxlZFNsb3BlKSAqIGNsYW1wKGludGVuc2l0eSAqIDIuMCwgMC4wLCAxLjApO1xcbiAgICBnbF9GcmFnQ29sb3IgPSBhY2NlbnRfY29sb3IgKiAoMS4wIC0gc2hhZGVfY29sb3IuYSkgKyBzaGFkZV9jb2xvcjtcXG5cXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XFxuXCIsdmVydGV4U291cmNlOlwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O1xcblxcbmF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcbmF0dHJpYnV0ZSB2ZWMyIGFfdGV4dHVyZV9wb3M7XFxuXFxudmFyeWluZyB2ZWMyIHZfcG9zO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHZlYzQoYV9wb3MsIDAsIDEpO1xcbiAgICB2X3BvcyA9IGFfdGV4dHVyZV9wb3MgLyA4MTkyLjA7XFxufVxcblwifSxsaW5lOntmcmFnbWVudFNvdXJjZTpcIiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBjb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBibHVyXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5cXG52YXJ5aW5nIHZlYzIgdl93aWR0aDI7XFxudmFyeWluZyB2ZWMyIHZfbm9ybWFsO1xcbnZhcnlpbmcgZmxvYXQgdl9nYW1tYV9zY2FsZTtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgY29sb3JcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBibHVyXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcblxcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGRpc3RhbmNlIG9mIHRoZSBwaXhlbCBmcm9tIHRoZSBsaW5lIGluIHBpeGVscy5cXG4gICAgZmxvYXQgZGlzdCA9IGxlbmd0aCh2X25vcm1hbCkgKiB2X3dpZHRoMi5zO1xcblxcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGFudGlhbGlhc2luZyBmYWRlIGZhY3Rvci4gVGhpcyBpcyBlaXRoZXIgd2hlbiBmYWRpbmcgaW5cXG4gICAgLy8gdGhlIGxpbmUgaW4gY2FzZSBvZiBhbiBvZmZzZXQgbGluZSAodl93aWR0aDIudCkgb3Igd2hlbiBmYWRpbmcgb3V0XFxuICAgIC8vICh2X3dpZHRoMi5zKVxcbiAgICBmbG9hdCBibHVyMiA9IChibHVyICsgMS4wIC8gREVWSUNFX1BJWEVMX1JBVElPKSAqIHZfZ2FtbWFfc2NhbGU7XFxuICAgIGZsb2F0IGFscGhhID0gY2xhbXAobWluKGRpc3QgLSAodl93aWR0aDIudCAtIGJsdXIyKSwgdl93aWR0aDIucyAtIGRpc3QpIC8gYmx1cjIsIDAuMCwgMS4wKTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gY29sb3IgKiAoYWxwaGEgKiBvcGFjaXR5KTtcXG5cXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XFxuXCIsdmVydGV4U291cmNlOlwiXFxuXFxuLy8gdGhlIGRpc3RhbmNlIG92ZXIgd2hpY2ggdGhlIGxpbmUgZWRnZSBmYWRlcyBvdXQuXFxuLy8gUmV0aW5hIGRldmljZXMgbmVlZCBhIHNtYWxsZXIgZGlzdGFuY2UgdG8gYXZvaWQgYWxpYXNpbmcuXFxuI2RlZmluZSBBTlRJQUxJQVNJTkcgMS4wIC8gREVWSUNFX1BJWEVMX1JBVElPIC8gMi4wXFxuXFxuLy8gZmxvb3IoMTI3IC8gMikgPT0gNjMuMFxcbi8vIHRoZSBtYXhpbXVtIGFsbG93ZWQgbWl0ZXIgbGltaXQgaXMgMi4wIGF0IHRoZSBtb21lbnQuIHRoZSBleHRydWRlIG5vcm1hbCBpc1xcbi8vIHN0b3JlZCBpbiBhIGJ5dGUgKC0xMjguLjEyNykuIHdlIHNjYWxlIHJlZ3VsYXIgbm9ybWFscyB1cCB0byBsZW5ndGggNjMsIGJ1dFxcbi8vIHRoZXJlIGFyZSBhbHNvIFxcXCJzcGVjaWFsXFxcIiBub3JtYWxzIHRoYXQgaGF2ZSBhIGJpZ2dlciBsZW5ndGggKG9mIHVwIHRvIDEyNiBpblxcbi8vIHRoaXMgY2FzZSkuXFxuLy8gI2RlZmluZSBzY2FsZSA2My4wXFxuI2RlZmluZSBzY2FsZSAwLjAxNTg3MzAxNlxcblxcbmF0dHJpYnV0ZSB2ZWM0IGFfcG9zX25vcm1hbDtcXG5hdHRyaWJ1dGUgdmVjNCBhX2RhdGE7XFxuXFxudW5pZm9ybSBtYXQ0IHVfbWF0cml4O1xcbnVuaWZvcm0gbWVkaXVtcCBmbG9hdCB1X3JhdGlvO1xcbnVuaWZvcm0gdmVjMiB1X2dsX3VuaXRzX3RvX3BpeGVscztcXG5cXG52YXJ5aW5nIHZlYzIgdl9ub3JtYWw7XFxudmFyeWluZyB2ZWMyIHZfd2lkdGgyO1xcbnZhcnlpbmcgZmxvYXQgdl9nYW1tYV9zY2FsZTtcXG52YXJ5aW5nIGhpZ2hwIGZsb2F0IHZfbGluZXNvZmFyO1xcblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBjb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBibHVyXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgZ2Fwd2lkdGhcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb2Zmc2V0XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBtZWRpdW1wIGZsb2F0IHdpZHRoXFxuXFxudm9pZCBtYWluKCkge1xcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGNvbG9yXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgYmx1clxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCBnYXB3aWR0aFxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9mZnNldFxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBtZWRpdW1wIGZsb2F0IHdpZHRoXFxuXFxuICAgIHZlYzIgYV9leHRydWRlID0gYV9kYXRhLnh5IC0gMTI4LjA7XFxuICAgIGZsb2F0IGFfZGlyZWN0aW9uID0gbW9kKGFfZGF0YS56LCA0LjApIC0gMS4wO1xcblxcbiAgICB2X2xpbmVzb2ZhciA9IChmbG9vcihhX2RhdGEueiAvIDQuMCkgKyBhX2RhdGEudyAqIDY0LjApICogMi4wO1xcblxcbiAgICB2ZWMyIHBvcyA9IGFfcG9zX25vcm1hbC54eTtcXG5cXG4gICAgLy8geCBpcyAxIGlmIGl0J3MgYSByb3VuZCBjYXAsIDAgb3RoZXJ3aXNlXFxuICAgIC8vIHkgaXMgMSBpZiB0aGUgbm9ybWFsIHBvaW50cyB1cCwgYW5kIC0xIGlmIGl0IHBvaW50cyBkb3duXFxuICAgIG1lZGl1bXAgdmVjMiBub3JtYWwgPSBhX3Bvc19ub3JtYWwuenc7XFxuICAgIHZfbm9ybWFsID0gbm9ybWFsO1xcblxcbiAgICAvLyB0aGVzZSB0cmFuc2Zvcm1hdGlvbnMgdXNlZCB0byBiZSBhcHBsaWVkIGluIHRoZSBKUyBhbmQgbmF0aXZlIGNvZGUgYmFzZXMuXFxuICAgIC8vIG1vdmVkIHRoZW0gaW50byB0aGUgc2hhZGVyIGZvciBjbGFyaXR5IGFuZCBzaW1wbGljaXR5LlxcbiAgICBnYXB3aWR0aCA9IGdhcHdpZHRoIC8gMi4wO1xcbiAgICBmbG9hdCBoYWxmd2lkdGggPSB3aWR0aCAvIDIuMDtcXG4gICAgb2Zmc2V0ID0gLTEuMCAqIG9mZnNldDtcXG5cXG4gICAgZmxvYXQgaW5zZXQgPSBnYXB3aWR0aCArIChnYXB3aWR0aCA+IDAuMCA/IEFOVElBTElBU0lORyA6IDAuMCk7XFxuICAgIGZsb2F0IG91dHNldCA9IGdhcHdpZHRoICsgaGFsZndpZHRoICogKGdhcHdpZHRoID4gMC4wID8gMi4wIDogMS4wKSArIChoYWxmd2lkdGggPT0gMC4wID8gMC4wIDogQU5USUFMSUFTSU5HKTtcXG5cXG4gICAgLy8gU2NhbGUgdGhlIGV4dHJ1c2lvbiB2ZWN0b3IgZG93biB0byBhIG5vcm1hbCBhbmQgdGhlbiB1cCBieSB0aGUgbGluZSB3aWR0aFxcbiAgICAvLyBvZiB0aGlzIHZlcnRleC5cXG4gICAgbWVkaXVtcCB2ZWMyIGRpc3QgPSBvdXRzZXQgKiBhX2V4dHJ1ZGUgKiBzY2FsZTtcXG5cXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBvZmZzZXQgd2hlbiBkcmF3aW5nIGEgbGluZSB0aGF0IGlzIHRvIHRoZSBzaWRlIG9mIHRoZSBhY3R1YWwgbGluZS5cXG4gICAgLy8gV2UgZG8gdGhpcyBieSBjcmVhdGluZyBhIHZlY3RvciB0aGF0IHBvaW50cyB0b3dhcmRzIHRoZSBleHRydWRlLCBidXQgcm90YXRlXFxuICAgIC8vIGl0IHdoZW4gd2UncmUgZHJhd2luZyByb3VuZCBlbmQgcG9pbnRzIChhX2RpcmVjdGlvbiA9IC0xIG9yIDEpIHNpbmNlIHRoZWlyXFxuICAgIC8vIGV4dHJ1ZGUgdmVjdG9yIHBvaW50cyBpbiBhbm90aGVyIGRpcmVjdGlvbi5cXG4gICAgbWVkaXVtcCBmbG9hdCB1ID0gMC41ICogYV9kaXJlY3Rpb247XFxuICAgIG1lZGl1bXAgZmxvYXQgdCA9IDEuMCAtIGFicyh1KTtcXG4gICAgbWVkaXVtcCB2ZWMyIG9mZnNldDIgPSBvZmZzZXQgKiBhX2V4dHJ1ZGUgKiBzY2FsZSAqIG5vcm1hbC55ICogbWF0Mih0LCAtdSwgdSwgdCk7XFxuXFxuICAgIHZlYzQgcHJvamVjdGVkX2V4dHJ1ZGUgPSB1X21hdHJpeCAqIHZlYzQoZGlzdCAvIHVfcmF0aW8sIDAuMCwgMC4wKTtcXG4gICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHZlYzQocG9zICsgb2Zmc2V0MiAvIHVfcmF0aW8sIDAuMCwgMS4wKSArIHByb2plY3RlZF9leHRydWRlO1xcblxcbiAgICAvLyBjYWxjdWxhdGUgaG93IG11Y2ggdGhlIHBlcnNwZWN0aXZlIHZpZXcgc3F1aXNoZXMgb3Igc3RyZXRjaGVzIHRoZSBleHRydWRlXFxuICAgIGZsb2F0IGV4dHJ1ZGVfbGVuZ3RoX3dpdGhvdXRfcGVyc3BlY3RpdmUgPSBsZW5ndGgoZGlzdCk7XFxuICAgIGZsb2F0IGV4dHJ1ZGVfbGVuZ3RoX3dpdGhfcGVyc3BlY3RpdmUgPSBsZW5ndGgocHJvamVjdGVkX2V4dHJ1ZGUueHkgLyBnbF9Qb3NpdGlvbi53ICogdV9nbF91bml0c190b19waXhlbHMpO1xcbiAgICB2X2dhbW1hX3NjYWxlID0gZXh0cnVkZV9sZW5ndGhfd2l0aG91dF9wZXJzcGVjdGl2ZSAvIGV4dHJ1ZGVfbGVuZ3RoX3dpdGhfcGVyc3BlY3RpdmU7XFxuXFxuICAgIHZfd2lkdGgyID0gdmVjMihvdXRzZXQsIGluc2V0KTtcXG59XFxuXCJ9LGxpbmVHcmFkaWVudDp7ZnJhZ21lbnRTb3VyY2U6XCJcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgYmx1clxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcXG5cXG52YXJ5aW5nIHZlYzIgdl93aWR0aDI7XFxudmFyeWluZyB2ZWMyIHZfbm9ybWFsO1xcbnZhcnlpbmcgZmxvYXQgdl9nYW1tYV9zY2FsZTtcXG52YXJ5aW5nIGhpZ2hwIGZsb2F0IHZfbGluZXByb2dyZXNzO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBibHVyXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcblxcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGRpc3RhbmNlIG9mIHRoZSBwaXhlbCBmcm9tIHRoZSBsaW5lIGluIHBpeGVscy5cXG4gICAgZmxvYXQgZGlzdCA9IGxlbmd0aCh2X25vcm1hbCkgKiB2X3dpZHRoMi5zO1xcblxcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGFudGlhbGlhc2luZyBmYWRlIGZhY3Rvci4gVGhpcyBpcyBlaXRoZXIgd2hlbiBmYWRpbmcgaW5cXG4gICAgLy8gdGhlIGxpbmUgaW4gY2FzZSBvZiBhbiBvZmZzZXQgbGluZSAodl93aWR0aDIudCkgb3Igd2hlbiBmYWRpbmcgb3V0XFxuICAgIC8vICh2X3dpZHRoMi5zKVxcbiAgICBmbG9hdCBibHVyMiA9IChibHVyICsgMS4wIC8gREVWSUNFX1BJWEVMX1JBVElPKSAqIHZfZ2FtbWFfc2NhbGU7XFxuICAgIGZsb2F0IGFscGhhID0gY2xhbXAobWluKGRpc3QgLSAodl93aWR0aDIudCAtIGJsdXIyKSwgdl93aWR0aDIucyAtIGRpc3QpIC8gYmx1cjIsIDAuMCwgMS4wKTtcXG5cXG4gICAgLy8gRm9yIGdyYWRpZW50IGxpbmVzLCB2X2xpbmVwcm9ncmVzcyBpcyB0aGUgcmF0aW8gYWxvbmcgdGhlIGVudGlyZSBsaW5lLFxcbiAgICAvLyBzY2FsZWQgdG8gWzAsIDJeMTUpLCBhbmQgdGhlIGdyYWRpZW50IHJhbXAgaXMgc3RvcmVkIGluIGEgdGV4dHVyZS5cXG4gICAgdmVjNCBjb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2ZWMyKHZfbGluZXByb2dyZXNzLCAwLjUpKTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gY29sb3IgKiAoYWxwaGEgKiBvcGFjaXR5KTtcXG5cXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XFxuXCIsdmVydGV4U291cmNlOlwiXFxuLy8gdGhlIGF0dHJpYnV0ZSBjb252ZXlpbmcgcHJvZ3Jlc3MgYWxvbmcgYSBsaW5lIGlzIHNjYWxlZCB0byBbMCwgMl4xNSlcXG4jZGVmaW5lIE1BWF9MSU5FX0RJU1RBTkNFIDMyNzY3LjBcXG5cXG4vLyB0aGUgZGlzdGFuY2Ugb3ZlciB3aGljaCB0aGUgbGluZSBlZGdlIGZhZGVzIG91dC5cXG4vLyBSZXRpbmEgZGV2aWNlcyBuZWVkIGEgc21hbGxlciBkaXN0YW5jZSB0byBhdm9pZCBhbGlhc2luZy5cXG4jZGVmaW5lIEFOVElBTElBU0lORyAxLjAgLyBERVZJQ0VfUElYRUxfUkFUSU8gLyAyLjBcXG5cXG4vLyBmbG9vcigxMjcgLyAyKSA9PSA2My4wXFxuLy8gdGhlIG1heGltdW0gYWxsb3dlZCBtaXRlciBsaW1pdCBpcyAyLjAgYXQgdGhlIG1vbWVudC4gdGhlIGV4dHJ1ZGUgbm9ybWFsIGlzXFxuLy8gc3RvcmVkIGluIGEgYnl0ZSAoLTEyOC4uMTI3KS4gd2Ugc2NhbGUgcmVndWxhciBub3JtYWxzIHVwIHRvIGxlbmd0aCA2MywgYnV0XFxuLy8gdGhlcmUgYXJlIGFsc28gXFxcInNwZWNpYWxcXFwiIG5vcm1hbHMgdGhhdCBoYXZlIGEgYmlnZ2VyIGxlbmd0aCAob2YgdXAgdG8gMTI2IGluXFxuLy8gdGhpcyBjYXNlKS5cXG4vLyAjZGVmaW5lIHNjYWxlIDYzLjBcXG4jZGVmaW5lIHNjYWxlIDAuMDE1ODczMDE2XFxuXFxuYXR0cmlidXRlIHZlYzQgYV9wb3Nfbm9ybWFsO1xcbmF0dHJpYnV0ZSB2ZWM0IGFfZGF0YTtcXG5cXG51bmlmb3JtIG1hdDQgdV9tYXRyaXg7XFxudW5pZm9ybSBtZWRpdW1wIGZsb2F0IHVfcmF0aW87XFxudW5pZm9ybSB2ZWMyIHVfZ2xfdW5pdHNfdG9fcGl4ZWxzO1xcblxcbnZhcnlpbmcgdmVjMiB2X25vcm1hbDtcXG52YXJ5aW5nIHZlYzIgdl93aWR0aDI7XFxudmFyeWluZyBmbG9hdCB2X2dhbW1hX3NjYWxlO1xcbnZhcnlpbmcgaGlnaHAgZmxvYXQgdl9saW5lcHJvZ3Jlc3M7XFxuXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGJsdXJcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbWVkaXVtcCBmbG9hdCBnYXB3aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvZmZzZXRcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgd2lkdGhcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgYmx1clxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCBnYXB3aWR0aFxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9mZnNldFxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBtZWRpdW1wIGZsb2F0IHdpZHRoXFxuXFxuICAgIHZlYzIgYV9leHRydWRlID0gYV9kYXRhLnh5IC0gMTI4LjA7XFxuICAgIGZsb2F0IGFfZGlyZWN0aW9uID0gbW9kKGFfZGF0YS56LCA0LjApIC0gMS4wO1xcblxcbiAgICB2X2xpbmVwcm9ncmVzcyA9IChmbG9vcihhX2RhdGEueiAvIDQuMCkgKyBhX2RhdGEudyAqIDY0LjApICogMi4wIC8gTUFYX0xJTkVfRElTVEFOQ0U7XFxuXFxuICAgIHZlYzIgcG9zID0gYV9wb3Nfbm9ybWFsLnh5O1xcblxcbiAgICAvLyB4IGlzIDEgaWYgaXQncyBhIHJvdW5kIGNhcCwgMCBvdGhlcndpc2VcXG4gICAgLy8geSBpcyAxIGlmIHRoZSBub3JtYWwgcG9pbnRzIHVwLCBhbmQgLTEgaWYgaXQgcG9pbnRzIGRvd25cXG4gICAgbWVkaXVtcCB2ZWMyIG5vcm1hbCA9IGFfcG9zX25vcm1hbC56dztcXG4gICAgdl9ub3JtYWwgPSBub3JtYWw7XFxuXFxuICAgIC8vIHRoZXNlIHRyYW5zZm9ybWF0aW9ucyB1c2VkIHRvIGJlIGFwcGxpZWQgaW4gdGhlIEpTIGFuZCBuYXRpdmUgY29kZSBiYXNlcy5cXG4gICAgLy8gbW92ZWQgdGhlbSBpbnRvIHRoZSBzaGFkZXIgZm9yIGNsYXJpdHkgYW5kIHNpbXBsaWNpdHkuXFxuICAgIGdhcHdpZHRoID0gZ2Fwd2lkdGggLyAyLjA7XFxuICAgIGZsb2F0IGhhbGZ3aWR0aCA9IHdpZHRoIC8gMi4wO1xcbiAgICBvZmZzZXQgPSAtMS4wICogb2Zmc2V0O1xcblxcbiAgICBmbG9hdCBpbnNldCA9IGdhcHdpZHRoICsgKGdhcHdpZHRoID4gMC4wID8gQU5USUFMSUFTSU5HIDogMC4wKTtcXG4gICAgZmxvYXQgb3V0c2V0ID0gZ2Fwd2lkdGggKyBoYWxmd2lkdGggKiAoZ2Fwd2lkdGggPiAwLjAgPyAyLjAgOiAxLjApICsgKGhhbGZ3aWR0aCA9PSAwLjAgPyAwLjAgOiBBTlRJQUxJQVNJTkcpO1xcblxcbiAgICAvLyBTY2FsZSB0aGUgZXh0cnVzaW9uIHZlY3RvciBkb3duIHRvIGEgbm9ybWFsIGFuZCB0aGVuIHVwIGJ5IHRoZSBsaW5lIHdpZHRoXFxuICAgIC8vIG9mIHRoaXMgdmVydGV4LlxcbiAgICBtZWRpdW1wIHZlYzIgZGlzdCA9IG91dHNldCAqIGFfZXh0cnVkZSAqIHNjYWxlO1xcblxcbiAgICAvLyBDYWxjdWxhdGUgdGhlIG9mZnNldCB3aGVuIGRyYXdpbmcgYSBsaW5lIHRoYXQgaXMgdG8gdGhlIHNpZGUgb2YgdGhlIGFjdHVhbCBsaW5lLlxcbiAgICAvLyBXZSBkbyB0aGlzIGJ5IGNyZWF0aW5nIGEgdmVjdG9yIHRoYXQgcG9pbnRzIHRvd2FyZHMgdGhlIGV4dHJ1ZGUsIGJ1dCByb3RhdGVcXG4gICAgLy8gaXQgd2hlbiB3ZSdyZSBkcmF3aW5nIHJvdW5kIGVuZCBwb2ludHMgKGFfZGlyZWN0aW9uID0gLTEgb3IgMSkgc2luY2UgdGhlaXJcXG4gICAgLy8gZXh0cnVkZSB2ZWN0b3IgcG9pbnRzIGluIGFub3RoZXIgZGlyZWN0aW9uLlxcbiAgICBtZWRpdW1wIGZsb2F0IHUgPSAwLjUgKiBhX2RpcmVjdGlvbjtcXG4gICAgbWVkaXVtcCBmbG9hdCB0ID0gMS4wIC0gYWJzKHUpO1xcbiAgICBtZWRpdW1wIHZlYzIgb2Zmc2V0MiA9IG9mZnNldCAqIGFfZXh0cnVkZSAqIHNjYWxlICogbm9ybWFsLnkgKiBtYXQyKHQsIC11LCB1LCB0KTtcXG5cXG4gICAgdmVjNCBwcm9qZWN0ZWRfZXh0cnVkZSA9IHVfbWF0cml4ICogdmVjNChkaXN0IC8gdV9yYXRpbywgMC4wLCAwLjApO1xcbiAgICBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogdmVjNChwb3MgKyBvZmZzZXQyIC8gdV9yYXRpbywgMC4wLCAxLjApICsgcHJvamVjdGVkX2V4dHJ1ZGU7XFxuXFxuICAgIC8vIGNhbGN1bGF0ZSBob3cgbXVjaCB0aGUgcGVyc3BlY3RpdmUgdmlldyBzcXVpc2hlcyBvciBzdHJldGNoZXMgdGhlIGV4dHJ1ZGVcXG4gICAgZmxvYXQgZXh0cnVkZV9sZW5ndGhfd2l0aG91dF9wZXJzcGVjdGl2ZSA9IGxlbmd0aChkaXN0KTtcXG4gICAgZmxvYXQgZXh0cnVkZV9sZW5ndGhfd2l0aF9wZXJzcGVjdGl2ZSA9IGxlbmd0aChwcm9qZWN0ZWRfZXh0cnVkZS54eSAvIGdsX1Bvc2l0aW9uLncgKiB1X2dsX3VuaXRzX3RvX3BpeGVscyk7XFxuICAgIHZfZ2FtbWFfc2NhbGUgPSBleHRydWRlX2xlbmd0aF93aXRob3V0X3BlcnNwZWN0aXZlIC8gZXh0cnVkZV9sZW5ndGhfd2l0aF9wZXJzcGVjdGl2ZTtcXG5cXG4gICAgdl93aWR0aDIgPSB2ZWMyKG91dHNldCwgaW5zZXQpO1xcbn1cXG5cIn0sbGluZVBhdHRlcm46e2ZyYWdtZW50U291cmNlOlwidW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9zaXplX2E7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9zaXplX2I7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl90bF9hO1xcbnVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fYnJfYTtcXG51bmlmb3JtIHZlYzIgdV9wYXR0ZXJuX3RsX2I7XFxudW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9icl9iO1xcbnVuaWZvcm0gdmVjMiB1X3RleHNpemU7XFxudW5pZm9ybSBmbG9hdCB1X2ZhZGU7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcXG5cXG52YXJ5aW5nIHZlYzIgdl9ub3JtYWw7XFxudmFyeWluZyB2ZWMyIHZfd2lkdGgyO1xcbnZhcnlpbmcgZmxvYXQgdl9saW5lc29mYXI7XFxudmFyeWluZyBmbG9hdCB2X2dhbW1hX3NjYWxlO1xcblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBibHVyXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgYmx1clxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5cXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBvZiB0aGUgcGl4ZWwgZnJvbSB0aGUgbGluZSBpbiBwaXhlbHMuXFxuICAgIGZsb2F0IGRpc3QgPSBsZW5ndGgodl9ub3JtYWwpICogdl93aWR0aDIucztcXG5cXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBhbnRpYWxpYXNpbmcgZmFkZSBmYWN0b3IuIFRoaXMgaXMgZWl0aGVyIHdoZW4gZmFkaW5nIGluXFxuICAgIC8vIHRoZSBsaW5lIGluIGNhc2Ugb2YgYW4gb2Zmc2V0IGxpbmUgKHZfd2lkdGgyLnQpIG9yIHdoZW4gZmFkaW5nIG91dFxcbiAgICAvLyAodl93aWR0aDIucylcXG4gICAgZmxvYXQgYmx1cjIgPSAoYmx1ciArIDEuMCAvIERFVklDRV9QSVhFTF9SQVRJTykgKiB2X2dhbW1hX3NjYWxlO1xcbiAgICBmbG9hdCBhbHBoYSA9IGNsYW1wKG1pbihkaXN0IC0gKHZfd2lkdGgyLnQgLSBibHVyMiksIHZfd2lkdGgyLnMgLSBkaXN0KSAvIGJsdXIyLCAwLjAsIDEuMCk7XFxuXFxuICAgIGZsb2F0IHhfYSA9IG1vZCh2X2xpbmVzb2ZhciAvIHVfcGF0dGVybl9zaXplX2EueCwgMS4wKTtcXG4gICAgZmxvYXQgeF9iID0gbW9kKHZfbGluZXNvZmFyIC8gdV9wYXR0ZXJuX3NpemVfYi54LCAxLjApO1xcblxcbiAgICAvLyB2X25vcm1hbC55IGlzIDAgYXQgdGhlIG1pZHBvaW50IG9mIHRoZSBsaW5lLCAtMSBhdCB0aGUgbG93ZXIgZWRnZSwgMSBhdCB0aGUgdXBwZXIgZWRnZVxcbiAgICAvLyB3ZSBjbGFtcCB0aGUgbGluZSB3aWR0aCBvdXRzZXQgdG8gYmUgYmV0d2VlbiAwIGFuZCBoYWxmIHRoZSBwYXR0ZXJuIGhlaWdodCBwbHVzIHBhZGRpbmcgKDIuMClcXG4gICAgLy8gdG8gZW5zdXJlIHdlIGRvbid0IHNhbXBsZSBvdXRzaWRlIHRoZSBkZXNpZ25hdGVkIHN5bWJvbCBvbiB0aGUgc3ByaXRlIHNoZWV0LlxcbiAgICAvLyAwLjUgaXMgYWRkZWQgdG8gc2hpZnQgdGhlIGNvbXBvbmVudCB0byBiZSBib3VuZGVkIGJldHdlZW4gMCBhbmQgMSBmb3IgaW50ZXJwb2xhdGlvbiBvZlxcbiAgICAvLyB0aGUgdGV4dHVyZSBjb29yZGluYXRlXFxuICAgIGZsb2F0IHlfYSA9IDAuNSArICh2X25vcm1hbC55ICogY2xhbXAodl93aWR0aDIucywgMC4wLCAodV9wYXR0ZXJuX3NpemVfYS55ICsgMi4wKSAvIDIuMCkgLyB1X3BhdHRlcm5fc2l6ZV9hLnkpO1xcbiAgICBmbG9hdCB5X2IgPSAwLjUgKyAodl9ub3JtYWwueSAqIGNsYW1wKHZfd2lkdGgyLnMsIDAuMCwgKHVfcGF0dGVybl9zaXplX2IueSArIDIuMCkgLyAyLjApIC8gdV9wYXR0ZXJuX3NpemVfYi55KTtcXG4gICAgdmVjMiBwb3NfYSA9IG1peCh1X3BhdHRlcm5fdGxfYSAvIHVfdGV4c2l6ZSwgdV9wYXR0ZXJuX2JyX2EgLyB1X3RleHNpemUsIHZlYzIoeF9hLCB5X2EpKTtcXG4gICAgdmVjMiBwb3NfYiA9IG1peCh1X3BhdHRlcm5fdGxfYiAvIHVfdGV4c2l6ZSwgdV9wYXR0ZXJuX2JyX2IgLyB1X3RleHNpemUsIHZlYzIoeF9iLCB5X2IpKTtcXG5cXG4gICAgdmVjNCBjb2xvciA9IG1peCh0ZXh0dXJlMkQodV9pbWFnZSwgcG9zX2EpLCB0ZXh0dXJlMkQodV9pbWFnZSwgcG9zX2IpLCB1X2ZhZGUpO1xcblxcbiAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAqIGFscGhhICogb3BhY2l0eTtcXG5cXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XFxuXCIsdmVydGV4U291cmNlOlwiLy8gZmxvb3IoMTI3IC8gMikgPT0gNjMuMFxcbi8vIHRoZSBtYXhpbXVtIGFsbG93ZWQgbWl0ZXIgbGltaXQgaXMgMi4wIGF0IHRoZSBtb21lbnQuIHRoZSBleHRydWRlIG5vcm1hbCBpc1xcbi8vIHN0b3JlZCBpbiBhIGJ5dGUgKC0xMjguLjEyNykuIHdlIHNjYWxlIHJlZ3VsYXIgbm9ybWFscyB1cCB0byBsZW5ndGggNjMsIGJ1dFxcbi8vIHRoZXJlIGFyZSBhbHNvIFxcXCJzcGVjaWFsXFxcIiBub3JtYWxzIHRoYXQgaGF2ZSBhIGJpZ2dlciBsZW5ndGggKG9mIHVwIHRvIDEyNiBpblxcbi8vIHRoaXMgY2FzZSkuXFxuLy8gI2RlZmluZSBzY2FsZSA2My4wXFxuI2RlZmluZSBzY2FsZSAwLjAxNTg3MzAxNlxcblxcbi8vIFdlIHNjYWxlIHRoZSBkaXN0YW5jZSBiZWZvcmUgYWRkaW5nIGl0IHRvIHRoZSBidWZmZXJzIHNvIHRoYXQgd2UgY2FuIHN0b3JlXFxuLy8gbG9uZyBkaXN0YW5jZXMgZm9yIGxvbmcgc2VnbWVudHMuIFVzZSB0aGlzIHZhbHVlIHRvIHVuc2NhbGUgdGhlIGRpc3RhbmNlLlxcbiNkZWZpbmUgTElORV9ESVNUQU5DRV9TQ0FMRSAyLjBcXG5cXG4vLyB0aGUgZGlzdGFuY2Ugb3ZlciB3aGljaCB0aGUgbGluZSBlZGdlIGZhZGVzIG91dC5cXG4vLyBSZXRpbmEgZGV2aWNlcyBuZWVkIGEgc21hbGxlciBkaXN0YW5jZSB0byBhdm9pZCBhbGlhc2luZy5cXG4jZGVmaW5lIEFOVElBTElBU0lORyAxLjAgLyBERVZJQ0VfUElYRUxfUkFUSU8gLyAyLjBcXG5cXG5hdHRyaWJ1dGUgdmVjNCBhX3Bvc19ub3JtYWw7XFxuYXR0cmlidXRlIHZlYzQgYV9kYXRhO1xcblxcbnVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG51bmlmb3JtIG1lZGl1bXAgZmxvYXQgdV9yYXRpbztcXG51bmlmb3JtIHZlYzIgdV9nbF91bml0c190b19waXhlbHM7XFxuXFxudmFyeWluZyB2ZWMyIHZfbm9ybWFsO1xcbnZhcnlpbmcgdmVjMiB2X3dpZHRoMjtcXG52YXJ5aW5nIGZsb2F0IHZfbGluZXNvZmFyO1xcbnZhcnlpbmcgZmxvYXQgdl9nYW1tYV9zY2FsZTtcXG5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgYmx1clxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9mZnNldFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbWVkaXVtcCBmbG9hdCBnYXB3aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbWVkaXVtcCBmbG9hdCB3aWR0aFxcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBibHVyXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9mZnNldFxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBtZWRpdW1wIGZsb2F0IGdhcHdpZHRoXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgZmxvYXQgd2lkdGhcXG5cXG4gICAgdmVjMiBhX2V4dHJ1ZGUgPSBhX2RhdGEueHkgLSAxMjguMDtcXG4gICAgZmxvYXQgYV9kaXJlY3Rpb24gPSBtb2QoYV9kYXRhLnosIDQuMCkgLSAxLjA7XFxuICAgIGZsb2F0IGFfbGluZXNvZmFyID0gKGZsb29yKGFfZGF0YS56IC8gNC4wKSArIGFfZGF0YS53ICogNjQuMCkgKiBMSU5FX0RJU1RBTkNFX1NDQUxFO1xcblxcbiAgICB2ZWMyIHBvcyA9IGFfcG9zX25vcm1hbC54eTtcXG5cXG4gICAgLy8geCBpcyAxIGlmIGl0J3MgYSByb3VuZCBjYXAsIDAgb3RoZXJ3aXNlXFxuICAgIC8vIHkgaXMgMSBpZiB0aGUgbm9ybWFsIHBvaW50cyB1cCwgYW5kIC0xIGlmIGl0IHBvaW50cyBkb3duXFxuICAgIG1lZGl1bXAgdmVjMiBub3JtYWwgPSBhX3Bvc19ub3JtYWwuenc7XFxuICAgIHZfbm9ybWFsID0gbm9ybWFsO1xcblxcbiAgICAvLyB0aGVzZSB0cmFuc2Zvcm1hdGlvbnMgdXNlZCB0byBiZSBhcHBsaWVkIGluIHRoZSBKUyBhbmQgbmF0aXZlIGNvZGUgYmFzZXMuXFxuICAgIC8vIG1vdmVkIHRoZW0gaW50byB0aGUgc2hhZGVyIGZvciBjbGFyaXR5IGFuZCBzaW1wbGljaXR5LlxcbiAgICBnYXB3aWR0aCA9IGdhcHdpZHRoIC8gMi4wO1xcbiAgICBmbG9hdCBoYWxmd2lkdGggPSB3aWR0aCAvIDIuMDtcXG4gICAgb2Zmc2V0ID0gLTEuMCAqIG9mZnNldDtcXG5cXG4gICAgZmxvYXQgaW5zZXQgPSBnYXB3aWR0aCArIChnYXB3aWR0aCA+IDAuMCA/IEFOVElBTElBU0lORyA6IDAuMCk7XFxuICAgIGZsb2F0IG91dHNldCA9IGdhcHdpZHRoICsgaGFsZndpZHRoICogKGdhcHdpZHRoID4gMC4wID8gMi4wIDogMS4wKSArIChoYWxmd2lkdGggPT0gMC4wID8gMC4wIDogQU5USUFMSUFTSU5HKTtcXG5cXG4gICAgLy8gU2NhbGUgdGhlIGV4dHJ1c2lvbiB2ZWN0b3IgZG93biB0byBhIG5vcm1hbCBhbmQgdGhlbiB1cCBieSB0aGUgbGluZSB3aWR0aFxcbiAgICAvLyBvZiB0aGlzIHZlcnRleC5cXG4gICAgbWVkaXVtcCB2ZWMyIGRpc3QgPSBvdXRzZXQgKiBhX2V4dHJ1ZGUgKiBzY2FsZTtcXG5cXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBvZmZzZXQgd2hlbiBkcmF3aW5nIGEgbGluZSB0aGF0IGlzIHRvIHRoZSBzaWRlIG9mIHRoZSBhY3R1YWwgbGluZS5cXG4gICAgLy8gV2UgZG8gdGhpcyBieSBjcmVhdGluZyBhIHZlY3RvciB0aGF0IHBvaW50cyB0b3dhcmRzIHRoZSBleHRydWRlLCBidXQgcm90YXRlXFxuICAgIC8vIGl0IHdoZW4gd2UncmUgZHJhd2luZyByb3VuZCBlbmQgcG9pbnRzIChhX2RpcmVjdGlvbiA9IC0xIG9yIDEpIHNpbmNlIHRoZWlyXFxuICAgIC8vIGV4dHJ1ZGUgdmVjdG9yIHBvaW50cyBpbiBhbm90aGVyIGRpcmVjdGlvbi5cXG4gICAgbWVkaXVtcCBmbG9hdCB1ID0gMC41ICogYV9kaXJlY3Rpb247XFxuICAgIG1lZGl1bXAgZmxvYXQgdCA9IDEuMCAtIGFicyh1KTtcXG4gICAgbWVkaXVtcCB2ZWMyIG9mZnNldDIgPSBvZmZzZXQgKiBhX2V4dHJ1ZGUgKiBzY2FsZSAqIG5vcm1hbC55ICogbWF0Mih0LCAtdSwgdSwgdCk7XFxuXFxuICAgIHZlYzQgcHJvamVjdGVkX2V4dHJ1ZGUgPSB1X21hdHJpeCAqIHZlYzQoZGlzdCAvIHVfcmF0aW8sIDAuMCwgMC4wKTtcXG4gICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHZlYzQocG9zICsgb2Zmc2V0MiAvIHVfcmF0aW8sIDAuMCwgMS4wKSArIHByb2plY3RlZF9leHRydWRlO1xcblxcbiAgICAvLyBjYWxjdWxhdGUgaG93IG11Y2ggdGhlIHBlcnNwZWN0aXZlIHZpZXcgc3F1aXNoZXMgb3Igc3RyZXRjaGVzIHRoZSBleHRydWRlXFxuICAgIGZsb2F0IGV4dHJ1ZGVfbGVuZ3RoX3dpdGhvdXRfcGVyc3BlY3RpdmUgPSBsZW5ndGgoZGlzdCk7XFxuICAgIGZsb2F0IGV4dHJ1ZGVfbGVuZ3RoX3dpdGhfcGVyc3BlY3RpdmUgPSBsZW5ndGgocHJvamVjdGVkX2V4dHJ1ZGUueHkgLyBnbF9Qb3NpdGlvbi53ICogdV9nbF91bml0c190b19waXhlbHMpO1xcbiAgICB2X2dhbW1hX3NjYWxlID0gZXh0cnVkZV9sZW5ndGhfd2l0aG91dF9wZXJzcGVjdGl2ZSAvIGV4dHJ1ZGVfbGVuZ3RoX3dpdGhfcGVyc3BlY3RpdmU7XFxuXFxuICAgIHZfbGluZXNvZmFyID0gYV9saW5lc29mYXI7XFxuICAgIHZfd2lkdGgyID0gdmVjMihvdXRzZXQsIGluc2V0KTtcXG59XFxuXCJ9LGxpbmVTREY6e2ZyYWdtZW50U291cmNlOlwiXFxudW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcXG51bmlmb3JtIGZsb2F0IHVfc2RmZ2FtbWE7XFxudW5pZm9ybSBmbG9hdCB1X21peDtcXG5cXG52YXJ5aW5nIHZlYzIgdl9ub3JtYWw7XFxudmFyeWluZyB2ZWMyIHZfd2lkdGgyO1xcbnZhcnlpbmcgdmVjMiB2X3RleF9hO1xcbnZhcnlpbmcgdmVjMiB2X3RleF9iO1xcbnZhcnlpbmcgZmxvYXQgdl9nYW1tYV9zY2FsZTtcXG5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgYmx1clxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBtZWRpdW1wIGZsb2F0IHdpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGZsb29yd2lkdGhcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgY29sb3JcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBibHVyXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBtZWRpdW1wIGZsb2F0IHdpZHRoXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgZmxvb3J3aWR0aFxcblxcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGRpc3RhbmNlIG9mIHRoZSBwaXhlbCBmcm9tIHRoZSBsaW5lIGluIHBpeGVscy5cXG4gICAgZmxvYXQgZGlzdCA9IGxlbmd0aCh2X25vcm1hbCkgKiB2X3dpZHRoMi5zO1xcblxcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGFudGlhbGlhc2luZyBmYWRlIGZhY3Rvci4gVGhpcyBpcyBlaXRoZXIgd2hlbiBmYWRpbmcgaW5cXG4gICAgLy8gdGhlIGxpbmUgaW4gY2FzZSBvZiBhbiBvZmZzZXQgbGluZSAodl93aWR0aDIudCkgb3Igd2hlbiBmYWRpbmcgb3V0XFxuICAgIC8vICh2X3dpZHRoMi5zKVxcbiAgICBmbG9hdCBibHVyMiA9IChibHVyICsgMS4wIC8gREVWSUNFX1BJWEVMX1JBVElPKSAqIHZfZ2FtbWFfc2NhbGU7XFxuICAgIGZsb2F0IGFscGhhID0gY2xhbXAobWluKGRpc3QgLSAodl93aWR0aDIudCAtIGJsdXIyKSwgdl93aWR0aDIucyAtIGRpc3QpIC8gYmx1cjIsIDAuMCwgMS4wKTtcXG5cXG4gICAgZmxvYXQgc2RmZGlzdF9hID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHZfdGV4X2EpLmE7XFxuICAgIGZsb2F0IHNkZmRpc3RfYiA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleF9iKS5hO1xcbiAgICBmbG9hdCBzZGZkaXN0ID0gbWl4KHNkZmRpc3RfYSwgc2RmZGlzdF9iLCB1X21peCk7XFxuICAgIGFscGhhICo9IHNtb290aHN0ZXAoMC41IC0gdV9zZGZnYW1tYSAvIGZsb29yd2lkdGgsIDAuNSArIHVfc2RmZ2FtbWEgLyBmbG9vcndpZHRoLCBzZGZkaXN0KTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gY29sb3IgKiAoYWxwaGEgKiBvcGFjaXR5KTtcXG5cXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XFxuXCIsdmVydGV4U291cmNlOlwiLy8gZmxvb3IoMTI3IC8gMikgPT0gNjMuMFxcbi8vIHRoZSBtYXhpbXVtIGFsbG93ZWQgbWl0ZXIgbGltaXQgaXMgMi4wIGF0IHRoZSBtb21lbnQuIHRoZSBleHRydWRlIG5vcm1hbCBpc1xcbi8vIHN0b3JlZCBpbiBhIGJ5dGUgKC0xMjguLjEyNykuIHdlIHNjYWxlIHJlZ3VsYXIgbm9ybWFscyB1cCB0byBsZW5ndGggNjMsIGJ1dFxcbi8vIHRoZXJlIGFyZSBhbHNvIFxcXCJzcGVjaWFsXFxcIiBub3JtYWxzIHRoYXQgaGF2ZSBhIGJpZ2dlciBsZW5ndGggKG9mIHVwIHRvIDEyNiBpblxcbi8vIHRoaXMgY2FzZSkuXFxuLy8gI2RlZmluZSBzY2FsZSA2My4wXFxuI2RlZmluZSBzY2FsZSAwLjAxNTg3MzAxNlxcblxcbi8vIFdlIHNjYWxlIHRoZSBkaXN0YW5jZSBiZWZvcmUgYWRkaW5nIGl0IHRvIHRoZSBidWZmZXJzIHNvIHRoYXQgd2UgY2FuIHN0b3JlXFxuLy8gbG9uZyBkaXN0YW5jZXMgZm9yIGxvbmcgc2VnbWVudHMuIFVzZSB0aGlzIHZhbHVlIHRvIHVuc2NhbGUgdGhlIGRpc3RhbmNlLlxcbiNkZWZpbmUgTElORV9ESVNUQU5DRV9TQ0FMRSAyLjBcXG5cXG4vLyB0aGUgZGlzdGFuY2Ugb3ZlciB3aGljaCB0aGUgbGluZSBlZGdlIGZhZGVzIG91dC5cXG4vLyBSZXRpbmEgZGV2aWNlcyBuZWVkIGEgc21hbGxlciBkaXN0YW5jZSB0byBhdm9pZCBhbGlhc2luZy5cXG4jZGVmaW5lIEFOVElBTElBU0lORyAxLjAgLyBERVZJQ0VfUElYRUxfUkFUSU8gLyAyLjBcXG5cXG5hdHRyaWJ1dGUgdmVjNCBhX3Bvc19ub3JtYWw7XFxuYXR0cmlidXRlIHZlYzQgYV9kYXRhO1xcblxcbnVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG51bmlmb3JtIG1lZGl1bXAgZmxvYXQgdV9yYXRpbztcXG51bmlmb3JtIHZlYzIgdV9wYXR0ZXJuc2NhbGVfYTtcXG51bmlmb3JtIGZsb2F0IHVfdGV4X3lfYTtcXG51bmlmb3JtIHZlYzIgdV9wYXR0ZXJuc2NhbGVfYjtcXG51bmlmb3JtIGZsb2F0IHVfdGV4X3lfYjtcXG51bmlmb3JtIHZlYzIgdV9nbF91bml0c190b19waXhlbHM7XFxuXFxudmFyeWluZyB2ZWMyIHZfbm9ybWFsO1xcbnZhcnlpbmcgdmVjMiB2X3dpZHRoMjtcXG52YXJ5aW5nIHZlYzIgdl90ZXhfYTtcXG52YXJ5aW5nIHZlYzIgdl90ZXhfYjtcXG52YXJ5aW5nIGZsb2F0IHZfZ2FtbWFfc2NhbGU7XFxuXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCB2ZWM0IGNvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGJsdXJcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbWVkaXVtcCBmbG9hdCBnYXB3aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvZmZzZXRcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgd2lkdGhcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgZmxvb3J3aWR0aFxcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBjb2xvclxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGJsdXJcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgZmxvYXQgZ2Fwd2lkdGhcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvZmZzZXRcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCB3aWR0aFxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGZsb29yd2lkdGhcXG5cXG4gICAgdmVjMiBhX2V4dHJ1ZGUgPSBhX2RhdGEueHkgLSAxMjguMDtcXG4gICAgZmxvYXQgYV9kaXJlY3Rpb24gPSBtb2QoYV9kYXRhLnosIDQuMCkgLSAxLjA7XFxuICAgIGZsb2F0IGFfbGluZXNvZmFyID0gKGZsb29yKGFfZGF0YS56IC8gNC4wKSArIGFfZGF0YS53ICogNjQuMCkgKiBMSU5FX0RJU1RBTkNFX1NDQUxFO1xcblxcbiAgICB2ZWMyIHBvcyA9IGFfcG9zX25vcm1hbC54eTtcXG5cXG4gICAgLy8geCBpcyAxIGlmIGl0J3MgYSByb3VuZCBjYXAsIDAgb3RoZXJ3aXNlXFxuICAgIC8vIHkgaXMgMSBpZiB0aGUgbm9ybWFsIHBvaW50cyB1cCwgYW5kIC0xIGlmIGl0IHBvaW50cyBkb3duXFxuICAgIG1lZGl1bXAgdmVjMiBub3JtYWwgPSBhX3Bvc19ub3JtYWwuenc7XFxuICAgIHZfbm9ybWFsID0gbm9ybWFsO1xcblxcbiAgICAvLyB0aGVzZSB0cmFuc2Zvcm1hdGlvbnMgdXNlZCB0byBiZSBhcHBsaWVkIGluIHRoZSBKUyBhbmQgbmF0aXZlIGNvZGUgYmFzZXMuXFxuICAgIC8vIG1vdmVkIHRoZW0gaW50byB0aGUgc2hhZGVyIGZvciBjbGFyaXR5IGFuZCBzaW1wbGljaXR5LlxcbiAgICBnYXB3aWR0aCA9IGdhcHdpZHRoIC8gMi4wO1xcbiAgICBmbG9hdCBoYWxmd2lkdGggPSB3aWR0aCAvIDIuMDtcXG4gICAgb2Zmc2V0ID0gLTEuMCAqIG9mZnNldDtcXG5cXG4gICAgZmxvYXQgaW5zZXQgPSBnYXB3aWR0aCArIChnYXB3aWR0aCA+IDAuMCA/IEFOVElBTElBU0lORyA6IDAuMCk7XFxuICAgIGZsb2F0IG91dHNldCA9IGdhcHdpZHRoICsgaGFsZndpZHRoICogKGdhcHdpZHRoID4gMC4wID8gMi4wIDogMS4wKSArIChoYWxmd2lkdGggPT0gMC4wID8gMC4wIDogQU5USUFMSUFTSU5HKTtcXG5cXG4gICAgLy8gU2NhbGUgdGhlIGV4dHJ1c2lvbiB2ZWN0b3IgZG93biB0byBhIG5vcm1hbCBhbmQgdGhlbiB1cCBieSB0aGUgbGluZSB3aWR0aFxcbiAgICAvLyBvZiB0aGlzIHZlcnRleC5cXG4gICAgbWVkaXVtcCB2ZWMyIGRpc3QgPW91dHNldCAqIGFfZXh0cnVkZSAqIHNjYWxlO1xcblxcbiAgICAvLyBDYWxjdWxhdGUgdGhlIG9mZnNldCB3aGVuIGRyYXdpbmcgYSBsaW5lIHRoYXQgaXMgdG8gdGhlIHNpZGUgb2YgdGhlIGFjdHVhbCBsaW5lLlxcbiAgICAvLyBXZSBkbyB0aGlzIGJ5IGNyZWF0aW5nIGEgdmVjdG9yIHRoYXQgcG9pbnRzIHRvd2FyZHMgdGhlIGV4dHJ1ZGUsIGJ1dCByb3RhdGVcXG4gICAgLy8gaXQgd2hlbiB3ZSdyZSBkcmF3aW5nIHJvdW5kIGVuZCBwb2ludHMgKGFfZGlyZWN0aW9uID0gLTEgb3IgMSkgc2luY2UgdGhlaXJcXG4gICAgLy8gZXh0cnVkZSB2ZWN0b3IgcG9pbnRzIGluIGFub3RoZXIgZGlyZWN0aW9uLlxcbiAgICBtZWRpdW1wIGZsb2F0IHUgPSAwLjUgKiBhX2RpcmVjdGlvbjtcXG4gICAgbWVkaXVtcCBmbG9hdCB0ID0gMS4wIC0gYWJzKHUpO1xcbiAgICBtZWRpdW1wIHZlYzIgb2Zmc2V0MiA9IG9mZnNldCAqIGFfZXh0cnVkZSAqIHNjYWxlICogbm9ybWFsLnkgKiBtYXQyKHQsIC11LCB1LCB0KTtcXG5cXG4gICAgdmVjNCBwcm9qZWN0ZWRfZXh0cnVkZSA9IHVfbWF0cml4ICogdmVjNChkaXN0IC8gdV9yYXRpbywgMC4wLCAwLjApO1xcbiAgICBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogdmVjNChwb3MgKyBvZmZzZXQyIC8gdV9yYXRpbywgMC4wLCAxLjApICsgcHJvamVjdGVkX2V4dHJ1ZGU7XFxuXFxuICAgIC8vIGNhbGN1bGF0ZSBob3cgbXVjaCB0aGUgcGVyc3BlY3RpdmUgdmlldyBzcXVpc2hlcyBvciBzdHJldGNoZXMgdGhlIGV4dHJ1ZGVcXG4gICAgZmxvYXQgZXh0cnVkZV9sZW5ndGhfd2l0aG91dF9wZXJzcGVjdGl2ZSA9IGxlbmd0aChkaXN0KTtcXG4gICAgZmxvYXQgZXh0cnVkZV9sZW5ndGhfd2l0aF9wZXJzcGVjdGl2ZSA9IGxlbmd0aChwcm9qZWN0ZWRfZXh0cnVkZS54eSAvIGdsX1Bvc2l0aW9uLncgKiB1X2dsX3VuaXRzX3RvX3BpeGVscyk7XFxuICAgIHZfZ2FtbWFfc2NhbGUgPSBleHRydWRlX2xlbmd0aF93aXRob3V0X3BlcnNwZWN0aXZlIC8gZXh0cnVkZV9sZW5ndGhfd2l0aF9wZXJzcGVjdGl2ZTtcXG5cXG4gICAgdl90ZXhfYSA9IHZlYzIoYV9saW5lc29mYXIgKiB1X3BhdHRlcm5zY2FsZV9hLnggLyBmbG9vcndpZHRoLCBub3JtYWwueSAqIHVfcGF0dGVybnNjYWxlX2EueSArIHVfdGV4X3lfYSk7XFxuICAgIHZfdGV4X2IgPSB2ZWMyKGFfbGluZXNvZmFyICogdV9wYXR0ZXJuc2NhbGVfYi54IC8gZmxvb3J3aWR0aCwgbm9ybWFsLnkgKiB1X3BhdHRlcm5zY2FsZV9iLnkgKyB1X3RleF95X2IpO1xcblxcbiAgICB2X3dpZHRoMiA9IHZlYzIob3V0c2V0LCBpbnNldCk7XFxufVxcblwifSxyYXN0ZXI6e2ZyYWdtZW50U291cmNlOlwidW5pZm9ybSBmbG9hdCB1X2ZhZGVfdDtcXG51bmlmb3JtIGZsb2F0IHVfb3BhY2l0eTtcXG51bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlMDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlMTtcXG52YXJ5aW5nIHZlYzIgdl9wb3MwO1xcbnZhcnlpbmcgdmVjMiB2X3BvczE7XFxuXFxudW5pZm9ybSBmbG9hdCB1X2JyaWdodG5lc3NfbG93O1xcbnVuaWZvcm0gZmxvYXQgdV9icmlnaHRuZXNzX2hpZ2g7XFxuXFxudW5pZm9ybSBmbG9hdCB1X3NhdHVyYXRpb25fZmFjdG9yO1xcbnVuaWZvcm0gZmxvYXQgdV9jb250cmFzdF9mYWN0b3I7XFxudW5pZm9ybSB2ZWMzIHVfc3Bpbl93ZWlnaHRzO1xcblxcbnZvaWQgbWFpbigpIHtcXG5cXG4gICAgLy8gcmVhZCBhbmQgY3Jvc3MtZmFkZSBjb2xvcnMgZnJvbSB0aGUgbWFpbiBhbmQgcGFyZW50IHRpbGVzXFxuICAgIHZlYzQgY29sb3IwID0gdGV4dHVyZTJEKHVfaW1hZ2UwLCB2X3BvczApO1xcbiAgICB2ZWM0IGNvbG9yMSA9IHRleHR1cmUyRCh1X2ltYWdlMSwgdl9wb3MxKTtcXG4gICAgaWYgKGNvbG9yMC5hID4gMC4wKSB7XFxuICAgICAgICBjb2xvcjAucmdiID0gY29sb3IwLnJnYiAvIGNvbG9yMC5hO1xcbiAgICB9XFxuICAgIGlmIChjb2xvcjEuYSA+IDAuMCkge1xcbiAgICAgICAgY29sb3IxLnJnYiA9IGNvbG9yMS5yZ2IgLyBjb2xvcjEuYTtcXG4gICAgfVxcbiAgICB2ZWM0IGNvbG9yID0gbWl4KGNvbG9yMCwgY29sb3IxLCB1X2ZhZGVfdCk7XFxuICAgIGNvbG9yLmEgKj0gdV9vcGFjaXR5O1xcbiAgICB2ZWMzIHJnYiA9IGNvbG9yLnJnYjtcXG5cXG4gICAgLy8gc3BpblxcbiAgICByZ2IgPSB2ZWMzKFxcbiAgICAgICAgZG90KHJnYiwgdV9zcGluX3dlaWdodHMueHl6KSxcXG4gICAgICAgIGRvdChyZ2IsIHVfc3Bpbl93ZWlnaHRzLnp4eSksXFxuICAgICAgICBkb3QocmdiLCB1X3NwaW5fd2VpZ2h0cy55engpKTtcXG5cXG4gICAgLy8gc2F0dXJhdGlvblxcbiAgICBmbG9hdCBhdmVyYWdlID0gKGNvbG9yLnIgKyBjb2xvci5nICsgY29sb3IuYikgLyAzLjA7XFxuICAgIHJnYiArPSAoYXZlcmFnZSAtIHJnYikgKiB1X3NhdHVyYXRpb25fZmFjdG9yO1xcblxcbiAgICAvLyBjb250cmFzdFxcbiAgICByZ2IgPSAocmdiIC0gMC41KSAqIHVfY29udHJhc3RfZmFjdG9yICsgMC41O1xcblxcbiAgICAvLyBicmlnaHRuZXNzXFxuICAgIHZlYzMgdV9oaWdoX3ZlYyA9IHZlYzModV9icmlnaHRuZXNzX2xvdywgdV9icmlnaHRuZXNzX2xvdywgdV9icmlnaHRuZXNzX2xvdyk7XFxuICAgIHZlYzMgdV9sb3dfdmVjID0gdmVjMyh1X2JyaWdodG5lc3NfaGlnaCwgdV9icmlnaHRuZXNzX2hpZ2gsIHVfYnJpZ2h0bmVzc19oaWdoKTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChtaXgodV9oaWdoX3ZlYywgdV9sb3dfdmVjLCByZ2IpICogY29sb3IuYSwgY29sb3IuYSk7XFxuXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVxcblwiLHZlcnRleFNvdXJjZTpcInVuaWZvcm0gbWF0NCB1X21hdHJpeDtcXG51bmlmb3JtIHZlYzIgdV90bF9wYXJlbnQ7XFxudW5pZm9ybSBmbG9hdCB1X3NjYWxlX3BhcmVudDtcXG51bmlmb3JtIGZsb2F0IHVfYnVmZmVyX3NjYWxlO1xcblxcbmF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcbmF0dHJpYnV0ZSB2ZWMyIGFfdGV4dHVyZV9wb3M7XFxuXFxudmFyeWluZyB2ZWMyIHZfcG9zMDtcXG52YXJ5aW5nIHZlYzIgdl9wb3MxO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHZlYzQoYV9wb3MsIDAsIDEpO1xcbiAgICAvLyBXZSBhcmUgdXNpbmcgSW50MTYgZm9yIHRleHR1cmUgcG9zaXRpb24gY29vcmRpbmF0ZXMgdG8gZ2l2ZSB1cyBlbm91Z2ggcHJlY2lzaW9uIGZvclxcbiAgICAvLyBmcmFjdGlvbmFsIGNvb3JkaW5hdGVzLiBXZSB1c2UgODE5MiB0byBzY2FsZSB0aGUgdGV4dHVyZSBjb29yZGluYXRlcyBpbiB0aGUgYnVmZmVyXFxuICAgIC8vIGFzIGFuIGFyYml0cmFyaWx5IGhpZ2ggbnVtYmVyIHRvIHByZXNlcnZlIGFkZXF1YXRlIHByZWNpc2lvbiB3aGVuIHJlbmRlcmluZy5cXG4gICAgLy8gVGhpcyBpcyBhbHNvIHRoZSBzYW1lIHZhbHVlIGFzIHRoZSBFWFRFTlQgd2UgYXJlIHVzaW5nIGZvciBvdXIgdGlsZSBidWZmZXIgcG9zIGNvb3JkaW5hdGVzLFxcbiAgICAvLyBzbyBtYXRoIGZvciBtb2RpZnlpbmcgZWl0aGVyIGlzIGNvbnNpc3RlbnQuXFxuICAgIHZfcG9zMCA9ICgoKGFfdGV4dHVyZV9wb3MgLyA4MTkyLjApIC0gMC41KSAvIHVfYnVmZmVyX3NjYWxlICkgKyAwLjU7XFxuICAgIHZfcG9zMSA9ICh2X3BvczAgKiB1X3NjYWxlX3BhcmVudCkgKyB1X3RsX3BhcmVudDtcXG59XFxuXCJ9LHN5bWJvbEljb246e2ZyYWdtZW50U291cmNlOlwidW5pZm9ybSBzYW1wbGVyMkQgdV90ZXh0dXJlO1xcblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxudmFyeWluZyB2ZWMyIHZfdGV4O1xcbnZhcnlpbmcgZmxvYXQgdl9mYWRlX29wYWNpdHk7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5cXG4gICAgbG93cCBmbG9hdCBhbHBoYSA9IG9wYWNpdHkgKiB2X2ZhZGVfb3BhY2l0eTtcXG4gICAgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVfdGV4dHVyZSwgdl90ZXgpICogYWxwaGE7XFxuXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVxcblwiLHZlcnRleFNvdXJjZTpcImNvbnN0IGZsb2F0IFBJID0gMy4xNDE1OTI2NTM1ODk3OTM7XFxuXFxuYXR0cmlidXRlIHZlYzQgYV9wb3Nfb2Zmc2V0O1xcbmF0dHJpYnV0ZSB2ZWM0IGFfZGF0YTtcXG5hdHRyaWJ1dGUgdmVjMyBhX3Byb2plY3RlZF9wb3M7XFxuYXR0cmlidXRlIGZsb2F0IGFfZmFkZV9vcGFjaXR5O1xcblxcbnVuaWZvcm0gYm9vbCB1X2lzX3NpemVfem9vbV9jb25zdGFudDtcXG51bmlmb3JtIGJvb2wgdV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQ7XFxudW5pZm9ybSBoaWdocCBmbG9hdCB1X3NpemVfdDsgLy8gdXNlZCB0byBpbnRlcnBvbGF0ZSBiZXR3ZWVuIHpvb20gc3RvcHMgd2hlbiBzaXplIGlzIGEgY29tcG9zaXRlIGZ1bmN0aW9uXFxudW5pZm9ybSBoaWdocCBmbG9hdCB1X3NpemU7IC8vIHVzZWQgd2hlbiBzaXplIGlzIGJvdGggem9vbSBhbmQgZmVhdHVyZSBjb25zdGFudFxcbnVuaWZvcm0gaGlnaHAgZmxvYXQgdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlO1xcbnVuaWZvcm0gaGlnaHAgZmxvYXQgdV9waXRjaDtcXG51bmlmb3JtIGJvb2wgdV9yb3RhdGVfc3ltYm9sO1xcbnVuaWZvcm0gaGlnaHAgZmxvYXQgdV9hc3BlY3RfcmF0aW87XFxudW5pZm9ybSBmbG9hdCB1X2ZhZGVfY2hhbmdlO1xcblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxudW5pZm9ybSBtYXQ0IHVfbWF0cml4O1xcbnVuaWZvcm0gbWF0NCB1X2xhYmVsX3BsYW5lX21hdHJpeDtcXG51bmlmb3JtIG1hdDQgdV9nbF9jb29yZF9tYXRyaXg7XFxuXFxudW5pZm9ybSBib29sIHVfaXNfdGV4dDtcXG51bmlmb3JtIGJvb2wgdV9waXRjaF93aXRoX21hcDtcXG5cXG51bmlmb3JtIHZlYzIgdV90ZXhzaXplO1xcblxcbnZhcnlpbmcgdmVjMiB2X3RleDtcXG52YXJ5aW5nIGZsb2F0IHZfZmFkZV9vcGFjaXR5O1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuXFxuICAgIHZlYzIgYV9wb3MgPSBhX3Bvc19vZmZzZXQueHk7XFxuICAgIHZlYzIgYV9vZmZzZXQgPSBhX3Bvc19vZmZzZXQuenc7XFxuXFxuICAgIHZlYzIgYV90ZXggPSBhX2RhdGEueHk7XFxuICAgIHZlYzIgYV9zaXplID0gYV9kYXRhLnp3O1xcblxcbiAgICBoaWdocCBmbG9hdCBzZWdtZW50X2FuZ2xlID0gLWFfcHJvamVjdGVkX3Bvc1syXTtcXG5cXG4gICAgZmxvYXQgc2l6ZTtcXG4gICAgaWYgKCF1X2lzX3NpemVfem9vbV9jb25zdGFudCAmJiAhdV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQpIHtcXG4gICAgICAgIHNpemUgPSBtaXgoYV9zaXplWzBdLCBhX3NpemVbMV0sIHVfc2l6ZV90KSAvIDEwLjA7XFxuICAgIH0gZWxzZSBpZiAodV9pc19zaXplX3pvb21fY29uc3RhbnQgJiYgIXVfaXNfc2l6ZV9mZWF0dXJlX2NvbnN0YW50KSB7XFxuICAgICAgICBzaXplID0gYV9zaXplWzBdIC8gMTAuMDtcXG4gICAgfSBlbHNlIGlmICghdV9pc19zaXplX3pvb21fY29uc3RhbnQgJiYgdV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQpIHtcXG4gICAgICAgIHNpemUgPSB1X3NpemU7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBzaXplID0gdV9zaXplO1xcbiAgICB9XFxuXFxuICAgIHZlYzQgcHJvamVjdGVkUG9pbnQgPSB1X21hdHJpeCAqIHZlYzQoYV9wb3MsIDAsIDEpO1xcbiAgICBoaWdocCBmbG9hdCBjYW1lcmFfdG9fYW5jaG9yX2Rpc3RhbmNlID0gcHJvamVjdGVkUG9pbnQudztcXG4gICAgLy8gU2VlIGNvbW1lbnRzIGluIHN5bWJvbF9zZGYudmVydGV4XFxuICAgIGhpZ2hwIGZsb2F0IGRpc3RhbmNlX3JhdGlvID0gdV9waXRjaF93aXRoX21hcCA/XFxuICAgICAgICBjYW1lcmFfdG9fYW5jaG9yX2Rpc3RhbmNlIC8gdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlIDpcXG4gICAgICAgIHVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZSAvIGNhbWVyYV90b19hbmNob3JfZGlzdGFuY2U7XFxuICAgIGhpZ2hwIGZsb2F0IHBlcnNwZWN0aXZlX3JhdGlvID0gY2xhbXAoXFxuICAgICAgICAgICAgMC41ICsgMC41ICogZGlzdGFuY2VfcmF0aW8sXFxuICAgICAgICAgICAgMC4wLCAvLyBQcmV2ZW50cyBvdmVyc2l6ZWQgbmVhci1maWVsZCBzeW1ib2xzIGluIHBpdGNoZWQvb3Zlcnpvb21lZCB0aWxlc1xcbiAgICAgICAgICAgIDQuMCk7XFxuXFxuICAgIHNpemUgKj0gcGVyc3BlY3RpdmVfcmF0aW87XFxuXFxuICAgIGZsb2F0IGZvbnRTY2FsZSA9IHVfaXNfdGV4dCA/IHNpemUgLyAyNC4wIDogc2l6ZTtcXG5cXG4gICAgaGlnaHAgZmxvYXQgc3ltYm9sX3JvdGF0aW9uID0gMC4wO1xcbiAgICBpZiAodV9yb3RhdGVfc3ltYm9sKSB7XFxuICAgICAgICAvLyBTZWUgY29tbWVudHMgaW4gc3ltYm9sX3NkZi52ZXJ0ZXhcXG4gICAgICAgIHZlYzQgb2Zmc2V0UHJvamVjdGVkUG9pbnQgPSB1X21hdHJpeCAqIHZlYzQoYV9wb3MgKyB2ZWMyKDEsIDApLCAwLCAxKTtcXG5cXG4gICAgICAgIHZlYzIgYSA9IHByb2plY3RlZFBvaW50Lnh5IC8gcHJvamVjdGVkUG9pbnQudztcXG4gICAgICAgIHZlYzIgYiA9IG9mZnNldFByb2plY3RlZFBvaW50Lnh5IC8gb2Zmc2V0UHJvamVjdGVkUG9pbnQudztcXG5cXG4gICAgICAgIHN5bWJvbF9yb3RhdGlvbiA9IGF0YW4oKGIueSAtIGEueSkgLyB1X2FzcGVjdF9yYXRpbywgYi54IC0gYS54KTtcXG4gICAgfVxcblxcbiAgICBoaWdocCBmbG9hdCBhbmdsZV9zaW4gPSBzaW4oc2VnbWVudF9hbmdsZSArIHN5bWJvbF9yb3RhdGlvbik7XFxuICAgIGhpZ2hwIGZsb2F0IGFuZ2xlX2NvcyA9IGNvcyhzZWdtZW50X2FuZ2xlICsgc3ltYm9sX3JvdGF0aW9uKTtcXG4gICAgbWF0MiByb3RhdGlvbl9tYXRyaXggPSBtYXQyKGFuZ2xlX2NvcywgLTEuMCAqIGFuZ2xlX3NpbiwgYW5nbGVfc2luLCBhbmdsZV9jb3MpO1xcblxcbiAgICB2ZWM0IHByb2plY3RlZF9wb3MgPSB1X2xhYmVsX3BsYW5lX21hdHJpeCAqIHZlYzQoYV9wcm9qZWN0ZWRfcG9zLnh5LCAwLjAsIDEuMCk7XFxuICAgIGdsX1Bvc2l0aW9uID0gdV9nbF9jb29yZF9tYXRyaXggKiB2ZWM0KHByb2plY3RlZF9wb3MueHkgLyBwcm9qZWN0ZWRfcG9zLncgKyByb3RhdGlvbl9tYXRyaXggKiAoYV9vZmZzZXQgLyAzMi4wICogZm9udFNjYWxlKSwgMC4wLCAxLjApO1xcblxcbiAgICB2X3RleCA9IGFfdGV4IC8gdV90ZXhzaXplO1xcbiAgICB2ZWMyIGZhZGVfb3BhY2l0eSA9IHVucGFja19vcGFjaXR5KGFfZmFkZV9vcGFjaXR5KTtcXG4gICAgZmxvYXQgZmFkZV9jaGFuZ2UgPSBmYWRlX29wYWNpdHlbMV0gPiAwLjUgPyB1X2ZhZGVfY2hhbmdlIDogLXVfZmFkZV9jaGFuZ2U7XFxuICAgIHZfZmFkZV9vcGFjaXR5ID0gbWF4KDAuMCwgbWluKDEuMCwgZmFkZV9vcGFjaXR5WzBdICsgZmFkZV9jaGFuZ2UpKTtcXG59XFxuXCJ9LHN5bWJvbFNERjp7ZnJhZ21lbnRTb3VyY2U6XCIjZGVmaW5lIFNERl9QWCA4LjBcXG4jZGVmaW5lIEVER0VfR0FNTUEgMC4xMDUvREVWSUNFX1BJWEVMX1JBVElPXFxuXFxudW5pZm9ybSBib29sIHVfaXNfaGFsbztcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgZmlsbF9jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBoYWxvX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgaGFsb193aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBoYWxvX2JsdXJcXG5cXG51bmlmb3JtIHNhbXBsZXIyRCB1X3RleHR1cmU7XFxudW5pZm9ybSBoaWdocCBmbG9hdCB1X2dhbW1hX3NjYWxlO1xcbnVuaWZvcm0gYm9vbCB1X2lzX3RleHQ7XFxuXFxudmFyeWluZyB2ZWMyIHZfZGF0YTA7XFxudmFyeWluZyB2ZWMzIHZfZGF0YTE7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGZpbGxfY29sb3JcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBoYWxvX2NvbG9yXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGhhbG9fd2lkdGhcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBoYWxvX2JsdXJcXG5cXG4gICAgdmVjMiB0ZXggPSB2X2RhdGEwLnh5O1xcbiAgICBmbG9hdCBnYW1tYV9zY2FsZSA9IHZfZGF0YTEueDtcXG4gICAgZmxvYXQgc2l6ZSA9IHZfZGF0YTEueTtcXG4gICAgZmxvYXQgZmFkZV9vcGFjaXR5ID0gdl9kYXRhMVsyXTtcXG5cXG4gICAgZmxvYXQgZm9udFNjYWxlID0gdV9pc190ZXh0ID8gc2l6ZSAvIDI0LjAgOiBzaXplO1xcblxcbiAgICBsb3dwIHZlYzQgY29sb3IgPSBmaWxsX2NvbG9yO1xcbiAgICBoaWdocCBmbG9hdCBnYW1tYSA9IEVER0VfR0FNTUEgLyAoZm9udFNjYWxlICogdV9nYW1tYV9zY2FsZSk7XFxuICAgIGxvd3AgZmxvYXQgYnVmZiA9ICgyNTYuMCAtIDY0LjApIC8gMjU2LjA7XFxuICAgIGlmICh1X2lzX2hhbG8pIHtcXG4gICAgICAgIGNvbG9yID0gaGFsb19jb2xvcjtcXG4gICAgICAgIGdhbW1hID0gKGhhbG9fYmx1ciAqIDEuMTkgLyBTREZfUFggKyBFREdFX0dBTU1BKSAvIChmb250U2NhbGUgKiB1X2dhbW1hX3NjYWxlKTtcXG4gICAgICAgIGJ1ZmYgPSAoNi4wIC0gaGFsb193aWR0aCAvIGZvbnRTY2FsZSkgLyBTREZfUFg7XFxuICAgIH1cXG5cXG4gICAgbG93cCBmbG9hdCBkaXN0ID0gdGV4dHVyZTJEKHVfdGV4dHVyZSwgdGV4KS5hO1xcbiAgICBoaWdocCBmbG9hdCBnYW1tYV9zY2FsZWQgPSBnYW1tYSAqIGdhbW1hX3NjYWxlO1xcbiAgICBoaWdocCBmbG9hdCBhbHBoYSA9IHNtb290aHN0ZXAoYnVmZiAtIGdhbW1hX3NjYWxlZCwgYnVmZiArIGdhbW1hX3NjYWxlZCwgZGlzdCk7XFxuXFxuICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yICogKGFscGhhICogb3BhY2l0eSAqIGZhZGVfb3BhY2l0eSk7XFxuXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVxcblwiLHZlcnRleFNvdXJjZTpcImNvbnN0IGZsb2F0IFBJID0gMy4xNDE1OTI2NTM1ODk3OTM7XFxuXFxuYXR0cmlidXRlIHZlYzQgYV9wb3Nfb2Zmc2V0O1xcbmF0dHJpYnV0ZSB2ZWM0IGFfZGF0YTtcXG5hdHRyaWJ1dGUgdmVjMyBhX3Byb2plY3RlZF9wb3M7XFxuYXR0cmlidXRlIGZsb2F0IGFfZmFkZV9vcGFjaXR5O1xcblxcbi8vIGNvbnRlbnRzIG9mIGFfc2l6ZSB2YXJ5IGJhc2VkIG9uIHRoZSB0eXBlIG9mIHByb3BlcnR5IHZhbHVlXFxuLy8gdXNlZCBmb3Ige3RleHQsaWNvbn0tc2l6ZS5cXG4vLyBGb3IgY29uc3RhbnRzLCBhX3NpemUgaXMgZGlzYWJsZWQuXFxuLy8gRm9yIHNvdXJjZSBmdW5jdGlvbnMsIHdlIGJpbmQgb25seSBvbmUgdmFsdWUgcGVyIHZlcnRleDogdGhlIHZhbHVlIG9mIHt0ZXh0LGljb259LXNpemUgZXZhbHVhdGVkIGZvciB0aGUgY3VycmVudCBmZWF0dXJlLlxcbi8vIEZvciBjb21wb3NpdGUgZnVuY3Rpb25zOlxcbi8vIFsgdGV4dC1zaXplKGxvd2VyWm9vbVN0b3AsIGZlYXR1cmUpLFxcbi8vICAgdGV4dC1zaXplKHVwcGVyWm9vbVN0b3AsIGZlYXR1cmUpIF1cXG51bmlmb3JtIGJvb2wgdV9pc19zaXplX3pvb21fY29uc3RhbnQ7XFxudW5pZm9ybSBib29sIHVfaXNfc2l6ZV9mZWF0dXJlX2NvbnN0YW50O1xcbnVuaWZvcm0gaGlnaHAgZmxvYXQgdV9zaXplX3Q7IC8vIHVzZWQgdG8gaW50ZXJwb2xhdGUgYmV0d2VlbiB6b29tIHN0b3BzIHdoZW4gc2l6ZSBpcyBhIGNvbXBvc2l0ZSBmdW5jdGlvblxcbnVuaWZvcm0gaGlnaHAgZmxvYXQgdV9zaXplOyAvLyB1c2VkIHdoZW4gc2l6ZSBpcyBib3RoIHpvb20gYW5kIGZlYXR1cmUgY29uc3RhbnRcXG5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgZmlsbF9jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBoYWxvX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgaGFsb193aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBoYWxvX2JsdXJcXG5cXG51bmlmb3JtIG1hdDQgdV9tYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHVfbGFiZWxfcGxhbmVfbWF0cml4O1xcbnVuaWZvcm0gbWF0NCB1X2dsX2Nvb3JkX21hdHJpeDtcXG5cXG51bmlmb3JtIGJvb2wgdV9pc190ZXh0O1xcbnVuaWZvcm0gYm9vbCB1X3BpdGNoX3dpdGhfbWFwO1xcbnVuaWZvcm0gaGlnaHAgZmxvYXQgdV9waXRjaDtcXG51bmlmb3JtIGJvb2wgdV9yb3RhdGVfc3ltYm9sO1xcbnVuaWZvcm0gaGlnaHAgZmxvYXQgdV9hc3BlY3RfcmF0aW87XFxudW5pZm9ybSBoaWdocCBmbG9hdCB1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2U7XFxudW5pZm9ybSBmbG9hdCB1X2ZhZGVfY2hhbmdlO1xcblxcbnVuaWZvcm0gdmVjMiB1X3RleHNpemU7XFxuXFxudmFyeWluZyB2ZWMyIHZfZGF0YTA7XFxudmFyeWluZyB2ZWMzIHZfZGF0YTE7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGZpbGxfY29sb3JcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBoYWxvX2NvbG9yXFxuICAgICNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiAgICAjcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGhhbG9fd2lkdGhcXG4gICAgI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBoYWxvX2JsdXJcXG5cXG4gICAgdmVjMiBhX3BvcyA9IGFfcG9zX29mZnNldC54eTtcXG4gICAgdmVjMiBhX29mZnNldCA9IGFfcG9zX29mZnNldC56dztcXG5cXG4gICAgdmVjMiBhX3RleCA9IGFfZGF0YS54eTtcXG4gICAgdmVjMiBhX3NpemUgPSBhX2RhdGEuenc7XFxuXFxuICAgIGhpZ2hwIGZsb2F0IHNlZ21lbnRfYW5nbGUgPSAtYV9wcm9qZWN0ZWRfcG9zWzJdO1xcbiAgICBmbG9hdCBzaXplO1xcblxcbiAgICBpZiAoIXVfaXNfc2l6ZV96b29tX2NvbnN0YW50ICYmICF1X2lzX3NpemVfZmVhdHVyZV9jb25zdGFudCkge1xcbiAgICAgICAgc2l6ZSA9IG1peChhX3NpemVbMF0sIGFfc2l6ZVsxXSwgdV9zaXplX3QpIC8gMTAuMDtcXG4gICAgfSBlbHNlIGlmICh1X2lzX3NpemVfem9vbV9jb25zdGFudCAmJiAhdV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQpIHtcXG4gICAgICAgIHNpemUgPSBhX3NpemVbMF0gLyAxMC4wO1xcbiAgICB9IGVsc2UgaWYgKCF1X2lzX3NpemVfem9vbV9jb25zdGFudCAmJiB1X2lzX3NpemVfZmVhdHVyZV9jb25zdGFudCkge1xcbiAgICAgICAgc2l6ZSA9IHVfc2l6ZTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIHNpemUgPSB1X3NpemU7XFxuICAgIH1cXG5cXG4gICAgdmVjNCBwcm9qZWN0ZWRQb2ludCA9IHVfbWF0cml4ICogdmVjNChhX3BvcywgMCwgMSk7XFxuICAgIGhpZ2hwIGZsb2F0IGNhbWVyYV90b19hbmNob3JfZGlzdGFuY2UgPSBwcm9qZWN0ZWRQb2ludC53O1xcbiAgICAvLyBJZiB0aGUgbGFiZWwgaXMgcGl0Y2hlZCB3aXRoIHRoZSBtYXAsIGxheW91dCBpcyBkb25lIGluIHBpdGNoZWQgc3BhY2UsXFxuICAgIC8vIHdoaWNoIG1ha2VzIGxhYmVscyBpbiB0aGUgZGlzdGFuY2Ugc21hbGxlciByZWxhdGl2ZSB0byB2aWV3cG9ydCBzcGFjZS5cXG4gICAgLy8gV2UgY291bnRlcmFjdCBwYXJ0IG9mIHRoYXQgZWZmZWN0IGJ5IG11bHRpcGx5aW5nIGJ5IHRoZSBwZXJzcGVjdGl2ZSByYXRpby5cXG4gICAgLy8gSWYgdGhlIGxhYmVsIGlzbid0IHBpdGNoZWQgd2l0aCB0aGUgbWFwLCB3ZSBkbyBsYXlvdXQgaW4gdmlld3BvcnQgc3BhY2UsXFxuICAgIC8vIHdoaWNoIG1ha2VzIGxhYmVscyBpbiB0aGUgZGlzdGFuY2UgbGFyZ2VyIHJlbGF0aXZlIHRvIHRoZSBmZWF0dXJlcyBhcm91bmRcXG4gICAgLy8gdGhlbS4gV2UgY291bnRlcmFjdCBwYXJ0IG9mIHRoYXQgZWZmZWN0IGJ5IGRpdmlkaW5nIGJ5IHRoZSBwZXJzcGVjdGl2ZSByYXRpby5cXG4gICAgaGlnaHAgZmxvYXQgZGlzdGFuY2VfcmF0aW8gPSB1X3BpdGNoX3dpdGhfbWFwID9cXG4gICAgICAgIGNhbWVyYV90b19hbmNob3JfZGlzdGFuY2UgLyB1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2UgOlxcbiAgICAgICAgdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlIC8gY2FtZXJhX3RvX2FuY2hvcl9kaXN0YW5jZTtcXG4gICAgaGlnaHAgZmxvYXQgcGVyc3BlY3RpdmVfcmF0aW8gPSBjbGFtcChcXG4gICAgICAgIDAuNSArIDAuNSAqIGRpc3RhbmNlX3JhdGlvLFxcbiAgICAgICAgMC4wLCAvLyBQcmV2ZW50cyBvdmVyc2l6ZWQgbmVhci1maWVsZCBzeW1ib2xzIGluIHBpdGNoZWQvb3Zlcnpvb21lZCB0aWxlc1xcbiAgICAgICAgNC4wKTtcXG5cXG4gICAgc2l6ZSAqPSBwZXJzcGVjdGl2ZV9yYXRpbztcXG5cXG4gICAgZmxvYXQgZm9udFNjYWxlID0gdV9pc190ZXh0ID8gc2l6ZSAvIDI0LjAgOiBzaXplO1xcblxcbiAgICBoaWdocCBmbG9hdCBzeW1ib2xfcm90YXRpb24gPSAwLjA7XFxuICAgIGlmICh1X3JvdGF0ZV9zeW1ib2wpIHtcXG4gICAgICAgIC8vIFBvaW50IGxhYmVscyB3aXRoICdyb3RhdGlvbi1hbGlnbm1lbnQ6IG1hcCcgYXJlIGhvcml6b250YWwgd2l0aCByZXNwZWN0IHRvIHRpbGUgdW5pdHNcXG4gICAgICAgIC8vIFRvIGZpZ3VyZSBvdXQgdGhhdCBhbmdsZSBpbiBwcm9qZWN0ZWQgc3BhY2UsIHdlIGRyYXcgYSBzaG9ydCBob3Jpem9udGFsIGxpbmUgaW4gdGlsZVxcbiAgICAgICAgLy8gc3BhY2UsIHByb2plY3QgaXQsIGFuZCBtZWFzdXJlIGl0cyBhbmdsZSBpbiBwcm9qZWN0ZWQgc3BhY2UuXFxuICAgICAgICB2ZWM0IG9mZnNldFByb2plY3RlZFBvaW50ID0gdV9tYXRyaXggKiB2ZWM0KGFfcG9zICsgdmVjMigxLCAwKSwgMCwgMSk7XFxuXFxuICAgICAgICB2ZWMyIGEgPSBwcm9qZWN0ZWRQb2ludC54eSAvIHByb2plY3RlZFBvaW50Lnc7XFxuICAgICAgICB2ZWMyIGIgPSBvZmZzZXRQcm9qZWN0ZWRQb2ludC54eSAvIG9mZnNldFByb2plY3RlZFBvaW50Lnc7XFxuXFxuICAgICAgICBzeW1ib2xfcm90YXRpb24gPSBhdGFuKChiLnkgLSBhLnkpIC8gdV9hc3BlY3RfcmF0aW8sIGIueCAtIGEueCk7XFxuICAgIH1cXG5cXG4gICAgaGlnaHAgZmxvYXQgYW5nbGVfc2luID0gc2luKHNlZ21lbnRfYW5nbGUgKyBzeW1ib2xfcm90YXRpb24pO1xcbiAgICBoaWdocCBmbG9hdCBhbmdsZV9jb3MgPSBjb3Moc2VnbWVudF9hbmdsZSArIHN5bWJvbF9yb3RhdGlvbik7XFxuICAgIG1hdDIgcm90YXRpb25fbWF0cml4ID0gbWF0MihhbmdsZV9jb3MsIC0xLjAgKiBhbmdsZV9zaW4sIGFuZ2xlX3NpbiwgYW5nbGVfY29zKTtcXG5cXG4gICAgdmVjNCBwcm9qZWN0ZWRfcG9zID0gdV9sYWJlbF9wbGFuZV9tYXRyaXggKiB2ZWM0KGFfcHJvamVjdGVkX3Bvcy54eSwgMC4wLCAxLjApO1xcbiAgICBnbF9Qb3NpdGlvbiA9IHVfZ2xfY29vcmRfbWF0cml4ICogdmVjNChwcm9qZWN0ZWRfcG9zLnh5IC8gcHJvamVjdGVkX3Bvcy53ICsgcm90YXRpb25fbWF0cml4ICogKGFfb2Zmc2V0IC8gMzIuMCAqIGZvbnRTY2FsZSksIDAuMCwgMS4wKTtcXG4gICAgZmxvYXQgZ2FtbWFfc2NhbGUgPSBnbF9Qb3NpdGlvbi53O1xcblxcbiAgICB2ZWMyIHRleCA9IGFfdGV4IC8gdV90ZXhzaXplO1xcbiAgICB2ZWMyIGZhZGVfb3BhY2l0eSA9IHVucGFja19vcGFjaXR5KGFfZmFkZV9vcGFjaXR5KTtcXG4gICAgZmxvYXQgZmFkZV9jaGFuZ2UgPSBmYWRlX29wYWNpdHlbMV0gPiAwLjUgPyB1X2ZhZGVfY2hhbmdlIDogLXVfZmFkZV9jaGFuZ2U7XFxuICAgIGZsb2F0IGludGVycG9sYXRlZF9mYWRlX29wYWNpdHkgPSBtYXgoMC4wLCBtaW4oMS4wLCBmYWRlX29wYWNpdHlbMF0gKyBmYWRlX2NoYW5nZSkpO1xcblxcbiAgICB2X2RhdGEwID0gdmVjMih0ZXgueCwgdGV4LnkpO1xcbiAgICB2X2RhdGExID0gdmVjMyhnYW1tYV9zY2FsZSwgc2l6ZSwgaW50ZXJwb2xhdGVkX2ZhZGVfb3BhY2l0eSk7XFxufVxcblwifX0samU9LyNwcmFnbWEgbWFwYm94OiAoW1xcd10rKSAoW1xcd10rKSAoW1xcd10rKSAoW1xcd10rKS9nLEdlPWZ1bmN0aW9uKHQpe3ZhciBlPVZlW3RdLGk9e307ZS5mcmFnbWVudFNvdXJjZT1lLmZyYWdtZW50U291cmNlLnJlcGxhY2UoamUsZnVuY3Rpb24odCxlLG4sbyxyKXtyZXR1cm4gaVtyXT0hMCxcImRlZmluZVwiPT09ZT9cIlxcbiNpZm5kZWYgSEFTX1VOSUZPUk1fdV9cIityK1wiXFxudmFyeWluZyBcIituK1wiIFwiK28rXCIgXCIrcitcIjtcXG4jZWxzZVxcbnVuaWZvcm0gXCIrbitcIiBcIitvK1wiIHVfXCIrcitcIjtcXG4jZW5kaWZcXG5cIjpcIlxcbiNpZmRlZiBIQVNfVU5JRk9STV91X1wiK3IrXCJcXG4gICAgXCIrbitcIiBcIitvK1wiIFwiK3IrXCIgPSB1X1wiK3IrXCI7XFxuI2VuZGlmXFxuXCJ9KSxlLnZlcnRleFNvdXJjZT1lLnZlcnRleFNvdXJjZS5yZXBsYWNlKGplLGZ1bmN0aW9uKHQsZSxuLG8scil7dmFyIGE9XCJmbG9hdFwiPT09bz9cInZlYzJcIjpcInZlYzRcIjtyZXR1cm4gaVtyXT9cImRlZmluZVwiPT09ZT9cIlxcbiNpZm5kZWYgSEFTX1VOSUZPUk1fdV9cIityK1wiXFxudW5pZm9ybSBsb3dwIGZsb2F0IGFfXCIrcitcIl90O1xcbmF0dHJpYnV0ZSBcIituK1wiIFwiK2ErXCIgYV9cIityK1wiO1xcbnZhcnlpbmcgXCIrbitcIiBcIitvK1wiIFwiK3IrXCI7XFxuI2Vsc2VcXG51bmlmb3JtIFwiK24rXCIgXCIrbytcIiB1X1wiK3IrXCI7XFxuI2VuZGlmXFxuXCI6XCJcXG4jaWZuZGVmIEhBU19VTklGT1JNX3VfXCIrcitcIlxcbiAgICBcIityK1wiID0gdW5wYWNrX21peF9cIithK1wiKGFfXCIrcitcIiwgYV9cIityK1wiX3QpO1xcbiNlbHNlXFxuICAgIFwiK24rXCIgXCIrbytcIiBcIityK1wiID0gdV9cIityK1wiO1xcbiNlbmRpZlxcblwiOlwiZGVmaW5lXCI9PT1lP1wiXFxuI2lmbmRlZiBIQVNfVU5JRk9STV91X1wiK3IrXCJcXG51bmlmb3JtIGxvd3AgZmxvYXQgYV9cIityK1wiX3Q7XFxuYXR0cmlidXRlIFwiK24rXCIgXCIrYStcIiBhX1wiK3IrXCI7XFxuI2Vsc2VcXG51bmlmb3JtIFwiK24rXCIgXCIrbytcIiB1X1wiK3IrXCI7XFxuI2VuZGlmXFxuXCI6XCJcXG4jaWZuZGVmIEhBU19VTklGT1JNX3VfXCIrcitcIlxcbiAgICBcIituK1wiIFwiK28rXCIgXCIrcitcIiA9IHVucGFja19taXhfXCIrYStcIihhX1wiK3IrXCIsIGFfXCIrcitcIl90KTtcXG4jZWxzZVxcbiAgICBcIituK1wiIFwiK28rXCIgXCIrcitcIiA9IHVfXCIrcitcIjtcXG4jZW5kaWZcXG5cIn0pO307Zm9yKHZhciBXZSBpbiBWZSlHZShXZSk7dmFyIHFlPVZlLFhlPWZ1bmN0aW9uKGUsaSxuLG8pe3ZhciByPWUuZ2w7dGhpcy5wcm9ncmFtPXIuY3JlYXRlUHJvZ3JhbSgpO3ZhciBhPW4uZGVmaW5lcygpLmNvbmNhdChcIiNkZWZpbmUgREVWSUNFX1BJWEVMX1JBVElPIFwiK3QuZGVmYXVsdCQyLmRldmljZVBpeGVsUmF0aW8udG9GaXhlZCgxKSk7byYmYS5wdXNoKFwiI2RlZmluZSBPVkVSRFJBV19JTlNQRUNUT1I7XCIpO3ZhciBzPWEuY29uY2F0KHFlLnByZWx1ZGUuZnJhZ21lbnRTb3VyY2UsaS5mcmFnbWVudFNvdXJjZSkuam9pbihcIlxcblwiKSxsPWEuY29uY2F0KHFlLnByZWx1ZGUudmVydGV4U291cmNlLGkudmVydGV4U291cmNlKS5qb2luKFwiXFxuXCIpLGM9ci5jcmVhdGVTaGFkZXIoci5GUkFHTUVOVF9TSEFERVIpO3Iuc2hhZGVyU291cmNlKGMscyksci5jb21waWxlU2hhZGVyKGMpLHIuYXR0YWNoU2hhZGVyKHRoaXMucHJvZ3JhbSxjKTt2YXIgdT1yLmNyZWF0ZVNoYWRlcihyLlZFUlRFWF9TSEFERVIpO3Iuc2hhZGVyU291cmNlKHUsbCksci5jb21waWxlU2hhZGVyKHUpLHIuYXR0YWNoU2hhZGVyKHRoaXMucHJvZ3JhbSx1KTtmb3IodmFyIGg9bi5sYXlvdXRBdHRyaWJ1dGVzfHxbXSxwPTA7cDxoLmxlbmd0aDtwKyspci5iaW5kQXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLHAsaFtwXS5uYW1lKTtyLmxpbmtQcm9ncmFtKHRoaXMucHJvZ3JhbSksdGhpcy5udW1BdHRyaWJ1dGVzPXIuZ2V0UHJvZ3JhbVBhcmFtZXRlcih0aGlzLnByb2dyYW0sci5BQ1RJVkVfQVRUUklCVVRFUyksdGhpcy5hdHRyaWJ1dGVzPXt9LHRoaXMudW5pZm9ybXM9e307Zm9yKHZhciBkPTA7ZDx0aGlzLm51bUF0dHJpYnV0ZXM7ZCsrKXt2YXIgZj1yLmdldEFjdGl2ZUF0dHJpYih0aGlzLnByb2dyYW0sZCk7ZiYmKHRoaXMuYXR0cmlidXRlc1tmLm5hbWVdPXIuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLGYubmFtZSkpO31mb3IodmFyIG09ci5nZXRQcm9ncmFtUGFyYW1ldGVyKHRoaXMucHJvZ3JhbSxyLkFDVElWRV9VTklGT1JNUyksXz0wO188bTtfKyspe3ZhciBnPXIuZ2V0QWN0aXZlVW5pZm9ybSh0aGlzLnByb2dyYW0sXyk7ZyYmKHRoaXMudW5pZm9ybXNbZy5uYW1lXT1yLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sZy5uYW1lKSk7fX07ZnVuY3Rpb24gSGUoZSxpLG4sbyxyKXtmb3IodmFyIGE9MDthPG4ubGVuZ3RoO2ErKyl7dmFyIHM9blthXTtpZihvLmlzTGVzc1RoYW4ocy50aWxlSUQpKWJyZWFrO2lmKGkua2V5PT09cy50aWxlSUQua2V5KXJldHVybjtpZihzLnRpbGVJRC5pc0NoaWxkT2YoaSkpe2Zvcih2YXIgbD1pLmNoaWxkcmVuKDEvMCksYz0wO2M8bC5sZW5ndGg7YysrKXtIZShlLGxbY10sbi5zbGljZShhKSxvLHIpO31yZXR1cm59fXZhciB1PWkub3ZlcnNjYWxlZFotZS5vdmVyc2NhbGVkWixoPW5ldyB0LkNhbm9uaWNhbFRpbGVJRCh1LGkuY2Fub25pY2FsLngtKGUuY2Fub25pY2FsLng8PHUpLGkuY2Fub25pY2FsLnktKGUuY2Fub25pY2FsLnk8PHUpKTtyW2gua2V5XT1yW2gua2V5XXx8aDt9ZnVuY3Rpb24gS2UodCxlLGksbixvKXt2YXIgcj10LmNvbnRleHQsYT1yLmdsLHM9bz90LnVzZVByb2dyYW0oXCJjb2xsaXNpb25DaXJjbGVcIik6dC51c2VQcm9ncmFtKFwiY29sbGlzaW9uQm94XCIpO3Iuc2V0RGVwdGhNb2RlKEx0LmRpc2FibGVkKSxyLnNldFN0ZW5jaWxNb2RlKER0LmRpc2FibGVkKSxyLnNldENvbG9yTW9kZSh0LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSk7Zm9yKHZhciBsPTA7bDxuLmxlbmd0aDtsKyspe3ZhciBjPW5bbF0sdT1lLmdldFRpbGUoYyksaD11LmdldEJ1Y2tldChpKTtpZihoKXt2YXIgcD1vP2guY29sbGlzaW9uQ2lyY2xlOmguY29sbGlzaW9uQm94O2lmKHApe2EudW5pZm9ybU1hdHJpeDRmdihzLnVuaWZvcm1zLnVfbWF0cml4LCExLGMucG9zTWF0cml4KSxhLnVuaWZvcm0xZihzLnVuaWZvcm1zLnVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZSx0LnRyYW5zZm9ybS5jYW1lcmFUb0NlbnRlckRpc3RhbmNlKTt2YXIgZD1tZSh1LDEsdC50cmFuc2Zvcm0uem9vbSksZj1NYXRoLnBvdygyLHQudHJhbnNmb3JtLnpvb20tdS50aWxlSUQub3ZlcnNjYWxlZFopO2EudW5pZm9ybTFmKHMudW5pZm9ybXMudV9waXhlbHNfdG9fdGlsZV91bml0cyxkKSxhLnVuaWZvcm0yZihzLnVuaWZvcm1zLnVfZXh0cnVkZV9zY2FsZSx0LnRyYW5zZm9ybS5waXhlbHNUb0dMVW5pdHNbMF0vKGQqZiksdC50cmFuc2Zvcm0ucGl4ZWxzVG9HTFVuaXRzWzFdLyhkKmYpKSxhLnVuaWZvcm0xZihzLnVuaWZvcm1zLnVfb3ZlcnNjYWxlX2ZhY3Rvcix1LnRpbGVJRC5vdmVyc2NhbGVGYWN0b3IoKSkscy5kcmF3KHIsbz9hLlRSSUFOR0xFUzphLkxJTkVTLGkuaWQscC5sYXlvdXRWZXJ0ZXhCdWZmZXIscC5pbmRleEJ1ZmZlcixwLnNlZ21lbnRzLG51bGwscC5jb2xsaXNpb25WZXJ0ZXhCdWZmZXIsbnVsbCk7fX19fVhlLnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKHQsZSxpLG4sbyxyLGEscyxsKXtmb3IodmFyIGMsdT10LmdsLGg9KGM9e30sY1t1LkxJTkVTXT0yLGNbdS5UUklBTkdMRVNdPTMsYylbZV0scD0wLGQ9ci5nZXQoKTtwPGQubGVuZ3RoO3ArPTEpe3ZhciBmPWRbcF0sbT1mLnZhb3N8fChmLnZhb3M9e30pOyhtW2ldfHwobVtpXT1uZXcgVikpLmJpbmQodCx0aGlzLG4sYT9hLmdldFBhaW50VmVydGV4QnVmZmVycygpOltdLG8sZi52ZXJ0ZXhPZmZzZXQscyxsKSx1LmRyYXdFbGVtZW50cyhlLGYucHJpbWl0aXZlTGVuZ3RoKmgsdS5VTlNJR05FRF9TSE9SVCxmLnByaW1pdGl2ZU9mZnNldCpoKjIpO319O3ZhciBZZT10LmlkZW50aXR5KG5ldyBGbG9hdDMyQXJyYXkoMTYpKSxKZT10LmRlZmF1bHQkMTgubGF5b3V0O2Z1bmN0aW9uIFFlKHQsZSxpLG4sbyxyLGEscyxsLGMpe3ZhciB1LGg9dC5jb250ZXh0LHA9aC5nbCxkPXQudHJhbnNmb3JtLGY9XCJtYXBcIj09PXMsbT1cIm1hcFwiPT09bCxfPWYmJlwibGluZVwiPT09aS5sYXlvdXQuZ2V0KFwic3ltYm9sLXBsYWNlbWVudFwiKSxnPWYmJiFtJiYhXyx2PW07aC5zZXREZXB0aE1vZGUodj90LmRlcHRoTW9kZUZvclN1YmxheWVyKDAsTHQuUmVhZE9ubHkpOkx0LmRpc2FibGVkKTtmb3IodmFyIHk9MCx4PW47eTx4Lmxlbmd0aDt5Kz0xKXt2YXIgYj14W3ldLHc9ZS5nZXRUaWxlKGIpLEU9dy5nZXRCdWNrZXQoaSk7aWYoRSl7dmFyIFQ9bz9FLnRleHQ6RS5pY29uO2lmKFQmJlQuc2VnbWVudHMuZ2V0KCkubGVuZ3RoKXt2YXIgST1ULnByb2dyYW1Db25maWd1cmF0aW9ucy5nZXQoaS5pZCksQz1vfHxFLnNkZkljb25zLFM9bz9FLnRleHRTaXplRGF0YTpFLmljb25TaXplRGF0YTtpZih1fHwodT10LnVzZVByb2dyYW0oQz9cInN5bWJvbFNERlwiOlwic3ltYm9sSWNvblwiLEkpLEkuc2V0VW5pZm9ybXModC5jb250ZXh0LHUsaS5wYWludCx7em9vbTp0LnRyYW5zZm9ybS56b29tfSksdGkodSx0LGksbyxnLG0sUykpLGguYWN0aXZlVGV4dHVyZS5zZXQocC5URVhUVVJFMCkscC51bmlmb3JtMWkodS51bmlmb3Jtcy51X3RleHR1cmUsMCksbyl3LmdseXBoQXRsYXNUZXh0dXJlLmJpbmQocC5MSU5FQVIscC5DTEFNUF9UT19FREdFKSxwLnVuaWZvcm0yZnYodS51bmlmb3Jtcy51X3RleHNpemUsdy5nbHlwaEF0bGFzVGV4dHVyZS5zaXplKTtlbHNle3ZhciB6PTEhPT1pLmxheW91dC5nZXQoXCJpY29uLXNpemVcIikuY29uc3RhbnRPcigwKXx8RS5pY29uc05lZWRMaW5lYXIsQT1tfHwwIT09ZC5waXRjaDt3Lmljb25BdGxhc1RleHR1cmUuYmluZChDfHx0Lm9wdGlvbnMucm90YXRpbmd8fHQub3B0aW9ucy56b29taW5nfHx6fHxBP3AuTElORUFSOnAuTkVBUkVTVCxwLkNMQU1QX1RPX0VER0UpLHAudW5pZm9ybTJmdih1LnVuaWZvcm1zLnVfdGV4c2l6ZSx3Lmljb25BdGxhc1RleHR1cmUuc2l6ZSk7fXAudW5pZm9ybU1hdHJpeDRmdih1LnVuaWZvcm1zLnVfbWF0cml4LCExLHQudHJhbnNsYXRlUG9zTWF0cml4KGIucG9zTWF0cml4LHcscixhKSk7dmFyIE09bWUodywxLHQudHJhbnNmb3JtLnpvb20pLEw9dGUoYi5wb3NNYXRyaXgsbSxmLHQudHJhbnNmb3JtLE0pLEQ9ZWUoYi5wb3NNYXRyaXgsbSxmLHQudHJhbnNmb3JtLE0pO3AudW5pZm9ybU1hdHJpeDRmdih1LnVuaWZvcm1zLnVfZ2xfY29vcmRfbWF0cml4LCExLHQudHJhbnNsYXRlUG9zTWF0cml4KEQsdyxyLGEsITApKSxfPyhwLnVuaWZvcm1NYXRyaXg0ZnYodS51bmlmb3Jtcy51X2xhYmVsX3BsYW5lX21hdHJpeCwhMSxZZSksb2UoRSxiLnBvc01hdHJpeCx0LG8sTCxELG0sYykpOnAudW5pZm9ybU1hdHJpeDRmdih1LnVuaWZvcm1zLnVfbGFiZWxfcGxhbmVfbWF0cml4LCExLEwpLHAudW5pZm9ybTFmKHUudW5pZm9ybXMudV9mYWRlX2NoYW5nZSx0Lm9wdGlvbnMuZmFkZUR1cmF0aW9uP3Quc3ltYm9sRmFkZUNoYW5nZToxKSxlaSh1LEksdCxpLHcsVCxvLEMsbSk7fX19fWZ1bmN0aW9uIHRpKGUsaSxuLG8scixhLHMpe3ZhciBsPWkuY29udGV4dC5nbCxjPWkudHJhbnNmb3JtO2wudW5pZm9ybTFpKGUudW5pZm9ybXMudV9waXRjaF93aXRoX21hcCxhPzE6MCksbC51bmlmb3JtMWYoZS51bmlmb3Jtcy51X2lzX3RleHQsbz8xOjApLGwudW5pZm9ybTFmKGUudW5pZm9ybXMudV9waXRjaCxjLnBpdGNoLzM2MCoyKk1hdGguUEkpO3ZhciB1PVwiY29uc3RhbnRcIj09PXMuZnVuY3Rpb25UeXBlfHxcInNvdXJjZVwiPT09cy5mdW5jdGlvblR5cGUsaD1cImNvbnN0YW50XCI9PT1zLmZ1bmN0aW9uVHlwZXx8XCJjYW1lcmFcIj09PXMuZnVuY3Rpb25UeXBlO2wudW5pZm9ybTFpKGUudW5pZm9ybXMudV9pc19zaXplX3pvb21fY29uc3RhbnQsdT8xOjApLGwudW5pZm9ybTFpKGUudW5pZm9ybXMudV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQsaD8xOjApLGwudW5pZm9ybTFmKGUudW5pZm9ybXMudV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlLGMuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZSk7dmFyIHA9dC5ldmFsdWF0ZVNpemVGb3Jab29tKHMsYy56b29tLEplLnByb3BlcnRpZXNbbz9cInRleHQtc2l6ZVwiOlwiaWNvbi1zaXplXCJdKTt2b2lkIDAhPT1wLnVTaXplVCYmbC51bmlmb3JtMWYoZS51bmlmb3Jtcy51X3NpemVfdCxwLnVTaXplVCksdm9pZCAwIT09cC51U2l6ZSYmbC51bmlmb3JtMWYoZS51bmlmb3Jtcy51X3NpemUscC51U2l6ZSksbC51bmlmb3JtMWYoZS51bmlmb3Jtcy51X2FzcGVjdF9yYXRpbyxjLndpZHRoL2MuaGVpZ2h0KSxsLnVuaWZvcm0xaShlLnVuaWZvcm1zLnVfcm90YXRlX3N5bWJvbCxyPzE6MCk7fWZ1bmN0aW9uIGVpKHQsZSxpLG4sbyxyLGEscyxsKXt2YXIgYz1pLmNvbnRleHQsdT1jLmdsLGg9aS50cmFuc2Zvcm07aWYocyl7dmFyIHA9MCE9PW4ucGFpbnQuZ2V0KGE/XCJ0ZXh0LWhhbG8td2lkdGhcIjpcImljb24taGFsby13aWR0aFwiKS5jb25zdGFudE9yKDEpLGQ9bD9NYXRoLmNvcyhoLl9waXRjaCkqaC5jYW1lcmFUb0NlbnRlckRpc3RhbmNlOjE7dS51bmlmb3JtMWYodC51bmlmb3Jtcy51X2dhbW1hX3NjYWxlLGQpLHAmJih1LnVuaWZvcm0xZih0LnVuaWZvcm1zLnVfaXNfaGFsbywxKSxpaShyLG4sYyx0KSksdS51bmlmb3JtMWYodC51bmlmb3Jtcy51X2lzX2hhbG8sMCk7fWlpKHIsbixjLHQpO31mdW5jdGlvbiBpaSh0LGUsaSxuKXtuLmRyYXcoaSxpLmdsLlRSSUFOR0xFUyxlLmlkLHQubGF5b3V0VmVydGV4QnVmZmVyLHQuaW5kZXhCdWZmZXIsdC5zZWdtZW50cyx0LnByb2dyYW1Db25maWd1cmF0aW9ucy5nZXQoZS5pZCksdC5keW5hbWljTGF5b3V0VmVydGV4QnVmZmVyLHQub3BhY2l0eVZlcnRleEJ1ZmZlcik7fWZ1bmN0aW9uIG5pKGUsaSxuLG8scixhLHMsbCxjKXt2YXIgdSxoLHAsZCxmPWkuY29udGV4dCxtPWYuZ2wsXz1yLnBhaW50LmdldChcImxpbmUtZGFzaGFycmF5XCIpLGc9ci5wYWludC5nZXQoXCJsaW5lLXBhdHRlcm5cIik7aWYobHx8Yyl7dmFyIHY9MS9tZShuLDEsaS50cmFuc2Zvcm0udGlsZVpvb20pO2lmKF8pe3U9aS5saW5lQXRsYXMuZ2V0RGFzaChfLmZyb20sXCJyb3VuZFwiPT09ci5sYXlvdXQuZ2V0KFwibGluZS1jYXBcIikpLGg9aS5saW5lQXRsYXMuZ2V0RGFzaChfLnRvLFwicm91bmRcIj09PXIubGF5b3V0LmdldChcImxpbmUtY2FwXCIpKTt2YXIgeT11LndpZHRoKl8uZnJvbVNjYWxlLHg9aC53aWR0aCpfLnRvU2NhbGU7bS51bmlmb3JtMmYoZS51bmlmb3Jtcy51X3BhdHRlcm5zY2FsZV9hLHYveSwtdS5oZWlnaHQvMiksbS51bmlmb3JtMmYoZS51bmlmb3Jtcy51X3BhdHRlcm5zY2FsZV9iLHYveCwtaC5oZWlnaHQvMiksbS51bmlmb3JtMWYoZS51bmlmb3Jtcy51X3NkZmdhbW1hLGkubGluZUF0bGFzLndpZHRoLygyNTYqTWF0aC5taW4oeSx4KSp0LmRlZmF1bHQkMi5kZXZpY2VQaXhlbFJhdGlvKS8yKTt9ZWxzZSBpZihnKXtpZihwPWkuaW1hZ2VNYW5hZ2VyLmdldFBhdHRlcm4oZy5mcm9tKSxkPWkuaW1hZ2VNYW5hZ2VyLmdldFBhdHRlcm4oZy50byksIXB8fCFkKXJldHVybjttLnVuaWZvcm0yZihlLnVuaWZvcm1zLnVfcGF0dGVybl9zaXplX2EscC5kaXNwbGF5U2l6ZVswXSpnLmZyb21TY2FsZS92LHAuZGlzcGxheVNpemVbMV0pLG0udW5pZm9ybTJmKGUudW5pZm9ybXMudV9wYXR0ZXJuX3NpemVfYixkLmRpc3BsYXlTaXplWzBdKmcudG9TY2FsZS92LGQuZGlzcGxheVNpemVbMV0pO3ZhciBiPWkuaW1hZ2VNYW5hZ2VyLmdldFBpeGVsU2l6ZSgpLHc9Yi53aWR0aCxFPWIuaGVpZ2h0O20udW5pZm9ybTJmdihlLnVuaWZvcm1zLnVfdGV4c2l6ZSxbdyxFXSk7fW0udW5pZm9ybTJmKGUudW5pZm9ybXMudV9nbF91bml0c190b19waXhlbHMsMS9pLnRyYW5zZm9ybS5waXhlbHNUb0dMVW5pdHNbMF0sMS9pLnRyYW5zZm9ybS5waXhlbHNUb0dMVW5pdHNbMV0pO31sJiYoXz8obS51bmlmb3JtMWkoZS51bmlmb3Jtcy51X2ltYWdlLDApLGYuYWN0aXZlVGV4dHVyZS5zZXQobS5URVhUVVJFMCksaS5saW5lQXRsYXMuYmluZChmKSxtLnVuaWZvcm0xZihlLnVuaWZvcm1zLnVfdGV4X3lfYSx1LnkpLG0udW5pZm9ybTFmKGUudW5pZm9ybXMudV90ZXhfeV9iLGgueSksbS51bmlmb3JtMWYoZS51bmlmb3Jtcy51X21peCxfLnQpKTpnJiYobS51bmlmb3JtMWkoZS51bmlmb3Jtcy51X2ltYWdlLDApLGYuYWN0aXZlVGV4dHVyZS5zZXQobS5URVhUVVJFMCksaS5pbWFnZU1hbmFnZXIuYmluZChmKSxtLnVuaWZvcm0yZnYoZS51bmlmb3Jtcy51X3BhdHRlcm5fdGxfYSxwLnRsKSxtLnVuaWZvcm0yZnYoZS51bmlmb3Jtcy51X3BhdHRlcm5fYnJfYSxwLmJyKSxtLnVuaWZvcm0yZnYoZS51bmlmb3Jtcy51X3BhdHRlcm5fdGxfYixkLnRsKSxtLnVuaWZvcm0yZnYoZS51bmlmb3Jtcy51X3BhdHRlcm5fYnJfYixkLmJyKSxtLnVuaWZvcm0xZihlLnVuaWZvcm1zLnVfZmFkZSxnLnQpKSksZi5zZXRTdGVuY2lsTW9kZShpLnN0ZW5jaWxNb2RlRm9yQ2xpcHBpbmcoYSkpO3ZhciBUPWkudHJhbnNsYXRlUG9zTWF0cml4KGEucG9zTWF0cml4LG4sci5wYWludC5nZXQoXCJsaW5lLXRyYW5zbGF0ZVwiKSxyLnBhaW50LmdldChcImxpbmUtdHJhbnNsYXRlLWFuY2hvclwiKSk7aWYobS51bmlmb3JtTWF0cml4NGZ2KGUudW5pZm9ybXMudV9tYXRyaXgsITEsVCksbS51bmlmb3JtMWYoZS51bmlmb3Jtcy51X3JhdGlvLDEvbWUobiwxLGkudHJhbnNmb3JtLnpvb20pKSxyLnBhaW50LmdldChcImxpbmUtZ3JhZGllbnRcIikpe2YuYWN0aXZlVGV4dHVyZS5zZXQobS5URVhUVVJFMCk7dmFyIEk9ci5ncmFkaWVudFRleHR1cmU7aWYoIXIuZ3JhZGllbnQpcmV0dXJuO0l8fChJPXIuZ3JhZGllbnRUZXh0dXJlPW5ldyB0LmRlZmF1bHQkNChmLHIuZ3JhZGllbnQsbS5SR0JBKSksSS5iaW5kKG0uTElORUFSLG0uQ0xBTVBfVE9fRURHRSksbS51bmlmb3JtMWkoZS51bmlmb3Jtcy51X2ltYWdlLDApO31lLmRyYXcoZixtLlRSSUFOR0xFUyxyLmlkLG8ubGF5b3V0VmVydGV4QnVmZmVyLG8uaW5kZXhCdWZmZXIsby5zZWdtZW50cyxzKTt9dmFyIG9pPWZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuITE7dmFyIGk9ZS5pbWFnZU1hbmFnZXIuZ2V0UGF0dGVybih0LmZyb20pLG49ZS5pbWFnZU1hbmFnZXIuZ2V0UGF0dGVybih0LnRvKTtyZXR1cm4haXx8IW59LHJpPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lLmNvbnRleHQsbz1uLmdsLHI9ZS5pbWFnZU1hbmFnZXIuZ2V0UGF0dGVybih0LmZyb20pLGE9ZS5pbWFnZU1hbmFnZXIuZ2V0UGF0dGVybih0LnRvKTtvLnVuaWZvcm0xaShpLnVuaWZvcm1zLnVfaW1hZ2UsMCksby51bmlmb3JtMmZ2KGkudW5pZm9ybXMudV9wYXR0ZXJuX3RsX2Esci50bCksby51bmlmb3JtMmZ2KGkudW5pZm9ybXMudV9wYXR0ZXJuX2JyX2Esci5iciksby51bmlmb3JtMmZ2KGkudW5pZm9ybXMudV9wYXR0ZXJuX3RsX2IsYS50bCksby51bmlmb3JtMmZ2KGkudW5pZm9ybXMudV9wYXR0ZXJuX2JyX2IsYS5icik7dmFyIHM9ZS5pbWFnZU1hbmFnZXIuZ2V0UGl4ZWxTaXplKCksbD1zLndpZHRoLGM9cy5oZWlnaHQ7by51bmlmb3JtMmZ2KGkudW5pZm9ybXMudV90ZXhzaXplLFtsLGNdKSxvLnVuaWZvcm0xZihpLnVuaWZvcm1zLnVfbWl4LHQudCksby51bmlmb3JtMmZ2KGkudW5pZm9ybXMudV9wYXR0ZXJuX3NpemVfYSxyLmRpc3BsYXlTaXplKSxvLnVuaWZvcm0yZnYoaS51bmlmb3Jtcy51X3BhdHRlcm5fc2l6ZV9iLGEuZGlzcGxheVNpemUpLG8udW5pZm9ybTFmKGkudW5pZm9ybXMudV9zY2FsZV9hLHQuZnJvbVNjYWxlKSxvLnVuaWZvcm0xZihpLnVuaWZvcm1zLnVfc2NhbGVfYix0LnRvU2NhbGUpLG4uYWN0aXZlVGV4dHVyZS5zZXQoby5URVhUVVJFMCksZS5pbWFnZU1hbmFnZXIuYmluZChlLmNvbnRleHQpO30sYWk9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPWUuY29udGV4dC5nbDtuLnVuaWZvcm0xZihpLnVuaWZvcm1zLnVfdGlsZV91bml0c190b19waXhlbHMsMS9tZSh0LDEsZS50cmFuc2Zvcm0udGlsZVpvb20pKTt2YXIgbz1NYXRoLnBvdygyLHQudGlsZUlELm92ZXJzY2FsZWRaKSxyPXQudGlsZVNpemUqTWF0aC5wb3coMixlLnRyYW5zZm9ybS50aWxlWm9vbSkvbyxhPXIqKHQudGlsZUlELmNhbm9uaWNhbC54K3QudGlsZUlELndyYXAqbykscz1yKnQudGlsZUlELmNhbm9uaWNhbC55O24udW5pZm9ybTJmKGkudW5pZm9ybXMudV9waXhlbF9jb29yZF91cHBlcixhPj4xNixzPj4xNiksbi51bmlmb3JtMmYoaS51bmlmb3Jtcy51X3BpeGVsX2Nvb3JkX2xvd2VyLDY1NTM1JmEsNjU1MzUmcyk7fTtmdW5jdGlvbiBzaSh0LGUsaSxuLG8pe2lmKCFvaShpLnBhaW50LmdldChcImZpbGwtcGF0dGVyblwiKSx0KSlmb3IodmFyIHI9ITAsYT0wLHM9bjthPHMubGVuZ3RoO2ErPTEpe3ZhciBsPXNbYV0sYz1lLmdldFRpbGUobCksdT1jLmdldEJ1Y2tldChpKTt1JiYodC5jb250ZXh0LnNldFN0ZW5jaWxNb2RlKHQuc3RlbmNpbE1vZGVGb3JDbGlwcGluZyhsKSksbyh0LGUsaSxjLGwsdSxyKSxyPSExKTt9fWZ1bmN0aW9uIGxpKHQsZSxpLG4sbyxyLGEpe3ZhciBzPXQuY29udGV4dC5nbCxsPXIucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLmdldChpLmlkKTt1aShcImZpbGxcIixpLnBhaW50LmdldChcImZpbGwtcGF0dGVyblwiKSx0LGwsaSxuLG8sYSkuZHJhdyh0LmNvbnRleHQscy5UUklBTkdMRVMsaS5pZCxyLmxheW91dFZlcnRleEJ1ZmZlcixyLmluZGV4QnVmZmVyLHIuc2VnbWVudHMsbCk7fWZ1bmN0aW9uIGNpKHQsZSxpLG4sbyxyLGEpe3ZhciBzPXQuY29udGV4dC5nbCxsPXIucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLmdldChpLmlkKSxjPXVpKFwiZmlsbE91dGxpbmVcIixpLmdldFBhaW50UHJvcGVydHkoXCJmaWxsLW91dGxpbmUtY29sb3JcIik/bnVsbDppLnBhaW50LmdldChcImZpbGwtcGF0dGVyblwiKSx0LGwsaSxuLG8sYSk7cy51bmlmb3JtMmYoYy51bmlmb3Jtcy51X3dvcmxkLHMuZHJhd2luZ0J1ZmZlcldpZHRoLHMuZHJhd2luZ0J1ZmZlckhlaWdodCksYy5kcmF3KHQuY29udGV4dCxzLkxJTkVTLGkuaWQsci5sYXlvdXRWZXJ0ZXhCdWZmZXIsci5pbmRleEJ1ZmZlcjIsci5zZWdtZW50czIsbCk7fWZ1bmN0aW9uIHVpKHQsZSxpLG4sbyxyLGEscyl7dmFyIGwsYz1pLmNvbnRleHQucHJvZ3JhbS5nZXQoKTtyZXR1cm4gZT8obD1pLnVzZVByb2dyYW0odCtcIlBhdHRlcm5cIixuKSwoc3x8bC5wcm9ncmFtIT09YykmJihuLnNldFVuaWZvcm1zKGkuY29udGV4dCxsLG8ucGFpbnQse3pvb206aS50cmFuc2Zvcm0uem9vbX0pLHJpKGUsaSxsKSksYWkocixpLGwpKToobD1pLnVzZVByb2dyYW0odCxuKSwoc3x8bC5wcm9ncmFtIT09YykmJm4uc2V0VW5pZm9ybXMoaS5jb250ZXh0LGwsby5wYWludCx7em9vbTppLnRyYW5zZm9ybS56b29tfSkpLGkuY29udGV4dC5nbC51bmlmb3JtTWF0cml4NGZ2KGwudW5pZm9ybXMudV9tYXRyaXgsITEsaS50cmFuc2xhdGVQb3NNYXRyaXgoYS5wb3NNYXRyaXgscixvLnBhaW50LmdldChcImZpbGwtdHJhbnNsYXRlXCIpLG8ucGFpbnQuZ2V0KFwiZmlsbC10cmFuc2xhdGUtYW5jaG9yXCIpKSksbH1mdW5jdGlvbiBoaShlLGksbixvLHIsYSxzKXt2YXIgbD1lLmNvbnRleHQsYz1sLmdsLHU9bi5wYWludC5nZXQoXCJmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuXCIpLGg9ZS5jb250ZXh0LnByb2dyYW0uZ2V0KCkscD1hLnByb2dyYW1Db25maWd1cmF0aW9ucy5nZXQobi5pZCksZD1lLnVzZVByb2dyYW0odT9cImZpbGxFeHRydXNpb25QYXR0ZXJuXCI6XCJmaWxsRXh0cnVzaW9uXCIscCk7aWYoKHN8fGQucHJvZ3JhbSE9PWgpJiZwLnNldFVuaWZvcm1zKGwsZCxuLnBhaW50LHt6b29tOmUudHJhbnNmb3JtLnpvb219KSx1KXtpZihvaSh1LGUpKXJldHVybjtyaSh1LGUsZCksYWkobyxlLGQpLGMudW5pZm9ybTFmKGQudW5pZm9ybXMudV9oZWlnaHRfZmFjdG9yLC1NYXRoLnBvdygyLHIub3ZlcnNjYWxlZFopL28udGlsZVNpemUvOCk7fWUuY29udGV4dC5nbC51bmlmb3JtTWF0cml4NGZ2KGQudW5pZm9ybXMudV9tYXRyaXgsITEsZS50cmFuc2xhdGVQb3NNYXRyaXgoci5wb3NNYXRyaXgsbyxuLnBhaW50LmdldChcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZVwiKSxuLnBhaW50LmdldChcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZS1hbmNob3JcIikpKSxmdW5jdGlvbihlLGkpe3ZhciBuPWkuY29udGV4dC5nbCxvPWkuc3R5bGUubGlnaHQscj1vLnByb3BlcnRpZXMuZ2V0KFwicG9zaXRpb25cIiksYT1bci54LHIueSxyLnpdLHM9dC5jcmVhdGUkMigpO1widmlld3BvcnRcIj09PW8ucHJvcGVydGllcy5nZXQoXCJhbmNob3JcIikmJnQuZnJvbVJvdGF0aW9uKHMsLWkudHJhbnNmb3JtLmFuZ2xlKTt0LnRyYW5zZm9ybU1hdDMoYSxhLHMpO3ZhciBsPW8ucHJvcGVydGllcy5nZXQoXCJjb2xvclwiKTtuLnVuaWZvcm0zZnYoZS51bmlmb3Jtcy51X2xpZ2h0cG9zLGEpLG4udW5pZm9ybTFmKGUudW5pZm9ybXMudV9saWdodGludGVuc2l0eSxvLnByb3BlcnRpZXMuZ2V0KFwiaW50ZW5zaXR5XCIpKSxuLnVuaWZvcm0zZihlLnVuaWZvcm1zLnVfbGlnaHRjb2xvcixsLnIsbC5nLGwuYik7fShkLGUpLGQuZHJhdyhsLGMuVFJJQU5HTEVTLG4uaWQsYS5sYXlvdXRWZXJ0ZXhCdWZmZXIsYS5pbmRleEJ1ZmZlcixhLnNlZ21lbnRzLHApO31mdW5jdGlvbiBwaShlLGksbil7dmFyIG89ZS5jb250ZXh0LHI9by5nbCxhPWkuZmJvO2lmKGEpe3ZhciBzPWUudXNlUHJvZ3JhbShcImhpbGxzaGFkZVwiKSxsPWUudHJhbnNmb3JtLmNhbGN1bGF0ZVBvc01hdHJpeChpLnRpbGVJRC50b1Vud3JhcHBlZCgpLCEwKTshZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkucGFpbnQuZ2V0KFwiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1kaXJlY3Rpb25cIikqKE1hdGguUEkvMTgwKTtcInZpZXdwb3J0XCI9PT1pLnBhaW50LmdldChcImhpbGxzaGFkZS1pbGx1bWluYXRpb24tYW5jaG9yXCIpJiYobi09ZS50cmFuc2Zvcm0uYW5nbGUpLGUuY29udGV4dC5nbC51bmlmb3JtMmYodC51bmlmb3Jtcy51X2xpZ2h0LGkucGFpbnQuZ2V0KFwiaGlsbHNoYWRlLWV4YWdnZXJhdGlvblwiKSxuKTt9KHMsZSxuKTt2YXIgYz1mdW5jdGlvbihlLGkpe3ZhciBuPWkudG9Db29yZGluYXRlKCksbz1uZXcgdC5kZWZhdWx0JDE1KG4uY29sdW1uLG4ucm93KzEsbi56b29tKTtyZXR1cm5bZS50cmFuc2Zvcm0uY29vcmRpbmF0ZUxvY2F0aW9uKG4pLmxhdCxlLnRyYW5zZm9ybS5jb29yZGluYXRlTG9jYXRpb24obykubGF0XX0oZSxpLnRpbGVJRCk7by5hY3RpdmVUZXh0dXJlLnNldChyLlRFWFRVUkUwKSxyLmJpbmRUZXh0dXJlKHIuVEVYVFVSRV8yRCxhLmNvbG9yQXR0YWNobWVudC5nZXQoKSksci51bmlmb3JtTWF0cml4NGZ2KHMudW5pZm9ybXMudV9tYXRyaXgsITEsbCksci51bmlmb3JtMmZ2KHMudW5pZm9ybXMudV9sYXRyYW5nZSxjKSxyLnVuaWZvcm0xaShzLnVuaWZvcm1zLnVfaW1hZ2UsMCk7dmFyIHU9bi5wYWludC5nZXQoXCJoaWxsc2hhZGUtc2hhZG93LWNvbG9yXCIpO3IudW5pZm9ybTRmKHMudW5pZm9ybXMudV9zaGFkb3csdS5yLHUuZyx1LmIsdS5hKTt2YXIgaD1uLnBhaW50LmdldChcImhpbGxzaGFkZS1oaWdobGlnaHQtY29sb3JcIik7ci51bmlmb3JtNGYocy51bmlmb3Jtcy51X2hpZ2hsaWdodCxoLnIsaC5nLGguYixoLmEpO3ZhciBwPW4ucGFpbnQuZ2V0KFwiaGlsbHNoYWRlLWFjY2VudC1jb2xvclwiKTtpZihyLnVuaWZvcm00ZihzLnVuaWZvcm1zLnVfYWNjZW50LHAucixwLmcscC5iLHAuYSksaS5tYXNrZWRCb3VuZHNCdWZmZXImJmkubWFza2VkSW5kZXhCdWZmZXImJmkuc2VnbWVudHMpcy5kcmF3KG8sci5UUklBTkdMRVMsbi5pZCxpLm1hc2tlZEJvdW5kc0J1ZmZlcixpLm1hc2tlZEluZGV4QnVmZmVyLGkuc2VnbWVudHMpO2Vsc2V7dmFyIGQ9ZS5yYXN0ZXJCb3VuZHNCdWZmZXI7ZS5yYXN0ZXJCb3VuZHNWQU8uYmluZChvLHMsZCxbXSksci5kcmF3QXJyYXlzKHIuVFJJQU5HTEVfU1RSSVAsMCxkLmxlbmd0aCk7fX19ZnVuY3Rpb24gZGkoZSxpLG4pe3ZhciBvPWUuY29udGV4dCxyPW8uZ2w7aWYoaS5kZW0mJmkuZGVtLmxldmVsKXt2YXIgYT1pLmRlbS5sZXZlbC5kaW0scz1pLmRlbS5nZXRQaXhlbHMoKTtpZihvLmFjdGl2ZVRleHR1cmUuc2V0KHIuVEVYVFVSRTEpLG8ucGl4ZWxTdG9yZVVucGFja1ByZW11bHRpcGx5QWxwaGEuc2V0KCExKSxpLmRlbVRleHR1cmU9aS5kZW1UZXh0dXJlfHxlLmdldFRpbGVUZXh0dXJlKGkudGlsZVNpemUpLGkuZGVtVGV4dHVyZSl7dmFyIGw9aS5kZW1UZXh0dXJlO2wudXBkYXRlKHMse3ByZW11bHRpcGx5OiExfSksbC5iaW5kKHIuTkVBUkVTVCxyLkNMQU1QX1RPX0VER0UpO31lbHNlIGkuZGVtVGV4dHVyZT1uZXcgdC5kZWZhdWx0JDQobyxzLHIuUkdCQSx7cHJlbXVsdGlwbHk6ITF9KSxpLmRlbVRleHR1cmUuYmluZChyLk5FQVJFU1Qsci5DTEFNUF9UT19FREdFKTtvLmFjdGl2ZVRleHR1cmUuc2V0KHIuVEVYVFVSRTApO3ZhciBjPWkuZmJvO2lmKCFjKXt2YXIgdT1uZXcgdC5kZWZhdWx0JDQobyx7d2lkdGg6YSxoZWlnaHQ6YSxkYXRhOm51bGx9LHIuUkdCQSk7dS5iaW5kKHIuTElORUFSLHIuQ0xBTVBfVE9fRURHRSksKGM9aS5mYm89by5jcmVhdGVGcmFtZWJ1ZmZlcihhLGEpKS5jb2xvckF0dGFjaG1lbnQuc2V0KHUudGV4dHVyZSk7fW8uYmluZEZyYW1lYnVmZmVyLnNldChjLmZyYW1lYnVmZmVyKSxvLnZpZXdwb3J0LnNldChbMCwwLGEsYV0pO3ZhciBoPXQuY3JlYXRlKCk7dC5vcnRobyhoLDAsdC5kZWZhdWx0JDEwLC10LmRlZmF1bHQkMTAsMCwwLDEpLHQudHJhbnNsYXRlKGgsaCxbMCwtdC5kZWZhdWx0JDEwLDBdKTt2YXIgcD1lLnVzZVByb2dyYW0oXCJoaWxsc2hhZGVQcmVwYXJlXCIpO3IudW5pZm9ybU1hdHJpeDRmdihwLnVuaWZvcm1zLnVfbWF0cml4LCExLGgpLHIudW5pZm9ybTFmKHAudW5pZm9ybXMudV96b29tLGkudGlsZUlELm92ZXJzY2FsZWRaKSxyLnVuaWZvcm0yZnYocC51bmlmb3Jtcy51X2RpbWVuc2lvbixbMiphLDIqYV0pLHIudW5pZm9ybTFpKHAudW5pZm9ybXMudV9pbWFnZSwxKSxyLnVuaWZvcm0xZihwLnVuaWZvcm1zLnVfbWF4em9vbSxuKTt2YXIgZD1lLnJhc3RlckJvdW5kc0J1ZmZlcjtlLnJhc3RlckJvdW5kc1ZBTy5iaW5kKG8scCxkLFtdKSxyLmRyYXdBcnJheXMoci5UUklBTkdMRV9TVFJJUCwwLGQubGVuZ3RoKSxpLm5lZWRzSGlsbHNoYWRlUHJlcGFyZT0hMTt9fWZ1bmN0aW9uIGZpKGUsaSxuLG8scil7dmFyIGE9by5wYWludC5nZXQoXCJyYXN0ZXItZmFkZS1kdXJhdGlvblwiKTtpZihhPjApe3ZhciBzPXQuZGVmYXVsdCQyLm5vdygpLGw9KHMtZS50aW1lQWRkZWQpL2EsYz1pPyhzLWkudGltZUFkZGVkKS9hOi0xLHU9bi5nZXRTb3VyY2UoKSxoPXIuY292ZXJpbmdab29tTGV2ZWwoe3RpbGVTaXplOnUudGlsZVNpemUscm91bmRab29tOnUucm91bmRab29tfSkscD0haXx8TWF0aC5hYnMoaS50aWxlSUQub3ZlcnNjYWxlZFotaCk+TWF0aC5hYnMoZS50aWxlSUQub3ZlcnNjYWxlZFotaCksZD1wJiZlLnJlZnJlc2hlZFVwb25FeHBpcmF0aW9uPzE6dC5jbGFtcChwP2w6MS1jLDAsMSk7cmV0dXJuIGUucmVmcmVzaGVkVXBvbkV4cGlyYXRpb24mJmw+PTEmJihlLnJlZnJlc2hlZFVwb25FeHBpcmF0aW9uPSExKSxpP3tvcGFjaXR5OjEsbWl4OjEtZH06e29wYWNpdHk6ZCxtaXg6MH19cmV0dXJue29wYWNpdHk6MSxtaXg6MH19ZnVuY3Rpb24gbWkoZSxpLG4pe3ZhciBvPWUuY29udGV4dCxyPW8uZ2wsYT1uLnBvc01hdHJpeCxzPWUudXNlUHJvZ3JhbShcImRlYnVnXCIpO28uc2V0RGVwdGhNb2RlKEx0LmRpc2FibGVkKSxvLnNldFN0ZW5jaWxNb2RlKER0LmRpc2FibGVkKSxvLnNldENvbG9yTW9kZShlLmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSksci51bmlmb3JtTWF0cml4NGZ2KHMudW5pZm9ybXMudV9tYXRyaXgsITEsYSksci51bmlmb3JtNGYocy51bmlmb3Jtcy51X2NvbG9yLDEsMCwwLDEpLGUuZGVidWdWQU8uYmluZChvLHMsZS5kZWJ1Z0J1ZmZlcixbXSksci5kcmF3QXJyYXlzKHIuTElORV9TVFJJUCwwLGUuZGVidWdCdWZmZXIubGVuZ3RoKTtmb3IodmFyIGw9ZnVuY3Rpb24odCxlLGksbil7bj1ufHwxO3ZhciBvLHIsYSxzLGwsYyx1LGgscD1bXTtmb3Iobz0wLHI9dC5sZW5ndGg7bzxyO28rKylpZihsPV9pW3Rbb11dKXtmb3IoaD1udWxsLGE9MCxzPWxbMV0ubGVuZ3RoO2E8czthKz0yKS0xPT09bFsxXVthXSYmLTE9PT1sWzFdW2ErMV0/aD1udWxsOihjPWUrbFsxXVthXSpuLHU9aS1sWzFdW2ErMV0qbixoJiZwLnB1c2goaC54LGgueSxjLHUpLGg9e3g6Yyx5OnV9KTtlKz1sWzBdKm47fXJldHVybiBwfShuLnRvU3RyaW5nKCksNTAsMjAwLDUpLGM9bmV3IHQuUG9zQXJyYXksdT0wO3U8bC5sZW5ndGg7dSs9MiljLmVtcGxhY2VCYWNrKGxbdV0sbFt1KzFdKTt2YXIgaD1vLmNyZWF0ZVZlcnRleEJ1ZmZlcihjLFplLm1lbWJlcnMpOyhuZXcgVikuYmluZChvLHMsaCxbXSksci51bmlmb3JtNGYocy51bmlmb3Jtcy51X2NvbG9yLDEsMSwxLDEpO2Zvcih2YXIgcD1pLmdldFRpbGUobikudGlsZVNpemUsZD10LmRlZmF1bHQkMTAvKE1hdGgucG93KDIsZS50cmFuc2Zvcm0uem9vbS1uLm92ZXJzY2FsZWRaKSpwKSxmPVtbLTEsLTFdLFstMSwxXSxbMSwtMV0sWzEsMV1dLG09MDttPGYubGVuZ3RoO20rKyl7dmFyIF89ZlttXTtyLnVuaWZvcm1NYXRyaXg0ZnYocy51bmlmb3Jtcy51X21hdHJpeCwhMSx0LnRyYW5zbGF0ZShbXSxhLFtkKl9bMF0sZCpfWzFdLDBdKSksci5kcmF3QXJyYXlzKHIuTElORVMsMCxoLmxlbmd0aCk7fXIudW5pZm9ybTRmKHMudW5pZm9ybXMudV9jb2xvciwwLDAsMCwxKSxyLnVuaWZvcm1NYXRyaXg0ZnYocy51bmlmb3Jtcy51X21hdHJpeCwhMSxhKSxyLmRyYXdBcnJheXMoci5MSU5FUywwLGgubGVuZ3RoKTt9dmFyIF9pPXtcIiBcIjpbMTYsW11dLFwiIVwiOlsxMCxbNSwyMSw1LDcsLTEsLTEsNSwyLDQsMSw1LDAsNiwxLDUsMl1dLCdcIic6WzE2LFs0LDIxLDQsMTQsLTEsLTEsMTIsMjEsMTIsMTRdXSxcIiNcIjpbMjEsWzExLDI1LDQsLTcsLTEsLTEsMTcsMjUsMTAsLTcsLTEsLTEsNCwxMiwxOCwxMiwtMSwtMSwzLDYsMTcsNl1dLCQ6WzIwLFs4LDI1LDgsLTQsLTEsLTEsMTIsMjUsMTIsLTQsLTEsLTEsMTcsMTgsMTUsMjAsMTIsMjEsOCwyMSw1LDIwLDMsMTgsMywxNiw0LDE0LDUsMTMsNywxMiwxMywxMCwxNSw5LDE2LDgsMTcsNiwxNywzLDE1LDEsMTIsMCw4LDAsNSwxLDMsM11dLFwiJVwiOlsyNCxbMjEsMjEsMywwLC0xLC0xLDgsMjEsMTAsMTksMTAsMTcsOSwxNSw3LDE0LDUsMTQsMywxNiwzLDE4LDQsMjAsNiwyMSw4LDIxLDEwLDIwLDEzLDE5LDE2LDE5LDE5LDIwLDIxLDIxLC0xLC0xLDE3LDcsMTUsNiwxNCw0LDE0LDIsMTYsMCwxOCwwLDIwLDEsMjEsMywyMSw1LDE5LDcsMTcsN11dLFwiJlwiOlsyNixbMjMsMTIsMjMsMTMsMjIsMTQsMjEsMTQsMjAsMTMsMTksMTEsMTcsNiwxNSwzLDEzLDEsMTEsMCw3LDAsNSwxLDQsMiwzLDQsMyw2LDQsOCw1LDksMTIsMTMsMTMsMTQsMTQsMTYsMTQsMTgsMTMsMjAsMTEsMjEsOSwyMCw4LDE4LDgsMTYsOSwxMywxMSwxMCwxNiwzLDE4LDEsMjAsMCwyMiwwLDIzLDEsMjMsMl1dLFwiJ1wiOlsxMCxbNSwxOSw0LDIwLDUsMjEsNiwyMCw2LDE4LDUsMTYsNCwxNV1dLFwiKFwiOlsxNCxbMTEsMjUsOSwyMyw3LDIwLDUsMTYsNCwxMSw0LDcsNSwyLDcsLTIsOSwtNSwxMSwtN11dLFwiKVwiOlsxNCxbMywyNSw1LDIzLDcsMjAsOSwxNiwxMCwxMSwxMCw3LDksMiw3LC0yLDUsLTUsMywtN11dLFwiKlwiOlsxNixbOCwyMSw4LDksLTEsLTEsMywxOCwxMywxMiwtMSwtMSwxMywxOCwzLDEyXV0sXCIrXCI6WzI2LFsxMywxOCwxMywwLC0xLC0xLDQsOSwyMiw5XV0sXCIsXCI6WzEwLFs2LDEsNSwwLDQsMSw1LDIsNiwxLDYsLTEsNSwtMyw0LC00XV0sXCItXCI6WzI2LFs0LDksMjIsOV1dLFwiLlwiOlsxMCxbNSwyLDQsMSw1LDAsNiwxLDUsMl1dLFwiL1wiOlsyMixbMjAsMjUsMiwtN11dLDA6WzIwLFs5LDIxLDYsMjAsNCwxNywzLDEyLDMsOSw0LDQsNiwxLDksMCwxMSwwLDE0LDEsMTYsNCwxNyw5LDE3LDEyLDE2LDE3LDE0LDIwLDExLDIxLDksMjFdXSwxOlsyMCxbNiwxNyw4LDE4LDExLDIxLDExLDBdXSwyOlsyMCxbNCwxNiw0LDE3LDUsMTksNiwyMCw4LDIxLDEyLDIxLDE0LDIwLDE1LDE5LDE2LDE3LDE2LDE1LDE1LDEzLDEzLDEwLDMsMCwxNywwXV0sMzpbMjAsWzUsMjEsMTYsMjEsMTAsMTMsMTMsMTMsMTUsMTIsMTYsMTEsMTcsOCwxNyw2LDE2LDMsMTQsMSwxMSwwLDgsMCw1LDEsNCwyLDMsNF1dLDQ6WzIwLFsxMywyMSwzLDcsMTgsNywtMSwtMSwxMywyMSwxMywwXV0sNTpbMjAsWzE1LDIxLDUsMjEsNCwxMiw1LDEzLDgsMTQsMTEsMTQsMTQsMTMsMTYsMTEsMTcsOCwxNyw2LDE2LDMsMTQsMSwxMSwwLDgsMCw1LDEsNCwyLDMsNF1dLDY6WzIwLFsxNiwxOCwxNSwyMCwxMiwyMSwxMCwyMSw3LDIwLDUsMTcsNCwxMiw0LDcsNSwzLDcsMSwxMCwwLDExLDAsMTQsMSwxNiwzLDE3LDYsMTcsNywxNiwxMCwxNCwxMiwxMSwxMywxMCwxMyw3LDEyLDUsMTAsNCw3XV0sNzpbMjAsWzE3LDIxLDcsMCwtMSwtMSwzLDIxLDE3LDIxXV0sODpbMjAsWzgsMjEsNSwyMCw0LDE4LDQsMTYsNSwxNCw3LDEzLDExLDEyLDE0LDExLDE2LDksMTcsNywxNyw0LDE2LDIsMTUsMSwxMiwwLDgsMCw1LDEsNCwyLDMsNCwzLDcsNCw5LDYsMTEsOSwxMiwxMywxMywxNSwxNCwxNiwxNiwxNiwxOCwxNSwyMCwxMiwyMSw4LDIxXV0sOTpbMjAsWzE2LDE0LDE1LDExLDEzLDksMTAsOCw5LDgsNiw5LDQsMTEsMywxNCwzLDE1LDQsMTgsNiwyMCw5LDIxLDEwLDIxLDEzLDIwLDE1LDE4LDE2LDE0LDE2LDksMTUsNCwxMywxLDEwLDAsOCwwLDUsMSw0LDNdXSxcIjpcIjpbMTAsWzUsMTQsNCwxMyw1LDEyLDYsMTMsNSwxNCwtMSwtMSw1LDIsNCwxLDUsMCw2LDEsNSwyXV0sXCI7XCI6WzEwLFs1LDE0LDQsMTMsNSwxMiw2LDEzLDUsMTQsLTEsLTEsNiwxLDUsMCw0LDEsNSwyLDYsMSw2LC0xLDUsLTMsNCwtNF1dLFwiPFwiOlsyNCxbMjAsMTgsNCw5LDIwLDBdXSxcIj1cIjpbMjYsWzQsMTIsMjIsMTIsLTEsLTEsNCw2LDIyLDZdXSxcIj5cIjpbMjQsWzQsMTgsMjAsOSw0LDBdXSxcIj9cIjpbMTgsWzMsMTYsMywxNyw0LDE5LDUsMjAsNywyMSwxMSwyMSwxMywyMCwxNCwxOSwxNSwxNywxNSwxNSwxNCwxMywxMywxMiw5LDEwLDksNywtMSwtMSw5LDIsOCwxLDksMCwxMCwxLDksMl1dLFwiQFwiOlsyNyxbMTgsMTMsMTcsMTUsMTUsMTYsMTIsMTYsMTAsMTUsOSwxNCw4LDExLDgsOCw5LDYsMTEsNSwxNCw1LDE2LDYsMTcsOCwtMSwtMSwxMiwxNiwxMCwxNCw5LDExLDksOCwxMCw2LDExLDUsLTEsLTEsMTgsMTYsMTcsOCwxNyw2LDE5LDUsMjEsNSwyMyw3LDI0LDEwLDI0LDEyLDIzLDE1LDIyLDE3LDIwLDE5LDE4LDIwLDE1LDIxLDEyLDIxLDksMjAsNywxOSw1LDE3LDQsMTUsMywxMiwzLDksNCw2LDUsNCw3LDIsOSwxLDEyLDAsMTUsMCwxOCwxLDIwLDIsMjEsMywtMSwtMSwxOSwxNiwxOCw4LDE4LDYsMTksNV1dLEE6WzE4LFs5LDIxLDEsMCwtMSwtMSw5LDIxLDE3LDAsLTEsLTEsNCw3LDE0LDddXSxCOlsyMSxbNCwyMSw0LDAsLTEsLTEsNCwyMSwxMywyMSwxNiwyMCwxNywxOSwxOCwxNywxOCwxNSwxNywxMywxNiwxMiwxMywxMSwtMSwtMSw0LDExLDEzLDExLDE2LDEwLDE3LDksMTgsNywxOCw0LDE3LDIsMTYsMSwxMywwLDQsMF1dLEM6WzIxLFsxOCwxNiwxNywxOCwxNSwyMCwxMywyMSw5LDIxLDcsMjAsNSwxOCw0LDE2LDMsMTMsMyw4LDQsNSw1LDMsNywxLDksMCwxMywwLDE1LDEsMTcsMywxOCw1XV0sRDpbMjEsWzQsMjEsNCwwLC0xLC0xLDQsMjEsMTEsMjEsMTQsMjAsMTYsMTgsMTcsMTYsMTgsMTMsMTgsOCwxNyw1LDE2LDMsMTQsMSwxMSwwLDQsMF1dLEU6WzE5LFs0LDIxLDQsMCwtMSwtMSw0LDIxLDE3LDIxLC0xLC0xLDQsMTEsMTIsMTEsLTEsLTEsNCwwLDE3LDBdXSxGOlsxOCxbNCwyMSw0LDAsLTEsLTEsNCwyMSwxNywyMSwtMSwtMSw0LDExLDEyLDExXV0sRzpbMjEsWzE4LDE2LDE3LDE4LDE1LDIwLDEzLDIxLDksMjEsNywyMCw1LDE4LDQsMTYsMywxMywzLDgsNCw1LDUsMyw3LDEsOSwwLDEzLDAsMTUsMSwxNywzLDE4LDUsMTgsOCwtMSwtMSwxMyw4LDE4LDhdXSxIOlsyMixbNCwyMSw0LDAsLTEsLTEsMTgsMjEsMTgsMCwtMSwtMSw0LDExLDE4LDExXV0sSTpbOCxbNCwyMSw0LDBdXSxKOlsxNixbMTIsMjEsMTIsNSwxMSwyLDEwLDEsOCwwLDYsMCw0LDEsMywyLDIsNSwyLDddXSxLOlsyMSxbNCwyMSw0LDAsLTEsLTEsMTgsMjEsNCw3LC0xLC0xLDksMTIsMTgsMF1dLEw6WzE3LFs0LDIxLDQsMCwtMSwtMSw0LDAsMTYsMF1dLE06WzI0LFs0LDIxLDQsMCwtMSwtMSw0LDIxLDEyLDAsLTEsLTEsMjAsMjEsMTIsMCwtMSwtMSwyMCwyMSwyMCwwXV0sTjpbMjIsWzQsMjEsNCwwLC0xLC0xLDQsMjEsMTgsMCwtMSwtMSwxOCwyMSwxOCwwXV0sTzpbMjIsWzksMjEsNywyMCw1LDE4LDQsMTYsMywxMywzLDgsNCw1LDUsMyw3LDEsOSwwLDEzLDAsMTUsMSwxNywzLDE4LDUsMTksOCwxOSwxMywxOCwxNiwxNywxOCwxNSwyMCwxMywyMSw5LDIxXV0sUDpbMjEsWzQsMjEsNCwwLC0xLC0xLDQsMjEsMTMsMjEsMTYsMjAsMTcsMTksMTgsMTcsMTgsMTQsMTcsMTIsMTYsMTEsMTMsMTAsNCwxMF1dLFE6WzIyLFs5LDIxLDcsMjAsNSwxOCw0LDE2LDMsMTMsMyw4LDQsNSw1LDMsNywxLDksMCwxMywwLDE1LDEsMTcsMywxOCw1LDE5LDgsMTksMTMsMTgsMTYsMTcsMTgsMTUsMjAsMTMsMjEsOSwyMSwtMSwtMSwxMiw0LDE4LC0yXV0sUjpbMjEsWzQsMjEsNCwwLC0xLC0xLDQsMjEsMTMsMjEsMTYsMjAsMTcsMTksMTgsMTcsMTgsMTUsMTcsMTMsMTYsMTIsMTMsMTEsNCwxMSwtMSwtMSwxMSwxMSwxOCwwXV0sUzpbMjAsWzE3LDE4LDE1LDIwLDEyLDIxLDgsMjEsNSwyMCwzLDE4LDMsMTYsNCwxNCw1LDEzLDcsMTIsMTMsMTAsMTUsOSwxNiw4LDE3LDYsMTcsMywxNSwxLDEyLDAsOCwwLDUsMSwzLDNdXSxUOlsxNixbOCwyMSw4LDAsLTEsLTEsMSwyMSwxNSwyMV1dLFU6WzIyLFs0LDIxLDQsNiw1LDMsNywxLDEwLDAsMTIsMCwxNSwxLDE3LDMsMTgsNiwxOCwyMV1dLFY6WzE4LFsxLDIxLDksMCwtMSwtMSwxNywyMSw5LDBdXSxXOlsyNCxbMiwyMSw3LDAsLTEsLTEsMTIsMjEsNywwLC0xLC0xLDEyLDIxLDE3LDAsLTEsLTEsMjIsMjEsMTcsMF1dLFg6WzIwLFszLDIxLDE3LDAsLTEsLTEsMTcsMjEsMywwXV0sWTpbMTgsWzEsMjEsOSwxMSw5LDAsLTEsLTEsMTcsMjEsOSwxMV1dLFo6WzIwLFsxNywyMSwzLDAsLTEsLTEsMywyMSwxNywyMSwtMSwtMSwzLDAsMTcsMF1dLFwiW1wiOlsxNCxbNCwyNSw0LC03LC0xLC0xLDUsMjUsNSwtNywtMSwtMSw0LDI1LDExLDI1LC0xLC0xLDQsLTcsMTEsLTddXSxcIlxcXFxcIjpbMTQsWzAsMjEsMTQsLTNdXSxcIl1cIjpbMTQsWzksMjUsOSwtNywtMSwtMSwxMCwyNSwxMCwtNywtMSwtMSwzLDI1LDEwLDI1LC0xLC0xLDMsLTcsMTAsLTddXSxcIl5cIjpbMTYsWzYsMTUsOCwxOCwxMCwxNSwtMSwtMSwzLDEyLDgsMTcsMTMsMTIsLTEsLTEsOCwxNyw4LDBdXSxfOlsxNixbMCwtMiwxNiwtMl1dLFwiYFwiOlsxMCxbNiwyMSw1LDIwLDQsMTgsNCwxNiw1LDE1LDYsMTYsNSwxN11dLGE6WzE5LFsxNSwxNCwxNSwwLC0xLC0xLDE1LDExLDEzLDEzLDExLDE0LDgsMTQsNiwxMyw0LDExLDMsOCwzLDYsNCwzLDYsMSw4LDAsMTEsMCwxMywxLDE1LDNdXSxiOlsxOSxbNCwyMSw0LDAsLTEsLTEsNCwxMSw2LDEzLDgsMTQsMTEsMTQsMTMsMTMsMTUsMTEsMTYsOCwxNiw2LDE1LDMsMTMsMSwxMSwwLDgsMCw2LDEsNCwzXV0sYzpbMTgsWzE1LDExLDEzLDEzLDExLDE0LDgsMTQsNiwxMyw0LDExLDMsOCwzLDYsNCwzLDYsMSw4LDAsMTEsMCwxMywxLDE1LDNdXSxkOlsxOSxbMTUsMjEsMTUsMCwtMSwtMSwxNSwxMSwxMywxMywxMSwxNCw4LDE0LDYsMTMsNCwxMSwzLDgsMyw2LDQsMyw2LDEsOCwwLDExLDAsMTMsMSwxNSwzXV0sZTpbMTgsWzMsOCwxNSw4LDE1LDEwLDE0LDEyLDEzLDEzLDExLDE0LDgsMTQsNiwxMyw0LDExLDMsOCwzLDYsNCwzLDYsMSw4LDAsMTEsMCwxMywxLDE1LDNdXSxmOlsxMixbMTAsMjEsOCwyMSw2LDIwLDUsMTcsNSwwLC0xLC0xLDIsMTQsOSwxNF1dLGc6WzE5LFsxNSwxNCwxNSwtMiwxNCwtNSwxMywtNiwxMSwtNyw4LC03LDYsLTYsLTEsLTEsMTUsMTEsMTMsMTMsMTEsMTQsOCwxNCw2LDEzLDQsMTEsMyw4LDMsNiw0LDMsNiwxLDgsMCwxMSwwLDEzLDEsMTUsM11dLGg6WzE5LFs0LDIxLDQsMCwtMSwtMSw0LDEwLDcsMTMsOSwxNCwxMiwxNCwxNCwxMywxNSwxMCwxNSwwXV0saTpbOCxbMywyMSw0LDIwLDUsMjEsNCwyMiwzLDIxLC0xLC0xLDQsMTQsNCwwXV0sajpbMTAsWzUsMjEsNiwyMCw3LDIxLDYsMjIsNSwyMSwtMSwtMSw2LDE0LDYsLTMsNSwtNiwzLC03LDEsLTddXSxrOlsxNyxbNCwyMSw0LDAsLTEsLTEsMTQsMTQsNCw0LC0xLC0xLDgsOCwxNSwwXV0sbDpbOCxbNCwyMSw0LDBdXSxtOlszMCxbNCwxNCw0LDAsLTEsLTEsNCwxMCw3LDEzLDksMTQsMTIsMTQsMTQsMTMsMTUsMTAsMTUsMCwtMSwtMSwxNSwxMCwxOCwxMywyMCwxNCwyMywxNCwyNSwxMywyNiwxMCwyNiwwXV0sbjpbMTksWzQsMTQsNCwwLC0xLC0xLDQsMTAsNywxMyw5LDE0LDEyLDE0LDE0LDEzLDE1LDEwLDE1LDBdXSxvOlsxOSxbOCwxNCw2LDEzLDQsMTEsMyw4LDMsNiw0LDMsNiwxLDgsMCwxMSwwLDEzLDEsMTUsMywxNiw2LDE2LDgsMTUsMTEsMTMsMTMsMTEsMTQsOCwxNF1dLHA6WzE5LFs0LDE0LDQsLTcsLTEsLTEsNCwxMSw2LDEzLDgsMTQsMTEsMTQsMTMsMTMsMTUsMTEsMTYsOCwxNiw2LDE1LDMsMTMsMSwxMSwwLDgsMCw2LDEsNCwzXV0scTpbMTksWzE1LDE0LDE1LC03LC0xLC0xLDE1LDExLDEzLDEzLDExLDE0LDgsMTQsNiwxMyw0LDExLDMsOCwzLDYsNCwzLDYsMSw4LDAsMTEsMCwxMywxLDE1LDNdXSxyOlsxMyxbNCwxNCw0LDAsLTEsLTEsNCw4LDUsMTEsNywxMyw5LDE0LDEyLDE0XV0sczpbMTcsWzE0LDExLDEzLDEzLDEwLDE0LDcsMTQsNCwxMywzLDExLDQsOSw2LDgsMTEsNywxMyw2LDE0LDQsMTQsMywxMywxLDEwLDAsNywwLDQsMSwzLDNdXSx0OlsxMixbNSwyMSw1LDQsNiwxLDgsMCwxMCwwLC0xLC0xLDIsMTQsOSwxNF1dLHU6WzE5LFs0LDE0LDQsNCw1LDEsNywwLDEwLDAsMTIsMSwxNSw0LC0xLC0xLDE1LDE0LDE1LDBdXSx2OlsxNixbMiwxNCw4LDAsLTEsLTEsMTQsMTQsOCwwXV0sdzpbMjIsWzMsMTQsNywwLC0xLC0xLDExLDE0LDcsMCwtMSwtMSwxMSwxNCwxNSwwLC0xLC0xLDE5LDE0LDE1LDBdXSx4OlsxNyxbMywxNCwxNCwwLC0xLC0xLDE0LDE0LDMsMF1dLHk6WzE2LFsyLDE0LDgsMCwtMSwtMSwxNCwxNCw4LDAsNiwtNCw0LC02LDIsLTcsMSwtN11dLHo6WzE3LFsxNCwxNCwzLDAsLTEsLTEsMywxNCwxNCwxNCwtMSwtMSwzLDAsMTQsMF1dLFwie1wiOlsxNCxbOSwyNSw3LDI0LDYsMjMsNSwyMSw1LDE5LDYsMTcsNywxNiw4LDE0LDgsMTIsNiwxMCwtMSwtMSw3LDI0LDYsMjIsNiwyMCw3LDE4LDgsMTcsOSwxNSw5LDEzLDgsMTEsNCw5LDgsNyw5LDUsOSwzLDgsMSw3LDAsNiwtMiw2LC00LDcsLTYsLTEsLTEsNiw4LDgsNiw4LDQsNywyLDYsMSw1LC0xLDUsLTMsNiwtNSw3LC02LDksLTddXSxcInxcIjpbOCxbNCwyNSw0LC03XV0sXCJ9XCI6WzE0LFs1LDI1LDcsMjQsOCwyMyw5LDIxLDksMTksOCwxNyw3LDE2LDYsMTQsNiwxMiw4LDEwLC0xLC0xLDcsMjQsOCwyMiw4LDIwLDcsMTgsNiwxNyw1LDE1LDUsMTMsNiwxMSwxMCw5LDYsNyw1LDUsNSwzLDYsMSw3LDAsOCwtMiw4LC00LDcsLTYsLTEsLTEsOCw4LDYsNiw2LDQsNywyLDgsMSw5LC0xLDksLTMsOCwtNSw3LC02LDUsLTddXSxcIn5cIjpbMjQsWzMsNiwzLDgsNCwxMSw2LDEyLDgsMTIsMTAsMTEsMTQsOCwxNiw3LDE4LDcsMjAsOCwyMSwxMCwtMSwtMSwzLDgsNCwxMCw2LDExLDgsMTEsMTAsMTAsMTQsNywxNiw2LDE4LDYsMjAsNywyMSwxMCwyMSwxMl1dfTt2YXIgZ2k9e3N5bWJvbDpmdW5jdGlvbih0LGUsaSxuKXtpZihcInRyYW5zbHVjZW50XCI9PT10LnJlbmRlclBhc3Mpe3ZhciBvPXQuY29udGV4dDtvLnNldFN0ZW5jaWxNb2RlKER0LmRpc2FibGVkKSxvLnNldENvbG9yTW9kZSh0LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSksMCE9PWkucGFpbnQuZ2V0KFwiaWNvbi1vcGFjaXR5XCIpLmNvbnN0YW50T3IoMSkmJlFlKHQsZSxpLG4sITEsaS5wYWludC5nZXQoXCJpY29uLXRyYW5zbGF0ZVwiKSxpLnBhaW50LmdldChcImljb24tdHJhbnNsYXRlLWFuY2hvclwiKSxpLmxheW91dC5nZXQoXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiKSxpLmxheW91dC5nZXQoXCJpY29uLXBpdGNoLWFsaWdubWVudFwiKSxpLmxheW91dC5nZXQoXCJpY29uLWtlZXAtdXByaWdodFwiKSksMCE9PWkucGFpbnQuZ2V0KFwidGV4dC1vcGFjaXR5XCIpLmNvbnN0YW50T3IoMSkmJlFlKHQsZSxpLG4sITAsaS5wYWludC5nZXQoXCJ0ZXh0LXRyYW5zbGF0ZVwiKSxpLnBhaW50LmdldChcInRleHQtdHJhbnNsYXRlLWFuY2hvclwiKSxpLmxheW91dC5nZXQoXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiKSxpLmxheW91dC5nZXQoXCJ0ZXh0LXBpdGNoLWFsaWdubWVudFwiKSxpLmxheW91dC5nZXQoXCJ0ZXh0LWtlZXAtdXByaWdodFwiKSksZS5tYXAuc2hvd0NvbGxpc2lvbkJveGVzJiZmdW5jdGlvbih0LGUsaSxuKXtLZSh0LGUsaSxuLCExKSxLZSh0LGUsaSxuLCEwKTt9KHQsZSxpLG4pO319LGNpcmNsZTpmdW5jdGlvbih0LGUsaSxuKXtpZihcInRyYW5zbHVjZW50XCI9PT10LnJlbmRlclBhc3Mpe3ZhciBvPWkucGFpbnQuZ2V0KFwiY2lyY2xlLW9wYWNpdHlcIikscj1pLnBhaW50LmdldChcImNpcmNsZS1zdHJva2Utd2lkdGhcIiksYT1pLnBhaW50LmdldChcImNpcmNsZS1zdHJva2Utb3BhY2l0eVwiKTtpZigwIT09by5jb25zdGFudE9yKDEpfHwwIT09ci5jb25zdGFudE9yKDEpJiYwIT09YS5jb25zdGFudE9yKDEpKXt2YXIgcz10LmNvbnRleHQsbD1zLmdsO3Muc2V0RGVwdGhNb2RlKHQuZGVwdGhNb2RlRm9yU3VibGF5ZXIoMCxMdC5SZWFkT25seSkpLHMuc2V0U3RlbmNpbE1vZGUoRHQuZGlzYWJsZWQpLHMuc2V0Q29sb3JNb2RlKHQuY29sb3JNb2RlRm9yUmVuZGVyUGFzcygpKTtmb3IodmFyIGM9ITAsdT0wO3U8bi5sZW5ndGg7dSsrKXt2YXIgaD1uW3VdLHA9ZS5nZXRUaWxlKGgpLGQ9cC5nZXRCdWNrZXQoaSk7aWYoZCl7dmFyIGY9dC5jb250ZXh0LnByb2dyYW0uZ2V0KCksbT1kLnByb2dyYW1Db25maWd1cmF0aW9ucy5nZXQoaS5pZCksXz10LnVzZVByb2dyYW0oXCJjaXJjbGVcIixtKTtpZigoY3x8Xy5wcm9ncmFtIT09ZikmJihtLnNldFVuaWZvcm1zKHMsXyxpLnBhaW50LHt6b29tOnQudHJhbnNmb3JtLnpvb219KSxjPSExKSxsLnVuaWZvcm0xZihfLnVuaWZvcm1zLnVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZSx0LnRyYW5zZm9ybS5jYW1lcmFUb0NlbnRlckRpc3RhbmNlKSxsLnVuaWZvcm0xaShfLnVuaWZvcm1zLnVfc2NhbGVfd2l0aF9tYXAsXCJtYXBcIj09PWkucGFpbnQuZ2V0KFwiY2lyY2xlLXBpdGNoLXNjYWxlXCIpPzE6MCksXCJtYXBcIj09PWkucGFpbnQuZ2V0KFwiY2lyY2xlLXBpdGNoLWFsaWdubWVudFwiKSl7bC51bmlmb3JtMWkoXy51bmlmb3Jtcy51X3BpdGNoX3dpdGhfbWFwLDEpO3ZhciBnPW1lKHAsMSx0LnRyYW5zZm9ybS56b29tKTtsLnVuaWZvcm0yZihfLnVuaWZvcm1zLnVfZXh0cnVkZV9zY2FsZSxnLGcpO31lbHNlIGwudW5pZm9ybTFpKF8udW5pZm9ybXMudV9waXRjaF93aXRoX21hcCwwKSxsLnVuaWZvcm0yZnYoXy51bmlmb3Jtcy51X2V4dHJ1ZGVfc2NhbGUsdC50cmFuc2Zvcm0ucGl4ZWxzVG9HTFVuaXRzKTtsLnVuaWZvcm1NYXRyaXg0ZnYoXy51bmlmb3Jtcy51X21hdHJpeCwhMSx0LnRyYW5zbGF0ZVBvc01hdHJpeChoLnBvc01hdHJpeCxwLGkucGFpbnQuZ2V0KFwiY2lyY2xlLXRyYW5zbGF0ZVwiKSxpLnBhaW50LmdldChcImNpcmNsZS10cmFuc2xhdGUtYW5jaG9yXCIpKSksXy5kcmF3KHMsbC5UUklBTkdMRVMsaS5pZCxkLmxheW91dFZlcnRleEJ1ZmZlcixkLmluZGV4QnVmZmVyLGQuc2VnbWVudHMsbSk7fX19fX0saGVhdG1hcDpmdW5jdGlvbihlLGksbixvKXtpZigwIT09bi5wYWludC5nZXQoXCJoZWF0bWFwLW9wYWNpdHlcIikpaWYoXCJvZmZzY3JlZW5cIj09PWUucmVuZGVyUGFzcyl7dmFyIHI9ZS5jb250ZXh0LGE9ci5nbDtyLnNldERlcHRoTW9kZShlLmRlcHRoTW9kZUZvclN1YmxheWVyKDAsTHQuUmVhZE9ubHkpKSxyLnNldFN0ZW5jaWxNb2RlKER0LmRpc2FibGVkKSxmdW5jdGlvbih0LGUsaSl7dmFyIG49dC5nbDt0LmFjdGl2ZVRleHR1cmUuc2V0KG4uVEVYVFVSRTEpLHQudmlld3BvcnQuc2V0KFswLDAsZS53aWR0aC80LGUuaGVpZ2h0LzRdKTt2YXIgbz1pLmhlYXRtYXBGYm87aWYobyluLmJpbmRUZXh0dXJlKG4uVEVYVFVSRV8yRCxvLmNvbG9yQXR0YWNobWVudC5nZXQoKSksdC5iaW5kRnJhbWVidWZmZXIuc2V0KG8uZnJhbWVidWZmZXIpO2Vsc2V7dmFyIHI9bi5jcmVhdGVUZXh0dXJlKCk7bi5iaW5kVGV4dHVyZShuLlRFWFRVUkVfMkQsciksbi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfV1JBUF9TLG4uQ0xBTVBfVE9fRURHRSksbi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfV1JBUF9ULG4uQ0xBTVBfVE9fRURHRSksbi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfTUlOX0ZJTFRFUixuLkxJTkVBUiksbi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfTUFHX0ZJTFRFUixuLkxJTkVBUiksbz1pLmhlYXRtYXBGYm89dC5jcmVhdGVGcmFtZWJ1ZmZlcihlLndpZHRoLzQsZS5oZWlnaHQvNCksZnVuY3Rpb24gdChlLGksbixvKXt2YXIgcj1lLmdsO3IudGV4SW1hZ2UyRChyLlRFWFRVUkVfMkQsMCxyLlJHQkEsaS53aWR0aC80LGkuaGVpZ2h0LzQsMCxyLlJHQkEsZS5leHRUZXh0dXJlSGFsZkZsb2F0P2UuZXh0VGV4dHVyZUhhbGZGbG9hdC5IQUxGX0ZMT0FUX09FUzpyLlVOU0lHTkVEX0JZVEUsbnVsbCksby5jb2xvckF0dGFjaG1lbnQuc2V0KG4pLGUuZXh0VGV4dHVyZUhhbGZGbG9hdCYmci5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKHIuRlJBTUVCVUZGRVIpIT09ci5GUkFNRUJVRkZFUl9DT01QTEVURSYmKGUuZXh0VGV4dHVyZUhhbGZGbG9hdD1udWxsLG8uY29sb3JBdHRhY2htZW50LnNldERpcnR5KCksdChlLGksbixvKSk7fSh0LGUscixvKTt9fShyLGUsbiksci5jbGVhcih7Y29sb3I6dC5kZWZhdWx0JDgudHJhbnNwYXJlbnR9KSxyLnNldENvbG9yTW9kZShuZXcgUnQoW2EuT05FLGEuT05FXSx0LmRlZmF1bHQkOC50cmFuc3BhcmVudCxbITAsITAsITAsITBdKSk7Zm9yKHZhciBzPSEwLGw9MDtsPG8ubGVuZ3RoO2wrKyl7dmFyIGM9b1tsXTtpZighaS5oYXNSZW5kZXJhYmxlUGFyZW50KGMpKXt2YXIgdT1pLmdldFRpbGUoYyksaD11LmdldEJ1Y2tldChuKTtpZihoKXt2YXIgcD1lLmNvbnRleHQucHJvZ3JhbS5nZXQoKSxkPWgucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLmdldChuLmlkKSxmPWUudXNlUHJvZ3JhbShcImhlYXRtYXBcIixkKSxtPWUudHJhbnNmb3JtLnpvb207KHN8fGYucHJvZ3JhbSE9PXApJiYoZC5zZXRVbmlmb3JtcyhlLmNvbnRleHQsZixuLnBhaW50LHt6b29tOm19KSxzPSExKSxhLnVuaWZvcm0xZihmLnVuaWZvcm1zLnVfZXh0cnVkZV9zY2FsZSxtZSh1LDEsbSkpLGEudW5pZm9ybTFmKGYudW5pZm9ybXMudV9pbnRlbnNpdHksbi5wYWludC5nZXQoXCJoZWF0bWFwLWludGVuc2l0eVwiKSksYS51bmlmb3JtTWF0cml4NGZ2KGYudW5pZm9ybXMudV9tYXRyaXgsITEsYy5wb3NNYXRyaXgpLGYuZHJhdyhyLGEuVFJJQU5HTEVTLG4uaWQsaC5sYXlvdXRWZXJ0ZXhCdWZmZXIsaC5pbmRleEJ1ZmZlcixoLnNlZ21lbnRzLGQpO319fXIudmlld3BvcnQuc2V0KFswLDAsZS53aWR0aCxlLmhlaWdodF0pO31lbHNlXCJ0cmFuc2x1Y2VudFwiPT09ZS5yZW5kZXJQYXNzJiYoZS5jb250ZXh0LnNldENvbG9yTW9kZShlLmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSksZnVuY3Rpb24oZSxpKXt2YXIgbj1lLmNvbnRleHQsbz1uLmdsLHI9aS5oZWF0bWFwRmJvO2lmKHIpe24uYWN0aXZlVGV4dHVyZS5zZXQoby5URVhUVVJFMCksby5iaW5kVGV4dHVyZShvLlRFWFRVUkVfMkQsci5jb2xvckF0dGFjaG1lbnQuZ2V0KCkpLG4uYWN0aXZlVGV4dHVyZS5zZXQoby5URVhUVVJFMSk7dmFyIGE9aS5jb2xvclJhbXBUZXh0dXJlO2F8fChhPWkuY29sb3JSYW1wVGV4dHVyZT1uZXcgdC5kZWZhdWx0JDQobixpLmNvbG9yUmFtcCxvLlJHQkEpKSxhLmJpbmQoby5MSU5FQVIsby5DTEFNUF9UT19FREdFKSxuLnNldERlcHRoTW9kZShMdC5kaXNhYmxlZCksbi5zZXRTdGVuY2lsTW9kZShEdC5kaXNhYmxlZCk7dmFyIHM9ZS51c2VQcm9ncmFtKFwiaGVhdG1hcFRleHR1cmVcIiksbD1pLnBhaW50LmdldChcImhlYXRtYXAtb3BhY2l0eVwiKTtvLnVuaWZvcm0xZihzLnVuaWZvcm1zLnVfb3BhY2l0eSxsKSxvLnVuaWZvcm0xaShzLnVuaWZvcm1zLnVfaW1hZ2UsMCksby51bmlmb3JtMWkocy51bmlmb3Jtcy51X2NvbG9yX3JhbXAsMSk7dmFyIGM9dC5jcmVhdGUoKTt0Lm9ydGhvKGMsMCxlLndpZHRoLGUuaGVpZ2h0LDAsMCwxKSxvLnVuaWZvcm1NYXRyaXg0ZnYocy51bmlmb3Jtcy51X21hdHJpeCwhMSxjKSxvLnVuaWZvcm0yZihzLnVuaWZvcm1zLnVfd29ybGQsby5kcmF3aW5nQnVmZmVyV2lkdGgsby5kcmF3aW5nQnVmZmVySGVpZ2h0KSxlLnZpZXdwb3J0VkFPLmJpbmQoZS5jb250ZXh0LHMsZS52aWV3cG9ydEJ1ZmZlcixbXSksby5kcmF3QXJyYXlzKG8uVFJJQU5HTEVfU1RSSVAsMCw0KTt9fShlLG4pKTt9LGxpbmU6ZnVuY3Rpb24odCxlLGksbil7aWYoXCJ0cmFuc2x1Y2VudFwiPT09dC5yZW5kZXJQYXNzKXt2YXIgbz1pLnBhaW50LmdldChcImxpbmUtb3BhY2l0eVwiKSxyPWkucGFpbnQuZ2V0KFwibGluZS13aWR0aFwiKTtpZigwIT09by5jb25zdGFudE9yKDEpJiYwIT09ci5jb25zdGFudE9yKDEpKXt2YXIgYT10LmNvbnRleHQ7YS5zZXREZXB0aE1vZGUodC5kZXB0aE1vZGVGb3JTdWJsYXllcigwLEx0LlJlYWRPbmx5KSksYS5zZXRDb2xvck1vZGUodC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCkpO2Zvcih2YXIgcyxsPWkucGFpbnQuZ2V0KFwibGluZS1kYXNoYXJyYXlcIik/XCJsaW5lU0RGXCI6aS5wYWludC5nZXQoXCJsaW5lLXBhdHRlcm5cIik/XCJsaW5lUGF0dGVyblwiOmkucGFpbnQuZ2V0KFwibGluZS1ncmFkaWVudFwiKT9cImxpbmVHcmFkaWVudFwiOlwibGluZVwiLGM9ITAsdT0wLGg9bjt1PGgubGVuZ3RoO3UrPTEpe3ZhciBwPWhbdV0sZD1lLmdldFRpbGUocCksZj1kLmdldEJ1Y2tldChpKTtpZihmKXt2YXIgbT1mLnByb2dyYW1Db25maWd1cmF0aW9ucy5nZXQoaS5pZCksXz10LmNvbnRleHQucHJvZ3JhbS5nZXQoKSxnPXQudXNlUHJvZ3JhbShsLG0pLHY9Y3x8Zy5wcm9ncmFtIT09Xyx5PXMhPT1kLnRpbGVJRC5vdmVyc2NhbGVkWjt2JiZtLnNldFVuaWZvcm1zKHQuY29udGV4dCxnLGkucGFpbnQse3pvb206dC50cmFuc2Zvcm0uem9vbX0pLG5pKGcsdCxkLGYsaSxwLG0sdix5KSxzPWQudGlsZUlELm92ZXJzY2FsZWRaLGM9ITE7fX19fX0sZmlsbDpmdW5jdGlvbihlLGksbixvKXt2YXIgcj1uLnBhaW50LmdldChcImZpbGwtY29sb3JcIiksYT1uLnBhaW50LmdldChcImZpbGwtb3BhY2l0eVwiKTtpZigwIT09YS5jb25zdGFudE9yKDEpKXt2YXIgcz1lLmNvbnRleHQ7cy5zZXRDb2xvck1vZGUoZS5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCkpO3ZhciBsPW4ucGFpbnQuZ2V0KFwiZmlsbC1wYXR0ZXJuXCIpfHwxIT09ci5jb25zdGFudE9yKHQuZGVmYXVsdCQ4LnRyYW5zcGFyZW50KS5hfHwxIT09YS5jb25zdGFudE9yKDApP1widHJhbnNsdWNlbnRcIjpcIm9wYXF1ZVwiO2UucmVuZGVyUGFzcz09PWwmJihzLnNldERlcHRoTW9kZShlLmRlcHRoTW9kZUZvclN1YmxheWVyKDEsXCJvcGFxdWVcIj09PWUucmVuZGVyUGFzcz9MdC5SZWFkV3JpdGU6THQuUmVhZE9ubHkpKSxzaShlLGksbixvLGxpKSksXCJ0cmFuc2x1Y2VudFwiPT09ZS5yZW5kZXJQYXNzJiZuLnBhaW50LmdldChcImZpbGwtYW50aWFsaWFzXCIpJiYocy5zZXREZXB0aE1vZGUoZS5kZXB0aE1vZGVGb3JTdWJsYXllcihuLmdldFBhaW50UHJvcGVydHkoXCJmaWxsLW91dGxpbmUtY29sb3JcIik/MjowLEx0LlJlYWRPbmx5KSksc2koZSxpLG4sbyxjaSkpO319LFwiZmlsbC1leHRydXNpb25cIjpmdW5jdGlvbihlLGksbixvKXtpZigwIT09bi5wYWludC5nZXQoXCJmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5XCIpKWlmKFwib2Zmc2NyZWVuXCI9PT1lLnJlbmRlclBhc3MpeyFmdW5jdGlvbihlLGkpe3ZhciBuPWUuY29udGV4dCxvPW4uZ2wscj1pLnZpZXdwb3J0RnJhbWU7aWYoZS5kZXB0aFJib05lZWRzQ2xlYXImJmUuc2V0dXBPZmZzY3JlZW5EZXB0aFJlbmRlcmJ1ZmZlcigpLCFyKXt2YXIgYT1uZXcgdC5kZWZhdWx0JDQobix7d2lkdGg6ZS53aWR0aCxoZWlnaHQ6ZS5oZWlnaHQsZGF0YTpudWxsfSxvLlJHQkEpO2EuYmluZChvLkxJTkVBUixvLkNMQU1QX1RPX0VER0UpLChyPWkudmlld3BvcnRGcmFtZT1uLmNyZWF0ZUZyYW1lYnVmZmVyKGUud2lkdGgsZS5oZWlnaHQpKS5jb2xvckF0dGFjaG1lbnQuc2V0KGEudGV4dHVyZSk7fW4uYmluZEZyYW1lYnVmZmVyLnNldChyLmZyYW1lYnVmZmVyKSxyLmRlcHRoQXR0YWNobWVudC5zZXQoZS5kZXB0aFJibyksZS5kZXB0aFJib05lZWRzQ2xlYXImJihuLmNsZWFyKHtkZXB0aDoxfSksZS5kZXB0aFJib05lZWRzQ2xlYXI9ITEpLG4uY2xlYXIoe2NvbG9yOnQuZGVmYXVsdCQ4LnRyYW5zcGFyZW50fSksbi5zZXRTdGVuY2lsTW9kZShEdC5kaXNhYmxlZCksbi5zZXREZXB0aE1vZGUobmV3IEx0KG8uTEVRVUFMLEx0LlJlYWRXcml0ZSxbMCwxXSkpLG4uc2V0Q29sb3JNb2RlKGUuY29sb3JNb2RlRm9yUmVuZGVyUGFzcygpKTt9KGUsbik7Zm9yKHZhciByPSEwLGE9MCxzPW87YTxzLmxlbmd0aDthKz0xKXt2YXIgbD1zW2FdLGM9aS5nZXRUaWxlKGwpLHU9Yy5nZXRCdWNrZXQobik7dSYmKGhpKGUsMCxuLGMsbCx1LHIpLHI9ITEpO319ZWxzZVwidHJhbnNsdWNlbnRcIj09PWUucmVuZGVyUGFzcyYmZnVuY3Rpb24oZSxpKXt2YXIgbj1pLnZpZXdwb3J0RnJhbWU7aWYobil7dmFyIG89ZS5jb250ZXh0LHI9by5nbCxhPWUudXNlUHJvZ3JhbShcImV4dHJ1c2lvblRleHR1cmVcIik7by5zZXRTdGVuY2lsTW9kZShEdC5kaXNhYmxlZCksby5zZXREZXB0aE1vZGUoTHQuZGlzYWJsZWQpLG8uc2V0Q29sb3JNb2RlKGUuY29sb3JNb2RlRm9yUmVuZGVyUGFzcygpKSxvLmFjdGl2ZVRleHR1cmUuc2V0KHIuVEVYVFVSRTApLHIuYmluZFRleHR1cmUoci5URVhUVVJFXzJELG4uY29sb3JBdHRhY2htZW50LmdldCgpKSxyLnVuaWZvcm0xZihhLnVuaWZvcm1zLnVfb3BhY2l0eSxpLnBhaW50LmdldChcImZpbGwtZXh0cnVzaW9uLW9wYWNpdHlcIikpLHIudW5pZm9ybTFpKGEudW5pZm9ybXMudV9pbWFnZSwwKTt2YXIgcz10LmNyZWF0ZSgpO3Qub3J0aG8ocywwLGUud2lkdGgsZS5oZWlnaHQsMCwwLDEpLHIudW5pZm9ybU1hdHJpeDRmdihhLnVuaWZvcm1zLnVfbWF0cml4LCExLHMpLHIudW5pZm9ybTJmKGEudW5pZm9ybXMudV93b3JsZCxyLmRyYXdpbmdCdWZmZXJXaWR0aCxyLmRyYXdpbmdCdWZmZXJIZWlnaHQpLGUudmlld3BvcnRWQU8uYmluZChvLGEsZS52aWV3cG9ydEJ1ZmZlcixbXSksci5kcmF3QXJyYXlzKHIuVFJJQU5HTEVfU1RSSVAsMCw0KTt9fShlLG4pO30saGlsbHNoYWRlOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKFwib2Zmc2NyZWVuXCI9PT10LnJlbmRlclBhc3N8fFwidHJhbnNsdWNlbnRcIj09PXQucmVuZGVyUGFzcyl7dmFyIG89dC5jb250ZXh0LHI9ZS5nZXRTb3VyY2UoKS5tYXh6b29tO28uc2V0RGVwdGhNb2RlKHQuZGVwdGhNb2RlRm9yU3VibGF5ZXIoMCxMdC5SZWFkT25seSkpLG8uc2V0U3RlbmNpbE1vZGUoRHQuZGlzYWJsZWQpLG8uc2V0Q29sb3JNb2RlKHQuY29sb3JNb2RlRm9yUmVuZGVyUGFzcygpKTtmb3IodmFyIGE9MCxzPW47YTxzLmxlbmd0aDthKz0xKXt2YXIgbD1zW2FdLGM9ZS5nZXRUaWxlKGwpO2MubmVlZHNIaWxsc2hhZGVQcmVwYXJlJiZcIm9mZnNjcmVlblwiPT09dC5yZW5kZXJQYXNzP2RpKHQsYyxyKTpcInRyYW5zbHVjZW50XCI9PT10LnJlbmRlclBhc3MmJnBpKHQsYyxpKTt9by52aWV3cG9ydC5zZXQoWzAsMCx0LndpZHRoLHQuaGVpZ2h0XSk7fX0scmFzdGVyOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKFwidHJhbnNsdWNlbnRcIj09PXQucmVuZGVyUGFzcyYmMCE9PWkucGFpbnQuZ2V0KFwicmFzdGVyLW9wYWNpdHlcIikpe3ZhciBvLHIsYT10LmNvbnRleHQscz1hLmdsLGw9ZS5nZXRTb3VyY2UoKSxjPXQudXNlUHJvZ3JhbShcInJhc3RlclwiKTthLnNldFN0ZW5jaWxNb2RlKER0LmRpc2FibGVkKSxhLnNldENvbG9yTW9kZSh0LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSkscy51bmlmb3JtMWYoYy51bmlmb3Jtcy51X2JyaWdodG5lc3NfbG93LGkucGFpbnQuZ2V0KFwicmFzdGVyLWJyaWdodG5lc3MtbWluXCIpKSxzLnVuaWZvcm0xZihjLnVuaWZvcm1zLnVfYnJpZ2h0bmVzc19oaWdoLGkucGFpbnQuZ2V0KFwicmFzdGVyLWJyaWdodG5lc3MtbWF4XCIpKSxzLnVuaWZvcm0xZihjLnVuaWZvcm1zLnVfc2F0dXJhdGlvbl9mYWN0b3IsKG89aS5wYWludC5nZXQoXCJyYXN0ZXItc2F0dXJhdGlvblwiKSk+MD8xLTEvKDEuMDAxLW8pOi1vKSxzLnVuaWZvcm0xZihjLnVuaWZvcm1zLnVfY29udHJhc3RfZmFjdG9yLChyPWkucGFpbnQuZ2V0KFwicmFzdGVyLWNvbnRyYXN0XCIpKT4wPzEvKDEtcik6MStyKSxzLnVuaWZvcm0zZnYoYy51bmlmb3Jtcy51X3NwaW5fd2VpZ2h0cyxmdW5jdGlvbih0KXt0Kj1NYXRoLlBJLzE4MDt2YXIgZT1NYXRoLnNpbih0KSxpPU1hdGguY29zKHQpO3JldHVyblsoMippKzEpLzMsKC1NYXRoLnNxcnQoMykqZS1pKzEpLzMsKE1hdGguc3FydCgzKSplLWkrMSkvM119KGkucGFpbnQuZ2V0KFwicmFzdGVyLWh1ZS1yb3RhdGVcIikpKSxzLnVuaWZvcm0xZihjLnVuaWZvcm1zLnVfYnVmZmVyX3NjYWxlLDEpLHMudW5pZm9ybTFpKGMudW5pZm9ybXMudV9pbWFnZTAsMCkscy51bmlmb3JtMWkoYy51bmlmb3Jtcy51X2ltYWdlMSwxKTtmb3IodmFyIHU9bi5sZW5ndGgmJm5bMF0ub3ZlcnNjYWxlZFosaD0wLHA9bjtoPHAubGVuZ3RoO2grPTEpe3ZhciBkPXBbaF07YS5zZXREZXB0aE1vZGUodC5kZXB0aE1vZGVGb3JTdWJsYXllcihkLm92ZXJzY2FsZWRaLXUsMT09PWkucGFpbnQuZ2V0KFwicmFzdGVyLW9wYWNpdHlcIik/THQuUmVhZFdyaXRlOkx0LlJlYWRPbmx5LHMuTEVTUykpO3ZhciBmPWUuZ2V0VGlsZShkKSxtPXQudHJhbnNmb3JtLmNhbGN1bGF0ZVBvc01hdHJpeChkLnRvVW53cmFwcGVkKCksITApO2YucmVnaXN0ZXJGYWRlRHVyYXRpb24oaS5wYWludC5nZXQoXCJyYXN0ZXItZmFkZS1kdXJhdGlvblwiKSkscy51bmlmb3JtTWF0cml4NGZ2KGMudW5pZm9ybXMudV9tYXRyaXgsITEsbSk7dmFyIF89ZS5maW5kTG9hZGVkUGFyZW50KGQsMCx7fSksZz1maShmLF8sZSxpLHQudHJhbnNmb3JtKSx2PXZvaWQgMCx5PXZvaWQgMDtpZihhLmFjdGl2ZVRleHR1cmUuc2V0KHMuVEVYVFVSRTApLGYudGV4dHVyZS5iaW5kKHMuTElORUFSLHMuQ0xBTVBfVE9fRURHRSxzLkxJTkVBUl9NSVBNQVBfTkVBUkVTVCksYS5hY3RpdmVUZXh0dXJlLnNldChzLlRFWFRVUkUxKSxfPyhfLnRleHR1cmUuYmluZChzLkxJTkVBUixzLkNMQU1QX1RPX0VER0Uscy5MSU5FQVJfTUlQTUFQX05FQVJFU1QpLHY9TWF0aC5wb3coMixfLnRpbGVJRC5vdmVyc2NhbGVkWi1mLnRpbGVJRC5vdmVyc2NhbGVkWikseT1bZi50aWxlSUQuY2Fub25pY2FsLngqdiUxLGYudGlsZUlELmNhbm9uaWNhbC55KnYlMV0pOmYudGV4dHVyZS5iaW5kKHMuTElORUFSLHMuQ0xBTVBfVE9fRURHRSxzLkxJTkVBUl9NSVBNQVBfTkVBUkVTVCkscy51bmlmb3JtMmZ2KGMudW5pZm9ybXMudV90bF9wYXJlbnQseXx8WzAsMF0pLHMudW5pZm9ybTFmKGMudW5pZm9ybXMudV9zY2FsZV9wYXJlbnQsdnx8MSkscy51bmlmb3JtMWYoYy51bmlmb3Jtcy51X2ZhZGVfdCxnLm1peCkscy51bmlmb3JtMWYoYy51bmlmb3Jtcy51X29wYWNpdHksZy5vcGFjaXR5KmkucGFpbnQuZ2V0KFwicmFzdGVyLW9wYWNpdHlcIikpLGwgaW5zdGFuY2VvZiBqKXt2YXIgeD1sLmJvdW5kc0J1ZmZlcjtsLmJvdW5kc1ZBTy5iaW5kKGEsYyx4LFtdKSxzLmRyYXdBcnJheXMocy5UUklBTkdMRV9TVFJJUCwwLHgubGVuZ3RoKTt9ZWxzZSBpZihmLm1hc2tlZEJvdW5kc0J1ZmZlciYmZi5tYXNrZWRJbmRleEJ1ZmZlciYmZi5zZWdtZW50cyljLmRyYXcoYSxzLlRSSUFOR0xFUyxpLmlkLGYubWFza2VkQm91bmRzQnVmZmVyLGYubWFza2VkSW5kZXhCdWZmZXIsZi5zZWdtZW50cyk7ZWxzZXt2YXIgYj10LnJhc3RlckJvdW5kc0J1ZmZlcjt0LnJhc3RlckJvdW5kc1ZBTy5iaW5kKGEsYyxiLFtdKSxzLmRyYXdBcnJheXMocy5UUklBTkdMRV9TVFJJUCwwLGIubGVuZ3RoKTt9fX19LGJhY2tncm91bmQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkucGFpbnQuZ2V0KFwiYmFja2dyb3VuZC1jb2xvclwiKSxvPWkucGFpbnQuZ2V0KFwiYmFja2dyb3VuZC1vcGFjaXR5XCIpO2lmKDAhPT1vKXt2YXIgcj10LmNvbnRleHQsYT1yLmdsLHM9dC50cmFuc2Zvcm0sbD1zLnRpbGVTaXplLGM9aS5wYWludC5nZXQoXCJiYWNrZ3JvdW5kLXBhdHRlcm5cIiksdT1jfHwxIT09bi5hfHwxIT09bz9cInRyYW5zbHVjZW50XCI6XCJvcGFxdWVcIjtpZih0LnJlbmRlclBhc3M9PT11KXt2YXIgaDtpZihyLnNldFN0ZW5jaWxNb2RlKER0LmRpc2FibGVkKSxyLnNldERlcHRoTW9kZSh0LmRlcHRoTW9kZUZvclN1YmxheWVyKDAsXCJvcGFxdWVcIj09PXU/THQuUmVhZFdyaXRlOkx0LlJlYWRPbmx5KSksci5zZXRDb2xvck1vZGUodC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCkpLGMpe2lmKG9pKGMsdCkpcmV0dXJuO2g9dC51c2VQcm9ncmFtKFwiYmFja2dyb3VuZFBhdHRlcm5cIikscmkoYyx0LGgpLHQudGlsZUV4dGVudFBhdHRlcm5WQU8uYmluZChyLGgsdC50aWxlRXh0ZW50QnVmZmVyLFtdKTt9ZWxzZSBoPXQudXNlUHJvZ3JhbShcImJhY2tncm91bmRcIiksYS51bmlmb3JtNGZ2KGgudW5pZm9ybXMudV9jb2xvcixbbi5yLG4uZyxuLmIsbi5hXSksdC50aWxlRXh0ZW50VkFPLmJpbmQocixoLHQudGlsZUV4dGVudEJ1ZmZlcixbXSk7YS51bmlmb3JtMWYoaC51bmlmb3Jtcy51X29wYWNpdHksbyk7Zm9yKHZhciBwPTAsZD1zLmNvdmVyaW5nVGlsZXMoe3RpbGVTaXplOmx9KTtwPGQubGVuZ3RoO3ArPTEpe3ZhciBmPWRbcF07YyYmYWkoe3RpbGVJRDpmLHRpbGVTaXplOmx9LHQsaCksYS51bmlmb3JtTWF0cml4NGZ2KGgudW5pZm9ybXMudV9tYXRyaXgsITEsdC50cmFuc2Zvcm0uY2FsY3VsYXRlUG9zTWF0cml4KGYudG9VbndyYXBwZWQoKSkpLGEuZHJhd0FycmF5cyhhLlRSSUFOR0xFX1NUUklQLDAsdC50aWxlRXh0ZW50QnVmZmVyLmxlbmd0aCk7fX19fSxkZWJ1ZzpmdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuPTA7bjxpLmxlbmd0aDtuKyspbWkodCxlLGlbbl0pO319LHZpPWZ1bmN0aW9uKGUsaSl7dGhpcy5jb250ZXh0PW5ldyBQdChlKSx0aGlzLnRyYW5zZm9ybT1pLHRoaXMuX3RpbGVUZXh0dXJlcz17fSx0aGlzLnNldHVwKCksdGhpcy5udW1TdWJsYXllcnM9a3QubWF4VW5kZXJ6b29taW5nK2t0Lm1heE92ZXJ6b29taW5nKzEsdGhpcy5kZXB0aEVwc2lsb249MS9NYXRoLnBvdygyLDE2KSx0aGlzLmRlcHRoUmJvTmVlZHNDbGVhcj0hMCx0aGlzLmVtcHR5UHJvZ3JhbUNvbmZpZ3VyYXRpb249bmV3IHQuZGVmYXVsdCQyMix0aGlzLmNyb3NzVGlsZVN5bWJvbEluZGV4PW5ldyBPZTt9O2Z1bmN0aW9uIHlpKHQsZSl7aWYodC5yb3c+ZS5yb3cpe3ZhciBpPXQ7dD1lLGU9aTt9cmV0dXJue3gwOnQuY29sdW1uLHkwOnQucm93LHgxOmUuY29sdW1uLHkxOmUucm93LGR4OmUuY29sdW1uLXQuY29sdW1uLGR5OmUucm93LXQucm93fX1mdW5jdGlvbiB4aSh0LGUsaSxuLG8pe3ZhciByPU1hdGgubWF4KGksTWF0aC5mbG9vcihlLnkwKSksYT1NYXRoLm1pbihuLE1hdGguY2VpbChlLnkxKSk7aWYodC54MD09PWUueDAmJnQueTA9PT1lLnkwP3QueDArZS5keS90LmR5KnQuZHg8ZS54MTp0LngxLWUuZHkvdC5keSp0LmR4PGUueDApe3ZhciBzPXQ7dD1lLGU9czt9Zm9yKHZhciBsPXQuZHgvdC5keSxjPWUuZHgvZS5keSx1PXQuZHg+MCxoPWUuZHg8MCxwPXI7cDxhO3ArKyl7dmFyIGQ9bCpNYXRoLm1heCgwLE1hdGgubWluKHQuZHkscCt1LXQueTApKSt0LngwLGY9YypNYXRoLm1heCgwLE1hdGgubWluKGUuZHkscCtoLWUueTApKStlLngwO28oTWF0aC5mbG9vcihmKSxNYXRoLmNlaWwoZCkscCk7fX1mdW5jdGlvbiBiaSh0LGUsaSxuLG8scil7dmFyIGEscz15aSh0LGUpLGw9eWkoZSxpKSxjPXlpKGksdCk7cy5keT5sLmR5JiYoYT1zLHM9bCxsPWEpLHMuZHk+Yy5keSYmKGE9cyxzPWMsYz1hKSxsLmR5PmMuZHkmJihhPWwsbD1jLGM9YSkscy5keSYmeGkoYyxzLG4sbyxyKSxsLmR5JiZ4aShjLGwsbixvLHIpO312aS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpcy5jb250ZXh0LmdsO2lmKHRoaXMud2lkdGg9ZSp0LmRlZmF1bHQkMi5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuaGVpZ2h0PWkqdC5kZWZhdWx0JDIuZGV2aWNlUGl4ZWxSYXRpbyx0aGlzLmNvbnRleHQudmlld3BvcnQuc2V0KFswLDAsdGhpcy53aWR0aCx0aGlzLmhlaWdodF0pLHRoaXMuc3R5bGUpZm9yKHZhciBvPTAscj10aGlzLnN0eWxlLl9vcmRlcjtvPHIubGVuZ3RoO28rPTEpe3ZhciBhPXJbb107dGhpcy5zdHlsZS5fbGF5ZXJzW2FdLnJlc2l6ZSgpO310aGlzLmRlcHRoUmJvJiYobi5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5kZXB0aFJibyksdGhpcy5kZXB0aFJibz1udWxsKTt9LHZpLnByb3RvdHlwZS5zZXR1cD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29udGV4dCxpPW5ldyB0LlBvc0FycmF5O2kuZW1wbGFjZUJhY2soMCwwKSxpLmVtcGxhY2VCYWNrKHQuZGVmYXVsdCQxMCwwKSxpLmVtcGxhY2VCYWNrKDAsdC5kZWZhdWx0JDEwKSxpLmVtcGxhY2VCYWNrKHQuZGVmYXVsdCQxMCx0LmRlZmF1bHQkMTApLHRoaXMudGlsZUV4dGVudEJ1ZmZlcj1lLmNyZWF0ZVZlcnRleEJ1ZmZlcihpLFplLm1lbWJlcnMpLHRoaXMudGlsZUV4dGVudFZBTz1uZXcgVix0aGlzLnRpbGVFeHRlbnRQYXR0ZXJuVkFPPW5ldyBWO3ZhciBuPW5ldyB0LlBvc0FycmF5O24uZW1wbGFjZUJhY2soMCwwKSxuLmVtcGxhY2VCYWNrKHQuZGVmYXVsdCQxMCwwKSxuLmVtcGxhY2VCYWNrKHQuZGVmYXVsdCQxMCx0LmRlZmF1bHQkMTApLG4uZW1wbGFjZUJhY2soMCx0LmRlZmF1bHQkMTApLG4uZW1wbGFjZUJhY2soMCwwKSx0aGlzLmRlYnVnQnVmZmVyPWUuY3JlYXRlVmVydGV4QnVmZmVyKG4sWmUubWVtYmVycyksdGhpcy5kZWJ1Z1ZBTz1uZXcgVjt2YXIgbz1uZXcgdC5SYXN0ZXJCb3VuZHNBcnJheTtvLmVtcGxhY2VCYWNrKDAsMCwwLDApLG8uZW1wbGFjZUJhY2sodC5kZWZhdWx0JDEwLDAsdC5kZWZhdWx0JDEwLDApLG8uZW1wbGFjZUJhY2soMCx0LmRlZmF1bHQkMTAsMCx0LmRlZmF1bHQkMTApLG8uZW1wbGFjZUJhY2sodC5kZWZhdWx0JDEwLHQuZGVmYXVsdCQxMCx0LmRlZmF1bHQkMTAsdC5kZWZhdWx0JDEwKSx0aGlzLnJhc3RlckJvdW5kc0J1ZmZlcj1lLmNyZWF0ZVZlcnRleEJ1ZmZlcihvLHQuZGVmYXVsdCQxMS5tZW1iZXJzKSx0aGlzLnJhc3RlckJvdW5kc1ZBTz1uZXcgVjt2YXIgcj1uZXcgdC5Qb3NBcnJheTtyLmVtcGxhY2VCYWNrKDAsMCksci5lbXBsYWNlQmFjaygxLDApLHIuZW1wbGFjZUJhY2soMCwxKSxyLmVtcGxhY2VCYWNrKDEsMSksdGhpcy52aWV3cG9ydEJ1ZmZlcj1lLmNyZWF0ZVZlcnRleEJ1ZmZlcihyLFplLm1lbWJlcnMpLHRoaXMudmlld3BvcnRWQU89bmV3IFY7fSx2aS5wcm90b3R5cGUuY2xlYXJTdGVuY2lsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZXh0LGk9ZS5nbDtlLnNldENvbG9yTW9kZShSdC5kaXNhYmxlZCksZS5zZXREZXB0aE1vZGUoTHQuZGlzYWJsZWQpLGUuc2V0U3RlbmNpbE1vZGUobmV3IER0KHtmdW5jOmkuQUxXQVlTLG1hc2s6MH0sMCwyNTUsaS5aRVJPLGkuWkVSTyxpLlpFUk8pKTt2YXIgbj10LmNyZWF0ZSgpO3Qub3J0aG8obiwwLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsMCwwLDEpLHQuc2NhbGUobixuLFtpLmRyYXdpbmdCdWZmZXJXaWR0aCxpLmRyYXdpbmdCdWZmZXJIZWlnaHQsMF0pO3ZhciBvPXRoaXMudXNlUHJvZ3JhbShcImNsaXBwaW5nTWFza1wiKTtpLnVuaWZvcm1NYXRyaXg0ZnYoby51bmlmb3Jtcy51X21hdHJpeCwhMSxuKSx0aGlzLnZpZXdwb3J0VkFPLmJpbmQoZSxvLHRoaXMudmlld3BvcnRCdWZmZXIsW10pLGkuZHJhd0FycmF5cyhpLlRSSUFOR0xFX1NUUklQLDAsNCk7fSx2aS5wcm90b3R5cGUuX3JlbmRlclRpbGVDbGlwcGluZ01hc2tzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGV4dCxpPWUuZ2w7ZS5zZXRDb2xvck1vZGUoUnQuZGlzYWJsZWQpLGUuc2V0RGVwdGhNb2RlKEx0LmRpc2FibGVkKTt2YXIgbj0xO3RoaXMuX3RpbGVDbGlwcGluZ01hc2tJRHM9e307Zm9yKHZhciBvPTAscj10O288ci5sZW5ndGg7bys9MSl7dmFyIGE9cltvXSxzPXRoaXMuX3RpbGVDbGlwcGluZ01hc2tJRHNbYS5rZXldPW4rKztlLnNldFN0ZW5jaWxNb2RlKG5ldyBEdCh7ZnVuYzppLkFMV0FZUyxtYXNrOjB9LHMsMjU1LGkuS0VFUCxpLktFRVAsaS5SRVBMQUNFKSk7dmFyIGw9dGhpcy51c2VQcm9ncmFtKFwiY2xpcHBpbmdNYXNrXCIpO2kudW5pZm9ybU1hdHJpeDRmdihsLnVuaWZvcm1zLnVfbWF0cml4LCExLGEucG9zTWF0cml4KSx0aGlzLnRpbGVFeHRlbnRWQU8uYmluZCh0aGlzLmNvbnRleHQsbCx0aGlzLnRpbGVFeHRlbnRCdWZmZXIsW10pLGkuZHJhd0FycmF5cyhpLlRSSUFOR0xFX1NUUklQLDAsdGhpcy50aWxlRXh0ZW50QnVmZmVyLmxlbmd0aCk7fX0sdmkucHJvdG90eXBlLnN0ZW5jaWxNb2RlRm9yQ2xpcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZXh0LmdsO3JldHVybiBuZXcgRHQoe2Z1bmM6ZS5FUVVBTCxtYXNrOjI1NX0sdGhpcy5fdGlsZUNsaXBwaW5nTWFza0lEc1t0LmtleV0sMCxlLktFRVAsZS5LRUVQLGUuUkVQTEFDRSl9LHZpLnByb3RvdHlwZS5jb2xvck1vZGVGb3JSZW5kZXJQYXNzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZXh0LmdsO2lmKHRoaXMuX3Nob3dPdmVyZHJhd0luc3BlY3Rvcil7cmV0dXJuIG5ldyBSdChbZS5DT05TVEFOVF9DT0xPUixlLk9ORV0sbmV3IHQuZGVmYXVsdCQ4KDEvOCwxLzgsMS84LDApLFshMCwhMCwhMCwhMF0pfXJldHVyblwib3BhcXVlXCI9PT10aGlzLnJlbmRlclBhc3M/UnQudW5ibGVuZGVkOlJ0LmFscGhhQmxlbmRlZH0sdmkucHJvdG90eXBlLmRlcHRoTW9kZUZvclN1YmxheWVyPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj0xLSgoMSt0aGlzLmN1cnJlbnRMYXllcikqdGhpcy5udW1TdWJsYXllcnMrdCkqdGhpcy5kZXB0aEVwc2lsb24sbz1uLTErdGhpcy5kZXB0aFJhbmdlO3JldHVybiBuZXcgTHQoaXx8dGhpcy5jb250ZXh0LmdsLkxFUVVBTCxlLFtvLG5dKX0sdmkucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihlLGkpe3ZhciBuPXRoaXM7Zm9yKHZhciBvIGluIHRoaXMuc3R5bGU9ZSx0aGlzLm9wdGlvbnM9aSx0aGlzLmxpbmVBdGxhcz1lLmxpbmVBdGxhcyx0aGlzLmltYWdlTWFuYWdlcj1lLmltYWdlTWFuYWdlcix0aGlzLmdseXBoTWFuYWdlcj1lLmdseXBoTWFuYWdlcix0aGlzLnN5bWJvbEZhZGVDaGFuZ2U9ZS5wbGFjZW1lbnQuc3ltYm9sRmFkZUNoYW5nZSh0LmRlZmF1bHQkMi5ub3coKSksZS5zb3VyY2VDYWNoZXMpe3ZhciByPW4uc3R5bGUuc291cmNlQ2FjaGVzW29dO3IudXNlZCYmci5wcmVwYXJlKG4uY29udGV4dCk7fXZhciBhPXRoaXMuc3R5bGUuX29yZGVyLHM9dC5maWx0ZXJPYmplY3QodGhpcy5zdHlsZS5zb3VyY2VDYWNoZXMsZnVuY3Rpb24odCl7cmV0dXJuXCJyYXN0ZXJcIj09PXQuZ2V0U291cmNlKCkudHlwZXx8XCJyYXN0ZXItZGVtXCI9PT10LmdldFNvdXJjZSgpLnR5cGV9KSxsPWZ1bmN0aW9uKGUpe3ZhciBpPXNbZV07IWZ1bmN0aW9uKGUsaSl7Zm9yKHZhciBuPWUuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0LnRpbGVJRC5pc0xlc3NUaGFuKGUudGlsZUlEKT8tMTplLnRpbGVJRC5pc0xlc3NUaGFuKHQudGlsZUlEKT8xOjB9KSxvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciByPXt9LGE9bltvXSxzPW4uc2xpY2UobysxKTtIZShhLnRpbGVJRC53cmFwcGVkKCksYS50aWxlSUQscyxuZXcgdC5PdmVyc2NhbGVkVGlsZUlEKDAsYS50aWxlSUQud3JhcCsxLDAsMCwwKSxyKSxhLnNldE1hc2socixpKTt9fShpLmdldFZpc2libGVDb29yZGluYXRlcygpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gaS5nZXRUaWxlKHQpfSksbi5jb250ZXh0KTt9O2Zvcih2YXIgYyBpbiBzKWwoYyk7dGhpcy5yZW5kZXJQYXNzPVwib2Zmc2NyZWVuXCI7dmFyIHUsaD1bXTt0aGlzLmRlcHRoUmJvTmVlZHNDbGVhcj0hMDtmb3IodmFyIHA9MDtwPGEubGVuZ3RoO3ArKyl7dmFyIGQ9bi5zdHlsZS5fbGF5ZXJzW2FbcF1dO2QuaGFzT2Zmc2NyZWVuUGFzcygpJiYhZC5pc0hpZGRlbihuLnRyYW5zZm9ybS56b29tKSYmKGQuc291cmNlIT09KHUmJnUuaWQpJiYoaD1bXSwodT1uLnN0eWxlLnNvdXJjZUNhY2hlc1tkLnNvdXJjZV0pJiYoaD11LmdldFZpc2libGVDb29yZGluYXRlcygpKS5yZXZlcnNlKCkpLGgubGVuZ3RoJiZuLnJlbmRlckxheWVyKG4sdSxkLGgpKTt9dGhpcy5jb250ZXh0LmJpbmRGcmFtZWJ1ZmZlci5zZXQobnVsbCksdGhpcy5jb250ZXh0LmNsZWFyKHtjb2xvcjppLnNob3dPdmVyZHJhd0luc3BlY3Rvcj90LmRlZmF1bHQkOC5ibGFjazp0LmRlZmF1bHQkOC50cmFuc3BhcmVudCxkZXB0aDoxfSksdGhpcy5fc2hvd092ZXJkcmF3SW5zcGVjdG9yPWkuc2hvd092ZXJkcmF3SW5zcGVjdG9yLHRoaXMuZGVwdGhSYW5nZT0oZS5fb3JkZXIubGVuZ3RoKzIpKnRoaXMubnVtU3VibGF5ZXJzKnRoaXMuZGVwdGhFcHNpbG9uLHRoaXMucmVuZGVyUGFzcz1cIm9wYXF1ZVwiO3ZhciBmLG09W107Zm9yKHRoaXMuY3VycmVudExheWVyPWEubGVuZ3RoLTEsdGhpcy5jdXJyZW50TGF5ZXI7dGhpcy5jdXJyZW50TGF5ZXI+PTA7dGhpcy5jdXJyZW50TGF5ZXItLSl7dmFyIF89bi5zdHlsZS5fbGF5ZXJzW2Fbbi5jdXJyZW50TGF5ZXJdXTtfLnNvdXJjZSE9PShmJiZmLmlkKSYmKG09W10sKGY9bi5zdHlsZS5zb3VyY2VDYWNoZXNbXy5zb3VyY2VdKSYmKG4uY2xlYXJTdGVuY2lsKCksbT1mLmdldFZpc2libGVDb29yZGluYXRlcygpLGYuZ2V0U291cmNlKCkuaXNUaWxlQ2xpcHBlZCYmbi5fcmVuZGVyVGlsZUNsaXBwaW5nTWFza3MobSkpKSxuLnJlbmRlckxheWVyKG4sZixfLG0pO310aGlzLnJlbmRlclBhc3M9XCJ0cmFuc2x1Y2VudFwiO3ZhciBnLHY9W107Zm9yKHRoaXMuY3VycmVudExheWVyPTAsdGhpcy5jdXJyZW50TGF5ZXI7dGhpcy5jdXJyZW50TGF5ZXI8YS5sZW5ndGg7dGhpcy5jdXJyZW50TGF5ZXIrKyl7dmFyIHk9bi5zdHlsZS5fbGF5ZXJzW2Fbbi5jdXJyZW50TGF5ZXJdXTt5LnNvdXJjZSE9PShnJiZnLmlkKSYmKHY9W10sKGc9bi5zdHlsZS5zb3VyY2VDYWNoZXNbeS5zb3VyY2VdKSYmKG4uY2xlYXJTdGVuY2lsKCksdj1nLmdldFZpc2libGVDb29yZGluYXRlcygpLGcuZ2V0U291cmNlKCkuaXNUaWxlQ2xpcHBlZCYmbi5fcmVuZGVyVGlsZUNsaXBwaW5nTWFza3ModikpLHYucmV2ZXJzZSgpKSxuLnJlbmRlckxheWVyKG4sZyx5LHYpO31pZih0aGlzLm9wdGlvbnMuc2hvd1RpbGVCb3VuZGFyaWVzKXt2YXIgeD10aGlzLnN0eWxlLnNvdXJjZUNhY2hlc1tPYmplY3Qua2V5cyh0aGlzLnN0eWxlLnNvdXJjZUNhY2hlcylbMF1dO3gmJmdpLmRlYnVnKHRoaXMseCx4LmdldFZpc2libGVDb29yZGluYXRlcygpKTt9fSx2aS5wcm90b3R5cGUuc2V0dXBPZmZzY3JlZW5EZXB0aFJlbmRlcmJ1ZmZlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29udGV4dDt0aGlzLmRlcHRoUmJvfHwodGhpcy5kZXB0aFJibz10LmNyZWF0ZVJlbmRlcmJ1ZmZlcih0LmdsLkRFUFRIX0NPTVBPTkVOVDE2LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpKTt9LHZpLnByb3RvdHlwZS5yZW5kZXJMYXllcj1mdW5jdGlvbih0LGUsaSxuKXtpLmlzSGlkZGVuKHRoaXMudHJhbnNmb3JtLnpvb20pfHwoXCJiYWNrZ3JvdW5kXCI9PT1pLnR5cGV8fG4ubGVuZ3RoKSYmKHRoaXMuaWQ9aS5pZCxnaVtpLnR5cGVdKHQsZSxpLG4pKTt9LHZpLnByb3RvdHlwZS50cmFuc2xhdGVQb3NNYXRyaXg9ZnVuY3Rpb24oZSxpLG4sbyxyKXtpZighblswXSYmIW5bMV0pcmV0dXJuIGU7dmFyIGE9cj9cIm1hcFwiPT09bz90aGlzLnRyYW5zZm9ybS5hbmdsZTowOlwidmlld3BvcnRcIj09PW8/LXRoaXMudHJhbnNmb3JtLmFuZ2xlOjA7aWYoYSl7dmFyIHM9TWF0aC5zaW4oYSksbD1NYXRoLmNvcyhhKTtuPVtuWzBdKmwtblsxXSpzLG5bMF0qcytuWzFdKmxdO312YXIgYz1bcj9uWzBdOm1lKGksblswXSx0aGlzLnRyYW5zZm9ybS56b29tKSxyP25bMV06bWUoaSxuWzFdLHRoaXMudHJhbnNmb3JtLnpvb20pLDBdLHU9bmV3IEZsb2F0MzJBcnJheSgxNik7cmV0dXJuIHQudHJhbnNsYXRlKHUsZSxjKSx1fSx2aS5wcm90b3R5cGUuc2F2ZVRpbGVUZXh0dXJlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3RpbGVUZXh0dXJlc1t0LnNpemVbMF1dO2U/ZS5wdXNoKHQpOnRoaXMuX3RpbGVUZXh0dXJlc1t0LnNpemVbMF1dPVt0XTt9LHZpLnByb3RvdHlwZS5nZXRUaWxlVGV4dHVyZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl90aWxlVGV4dHVyZXNbdF07cmV0dXJuIGUmJmUubGVuZ3RoPjA/ZS5wb3AoKTpudWxsfSx2aS5wcm90b3R5cGUuX2NyZWF0ZVByb2dyYW1DYWNoZWQ9ZnVuY3Rpb24odCxlKXt0aGlzLmNhY2hlPXRoaXMuY2FjaGV8fHt9O3ZhciBpPVwiXCIrdCsoZS5jYWNoZUtleXx8XCJcIikrKHRoaXMuX3Nob3dPdmVyZHJhd0luc3BlY3Rvcj9cIi9vdmVyZHJhd1wiOlwiXCIpO3JldHVybiB0aGlzLmNhY2hlW2ldfHwodGhpcy5jYWNoZVtpXT1uZXcgWGUodGhpcy5jb250ZXh0LHFlW3RdLGUsdGhpcy5fc2hvd092ZXJkcmF3SW5zcGVjdG9yKSksdGhpcy5jYWNoZVtpXX0sdmkucHJvdG90eXBlLnVzZVByb2dyYW09ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9jcmVhdGVQcm9ncmFtQ2FjaGVkKHQsZXx8dGhpcy5lbXB0eVByb2dyYW1Db25maWd1cmF0aW9uKTtyZXR1cm4gdGhpcy5jb250ZXh0LnByb2dyYW0uc2V0KGkucHJvZ3JhbSksaX07dmFyIHdpPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLnRpbGVTaXplPTUxMix0aGlzLl9yZW5kZXJXb3JsZENvcGllcz12b2lkIDA9PT1pfHxpLHRoaXMuX21pblpvb209dHx8MCx0aGlzLl9tYXhab29tPWV8fDIyLHRoaXMubGF0UmFuZ2U9Wy04NS4wNTExMyw4NS4wNTExM10sdGhpcy53aWR0aD0wLHRoaXMuaGVpZ2h0PTAsdGhpcy5fY2VudGVyPW5ldyBCKDAsMCksdGhpcy56b29tPTAsdGhpcy5hbmdsZT0wLHRoaXMuX2Zvdj0uNjQzNTAxMTA4NzkzMjg0NCx0aGlzLl9waXRjaD0wLHRoaXMuX3VubW9kaWZpZWQ9ITAsdGhpcy5fcG9zTWF0cml4Q2FjaGU9e30sdGhpcy5fYWxpZ25lZFBvc01hdHJpeENhY2hlPXt9O30sRWk9e21pblpvb206e2NvbmZpZ3VyYWJsZTohMH0sbWF4Wm9vbTp7Y29uZmlndXJhYmxlOiEwfSxyZW5kZXJXb3JsZENvcGllczp7Y29uZmlndXJhYmxlOiEwfSx3b3JsZFNpemU6e2NvbmZpZ3VyYWJsZTohMH0sY2VudGVyUG9pbnQ6e2NvbmZpZ3VyYWJsZTohMH0sc2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxiZWFyaW5nOntjb25maWd1cmFibGU6ITB9LHBpdGNoOntjb25maWd1cmFibGU6ITB9LGZvdjp7Y29uZmlndXJhYmxlOiEwfSx6b29tOntjb25maWd1cmFibGU6ITB9LGNlbnRlcjp7Y29uZmlndXJhYmxlOiEwfSx1bm1vZGlmaWVkOntjb25maWd1cmFibGU6ITB9LHg6e2NvbmZpZ3VyYWJsZTohMH0seTp7Y29uZmlndXJhYmxlOiEwfSxwb2ludDp7Y29uZmlndXJhYmxlOiEwfX07d2kucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHdpKHRoaXMuX21pblpvb20sdGhpcy5fbWF4Wm9vbSx0aGlzLl9yZW5kZXJXb3JsZENvcGllcyk7cmV0dXJuIHQudGlsZVNpemU9dGhpcy50aWxlU2l6ZSx0LmxhdFJhbmdlPXRoaXMubGF0UmFuZ2UsdC53aWR0aD10aGlzLndpZHRoLHQuaGVpZ2h0PXRoaXMuaGVpZ2h0LHQuX2NlbnRlcj10aGlzLl9jZW50ZXIsdC56b29tPXRoaXMuem9vbSx0LmFuZ2xlPXRoaXMuYW5nbGUsdC5fZm92PXRoaXMuX2Zvdix0Ll9waXRjaD10aGlzLl9waXRjaCx0Ll91bm1vZGlmaWVkPXRoaXMuX3VubW9kaWZpZWQsdC5fY2FsY01hdHJpY2VzKCksdH0sRWkubWluWm9vbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWluWm9vbX0sRWkubWluWm9vbS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fbWluWm9vbSE9PXQmJih0aGlzLl9taW5ab29tPXQsdGhpcy56b29tPU1hdGgubWF4KHRoaXMuem9vbSx0KSk7fSxFaS5tYXhab29tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhab29tfSxFaS5tYXhab29tLnNldD1mdW5jdGlvbih0KXt0aGlzLl9tYXhab29tIT09dCYmKHRoaXMuX21heFpvb209dCx0aGlzLnpvb209TWF0aC5taW4odGhpcy56b29tLHQpKTt9LEVpLnJlbmRlcldvcmxkQ29waWVzLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJXb3JsZENvcGllc30sRWkucmVuZGVyV29ybGRDb3BpZXMuc2V0PWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQ/dD0hMDpudWxsPT09dCYmKHQ9ITEpLHRoaXMuX3JlbmRlcldvcmxkQ29waWVzPXQ7fSxFaS53b3JsZFNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlsZVNpemUqdGhpcy5zY2FsZX0sRWkuY2VudGVyUG9pbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZS5fZGl2KDIpfSxFaS5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgdC5kZWZhdWx0KHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfSxFaS5iZWFyaW5nLmdldD1mdW5jdGlvbigpe3JldHVybi10aGlzLmFuZ2xlL01hdGguUEkqMTgwfSxFaS5iZWFyaW5nLnNldD1mdW5jdGlvbihlKXt2YXIgaT0tdC53cmFwKGUsLTE4MCwxODApKk1hdGguUEkvMTgwO3RoaXMuYW5nbGUhPT1pJiYodGhpcy5fdW5tb2RpZmllZD0hMSx0aGlzLmFuZ2xlPWksdGhpcy5fY2FsY01hdHJpY2VzKCksdGhpcy5yb3RhdGlvbk1hdHJpeD10LmNyZWF0ZSQ0KCksdC5yb3RhdGUodGhpcy5yb3RhdGlvbk1hdHJpeCx0aGlzLnJvdGF0aW9uTWF0cml4LHRoaXMuYW5nbGUpKTt9LEVpLnBpdGNoLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9waXRjaC9NYXRoLlBJKjE4MH0sRWkucGl0Y2guc2V0PWZ1bmN0aW9uKGUpe3ZhciBpPXQuY2xhbXAoZSwwLDYwKS8xODAqTWF0aC5QSTt0aGlzLl9waXRjaCE9PWkmJih0aGlzLl91bm1vZGlmaWVkPSExLHRoaXMuX3BpdGNoPWksdGhpcy5fY2FsY01hdHJpY2VzKCkpO30sRWkuZm92LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3YvTWF0aC5QSSoxODB9LEVpLmZvdi5zZXQ9ZnVuY3Rpb24odCl7dD1NYXRoLm1heCguMDEsTWF0aC5taW4oNjAsdCkpLHRoaXMuX2ZvdiE9PXQmJih0aGlzLl91bm1vZGlmaWVkPSExLHRoaXMuX2Zvdj10LzE4MCpNYXRoLlBJLHRoaXMuX2NhbGNNYXRyaWNlcygpKTt9LEVpLnpvb20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3pvb219LEVpLnpvb20uc2V0PWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgubWluKE1hdGgubWF4KHQsdGhpcy5taW5ab29tKSx0aGlzLm1heFpvb20pO3RoaXMuX3pvb20hPT1lJiYodGhpcy5fdW5tb2RpZmllZD0hMSx0aGlzLl96b29tPWUsdGhpcy5zY2FsZT10aGlzLnpvb21TY2FsZShlKSx0aGlzLnRpbGVab29tPU1hdGguZmxvb3IoZSksdGhpcy56b29tRnJhY3Rpb249ZS10aGlzLnRpbGVab29tLHRoaXMuX2NvbnN0cmFpbigpLHRoaXMuX2NhbGNNYXRyaWNlcygpKTt9LEVpLmNlbnRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2VudGVyfSxFaS5jZW50ZXIuc2V0PWZ1bmN0aW9uKHQpe3QubGF0PT09dGhpcy5fY2VudGVyLmxhdCYmdC5sbmc9PT10aGlzLl9jZW50ZXIubG5nfHwodGhpcy5fdW5tb2RpZmllZD0hMSx0aGlzLl9jZW50ZXI9dCx0aGlzLl9jb25zdHJhaW4oKSx0aGlzLl9jYWxjTWF0cmljZXMoKSk7fSx3aS5wcm90b3R5cGUuY292ZXJpbmdab29tTGV2ZWw9ZnVuY3Rpb24odCl7cmV0dXJuKHQucm91bmRab29tP01hdGgucm91bmQ6TWF0aC5mbG9vcikodGhpcy56b29tK3RoaXMuc2NhbGVab29tKHRoaXMudGlsZVNpemUvdC50aWxlU2l6ZSkpfSx3aS5wcm90b3R5cGUuZ2V0VmlzaWJsZVVud3JhcHBlZENvb3JkaW5hdGVzPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMucG9pbnRDb29yZGluYXRlKG5ldyB0LmRlZmF1bHQoMCwwKSwwKSxuPXRoaXMucG9pbnRDb29yZGluYXRlKG5ldyB0LmRlZmF1bHQodGhpcy53aWR0aCwwKSwwKSxvPU1hdGguZmxvb3IoaS5jb2x1bW4pLHI9TWF0aC5mbG9vcihuLmNvbHVtbiksYT1bbmV3IHQuVW53cmFwcGVkVGlsZUlEKDAsZSldO2lmKHRoaXMuX3JlbmRlcldvcmxkQ29waWVzKWZvcih2YXIgcz1vO3M8PXI7cysrKTAhPT1zJiZhLnB1c2gobmV3IHQuVW53cmFwcGVkVGlsZUlEKHMsZSkpO3JldHVybiBhfSx3aS5wcm90b3R5cGUuY292ZXJpbmdUaWxlcz1mdW5jdGlvbihlKXt2YXIgaT10aGlzLmNvdmVyaW5nWm9vbUxldmVsKGUpLG49aTtpZih2b2lkIDAhPT1lLm1pbnpvb20mJmk8ZS5taW56b29tKXJldHVybltdO3ZvaWQgMCE9PWUubWF4em9vbSYmaT5lLm1heHpvb20mJihpPWUubWF4em9vbSk7dmFyIG89dGhpcy5wb2ludENvb3JkaW5hdGUodGhpcy5jZW50ZXJQb2ludCxpKSxyPW5ldyB0LmRlZmF1bHQoby5jb2x1bW4tLjUsby5yb3ctLjUpO3JldHVybiBmdW5jdGlvbihlLGksbixvKXt2b2lkIDA9PT1vJiYobz0hMCk7dmFyIHI9MTw8ZSxhPXt9O2Z1bmN0aW9uIHMoaSxzLGwpe3ZhciBjLHUsaCxwO2lmKGw+PTAmJmw8PXIpZm9yKGM9aTtjPHM7YysrKXU9TWF0aC5mbG9vcihjL3IpLGg9KGMlcityKSVyLDAhPT11JiYhMCE9PW98fChwPW5ldyB0Lk92ZXJzY2FsZWRUaWxlSUQobix1LGUsaCxsKSxhW3Aua2V5XT1wKTt9cmV0dXJuIGJpKGlbMF0saVsxXSxpWzJdLDAscixzKSxiaShpWzJdLGlbM10saVswXSwwLHIscyksT2JqZWN0LmtleXMoYSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBhW3RdfSl9KGksW3RoaXMucG9pbnRDb29yZGluYXRlKG5ldyB0LmRlZmF1bHQoMCwwKSxpKSx0aGlzLnBvaW50Q29vcmRpbmF0ZShuZXcgdC5kZWZhdWx0KHRoaXMud2lkdGgsMCksaSksdGhpcy5wb2ludENvb3JkaW5hdGUobmV3IHQuZGVmYXVsdCh0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KSxpKSx0aGlzLnBvaW50Q29vcmRpbmF0ZShuZXcgdC5kZWZhdWx0KDAsdGhpcy5oZWlnaHQpLGkpXSxlLnJlcGFyc2VPdmVyc2NhbGVkP246aSx0aGlzLl9yZW5kZXJXb3JsZENvcGllcykuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiByLmRpc3QodC5jYW5vbmljYWwpLXIuZGlzdChlLmNhbm9uaWNhbCl9KX0sd2kucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0LGUpe3RoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1lLHRoaXMucGl4ZWxzVG9HTFVuaXRzPVsyL3QsLTIvZV0sdGhpcy5fY29uc3RyYWluKCksdGhpcy5fY2FsY01hdHJpY2VzKCk7fSxFaS51bm1vZGlmaWVkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl91bm1vZGlmaWVkfSx3aS5wcm90b3R5cGUuem9vbVNjYWxlPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnBvdygyLHQpfSx3aS5wcm90b3R5cGUuc2NhbGVab29tPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmxvZyh0KS9NYXRoLkxOMn0sd2kucHJvdG90eXBlLnByb2plY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0LmRlZmF1bHQodGhpcy5sbmdYKGUubG5nKSx0aGlzLmxhdFkoZS5sYXQpKX0sd2kucHJvdG90eXBlLnVucHJvamVjdD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEIodGhpcy54TG5nKHQueCksdGhpcy55TGF0KHQueSkpfSxFaS54LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxuZ1godGhpcy5jZW50ZXIubG5nKX0sRWkueS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXRZKHRoaXMuY2VudGVyLmxhdCl9LEVpLnBvaW50LmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgdC5kZWZhdWx0KHRoaXMueCx0aGlzLnkpfSx3aS5wcm90b3R5cGUubG5nWD1mdW5jdGlvbih0KXtyZXR1cm4oMTgwK3QpKnRoaXMud29ybGRTaXplLzM2MH0sd2kucHJvdG90eXBlLmxhdFk9ZnVuY3Rpb24odCl7cmV0dXJuKDE4MC0xODAvTWF0aC5QSSpNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJLzQrdCpNYXRoLlBJLzM2MCkpKSp0aGlzLndvcmxkU2l6ZS8zNjB9LHdpLnByb3RvdHlwZS54TG5nPWZ1bmN0aW9uKHQpe3JldHVybiAzNjAqdC90aGlzLndvcmxkU2l6ZS0xODB9LHdpLnByb3RvdHlwZS55TGF0PWZ1bmN0aW9uKHQpe3ZhciBlPTE4MC0zNjAqdC90aGlzLndvcmxkU2l6ZTtyZXR1cm4gMzYwL01hdGguUEkqTWF0aC5hdGFuKE1hdGguZXhwKGUqTWF0aC5QSS8xODApKS05MH0sd2kucHJvdG90eXBlLnNldExvY2F0aW9uQXRQb2ludD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMucG9pbnRDb29yZGluYXRlKGUpLl9zdWIodGhpcy5wb2ludENvb3JkaW5hdGUodGhpcy5jZW50ZXJQb2ludCkpO3RoaXMuY2VudGVyPXRoaXMuY29vcmRpbmF0ZUxvY2F0aW9uKHRoaXMubG9jYXRpb25Db29yZGluYXRlKHQpLl9zdWIoaSkpLHRoaXMuX3JlbmRlcldvcmxkQ29waWVzJiYodGhpcy5jZW50ZXI9dGhpcy5jZW50ZXIud3JhcCgpKTt9LHdpLnByb3RvdHlwZS5sb2NhdGlvblBvaW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvb3JkaW5hdGVQb2ludCh0aGlzLmxvY2F0aW9uQ29vcmRpbmF0ZSh0KSl9LHdpLnByb3RvdHlwZS5wb2ludExvY2F0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvb3JkaW5hdGVMb2NhdGlvbih0aGlzLnBvaW50Q29vcmRpbmF0ZSh0KSl9LHdpLnByb3RvdHlwZS5sb2NhdGlvbkNvb3JkaW5hdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0LmRlZmF1bHQkMTUodGhpcy5sbmdYKGUubG5nKS90aGlzLnRpbGVTaXplLHRoaXMubGF0WShlLmxhdCkvdGhpcy50aWxlU2l6ZSx0aGlzLnpvb20pLnpvb21Ubyh0aGlzLnRpbGVab29tKX0sd2kucHJvdG90eXBlLmNvb3JkaW5hdGVMb2NhdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10Lnpvb21Ubyh0aGlzLnpvb20pO3JldHVybiBuZXcgQih0aGlzLnhMbmcoZS5jb2x1bW4qdGhpcy50aWxlU2l6ZSksdGhpcy55TGF0KGUucm93KnRoaXMudGlsZVNpemUpKX0sd2kucHJvdG90eXBlLnBvaW50Q29vcmRpbmF0ZT1mdW5jdGlvbihlLGkpe3ZvaWQgMD09PWkmJihpPXRoaXMudGlsZVpvb20pO3ZhciBuPVtlLngsZS55LDAsMV0sbz1bZS54LGUueSwxLDFdO3QudHJhbnNmb3JtTWF0NChuLG4sdGhpcy5waXhlbE1hdHJpeEludmVyc2UpLHQudHJhbnNmb3JtTWF0NChvLG8sdGhpcy5waXhlbE1hdHJpeEludmVyc2UpO3ZhciByPW5bM10sYT1vWzNdLHM9blswXS9yLGw9b1swXS9hLGM9blsxXS9yLHU9b1sxXS9hLGg9blsyXS9yLHA9b1syXS9hLGQ9aD09PXA/MDooMC1oKS8ocC1oKTtyZXR1cm4gbmV3IHQuZGVmYXVsdCQxNSh0Lm51bWJlcihzLGwsZCkvdGhpcy50aWxlU2l6ZSx0Lm51bWJlcihjLHUsZCkvdGhpcy50aWxlU2l6ZSx0aGlzLnpvb20pLl96b29tVG8oaSl9LHdpLnByb3RvdHlwZS5jb29yZGluYXRlUG9pbnQ9ZnVuY3Rpb24oZSl7dmFyIGk9ZS56b29tVG8odGhpcy56b29tKSxuPVtpLmNvbHVtbip0aGlzLnRpbGVTaXplLGkucm93KnRoaXMudGlsZVNpemUsMCwxXTtyZXR1cm4gdC50cmFuc2Zvcm1NYXQ0KG4sbix0aGlzLnBpeGVsTWF0cml4KSxuZXcgdC5kZWZhdWx0KG5bMF0vblszXSxuWzFdL25bM10pfSx3aS5wcm90b3R5cGUuY2FsY3VsYXRlUG9zTWF0cml4PWZ1bmN0aW9uKGUsaSl7dm9pZCAwPT09aSYmKGk9ITEpO3ZhciBuPWUua2V5LG89aT90aGlzLl9hbGlnbmVkUG9zTWF0cml4Q2FjaGU6dGhpcy5fcG9zTWF0cml4Q2FjaGU7aWYob1tuXSlyZXR1cm4gb1tuXTt2YXIgcj1lLmNhbm9uaWNhbCxhPXRoaXMud29ybGRTaXplL3RoaXMuem9vbVNjYWxlKHIueikscz1yLngrTWF0aC5wb3coMixyLnopKmUud3JhcCxsPXQuaWRlbnRpdHkobmV3IEZsb2F0NjRBcnJheSgxNikpO3JldHVybiB0LnRyYW5zbGF0ZShsLGwsW3MqYSxyLnkqYSwwXSksdC5zY2FsZShsLGwsW2EvdC5kZWZhdWx0JDEwLGEvdC5kZWZhdWx0JDEwLDFdKSx0Lm11bHRpcGx5KGwsaT90aGlzLmFsaWduZWRQcm9qTWF0cml4OnRoaXMucHJvak1hdHJpeCxsKSxvW25dPW5ldyBGbG9hdDMyQXJyYXkobCksb1tuXX0sd2kucHJvdG90eXBlLl9jb25zdHJhaW49ZnVuY3Rpb24oKXtpZih0aGlzLmNlbnRlciYmdGhpcy53aWR0aCYmdGhpcy5oZWlnaHQmJiF0aGlzLl9jb25zdHJhaW5pbmcpe3RoaXMuX2NvbnN0cmFpbmluZz0hMDt2YXIgZSxpLG4sbyxyPS05MCxhPTkwLHM9LTE4MCxsPTE4MCxjPXRoaXMuc2l6ZSx1PXRoaXMuX3VubW9kaWZpZWQ7aWYodGhpcy5sYXRSYW5nZSl7dmFyIGg9dGhpcy5sYXRSYW5nZTtyPXRoaXMubGF0WShoWzFdKSxlPShhPXRoaXMubGF0WShoWzBdKSktcjxjLnk/Yy55LyhhLXIpOjA7fWlmKHRoaXMubG5nUmFuZ2Upe3ZhciBwPXRoaXMubG5nUmFuZ2U7cz10aGlzLmxuZ1gocFswXSksaT0obD10aGlzLmxuZ1gocFsxXSkpLXM8Yy54P2MueC8obC1zKTowO312YXIgZD1NYXRoLm1heChpfHwwLGV8fDApO2lmKGQpcmV0dXJuIHRoaXMuY2VudGVyPXRoaXMudW5wcm9qZWN0KG5ldyB0LmRlZmF1bHQoaT8obCtzKS8yOnRoaXMueCxlPyhhK3IpLzI6dGhpcy55KSksdGhpcy56b29tKz10aGlzLnNjYWxlWm9vbShkKSx0aGlzLl91bm1vZGlmaWVkPXUsdm9pZCh0aGlzLl9jb25zdHJhaW5pbmc9ITEpO2lmKHRoaXMubGF0UmFuZ2Upe3ZhciBmPXRoaXMueSxtPWMueS8yO2YtbTxyJiYobz1yK20pLGYrbT5hJiYobz1hLW0pO31pZih0aGlzLmxuZ1JhbmdlKXt2YXIgXz10aGlzLngsZz1jLngvMjtfLWc8cyYmKG49cytnKSxfK2c+bCYmKG49bC1nKTt9dm9pZCAwPT09biYmdm9pZCAwPT09b3x8KHRoaXMuY2VudGVyPXRoaXMudW5wcm9qZWN0KG5ldyB0LmRlZmF1bHQodm9pZCAwIT09bj9uOnRoaXMueCx2b2lkIDAhPT1vP286dGhpcy55KSkpLHRoaXMuX3VubW9kaWZpZWQ9dSx0aGlzLl9jb25zdHJhaW5pbmc9ITE7fX0sd2kucHJvdG90eXBlLl9jYWxjTWF0cmljZXM9ZnVuY3Rpb24oKXtpZih0aGlzLmhlaWdodCl7dGhpcy5jYW1lcmFUb0NlbnRlckRpc3RhbmNlPS41L01hdGgudGFuKHRoaXMuX2Zvdi8yKSp0aGlzLmhlaWdodDt2YXIgZT10aGlzLl9mb3YvMixpPU1hdGguUEkvMit0aGlzLl9waXRjaCxuPU1hdGguc2luKGUpKnRoaXMuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZS9NYXRoLnNpbihNYXRoLlBJLWktZSksbz10aGlzLngscj10aGlzLnksYT0xLjAxKihNYXRoLmNvcyhNYXRoLlBJLzItdGhpcy5fcGl0Y2gpKm4rdGhpcy5jYW1lcmFUb0NlbnRlckRpc3RhbmNlKSxzPW5ldyBGbG9hdDY0QXJyYXkoMTYpO3QucGVyc3BlY3RpdmUocyx0aGlzLl9mb3YsdGhpcy53aWR0aC90aGlzLmhlaWdodCwxLGEpLHQuc2NhbGUocyxzLFsxLC0xLDFdKSx0LnRyYW5zbGF0ZShzLHMsWzAsMCwtdGhpcy5jYW1lcmFUb0NlbnRlckRpc3RhbmNlXSksdC5yb3RhdGVYKHMscyx0aGlzLl9waXRjaCksdC5yb3RhdGVaKHMscyx0aGlzLmFuZ2xlKSx0LnRyYW5zbGF0ZShzLHMsWy1vLC1yLDBdKTt2YXIgbD10aGlzLndvcmxkU2l6ZS8oMipNYXRoLlBJKjYzNzgxMzcqTWF0aC5hYnMoTWF0aC5jb3ModGhpcy5jZW50ZXIubGF0KihNYXRoLlBJLzE4MCkpKSk7dC5zY2FsZShzLHMsWzEsMSxsLDFdKSx0aGlzLnByb2pNYXRyaXg9czt2YXIgYz10aGlzLndpZHRoJTIvMix1PXRoaXMuaGVpZ2h0JTIvMixoPU1hdGguY29zKHRoaXMuYW5nbGUpLHA9TWF0aC5zaW4odGhpcy5hbmdsZSksZD1vLU1hdGgucm91bmQobykraCpjK3AqdSxmPXItTWF0aC5yb3VuZChyKStoKnUrcCpjLG09bmV3IEZsb2F0NjRBcnJheShzKTtpZih0LnRyYW5zbGF0ZShtLG0sW2Q+LjU/ZC0xOmQsZj4uNT9mLTE6ZiwwXSksdGhpcy5hbGlnbmVkUHJvak1hdHJpeD1tLHM9dC5jcmVhdGUoKSx0LnNjYWxlKHMscyxbdGhpcy53aWR0aC8yLC10aGlzLmhlaWdodC8yLDFdKSx0LnRyYW5zbGF0ZShzLHMsWzEsLTEsMF0pLHRoaXMucGl4ZWxNYXRyaXg9dC5tdWx0aXBseShuZXcgRmxvYXQ2NEFycmF5KDE2KSxzLHRoaXMucHJvak1hdHJpeCksIShzPXQuaW52ZXJ0KG5ldyBGbG9hdDY0QXJyYXkoMTYpLHRoaXMucGl4ZWxNYXRyaXgpKSl0aHJvdyBuZXcgRXJyb3IoXCJmYWlsZWQgdG8gaW52ZXJ0IG1hdHJpeFwiKTt0aGlzLnBpeGVsTWF0cml4SW52ZXJzZT1zLHRoaXMuX3Bvc01hdHJpeENhY2hlPXt9LHRoaXMuX2FsaWduZWRQb3NNYXRyaXhDYWNoZT17fTt9fSx3aS5wcm90b3R5cGUubWF4UGl0Y2hTY2FsZUZhY3Rvcj1mdW5jdGlvbigpe2lmKCF0aGlzLnBpeGVsTWF0cml4SW52ZXJzZSlyZXR1cm4gMTt2YXIgZT10aGlzLnBvaW50Q29vcmRpbmF0ZShuZXcgdC5kZWZhdWx0KDAsMCkpLnpvb21Ubyh0aGlzLnpvb20pLGk9W2UuY29sdW1uKnRoaXMudGlsZVNpemUsZS5yb3cqdGhpcy50aWxlU2l6ZSwwLDFdO3JldHVybiB0LnRyYW5zZm9ybU1hdDQoaSxpLHRoaXMucGl4ZWxNYXRyaXgpWzNdL3RoaXMuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMod2kucHJvdG90eXBlLEVpKTt2YXIgVGk9ZnVuY3Rpb24oKXt2YXIgZSxpLG4sbyxyO3QuYmluZEFsbChbXCJfb25IYXNoQ2hhbmdlXCIsXCJfdXBkYXRlSGFzaFwiXSx0aGlzKSx0aGlzLl91cGRhdGVIYXNoPShlPXRoaXMuX3VwZGF0ZUhhc2hVbnRocm90dGxlZC5iaW5kKHRoaXMpLGk9MzAwLG49ITEsbz0wLHI9ZnVuY3Rpb24oKXtvPTAsbiYmKGUoKSxvPXNldFRpbWVvdXQocixpKSxuPSExKTt9LGZ1bmN0aW9uKCl7cmV0dXJuIG49ITAsb3x8cigpLG99KTt9O1RpLnByb3RvdHlwZS5hZGRUbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwPWUsdC5kZWZhdWx0JDEuYWRkRXZlbnRMaXN0ZW5lcihcImhhc2hjaGFuZ2VcIix0aGlzLl9vbkhhc2hDaGFuZ2UsITEpLHRoaXMuX21hcC5vbihcIm1vdmVlbmRcIix0aGlzLl91cGRhdGVIYXNoKSx0aGlzfSxUaS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdCQxLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsdGhpcy5fb25IYXNoQ2hhbmdlLCExKSx0aGlzLl9tYXAub2ZmKFwibW92ZWVuZFwiLHRoaXMuX3VwZGF0ZUhhc2gpLGNsZWFyVGltZW91dCh0aGlzLl91cGRhdGVIYXNoKCkpLGRlbGV0ZSB0aGlzLl9tYXAsdGhpc30sVGkucHJvdG90eXBlLmdldEhhc2hTdHJpbmc9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFwLmdldENlbnRlcigpLGk9TWF0aC5yb3VuZCgxMDAqdGhpcy5fbWFwLmdldFpvb20oKSkvMTAwLG49TWF0aC5jZWlsKChpKk1hdGguTE4yK01hdGgubG9nKDUxMi8zNjAvLjUpKS9NYXRoLkxOMTApLG89TWF0aC5wb3coMTAsbikscj1NYXRoLnJvdW5kKGUubG5nKm8pL28sYT1NYXRoLnJvdW5kKGUubGF0Km8pL28scz10aGlzLl9tYXAuZ2V0QmVhcmluZygpLGw9dGhpcy5fbWFwLmdldFBpdGNoKCksYz1cIlwiO3JldHVybiBjKz10P1wiIy9cIityK1wiL1wiK2ErXCIvXCIraTpcIiNcIitpK1wiL1wiK2ErXCIvXCIrciwoc3x8bCkmJihjKz1cIi9cIitNYXRoLnJvdW5kKDEwKnMpLzEwKSxsJiYoYys9XCIvXCIrTWF0aC5yb3VuZChsKSksY30sVGkucHJvdG90eXBlLl9vbkhhc2hDaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHQkMS5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoXCIjXCIsXCJcIikuc3BsaXQoXCIvXCIpO3JldHVybiBlLmxlbmd0aD49MyYmKHRoaXMuX21hcC5qdW1wVG8oe2NlbnRlcjpbK2VbMl0sK2VbMV1dLHpvb206K2VbMF0sYmVhcmluZzorKGVbM118fDApLHBpdGNoOisoZVs0XXx8MCl9KSwhMCl9LFRpLnByb3RvdHlwZS5fdXBkYXRlSGFzaFVudGhyb3R0bGVkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRIYXNoU3RyaW5nKCk7dC5kZWZhdWx0JDEuaGlzdG9yeS5yZXBsYWNlU3RhdGUodC5kZWZhdWx0JDEuaGlzdG9yeS5zdGF0ZSxcIlwiLGUpO307dmFyIElpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4obixvLHIsYSl7dm9pZCAwPT09YSYmKGE9e30pO3ZhciBzPWkubW91c2VQb3Moby5nZXRDYW52YXNDb250YWluZXIoKSxyKSxsPW8udW5wcm9qZWN0KHMpO2UuY2FsbCh0aGlzLG4sdC5leHRlbmQoe3BvaW50OnMsbG5nTGF0Omwsb3JpZ2luYWxFdmVudDpyfSxhKSksdGhpcy5fZGVmYXVsdFByZXZlbnRlZD0hMSx0aGlzLnRhcmdldD1vO31lJiYobi5fX3Byb3RvX189ZSksbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSksbi5wcm90b3R5cGUuY29uc3RydWN0b3I9bjt2YXIgbz17ZGVmYXVsdFByZXZlbnRlZDp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4ucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7dGhpcy5fZGVmYXVsdFByZXZlbnRlZD0hMDt9LG8uZGVmYXVsdFByZXZlbnRlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVmYXVsdFByZXZlbnRlZH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobi5wcm90b3R5cGUsbyksbn0odC5FdmVudCksQ2k9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbihuLG8scil7dmFyIGE9aS50b3VjaFBvcyhvLmdldENhbnZhc0NvbnRhaW5lcigpLHIpLHM9YS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG8udW5wcm9qZWN0KHQpfSksbD1hLnJlZHVjZShmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gdC5hZGQoZS5kaXYobi5sZW5ndGgpKX0sbmV3IHQuZGVmYXVsdCgwLDApKSxjPW8udW5wcm9qZWN0KGwpO2UuY2FsbCh0aGlzLG4se3BvaW50czphLHBvaW50OmwsbG5nTGF0czpzLGxuZ0xhdDpjLG9yaWdpbmFsRXZlbnQ6cn0pLHRoaXMuX2RlZmF1bHRQcmV2ZW50ZWQ9ITE7fWUmJihuLl9fcHJvdG9fXz1lKSxuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlKSxuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1uO3ZhciBvPXtkZWZhdWx0UHJldmVudGVkOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi5wcm90b3R5cGUucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXt0aGlzLl9kZWZhdWx0UHJldmVudGVkPSEwO30sby5kZWZhdWx0UHJldmVudGVkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWZhdWx0UHJldmVudGVkfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhuLnByb3RvdHlwZSxvKSxufSh0LkV2ZW50KSxTaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuKXt0LmNhbGwodGhpcyxlLHtvcmlnaW5hbEV2ZW50Om59KSx0aGlzLl9kZWZhdWx0UHJldmVudGVkPSExO310JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgaT17ZGVmYXVsdFByZXZlbnRlZDp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7dGhpcy5fZGVmYXVsdFByZXZlbnRlZD0hMDt9LGkuZGVmYXVsdFByZXZlbnRlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVmYXVsdFByZXZlbnRlZH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsaSksZX0odC5FdmVudCksemk9ZnVuY3Rpb24oZSl7dGhpcy5fbWFwPWUsdGhpcy5fZWw9ZS5nZXRDYW52YXNDb250YWluZXIoKSx0aGlzLl9kZWx0YT0wLHQuYmluZEFsbChbXCJfb25XaGVlbFwiLFwiX29uVGltZW91dFwiLFwiX29uU2Nyb2xsRnJhbWVcIixcIl9vblNjcm9sbEZpbmlzaGVkXCJdLHRoaXMpO307emkucHJvdG90eXBlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fZW5hYmxlZH0semkucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9hY3RpdmV9LHppLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24odCl7dGhpcy5pc0VuYWJsZWQoKXx8KHRoaXMuX2VuYWJsZWQ9ITAsdGhpcy5fYXJvdW5kQ2VudGVyPXQmJlwiY2VudGVyXCI9PT10LmFyb3VuZCk7fSx6aS5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuaXNFbmFibGVkKCkmJih0aGlzLl9lbmFibGVkPSExKTt9LHppLnByb3RvdHlwZS5vbldoZWVsPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNFbmFibGVkKCkpe3ZhciBpPWUuZGVsdGFNb2RlPT09dC5kZWZhdWx0JDEuV2hlZWxFdmVudC5ET01fREVMVEFfTElORT80MCplLmRlbHRhWTplLmRlbHRhWSxuPXQuZGVmYXVsdCQyLm5vdygpLG89bi0odGhpcy5fbGFzdFdoZWVsRXZlbnRUaW1lfHwwKTt0aGlzLl9sYXN0V2hlZWxFdmVudFRpbWU9biwwIT09aSYmaSU0LjAwMDI0NDE0MDYyNT09MD90aGlzLl90eXBlPVwid2hlZWxcIjowIT09aSYmTWF0aC5hYnMoaSk8ND90aGlzLl90eXBlPVwidHJhY2twYWRcIjpvPjQwMD8odGhpcy5fdHlwZT1udWxsLHRoaXMuX2xhc3RWYWx1ZT1pLHRoaXMuX3RpbWVvdXQ9c2V0VGltZW91dCh0aGlzLl9vblRpbWVvdXQsNDAsZSkpOnRoaXMuX3R5cGV8fCh0aGlzLl90eXBlPU1hdGguYWJzKG8qaSk8MjAwP1widHJhY2twYWRcIjpcIndoZWVsXCIsdGhpcy5fdGltZW91dCYmKGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KSx0aGlzLl90aW1lb3V0PW51bGwsaSs9dGhpcy5fbGFzdFZhbHVlKSksZS5zaGlmdEtleSYmaSYmKGkvPTQpLHRoaXMuX3R5cGUmJih0aGlzLl9sYXN0V2hlZWxFdmVudD1lLHRoaXMuX2RlbHRhLT1pLHRoaXMuaXNBY3RpdmUoKXx8dGhpcy5fc3RhcnQoZSkpLGUucHJldmVudERlZmF1bHQoKTt9fSx6aS5wcm90b3R5cGUuX29uVGltZW91dD1mdW5jdGlvbih0KXt0aGlzLl90eXBlPVwid2hlZWxcIix0aGlzLl9kZWx0YS09dGhpcy5fbGFzdFZhbHVlLHRoaXMuaXNBY3RpdmUoKXx8dGhpcy5fc3RhcnQodCk7fSx6aS5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2RlbHRhKXt0aGlzLl9mcmFtZUlkJiYodGhpcy5fbWFwLl9jYW5jZWxSZW5kZXJGcmFtZSh0aGlzLl9mcmFtZUlkKSx0aGlzLl9mcmFtZUlkPW51bGwpLHRoaXMuX2FjdGl2ZT0hMCx0aGlzLl9tYXAuZmlyZShuZXcgdC5FdmVudChcIm1vdmVzdGFydFwiLHtvcmlnaW5hbEV2ZW50OmV9KSksdGhpcy5fbWFwLmZpcmUobmV3IHQuRXZlbnQoXCJ6b29tc3RhcnRcIix7b3JpZ2luYWxFdmVudDplfSkpLHRoaXMuX2ZpbmlzaFRpbWVvdXQmJmNsZWFyVGltZW91dCh0aGlzLl9maW5pc2hUaW1lb3V0KTt2YXIgbj1pLm1vdXNlUG9zKHRoaXMuX2VsLGUpO3RoaXMuX2Fyb3VuZD1CLmNvbnZlcnQodGhpcy5fYXJvdW5kQ2VudGVyP3RoaXMuX21hcC5nZXRDZW50ZXIoKTp0aGlzLl9tYXAudW5wcm9qZWN0KG4pKSx0aGlzLl9hcm91bmRQb2ludD10aGlzLl9tYXAudHJhbnNmb3JtLmxvY2F0aW9uUG9pbnQodGhpcy5fYXJvdW5kKSx0aGlzLl9mcmFtZUlkfHwodGhpcy5fZnJhbWVJZD10aGlzLl9tYXAuX3JlcXVlc3RSZW5kZXJGcmFtZSh0aGlzLl9vblNjcm9sbEZyYW1lKSk7fX0semkucHJvdG90eXBlLl9vblNjcm9sbEZyYW1lPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLl9mcmFtZUlkPW51bGwsdGhpcy5pc0FjdGl2ZSgpKXt2YXIgaT10aGlzLl9tYXAudHJhbnNmb3JtO2lmKDAhPT10aGlzLl9kZWx0YSl7dmFyIG49XCJ3aGVlbFwiPT09dGhpcy5fdHlwZSYmTWF0aC5hYnModGhpcy5fZGVsdGEpPjQuMDAwMjQ0MTQwNjI1PzEvNDUwOi4wMSxvPTIvKDErTWF0aC5leHAoLU1hdGguYWJzKHRoaXMuX2RlbHRhKm4pKSk7dGhpcy5fZGVsdGE8MCYmMCE9PW8mJihvPTEvbyk7dmFyIHI9XCJudW1iZXJcIj09dHlwZW9mIHRoaXMuX3RhcmdldFpvb20/aS56b29tU2NhbGUodGhpcy5fdGFyZ2V0Wm9vbSk6aS5zY2FsZTt0aGlzLl90YXJnZXRab29tPU1hdGgubWluKGkubWF4Wm9vbSxNYXRoLm1heChpLm1pblpvb20saS5zY2FsZVpvb20ocipvKSkpLFwid2hlZWxcIj09PXRoaXMuX3R5cGUmJih0aGlzLl9zdGFydFpvb209aS56b29tLHRoaXMuX2Vhc2luZz10aGlzLl9zbW9vdGhPdXRFYXNpbmcoMjAwKSksdGhpcy5fZGVsdGE9MDt9dmFyIGE9ITE7aWYoXCJ3aGVlbFwiPT09dGhpcy5fdHlwZSl7dmFyIHM9TWF0aC5taW4oKHQuZGVmYXVsdCQyLm5vdygpLXRoaXMuX2xhc3RXaGVlbEV2ZW50VGltZSkvMjAwLDEpLGw9dGhpcy5fZWFzaW5nKHMpO2kuem9vbT10Lm51bWJlcih0aGlzLl9zdGFydFpvb20sdGhpcy5fdGFyZ2V0Wm9vbSxsKSxzPDE/dGhpcy5fZnJhbWVJZHx8KHRoaXMuX2ZyYW1lSWQ9dGhpcy5fbWFwLl9yZXF1ZXN0UmVuZGVyRnJhbWUodGhpcy5fb25TY3JvbGxGcmFtZSkpOmE9ITA7fWVsc2UgaS56b29tPXRoaXMuX3RhcmdldFpvb20sYT0hMDtpLnNldExvY2F0aW9uQXRQb2ludCh0aGlzLl9hcm91bmQsdGhpcy5fYXJvdW5kUG9pbnQpLHRoaXMuX21hcC5maXJlKG5ldyB0LkV2ZW50KFwibW92ZVwiLHtvcmlnaW5hbEV2ZW50OnRoaXMuX2xhc3RXaGVlbEV2ZW50fSkpLHRoaXMuX21hcC5maXJlKG5ldyB0LkV2ZW50KFwiem9vbVwiLHtvcmlnaW5hbEV2ZW50OnRoaXMuX2xhc3RXaGVlbEV2ZW50fSkpLGEmJih0aGlzLl9hY3RpdmU9ITEsdGhpcy5fZmluaXNoVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fbWFwLmZpcmUobmV3IHQuRXZlbnQoXCJ6b29tZW5kXCIse29yaWdpbmFsRXZlbnQ6ZS5fbGFzdFdoZWVsRXZlbnR9KSksZS5fbWFwLmZpcmUobmV3IHQuRXZlbnQoXCJtb3ZlZW5kXCIse29yaWdpbmFsRXZlbnQ6ZS5fbGFzdFdoZWVsRXZlbnR9KSksZGVsZXRlIGUuX3RhcmdldFpvb207fSwyMDApKTt9fSx6aS5wcm90b3R5cGUuX3Ntb290aE91dEVhc2luZz1mdW5jdGlvbihlKXt2YXIgaT10LmVhc2U7aWYodGhpcy5fcHJldkVhc2Upe3ZhciBuPXRoaXMuX3ByZXZFYXNlLG89KHQuZGVmYXVsdCQyLm5vdygpLW4uc3RhcnQpL24uZHVyYXRpb24scj1uLmVhc2luZyhvKy4wMSktbi5lYXNpbmcobyksYT0uMjcvTWF0aC5zcXJ0KHIqcisxZS00KSouMDEscz1NYXRoLnNxcnQoLjA3MjktYSphKTtpPXQuYmV6aWVyKGEscywuMjUsMSk7fXJldHVybiB0aGlzLl9wcmV2RWFzZT17c3RhcnQ6dC5kZWZhdWx0JDIubm93KCksZHVyYXRpb246ZSxlYXNpbmc6aX0saX07dmFyIEFpPWZ1bmN0aW9uKGUpe3RoaXMuX21hcD1lLHRoaXMuX2VsPWUuZ2V0Q2FudmFzQ29udGFpbmVyKCksdGhpcy5fY29udGFpbmVyPWUuZ2V0Q29udGFpbmVyKCksdC5iaW5kQWxsKFtcIl9vbk1vdXNlTW92ZVwiLFwiX29uTW91c2VVcFwiLFwiX29uS2V5RG93blwiXSx0aGlzKTt9O0FpLnByb3RvdHlwZS5pc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2VuYWJsZWR9LEFpLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fYWN0aXZlfSxBaS5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5pc0VuYWJsZWQoKXx8KHRoaXMuX2VuYWJsZWQ9ITApO30sQWkucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmlzRW5hYmxlZCgpJiYodGhpcy5fZW5hYmxlZD0hMSk7fSxBaS5wcm90b3R5cGUub25Nb3VzZURvd249ZnVuY3Rpb24oZSl7dGhpcy5pc0VuYWJsZWQoKSYmZS5zaGlmdEtleSYmMD09PWUuYnV0dG9uJiYodC5kZWZhdWx0JDEuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW91c2VNb3ZlLCExKSx0LmRlZmF1bHQkMS5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuX29uS2V5RG93biwhMSksdC5kZWZhdWx0JDEuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLl9vbk1vdXNlVXAsITEpLGkuZGlzYWJsZURyYWcoKSx0aGlzLl9zdGFydFBvcz10aGlzLl9sYXN0UG9zPWkubW91c2VQb3ModGhpcy5fZWwsZSksdGhpcy5fYWN0aXZlPSEwKTt9LEFpLnByb3RvdHlwZS5fb25Nb3VzZU1vdmU9ZnVuY3Rpb24odCl7dmFyIGU9aS5tb3VzZVBvcyh0aGlzLl9lbCx0KTtpZighdGhpcy5fbGFzdFBvcy5lcXVhbHMoZSkpe3ZhciBuPXRoaXMuX3N0YXJ0UG9zO3RoaXMuX2xhc3RQb3M9ZSx0aGlzLl9ib3h8fCh0aGlzLl9ib3g9aS5jcmVhdGUoXCJkaXZcIixcIm1hcGJveGdsLWJveHpvb21cIix0aGlzLl9jb250YWluZXIpLHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3Jvc3NoYWlyXCIpLHRoaXMuX2ZpcmVFdmVudChcImJveHpvb21zdGFydFwiLHQpKTt2YXIgbz1NYXRoLm1pbihuLngsZS54KSxyPU1hdGgubWF4KG4ueCxlLngpLGE9TWF0aC5taW4obi55LGUueSkscz1NYXRoLm1heChuLnksZS55KTtpLnNldFRyYW5zZm9ybSh0aGlzLl9ib3gsXCJ0cmFuc2xhdGUoXCIrbytcInB4LFwiK2ErXCJweClcIiksdGhpcy5fYm94LnN0eWxlLndpZHRoPXItbytcInB4XCIsdGhpcy5fYm94LnN0eWxlLmhlaWdodD1zLWErXCJweFwiO319LEFpLnByb3RvdHlwZS5fb25Nb3VzZVVwPWZ1bmN0aW9uKGUpe2lmKDA9PT1lLmJ1dHRvbil7dmFyIG49dGhpcy5fc3RhcnRQb3Msbz1pLm1vdXNlUG9zKHRoaXMuX2VsLGUpLHI9KG5ldyBPKS5leHRlbmQodGhpcy5fbWFwLnVucHJvamVjdChuKSkuZXh0ZW5kKHRoaXMuX21hcC51bnByb2plY3QobykpO3RoaXMuX2ZpbmlzaCgpLGkuc3VwcHJlc3NDbGljaygpLG4ueD09PW8ueCYmbi55PT09by55P3RoaXMuX2ZpcmVFdmVudChcImJveHpvb21jYW5jZWxcIixlKTp0aGlzLl9tYXAuZml0Qm91bmRzKHIse2xpbmVhcjohMH0pLmZpcmUobmV3IHQuRXZlbnQoXCJib3h6b29tZW5kXCIse29yaWdpbmFsRXZlbnQ6ZSxib3hab29tQm91bmRzOnJ9KSk7fX0sQWkucHJvdG90eXBlLl9vbktleURvd249ZnVuY3Rpb24odCl7Mjc9PT10LmtleUNvZGUmJih0aGlzLl9maW5pc2goKSx0aGlzLl9maXJlRXZlbnQoXCJib3h6b29tY2FuY2VsXCIsdCkpO30sQWkucHJvdG90eXBlLl9maW5pc2g9ZnVuY3Rpb24oKXt0aGlzLl9hY3RpdmU9ITEsdC5kZWZhdWx0JDEuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW91c2VNb3ZlLCExKSx0LmRlZmF1bHQkMS5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuX29uS2V5RG93biwhMSksdC5kZWZhdWx0JDEuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLl9vbk1vdXNlVXAsITEpLHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3Jvc3NoYWlyXCIpLHRoaXMuX2JveCYmKGkucmVtb3ZlKHRoaXMuX2JveCksdGhpcy5fYm94PW51bGwpLGkuZW5hYmxlRHJhZygpLGRlbGV0ZSB0aGlzLl9zdGFydFBvcyxkZWxldGUgdGhpcy5fbGFzdFBvczt9LEFpLnByb3RvdHlwZS5fZmlyZUV2ZW50PWZ1bmN0aW9uKGUsaSl7cmV0dXJuIHRoaXMuX21hcC5maXJlKG5ldyB0LkV2ZW50KGUse29yaWdpbmFsRXZlbnQ6aX0pKX07dmFyIE1pPXQuYmV6aWVyKDAsMCwuMjUsMSksTGk9ZnVuY3Rpb24oZSxpKXt0aGlzLl9tYXA9ZSx0aGlzLl9lbD1pLmVsZW1lbnR8fGUuZ2V0Q2FudmFzQ29udGFpbmVyKCksdGhpcy5fc3RhdGU9XCJkaXNhYmxlZFwiLHRoaXMuX2J1dHRvbj1pLmJ1dHRvbnx8XCJyaWdodFwiLHRoaXMuX2JlYXJpbmdTbmFwPWkuYmVhcmluZ1NuYXB8fDAsdGhpcy5fcGl0Y2hXaXRoUm90YXRlPSExIT09aS5waXRjaFdpdGhSb3RhdGUsdC5iaW5kQWxsKFtcIm9uTW91c2VEb3duXCIsXCJfb25Nb3VzZU1vdmVcIixcIl9vbk1vdXNlVXBcIixcIl9vbkJsdXJcIixcIl9vbkRyYWdGcmFtZVwiXSx0aGlzKTt9O0xpLnByb3RvdHlwZS5pc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm5cImRpc2FibGVkXCIhPT10aGlzLl9zdGF0ZX0sTGkucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuXCJhY3RpdmVcIj09PXRoaXMuX3N0YXRlfSxMaS5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5pc0VuYWJsZWQoKXx8KHRoaXMuX3N0YXRlPVwiZW5hYmxlZFwiKTt9LExpLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VuYWJsZWQoKSlzd2l0Y2godGhpcy5fc3RhdGUpe2Nhc2VcImFjdGl2ZVwiOnRoaXMuX3N0YXRlPVwiZGlzYWJsZWRcIix0aGlzLl91bmJpbmQoKSx0aGlzLl9kZWFjdGl2YXRlKCksdGhpcy5fZmlyZUV2ZW50KFwicm90YXRlZW5kXCIpLHRoaXMuX3BpdGNoV2l0aFJvdGF0ZSYmdGhpcy5fZmlyZUV2ZW50KFwicGl0Y2hlbmRcIiksdGhpcy5fZmlyZUV2ZW50KFwibW92ZWVuZFwiKTticmVhaztjYXNlXCJwZW5kaW5nXCI6dGhpcy5fc3RhdGU9XCJkaXNhYmxlZFwiLHRoaXMuX3VuYmluZCgpO2JyZWFrO2RlZmF1bHQ6dGhpcy5fc3RhdGU9XCJkaXNhYmxlZFwiO319LExpLnByb3RvdHlwZS5vbk1vdXNlRG93bj1mdW5jdGlvbihlKXtpZihcImVuYWJsZWRcIj09PXRoaXMuX3N0YXRlKXtpZihcInJpZ2h0XCI9PT10aGlzLl9idXR0b24pe2lmKHRoaXMuX2V2ZW50QnV0dG9uPWkubW91c2VCdXR0b24oZSksdGhpcy5fZXZlbnRCdXR0b24hPT0oZS5jdHJsS2V5PzA6MikpcmV0dXJufWVsc2V7aWYoZS5jdHJsS2V5fHwwIT09aS5tb3VzZUJ1dHRvbihlKSlyZXR1cm47dGhpcy5fZXZlbnRCdXR0b249MDt9aS5kaXNhYmxlRHJhZygpLHQuZGVmYXVsdCQxLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLl9vbk1vdXNlTW92ZSx7Y2FwdHVyZTohMH0pLHQuZGVmYXVsdCQxLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5fb25Nb3VzZVVwKSx0LmRlZmF1bHQkMS5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMuX29uQmx1ciksdGhpcy5fc3RhdGU9XCJwZW5kaW5nXCIsdGhpcy5faW5lcnRpYT1bW3QuZGVmYXVsdCQyLm5vdygpLHRoaXMuX21hcC5nZXRCZWFyaW5nKCldXSx0aGlzLl9zdGFydFBvcz10aGlzLl9sYXN0UG9zPWkubW91c2VQb3ModGhpcy5fZWwsZSksdGhpcy5fY2VudGVyPXRoaXMuX21hcC50cmFuc2Zvcm0uY2VudGVyUG9pbnQsZS5wcmV2ZW50RGVmYXVsdCgpO319LExpLnByb3RvdHlwZS5fb25Nb3VzZU1vdmU9ZnVuY3Rpb24odCl7dmFyIGU9aS5tb3VzZVBvcyh0aGlzLl9lbCx0KTt0aGlzLl9sYXN0UG9zLmVxdWFscyhlKXx8KHRoaXMuX2xhc3RNb3ZlRXZlbnQ9dCx0aGlzLl9sYXN0UG9zPWUsXCJwZW5kaW5nXCI9PT10aGlzLl9zdGF0ZSYmKHRoaXMuX3N0YXRlPVwiYWN0aXZlXCIsdGhpcy5fZmlyZUV2ZW50KFwicm90YXRlc3RhcnRcIix0KSx0aGlzLl9maXJlRXZlbnQoXCJtb3Zlc3RhcnRcIix0KSx0aGlzLl9waXRjaFdpdGhSb3RhdGUmJnRoaXMuX2ZpcmVFdmVudChcInBpdGNoc3RhcnRcIix0KSksdGhpcy5fZnJhbWVJZHx8KHRoaXMuX2ZyYW1lSWQ9dGhpcy5fbWFwLl9yZXF1ZXN0UmVuZGVyRnJhbWUodGhpcy5fb25EcmFnRnJhbWUpKSk7fSxMaS5wcm90b3R5cGUuX29uRHJhZ0ZyYW1lPWZ1bmN0aW9uKCl7dGhpcy5fZnJhbWVJZD1udWxsO3ZhciBlPXRoaXMuX2xhc3RNb3ZlRXZlbnQ7aWYoZSl7dmFyIGk9dGhpcy5fbWFwLnRyYW5zZm9ybSxuPXRoaXMuX3N0YXJ0UG9zLG89dGhpcy5fbGFzdFBvcyxyPS44KihuLngtby54KSxhPS0uNSoobi55LW8ueSkscz1pLmJlYXJpbmctcixsPWkucGl0Y2gtYSxjPXRoaXMuX2luZXJ0aWEsdT1jW2MubGVuZ3RoLTFdO3RoaXMuX2RyYWluSW5lcnRpYUJ1ZmZlcigpLGMucHVzaChbdC5kZWZhdWx0JDIubm93KCksdGhpcy5fbWFwLl9ub3JtYWxpemVCZWFyaW5nKHMsdVsxXSldKSxpLmJlYXJpbmc9cyx0aGlzLl9waXRjaFdpdGhSb3RhdGUmJih0aGlzLl9maXJlRXZlbnQoXCJwaXRjaFwiLGUpLGkucGl0Y2g9bCksdGhpcy5fZmlyZUV2ZW50KFwicm90YXRlXCIsZSksdGhpcy5fZmlyZUV2ZW50KFwibW92ZVwiLGUpLGRlbGV0ZSB0aGlzLl9sYXN0TW92ZUV2ZW50LHRoaXMuX3N0YXJ0UG9zPXRoaXMuX2xhc3RQb3M7fX0sTGkucHJvdG90eXBlLl9vbk1vdXNlVXA9ZnVuY3Rpb24odCl7aWYoaS5tb3VzZUJ1dHRvbih0KT09PXRoaXMuX2V2ZW50QnV0dG9uKXN3aXRjaCh0aGlzLl9zdGF0ZSl7Y2FzZVwiYWN0aXZlXCI6dGhpcy5fc3RhdGU9XCJlbmFibGVkXCIsaS5zdXBwcmVzc0NsaWNrKCksdGhpcy5fdW5iaW5kKCksdGhpcy5fZGVhY3RpdmF0ZSgpLHRoaXMuX2luZXJ0aWFsUm90YXRlKHQpO2JyZWFrO2Nhc2VcInBlbmRpbmdcIjp0aGlzLl9zdGF0ZT1cImVuYWJsZWRcIix0aGlzLl91bmJpbmQoKTt9fSxMaS5wcm90b3R5cGUuX29uQmx1cj1mdW5jdGlvbih0KXtzd2l0Y2godGhpcy5fc3RhdGUpe2Nhc2VcImFjdGl2ZVwiOnRoaXMuX3N0YXRlPVwiZW5hYmxlZFwiLHRoaXMuX3VuYmluZCgpLHRoaXMuX2RlYWN0aXZhdGUoKSx0aGlzLl9maXJlRXZlbnQoXCJyb3RhdGVlbmRcIix0KSx0aGlzLl9waXRjaFdpdGhSb3RhdGUmJnRoaXMuX2ZpcmVFdmVudChcInBpdGNoZW5kXCIsdCksdGhpcy5fZmlyZUV2ZW50KFwibW92ZWVuZFwiLHQpO2JyZWFrO2Nhc2VcInBlbmRpbmdcIjp0aGlzLl9zdGF0ZT1cImVuYWJsZWRcIix0aGlzLl91bmJpbmQoKTt9fSxMaS5wcm90b3R5cGUuX3VuYmluZD1mdW5jdGlvbigpe3QuZGVmYXVsdCQxLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLl9vbk1vdXNlTW92ZSx7Y2FwdHVyZTohMH0pLHQuZGVmYXVsdCQxLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5fb25Nb3VzZVVwKSx0LmRlZmF1bHQkMS5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMuX29uQmx1ciksaS5lbmFibGVEcmFnKCk7fSxMaS5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9mcmFtZUlkJiYodGhpcy5fbWFwLl9jYW5jZWxSZW5kZXJGcmFtZSh0aGlzLl9mcmFtZUlkKSx0aGlzLl9mcmFtZUlkPW51bGwpLGRlbGV0ZSB0aGlzLl9sYXN0TW92ZUV2ZW50LGRlbGV0ZSB0aGlzLl9zdGFydFBvcyxkZWxldGUgdGhpcy5fbGFzdFBvczt9LExpLnByb3RvdHlwZS5faW5lcnRpYWxSb3RhdGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9maXJlRXZlbnQoXCJyb3RhdGVlbmRcIix0KSx0aGlzLl9kcmFpbkluZXJ0aWFCdWZmZXIoKTt2YXIgaT10aGlzLl9tYXAsbj1pLmdldEJlYXJpbmcoKSxvPXRoaXMuX2luZXJ0aWEscj1mdW5jdGlvbigpe01hdGguYWJzKG4pPGUuX2JlYXJpbmdTbmFwP2kucmVzZXROb3J0aCh7bm9Nb3ZlU3RhcnQ6ITB9LHtvcmlnaW5hbEV2ZW50OnR9KTplLl9maXJlRXZlbnQoXCJtb3ZlZW5kXCIsdCksZS5fcGl0Y2hXaXRoUm90YXRlJiZlLl9maXJlRXZlbnQoXCJwaXRjaGVuZFwiLHQpO307aWYoby5sZW5ndGg8MilyKCk7ZWxzZXt2YXIgYT1vWzBdLHM9b1tvLmxlbmd0aC0xXSxsPW9bby5sZW5ndGgtMl0sYz1pLl9ub3JtYWxpemVCZWFyaW5nKG4sbFsxXSksdT1zWzFdLWFbMV0saD11PDA/LTE6MSxwPShzWzBdLWFbMF0pLzFlMztpZigwIT09dSYmMCE9PXApe3ZhciBkPU1hdGguYWJzKHUqKC4yNS9wKSk7ZD4xODAmJihkPTE4MCk7dmFyIGY9ZC8xODA7Yys9aCpkKihmLzIpLE1hdGguYWJzKGkuX25vcm1hbGl6ZUJlYXJpbmcoYywwKSk8dGhpcy5fYmVhcmluZ1NuYXAmJihjPWkuX25vcm1hbGl6ZUJlYXJpbmcoMCxjKSksaS5yb3RhdGVUbyhjLHtkdXJhdGlvbjoxZTMqZixlYXNpbmc6TWksbm9Nb3ZlU3RhcnQ6ITB9LHtvcmlnaW5hbEV2ZW50OnR9KTt9ZWxzZSByKCk7fX0sTGkucHJvdG90eXBlLl9maXJlRXZlbnQ9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdGhpcy5fbWFwLmZpcmUobmV3IHQuRXZlbnQoZSxpP3tvcmlnaW5hbEV2ZW50Oml9Ont9KSl9LExpLnByb3RvdHlwZS5fZHJhaW5JbmVydGlhQnVmZmVyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuX2luZXJ0aWEsaT10LmRlZmF1bHQkMi5ub3coKTtlLmxlbmd0aD4wJiZpLWVbMF1bMF0+MTYwOyllLnNoaWZ0KCk7fTt2YXIgRGk9dC5iZXppZXIoMCwwLC4zLDEpLFJpPWZ1bmN0aW9uKGUpe3RoaXMuX21hcD1lLHRoaXMuX2VsPWUuZ2V0Q2FudmFzQ29udGFpbmVyKCksdGhpcy5fc3RhdGU9XCJkaXNhYmxlZFwiLHQuYmluZEFsbChbXCJfb25Nb3ZlXCIsXCJfb25Nb3VzZVVwXCIsXCJfb25Ub3VjaEVuZFwiLFwiX29uQmx1clwiLFwiX29uRHJhZ0ZyYW1lXCJdLHRoaXMpO307UmkucHJvdG90eXBlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVyblwiZGlzYWJsZWRcIiE9PXRoaXMuX3N0YXRlfSxSaS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm5cImFjdGl2ZVwiPT09dGhpcy5fc3RhdGV9LFJpLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLmlzRW5hYmxlZCgpfHwodGhpcy5fZWwuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLXRvdWNoLWRyYWctcGFuXCIpLHRoaXMuX3N0YXRlPVwiZW5hYmxlZFwiKTt9LFJpLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VuYWJsZWQoKSlzd2l0Y2godGhpcy5fZWwuY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLXRvdWNoLWRyYWctcGFuXCIpLHRoaXMuX3N0YXRlKXtjYXNlXCJhY3RpdmVcIjp0aGlzLl9zdGF0ZT1cImRpc2FibGVkXCIsdGhpcy5fdW5iaW5kKCksdGhpcy5fZGVhY3RpdmF0ZSgpLHRoaXMuX2ZpcmVFdmVudChcImRyYWdlbmRcIiksdGhpcy5fZmlyZUV2ZW50KFwibW92ZWVuZFwiKTticmVhaztjYXNlXCJwZW5kaW5nXCI6dGhpcy5fc3RhdGU9XCJkaXNhYmxlZFwiLHRoaXMuX3VuYmluZCgpO2JyZWFrO2RlZmF1bHQ6dGhpcy5fc3RhdGU9XCJkaXNhYmxlZFwiO319LFJpLnByb3RvdHlwZS5vbk1vdXNlRG93bj1mdW5jdGlvbihlKXtcImVuYWJsZWRcIj09PXRoaXMuX3N0YXRlJiYoZS5jdHJsS2V5fHwwIT09aS5tb3VzZUJ1dHRvbihlKXx8KGkuYWRkRXZlbnRMaXN0ZW5lcih0LmRlZmF1bHQkMS5kb2N1bWVudCxcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW92ZSx7Y2FwdHVyZTohMH0pLGkuYWRkRXZlbnRMaXN0ZW5lcih0LmRlZmF1bHQkMS5kb2N1bWVudCxcIm1vdXNldXBcIix0aGlzLl9vbk1vdXNlVXApLHRoaXMuX3N0YXJ0KGUpKSk7fSxSaS5wcm90b3R5cGUub25Ub3VjaFN0YXJ0PWZ1bmN0aW9uKGUpe1wiZW5hYmxlZFwiPT09dGhpcy5fc3RhdGUmJihlLnRvdWNoZXMubGVuZ3RoPjF8fChpLmFkZEV2ZW50TGlzdGVuZXIodC5kZWZhdWx0JDEuZG9jdW1lbnQsXCJ0b3VjaG1vdmVcIix0aGlzLl9vbk1vdmUse2NhcHR1cmU6ITAscGFzc2l2ZTohMX0pLGkuYWRkRXZlbnRMaXN0ZW5lcih0LmRlZmF1bHQkMS5kb2N1bWVudCxcInRvdWNoZW5kXCIsdGhpcy5fb25Ub3VjaEVuZCksdGhpcy5fc3RhcnQoZSkpKTt9LFJpLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24oZSl7dC5kZWZhdWx0JDEuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0aGlzLl9vbkJsdXIpLHRoaXMuX3N0YXRlPVwicGVuZGluZ1wiLHRoaXMuX3N0YXJ0UG9zPXRoaXMuX2xhc3RQb3M9aS5tb3VzZVBvcyh0aGlzLl9lbCxlKSx0aGlzLl9pbmVydGlhPVtbdC5kZWZhdWx0JDIubm93KCksdGhpcy5fc3RhcnRQb3NdXTt9LFJpLnByb3RvdHlwZS5fb25Nb3ZlPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgbj1pLm1vdXNlUG9zKHRoaXMuX2VsLGUpO3RoaXMuX2xhc3RQb3MuZXF1YWxzKG4pfHwodGhpcy5fbGFzdE1vdmVFdmVudD1lLHRoaXMuX2xhc3RQb3M9bix0aGlzLl9kcmFpbkluZXJ0aWFCdWZmZXIoKSx0aGlzLl9pbmVydGlhLnB1c2goW3QuZGVmYXVsdCQyLm5vdygpLHRoaXMuX2xhc3RQb3NdKSxcInBlbmRpbmdcIj09PXRoaXMuX3N0YXRlJiYodGhpcy5fc3RhdGU9XCJhY3RpdmVcIix0aGlzLl9maXJlRXZlbnQoXCJkcmFnc3RhcnRcIixlKSx0aGlzLl9maXJlRXZlbnQoXCJtb3Zlc3RhcnRcIixlKSksdGhpcy5fZnJhbWVJZHx8KHRoaXMuX2ZyYW1lSWQ9dGhpcy5fbWFwLl9yZXF1ZXN0UmVuZGVyRnJhbWUodGhpcy5fb25EcmFnRnJhbWUpKSk7fSxSaS5wcm90b3R5cGUuX29uRHJhZ0ZyYW1lPWZ1bmN0aW9uKCl7dGhpcy5fZnJhbWVJZD1udWxsO3ZhciB0PXRoaXMuX2xhc3RNb3ZlRXZlbnQ7aWYodCl7dmFyIGU9dGhpcy5fbWFwLnRyYW5zZm9ybTtlLnNldExvY2F0aW9uQXRQb2ludChlLnBvaW50TG9jYXRpb24odGhpcy5fc3RhcnRQb3MpLHRoaXMuX2xhc3RQb3MpLHRoaXMuX2ZpcmVFdmVudChcImRyYWdcIix0KSx0aGlzLl9maXJlRXZlbnQoXCJtb3ZlXCIsdCksdGhpcy5fc3RhcnRQb3M9dGhpcy5fbGFzdFBvcyxkZWxldGUgdGhpcy5fbGFzdE1vdmVFdmVudDt9fSxSaS5wcm90b3R5cGUuX29uTW91c2VVcD1mdW5jdGlvbih0KXtpZigwPT09aS5tb3VzZUJ1dHRvbih0KSlzd2l0Y2godGhpcy5fc3RhdGUpe2Nhc2VcImFjdGl2ZVwiOnRoaXMuX3N0YXRlPVwiZW5hYmxlZFwiLGkuc3VwcHJlc3NDbGljaygpLHRoaXMuX3VuYmluZCgpLHRoaXMuX2RlYWN0aXZhdGUoKSx0aGlzLl9pbmVydGlhbFBhbih0KTticmVhaztjYXNlXCJwZW5kaW5nXCI6dGhpcy5fc3RhdGU9XCJlbmFibGVkXCIsdGhpcy5fdW5iaW5kKCk7fX0sUmkucHJvdG90eXBlLl9vblRvdWNoRW5kPWZ1bmN0aW9uKHQpe3N3aXRjaCh0aGlzLl9zdGF0ZSl7Y2FzZVwiYWN0aXZlXCI6dGhpcy5fc3RhdGU9XCJlbmFibGVkXCIsdGhpcy5fdW5iaW5kKCksdGhpcy5fZGVhY3RpdmF0ZSgpLHRoaXMuX2luZXJ0aWFsUGFuKHQpO2JyZWFrO2Nhc2VcInBlbmRpbmdcIjp0aGlzLl9zdGF0ZT1cImVuYWJsZWRcIix0aGlzLl91bmJpbmQoKTt9fSxSaS5wcm90b3R5cGUuX29uQmx1cj1mdW5jdGlvbih0KXtzd2l0Y2godGhpcy5fc3RhdGUpe2Nhc2VcImFjdGl2ZVwiOnRoaXMuX3N0YXRlPVwiZW5hYmxlZFwiLHRoaXMuX3VuYmluZCgpLHRoaXMuX2RlYWN0aXZhdGUoKSx0aGlzLl9maXJlRXZlbnQoXCJkcmFnZW5kXCIsdCksdGhpcy5fZmlyZUV2ZW50KFwibW92ZWVuZFwiLHQpO2JyZWFrO2Nhc2VcInBlbmRpbmdcIjp0aGlzLl9zdGF0ZT1cImVuYWJsZWRcIix0aGlzLl91bmJpbmQoKTt9fSxSaS5wcm90b3R5cGUuX3VuYmluZD1mdW5jdGlvbigpe2kucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LmRlZmF1bHQkMS5kb2N1bWVudCxcInRvdWNobW92ZVwiLHRoaXMuX29uTW92ZSx7Y2FwdHVyZTohMCxwYXNzaXZlOiExfSksaS5yZW1vdmVFdmVudExpc3RlbmVyKHQuZGVmYXVsdCQxLmRvY3VtZW50LFwidG91Y2hlbmRcIix0aGlzLl9vblRvdWNoRW5kKSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIodC5kZWZhdWx0JDEuZG9jdW1lbnQsXCJtb3VzZW1vdmVcIix0aGlzLl9vbk1vdmUse2NhcHR1cmU6ITB9KSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIodC5kZWZhdWx0JDEuZG9jdW1lbnQsXCJtb3VzZXVwXCIsdGhpcy5fb25Nb3VzZVVwKSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIodC5kZWZhdWx0JDEsXCJibHVyXCIsdGhpcy5fb25CbHVyKTt9LFJpLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX2ZyYW1lSWQmJih0aGlzLl9tYXAuX2NhbmNlbFJlbmRlckZyYW1lKHRoaXMuX2ZyYW1lSWQpLHRoaXMuX2ZyYW1lSWQ9bnVsbCksZGVsZXRlIHRoaXMuX2xhc3RNb3ZlRXZlbnQsZGVsZXRlIHRoaXMuX3N0YXJ0UG9zLGRlbGV0ZSB0aGlzLl9sYXN0UG9zO30sUmkucHJvdG90eXBlLl9pbmVydGlhbFBhbj1mdW5jdGlvbih0KXt0aGlzLl9maXJlRXZlbnQoXCJkcmFnZW5kXCIsdCksdGhpcy5fZHJhaW5JbmVydGlhQnVmZmVyKCk7dmFyIGU9dGhpcy5faW5lcnRpYTtpZihlLmxlbmd0aDwyKXRoaXMuX2ZpcmVFdmVudChcIm1vdmVlbmRcIix0KTtlbHNle3ZhciBpPWVbZS5sZW5ndGgtMV0sbj1lWzBdLG89aVsxXS5zdWIoblsxXSkscj0oaVswXS1uWzBdKS8xZTM7aWYoMD09PXJ8fGlbMV0uZXF1YWxzKG5bMV0pKXRoaXMuX2ZpcmVFdmVudChcIm1vdmVlbmRcIix0KTtlbHNle3ZhciBhPW8ubXVsdCguMy9yKSxzPWEubWFnKCk7cz4xNDAwJiYocz0xNDAwLGEuX3VuaXQoKS5fbXVsdChzKSk7dmFyIGw9cy83NTAsYz1hLm11bHQoLWwvMik7dGhpcy5fbWFwLnBhbkJ5KGMse2R1cmF0aW9uOjFlMypsLGVhc2luZzpEaSxub01vdmVTdGFydDohMH0se29yaWdpbmFsRXZlbnQ6dH0pO319fSxSaS5wcm90b3R5cGUuX2ZpcmVFdmVudD1mdW5jdGlvbihlLGkpe3JldHVybiB0aGlzLl9tYXAuZmlyZShuZXcgdC5FdmVudChlLGk/e29yaWdpbmFsRXZlbnQ6aX06e30pKX0sUmkucHJvdG90eXBlLl9kcmFpbkluZXJ0aWFCdWZmZXI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5faW5lcnRpYSxpPXQuZGVmYXVsdCQyLm5vdygpO2UubGVuZ3RoPjAmJmktZVswXVswXT4xNjA7KWUuc2hpZnQoKTt9O3ZhciBQaT1mdW5jdGlvbihlKXt0aGlzLl9tYXA9ZSx0aGlzLl9lbD1lLmdldENhbnZhc0NvbnRhaW5lcigpLHQuYmluZEFsbChbXCJfb25LZXlEb3duXCJdLHRoaXMpO307ZnVuY3Rpb24ga2kodCl7cmV0dXJuIHQqKDItdCl9UGkucHJvdG90eXBlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fZW5hYmxlZH0sUGkucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe3RoaXMuaXNFbmFibGVkKCl8fCh0aGlzLl9lbC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuX29uS2V5RG93biwhMSksdGhpcy5fZW5hYmxlZD0hMCk7fSxQaS5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuaXNFbmFibGVkKCkmJih0aGlzLl9lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuX29uS2V5RG93biksdGhpcy5fZW5hYmxlZD0hMSk7fSxQaS5wcm90b3R5cGUuX29uS2V5RG93bj1mdW5jdGlvbih0KXtpZighKHQuYWx0S2V5fHx0LmN0cmxLZXl8fHQubWV0YUtleSkpe3ZhciBlPTAsaT0wLG49MCxvPTAscj0wO3N3aXRjaCh0LmtleUNvZGUpe2Nhc2UgNjE6Y2FzZSAxMDc6Y2FzZSAxNzE6Y2FzZSAxODc6ZT0xO2JyZWFrO2Nhc2UgMTg5OmNhc2UgMTA5OmNhc2UgMTczOmU9LTE7YnJlYWs7Y2FzZSAzNzp0LnNoaWZ0S2V5P2k9LTE6KHQucHJldmVudERlZmF1bHQoKSxvPS0xKTticmVhaztjYXNlIDM5OnQuc2hpZnRLZXk/aT0xOih0LnByZXZlbnREZWZhdWx0KCksbz0xKTticmVhaztjYXNlIDM4OnQuc2hpZnRLZXk/bj0xOih0LnByZXZlbnREZWZhdWx0KCkscj0tMSk7YnJlYWs7Y2FzZSA0MDp0LnNoaWZ0S2V5P249LTE6KHI9MSx0LnByZXZlbnREZWZhdWx0KCkpO2JyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBhPXRoaXMuX21hcCxzPWEuZ2V0Wm9vbSgpLGw9e2R1cmF0aW9uOjMwMCxkZWxheUVuZEV2ZW50czo1MDAsZWFzaW5nOmtpLHpvb206ZT9NYXRoLnJvdW5kKHMpK2UqKHQuc2hpZnRLZXk/MjoxKTpzLGJlYXJpbmc6YS5nZXRCZWFyaW5nKCkrMTUqaSxwaXRjaDphLmdldFBpdGNoKCkrMTAqbixvZmZzZXQ6WzEwMCotbywxMDAqLXJdLGNlbnRlcjphLmdldENlbnRlcigpfTthLmVhc2VUbyhsLHtvcmlnaW5hbEV2ZW50OnR9KTt9fTt2YXIgQmk9ZnVuY3Rpb24oZSl7dGhpcy5fbWFwPWUsdC5iaW5kQWxsKFtcIl9vbkRibENsaWNrXCIsXCJfb25ab29tRW5kXCJdLHRoaXMpO307QmkucHJvdG90eXBlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fZW5hYmxlZH0sQmkucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9hY3RpdmV9LEJpLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLmlzRW5hYmxlZCgpfHwodGhpcy5fZW5hYmxlZD0hMCk7fSxCaS5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuaXNFbmFibGVkKCkmJih0aGlzLl9lbmFibGVkPSExKTt9LEJpLnByb3RvdHlwZS5vblRvdWNoU3RhcnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLmlzRW5hYmxlZCgpJiYodC5wb2ludHMubGVuZ3RoPjF8fCh0aGlzLl90YXBwZWQ/KGNsZWFyVGltZW91dCh0aGlzLl90YXBwZWQpLHRoaXMuX3RhcHBlZD1udWxsLHRoaXMuX3pvb20odCkpOnRoaXMuX3RhcHBlZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fdGFwcGVkPW51bGw7fSwzMDApKSk7fSxCaS5wcm90b3R5cGUub25EYmxDbGljaz1mdW5jdGlvbih0KXt0aGlzLmlzRW5hYmxlZCgpJiYodC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCksdGhpcy5fem9vbSh0KSk7fSxCaS5wcm90b3R5cGUuX3pvb209ZnVuY3Rpb24odCl7dGhpcy5fYWN0aXZlPSEwLHRoaXMuX21hcC5vbihcInpvb21lbmRcIix0aGlzLl9vblpvb21FbmQpLHRoaXMuX21hcC56b29tVG8odGhpcy5fbWFwLmdldFpvb20oKSsodC5vcmlnaW5hbEV2ZW50LnNoaWZ0S2V5Py0xOjEpLHthcm91bmQ6dC5sbmdMYXR9LHQpO30sQmkucHJvdG90eXBlLl9vblpvb21FbmQ9ZnVuY3Rpb24oKXt0aGlzLl9hY3RpdmU9ITEsdGhpcy5fbWFwLm9mZihcInpvb21lbmRcIix0aGlzLl9vblpvb21FbmQpO307dmFyIE9pPXQuYmV6aWVyKDAsMCwuMTUsMSksRmk9ZnVuY3Rpb24oZSl7dGhpcy5fbWFwPWUsdGhpcy5fZWw9ZS5nZXRDYW52YXNDb250YWluZXIoKSx0LmJpbmRBbGwoW1wiX29uTW92ZVwiLFwiX29uRW5kXCIsXCJfb25Ub3VjaEZyYW1lXCJdLHRoaXMpO307RmkucHJvdG90eXBlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fZW5hYmxlZH0sRmkucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbih0KXt0aGlzLmlzRW5hYmxlZCgpfHwodGhpcy5fZWwuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLXRvdWNoLXpvb20tcm90YXRlXCIpLHRoaXMuX2VuYWJsZWQ9ITAsdGhpcy5fYXJvdW5kQ2VudGVyPSEhdCYmXCJjZW50ZXJcIj09PXQuYXJvdW5kKTt9LEZpLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5pc0VuYWJsZWQoKSYmKHRoaXMuX2VsLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC10b3VjaC16b29tLXJvdGF0ZVwiKSx0aGlzLl9lbmFibGVkPSExKTt9LEZpLnByb3RvdHlwZS5kaXNhYmxlUm90YXRpb249ZnVuY3Rpb24oKXt0aGlzLl9yb3RhdGlvbkRpc2FibGVkPSEwO30sRmkucHJvdG90eXBlLmVuYWJsZVJvdGF0aW9uPWZ1bmN0aW9uKCl7dGhpcy5fcm90YXRpb25EaXNhYmxlZD0hMTt9LEZpLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNFbmFibGVkKCkmJjI9PT1lLnRvdWNoZXMubGVuZ3RoKXt2YXIgbj1pLm1vdXNlUG9zKHRoaXMuX2VsLGUudG91Y2hlc1swXSksbz1pLm1vdXNlUG9zKHRoaXMuX2VsLGUudG91Y2hlc1sxXSk7dGhpcy5fc3RhcnRWZWM9bi5zdWIobyksdGhpcy5fZ2VzdHVyZUludGVudD12b2lkIDAsdGhpcy5faW5lcnRpYT1bXSxpLmFkZEV2ZW50TGlzdGVuZXIodC5kZWZhdWx0JDEuZG9jdW1lbnQsXCJ0b3VjaG1vdmVcIix0aGlzLl9vbk1vdmUse3Bhc3NpdmU6ITF9KSxpLmFkZEV2ZW50TGlzdGVuZXIodC5kZWZhdWx0JDEuZG9jdW1lbnQsXCJ0b3VjaGVuZFwiLHRoaXMuX29uRW5kKTt9fSxGaS5wcm90b3R5cGUuX2dldFRvdWNoRXZlbnREYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPWkubW91c2VQb3ModGhpcy5fZWwsdC50b3VjaGVzWzBdKSxuPWkubW91c2VQb3ModGhpcy5fZWwsdC50b3VjaGVzWzFdKSxvPWUuc3ViKG4pO3JldHVybnt2ZWM6byxjZW50ZXI6ZS5hZGQobikuZGl2KDIpLHNjYWxlOm8ubWFnKCkvdGhpcy5fc3RhcnRWZWMubWFnKCksYmVhcmluZzp0aGlzLl9yb3RhdGlvbkRpc2FibGVkPzA6MTgwKm8uYW5nbGVXaXRoKHRoaXMuX3N0YXJ0VmVjKS9NYXRoLlBJfX0sRmkucHJvdG90eXBlLl9vbk1vdmU9ZnVuY3Rpb24oZSl7aWYoMj09PWUudG91Y2hlcy5sZW5ndGgpe3ZhciBpPXRoaXMuX2dldFRvdWNoRXZlbnREYXRhKGUpLG49aS52ZWMsbz1pLnNjYWxlLHI9aS5iZWFyaW5nO2lmKCF0aGlzLl9nZXN0dXJlSW50ZW50KXt2YXIgYT1NYXRoLmFicygxLW8pPi4xNTtNYXRoLmFicyhyKT4xMD90aGlzLl9nZXN0dXJlSW50ZW50PVwicm90YXRlXCI6YSYmKHRoaXMuX2dlc3R1cmVJbnRlbnQ9XCJ6b29tXCIpLHRoaXMuX2dlc3R1cmVJbnRlbnQmJih0aGlzLl9tYXAuZmlyZShuZXcgdC5FdmVudCh0aGlzLl9nZXN0dXJlSW50ZW50K1wic3RhcnRcIix7b3JpZ2luYWxFdmVudDplfSkpLHRoaXMuX21hcC5maXJlKG5ldyB0LkV2ZW50KFwibW92ZXN0YXJ0XCIse29yaWdpbmFsRXZlbnQ6ZX0pKSx0aGlzLl9zdGFydFZlYz1uKTt9dGhpcy5fbGFzdFRvdWNoRXZlbnQ9ZSx0aGlzLl9mcmFtZUlkfHwodGhpcy5fZnJhbWVJZD10aGlzLl9tYXAuX3JlcXVlc3RSZW5kZXJGcmFtZSh0aGlzLl9vblRvdWNoRnJhbWUpKSxlLnByZXZlbnREZWZhdWx0KCk7fX0sRmkucHJvdG90eXBlLl9vblRvdWNoRnJhbWU9ZnVuY3Rpb24oKXt0aGlzLl9mcmFtZUlkPW51bGw7dmFyIGU9dGhpcy5fZ2VzdHVyZUludGVudDtpZihlKXt2YXIgaT10aGlzLl9tYXAudHJhbnNmb3JtO3RoaXMuX3N0YXJ0U2NhbGV8fCh0aGlzLl9zdGFydFNjYWxlPWkuc2NhbGUsdGhpcy5fc3RhcnRCZWFyaW5nPWkuYmVhcmluZyk7dmFyIG49dGhpcy5fZ2V0VG91Y2hFdmVudERhdGEodGhpcy5fbGFzdFRvdWNoRXZlbnQpLG89bi5jZW50ZXIscj1uLmJlYXJpbmcsYT1uLnNjYWxlLHM9aS5wb2ludExvY2F0aW9uKG8pLGw9aS5sb2NhdGlvblBvaW50KHMpO1wicm90YXRlXCI9PT1lJiYoaS5iZWFyaW5nPXRoaXMuX3N0YXJ0QmVhcmluZytyKSxpLnpvb209aS5zY2FsZVpvb20odGhpcy5fc3RhcnRTY2FsZSphKSxpLnNldExvY2F0aW9uQXRQb2ludChzLGwpLHRoaXMuX21hcC5maXJlKG5ldyB0LkV2ZW50KGUse29yaWdpbmFsRXZlbnQ6dGhpcy5fbGFzdFRvdWNoRXZlbnR9KSksdGhpcy5fbWFwLmZpcmUobmV3IHQuRXZlbnQoXCJtb3ZlXCIse29yaWdpbmFsRXZlbnQ6dGhpcy5fbGFzdFRvdWNoRXZlbnR9KSksdGhpcy5fZHJhaW5JbmVydGlhQnVmZmVyKCksdGhpcy5faW5lcnRpYS5wdXNoKFt0LmRlZmF1bHQkMi5ub3coKSxhLG9dKTt9fSxGaS5wcm90b3R5cGUuX29uRW5kPWZ1bmN0aW9uKGUpe2kucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LmRlZmF1bHQkMS5kb2N1bWVudCxcInRvdWNobW92ZVwiLHRoaXMuX29uTW92ZSx7cGFzc2l2ZTohMX0pLGkucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LmRlZmF1bHQkMS5kb2N1bWVudCxcInRvdWNoZW5kXCIsdGhpcy5fb25FbmQpO3ZhciBuPXRoaXMuX2dlc3R1cmVJbnRlbnQsbz10aGlzLl9zdGFydFNjYWxlO2lmKHRoaXMuX2ZyYW1lSWQmJih0aGlzLl9tYXAuX2NhbmNlbFJlbmRlckZyYW1lKHRoaXMuX2ZyYW1lSWQpLHRoaXMuX2ZyYW1lSWQ9bnVsbCksZGVsZXRlIHRoaXMuX2dlc3R1cmVJbnRlbnQsZGVsZXRlIHRoaXMuX3N0YXJ0U2NhbGUsZGVsZXRlIHRoaXMuX3N0YXJ0QmVhcmluZyxkZWxldGUgdGhpcy5fbGFzdFRvdWNoRXZlbnQsbil7dGhpcy5fbWFwLmZpcmUobmV3IHQuRXZlbnQobitcImVuZFwiLHtvcmlnaW5hbEV2ZW50OmV9KSksdGhpcy5fZHJhaW5JbmVydGlhQnVmZmVyKCk7dmFyIHI9dGhpcy5faW5lcnRpYSxhPXRoaXMuX21hcDtpZihyLmxlbmd0aDwyKWEuc25hcFRvTm9ydGgoe30se29yaWdpbmFsRXZlbnQ6ZX0pO2Vsc2V7dmFyIHM9cltyLmxlbmd0aC0xXSxsPXJbMF0sYz1hLnRyYW5zZm9ybS5zY2FsZVpvb20obypzWzFdKSx1PWEudHJhbnNmb3JtLnNjYWxlWm9vbShvKmxbMV0pLGg9Yy11LHA9KHNbMF0tbFswXSkvMWUzLGQ9c1syXTtpZigwIT09cCYmYyE9PXUpe3ZhciBmPS4xNSpoL3A7TWF0aC5hYnMoZik+Mi41JiYoZj1mPjA/Mi41Oi0yLjUpO3ZhciBtPTFlMypNYXRoLmFicyhmLygxMiouMTUpKSxfPWMrZiptLzJlMztfPDAmJihfPTApLGEuZWFzZVRvKHt6b29tOl8sZHVyYXRpb246bSxlYXNpbmc6T2ksYXJvdW5kOnRoaXMuX2Fyb3VuZENlbnRlcj9hLmdldENlbnRlcigpOmEudW5wcm9qZWN0KGQpLG5vTW92ZVN0YXJ0OiEwfSx7b3JpZ2luYWxFdmVudDplfSk7fWVsc2UgYS5zbmFwVG9Ob3J0aCh7fSx7b3JpZ2luYWxFdmVudDplfSk7fX19LEZpLnByb3RvdHlwZS5fZHJhaW5JbmVydGlhQnVmZmVyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuX2luZXJ0aWEsaT10LmRlZmF1bHQkMi5ub3coKTtlLmxlbmd0aD4yJiZpLWVbMF1bMF0+MTYwOyllLnNoaWZ0KCk7fTt2YXIgTmk9e3Njcm9sbFpvb206emksYm94Wm9vbTpBaSxkcmFnUm90YXRlOkxpLGRyYWdQYW46Umksa2V5Ym9hcmQ6UGksZG91YmxlQ2xpY2tab29tOkJpLHRvdWNoWm9vbVJvdGF0ZTpGaX07dmFyICRpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoaSxuKXtlLmNhbGwodGhpcyksdGhpcy5fbW92aW5nPSExLHRoaXMuX3pvb21pbmc9ITEsdGhpcy50cmFuc2Zvcm09aSx0aGlzLl9iZWFyaW5nU25hcD1uLmJlYXJpbmdTbmFwLHQuYmluZEFsbChbXCJfcmVuZGVyRnJhbWVDYWxsYmFja1wiXSx0aGlzKTt9cmV0dXJuIGUmJihpLl9fcHJvdG9fXz1lKSxpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlKSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pLGkucHJvdG90eXBlLmdldENlbnRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5jZW50ZXJ9LGkucHJvdG90eXBlLnNldENlbnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmp1bXBUbyh7Y2VudGVyOnR9LGUpfSxpLnByb3RvdHlwZS5wYW5CeT1mdW5jdGlvbihlLGksbil7cmV0dXJuIGU9dC5kZWZhdWx0LmNvbnZlcnQoZSkubXVsdCgtMSksdGhpcy5wYW5Ubyh0aGlzLnRyYW5zZm9ybS5jZW50ZXIsdC5leHRlbmQoe29mZnNldDplfSxpKSxuKX0saS5wcm90b3R5cGUucGFuVG89ZnVuY3Rpb24oZSxpLG4pe3JldHVybiB0aGlzLmVhc2VUbyh0LmV4dGVuZCh7Y2VudGVyOmV9LGkpLG4pfSxpLnByb3RvdHlwZS5nZXRab29tPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLnpvb219LGkucHJvdG90eXBlLnNldFpvb209ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5qdW1wVG8oe3pvb206dH0sZSksdGhpc30saS5wcm90b3R5cGUuem9vbVRvPWZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gdGhpcy5lYXNlVG8odC5leHRlbmQoe3pvb206ZX0saSksbil9LGkucHJvdG90eXBlLnpvb21Jbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnpvb21Ubyh0aGlzLmdldFpvb20oKSsxLHQsZSksdGhpc30saS5wcm90b3R5cGUuem9vbU91dD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnpvb21Ubyh0aGlzLmdldFpvb20oKS0xLHQsZSksdGhpc30saS5wcm90b3R5cGUuZ2V0QmVhcmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5iZWFyaW5nfSxpLnByb3RvdHlwZS5zZXRCZWFyaW5nPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuanVtcFRvKHtiZWFyaW5nOnR9LGUpLHRoaXN9LGkucHJvdG90eXBlLnJvdGF0ZVRvPWZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gdGhpcy5lYXNlVG8odC5leHRlbmQoe2JlYXJpbmc6ZX0saSksbil9LGkucHJvdG90eXBlLnJlc2V0Tm9ydGg9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdGhpcy5yb3RhdGVUbygwLHQuZXh0ZW5kKHtkdXJhdGlvbjoxZTN9LGUpLGkpLHRoaXN9LGkucHJvdG90eXBlLnNuYXBUb05vcnRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGguYWJzKHRoaXMuZ2V0QmVhcmluZygpKTx0aGlzLl9iZWFyaW5nU25hcD90aGlzLnJlc2V0Tm9ydGgodCxlKTp0aGlzfSxpLnByb3RvdHlwZS5nZXRQaXRjaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5waXRjaH0saS5wcm90b3R5cGUuc2V0UGl0Y2g9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5qdW1wVG8oe3BpdGNoOnR9LGUpLHRoaXN9LGkucHJvdG90eXBlLmNhbWVyYUZvckJvdW5kcz1mdW5jdGlvbihlLGkpe2lmKFwibnVtYmVyXCI9PXR5cGVvZihpPXQuZXh0ZW5kKHtwYWRkaW5nOnt0b3A6MCxib3R0b206MCxyaWdodDowLGxlZnQ6MH0sb2Zmc2V0OlswLDBdLG1heFpvb206dGhpcy50cmFuc2Zvcm0ubWF4Wm9vbX0saSkpLnBhZGRpbmcpe3ZhciBuPWkucGFkZGluZztpLnBhZGRpbmc9e3RvcDpuLGJvdHRvbTpuLHJpZ2h0Om4sbGVmdDpufTt9aWYodC5kZWZhdWx0JDEzKE9iamVjdC5rZXlzKGkucGFkZGluZykuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0PGU/LTE6dD5lPzE6MH0pLFtcImJvdHRvbVwiLFwibGVmdFwiLFwicmlnaHRcIixcInRvcFwiXSkpe2U9Ty5jb252ZXJ0KGUpO3ZhciBvPVsoaS5wYWRkaW5nLmxlZnQtaS5wYWRkaW5nLnJpZ2h0KS8yLChpLnBhZGRpbmcudG9wLWkucGFkZGluZy5ib3R0b20pLzJdLHI9TWF0aC5taW4oaS5wYWRkaW5nLnJpZ2h0LGkucGFkZGluZy5sZWZ0KSxhPU1hdGgubWluKGkucGFkZGluZy50b3AsaS5wYWRkaW5nLmJvdHRvbSk7aS5vZmZzZXQ9W2kub2Zmc2V0WzBdK29bMF0saS5vZmZzZXRbMV0rb1sxXV07dmFyIHM9dC5kZWZhdWx0LmNvbnZlcnQoaS5vZmZzZXQpLGw9dGhpcy50cmFuc2Zvcm0sYz1sLnByb2plY3QoZS5nZXROb3J0aFdlc3QoKSksdT1sLnByb2plY3QoZS5nZXRTb3V0aEVhc3QoKSksaD11LnN1YihjKSxwPShsLndpZHRoLTIqci0yKk1hdGguYWJzKHMueCkpL2gueCxkPShsLmhlaWdodC0yKmEtMipNYXRoLmFicyhzLnkpKS9oLnk7aWYoIShkPDB8fHA8MCkpcmV0dXJuIGkuY2VudGVyPWwudW5wcm9qZWN0KGMuYWRkKHUpLmRpdigyKSksaS56b29tPU1hdGgubWluKGwuc2NhbGVab29tKGwuc2NhbGUqTWF0aC5taW4ocCxkKSksaS5tYXhab29tKSxpLmJlYXJpbmc9MCxpO3Qud2Fybk9uY2UoXCJNYXAgY2Fubm90IGZpdCB3aXRoaW4gY2FudmFzIHdpdGggdGhlIGdpdmVuIGJvdW5kcywgcGFkZGluZywgYW5kL29yIG9mZnNldC5cIik7fWVsc2UgdC53YXJuT25jZShcIm9wdGlvbnMucGFkZGluZyBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyLCBvciBhbiBPYmplY3Qgd2l0aCBrZXlzICdib3R0b20nLCAnbGVmdCcsICdyaWdodCcsICd0b3AnXCIpO30saS5wcm90b3R5cGUuZml0Qm91bmRzPWZ1bmN0aW9uKGUsaSxuKXt2YXIgbz10aGlzLmNhbWVyYUZvckJvdW5kcyhlLGkpO3JldHVybiBvPyhpPXQuZXh0ZW5kKG8saSkpLmxpbmVhcj90aGlzLmVhc2VUbyhpLG4pOnRoaXMuZmx5VG8oaSxuKTp0aGlzfSxpLnByb3RvdHlwZS5qdW1wVG89ZnVuY3Rpb24oZSxpKXt0aGlzLnN0b3AoKTt2YXIgbj10aGlzLnRyYW5zZm9ybSxvPSExLHI9ITEsYT0hMTtyZXR1cm5cInpvb21cImluIGUmJm4uem9vbSE9PStlLnpvb20mJihvPSEwLG4uem9vbT0rZS56b29tKSx2b2lkIDAhPT1lLmNlbnRlciYmKG4uY2VudGVyPUIuY29udmVydChlLmNlbnRlcikpLFwiYmVhcmluZ1wiaW4gZSYmbi5iZWFyaW5nIT09K2UuYmVhcmluZyYmKHI9ITAsbi5iZWFyaW5nPStlLmJlYXJpbmcpLFwicGl0Y2hcImluIGUmJm4ucGl0Y2ghPT0rZS5waXRjaCYmKGE9ITAsbi5waXRjaD0rZS5waXRjaCksdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwibW92ZXN0YXJ0XCIsaSkpLmZpcmUobmV3IHQuRXZlbnQoXCJtb3ZlXCIsaSkpLG8mJnRoaXMuZmlyZShuZXcgdC5FdmVudChcInpvb21zdGFydFwiLGkpKS5maXJlKG5ldyB0LkV2ZW50KFwiem9vbVwiLGkpKS5maXJlKG5ldyB0LkV2ZW50KFwiem9vbWVuZFwiLGkpKSxyJiZ0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJyb3RhdGVzdGFydFwiLGkpKS5maXJlKG5ldyB0LkV2ZW50KFwicm90YXRlXCIsaSkpLmZpcmUobmV3IHQuRXZlbnQoXCJyb3RhdGVlbmRcIixpKSksYSYmdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwicGl0Y2hzdGFydFwiLGkpKS5maXJlKG5ldyB0LkV2ZW50KFwicGl0Y2hcIixpKSkuZmlyZShuZXcgdC5FdmVudChcInBpdGNoZW5kXCIsaSkpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcIm1vdmVlbmRcIixpKSl9LGkucHJvdG90eXBlLmVhc2VUbz1mdW5jdGlvbihlLGkpe3ZhciBuPXRoaXM7dGhpcy5zdG9wKCksITE9PT0oZT10LmV4dGVuZCh7b2Zmc2V0OlswLDBdLGR1cmF0aW9uOjUwMCxlYXNpbmc6dC5lYXNlfSxlKSkuYW5pbWF0ZSYmKGUuZHVyYXRpb249MCk7dmFyIG89dGhpcy50cmFuc2Zvcm0scj10aGlzLmdldFpvb20oKSxhPXRoaXMuZ2V0QmVhcmluZygpLHM9dGhpcy5nZXRQaXRjaCgpLGw9XCJ6b29tXCJpbiBlPytlLnpvb206cixjPVwiYmVhcmluZ1wiaW4gZT90aGlzLl9ub3JtYWxpemVCZWFyaW5nKGUuYmVhcmluZyxhKTphLHU9XCJwaXRjaFwiaW4gZT8rZS5waXRjaDpzLGg9by5jZW50ZXJQb2ludC5hZGQodC5kZWZhdWx0LmNvbnZlcnQoZS5vZmZzZXQpKSxwPW8ucG9pbnRMb2NhdGlvbihoKSxkPUIuY29udmVydChlLmNlbnRlcnx8cCk7dGhpcy5fbm9ybWFsaXplQ2VudGVyKGQpO3ZhciBmLG0sXz1vLnByb2plY3QocCksZz1vLnByb2plY3QoZCkuc3ViKF8pLHY9by56b29tU2NhbGUobC1yKTtyZXR1cm4gZS5hcm91bmQmJihmPUIuY29udmVydChlLmFyb3VuZCksbT1vLmxvY2F0aW9uUG9pbnQoZikpLHRoaXMuX3pvb21pbmc9bCE9PXIsdGhpcy5fcm90YXRpbmc9YSE9PWMsdGhpcy5fcGl0Y2hpbmc9dSE9PXMsdGhpcy5fcHJlcGFyZUVhc2UoaSxlLm5vTW92ZVN0YXJ0KSxjbGVhclRpbWVvdXQodGhpcy5fZWFzZUVuZFRpbWVvdXRJRCksdGhpcy5fZWFzZShmdW5jdGlvbihlKXtpZihuLl96b29taW5nJiYoby56b29tPXQubnVtYmVyKHIsbCxlKSksbi5fcm90YXRpbmcmJihvLmJlYXJpbmc9dC5udW1iZXIoYSxjLGUpKSxuLl9waXRjaGluZyYmKG8ucGl0Y2g9dC5udW1iZXIocyx1LGUpKSxmKW8uc2V0TG9jYXRpb25BdFBvaW50KGYsbSk7ZWxzZXt2YXIgcD1vLnpvb21TY2FsZShvLnpvb20tciksZD1sPnI/TWF0aC5taW4oMix2KTpNYXRoLm1heCguNSx2KSx5PU1hdGgucG93KGQsMS1lKSx4PW8udW5wcm9qZWN0KF8uYWRkKGcubXVsdChlKnkpKS5tdWx0KHApKTtvLnNldExvY2F0aW9uQXRQb2ludChvLnJlbmRlcldvcmxkQ29waWVzP3gud3JhcCgpOngsaCk7fW4uX2ZpcmVNb3ZlRXZlbnRzKGkpO30sZnVuY3Rpb24oKXtlLmRlbGF5RW5kRXZlbnRzP24uX2Vhc2VFbmRUaW1lb3V0SUQ9c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBuLl9hZnRlckVhc2UoaSl9LGUuZGVsYXlFbmRFdmVudHMpOm4uX2FmdGVyRWFzZShpKTt9LGUpLHRoaXN9LGkucHJvdG90eXBlLl9wcmVwYXJlRWFzZT1mdW5jdGlvbihlLGkpe3RoaXMuX21vdmluZz0hMCxpfHx0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJtb3Zlc3RhcnRcIixlKSksdGhpcy5fem9vbWluZyYmdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwiem9vbXN0YXJ0XCIsZSkpLHRoaXMuX3JvdGF0aW5nJiZ0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJyb3RhdGVzdGFydFwiLGUpKSx0aGlzLl9waXRjaGluZyYmdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwicGl0Y2hzdGFydFwiLGUpKTt9LGkucHJvdG90eXBlLl9maXJlTW92ZUV2ZW50cz1mdW5jdGlvbihlKXt0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJtb3ZlXCIsZSkpLHRoaXMuX3pvb21pbmcmJnRoaXMuZmlyZShuZXcgdC5FdmVudChcInpvb21cIixlKSksdGhpcy5fcm90YXRpbmcmJnRoaXMuZmlyZShuZXcgdC5FdmVudChcInJvdGF0ZVwiLGUpKSx0aGlzLl9waXRjaGluZyYmdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwicGl0Y2hcIixlKSk7fSxpLnByb3RvdHlwZS5fYWZ0ZXJFYXNlPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX3pvb21pbmcsbj10aGlzLl9yb3RhdGluZyxvPXRoaXMuX3BpdGNoaW5nO3RoaXMuX21vdmluZz0hMSx0aGlzLl96b29taW5nPSExLHRoaXMuX3JvdGF0aW5nPSExLHRoaXMuX3BpdGNoaW5nPSExLGkmJnRoaXMuZmlyZShuZXcgdC5FdmVudChcInpvb21lbmRcIixlKSksbiYmdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwicm90YXRlZW5kXCIsZSkpLG8mJnRoaXMuZmlyZShuZXcgdC5FdmVudChcInBpdGNoZW5kXCIsZSkpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcIm1vdmVlbmRcIixlKSk7fSxpLnByb3RvdHlwZS5mbHlUbz1mdW5jdGlvbihlLGkpe3ZhciBuPXRoaXM7dGhpcy5zdG9wKCksZT10LmV4dGVuZCh7b2Zmc2V0OlswLDBdLHNwZWVkOjEuMixjdXJ2ZToxLjQyLGVhc2luZzp0LmVhc2V9LGUpO3ZhciBvPXRoaXMudHJhbnNmb3JtLHI9dGhpcy5nZXRab29tKCksYT10aGlzLmdldEJlYXJpbmcoKSxzPXRoaXMuZ2V0UGl0Y2goKSxsPVwiem9vbVwiaW4gZT90LmNsYW1wKCtlLnpvb20sby5taW5ab29tLG8ubWF4Wm9vbSk6cixjPVwiYmVhcmluZ1wiaW4gZT90aGlzLl9ub3JtYWxpemVCZWFyaW5nKGUuYmVhcmluZyxhKTphLHU9XCJwaXRjaFwiaW4gZT8rZS5waXRjaDpzLGg9by56b29tU2NhbGUobC1yKSxwPW8uY2VudGVyUG9pbnQuYWRkKHQuZGVmYXVsdC5jb252ZXJ0KGUub2Zmc2V0KSksZD1vLnBvaW50TG9jYXRpb24ocCksZj1CLmNvbnZlcnQoZS5jZW50ZXJ8fGQpO3RoaXMuX25vcm1hbGl6ZUNlbnRlcihmKTt2YXIgbT1vLnByb2plY3QoZCksXz1vLnByb2plY3QoZikuc3ViKG0pLGc9ZS5jdXJ2ZSx2PU1hdGgubWF4KG8ud2lkdGgsby5oZWlnaHQpLHk9di9oLHg9Xy5tYWcoKTtpZihcIm1pblpvb21cImluIGUpe3ZhciBiPXQuY2xhbXAoTWF0aC5taW4oZS5taW5ab29tLHIsbCksby5taW5ab29tLG8ubWF4Wm9vbSksdz12L28uem9vbVNjYWxlKGItcik7Zz1NYXRoLnNxcnQody94KjIpO312YXIgRT1nKmc7ZnVuY3Rpb24gVCh0KXt2YXIgZT0oeSp5LXYqdisodD8tMToxKSpFKkUqeCp4KS8oMioodD95OnYpKkUqeCk7cmV0dXJuIE1hdGgubG9nKE1hdGguc3FydChlKmUrMSktZSl9ZnVuY3Rpb24gSSh0KXtyZXR1cm4oTWF0aC5leHAodCktTWF0aC5leHAoLXQpKS8yfWZ1bmN0aW9uIEModCl7cmV0dXJuKE1hdGguZXhwKHQpK01hdGguZXhwKC10KSkvMn12YXIgUz1UKDApLHo9ZnVuY3Rpb24odCl7cmV0dXJuIEMoUykvQyhTK2cqdCl9LEE9ZnVuY3Rpb24odCl7cmV0dXJuIHYqKChDKFMpKihJKGU9UytnKnQpL0MoZSkpLUkoUykpL0UpL3g7dmFyIGU7fSxNPShUKDEpLVMpL2c7aWYoTWF0aC5hYnMoeCk8MWUtNnx8IWlzRmluaXRlKE0pKXtpZihNYXRoLmFicyh2LXkpPDFlLTYpcmV0dXJuIHRoaXMuZWFzZVRvKGUsaSk7dmFyIEw9eTx2Py0xOjE7TT1NYXRoLmFicyhNYXRoLmxvZyh5L3YpKS9nLEE9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sej1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5leHAoTCpnKnQpfTt9aWYoXCJkdXJhdGlvblwiaW4gZSllLmR1cmF0aW9uPStlLmR1cmF0aW9uO2Vsc2V7dmFyIEQ9XCJzY3JlZW5TcGVlZFwiaW4gZT8rZS5zY3JlZW5TcGVlZC9nOitlLnNwZWVkO2UuZHVyYXRpb249MWUzKk0vRDt9cmV0dXJuIGUubWF4RHVyYXRpb24mJmUuZHVyYXRpb24+ZS5tYXhEdXJhdGlvbiYmKGUuZHVyYXRpb249MCksdGhpcy5fem9vbWluZz0hMCx0aGlzLl9yb3RhdGluZz1hIT09Yyx0aGlzLl9waXRjaGluZz11IT09cyx0aGlzLl9wcmVwYXJlRWFzZShpLCExKSx0aGlzLl9lYXNlKGZ1bmN0aW9uKGUpe3ZhciBsPWUqTSxoPTEveihsKTtvLnpvb209citvLnNjYWxlWm9vbShoKSxuLl9yb3RhdGluZyYmKG8uYmVhcmluZz10Lm51bWJlcihhLGMsZSkpLG4uX3BpdGNoaW5nJiYoby5waXRjaD10Lm51bWJlcihzLHUsZSkpO3ZhciBkPW8udW5wcm9qZWN0KG0uYWRkKF8ubXVsdChBKGwpKSkubXVsdChoKSk7by5zZXRMb2NhdGlvbkF0UG9pbnQoby5yZW5kZXJXb3JsZENvcGllcz9kLndyYXAoKTpkLHApLG4uX2ZpcmVNb3ZlRXZlbnRzKGkpO30sZnVuY3Rpb24oKXtyZXR1cm4gbi5fYWZ0ZXJFYXNlKGkpfSxlKSx0aGlzfSxpLnByb3RvdHlwZS5pc0Vhc2luZz1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fZWFzZUZyYW1lSWR9LGkucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtpZih0aGlzLl9lYXNlRnJhbWVJZCYmKHRoaXMuX2NhbmNlbFJlbmRlckZyYW1lKHRoaXMuX2Vhc2VGcmFtZUlkKSxkZWxldGUgdGhpcy5fZWFzZUZyYW1lSWQsZGVsZXRlIHRoaXMuX29uRWFzZUZyYW1lKSx0aGlzLl9vbkVhc2VFbmQpe3ZhciB0PXRoaXMuX29uRWFzZUVuZDtkZWxldGUgdGhpcy5fb25FYXNlRW5kLHQuY2FsbCh0aGlzKTt9cmV0dXJuIHRoaXN9LGkucHJvdG90eXBlLl9lYXNlPWZ1bmN0aW9uKGUsaSxuKXshMT09PW4uYW5pbWF0ZXx8MD09PW4uZHVyYXRpb24/KGUoMSksaSgpKToodGhpcy5fZWFzZVN0YXJ0PXQuZGVmYXVsdCQyLm5vdygpLHRoaXMuX2Vhc2VPcHRpb25zPW4sdGhpcy5fb25FYXNlRnJhbWU9ZSx0aGlzLl9vbkVhc2VFbmQ9aSx0aGlzLl9lYXNlRnJhbWVJZD10aGlzLl9yZXF1ZXN0UmVuZGVyRnJhbWUodGhpcy5fcmVuZGVyRnJhbWVDYWxsYmFjaykpO30saS5wcm90b3R5cGUuX3JlbmRlckZyYW1lQ2FsbGJhY2s9ZnVuY3Rpb24oKXt2YXIgZT1NYXRoLm1pbigodC5kZWZhdWx0JDIubm93KCktdGhpcy5fZWFzZVN0YXJ0KS90aGlzLl9lYXNlT3B0aW9ucy5kdXJhdGlvbiwxKTt0aGlzLl9vbkVhc2VGcmFtZSh0aGlzLl9lYXNlT3B0aW9ucy5lYXNpbmcoZSkpLGU8MT90aGlzLl9lYXNlRnJhbWVJZD10aGlzLl9yZXF1ZXN0UmVuZGVyRnJhbWUodGhpcy5fcmVuZGVyRnJhbWVDYWxsYmFjayk6dGhpcy5zdG9wKCk7fSxpLnByb3RvdHlwZS5fbm9ybWFsaXplQmVhcmluZz1mdW5jdGlvbihlLGkpe2U9dC53cmFwKGUsLTE4MCwxODApO3ZhciBuPU1hdGguYWJzKGUtaSk7cmV0dXJuIE1hdGguYWJzKGUtMzYwLWkpPG4mJihlLT0zNjApLE1hdGguYWJzKGUrMzYwLWkpPG4mJihlKz0zNjApLGV9LGkucHJvdG90eXBlLl9ub3JtYWxpemVDZW50ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50cmFuc2Zvcm07aWYoZS5yZW5kZXJXb3JsZENvcGllcyYmIWUubG5nUmFuZ2Upe3ZhciBpPXQubG5nLWUuY2VudGVyLmxuZzt0LmxuZys9aT4xODA/LTM2MDppPC0xODA/MzYwOjA7fX0saX0odC5FdmVudGVkKSxVaT1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT17fSksdGhpcy5vcHRpb25zPWUsdC5iaW5kQWxsKFtcIl91cGRhdGVFZGl0TGlua1wiLFwiX3VwZGF0ZURhdGFcIixcIl91cGRhdGVDb21wYWN0XCJdLHRoaXMpO307VWkucHJvdG90eXBlLmdldERlZmF1bHRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVyblwiYm90dG9tLXJpZ2h0XCJ9LFVpLnByb3RvdHlwZS5vbkFkZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy5jb21wYWN0O3JldHVybiB0aGlzLl9tYXA9dCx0aGlzLl9jb250YWluZXI9aS5jcmVhdGUoXCJkaXZcIixcIm1hcGJveGdsLWN0cmwgbWFwYm94Z2wtY3RybC1hdHRyaWJcIiksZSYmdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jb21wYWN0XCIpLHRoaXMuX3VwZGF0ZUF0dHJpYnV0aW9ucygpLHRoaXMuX3VwZGF0ZUVkaXRMaW5rKCksdGhpcy5fbWFwLm9uKFwic291cmNlZGF0YVwiLHRoaXMuX3VwZGF0ZURhdGEpLHRoaXMuX21hcC5vbihcIm1vdmVlbmRcIix0aGlzLl91cGRhdGVFZGl0TGluayksdm9pZCAwPT09ZSYmKHRoaXMuX21hcC5vbihcInJlc2l6ZVwiLHRoaXMuX3VwZGF0ZUNvbXBhY3QpLHRoaXMuX3VwZGF0ZUNvbXBhY3QoKSksdGhpcy5fY29udGFpbmVyfSxVaS5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24oKXtpLnJlbW92ZSh0aGlzLl9jb250YWluZXIpLHRoaXMuX21hcC5vZmYoXCJzb3VyY2VkYXRhXCIsdGhpcy5fdXBkYXRlRGF0YSksdGhpcy5fbWFwLm9mZihcIm1vdmVlbmRcIix0aGlzLl91cGRhdGVFZGl0TGluayksdGhpcy5fbWFwLm9mZihcInJlc2l6ZVwiLHRoaXMuX3VwZGF0ZUNvbXBhY3QpLHRoaXMuX21hcD12b2lkIDA7fSxVaS5wcm90b3R5cGUuX3VwZGF0ZUVkaXRMaW5rPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZWRpdExpbms7dHx8KHQ9dGhpcy5fZWRpdExpbms9dGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIubWFwYm94LWltcHJvdmUtbWFwXCIpKTt2YXIgZT1be2tleTpcIm93bmVyXCIsdmFsdWU6dGhpcy5zdHlsZU93bmVyfSx7a2V5OlwiaWRcIix2YWx1ZTp0aGlzLnN0eWxlSWR9LHtrZXk6XCJhY2Nlc3NfdG9rZW5cIix2YWx1ZTpoLkFDQ0VTU19UT0tFTn1dO2lmKHQpe3ZhciBpPWUucmVkdWNlKGZ1bmN0aW9uKHQsaSxuKXtyZXR1cm4gaS52YWx1ZSYmKHQrPWkua2V5K1wiPVwiK2kudmFsdWUrKG48ZS5sZW5ndGgtMT9cIiZcIjpcIlwiKSksdH0sXCI/XCIpO3QuaHJlZj1cImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vZmVlZGJhY2svXCIraSsodGhpcy5fbWFwLl9oYXNoP3RoaXMuX21hcC5faGFzaC5nZXRIYXNoU3RyaW5nKCEwKTpcIlwiKTt9fSxVaS5wcm90b3R5cGUuX3VwZGF0ZURhdGE9ZnVuY3Rpb24odCl7dCYmXCJtZXRhZGF0YVwiPT09dC5zb3VyY2VEYXRhVHlwZSYmKHRoaXMuX3VwZGF0ZUF0dHJpYnV0aW9ucygpLHRoaXMuX3VwZGF0ZUVkaXRMaW5rKCkpO30sVWkucHJvdG90eXBlLl91cGRhdGVBdHRyaWJ1dGlvbnM9ZnVuY3Rpb24oKXtpZih0aGlzLl9tYXAuc3R5bGUpe3ZhciB0PVtdO2lmKHRoaXMuX21hcC5zdHlsZS5zdHlsZXNoZWV0KXt2YXIgZT10aGlzLl9tYXAuc3R5bGUuc3R5bGVzaGVldDt0aGlzLnN0eWxlT3duZXI9ZS5vd25lcix0aGlzLnN0eWxlSWQ9ZS5pZDt9dmFyIGk9dGhpcy5fbWFwLnN0eWxlLnNvdXJjZUNhY2hlcztmb3IodmFyIG4gaW4gaSl7dmFyIG89aVtuXS5nZXRTb3VyY2UoKTtvLmF0dHJpYnV0aW9uJiZ0LmluZGV4T2Yoby5hdHRyaWJ1dGlvbik8MCYmdC5wdXNoKG8uYXR0cmlidXRpb24pO310LnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5sZW5ndGgtZS5sZW5ndGh9KSwodD10LmZpbHRlcihmdW5jdGlvbihlLGkpe2Zvcih2YXIgbj1pKzE7bjx0Lmxlbmd0aDtuKyspaWYodFtuXS5pbmRleE9mKGUpPj0wKXJldHVybiExO3JldHVybiEwfSkpLmxlbmd0aD8odGhpcy5fY29udGFpbmVyLmlubmVySFRNTD10LmpvaW4oXCIgfCBcIiksdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1hdHRyaWItZW1wdHlcIikpOnRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtYXR0cmliLWVtcHR5XCIpLHRoaXMuX2VkaXRMaW5rPW51bGw7fX0sVWkucHJvdG90eXBlLl91cGRhdGVDb21wYWN0PWZ1bmN0aW9uKCl7dGhpcy5fbWFwLmdldENhbnZhc0NvbnRhaW5lcigpLm9mZnNldFdpZHRoPD02NDA/dGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jb21wYWN0XCIpOnRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY29tcGFjdFwiKTt9O3ZhciBaaT1mdW5jdGlvbigpe3QuYmluZEFsbChbXCJfdXBkYXRlTG9nb1wiXSx0aGlzKSx0LmJpbmRBbGwoW1wiX3VwZGF0ZUNvbXBhY3RcIl0sdGhpcyk7fTtaaS5wcm90b3R5cGUub25BZGQ9ZnVuY3Rpb24odCl7dGhpcy5fbWFwPXQsdGhpcy5fY29udGFpbmVyPWkuY3JlYXRlKFwiZGl2XCIsXCJtYXBib3hnbC1jdHJsXCIpO3ZhciBlPWkuY3JlYXRlKFwiYVwiLFwibWFwYm94Z2wtY3RybC1sb2dvXCIpO3JldHVybiBlLnRhcmdldD1cIl9ibGFua1wiLGUuaHJlZj1cImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vXCIsZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsXCJNYXBib3ggbG9nb1wiKSxlLnNldEF0dHJpYnV0ZShcInJlbFwiLFwibm9vcGVuZXJcIiksdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGUpLHRoaXMuX2NvbnRhaW5lci5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuX21hcC5vbihcInNvdXJjZWRhdGFcIix0aGlzLl91cGRhdGVMb2dvKSx0aGlzLl91cGRhdGVMb2dvKCksdGhpcy5fbWFwLm9uKFwicmVzaXplXCIsdGhpcy5fdXBkYXRlQ29tcGFjdCksdGhpcy5fdXBkYXRlQ29tcGFjdCgpLHRoaXMuX2NvbnRhaW5lcn0sWmkucHJvdG90eXBlLm9uUmVtb3ZlPWZ1bmN0aW9uKCl7aS5yZW1vdmUodGhpcy5fY29udGFpbmVyKSx0aGlzLl9tYXAub2ZmKFwic291cmNlZGF0YVwiLHRoaXMuX3VwZGF0ZUxvZ28pLHRoaXMuX21hcC5vZmYoXCJyZXNpemVcIix0aGlzLl91cGRhdGVDb21wYWN0KTt9LFppLnByb3RvdHlwZS5nZXREZWZhdWx0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm5cImJvdHRvbS1sZWZ0XCJ9LFppLnByb3RvdHlwZS5fdXBkYXRlTG9nbz1mdW5jdGlvbih0KXt0JiZcIm1ldGFkYXRhXCIhPT10LnNvdXJjZURhdGFUeXBlfHwodGhpcy5fY29udGFpbmVyLnN0eWxlLmRpc3BsYXk9dGhpcy5fbG9nb1JlcXVpcmVkKCk/XCJibG9ja1wiOlwibm9uZVwiKTt9LFppLnByb3RvdHlwZS5fbG9nb1JlcXVpcmVkPWZ1bmN0aW9uKCl7aWYodGhpcy5fbWFwLnN0eWxlKXt2YXIgdD10aGlzLl9tYXAuc3R5bGUuc291cmNlQ2FjaGVzO2Zvcih2YXIgZSBpbiB0KXtpZih0W2VdLmdldFNvdXJjZSgpLm1hcGJveF9sb2dvKXJldHVybiEwfXJldHVybiExfX0sWmkucHJvdG90eXBlLl91cGRhdGVDb21wYWN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29udGFpbmVyLmNoaWxkcmVuO2lmKHQubGVuZ3RoKXt2YXIgZT10WzBdO3RoaXMuX21hcC5nZXRDYW52YXNDb250YWluZXIoKS5vZmZzZXRXaWR0aDwyNTA/ZS5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY29tcGFjdFwiKTplLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jb21wYWN0XCIpO319O3ZhciBWaT1mdW5jdGlvbigpe3RoaXMuX3F1ZXVlPVtdLHRoaXMuX2lkPTAsdGhpcy5fY2xlYXJlZD0hMSx0aGlzLl9jdXJyZW50bHlSdW5uaW5nPSExO307VmkucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt2YXIgZT0rK3RoaXMuX2lkO3JldHVybiB0aGlzLl9xdWV1ZS5wdXNoKHtjYWxsYmFjazp0LGlkOmUsY2FuY2VsbGVkOiExfSksZX0sVmkucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5fY3VycmVudGx5UnVubmluZyxpPTAsbj1lP3RoaXMuX3F1ZXVlLmNvbmNhdChlKTp0aGlzLl9xdWV1ZTtpPG4ubGVuZ3RoO2krPTEpe3ZhciBvPW5baV07aWYoby5pZD09PXQpcmV0dXJuIHZvaWQoby5jYW5jZWxsZWQ9ITApfX0sVmkucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2N1cnJlbnRseVJ1bm5pbmc9dGhpcy5fcXVldWU7dGhpcy5fcXVldWU9W107Zm9yKHZhciBlPTAsaT10O2U8aS5sZW5ndGg7ZSs9MSl7dmFyIG49aVtlXTtpZighbi5jYW5jZWxsZWQmJihuLmNhbGxiYWNrKCksdGhpcy5fY2xlYXJlZCkpYnJlYWt9dGhpcy5fY2xlYXJlZD0hMSx0aGlzLl9jdXJyZW50bHlSdW5uaW5nPSExO30sVmkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudGx5UnVubmluZyYmKHRoaXMuX2NsZWFyZWQ9ITApLHRoaXMuX3F1ZXVlPVtdO307dmFyIGppPXQuZGVmYXVsdCQxLkhUTUxJbWFnZUVsZW1lbnQsR2k9dC5kZWZhdWx0JDEuSFRNTEVsZW1lbnQsV2k9e2NlbnRlcjpbMCwwXSx6b29tOjAsYmVhcmluZzowLHBpdGNoOjAsbWluWm9vbTowLG1heFpvb206MjIsaW50ZXJhY3RpdmU6ITAsc2Nyb2xsWm9vbTohMCxib3hab29tOiEwLGRyYWdSb3RhdGU6ITAsZHJhZ1BhbjohMCxrZXlib2FyZDohMCxkb3VibGVDbGlja1pvb206ITAsdG91Y2hab29tUm90YXRlOiEwLGJlYXJpbmdTbmFwOjcsaGFzaDohMSxhdHRyaWJ1dGlvbkNvbnRyb2w6ITAsZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDohMSxwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6ITEsdHJhY2tSZXNpemU6ITAscmVuZGVyV29ybGRDb3BpZXM6ITAscmVmcmVzaEV4cGlyZWRUaWxlczohMCxtYXhUaWxlQ2FjaGVTaXplOm51bGwsdHJhbnNmb3JtUmVxdWVzdDpudWxsLGZhZGVEdXJhdGlvbjozMDAsY3Jvc3NTb3VyY2VDb2xsaXNpb25zOiEwfSxxaT1mdW5jdGlvbihuKXtmdW5jdGlvbiBvKGUpe2lmKG51bGwhPShlPXQuZXh0ZW5kKHt9LFdpLGUpKS5taW5ab29tJiZudWxsIT1lLm1heFpvb20mJmUubWluWm9vbT5lLm1heFpvb20pdGhyb3cgbmV3IEVycm9yKFwibWF4Wm9vbSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBtaW5ab29tXCIpO3ZhciBvPW5ldyB3aShlLm1pblpvb20sZS5tYXhab29tLGUucmVuZGVyV29ybGRDb3BpZXMpO24uY2FsbCh0aGlzLG8sZSksdGhpcy5faW50ZXJhY3RpdmU9ZS5pbnRlcmFjdGl2ZSx0aGlzLl9tYXhUaWxlQ2FjaGVTaXplPWUubWF4VGlsZUNhY2hlU2l6ZSx0aGlzLl9mYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0PWUuZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdCx0aGlzLl9wcmVzZXJ2ZURyYXdpbmdCdWZmZXI9ZS5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIsdGhpcy5fdHJhY2tSZXNpemU9ZS50cmFja1Jlc2l6ZSx0aGlzLl9iZWFyaW5nU25hcD1lLmJlYXJpbmdTbmFwLHRoaXMuX3JlZnJlc2hFeHBpcmVkVGlsZXM9ZS5yZWZyZXNoRXhwaXJlZFRpbGVzLHRoaXMuX2ZhZGVEdXJhdGlvbj1lLmZhZGVEdXJhdGlvbix0aGlzLl9jcm9zc1NvdXJjZUNvbGxpc2lvbnM9ZS5jcm9zc1NvdXJjZUNvbGxpc2lvbnMsdGhpcy5fY3Jvc3NGYWRpbmdGYWN0b3I9MSx0aGlzLl9jb2xsZWN0UmVzb3VyY2VUaW1pbmc9ZS5jb2xsZWN0UmVzb3VyY2VUaW1pbmcsdGhpcy5fcmVuZGVyVGFza1F1ZXVlPW5ldyBWaTt2YXIgcj1lLnRyYW5zZm9ybVJlcXVlc3Q7aWYodGhpcy5fdHJhbnNmb3JtUmVxdWVzdD1yP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIHIodCxlKXx8e3VybDp0fX06ZnVuY3Rpb24odCl7cmV0dXJue3VybDp0fX0sXCJzdHJpbmdcIj09dHlwZW9mIGUuY29udGFpbmVyKXt2YXIgYT10LmRlZmF1bHQkMS5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLmNvbnRhaW5lcik7aWYoIWEpdGhyb3cgbmV3IEVycm9yKFwiQ29udGFpbmVyICdcIitlLmNvbnRhaW5lcitcIicgbm90IGZvdW5kLlwiKTt0aGlzLl9jb250YWluZXI9YTt9ZWxzZXtpZighKGUuY29udGFpbmVyIGluc3RhbmNlb2YgR2kpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdHlwZTogJ2NvbnRhaW5lcicgbXVzdCBiZSBhIFN0cmluZyBvciBIVE1MRWxlbWVudC5cIik7dGhpcy5fY29udGFpbmVyPWUuY29udGFpbmVyO31pZihlLm1heEJvdW5kcyYmdGhpcy5zZXRNYXhCb3VuZHMoZS5tYXhCb3VuZHMpLHQuYmluZEFsbChbXCJfb25XaW5kb3dPbmxpbmVcIixcIl9vbldpbmRvd1Jlc2l6ZVwiLFwiX2NvbnRleHRMb3N0XCIsXCJfY29udGV4dFJlc3RvcmVkXCIsXCJfdXBkYXRlXCIsXCJfcmVuZGVyXCIsXCJfb25EYXRhXCIsXCJfb25EYXRhTG9hZGluZ1wiXSx0aGlzKSx0aGlzLl9zZXR1cENvbnRhaW5lcigpLHRoaXMuX3NldHVwUGFpbnRlcigpLHZvaWQgMD09PXRoaXMucGFpbnRlcil0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBXZWJHTC5cIik7dGhpcy5vbihcIm1vdmVcIix0aGlzLl91cGRhdGUuYmluZCh0aGlzLCExKSksdGhpcy5vbihcInpvb21cIix0aGlzLl91cGRhdGUuYmluZCh0aGlzLCEwKSksdm9pZCAwIT09dC5kZWZhdWx0JDEmJih0LmRlZmF1bHQkMS5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsdGhpcy5fb25XaW5kb3dPbmxpbmUsITEpLHQuZGVmYXVsdCQxLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9vbldpbmRvd1Jlc2l6ZSwhMSkpLGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nZXRDYW52YXNDb250YWluZXIoKSxvPW51bGwscj0hMSxhPW51bGw7Zm9yKHZhciBzIGluIE5pKXRbc109bmV3IE5pW3NdKHQsZSksZS5pbnRlcmFjdGl2ZSYmZVtzXSYmdFtzXS5lbmFibGUoZVtzXSk7aS5hZGRFdmVudExpc3RlbmVyKG4sXCJtb3VzZW91dFwiLGZ1bmN0aW9uKGUpe3QuZmlyZShuZXcgSWkoXCJtb3VzZW91dFwiLHQsZSkpO30pLGkuYWRkRXZlbnRMaXN0ZW5lcihuLFwibW91c2Vkb3duXCIsZnVuY3Rpb24obyl7cj0hMCxhPWkubW91c2VQb3MobixvKTt2YXIgcz1uZXcgSWkoXCJtb3VzZWRvd25cIix0LG8pO3QuZmlyZShzKSxzLmRlZmF1bHRQcmV2ZW50ZWR8fChlLmludGVyYWN0aXZlJiYhdC5kb3VibGVDbGlja1pvb20uaXNBY3RpdmUoKSYmdC5zdG9wKCksdC5ib3hab29tLm9uTW91c2VEb3duKG8pLHQuYm94Wm9vbS5pc0FjdGl2ZSgpfHx0LmRyYWdQYW4uaXNBY3RpdmUoKXx8dC5kcmFnUm90YXRlLm9uTW91c2VEb3duKG8pLHQuYm94Wm9vbS5pc0FjdGl2ZSgpfHx0LmRyYWdSb3RhdGUuaXNBY3RpdmUoKXx8dC5kcmFnUGFuLm9uTW91c2VEb3duKG8pKTt9KSxpLmFkZEV2ZW50TGlzdGVuZXIobixcIm1vdXNldXBcIixmdW5jdGlvbihlKXt2YXIgaT10LmRyYWdSb3RhdGUuaXNBY3RpdmUoKTtvJiYhaSYmdC5maXJlKG5ldyBJaShcImNvbnRleHRtZW51XCIsdCxvKSksbz1udWxsLHI9ITEsdC5maXJlKG5ldyBJaShcIm1vdXNldXBcIix0LGUpKTt9KSxpLmFkZEV2ZW50TGlzdGVuZXIobixcIm1vdXNlbW92ZVwiLGZ1bmN0aW9uKGUpe2lmKCF0LmRyYWdQYW4uaXNBY3RpdmUoKSYmIXQuZHJhZ1JvdGF0ZS5pc0FjdGl2ZSgpKXtmb3IodmFyIGk9ZS50YXJnZXQ7aSYmaSE9PW47KWk9aS5wYXJlbnROb2RlO2k9PT1uJiZ0LmZpcmUobmV3IElpKFwibW91c2Vtb3ZlXCIsdCxlKSk7fX0pLGkuYWRkRXZlbnRMaXN0ZW5lcihuLFwibW91c2VvdmVyXCIsZnVuY3Rpb24oZSl7Zm9yKHZhciBpPWUudGFyZ2V0O2kmJmkhPT1uOylpPWkucGFyZW50Tm9kZTtpPT09biYmdC5maXJlKG5ldyBJaShcIm1vdXNlb3ZlclwiLHQsZSkpO30pLGkuYWRkRXZlbnRMaXN0ZW5lcihuLFwidG91Y2hzdGFydFwiLGZ1bmN0aW9uKGkpe3ZhciBuPW5ldyBDaShcInRvdWNoc3RhcnRcIix0LGkpO3QuZmlyZShuKSxuLmRlZmF1bHRQcmV2ZW50ZWR8fChlLmludGVyYWN0aXZlJiZ0LnN0b3AoKSx0LmJveFpvb20uaXNBY3RpdmUoKXx8dC5kcmFnUm90YXRlLmlzQWN0aXZlKCl8fHQuZHJhZ1Bhbi5vblRvdWNoU3RhcnQoaSksdC50b3VjaFpvb21Sb3RhdGUub25TdGFydChpKSx0LmRvdWJsZUNsaWNrWm9vbS5vblRvdWNoU3RhcnQobikpO30se3Bhc3NpdmU6ITF9KSxpLmFkZEV2ZW50TGlzdGVuZXIobixcInRvdWNobW92ZVwiLGZ1bmN0aW9uKGUpe3QuZmlyZShuZXcgQ2koXCJ0b3VjaG1vdmVcIix0LGUpKTt9LHtwYXNzaXZlOiExfSksaS5hZGRFdmVudExpc3RlbmVyKG4sXCJ0b3VjaGVuZFwiLGZ1bmN0aW9uKGUpe3QuZmlyZShuZXcgQ2koXCJ0b3VjaGVuZFwiLHQsZSkpO30pLGkuYWRkRXZlbnRMaXN0ZW5lcihuLFwidG91Y2hjYW5jZWxcIixmdW5jdGlvbihlKXt0LmZpcmUobmV3IENpKFwidG91Y2hjYW5jZWxcIix0LGUpKTt9KSxpLmFkZEV2ZW50TGlzdGVuZXIobixcImNsaWNrXCIsZnVuY3Rpb24oZSl7aS5tb3VzZVBvcyhuLGUpLmVxdWFscyhhKSYmdC5maXJlKG5ldyBJaShcImNsaWNrXCIsdCxlKSk7fSksaS5hZGRFdmVudExpc3RlbmVyKG4sXCJkYmxjbGlja1wiLGZ1bmN0aW9uKGUpe3ZhciBpPW5ldyBJaShcImRibGNsaWNrXCIsdCxlKTt0LmZpcmUoaSksaS5kZWZhdWx0UHJldmVudGVkfHx0LmRvdWJsZUNsaWNrWm9vbS5vbkRibENsaWNrKGkpO30pLGkuYWRkRXZlbnRMaXN0ZW5lcihuLFwiY29udGV4dG1lbnVcIixmdW5jdGlvbihlKXt2YXIgaT10LmRyYWdSb3RhdGUuaXNBY3RpdmUoKTtyfHxpP3ImJihvPWUpOnQuZmlyZShuZXcgSWkoXCJjb250ZXh0bWVudVwiLHQsZSkpLGUucHJldmVudERlZmF1bHQoKTt9KSxpLmFkZEV2ZW50TGlzdGVuZXIobixcIndoZWVsXCIsZnVuY3Rpb24oZSl7dmFyIGk9bmV3IFNpKFwid2hlZWxcIix0LGUpO3QuZmlyZShpKSxpLmRlZmF1bHRQcmV2ZW50ZWR8fHQuc2Nyb2xsWm9vbS5vbldoZWVsKGUpO30se3Bhc3NpdmU6ITF9KTt9KHRoaXMsZSksdGhpcy5faGFzaD1lLmhhc2gmJihuZXcgVGkpLmFkZFRvKHRoaXMpLHRoaXMuX2hhc2gmJnRoaXMuX2hhc2guX29uSGFzaENoYW5nZSgpfHx0aGlzLmp1bXBUbyh7Y2VudGVyOmUuY2VudGVyLHpvb206ZS56b29tLGJlYXJpbmc6ZS5iZWFyaW5nLHBpdGNoOmUucGl0Y2h9KSx0aGlzLnJlc2l6ZSgpLGUuc3R5bGUmJnRoaXMuc2V0U3R5bGUoZS5zdHlsZSx7bG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5OmUubG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5fSksZS5hdHRyaWJ1dGlvbkNvbnRyb2wmJnRoaXMuYWRkQ29udHJvbChuZXcgVWkpLHRoaXMuYWRkQ29udHJvbChuZXcgWmksZS5sb2dvUG9zaXRpb24pLHRoaXMub24oXCJzdHlsZS5sb2FkXCIsZnVuY3Rpb24oKXt0aGlzLnRyYW5zZm9ybS51bm1vZGlmaWVkJiZ0aGlzLmp1bXBUbyh0aGlzLnN0eWxlLnN0eWxlc2hlZXQpO30pLHRoaXMub24oXCJkYXRhXCIsdGhpcy5fb25EYXRhKSx0aGlzLm9uKFwiZGF0YWxvYWRpbmdcIix0aGlzLl9vbkRhdGFMb2FkaW5nKTt9biYmKG8uX19wcm90b19fPW4pLG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobiYmbi5wcm90b3R5cGUpLG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW87dmFyIHI9e3Nob3dUaWxlQm91bmRhcmllczp7Y29uZmlndXJhYmxlOiEwfSxzaG93Q29sbGlzaW9uQm94ZXM6e2NvbmZpZ3VyYWJsZTohMH0sc2hvd092ZXJkcmF3SW5zcGVjdG9yOntjb25maWd1cmFibGU6ITB9LHJlcGFpbnQ6e2NvbmZpZ3VyYWJsZTohMH0sdmVydGljZXM6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBvLnByb3RvdHlwZS5hZGRDb250cm9sPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmdC5nZXREZWZhdWx0UG9zaXRpb24mJihlPXQuZ2V0RGVmYXVsdFBvc2l0aW9uKCkpLHZvaWQgMD09PWUmJihlPVwidG9wLXJpZ2h0XCIpO3ZhciBpPXQub25BZGQodGhpcyksbj10aGlzLl9jb250cm9sUG9zaXRpb25zW2VdO3JldHVybi0xIT09ZS5pbmRleE9mKFwiYm90dG9tXCIpP24uaW5zZXJ0QmVmb3JlKGksbi5maXJzdENoaWxkKTpuLmFwcGVuZENoaWxkKGkpLHRoaXN9LG8ucHJvdG90eXBlLnJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHQub25SZW1vdmUodGhpcyksdGhpc30sby5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX2NvbnRhaW5lckRpbWVuc2lvbnMoKSxuPWlbMF0sbz1pWzFdO3JldHVybiB0aGlzLl9yZXNpemVDYW52YXMobixvKSx0aGlzLnRyYW5zZm9ybS5yZXNpemUobixvKSx0aGlzLnBhaW50ZXIucmVzaXplKG4sbyksdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwibW92ZXN0YXJ0XCIsZSkpLmZpcmUobmV3IHQuRXZlbnQoXCJtb3ZlXCIsZSkpLmZpcmUobmV3IHQuRXZlbnQoXCJyZXNpemVcIixlKSkuZmlyZShuZXcgdC5FdmVudChcIm1vdmVlbmRcIixlKSl9LG8ucHJvdG90eXBlLmdldEJvdW5kcz1mdW5jdGlvbigpe3ZhciBlPW5ldyBPKHRoaXMudHJhbnNmb3JtLnBvaW50TG9jYXRpb24obmV3IHQuZGVmYXVsdCgwLHRoaXMudHJhbnNmb3JtLmhlaWdodCkpLHRoaXMudHJhbnNmb3JtLnBvaW50TG9jYXRpb24obmV3IHQuZGVmYXVsdCh0aGlzLnRyYW5zZm9ybS53aWR0aCwwKSkpO3JldHVybih0aGlzLnRyYW5zZm9ybS5hbmdsZXx8dGhpcy50cmFuc2Zvcm0ucGl0Y2gpJiYoZS5leHRlbmQodGhpcy50cmFuc2Zvcm0ucG9pbnRMb2NhdGlvbihuZXcgdC5kZWZhdWx0KHRoaXMudHJhbnNmb3JtLnNpemUueCwwKSkpLGUuZXh0ZW5kKHRoaXMudHJhbnNmb3JtLnBvaW50TG9jYXRpb24obmV3IHQuZGVmYXVsdCgwLHRoaXMudHJhbnNmb3JtLnNpemUueSkpKSksZX0sby5wcm90b3R5cGUuZ2V0TWF4Qm91bmRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLmxhdFJhbmdlJiYyPT09dGhpcy50cmFuc2Zvcm0ubGF0UmFuZ2UubGVuZ3RoJiZ0aGlzLnRyYW5zZm9ybS5sbmdSYW5nZSYmMj09PXRoaXMudHJhbnNmb3JtLmxuZ1JhbmdlLmxlbmd0aD9uZXcgTyhbdGhpcy50cmFuc2Zvcm0ubG5nUmFuZ2VbMF0sdGhpcy50cmFuc2Zvcm0ubGF0UmFuZ2VbMF1dLFt0aGlzLnRyYW5zZm9ybS5sbmdSYW5nZVsxXSx0aGlzLnRyYW5zZm9ybS5sYXRSYW5nZVsxXV0pOm51bGx9LG8ucHJvdG90eXBlLnNldE1heEJvdW5kcz1mdW5jdGlvbih0KXtpZih0KXt2YXIgZT1PLmNvbnZlcnQodCk7dGhpcy50cmFuc2Zvcm0ubG5nUmFuZ2U9W2UuZ2V0V2VzdCgpLGUuZ2V0RWFzdCgpXSx0aGlzLnRyYW5zZm9ybS5sYXRSYW5nZT1bZS5nZXRTb3V0aCgpLGUuZ2V0Tm9ydGgoKV0sdGhpcy50cmFuc2Zvcm0uX2NvbnN0cmFpbigpLHRoaXMuX3VwZGF0ZSgpO31lbHNlIG51bGw9PXQmJih0aGlzLnRyYW5zZm9ybS5sbmdSYW5nZT1udWxsLHRoaXMudHJhbnNmb3JtLmxhdFJhbmdlPW51bGwsdGhpcy5fdXBkYXRlKCkpO3JldHVybiB0aGlzfSxvLnByb3RvdHlwZS5zZXRNaW5ab29tPWZ1bmN0aW9uKHQpe2lmKCh0PW51bGw9PXQ/MDp0KT49MCYmdDw9dGhpcy50cmFuc2Zvcm0ubWF4Wm9vbSlyZXR1cm4gdGhpcy50cmFuc2Zvcm0ubWluWm9vbT10LHRoaXMuX3VwZGF0ZSgpLHRoaXMuZ2V0Wm9vbSgpPHQmJnRoaXMuc2V0Wm9vbSh0KSx0aGlzO3Rocm93IG5ldyBFcnJvcihcIm1pblpvb20gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIHRoZSBjdXJyZW50IG1heFpvb20sIGluY2x1c2l2ZVwiKX0sby5wcm90b3R5cGUuZ2V0TWluWm9vbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5taW5ab29tfSxvLnByb3RvdHlwZS5zZXRNYXhab29tPWZ1bmN0aW9uKHQpe2lmKCh0PW51bGw9PXQ/MjI6dCk+PXRoaXMudHJhbnNmb3JtLm1pblpvb20pcmV0dXJuIHRoaXMudHJhbnNmb3JtLm1heFpvb209dCx0aGlzLl91cGRhdGUoKSx0aGlzLmdldFpvb20oKT50JiZ0aGlzLnNldFpvb20odCksdGhpczt0aHJvdyBuZXcgRXJyb3IoXCJtYXhab29tIG11c3QgYmUgZ3JlYXRlciB0aGFuIHRoZSBjdXJyZW50IG1pblpvb21cIil9LG8ucHJvdG90eXBlLmdldFJlbmRlcldvcmxkQ29waWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLnJlbmRlcldvcmxkQ29waWVzfSxvLnByb3RvdHlwZS5zZXRSZW5kZXJXb3JsZENvcGllcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50cmFuc2Zvcm0ucmVuZGVyV29ybGRDb3BpZXM9dCx0aGlzLl91cGRhdGUoKSx0aGlzfSxvLnByb3RvdHlwZS5nZXRNYXhab29tPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLm1heFpvb219LG8ucHJvdG90eXBlLnByb2plY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLmxvY2F0aW9uUG9pbnQoQi5jb252ZXJ0KHQpKX0sby5wcm90b3R5cGUudW5wcm9qZWN0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5wb2ludExvY2F0aW9uKHQuZGVmYXVsdC5jb252ZXJ0KGUpKX0sby5wcm90b3R5cGUuaXNNb3Zpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW92aW5nfHx0aGlzLmRyYWdQYW4uaXNBY3RpdmUoKXx8dGhpcy5kcmFnUm90YXRlLmlzQWN0aXZlKCl8fHRoaXMuc2Nyb2xsWm9vbS5pc0FjdGl2ZSgpfSxvLnByb3RvdHlwZS5pc1pvb21pbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fem9vbWluZ3x8dGhpcy5zY3JvbGxab29tLmlzQWN0aXZlKCl9LG8ucHJvdG90eXBlLmlzUm90YXRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm90YXRpbmd8fHRoaXMuZHJhZ1JvdGF0ZS5pc0FjdGl2ZSgpfSxvLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGUsaSl7dmFyIG8scj10aGlzO2lmKHZvaWQgMD09PWkpcmV0dXJuIG4ucHJvdG90eXBlLm9uLmNhbGwodGhpcyx0LGUpO3ZhciBhPWZ1bmN0aW9uKCl7aWYoXCJtb3VzZWVudGVyXCI9PT10fHxcIm1vdXNlb3ZlclwiPT09dCl7dmFyIG49ITE7cmV0dXJue2xheWVyOmUsbGlzdGVuZXI6aSxkZWxlZ2F0ZXM6e21vdXNlbW92ZTpmdW5jdGlvbihvKXt2YXIgYT1yLmdldExheWVyKGUpP3IucXVlcnlSZW5kZXJlZEZlYXR1cmVzKG8ucG9pbnQse2xheWVyczpbZV19KTpbXTthLmxlbmd0aD9ufHwobj0hMCxpLmNhbGwocixuZXcgSWkodCxyLG8ub3JpZ2luYWxFdmVudCx7ZmVhdHVyZXM6YX0pKSk6bj0hMTt9LG1vdXNlb3V0OmZ1bmN0aW9uKCl7bj0hMTt9fX19aWYoXCJtb3VzZWxlYXZlXCI9PT10fHxcIm1vdXNlb3V0XCI9PT10KXt2YXIgYT0hMTtyZXR1cm57bGF5ZXI6ZSxsaXN0ZW5lcjppLGRlbGVnYXRlczp7bW91c2Vtb3ZlOmZ1bmN0aW9uKG4peyhyLmdldExheWVyKGUpP3IucXVlcnlSZW5kZXJlZEZlYXR1cmVzKG4ucG9pbnQse2xheWVyczpbZV19KTpbXSkubGVuZ3RoP2E9ITA6YSYmKGE9ITEsaS5jYWxsKHIsbmV3IElpKHQscixuLm9yaWdpbmFsRXZlbnQpKSk7fSxtb3VzZW91dDpmdW5jdGlvbihlKXthJiYoYT0hMSxpLmNhbGwocixuZXcgSWkodCxyLGUub3JpZ2luYWxFdmVudCkpKTt9fX19cmV0dXJue2xheWVyOmUsbGlzdGVuZXI6aSxkZWxlZ2F0ZXM6KG89e30sb1t0XT1mdW5jdGlvbih0KXt2YXIgbj1yLmdldExheWVyKGUpP3IucXVlcnlSZW5kZXJlZEZlYXR1cmVzKHQucG9pbnQse2xheWVyczpbZV19KTpbXTtuLmxlbmd0aCYmKHQuZmVhdHVyZXM9bixpLmNhbGwocix0KSxkZWxldGUgdC5mZWF0dXJlcyk7fSxvKX19KCk7Zm9yKHZhciBzIGluIHRoaXMuX2RlbGVnYXRlZExpc3RlbmVycz10aGlzLl9kZWxlZ2F0ZWRMaXN0ZW5lcnN8fHt9LHRoaXMuX2RlbGVnYXRlZExpc3RlbmVyc1t0XT10aGlzLl9kZWxlZ2F0ZWRMaXN0ZW5lcnNbdF18fFtdLHRoaXMuX2RlbGVnYXRlZExpc3RlbmVyc1t0XS5wdXNoKGEpLGEuZGVsZWdhdGVzKXIub24ocyxhLmRlbGVnYXRlc1tzXSk7cmV0dXJuIHRoaXN9LG8ucHJvdG90eXBlLm9mZj1mdW5jdGlvbih0LGUsaSl7aWYodm9pZCAwPT09aSlyZXR1cm4gbi5wcm90b3R5cGUub2ZmLmNhbGwodGhpcyx0LGUpO2lmKHRoaXMuX2RlbGVnYXRlZExpc3RlbmVycyYmdGhpcy5fZGVsZWdhdGVkTGlzdGVuZXJzW3RdKWZvcih2YXIgbz10aGlzLl9kZWxlZ2F0ZWRMaXN0ZW5lcnNbdF0scj0wO3I8by5sZW5ndGg7cisrKXt2YXIgYT1vW3JdO2lmKGEubGF5ZXI9PT1lJiZhLmxpc3RlbmVyPT09aSl7Zm9yKHZhciBzIGluIGEuZGVsZWdhdGVzKXRoaXMub2ZmKHMsYS5kZWxlZ2F0ZXNbc10pO3JldHVybiBvLnNwbGljZShyLDEpLHRoaXN9fXJldHVybiB0aGlzfSxvLnByb3RvdHlwZS5xdWVyeVJlbmRlcmVkRmVhdHVyZXM9ZnVuY3Rpb24oZSxpKXt2YXIgbjtyZXR1cm4gMj09PWFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdKToxPT09YXJndW1lbnRzLmxlbmd0aCYmKChuPWFyZ3VtZW50c1swXSlpbnN0YW5jZW9mIHQuZGVmYXVsdHx8QXJyYXkuaXNBcnJheShuKSk/KGU9YXJndW1lbnRzWzBdLGk9e30pOjE9PT1hcmd1bWVudHMubGVuZ3RoPyhlPXZvaWQgMCxpPWFyZ3VtZW50c1swXSk6KGU9dm9pZCAwLGk9e30pLHRoaXMuc3R5bGU/dGhpcy5zdHlsZS5xdWVyeVJlbmRlcmVkRmVhdHVyZXModGhpcy5fbWFrZVF1ZXJ5R2VvbWV0cnkoZSksaSx0aGlzLnRyYW5zZm9ybSk6W119LG8ucHJvdG90eXBlLl9tYWtlUXVlcnlHZW9tZXRyeT1mdW5jdGlvbihlKXt2YXIgaSxuPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9W3QuZGVmYXVsdC5jb252ZXJ0KFswLDBdKSx0LmRlZmF1bHQuY29udmVydChbdGhpcy50cmFuc2Zvcm0ud2lkdGgsdGhpcy50cmFuc2Zvcm0uaGVpZ2h0XSldKSxlIGluc3RhbmNlb2YgdC5kZWZhdWx0fHxcIm51bWJlclwiPT10eXBlb2YgZVswXSl7aT1bdC5kZWZhdWx0LmNvbnZlcnQoZSldO31lbHNle3ZhciBvPVt0LmRlZmF1bHQuY29udmVydChlWzBdKSx0LmRlZmF1bHQuY29udmVydChlWzFdKV07aT1bb1swXSxuZXcgdC5kZWZhdWx0KG9bMV0ueCxvWzBdLnkpLG9bMV0sbmV3IHQuZGVmYXVsdChvWzBdLngsb1sxXS55KSxvWzBdXTt9cmV0dXJue3ZpZXdwb3J0Omksd29ybGRDb29yZGluYXRlOmkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuLnRyYW5zZm9ybS5wb2ludENvb3JkaW5hdGUodCl9KX19LG8ucHJvdG90eXBlLnF1ZXJ5U291cmNlRmVhdHVyZXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zdHlsZS5xdWVyeVNvdXJjZUZlYXR1cmVzKHQsZSl9LG8ucHJvdG90eXBlLnNldFN0eWxlPWZ1bmN0aW9uKGUsaSl7aWYoKCFpfHwhMSE9PWkuZGlmZiYmIWkubG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5KSYmdGhpcy5zdHlsZSYmZSYmXCJvYmplY3RcIj09dHlwZW9mIGUpdHJ5e3JldHVybiB0aGlzLnN0eWxlLnNldFN0YXRlKGUpJiZ0aGlzLl91cGRhdGUoITApLHRoaXN9Y2F0Y2goZSl7dC53YXJuT25jZShcIlVuYWJsZSB0byBwZXJmb3JtIHN0eWxlIGRpZmY6IFwiKyhlLm1lc3NhZ2V8fGUuZXJyb3J8fGUpK1wiLiAgUmVidWlsZGluZyB0aGUgc3R5bGUgZnJvbSBzY3JhdGNoLlwiKTt9cmV0dXJuIHRoaXMuc3R5bGUmJih0aGlzLnN0eWxlLnNldEV2ZW50ZWRQYXJlbnQobnVsbCksdGhpcy5zdHlsZS5fcmVtb3ZlKCkpLGU/KHRoaXMuc3R5bGU9bmV3IFVlKHRoaXMsaXx8e30pLHRoaXMuc3R5bGUuc2V0RXZlbnRlZFBhcmVudCh0aGlzLHtzdHlsZTp0aGlzLnN0eWxlfSksXCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5zdHlsZS5sb2FkVVJMKGUpOnRoaXMuc3R5bGUubG9hZEpTT04oZSksdGhpcyk6KGRlbGV0ZSB0aGlzLnN0eWxlLHRoaXMpfSxvLnByb3RvdHlwZS5nZXRTdHlsZT1mdW5jdGlvbigpe2lmKHRoaXMuc3R5bGUpcmV0dXJuIHRoaXMuc3R5bGUuc2VyaWFsaXplKCl9LG8ucHJvdG90eXBlLmlzU3R5bGVMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHlsZT90aGlzLnN0eWxlLmxvYWRlZCgpOnQud2Fybk9uY2UoXCJUaGVyZSBpcyBubyBzdHlsZSBhZGRlZCB0byB0aGUgbWFwLlwiKX0sby5wcm90b3R5cGUuYWRkU291cmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3R5bGUuYWRkU291cmNlKHQsZSksdGhpcy5fdXBkYXRlKCEwKSx0aGlzfSxvLnByb3RvdHlwZS5pc1NvdXJjZUxvYWRlZD1mdW5jdGlvbihlKXt2YXIgaT10aGlzLnN0eWxlJiZ0aGlzLnN0eWxlLnNvdXJjZUNhY2hlc1tlXTtpZih2b2lkIDAhPT1pKXJldHVybiBpLmxvYWRlZCgpO3RoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHNvdXJjZSB3aXRoIElEICdcIitlK1wiJ1wiKSkpO30sby5wcm90b3R5cGUuYXJlVGlsZXNMb2FkZWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnN0eWxlJiZ0aGlzLnN0eWxlLnNvdXJjZUNhY2hlcztmb3IodmFyIGUgaW4gdCl7dmFyIGk9dFtlXS5fdGlsZXM7Zm9yKHZhciBuIGluIGkpe3ZhciBvPWlbbl07aWYoXCJsb2FkZWRcIiE9PW8uc3RhdGUmJlwiZXJyb3JlZFwiIT09by5zdGF0ZSlyZXR1cm4hMX19cmV0dXJuITB9LG8ucHJvdG90eXBlLmFkZFNvdXJjZVR5cGU9ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLnN0eWxlLmFkZFNvdXJjZVR5cGUodCxlLGkpfSxvLnByb3RvdHlwZS5yZW1vdmVTb3VyY2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3R5bGUucmVtb3ZlU291cmNlKHQpLHRoaXMuX3VwZGF0ZSghMCksdGhpc30sby5wcm90b3R5cGUuZ2V0U291cmNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0eWxlLmdldFNvdXJjZSh0KX0sby5wcm90b3R5cGUuYWRkSW1hZ2U9ZnVuY3Rpb24oZSxpLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgbz1uLnBpeGVsUmF0aW87dm9pZCAwPT09byYmKG89MSk7dmFyIHI9bi5zZGY7aWYodm9pZCAwPT09ciYmKHI9ITEpLGkgaW5zdGFuY2VvZiBqaSl7dmFyIGE9dC5kZWZhdWx0JDIuZ2V0SW1hZ2VEYXRhKGkpLHM9YS53aWR0aCxsPWEuaGVpZ2h0LGM9YS5kYXRhO3RoaXMuc3R5bGUuYWRkSW1hZ2UoZSx7ZGF0YTpuZXcgdC5SR0JBSW1hZ2Uoe3dpZHRoOnMsaGVpZ2h0Omx9LGMpLHBpeGVsUmF0aW86byxzZGY6cn0pO31lbHNle2lmKHZvaWQgMD09PWkud2lkdGh8fHZvaWQgMD09PWkuaGVpZ2h0KXJldHVybiB0aGlzLmZpcmUobmV3IHQuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50cyB0byBtYXAuYWRkSW1hZ2UoKS4gVGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGFuIGBIVE1MSW1hZ2VFbGVtZW50YCwgYEltYWdlRGF0YWAsIG9yIG9iamVjdCB3aXRoIGB3aWR0aGAsIGBoZWlnaHRgLCBhbmQgYGRhdGFgIHByb3BlcnRpZXMgd2l0aCB0aGUgc2FtZSBmb3JtYXQgYXMgYEltYWdlRGF0YWBcIikpKTt2YXIgdT1pLndpZHRoLGg9aS5oZWlnaHQscD1pLmRhdGE7dGhpcy5zdHlsZS5hZGRJbWFnZShlLHtkYXRhOm5ldyB0LlJHQkFJbWFnZSh7d2lkdGg6dSxoZWlnaHQ6aH0sbmV3IFVpbnQ4QXJyYXkocCkpLHBpeGVsUmF0aW86byxzZGY6cn0pO319LG8ucHJvdG90eXBlLmhhc0ltYWdlPWZ1bmN0aW9uKGUpe3JldHVybiBlPyEhdGhpcy5zdHlsZS5nZXRJbWFnZShlKToodGhpcy5maXJlKG5ldyB0LkVycm9yRXZlbnQobmV3IEVycm9yKFwiTWlzc2luZyByZXF1aXJlZCBpbWFnZSBpZFwiKSkpLCExKX0sby5wcm90b3R5cGUucmVtb3ZlSW1hZ2U9ZnVuY3Rpb24odCl7dGhpcy5zdHlsZS5yZW1vdmVJbWFnZSh0KTt9LG8ucHJvdG90eXBlLmxvYWRJbWFnZT1mdW5jdGlvbihlLGkpe3QuZ2V0SW1hZ2UodGhpcy5fdHJhbnNmb3JtUmVxdWVzdChlLHQuUmVzb3VyY2VUeXBlLkltYWdlKSxpKTt9LG8ucHJvdG90eXBlLmxpc3RJbWFnZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHlsZS5saXN0SW1hZ2VzKCl9LG8ucHJvdG90eXBlLmFkZExheWVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3R5bGUuYWRkTGF5ZXIodCxlKSx0aGlzLl91cGRhdGUoITApLHRoaXN9LG8ucHJvdG90eXBlLm1vdmVMYXllcj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnN0eWxlLm1vdmVMYXllcih0LGUpLHRoaXMuX3VwZGF0ZSghMCksdGhpc30sby5wcm90b3R5cGUucmVtb3ZlTGF5ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3R5bGUucmVtb3ZlTGF5ZXIodCksdGhpcy5fdXBkYXRlKCEwKSx0aGlzfSxvLnByb3RvdHlwZS5nZXRMYXllcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdHlsZS5nZXRMYXllcih0KX0sby5wcm90b3R5cGUuc2V0RmlsdGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3R5bGUuc2V0RmlsdGVyKHQsZSksdGhpcy5fdXBkYXRlKCEwKSx0aGlzfSxvLnByb3RvdHlwZS5zZXRMYXllclpvb21SYW5nZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMuc3R5bGUuc2V0TGF5ZXJab29tUmFuZ2UodCxlLGkpLHRoaXMuX3VwZGF0ZSghMCksdGhpc30sby5wcm90b3R5cGUuZ2V0RmlsdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0eWxlLmdldEZpbHRlcih0KX0sby5wcm90b3R5cGUuc2V0UGFpbnRQcm9wZXJ0eT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMuc3R5bGUuc2V0UGFpbnRQcm9wZXJ0eSh0LGUsaSksdGhpcy5fdXBkYXRlKCEwKSx0aGlzfSxvLnByb3RvdHlwZS5nZXRQYWludFByb3BlcnR5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3R5bGUuZ2V0UGFpbnRQcm9wZXJ0eSh0LGUpfSxvLnByb3RvdHlwZS5zZXRMYXlvdXRQcm9wZXJ0eT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMuc3R5bGUuc2V0TGF5b3V0UHJvcGVydHkodCxlLGkpLHRoaXMuX3VwZGF0ZSghMCksdGhpc30sby5wcm90b3R5cGUuZ2V0TGF5b3V0UHJvcGVydHk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zdHlsZS5nZXRMYXlvdXRQcm9wZXJ0eSh0LGUpfSxvLnByb3RvdHlwZS5zZXRMaWdodD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdHlsZS5zZXRMaWdodCh0KSx0aGlzLl91cGRhdGUoITApLHRoaXN9LG8ucHJvdG90eXBlLmdldExpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3R5bGUuZ2V0TGlnaHQoKX0sby5wcm90b3R5cGUuc2V0RmVhdHVyZVN0YXRlPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHlsZS5zZXRGZWF0dXJlU3RhdGUodCxlKSx0aGlzLl91cGRhdGUoKTt9LG8ucHJvdG90eXBlLmdldEZlYXR1cmVTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdHlsZS5nZXRGZWF0dXJlU3RhdGUodCl9LG8ucHJvdG90eXBlLmdldENvbnRhaW5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250YWluZXJ9LG8ucHJvdG90eXBlLmdldENhbnZhc0NvbnRhaW5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYW52YXNDb250YWluZXJ9LG8ucHJvdG90eXBlLmdldENhbnZhcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYW52YXN9LG8ucHJvdG90eXBlLl9jb250YWluZXJEaW1lbnNpb25zPWZ1bmN0aW9uKCl7dmFyIHQ9MCxlPTA7cmV0dXJuIHRoaXMuX2NvbnRhaW5lciYmKHQ9dGhpcy5fY29udGFpbmVyLm9mZnNldFdpZHRofHw0MDAsZT10aGlzLl9jb250YWluZXIub2Zmc2V0SGVpZ2h0fHwzMDApLFt0LGVdfSxvLnByb3RvdHlwZS5fZGV0ZWN0TWlzc2luZ0NTUz1mdW5jdGlvbigpe1wicmdiKDI1MCwgMTI4LCAxMTQpXCIhPT10LmRlZmF1bHQkMS5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX21pc3NpbmdDU1NDYW5hcnkpLmdldFByb3BlcnR5VmFsdWUoXCJiYWNrZ3JvdW5kLWNvbG9yXCIpJiZ0Lndhcm5PbmNlKFwiVGhpcyBwYWdlIGFwcGVhcnMgdG8gYmUgbWlzc2luZyBDU1MgZGVjbGFyYXRpb25zIGZvciBNYXBib3ggR0wgSlMsIHdoaWNoIG1heSBjYXVzZSB0aGUgbWFwIHRvIGRpc3BsYXkgaW5jb3JyZWN0bHkuIFBsZWFzZSBlbnN1cmUgeW91ciBwYWdlIGluY2x1ZGVzIG1hcGJveC1nbC5jc3MsIGFzIGRlc2NyaWJlZCBpbiBodHRwczovL3d3dy5tYXBib3guY29tL21hcGJveC1nbC1qcy9hcGkvLlwiKTt9LG8ucHJvdG90eXBlLl9zZXR1cENvbnRhaW5lcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NvbnRhaW5lcjt0LmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1tYXBcIiksKHRoaXMuX21pc3NpbmdDU1NDYW5hcnk9aS5jcmVhdGUoXCJkaXZcIixcIm1hcGJveGdsLWNhbmFyeVwiLHQpKS5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIsdGhpcy5fZGV0ZWN0TWlzc2luZ0NTUygpO3ZhciBlPXRoaXMuX2NhbnZhc0NvbnRhaW5lcj1pLmNyZWF0ZShcImRpdlwiLFwibWFwYm94Z2wtY2FudmFzLWNvbnRhaW5lclwiLHQpO3RoaXMuX2ludGVyYWN0aXZlJiZlLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1pbnRlcmFjdGl2ZVwiKSx0aGlzLl9jYW52YXM9aS5jcmVhdGUoXCJjYW52YXNcIixcIm1hcGJveGdsLWNhbnZhc1wiLGUpLHRoaXMuX2NhbnZhcy5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy5fY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRsb3N0XCIsdGhpcy5fY29udGV4dExvc3QsITEpLHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0cmVzdG9yZWRcIix0aGlzLl9jb250ZXh0UmVzdG9yZWQsITEpLHRoaXMuX2NhbnZhcy5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiMFwiKSx0aGlzLl9jYW52YXMuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLFwiTWFwXCIpO3ZhciBuPXRoaXMuX2NvbnRhaW5lckRpbWVuc2lvbnMoKTt0aGlzLl9yZXNpemVDYW52YXMoblswXSxuWzFdKTt2YXIgbz10aGlzLl9jb250cm9sQ29udGFpbmVyPWkuY3JlYXRlKFwiZGl2XCIsXCJtYXBib3hnbC1jb250cm9sLWNvbnRhaW5lclwiLHQpLHI9dGhpcy5fY29udHJvbFBvc2l0aW9ucz17fTtbXCJ0b3AtbGVmdFwiLFwidG9wLXJpZ2h0XCIsXCJib3R0b20tbGVmdFwiLFwiYm90dG9tLXJpZ2h0XCJdLmZvckVhY2goZnVuY3Rpb24odCl7clt0XT1pLmNyZWF0ZShcImRpdlwiLFwibWFwYm94Z2wtY3RybC1cIit0LG8pO30pO30sby5wcm90b3R5cGUuX3Jlc2l6ZUNhbnZhcz1mdW5jdGlvbihlLGkpe3ZhciBuPXQuZGVmYXVsdCQxLmRldmljZVBpeGVsUmF0aW98fDE7dGhpcy5fY2FudmFzLndpZHRoPW4qZSx0aGlzLl9jYW52YXMuaGVpZ2h0PW4qaSx0aGlzLl9jYW52YXMuc3R5bGUud2lkdGg9ZStcInB4XCIsdGhpcy5fY2FudmFzLnN0eWxlLmhlaWdodD1pK1wicHhcIjt9LG8ucHJvdG90eXBlLl9zZXR1cFBhaW50ZXI9ZnVuY3Rpb24oKXt2YXIgaT10LmV4dGVuZCh7ZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDp0aGlzLl9mYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0LHByZXNlcnZlRHJhd2luZ0J1ZmZlcjp0aGlzLl9wcmVzZXJ2ZURyYXdpbmdCdWZmZXJ9LGUud2ViR0xDb250ZXh0QXR0cmlidXRlcyksbj10aGlzLl9jYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIsaSl8fHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIsaSk7bj90aGlzLnBhaW50ZXI9bmV3IHZpKG4sdGhpcy50cmFuc2Zvcm0pOnRoaXMuZmlyZShuZXcgdC5FcnJvckV2ZW50KG5ldyBFcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIFdlYkdMXCIpKSk7fSxvLnByb3RvdHlwZS5fY29udGV4dExvc3Q9ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2ZyYW1lSWQmJih0LmRlZmF1bHQkMi5jYW5jZWxGcmFtZSh0aGlzLl9mcmFtZUlkKSx0aGlzLl9mcmFtZUlkPW51bGwpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcIndlYmdsY29udGV4dGxvc3RcIix7b3JpZ2luYWxFdmVudDplfSkpO30sby5wcm90b3R5cGUuX2NvbnRleHRSZXN0b3JlZD1mdW5jdGlvbihlKXt0aGlzLl9zZXR1cFBhaW50ZXIoKSx0aGlzLnJlc2l6ZSgpLHRoaXMuX3VwZGF0ZSgpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcIndlYmdsY29udGV4dHJlc3RvcmVkXCIse29yaWdpbmFsRXZlbnQ6ZX0pKTt9LG8ucHJvdG90eXBlLmxvYWRlZD1mdW5jdGlvbigpe3JldHVybiF0aGlzLl9zdHlsZURpcnR5JiYhdGhpcy5fc291cmNlc0RpcnR5JiYhKCF0aGlzLnN0eWxlfHwhdGhpcy5zdHlsZS5sb2FkZWQoKSl9LG8ucHJvdG90eXBlLl91cGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5zdHlsZSYmKHRoaXMuX3N0eWxlRGlydHk9dGhpcy5fc3R5bGVEaXJ0eXx8dCx0aGlzLl9zb3VyY2VzRGlydHk9ITAsdGhpcy5fcmVyZW5kZXIoKSk7fSxvLnByb3RvdHlwZS5fcmVxdWVzdFJlbmRlckZyYW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl91cGRhdGUoKSx0aGlzLl9yZW5kZXJUYXNrUXVldWUuYWRkKHQpfSxvLnByb3RvdHlwZS5fY2FuY2VsUmVuZGVyRnJhbWU9ZnVuY3Rpb24odCl7dGhpcy5fcmVuZGVyVGFza1F1ZXVlLnJlbW92ZSh0KTt9LG8ucHJvdG90eXBlLl9yZW5kZXI9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJUYXNrUXVldWUucnVuKCk7dmFyIGU9ITE7aWYodGhpcy5zdHlsZSYmdGhpcy5fc3R5bGVEaXJ0eSl7dGhpcy5fc3R5bGVEaXJ0eT0hMTt2YXIgaT10aGlzLnRyYW5zZm9ybS56b29tLG49dC5kZWZhdWx0JDIubm93KCk7dGhpcy5zdHlsZS56b29tSGlzdG9yeS51cGRhdGUoaSxuKTt2YXIgbz1uZXcgdC5kZWZhdWx0JDIzKGkse25vdzpuLGZhZGVEdXJhdGlvbjp0aGlzLl9mYWRlRHVyYXRpb24sem9vbUhpc3Rvcnk6dGhpcy5zdHlsZS56b29tSGlzdG9yeSx0cmFuc2l0aW9uOnRoaXMuc3R5bGUuZ2V0VHJhbnNpdGlvbigpfSkscj1vLmNyb3NzRmFkaW5nRmFjdG9yKCk7MT09PXImJnI9PT10aGlzLl9jcm9zc0ZhZGluZ0ZhY3Rvcnx8KGU9ITAsdGhpcy5fY3Jvc3NGYWRpbmdGYWN0b3I9ciksdGhpcy5zdHlsZS51cGRhdGUobyk7fXJldHVybiB0aGlzLnN0eWxlJiZ0aGlzLl9zb3VyY2VzRGlydHkmJih0aGlzLl9zb3VyY2VzRGlydHk9ITEsdGhpcy5zdHlsZS5fdXBkYXRlU291cmNlcyh0aGlzLnRyYW5zZm9ybSkpLHRoaXMuX3BsYWNlbWVudERpcnR5PXRoaXMuc3R5bGUmJnRoaXMuc3R5bGUuX3VwZGF0ZVBsYWNlbWVudCh0aGlzLnBhaW50ZXIudHJhbnNmb3JtLHRoaXMuc2hvd0NvbGxpc2lvbkJveGVzLHRoaXMuX2ZhZGVEdXJhdGlvbix0aGlzLl9jcm9zc1NvdXJjZUNvbGxpc2lvbnMpLHRoaXMucGFpbnRlci5yZW5kZXIodGhpcy5zdHlsZSx7c2hvd1RpbGVCb3VuZGFyaWVzOnRoaXMuc2hvd1RpbGVCb3VuZGFyaWVzLHNob3dPdmVyZHJhd0luc3BlY3Rvcjp0aGlzLl9zaG93T3ZlcmRyYXdJbnNwZWN0b3Iscm90YXRpbmc6dGhpcy5pc1JvdGF0aW5nKCksem9vbWluZzp0aGlzLmlzWm9vbWluZygpLGZhZGVEdXJhdGlvbjp0aGlzLl9mYWRlRHVyYXRpb259KSx0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJyZW5kZXJcIikpLHRoaXMubG9hZGVkKCkmJiF0aGlzLl9sb2FkZWQmJih0aGlzLl9sb2FkZWQ9ITAsdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwibG9hZFwiKSkpLHRoaXMuc3R5bGUmJih0aGlzLnN0eWxlLmhhc1RyYW5zaXRpb25zKCl8fGUpJiYodGhpcy5fc3R5bGVEaXJ0eT0hMCksKHRoaXMuX3NvdXJjZXNEaXJ0eXx8dGhpcy5fcmVwYWludHx8dGhpcy5fc3R5bGVEaXJ0eXx8dGhpcy5fcGxhY2VtZW50RGlydHkpJiZ0aGlzLl9yZXJlbmRlcigpLHRoaXN9LG8ucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3RoaXMuX2hhc2gmJnRoaXMuX2hhc2gucmVtb3ZlKCksdC5kZWZhdWx0JDIuY2FuY2VsRnJhbWUodGhpcy5fZnJhbWVJZCksdGhpcy5fcmVuZGVyVGFza1F1ZXVlLmNsZWFyKCksdGhpcy5fZnJhbWVJZD1udWxsLHRoaXMuc2V0U3R5bGUobnVsbCksdm9pZCAwIT09dC5kZWZhdWx0JDEmJih0LmRlZmF1bHQkMS5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fb25XaW5kb3dSZXNpemUsITEpLHQuZGVmYXVsdCQxLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIix0aGlzLl9vbldpbmRvd09ubGluZSwhMSkpO3ZhciBlPXRoaXMucGFpbnRlci5jb250ZXh0LmdsLmdldEV4dGVuc2lvbihcIldFQkdMX2xvc2VfY29udGV4dFwiKTtlJiZlLmxvc2VDb250ZXh0KCksWGkodGhpcy5fY2FudmFzQ29udGFpbmVyKSxYaSh0aGlzLl9jb250cm9sQ29udGFpbmVyKSxYaSh0aGlzLl9taXNzaW5nQ1NTQ2FuYXJ5KSx0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLW1hcFwiKSx0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJyZW1vdmVcIikpO30sby5wcm90b3R5cGUuX3JlcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnN0eWxlJiYhdGhpcy5fZnJhbWVJZCYmKHRoaXMuX2ZyYW1lSWQ9dC5kZWZhdWx0JDIuZnJhbWUoZnVuY3Rpb24oKXtlLl9mcmFtZUlkPW51bGwsZS5fcmVuZGVyKCk7fSkpO30sby5wcm90b3R5cGUuX29uV2luZG93T25saW5lPWZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlKCk7fSxvLnByb3RvdHlwZS5fb25XaW5kb3dSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLl90cmFja1Jlc2l6ZSYmdGhpcy5zdG9wKCkucmVzaXplKCkuX3VwZGF0ZSgpO30sci5zaG93VGlsZUJvdW5kYXJpZXMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9zaG93VGlsZUJvdW5kYXJpZXN9LHIuc2hvd1RpbGVCb3VuZGFyaWVzLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zaG93VGlsZUJvdW5kYXJpZXMhPT10JiYodGhpcy5fc2hvd1RpbGVCb3VuZGFyaWVzPXQsdGhpcy5fdXBkYXRlKCkpO30sci5zaG93Q29sbGlzaW9uQm94ZXMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9zaG93Q29sbGlzaW9uQm94ZXN9LHIuc2hvd0NvbGxpc2lvbkJveGVzLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zaG93Q29sbGlzaW9uQm94ZXMhPT10JiYodGhpcy5fc2hvd0NvbGxpc2lvbkJveGVzPXQsdD90aGlzLnN0eWxlLl9nZW5lcmF0ZUNvbGxpc2lvbkJveGVzKCk6dGhpcy5fdXBkYXRlKCkpO30sci5zaG93T3ZlcmRyYXdJbnNwZWN0b3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9zaG93T3ZlcmRyYXdJbnNwZWN0b3J9LHIuc2hvd092ZXJkcmF3SW5zcGVjdG9yLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zaG93T3ZlcmRyYXdJbnNwZWN0b3IhPT10JiYodGhpcy5fc2hvd092ZXJkcmF3SW5zcGVjdG9yPXQsdGhpcy5fdXBkYXRlKCkpO30sci5yZXBhaW50LmdldD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fcmVwYWludH0sci5yZXBhaW50LnNldD1mdW5jdGlvbih0KXt0aGlzLl9yZXBhaW50PXQsdGhpcy5fdXBkYXRlKCk7fSxyLnZlcnRpY2VzLmdldD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fdmVydGljZXN9LHIudmVydGljZXMuc2V0PWZ1bmN0aW9uKHQpe3RoaXMuX3ZlcnRpY2VzPXQsdGhpcy5fdXBkYXRlKCk7fSxvLnByb3RvdHlwZS5fb25EYXRhPWZ1bmN0aW9uKGUpe3RoaXMuX3VwZGF0ZShcInN0eWxlXCI9PT1lLmRhdGFUeXBlKSx0aGlzLmZpcmUobmV3IHQuRXZlbnQoZS5kYXRhVHlwZStcImRhdGFcIixlKSk7fSxvLnByb3RvdHlwZS5fb25EYXRhTG9hZGluZz1mdW5jdGlvbihlKXt0aGlzLmZpcmUobmV3IHQuRXZlbnQoZS5kYXRhVHlwZStcImRhdGFsb2FkaW5nXCIsZSkpO30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoby5wcm90b3R5cGUsciksb30oJGkpO2Z1bmN0aW9uIFhpKHQpe3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpO312YXIgSGk9e3Nob3dDb21wYXNzOiEwLHNob3dab29tOiEwfSxLaT1mdW5jdGlvbihlKXt2YXIgbj10aGlzO3RoaXMub3B0aW9ucz10LmV4dGVuZCh7fSxIaSxlKSx0aGlzLl9jb250YWluZXI9aS5jcmVhdGUoXCJkaXZcIixcIm1hcGJveGdsLWN0cmwgbWFwYm94Z2wtY3RybC1ncm91cFwiKSx0aGlzLl9jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsZnVuY3Rpb24odCl7cmV0dXJuIHQucHJldmVudERlZmF1bHQoKX0pLHRoaXMub3B0aW9ucy5zaG93Wm9vbSYmKHRoaXMuX3pvb21JbkJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24oXCJtYXBib3hnbC1jdHJsLWljb24gbWFwYm94Z2wtY3RybC16b29tLWluXCIsXCJab29tIEluXCIsZnVuY3Rpb24oKXtyZXR1cm4gbi5fbWFwLnpvb21JbigpfSksdGhpcy5fem9vbU91dEJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24oXCJtYXBib3hnbC1jdHJsLWljb24gbWFwYm94Z2wtY3RybC16b29tLW91dFwiLFwiWm9vbSBPdXRcIixmdW5jdGlvbigpe3JldHVybiBuLl9tYXAuem9vbU91dCgpfSkpLHRoaXMub3B0aW9ucy5zaG93Q29tcGFzcyYmKHQuYmluZEFsbChbXCJfcm90YXRlQ29tcGFzc0Fycm93XCJdLHRoaXMpLHRoaXMuX2NvbXBhc3M9dGhpcy5fY3JlYXRlQnV0dG9uKFwibWFwYm94Z2wtY3RybC1pY29uIG1hcGJveGdsLWN0cmwtY29tcGFzc1wiLFwiUmVzZXQgTm9ydGhcIixmdW5jdGlvbigpe3JldHVybiBuLl9tYXAucmVzZXROb3J0aCgpfSksdGhpcy5fY29tcGFzc0Fycm93PWkuY3JlYXRlKFwic3BhblwiLFwibWFwYm94Z2wtY3RybC1jb21wYXNzLWFycm93XCIsdGhpcy5fY29tcGFzcykpO307ZnVuY3Rpb24gWWkodCxlLGkpe2lmKHQ9bmV3IEIodC5sbmcsdC5sYXQpLGUpe3ZhciBuPW5ldyBCKHQubG5nLTM2MCx0LmxhdCksbz1uZXcgQih0LmxuZyszNjAsdC5sYXQpLHI9aS5sb2NhdGlvblBvaW50KHQpLmRpc3RTcXIoZSk7aS5sb2NhdGlvblBvaW50KG4pLmRpc3RTcXIoZSk8cj90PW46aS5sb2NhdGlvblBvaW50KG8pLmRpc3RTcXIoZSk8ciYmKHQ9byk7fWZvcig7TWF0aC5hYnModC5sbmctaS5jZW50ZXIubG5nKT4xODA7KXt2YXIgYT1pLmxvY2F0aW9uUG9pbnQodCk7aWYoYS54Pj0wJiZhLnk+PTAmJmEueDw9aS53aWR0aCYmYS55PD1pLmhlaWdodClicmVhazt0LmxuZz5pLmNlbnRlci5sbmc/dC5sbmctPTM2MDp0LmxuZys9MzYwO31yZXR1cm4gdH1LaS5wcm90b3R5cGUuX3JvdGF0ZUNvbXBhc3NBcnJvdz1mdW5jdGlvbigpe3ZhciB0PVwicm90YXRlKFwiK3RoaXMuX21hcC50cmFuc2Zvcm0uYW5nbGUqKDE4MC9NYXRoLlBJKStcImRlZylcIjt0aGlzLl9jb21wYXNzQXJyb3cuc3R5bGUudHJhbnNmb3JtPXQ7fSxLaS5wcm90b3R5cGUub25BZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21hcD10LHRoaXMub3B0aW9ucy5zaG93Q29tcGFzcyYmKHRoaXMuX21hcC5vbihcInJvdGF0ZVwiLHRoaXMuX3JvdGF0ZUNvbXBhc3NBcnJvdyksdGhpcy5fcm90YXRlQ29tcGFzc0Fycm93KCksdGhpcy5faGFuZGxlcj1uZXcgTGkodCx7YnV0dG9uOlwibGVmdFwiLGVsZW1lbnQ6dGhpcy5fY29tcGFzc30pLGkuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9jb21wYXNzLFwibW91c2Vkb3duXCIsdGhpcy5faGFuZGxlci5vbk1vdXNlRG93biksdGhpcy5faGFuZGxlci5lbmFibGUoKSksdGhpcy5fY29udGFpbmVyfSxLaS5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24oKXtpLnJlbW92ZSh0aGlzLl9jb250YWluZXIpLHRoaXMub3B0aW9ucy5zaG93Q29tcGFzcyYmKHRoaXMuX21hcC5vZmYoXCJyb3RhdGVcIix0aGlzLl9yb3RhdGVDb21wYXNzQXJyb3cpLGkucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl9jb21wYXNzLFwibW91c2Vkb3duXCIsdGhpcy5faGFuZGxlci5vbk1vdXNlRG93biksdGhpcy5faGFuZGxlci5kaXNhYmxlKCksZGVsZXRlIHRoaXMuX2hhbmRsZXIpLGRlbGV0ZSB0aGlzLl9tYXA7fSxLaS5wcm90b3R5cGUuX2NyZWF0ZUJ1dHRvbj1mdW5jdGlvbih0LGUsbil7dmFyIG89aS5jcmVhdGUoXCJidXR0b25cIix0LHRoaXMuX2NvbnRhaW5lcik7cmV0dXJuIG8udHlwZT1cImJ1dHRvblwiLG8uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLGUpLG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsbiksb307dmFyIEppPXtjZW50ZXI6XCJ0cmFuc2xhdGUoLTUwJSwtNTAlKVwiLHRvcDpcInRyYW5zbGF0ZSgtNTAlLDApXCIsXCJ0b3AtbGVmdFwiOlwidHJhbnNsYXRlKDAsMClcIixcInRvcC1yaWdodFwiOlwidHJhbnNsYXRlKC0xMDAlLDApXCIsYm90dG9tOlwidHJhbnNsYXRlKC01MCUsLTEwMCUpXCIsXCJib3R0b20tbGVmdFwiOlwidHJhbnNsYXRlKDAsLTEwMCUpXCIsXCJib3R0b20tcmlnaHRcIjpcInRyYW5zbGF0ZSgtMTAwJSwtMTAwJSlcIixsZWZ0OlwidHJhbnNsYXRlKDAsLTUwJSlcIixyaWdodDpcInRyYW5zbGF0ZSgtMTAwJSwtNTAlKVwifTtmdW5jdGlvbiBRaSh0LGUsaSl7dmFyIG49dC5jbGFzc0xpc3Q7Zm9yKHZhciBvIGluIEppKW4ucmVtb3ZlKFwibWFwYm94Z2wtXCIraStcIi1hbmNob3ItXCIrbyk7bi5hZGQoXCJtYXBib3hnbC1cIitpK1wiLWFuY2hvci1cIitlKTt9dmFyIHRuLGVuPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4obil7aWYoZS5jYWxsKHRoaXMpLChhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHQuZGVmYXVsdCQxLkhUTUxFbGVtZW50fHwyPT09YXJndW1lbnRzLmxlbmd0aCkmJihuPXQuZXh0ZW5kKHtlbGVtZW50Om59LGFyZ3VtZW50c1sxXSkpLHQuYmluZEFsbChbXCJfdXBkYXRlXCIsXCJfb25Nb3ZlXCIsXCJfb25VcFwiLFwiX2FkZERyYWdIYW5kbGVyXCIsXCJfb25NYXBDbGlja1wiXSx0aGlzKSx0aGlzLl9hbmNob3I9biYmbi5hbmNob3J8fFwiY2VudGVyXCIsdGhpcy5fY29sb3I9biYmbi5jb2xvcnx8XCIjM0ZCMUNFXCIsdGhpcy5fZHJhZ2dhYmxlPW4mJm4uZHJhZ2dhYmxlfHwhMSx0aGlzLl9zdGF0ZT1cImluYWN0aXZlXCIsbiYmbi5lbGVtZW50KXRoaXMuX2VsZW1lbnQ9bi5lbGVtZW50LHRoaXMuX29mZnNldD10LmRlZmF1bHQuY29udmVydChuJiZuLm9mZnNldHx8WzAsMF0pO2Vsc2V7dGhpcy5fZGVmYXVsdE1hcmtlcj0hMCx0aGlzLl9lbGVtZW50PWkuY3JlYXRlKFwiZGl2XCIpO3ZhciBvPWkuY3JlYXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwic3ZnXCIpO28uc2V0QXR0cmlidXRlTlMobnVsbCxcImhlaWdodFwiLFwiNDFweFwiKSxvLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ3aWR0aFwiLFwiMjdweFwiKSxvLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ2aWV3Qm94XCIsXCIwIDAgMjcgNDFcIik7dmFyIHI9aS5jcmVhdGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO3Iuc2V0QXR0cmlidXRlTlMobnVsbCxcInN0cm9rZVwiLFwibm9uZVwiKSxyLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJzdHJva2Utd2lkdGhcIixcIjFcIiksci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLFwibm9uZVwiKSxyLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsLXJ1bGVcIixcImV2ZW5vZGRcIik7dmFyIGE9aS5jcmVhdGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO2Euc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGwtcnVsZVwiLFwibm9uemVyb1wiKTt2YXIgcz1pLmNyZWF0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImdcIik7cy5zZXRBdHRyaWJ1dGVOUyhudWxsLFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoMy4wLCAyOS4wKVwiKSxzLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsXCIjMDAwMDAwXCIpO2Zvcih2YXIgbD0wLGM9W3tyeDpcIjEwLjVcIixyeTpcIjUuMjUwMDIyNzNcIn0se3J4OlwiMTAuNVwiLHJ5OlwiNS4yNTAwMjI3M1wifSx7cng6XCI5LjVcIixyeTpcIjQuNzcyNzUwMDdcIn0se3J4OlwiOC41XCIscnk6XCI0LjI5NTQ5OTM2XCJ9LHtyeDpcIjcuNVwiLHJ5OlwiMy44MTgyMjMwOFwifSx7cng6XCI2LjVcIixyeTpcIjMuMzQwOTQ2NzlcIn0se3J4OlwiNS41XCIscnk6XCIyLjg2MzY3MDUxXCJ9LHtyeDpcIjQuNVwiLHJ5OlwiMi4zODYzNjg2NFwifV07bDxjLmxlbmd0aDtsKz0xKXt2YXIgdT1jW2xdLGg9aS5jcmVhdGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJlbGxpcHNlXCIpO2guc2V0QXR0cmlidXRlTlMobnVsbCxcIm9wYWNpdHlcIixcIjAuMDRcIiksaC5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiY3hcIixcIjEwLjVcIiksaC5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiY3lcIixcIjUuODAwMjkwMDhcIiksaC5zZXRBdHRyaWJ1dGVOUyhudWxsLFwicnhcIix1LnJ4KSxoLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJyeVwiLHUucnkpLHMuYXBwZW5kQ2hpbGQoaCk7fXZhciBwPWkuY3JlYXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwiZ1wiKTtwLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsdGhpcy5fY29sb3IpO3ZhciBkPWkuY3JlYXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKTtkLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMjcsMTMuNSBDMjcsMTkuMDc0NjQ0IDIwLjI1MDAwMSwyNy4wMDAwMDIgMTQuNzUsMzQuNTAwMDAyIEMxNC4wMTY2NjUsMzUuNTAwMDA0IDEyLjk4MzMzNSwzNS41MDAwMDQgMTIuMjUsMzQuNTAwMDAyIEM2Ljc0OTk5OTMsMjcuMDAwMDAyIDAsMTkuMjIyNTYyIDAsMTMuNSBDMCw2LjA0NDE1NTkgNi4wNDQxNTU5LDAgMTMuNSwwIEMyMC45NTU4NDQsMCAyNyw2LjA0NDE1NTkgMjcsMTMuNSBaXCIpLHAuYXBwZW5kQ2hpbGQoZCk7dmFyIGY9aS5jcmVhdGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO2Yuc2V0QXR0cmlidXRlTlMobnVsbCxcIm9wYWNpdHlcIixcIjAuMjVcIiksZi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLFwiIzAwMDAwMFwiKTt2YXIgbT1pLmNyZWF0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7bS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTEzLjUsMCBDNi4wNDQxNTU5LDAgMCw2LjA0NDE1NTkgMCwxMy41IEMwLDE5LjIyMjU2MiA2Ljc0OTk5OTMsMjcgMTIuMjUsMzQuNSBDMTMsMzUuNTIyNzI3IDE0LjAxNjY2NCwzNS41MDAwMDQgMTQuNzUsMzQuNSBDMjAuMjUwMDAxLDI3IDI3LDE5LjA3NDY0NCAyNywxMy41IEMyNyw2LjA0NDE1NTkgMjAuOTU1ODQ0LDAgMTMuNSwwIFogTTEzLjUsMSBDMjAuNDE1NDA0LDEgMjYsNi41ODQ1OTYgMjYsMTMuNSBDMjYsMTUuODk4NjU3IDI0LjQ5NTU4NCwxOS4xODE0MzEgMjIuMjIwNzAzLDIyLjczODI4MSBDMTkuOTQ1ODIzLDI2LjI5NTEzMiAxNi43MDUxMTksMzAuMTQyMTY3IDEzLjk0MzM1OSwzMy45MDgyMDMgQzEzLjc0MzQ0NSwzNC4xODA4MTQgMTMuNjEyNzE1LDM0LjMyMjczOCAxMy41LDM0LjQ0MTQwNiBDMTMuMzg3Mjg1LDM0LjMyMjczOCAxMy4yNTY1NTUsMzQuMTgwODE0IDEzLjA1NjY0MSwzMy45MDgyMDMgQzEwLjI4NDQ4MSwzMC4xMjc5ODUgNy40MTQ4Njg0LDI2LjMxNDE1OSA1LjAxNTYyNSwyMi43NzM0MzggQzIuNjE2MzgxNiwxOS4yMzI3MTUgMSwxNS45NTM1MzggMSwxMy41IEMxLDYuNTg0NTk2IDYuNTg0NTk2LDEgMTMuNSwxIFpcIiksZi5hcHBlbmRDaGlsZChtKTt2YXIgXz1pLmNyZWF0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImdcIik7Xy5zZXRBdHRyaWJ1dGVOUyhudWxsLFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoNi4wLCA3LjApXCIpLF8uc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIixcIiNGRkZGRkZcIik7dmFyIGc9aS5jcmVhdGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO2cuc2V0QXR0cmlidXRlTlMobnVsbCxcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKDguMCwgOC4wKVwiKTt2YXIgdj1pLmNyZWF0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImNpcmNsZVwiKTt2LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsXCIjMDAwMDAwXCIpLHYuc2V0QXR0cmlidXRlTlMobnVsbCxcIm9wYWNpdHlcIixcIjAuMjVcIiksdi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiY3hcIixcIjUuNVwiKSx2LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJjeVwiLFwiNS41XCIpLHYuc2V0QXR0cmlidXRlTlMobnVsbCxcInJcIixcIjUuNDk5OTk2MlwiKTt2YXIgeT1pLmNyZWF0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImNpcmNsZVwiKTt5LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsXCIjRkZGRkZGXCIpLHkuc2V0QXR0cmlidXRlTlMobnVsbCxcImN4XCIsXCI1LjVcIikseS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiY3lcIixcIjUuNVwiKSx5LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJyXCIsXCI1LjQ5OTk5NjJcIiksZy5hcHBlbmRDaGlsZCh2KSxnLmFwcGVuZENoaWxkKHkpLGEuYXBwZW5kQ2hpbGQocyksYS5hcHBlbmRDaGlsZChwKSxhLmFwcGVuZENoaWxkKGYpLGEuYXBwZW5kQ2hpbGQoXyksYS5hcHBlbmRDaGlsZChnKSxvLmFwcGVuZENoaWxkKGEpLHRoaXMuX2VsZW1lbnQuYXBwZW5kQ2hpbGQobyksdGhpcy5fb2Zmc2V0PXQuZGVmYXVsdC5jb252ZXJ0KG4mJm4ub2Zmc2V0fHxbMCwtMTRdKTt9dGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtbWFya2VyXCIpLHRoaXMuX3BvcHVwPW51bGw7fXJldHVybiBlJiYobi5fX3Byb3RvX189ZSksbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSksbi5wcm90b3R5cGUuY29uc3RydWN0b3I9bixuLnByb3RvdHlwZS5hZGRUbz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZW1vdmUoKSx0aGlzLl9tYXA9dCx0LmdldENhbnZhc0NvbnRhaW5lcigpLmFwcGVuZENoaWxkKHRoaXMuX2VsZW1lbnQpLHQub24oXCJtb3ZlXCIsdGhpcy5fdXBkYXRlKSx0Lm9uKFwibW92ZWVuZFwiLHRoaXMuX3VwZGF0ZSksdGhpcy5zZXREcmFnZ2FibGUodGhpcy5fZHJhZ2dhYmxlKSx0aGlzLl91cGRhdGUoKSx0aGlzLl9tYXAub24oXCJjbGlja1wiLHRoaXMuX29uTWFwQ2xpY2spLHRoaXN9LG4ucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJih0aGlzLl9tYXAub2ZmKFwiY2xpY2tcIix0aGlzLl9vbk1hcENsaWNrKSx0aGlzLl9tYXAub2ZmKFwibW92ZVwiLHRoaXMuX3VwZGF0ZSksdGhpcy5fbWFwLm9mZihcIm1vdmVlbmRcIix0aGlzLl91cGRhdGUpLHRoaXMuX21hcC5vZmYoXCJtb3VzZWRvd25cIix0aGlzLl9hZGREcmFnSGFuZGxlciksdGhpcy5fbWFwLm9mZihcInRvdWNoc3RhcnRcIix0aGlzLl9hZGREcmFnSGFuZGxlciksZGVsZXRlIHRoaXMuX21hcCksaS5yZW1vdmUodGhpcy5fZWxlbWVudCksdGhpcy5fcG9wdXAmJnRoaXMuX3BvcHVwLnJlbW92ZSgpLHRoaXN9LG4ucHJvdG90eXBlLmdldExuZ0xhdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sbmdMYXR9LG4ucHJvdG90eXBlLnNldExuZ0xhdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbG5nTGF0PUIuY29udmVydCh0KSx0aGlzLl9wb3M9bnVsbCx0aGlzLl9wb3B1cCYmdGhpcy5fcG9wdXAuc2V0TG5nTGF0KHRoaXMuX2xuZ0xhdCksdGhpcy5fdXBkYXRlKCksdGhpc30sbi5wcm90b3R5cGUuZ2V0RWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbGVtZW50fSxuLnByb3RvdHlwZS5zZXRQb3B1cD1mdW5jdGlvbih0KXtpZih0aGlzLl9wb3B1cCYmKHRoaXMuX3BvcHVwLnJlbW92ZSgpLHRoaXMuX3BvcHVwPW51bGwpLHQpe2lmKCEoXCJvZmZzZXRcImluIHQub3B0aW9ucykpe3ZhciBlPU1hdGguc3FydChNYXRoLnBvdygxMy41LDIpLzIpO3Qub3B0aW9ucy5vZmZzZXQ9dGhpcy5fZGVmYXVsdE1hcmtlcj97dG9wOlswLDBdLFwidG9wLWxlZnRcIjpbMCwwXSxcInRvcC1yaWdodFwiOlswLDBdLGJvdHRvbTpbMCwtMzguMV0sXCJib3R0b20tbGVmdFwiOltlLC0xKigyNC42K2UpXSxcImJvdHRvbS1yaWdodFwiOlstZSwtMSooMjQuNitlKV0sbGVmdDpbMTMuNSwtMjQuNl0scmlnaHQ6Wy0xMy41LC0yNC42XX06dGhpcy5fb2Zmc2V0O310aGlzLl9wb3B1cD10LHRoaXMuX2xuZ0xhdCYmdGhpcy5fcG9wdXAuc2V0TG5nTGF0KHRoaXMuX2xuZ0xhdCk7fXJldHVybiB0aGlzfSxuLnByb3RvdHlwZS5fb25NYXBDbGljaz1mdW5jdGlvbih0KXt2YXIgZT10Lm9yaWdpbmFsRXZlbnQudGFyZ2V0LGk9dGhpcy5fZWxlbWVudDt0aGlzLl9wb3B1cCYmKGU9PT1pfHxpLmNvbnRhaW5zKGUpKSYmdGhpcy50b2dnbGVQb3B1cCgpO30sbi5wcm90b3R5cGUuZ2V0UG9wdXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9wdXB9LG4ucHJvdG90eXBlLnRvZ2dsZVBvcHVwPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcG9wdXA7cmV0dXJuIHQ/KHQuaXNPcGVuKCk/dC5yZW1vdmUoKTp0LmFkZFRvKHRoaXMuX21hcCksdGhpcyk6dGhpc30sbi5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLl9tYXAmJih0aGlzLl9tYXAudHJhbnNmb3JtLnJlbmRlcldvcmxkQ29waWVzJiYodGhpcy5fbG5nTGF0PVlpKHRoaXMuX2xuZ0xhdCx0aGlzLl9wb3MsdGhpcy5fbWFwLnRyYW5zZm9ybSkpLHRoaXMuX3Bvcz10aGlzLl9tYXAucHJvamVjdCh0aGlzLl9sbmdMYXQpLl9hZGQodGhpcy5fb2Zmc2V0KSx0JiZcIm1vdmVlbmRcIiE9PXQudHlwZXx8KHRoaXMuX3Bvcz10aGlzLl9wb3Mucm91bmQoKSksaS5zZXRUcmFuc2Zvcm0odGhpcy5fZWxlbWVudCxKaVt0aGlzLl9hbmNob3JdK1wiIHRyYW5zbGF0ZShcIit0aGlzLl9wb3MueCtcInB4LCBcIit0aGlzLl9wb3MueStcInB4KVwiKSxRaSh0aGlzLl9lbGVtZW50LHRoaXMuX2FuY2hvcixcIm1hcmtlclwiKSk7fSxuLnByb3RvdHlwZS5nZXRPZmZzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2Zmc2V0fSxuLnByb3RvdHlwZS5zZXRPZmZzZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29mZnNldD10LmRlZmF1bHQuY29udmVydChlKSx0aGlzLl91cGRhdGUoKSx0aGlzfSxuLnByb3RvdHlwZS5fb25Nb3ZlPWZ1bmN0aW9uKGUpe3RoaXMuX3Bvcz1lLnBvaW50LnN1Yih0aGlzLl9wb3NpdGlvbkRlbHRhKSx0aGlzLl9sbmdMYXQ9dGhpcy5fbWFwLnVucHJvamVjdCh0aGlzLl9wb3MpLHRoaXMuc2V0TG5nTGF0KHRoaXMuX2xuZ0xhdCksdGhpcy5fZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzPVwibm9uZVwiLFwicGVuZGluZ1wiPT09dGhpcy5fc3RhdGUmJih0aGlzLl9zdGF0ZT1cImFjdGl2ZVwiLHRoaXMuZmlyZShuZXcgdC5FdmVudChcImRyYWdzdGFydFwiKSkpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcImRyYWdcIikpO30sbi5wcm90b3R5cGUuX29uVXA9ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHM9XCJhdXRvXCIsdGhpcy5fcG9zaXRpb25EZWx0YT1udWxsLHRoaXMuX21hcC5vZmYoXCJtb3VzZW1vdmVcIix0aGlzLl9vbk1vdmUpLHRoaXMuX21hcC5vZmYoXCJ0b3VjaG1vdmVcIix0aGlzLl9vbk1vdmUpLFwiYWN0aXZlXCI9PT10aGlzLl9zdGF0ZSYmdGhpcy5maXJlKG5ldyB0LkV2ZW50KFwiZHJhZ2VuZFwiKSksdGhpcy5fc3RhdGU9XCJpbmFjdGl2ZVwiO30sbi5wcm90b3R5cGUuX2FkZERyYWdIYW5kbGVyPWZ1bmN0aW9uKHQpe3RoaXMuX2VsZW1lbnQuY29udGFpbnModC5vcmlnaW5hbEV2ZW50LnRhcmdldCkmJih0LnByZXZlbnREZWZhdWx0KCksdGhpcy5fcG9zaXRpb25EZWx0YT10LnBvaW50LnN1Yih0aGlzLl9wb3MpLmFkZCh0aGlzLl9vZmZzZXQpLHRoaXMuX3N0YXRlPVwicGVuZGluZ1wiLHRoaXMuX21hcC5vbihcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW92ZSksdGhpcy5fbWFwLm9uKFwidG91Y2htb3ZlXCIsdGhpcy5fb25Nb3ZlKSx0aGlzLl9tYXAub25jZShcIm1vdXNldXBcIix0aGlzLl9vblVwKSx0aGlzLl9tYXAub25jZShcInRvdWNoZW5kXCIsdGhpcy5fb25VcCkpO30sbi5wcm90b3R5cGUuc2V0RHJhZ2dhYmxlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9kcmFnZ2FibGU9ISF0LHRoaXMuX21hcCYmKHQ/KHRoaXMuX21hcC5vbihcIm1vdXNlZG93blwiLHRoaXMuX2FkZERyYWdIYW5kbGVyKSx0aGlzLl9tYXAub24oXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fYWRkRHJhZ0hhbmRsZXIpKToodGhpcy5fbWFwLm9mZihcIm1vdXNlZG93blwiLHRoaXMuX2FkZERyYWdIYW5kbGVyKSx0aGlzLl9tYXAub2ZmKFwidG91Y2hzdGFydFwiLHRoaXMuX2FkZERyYWdIYW5kbGVyKSkpLHRoaXN9LG4ucHJvdG90eXBlLmlzRHJhZ2dhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RyYWdnYWJsZX0sbn0odC5FdmVudGVkKSxubj17cG9zaXRpb25PcHRpb25zOntlbmFibGVIaWdoQWNjdXJhY3k6ITEsbWF4aW11bUFnZTowLHRpbWVvdXQ6NmUzfSxmaXRCb3VuZHNPcHRpb25zOnttYXhab29tOjE1fSx0cmFja1VzZXJMb2NhdGlvbjohMSxzaG93VXNlckxvY2F0aW9uOiEwfTt2YXIgb249ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbihpKXtlLmNhbGwodGhpcyksdGhpcy5vcHRpb25zPXQuZXh0ZW5kKHt9LG5uLGkpLHQuYmluZEFsbChbXCJfb25TdWNjZXNzXCIsXCJfb25FcnJvclwiLFwiX2ZpbmlzaFwiLFwiX3NldHVwVUlcIixcIl91cGRhdGVDYW1lcmFcIixcIl91cGRhdGVNYXJrZXJcIl0sdGhpcyk7fXJldHVybiBlJiYobi5fX3Byb3RvX189ZSksbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSksbi5wcm90b3R5cGUuY29uc3RydWN0b3I9bixuLnByb3RvdHlwZS5vbkFkZD1mdW5jdGlvbihlKXt2YXIgbjtyZXR1cm4gdGhpcy5fbWFwPWUsdGhpcy5fY29udGFpbmVyPWkuY3JlYXRlKFwiZGl2XCIsXCJtYXBib3hnbC1jdHJsIG1hcGJveGdsLWN0cmwtZ3JvdXBcIiksbj10aGlzLl9zZXR1cFVJLHZvaWQgMCE9PXRuP24odG4pOnZvaWQgMCE9PXQuZGVmYXVsdCQxLm5hdmlnYXRvci5wZXJtaXNzaW9ucz90LmRlZmF1bHQkMS5uYXZpZ2F0b3IucGVybWlzc2lvbnMucXVlcnkoe25hbWU6XCJnZW9sb2NhdGlvblwifSkudGhlbihmdW5jdGlvbih0KXt0bj1cImRlbmllZFwiIT09dC5zdGF0ZSxuKHRuKTt9KToodG49ISF0LmRlZmF1bHQkMS5uYXZpZ2F0b3IuZ2VvbG9jYXRpb24sbih0bikpLHRoaXMuX2NvbnRhaW5lcn0sbi5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24oKXt2b2lkIDAhPT10aGlzLl9nZW9sb2NhdGlvbldhdGNoSUQmJih0LmRlZmF1bHQkMS5uYXZpZ2F0b3IuZ2VvbG9jYXRpb24uY2xlYXJXYXRjaCh0aGlzLl9nZW9sb2NhdGlvbldhdGNoSUQpLHRoaXMuX2dlb2xvY2F0aW9uV2F0Y2hJRD12b2lkIDApLHRoaXMub3B0aW9ucy5zaG93VXNlckxvY2F0aW9uJiZ0aGlzLl91c2VyTG9jYXRpb25Eb3RNYXJrZXIucmVtb3ZlKCksaS5yZW1vdmUodGhpcy5fY29udGFpbmVyKSx0aGlzLl9tYXA9dm9pZCAwO30sbi5wcm90b3R5cGUuX29uU3VjY2Vzcz1mdW5jdGlvbihlKXtpZih0aGlzLm9wdGlvbnMudHJhY2tVc2VyTG9jYXRpb24pc3dpdGNoKHRoaXMuX2xhc3RLbm93blBvc2l0aW9uPWUsdGhpcy5fd2F0Y2hTdGF0ZSl7Y2FzZVwiV0FJVElOR19BQ1RJVkVcIjpjYXNlXCJBQ1RJVkVfTE9DS1wiOmNhc2VcIkFDVElWRV9FUlJPUlwiOnRoaXMuX3dhdGNoU3RhdGU9XCJBQ1RJVkVfTE9DS1wiLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtd2FpdGluZ1wiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWFjdGl2ZS1lcnJvclwiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWFjdGl2ZVwiKTticmVhaztjYXNlXCJCQUNLR1JPVU5EXCI6Y2FzZVwiQkFDS0dST1VORF9FUlJPUlwiOnRoaXMuX3dhdGNoU3RhdGU9XCJCQUNLR1JPVU5EXCIsdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS13YWl0aW5nXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZC1lcnJvclwiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWJhY2tncm91bmRcIik7fXRoaXMub3B0aW9ucy5zaG93VXNlckxvY2F0aW9uJiZcIk9GRlwiIT09dGhpcy5fd2F0Y2hTdGF0ZSYmdGhpcy5fdXBkYXRlTWFya2VyKGUpLHRoaXMub3B0aW9ucy50cmFja1VzZXJMb2NhdGlvbiYmXCJBQ1RJVkVfTE9DS1wiIT09dGhpcy5fd2F0Y2hTdGF0ZXx8dGhpcy5fdXBkYXRlQ2FtZXJhKGUpLHRoaXMub3B0aW9ucy5zaG93VXNlckxvY2F0aW9uJiZ0aGlzLl9kb3RFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC11c2VyLWxvY2F0aW9uLWRvdC1zdGFsZVwiKSx0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJnZW9sb2NhdGVcIixlKSksdGhpcy5fZmluaXNoKCk7fSxuLnByb3RvdHlwZS5fdXBkYXRlQ2FtZXJhPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBCKHQuY29vcmRzLmxvbmdpdHVkZSx0LmNvb3Jkcy5sYXRpdHVkZSksaT10LmNvb3Jkcy5hY2N1cmFjeTt0aGlzLl9tYXAuZml0Qm91bmRzKGUudG9Cb3VuZHMoaSksdGhpcy5vcHRpb25zLmZpdEJvdW5kc09wdGlvbnMse2dlb2xvY2F0ZVNvdXJjZTohMH0pO30sbi5wcm90b3R5cGUuX3VwZGF0ZU1hcmtlcj1mdW5jdGlvbih0KXt0P3RoaXMuX3VzZXJMb2NhdGlvbkRvdE1hcmtlci5zZXRMbmdMYXQoW3QuY29vcmRzLmxvbmdpdHVkZSx0LmNvb3Jkcy5sYXRpdHVkZV0pLmFkZFRvKHRoaXMuX21hcCk6dGhpcy5fdXNlckxvY2F0aW9uRG90TWFya2VyLnJlbW92ZSgpO30sbi5wcm90b3R5cGUuX29uRXJyb3I9ZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRpb25zLnRyYWNrVXNlckxvY2F0aW9uKWlmKDE9PT1lLmNvZGUpdGhpcy5fd2F0Y2hTdGF0ZT1cIk9GRlwiLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtd2FpdGluZ1wiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWFjdGl2ZVwiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWFjdGl2ZS1lcnJvclwiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWJhY2tncm91bmRcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1iYWNrZ3JvdW5kLWVycm9yXCIpLHZvaWQgMCE9PXRoaXMuX2dlb2xvY2F0aW9uV2F0Y2hJRCYmdGhpcy5fY2xlYXJXYXRjaCgpO2Vsc2Ugc3dpdGNoKHRoaXMuX3dhdGNoU3RhdGUpe2Nhc2VcIldBSVRJTkdfQUNUSVZFXCI6dGhpcy5fd2F0Y2hTdGF0ZT1cIkFDVElWRV9FUlJPUlwiLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlLWVycm9yXCIpO2JyZWFrO2Nhc2VcIkFDVElWRV9MT0NLXCI6dGhpcy5fd2F0Y2hTdGF0ZT1cIkFDVElWRV9FUlJPUlwiLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlLWVycm9yXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtd2FpdGluZ1wiKTticmVhaztjYXNlXCJCQUNLR1JPVU5EXCI6dGhpcy5fd2F0Y2hTdGF0ZT1cIkJBQ0tHUk9VTkRfRVJST1JcIix0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWJhY2tncm91bmRcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1iYWNrZ3JvdW5kLWVycm9yXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtd2FpdGluZ1wiKTt9XCJPRkZcIiE9PXRoaXMuX3dhdGNoU3RhdGUmJnRoaXMub3B0aW9ucy5zaG93VXNlckxvY2F0aW9uJiZ0aGlzLl9kb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC11c2VyLWxvY2F0aW9uLWRvdC1zdGFsZVwiKSx0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJlcnJvclwiLGUpKSx0aGlzLl9maW5pc2goKTt9LG4ucHJvdG90eXBlLl9maW5pc2g9ZnVuY3Rpb24oKXt0aGlzLl90aW1lb3V0SWQmJmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SWQpLHRoaXMuX3RpbWVvdXRJZD12b2lkIDA7fSxuLnByb3RvdHlwZS5fc2V0dXBVST1mdW5jdGlvbihlKXt2YXIgbj10aGlzOyExIT09ZSYmKHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIixmdW5jdGlvbih0KXtyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpfSksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uPWkuY3JlYXRlKFwiYnV0dG9uXCIsXCJtYXBib3hnbC1jdHJsLWljb24gbWFwYm94Z2wtY3RybC1nZW9sb2NhdGVcIix0aGlzLl9jb250YWluZXIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi50eXBlPVwiYnV0dG9uXCIsdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIixcIkdlb2xvY2F0ZVwiKSx0aGlzLm9wdGlvbnMudHJhY2tVc2VyTG9jYXRpb24mJih0aGlzLl9nZW9sb2NhdGVCdXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIsXCJmYWxzZVwiKSx0aGlzLl93YXRjaFN0YXRlPVwiT0ZGXCIpLHRoaXMub3B0aW9ucy5zaG93VXNlckxvY2F0aW9uJiYodGhpcy5fZG90RWxlbWVudD1pLmNyZWF0ZShcImRpdlwiLFwibWFwYm94Z2wtdXNlci1sb2NhdGlvbi1kb3RcIiksdGhpcy5fdXNlckxvY2F0aW9uRG90TWFya2VyPW5ldyBlbih0aGlzLl9kb3RFbGVtZW50KSx0aGlzLm9wdGlvbnMudHJhY2tVc2VyTG9jYXRpb24mJih0aGlzLl93YXRjaFN0YXRlPVwiT0ZGXCIpKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy50cmlnZ2VyLmJpbmQodGhpcykpLHRoaXMuX3NldHVwPSEwLHRoaXMub3B0aW9ucy50cmFja1VzZXJMb2NhdGlvbiYmdGhpcy5fbWFwLm9uKFwibW92ZXN0YXJ0XCIsZnVuY3Rpb24oZSl7ZS5nZW9sb2NhdGVTb3VyY2V8fFwiQUNUSVZFX0xPQ0tcIiE9PW4uX3dhdGNoU3RhdGV8fChuLl93YXRjaFN0YXRlPVwiQkFDS0dST1VORFwiLG4uX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZFwiKSxuLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWFjdGl2ZVwiKSxuLmZpcmUobmV3IHQuRXZlbnQoXCJ0cmFja3VzZXJsb2NhdGlvbmVuZFwiKSkpO30pKTt9LG4ucHJvdG90eXBlLnRyaWdnZXI9ZnVuY3Rpb24oKXtpZighdGhpcy5fc2V0dXApcmV0dXJuIHQud2Fybk9uY2UoXCJHZW9sb2NhdGUgY29udHJvbCB0cmlnZ2VyZWQgYmVmb3JlIGFkZGVkIHRvIGEgbWFwXCIpLCExO2lmKHRoaXMub3B0aW9ucy50cmFja1VzZXJMb2NhdGlvbil7c3dpdGNoKHRoaXMuX3dhdGNoU3RhdGUpe2Nhc2VcIk9GRlwiOnRoaXMuX3dhdGNoU3RhdGU9XCJXQUlUSU5HX0FDVElWRVwiLHRoaXMuZmlyZShuZXcgdC5FdmVudChcInRyYWNrdXNlcmxvY2F0aW9uc3RhcnRcIikpO2JyZWFrO2Nhc2VcIldBSVRJTkdfQUNUSVZFXCI6Y2FzZVwiQUNUSVZFX0xPQ0tcIjpjYXNlXCJBQ1RJVkVfRVJST1JcIjpjYXNlXCJCQUNLR1JPVU5EX0VSUk9SXCI6dGhpcy5fd2F0Y2hTdGF0ZT1cIk9GRlwiLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtd2FpdGluZ1wiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWFjdGl2ZVwiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWFjdGl2ZS1lcnJvclwiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWJhY2tncm91bmRcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1iYWNrZ3JvdW5kLWVycm9yXCIpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcInRyYWNrdXNlcmxvY2F0aW9uZW5kXCIpKTticmVhaztjYXNlXCJCQUNLR1JPVU5EXCI6dGhpcy5fd2F0Y2hTdGF0ZT1cIkFDVElWRV9MT0NLXCIsdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1iYWNrZ3JvdW5kXCIpLHRoaXMuX2xhc3RLbm93blBvc2l0aW9uJiZ0aGlzLl91cGRhdGVDYW1lcmEodGhpcy5fbGFzdEtub3duUG9zaXRpb24pLHRoaXMuZmlyZShuZXcgdC5FdmVudChcInRyYWNrdXNlcmxvY2F0aW9uc3RhcnRcIikpO31zd2l0Y2godGhpcy5fd2F0Y2hTdGF0ZSl7Y2FzZVwiV0FJVElOR19BQ1RJVkVcIjp0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLXdhaXRpbmdcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1hY3RpdmVcIik7YnJlYWs7Y2FzZVwiQUNUSVZFX0xPQ0tcIjp0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWFjdGl2ZVwiKTticmVhaztjYXNlXCJBQ1RJVkVfRVJST1JcIjp0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLXdhaXRpbmdcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1hY3RpdmUtZXJyb3JcIik7YnJlYWs7Y2FzZVwiQkFDS0dST1VORFwiOnRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZFwiKTticmVhaztjYXNlXCJCQUNLR1JPVU5EX0VSUk9SXCI6dGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS13YWl0aW5nXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZC1lcnJvclwiKTt9XCJPRkZcIj09PXRoaXMuX3dhdGNoU3RhdGUmJnZvaWQgMCE9PXRoaXMuX2dlb2xvY2F0aW9uV2F0Y2hJRD90aGlzLl9jbGVhcldhdGNoKCk6dm9pZCAwPT09dGhpcy5fZ2VvbG9jYXRpb25XYXRjaElEJiYodGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS13YWl0aW5nXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIixcInRydWVcIiksdGhpcy5fZ2VvbG9jYXRpb25XYXRjaElEPXQuZGVmYXVsdCQxLm5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uKHRoaXMuX29uU3VjY2Vzcyx0aGlzLl9vbkVycm9yLHRoaXMub3B0aW9ucy5wb3NpdGlvbk9wdGlvbnMpKTt9ZWxzZSB0LmRlZmF1bHQkMS5uYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHRoaXMuX29uU3VjY2Vzcyx0aGlzLl9vbkVycm9yLHRoaXMub3B0aW9ucy5wb3NpdGlvbk9wdGlvbnMpLHRoaXMuX3RpbWVvdXRJZD1zZXRUaW1lb3V0KHRoaXMuX2ZpbmlzaCwxZTQpO3JldHVybiEwfSxuLnByb3RvdHlwZS5fY2xlYXJXYXRjaD1mdW5jdGlvbigpe3QuZGVmYXVsdCQxLm5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHRoaXMuX2dlb2xvY2F0aW9uV2F0Y2hJRCksdGhpcy5fZ2VvbG9jYXRpb25XYXRjaElEPXZvaWQgMCx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLXdhaXRpbmdcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtcHJlc3NlZFwiLFwiZmFsc2VcIiksdGhpcy5vcHRpb25zLnNob3dVc2VyTG9jYXRpb24mJnRoaXMuX3VwZGF0ZU1hcmtlcihudWxsKTt9LG59KHQuRXZlbnRlZCkscm49e21heFdpZHRoOjEwMCx1bml0OlwibWV0cmljXCJ9LGFuPWZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucz10LmV4dGVuZCh7fSxybixlKSx0LmJpbmRBbGwoW1wiX29uTW92ZVwiLFwic2V0VW5pdFwiXSx0aGlzKTt9O2Z1bmN0aW9uIHNuKHQsZSxpKXt2YXIgbixvLHIsYSxzLGwsYz1pJiZpLm1heFdpZHRofHwxMDAsdT10Ll9jb250YWluZXIuY2xpZW50SGVpZ2h0LzIsaD0obj10LnVucHJvamVjdChbMCx1XSksbz10LnVucHJvamVjdChbYyx1XSkscj1NYXRoLlBJLzE4MCxhPW4ubGF0KnIscz1vLmxhdCpyLGw9TWF0aC5zaW4oYSkqTWF0aC5zaW4ocykrTWF0aC5jb3MoYSkqTWF0aC5jb3MocykqTWF0aC5jb3MoKG8ubG5nLW4ubG5nKSpyKSw2MzcxZTMqTWF0aC5hY29zKE1hdGgubWluKGwsMSkpKTtpZihpJiZcImltcGVyaWFsXCI9PT1pLnVuaXQpe3ZhciBwPTMuMjgwOCpoO2lmKHA+NTI4MClsbihlLGMscC81MjgwLFwibWlcIik7ZWxzZSBsbihlLGMscCxcImZ0XCIpO31lbHNlIGlmKGkmJlwibmF1dGljYWxcIj09PWkudW5pdCl7bG4oZSxjLGgvMTg1MixcIm5tXCIpO31lbHNlIGxuKGUsYyxoLFwibVwiKTt9ZnVuY3Rpb24gbG4odCxlLGksbil7dmFyIG8scixhLHM9KG89aSwocj1NYXRoLnBvdygxMCwoXCJcIitNYXRoLmZsb29yKG8pKS5sZW5ndGgtMSkpKihhPShhPW8vcik+PTEwPzEwOmE+PTU/NTphPj0zPzM6YT49Mj8yOjEpKSxsPXMvaTtcIm1cIj09PW4mJnM+PTFlMyYmKHMvPTFlMyxuPVwia21cIiksdC5zdHlsZS53aWR0aD1lKmwrXCJweFwiLHQuaW5uZXJIVE1MPXMrbjt9YW4ucHJvdG90eXBlLmdldERlZmF1bHRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVyblwiYm90dG9tLWxlZnRcIn0sYW4ucHJvdG90eXBlLl9vbk1vdmU9ZnVuY3Rpb24oKXtzbih0aGlzLl9tYXAsdGhpcy5fY29udGFpbmVyLHRoaXMub3B0aW9ucyk7fSxhbi5wcm90b3R5cGUub25BZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21hcD10LHRoaXMuX2NvbnRhaW5lcj1pLmNyZWF0ZShcImRpdlwiLFwibWFwYm94Z2wtY3RybCBtYXBib3hnbC1jdHJsLXNjYWxlXCIsdC5nZXRDb250YWluZXIoKSksdGhpcy5fbWFwLm9uKFwibW92ZVwiLHRoaXMuX29uTW92ZSksdGhpcy5fb25Nb3ZlKCksdGhpcy5fY29udGFpbmVyfSxhbi5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24oKXtpLnJlbW92ZSh0aGlzLl9jb250YWluZXIpLHRoaXMuX21hcC5vZmYoXCJtb3ZlXCIsdGhpcy5fb25Nb3ZlKSx0aGlzLl9tYXA9dm9pZCAwO30sYW4ucHJvdG90eXBlLnNldFVuaXQ9ZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zLnVuaXQ9dCxzbih0aGlzLl9tYXAsdGhpcy5fY29udGFpbmVyLHRoaXMub3B0aW9ucyk7fTt2YXIgY249ZnVuY3Rpb24oKXt0aGlzLl9mdWxsc2NyZWVuPSExLHQuYmluZEFsbChbXCJfb25DbGlja0Z1bGxzY3JlZW5cIixcIl9jaGFuZ2VJY29uXCJdLHRoaXMpLFwib25mdWxsc2NyZWVuY2hhbmdlXCJpbiB0LmRlZmF1bHQkMS5kb2N1bWVudD90aGlzLl9mdWxsc2NyZWVuY2hhbmdlPVwiZnVsbHNjcmVlbmNoYW5nZVwiOlwib25tb3pmdWxsc2NyZWVuY2hhbmdlXCJpbiB0LmRlZmF1bHQkMS5kb2N1bWVudD90aGlzLl9mdWxsc2NyZWVuY2hhbmdlPVwibW96ZnVsbHNjcmVlbmNoYW5nZVwiOlwib253ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCJpbiB0LmRlZmF1bHQkMS5kb2N1bWVudD90aGlzLl9mdWxsc2NyZWVuY2hhbmdlPVwid2Via2l0ZnVsbHNjcmVlbmNoYW5nZVwiOlwib25tc2Z1bGxzY3JlZW5jaGFuZ2VcImluIHQuZGVmYXVsdCQxLmRvY3VtZW50JiYodGhpcy5fZnVsbHNjcmVlbmNoYW5nZT1cIk1TRnVsbHNjcmVlbkNoYW5nZVwiKSx0aGlzLl9jbGFzc05hbWU9XCJtYXBib3hnbC1jdHJsXCI7fTtjbi5wcm90b3R5cGUub25BZGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcD1lLHRoaXMuX21hcENvbnRhaW5lcj10aGlzLl9tYXAuZ2V0Q29udGFpbmVyKCksdGhpcy5fY29udGFpbmVyPWkuY3JlYXRlKFwiZGl2XCIsdGhpcy5fY2xhc3NOYW1lK1wiIG1hcGJveGdsLWN0cmwtZ3JvdXBcIiksdGhpcy5fY2hlY2tGdWxsc2NyZWVuU3VwcG9ydCgpP3RoaXMuX3NldHVwVUkoKToodGhpcy5fY29udGFpbmVyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdC53YXJuT25jZShcIlRoaXMgZGV2aWNlIGRvZXMgbm90IHN1cHBvcnQgZnVsbHNjcmVlbiBtb2RlLlwiKSksdGhpcy5fY29udGFpbmVyfSxjbi5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24oKXtpLnJlbW92ZSh0aGlzLl9jb250YWluZXIpLHRoaXMuX21hcD1udWxsLHQuZGVmYXVsdCQxLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5fZnVsbHNjcmVlbmNoYW5nZSx0aGlzLl9jaGFuZ2VJY29uKTt9LGNuLnByb3RvdHlwZS5fY2hlY2tGdWxsc2NyZWVuU3VwcG9ydD1mdW5jdGlvbigpe3JldHVybiEhKHQuZGVmYXVsdCQxLmRvY3VtZW50LmZ1bGxzY3JlZW5FbmFibGVkfHx0LmRlZmF1bHQkMS5kb2N1bWVudC5tb3pGdWxsU2NyZWVuRW5hYmxlZHx8dC5kZWZhdWx0JDEuZG9jdW1lbnQubXNGdWxsc2NyZWVuRW5hYmxlZHx8dC5kZWZhdWx0JDEuZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVuYWJsZWQpfSxjbi5wcm90b3R5cGUuX3NldHVwVUk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9mdWxsc2NyZWVuQnV0dG9uPWkuY3JlYXRlKFwiYnV0dG9uXCIsdGhpcy5fY2xhc3NOYW1lK1wiLWljb24gXCIrdGhpcy5fY2xhc3NOYW1lK1wiLWZ1bGxzY3JlZW5cIix0aGlzLl9jb250YWluZXIpO2Uuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLFwiVG9nZ2xlIGZ1bGxzY3JlZW5cIiksZS50eXBlPVwiYnV0dG9uXCIsdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9vbkNsaWNrRnVsbHNjcmVlbiksdC5kZWZhdWx0JDEuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9mdWxsc2NyZWVuY2hhbmdlLHRoaXMuX2NoYW5nZUljb24pO30sY24ucHJvdG90eXBlLl9pc0Z1bGxzY3JlZW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZnVsbHNjcmVlbn0sY24ucHJvdG90eXBlLl9jaGFuZ2VJY29uPWZ1bmN0aW9uKCl7KHQuZGVmYXVsdCQxLmRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50fHx0LmRlZmF1bHQkMS5kb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudHx8dC5kZWZhdWx0JDEuZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnR8fHQuZGVmYXVsdCQxLmRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQpPT09dGhpcy5fbWFwQ29udGFpbmVyIT09dGhpcy5fZnVsbHNjcmVlbiYmKHRoaXMuX2Z1bGxzY3JlZW49IXRoaXMuX2Z1bGxzY3JlZW4sdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuX2NsYXNzTmFtZStcIi1zaHJpbmtcIiksdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuX2NsYXNzTmFtZStcIi1mdWxsc2NyZWVuXCIpKTt9LGNuLnByb3RvdHlwZS5fb25DbGlja0Z1bGxzY3JlZW49ZnVuY3Rpb24oKXt0aGlzLl9pc0Z1bGxzY3JlZW4oKT90LmRlZmF1bHQkMS5kb2N1bWVudC5leGl0RnVsbHNjcmVlbj90LmRlZmF1bHQkMS5kb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOnQuZGVmYXVsdCQxLmRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4/dC5kZWZhdWx0JDEuZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOnQuZGVmYXVsdCQxLmRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4/dC5kZWZhdWx0JDEuZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpOnQuZGVmYXVsdCQxLmRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW4mJnQuZGVmYXVsdCQxLmRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTp0aGlzLl9tYXBDb250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4/dGhpcy5fbWFwQ29udGFpbmVyLnJlcXVlc3RGdWxsc2NyZWVuKCk6dGhpcy5fbWFwQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuP3RoaXMuX21hcENvbnRhaW5lci5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOnRoaXMuX21hcENvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuP3RoaXMuX21hcENvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuKCk6dGhpcy5fbWFwQ29udGFpbmVyLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuJiZ0aGlzLl9tYXBDb250YWluZXIud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTt9O3ZhciB1bj17Y2xvc2VCdXR0b246ITAsY2xvc2VPbkNsaWNrOiEwLGNsYXNzTmFtZTpcIlwifSxobj1mdW5jdGlvbihlKXtmdW5jdGlvbiBuKGkpe2UuY2FsbCh0aGlzKSx0aGlzLm9wdGlvbnM9dC5leHRlbmQoT2JqZWN0LmNyZWF0ZSh1biksaSksdC5iaW5kQWxsKFtcIl91cGRhdGVcIixcIl9vbkNsaWNrQ2xvc2VcIl0sdGhpcyk7fXJldHVybiBlJiYobi5fX3Byb3RvX189ZSksbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSksbi5wcm90b3R5cGUuY29uc3RydWN0b3I9bixuLnByb3RvdHlwZS5hZGRUbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwPWUsdGhpcy5fbWFwLm9uKFwibW92ZVwiLHRoaXMuX3VwZGF0ZSksdGhpcy5vcHRpb25zLmNsb3NlT25DbGljayYmdGhpcy5fbWFwLm9uKFwiY2xpY2tcIix0aGlzLl9vbkNsaWNrQ2xvc2UpLHRoaXMuX3VwZGF0ZSgpLHRoaXMuZmlyZShuZXcgdC5FdmVudChcIm9wZW5cIikpLHRoaXN9LG4ucHJvdG90eXBlLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fbWFwfSxuLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGVudCYmaS5yZW1vdmUodGhpcy5fY29udGVudCksdGhpcy5fY29udGFpbmVyJiYoaS5yZW1vdmUodGhpcy5fY29udGFpbmVyKSxkZWxldGUgdGhpcy5fY29udGFpbmVyKSx0aGlzLl9tYXAmJih0aGlzLl9tYXAub2ZmKFwibW92ZVwiLHRoaXMuX3VwZGF0ZSksdGhpcy5fbWFwLm9mZihcImNsaWNrXCIsdGhpcy5fb25DbGlja0Nsb3NlKSxkZWxldGUgdGhpcy5fbWFwKSx0aGlzLmZpcmUobmV3IHQuRXZlbnQoXCJjbG9zZVwiKSksdGhpc30sbi5wcm90b3R5cGUuZ2V0TG5nTGF0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xuZ0xhdH0sbi5wcm90b3R5cGUuc2V0TG5nTGF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sbmdMYXQ9Qi5jb252ZXJ0KHQpLHRoaXMuX3Bvcz1udWxsLHRoaXMuX3VwZGF0ZSgpLHRoaXN9LG4ucHJvdG90eXBlLnNldFRleHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2V0RE9NQ29udGVudCh0LmRlZmF1bHQkMS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKSl9LG4ucHJvdG90eXBlLnNldEhUTUw9ZnVuY3Rpb24oZSl7dmFyIGksbj10LmRlZmF1bHQkMS5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbz10LmRlZmF1bHQkMS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYm9keVwiKTtmb3Ioby5pbm5lckhUTUw9ZTtpPW8uZmlyc3RDaGlsZDspbi5hcHBlbmRDaGlsZChpKTtyZXR1cm4gdGhpcy5zZXRET01Db250ZW50KG4pfSxuLnByb3RvdHlwZS5zZXRET01Db250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jcmVhdGVDb250ZW50KCksdGhpcy5fY29udGVudC5hcHBlbmRDaGlsZCh0KSx0aGlzLl91cGRhdGUoKSx0aGlzfSxuLnByb3RvdHlwZS5fY3JlYXRlQ29udGVudD1mdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJmkucmVtb3ZlKHRoaXMuX2NvbnRlbnQpLHRoaXMuX2NvbnRlbnQ9aS5jcmVhdGUoXCJkaXZcIixcIm1hcGJveGdsLXBvcHVwLWNvbnRlbnRcIix0aGlzLl9jb250YWluZXIpLHRoaXMub3B0aW9ucy5jbG9zZUJ1dHRvbiYmKHRoaXMuX2Nsb3NlQnV0dG9uPWkuY3JlYXRlKFwiYnV0dG9uXCIsXCJtYXBib3hnbC1wb3B1cC1jbG9zZS1idXR0b25cIix0aGlzLl9jb250ZW50KSx0aGlzLl9jbG9zZUJ1dHRvbi50eXBlPVwiYnV0dG9uXCIsdGhpcy5fY2xvc2VCdXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLFwiQ2xvc2UgcG9wdXBcIiksdGhpcy5fY2xvc2VCdXR0b24uaW5uZXJIVE1MPVwiJiMyMTU7XCIsdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25DbGlja0Nsb3NlKSk7fSxuLnByb3RvdHlwZS5fdXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLl9tYXAmJnRoaXMuX2xuZ0xhdCYmdGhpcy5fY29udGVudCl7dGhpcy5fY29udGFpbmVyfHwodGhpcy5fY29udGFpbmVyPWkuY3JlYXRlKFwiZGl2XCIsXCJtYXBib3hnbC1wb3B1cFwiLHRoaXMuX21hcC5nZXRDb250YWluZXIoKSksdGhpcy5fdGlwPWkuY3JlYXRlKFwiZGl2XCIsXCJtYXBib3hnbC1wb3B1cC10aXBcIix0aGlzLl9jb250YWluZXIpLHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jb250ZW50KSx0aGlzLm9wdGlvbnMuY2xhc3NOYW1lJiZ0aGlzLm9wdGlvbnMuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZCh0KX0pKSx0aGlzLl9tYXAudHJhbnNmb3JtLnJlbmRlcldvcmxkQ29waWVzJiYodGhpcy5fbG5nTGF0PVlpKHRoaXMuX2xuZ0xhdCx0aGlzLl9wb3MsdGhpcy5fbWFwLnRyYW5zZm9ybSkpO3ZhciBuPXRoaXMuX3Bvcz10aGlzLl9tYXAucHJvamVjdCh0aGlzLl9sbmdMYXQpLG89dGhpcy5vcHRpb25zLmFuY2hvcixyPWZ1bmN0aW9uIGUoaSl7aWYoaSl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGkpe3ZhciBuPU1hdGgucm91bmQoTWF0aC5zcXJ0KC41Kk1hdGgucG93KGksMikpKTtyZXR1cm57Y2VudGVyOm5ldyB0LmRlZmF1bHQoMCwwKSx0b3A6bmV3IHQuZGVmYXVsdCgwLGkpLFwidG9wLWxlZnRcIjpuZXcgdC5kZWZhdWx0KG4sbiksXCJ0b3AtcmlnaHRcIjpuZXcgdC5kZWZhdWx0KC1uLG4pLGJvdHRvbTpuZXcgdC5kZWZhdWx0KDAsLWkpLFwiYm90dG9tLWxlZnRcIjpuZXcgdC5kZWZhdWx0KG4sLW4pLFwiYm90dG9tLXJpZ2h0XCI6bmV3IHQuZGVmYXVsdCgtbiwtbiksbGVmdDpuZXcgdC5kZWZhdWx0KGksMCkscmlnaHQ6bmV3IHQuZGVmYXVsdCgtaSwwKX19aWYoaSBpbnN0YW5jZW9mIHQuZGVmYXVsdHx8QXJyYXkuaXNBcnJheShpKSl7dmFyIG89dC5kZWZhdWx0LmNvbnZlcnQoaSk7cmV0dXJue2NlbnRlcjpvLHRvcDpvLFwidG9wLWxlZnRcIjpvLFwidG9wLXJpZ2h0XCI6byxib3R0b206byxcImJvdHRvbS1sZWZ0XCI6byxcImJvdHRvbS1yaWdodFwiOm8sbGVmdDpvLHJpZ2h0Om99fXJldHVybntjZW50ZXI6dC5kZWZhdWx0LmNvbnZlcnQoaS5jZW50ZXJ8fFswLDBdKSx0b3A6dC5kZWZhdWx0LmNvbnZlcnQoaS50b3B8fFswLDBdKSxcInRvcC1sZWZ0XCI6dC5kZWZhdWx0LmNvbnZlcnQoaVtcInRvcC1sZWZ0XCJdfHxbMCwwXSksXCJ0b3AtcmlnaHRcIjp0LmRlZmF1bHQuY29udmVydChpW1widG9wLXJpZ2h0XCJdfHxbMCwwXSksYm90dG9tOnQuZGVmYXVsdC5jb252ZXJ0KGkuYm90dG9tfHxbMCwwXSksXCJib3R0b20tbGVmdFwiOnQuZGVmYXVsdC5jb252ZXJ0KGlbXCJib3R0b20tbGVmdFwiXXx8WzAsMF0pLFwiYm90dG9tLXJpZ2h0XCI6dC5kZWZhdWx0LmNvbnZlcnQoaVtcImJvdHRvbS1yaWdodFwiXXx8WzAsMF0pLGxlZnQ6dC5kZWZhdWx0LmNvbnZlcnQoaS5sZWZ0fHxbMCwwXSkscmlnaHQ6dC5kZWZhdWx0LmNvbnZlcnQoaS5yaWdodHx8WzAsMF0pfX1yZXR1cm4gZShuZXcgdC5kZWZhdWx0KDAsMCkpfSh0aGlzLm9wdGlvbnMub2Zmc2V0KTtpZighbyl7dmFyIGEscz10aGlzLl9jb250YWluZXIub2Zmc2V0V2lkdGgsbD10aGlzLl9jb250YWluZXIub2Zmc2V0SGVpZ2h0O2E9bi55K3IuYm90dG9tLnk8bD9bXCJ0b3BcIl06bi55PnRoaXMuX21hcC50cmFuc2Zvcm0uaGVpZ2h0LWw/W1wiYm90dG9tXCJdOltdLG4ueDxzLzI/YS5wdXNoKFwibGVmdFwiKTpuLng+dGhpcy5fbWFwLnRyYW5zZm9ybS53aWR0aC1zLzImJmEucHVzaChcInJpZ2h0XCIpLG89MD09PWEubGVuZ3RoP1wiYm90dG9tXCI6YS5qb2luKFwiLVwiKTt9dmFyIGM9bi5hZGQocltvXSkucm91bmQoKTtpLnNldFRyYW5zZm9ybSh0aGlzLl9jb250YWluZXIsSmlbb10rXCIgdHJhbnNsYXRlKFwiK2MueCtcInB4LFwiK2MueStcInB4KVwiKSxRaSh0aGlzLl9jb250YWluZXIsbyxcInBvcHVwXCIpO319LG4ucHJvdG90eXBlLl9vbkNsaWNrQ2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZSgpO30sbn0odC5FdmVudGVkKTt2YXIgcG49e3ZlcnNpb246XCIwLjQ2LjAtYmV0YS4xXCIsc3VwcG9ydGVkOmUsd29ya2VyQ291bnQ6TWF0aC5tYXgoTWF0aC5mbG9vcih0LmRlZmF1bHQkMi5oYXJkd2FyZUNvbmN1cnJlbmN5LzIpLDEpLHNldFJUTFRleHRQbHVnaW46dC5zZXRSVExUZXh0UGx1Z2luLE1hcDpxaSxOYXZpZ2F0aW9uQ29udHJvbDpLaSxHZW9sb2NhdGVDb250cm9sOm9uLEF0dHJpYnV0aW9uQ29udHJvbDpVaSxTY2FsZUNvbnRyb2w6YW4sRnVsbHNjcmVlbkNvbnRyb2w6Y24sUG9wdXA6aG4sTWFya2VyOmVuLFN0eWxlOlVlLExuZ0xhdDpCLExuZ0xhdEJvdW5kczpPLFBvaW50OnQuZGVmYXVsdCxFdmVudGVkOnQuRXZlbnRlZCxjb25maWc6aCxnZXQgYWNjZXNzVG9rZW4oKXtyZXR1cm4gaC5BQ0NFU1NfVE9LRU59LHNldCBhY2Nlc3NUb2tlbih0KXtoLkFDQ0VTU19UT0tFTj10O30sd29ya2VyVXJsOlwiXCJ9O3JldHVybiBwbn0pO1xuXG4vL1xuXG5yZXR1cm4gbWFwYm94Z2w7XG5cbn0pKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXBib3gtZ2wuanMubWFwXG4iLCIjIyNcbkR5bmFtaWNMb2FkZXIgTW9kdWxlIGZvciBGcmFtZXJKU1xuaHR0cHM6Ly9naXRodWIuY29tL0x1Y2llbkxlZS9mcmFtZXItRHluYW1pY0xvYWRlci9cblxuQ3JlYXRlZCBieSBMdWNpZW4gTGVlIChAbHVjaWVuZGVlciksIEphbi4gMTJ0aCwgMjAxNlxuXG5EeW5hbWljTG9hZGVyIGJyYWVrcyB0aGUgYmFycmlhcnMgYmV0d2VlbiAzcmQgcGFydHkgd2ViIGRldmVsb3BtZW50IGxpYnJhcmllcyBhbmQgRnJhbWVyLCB3aGljaFxuaGVscCB5b3UgbG9hZCBsb2NhbCwgZXh0ZXJuYWwgc3R5bGVzaGVldHMgYW5kIHNjcmlwdHMgZHluYW1pY2FsbHkuXG5cbkFkZCB0aGUgZm9sbG93aW5nIGxpbmUgdG8geW91ciBwcm9qZWN0IGluIEZyYW1lciBTdHVkaW8uXG5cdHtEeW5hbWljTG9hZGVyfSA9IHJlcXVpcmUgJ0R5bmFtaWNMb2FkZXInXG5cbltMb2FkIG9uZSBmaWxlXVxuRHluYW1pY0xvYWRlci5hZGQoJ3NjcmlwdC5qcycpLnRoZW4oLT5cbiMgd2hlbiBzY3JpcHQuanMgbG9hZGVkIHN1Y2Nlc3NmdWxseVxuLi4uXG4pLmNhdGNoKC0+XG4jIHdoZW4gc2NyaXB0LmpzIGxvYWRlZCBmYWlsZWRcbi4uLlxuKVxuXG5bTG9hZCBmaWxlIGluIHNlcmllc11cbkR5bmFtaWNMb2FkZXIuc2VyaWVzKFsnb25lLmpzJywgJ3R3by5jc3MnLCAuLi5dKS50aGVuKCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWxDYWxsYmFjayApXG5cbltMb2FkIGZpbGUgaW4gcGFyYWxsZWxdXG5EeW5hbWljTG9hZGVyLnNlcmllcyhbJ29uZS5qcycsICd0d28uY3NzJywgLi4uXSkudGhlbiggc3VjY2Vzc0NhbGxiYWNrLCBmYWlsQ2FsbGJhY2sgKVxuXG4jIyNcblxuXG5cblxuY2xhc3MgZXhwb3J0cy5EeW5hbWljTG9hZGVyXG5cblx0IyBQcm9taXNpZnkgc2luZ2xlIGR5bmFtaWMgc2NyaXB0IGxvYWRpbmdcblx0QGFkZCA9ICh1cmwpIC0+XG5cdFx0cHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpIC0+XG5cdFx0XHRpZiB1cmwuc3Vic3RyKCB1cmwubGFzdEluZGV4T2YoJy4nKSApIGlzIFwiLmpzXCJcblx0XHRcdFx0IyBsb2FkIHNjcmlwdCBvbmNlXG5cdFx0XHRcdGxvYWRlZCA9IEFycmF5LnByb3RvdHlwZS5maW5kLmNhbGwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpLCAoZWxlbWVudCkgLT5cblx0XHRcdFx0XHRpZiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnc3JjJykgaXMgdXJsIHRoZW4gcmV0dXJuIGVsZW1lbnRcblx0XHRcdFx0aWYgbG9hZGVkIGlzbnQgdW5kZWZpbmVkIHRoZW4gcmV0dXJuIHJlc29sdmUgJ2hhdmUgbG9hZGVkJ1xuXG5cdFx0XHRcdGZpbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICdzY3JpcHQnXG5cdFx0XHRcdGZpbGUuc3JjID0gdXJsXG5cdFx0XHRlbHNlIGlmIHVybC5zdWJzdHIoIHVybC5sYXN0SW5kZXhPZignLicpICkgaXMgXCIuY3NzXCJcblx0XHRcdFx0IyBsb2FkIHN0eWxlIG9uY2Vcblx0XHRcdFx0bG9hZGVkID0gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGluaycpLCAoZWxlbWVudCkgLT5cblx0XHRcdFx0XHRpZiBlbGVtZW50LmdldEF0dHJpYnV0ZSgncmVsJykgaXMgdXJsIHRoZW4gcmV0dXJuIGVsZW1lbnRcblx0XHRcdFx0aWYgbG9hZGVkIGlzbnQgdW5kZWZpbmVkIHRoZW4gcmV0dXJuIHJlc29sdmUgJ2hhdmUgbG9hZGVkJ1xuXG5cdFx0XHRcdGZpbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICdsaW5rJ1xuXHRcdFx0XHRmaWxlLnJlbCA9IFwic3R5bGVzaGVldFwiXG5cdFx0XHRcdGZpbGUuaHJlZiA9IHVybFxuXG5cdFx0XHRmaWxlLmFkZEV2ZW50TGlzdGVuZXIgJ2xvYWQnLCAtPlxuXHRcdFx0XHRyZXNvbHZlIGZpbGVcblx0XHRcdGZpbGUuYWRkRXZlbnRMaXN0ZW5lciAnZXJyb3InLCAtPlxuXHRcdFx0XHRyZWplY3QgZmlsZVxuXHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCBmaWxlXG5cdFx0KVxuXG5cdFx0cmV0dXJuIHByb21pc2VcblxuXHQjIER5bmFtaWMgZmlsZSBsb2FkaW5nIGluIHNlcmllc1xuXHRAc2VyaWVzID0gKHVybHMpIC0+XG5cdFx0aWYgIUFycmF5LmlzQXJyYXkodXJscykgb3IgdXJscy5sZW5ndGggaXMgMCB0aGVuIHRocm93IFwiRVJST1I6IE5PIFVSTCBJTiBBUlJBWSFcIlxuXG5cdFx0cmV0dXJuIHVybHMucmVkdWNlKFxuXHRcdFx0KHByb21pc2UsIHVybCkgPT5cblx0XHRcdFx0cmV0dXJuIHByb21pc2UudGhlbiggPT4gQGFkZCh1cmwpIClcblx0XHRcdCxcblx0XHRcdFByb21pc2UucmVzb2x2ZSgpKVxuXG5cdCMgRHluYW1pYyBmaWxlIGxvYWRpbmcgaW4gcGFyYWxsZWxcblx0QHBhcmFsbGVsID0gKHVybHMpIC0+XG5cdFx0aWYgIUFycmF5LmlzQXJyYXkodXJscykgb3IgdXJscy5sZW5ndGggaXMgMCB0aGVuIHRocm93IFwiRVJST1I6IE5PIFVSTCBJTiBBUlJBWSFcIlxuXG5cdFx0UHJvbWlzZS5hbGwoXG5cdFx0XHR1cmxzLm1hcCggKHVybCkgPT5cblx0XHRcdFx0cmV0dXJuIEBhZGQodXJsKVxuXHRcdCkpIiwicyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJ3NjcmlwdCdcbnMuc2V0QXR0cmlidXRlICdzcmMnLCAnaHR0cHM6Ly93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RhZy9qcz9pZD1VQS03NTA1NjUzMy0zJ1xucy5zZXRBdHRyaWJ1dGUgJ2FzeW5jJywgJydcbmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQgc1xuXG53aW5kb3cuZGF0YUxheWVyID0gd2luZG93LmRhdGFMYXllciB8fCBbXVxuXG53aW5kb3cuZ3RhZyA9ICgpIC0+IFxuICAgIGRhdGFMYXllci5wdXNoIGFyZ3VtZW50c1xud2luZG93Lmd0YWcgJ2pzJywgbmV3IERhdGUoKVxud2luZG93Lmd0YWcgJ2NvbmZpZycsICdVQS03NTA1NjUzMy0zJ1xuXG5pZiB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcyAnZnJhbWVyLmNsb3VkJ1xuICAgIHdpbmRvdy5ndGFnICdldmVudCcsICdDbG91ZCcsXG4gICAgICAgICdldmVudF9jYXRlZ29yeSc6ICdWaXNpdG9ycydcbmVsc2VcbiAgICB3aW5kb3cuZ3RhZyAnZXZlbnQnLCAnTm9uLUNsb3VkJyxcbiAgICAgICAgJ2V2ZW50X2NhdGVnb3J5JzogJ1Zpc2l0b3JzJyIsIl8gPSBGcmFtZXIuX1xuXG57QmFzZUNsYXNzfSA9IHJlcXVpcmUgJy4vX0Jhc2VDbGFzcy5jb2ZmZWUnXG57QW5pbWF0aW9ufSA9IHJlcXVpcmUgJy4vX0FuaW1hdGlvbi5jb2ZmZWUnXG57U3RhdGVzfSA9IHJlcXVpcmUgJy4vX1N0YXRlcy5jb2ZmZWUnXG5cbmNsYXNzIGV4cG9ydHMuTGlnaHQgZXh0ZW5kcyBCYXNlQ2xhc3NcbiAgICBjb25zdHJ1Y3RvcjogKHByb3BlcnRpZXMpIC0+XG4gICAgICAgIHN1cGVyKClcblxuICAgICAgICBpZiAhcHJvcGVydGllcy50eXBlXG4gICAgICAgICAgICB0aHJvdyBFcnJvciAnUGxlYXNlIHNwZWNpZnkgYSBsaWdodCB0eXBlISdcbiAgICAgICAgXG4gICAgICAgIEBwcm9wZXJ0aWVzID0gXy5kZWZhdWx0cyBwcm9wZXJ0aWVzLFxuICAgICAgICAgICAgY2FzdFNoYWRvdzogdHJ1ZVxuXG4gICAgICAgIEBzZXR1cExpZ2h0KClcblxuICAgIHNldHVwTGlnaHQ6IC0+XG4gICAgICAgIHN3aXRjaCBAcHJvcGVydGllcy50eXBlXG4gICAgICAgICAgICB3aGVuICdwb2ludCdcbiAgICAgICAgICAgICAgICBAbGlnaHQgPSBuZXcgVEhSRUUuUG9pbnRMaWdodChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLkNvbG9yIEBwcm9wZXJ0aWVzLmNvbG9yLCBcbiAgICAgICAgICAgICAgICAgICAgQHByb3BlcnRpZXMuaW50ZW5zaXR5LCBcbiAgICAgICAgICAgICAgICAgICAgQHByb3BlcnRpZXMuZGlzdGFuY2UsIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5kZWNheVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIHdoZW4gJ2RpcmVjdGlvbmFsJ1xuICAgICAgICAgICAgICAgIEBsaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KFxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuQ29sb3IgQHByb3BlcnRpZXMuY29sb3IsIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5pbnRlbnNpdHlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB3aGVuICdhbWJpZW50J1xuICAgICAgICAgICAgICAgIEBsaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUSFJFRS5Db2xvciBAcHJvcGVydGllcy5jb2xvciwgXG4gICAgICAgICAgICAgICAgICAgIEBwcm9wZXJ0aWVzLmludGVuc2l0eVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIHdoZW4gJ2hlbWlzcGhlcmUnXG4gICAgICAgICAgICAgICAgQGxpZ2h0ID0gbmV3IFRIUkVFLkhlbWlzcGhlcmVMaWdodChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLkNvbG9yIEBwcm9wZXJ0aWVzLnNreUNvbG9yLCBcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLkNvbG9yIEBwcm9wZXJ0aWVzLmdyb3VuZENvbG9yLCBcbiAgICAgICAgICAgICAgICAgICAgQHByb3BlcnRpZXMuaW50ZW5zaXR5XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgd2hlbiAncmVjdGFyZWEnXG4gICAgICAgICAgICAgICAgQGxpZ2h0ID0gbmV3IFRIUkVFLlJlY3RBcmVhTGlnaHQoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUSFJFRS5Db2xvciBAcHJvcGVydGllcy5jb2xvciwgXG4gICAgICAgICAgICAgICAgICAgIEBwcm9wZXJ0aWVzLmludGVuc2l0eSwgXG4gICAgICAgICAgICAgICAgICAgIEBwcm9wZXJ0aWVzLndpZHRoLCBcbiAgICAgICAgICAgICAgICAgICAgQHByb3BlcnRpZXMuaGVpZ2h0XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgd2hlbiAnc3BvdCdcbiAgICAgICAgICAgICAgICBAbGlnaHQgPSBuZXcgVEhSRUUuU3BvdExpZ2h0KFxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuQ29sb3IgQHByb3BlcnRpZXMuY29sb3IsIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5pbnRlbnNpdHksIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5kaXN0YW5jZSwgXG4gICAgICAgICAgICAgICAgICAgIEBwcm9wZXJ0aWVzLmFuZ2xlLCBcbiAgICAgICAgICAgICAgICAgICAgQHByb3BlcnRpZXMucGVudW1icmEsIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5kZWNheVxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICBAYWRkVG9SZW5kZXJpbmdJbnN0YW5jZSBAcHJvcGVydGllcy5wYXJlbnRcblxuICAgICAgICBAYXBwbHlQcm9wZXJ0aWVzKClcblxuICAgICAgICBAc2F2ZUluaXRpYWxQcm9wZXJ0aWVzKClcbiAgICAgICAgXG4gICAgICAgIEBfc3RhdGVzID0gbmV3IFN0YXRlcyBAXG5cbiAgICBhZGRUb1JlbmRlcmluZ0luc3RhbmNlOiAocGFyZW50KSAtPlxuICAgICAgICBpZiBwYXJlbnQuc2NlbmUgdGhlbiBwYXJlbnQuc2NlbmUuYWRkIEBsaWdodFxuICAgICAgICBlbHNlIHBhcmVudC5hZGQgQGxpZ2h0XG4gICAgXG4gICAgYXBwbHlQcm9wZXJ0aWVzOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgT2JqZWN0LmtleXMoQHByb3BlcnRpZXMpLm1hcCAoaykgPT5cbiAgICAgICAgICAgIEBba10gPSBAcHJvcGVydGllc1trXVxuXG4gICAgc2F2ZUluaXRpYWxQcm9wZXJ0aWVzOiAoKSAtPlxuICAgICAgICBAaW5pdGlhbFByb3BlcnRpZXMgPSBAXG5cbiAgICBvbjogKGV2ZW50TmFtZSwgY2IpIC0+XG5cbiAgICAgICAgaWYgZXZlbnROYW1lLmluY2x1ZGVzICdjaGFuZ2UnXG4gICAgICAgICAgICBjYWxsYmFjayA9IChlKSAtPiBjYihlLnZhbHVlKVxuICAgICAgICAgICAgQGxpZ2h0LmFkZEV2ZW50TGlzdGVuZXIgZXZlbnROYW1lLCBjYWxsYmFja1xuXG4gICAgICAgICAgICBGcmFtZXIuQ3VycmVudENvbnRleHQub24gJ3Jlc2V0JywgPT5cbiAgICAgICAgICAgICAgICBAbGlnaHQucmVtb3ZlRXZlbnRMaXN0ZW5lciBldmVudE5hbWUsIGNhbGxiYWNrXG5cbiAgICBhbmltYXRlOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgbmV3IEFuaW1hdGlvbiBALCBwcm9wZXJ0aWVzXG4gICAgXG4gICAgbG9va0F0OiAoYSwgYiwgYykgLT5cbiAgICAgICAgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAxXG4gICAgICAgICAgICBAbGlnaHQubG9va0F0IGFcbiAgICAgICAgZWxzZSBpZiBhcmd1bWVudHMubGVuZ3RoID09IDNcbiAgICAgICAgICAgIEBsaWdodC5sb29rQXQgYSwgYiwgY1xuXG4gICAgc3RhdGVTd2l0Y2g6IChzdGF0ZSkgLT5cbiAgICAgICAgIyBMb29wIHRocm91Z2ggc3RhdGVzIG9uIG1vZGVsIHRvIGZpbmQgdGhlIHNwZWNpZmllZCBvbmVcbiAgICAgICAgT2JqZWN0LmtleXMoQHN0YXRlcykubWFwIChrKSA9PiBcbiAgICAgICAgICAgIGlmIGsgPT0gc3RhdGVcbiAgICAgICAgICAgICAgICBAc3RhdGVzLmN1cnJlbnQgPSBAc3RhdGVzW2tdXG5cbiAgICAgICAgICAgICAgICAjIExvb3AgdGhyb3VnaCBwcm9wZXJ0eSBrZXlzIG9uIHRoZSBzdGF0ZSBhbmQgYXBwbHkgdGhlIHZhbHVlcyB0byBtb2RlbFxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKEBzdGF0ZXMuY3VycmVudCkubWFwIChwaykgID0+XG4gICAgICAgICAgICAgICAgICAgIEBbcGtdID0gQHN0YXRlcy5jdXJyZW50W3BrXVxuICAgIFxuICAgIHN0YXRlQ3ljbGU6IChzdGF0ZUEsIHN0YXRlQikgLT5cbiAgICAgICAgaWYgYXJndW1lbnRzLmxlbmd0aFxuXG4gICAgICAgICAgICBmb3IgcywgaSBpbiBhcmd1bWVudHNcbiAgICAgICAgICAgICAgICBpZiBfLmlzRXF1YWwgQHN0YXRlc1tzXSwgQHN0YXRlcy5jdXJyZW50XG4gICAgICAgICAgICAgICAgICAgIGlmIGkgPT0gKGFyZ3VtZW50cy5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFN0YXRlID0gMFxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0U3RhdGUgPSBpICsgMVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiBuZXh0U3RhdGUgPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgbmV4dFN0YXRlID0gMFxuXG4gICAgICAgICAgICBAYW5pbWF0ZSBhcmd1bWVudHNbbmV4dFN0YXRlXVxuXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHN0YXRlcyA9IE9iamVjdC5rZXlzKEBzdGF0ZXMpXG4gICAgICAgICAgICBzdGF0ZXMuc3BsaWNlKDEsIDEpXG5cbiAgICAgICAgICAgIGZvciBzLCBpIGluIHN0YXRlc1xuICAgICAgICAgICAgICAgIGlmIF8uaXNFcXVhbCBAc3RhdGVzW3NdLCBAc3RhdGVzLmN1cnJlbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgaSA9PSAoc3RhdGVzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0U3RhdGUgPSAwXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTdGF0ZSA9IGkgKyAxXG5cbiAgICAgICAgICAgIEBhbmltYXRlIHN0YXRlc1tuZXh0U3RhdGVdXG5cblxuICAgICMgR0VORVJJQyBPQkpFQ1QzRCBQUk9QRVJUSUVTXG5cbiAgICBAZGVmaW5lICdwb3NpdGlvbicsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LnBvc2l0aW9uXG5cbiAgICBAZGVmaW5lICd4JyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQucG9zaXRpb24ueCxcbiAgICAgICAgc2V0OiAoeCkgLT4gXG4gICAgICAgICAgICBAbGlnaHQucG9zaXRpb24ueCA9IHhcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOngnLCB2YWx1ZTogQHh9XG4gICAgXG4gICAgQGRlZmluZSAneScsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LnBvc2l0aW9uLnksXG4gICAgICAgIHNldDogKHkpIC0+IFxuICAgICAgICAgICAgQGxpZ2h0LnBvc2l0aW9uLnkgPSB5XG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp5JywgdmFsdWU6IEB5fVxuICAgIFxuICAgIEBkZWZpbmUgJ3onLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5wb3NpdGlvbi56LFxuICAgICAgICBzZXQ6ICh6KSAtPiBcbiAgICAgICAgICAgIEBsaWdodC5wb3NpdGlvbi56ID0gelxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6eicsIHZhbHVlOiBAen1cblxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uJyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQucm90YXRpb25cblxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uWCcsXG4gICAgICAgIGdldDogLT4gVEhSRUUuTWF0aC5yYWRUb0RlZyhAbGlnaHQucm90YXRpb24ueCksXG4gICAgICAgIHNldDogKHgpIC0+IFxuICAgICAgICAgICAgQGxpZ2h0LnJvdGF0aW9uLnggPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKHgpXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpyb3RhdGlvblgnLCB2YWx1ZTogQHJvdGF0aW9uWH1cbiAgICBcbiAgICBAZGVmaW5lICdyb3RhdGlvblknLFxuICAgICAgICBnZXQ6IC0+IFRIUkVFLk1hdGgucmFkVG9EZWcoQGxpZ2h0LnJvdGF0aW9uLnkpLFxuICAgICAgICBzZXQ6ICh5KSAtPiBcbiAgICAgICAgICAgIEBsaWdodC5yb3RhdGlvbi55ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCh5KVxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6cm90YXRpb25ZJywgdmFsdWU6IEByb3RhdGlvbll9XG4gICAgXG4gICAgQGRlZmluZSAncm90YXRpb25aJyxcbiAgICAgICAgZ2V0OiAtPiBUSFJFRS5NYXRoLnJhZFRvRGVnKEBsaWdodC5yb3RhdGlvbi56KSxcbiAgICAgICAgc2V0OiAoeikgLT4gXG4gICAgICAgICAgICBAbGlnaHQucm90YXRpb24ueiA9IFRIUkVFLk1hdGguZGVnVG9SYWQoeilcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnJvdGF0aW9uWicsIHZhbHVlOiBAcm90YXRpb25afVxuICAgIFxuICAgIEBkZWZpbmUgJ3Zpc2libGUnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC52aXNpYmxlXG4gICAgICAgIHNldDogKGJvb2wpIC0+IFxuICAgICAgICAgICAgQGxpZ2h0LnZpc2libGUgPSBib29sXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp2aXNpYmxlJywgdmFsdWU6IEB2aXNpYmxlfVxuICAgIFxuICAgIEBkZWZpbmUgJ3N0YXRlcycsXG4gICAgICAgIGdldDogLT5cbiAgICAgICAgICAgIEBfc3RhdGVzLnN0YXRlc1xuICAgICAgICBzZXQ6IChzdGF0ZXMpIC0+XG4gICAgICAgICAgICBfLmV4dGVuZCBAc3RhdGVzLCBzdGF0ZXNcblxuICAgICMgTElHSFQgUFJPUEVSVElFU1xuXG4gICAgQGRlZmluZSAnY29sb3InLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5jb2xvclxuICAgICAgICBzZXQ6IChjb2xvcikgLT5cbiAgICAgICAgICAgIEBsaWdodC5jb2xvciA9IG5ldyBUSFJFRS5Db2xvciBjb2xvclxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6Y29sb3InLCB2YWx1ZTogQGNvbG9yfVxuICAgIFxuICAgIEBkZWZpbmUgJ2ludGVuc2l0eScsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LmludGVuc2l0eVxuICAgICAgICBzZXQ6IChpbnRlbnNpdHkpIC0+XG4gICAgICAgICAgICBAbGlnaHQuaW50ZW5zaXR5ID0gaW50ZW5zaXR5XG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTppbnRlbnNpdHknLCB2YWx1ZTogQGludGVuc2l0eX1cblxuICAgIEBkZWZpbmUgJ2FuZ2xlJyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQuYW5nbGVcbiAgICAgICAgc2V0OiAoYW5nbGUpIC0+XG4gICAgICAgICAgICBAbGlnaHQuYW5nbGUgPSBhbmdsZVxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6YW5nbGUnLCB2YWx1ZTogQGFuZ2xlfVxuICAgIFxuICAgIEBkZWZpbmUgJ2Nhc3RTaGFkb3cnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5jYXN0U2hhZG93XG4gICAgICAgIHNldDogKGJvb2wpIC0+XG4gICAgICAgICAgICBAbGlnaHQuY2FzdFNoYWRvdyA9IGJvb2xcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmNhc3RTaGFkb3cnLCB2YWx1ZTogQGNhc3RTaGFkb3d9XG4gICAgXG4gICAgQGRlZmluZSAnZGVjYXknLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5kZWNheVxuICAgICAgICBzZXQ6IChkZWNheSkgLT5cbiAgICAgICAgICAgIEBsaWdodC5kZWNheSA9IGRlY2F5XG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpkZWNheScsIHZhbHVlOiBAZGVjYXl9XG4gICAgXG4gICAgQGRlZmluZSAnZGlzdGFuY2UnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5kaXN0YW5jZVxuICAgICAgICBzZXQ6IChkaXN0YW5jZSkgLT5cbiAgICAgICAgICAgIEBsaWdodC5kaXN0YW5jZSA9IGRpc3RhbmNlXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpkaXN0YW5jZScsIHZhbHVlOiBAZGlzdGFuY2V9XG4gICAgXG4gICAgQGRlZmluZSAncGVudW1icmEnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5wZW51bWJyYVxuICAgICAgICBzZXQ6IChwZW51bWJyYSkgLT5cbiAgICAgICAgICAgIEBsaWdodC5wZW51bWJyYSA9IHBlbnVtYnJhXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpwZW51bWJyYScsIHZhbHVlOiBAcGVudW1icmF9XG4gICAgXG4gICAgQGRlZmluZSAncG93ZXInLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5wb3dlclxuICAgICAgICBzZXQ6IChwb3dlcikgLT5cbiAgICAgICAgICAgIEBsaWdodC5wb3dlciA9IHBvd2VyXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpwb3dlcicsIHZhbHVlOiBAcG93ZXJ9XG4gICAgXG4gICAgQGRlZmluZSAnc2hhZG93JyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQuc2hhZG93XG4gICAgICAgIHNldDogKHNoYWRvdykgLT5cbiAgICAgICAgICAgIEBsaWdodC5zaGFkb3cgPSBzaGFkb3dcbiAgICBcbiAgICBAZGVmaW5lICd0YXJnZXQnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC50YXJnZXRcbiAgICAgICAgc2V0OiAodGFyZ2V0KSAtPlxuICAgICAgICAgICAgQGxpZ2h0LnRhcmdldCA9IHRhcmdldFxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6dGFyZ2V0JywgdmFsdWU6IEB0YXJnZXR9XG4gICAgXG4gICAgQGRlZmluZSAnd2lkdGgnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC53aWR0aFxuICAgICAgICBzZXQ6ICh3aWR0aCkgLT5cbiAgICAgICAgICAgIEBsaWdodC53aWR0aCA9IHdpZHRoXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp3aWR0aCcsIHZhbHVlOiBAd2lkdGh9XG4gICAgXG4gICAgQGRlZmluZSAnaGVpZ2h0JyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQuaGVpZ2h0XG4gICAgICAgIHNldDogKGhlaWdodCkgLT5cbiAgICAgICAgICAgIEBsaWdodC5oZWlnaHQgPSBoZWlnaHRcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmhlaWdodCcsIHZhbHVlOiBAaGVpZ2h0fVxuICAgIFxuICAgIEBkZWZpbmUgJ2dyb3VuZENvbG9yJyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQuZ3JvdW5kQ29sb3JcbiAgICAgICAgc2V0OiAoZ3JvdW5kQ29sb3IpIC0+XG4gICAgICAgICAgICBAbGlnaHQuZ3JvdW5kQ29sb3IgPSBuZXcgVEhSRUUuQ29sb3IgZ3JvdW5kQ29sb3JcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmdyb3VuZENvbG9yJywgdmFsdWU6IEBncm91bmRDb2xvcn1cbiAgICBcbiAgICBAZGVmaW5lICdza3lDb2xvcicsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LnNreUNvbG9yXG4gICAgICAgIHNldDogKHNreUNvbG9yKSAtPlxuICAgICAgICAgICAgQGxpZ2h0LnNreUNvbG9yID0gbmV3IFRIUkVFLkNvbG9yIHNreUNvbG9yXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpza3lDb2xvcicsIHZhbHVlOiBAc2t5Q29sb3J9IiwiXyA9IEZyYW1lci5fXG5cbmNsYXNzIGV4cG9ydHMuTWVzaCBleHRlbmRzIFRIUkVFLk1lc2hcblxuICAgIEBkZWZpbmUgPSAocHJvcGVydHlOYW1lLCBkZXNjcmlwdG9yKSAtPlxuICAgICAgICBpZiBkZXNjcmlwdG9yLnJlYWRvbmx5XG4gICAgICAgICAgICBkZXNjcmlwdG9yLnNldCA9ICh2YWx1ZSkgLT5cbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIiN7QGNvbnN0cnVjdG9yLm5hbWV9LiN7cHJvcGVydHlOYW1lfSBpcyByZWFkb25seVwiKVxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShAcHJvdG90eXBlLCBwcm9wZXJ0eU5hbWUsIGRlc2NyaXB0b3IpXG5cbiAgICBjb25zdHJ1Y3RvcjogKHByb3BlcnRpZXM9e30pIC0+XG4gICAgICAgIHN1cGVyIHByb3BlcnRpZXMuZ2VvbWV0cnksIHByb3BlcnRpZXMubWF0ZXJpYWxcblxuICAgICAgICBfLmRlZmF1bHRzIHByb3BlcnRpZXMsXG4gICAgICAgICAgICBjYXN0U2hhZG93OiB0cnVlXG4gICAgICAgICAgICByZWNlaXZlU2hhZG93OiB0cnVlXG5cbiAgICAgICAgQHNldHVwU2hhZG93U2V0dGluZ3MgcHJvcGVydGllc1xuXG4gICAgICAgIGlmIHByb3BlcnRpZXMucGFyZW50XG4gICAgICAgICAgICBAYWRkVG9SZW5kZXJpbmdJbnN0YW5jZSBwcm9wZXJ0aWVzLnBhcmVudFxuICAgICAgICBcbiAgICAgICAgQHNldFNjYWxlIHByb3BlcnRpZXMuc2NhbGUsIHByb3BlcnRpZXMuc2NhbGVYLCBwcm9wZXJ0aWVzLnNjYWxlWSwgcHJvcGVydGllcy5zY2FsZVpcbiAgICAgICAgQHNldFBvc2l0aW9uIFtwcm9wZXJ0aWVzLngsIHByb3BlcnRpZXMueSwgcHJvcGVydGllcy56XVxuICAgICAgICBAc2V0Um90YXRpb24gW3Byb3BlcnRpZXMucm90YXRpb25YLCBwcm9wZXJ0aWVzLnJvdGF0aW9uWSwgcHJvcGVydGllcy5yb3RhdGlvblpdXG5cbiAgICBzZXR1cFNoYWRvd1NldHRpbmdzOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgQGNhc3RTaGFkb3cgPSBwcm9wZXJ0aWVzLmNhc3RTaGFkb3dcbiAgICAgICAgQHJlY2VpdmVTaGFkb3cgPSBwcm9wZXJ0aWVzLnJlY2VpdmVTaGFkb3dcblxuICAgIGFkZFRvUmVuZGVyaW5nSW5zdGFuY2U6IChwYXJlbnQpIC0+XG4gICAgICAgIGlmIHBhcmVudC5zY2VuZSB0aGVuIHBhcmVudC5zY2VuZS5hZGQgQFxuICAgICAgICBlbHNlIHBhcmVudC5hZGQgQFxuXG4gICAgc2V0U2NhbGU6ICh1bmlmb3JtU2NhbGUsIHNjYWxlWCwgc2NhbGVZLCBzY2FsZVopIC0+XG4gICAgICAgIGlmIHVuaWZvcm1TY2FsZVxuICAgICAgICAgICAgQHNjYWxlID0gdW5pZm9ybVNjYWxlIHx8IDFcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQHNjYWxlWCA9IHNjYWxlWCB8fCAxXG4gICAgICAgICAgICBAc2NhbGVZID0gc2NhbGVZIHx8IDFcbiAgICAgICAgICAgIEBzY2FsZVogPSBzY2FsZVogfHwgMVxuICAgIFxuICAgIHNldFBvc2l0aW9uOiAocG9zaXRpb24pIC0+XG4gICAgICAgIEB4ID0gcG9zaXRpb25bMF0gfHwgMFxuICAgICAgICBAeSA9IHBvc2l0aW9uWzFdIHx8IDBcbiAgICAgICAgQHogPSBwb3NpdGlvblsyXSB8fCAwXG5cbiAgICBzZXRSb3RhdGlvbjogKHJvdGF0aW9uKSAtPlxuICAgICAgICBAcm90YXRpb25YID0gcm90YXRpb25bMF0gfHwgMFxuICAgICAgICBAcm90YXRpb25ZID0gcm90YXRpb25bMV0gfHwgMFxuICAgICAgICBAcm90YXRpb25aID0gcm90YXRpb25bMl0gfHwgMFxuXG4gICAgQGRlZmluZSAnc2NhbGUnLFxuICAgICAgICBnZXQ6IC0+IEBzY2FsZS54LFxuICAgICAgICBzZXQ6IChzY2FsZSkgLT4gQHNjYWxlLnNldChzY2FsZSwgc2NhbGUsIHNjYWxlKVxuICAgIFxuICAgIEBkZWZpbmUgJ3NjYWxlWCcsXG4gICAgICAgIGdldDogLT4gQHNjYWxlLngsXG4gICAgICAgIHNldDogKHNjYWxlKSAtPiBAc2NhbGUuc2V0KHNjYWxlLCBAc2NhbGUueSwgQHNjYWxlLnopXG5cbiAgICBAZGVmaW5lICdzY2FsZVknLFxuICAgICAgICBnZXQ6IC0+IEBzY2FsZS55LFxuICAgICAgICBzZXQ6IChzY2FsZSkgLT4gQHNjYWxlLnNldChAc2NhbGUueCwgc2NhbGUsIEBzY2FsZS56KVxuICAgIFxuICAgIEBkZWZpbmUgJ3NjYWxlWicsXG4gICAgICAgIGdldDogLT4gQHNjYWxlLnosXG4gICAgICAgIHNldDogKHNjYWxlKSAtPiBAc2NhbGUuc2V0KEBzY2FsZS54LCBAc2NhbGUueSwgc2NhbGUpXG5cbiAgICBAZGVmaW5lICd4JyxcbiAgICAgICAgZ2V0OiAtPiBAcG9zaXRpb24ueCxcbiAgICAgICAgc2V0OiAoeCkgLT4gQHBvc2l0aW9uLnggPSB4XG4gICAgXG4gICAgQGRlZmluZSAneScsXG4gICAgICAgIGdldDogLT4gQHBvc2l0aW9uLnksXG4gICAgICAgIHNldDogKHkpIC0+IEBwb3NpdGlvbi55ID0geVxuICAgIFxuICAgIEBkZWZpbmUgJ3onLFxuICAgICAgICBnZXQ6IC0+IEBwb3NpdGlvbi56LFxuICAgICAgICBzZXQ6ICh6KSAtPiBAcG9zaXRpb24ueiA9IHpcblxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uWCcsXG4gICAgICAgIGdldDogLT4gVEhSRUUuTWF0aC5yYWRUb0RlZyhAcm90YXRpb24ueCksXG4gICAgICAgIHNldDogKHgpIC0+IEByb3RhdGlvbi54ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCh4KVxuICAgIFxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uWScsXG4gICAgICAgIGdldDogLT4gVEhSRUUuTWF0aC5yYWRUb0RlZyhAcm90YXRpb24ueSksXG4gICAgICAgIHNldDogKHkpIC0+IEByb3RhdGlvbi55ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCh5KVxuICAgIFxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uWicsXG4gICAgICAgIGdldDogLT4gVEhSRUUuTWF0aC5yYWRUb0RlZyhAcm90YXRpb24ueiksXG4gICAgICAgIHNldDogKHopIC0+IEByb3RhdGlvbi56ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCh6KSIsIl8gPSBGcmFtZXIuX1xuXG4jIENMQVNTRVNcblxue0Jhc2VDbGFzc30gPSByZXF1aXJlICcuL19CYXNlQ2xhc3MuY29mZmVlJ1xue0FuaW1hdGlvbn0gPSByZXF1aXJlICcuL19BbmltYXRpb24uY29mZmVlJ1xue1N0YXRlc30gPSByZXF1aXJlICcuL19TdGF0ZXMuY29mZmVlJ1xuXG4jIExPQURFUlNcblxue09CSn0gPSByZXF1aXJlICcuL2xvYWRlcnMvT0JKLmNvZmZlZSdcbntGQlh9ID0gcmVxdWlyZSAnLi9sb2FkZXJzL0ZCWC5jb2ZmZWUnXG57R0xURn0gPSByZXF1aXJlICcuL2xvYWRlcnMvR0xURi5jb2ZmZWUnXG57Q29sbGFkYX0gPSByZXF1aXJlICcuL2xvYWRlcnMvQ29sbGFkYS5jb2ZmZWUnXG57SlNPTk9iamVjdH0gPSByZXF1aXJlICcuL2xvYWRlcnMvSlNPTk9iamVjdC5jb2ZmZWUnXG57VERTfSA9IHJlcXVpcmUgJy4vbG9hZGVycy9URFMuY29mZmVlJ1xuXG5jbGFzcyBleHBvcnRzLk1vZGVsIGV4dGVuZHMgQmFzZUNsYXNzXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzPXt9KSAtPlxuICAgICAgICBzdXBlcigpXG5cbiAgICAgICAgXy5kZWZhdWx0cyBwcm9wZXJ0aWVzLFxuICAgICAgICAgICAgYW5pbWF0ZTogdHJ1ZVxuICAgICAgICAgICAgY2FzdFNoYWRvdzogdHJ1ZVxuICAgICAgICAgICAgcmVjZWl2ZVNoYWRvdzogdHJ1ZVxuICAgICAgICAgICAgcmVwb3NpdGlvbjogdHJ1ZVxuICAgICAgICBcbiAgICAgICAgQHRleHR1cmVMb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpXG5cbiAgICAgICAgc3dpdGNoIEBnZXRFeHRlbnNpb24gcHJvcGVydGllcy5wYXRoXG4gICAgICAgICAgICB3aGVuICdvYmonXG4gICAgICAgICAgICAgICAgbmV3IE9CSiBwcm9wZXJ0aWVzLCAobW9kZWwpID0+XG4gICAgICAgICAgICAgICAgICAgIEBtZXNoID0gbW9kZWxcbiAgICAgICAgICAgICAgICAgICAgQHNldHVwTW9kZWwgcHJvcGVydGllc1xuICAgICAgICAgICAgd2hlbiAnZmJ4J1xuICAgICAgICAgICAgICAgIG5ldyBGQlggcHJvcGVydGllcywgKG1vZGVsKSA9PlxuICAgICAgICAgICAgICAgICAgICBAbWVzaCA9IG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIEBzZXR1cE1vZGVsIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHdoZW4gJ2dsdGYnIHx8ICdnbGInXG4gICAgICAgICAgICAgICAgbmV3IEdMVEYgcHJvcGVydGllcywgKG1vZGVsKSA9PlxuICAgICAgICAgICAgICAgICAgICBAbWVzaCA9IG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIEBzZXR1cE1vZGVsIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHdoZW4gJ2RhZSdcbiAgICAgICAgICAgICAgICBuZXcgQ29sbGFkYSBwcm9wZXJ0aWVzLCAobW9kZWwpID0+XG4gICAgICAgICAgICAgICAgICAgIEBtZXNoID0gbW9kZWxcbiAgICAgICAgICAgICAgICAgICAgQHNldHVwTW9kZWwgcHJvcGVydGllc1xuICAgICAgICAgICAgd2hlbiAnanNvbidcbiAgICAgICAgICAgICAgICBuZXcgSlNPTk9iamVjdCBwcm9wZXJ0aWVzLCAobW9kZWwpID0+XG4gICAgICAgICAgICAgICAgICAgIEBtZXNoID0gbW9kZWxcbiAgICAgICAgICAgICAgICAgICAgQHNldHVwTW9kZWwgcHJvcGVydGllc1xuICAgICAgICAgICAgd2hlbiAnM0RTJyB8fCAnM2RzJ1xuICAgICAgICAgICAgICAgIG5ldyBURFMgcHJvcGVydGllcywgKG1vZGVsKSA9PlxuICAgICAgICAgICAgICAgICAgICBAbWVzaCA9IG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIEBzZXR1cE1vZGVsIHByb3BlcnRpZXNcblxuXG4gICAgZ2V0RXh0ZW5zaW9uOiAocGF0aCkgLT5cbiAgICAgICAgcGF0aC5zcGxpdCgnLicpLnBvcCgpXG5cbiAgICBzZXR1cE1vZGVsOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgaWYgcHJvcGVydGllcy5yZXBvc2l0aW9uXG4gICAgICAgICAgICBAcmVwb3NpdGlvbk1lc2goKVxuXG4gICAgICAgIEBwaXZvdCA9IG5ldyBUSFJFRS5Hcm91cFxuICAgICAgICBAcGl2b3QuYWRkIEBtZXNoXG5cbiAgICAgICAgQHNhdmVJbml0aWFsUHJvcGVydGllcygpXG5cbiAgICAgICAgaWYgcHJvcGVydGllcy5tYXRlcmlhbFxuICAgICAgICAgICAgQGFwcGx5TWF0ZXJpYWwgcHJvcGVydGllcy5tYXRlcmlhbFxuICAgICAgICBcbiAgICAgICAgQHNldHVwU2hhZG93U2V0dGluZ3MgcHJvcGVydGllc1xuICAgICAgICBcbiAgICAgICAgaWYgcHJvcGVydGllcy5zbW9vdGhTaGFkaW5nXG4gICAgICAgICAgICBAbWVzaC50cmF2ZXJzZSAoYykgLT5cbiAgICAgICAgICAgICAgICBpZiBjIGluc3RhbmNlb2YgVEhSRUUuTWVzaFxuICAgICAgICAgICAgICAgICAgICBjLm1hdGVyaWFsLnNoYWRpbmcgPSBUSFJFRS5TbW9vdGhTaGFkaW5nXG4gICAgICAgIFxuICAgICAgICBpZiBwcm9wZXJ0aWVzLmFuaW1hdGUgJiYgQG1lc2guYW5pbWF0aW9ucyAmJiBAbWVzaC5hbmltYXRpb25zWzBdXG4gICAgICAgICAgICBAaGFuZGxlQW5pbWF0aW9ucyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgaWYgcHJvcGVydGllcy5wYXJlbnRcbiAgICAgICAgICAgIEBhZGRUb1JlbmRlcmluZ0luc3RhbmNlIHByb3BlcnRpZXMucGFyZW50XG5cbiAgICAgICAgQHNldFNjYWxlIHByb3BlcnRpZXMuc2NhbGUsIHByb3BlcnRpZXMuc2NhbGVYLCBwcm9wZXJ0aWVzLnNjYWxlWSwgcHJvcGVydGllcy5zY2FsZVpcbiAgICAgICAgQHNldFBvc2l0aW9uIFtwcm9wZXJ0aWVzLngsIHByb3BlcnRpZXMueSwgcHJvcGVydGllcy56XVxuICAgICAgICBAc2V0Um90YXRpb24gW3Byb3BlcnRpZXMucm90YXRpb25YLCBwcm9wZXJ0aWVzLnJvdGF0aW9uWSwgcHJvcGVydGllcy5yb3RhdGlvblpdXG4gICAgICAgIEBzZXRNaWQoXG4gICAgICAgICAgICBtaWRYOiBwcm9wZXJ0aWVzLm1pZFhcbiAgICAgICAgICAgIG1pZFk6IHByb3BlcnRpZXMubWlkWVxuICAgICAgICAgICAgbWlkWjogcHJvcGVydGllcy5taWRaXG4gICAgICAgIClcblxuICAgICAgICBpZiBwcm9wZXJ0aWVzLnZpc2libGVcbiAgICAgICAgICAgIEB2aXNpYmxlID0gcHJvcGVydGllcy52aXNpYmxlXG4gICAgICAgIFxuICAgICAgICBAX3N0YXRlcyA9IG5ldyBTdGF0ZXMgQFxuXG4gICAgICAgIGlmIHByb3BlcnRpZXMub25Mb2FkXG4gICAgICAgICAgICBpZiBwcm9wZXJ0aWVzLm1hcFxuICAgICAgICAgICAgICAgIEB0ZXh0dXJlTG9hZGVyLmxvYWQgcHJvcGVydGllcy5tYXAsIChtYXApID0+XG4gICAgICAgICAgICAgICAgICAgIEBtZXNoLm1hdGVyaWFsLm1hcCA9IG1hcFxuICAgICAgICAgICAgICAgICAgICBAbWVzaC5tYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5vbkxvYWQgQFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMub25Mb2FkIEBcbiAgICAgICAgZWxzZSBpZiBwcm9wZXJ0aWVzLm1hcFxuICAgICAgICAgICAgQGFwcGx5VGV4dHVyZU1hcCBwcm9wZXJ0aWVzLm1hcFxuXG4gICAgcmVwb3NpdGlvbk1lc2g6ICgpIC0+XG4gICAgICAgIEBib3VuZGluZ0JveCA9IG5ldyBUSFJFRS5Cb3gzKCkuc2V0RnJvbU9iamVjdCBAbWVzaFxuICAgICAgICBAb2Zmc2V0ID0gQGJvdW5kaW5nQm94LmdldENlbnRlciBAbWVzaC5wb3NpdGlvblxuICAgICAgICBAbWVzaC5wb3NpdGlvbi5tdWx0aXBseVNjYWxhciAtMVxuXG4gICAgc2F2ZUluaXRpYWxQcm9wZXJ0aWVzOiAoKSAtPlxuICAgICAgICBAaW5pdGlhbFByb3BlcnRpZXMgPSBAXG5cbiAgICBhcHBseU1hdGVyaWFsOiAobWF0ZXJpYWwpIC0+XG4gICAgICAgIEBtZXNoLnRyYXZlcnNlIChjKSAtPlxuICAgICAgICAgICAgaWYgYyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hcbiAgICAgICAgICAgICAgICBjLm1hdGVyaWFsID0gbWF0ZXJpYWxcblxuICAgIGFwcGx5VGV4dHVyZU1hcDogKHBhdGgpIC0+XG4gICAgICAgIEB0ZXh0dXJlTG9hZGVyLmxvYWQgcGF0aCwgKG1hcCkgPT5cbiAgICAgICAgICAgIEBtZXNoLm1hdGVyaWFsLm1hcCA9IG1hcFxuICAgICAgICAgICAgQG1lc2gubWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlXG5cbiAgICBzZXR1cFNoYWRvd1NldHRpbmdzOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgQG1lc2gudHJhdmVyc2UgKGMpIC0+XG4gICAgICAgICAgICBpZiBjIGluc3RhbmNlb2YgVEhSRUUuTWVzaFxuICAgICAgICAgICAgICAgIGMuY2FzdFNoYWRvdyA9IHByb3BlcnRpZXMuY2FzdFNoYWRvd1xuICAgICAgICAgICAgICAgIGMucmVjZWl2ZVNoYWRvdyA9IHByb3BlcnRpZXMucmVjZWl2ZVNoYWRvd1xuXG4gICAgYWRkVG9SZW5kZXJpbmdJbnN0YW5jZTogKHBhcmVudCkgLT5cbiAgICAgICAgaWYgcGFyZW50LnNjZW5lIHRoZW4gcGFyZW50LnNjZW5lLmFkZCBAcGl2b3RcbiAgICAgICAgZWxzZSBwYXJlbnQuYWRkIEBwaXZvdFxuICAgIFxuICAgIGhhbmRsZUFuaW1hdGlvbnM6IChwcm9wZXJ0aWVzKSAtPlxuICAgICAgICBpZiBfLmlzTnVtYmVyIHByb3BlcnRpZXMuYW5pbWF0aW9uQ2xpcFxuICAgICAgICAgICAgQGFuaW1hdGlvbkluZGV4ID0gcHJvcGVydGllcy5hbmltYXRpb25DbGlwIC0gMVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBAYW5pbWF0aW9uSW5kZXggPSAwXG5cbiAgICAgICAgQGNsb2NrID0gbmV3IFRIUkVFLkNsb2NrXG4gICAgICAgIEBtZXNoLm1peGVyID0gbmV3IFRIUkVFLkFuaW1hdGlvbk1peGVyIEBtZXNoXG5cbiAgICAgICAgQGFjdGlvbiA9IEBtZXNoLm1peGVyLmNsaXBBY3Rpb24gQG1lc2guYW5pbWF0aW9uc1tAYW5pbWF0aW9uSW5kZXhdXG4gICAgICAgIEBhY3Rpb24ucGxheSgpXG4gICAgICAgIFxuICAgICAgICBAdXBkYXRlTWl4ZXIoKVxuXG4gICAgICAgIEZyYW1lci5DdXJyZW50Q29udGV4dC5vbiAncmVzZXQnLCA9PlxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUgQG1peGVyUmVxdWVzdElkXG4gICAgICAgIFxuICAgIHVwZGF0ZU1peGVyOiAoKSA9PlxuICAgICAgICBAbWl4ZXJSZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgQHVwZGF0ZU1peGVyXG4gICAgICAgIEBtZXNoLm1peGVyLnVwZGF0ZSBAY2xvY2suZ2V0RGVsdGEoKVxuICAgIFxuICAgIG9uOiAoZXZlbnROYW1lLCBjYikgLT5cblxuICAgICAgICBpZiBldmVudE5hbWUuaW5jbHVkZXMgJ2NoYW5nZSdcblxuICAgICAgICAgICAgY2FsbGJhY2sgPSAoZSkgLT4gY2IoZS52YWx1ZSlcblxuICAgICAgICAgICAgQHBpdm90LmFkZEV2ZW50TGlzdGVuZXIgZXZlbnROYW1lLCBjYWxsYmFja1xuXG4gICAgICAgICAgICBGcmFtZXIuQ3VycmVudENvbnRleHQub24gJ3Jlc2V0JywgPT5cbiAgICAgICAgICAgICAgICBAcGl2b3QucmVtb3ZlRXZlbnRMaXN0ZW5lciBldmVudE5hbWUsIGNhbGxiYWNrXG5cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQG1lc2gudHJhdmVyc2UgKGMpIC0+XG4gICAgICAgICAgICAgICAgaWYgYyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hcblxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9ICgpIC0+IGNiKClcblxuICAgICAgICAgICAgICAgICAgICBjLmFkZEV2ZW50TGlzdGVuZXIgZXZlbnROYW1lLCBjYWxsYmFja1xuXG4gICAgICAgICAgICAgICAgICAgIEZyYW1lci5DdXJyZW50Q29udGV4dC5vbiAncmVzZXQnLCA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgYy5yZW1vdmVFdmVudExpc3RlbmVyIGV2ZW50TmFtZSwgY2FsbGJhY2tcblxuXG4gICAgc2V0U2NhbGU6ICh1bmlmb3JtU2NhbGUsIHNjYWxlWCwgc2NhbGVZLCBzY2FsZVopIC0+XG4gICAgICAgIGlmIHVuaWZvcm1TY2FsZVxuICAgICAgICAgICAgQHNjYWxlID0gdW5pZm9ybVNjYWxlIHx8IDFcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQHNjYWxlWCA9IHNjYWxlWCB8fCAxXG4gICAgICAgICAgICBAc2NhbGVZID0gc2NhbGVZIHx8IDFcbiAgICAgICAgICAgIEBzY2FsZVogPSBzY2FsZVogfHwgMVxuICAgIFxuICAgIHNldFBvc2l0aW9uOiAocG9zaXRpb24pIC0+XG4gICAgICAgIEB4ID0gcG9zaXRpb25bMF0gfHwgMFxuICAgICAgICBAeSA9IHBvc2l0aW9uWzFdIHx8IDBcbiAgICAgICAgQHogPSBwb3NpdGlvblsyXSB8fCAwXG5cbiAgICBzZXRSb3RhdGlvbjogKHJvdGF0aW9uKSAtPlxuICAgICAgICBAcm90YXRpb25YID0gcm90YXRpb25bMF0gfHwgMFxuICAgICAgICBAcm90YXRpb25ZID0gcm90YXRpb25bMV0gfHwgMFxuICAgICAgICBAcm90YXRpb25aID0gcm90YXRpb25bMl0gfHwgMFxuXG4gICAgc2V0TWlkOiAobWlkKSAtPlxuICAgICAgICBPYmplY3Qua2V5cyhtaWQpLm1hcCAoaykgPT5cbiAgICAgICAgICAgIGlmIG1pZFtrXVxuICAgICAgICAgICAgICAgIEBba10gPSBtaWRba11cbiAgICBcbiAgICBhbmltYXRlOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgbmV3IEFuaW1hdGlvbiBALCBwcm9wZXJ0aWVzXG4gICAgXG4gICAgbG9va0F0OiAoYSwgYiwgYykgLT5cbiAgICAgICAgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAxXG4gICAgICAgICAgICBAcGl2b3QubG9va0F0IGFcbiAgICAgICAgZWxzZSBpZiBhcmd1bWVudHMubGVuZ3RoID09IDNcbiAgICAgICAgICAgIEBwaXZvdC5sb29rQXQgYSwgYiwgY1xuICAgIFxuICAgIHN0YXRlU3dpdGNoOiAoc3RhdGUpIC0+XG4gICAgICAgICMgTG9vcCB0aHJvdWdoIHN0YXRlcyBvbiBtb2RlbCB0byBmaW5kIHRoZSBzcGVjaWZpZWQgb25lXG4gICAgICAgIE9iamVjdC5rZXlzKEBzdGF0ZXMpLm1hcCAoaykgPT4gXG4gICAgICAgICAgICBpZiBrID09IHN0YXRlXG4gICAgICAgICAgICAgICAgQHN0YXRlcy5jdXJyZW50ID0gQHN0YXRlc1trXVxuXG4gICAgICAgICAgICAgICAgIyBMb29wIHRocm91Z2ggcHJvcGVydHkga2V5cyBvbiB0aGUgc3RhdGUgYW5kIGFwcGx5IHRoZSB2YWx1ZXMgdG8gbW9kZWxcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhAc3RhdGVzLmN1cnJlbnQpLm1hcCAocGspICA9PlxuICAgICAgICAgICAgICAgICAgICBAW3BrXSA9IEBzdGF0ZXMuY3VycmVudFtwa11cbiAgICBcbiAgICBzdGF0ZUN5Y2xlOiAoKSAtPlxuICAgICAgICBpZiBhcmd1bWVudHMubGVuZ3RoXG5cbiAgICAgICAgICAgIGZvciBzLCBpIGluIGFyZ3VtZW50c1xuICAgICAgICAgICAgICAgIGlmIF8uaXNFcXVhbCBAc3RhdGVzW3NdLCBAc3RhdGVzLmN1cnJlbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgaSA9PSAoYXJndW1lbnRzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0U3RhdGUgPSAwXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTdGF0ZSA9IGkgKyAxXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIG5leHRTdGF0ZSA9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICBuZXh0U3RhdGUgPSAwXG5cbiAgICAgICAgICAgIEBhbmltYXRlIGFyZ3VtZW50c1tuZXh0U3RhdGVdXG5cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgc3RhdGVzID0gT2JqZWN0LmtleXMoQHN0YXRlcylcbiAgICAgICAgICAgIHN0YXRlcy5zcGxpY2UoMSwgMSlcblxuICAgICAgICAgICAgZm9yIHMsIGkgaW4gc3RhdGVzXG4gICAgICAgICAgICAgICAgaWYgXy5pc0VxdWFsIEBzdGF0ZXNbc10sIEBzdGF0ZXMuY3VycmVudFxuICAgICAgICAgICAgICAgICAgICBpZiBpID09IChzdGF0ZXMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTdGF0ZSA9IDBcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFN0YXRlID0gaSArIDFcblxuICAgICAgICAgICAgQGFuaW1hdGUgc3RhdGVzW25leHRTdGF0ZV1cblxuICAgIEBkZWZpbmUgJ3NjYWxlJyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3Quc2NhbGUueCxcbiAgICAgICAgc2V0OiAoc2NhbGUpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnNjYWxlLnNldChzY2FsZSwgc2NhbGUsIHNjYWxlKVxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6c2NhbGUnLCB2YWx1ZTogQHNjYWxlfVxuICAgIFxuICAgIEBkZWZpbmUgJ3NjYWxlWCcsXG4gICAgICAgIGdldDogLT4gQHBpdm90LnNjYWxlLngsXG4gICAgICAgIHNldDogKHNjYWxlKSAtPiBcbiAgICAgICAgICAgIEBwaXZvdC5zY2FsZS5zZXQoc2NhbGUsIEBwaXZvdC5zY2FsZS55LCBAcGl2b3Quc2NhbGUueilcbiAgICAgICAgICAgIEBwaXZvdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnNjYWxlWCcsIHZhbHVlOiBAc2NhbGVYfVxuXG4gICAgQGRlZmluZSAnc2NhbGVZJyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3Quc2NhbGUueSxcbiAgICAgICAgc2V0OiAoc2NhbGUpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnNjYWxlLnNldChAcGl2b3Quc2NhbGUueCwgc2NhbGUsIEBwaXZvdC5zY2FsZS56KVxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6c2NhbGVZJywgdmFsdWU6IEBzY2FsZVl9XG4gICAgXG4gICAgQGRlZmluZSAnc2NhbGVaJyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3Quc2NhbGUueixcbiAgICAgICAgc2V0OiAoc2NhbGUpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnNjYWxlLnNldChAcGl2b3Quc2NhbGUueCwgQHBpdm90LnNjYWxlLnksIHNjYWxlKVxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6c2NhbGVaJywgdmFsdWU6IEBzY2FsZVp9XG5cbiAgICBAZGVmaW5lICdwb3NpdGlvbicsXG4gICAgICAgIGdldDogLT4gQHBpdm90LnBvc2l0aW9uXG5cbiAgICBAZGVmaW5lICd4JyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3QucG9zaXRpb24ueCxcbiAgICAgICAgc2V0OiAoeCkgLT4gXG4gICAgICAgICAgICBAcGl2b3QucG9zaXRpb24ueCA9IHhcbiAgICAgICAgICAgIEBwaXZvdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOngnLCB2YWx1ZTogQHh9XG4gICAgXG4gICAgQGRlZmluZSAneScsXG4gICAgICAgIGdldDogLT4gQHBpdm90LnBvc2l0aW9uLnksXG4gICAgICAgIHNldDogKHkpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnBvc2l0aW9uLnkgPSB5XG4gICAgICAgICAgICBAcGl2b3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp5JywgdmFsdWU6IEB5fVxuICAgIFxuICAgIEBkZWZpbmUgJ3onLFxuICAgICAgICBnZXQ6IC0+IEBwaXZvdC5wb3NpdGlvbi56LFxuICAgICAgICBzZXQ6ICh6KSAtPiBcbiAgICAgICAgICAgIEBwaXZvdC5wb3NpdGlvbi56ID0gelxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6eicsIHZhbHVlOiBAen1cblxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uJyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3Qucm90YXRpb25cblxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uWCcsXG4gICAgICAgIGdldDogLT4gVEhSRUUuTWF0aC5yYWRUb0RlZyhAcGl2b3Qucm90YXRpb24ueCksXG4gICAgICAgIHNldDogKHgpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnJvdGF0aW9uLnggPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKHgpXG4gICAgICAgICAgICBAcGl2b3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpyb3RhdGlvblgnLCB2YWx1ZTogQHJvdGF0aW9uWH1cbiAgICBcbiAgICBAZGVmaW5lICdyb3RhdGlvblknLFxuICAgICAgICBnZXQ6IC0+IFRIUkVFLk1hdGgucmFkVG9EZWcoQHBpdm90LnJvdGF0aW9uLnkpLFxuICAgICAgICBzZXQ6ICh5KSAtPiBcbiAgICAgICAgICAgIEBwaXZvdC5yb3RhdGlvbi55ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCh5KVxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6cm90YXRpb25ZJywgdmFsdWU6IEByb3RhdGlvbll9XG4gICAgXG4gICAgQGRlZmluZSAncm90YXRpb25aJyxcbiAgICAgICAgZ2V0OiAtPiBUSFJFRS5NYXRoLnJhZFRvRGVnKEBwaXZvdC5yb3RhdGlvbi56KSxcbiAgICAgICAgc2V0OiAoeikgLT4gXG4gICAgICAgICAgICBAcGl2b3Qucm90YXRpb24ueiA9IFRIUkVFLk1hdGguZGVnVG9SYWQoeilcbiAgICAgICAgICAgIEBwaXZvdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnJvdGF0aW9uWicsIHZhbHVlOiBAcm90YXRpb25afVxuICAgIFxuICAgIEBkZWZpbmUgJ21pZFgnLFxuICAgICAgICBzZXQ6IChtaWRYKSAtPiBAbWVzaC5wb3NpdGlvbi54ID0gLW1pZFhcbiAgICBcbiAgICBAZGVmaW5lICdtaWRZJyxcbiAgICAgICAgc2V0OiAobWlkWSkgLT4gQG1lc2gucG9zaXRpb24ueSA9IC1taWRZXG4gICAgXG4gICAgQGRlZmluZSAnbWlkWicsXG4gICAgICAgIHNldDogKG1pZFopIC0+IEBtZXNoLnBvc2l0aW9uLnogPSAtbWlkWlxuXG4gICAgQGRlZmluZSAncGFyZW50JyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3QucGFyZW50LFxuICAgICAgICBzZXQ6IChwYXJlbnQpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnBhcmVudCA9IHBhcmVudFxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6cGFyZW50JywgdmFsdWU6IEBwYXJlbnR9XG4gICAgXG4gICAgQGRlZmluZSAndmlzaWJsZScsXG4gICAgICAgIGdldDogLT4gQHBpdm90LnZpc2libGVcbiAgICAgICAgc2V0OiAoYm9vbCkgLT4gXG4gICAgICAgICAgICBAcGl2b3QudmlzaWJsZSA9IGJvb2xcbiAgICAgICAgICAgIEBwaXZvdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnZpc2libGUnLCB2YWx1ZTogQHZpc2libGV9XG4gICAgXG4gICAgQGRlZmluZSAnY2hpbGRyZW4nLFxuICAgICAgICBnZXQ6IC0+IEBwaXZvdC5jaGlsZHJlblxuICAgIFxuICAgIEBkZWZpbmUgJ3NpemUnLFxuICAgICAgICBnZXQ6IC0+IHtcbiAgICAgICAgICAgIGhlaWdodDogQGJvdW5kaW5nQm94Lm1heC55IC0gQGJvdW5kaW5nQm94Lm1pbi55XG4gICAgICAgICAgICB3aWR0aDogQGJvdW5kaW5nQm94Lm1heC54IC0gQGJvdW5kaW5nQm94Lm1pbi54XG4gICAgICAgICAgICBkZXB0aDogQGJvdW5kaW5nQm94Lm1heC56IC0gQGJvdW5kaW5nQm94Lm1pbi56XG4gICAgICAgIH1cbiAgICBcbiAgICBAZGVmaW5lICdzdGF0ZXMnLFxuICAgICAgICBnZXQ6IC0+XG4gICAgICAgICAgICBAX3N0YXRlcy5zdGF0ZXNcbiAgICAgICAgc2V0OiAoc3RhdGVzKSAtPlxuICAgICAgICAgICAgXy5leHRlbmQgQHN0YXRlcywgc3RhdGVzXG4gICAgXG4gICAgQGRlZmluZSAnYW5pbWF0aW9uQ2xpcCcsXG4gICAgICAgIGdldDogLT4gQGFuaW1hdGlvbkluZGV4ICsgMSxcbiAgICAgICAgc2V0OiAoYW5pbWF0aW9uKSAtPiBcbiAgICAgICAgICAgIGlmIEBtZXNoLmFuaW1hdGlvbnNbYW5pbWF0aW9uIC0gMV1cbiAgICAgICAgICAgICAgICBAYW5pbWF0aW9uSW5kZXggPSBhbmltYXRpb24gLSAxXG4gICAgICAgICAgICAgICAgQGFjdGlvbiA9IEBtZXNoLm1peGVyLmNsaXBBY3Rpb24gQG1lc2guYW5pbWF0aW9uc1tAYW5pbWF0aW9uSW5kZXhdXG4gICAgICAgICAgICAgICAgQGFjdGlvbi5wbGF5KClcbiAgICBcbiAgICBAZGVmaW5lICdtYXAnLFxuICAgICAgICBnZXQ6IC0+IEBtZXNoLm1hdGVyaWFsLm1hcCxcbiAgICAgICAgc2V0OiAocGF0aCkgLT5cbiAgICAgICAgICAgIEBhcHBseVRleHR1cmVNYXAgcGF0aCIsInJlcXVpcmUgJy4vbGliL0dQVVBhcnRpY2xlU3lzdGVtLmpzJ1xuXG5fID0gRnJhbWVyLl9cblxue0Jhc2VDbGFzc30gPSByZXF1aXJlICcuL19CYXNlQ2xhc3MuY29mZmVlJ1xue0FuaW1hdGlvbn0gPSByZXF1aXJlICcuL19BbmltYXRpb24uY29mZmVlJ1xue1N0YXRlc30gPSByZXF1aXJlICcuL19TdGF0ZXMuY29mZmVlJ1xuXG5jbGFzcyBleHBvcnRzLlBhcnRpY2xlU3lzdGVtIGV4dGVuZHMgQmFzZUNsYXNzXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzPXt9KSAtPlxuICAgICAgICBzdXBlcigpXG5cbiAgICAgICAgXy5kZWZhdWx0cyBwcm9wZXJ0aWVzLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgICAgICAgICAgIHBvc2l0aW9uUmFuZG9tbmVzczogLjNcbiAgICAgICAgICAgIHZlbG9jaXR5OiBuZXcgVEhSRUUuVmVjdG9yMygpXG4gICAgICAgICAgICB2ZWxvY2l0eVJhbmRvbW5lc3M6IC41XG4gICAgICAgICAgICBjb2xvcjogMHhhYTg4ZmZcbiAgICAgICAgICAgIGNvbG9yUmFuZG9tbmVzczogLjJcbiAgICAgICAgICAgIHR1cmJ1bGVuY2U6IC41XG4gICAgICAgICAgICBsaWZldGltZTogMlxuICAgICAgICAgICAgc2l6ZTogNVxuICAgICAgICAgICAgc2l6ZVJhbmRvbW5lc3M6IDFcbiAgICAgICAgICAgIHNwYXduUmF0ZTogMTUwMDBcbiAgICAgICAgICAgIGhvcml6b250YWxTcGVlZDogMS41XG4gICAgICAgICAgICB2ZXJ0aWNhbFNwZWVkOiAxLjMzXG4gICAgICAgICAgICB0aW1lU2NhbGU6IDFcbiAgICAgICAgICAgIHBhcnRpY2xlTm9pc2VUZXh0dXJlOiAnLi9tb2R1bGVzL2Zvcm0vbGliL3RleHR1cmVzL3Blcmxpbi01MTIucG5nJ1xuICAgICAgICAgICAgcGFydGljbGVTcHJpdGVUZXh0dXJlOiAnLi9tb2R1bGVzL2Zvcm0vbGliL3RleHR1cmVzL3BhcnRpY2xlMi5wbmcnXG5cbiAgICAgICAgQHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzXG5cbiAgICAgICAgQGNsb2NrID0gbmV3IFRIUkVFLkNsb2NrXG4gICAgICAgIEB0aWNrID0gMFxuICAgICAgICBAdGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKClcblxuICAgICAgICBAcGFydGljbGVTeXN0ZW0gPSBuZXcgVEhSRUUuR1BVUGFydGljbGVTeXN0ZW1cbiAgICAgICAgICAgIG1heFBhcnRpY2xlczogMjUwMDAwXG4gICAgICAgICAgICBwYXJ0aWNsZU5vaXNlVGV4OiBAdGV4dHVyZUxvYWRlci5sb2FkIHByb3BlcnRpZXMucGFydGljbGVOb2lzZVRleHR1cmVcbiAgICAgICAgICAgIHBhcnRpY2xlU3ByaXRlVGV4OiBAdGV4dHVyZUxvYWRlci5sb2FkIHByb3BlcnRpZXMucGFydGljbGVTcHJpdGVUZXh0dXJlXG5cbiAgICAgICAgQGFkZFRvUmVuZGVyaW5nSW5zdGFuY2UgcHJvcGVydGllcy5wYXJlbnRcblxuICAgICAgICBGcmFtZXIuQ3VycmVudENvbnRleHQub24gJ3Jlc2V0JywgPT5cbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lIEBhbmltYXRpb25Mb29wUmVxdWVzdElkXG5cbiAgICAgICAgQGFuaW1hdGlvbkxvb3BSZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgQGxvb3BcblxuICAgIGFkZFRvUmVuZGVyaW5nSW5zdGFuY2U6IChwYXJlbnQpIC0+XG4gICAgICAgIGlmIHBhcmVudC5zY2VuZSB0aGVuIHBhcmVudC5zY2VuZS5hZGQgQHBhcnRpY2xlU3lzdGVtXG4gICAgICAgIGVsc2UgcGFyZW50LmFkZCBAcGFydGljbGVTeXN0ZW1cbiAgICBcbiAgICBsb29wOiAoKSA9PlxuXG4gICAgICAgIEBhbmltYXRpb25Mb29wUmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIEBsb29wXG5cbiAgICAgICAgZGVsdGEgPSBAY2xvY2suZ2V0RGVsdGEoKSAqIEBwcm9wZXJ0aWVzLnRpbWVTY2FsZVxuICAgICAgICBAdGljayArPSBkZWx0YVxuXG4gICAgICAgIGlmIEB0aWNrIDwgMCBcbiAgICAgICAgICAgIEB0aWNrID0gMFxuXG4gICAgICAgIGlmIGRlbHRhID4gMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBAcHJvcGVydGllcy5wb3NpdGlvbi54ID0gTWF0aC5zaW4oIEB0aWNrICogQHByb3BlcnRpZXMuaG9yaXpvbnRhbFNwZWVkICkgKiAyMFxuICAgICAgICAgICAgQHByb3BlcnRpZXMucG9zaXRpb24ueSA9IE1hdGguc2luKCBAdGljayAqIEBwcm9wZXJ0aWVzLnZlcnRpY2FsU3BlZWQgKSAqIDEwXG4gICAgICAgICAgICBAcHJvcGVydGllcy5wb3NpdGlvbi56ID0gTWF0aC5zaW4oIEB0aWNrICogQHByb3BlcnRpZXMuaG9yaXpvbnRhbFNwZWVkICsgQHByb3BlcnRpZXMudmVydGljYWxTcGVlZCApICogNVxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIGZvciBbMC4uQHByb3BlcnRpZXMuc3Bhd25SYXRlICogZGVsdGFdXG4gICAgICAgICAgICAgICAgQHBhcnRpY2xlU3lzdGVtLnNwYXduUGFydGljbGVcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IEBwcm9wZXJ0aWVzLnBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUmFuZG9tbmVzczogQHByb3BlcnRpZXMucG9zaXRpb25SYW5kb21uZXNzXG4gICAgICAgICAgICAgICAgICAgIHZlbG9jaXR5OiBAcHJvcGVydGllcy52ZWxvY2l0eVxuICAgICAgICAgICAgICAgICAgICB2ZWxvY2l0eVJhbmRvbW5lc3M6IEBwcm9wZXJ0aWVzLnZlbG9jaXR5UmFuZG9tbmVzc1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogQHByb3BlcnRpZXMuY29sb3JcbiAgICAgICAgICAgICAgICAgICAgY29sb3JSYW5kb21uZXNzOiBAcHJvcGVydGllcy5jb2xvclJhbmRvbW5lc3NcbiAgICAgICAgICAgICAgICAgICAgdHVyYnVsZW5jZTogQHByb3BlcnRpZXMudHVyYnVsZW5jZVxuICAgICAgICAgICAgICAgICAgICBsaWZldGltZTogQHByb3BlcnRpZXMubGlmZXRpbWVcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogQHByb3BlcnRpZXMuc2l6ZVxuICAgICAgICAgICAgICAgICAgICBzaXplUmFuZG9tbmVzczogQHByb3BlcnRpZXMuc2l6ZVJhbmRvbW5lc3NcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgQHBhcnRpY2xlU3lzdGVtLnVwZGF0ZSBAdGljayIsIl8gPSBGcmFtZXIuX1xuXG57Q2FtZXJhfSA9IHJlcXVpcmUgJy4vX0NhbWVyYS5jb2ZmZWUnXG5cbmNsYXNzIGV4cG9ydHMuU2NlbmUgZXh0ZW5kcyBMYXllclxuICAgIGNvbnN0cnVjdG9yOiAocHJvcGVydGllcz17fSkgLT5cbiAgICAgICAgc3VwZXIgXy5kZWZhdWx0cyBwcm9wZXJ0aWVzLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCdcblxuICAgICAgICAjIFJFTkRFUkVSXG4gICAgICAgIFxuICAgICAgICBAcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlclxuICAgICAgICAgICAgYW50aWFsaWFzOiB0cnVlXG4gICAgICAgICAgICBhbHBoYTogdHJ1ZVxuXG4gICAgICAgIEBfZWxlbWVudC5hcHBlbmRDaGlsZCBAcmVuZGVyZXIuZG9tRWxlbWVudFxuICAgICAgICBAcmVuZGVyZXIuc2V0U2l6ZSBAd2lkdGgsIEBoZWlnaHRcbiAgICAgICAgQHJlbmRlcmVyLnNldFBpeGVsUmF0aW8gd2luZG93LmRldmljZVBpeGVsUmF0aW9cbiAgICAgICAgQHJlbmRlcmVyLmRvbUVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSdcbiAgICAgICAgQHJlbmRlcmVyLmRvbUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnXG4gICAgICAgIEByZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWVcbiAgICAgICAgQHJlbmRlcmVyLnNoYWRvd01hcC50eXBlID0gVEhSRUUuUENGU29mdFNoYWRvd01hcFxuXG5cbiAgICAgICAgIyBTQ0VORVxuXG4gICAgICAgIEBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZVxuXG5cbiAgICAgICAgIyBDQU1FUkFcblxuICAgICAgICBjYW1lcmFQcm9wcyA9IF8uZGVmYXVsdHMgcHJvcGVydGllcy5jYW1lcmEsXG4gICAgICAgICAgICBhc3BlY3Q6IEB3aWR0aCAvIEBoZWlnaHRcblxuICAgICAgICBAY2FtZXJhID0gbmV3IENhbWVyYSBjYW1lcmFQcm9wcywgQC5fZWxlbWVudFxuXG5cbiAgICAgICAgIyBSRVNJWklOR1xuXG4gICAgICAgIENhbnZhcy5vblJlc2l6ZSBAb25XaW5kb3dSZXNpemVcblxuXG4gICAgICAgICMgUkFZQ0FTVEVSXG5cbiAgICAgICAgQHJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXJcbiAgICAgICAgQG1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjJcbiAgICAgICAgQGludGVyc2VjdGVkID0gbnVsbFxuICAgICAgICBAaW50ZXJzZWN0ZWRFdmVudEVtaXR0ZWQgPSBmYWxzZVxuICAgICAgICBAbW91c2Vkb3duID0gZmFsc2VcbiAgICAgICAgXG4gICAgICAgIEBvbiAnbW91c2Vtb3ZlJywgKGUpID0+XG4gICAgICAgICAgICBAbW91c2UueCA9IChlLmNsaWVudFggLyBAd2lkdGgpICogMiAtIDFcbiAgICAgICAgICAgIEBtb3VzZS55ID0gLShlLmNsaWVudFkgLyBAaGVpZ2h0KSAqIDIgKyAxXG5cbiAgICAgICAgQG9uICdtb3VzZWRvd24nLCAoZSkgPT5cbiAgICAgICAgICAgIEBtb3VzZWRvd24gPSB0cnVlXG4gICAgICAgICAgICBpZiBAaW50ZXJzZWN0ZWRcbiAgICAgICAgICAgICAgICBAaW50ZXJzZWN0ZWQub2JqZWN0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdtb3VzZWRvd24nfVxuICAgICAgICAgICAgICAgIEBpbnRlcnNlY3RlZC5vYmplY3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ29ubW91c2Vkb3duJ31cbiAgICAgICAgICAgICAgICBAaW50ZXJzZWN0ZWQub2JqZWN0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjbGljayd9XG4gICAgICAgICAgICAgICAgQGludGVyc2VjdGVkLm9iamVjdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnb25jbGljayd9XG4gICAgICAgIFxuICAgICAgICBAb24gJ21vdXNldXAnLCAoZSkgPT5cbiAgICAgICAgICAgIEBtb3VzZWRvd24gPSBmYWxzZVxuICAgICAgICAgICAgaWYgQGludGVyc2VjdGVkXG4gICAgICAgICAgICAgICAgQGludGVyc2VjdGVkLm9iamVjdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnbW91c2V1cCd9XG4gICAgICAgICAgICAgICAgQGludGVyc2VjdGVkLm9iamVjdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnb25tb3VzZXVwJ31cblxuXG4gICAgICAgICMgQU5JTUFUSU9OIExPT1BcblxuICAgICAgICBAbG9vcCgpXG5cbiAgICAgICAgRnJhbWVyLkN1cnJlbnRDb250ZXh0Lm9uICdyZXNldCcsID0+XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSBAYW5pbWF0aW9uTG9vcFJlcXVlc3RJZFxuXG5cblxuICAgIGxvb3A6ICgpID0+XG4gICAgICAgIEBhbmltYXRpb25Mb29wUmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIEBsb29wXG5cbiAgICAgICAgaWYgQGFuaW1hdGlvbkxvb3BcbiAgICAgICAgICAgIEBhbmltYXRpb25Mb29wKClcblxuICAgICAgICBpZiBAY2FtZXJhLmNvbnRyb2xzXG4gICAgICAgICAgICBAY2FtZXJhLmNvbnRyb2xzLnVwZGF0ZSgpXG5cbiAgICAgICAgQGhhbmRsZVJheWNhc3RlcigpXG5cbiAgICAgICAgQHJlbmRlcmVyLnJlbmRlciBAc2NlbmUsIEBjYW1lcmEubmF0aXZlQ2FtZXJhXG4gICAgXG5cbiAgICBcbiAgICBoYW5kbGVSYXljYXN0ZXI6ICgpID0+XG4gICAgICAgIEByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSBAbW91c2UsIEBjYW1lcmEubmF0aXZlQ2FtZXJhXG4gICAgICAgIGludGVyc2VjdHMgPSBAcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMgQHNjZW5lLmNoaWxkcmVuLCB0cnVlXG5cbiAgICAgICAgaWYgaW50ZXJzZWN0cy5sZW5ndGggJiYgQGludGVyc2VjdGVkICE9IGludGVyc2VjdHNbMF1cbiAgICAgICAgICAgIEBpbnRlcnNlY3RlZCA9IGludGVyc2VjdHNbMF1cbiAgICAgICAgXG4gICAgICAgIGlmIEBpbnRlcnNlY3RlZCAmJiAhaW50ZXJzZWN0cy5sZW5ndGhcbiAgICAgICAgICAgIEBpbnRlcnNlY3RlZC5vYmplY3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ21vdXNlb3V0J31cbiAgICAgICAgICAgIEBpbnRlcnNlY3RlZC5vYmplY3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ29ubW91c2VvdXQnfVxuICAgICAgICBcbiAgICAgICAgaWYgIWludGVyc2VjdHMubGVuZ3RoXG4gICAgICAgICAgICBAaW50ZXJzZWN0ZWQgPSBudWxsXG4gICAgICAgICAgICBAaW50ZXJzZWN0ZWRFdmVudEVtaXR0ZWQgPSBmYWxzZVxuICAgICAgICBcbiAgICAgICAgaWYgIUBpbnRlcnNlY3RlZEV2ZW50RW1pdHRlZCAmJiBAaW50ZXJzZWN0ZWRcbiAgICAgICAgICAgIEBpbnRlcnNlY3RlZC5vYmplY3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ21vdXNlb3Zlcid9XG4gICAgICAgICAgICBAaW50ZXJzZWN0ZWQub2JqZWN0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdvbm1vdXNlb3Zlcid9XG4gICAgICAgICAgICBAaW50ZXJzZWN0ZWRFdmVudEVtaXR0ZWQgPSB0cnVlXG4gICAgXG4gICAgb25XaW5kb3dSZXNpemU6IChlKSA9PlxuICAgICAgICBAY2FtZXJhLmFzcGVjdCA9IEB3aWR0aCAvIEBoZWlnaHRcbiAgICAgICAgQGNhbWVyYS5uYXRpdmVDYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpXG4gICAgICAgIEByZW5kZXJlci5zZXRTaXplIEB3aWR0aCwgQGhlaWdodCIsIl8gPSBGcmFtZXIuX1xuXG57U2NlbmV9ID0gcmVxdWlyZSAnLi9TY2VuZS5jb2ZmZWUnXG5cbmNsYXNzIGV4cG9ydHMuU3R1ZGlvIGV4dGVuZHMgU2NlbmVcbiAgICBjb25zdHJ1Y3RvcjogKHByb3BlcnRpZXM9e30pIC0+XG5cbiAgICAgICAgXy5kZWZhdWx0cyBwcm9wZXJ0aWVzLFxuICAgICAgICAgICAgY2FtZXJhOlxuICAgICAgICAgICAgICAgIHk6IDIyMFxuICAgICAgICAgICAgICAgIHJvdGF0aW9uWDogLTE1XG5cbiAgICAgICAgc3VwZXIgcHJvcGVydGllc1xuXG4gICAgICAgIEBzY2VuZS5iYWNrZ3JvdW5kID0gbmV3IFRIUkVFLkNvbG9yIDB4OTE4MWEwXG4gICAgICAgIEBzY2VuZS5mb2cgPSBuZXcgVEhSRUUuRm9nIDB4OTE4MWEwLCA0MDAsIDEwMDBcbiAgICAgICAgXG4gICAgICAgIEBobGlnaHQgPSBuZXcgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0IDB4ZmZmZmZmLCAweDQ0NDQ0NFxuICAgICAgICBAaGxpZ2h0LnBvc2l0aW9uLnkgPSAyMDBcbiAgICAgICAgQHNjZW5lLmFkZCBAaGxpZ2h0XG5cbiAgICAgICAgQGxpZ2h0ID0gbmV3IFRIUkVFLlBvaW50TGlnaHQgMHhmZmZmZmYsIC4xXG4gICAgICAgIEBsaWdodC5wb3NpdGlvbi5zZXQgMCwgODAwLCAwXG4gICAgICAgIEBsaWdodC5jYXN0U2hhZG93ID0gdHJ1ZVxuICAgICAgICBAbGlnaHQuc2hhZG93LmNhbWVyYS5uZWFyID0gMTAwXG4gICAgICAgIEBsaWdodC5zaGFkb3cuY2FtZXJhLmZhciA9IDEwMDBcbiAgICAgICAgQGxpZ2h0LnNoYWRvdy5iaWFzID0gLjAwMDFcbiAgICAgICAgQGxpZ2h0LnNoYWRvdy5yYWRpdXMgPSA1XG4gICAgICAgIEBsaWdodC5zaGFkb3cubWFwU2l6ZS53aWR0aCA9IDEwMjRcbiAgICAgICAgQGxpZ2h0LnNoYWRvdy5tYXBTaXplLmhlaWdodCA9IDEwMjRcbiAgICAgICAgQHNjZW5lLmFkZCBAbGlnaHRcblxuICAgICAgICBAbGlnaHQyID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQgMHhmZjk5OTksIC4zXG4gICAgICAgIEBsaWdodDIucG9zaXRpb24uc2V0IC0xMDAsIDIwMCwgLTMwMFxuICAgICAgICBAc2NlbmUuYWRkIEBsaWdodDJcblxuICAgICAgICBAbGlnaHQzID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQgMHg2NjY2ZmYsIC4yXG4gICAgICAgIEBsaWdodDMucG9zaXRpb24uc2V0IDEwMCwgMjAwLCAtMzAwXG4gICAgICAgIEBzY2VuZS5hZGQgQGxpZ2h0M1xuXG4gICAgICAgIEBsaWdodDQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCAweGZmOTk5OSwgLjNcbiAgICAgICAgQGxpZ2h0NC5wb3NpdGlvbi5zZXQgLTEwMCwgMjAwLCAzMDBcbiAgICAgICAgQHNjZW5lLmFkZCBAbGlnaHQ0XG5cbiAgICAgICAgQGxpZ2h0NSA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0IDB4NjY2NmZmLCAuMlxuICAgICAgICBAbGlnaHQ1LnBvc2l0aW9uLnNldCAxMDAsIDIwMCwgMzAwXG4gICAgICAgIEBzY2VuZS5hZGQgQGxpZ2h0NVxuXG4gICAgICAgIEBmbG9vckdlbyA9IG5ldyBUSFJFRS5DaXJjbGVHZW9tZXRyeSA4MDAsIDEwMFxuICAgICAgICBAZmxvb3JNYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWxcbiAgICAgICAgICAgIHJvdWdobmVzczogLjZcbiAgICAgICAgICAgIGNvbG9yOiAweGFhYWFhYVxuICAgICAgICAgICAgbWV0YWxuZXNzOiAwLjJcbiAgICAgICAgICAgIGJ1bXBTY2FsZTogMC4wMDA1XG4gICAgICAgIEBmbG9vciA9IG5ldyBUSFJFRS5NZXNoIEBmbG9vckdlbywgQGZsb29yTWF0XG4gICAgICAgIEBmbG9vci5yb3RhdGlvbi54ID0gLU1hdGguUEkgLyAyXG4gICAgICAgIEBmbG9vci5yZWNlaXZlU2hhZG93ID0gdHJ1ZVxuICAgICAgICBAc2NlbmUuYWRkIEBmbG9vclxuXG4gICAgICAgICMjI1xuICAgICAgICBAZ3JpZCA9IG5ldyBUSFJFRS5HcmlkSGVscGVyIDIwMDAsIDIwLCAweDAwMDAwMCwgMHgwMDAwMDBcbiAgICAgICAgQGdyaWQubWF0ZXJpYWwub3BhY2l0eSA9IC4yXG4gICAgICAgIEBncmlkLm1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZVxuICAgICAgICBAc2NlbmUuYWRkIEBncmlkXG4gICAgICAgICMjIyIsIl8gPSBGcmFtZXIuX1xuXG5jbGFzcyBleHBvcnRzLkFuaW1hdGlvbiBleHRlbmRzIEZyYW1lci5FdmVudEVtaXR0ZXJcbiAgICBjb25zdHJ1Y3RvcjogKG1vZGVsLCBwcm9wZXJ0aWVzPXt9KSAtPlxuICAgICAgICBzdXBlcigpXG4gICAgICAgIFxuICAgICAgICBpZiAhcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yICdQbGVhc2Ugc3BlY2lmeSBwcm9wZXJ0aWVzIG9yIGEgc3RhdGUgdG8gYW5pbWF0ZSEnXG4gICAgICAgICAgICBcbiAgICAgICAgIyBJZiBwcm9wZXJ0aWVzIGlzIGEgc3RyaW5nLCB0aGVuIGl0IGlzIGEgU3RhdGUgTmFtZVxuICAgICAgICBpZiBfLmlzU3RyaW5nIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHN0YXRlTmFtZSA9IHByb3BlcnRpZXNcblxuICAgICAgICAgICAgIyBMb29wIHRocm91Z2ggc3RhdGVzIG9uIG1vZGVsIHRvIGZpbmQgdGhlIHNwZWNpZmllZCBzdGF0ZVxuICAgICAgICAgICAgT2JqZWN0LmtleXMobW9kZWwuc3RhdGVzKS5tYXAgKGspID0+IFxuICAgICAgICAgICAgICAgIGlmIGsgPT0gc3RhdGVOYW1lXG4gICAgICAgICAgICAgICAgICAgICMgU2V0IGN1cnJlbnQgc3RhdGUgdG8gc3BlY2lmaWVkIHN0YXRlIGFuZCBhcHBseSBzdGF0ZSBwcm9wZXJ0aWVzIHRvIHByb3BlcnRpZXMgdmFyaWFibGVcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuc3RhdGVzLmN1cnJlbnQgPSBtb2RlbC5zdGF0ZXNba11cbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcyA9IG1vZGVsLnN0YXRlc1tzdGF0ZU5hbWVdXG5cbiAgICAgICAgQHByb3BlcnRpZXMgPSBAZmlsdGVyUHJvcGVydGllcyBwcm9wZXJ0aWVzXG4gICAgICAgIEBvcHRpb25zID0gXy5kZWZhdWx0cyBwcm9wZXJ0aWVzLm9wdGlvbnMsIFxuICAgICAgICAgICAgdGltZTogMVxuICAgICAgICAgICAgZGVsYXk6IDBcbiAgICAgICAgICAgIGN1cnZlOiAnbGluZWFyJ1xuXG4gICAgICAgICMgRGVsYXkgdGhlIGxvb3AgaWYgc3BlY2lmaWVkLCBvdGhlcndpc2UgMHNcbiAgICAgICAgVXRpbHMuZGVsYXkgQG9wdGlvbnMuZGVsYXksID0+XG5cbiAgICAgICAgICAgIEBtb2RlbCA9IG1vZGVsXG4gICAgICAgICAgICBAbWVzaCA9IG1vZGVsLm1lc2ggfHwgbW9kZWwubGlnaHQgfHwgbW9kZWwubmF0aXZlQ2FtZXJhXG4gICAgICAgICAgICBAZnBzID0gNjBcbiAgICAgICAgICAgIEB0aW1lID0gQG9wdGlvbnMudGltZVxuICAgICAgICAgICAgQHJlbmRlcmVkRnJhbWVzID0gMFxuICAgICAgICAgICAgQHRvdGFsRnJhbWVzID0gQHRpbWUgKiBAZnBzXG4gICAgICAgICAgICBAbW9kZWxQcm9wZXJ0eUluaXRpYWxWYWx1ZXMgPSB7fVxuICAgICAgICAgICAgQGRlbHRhcyA9IEBjYWxjdWxhdGVEZWx0YXMoKVxuXG5cbiAgICAgICAgICAgICMgSWYgdGhlcmUgYXJlIGRpZmZlcmVuY2VzIGJldHdlZW4gYW5pbWF0aW9uIHByb3BlcnR5IHZhbHVlcyBhbmQgdGhlIG1vZGVsJ3MgY3VycmVudCBwcm9wZXJ0eSB2YWx1ZXMgKERlbHRhKVxuICAgICAgICAgICAgaWYgQGRlbHRhcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAjIENyZWF0ZSBhbiBpbnRlcnZhbCB0aGF0IHJ1bnMgZXZlcnkgNjAgc2Vjb25kc1xuICAgICAgICAgICAgICAgIEBpbnRlcnZhbERpc3Bvc2VyID0gc2V0SW50ZXJ2YWwgKCkgPT4gXG4gICAgICAgICAgICAgICAgICAgICMgQ2hlY2sgaWYgdGhlIGFtb3VudCBvZiByZW5kZXJlZCBmcmFtZXMgZXhjZWVkcyBhbW91bnQgb2YgdG90YWwgZnJhbWVzIHRoYXQgdGhlIGFuaW10aW9uIGlzIHN1cHBvc2VkIHRvIHJ1biBmb3JcbiAgICAgICAgICAgICAgICAgICAgaWYgQHJlbmRlcmVkRnJhbWVzID49IEB0b3RhbEZyYW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgIyBJZiBpdCBleGNlZWRzLCBkaXNwb3NlL2VuZCB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQGRpc3Bvc2VJbnRlcnZhbFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgIyBFbHNlIGtlZXAgdGhlIGxvb3AgZ29pbmdcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIEBhbmltYXRpb25Mb29wXG4gICAgICAgICAgICAgICAgICAgIEByZW5kZXJlZEZyYW1lcysrXG4gICAgICAgICAgICAgICAgLCAxMDAwIC8gQGZwc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAjIE1ha2Ugc3VyZSB0byBkaXNwb3NlIG91ciBhbmltYXRpb24gbG9vcCBpZiBGcmFtZXIncyBDdXJyZW50Q29udGV4dCByZXNldHNcbiAgICAgICAgICAgICMgT3RoZXJ3aXNlIHdlJ2xsIGxlYWsgbG9hZHMgb2YgbWVtb3J5XG4gICAgICAgICAgICBGcmFtZXIuQ3VycmVudENvbnRleHQub24gJ3Jlc2V0JywgPT5cbiAgICAgICAgICAgICAgICBpZiBAaW50ZXJ2YWxEaXNwb3NlclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsIEBpbnRlcnZhbERpc3Bvc2VyXG5cbiAgICBmaWx0ZXJQcm9wZXJ0aWVzOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgcHJvcHMgPSBPYmplY3QuYXNzaWduIHt9LCBwcm9wZXJ0aWVzXG4gICAgICAgIGRlbGV0ZSBwcm9wcy5vcHRpb25zXG4gICAgICAgIHByb3BzXG5cbiAgICBjYWxjdWxhdGVEZWx0YXM6ICgpIC0+XG4gICAgICAgICMgTG9vcCB0aHJvdWdoIGFsbCBwcm9wZXJ0aWVzIGFuZCBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gY3VycmVudCBtb2RlbCBwcm9wZXJ0eSB2YWx1ZSBhbmRcbiAgICAgICAgIyB0aGUgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgYW5pbWF0aW9uXG4gICAgICAgICMgVGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGFycmF5IG9mIGtleS92YWx1ZSBwYWlycyB0aGF0IGNvbnRhaW5zIHRoZSB2YWx1ZSAoRGVsdGEpIHRvIGFuaW1hdGUgZm9yIGV2ZXJ5IHByb3BlcnR5XG5cbiAgICAgICAgZGVsdGFzID0gT2JqZWN0LmtleXMoQHByb3BlcnRpZXMpLm1hcCAoaykgPT5cblxuICAgICAgICAgICAgQG1vZGVsUHJvcGVydHlJbml0aWFsVmFsdWVzW2tdID0gQG1vZGVsW2tdXG5cbiAgICAgICAgICAgIG5ld09iaiA9IHt9XG4gICAgICAgICAgICBpZiBAbW9kZWxba10gPiBAcHJvcGVydGllc1trXVxuICAgICAgICAgICAgICAgIG5ld09ialtrXSA9IC1NYXRoLmFicyBAbW9kZWxba10gLSBAcHJvcGVydGllc1trXVxuICAgICAgICAgICAgZWxzZSBpZiBAbW9kZWxba10gPCBAcHJvcGVydGllc1trXVxuICAgICAgICAgICAgICAgIG5ld09ialtrXSA9IE1hdGguYWJzIEBtb2RlbFtrXSAtIEBwcm9wZXJ0aWVzW2tdXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgbmV3T2JqXG5cbiAgICAgICAgZGVsdGFzLmZpbHRlciAoZCkgLT5cbiAgICAgICAgICAgIGRcblxuICAgIGFwcGx5RWFzaW5nOiAodCwgYiwgYywgZCkgLT5cblxuICAgICAgICBpZiBAb3B0aW9ucy5jdXJ2ZS5pbmNsdWRlcyAnZWFzZSdcbiAgICAgICAgICAgIEBbQG9wdGlvbnMuY3VydmVdIHQsIGIsIGMsIGRcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQGxpbmVhciB0LCBiLCBjLCBkXG5cbiAgICBhbmltYXRpb25Mb29wOiAoKSA9PlxuXG4gICAgICAgIGZvciBkZWx0YSwgaSBpbiBAZGVsdGFzXG5cbiAgICAgICAgICAgIHByb3AgPSBPYmplY3Qua2V5cyhkZWx0YSlbMF1cbiAgICAgICAgICAgIGRlbHRhVmFsdWUgPSBPYmplY3QudmFsdWVzKGRlbHRhKVswXVxuXG4gICAgICAgICAgICBlYXNlZFZhbHVlID0gQGFwcGx5RWFzaW5nKEByZW5kZXJlZEZyYW1lcywgQG1vZGVsUHJvcGVydHlJbml0aWFsVmFsdWVzW3Byb3BdLCBkZWx0YVZhbHVlLCBAdG90YWxGcmFtZXMpXG5cbiAgICAgICAgICAgIEBtb2RlbFtwcm9wXSA9IGVhc2VkVmFsdWVcblxuICAgIGRpc3Bvc2VJbnRlcnZhbDogKCkgLT5cbiAgICAgICAgY2xlYXJJbnRlcnZhbCBAaW50ZXJ2YWxEaXNwb3NlclxuICAgIFxuXG5cblxuICAgIGxpbmVhcjogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIGMgKiB0IC8gZCArIGJcblxuICAgIGVhc2VJblF1YWQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBjICogKHQgLz0gZCkgKiB0ICsgYlxuXG4gICAgZWFzZU91dFF1YWQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICAtYyAqICh0IC89IGQpICogKHQgLSAyKSArIGJcblxuICAgIGVhc2VJbk91dFF1YWQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxXG4gICAgICAgICAgICBjIC8gMiAqIHQgKiB0ICsgYlxuICAgICAgICBlbHNlXG4gICAgICAgICAgICAtYyAvIDIgKiAoKC0tdCkgKiAodCAtIDIpIC0gMSkgKyBiXG5cbiAgICBlYXNlSW5DdWJpYzogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIGMgKiAodCAvPSBkKSAqIHQgKiB0ICsgYlxuXG4gICAgZWFzZU91dEN1YmljOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgYyAqICgodCA9IHQgLyBkIC0gMSkgKiB0ICogdCArIDEpICsgYlxuXG4gICAgZWFzZUluT3V0Q3ViaWM6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxIFxuICAgICAgICAgICAgYyAvIDIgKiB0ICogdCAqIHQgKyBiXG4gICAgICAgIGVsc2UgXG4gICAgICAgICAgICBjIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICsgMikgKyBiXG5cbiAgICBlYXNlSW5RdWFydDogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIGMgKiAodCAvPSBkKSAqIHQgKiB0ICogdCArIGJcblxuICAgIGVhc2VPdXRRdWFydDogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIC1jICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiB0ICogdCAtIDEpICsgYlxuXG4gICAgZWFzZUluT3V0UXVhcnQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxXG4gICAgICAgICAgICBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKyBiXG4gICAgICAgIGVsc2UgXG4gICAgICAgICAgICAtYyAvIDIgKiAoKHQgLT0gMikgKiB0ICogdCAqIHQgLSAyKSArIGJcblxuICAgIGVhc2VJblF1aW50OiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgYyAqICh0IC89IGQpICogdCAqIHQgKiB0ICogdCArIGJcblxuICAgIGVhc2VPdXRRdWludDogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIGMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqIHQgKiB0ICogdCArIDEpICsgYlxuXG4gICAgZWFzZUluT3V0UXVpbnQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxXG4gICAgICAgICAgICBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKiB0ICsgYlxuICAgICAgICBlbHNlIFxuICAgICAgICAgICAgYyAvIDIgKiAoKHQgLT0gMikgKiB0ICogdCAqIHQgKiB0ICsgMikgKyBiXG5cbiAgICBlYXNlSW5TaW5lOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgLWMgKiBNYXRoLmNvcyh0IC8gZCAqIChNYXRoLlBJIC8gMikpICsgYyArIGJcblxuICAgIGVhc2VPdXRTaW5lOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgYyAqIE1hdGguc2luKHQgLyBkICogKE1hdGguUEkgLyAyKSkgKyBiXG5cbiAgICBlYXNlSW5PdXRTaW5lOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgLWMgLyAyICogKE1hdGguY29zKE1hdGguUEkgKiB0IC8gZCkgLSAxKSArIGJcblxuICAgIGVhc2VJbkV4cG86ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICAodCA9PSAwKSA/IGIgOiBjICogTWF0aC5wb3coMiwgMTAgKiAodCAvIGQgLSAxKSkgKyBiXG5cbiAgICBlYXNlT3V0RXhwbzogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgICh0ID09IGQpID8gYiArIGMgOiBjICogKC1NYXRoLnBvdygyLCAtMTAgKiB0IC8gZCkgKyAxKSArIGJcblxuICAgIGVhc2VJbk91dEV4cG86ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiB0ID09IDBcbiAgICAgICAgICAgIGJcbiAgICAgICAgaWYgdCA9PSBkXG4gICAgICAgICAgICBiICsgY1xuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxIFxuICAgICAgICAgICAgYyAvIDIgKiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpICsgYlxuICAgICAgICBlbHNlIFxuICAgICAgICAgICAgYyAvIDIgKiAoLU1hdGgucG93KDIsIC0xMCAqIC0tdCkgKyAyKSArIGJcblxuICAgIGVhc2VJbkNpcmM6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICAtYyAqIChNYXRoLnNxcnQoMSAtICh0IC89IGQpICogdCkgLSAxKSArIGJcblxuICAgIGVhc2VPdXRDaXJjOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgYyAqIE1hdGguc3FydCgxIC0gKHQgPSB0IC8gZCAtIDEpICogdCkgKyBiXG5cbiAgICBlYXNlSW5PdXRDaXJjOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgaWYgKHQgLz0gZCAvIDIpIDwgMVxuICAgICAgICAgICAgLWMgLyAyICogKE1hdGguc3FydCgxIC0gdCAqIHQpIC0gMSkgKyBiXG4gICAgICAgIGVsc2UgXG4gICAgICAgICAgICBjIC8gMiAqIChNYXRoLnNxcnQoMSAtICh0IC09IDIpICogdCkgKyAxKSArIGJcblxuICAgIGVhc2VJbkVsYXN0aWM6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBzID0gMS43MDE1OFxuICAgICAgICBwID0gMFxuICAgICAgICBhID0gY1xuXG4gICAgICAgIGlmIHQgPT0gMCBcbiAgICAgICAgICAgIGIgIFxuICAgICAgICBpZiAodCAvPSBkKSA9PSAxXG4gICAgICAgICAgICBiICsgY1xuXG4gICAgICAgIGlmICFwIFxuICAgICAgICAgICAgcCA9IGQgKiAuM1xuICAgICAgICBpZiBhIDwgTWF0aC5hYnMoYylcbiAgICAgICAgICAgIGEgPSBjXG4gICAgICAgICAgICBzID0gcCAvIDRcbiAgICAgICAgZWxzZSBcbiAgICAgICAgICAgIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbiAoYyAvIGEpXG5cbiAgICAgICAgLShhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwICkpICsgYlxuXG4gICAgZWFzZU91dEVsYXN0aWM6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBzID0gMS43MDE1OFxuICAgICAgICBwID0gMFxuICAgICAgICBhID0gY1xuXG4gICAgICAgIGlmIHQgPT0gMCBcbiAgICAgICAgICAgIGJcbiAgICAgICAgaWYgKHQgLz0gZCkgPT0gMSBcbiAgICAgICAgICAgIGIgKyBjIFxuXG4gICAgICAgIGlmICFwXG4gICAgICAgICAgICBwID0gZCAqIC4zXG4gICAgICAgIGlmIGEgPCBNYXRoLmFicyhjKVxuICAgICAgICAgICAgYSA9IGNcbiAgICAgICAgICAgIHMgPSBwIC8gNFxuICAgICAgICBlbHNlIFxuICAgICAgICAgICAgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luIChjIC8gYSlcblxuICAgICAgICBhICogTWF0aC5wb3coMiwgLTEwICogdCkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSArIGMgKyBiXG5cbiAgICBlYXNlSW5PdXRFbGFzdGljOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgcyA9IDEuNzAxNThcbiAgICAgICAgcCA9IDBcbiAgICAgICAgYSA9IGNcblxuICAgICAgICBpZiB0ID09IDBcbiAgICAgICAgICAgIGJcbiAgICAgICAgaWYgKHQgLz0gZCAvIDIpID09IDJcbiAgICAgICAgICAgIGIgKyBjIFxuICAgICAgICBcbiAgICAgICAgaWYgIXAgXG4gICAgICAgICAgICBwID0gZCAqICguMyAqIDEuNSlcbiAgICAgICAgaWYgYSA8IE1hdGguYWJzKGMpXG4gICAgICAgICAgICBhID0gY1xuICAgICAgICAgICAgcyA9IHAgLyA0XG4gICAgICAgIGVsc2UgXG4gICAgICAgICAgICBzID0gcCAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4gKGMgLyBhKVxuICAgICAgICBpZiAodCA8IDEpIFxuICAgICAgICAgICAgLS41ICogKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGJcbiAgICAgICAgXG4gICAgICAgIGEgKiBNYXRoLnBvdygyLCAtMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSAqIC41ICsgYyArIGIiLCJjbGFzcyBleHBvcnRzLkJhc2VDbGFzc1xuXG4gICAgQGRlZmluZSA9IChwcm9wZXJ0eU5hbWUsIGRlc2NyaXB0b3IpIC0+XG4gICAgICAgIGlmIGRlc2NyaXB0b3IucmVhZG9ubHlcbiAgICAgICAgICAgIGRlc2NyaXB0b3Iuc2V0ID0gKHZhbHVlKSAtPlxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiI3tAY29uc3RydWN0b3IubmFtZX0uI3twcm9wZXJ0eU5hbWV9IGlzIHJlYWRvbmx5XCIpXG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEBwcm90b3R5cGUsIHByb3BlcnR5TmFtZSwgZGVzY3JpcHRvcikiLCJfID0gRnJhbWVyLl9cblxucmVxdWlyZSAnLi9saWIvT3JiaXRDb250cm9scydcbntCYXNlQ2xhc3N9ID0gcmVxdWlyZSAnLi9fQmFzZUNsYXNzLmNvZmZlZSdcbntBbmltYXRpb259ID0gcmVxdWlyZSAnLi9fQW5pbWF0aW9uLmNvZmZlZSdcbntTdGF0ZXN9ID0gcmVxdWlyZSAnLi9fU3RhdGVzLmNvZmZlZSdcblxuY2xhc3MgZXhwb3J0cy5DYW1lcmEgZXh0ZW5kcyBCYXNlQ2xhc3NcbiAgICBjb25zdHJ1Y3RvcjogKHByb3BlcnRpZXM9e30sIHNjZW5lRE9NKSAtPlxuICAgICAgICBzdXBlcigpXG5cbiAgICAgICAgQHNjZW5lRE9NID0gc2NlbmVET01cblxuICAgICAgICBfLmRlZmF1bHRzIHByb3BlcnRpZXMsXG4gICAgICAgICAgICB4OiAwXG4gICAgICAgICAgICB5OiAwXG4gICAgICAgICAgICB6OiA1MDBcbiAgICAgICAgICAgIHJvdGF0aW9uWDogMFxuICAgICAgICAgICAgcm90YXRpb25ZOiAwXG4gICAgICAgICAgICByb3RhdGlvblo6IDBcbiAgICAgICAgICAgIGZvdjogMzVcbiAgICAgICAgICAgIG5lYXI6IDAuMVxuICAgICAgICAgICAgZmFyOiAxMDAwMFxuICAgICAgICAgICAgZW5hYmxlUGFuOiBmYWxzZVxuICAgICAgICAgICAgZW5hYmxlWm9vbTogZmFsc2VcbiAgICAgICAgICAgIGVuYWJsZVJvdGF0ZTogZmFsc2VcbiAgICAgICAgICAgIGVuYWJsZURhbXBpbmc6IGZhbHNlXG4gICAgICAgICAgICBkYW1waW5nRmFjdG9yOiAxLjRcbiAgICAgICAgICAgIGF1dG9Sb3RhdGU6IGZhbHNlXG4gICAgICAgICAgICBhdXRvUm90YXRlU3BlZWQ6IDEwXG4gICAgICAgICAgICB0YXJnZXQ6IG5ldyBUSFJFRS5WZWN0b3IzIDAsIDAsIDBcblxuICAgICAgICBAbmF0aXZlQ2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKFxuICAgICAgICAgICAgcHJvcGVydGllcy5mb3YsIFxuICAgICAgICAgICAgcHJvcGVydGllcy5hc3BlY3QsIFxuICAgICAgICAgICAgcHJvcGVydGllcy5uZWFyLCBcbiAgICAgICAgICAgIHByb3BlcnRpZXMuZmFyXG4gICAgICAgIClcblxuICAgICAgICBpZiBwcm9wZXJ0aWVzLm9yYml0Q29udHJvbHNcbiAgICAgICAgICAgIEBzZXR1cE9yYml0Q29udHJvbHMgcHJvcGVydGllc1xuXG4gICAgICAgIEBzZXRQb3NpdGlvbiBbcHJvcGVydGllcy54LCBwcm9wZXJ0aWVzLnksIHByb3BlcnRpZXMuel1cbiAgICAgICAgQHNldFJvdGF0aW9uIFtwcm9wZXJ0aWVzLnJvdGF0aW9uWCwgcHJvcGVydGllcy5yb3RhdGlvblksIHByb3BlcnRpZXMucm90YXRpb25aXVxuXG4gICAgICAgIEBzYXZlSW5pdGlhbFByb3BlcnRpZXMoKVxuXG4gICAgICAgIEBfc3RhdGVzID0gbmV3IFN0YXRlcyBAXG4gICAgXG4gICAgc2V0dXBPcmJpdENvbnRyb2xzOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgQGNvbnRyb2xzID0gbmV3IFRIUkVFLk9yYml0Q29udHJvbHMgQG5hdGl2ZUNhbWVyYSwgQHNjZW5lRE9NXG4gICAgICAgIEBlbmFibGVQYW4gPSBwcm9wZXJ0aWVzLmVuYWJsZVBhblxuICAgICAgICBAZW5hYmxlWm9vbSA9IHByb3BlcnRpZXMuZW5hYmxlWm9vbVxuICAgICAgICBAZW5hYmxlUm90YXRlID0gcHJvcGVydGllcy5lbmFibGVSb3RhdGVcbiAgICAgICAgQGVuYWJsZURhbXBpbmcgPSBwcm9wZXJ0aWVzLmVuYWJsZURhbXBpbmdcbiAgICAgICAgQGRhbXBpbmdGYWN0b3IgPSBwcm9wZXJ0aWVzLmRhbXBpbmdGYWN0b3JcbiAgICAgICAgQGF1dG9Sb3RhdGUgPSBwcm9wZXJ0aWVzLmF1dG9Sb3RhdGVcbiAgICAgICAgQGF1dG9Sb3RhdGVTcGVlZCA9IHByb3BlcnRpZXMuYXV0b1JvdGF0ZVNwZWVkXG4gICAgICAgIEB0YXJnZXQgPSBwcm9wZXJ0aWVzLnRhcmdldFxuXG4gICAgc2F2ZUluaXRpYWxQcm9wZXJ0aWVzOiAoKSAtPlxuICAgICAgICBAaW5pdGlhbFByb3BlcnRpZXMgPSBAXG5cbiAgICBvbjogKGV2ZW50TmFtZSwgY2IpIC0+XG5cbiAgICAgICAgaWYgZXZlbnROYW1lLmluY2x1ZGVzICdjaGFuZ2UnXG4gICAgICAgICAgICBjYWxsYmFjayA9IChlKSAtPiBjYihlLnZhbHVlKVxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5hZGRFdmVudExpc3RlbmVyIGV2ZW50TmFtZSwgY2FsbGJhY2tcblxuICAgICAgICAgICAgRnJhbWVyLkN1cnJlbnRDb250ZXh0Lm9uICdyZXNldCcsID0+XG4gICAgICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5yZW1vdmVFdmVudExpc3RlbmVyIGV2ZW50TmFtZSwgY2FsbGJhY2tcblxuICAgIHNldFBvc2l0aW9uOiAocG9zaXRpb25zKSAtPlxuICAgICAgICBAeCA9IHBvc2l0aW9uc1swXVxuICAgICAgICBAeSA9IHBvc2l0aW9uc1sxXVxuICAgICAgICBAeiA9IHBvc2l0aW9uc1syXVxuICAgIFxuICAgIHNldFJvdGF0aW9uOiAocm90YXRpb25zKSAtPlxuICAgICAgICBAcm90YXRpb25YID0gcm90YXRpb25zWzBdXG4gICAgICAgIEByb3RhdGlvblkgPSByb3RhdGlvbnNbMV1cbiAgICAgICAgQHJvdGF0aW9uWiA9IHJvdGF0aW9uc1syXVxuICAgIFxuICAgIGFuaW1hdGU6IChwcm9wZXJ0aWVzKSAtPlxuICAgICAgICBuZXcgQW5pbWF0aW9uIEAsIHByb3BlcnRpZXNcbiAgICBcbiAgICBsb29rQXQ6IChhLCBiLCBjKSAtPlxuICAgICAgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDFcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEubG9va0F0IGFcbiAgICAgICAgZWxzZSBpZiBhcmd1bWVudHMubGVuZ3RoID09IDNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEubG9va0F0IGEsIGIsIGNcbiAgICBcbiAgICBzdGF0ZVN3aXRjaDogKHN0YXRlKSAtPlxuICAgICAgICAjIExvb3AgdGhyb3VnaCBzdGF0ZXMgb24gbW9kZWwgdG8gZmluZCB0aGUgc3BlY2lmaWVkIG9uZVxuICAgICAgICBPYmplY3Qua2V5cyhAc3RhdGVzKS5tYXAgKGspID0+IFxuICAgICAgICAgICAgaWYgayA9PSBzdGF0ZVxuICAgICAgICAgICAgICAgIEBzdGF0ZXMuY3VycmVudCA9IEBzdGF0ZXNba11cblxuICAgICAgICAgICAgICAgICMgTG9vcCB0aHJvdWdoIHByb3BlcnR5IGtleXMgb24gdGhlIHN0YXRlIGFuZCBhcHBseSB0aGUgdmFsdWVzIHRvIG1vZGVsXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoQHN0YXRlcy5jdXJyZW50KS5tYXAgKHBrKSAgPT5cbiAgICAgICAgICAgICAgICAgICAgQFtwa10gPSBAc3RhdGVzLmN1cnJlbnRbcGtdXG4gICAgXG4gICAgc3RhdGVDeWNsZTogKCkgLT5cbiAgICAgICAgaWYgYXJndW1lbnRzLmxlbmd0aFxuXG4gICAgICAgICAgICBmb3IgcywgaSBpbiBhcmd1bWVudHNcbiAgICAgICAgICAgICAgICBpZiBfLmlzRXF1YWwgQHN0YXRlc1tzXSwgQHN0YXRlcy5jdXJyZW50XG4gICAgICAgICAgICAgICAgICAgIGlmIGkgPT0gKGFyZ3VtZW50cy5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFN0YXRlID0gMFxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0U3RhdGUgPSBpICsgMVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiBuZXh0U3RhdGUgPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgbmV4dFN0YXRlID0gMFxuXG4gICAgICAgICAgICBAYW5pbWF0ZSBhcmd1bWVudHNbbmV4dFN0YXRlXVxuXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHN0YXRlcyA9IE9iamVjdC5rZXlzKEBzdGF0ZXMpXG4gICAgICAgICAgICBzdGF0ZXMuc3BsaWNlKDEsIDEpXG5cbiAgICAgICAgICAgIGZvciBzLCBpIGluIHN0YXRlc1xuICAgICAgICAgICAgICAgIGlmIF8uaXNFcXVhbCBAc3RhdGVzW3NdLCBAc3RhdGVzLmN1cnJlbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgaSA9PSAoc3RhdGVzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0U3RhdGUgPSAwXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTdGF0ZSA9IGkgKyAxXG5cbiAgICAgICAgICAgIEBhbmltYXRlIHN0YXRlc1tuZXh0U3RhdGVdXG5cbiAgICBAZGVmaW5lICdwb3NpdGlvbicsXG4gICAgICAgIGdldDogLT4gQG5hdGl2ZUNhbWVyYS5wb3NpdGlvblxuICAgIFxuICAgIEBkZWZpbmUgJ3gnLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueFxuICAgICAgICBzZXQ6ICh4KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueCA9IHhcbiAgICAgICAgICAgIEBjb250cm9scy51cGRhdGUoKSBpZiBAY29udHJvbHNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp4JywgdmFsdWU6IEB4fVxuICAgIFxuICAgIEBkZWZpbmUgJ3knLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueVxuICAgICAgICBzZXQ6ICh5KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueSA9IHlcbiAgICAgICAgICAgIEBjb250cm9scy51cGRhdGUoKSBpZiBAY29udHJvbHNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp5JywgdmFsdWU6IEB5fVxuICAgIFxuICAgIEBkZWZpbmUgJ3onLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEucG9zaXRpb24uelxuICAgICAgICBzZXQ6ICh6KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueiA9IHpcbiAgICAgICAgICAgIEBjb250cm9scy51cGRhdGUoKSBpZiBAY29udHJvbHNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp6JywgdmFsdWU6IEB6fVxuXG4gICAgQGRlZmluZSAncm90YXRpb24nLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEucm90YXRpb25cbiAgICBcbiAgICBAZGVmaW5lICdyb3RhdGlvblgnLFxuICAgICAgICBnZXQ6IC0+IFRIUkVFLk1hdGgucmFkVG9EZWcgQG5hdGl2ZUNhbWVyYS5yb3RhdGlvbi54XG4gICAgICAgIHNldDogKHgpIC0+IFxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5yb3RhdGlvbi54ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCB4XG4gICAgICAgICAgICBAY29udHJvbHMudXBkYXRlKCkgaWYgQGNvbnRyb2xzXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6cm90YXRpb25YJywgdmFsdWU6IEByb3RhdGlvblh9XG4gICAgXG4gICAgQGRlZmluZSAncm90YXRpb25ZJyxcbiAgICAgICAgZ2V0OiAtPiBUSFJFRS5NYXRoLnJhZFRvRGVnIEBuYXRpdmVDYW1lcmEucm90YXRpb24ueVxuICAgICAgICBzZXQ6ICh5KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEucm90YXRpb24ueSA9IFRIUkVFLk1hdGguZGVnVG9SYWQgeVxuICAgICAgICAgICAgQGNvbnRyb2xzLnVwZGF0ZSgpIGlmIEBjb250cm9sc1xuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnJvdGF0aW9uWScsIHZhbHVlOiBAcm90YXRpb25ZfVxuICAgIFxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uWicsXG4gICAgICAgIGdldDogLT4gVEhSRUUuTWF0aC5yYWRUb0RlZyBAbmF0aXZlQ2FtZXJhLnJvdGF0aW9uLnpcbiAgICAgICAgc2V0OiAoeikgLT4gXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLnJvdGF0aW9uLnogPSBUSFJFRS5NYXRoLmRlZ1RvUmFkIHpcbiAgICAgICAgICAgIEBjb250cm9scy51cGRhdGUoKSBpZiBAY29udHJvbHNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpyb3RhdGlvblonLCB2YWx1ZTogQHJvdGF0aW9uWn1cbiAgICBcbiAgICBAZGVmaW5lICdmb3YnLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEuZm92XG4gICAgICAgIHNldDogKGZvdikgLT4gXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmZvdiA9IGZvdlxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmZvdicsIHZhbHVlOiBAZm92fVxuICAgIFxuICAgIEBkZWZpbmUgJ3pvb20nLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEuem9vbVxuICAgICAgICBzZXQ6IChmYWN0b3IpIC0+IFxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS56b29tID0gZmFjdG9yXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6em9vbScsIHZhbHVlOiBAem9vbX1cbiAgICBcbiAgICBAZGVmaW5lICduZWFyJyxcbiAgICAgICAgZ2V0OiAtPiBAbmF0aXZlQ2FtZXJhLm5lYXJcbiAgICAgICAgc2V0OiAobmVhcikgLT4gXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLm5lYXIgPSBuZWFyXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6bmVhcicsIHZhbHVlOiBAbmVhcn1cbiAgICBcbiAgICBAZGVmaW5lICdmYXInLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEuZmFyXG4gICAgICAgIHNldDogKGZhcikgLT4gXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmZhciA9IGZhclxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmZhcicsIHZhbHVlOiBAZmFyfVxuICAgIFxuICAgIEBkZWZpbmUgJ2FzcGVjdCcsXG4gICAgICAgIGdldDogLT4gQG5hdGl2ZUNhbWVyYS5hc3BlY3RcbiAgICAgICAgc2V0OiAoYXNwZWN0KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuYXNwZWN0ID0gYXNwZWN0XG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6YXNwZWN0JywgdmFsdWU6IEBhc3BlY3R9XG4gICAgXG4gICAgQGRlZmluZSAnc3RhdGVzJyxcbiAgICAgICAgZ2V0OiAtPlxuICAgICAgICAgICAgQF9zdGF0ZXMuc3RhdGVzXG4gICAgICAgIHNldDogKHN0YXRlcykgLT5cbiAgICAgICAgICAgIF8uZXh0ZW5kIEBzdGF0ZXMsIHN0YXRlc1xuXG4gICAgQGRlZmluZSAnZW5hYmxlUGFuJyxcbiAgICAgICAgZ2V0OiAtPiBAY29udHJvbHMuZW5hYmxlUGFuXG4gICAgICAgIHNldDogKGJvb2wpIC0+XG4gICAgICAgICAgICBAY29udHJvbHMuZW5hYmxlUGFuID0gYm9vbFxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmVuYWJsZVBhbicsIHZhbHVlOiBAZW5hYmxlUGFufVxuICAgIFxuICAgIEBkZWZpbmUgJ2VuYWJsZVpvb20nLFxuICAgICAgICBnZXQ6IC0+IEBjb250cm9scy5lbmFibGVab29tXG4gICAgICAgIHNldDogKGJvb2wpIC0+IFxuICAgICAgICAgICAgQGNvbnRyb2xzLmVuYWJsZVpvb20gPSBib29sXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6ZW5hYmxlWm9vbScsIHZhbHVlOiBAZW5hYmxlWm9vbX1cbiAgICBcbiAgICBAZGVmaW5lICdlbmFibGVSb3RhdGUnLFxuICAgICAgICBnZXQ6IC0+IEBjb250cm9scy5lbmFibGVSb3RhdGVcbiAgICAgICAgc2V0OiAoYm9vbCkgLT4gXG4gICAgICAgICAgICBAY29udHJvbHMuZW5hYmxlUm90YXRlID0gYm9vbFxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmVuYWJsZVJvdGF0ZScsIHZhbHVlOiBAZW5hYmxlUm90YXRlfVxuICAgIFxuICAgIEBkZWZpbmUgJ2VuYWJsZURhbXBpbmcnLFxuICAgICAgICBnZXQ6IC0+IEBjb250cm9scy5lbmFibGVEYW1waW5nXG4gICAgICAgIHNldDogKGJvb2wpIC0+IFxuICAgICAgICAgICAgQGNvbnRyb2xzLmVuYWJsZURhbXBpbmcgPSBib29sXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6ZW5hYmxlRGFtcGluZycsIHZhbHVlOiBAZW5hYmxlRGFtcGluZ31cbiAgICBcbiAgICBAZGVmaW5lICdkYW1waW5nRmFjdG9yJyxcbiAgICAgICAgZ2V0OiAtPiBAY29udHJvbHMuZGFtcGluZ0ZhY3RvclxuICAgICAgICBzZXQ6IChkYW1waW5nRmFjdG9yKSAtPiBcbiAgICAgICAgICAgIEBjb250cm9scy5kYW1waW5nRmFjdG9yID0gZGFtcGluZ0ZhY3RvclxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmRhbXBpbmdGYWN0b3InLCB2YWx1ZTogQGRhbXBpbmdGYWN0b3J9XG4gICAgXG4gICAgQGRlZmluZSAnYXV0b1JvdGF0ZScsXG4gICAgICAgIGdldDogLT4gQGNvbnRyb2xzLmF1dG9Sb3RhdGVcbiAgICAgICAgc2V0OiAoYm9vbCkgLT4gXG4gICAgICAgICAgICBAY29udHJvbHMuYXV0b1JvdGF0ZSA9IGJvb2xcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTphdXRvUm90YXRlJywgdmFsdWU6IEBhdXRvUm90YXRlfVxuICAgIFxuICAgIEBkZWZpbmUgJ2F1dG9Sb3RhdGVTcGVlZCcsXG4gICAgICAgIGdldDogLT4gQGNvbnRyb2xzLmF1dG9Sb3RhdGVTcGVlZFxuICAgICAgICBzZXQ6IChzcGVlZCkgLT4gXG4gICAgICAgICAgICBAY29udHJvbHMuYXV0b1JvdGF0ZVNwZWVkID0gc3BlZWRcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTphdXRvUm90YXRlU3BlZWQnLCB2YWx1ZTogQGF1dG9Sb3RhdGVTcGVlZH1cbiAgICBcbiAgICBAZGVmaW5lICd0YXJnZXQnLFxuICAgICAgICBnZXQ6IC0+IEBjb250cm9scy50YXJnZXRcbiAgICAgICAgc2V0OiAodmVjdG9yMykgLT4gXG4gICAgICAgICAgICBAY29udHJvbHMudGFyZ2V0ID0gdmVjdG9yM1xuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnRhcmdldCcsIHZhbHVlOiBAdGFyZ2V0fSIsIntCYXNlQ2xhc3N9ID0gcmVxdWlyZSAnLi9fQmFzZUNsYXNzLmNvZmZlZSdcblxuYWNjZXB0ZWRNb2RlbFByb3BlcnRpZXMgPSBbXG4gICAgJ3gnXG4gICAgJ3knXG4gICAgJ3onXG4gICAgJ3JvdGF0aW9uWCdcbiAgICAncm90YXRpb25ZJ1xuICAgICdyb3RhdGlvblonXG4gICAgJ3NjYWxlJ1xuICAgICdzY2FsZVgnXG4gICAgJ3NjYWxlWSdcbiAgICAnc2NhbGVaJ1xuICAgICdvcHRpb25zJ1xuXVxuXG5yZXNlcnZlZFN0YXRlRXJyb3IgPSAobmFtZSkgLT5cblx0dGhyb3cgRXJyb3IoXCJUaGUgc3RhdGUgJyN7bmFtZX0nIGlzIGEgcmVzZXJ2ZWQgbmFtZS5cIilcblxuY2xhc3MgZXhwb3J0cy5TdGF0ZXMgZXh0ZW5kcyBCYXNlQ2xhc3NcblxuICAgIGNvbnN0cnVjdG9yOiAobW9kZWwpIC0+XG4gICAgICAgIHN1cGVyKClcblxuICAgICAgICBAbW9kZWwgPSBtb2RlbFxuXG4gICAgICAgIEBpbml0aWFsTW9kZWxQcm9wZXJ0aWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgT2JqZWN0LmdldFByb3RvdHlwZU9mIEBtb2RlbC5pbml0aWFsUHJvcGVydGllc1xuXG4gICAgICAgIEBzdGF0ZXMgPSBcbiAgICAgICAgICAgIGRlZmF1bHQ6IEBmaWx0ZXJQcm9wZXJ0aWVzIEBpbml0aWFsTW9kZWxQcm9wZXJ0aWVzXG4gICAgICAgICAgICBjdXJyZW50OiBAZmlsdGVyUHJvcGVydGllcyBAaW5pdGlhbE1vZGVsUHJvcGVydGllc1xuXG4gICAgZmlsdGVyUHJvcGVydGllczogKHByb3BldGllcykgLT5cbiAgICAgICAgbmV3UHJvcGVydHlPYmogPSB7fVxuICAgICAgICBwcm9wZXRpZXMubWFwIChrKSA9PlxuICAgICAgICAgICAgaWYgYWNjZXB0ZWRNb2RlbFByb3BlcnRpZXMuaW5jbHVkZXMga1xuICAgICAgICAgICAgICAgIG5ld1Byb3BlcnR5T2JqW2tdID0gQG1vZGVsW2tdXG4gICAgICAgIHJldHVybiBuZXdQcm9wZXJ0eU9ialxuICAgIFxuICAgIEBkZWZpbmUgJ2N1cnJlbnQnLFxuICAgICAgICBnZXQ6IC0+IEBzdGF0ZXMuY3VycmVudCxcbiAgICAgICAgc2V0OiAoc3RhdGUpIC0+XG4gICAgICAgICAgICBAc3RhdGVzLnByZXZpb3VzID0gQHN0YXRlcy5jdXJyZW50XG4gICAgICAgICAgICBAc3RhdGVzLmN1cnJlbnQgPSBzdGF0ZVxuICAgIFxuICAgIEBkZWZpbmUgJ3ByZXZpb3VzJyxcbiAgICAgICAgZ2V0OiAtPiBAc3RhdGVzLnByZXZpb3VzIiwiLyoqXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xuICogQGF1dGhvciBNdWdlbjg3IC8gaHR0cHM6Ly9naXRodWIuY29tL011Z2VuODdcbiAqL1xuXG5USFJFRS5Db2xsYWRhTG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuICAgIFxuICAgICAgICB0aGlzLm1hbmFnZXIgPSAoIG1hbmFnZXIgIT09IHVuZGVmaW5lZCApID8gbWFuYWdlciA6IFRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjtcbiAgICBcbiAgICB9O1xuICAgIFxuICAgIFRIUkVFLkNvbGxhZGFMb2FkZXIucHJvdG90eXBlID0ge1xuICAgIFxuICAgICAgICBjb25zdHJ1Y3RvcjogVEhSRUUuQ29sbGFkYUxvYWRlcixcbiAgICBcbiAgICAgICAgY3Jvc3NPcmlnaW46ICdBbm9ueW1vdXMnLFxuICAgIFxuICAgICAgICBsb2FkOiBmdW5jdGlvbiAoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcbiAgICBcbiAgICAgICAgICAgIHZhciBwYXRoID0gc2NvcGUucGF0aCA9PT0gdW5kZWZpbmVkID8gVEhSRUUuTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UoIHVybCApIDogc2NvcGUucGF0aDtcbiAgICBcbiAgICAgICAgICAgIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuRmlsZUxvYWRlciggc2NvcGUubWFuYWdlciApO1xuICAgICAgICAgICAgbG9hZGVyLmxvYWQoIHVybCwgZnVuY3Rpb24gKCB0ZXh0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIG9uTG9hZCggc2NvcGUucGFyc2UoIHRleHQsIHBhdGggKSApO1xuICAgIFxuICAgICAgICAgICAgfSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuICAgIFxuICAgICAgICB9LFxuICAgIFxuICAgICAgICBzZXRQYXRoOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuICAgIFxuICAgICAgICAgICAgdGhpcy5wYXRoID0gdmFsdWU7XG4gICAgXG4gICAgICAgIH0sXG4gICAgXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICBcbiAgICAgICAgICAgIHNldCBjb252ZXJ0VXBBeGlzKCB2YWx1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBvcHRpb25zLmNvbnZlcnRVcEF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLiBVcCBheGlzIGlzIGNvbnZlcnRlZCBhdXRvbWF0aWNhbGx5LicgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfSxcbiAgICBcbiAgICAgICAgc2V0Q3Jvc3NPcmlnaW46IGZ1bmN0aW9uICggdmFsdWUgKSB7XG4gICAgXG4gICAgICAgICAgICB0aGlzLmNyb3NzT3JpZ2luID0gdmFsdWU7XG4gICAgXG4gICAgICAgIH0sXG4gICAgXG4gICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoIHRleHQsIHBhdGggKSB7XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCBuYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIE5vbiByZWN1cnNpdmUgeG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCkgLi4uXG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSB4bWwuY2hpbGROb2RlcztcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBjaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlTmFtZSA9PT0gbmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5LnB1c2goIGNoaWxkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VTdHJpbmdzKCB0ZXh0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggdGV4dC5sZW5ndGggPT09IDAgKSByZXR1cm4gW107XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gdGV4dC50cmltKCkuc3BsaXQoIC9cXHMrLyApO1xuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IG5ldyBBcnJheSggcGFydHMubGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlbIGkgXSA9IHBhcnRzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlRmxvYXRzKCB0ZXh0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggdGV4dC5sZW5ndGggPT09IDAgKSByZXR1cm4gW107XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gdGV4dC50cmltKCkuc3BsaXQoIC9cXHMrLyApO1xuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IG5ldyBBcnJheSggcGFydHMubGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlbIGkgXSA9IHBhcnNlRmxvYXQoIHBhcnRzWyBpIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VJbnRzKCB0ZXh0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggdGV4dC5sZW5ndGggPT09IDAgKSByZXR1cm4gW107XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gdGV4dC50cmltKCkuc3BsaXQoIC9cXHMrLyApO1xuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IG5ldyBBcnJheSggcGFydHMubGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlbIGkgXSA9IHBhcnNlSW50KCBwYXJ0c1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlSWQoIHRleHQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHQuc3Vic3RyaW5nKCAxICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUlkKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiAndGhyZWVfZGVmYXVsdF8nICsgKCBjb3VudCArKyApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gaXNFbXB0eSggb2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyggb2JqZWN0ICkubGVuZ3RoID09PSAwO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gYXNzZXRcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQXNzZXQoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bml0OiBwYXJzZUFzc2V0VW5pdCggZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgJ3VuaXQnIClbIDAgXSApLFxuICAgICAgICAgICAgICAgICAgICB1cEF4aXM6IHBhcnNlQXNzZXRVcEF4aXMoIGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICd1cF9heGlzJyApWyAwIF0gKVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUFzc2V0VW5pdCggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB4bWwgIT09IHVuZGVmaW5lZCA/IHBhcnNlRmxvYXQoIHhtbC5nZXRBdHRyaWJ1dGUoICdtZXRlcicgKSApIDogMTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQXNzZXRVcEF4aXMoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4geG1sICE9PSB1bmRlZmluZWQgPyB4bWwudGV4dENvbnRlbnQgOiAnWV9VUCc7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBsaWJyYXJ5XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUxpYnJhcnkoIHhtbCwgbGlicmFyeU5hbWUsIG5vZGVOYW1lLCBwYXJzZXIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGxpYnJhcnkgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCBsaWJyYXJ5TmFtZSApWyAwIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBsaWJyYXJ5ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCBsaWJyYXJ5LCBub2RlTmFtZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIoIGVsZW1lbnRzWyBpIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkTGlicmFyeSggZGF0YSwgYnVpbGRlciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbmFtZSBpbiBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gZGF0YVsgbmFtZSBdO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuYnVpbGQgPSBidWlsZGVyKCBkYXRhWyBuYW1lIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBnZXRcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEJ1aWxkKCBkYXRhLCBidWlsZGVyICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZGF0YS5idWlsZCAhPT0gdW5kZWZpbmVkICkgcmV0dXJuIGRhdGEuYnVpbGQ7XG4gICAgXG4gICAgICAgICAgICAgICAgZGF0YS5idWlsZCA9IGJ1aWxkZXIoIGRhdGEgKTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5idWlsZDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIGFuaW1hdGlvblxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VBbmltYXRpb24oIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlczoge30sXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZXJzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbHM6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAnaWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zb3VyY2VzWyBpZCBdID0gcGFyc2VTb3VyY2UoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzYW1wbGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ2lkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2FtcGxlcnNbIGlkIF0gPSBwYXJzZUFuaW1hdGlvblNhbXBsZXIoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGFubmVsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3RhcmdldCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNoYW5uZWxzWyBpZCBdID0gcGFyc2VBbmltYXRpb25DaGFubmVsKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggY2hpbGQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5LmFuaW1hdGlvbnNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9uU2FtcGxlciggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dHM6IHt9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VtYW50aWMgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzZW1hbnRpYycgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlucHV0c1sgc2VtYW50aWMgXSA9IGlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VBbmltYXRpb25DaGFubmVsKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0geG1sLmdldEF0dHJpYnV0ZSggJ3RhcmdldCcgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBwYXJzaW5nIFNJRCBBZGRyZXNzaW5nIFN5bnRheFxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHRhcmdldC5zcGxpdCggJy8nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGlkID0gcGFydHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgc2lkID0gcGFydHMuc2hpZnQoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBzZWxlY3Rpb24gc3ludGF4XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGFycmF5U3ludGF4ID0gKCBzaWQuaW5kZXhPZiggJygnICkgIT09IC0gMSApO1xuICAgICAgICAgICAgICAgIHZhciBtZW1iZXJTeW50YXggPSAoIHNpZC5pbmRleE9mKCAnLicgKSAhPT0gLSAxICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtZW1iZXJTeW50YXggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vICBtZW1iZXIgc2VsZWN0aW9uIGFjY2Vzc1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBwYXJ0cyA9IHNpZC5zcGxpdCggJy4nICk7XG4gICAgICAgICAgICAgICAgICAgIHNpZCA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEubWVtYmVyID0gcGFydHMuc2hpZnQoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBhcnJheVN5bnRheCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gYXJyYXktYWNjZXNzIHN5bnRheC4gY2FuIGJlIHVzZWQgdG8gZXhwcmVzcyBmaWVsZHMgaW4gb25lLWRpbWVuc2lvbmFsIHZlY3RvcnMgb3IgdHdvLWRpbWVuc2lvbmFsIG1hdHJpY2VzLlxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaWNlcyA9IHNpZC5zcGxpdCggJygnICk7XG4gICAgICAgICAgICAgICAgICAgIHNpZCA9IGluZGljZXMuc2hpZnQoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzWyBpIF0gPSBwYXJzZUludCggaW5kaWNlc1sgaSBdLnJlcGxhY2UoIC9cXCkvLCAnJyApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5pbmRpY2VzID0gaW5kaWNlcztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgZGF0YS5pZCA9IGlkO1xuICAgICAgICAgICAgICAgIGRhdGEuc2lkID0gc2lkO1xuICAgIFxuICAgICAgICAgICAgICAgIGRhdGEuYXJyYXlTeW50YXggPSBhcnJheVN5bnRheDtcbiAgICAgICAgICAgICAgICBkYXRhLm1lbWJlclN5bnRheCA9IG1lbWJlclN5bnRheDtcbiAgICBcbiAgICAgICAgICAgICAgICBkYXRhLnNhbXBsZXIgPSBwYXJzZUlkKCB4bWwuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZEFuaW1hdGlvbiggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdHJhY2tzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNoYW5uZWxzID0gZGF0YS5jaGFubmVscztcbiAgICAgICAgICAgICAgICB2YXIgc2FtcGxlcnMgPSBkYXRhLnNhbXBsZXJzO1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VzID0gZGF0YS5zb3VyY2VzO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciB0YXJnZXQgaW4gY2hhbm5lbHMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hhbm5lbHMuaGFzT3duUHJvcGVydHkoIHRhcmdldCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSBjaGFubmVsc1sgdGFyZ2V0IF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2FtcGxlciA9IHNhbXBsZXJzWyBjaGFubmVsLnNhbXBsZXIgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dElkID0gc2FtcGxlci5pbnB1dHMuSU5QVVQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3V0cHV0SWQgPSBzYW1wbGVyLmlucHV0cy5PVVRQVVQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRTb3VyY2UgPSBzb3VyY2VzWyBpbnB1dElkIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3V0cHV0U291cmNlID0gc291cmNlc1sgb3V0cHV0SWQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBidWlsZEFuaW1hdGlvbkNoYW5uZWwoIGNoYW5uZWwsIGlucHV0U291cmNlLCBvdXRwdXRTb3VyY2UgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUtleWZyYW1lVHJhY2tzKCBhbmltYXRpb24sIHRyYWNrcyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFja3M7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRBbmltYXRpb24oIGlkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5hbmltYXRpb25zWyBpZCBdLCBidWlsZEFuaW1hdGlvbiApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRBbmltYXRpb25DaGFubmVsKCBjaGFubmVsLCBpbnB1dFNvdXJjZSwgb3V0cHV0U291cmNlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBub2RlID0gbGlicmFyeS5ub2Rlc1sgY2hhbm5lbC5pZCBdO1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3QzRCA9IGdldE5vZGUoIG5vZGUuaWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gbm9kZS50cmFuc2Zvcm1zWyBjaGFubmVsLnNpZCBdO1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0TWF0cml4ID0gbm9kZS5tYXRyaXguY2xvbmUoKS50cmFuc3Bvc2UoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdGltZSwgc3RyaWRlO1xuICAgICAgICAgICAgICAgIHZhciBpLCBpbCwgaiwgamw7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyB0aGUgY29sbGFkYSBzcGVjIGFsbG93cyB0aGUgYW5pbWF0aW9uIG9mIGRhdGEgaW4gdmFyaW91cyB3YXlzLlxuICAgICAgICAgICAgICAgIC8vIGRlcGVuZGluZyBvbiB0aGUgdHJhbnNmb3JtIHR5cGUgKG1hdHJpeCwgdHJhbnNsYXRlLCByb3RhdGUsIHNjYWxlKSwgd2UgZXhlY3V0ZSBkaWZmZXJlbnQgbG9naWNcbiAgICBcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCB0cmFuc2Zvcm0gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgaWwgPSBpbnB1dFNvdXJjZS5hcnJheS5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lID0gaW5wdXRTb3VyY2UuYXJyYXlbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpZGUgPSBpICogb3V0cHV0U291cmNlLnN0cmlkZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRhdGFbIHRpbWUgXSA9PT0gdW5kZWZpbmVkICkgZGF0YVsgdGltZSBdID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGFubmVsLmFycmF5U3ludGF4ID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvdXRwdXRTb3VyY2UuYXJyYXlbIHN0cmlkZSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBjaGFubmVsLmluZGljZXNbIDAgXSArIDQgKiBjaGFubmVsLmluZGljZXNbIDEgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsgdGltZSBdWyBpbmRleCBdID0gdmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggaiA9IDAsIGpsID0gb3V0cHV0U291cmNlLnN0cmlkZTsgaiA8IGpsOyBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsgdGltZSBdWyBqIF0gPSBvdXRwdXRTb3VyY2UuYXJyYXlbIHN0cmlkZSArIGogXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQW5pbWF0aW9uIHRyYW5zZm9ybSB0eXBlIFwiJXNcIiBub3QgeWV0IGltcGxlbWVudGVkLicsIHRyYW5zZm9ybSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBBbmltYXRpb24gdHJhbnNmb3JtIHR5cGUgXCIlc1wiIG5vdCB5ZXQgaW1wbGVtZW50ZWQuJywgdHJhbnNmb3JtICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQW5pbWF0aW9uIHRyYW5zZm9ybSB0eXBlIFwiJXNcIiBub3QgeWV0IGltcGxlbWVudGVkLicsIHRyYW5zZm9ybSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBrZXlmcmFtZXMgPSBwcmVwYXJlQW5pbWF0aW9uRGF0YSggZGF0YSwgZGVmYXVsdE1hdHJpeCApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG9iamVjdDNELnV1aWQsXG4gICAgICAgICAgICAgICAgICAgIGtleWZyYW1lczoga2V5ZnJhbWVzXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5pbWF0aW9uO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcHJlcGFyZUFuaW1hdGlvbkRhdGEoIGRhdGEsIGRlZmF1bHRNYXRyaXggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGtleWZyYW1lcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVyIGRhdGEgaW50byBhIHNvcnRhYmxlIGFycmF5XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIHRpbWUgaW4gZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAga2V5ZnJhbWVzLnB1c2goIHsgdGltZTogcGFyc2VGbG9hdCggdGltZSApLCB2YWx1ZTogZGF0YVsgdGltZSBdIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlIGtleWZyYW1lcyBhcmUgc29ydGVkIGJ5IHRpbWVcbiAgICBcbiAgICAgICAgICAgICAgICBrZXlmcmFtZXMuc29ydCggYXNjZW5kaW5nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gbm93IHdlIGNsZWFuIHVwIGFsbCBhbmltYXRpb24gZGF0YSwgc28gd2UgY2FuIHVzZSB0aGVtIGZvciBrZXlmcmFtZSB0cmFja3NcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCAxNjsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtQW5pbWF0aW9uRGF0YSgga2V5ZnJhbWVzLCBpLCBkZWZhdWx0TWF0cml4LmVsZW1lbnRzWyBpIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleWZyYW1lcztcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBhcnJheSBzb3J0IGZ1bmN0aW9uXG4gICAgXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYXNjZW5kaW5nKCBhLCBiICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS50aW1lIC0gYi50aW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgICAgICB2YXIgc2NhbGUgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICAgICAgdmFyIHF1YXRlcm5pb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlS2V5ZnJhbWVUcmFja3MoIGFuaW1hdGlvbiwgdHJhY2tzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBrZXlmcmFtZXMgPSBhbmltYXRpb24ua2V5ZnJhbWVzO1xuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gYW5pbWF0aW9uLm5hbWU7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRpbWVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBxdWF0ZXJuaW9uRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZURhdGEgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBrZXlmcmFtZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleWZyYW1lID0ga2V5ZnJhbWVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lID0ga2V5ZnJhbWUudGltZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0ga2V5ZnJhbWUudmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5mcm9tQXJyYXkoIHZhbHVlICkudHJhbnNwb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5kZWNvbXBvc2UoIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBzY2FsZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aW1lcy5wdXNoKCB0aW1lICk7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uRGF0YS5wdXNoKCBwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56ICk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXRlcm5pb25EYXRhLnB1c2goIHF1YXRlcm5pb24ueCwgcXVhdGVybmlvbi55LCBxdWF0ZXJuaW9uLnosIHF1YXRlcm5pb24udyApO1xuICAgICAgICAgICAgICAgICAgICBzY2FsZURhdGEucHVzaCggc2NhbGUueCwgc2NhbGUueSwgc2NhbGUueiApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHBvc2l0aW9uRGF0YS5sZW5ndGggPiAwICkgdHJhY2tzLnB1c2goIG5ldyBUSFJFRS5WZWN0b3JLZXlmcmFtZVRyYWNrKCBuYW1lICsgJy5wb3NpdGlvbicsIHRpbWVzLCBwb3NpdGlvbkRhdGEgKSApO1xuICAgICAgICAgICAgICAgIGlmICggcXVhdGVybmlvbkRhdGEubGVuZ3RoID4gMCApIHRyYWNrcy5wdXNoKCBuZXcgVEhSRUUuUXVhdGVybmlvbktleWZyYW1lVHJhY2soIG5hbWUgKyAnLnF1YXRlcm5pb24nLCB0aW1lcywgcXVhdGVybmlvbkRhdGEgKSApO1xuICAgICAgICAgICAgICAgIGlmICggc2NhbGVEYXRhLmxlbmd0aCA+IDAgKSB0cmFja3MucHVzaCggbmV3IFRIUkVFLlZlY3RvcktleWZyYW1lVHJhY2soIG5hbWUgKyAnLnNjYWxlJywgdGltZXMsIHNjYWxlRGF0YSApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrcztcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybUFuaW1hdGlvbkRhdGEoIGtleWZyYW1lcywgcHJvcGVydHksIGRlZmF1bHRWYWx1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIga2V5ZnJhbWU7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGVtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgaSwgbDtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBjaGVjaywgaWYgdmFsdWVzIG9mIGEgcHJvcGVydHkgYXJlIG1pc3NpbmcgaW4gb3VyIGtleWZyYW1lc1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwLCBsID0ga2V5ZnJhbWVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGtleWZyYW1lID0ga2V5ZnJhbWVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICgga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdID0gbnVsbDsgLy8gbWFyayBhcyBtaXNzaW5nXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBlbXB0eSA9IGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZW1wdHkgPT09IHRydWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIHZhbHVlcyBhdCBhbGwsIHNvIHdlIHNldCBhIGRlZmF1bHQgdmFsdWVcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggaSA9IDAsIGwgPSBrZXlmcmFtZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleWZyYW1lID0ga2V5ZnJhbWVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlmcmFtZS52YWx1ZVsgcHJvcGVydHkgXSA9IGRlZmF1bHRWYWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpbGxpbmcgZ2Fwc1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVNaXNzaW5nS2V5ZnJhbWVzKCBrZXlmcmFtZXMsIHByb3BlcnR5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlTWlzc2luZ0tleWZyYW1lcygga2V5ZnJhbWVzLCBwcm9wZXJ0eSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcHJldiwgbmV4dDtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBrZXlmcmFtZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleWZyYW1lID0ga2V5ZnJhbWVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICgga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gPT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ID0gZ2V0UHJldigga2V5ZnJhbWVzLCBpLCBwcm9wZXJ0eSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IGdldE5leHQoIGtleWZyYW1lcywgaSwgcHJvcGVydHkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcHJldiA9PT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlmcmFtZS52YWx1ZVsgcHJvcGVydHkgXSA9IG5leHQudmFsdWVbIHByb3BlcnR5IF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5leHQgPT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gPSBwcmV2LnZhbHVlWyBwcm9wZXJ0eSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJwb2xhdGUoIGtleWZyYW1lLCBwcmV2LCBuZXh0LCBwcm9wZXJ0eSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UHJldigga2V5ZnJhbWVzLCBpLCBwcm9wZXJ0eSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB3aGlsZSAoIGkgPj0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleWZyYW1lID0ga2V5ZnJhbWVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICgga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gIT09IG51bGwgKSByZXR1cm4ga2V5ZnJhbWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGkgLS07XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TmV4dCgga2V5ZnJhbWVzLCBpLCBwcm9wZXJ0eSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB3aGlsZSAoIGkgPCBrZXlmcmFtZXMubGVuZ3RoICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ZnJhbWUgPSBrZXlmcmFtZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBrZXlmcmFtZS52YWx1ZVsgcHJvcGVydHkgXSAhPT0gbnVsbCApIHJldHVybiBrZXlmcmFtZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaSArKztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBpbnRlcnBvbGF0ZSgga2V5LCBwcmV2LCBuZXh0LCBwcm9wZXJ0eSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoICggbmV4dC50aW1lIC0gcHJldi50aW1lICkgPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGtleS52YWx1ZVsgcHJvcGVydHkgXSA9IHByZXYudmFsdWVbIHByb3BlcnR5IF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAga2V5LnZhbHVlWyBwcm9wZXJ0eSBdID0gKCAoIGtleS50aW1lIC0gcHJldi50aW1lICkgKiAoIG5leHQudmFsdWVbIHByb3BlcnR5IF0gLSBwcmV2LnZhbHVlWyBwcm9wZXJ0eSBdICkgLyAoIG5leHQudGltZSAtIHByZXYudGltZSApICkgKyBwcmV2LnZhbHVlWyBwcm9wZXJ0eSBdO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gYW5pbWF0aW9uIGNsaXBzXG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUFuaW1hdGlvbkNsaXAoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIHx8ICdkZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHBhcnNlRmxvYXQoIHhtbC5nZXRBdHRyaWJ1dGUoICdzdGFydCcgKSB8fCAwICksXG4gICAgICAgICAgICAgICAgICAgIGVuZDogcGFyc2VGbG9hdCggeG1sLmdldEF0dHJpYnV0ZSggJ2VuZCcgKSB8fCAwICksXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbnM6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFuY2VfYW5pbWF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmFuaW1hdGlvbnMucHVzaCggcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAndXJsJyApICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5LmNsaXBzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZEFuaW1hdGlvbkNsaXAoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRyYWNrcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9ICggZGF0YS5lbmQgLSBkYXRhLnN0YXJ0ICkgfHwgLSAxO1xuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb25zID0gZGF0YS5hbmltYXRpb25zO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBhbmltYXRpb25zLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uVHJhY2tzID0gZ2V0QW5pbWF0aW9uKCBhbmltYXRpb25zWyBpIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwLCBqbCA9IGFuaW1hdGlvblRyYWNrcy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrcy5wdXNoKCBhbmltYXRpb25UcmFja3NbIGogXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuQW5pbWF0aW9uQ2xpcCggbmFtZSwgZHVyYXRpb24sIHRyYWNrcyApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QW5pbWF0aW9uQ2xpcCggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmNsaXBzWyBpZCBdLCBidWlsZEFuaW1hdGlvbkNsaXAgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIGNvbnRyb2xsZXJcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQ29udHJvbGxlciggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NraW4nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIGV4YWN0bHkgb25lIHNraW4gcGVyIGNvbnRyb2xsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlkID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5za2luID0gcGFyc2VTa2luKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW9ycGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaWQgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBNb3JwaCB0YXJnZXQgYW5pbWF0aW9uIG5vdCBzdXBwb3J0ZWQgeWV0LicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5LmNvbnRyb2xsZXJzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZVNraW4oIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlczoge31cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdiaW5kX3NoYXBlX21hdHJpeCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5iaW5kU2hhcGVNYXRyaXggPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NvdXJjZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAnaWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zb3VyY2VzWyBpZCBdID0gcGFyc2VTb3VyY2UoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdqb2ludHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuam9pbnRzID0gcGFyc2VKb2ludHMoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd2ZXJ0ZXhfd2VpZ2h0cyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS52ZXJ0ZXhXZWlnaHRzID0gcGFyc2VWZXJ0ZXhXZWlnaHRzKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VKb2ludHMoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzOiB7fVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VtYW50aWMgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzZW1hbnRpYycgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlucHV0c1sgc2VtYW50aWMgXSA9IGlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VWZXJ0ZXhXZWlnaHRzKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0czoge31cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbWFudGljID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2VtYW50aWMnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IHBhcnNlSW50KCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdvZmZzZXQnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlucHV0c1sgc2VtYW50aWMgXSA9IHsgaWQ6IGlkLCBvZmZzZXQ6IG9mZnNldCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndmNvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnZjb3VudCA9IHBhcnNlSW50cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3YnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudiA9IHBhcnNlSW50cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkQ29udHJvbGxlciggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYnVpbGQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBkYXRhLmlkXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBsaWJyYXJ5Lmdlb21ldHJpZXNbIGJ1aWxkLmlkIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBkYXRhLnNraW4gIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYnVpbGQuc2tpbiA9IGJ1aWxkU2tpbiggZGF0YS5za2luICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGVuaGFuY2UgdGhlICdzb3VyY2VzJyBwcm9wZXJ0eSBvZiB0aGUgY29ycmVzcG9uZGluZyBnZW9tZXRyeSB3aXRoIG91ciBza2luIGRhdGFcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuc291cmNlcy5za2luSW5kaWNlcyA9IGJ1aWxkLnNraW4uaW5kaWNlcztcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuc291cmNlcy5za2luV2VpZ2h0cyA9IGJ1aWxkLnNraW4ud2VpZ2h0cztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRTa2luKCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBCT05FX0xJTUlUID0gNDtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYnVpbGQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGpvaW50czogW10sIC8vIHRoaXMgbXVzdCBiZSBhbiBhcnJheSB0byBwcmVzZXJ2ZSB0aGUgam9pbnQgb3JkZXJcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXk6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWRlOiBCT05FX0xJTUlUXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5OiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmlkZTogQk9ORV9MSU1JVFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlcyA9IGRhdGEuc291cmNlcztcbiAgICAgICAgICAgICAgICB2YXIgdmVydGV4V2VpZ2h0cyA9IGRhdGEudmVydGV4V2VpZ2h0cztcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmNvdW50ID0gdmVydGV4V2VpZ2h0cy52Y291bnQ7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSB2ZXJ0ZXhXZWlnaHRzLnY7XG4gICAgICAgICAgICAgICAgdmFyIGpvaW50T2Zmc2V0ID0gdmVydGV4V2VpZ2h0cy5pbnB1dHMuSk9JTlQub2Zmc2V0O1xuICAgICAgICAgICAgICAgIHZhciB3ZWlnaHRPZmZzZXQgPSB2ZXJ0ZXhXZWlnaHRzLmlucHV0cy5XRUlHSFQub2Zmc2V0O1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBqb2ludFNvdXJjZSA9IGRhdGEuc291cmNlc1sgZGF0YS5qb2ludHMuaW5wdXRzLkpPSU5UIF07XG4gICAgICAgICAgICAgICAgdmFyIGludmVyc2VTb3VyY2UgPSBkYXRhLnNvdXJjZXNbIGRhdGEuam9pbnRzLmlucHV0cy5JTlZfQklORF9NQVRSSVggXTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0cyA9IHNvdXJjZXNbIHZlcnRleFdlaWdodHMuaW5wdXRzLldFSUdIVC5pZCBdLmFycmF5O1xuICAgICAgICAgICAgICAgIHZhciBzdHJpZGUgPSAwO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBpLCBqLCBsO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIHByb2NjZXMgc2tpbiBkYXRhIGZvciBlYWNoIHZlcnRleFxuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwLCBsID0gdmNvdW50Lmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBqb2ludENvdW50ID0gdmNvdW50WyBpIF07IC8vIHRoaXMgaXMgdGhlIGFtb3VudCBvZiBqb2ludHMgdGhhdCBhZmZlY3QgYSBzaW5nbGUgdmVydGV4XG4gICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhTa2luRGF0YSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBqID0gMDsgaiA8IGpvaW50Q291bnQ7IGogKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2tpbkluZGV4ID0gdlsgc3RyaWRlICsgam9pbnRPZmZzZXQgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ZWlnaHRJZCA9IHZbIHN0cmlkZSArIHdlaWdodE9mZnNldCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNraW5XZWlnaHQgPSB3ZWlnaHRzWyB3ZWlnaHRJZCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4U2tpbkRhdGEucHVzaCggeyBpbmRleDogc2tpbkluZGV4LCB3ZWlnaHQ6IHNraW5XZWlnaHQgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWRlICs9IDI7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Ugc29ydCB0aGUgam9pbnRzIGluIGRlc2NlbmRpbmcgb3JkZXIgYmFzZWQgb24gdGhlIHdlaWdodHMuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgZW5zdXJlcywgd2Ugb25seSBwcm9jY2VkIHRoZSBtb3N0IGltcG9ydGFudCBqb2ludHMgb2YgdGhlIHZlcnRleFxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhTa2luRGF0YS5zb3J0KCBkZXNjZW5kaW5nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdyB3ZSBwcm92aWRlIGZvciBlYWNoIHZlcnRleCBhIHNldCBvZiBmb3VyIGluZGV4IGFuZCB3ZWlnaHQgdmFsdWVzLlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgb3JkZXIgb2YgdGhlIHNraW4gZGF0YSBtYXRjaGVzIHRoZSBvcmRlciBvZiB2ZXJ0aWNlc1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBqID0gMDsgaiA8IEJPTkVfTElNSVQ7IGogKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHZlcnRleFNraW5EYXRhWyBqIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGQgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZC5pbmRpY2VzLmFycmF5LnB1c2goIGQuaW5kZXggKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZC53ZWlnaHRzLmFycmF5LnB1c2goIGQud2VpZ2h0ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkLmluZGljZXMuYXJyYXkucHVzaCggMCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkLndlaWdodHMuYXJyYXkucHVzaCggMCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIHNldHVwIGJpbmQgbWF0cml4XG4gICAgXG4gICAgICAgICAgICAgICAgYnVpbGQuYmluZE1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KCBkYXRhLmJpbmRTaGFwZU1hdHJpeCApLnRyYW5zcG9zZSgpO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgYm9uZXMgYW5kIGludmVyc2UgYmluZCBtYXRyaXggZGF0YVxuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwLCBsID0gam9pbnRTb3VyY2UuYXJyYXkubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBqb2ludFNvdXJjZS5hcnJheVsgaSBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUludmVyc2UgPSBuZXcgVEhSRUUuTWF0cml4NCgpLmZyb21BcnJheSggaW52ZXJzZVNvdXJjZS5hcnJheSwgaSAqIGludmVyc2VTb3VyY2Uuc3RyaWRlICkudHJhbnNwb3NlKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkLmpvaW50cy5wdXNoKCB7IG5hbWU6IG5hbWUsIGJvbmVJbnZlcnNlOiBib25lSW52ZXJzZSB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZDtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBhcnJheSBzb3J0IGZ1bmN0aW9uXG4gICAgXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGVzY2VuZGluZyggYSwgYiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIud2VpZ2h0IC0gYS53ZWlnaHQ7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q29udHJvbGxlciggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmNvbnRyb2xsZXJzWyBpZCBdLCBidWlsZENvbnRyb2xsZXIgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIGltYWdlXG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUltYWdlKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRfZnJvbTogZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgJ2luaXRfZnJvbScgKVsgMCBdLnRleHRDb250ZW50XG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5LmltYWdlc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRJbWFnZSggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGEuYnVpbGQgIT09IHVuZGVmaW5lZCApIHJldHVybiBkYXRhLmJ1aWxkO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmluaXRfZnJvbTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEltYWdlKCBpZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkuaW1hZ2VzWyBpZCBdLCBidWlsZEltYWdlICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBlZmZlY3RcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0KCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJvZmlsZV9DT01NT04nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHJvZmlsZSA9IHBhcnNlRWZmZWN0UHJvZmlsZUNPTU1PTiggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5LmVmZmVjdHNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0UHJvZmlsZUNPTU1PTiggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBzdXJmYWNlczoge30sXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZXJzOiB7fVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25ld3BhcmFtJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUVmZmVjdE5ld3BhcmFtKCBjaGlsZCwgZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGVjaG5pcXVlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRlY2huaXF1ZSA9IHBhcnNlRWZmZWN0VGVjaG5pcXVlKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXh0cmEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZXh0cmEgPSBwYXJzZUVmZmVjdEV4dHJhKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3ROZXdwYXJhbSggeG1sLCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBzaWQgPSB4bWwuZ2V0QXR0cmlidXRlKCAnc2lkJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzdXJmYWNlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnN1cmZhY2VzWyBzaWQgXSA9IHBhcnNlRWZmZWN0U3VyZmFjZSggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NhbXBsZXIyRCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zYW1wbGVyc1sgc2lkIF0gPSBwYXJzZUVmZmVjdFNhbXBsZXIoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFN1cmZhY2UoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbml0X2Zyb20nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5pdF9mcm9tID0gY2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFNhbXBsZXIoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc291cmNlID0gY2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFRlY2huaXF1ZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnN0YW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xhbWJlcnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYmxpbm4nOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGhvbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudHlwZSA9IGNoaWxkLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucGFyYW1ldGVycyA9IHBhcnNlRWZmZWN0UGFyYW1ldGVycyggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0UGFyYW1ldGVycyggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VtaXNzaW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RpZmZ1c2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3BlY3VsYXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hpbmluZXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RyYW5zcGFyZW5jeSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlRWZmZWN0UGFyYW1ldGVyKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJhbnNwYXJlbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbIGNoaWxkLm5vZGVOYW1lIF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYXF1ZTogY2hpbGQuZ2V0QXR0cmlidXRlKCAnb3BhcXVlJyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBwYXJzZUVmZmVjdFBhcmFtZXRlciggY2hpbGQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFBhcmFtZXRlciggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmbG9hdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlRmxvYXQoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0dXJlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0geyBpZDogY2hpbGQuZ2V0QXR0cmlidXRlKCAndGV4dHVyZScgKSwgZXh0cmE6IHBhcnNlRWZmZWN0UGFyYW1ldGVyVGV4dHVyZSggY2hpbGQgKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RQYXJhbWV0ZXJUZXh0dXJlKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRlY2huaXF1ZToge31cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdleHRyYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VFZmZlY3RQYXJhbWV0ZXJUZXh0dXJlRXh0cmEoIGNoaWxkLCBkYXRhICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFBhcmFtZXRlclRleHR1cmVFeHRyYSggeG1sLCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZWNobmlxdWUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRWZmZWN0UGFyYW1ldGVyVGV4dHVyZUV4dHJhVGVjaG5pcXVlKCBjaGlsZCwgZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RQYXJhbWV0ZXJUZXh0dXJlRXh0cmFUZWNobmlxdWUoIHhtbCwgZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVwZWF0VSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZXBlYXRWJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ29mZnNldFUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnb2Zmc2V0Vic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50ZWNobmlxdWVbIGNoaWxkLm5vZGVOYW1lIF0gPSBwYXJzZUZsb2F0KCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnd3JhcFUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnd3JhcFYnOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvbWUgZmlsZXMgaGF2ZSB2YWx1ZXMgZm9yIHdyYXBVL3dyYXBWIHdoaWNoIGJlY29tZSBOYU4gdmlhIHBhcnNlSW50XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC50ZXh0Q29udGVudC50b1VwcGVyQ2FzZSgpID09PSAnVFJVRScgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudGVjaG5pcXVlWyBjaGlsZC5ub2RlTmFtZSBdID0gMTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjaGlsZC50ZXh0Q29udGVudC50b1VwcGVyQ2FzZSgpID09PSAnRkFMU0UnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRlY2huaXF1ZVsgY2hpbGQubm9kZU5hbWUgXSA9IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50ZWNobmlxdWVbIGNoaWxkLm5vZGVOYW1lIF0gPSBwYXJzZUludCggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdEV4dHJhKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGVjaG5pcXVlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRlY2huaXF1ZSA9IHBhcnNlRWZmZWN0RXh0cmFUZWNobmlxdWUoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdEV4dHJhVGVjaG5pcXVlKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZG91YmxlX3NpZGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0gcGFyc2VJbnQoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZEVmZmVjdCggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEVmZmVjdCggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmVmZmVjdHNbIGlkIF0sIGJ1aWxkRWZmZWN0ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBtYXRlcmlhbFxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VNYXRlcmlhbCggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX2VmZmVjdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS51cmwgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5Lm1hdGVyaWFsc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRNYXRlcmlhbCggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZWZmZWN0ID0gZ2V0RWZmZWN0KCBkYXRhLnVybCApO1xuICAgICAgICAgICAgICAgIHZhciB0ZWNobmlxdWUgPSBlZmZlY3QucHJvZmlsZS50ZWNobmlxdWU7XG4gICAgICAgICAgICAgICAgdmFyIGV4dHJhID0gZWZmZWN0LnByb2ZpbGUuZXh0cmE7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsO1xuICAgIFxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIHRlY2huaXF1ZS50eXBlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwaG9uZyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JsaW5uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGFtYmVydCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwubmFtZSA9IGRhdGEubmFtZTtcbiAgICBcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRUZXh0dXJlKCB0ZXh0dXJlT2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc2FtcGxlciA9IGVmZmVjdC5wcm9maWxlLnNhbXBsZXJzWyB0ZXh0dXJlT2JqZWN0LmlkIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGltYWdlXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2FtcGxlciAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1cmZhY2UgPSBlZmZlY3QucHJvZmlsZS5zdXJmYWNlc1sgc2FtcGxlci5zb3VyY2UgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gZ2V0SW1hZ2UoIHN1cmZhY2UuaW5pdF9mcm9tICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBVbmRlZmluZWQgc2FtcGxlci4gQWNjZXNzIGltYWdlIGRpcmVjdGx5IChzZWUgIzEyNTMwKS4nICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGdldEltYWdlKCB0ZXh0dXJlT2JqZWN0LmlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIHRleHR1cmUgaWYgaW1hZ2UgaXMgYXZhaWFibGVcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpbWFnZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHR1cmUgPSB0ZXh0dXJlTG9hZGVyLmxvYWQoIGltYWdlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh0cmEgPSB0ZXh0dXJlT2JqZWN0LmV4dHJhO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBleHRyYSAhPT0gdW5kZWZpbmVkICYmIGV4dHJhLnRlY2huaXF1ZSAhPT0gdW5kZWZpbmVkICYmIGlzRW1wdHkoIGV4dHJhLnRlY2huaXF1ZSApID09PSBmYWxzZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVjaG5pcXVlID0gZXh0cmEudGVjaG5pcXVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUud3JhcFMgPSB0ZWNobmlxdWUud3JhcFUgPyBUSFJFRS5SZXBlYXRXcmFwcGluZyA6IFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS53cmFwVCA9IHRlY2huaXF1ZS53cmFwViA/IFRIUkVFLlJlcGVhdFdyYXBwaW5nIDogVEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLm9mZnNldC5zZXQoIHRlY2huaXF1ZS5vZmZzZXRVIHx8IDAsIHRlY2huaXF1ZS5vZmZzZXRWIHx8IDAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLnJlcGVhdC5zZXQoIHRlY2huaXF1ZS5yZXBlYXRVIHx8IDEsIHRlY2huaXF1ZS5yZXBlYXRWIHx8IDEgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvciggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFVuYWJsZSB0byBsb2FkIHRleHR1cmUgd2l0aCBJRDonLCB0ZXh0dXJlT2JqZWN0LmlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHRlY2huaXF1ZS5wYXJhbWV0ZXJzO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBrZXkgaW4gcGFyYW1ldGVycyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlciA9IHBhcmFtZXRlcnNbIGtleSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBrZXkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkaWZmdXNlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmFtZXRlci5jb2xvciApIG1hdGVyaWFsLmNvbG9yLmZyb21BcnJheSggcGFyYW1ldGVyLmNvbG9yICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIudGV4dHVyZSApIG1hdGVyaWFsLm1hcCA9IGdldFRleHR1cmUoIHBhcmFtZXRlci50ZXh0dXJlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzcGVjdWxhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIuY29sb3IgJiYgbWF0ZXJpYWwuc3BlY3VsYXIgKSBtYXRlcmlhbC5zcGVjdWxhci5mcm9tQXJyYXkoIHBhcmFtZXRlci5jb2xvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyYW1ldGVyLnRleHR1cmUgKSBtYXRlcmlhbC5zcGVjdWxhck1hcCA9IGdldFRleHR1cmUoIHBhcmFtZXRlci50ZXh0dXJlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzaGluaW5lc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyYW1ldGVyLmZsb2F0ICYmIG1hdGVyaWFsLnNoaW5pbmVzcyApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNoaW5pbmVzcyA9IHBhcmFtZXRlci5mbG9hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VtaXNzaW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmFtZXRlci5jb2xvciAmJiBtYXRlcmlhbC5lbWlzc2l2ZSApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmVtaXNzaXZlLmZyb21BcnJheSggcGFyYW1ldGVyLmNvbG9yICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy9cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNwYXJlbnQgPSBwYXJhbWV0ZXJzWyAndHJhbnNwYXJlbnQnIF07XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zcGFyZW5jeSA9IHBhcmFtZXRlcnNbICd0cmFuc3BhcmVuY3knIF07XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gPHRyYW5zcGFyZW5jeT4gZG9lcyBub3QgZXhpc3QgYnV0IDx0cmFuc3BhcmVudD5cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRyYW5zcGFyZW5jeSA9PT0gdW5kZWZpbmVkICYmIHRyYW5zcGFyZW50ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3kgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDogMVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyA8dHJhbnNwYXJlbnQ+IGRvZXMgbm90IGV4aXN0IGJ1dCA8dHJhbnNwYXJlbmN5PlxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggdHJhbnNwYXJlbnQgPT09IHVuZGVmaW5lZCAmJiB0cmFuc3BhcmVuY3kgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhcXVlOiAnQV9PTkUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBbIDEsIDEsIDEsIDEgXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSB9O1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRyYW5zcGFyZW50ICYmIHRyYW5zcGFyZW5jeSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIGNhc2UgaWYgYSB0ZXh0dXJlIGV4aXN0cyBidXQgbm8gY29sb3JcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0cmFuc3BhcmVudC5kYXRhLnRleHR1cmUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYU1hcCA9IGdldFRleHR1cmUoIHRyYW5zcGFyZW50LmRhdGEudGV4dHVyZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gdHJhbnNwYXJlbnQuZGF0YS5jb2xvcjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIHRyYW5zcGFyZW50Lm9wYXF1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdBX09ORSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm9wYWNpdHkgPSBjb2xvclsgMyBdICogdHJhbnNwYXJlbmN5LmZsb2F0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdSR0JfWkVSTyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm9wYWNpdHkgPSAxIC0gKCBjb2xvclsgMCBdICogdHJhbnNwYXJlbmN5LmZsb2F0ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0FfWkVSTyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm9wYWNpdHkgPSAxIC0gKCBjb2xvclsgMyBdICogdHJhbnNwYXJlbmN5LmZsb2F0ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JHQl9PTkUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5vcGFjaXR5ID0gY29sb3JbIDAgXSAqIHRyYW5zcGFyZW5jeS5mbG9hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogSW52YWxpZCBvcGFxdWUgdHlwZSBcIiVzXCIgb2YgdHJhbnNwYXJlbnQgdGFnLicsIHRyYW5zcGFyZW50Lm9wYXF1ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbC5vcGFjaXR5IDwgMSApIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvL1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZXh0cmEgIT09IHVuZGVmaW5lZCAmJiBleHRyYS50ZWNobmlxdWUgIT09IHVuZGVmaW5lZCAmJiBleHRyYS50ZWNobmlxdWUuZG91YmxlX3NpZGVkID09PSAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zaWRlID0gVEhSRUUuRG91YmxlU2lkZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TWF0ZXJpYWwoIGlkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5tYXRlcmlhbHNbIGlkIF0sIGJ1aWxkTWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIGNhbWVyYVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VDYW1lcmEoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnIClcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdvcHRpY3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEub3B0aWNzID0gcGFyc2VDYW1lcmFPcHRpY3MoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS5jYW1lcmFzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUNhbWVyYU9wdGljcyggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZWNobmlxdWVfY29tbW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VDYW1lcmFUZWNobmlxdWUoIGNoaWxkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VDYW1lcmFUZWNobmlxdWUoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwZXJzcGVjdGl2ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdvcnRob2dyYXBoaWMnOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudGVjaG5pcXVlID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wYXJhbWV0ZXJzID0gcGFyc2VDYW1lcmFQYXJhbWV0ZXJzKCBjaGlsZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VDYW1lcmFQYXJhbWV0ZXJzKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAneGZvdic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd5Zm92JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3htYWcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAneW1hZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd6bmVhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd6ZmFyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FzcGVjdF9yYXRpbyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlRmxvYXQoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZENhbWVyYSggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY2FtZXJhO1xuICAgIFxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIGRhdGEub3B0aWNzLnRlY2huaXF1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGVyc3BlY3RpdmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEub3B0aWNzLnBhcmFtZXRlcnMueWZvdixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLmFzcGVjdF9yYXRpbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnpuZWFyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEub3B0aWNzLnBhcmFtZXRlcnMuemZhclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdvcnRob2dyYXBoaWMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHltYWcgPSBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnltYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeG1hZyA9IGRhdGEub3B0aWNzLnBhcmFtZXRlcnMueG1hZztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhc3BlY3RSYXRpbyA9IGRhdGEub3B0aWNzLnBhcmFtZXRlcnMuYXNwZWN0X3JhdGlvO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgeG1hZyA9ICggeG1hZyA9PT0gdW5kZWZpbmVkICkgPyAoIHltYWcgKiBhc3BlY3RSYXRpbyApIDogeG1hZztcbiAgICAgICAgICAgICAgICAgICAgICAgIHltYWcgPSAoIHltYWcgPT09IHVuZGVmaW5lZCApID8gKCB4bWFnIC8gYXNwZWN0UmF0aW8gKSA6IHltYWc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB4bWFnICo9IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHltYWcgKj0gMC41O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhID0gbmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIHhtYWcsIHhtYWcsIHltYWcsIC0geW1hZywgLy8gbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5vcHRpY3MucGFyYW1ldGVycy56bmVhcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnpmYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNhbWVyYS5uYW1lID0gZGF0YS5uYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBjYW1lcmE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRDYW1lcmEoIGlkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbGlicmFyeS5jYW1lcmFzWyBpZCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbGQoIGRhdGEsIGJ1aWxkQ2FtZXJhICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IENvdWxkblxcJ3QgZmluZCBjYW1lcmEgd2l0aCBJRDonLCBpZCApO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gbGlnaHRcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlTGlnaHQoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZWNobmlxdWVfY29tbW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcGFyc2VMaWdodFRlY2huaXF1ZSggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5LmxpZ2h0c1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VMaWdodFRlY2huaXF1ZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RpcmVjdGlvbmFsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BvaW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nwb3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYW1iaWVudCc6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50ZWNobmlxdWUgPSBjaGlsZC5ub2RlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnBhcmFtZXRlcnMgPSBwYXJzZUxpZ2h0UGFyYW1ldGVycyggY2hpbGQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlTGlnaHRQYXJhbWV0ZXJzKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29sb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKS5mcm9tQXJyYXkoIGFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmYWxsb2ZmX2FuZ2xlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmZhbGxvZmZBbmdsZSA9IHBhcnNlRmxvYXQoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdxdWFkcmF0aWNfYXR0ZW51YXRpb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gcGFyc2VGbG9hdCggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmRpc3RhbmNlID0gZiA/IE1hdGguc3FydCggMSAvIGYgKSA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZExpZ2h0KCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsaWdodDtcbiAgICBcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCBkYXRhLnRlY2huaXF1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGlyZWN0aW9uYWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BvaW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0ID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzcG90JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0ID0gbmV3IFRIUkVFLlNwb3RMaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FtYmllbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBkYXRhLnBhcmFtZXRlcnMuY29sb3IgKSBsaWdodC5jb2xvci5jb3B5KCBkYXRhLnBhcmFtZXRlcnMuY29sb3IgKTtcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGEucGFyYW1ldGVycy5kaXN0YW5jZSApIGxpZ2h0LmRpc3RhbmNlID0gZGF0YS5wYXJhbWV0ZXJzLmRpc3RhbmNlO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBsaWdodDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldExpZ2h0KCBpZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGxpYnJhcnkubGlnaHRzWyBpZCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbGQoIGRhdGEsIGJ1aWxkTGlnaHQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQ291bGRuXFwndCBmaW5kIGxpZ2h0IHdpdGggSUQ6JywgaWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIGdlb21ldHJ5XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUdlb21ldHJ5KCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgdmVydGljZXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmVzOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG1lc2ggPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCAnbWVzaCcgKVsgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgdGFncyBpbnNpZGUgZ2VvbWV0cnkgYXJlIG5vdCBzdXBwb3J0ZWQgeWV0IChzZWUgaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9wdWxsLzEyNjA2KTogY29udmV4X21lc2gsIHNwbGluZSwgYnJlcFxuICAgICAgICAgICAgICAgIGlmICggbWVzaCA9PT0gdW5kZWZpbmVkICkgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IG1lc2guY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IG1lc2guY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ2lkJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NvdXJjZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zb3VyY2VzWyBpZCBdID0gcGFyc2VTb3VyY2UoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd2ZXJ0aWNlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGF0YS5zb3VyY2VzWyBpZCBdID0gZGF0YS5zb3VyY2VzWyBwYXJzZUlkKCBnZXRFbGVtZW50c0J5VGFnTmFtZSggY2hpbGQsICdpbnB1dCcgKVsgMCBdLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS52ZXJ0aWNlcyA9IHBhcnNlR2VvbWV0cnlWZXJ0aWNlcyggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BvbHlnb25zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBVbnN1cHBvcnRlZCBwcmltaXRpdmUgdHlwZTogJywgY2hpbGQubm9kZU5hbWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmVzdHJpcHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncG9seWxpc3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJpYW5nbGVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnByaW1pdGl2ZXMucHVzaCggcGFyc2VHZW9tZXRyeVByaW1pdGl2ZSggY2hpbGQgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggY2hpbGQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5Lmdlb21ldHJpZXNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlU291cmNlKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGFycmF5OiBbXSxcbiAgICAgICAgICAgICAgICAgICAgc3RyaWRlOiAzXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmbG9hdF9hcnJheSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5hcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTmFtZV9hcnJheSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5hcnJheSA9IHBhcnNlU3RyaW5ncyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY2Nlc3NvciA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCBjaGlsZCwgJ2FjY2Vzc29yJyApWyAwIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBhY2Nlc3NvciAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnN0cmlkZSA9IHBhcnNlSW50KCBhY2Nlc3Nvci5nZXRBdHRyaWJ1dGUoICdzdHJpZGUnICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUdlb21ldHJ5VmVydGljZXMoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBkYXRhWyBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzZW1hbnRpYycgKSBdID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VHZW9tZXRyeVByaW1pdGl2ZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwcmltaXRpdmUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHhtbC5ub2RlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHhtbC5nZXRBdHRyaWJ1dGUoICdtYXRlcmlhbCcgKSxcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IHBhcnNlSW50KCB4bWwuZ2V0QXR0cmlidXRlKCAnY291bnQnICkgKSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgc3RyaWRlOiAwXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZW1hbnRpYyA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NlbWFudGljJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBwYXJzZUludCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnb2Zmc2V0JyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLmlucHV0c1sgc2VtYW50aWMgXSA9IHsgaWQ6IGlkLCBvZmZzZXQ6IG9mZnNldCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZS5zdHJpZGUgPSBNYXRoLm1heCggcHJpbWl0aXZlLnN0cmlkZSwgb2Zmc2V0ICsgMSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndmNvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmUudmNvdW50ID0gcGFyc2VJbnRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLnAgPSBwYXJzZUludHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdyb3VwUHJpbWl0aXZlcyggcHJpbWl0aXZlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYnVpbGQgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBwcmltaXRpdmVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaW1pdGl2ZSA9IHByaW1pdGl2ZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBidWlsZFsgcHJpbWl0aXZlLnR5cGUgXSA9PT0gdW5kZWZpbmVkICkgYnVpbGRbIHByaW1pdGl2ZS50eXBlIF0gPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRbIHByaW1pdGl2ZS50eXBlIF0ucHVzaCggcHJpbWl0aXZlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkR2VvbWV0cnkoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJ1aWxkID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZXMgPSBkYXRhLnNvdXJjZXM7XG4gICAgICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gZGF0YS52ZXJ0aWNlcztcbiAgICAgICAgICAgICAgICB2YXIgcHJpbWl0aXZlcyA9IGRhdGEucHJpbWl0aXZlcztcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZXMubGVuZ3RoID09PSAwICkgcmV0dXJuIHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIG91ciBnb2FsIGlzIHRvIGNyZWF0ZSBvbmUgYnVmZmVyIGdlb2VtdHJ5IGZvciBhIHNpbmdsZSB0eXBlIG9mIHByaW1pdGl2ZXNcbiAgICAgICAgICAgICAgICAvLyBmaXJzdCwgd2UgZ3JvdXAgYWxsIHByaW1pdGl2ZXMgYnkgdGhlaXIgdHlwZVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBncm91cGVkUHJpbWl0aXZlcyA9IGdyb3VwUHJpbWl0aXZlcyggcHJpbWl0aXZlcyApO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciB0eXBlIGluIGdyb3VwZWRQcmltaXRpdmVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBzZWNvbmQsIHdlIGNyZWF0ZSBmb3IgZWFjaCB0eXBlIG9mIHByaW1pdGl2ZXMgKHBvbHlsaXN0LHRyaWFuZ2xlcyBvciBsaW5lcykgYSBidWZmZXIgZ2VvbWV0cnlcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRbIHR5cGUgXSA9IGJ1aWxkR2VvbWV0cnlUeXBlKCBncm91cGVkUHJpbWl0aXZlc1sgdHlwZSBdLCBzb3VyY2VzLCB2ZXJ0aWNlcyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGQ7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZEdlb21ldHJ5VHlwZSggcHJpbWl0aXZlcywgc291cmNlcywgdmVydGljZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJ1aWxkID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0geyBhcnJheTogW10sIHN0cmlkZTogMCB9O1xuICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSB7IGFycmF5OiBbXSwgc3RyaWRlOiAwIH07XG4gICAgICAgICAgICAgICAgdmFyIHV2ID0geyBhcnJheTogW10sIHN0cmlkZTogMCB9O1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IHsgYXJyYXk6IFtdLCBzdHJpZGU6IDAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2tpbkluZGV4ID0geyBhcnJheTogW10sIHN0cmlkZTogNCB9O1xuICAgICAgICAgICAgICAgIHZhciBza2luV2VpZ2h0ID0geyBhcnJheTogW10sIHN0cmlkZTogNCB9O1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbEtleXMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSAwLCBjb3VudCA9IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIHAgPSAwOyBwIDwgcHJpbWl0aXZlcy5sZW5ndGg7IHAgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltaXRpdmUgPSBwcmltaXRpdmVzWyBwIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dHMgPSBwcmltaXRpdmUuaW5wdXRzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJpYW5nbGVDb3VudCA9IDE7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggcHJpbWl0aXZlLnZjb3VudCAmJiBwcmltaXRpdmUudmNvdW50WyAwIF0gPT09IDQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZUNvdW50ID0gMjsgLy8gb25lIHF1YWQgLT4gdHdvIHRyaWFuZ2xlc1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGdyb3Vwc1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZS50eXBlID09PSAnbGluZXMnIHx8IHByaW1pdGl2ZS50eXBlID09PSAnbGluZXN0cmlwcycgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IHByaW1pdGl2ZS5jb3VudCAqIDI7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IHByaW1pdGl2ZS5jb3VudCAqIDMgKiB0cmlhbmdsZUNvdW50O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmFkZEdyb3VwKCBzdGFydCwgY291bnQsIHAgKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgKz0gY291bnQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hdGVyaWFsXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggcHJpbWl0aXZlLm1hdGVyaWFsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxLZXlzLnB1c2goIHByaW1pdGl2ZS5tYXRlcmlhbCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGdlb21ldHJ5IGRhdGFcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIG5hbWUgaW4gaW5wdXRzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRzWyBuYW1lIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBuYW1lIClcdHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdWRVJURVgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIga2V5IGluIHZlcnRpY2VzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gdmVydGljZXNbIGtleSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgga2V5ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1BPU0lUSU9OJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaWQgXSwgaW5wdXQub2Zmc2V0LCBwb3NpdGlvbi5hcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5zdHJpZGUgPSBzb3VyY2VzWyBpZCBdLnN0cmlkZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzb3VyY2VzLnNraW5XZWlnaHRzICYmIHNvdXJjZXMuc2tpbkluZGljZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzLnNraW5JbmRpY2VzLCBpbnB1dC5vZmZzZXQsIHNraW5JbmRleC5hcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlcy5za2luV2VpZ2h0cywgaW5wdXQub2Zmc2V0LCBza2luV2VpZ2h0LmFycmF5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTk9STUFMJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaWQgXSwgaW5wdXQub2Zmc2V0LCBub3JtYWwuYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsLnN0cmlkZSA9IHNvdXJjZXNbIGlkIF0uc3RyaWRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdDT0xPUic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlkIF0sIGlucHV0Lm9mZnNldCwgY29sb3IuYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3Iuc3RyaWRlID0gc291cmNlc1sgaWQgXS5zdHJpZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RFWENPT1JEJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaWQgXSwgaW5wdXQub2Zmc2V0LCB1di5hcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1di5zdHJpZGUgPSBzb3VyY2VzWyBpZCBdLnN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogU2VtYW50aWMgXCIlc1wiIG5vdCBoYW5kbGVkIGluIGdlb21ldHJ5IGJ1aWxkIHByb2Nlc3MuJywga2V5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTk9STUFMJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaW5wdXQuaWQgXSwgaW5wdXQub2Zmc2V0LCBub3JtYWwuYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsLnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdDT0xPUic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlucHV0LmlkIF0sIGlucHV0Lm9mZnNldCwgY29sb3IuYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3Iuc3RyaWRlID0gc291cmNlc1sgaW5wdXQuaWQgXS5zdHJpZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RFWENPT1JEJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaW5wdXQuaWQgXSwgaW5wdXQub2Zmc2V0LCB1di5hcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1di5zdHJpZGUgPSBzb3VyY2VzWyBpbnB1dC5pZCBdLnN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gYnVpbGQgZ2VvbWV0cnlcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHBvc2l0aW9uLmFycmF5Lmxlbmd0aCA+IDAgKSBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBwb3NpdGlvbi5hcnJheSwgcG9zaXRpb24uc3RyaWRlICkgKTtcbiAgICAgICAgICAgICAgICBpZiAoIG5vcm1hbC5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnbm9ybWFsJywgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIG5vcm1hbC5hcnJheSwgbm9ybWFsLnN0cmlkZSApICk7XG4gICAgICAgICAgICAgICAgaWYgKCBjb2xvci5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnY29sb3InLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggY29sb3IuYXJyYXksIGNvbG9yLnN0cmlkZSApICk7XG4gICAgICAgICAgICAgICAgaWYgKCB1di5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAndXYnLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggdXYuYXJyYXksIHV2LnN0cmlkZSApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBza2luSW5kZXguYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3NraW5JbmRleCcsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBza2luSW5kZXguYXJyYXksIHNraW5JbmRleC5zdHJpZGUgKSApO1xuICAgICAgICAgICAgICAgIGlmICggc2tpbldlaWdodC5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnc2tpbldlaWdodCcsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBza2luV2VpZ2h0LmFycmF5LCBza2luV2VpZ2h0LnN0cmlkZSApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgYnVpbGQuZGF0YSA9IGdlb21ldHJ5O1xuICAgICAgICAgICAgICAgIGJ1aWxkLnR5cGUgPSBwcmltaXRpdmVzWyAwIF0udHlwZTtcbiAgICAgICAgICAgICAgICBidWlsZC5tYXRlcmlhbEtleXMgPSBtYXRlcmlhbEtleXM7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlLCBvZmZzZXQsIGFycmF5ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBpbmRpY2VzID0gcHJpbWl0aXZlLnA7XG4gICAgICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHByaW1pdGl2ZS5zdHJpZGU7XG4gICAgICAgICAgICAgICAgdmFyIHZjb3VudCA9IHByaW1pdGl2ZS52Y291bnQ7XG4gICAgXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcHVzaFZlY3RvciggaSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5kaWNlc1sgaSArIG9mZnNldCBdICogc291cmNlU3RyaWRlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gaW5kZXggKyBzb3VyY2VTdHJpZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXkucHVzaCggc291cmNlQXJyYXlbIGluZGV4IF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbWF4Y291bnQgPSAwO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VBcnJheSA9IHNvdXJjZS5hcnJheTtcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlU3RyaWRlID0gc291cmNlLnN0cmlkZTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZS52Y291bnQgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gdmNvdW50Lmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSB2Y291bnRbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY291bnQgPT09IDQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBpbmRleCArIHN0cmlkZSAqIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBpbmRleCArIHN0cmlkZSAqIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBpbmRleCArIHN0cmlkZSAqIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBpbmRleCArIHN0cmlkZSAqIDM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFZlY3RvciggYSApOyBwdXNoVmVjdG9yKCBiICk7IHB1c2hWZWN0b3IoIGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXNoVmVjdG9yKCBiICk7IHB1c2hWZWN0b3IoIGMgKTsgcHVzaFZlY3RvciggZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY291bnQgPT09IDMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBpbmRleCArIHN0cmlkZSAqIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBpbmRleCArIHN0cmlkZSAqIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBpbmRleCArIHN0cmlkZSAqIDI7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFZlY3RvciggYSApOyBwdXNoVmVjdG9yKCBiICk7IHB1c2hWZWN0b3IoIGMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4Y291bnQgPSBNYXRoLm1heCggbWF4Y291bnQsIGNvdW50ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCArPSBzdHJpZGUgKiBjb3VudDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1heGNvdW50ID4gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogR2VvbWV0cnkgaGFzIGZhY2VzIHdpdGggbW9yZSB0aGFuIDQgdmVydGljZXMuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gaW5kaWNlcy5sZW5ndGg7IGkgPCBsOyBpICs9IHN0cmlkZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hWZWN0b3IoIGkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEdlb21ldHJ5KCBpZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkuZ2VvbWV0cmllc1sgaWQgXSwgYnVpbGRHZW9tZXRyeSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8ga2luZW1hdGljc1xuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzTW9kZWwoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnICkgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIGpvaW50czoge30sXG4gICAgICAgICAgICAgICAgICAgIGxpbmtzOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGVjaG5pcXVlX2NvbW1vbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VLaW5lbWF0aWNzVGVjaG5pcXVlQ29tbW9uKCBjaGlsZCwgZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGxpYnJhcnkua2luZW1hdGljc01vZGVsc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRLaW5lbWF0aWNzTW9kZWwoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBkYXRhLmJ1aWxkICE9PSB1bmRlZmluZWQgKSByZXR1cm4gZGF0YS5idWlsZDtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEtpbmVtYXRpY3NNb2RlbCggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmtpbmVtYXRpY3NNb2RlbHNbIGlkIF0sIGJ1aWxkS2luZW1hdGljc01vZGVsICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NUZWNobmlxdWVDb21tb24oIHhtbCwgZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdqb2ludCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5qb2ludHNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gcGFyc2VLaW5lbWF0aWNzSm9pbnQoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5rJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxpbmtzLnB1c2goIHBhcnNlS2luZW1hdGljc0xpbmsoIGNoaWxkICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0pvaW50KCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGE7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJpc21hdGljJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Jldm9sdXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcGFyc2VLaW5lbWF0aWNzSm9pbnRQYXJhbWV0ZXIoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NKb2ludFBhcmFtZXRlciggeG1sLCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBzaWQ6IHhtbC5nZXRBdHRyaWJ1dGUoICdzaWQnICksXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICBheGlzOiBuZXcgVEhSRUUuVmVjdG9yMygpLFxuICAgICAgICAgICAgICAgICAgICBsaW1pdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiB4bWwubm9kZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHplcm9Qb3NpdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgbWlkZGxlUG9zaXRpb246IDBcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2F4aXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYXhpcy5mcm9tQXJyYXkoIGFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW1pdHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSBjaGlsZC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ21heCcgKVsgMCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaW4gPSBjaGlsZC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ21pbicgKVsgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGltaXRzLm1heCA9IHBhcnNlRmxvYXQoIG1heC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGltaXRzLm1pbiA9IHBhcnNlRmxvYXQoIG1pbi50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGlmIG1pbiBpcyBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gbWF4LCBjb25zaWRlciB0aGUgam9pbnQgc3RhdGljXG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBkYXRhLmxpbWl0cy5taW4gPj0gZGF0YS5saW1pdHMubWF4ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN0YXRpYyA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBtaWRkbGUgcG9zaXRpb25cbiAgICBcbiAgICAgICAgICAgICAgICBkYXRhLm1pZGRsZVBvc2l0aW9uID0gKCBkYXRhLmxpbWl0cy5taW4gKyBkYXRhLmxpbWl0cy5tYXggKSAvIDIuMDtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0xpbmsoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2lkOiB4bWwuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudHM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXR0YWNobWVudF9mdWxsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmF0dGFjaG1lbnRzLnB1c2goIHBhcnNlS2luZW1hdGljc0F0dGFjaG1lbnQoIGNoaWxkICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRyYW5zZm9ybXMucHVzaCggcGFyc2VLaW5lbWF0aWNzVHJhbnNmb3JtKCBjaGlsZCApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NBdHRhY2htZW50KCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGpvaW50OiB4bWwuZ2V0QXR0cmlidXRlKCAnam9pbnQnICkuc3BsaXQoICcvJyApLnBvcCgpLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgbGlua3M6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5rJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxpbmtzLnB1c2goIHBhcnNlS2luZW1hdGljc0xpbmsoIGNoaWxkICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRyYW5zZm9ybXMucHVzaCggcGFyc2VLaW5lbWF0aWNzVHJhbnNmb3JtKCBjaGlsZCApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NUcmFuc2Zvcm0oIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogeG1sLm5vZGVOYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggeG1sLnRleHRDb250ZW50ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgc3dpdGNoICggZGF0YS50eXBlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5vYmogPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5vYmouZnJvbUFycmF5KCBhcnJheSApLnRyYW5zcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9iaiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9iai5mcm9tQXJyYXkoIGFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEub2JqID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEub2JqLmZyb21BcnJheSggYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYW5nbGUgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKCBhcnJheVsgMyBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NTY2VuZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBiaW5kSm9pbnRBeGlzOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYmluZF9qb2ludF9heGlzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmJpbmRKb2ludEF4aXMucHVzaCggcGFyc2VLaW5lbWF0aWNzQmluZEpvaW50QXhpcyggY2hpbGQgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGxpYnJhcnkua2luZW1hdGljc1NjZW5lc1sgcGFyc2VJZCggeG1sLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzQmluZEpvaW50QXhpcyggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHhtbC5nZXRBdHRyaWJ1dGUoICd0YXJnZXQnICkuc3BsaXQoICcvJyApLnBvcCgpXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdheGlzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBjaGlsZC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ3BhcmFtJyApWyAwIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5heGlzID0gcGFyYW0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcEpvaW50SW5kZXggPSBkYXRhLmF4aXMuc3BsaXQoICdpbnN0XycgKS5wb3AoKS5zcGxpdCggJ2F4aXMnIClbIDAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmpvaW50SW5kZXggPSB0bXBKb2ludEluZGV4LnN1YnN0ciggMCwgdG1wSm9pbnRJbmRleC5sZW5ndGggLSAxICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZEtpbmVtYXRpY3NTY2VuZSggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGEuYnVpbGQgIT09IHVuZGVmaW5lZCApIHJldHVybiBkYXRhLmJ1aWxkO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0S2luZW1hdGljc1NjZW5lKCBpZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkua2luZW1hdGljc1NjZW5lc1sgaWQgXSwgYnVpbGRLaW5lbWF0aWNzU2NlbmUgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwS2luZW1hdGljcygpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIga2luZW1hdGljc01vZGVsSWQgPSBPYmplY3Qua2V5cyggbGlicmFyeS5raW5lbWF0aWNzTW9kZWxzIClbIDAgXTtcbiAgICAgICAgICAgICAgICB2YXIga2luZW1hdGljc1NjZW5lSWQgPSBPYmplY3Qua2V5cyggbGlicmFyeS5raW5lbWF0aWNzU2NlbmVzIClbIDAgXTtcbiAgICAgICAgICAgICAgICB2YXIgdmlzdWFsU2NlbmVJZCA9IE9iamVjdC5rZXlzKCBsaWJyYXJ5LnZpc3VhbFNjZW5lcyApWyAwIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBraW5lbWF0aWNzTW9kZWxJZCA9PT0gdW5kZWZpbmVkIHx8IGtpbmVtYXRpY3NTY2VuZUlkID09PSB1bmRlZmluZWQgKSByZXR1cm47XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGtpbmVtYXRpY3NNb2RlbCA9IGdldEtpbmVtYXRpY3NNb2RlbCgga2luZW1hdGljc01vZGVsSWQgKTtcbiAgICAgICAgICAgICAgICB2YXIga2luZW1hdGljc1NjZW5lID0gZ2V0S2luZW1hdGljc1NjZW5lKCBraW5lbWF0aWNzU2NlbmVJZCApO1xuICAgICAgICAgICAgICAgIHZhciB2aXN1YWxTY2VuZSA9IGdldFZpc3VhbFNjZW5lKCB2aXN1YWxTY2VuZUlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJpbmRKb2ludEF4aXMgPSBraW5lbWF0aWNzU2NlbmUuYmluZEpvaW50QXhpcztcbiAgICAgICAgICAgICAgICB2YXIgam9pbnRNYXAgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBiaW5kSm9pbnRBeGlzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBheGlzID0gYmluZEpvaW50QXhpc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVzdWx0IG9mIHRoZSBmb2xsb3dpbmcgcXVlcnkgaXMgYW4gZWxlbWVudCBvZiB0eXBlICd0cmFuc2xhdGUnLCAncm90YXRlJywnc2NhbGUnIG9yICdtYXRyaXgnXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gY29sbGFkYS5xdWVyeVNlbGVjdG9yKCAnW3NpZD1cIicgKyBheGlzLnRhcmdldCArICdcIl0nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGFyZ2V0RWxlbWVudCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgcGFyZW50IG9mIHRoZSB0cmFuc2Zyb20gZWxlbWVudFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudFZpc3VhbEVsZW1lbnQgPSB0YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0IHRoZSBqb2ludCBvZiB0aGUga2luZW1hdGljcyBtb2RlbCB3aXRoIHRoZSBlbGVtZW50IGluIHRoZSB2aXN1YWwgc2NlbmVcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3QoIGF4aXMuam9pbnRJbmRleCwgcGFyZW50VmlzdWFsRWxlbWVudCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbm5lY3QoIGpvaW50SW5kZXgsIHZpc3VhbEVsZW1lbnQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB2aXN1YWxFbGVtZW50TmFtZSA9IHZpc3VhbEVsZW1lbnQuZ2V0QXR0cmlidXRlKCAnbmFtZScgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50ID0ga2luZW1hdGljc01vZGVsLmpvaW50c1sgam9pbnRJbmRleCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2aXN1YWxTY2VuZS50cmF2ZXJzZSggZnVuY3Rpb24gKCBvYmplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG9iamVjdC5uYW1lID09PSB2aXN1YWxFbGVtZW50TmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludE1hcFsgam9pbnRJbmRleCBdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtczogYnVpbGRUcmFuc2Zvcm1MaXN0KCB2aXN1YWxFbGVtZW50ICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50OiBqb2ludCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGpvaW50Lnplcm9Qb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG0wID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcbiAgICBcbiAgICAgICAgICAgICAgICBraW5lbWF0aWNzID0ge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBqb2ludHM6IGtpbmVtYXRpY3NNb2RlbCAmJiBraW5lbWF0aWNzTW9kZWwuam9pbnRzLFxuICAgIFxuICAgICAgICAgICAgICAgICAgICBnZXRKb2ludFZhbHVlOiBmdW5jdGlvbiAoIGpvaW50SW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgam9pbnREYXRhID0gam9pbnRNYXBbIGpvaW50SW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggam9pbnREYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqb2ludERhdGEucG9zaXRpb247XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEpvaW50ICcgKyBqb2ludEluZGV4ICsgJyBkb2VzblxcJ3QgZXhpc3QuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgICAgICBzZXRKb2ludFZhbHVlOiBmdW5jdGlvbiAoIGpvaW50SW5kZXgsIHZhbHVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50RGF0YSA9IGpvaW50TWFwWyBqb2ludEluZGV4IF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGpvaW50RGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgam9pbnQgPSBqb2ludERhdGEuam9pbnQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSA+IGpvaW50LmxpbWl0cy5tYXggfHwgdmFsdWUgPCBqb2ludC5saW1pdHMubWluICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBKb2ludCAnICsgam9pbnRJbmRleCArICcgdmFsdWUgJyArIHZhbHVlICsgJyBvdXRzaWRlIG9mIGxpbWl0cyAobWluOiAnICsgam9pbnQubGltaXRzLm1pbiArICcsIG1heDogJyArIGpvaW50LmxpbWl0cy5tYXggKyAnKS4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggam9pbnQuc3RhdGljICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBKb2ludCAnICsgam9pbnRJbmRleCArICcgaXMgc3RhdGljLicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gam9pbnREYXRhLm9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF4aXMgPSBqb2ludC5heGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtcyA9IGpvaW50RGF0YS50cmFuc2Zvcm1zO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXguaWRlbnRpdHkoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWFjaCB1cGRhdGUsIHdlIGhhdmUgdG8gYXBwbHkgYWxsIHRyYW5zZm9ybXMgaW4gdGhlIGNvcnJlY3Qgb3JkZXJcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgdHJhbnNmb3Jtcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBjb25uZWN0aW9uIG9mIHRoZSB0cmFuc2Zvcm0gbm9kZSB3aXRoIGEgam9pbnQsIGFwcGx5IHRoZSBqb2ludCB2YWx1ZVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0cmFuc2Zvcm0uc2lkICYmIHRyYW5zZm9ybS5zaWQuaW5kZXhPZiggam9pbnRJbmRleCApICE9PSAtIDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggam9pbnQudHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmV2b2x1dGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4Lm11bHRpcGx5KCBtMC5tYWtlUm90YXRpb25BeGlzKCBheGlzLCBUSFJFRS5NYXRoLmRlZ1RvUmFkKCB2YWx1ZSApICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwcmlzbWF0aWMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4Lm11bHRpcGx5KCBtMC5tYWtlVHJhbnNsYXRpb24oIGF4aXMueCAqIHZhbHVlLCBheGlzLnkgKiB2YWx1ZSwgYXhpcy56ICogdmFsdWUgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBVbmtub3duIGpvaW50IHR5cGU6ICcgKyBqb2ludC50eXBlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIHRyYW5zZm9ybS50eXBlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4Lm11bHRpcGx5KCB0cmFuc2Zvcm0ub2JqICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJhbnNsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVRyYW5zbGF0aW9uKCB0cmFuc2Zvcm0ub2JqLngsIHRyYW5zZm9ybS5vYmoueSwgdHJhbnNmb3JtLm9iai56ICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzY2FsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2NhbGUoIHRyYW5zZm9ybS5vYmogKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyb3RhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4Lm11bHRpcGx5KCBtMC5tYWtlUm90YXRpb25BeGlzKCB0cmFuc2Zvcm0ub2JqLCB0cmFuc2Zvcm0uYW5nbGUgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tYXRyaXguY29weSggbWF0cml4ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tYXRyaXguZGVjb21wb3NlKCBvYmplY3QucG9zaXRpb24sIG9iamVjdC5xdWF0ZXJuaW9uLCBvYmplY3Quc2NhbGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9pbnRNYXBbIGpvaW50SW5kZXggXS5wb3NpdGlvbiA9IHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coICdUSFJFRS5Db2xsYWRhTG9hZGVyOiAnICsgam9pbnRJbmRleCArICcgZG9lcyBub3QgZXhpc3QuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkVHJhbnNmb3JtTGlzdCggbm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB4bWwgPSBjb2xsYWRhLnF1ZXJ5U2VsZWN0b3IoICdbaWQ9XCInICsgbm9kZS5pZCArICdcIl0nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0cml4JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkoIGFycmF5ICkudHJhbnNwb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZDogY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjaGlsZC5ub2RlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqOiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmZyb21BcnJheSggYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zLnB1c2goIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lkOiBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzaWQnICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGNoaWxkLm5vZGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmo6IHZlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlY3RvciA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuZnJvbUFycmF5KCBhcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IFRIUkVFLk1hdGguZGVnVG9SYWQoIGFycmF5WyAzIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zLnB1c2goIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lkOiBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzaWQnICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGNoaWxkLm5vZGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmo6IHZlY3RvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGU6IGFuZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1zO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gbm9kZXNcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHByZXBhcmVOb2RlcyggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ25vZGUnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlIGFsbCBub2RlIGVsZW1lbnRzIGhhdmUgaWQgYXR0cmlidXRlc1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGVsZW1lbnQuaGFzQXR0cmlidXRlKCAnaWQnICkgPT09IGZhbHNlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoICdpZCcsIGdlbmVyYXRlSWQoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG4gICAgICAgICAgICB2YXIgdmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlTm9kZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogeG1sLmdldEF0dHJpYnV0ZSggJ3R5cGUnICksXG4gICAgICAgICAgICAgICAgICAgIGlkOiB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICksXG4gICAgICAgICAgICAgICAgICAgIHNpZDogeG1sLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSxcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4OiBuZXcgVEhSRUUuTWF0cml4NCgpLFxuICAgICAgICAgICAgICAgICAgICBub2RlczogW10sXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlQ2FtZXJhczogW10sXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlQ29udHJvbGxlcnM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxpZ2h0czogW10sXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlR2VvbWV0cmllczogW10sXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlTm9kZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zOiB7fVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ub2Rlcy5wdXNoKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdpZCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlTm9kZSggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX2NhbWVyYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnN0YW5jZUNhbWVyYXMucHVzaCggcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAndXJsJyApICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX2NvbnRyb2xsZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5zdGFuY2VDb250cm9sbGVycy5wdXNoKCBwYXJzZU5vZGVJbnN0YW5jZSggY2hpbGQgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFuY2VfbGlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5zdGFuY2VMaWdodHMucHVzaCggcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAndXJsJyApICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX2dlb21ldHJ5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmluc3RhbmNlR2VvbWV0cmllcy5wdXNoKCBwYXJzZU5vZGVJbnN0YW5jZSggY2hpbGQgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFuY2Vfbm9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnN0YW5jZU5vZGVzLnB1c2goIHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWF0cml4Lm11bHRpcGx5KCBtYXRyaXguZnJvbUFycmF5KCBhcnJheSApLnRyYW5zcG9zZSgpICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50cmFuc2Zvcm1zWyBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzaWQnICkgXSA9IGNoaWxkLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJhbnNsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWN0b3IuZnJvbUFycmF5KCBhcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWF0cml4Lm11bHRpcGx5KCBtYXRyaXgubWFrZVRyYW5zbGF0aW9uKCB2ZWN0b3IueCwgdmVjdG9yLnksIHZlY3Rvci56ICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRyYW5zZm9ybXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyb3RhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IFRIUkVFLk1hdGguZGVnVG9SYWQoIGFycmF5WyAzIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1hdHJpeC5tdWx0aXBseSggbWF0cml4Lm1ha2VSb3RhdGlvbkF4aXMoIHZlY3Rvci5mcm9tQXJyYXkoIGFycmF5ICksIGFuZ2xlICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRyYW5zZm9ybXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzY2FsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tYXRyaXguc2NhbGUoIHZlY3Rvci5mcm9tQXJyYXkoIGFycmF5ICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRyYW5zZm9ybXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdleHRyYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBjaGlsZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGxpYnJhcnkubm9kZXNbIGRhdGEuaWQgXSA9IGRhdGE7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZU5vZGVJbnN0YW5jZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogcGFyc2VJZCggeG1sLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApLFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbHM6IHt9LFxuICAgICAgICAgICAgICAgICAgICBza2VsZXRvbnM6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYmluZF9tYXRlcmlhbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlcyA9IGNoaWxkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnaW5zdGFuY2VfbWF0ZXJpYWwnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDwgaW5zdGFuY2VzLmxlbmd0aDsgaiArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gaW5zdGFuY2VzWyBqIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzeW1ib2wgPSBpbnN0YW5jZS5nZXRBdHRyaWJ1dGUoICdzeW1ib2wnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBpbnN0YW5jZS5nZXRBdHRyaWJ1dGUoICd0YXJnZXQnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWF0ZXJpYWxzWyBzeW1ib2wgXSA9IHBhcnNlSWQoIHRhcmdldCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NrZWxldG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNrZWxldG9ucy5wdXNoKCBwYXJzZUlkKCBjaGlsZC50ZXh0Q29udGVudCApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRTa2VsZXRvbiggc2tlbGV0b25zLCBqb2ludHMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJvbmVEYXRhID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHNvcnRlZEJvbmVEYXRhID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGksIGosIGRhdGE7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gYSBza2VsZXRvbiBjYW4gaGF2ZSBtdWx0aXBsZSByb290IGJvbmVzLiBjb2xsYWRhIGV4cHJlc3NlcyB0aGlzXG4gICAgICAgICAgICAgICAgLy8gc2l0dXRhdGlvbiB3aXRoIG11bHRpcGxlIFwic2tlbGV0b25cIiB0YWdzIHBlciBjb250cm9sbGVyIGluc3RhbmNlXG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBza2VsZXRvbnMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc2tlbGV0b24gPSBza2VsZXRvbnNbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBnZXROb2RlKCBza2VsZXRvbiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR1cCBib25lIGRhdGEgZm9yIGEgc2luZ2xlIGJvbmUgaGllcmFyY2h5XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkQm9uZUhpZXJhcmNoeSggcm9vdCwgam9pbnRzLCBib25lRGF0YSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBzb3J0IGJvbmUgZGF0YSAodGhlIG9yZGVyIGlzIGRlZmluZWQgaW4gdGhlIGNvcnJlc3BvbmRpbmcgY29udHJvbGxlcilcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGpvaW50cy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGogPSAwOyBqIDwgYm9uZURhdGEubGVuZ3RoOyBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGJvbmVEYXRhWyBqIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRhdGEuYm9uZS5uYW1lID09PSBqb2ludHNbIGkgXS5uYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZEJvbmVEYXRhWyBpIF0gPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBhZGQgdW5wcm9jZXNzZWQgYm9uZSBkYXRhIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGJvbmVEYXRhLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGJvbmVEYXRhWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggZGF0YS5wcm9jZXNzZWQgPT09IGZhbHNlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkQm9uZURhdGEucHVzaCggZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wcm9jZXNzZWQgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIHNldHVwIGFycmF5cyBmb3Igc2tlbGV0b24gY3JlYXRpb25cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYm9uZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYm9uZUludmVyc2VzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBzb3J0ZWRCb25lRGF0YS5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBzb3J0ZWRCb25lRGF0YVsgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBib25lcy5wdXNoKCBkYXRhLmJvbmUgKTtcbiAgICAgICAgICAgICAgICAgICAgYm9uZUludmVyc2VzLnB1c2goIGRhdGEuYm9uZUludmVyc2UgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5Ta2VsZXRvbiggYm9uZXMsIGJvbmVJbnZlcnNlcyApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRCb25lSGllcmFyY2h5KCByb290LCBqb2ludHMsIGJvbmVEYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIHNldHVwIGJvbmUgZGF0YSBmcm9tIHZpc3VhbCBzY2VuZVxuICAgIFxuICAgICAgICAgICAgICAgIHJvb3QudHJhdmVyc2UoIGZ1bmN0aW9uICggb2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG9iamVjdC5pc0JvbmUgPT09IHRydWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUludmVyc2U7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXRyaWV2ZSB0aGUgYm9uZUludmVyc2UgZnJvbSB0aGUgY29udHJvbGxlciBkYXRhXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBqb2ludHMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqb2ludCA9IGpvaW50c1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggam9pbnQubmFtZSA9PT0gb2JqZWN0Lm5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbnZlcnNlID0gam9pbnQuYm9uZUludmVyc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYm9uZUludmVyc2UgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCB0aGVyZSBjYW4gYmUgam9pbnRzIGluIHRoZSB2aXN1YWwgc2NlbmUgdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29ycmVzcG9uZGluZyBjb250cm9sbGVyLiBJbiB0aGlzIGNhc2UsIHdlIGhhdmUgdG8gY3JlYXRlIGEgZHVtbXkgYm9uZUludmVyc2UgbWF0cml4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoZSByZXNwZWN0aXZlIGJvbmUuIFRoaXMgYm9uZSB3b24ndCBhZmZlY3QgYW55IHZlcnRpY2VzLCBiZWNhdXNlIHRoZXJlIGFyZSBubyBza2luIGluZGljZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgd2VpZ2h0cyBkZWZpbmVkIGZvciBpdC4gQnV0IHdlIHN0aWxsIGhhdmUgdG8gYWRkIHRoZSBib25lIHRvIHRoZSBzb3J0ZWQgYm9uZSBsaXN0IGluIG9yZGVyIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5zdXJlIGEgY29ycmVjdCBhbmltYXRpb24gb2YgdGhlIG1vZGVsLlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW52ZXJzZSA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBib25lRGF0YS5wdXNoKCB7IGJvbmU6IG9iamVjdCwgYm9uZUludmVyc2U6IGJvbmVJbnZlcnNlLCBwcm9jZXNzZWQ6IGZhbHNlIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkTm9kZSggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0cyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBtYXRyaXggPSBkYXRhLm1hdHJpeDtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSBkYXRhLm5vZGVzO1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZGF0YS50eXBlO1xuICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZUNhbWVyYXMgPSBkYXRhLmluc3RhbmNlQ2FtZXJhcztcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2VDb250cm9sbGVycyA9IGRhdGEuaW5zdGFuY2VDb250cm9sbGVycztcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2VMaWdodHMgPSBkYXRhLmluc3RhbmNlTGlnaHRzO1xuICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZUdlb21ldHJpZXMgPSBkYXRhLmluc3RhbmNlR2VvbWV0cmllcztcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2VOb2RlcyA9IGRhdGEuaW5zdGFuY2VOb2RlcztcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBub2Rlc1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdHMucHVzaCggZ2V0Tm9kZSggbm9kZXNbIGkgXSApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGluc3RhbmNlIGNhbWVyYXNcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUNhbWVyYXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlQ2FtZXJhID0gZ2V0Q2FtZXJhKCBpbnN0YW5jZUNhbWVyYXNbIGkgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGluc3RhbmNlQ2FtZXJhICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0cy5wdXNoKCBpbnN0YW5jZUNhbWVyYS5jbG9uZSgpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2UgY29udHJvbGxlcnNcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUNvbnRyb2xsZXJzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IGluc3RhbmNlQ29udHJvbGxlcnNbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBnZXRDb250cm9sbGVyKCBpbnN0YW5jZS5pZCApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cmllcyA9IGdldEdlb21ldHJ5KCBjb250cm9sbGVyLmlkICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdPYmplY3RzID0gYnVpbGRPYmplY3RzKCBnZW9tZXRyaWVzLCBpbnN0YW5jZS5tYXRlcmlhbHMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNrZWxldG9ucyA9IGluc3RhbmNlLnNrZWxldG9ucztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50cyA9IGNvbnRyb2xsZXIuc2tpbi5qb2ludHM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBza2VsZXRvbiA9IGJ1aWxkU2tlbGV0b24oIHNrZWxldG9ucywgam9pbnRzICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBqID0gMCwgamwgPSBuZXdPYmplY3RzLmxlbmd0aDsgaiA8IGpsOyBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IG5ld09iamVjdHNbIGogXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggb2JqZWN0LmlzU2tpbm5lZE1lc2ggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmJpbmQoIHNrZWxldG9uLCBjb250cm9sbGVyLnNraW4uYmluZE1hdHJpeCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5ub3JtYWxpemVTa2luV2VpZ2h0cygpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0cy5wdXNoKCBvYmplY3QgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBpbnN0YW5jZSBsaWdodHNcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUxpZ2h0cy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2VMaWdodCA9IGdldExpZ2h0KCBpbnN0YW5jZUxpZ2h0c1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggaW5zdGFuY2VMaWdodCAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdHMucHVzaCggaW5zdGFuY2VMaWdodC5jbG9uZSgpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2UgZ2VvbWV0cmllc1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGluc3RhbmNlR2VvbWV0cmllcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBpbnN0YW5jZUdlb21ldHJpZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBzaW5nbGUgZ2VvbWV0cnkgaW5zdGFuY2UgaW4gY29sbGFkYSBjYW4gbGVhZCB0byBtdWx0aXBsZSBvYmplY3QzRHMuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIGNhc2Ugd2hlbiBwcmltaXRpdmVzIGFyZSBjb21iaW5lZCBsaWtlIHRyaWFuZ2xlcyBhbmQgbGluZXNcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdlb21ldHJpZXMgPSBnZXRHZW9tZXRyeSggaW5zdGFuY2UuaWQgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld09iamVjdHMgPSBidWlsZE9iamVjdHMoIGdlb21ldHJpZXMsIGluc3RhbmNlLm1hdGVyaWFscyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDAsIGpsID0gbmV3T2JqZWN0cy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdHMucHVzaCggbmV3T2JqZWN0c1sgaiBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2Ugbm9kZXNcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZU5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdHMucHVzaCggZ2V0Tm9kZSggaW5zdGFuY2VOb2Rlc1sgaSBdICkuY2xvbmUoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0O1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbm9kZXMubGVuZ3RoID09PSAwICYmIG9iamVjdHMubGVuZ3RoID09PSAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBvYmplY3RzWyAwIF07XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0gKCB0eXBlID09PSAnSk9JTlQnICkgPyBuZXcgVEhSRUUuQm9uZSgpIDogbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IG9iamVjdHMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmFkZCggb2JqZWN0c1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm5hbWUgPSAoIHR5cGUgPT09ICdKT0lOVCcgKSA/IGRhdGEuc2lkIDogZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgIG9iamVjdC5tYXRyaXguY29weSggbWF0cml4ICk7XG4gICAgICAgICAgICAgICAgb2JqZWN0Lm1hdHJpeC5kZWNvbXBvc2UoIG9iamVjdC5wb3NpdGlvbiwgb2JqZWN0LnF1YXRlcm5pb24sIG9iamVjdC5zY2FsZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNvbHZlTWF0ZXJpYWxCaW5kaW5nKCBrZXlzLCBpbnN0YW5jZU1hdGVyaWFscyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBpbnN0YW5jZU1hdGVyaWFsc1sga2V5c1sgaSBdIF07XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFscy5wdXNoKCBnZXRNYXRlcmlhbCggaWQgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0ZXJpYWxzO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRPYmplY3RzKCBnZW9tZXRyaWVzLCBpbnN0YW5jZU1hdGVyaWFscyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0cyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciB0eXBlIGluIGdlb21ldHJpZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IGdlb21ldHJpZXNbIHR5cGUgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFscyA9IHJlc29sdmVNYXRlcmlhbEJpbmRpbmcoIGdlb21ldHJ5Lm1hdGVyaWFsS2V5cywgaW5zdGFuY2VNYXRlcmlhbHMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIGNhc2UgaWYgbm8gbWF0ZXJpYWxzIGFyZSBkZWZpbmVkXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWxzLmxlbmd0aCA9PT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PT0gJ2xpbmVzJyB8fCB0eXBlID09PSAnbGluZXN0cmlwcycgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxzLnB1c2goIG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCgpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFscy5wdXNoKCBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlZ2FyZCBza2lubmluZ1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc2tpbm5pbmcgPSAoIGdlb21ldHJ5LmRhdGEuYXR0cmlidXRlcy5za2luSW5kZXggIT09IHVuZGVmaW5lZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNraW5uaW5nICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gbWF0ZXJpYWxzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxzWyBpIF0uc2tpbm5pbmcgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGNob29zZSBiZXR3ZWVuIGEgc2luZ2xlIG9yIG11bHRpIG1hdGVyaWFscyAobWF0ZXJpYWwgYXJyYXkpXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9ICggbWF0ZXJpYWxzLmxlbmd0aCA9PT0gMSApID8gbWF0ZXJpYWxzWyAwIF0gOiBtYXRlcmlhbHM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdyBjcmVhdGUgYSBzcGVjaWZpYyAzRCBvYmplY3RcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBnZW9tZXRyeS5kYXRhLCBtYXRlcmlhbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGluZXN0cmlwcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0gbmV3IFRIUkVFLkxpbmUoIGdlb21ldHJ5LmRhdGEsIG1hdGVyaWFsICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0cmlhbmdsZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncG9seWxpc3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2tpbm5pbmcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdCA9IG5ldyBUSFJFRS5Ta2lubmVkTWVzaCggZ2VvbWV0cnkuZGF0YSwgbWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnkuZGF0YSwgbWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cy5wdXNoKCBvYmplY3QgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdHM7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXROb2RlKCBpZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkubm9kZXNbIGlkIF0sIGJ1aWxkTm9kZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gdmlzdWFsIHNjZW5lc1xuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VWaXN1YWxTY2VuZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBwcmVwYXJlTm9kZXMoIHhtbCApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICdub2RlJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5jaGlsZHJlbi5wdXNoKCBwYXJzZU5vZGUoIGVsZW1lbnRzWyBpIF0gKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5LnZpc3VhbFNjZW5lc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRWaXN1YWxTY2VuZSggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICAgICAgICAgICAgICBncm91cC5uYW1lID0gZGF0YS5uYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGRhdGEuY2hpbGRyZW47XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlblsgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLmlkID09PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXAuYWRkKCBidWlsZE5vZGUoIGNoaWxkICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFuIElELCBsZXQncyB0cnkgdG8gZ2V0IHRoZSBmaW5pc2hlZCBidWlsZCAoZS5nLiBqb2ludHMgYXJlIGFscmVhZHkgYnVpbGQpXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cC5hZGQoIGdldE5vZGUoIGNoaWxkLmlkICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXA7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRWaXN1YWxTY2VuZSggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LnZpc3VhbFNjZW5lc1sgaWQgXSwgYnVpbGRWaXN1YWxTY2VuZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gc2NlbmVzXG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZVNjZW5lKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgJ2luc3RhbmNlX3Zpc3VhbF9zY2VuZScgKVsgMCBdO1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRWaXN1YWxTY2VuZSggcGFyc2VJZCggaW5zdGFuY2UuZ2V0QXR0cmlidXRlKCAndXJsJyApICkgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwQW5pbWF0aW9ucygpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY2xpcHMgPSBsaWJyYXJ5LmNsaXBzO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggaXNFbXB0eSggY2xpcHMgKSA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpc0VtcHR5KCBsaWJyYXJ5LmFuaW1hdGlvbnMgKSA9PT0gZmFsc2UgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgYW5pbWF0aW9ucyBidXQgbm8gY2xpcHMsIHdlIGNyZWF0ZSBhIGRlZmF1bHQgY2xpcCBmb3IgcGxheWJhY2tcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFja3MgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpZCBpbiBsaWJyYXJ5LmFuaW1hdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvblRyYWNrcyA9IGdldEFuaW1hdGlvbiggaWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBhbmltYXRpb25UcmFja3MubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tzLnB1c2goIGFuaW1hdGlvblRyYWNrc1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9ucy5wdXNoKCBuZXcgVEhSRUUuQW5pbWF0aW9uQ2xpcCggJ2RlZmF1bHQnLCAtIDEsIHRyYWNrcyApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaWQgaW4gY2xpcHMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25zLnB1c2goIGdldEFuaW1hdGlvbkNsaXAoIGlkICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGNvbnNvbGUudGltZSggJ1RIUkVFLkNvbGxhZGFMb2FkZXInICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIHRleHQubGVuZ3RoID09PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB7IHNjZW5lOiBuZXcgVEhSRUUuU2NlbmUoKSB9O1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc29sZS50aW1lKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogRE9NUGFyc2VyJyApO1xuICAgIFxuICAgICAgICAgICAgdmFyIHhtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoIHRleHQsICdhcHBsaWNhdGlvbi94bWwnICk7XG4gICAgXG4gICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBET01QYXJzZXInICk7XG4gICAgXG4gICAgICAgICAgICB2YXIgY29sbGFkYSA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICdDT0xMQURBJyApWyAwIF07XG4gICAgXG4gICAgICAgICAgICAvLyBtZXRhZGF0YVxuICAgIFxuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSBjb2xsYWRhLmdldEF0dHJpYnV0ZSggJ3ZlcnNpb24nICk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEZpbGUgdmVyc2lvbicsIHZlcnNpb24gKTtcbiAgICBcbiAgICAgICAgICAgIHZhciBhc3NldCA9IHBhcnNlQXNzZXQoIGdldEVsZW1lbnRzQnlUYWdOYW1lKCBjb2xsYWRhLCAnYXNzZXQnIClbIDAgXSApO1xuICAgICAgICAgICAgdmFyIHRleHR1cmVMb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlciggdGhpcy5tYW5hZ2VyICk7XG4gICAgICAgICAgICB0ZXh0dXJlTG9hZGVyLnNldFBhdGgoIHBhdGggKS5zZXRDcm9zc09yaWdpbiggdGhpcy5jcm9zc09yaWdpbiApO1xuICAgIFxuICAgICAgICAgICAgLy9cbiAgICBcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25zID0gW107XG4gICAgICAgICAgICB2YXIga2luZW1hdGljcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICBcbiAgICAgICAgICAgIC8vXG4gICAgXG4gICAgICAgICAgICB2YXIgbGlicmFyeSA9IHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25zOiB7fSxcbiAgICAgICAgICAgICAgICBjbGlwczoge30sXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcnM6IHt9LFxuICAgICAgICAgICAgICAgIGltYWdlczoge30sXG4gICAgICAgICAgICAgICAgZWZmZWN0czoge30sXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxzOiB7fSxcbiAgICAgICAgICAgICAgICBjYW1lcmFzOiB7fSxcbiAgICAgICAgICAgICAgICBsaWdodHM6IHt9LFxuICAgICAgICAgICAgICAgIGdlb21ldHJpZXM6IHt9LFxuICAgICAgICAgICAgICAgIG5vZGVzOiB7fSxcbiAgICAgICAgICAgICAgICB2aXN1YWxTY2VuZXM6IHt9LFxuICAgICAgICAgICAgICAgIGtpbmVtYXRpY3NNb2RlbHM6IHt9LFxuICAgICAgICAgICAgICAgIGtpbmVtYXRpY3NTY2VuZXM6IHt9XG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgY29uc29sZS50aW1lKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogUGFyc2UnICk7XG4gICAgXG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2FuaW1hdGlvbnMnLCAnYW5pbWF0aW9uJywgcGFyc2VBbmltYXRpb24gKTtcbiAgICAgICAgICAgIHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfYW5pbWF0aW9uX2NsaXBzJywgJ2FuaW1hdGlvbl9jbGlwJywgcGFyc2VBbmltYXRpb25DbGlwICk7XG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2NvbnRyb2xsZXJzJywgJ2NvbnRyb2xsZXInLCBwYXJzZUNvbnRyb2xsZXIgKTtcbiAgICAgICAgICAgIHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfaW1hZ2VzJywgJ2ltYWdlJywgcGFyc2VJbWFnZSApO1xuICAgICAgICAgICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9lZmZlY3RzJywgJ2VmZmVjdCcsIHBhcnNlRWZmZWN0ICk7XG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X21hdGVyaWFscycsICdtYXRlcmlhbCcsIHBhcnNlTWF0ZXJpYWwgKTtcbiAgICAgICAgICAgIHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfY2FtZXJhcycsICdjYW1lcmEnLCBwYXJzZUNhbWVyYSApO1xuICAgICAgICAgICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9saWdodHMnLCAnbGlnaHQnLCBwYXJzZUxpZ2h0ICk7XG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2dlb21ldHJpZXMnLCAnZ2VvbWV0cnknLCBwYXJzZUdlb21ldHJ5ICk7XG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X25vZGVzJywgJ25vZGUnLCBwYXJzZU5vZGUgKTtcbiAgICAgICAgICAgIHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfdmlzdWFsX3NjZW5lcycsICd2aXN1YWxfc2NlbmUnLCBwYXJzZVZpc3VhbFNjZW5lICk7XG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2tpbmVtYXRpY3NfbW9kZWxzJywgJ2tpbmVtYXRpY3NfbW9kZWwnLCBwYXJzZUtpbmVtYXRpY3NNb2RlbCApO1xuICAgICAgICAgICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnc2NlbmUnLCAnaW5zdGFuY2Vfa2luZW1hdGljc19zY2VuZScsIHBhcnNlS2luZW1hdGljc1NjZW5lICk7XG4gICAgXG4gICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBQYXJzZScgKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnNvbGUudGltZSggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEJ1aWxkJyApO1xuICAgIFxuICAgICAgICAgICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5LmFuaW1hdGlvbnMsIGJ1aWxkQW5pbWF0aW9uICk7XG4gICAgICAgICAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkuY2xpcHMsIGJ1aWxkQW5pbWF0aW9uQ2xpcCApO1xuICAgICAgICAgICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5LmNvbnRyb2xsZXJzLCBidWlsZENvbnRyb2xsZXIgKTtcbiAgICAgICAgICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS5pbWFnZXMsIGJ1aWxkSW1hZ2UgKTtcbiAgICAgICAgICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS5lZmZlY3RzLCBidWlsZEVmZmVjdCApO1xuICAgICAgICAgICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5Lm1hdGVyaWFscywgYnVpbGRNYXRlcmlhbCApO1xuICAgICAgICAgICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5LmNhbWVyYXMsIGJ1aWxkQ2FtZXJhICk7XG4gICAgICAgICAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkubGlnaHRzLCBidWlsZExpZ2h0ICk7XG4gICAgICAgICAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkuZ2VvbWV0cmllcywgYnVpbGRHZW9tZXRyeSApO1xuICAgICAgICAgICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5LnZpc3VhbFNjZW5lcywgYnVpbGRWaXN1YWxTY2VuZSApO1xuICAgIFxuICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQnVpbGQnICk7XG4gICAgXG4gICAgICAgICAgICBzZXR1cEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgIHNldHVwS2luZW1hdGljcygpO1xuICAgIFxuICAgICAgICAgICAgdmFyIHNjZW5lID0gcGFyc2VTY2VuZSggZ2V0RWxlbWVudHNCeVRhZ05hbWUoIGNvbGxhZGEsICdzY2VuZScgKVsgMCBdICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGFzc2V0LnVwQXhpcyA9PT0gJ1pfVVAnICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHNjZW5lLnJvdGF0aW9uLnggPSAtIE1hdGguUEkgLyAyO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgc2NlbmUuc2NhbGUubXVsdGlwbHlTY2FsYXIoIGFzc2V0LnVuaXQgKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnNvbGUudGltZUVuZCggJ1RIUkVFLkNvbGxhZGFMb2FkZXInICk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbnM6IGFuaW1hdGlvbnMsXG4gICAgICAgICAgICAgICAga2luZW1hdGljczoga2luZW1hdGljcyxcbiAgICAgICAgICAgICAgICBsaWJyYXJ5OiBsaWJyYXJ5LFxuICAgICAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgIH07IiwiLyoqXG4gKiBAYXV0aG9yIEt5bGUtTGFyc29uIGh0dHBzOi8vZ2l0aHViLmNvbS9LeWxlLUxhcnNvblxuICogQGF1dGhvciBUYWthaGlybyBodHRwczovL2dpdGh1Yi5jb20vdGFrYWhpcm94XG4gKiBAYXV0aG9yIExld3kgQmx1ZSBodHRwczovL2dpdGh1Yi5jb20vbG9vZWVlXG4gKlxuICogTG9hZGVyIGxvYWRzIEZCWCBmaWxlIGFuZCBnZW5lcmF0ZXMgR3JvdXAgcmVwcmVzZW50aW5nIEZCWCBzY2VuZS5cbiAqIFJlcXVpcmVzIEZCWCBmaWxlIHRvIGJlID49IDcuMCBhbmQgaW4gQVNDSUkgb3IgdG8gYmUgYW55IHZlcnNpb24gaW4gQmluYXJ5IGZvcm1hdC5cbiAqXG4gKiBTdXBwb3J0czpcbiAqIFx0TWVzaCBHZW5lcmF0aW9uIChQb3NpdGlvbmFsIERhdGEpXG4gKiBcdE5vcm1hbCBEYXRhIChQZXIgVmVydGV4IERyYXdpbmcgSW5zdGFuY2UpXG4gKlx0VVYgRGF0YSAoUGVyIFZlcnRleCBEcmF3aW5nIEluc3RhbmNlKVxuICpcdFNraW5uaW5nXG4gKlx0QW5pbWF0aW9uXG4gKiBcdC0gU2VwYXJhdGVkIEFuaW1hdGlvbnMgYmFzZWQgb24gc3RhY2tzLlxuICogXHQtIFNrZWxldGFsICYgTm9uLVNrZWxldGFsIEFuaW1hdGlvbnNcbiAqXHROVVJCUyAoT3BlbiwgQ2xvc2VkIGFuZCBQZXJpb2RpYyBmb3JtcylcbiAqXG4gKiBOZWVkcyBTdXBwb3J0OlxuICpcdEV1bGVyIHJvdGF0aW9uIG9yZGVyXG4gKlxuICpcbiAqIEZCWCBmb3JtYXQgcmVmZXJlbmNlczpcbiAqIFx0aHR0cHM6Ly93aWtpLmJsZW5kZXIub3JnL2luZGV4LnBocC9Vc2VyOk1vbnQyOS9Gb3VuZGF0aW9uL0ZCWF9GaWxlX1N0cnVjdHVyZVxuICpcbiAqIFx0QmluYXJ5IGZvcm1hdCBzcGVjaWZpY2F0aW9uOlxuICpcdFx0aHR0cHM6Ly9jb2RlLmJsZW5kZXIub3JnLzIwMTMvMDgvZmJ4LWJpbmFyeS1maWxlLWZvcm1hdC1zcGVjaWZpY2F0aW9uL1xuICpcdFx0aHR0cHM6Ly93aWtpLnJvZ2lrZW4ub3JnL3NwZWNpZmljYXRpb25zL2ZpbGUtZm9ybWF0L2ZieC8gKG1vcmUgZGV0YWlsIGJ1dCBKYXBhbmVzZSlcbiAqL1xuXG4oIGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgVEhSRUUuRkJYTG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuICAgIFxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyID0gKCBtYW5hZ2VyICE9PSB1bmRlZmluZWQgKSA/IG1hbmFnZXIgOiBUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oIFRIUkVFLkZCWExvYWRlci5wcm90b3R5cGUsIHtcbiAgICBcbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByZXNvdXJjZURpcmVjdG9yeSA9IFRIUkVFLkxvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKCB1cmwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLkZpbGVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuICAgICAgICAgICAgICAgIGxvYWRlci5zZXRSZXNwb25zZVR5cGUoICdhcnJheWJ1ZmZlcicgKTtcbiAgICAgICAgICAgICAgICBsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIGJ1ZmZlciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY2VuZSA9IHNlbGYucGFyc2UoIGJ1ZmZlciwgcmVzb3VyY2VEaXJlY3RvcnkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZCggc2NlbmUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoIGVycm9yICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG9uRXJyb3IgKSBvbkVycm9yKCBlcnJvciApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWFuYWdlci5pdGVtRXJyb3IoIHVybCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoIEZCWEJ1ZmZlciwgcmVzb3VyY2VEaXJlY3RvcnkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIEZCWFRyZWU7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBpc0ZieEZvcm1hdEJpbmFyeSggRkJYQnVmZmVyICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIEZCWFRyZWUgPSBuZXcgQmluYXJ5UGFyc2VyKCkucGFyc2UoIEZCWEJ1ZmZlciApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBGQlhUZXh0ID0gY29udmVydEFycmF5QnVmZmVyVG9TdHJpbmcoIEZCWEJ1ZmZlciApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoICEgaXNGYnhGb3JtYXRBU0NJSSggRkJYVGV4dCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuRkJYTG9hZGVyOiBVbmtub3duIGZvcm1hdC4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBnZXRGYnhWZXJzaW9uKCBGQlhUZXh0ICkgPCA3MDAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuRkJYTG9hZGVyOiBGQlggdmVyc2lvbiBub3Qgc3VwcG9ydGVkLCBGaWxlVmVyc2lvbjogJyArIGdldEZieFZlcnNpb24oIEZCWFRleHQgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIEZCWFRyZWUgPSBuZXcgVGV4dFBhcnNlcigpLnBhcnNlKCBGQlhUZXh0ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBGQlhUcmVlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb25zID0gcGFyc2VDb25uZWN0aW9ucyggRkJYVHJlZSApO1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZXMgPSBwYXJzZUltYWdlcyggRkJYVHJlZSApO1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlcyA9IHBhcnNlVGV4dHVyZXMoIEZCWFRyZWUsIG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCB0aGlzLm1hbmFnZXIgKS5zZXRQYXRoKCByZXNvdXJjZURpcmVjdG9yeSApLCBpbWFnZXMsIGNvbm5lY3Rpb25zICk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFscyA9IHBhcnNlTWF0ZXJpYWxzKCBGQlhUcmVlLCB0ZXh0dXJlcywgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICB2YXIgc2tlbGV0b25zID0gcGFyc2VEZWZvcm1lcnMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zICk7XG4gICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5TWFwID0gcGFyc2VHZW9tZXRyaWVzKCBGQlhUcmVlLCBjb25uZWN0aW9ucywgc2tlbGV0b25zICk7XG4gICAgICAgICAgICAgICAgdmFyIHNjZW5lR3JhcGggPSBwYXJzZVNjZW5lKCBGQlhUcmVlLCBjb25uZWN0aW9ucywgc2tlbGV0b25zLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxzICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjZW5lR3JhcGg7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgLy8gUGFyc2VzIEZCWFRyZWUuQ29ubmVjdGlvbnMgd2hpY2ggaG9sZHMgcGFyZW50LWNoaWxkIGNvbm5lY3Rpb25zIGJldHdlZW4gb2JqZWN0cyAoZS5nLiBtYXRlcmlhbCAtPiB0ZXh0dXJlLCBtb2RlbC0+Z2VvbWV0cnkgKVxuICAgICAgICAvLyBhbmQgZGV0YWlscyB0aGUgY29ubmVjdGlvbiB0eXBlXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlQ29ubmVjdGlvbnMoIEZCWFRyZWUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgY29ubmVjdGlvbk1hcCA9IG5ldyBNYXAoKTtcbiAgICBcbiAgICAgICAgICAgIGlmICggJ0Nvbm5lY3Rpb25zJyBpbiBGQlhUcmVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByYXdDb25uZWN0aW9ucyA9IEZCWFRyZWUuQ29ubmVjdGlvbnMuY29ubmVjdGlvbnM7XG4gICAgXG4gICAgICAgICAgICAgICAgcmF3Q29ubmVjdGlvbnMuZm9yRWFjaCggZnVuY3Rpb24gKCByYXdDb25uZWN0aW9uICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbUlEID0gcmF3Q29ubmVjdGlvblsgMCBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9JRCA9IHJhd0Nvbm5lY3Rpb25bIDEgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbGF0aW9uc2hpcCA9IHJhd0Nvbm5lY3Rpb25bIDIgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhIGNvbm5lY3Rpb25NYXAuaGFzKCBmcm9tSUQgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25NYXAuc2V0KCBmcm9tSUQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50UmVsYXRpb25zaGlwID0geyBJRDogdG9JRCwgcmVsYXRpb25zaGlwOiByZWxhdGlvbnNoaXAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbk1hcC5nZXQoIGZyb21JRCApLnBhcmVudHMucHVzaCggcGFyZW50UmVsYXRpb25zaGlwICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggISBjb25uZWN0aW9uTWFwLmhhcyggdG9JRCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbk1hcC5zZXQoIHRvSUQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRSZWxhdGlvbnNoaXAgPSB7IElEOiBmcm9tSUQsIHJlbGF0aW9uc2hpcDogcmVsYXRpb25zaGlwIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25NYXAuZ2V0KCB0b0lEICkuY2hpbGRyZW4ucHVzaCggY2hpbGRSZWxhdGlvbnNoaXAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbk1hcDtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBQYXJzZSBGQlhUcmVlLk9iamVjdHMuVmlkZW8gZm9yIGVtYmVkZGVkIGltYWdlIGRhdGFcbiAgICAgICAgLy8gVGhlc2UgaW1hZ2VzIGFyZSBjb25uZWN0ZWQgdG8gdGV4dHVyZXMgaW4gRkJYVHJlZS5PYmplY3RzLlRleHR1cmVzXG4gICAgICAgIC8vIHZpYSBGQlhUcmVlLkNvbm5lY3Rpb25zLlxuICAgICAgICBmdW5jdGlvbiBwYXJzZUltYWdlcyggRkJYVHJlZSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBpbWFnZXMgPSB7fTtcbiAgICAgICAgICAgIHZhciBibG9icyA9IHt9O1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnVmlkZW8nIGluIEZCWFRyZWUuT2JqZWN0cyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmlkZW9Ob2RlcyA9IEZCWFRyZWUuT2JqZWN0cy5WaWRlbztcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIHZpZGVvTm9kZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb05vZGUgPSB2aWRlb05vZGVzWyBub2RlSUQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gcGFyc2VJbnQoIG5vZGVJRCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpbWFnZXNbIGlkIF0gPSB2aWRlb05vZGUuRmlsZW5hbWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHJhdyBpbWFnZSBkYXRhIGlzIGluIHZpZGVvTm9kZS5Db250ZW50XG4gICAgICAgICAgICAgICAgICAgIGlmICggJ0NvbnRlbnQnIGluIHZpZGVvTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheUJ1ZmZlckNvbnRlbnQgPSAoIHZpZGVvTm9kZS5Db250ZW50IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgKSAmJiAoIHZpZGVvTm9kZS5Db250ZW50LmJ5dGVMZW5ndGggPiAwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZTY0Q29udGVudCA9ICggdHlwZW9mIHZpZGVvTm9kZS5Db250ZW50ID09PSAnc3RyaW5nJyApICYmICggdmlkZW9Ob2RlLkNvbnRlbnQgIT09ICcnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGFycmF5QnVmZmVyQ29udGVudCB8fCBiYXNlNjRDb250ZW50ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IHBhcnNlSW1hZ2UoIHZpZGVvTm9kZXNbIG5vZGVJRCBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvYnNbIHZpZGVvTm9kZS5GaWxlbmFtZSBdID0gaW1hZ2U7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgaWQgaW4gaW1hZ2VzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9IGltYWdlc1sgaWQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGJsb2JzWyBmaWxlbmFtZSBdICE9PSB1bmRlZmluZWQgKSBpbWFnZXNbIGlkIF0gPSBibG9ic1sgZmlsZW5hbWUgXTtcbiAgICAgICAgICAgICAgICBlbHNlIGltYWdlc1sgaWQgXSA9IGltYWdlc1sgaWQgXS5zcGxpdCggJ1xcXFwnICkucG9wKCk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gaW1hZ2VzO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIGVtYmVkZGVkIGltYWdlIGRhdGEgaW4gRkJYVHJlZS5WaWRlby5Db250ZW50XG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlSW1hZ2UoIHZpZGVvTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdmlkZW9Ob2RlLkNvbnRlbnQ7XG4gICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSB2aWRlb05vZGUuUmVsYXRpdmVGaWxlbmFtZSB8fCB2aWRlb05vZGUuRmlsZW5hbWU7XG4gICAgICAgICAgICB2YXIgZXh0ZW5zaW9uID0gZmlsZU5hbWUuc2xpY2UoIGZpbGVOYW1lLmxhc3RJbmRleE9mKCAnLicgKSArIDEgKS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgICAgICAgICAgdmFyIHR5cGU7XG4gICAgXG4gICAgICAgICAgICBzd2l0Y2ggKCBleHRlbnNpb24gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgY2FzZSAnYm1wJzpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICdpbWFnZS9ibXAnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdqcGcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2pwZWcnOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ2ltYWdlL2pwZWcnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdwbmcnOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ2ltYWdlL3BuZyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgJ3RpZic6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnaW1hZ2UvdGlmZic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ0ZCWExvYWRlcjogSW1hZ2UgdHlwZSBcIicgKyBleHRlbnNpb24gKyAnXCIgaXMgbm90IHN1cHBvcnRlZC4nICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnICkgeyAvLyBBU0NJSSBmb3JtYXRcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2RhdGE6JyArIHR5cGUgKyAnO2Jhc2U2NCwnICsgY29udGVudDtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIEJpbmFyeSBGb3JtYXRcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBuZXcgVWludDhBcnJheSggY29udGVudCApO1xuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCggbmV3IEJsb2IoIFsgYXJyYXkgXSwgeyB0eXBlOiB0eXBlIH0gKSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5UZXh0dXJlXG4gICAgICAgIC8vIFRoZXNlIGNvbnRhaW4gZGV0YWlscyBzdWNoIGFzIFVWIHNjYWxpbmcsIGNyb3BwaW5nLCByb3RhdGlvbiBldGMgYW5kIGFyZSBjb25uZWN0ZWRcbiAgICAgICAgLy8gdG8gaW1hZ2VzIGluIEZCWFRyZWUuT2JqZWN0cy5WaWRlb1xuICAgICAgICBmdW5jdGlvbiBwYXJzZVRleHR1cmVzKCBGQlhUcmVlLCBsb2FkZXIsIGltYWdlcywgY29ubmVjdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgdGV4dHVyZU1hcCA9IG5ldyBNYXAoKTtcbiAgICBcbiAgICAgICAgICAgIGlmICggJ1RleHR1cmUnIGluIEZCWFRyZWUuT2JqZWN0cyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZU5vZGVzID0gRkJYVHJlZS5PYmplY3RzLlRleHR1cmU7XG4gICAgICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJRCBpbiB0ZXh0dXJlTm9kZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gcGFyc2VUZXh0dXJlKCB0ZXh0dXJlTm9kZXNbIG5vZGVJRCBdLCBsb2FkZXIsIGltYWdlcywgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZU1hcC5zZXQoIHBhcnNlSW50KCBub2RlSUQgKSwgdGV4dHVyZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlTWFwO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIGluZGl2aWR1YWwgbm9kZSBpbiBGQlhUcmVlLk9iamVjdHMuVGV4dHVyZVxuICAgICAgICBmdW5jdGlvbiBwYXJzZVRleHR1cmUoIHRleHR1cmVOb2RlLCBsb2FkZXIsIGltYWdlcywgY29ubmVjdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgdGV4dHVyZSA9IGxvYWRUZXh0dXJlKCB0ZXh0dXJlTm9kZSwgbG9hZGVyLCBpbWFnZXMsIGNvbm5lY3Rpb25zICk7XG4gICAgXG4gICAgICAgICAgICB0ZXh0dXJlLklEID0gdGV4dHVyZU5vZGUuaWQ7XG4gICAgXG4gICAgICAgICAgICB0ZXh0dXJlLm5hbWUgPSB0ZXh0dXJlTm9kZS5hdHRyTmFtZTtcbiAgICBcbiAgICAgICAgICAgIHZhciB3cmFwTW9kZVUgPSB0ZXh0dXJlTm9kZS5XcmFwTW9kZVU7XG4gICAgICAgICAgICB2YXIgd3JhcE1vZGVWID0gdGV4dHVyZU5vZGUuV3JhcE1vZGVWO1xuICAgIFxuICAgICAgICAgICAgdmFyIHZhbHVlVSA9IHdyYXBNb2RlVSAhPT0gdW5kZWZpbmVkID8gd3JhcE1vZGVVLnZhbHVlIDogMDtcbiAgICAgICAgICAgIHZhciB2YWx1ZVYgPSB3cmFwTW9kZVYgIT09IHVuZGVmaW5lZCA/IHdyYXBNb2RlVi52YWx1ZSA6IDA7XG4gICAgXG4gICAgICAgICAgICAvLyBodHRwOi8vZG93bmxvYWQuYXV0b2Rlc2suY29tL3VzL2ZieC9TREtkb2NzL0ZCWF9TREtfSGVscC9maWxlcy9mYnhzZGtyZWYvY2xhc3Nfa19mYnhfdGV4dHVyZS5odG1sIzg4OTY0MGU2M2UyZTY4MTI1OWVhODEwNjFiODUxNDNhXG4gICAgICAgICAgICAvLyAwOiByZXBlYXQoZGVmYXVsdCksIDE6IGNsYW1wXG4gICAgXG4gICAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gdmFsdWVVID09PSAwID8gVEhSRUUuUmVwZWF0V3JhcHBpbmcgOiBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO1xuICAgICAgICAgICAgdGV4dHVyZS53cmFwVCA9IHZhbHVlViA9PT0gMCA/IFRIUkVFLlJlcGVhdFdyYXBwaW5nIDogVEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZztcbiAgICBcbiAgICAgICAgICAgIGlmICggJ1NjYWxpbmcnIGluIHRleHR1cmVOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSB0ZXh0dXJlTm9kZS5TY2FsaW5nLnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgIHRleHR1cmUucmVwZWF0LnggPSB2YWx1ZXNbIDAgXTtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLnJlcGVhdC55ID0gdmFsdWVzWyAxIF07XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBsb2FkIGEgdGV4dHVyZSBzcGVjaWZpZWQgYXMgYSBibG9iIG9yIGRhdGEgVVJJLCBvciB2aWEgYW4gZXh0ZXJuYWwgVVJMIHVzaW5nIFRIUkVFLlRleHR1cmVMb2FkZXJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFRleHR1cmUoIHRleHR1cmVOb2RlLCBsb2FkZXIsIGltYWdlcywgY29ubmVjdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgZmlsZU5hbWU7XG4gICAgXG4gICAgICAgICAgICB2YXIgY3VycmVudFBhdGggPSBsb2FkZXIucGF0aDtcbiAgICBcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGNvbm5lY3Rpb25zLmdldCggdGV4dHVyZU5vZGUuaWQgKS5jaGlsZHJlbjtcbiAgICBcbiAgICAgICAgICAgIGlmICggY2hpbGRyZW4gIT09IHVuZGVmaW5lZCAmJiBjaGlsZHJlbi5sZW5ndGggPiAwICYmIGltYWdlc1sgY2hpbGRyZW5bIDAgXS5JRCBdICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBpbWFnZXNbIGNoaWxkcmVuWyAwIF0uSUQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGZpbGVOYW1lLmluZGV4T2YoICdibG9iOicgKSA9PT0gMCB8fCBmaWxlTmFtZS5pbmRleE9mKCAnZGF0YTonICkgPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlci5zZXRQYXRoKCB1bmRlZmluZWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgdGV4dHVyZSA9IGxvYWRlci5sb2FkKCBmaWxlTmFtZSApO1xuICAgIFxuICAgICAgICAgICAgbG9hZGVyLnNldFBhdGgoIGN1cnJlbnRQYXRoICk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBQYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuTWF0ZXJpYWxcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VNYXRlcmlhbHMoIEZCWFRyZWUsIHRleHR1cmVNYXAsIGNvbm5lY3Rpb25zICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIG1hdGVyaWFsTWFwID0gbmV3IE1hcCgpO1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnTWF0ZXJpYWwnIGluIEZCWFRyZWUuT2JqZWN0cyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxOb2RlcyA9IEZCWFRyZWUuT2JqZWN0cy5NYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIG1hdGVyaWFsTm9kZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHBhcnNlTWF0ZXJpYWwoIEZCWFRyZWUsIG1hdGVyaWFsTm9kZXNbIG5vZGVJRCBdLCB0ZXh0dXJlTWFwLCBjb25uZWN0aW9ucyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsICE9PSBudWxsICkgbWF0ZXJpYWxNYXAuc2V0KCBwYXJzZUludCggbm9kZUlEICksIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFsTWFwO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIHNpbmdsZSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5NYXRlcmlhbFxuICAgICAgICAvLyBNYXRlcmlhbHMgYXJlIGNvbm5lY3RlZCB0byB0ZXh0dXJlIG1hcHMgaW4gRkJYVHJlZS5PYmplY3RzLlRleHR1cmVzXG4gICAgICAgIC8vIEZCWCBmb3JtYXQgY3VycmVudGx5IG9ubHkgc3VwcG9ydHMgTGFtYmVydCBhbmQgUGhvbmcgc2hhZGluZyBtb2RlbHNcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VNYXRlcmlhbCggRkJYVHJlZSwgbWF0ZXJpYWxOb2RlLCB0ZXh0dXJlTWFwLCBjb25uZWN0aW9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBJRCA9IG1hdGVyaWFsTm9kZS5pZDtcbiAgICAgICAgICAgIHZhciBuYW1lID0gbWF0ZXJpYWxOb2RlLmF0dHJOYW1lO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBtYXRlcmlhbE5vZGUuU2hhZGluZ01vZGVsO1xuICAgIFxuICAgICAgICAgICAgLy9DYXNlIHdoZXJlIEZCWCB3cmFwcyBzaGFkaW5nIG1vZGVsIGluIHByb3BlcnR5IG9iamVjdC5cbiAgICAgICAgICAgIGlmICggdHlwZW9mIHR5cGUgPT09ICdvYmplY3QnICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHR5cGUgPSB0eXBlLnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gSWdub3JlIHVudXNlZCBtYXRlcmlhbHMgd2hpY2ggZG9uJ3QgaGF2ZSBhbnkgY29ubmVjdGlvbnMuXG4gICAgICAgICAgICBpZiAoICEgY29ubmVjdGlvbnMuaGFzKCBJRCApICkgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHBhcnNlUGFyYW1ldGVycyggRkJYVHJlZSwgbWF0ZXJpYWxOb2RlLCB0ZXh0dXJlTWFwLCBJRCwgY29ubmVjdGlvbnMgKTtcbiAgICBcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgIHN3aXRjaCAoIHR5cGUudG9Mb3dlckNhc2UoKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdwaG9uZyc6XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xhbWJlcnQnOlxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogdW5rbm93biBtYXRlcmlhbCB0eXBlIFwiJXNcIi4gRGVmYXVsdGluZyB0byBNZXNoUGhvbmdNYXRlcmlhbC4nLCB0eXBlICk7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCB7IGNvbG9yOiAweDMzMDBmZiB9ICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VmFsdWVzKCBwYXJhbWV0ZXJzICk7XG4gICAgICAgICAgICBtYXRlcmlhbC5uYW1lID0gbmFtZTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBQYXJzZSBGQlggbWF0ZXJpYWwgYW5kIHJldHVybiBwYXJhbWV0ZXJzIHN1aXRhYmxlIGZvciBhIHRocmVlLmpzIG1hdGVyaWFsXG4gICAgICAgIC8vIEFsc28gcGFyc2UgdGhlIHRleHR1cmUgbWFwIGFuZCByZXR1cm4gYW55IHRleHR1cmVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWF0ZXJpYWxcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VQYXJhbWV0ZXJzKCBGQlhUcmVlLCBwcm9wZXJ0aWVzLCB0ZXh0dXJlTWFwLCBJRCwgY29ubmVjdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHt9O1xuICAgIFxuICAgICAgICAgICAgaWYgKCBwcm9wZXJ0aWVzLkJ1bXBGYWN0b3IgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5idW1wU2NhbGUgPSBwcm9wZXJ0aWVzLkJ1bXBGYWN0b3IudmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIHByb3BlcnRpZXMuRGlmZnVzZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCBwcm9wZXJ0aWVzLkRpZmZ1c2UudmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggcHJvcGVydGllcy5EaXNwbGFjZW1lbnRGYWN0b3IgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5kaXNwbGFjZW1lbnRTY2FsZSA9IHByb3BlcnRpZXMuRGlzcGxhY2VtZW50RmFjdG9yLnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBwcm9wZXJ0aWVzLlJlZmxlY3Rpb25GYWN0b3IgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5yZWZsZWN0aXZpdHkgPSBwcm9wZXJ0aWVzLlJlZmxlY3Rpb25GYWN0b3IudmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIHByb3BlcnRpZXMuU3BlY3VsYXIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5zcGVjdWxhciA9IG5ldyBUSFJFRS5Db2xvcigpLmZyb21BcnJheSggcHJvcGVydGllcy5TcGVjdWxhci52YWx1ZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBwcm9wZXJ0aWVzLlNoaW5pbmVzcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnNoaW5pbmVzcyA9IHByb3BlcnRpZXMuU2hpbmluZXNzLnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBwcm9wZXJ0aWVzLkVtaXNzaXZlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuZW1pc3NpdmUgPSBuZXcgVEhSRUUuQ29sb3IoKS5mcm9tQXJyYXkoIHByb3BlcnRpZXMuRW1pc3NpdmUudmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggcHJvcGVydGllcy5FbWlzc2l2ZUZhY3RvciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmVtaXNzaXZlSW50ZW5zaXR5ID0gcGFyc2VGbG9hdCggcHJvcGVydGllcy5FbWlzc2l2ZUZhY3Rvci52YWx1ZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBwcm9wZXJ0aWVzLk9wYWNpdHkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5vcGFjaXR5ID0gcGFyc2VGbG9hdCggcHJvcGVydGllcy5PcGFjaXR5LnZhbHVlICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIHBhcmFtZXRlcnMub3BhY2l0eSA8IDEuMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnRyYW5zcGFyZW50ID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGNvbm5lY3Rpb25zLmdldCggSUQgKS5jaGlsZHJlbi5mb3JFYWNoKCBmdW5jdGlvbiAoIGNoaWxkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gY2hpbGQucmVsYXRpb25zaGlwO1xuICAgIFxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIHR5cGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0J1bXAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5idW1wTWFwID0gdGV4dHVyZU1hcC5nZXQoIGNoaWxkLklEICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRGlmZnVzZUNvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMubWFwID0gZ2V0VGV4dHVyZSggRkJYVHJlZSwgdGV4dHVyZU1hcCwgY2hpbGQuSUQsIGNvbm5lY3Rpb25zICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRGlzcGxhY2VtZW50Q29sb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5kaXNwbGFjZW1lbnRNYXAgPSBnZXRUZXh0dXJlKCBGQlhUcmVlLCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCwgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdFbWlzc2l2ZUNvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuZW1pc3NpdmVNYXAgPSBnZXRUZXh0dXJlKCBGQlhUcmVlLCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCwgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdOb3JtYWxNYXAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5ub3JtYWxNYXAgPSBnZXRUZXh0dXJlKCBGQlhUcmVlLCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCwgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdSZWZsZWN0aW9uQ29sb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5lbnZNYXAgPSBnZXRUZXh0dXJlKCBGQlhUcmVlLCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCwgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuZW52TWFwLm1hcHBpbmcgPSBUSFJFRS5FcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdTcGVjdWxhckNvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuc3BlY3VsYXJNYXAgPSBnZXRUZXh0dXJlKCBGQlhUcmVlLCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCwgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdUcmFuc3BhcmVudENvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuYWxwaGFNYXAgPSBnZXRUZXh0dXJlKCBGQlhUcmVlLCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCwgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0FtYmllbnRDb2xvcic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NoaW5pbmVzc0V4cG9uZW50JzogLy8gQUtBIGdsb3NzaW5lc3MgbWFwXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NwZWN1bGFyRmFjdG9yJzogLy8gQUtBIHNwZWN1bGFyTGV2ZWxcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnVmVjdG9yRGlzcGxhY2VtZW50Q29sb3InOiAvLyBOT1RFOiBTZWVtcyB0byBiZSBhIGNvcHkgb2YgRGlzcGxhY2VtZW50Q29sb3JcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogJXMgbWFwIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhyZWUuanMsIHNraXBwaW5nIHRleHR1cmUuJywgdHlwZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnM7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gZ2V0IGEgdGV4dHVyZSBmcm9tIHRoZSB0ZXh0dXJlTWFwIGZvciB1c2UgYnkgYSBtYXRlcmlhbC5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VGV4dHVyZSggRkJYVHJlZSwgdGV4dHVyZU1hcCwgaWQsIGNvbm5lY3Rpb25zICkge1xuICAgIFxuICAgICAgICAgICAgLy8gaWYgdGhlIHRleHR1cmUgaXMgYSBsYXllcmVkIHRleHR1cmUsIGp1c3QgdXNlIHRoZSBmaXJzdCBsYXllciBhbmQgaXNzdWUgYSB3YXJuaW5nXG4gICAgICAgICAgICBpZiAoICdMYXllcmVkVGV4dHVyZScgaW4gRkJYVHJlZS5PYmplY3RzICYmIGlkIGluIEZCWFRyZWUuT2JqZWN0cy5MYXllcmVkVGV4dHVyZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IGxheWVyZWQgdGV4dHVyZXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhyZWUuanMuIERpc2NhcmRpbmcgYWxsIGJ1dCBmaXJzdCBsYXllci4nICk7XG4gICAgICAgICAgICAgICAgaWQgPSBjb25uZWN0aW9ucy5nZXQoIGlkICkuY2hpbGRyZW5bIDAgXS5JRDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlTWFwLmdldCggaWQgKTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBQYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuRGVmb3JtZXJcbiAgICAgICAgLy8gRGVmb3JtZXIgbm9kZSBjYW4gY29udGFpbiBza2lubmluZyBvciBWZXJ0ZXggQ2FjaGUgYW5pbWF0aW9uIGRhdGEsIGhvd2V2ZXIgb25seSBza2lubmluZyBpcyBzdXBwb3J0ZWQgaGVyZVxuICAgICAgICAvLyBHZW5lcmF0ZXMgbWFwIG9mIFNrZWxldG9uLWxpa2Ugb2JqZWN0cyBmb3IgdXNlIGxhdGVyIHdoZW4gZ2VuZXJhdGluZyBhbmQgYmluZGluZyBza2VsZXRvbnMuXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlRGVmb3JtZXJzKCBGQlhUcmVlLCBjb25uZWN0aW9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBza2VsZXRvbnMgPSB7fTtcbiAgICBcbiAgICAgICAgICAgIGlmICggJ0RlZm9ybWVyJyBpbiBGQlhUcmVlLk9iamVjdHMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIERlZm9ybWVyTm9kZXMgPSBGQlhUcmVlLk9iamVjdHMuRGVmb3JtZXI7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJRCBpbiBEZWZvcm1lck5vZGVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmb3JtZXJOb2RlID0gRGVmb3JtZXJOb2Rlc1sgbm9kZUlEIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggZGVmb3JtZXJOb2RlLmF0dHJUeXBlID09PSAnU2tpbicgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRpb25zaGlwcyA9IGNvbm5lY3Rpb25zLmdldCggcGFyc2VJbnQoIG5vZGVJRCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2tlbGV0b24gPSBwYXJzZVNrZWxldG9uKCByZWxhdGlvbnNoaXBzLCBEZWZvcm1lck5vZGVzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBza2VsZXRvbi5JRCA9IG5vZGVJRDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcmVsYXRpb25zaGlwcy5wYXJlbnRzLmxlbmd0aCA+IDEgKSBjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IHNrZWxldG9uIGF0dGFjaGVkIHRvIG1vcmUgdGhhbiBvbmUgZ2VvbWV0cnkgaXMgbm90IHN1cHBvcnRlZC4nICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBza2VsZXRvbi5nZW9tZXRyeUlEID0gcmVsYXRpb25zaGlwcy5wYXJlbnRzWyAwIF0uSUQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBza2VsZXRvbnNbIG5vZGVJRCBdID0gc2tlbGV0b247XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gc2tlbGV0b25zO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIHNpbmdsZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuRGVmb3JtZXJcbiAgICAgICAgLy8gVGhlIHRvcCBsZXZlbCBkZWZvcm1lciBub2RlcyBoYXZlIHR5cGUgJ1NraW4nIGFuZCBzdWJEZWZvcm1lciBub2RlcyBoYXZlIHR5cGUgJ0NsdXN0ZXInXG4gICAgICAgIC8vIEVhY2ggc2tpbiBub2RlIHJlcHJlc2VudHMgYSBza2VsZXRvbiBhbmQgZWFjaCBjbHVzdGVyIG5vZGUgcmVwcmVzZW50cyBhIGJvbmVcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VTa2VsZXRvbiggY29ubmVjdGlvbnMsIGRlZm9ybWVyTm9kZXMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcmF3Qm9uZXMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIGNvbm5lY3Rpb25zLmNoaWxkcmVuLmZvckVhY2goIGZ1bmN0aW9uICggY2hpbGQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHN1YkRlZm9ybWVyTm9kZSA9IGRlZm9ybWVyTm9kZXNbIGNoaWxkLklEIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBzdWJEZWZvcm1lck5vZGUuYXR0clR5cGUgIT09ICdDbHVzdGVyJyApIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcmF3Qm9uZSA9IHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgSUQ6IGNoaWxkLklELFxuICAgICAgICAgICAgICAgICAgICBpbmRpY2VzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0czogW10sXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkoIHN1YkRlZm9ybWVyTm9kZS5UcmFuc2Zvcm0uYSApLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1MaW5rOiBuZXcgVEhSRUUuTWF0cml4NCgpLmZyb21BcnJheSggc3ViRGVmb3JtZXJOb2RlLlRyYW5zZm9ybUxpbmsuYSApLFxuICAgICAgICAgICAgICAgICAgICBsaW5rTW9kZTogc3ViRGVmb3JtZXJOb2RlLk1vZGUsXG4gICAgXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoICdJbmRleGVzJyBpbiBzdWJEZWZvcm1lck5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJhd0JvbmUuaW5kaWNlcyA9IHN1YkRlZm9ybWVyTm9kZS5JbmRleGVzLmE7XG4gICAgICAgICAgICAgICAgICAgIHJhd0JvbmUud2VpZ2h0cyA9IHN1YkRlZm9ybWVyTm9kZS5XZWlnaHRzLmE7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJhd0JvbmVzLnB1c2goIHJhd0JvbmUgKTtcbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmF3Qm9uZXM6IHJhd0JvbmVzLFxuICAgICAgICAgICAgICAgIGJvbmVzOiBbXVxuICAgIFxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBQYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnlcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VHZW9tZXRyaWVzKCBGQlhUcmVlLCBjb25uZWN0aW9ucywgc2tlbGV0b25zICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGdlb21ldHJ5TWFwID0gbmV3IE1hcCgpO1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnR2VvbWV0cnknIGluIEZCWFRyZWUuT2JqZWN0cyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnlOb2RlcyA9IEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeTtcbiAgICBcbiAgICBcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIGdlb21ldHJ5Tm9kZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWxhdGlvbnNoaXBzID0gY29ubmVjdGlvbnMuZ2V0KCBwYXJzZUludCggbm9kZUlEICkgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdlbyA9IHBhcnNlR2VvbWV0cnkoIEZCWFRyZWUsIHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5Tm9kZXNbIG5vZGVJRCBdLCBza2VsZXRvbnMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnlNYXAuc2V0KCBwYXJzZUludCggbm9kZUlEICksIGdlbyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBnZW9tZXRyeU1hcDtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBQYXJzZSBzaW5nbGUgbm9kZSBpbiBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnlcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VHZW9tZXRyeSggRkJYVHJlZSwgcmVsYXRpb25zaGlwcywgZ2VvbWV0cnlOb2RlLCBza2VsZXRvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICBzd2l0Y2ggKCBnZW9tZXRyeU5vZGUuYXR0clR5cGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgY2FzZSAnTWVzaCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZU1lc2hHZW9tZXRyeSggRkJYVHJlZSwgcmVsYXRpb25zaGlwcywgZ2VvbWV0cnlOb2RlLCBza2VsZXRvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgY2FzZSAnTnVyYnNDdXJ2ZSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZU51cmJzR2VvbWV0cnkoIGdlb21ldHJ5Tm9kZSApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgIFxuICAgICAgICAvLyBQYXJzZSBzaW5nbGUgbm9kZSBtZXNoIGdlb21ldHJ5IGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuICAgICAgICBmdW5jdGlvbiBwYXJzZU1lc2hHZW9tZXRyeSggRkJYVHJlZSwgcmVsYXRpb25zaGlwcywgZ2VvbWV0cnlOb2RlLCBza2VsZXRvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbW9kZWxOb2RlcyA9IHJlbGF0aW9uc2hpcHMucGFyZW50cy5tYXAoIGZ1bmN0aW9uICggcGFyZW50ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBGQlhUcmVlLk9iamVjdHMuTW9kZWxbIHBhcmVudC5JRCBdO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgLy8gZG9uJ3QgY3JlYXRlIGdlb21ldHJ5IGlmIGl0IGlzIG5vdCBhc3NvY2lhdGVkIHdpdGggYW55IG1vZGVsc1xuICAgICAgICAgICAgaWYgKCBtb2RlbE5vZGVzLmxlbmd0aCA9PT0gMCApIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgIHZhciBza2VsZXRvbiA9IHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4ucmVkdWNlKCBmdW5jdGlvbiAoIHNrZWxldG9uLCBjaGlsZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHNrZWxldG9uc1sgY2hpbGQuSUQgXSAhPT0gdW5kZWZpbmVkICkgc2tlbGV0b24gPSBza2VsZXRvbnNbIGNoaWxkLklEIF07XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNrZWxldG9uO1xuICAgIFxuICAgICAgICAgICAgfSwgbnVsbCApO1xuICAgIFxuICAgICAgICAgICAgdmFyIHByZVRyYW5zZm9ybSA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG4gICAgXG4gICAgICAgICAgICAvLyBUT0RPOiBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIG1vZGVsIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2VvbWV0cnksIEFORCB0aGUgbW9kZWxzIGhhdmVcbiAgICAgICAgICAgIC8vIGRpZmZlcmVudCBnZW9tZXRyaWMgdHJhbnNmb3JtcywgdGhlbiB0aGlzIHdpbGwgY2F1c2UgcHJvYmxlbXNcbiAgICAgICAgICAgIC8vIGlmICggbW9kZWxOb2Rlcy5sZW5ndGggPiAxICkgeyB9XG4gICAgXG4gICAgICAgICAgICAvLyBGb3Igbm93IGp1c3QgYXNzdW1lIG9uZSBtb2RlbCBhbmQgZ2V0IHRoZSBwcmVSb3RhdGlvbnMgZnJvbSB0aGF0XG4gICAgICAgICAgICB2YXIgbW9kZWxOb2RlID0gbW9kZWxOb2Rlc1sgMCBdO1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnR2VvbWV0cmljUm90YXRpb24nIGluIG1vZGVsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBtb2RlbE5vZGUuR2VvbWV0cmljUm90YXRpb24udmFsdWUubWFwKCBUSFJFRS5NYXRoLmRlZ1RvUmFkICk7XG4gICAgICAgICAgICAgICAgYXJyYXlbIDMgXSA9ICdaWVgnO1xuICAgIFxuICAgICAgICAgICAgICAgIHByZVRyYW5zZm9ybS5tYWtlUm90YXRpb25Gcm9tRXVsZXIoIG5ldyBUSFJFRS5FdWxlcigpLmZyb21BcnJheSggYXJyYXkgKSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCAnR2VvbWV0cmljVHJhbnNsYXRpb24nIGluIG1vZGVsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwcmVUcmFuc2Zvcm0uc2V0UG9zaXRpb24oIG5ldyBUSFJFRS5WZWN0b3IzKCkuZnJvbUFycmF5KCBtb2RlbE5vZGUuR2VvbWV0cmljVHJhbnNsYXRpb24udmFsdWUgKSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGdlbkdlb21ldHJ5KCBGQlhUcmVlLCByZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU5vZGUsIHNrZWxldG9uLCBwcmVUcmFuc2Zvcm0gKTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBHZW5lcmF0ZSBhIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGZyb20gYSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuICAgICAgICBmdW5jdGlvbiBnZW5HZW9tZXRyeSggRkJYVHJlZSwgcmVsYXRpb25zaGlwcywgZ2VvbWV0cnlOb2RlLCBza2VsZXRvbiwgcHJlVHJhbnNmb3JtICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHZlcnRleFBvc2l0aW9ucyA9IGdlb21ldHJ5Tm9kZS5WZXJ0aWNlcy5hO1xuICAgICAgICAgICAgdmFyIHZlcnRleEluZGljZXMgPSBnZW9tZXRyeU5vZGUuUG9seWdvblZlcnRleEluZGV4LmE7XG4gICAgXG4gICAgICAgICAgICAvLyBjcmVhdGUgYXJyYXlzIHRvIGhvbGQgdGhlIGZpbmFsIGRhdGEgdXNlZCB0byBidWlsZCB0aGUgYnVmZmVyZ2VvbWV0cnlcbiAgICAgICAgICAgIHZhciB2ZXJ0ZXhCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHZhciBub3JtYWxCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHZhciBjb2xvcnNCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHZhciB1dnNCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbEluZGV4QnVmZmVyID0gW107XG4gICAgICAgICAgICB2YXIgdmVydGV4V2VpZ2h0c0J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIHdlaWdodHNJbmRpY2VzQnVmZmVyID0gW107XG4gICAgXG4gICAgICAgICAgICBpZiAoIGdlb21ldHJ5Tm9kZS5MYXllckVsZW1lbnRDb2xvciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY29sb3JJbmZvID0gZ2V0Q29sb3JzKCBnZW9tZXRyeU5vZGUuTGF5ZXJFbGVtZW50Q29sb3JbIDAgXSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCBnZW9tZXRyeU5vZGUuTGF5ZXJFbGVtZW50TWF0ZXJpYWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsSW5mbyA9IGdldE1hdGVyaWFscyggZ2VvbWV0cnlOb2RlLkxheWVyRWxlbWVudE1hdGVyaWFsWyAwIF0gKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggZ2VvbWV0cnlOb2RlLkxheWVyRWxlbWVudE5vcm1hbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsSW5mbyA9IGdldE5vcm1hbHMoIGdlb21ldHJ5Tm9kZS5MYXllckVsZW1lbnROb3JtYWxbIDAgXSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCBnZW9tZXRyeU5vZGUuTGF5ZXJFbGVtZW50VVYgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHV2SW5mbyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoIGdlb21ldHJ5Tm9kZS5MYXllckVsZW1lbnRVVlsgaSBdICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB1dkluZm8ucHVzaCggZ2V0VVZzKCBnZW9tZXRyeU5vZGUuTGF5ZXJFbGVtZW50VVZbIGkgXSApICk7XG4gICAgICAgICAgICAgICAgICAgIGkgKys7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIHdlaWdodFRhYmxlID0ge307XG4gICAgXG4gICAgICAgICAgICBpZiAoIHNrZWxldG9uICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHNrZWxldG9uLnJhd0JvbmVzLmZvckVhY2goIGZ1bmN0aW9uICggcmF3Qm9uZSwgaSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCBvdmVyIHRoZSBib25lJ3MgdmVydGV4IGluZGljZXMgYW5kIHdlaWdodHNcbiAgICAgICAgICAgICAgICAgICAgcmF3Qm9uZS5pbmRpY2VzLmZvckVhY2goIGZ1bmN0aW9uICggaW5kZXgsIGogKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHdlaWdodFRhYmxlWyBpbmRleCBdID09PSB1bmRlZmluZWQgKSB3ZWlnaHRUYWJsZVsgaW5kZXggXSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0VGFibGVbIGluZGV4IF0ucHVzaCgge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodDogcmF3Qm9uZS53ZWlnaHRzWyBqIF0sXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgcG9seWdvbkluZGV4ID0gMDtcbiAgICAgICAgICAgIHZhciBmYWNlTGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHZhciBkaXNwbGF5ZWRXZWlnaHRzV2FybmluZyA9IGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgLy8gdGhlc2Ugd2lsbCBob2xkIGRhdGEgZm9yIGEgc2luZ2xlIGZhY2VcbiAgICAgICAgICAgIHZhciB2ZXJ0ZXhQb3NpdGlvbkluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBmYWNlTm9ybWFscyA9IFtdO1xuICAgICAgICAgICAgdmFyIGZhY2VDb2xvcnMgPSBbXTtcbiAgICAgICAgICAgIHZhciBmYWNlVVZzID0gW107XG4gICAgICAgICAgICB2YXIgZmFjZVdlaWdodHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBmYWNlV2VpZ2h0SW5kaWNlcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgdmVydGV4SW5kaWNlcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHZlcnRleEluZGV4LCBwb2x5Z29uVmVydGV4SW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGVuZE9mRmFjZSA9IGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIEZhY2UgaW5kZXggYW5kIHZlcnRleCBpbmRleCBhcnJheXMgYXJlIGNvbWJpbmVkIGluIGEgc2luZ2xlIGFycmF5XG4gICAgICAgICAgICAgICAgLy8gQSBjdWJlIHdpdGggcXVhZCBmYWNlcyBsb29rcyBsaWtlIHRoaXM6XG4gICAgICAgICAgICAgICAgLy8gUG9seWdvblZlcnRleEluZGV4OiAqMjQge1xuICAgICAgICAgICAgICAgIC8vICBhOiAwLCAxLCAzLCAtMywgMiwgMywgNSwgLTUsIDQsIDUsIDcsIC03LCA2LCA3LCAxLCAtMSwgMSwgNywgNSwgLTQsIDYsIDAsIDIsIC01XG4gICAgICAgICAgICAgICAgLy8gIH1cbiAgICAgICAgICAgICAgICAvLyBOZWdhdGl2ZSBudW1iZXJzIG1hcmsgdGhlIGVuZCBvZiBhIGZhY2UgLSBmaXJzdCBmYWNlIGhlcmUgaXMgMCwgMSwgMywgLTNcbiAgICAgICAgICAgICAgICAvLyB0byBmaW5kIGluZGV4IG9mIGxhc3QgdmVydGV4IG11bHRpcGx5IGJ5IC0xIGFuZCBzdWJ0cmFjdCAxOiAtMyAqIC0gMSAtIDEgPSAyXG4gICAgICAgICAgICAgICAgaWYgKCB2ZXJ0ZXhJbmRleCA8IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleEluZGV4ID0gdmVydGV4SW5kZXggXiAtIDE7IC8vIGVxdWl2YWxlbnQgdG8gKCB4ICogLTEgKSAtIDFcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4SW5kaWNlc1sgcG9seWdvblZlcnRleEluZGV4IF0gPSB2ZXJ0ZXhJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgZW5kT2ZGYWNlID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHdlaWdodEluZGljZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0cyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZlcnRleFBvc2l0aW9uSW5kZXhlcy5wdXNoKCB2ZXJ0ZXhJbmRleCAqIDMsIHZlcnRleEluZGV4ICogMyArIDEsIHZlcnRleEluZGV4ICogMyArIDIgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGNvbG9ySW5mbyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnZXREYXRhKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGNvbG9ySW5mbyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmYWNlQ29sb3JzLnB1c2goIGRhdGFbIDAgXSwgZGF0YVsgMSBdLCBkYXRhWyAyIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBza2VsZXRvbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB3ZWlnaHRUYWJsZVsgdmVydGV4SW5kZXggXSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0VGFibGVbIHZlcnRleEluZGV4IF0uZm9yRWFjaCggZnVuY3Rpb24gKCB3dCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzLnB1c2goIHd0LndlaWdodCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodEluZGljZXMucHVzaCggd3QuaWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHdlaWdodHMubGVuZ3RoID4gNCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISBkaXNwbGF5ZWRXZWlnaHRzV2FybmluZyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IFZlcnRleCBoYXMgbW9yZSB0aGFuIDQgc2tpbm5pbmcgd2VpZ2h0cyBhc3NpZ25lZCB0byB2ZXJ0ZXguIERlbGV0aW5nIGFkZGl0aW9uYWwgd2VpZ2h0cy4nICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheWVkV2VpZ2h0c1dhcm5pbmcgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdJbmRleCA9IFsgMCwgMCwgMCwgMCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFdlaWdodCA9IFsgMCwgMCwgMCwgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cy5mb3JFYWNoKCBmdW5jdGlvbiAoIHdlaWdodCwgd2VpZ2h0SW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRXZWlnaHQgPSB3ZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHdlaWdodEluZGljZXNbIHdlaWdodEluZGV4IF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgV2VpZ2h0LmZvckVhY2goIGZ1bmN0aW9uICggY29tcGFyZWRXZWlnaHQsIGNvbXBhcmVkV2VpZ2h0SW5kZXgsIGNvbXBhcmVkV2VpZ2h0QXJyYXkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY3VycmVudFdlaWdodCA+IGNvbXBhcmVkV2VpZ2h0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZWRXZWlnaHRBcnJheVsgY29tcGFyZWRXZWlnaHRJbmRleCBdID0gY3VycmVudFdlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXZWlnaHQgPSBjb21wYXJlZFdlaWdodDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSB3SW5kZXhbIGNvbXBhcmVkV2VpZ2h0SW5kZXggXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdJbmRleFsgY29tcGFyZWRXZWlnaHRJbmRleCBdID0gY3VycmVudEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEluZGV4ID0gdG1wO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0SW5kaWNlcyA9IHdJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHMgPSBXZWlnaHQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHdlaWdodCBhcnJheSBpcyBzaG9ydGVyIHRoYW4gNCBwYWQgd2l0aCAwc1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIHdlaWdodHMubGVuZ3RoIDwgNCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHMucHVzaCggMCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0SW5kaWNlcy5wdXNoKCAwICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgNDsgKysgaSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2VXZWlnaHRzLnB1c2goIHdlaWdodHNbIGkgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZVdlaWdodEluZGljZXMucHVzaCggd2VpZ2h0SW5kaWNlc1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBub3JtYWxJbmZvICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdldERhdGEoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgbm9ybWFsSW5mbyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmYWNlTm9ybWFscy5wdXNoKCBkYXRhWyAwIF0sIGRhdGFbIDEgXSwgZGF0YVsgMiBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWxJbmZvICYmIG1hdGVyaWFsSW5mby5tYXBwaW5nVHlwZSAhPT0gJ0FsbFNhbWUnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxJbmRleCA9IGdldERhdGEoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgbWF0ZXJpYWxJbmZvIClbIDAgXTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB1dkluZm8gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHV2SW5mby5mb3JFYWNoKCBmdW5jdGlvbiAoIHV2LCBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnZXREYXRhKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIHV2ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGZhY2VVVnNbIGkgXSA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2VVVnNbIGkgXSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZVVWc1sgaSBdLnB1c2goIGRhdGFbIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZVVWc1sgaSBdLnB1c2goIGRhdGFbIDEgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGZhY2VMZW5ndGggKys7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2YgYSBmYWNlIC0gaXQgbWF5IGhhdmUgNCBzaWRlcyB0aG91Z2hcbiAgICAgICAgICAgICAgICAvLyBpbiB3aGljaCBjYXNlIHRoZSBkYXRhIGlzIHNwbGl0IHRvIHJlcHJlc2VudCB0d28gMyBzaWRlZCBmYWNlc1xuICAgICAgICAgICAgICAgIGlmICggZW5kT2ZGYWNlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDI7IGkgPCBmYWNlTGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyLnB1c2goIHZlcnRleFBvc2l0aW9uc1sgdmVydGV4UG9zaXRpb25JbmRleGVzWyAwIF0gXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyLnB1c2goIHZlcnRleFBvc2l0aW9uc1sgdmVydGV4UG9zaXRpb25JbmRleGVzWyAxIF0gXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyLnB1c2goIHZlcnRleFBvc2l0aW9uc1sgdmVydGV4UG9zaXRpb25JbmRleGVzWyAyIF0gXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyLnB1c2goIHZlcnRleFBvc2l0aW9uc1sgdmVydGV4UG9zaXRpb25JbmRleGVzWyAoIGkgLSAxICkgKiAzIF0gXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyLnB1c2goIHZlcnRleFBvc2l0aW9uc1sgdmVydGV4UG9zaXRpb25JbmRleGVzWyAoIGkgLSAxICkgKiAzICsgMSBdIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleEJ1ZmZlci5wdXNoKCB2ZXJ0ZXhQb3NpdGlvbnNbIHZlcnRleFBvc2l0aW9uSW5kZXhlc1sgKCBpIC0gMSApICogMyArIDIgXSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIucHVzaCggdmVydGV4UG9zaXRpb25zWyB2ZXJ0ZXhQb3NpdGlvbkluZGV4ZXNbIGkgKiAzIF0gXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyLnB1c2goIHZlcnRleFBvc2l0aW9uc1sgdmVydGV4UG9zaXRpb25JbmRleGVzWyBpICogMyArIDEgXSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIucHVzaCggdmVydGV4UG9zaXRpb25zWyB2ZXJ0ZXhQb3NpdGlvbkluZGV4ZXNbIGkgKiAzICsgMiBdIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2tlbGV0b24gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgMiBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgMyBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgKCBpIC0gMSApICogNCBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgKCBpIC0gMSApICogNCArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodHNCdWZmZXIucHVzaCggZmFjZVdlaWdodHNbICggaSAtIDEgKSAqIDQgKyAyIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyAoIGkgLSAxICkgKiA0ICsgMyBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgaSAqIDQgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodHNCdWZmZXIucHVzaCggZmFjZVdlaWdodHNbIGkgKiA0ICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgaSAqIDQgKyAyIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyBpICogNCArIDMgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNJbmRpY2VzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzSW5kaWNlc0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0c0luZGljZXNCdWZmZXIucHVzaCggZmFjZVdlaWdodEluZGljZXNbIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNJbmRpY2VzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAzIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzSW5kaWNlc0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgKCBpIC0gMSApICogNCBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0c0luZGljZXNCdWZmZXIucHVzaCggZmFjZVdlaWdodEluZGljZXNbICggaSAtIDEgKSAqIDQgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzSW5kaWNlc0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgKCBpIC0gMSApICogNCArIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNJbmRpY2VzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAoIGkgLSAxICkgKiA0ICsgMyBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0c0luZGljZXNCdWZmZXIucHVzaCggZmFjZVdlaWdodEluZGljZXNbIGkgKiA0IF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzSW5kaWNlc0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgaSAqIDQgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzSW5kaWNlc0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgaSAqIDQgKyAyIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzSW5kaWNlc0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgaSAqIDQgKyAzIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY29sb3JJbmZvICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yc0J1ZmZlci5wdXNoKCBmYWNlQ29sb3JzWyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnNCdWZmZXIucHVzaCggZmFjZUNvbG9yc1sgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzQnVmZmVyLnB1c2goIGZhY2VDb2xvcnNbIDIgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yc0J1ZmZlci5wdXNoKCBmYWNlQ29sb3JzWyAoIGkgLSAxICkgKiAzIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnNCdWZmZXIucHVzaCggZmFjZUNvbG9yc1sgKCBpIC0gMSApICogMyArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yc0J1ZmZlci5wdXNoKCBmYWNlQ29sb3JzWyAoIGkgLSAxICkgKiAzICsgMiBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzQnVmZmVyLnB1c2goIGZhY2VDb2xvcnNbIGkgKiAzIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnNCdWZmZXIucHVzaCggZmFjZUNvbG9yc1sgaSAqIDMgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnNCdWZmZXIucHVzaCggZmFjZUNvbG9yc1sgaSAqIDMgKyAyIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWxJbmZvICYmIG1hdGVyaWFsSW5mby5tYXBwaW5nVHlwZSAhPT0gJ0FsbFNhbWUnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsSW5kZXhCdWZmZXIucHVzaCggbWF0ZXJpYWxJbmRleCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsSW5kZXhCdWZmZXIucHVzaCggbWF0ZXJpYWxJbmRleCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsSW5kZXhCdWZmZXIucHVzaCggbWF0ZXJpYWxJbmRleCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub3JtYWxJbmZvICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEJ1ZmZlci5wdXNoKCBmYWNlTm9ybWFsc1sgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQnVmZmVyLnB1c2goIGZhY2VOb3JtYWxzWyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxCdWZmZXIucHVzaCggZmFjZU5vcm1hbHNbIDIgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEJ1ZmZlci5wdXNoKCBmYWNlTm9ybWFsc1sgKCBpIC0gMSApICogMyBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQnVmZmVyLnB1c2goIGZhY2VOb3JtYWxzWyAoIGkgLSAxICkgKiAzICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQnVmZmVyLnB1c2goIGZhY2VOb3JtYWxzWyAoIGkgLSAxICkgKiAzICsgMiBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQnVmZmVyLnB1c2goIGZhY2VOb3JtYWxzWyBpICogMyBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQnVmZmVyLnB1c2goIGZhY2VOb3JtYWxzWyBpICogMyArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEJ1ZmZlci5wdXNoKCBmYWNlTm9ybWFsc1sgaSAqIDMgKyAyIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdXZJbmZvICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2SW5mby5mb3JFYWNoKCBmdW5jdGlvbiAoIHV2LCBqICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHV2c0J1ZmZlclsgaiBdID09PSB1bmRlZmluZWQgKSB1dnNCdWZmZXJbIGogXSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dnNCdWZmZXJbIGogXS5wdXNoKCBmYWNlVVZzWyBqIF1bIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dnNCdWZmZXJbIGogXS5wdXNoKCBmYWNlVVZzWyBqIF1bIDEgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dnNCdWZmZXJbIGogXS5wdXNoKCBmYWNlVVZzWyBqIF1bICggaSAtIDEgKSAqIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dnNCdWZmZXJbIGogXS5wdXNoKCBmYWNlVVZzWyBqIF1bICggaSAtIDEgKSAqIDIgKyAxIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZzQnVmZmVyWyBqIF0ucHVzaCggZmFjZVVWc1sgaiBdWyBpICogMiBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2c0J1ZmZlclsgaiBdLnB1c2goIGZhY2VVVnNbIGogXVsgaSAqIDIgKyAxIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcG9seWdvbkluZGV4ICsrO1xuICAgICAgICAgICAgICAgICAgICBmYWNlTGVuZ3RoID0gMDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgYXJyYXlzIGZvciB0aGUgbmV4dCBmYWNlXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleFBvc2l0aW9uSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmYWNlTm9ybWFscyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmYWNlQ29sb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZhY2VVVnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZmFjZVdlaWdodHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZmFjZVdlaWdodEluZGljZXMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB2YXIgZ2VvID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XG4gICAgICAgICAgICBnZW8ubmFtZSA9IGdlb21ldHJ5Tm9kZS5uYW1lO1xuICAgIFxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uQXR0cmlidXRlID0gbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIHZlcnRleEJ1ZmZlciwgMyApO1xuICAgIFxuICAgICAgICAgICAgcHJlVHJhbnNmb3JtLmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUoIHBvc2l0aW9uQXR0cmlidXRlICk7XG4gICAgXG4gICAgICAgICAgICBnZW8uYWRkQXR0cmlidXRlKCAncG9zaXRpb24nLCBwb3NpdGlvbkF0dHJpYnV0ZSApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBjb2xvcnNCdWZmZXIubGVuZ3RoID4gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBnZW8uYWRkQXR0cmlidXRlKCAnY29sb3InLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggY29sb3JzQnVmZmVyLCAzICkgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggc2tlbGV0b24gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgZ2VvLmFkZEF0dHJpYnV0ZSggJ3NraW5JbmRleCcsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCB3ZWlnaHRzSW5kaWNlc0J1ZmZlciwgNCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgZ2VvLmFkZEF0dHJpYnV0ZSggJ3NraW5XZWlnaHQnLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggdmVydGV4V2VpZ2h0c0J1ZmZlciwgNCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gdXNlZCBsYXRlciB0byBiaW5kIHRoZSBza2VsZXRvbiB0byB0aGUgbW9kZWxcbiAgICAgICAgICAgICAgICBnZW8uRkJYX0RlZm9ybWVyID0gc2tlbGV0b247XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIG5vcm1hbEJ1ZmZlci5sZW5ndGggPiAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBub3JtYWxBdHRyaWJ1dGUgPSBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggbm9ybWFsQnVmZmVyLCAzICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbE1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXgzKCkuZ2V0Tm9ybWFsTWF0cml4KCBwcmVUcmFuc2Zvcm0gKTtcbiAgICAgICAgICAgICAgICBub3JtYWxNYXRyaXguYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZSggbm9ybWFsQXR0cmlidXRlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgZ2VvLmFkZEF0dHJpYnV0ZSggJ25vcm1hbCcsIG5vcm1hbEF0dHJpYnV0ZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdXZzQnVmZmVyLmZvckVhY2goIGZ1bmN0aW9uICggdXZCdWZmZXIsIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gc3Vic2VxdWVudCB1diBidWZmZXJzIGFyZSBjYWxsZWQgJ3V2MScsICd1djInLCAuLi5cbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICd1dicgKyAoIGkgKyAxICkudG9TdHJpbmcoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyB0aGUgZmlyc3QgdXYgYnVmZmVyIGlzIGp1c3QgY2FsbGVkICd1didcbiAgICAgICAgICAgICAgICBpZiAoIGkgPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSAndXYnO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBnZW8uYWRkQXR0cmlidXRlKCBuYW1lLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggdXZzQnVmZmVyWyBpIF0sIDIgKSApO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBtYXRlcmlhbEluZm8gJiYgbWF0ZXJpYWxJbmZvLm1hcHBpbmdUeXBlICE9PSAnQWxsU2FtZScgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgbWF0ZXJpYWwgaW5kaWNlcyBvZiBlYWNoIHZlcnRleCBpbnRvIHJlbmRlcmluZyBncm91cHMgb24gdGhlIGdlb21ldHJ5LlxuICAgICAgICAgICAgICAgIHZhciBwcmV2TWF0ZXJpYWxJbmRleCA9IG1hdGVyaWFsSW5kZXhCdWZmZXJbIDAgXTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRleEJ1ZmZlci5mb3JFYWNoKCBmdW5jdGlvbiAoIGN1cnJlbnRJbmRleCwgaSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJyZW50SW5kZXggIT09IHByZXZNYXRlcmlhbEluZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvLmFkZEdyb3VwKCBzdGFydEluZGV4LCBpIC0gc3RhcnRJbmRleCwgcHJldk1hdGVyaWFsSW5kZXggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZNYXRlcmlhbEluZGV4ID0gY3VycmVudEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRJbmRleCA9IGk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gdGhlIGxvb3AgYWJvdmUgZG9lc24ndCBhZGQgdGhlIGxhc3QgZ3JvdXAsIGRvIHRoYXQgaGVyZS5cbiAgICAgICAgICAgICAgICBpZiAoIGdlby5ncm91cHMubGVuZ3RoID4gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RHcm91cCA9IGdlby5ncm91cHNbIGdlby5ncm91cHMubGVuZ3RoIC0gMSBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdEluZGV4ID0gbGFzdEdyb3VwLnN0YXJ0ICsgbGFzdEdyb3VwLmNvdW50O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGxhc3RJbmRleCAhPT0gbWF0ZXJpYWxJbmRleEJ1ZmZlci5sZW5ndGggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW8uYWRkR3JvdXAoIGxhc3RJbmRleCwgbWF0ZXJpYWxJbmRleEJ1ZmZlci5sZW5ndGggLSBsYXN0SW5kZXgsIHByZXZNYXRlcmlhbEluZGV4ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gY2FzZSB3aGVyZSB0aGVyZSBhcmUgbXVsdGlwbGUgbWF0ZXJpYWxzIGJ1dCB0aGUgd2hvbGUgZ2VvbWV0cnkgaXMgb25seVxuICAgICAgICAgICAgICAgIC8vIHVzaW5nIG9uZSBvZiB0aGVtXG4gICAgICAgICAgICAgICAgaWYgKCBnZW8uZ3JvdXBzLmxlbmd0aCA9PT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZ2VvLmFkZEdyb3VwKCAwLCBtYXRlcmlhbEluZGV4QnVmZmVyLmxlbmd0aCwgbWF0ZXJpYWxJbmRleEJ1ZmZlclsgMCBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGdlbztcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgIFxuICAgICAgICAvLyBQYXJzZSBub3JtYWwgZnJvbSBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnkuTGF5ZXJFbGVtZW50Tm9ybWFsIGlmIGl0IGV4aXN0c1xuICAgICAgICBmdW5jdGlvbiBnZXROb3JtYWxzKCBOb3JtYWxOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIG1hcHBpbmdUeXBlID0gTm9ybWFsTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlO1xuICAgICAgICAgICAgdmFyIHJlZmVyZW5jZVR5cGUgPSBOb3JtYWxOb2RlLlJlZmVyZW5jZUluZm9ybWF0aW9uVHlwZTtcbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBOb3JtYWxOb2RlLk5vcm1hbHMuYTtcbiAgICAgICAgICAgIHZhciBpbmRleEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgaWYgKCByZWZlcmVuY2VUeXBlID09PSAnSW5kZXhUb0RpcmVjdCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCAnTm9ybWFsSW5kZXgnIGluIE5vcm1hbE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGluZGV4QnVmZmVyID0gTm9ybWFsTm9kZS5Ob3JtYWxJbmRleC5hO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoICdOb3JtYWxzSW5kZXgnIGluIE5vcm1hbE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGluZGV4QnVmZmVyID0gTm9ybWFsTm9kZS5Ob3JtYWxzSW5kZXguYTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRhdGFTaXplOiAzLFxuICAgICAgICAgICAgICAgIGJ1ZmZlcjogYnVmZmVyLFxuICAgICAgICAgICAgICAgIGluZGljZXM6IGluZGV4QnVmZmVyLFxuICAgICAgICAgICAgICAgIG1hcHBpbmdUeXBlOiBtYXBwaW5nVHlwZSxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VUeXBlOiByZWZlcmVuY2VUeXBlXG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIFVWcyBmcm9tIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeS5MYXllckVsZW1lbnRVViBpZiBpdCBleGlzdHNcbiAgICAgICAgZnVuY3Rpb24gZ2V0VVZzKCBVVk5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbWFwcGluZ1R5cGUgPSBVVk5vZGUuTWFwcGluZ0luZm9ybWF0aW9uVHlwZTtcbiAgICAgICAgICAgIHZhciByZWZlcmVuY2VUeXBlID0gVVZOb2RlLlJlZmVyZW5jZUluZm9ybWF0aW9uVHlwZTtcbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBVVk5vZGUuVVYuYTtcbiAgICAgICAgICAgIHZhciBpbmRleEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgaWYgKCByZWZlcmVuY2VUeXBlID09PSAnSW5kZXhUb0RpcmVjdCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaW5kZXhCdWZmZXIgPSBVVk5vZGUuVVZJbmRleC5hO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkYXRhU2l6ZTogMixcbiAgICAgICAgICAgICAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICAgICAgICAgICAgICBpbmRpY2VzOiBpbmRleEJ1ZmZlcixcbiAgICAgICAgICAgICAgICBtYXBwaW5nVHlwZTogbWFwcGluZ1R5cGUsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBQYXJzZSBWZXJ0ZXggQ29sb3JzIGZyb20gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LkxheWVyRWxlbWVudENvbG9yIGlmIGl0IGV4aXN0c1xuICAgICAgICBmdW5jdGlvbiBnZXRDb2xvcnMoIENvbG9yTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBtYXBwaW5nVHlwZSA9IENvbG9yTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlO1xuICAgICAgICAgICAgdmFyIHJlZmVyZW5jZVR5cGUgPSBDb2xvck5vZGUuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlO1xuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IENvbG9yTm9kZS5Db2xvcnMuYTtcbiAgICAgICAgICAgIHZhciBpbmRleEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgaWYgKCByZWZlcmVuY2VUeXBlID09PSAnSW5kZXhUb0RpcmVjdCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaW5kZXhCdWZmZXIgPSBDb2xvck5vZGUuQ29sb3JJbmRleC5hO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkYXRhU2l6ZTogNCxcbiAgICAgICAgICAgICAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICAgICAgICAgICAgICBpbmRpY2VzOiBpbmRleEJ1ZmZlcixcbiAgICAgICAgICAgICAgICBtYXBwaW5nVHlwZTogbWFwcGluZ1R5cGUsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBQYXJzZSBtYXBwaW5nIGFuZCBtYXRlcmlhbCBkYXRhIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeS5MYXllckVsZW1lbnRNYXRlcmlhbCBpZiBpdCBleGlzdHNcbiAgICAgICAgZnVuY3Rpb24gZ2V0TWF0ZXJpYWxzKCBNYXRlcmlhbE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbWFwcGluZ1R5cGUgPSBNYXRlcmlhbE5vZGUuTWFwcGluZ0luZm9ybWF0aW9uVHlwZTtcbiAgICAgICAgICAgIHZhciByZWZlcmVuY2VUeXBlID0gTWF0ZXJpYWxOb2RlLlJlZmVyZW5jZUluZm9ybWF0aW9uVHlwZTtcbiAgICBcbiAgICAgICAgICAgIGlmICggbWFwcGluZ1R5cGUgPT09ICdOb01hcHBpbmdJbmZvcm1hdGlvbicgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNpemU6IDEsXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogWyAwIF0sXG4gICAgICAgICAgICAgICAgICAgIGluZGljZXM6IFsgMCBdLFxuICAgICAgICAgICAgICAgICAgICBtYXBwaW5nVHlwZTogJ0FsbFNhbWUnLFxuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VUeXBlOiByZWZlcmVuY2VUeXBlXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbEluZGV4QnVmZmVyID0gTWF0ZXJpYWxOb2RlLk1hdGVyaWFscy5hO1xuICAgIFxuICAgICAgICAgICAgLy8gU2luY2UgbWF0ZXJpYWxzIGFyZSBzdG9yZWQgYXMgaW5kaWNlcywgdGhlcmUncyBhIGJpdCBvZiBhIG1pc21hdGNoIGJldHdlZW4gRkJYIGFuZCB3aGF0XG4gICAgICAgICAgICAvLyB3ZSBleHBlY3QuU28gd2UgY3JlYXRlIGFuIGludGVybWVkaWF0ZSBidWZmZXIgdGhhdCBwb2ludHMgdG8gdGhlIGluZGV4IGluIHRoZSBidWZmZXIsXG4gICAgICAgICAgICAvLyBmb3IgY29uZm9ybWluZyB3aXRoIHRoZSBvdGhlciBmdW5jdGlvbnMgd2UndmUgd3JpdHRlbiBmb3Igb3RoZXIgZGF0YS5cbiAgICAgICAgICAgIHZhciBtYXRlcmlhbEluZGljZXMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IG1hdGVyaWFsSW5kZXhCdWZmZXIubGVuZ3RoOyArKyBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsSW5kaWNlcy5wdXNoKCBpICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRhdGFTaXplOiAxLFxuICAgICAgICAgICAgICAgIGJ1ZmZlcjogbWF0ZXJpYWxJbmRleEJ1ZmZlcixcbiAgICAgICAgICAgICAgICBpbmRpY2VzOiBtYXRlcmlhbEluZGljZXMsXG4gICAgICAgICAgICAgICAgbWFwcGluZ1R5cGU6IG1hcHBpbmdUeXBlLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gRnVuY3Rpb25zIHVzZSB0aGUgaW5mb09iamVjdCBhbmQgZ2l2ZW4gaW5kaWNlcyB0byByZXR1cm4gdmFsdWUgYXJyYXkgb2YgZ2VvbWV0cnkuXG4gICAgICAgIC8vIFBhcmFtZXRlcnM6XG4gICAgICAgIC8vIFx0LSBwb2x5Z29uVmVydGV4SW5kZXggLSBJbmRleCBvZiB2ZXJ0ZXggaW4gZHJhdyBvcmRlciAod2hpY2ggaW5kZXggb2YgdGhlIGluZGV4IGJ1ZmZlciByZWZlcnMgdG8gdGhpcyB2ZXJ0ZXgpLlxuICAgICAgICAvLyBcdC0gcG9seWdvbkluZGV4IC0gSW5kZXggb2YgcG9seWdvbiBpbiBnZW9tZXRyeS5cbiAgICAgICAgLy8gXHQtIHZlcnRleEluZGV4IC0gSW5kZXggb2YgdmVydGV4IGluc2lkZSB2ZXJ0ZXggYnVmZmVyICh1c2VkIGJlY2F1c2Ugc29tZSBkYXRhIHJlZmVycyB0byBvbGQgaW5kZXggYnVmZmVyIHRoYXQgd2UgZG9uJ3QgdXNlIGFueW1vcmUpLlxuICAgICAgICAvLyBcdC0gaW5mb09iamVjdDogY2FuIGJlIG1hdGVyaWFsSW5mbywgbm9ybWFsSW5mbywgVVZJbmZvIG9yIGNvbG9ySW5mb1xuICAgICAgICAvLyBJbmRleCB0eXBlOlxuICAgICAgICAvL1x0LSBEaXJlY3Q6IGluZGV4IGlzIHNhbWUgYXMgcG9seWdvblZlcnRleEluZGV4XG4gICAgICAgIC8vXHQtIEluZGV4VG9EaXJlY3Q6IGluZm9PYmplY3QgaGFzIGl0J3Mgb3duIHNldCBvZiBpbmRpY2VzXG4gICAgICAgIHZhciBkYXRhQXJyYXkgPSBbXTtcbiAgICBcbiAgICAgICAgdmFyIEdldERhdGEgPSB7XG4gICAgXG4gICAgICAgICAgICBCeVBvbHlnb25WZXJ0ZXg6IHtcbiAgICBcbiAgICAgICAgICAgICAgICBEaXJlY3Q6IGZ1bmN0aW9uICggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbSA9ICggcG9seWdvblZlcnRleEluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZSApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG8gPSAoIHBvbHlnb25WZXJ0ZXhJbmRleCAqIGluZm9PYmplY3QuZGF0YVNpemUgKSArIGluZm9PYmplY3QuZGF0YVNpemU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzbGljZSggZGF0YUFycmF5LCBpbmZvT2JqZWN0LmJ1ZmZlciwgZnJvbSwgdG8gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIEluZGV4VG9EaXJlY3Q6IGZ1bmN0aW9uICggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBpbmZvT2JqZWN0LmluZGljZXNbIHBvbHlnb25WZXJ0ZXhJbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbSA9ICggaW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0byA9ICggaW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplICkgKyBpbmZvT2JqZWN0LmRhdGFTaXplO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2xpY2UoIGRhdGFBcnJheSwgaW5mb09iamVjdC5idWZmZXIsIGZyb20sIHRvICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIEJ5UG9seWdvbjoge1xuICAgIFxuICAgICAgICAgICAgICAgIERpcmVjdDogZnVuY3Rpb24gKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGluZm9PYmplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9tID0gcG9seWdvbkluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvID0gcG9seWdvbkluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZSArIGluZm9PYmplY3QuZGF0YVNpemU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzbGljZSggZGF0YUFycmF5LCBpbmZvT2JqZWN0LmJ1ZmZlciwgZnJvbSwgdG8gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIEluZGV4VG9EaXJlY3Q6IGZ1bmN0aW9uICggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBpbmZvT2JqZWN0LmluZGljZXNbIHBvbHlnb25JbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbSA9IGluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvID0gaW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplICsgaW5mb09iamVjdC5kYXRhU2l6ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNsaWNlKCBkYXRhQXJyYXksIGluZm9PYmplY3QuYnVmZmVyLCBmcm9tLCB0byApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBCeVZlcnRpY2U6IHtcbiAgICBcbiAgICAgICAgICAgICAgICBEaXJlY3Q6IGZ1bmN0aW9uICggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbSA9ICggdmVydGV4SW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0byA9ICggdmVydGV4SW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplICkgKyBpbmZvT2JqZWN0LmRhdGFTaXplO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2xpY2UoIGRhdGFBcnJheSwgaW5mb09iamVjdC5idWZmZXIsIGZyb20sIHRvICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIEFsbFNhbWU6IHtcbiAgICBcbiAgICAgICAgICAgICAgICBJbmRleFRvRGlyZWN0OiBmdW5jdGlvbiAoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgaW5mb09iamVjdCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZyb20gPSBpbmZvT2JqZWN0LmluZGljZXNbIDAgXSAqIGluZm9PYmplY3QuZGF0YVNpemU7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0byA9IGluZm9PYmplY3QuaW5kaWNlc1sgMCBdICogaW5mb09iamVjdC5kYXRhU2l6ZSArIGluZm9PYmplY3QuZGF0YVNpemU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzbGljZSggZGF0YUFycmF5LCBpbmZvT2JqZWN0LmJ1ZmZlciwgZnJvbSwgdG8gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGdldERhdGEoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgaW5mb09iamVjdCApIHtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBHZXREYXRhWyBpbmZvT2JqZWN0Lm1hcHBpbmdUeXBlIF1bIGluZm9PYmplY3QucmVmZXJlbmNlVHlwZSBdKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGluZm9PYmplY3QgKTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBHZW5lcmF0ZSBhIE51cmJHZW9tZXRyeSBmcm9tIGEgbm9kZSBpbiBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnlcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VOdXJic0dlb21ldHJ5KCBnZW9tZXRyeU5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICBpZiAoIFRIUkVFLk5VUkJTQ3VydmUgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCAnVEhSRUUuRkJYTG9hZGVyOiBUaGUgbG9hZGVyIHJlbGllcyBvbiBUSFJFRS5OVVJCU0N1cnZlIGZvciBhbnkgbnVyYnMgcHJlc2VudCBpbiB0aGUgbW9kZWwuIE51cmJzIHdpbGwgc2hvdyB1cCBhcyBlbXB0eSBnZW9tZXRyeS4nICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIG9yZGVyID0gcGFyc2VJbnQoIGdlb21ldHJ5Tm9kZS5PcmRlciApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBpc05hTiggb3JkZXIgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCAnVEhSRUUuRkJYTG9hZGVyOiBJbnZhbGlkIE9yZGVyICVzIGdpdmVuIGZvciBnZW9tZXRyeSBJRDogJXMnLCBnZW9tZXRyeU5vZGUuT3JkZXIsIGdlb21ldHJ5Tm9kZS5pZCApO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBkZWdyZWUgPSBvcmRlciAtIDE7XG4gICAgXG4gICAgICAgICAgICB2YXIga25vdHMgPSBnZW9tZXRyeU5vZGUuS25vdFZlY3Rvci5hO1xuICAgICAgICAgICAgdmFyIGNvbnRyb2xQb2ludHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBwb2ludHNWYWx1ZXMgPSBnZW9tZXRyeU5vZGUuUG9pbnRzLmE7XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBwb2ludHNWYWx1ZXMubGVuZ3RoOyBpIDwgbDsgaSArPSA0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnRyb2xQb2ludHMucHVzaCggbmV3IFRIUkVFLlZlY3RvcjQoKS5mcm9tQXJyYXkoIHBvaW50c1ZhbHVlcywgaSApICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgc3RhcnRLbm90LCBlbmRLbm90O1xuICAgIFxuICAgICAgICAgICAgaWYgKCBnZW9tZXRyeU5vZGUuRm9ybSA9PT0gJ0Nsb3NlZCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgY29udHJvbFBvaW50cy5wdXNoKCBjb250cm9sUG9pbnRzWyAwIF0gKTtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGdlb21ldHJ5Tm9kZS5Gb3JtID09PSAnUGVyaW9kaWMnICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHN0YXJ0S25vdCA9IGRlZ3JlZTtcbiAgICAgICAgICAgICAgICBlbmRLbm90ID0ga25vdHMubGVuZ3RoIC0gMSAtIHN0YXJ0S25vdDtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBkZWdyZWU7ICsrIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xQb2ludHMucHVzaCggY29udHJvbFBvaW50c1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIGN1cnZlID0gbmV3IFRIUkVFLk5VUkJTQ3VydmUoIGRlZ3JlZSwga25vdHMsIGNvbnRyb2xQb2ludHMsIHN0YXJ0S25vdCwgZW5kS25vdCApO1xuICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gY3VydmUuZ2V0UG9pbnRzKCBjb250cm9sUG9pbnRzLmxlbmd0aCAqIDcgKTtcbiAgICBcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBuZXcgRmxvYXQzMkFycmF5KCB2ZXJ0aWNlcy5sZW5ndGggKiAzICk7XG4gICAgXG4gICAgICAgICAgICB2ZXJ0aWNlcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHZlcnRleCwgaSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2ZXJ0ZXgudG9BcnJheSggcG9zaXRpb25zLCBpICogMyApO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XG4gICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIHBvc2l0aW9ucywgMyApICk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gZ2VvbWV0cnk7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gY3JlYXRlIHRoZSBtYWluIFRIUkVFLkdyb3VwKCkgdG8gYmUgcmV0dXJuZWQgYnkgdGhlIGxvYWRlclxuICAgICAgICBmdW5jdGlvbiBwYXJzZVNjZW5lKCBGQlhUcmVlLCBjb25uZWN0aW9ucywgc2tlbGV0b25zLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxNYXAgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgc2NlbmVHcmFwaCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgIFxuICAgICAgICAgICAgdmFyIG1vZGVsTWFwID0gcGFyc2VNb2RlbHMoIEZCWFRyZWUsIHNrZWxldG9ucywgZ2VvbWV0cnlNYXAsIG1hdGVyaWFsTWFwLCBjb25uZWN0aW9ucyApO1xuICAgIFxuICAgICAgICAgICAgdmFyIG1vZGVsTm9kZXMgPSBGQlhUcmVlLk9iamVjdHMuTW9kZWw7XG4gICAgXG4gICAgICAgICAgICBtb2RlbE1hcC5mb3JFYWNoKCBmdW5jdGlvbiAoIG1vZGVsICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBtb2RlbE5vZGUgPSBtb2RlbE5vZGVzWyBtb2RlbC5JRCBdO1xuICAgICAgICAgICAgICAgIHNldExvb2tBdFByb3BlcnRpZXMoIEZCWFRyZWUsIG1vZGVsLCBtb2RlbE5vZGUsIGNvbm5lY3Rpb25zLCBzY2VuZUdyYXBoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudENvbm5lY3Rpb25zID0gY29ubmVjdGlvbnMuZ2V0KCBtb2RlbC5JRCApLnBhcmVudHM7XG4gICAgXG4gICAgICAgICAgICAgICAgcGFyZW50Q29ubmVjdGlvbnMuZm9yRWFjaCggZnVuY3Rpb24gKCBjb25uZWN0aW9uICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gbW9kZWxNYXAuZ2V0KCBjb25uZWN0aW9uLklEICk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcGFyZW50ICE9PSB1bmRlZmluZWQgKSBwYXJlbnQuYWRkKCBtb2RlbCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG1vZGVsLnBhcmVudCA9PT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc2NlbmVHcmFwaC5hZGQoIG1vZGVsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgYmluZFNrZWxldG9uKCBGQlhUcmVlLCBza2VsZXRvbnMsIGdlb21ldHJ5TWFwLCBtb2RlbE1hcCwgY29ubmVjdGlvbnMgKTtcbiAgICBcbiAgICAgICAgICAgIGFkZEFuaW1hdGlvbnMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBzY2VuZUdyYXBoICk7XG4gICAgXG4gICAgICAgICAgICBjcmVhdGVBbWJpZW50TGlnaHQoIEZCWFRyZWUsIHNjZW5lR3JhcGggKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBzY2VuZUdyYXBoO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5Nb2RlbFxuICAgICAgICBmdW5jdGlvbiBwYXJzZU1vZGVscyggRkJYVHJlZSwgc2tlbGV0b25zLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxNYXAsIGNvbm5lY3Rpb25zICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIG1vZGVsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdmFyIG1vZGVsTm9kZXMgPSBGQlhUcmVlLk9iamVjdHMuTW9kZWw7XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIG1vZGVsTm9kZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGlkID0gcGFyc2VJbnQoIG5vZGVJRCApO1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gbW9kZWxOb2Rlc1sgbm9kZUlEIF07XG4gICAgICAgICAgICAgICAgdmFyIHJlbGF0aW9uc2hpcHMgPSBjb25uZWN0aW9ucy5nZXQoIGlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gYnVpbGRTa2VsZXRvbiggcmVsYXRpb25zaGlwcywgc2tlbGV0b25zLCBpZCwgbm9kZS5hdHRyTmFtZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggISBtb2RlbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggbm9kZS5hdHRyVHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NhbWVyYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBjcmVhdGVDYW1lcmEoIEZCWFRyZWUsIHJlbGF0aW9uc2hpcHMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IGNyZWF0ZUxpZ2h0KCBGQlhUcmVlLCByZWxhdGlvbnNoaXBzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdNZXNoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IGNyZWF0ZU1lc2goIEZCWFRyZWUsIHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbE1hcCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTnVyYnNDdXJ2ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBjcmVhdGVDdXJ2ZSggcmVsYXRpb25zaGlwcywgZ2VvbWV0cnlNYXAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xpbWJOb2RlJzogLy8gdXN1YWxseSBhc3NvY2lhdGVkIHdpdGggYSBCb25lLCBob3dldmVyIGlmIGEgQm9uZSB3YXMgbm90IGNyZWF0ZWQgd2UnbGwgbWFrZSBhIEdyb3VwIGluc3RlYWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ051bGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLm5hbWUgPSBUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcuc2FuaXRpemVOb2RlTmFtZSggbm9kZS5hdHRyTmFtZSApO1xuICAgICAgICAgICAgICAgICAgICBtb2RlbC5JRCA9IGlkO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBzZXRNb2RlbFRyYW5zZm9ybXMoIEZCWFRyZWUsIG1vZGVsLCBub2RlICk7XG4gICAgICAgICAgICAgICAgbW9kZWxNYXAuc2V0KCBpZCwgbW9kZWwgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBtb2RlbE1hcDtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBidWlsZFNrZWxldG9uKCByZWxhdGlvbnNoaXBzLCBza2VsZXRvbnMsIGlkLCBuYW1lICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGJvbmUgPSBudWxsO1xuICAgIFxuICAgICAgICAgICAgcmVsYXRpb25zaGlwcy5wYXJlbnRzLmZvckVhY2goIGZ1bmN0aW9uICggcGFyZW50ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBJRCBpbiBza2VsZXRvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBza2VsZXRvbiA9IHNrZWxldG9uc1sgSUQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc2tlbGV0b24ucmF3Qm9uZXMuZm9yRWFjaCggZnVuY3Rpb24gKCByYXdCb25lLCBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCByYXdCb25lLklEID09PSBwYXJlbnQuSUQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkJvbmUgPSBib25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmUgPSBuZXcgVEhSRUUuQm9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmUubWF0cml4V29ybGQuY29weSggcmF3Qm9uZS50cmFuc2Zvcm1MaW5rICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG5hbWUgYW5kIGlkIGhlcmUgLSBvdGhlcndpc2UgaW4gY2FzZXMgd2hlcmUgXCJzdWJCb25lXCIgaXMgY3JlYXRlZCBpdCB3aWxsIG5vdCBoYXZlIGEgbmFtZSAvIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZS5uYW1lID0gVEhSRUUuUHJvcGVydHlCaW5kaW5nLnNhbml0aXplTm9kZU5hbWUoIG5hbWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lLklEID0gaWQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tlbGV0b24uYm9uZXNbIGkgXSA9IGJvbmU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gY2FzZXMgd2hlcmUgYSBib25lIGlzIHNoYXJlZCBiZXR3ZWVuIG11bHRpcGxlIG1lc2hlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGR1cGxpY2F0ZSB0aGUgYm9uZSBoZXJlIGFuZCBhbmQgaXQgYXMgYSBjaGlsZCBvZiB0aGUgZmlyc3QgYm9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc3ViQm9uZSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZS5hZGQoIHN1YkJvbmUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gYm9uZTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBjcmVhdGUgYSBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSBvciBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmFcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ2FtZXJhKCBGQlhUcmVlLCByZWxhdGlvbnNoaXBzICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIG1vZGVsO1xuICAgICAgICAgICAgdmFyIGNhbWVyYUF0dHJpYnV0ZTtcbiAgICBcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IEZCWFRyZWUuT2JqZWN0cy5Ob2RlQXR0cmlidXRlWyBjaGlsZC5JRCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggYXR0ciAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYW1lcmFBdHRyaWJ1dGUgPSBhdHRyO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIGlmICggY2FtZXJhQXR0cmlidXRlID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbW9kZWwgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSAwO1xuICAgICAgICAgICAgICAgIGlmICggY2FtZXJhQXR0cmlidXRlLkNhbWVyYVByb2plY3Rpb25UeXBlICE9PSB1bmRlZmluZWQgJiYgY2FtZXJhQXR0cmlidXRlLkNhbWVyYVByb2plY3Rpb25UeXBlLnZhbHVlID09PSAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gMTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5lYXJDbGlwcGluZ1BsYW5lID0gMTtcbiAgICAgICAgICAgICAgICBpZiAoIGNhbWVyYUF0dHJpYnV0ZS5OZWFyUGxhbmUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbmVhckNsaXBwaW5nUGxhbmUgPSBjYW1lcmFBdHRyaWJ1dGUuTmVhclBsYW5lLnZhbHVlIC8gMTAwMDtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGZhckNsaXBwaW5nUGxhbmUgPSAxMDAwO1xuICAgICAgICAgICAgICAgIGlmICggY2FtZXJhQXR0cmlidXRlLkZhclBsYW5lICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZhckNsaXBwaW5nUGxhbmUgPSBjYW1lcmFBdHRyaWJ1dGUuRmFyUGxhbmUudmFsdWUgLyAxMDAwO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggY2FtZXJhQXR0cmlidXRlLkFzcGVjdFdpZHRoICE9PSB1bmRlZmluZWQgJiYgY2FtZXJhQXR0cmlidXRlLkFzcGVjdEhlaWdodCAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IGNhbWVyYUF0dHJpYnV0ZS5Bc3BlY3RXaWR0aC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gY2FtZXJhQXR0cmlidXRlLkFzcGVjdEhlaWdodC52YWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0O1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBmb3YgPSA0NTtcbiAgICAgICAgICAgICAgICBpZiAoIGNhbWVyYUF0dHJpYnV0ZS5GaWVsZE9mVmlldyAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3YgPSBjYW1lcmFBdHRyaWJ1dGUuRmllbGRPZlZpZXcudmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBmb2NhbExlbmd0aCA9IGNhbWVyYUF0dHJpYnV0ZS5Gb2NhbExlbmd0aCA/IGNhbWVyYUF0dHJpYnV0ZS5Gb2NhbExlbmd0aC52YWx1ZSA6IG51bGw7XG4gICAgXG4gICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiAvLyBQZXJzcGVjdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIGZvdiwgYXNwZWN0LCBuZWFyQ2xpcHBpbmdQbGFuZSwgZmFyQ2xpcHBpbmdQbGFuZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmb2NhbExlbmd0aCAhPT0gbnVsbCApIG1vZGVsLnNldEZvY2FsTGVuZ3RoKCBmb2NhbExlbmd0aCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogLy8gT3J0aG9ncmFwaGljXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoIC0gd2lkdGggLyAyLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIsIC0gaGVpZ2h0IC8gMiwgbmVhckNsaXBwaW5nUGxhbmUsIGZhckNsaXBwaW5nUGxhbmUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiBVbmtub3duIGNhbWVyYSB0eXBlICcgKyB0eXBlICsgJy4nICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIENyZWF0ZSBhIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQsIFRIUkVFLlBvaW50TGlnaHQgb3IgVEhSRUUuU3BvdExpZ2h0XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUxpZ2h0KCBGQlhUcmVlLCByZWxhdGlvbnNoaXBzICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIG1vZGVsO1xuICAgICAgICAgICAgdmFyIGxpZ2h0QXR0cmlidXRlO1xuICAgIFxuICAgICAgICAgICAgcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5mb3JFYWNoKCBmdW5jdGlvbiAoIGNoaWxkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhdHRyID0gRkJYVHJlZS5PYmplY3RzLk5vZGVBdHRyaWJ1dGVbIGNoaWxkLklEIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBhdHRyICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0QXR0cmlidXRlID0gYXR0cjtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGxpZ2h0QXR0cmlidXRlID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbW9kZWwgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHR5cGU7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gTGlnaHRUeXBlIGNhbiBiZSB1bmRlZmluZWQgZm9yIFBvaW50IGxpZ2h0c1xuICAgICAgICAgICAgICAgIGlmICggbGlnaHRBdHRyaWJ1dGUuTGlnaHRUeXBlID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAwO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSBsaWdodEF0dHJpYnV0ZS5MaWdodFR5cGUudmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IDB4ZmZmZmZmO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbGlnaHRBdHRyaWJ1dGUuQ29sb3IgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKS5mcm9tQXJyYXkoIGxpZ2h0QXR0cmlidXRlLkNvbG9yLnZhbHVlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBpbnRlbnNpdHkgPSAoIGxpZ2h0QXR0cmlidXRlLkludGVuc2l0eSA9PT0gdW5kZWZpbmVkICkgPyAxIDogbGlnaHRBdHRyaWJ1dGUuSW50ZW5zaXR5LnZhbHVlIC8gMTAwO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGxpZ2h0IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgaWYgKCBsaWdodEF0dHJpYnV0ZS5DYXN0TGlnaHRPbk9iamVjdCAhPT0gdW5kZWZpbmVkICYmIGxpZ2h0QXR0cmlidXRlLkNhc3RMaWdodE9uT2JqZWN0LnZhbHVlID09PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpbnRlbnNpdHkgPSAwO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSAwO1xuICAgICAgICAgICAgICAgIGlmICggbGlnaHRBdHRyaWJ1dGUuRmFyQXR0ZW51YXRpb25FbmQgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBsaWdodEF0dHJpYnV0ZS5FbmFibGVGYXJBdHRlbnVhdGlvbiAhPT0gdW5kZWZpbmVkICYmIGxpZ2h0QXR0cmlidXRlLkVuYWJsZUZhckF0dGVudWF0aW9uLnZhbHVlID09PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSAwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBsaWdodEF0dHJpYnV0ZS5GYXJBdHRlbnVhdGlvbkVuZC52YWx1ZSAvIDEwMDA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogY291bGQgdGhpcyBiZSBjYWxjdWxhdGVkIGxpbmVhcmx5IGZyb20gRmFyQXR0ZW51YXRpb25TdGFydCB0byBGYXJBdHRlbnVhdGlvbkVuZD9cbiAgICAgICAgICAgICAgICB2YXIgZGVjYXkgPSAxO1xuICAgIFxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIHR5cGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogLy8gUG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoIGNvbG9yLCBpbnRlbnNpdHksIGRpc3RhbmNlLCBkZWNheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogLy8gRGlyZWN0aW9uYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoIGNvbG9yLCBpbnRlbnNpdHkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IC8vIFNwb3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IE1hdGguUEkgLyAzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBsaWdodEF0dHJpYnV0ZS5Jbm5lckFuZ2xlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKCBsaWdodEF0dHJpYnV0ZS5Jbm5lckFuZ2xlLnZhbHVlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVudW1icmEgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBsaWdodEF0dHJpYnV0ZS5PdXRlckFuZ2xlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogdGhpcyBpcyBub3QgY29ycmVjdCAtIEZCWCBjYWxjdWxhdGVzIG91dGVyIGFuZCBpbm5lciBhbmdsZSBpbiBkZWdyZWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBPdXRlckFuZ2xlID4gSW5uZXJBbmdsZSAmJiBPdXRlckFuZ2xlIDw9IE1hdGguUElcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGlsZSB0aHJlZS5qcyB1c2VzIGEgcGVudW1icmEgYmV0d2VlbiAoMCwgMSkgdG8gYXR0ZW51YXRlIHRoZSBpbm5lciBhbmdsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbnVtYnJhID0gVEhSRUUuTWF0aC5kZWdUb1JhZCggbGlnaHRBdHRyaWJ1dGUuT3V0ZXJBbmdsZS52YWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbnVtYnJhID0gTWF0aC5tYXgoIHBlbnVtYnJhLCAxICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5TcG90TGlnaHQoIGNvbG9yLCBpbnRlbnNpdHksIGRpc3RhbmNlLCBhbmdsZSwgcGVudW1icmEsIGRlY2F5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogVW5rbm93biBsaWdodCB0eXBlICcgKyBsaWdodEF0dHJpYnV0ZS5MaWdodFR5cGUudmFsdWUgKyAnLCBkZWZhdWx0aW5nIHRvIGEgVEhSRUUuUG9pbnRMaWdodC4nICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KCBjb2xvciwgaW50ZW5zaXR5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBsaWdodEF0dHJpYnV0ZS5DYXN0U2hhZG93cyAhPT0gdW5kZWZpbmVkICYmIGxpZ2h0QXR0cmlidXRlLkNhc3RTaGFkb3dzLnZhbHVlID09PSAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5jYXN0U2hhZG93ID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTWVzaCggRkJYVHJlZSwgcmVsYXRpb25zaGlwcywgZ2VvbWV0cnlNYXAsIG1hdGVyaWFsTWFwICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIG1vZGVsO1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IG51bGw7XG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWxzID0gW107XG4gICAgXG4gICAgICAgICAgICAvLyBnZXQgZ2VvbWV0cnkgYW5kIG1hdGVyaWFscyhzKSBmcm9tIGNvbm5lY3Rpb25zXG4gICAgICAgICAgICByZWxhdGlvbnNoaXBzLmNoaWxkcmVuLmZvckVhY2goIGZ1bmN0aW9uICggY2hpbGQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBnZW9tZXRyeU1hcC5oYXMoIGNoaWxkLklEICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnlNYXAuZ2V0KCBjaGlsZC5JRCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsTWFwLmhhcyggY2hpbGQuSUQgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxzLnB1c2goIG1hdGVyaWFsTWFwLmdldCggY2hpbGQuSUQgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIGlmICggbWF0ZXJpYWxzLmxlbmd0aCA+IDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbHM7XG4gICAgXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBtYXRlcmlhbHMubGVuZ3RoID4gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG1hdGVyaWFsc1sgMCBdO1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCggeyBjb2xvcjogMHhjY2NjY2MgfSApO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFscy5wdXNoKCBtYXRlcmlhbCApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCAnY29sb3InIGluIGdlb21ldHJ5LmF0dHJpYnV0ZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxzLmZvckVhY2goIGZ1bmN0aW9uICggbWF0ZXJpYWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnZlcnRleENvbG9ycyA9IFRIUkVFLlZlcnRleENvbG9ycztcbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIGdlb21ldHJ5LkZCWF9EZWZvcm1lciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbHMuZm9yRWFjaCggZnVuY3Rpb24gKCBtYXRlcmlhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2tpbm5pbmcgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5Ta2lubmVkTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUN1cnZlKCByZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU1hcCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4ucmVkdWNlKCBmdW5jdGlvbiAoIGdlbywgY2hpbGQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBnZW9tZXRyeU1hcC5oYXMoIGNoaWxkLklEICkgKSBnZW8gPSBnZW9tZXRyeU1hcC5nZXQoIGNoaWxkLklEICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdlbztcbiAgICBcbiAgICAgICAgICAgIH0sIG51bGwgKTtcbiAgICBcbiAgICAgICAgICAgIC8vIEZCWCBkb2VzIG5vdCBsaXN0IG1hdGVyaWFscyBmb3IgTnVyYnMgbGluZXMsIHNvIHdlJ2xsIGp1c3QgcHV0IG91ciBvd24gaW4gaGVyZS5cbiAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCggeyBjb2xvcjogMHgzMzAwZmYsIGxpbmV3aWR0aDogMSB9ICk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLkxpbmUoIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIGFtYmllbnQgY29sb3IgaW4gRkJYVHJlZS5HbG9iYWxTZXR0aW5ncyAtIGlmIGl0J3Mgbm90IHNldCB0byBibGFjayAoZGVmYXVsdCksIGNyZWF0ZSBhbiBhbWJpZW50IGxpZ2h0XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFtYmllbnRMaWdodCggRkJYVHJlZSwgc2NlbmVHcmFwaCApIHtcbiAgICBcbiAgICAgICAgICAgIGlmICggJ0dsb2JhbFNldHRpbmdzJyBpbiBGQlhUcmVlICYmICdBbWJpZW50Q29sb3InIGluIEZCWFRyZWUuR2xvYmFsU2V0dGluZ3MgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGFtYmllbnRDb2xvciA9IEZCWFRyZWUuR2xvYmFsU2V0dGluZ3MuQW1iaWVudENvbG9yLnZhbHVlO1xuICAgICAgICAgICAgICAgIHZhciByID0gYW1iaWVudENvbG9yWyAwIF07XG4gICAgICAgICAgICAgICAgdmFyIGcgPSBhbWJpZW50Q29sb3JbIDEgXTtcbiAgICAgICAgICAgICAgICB2YXIgYiA9IGFtYmllbnRDb2xvclsgMiBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggciAhPT0gMCB8fCBnICE9PSAwIHx8IGIgIT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IG5ldyBUSFJFRS5Db2xvciggciwgZywgYiApO1xuICAgICAgICAgICAgICAgICAgICBzY2VuZUdyYXBoLmFkZCggbmV3IFRIUkVFLkFtYmllbnRMaWdodCggY29sb3IsIDEgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBzZXRMb29rQXRQcm9wZXJ0aWVzKCBGQlhUcmVlLCBtb2RlbCwgbW9kZWxOb2RlLCBjb25uZWN0aW9ucywgc2NlbmVHcmFwaCApIHtcbiAgICBcbiAgICAgICAgICAgIGlmICggJ0xvb2tBdFByb3BlcnR5JyBpbiBtb2RlbE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gY29ubmVjdGlvbnMuZ2V0KCBtb2RlbC5JRCApLmNoaWxkcmVuO1xuICAgIFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goIGZ1bmN0aW9uICggY2hpbGQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQucmVsYXRpb25zaGlwID09PSAnTG9va0F0UHJvcGVydHknICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvb2tBdFRhcmdldCA9IEZCWFRyZWUuT2JqZWN0cy5Nb2RlbFsgY2hpbGQuSUQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJ0xjbF9UcmFuc2xhdGlvbicgaW4gbG9va0F0VGFyZ2V0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBsb29rQXRUYXJnZXQuTGNsX1RyYW5zbGF0aW9uLnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERpcmVjdGlvbmFsTGlnaHQsIFNwb3RMaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbW9kZWwudGFyZ2V0ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLnRhcmdldC5wb3NpdGlvbi5mcm9tQXJyYXkoIHBvcyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZUdyYXBoLmFkZCggbW9kZWwudGFyZ2V0ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gQ2FtZXJhcyBhbmQgb3RoZXIgT2JqZWN0M0RzXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLmxvb2tBdCggbmV3IFRIUkVFLlZlY3RvcjMoKS5mcm9tQXJyYXkoIHBvcyApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIHBhcnNlIHRoZSBtb2RlbCBub2RlIGZvciB0cmFuc2Zvcm0gZGV0YWlscyBhbmQgYXBwbHkgdGhlbSB0byB0aGUgbW9kZWxcbiAgICAgICAgZnVuY3Rpb24gc2V0TW9kZWxUcmFuc2Zvcm1zKCBGQlhUcmVlLCBtb2RlbCwgbW9kZWxOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgLy8gaHR0cDovL2hlbHAuYXV0b2Rlc2suY29tL3ZpZXcvRkJYLzIwMTcvRU5VLz9ndWlkPV9fY3BwX3JlZl9jbGFzc19mYnhfZXVsZXJfaHRtbFxuICAgICAgICAgICAgaWYgKCAnUm90YXRpb25PcmRlcicgaW4gbW9kZWxOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBlbnVtcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgJ1hZWicsIC8vIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgJ1haWScsXG4gICAgICAgICAgICAgICAgICAgICdZWlgnLFxuICAgICAgICAgICAgICAgICAgICAnWlhZJyxcbiAgICAgICAgICAgICAgICAgICAgJ1lYWicsXG4gICAgICAgICAgICAgICAgICAgICdaWVgnLFxuICAgICAgICAgICAgICAgICAgICAnU3BoZXJpY1hZWicsXG4gICAgICAgICAgICAgICAgXTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUludCggbW9kZWxOb2RlLlJvdGF0aW9uT3JkZXIudmFsdWUsIDEwICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSA+IDAgJiYgdmFsdWUgPCA2ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBtb2RlbC5yb3RhdGlvbi5vcmRlciA9IGVudW1zWyB2YWx1ZSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiBFdWxlciBvcmRlciBvdGhlciB0aGFuIFhZWiBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCwgc28ganVzdCBkaXNwbGF5IGEgd2FybmluZyBmb3Igbm93XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogdW5zdXBwb3J0ZWQgRXVsZXIgT3JkZXI6ICVzLiBDdXJyZW50bHkgb25seSBYWVogb3JkZXIgaXMgc3VwcG9ydGVkLiBBbmltYXRpb25zIGFuZCByb3RhdGlvbnMgbWF5IGJlIGluY29ycmVjdC4nLCBlbnVtc1sgdmFsdWUgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHZhbHVlID09PSA2ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IHVuc3VwcG9ydGVkIEV1bGVyIE9yZGVyOiBTcGhlcmljYWwgWFlaLiBBbmltYXRpb25zIGFuZCByb3RhdGlvbnMgbWF5IGJlIGluY29ycmVjdC4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCAnTGNsX1RyYW5zbGF0aW9uJyBpbiBtb2RlbE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbW9kZWwucG9zaXRpb24uZnJvbUFycmF5KCBtb2RlbE5vZGUuTGNsX1RyYW5zbGF0aW9uLnZhbHVlICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoICdMY2xfUm90YXRpb24nIGluIG1vZGVsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcm90YXRpb24gPSBtb2RlbE5vZGUuTGNsX1JvdGF0aW9uLnZhbHVlLm1hcCggVEhSRUUuTWF0aC5kZWdUb1JhZCApO1xuICAgICAgICAgICAgICAgIHJvdGF0aW9uLnB1c2goICdaWVgnICk7XG4gICAgICAgICAgICAgICAgbW9kZWwucm90YXRpb24uZnJvbUFycmF5KCByb3RhdGlvbiApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCAnTGNsX1NjYWxpbmcnIGluIG1vZGVsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtb2RlbC5zY2FsZS5mcm9tQXJyYXkoIG1vZGVsTm9kZS5MY2xfU2NhbGluZy52YWx1ZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCAnUHJlUm90YXRpb24nIGluIG1vZGVsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBtb2RlbE5vZGUuUHJlUm90YXRpb24udmFsdWUubWFwKCBUSFJFRS5NYXRoLmRlZ1RvUmFkICk7XG4gICAgICAgICAgICAgICAgYXJyYXlbIDMgXSA9ICdaWVgnO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwcmVSb3RhdGlvbnMgPSBuZXcgVEhSRUUuRXVsZXIoKS5mcm9tQXJyYXkoIGFycmF5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcHJlUm90YXRpb25zID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoIHByZVJvdGF0aW9ucyApO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Um90YXRpb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21FdWxlciggbW9kZWwucm90YXRpb24gKTtcbiAgICAgICAgICAgICAgICBwcmVSb3RhdGlvbnMubXVsdGlwbHkoIGN1cnJlbnRSb3RhdGlvbiApO1xuICAgICAgICAgICAgICAgIG1vZGVsLnJvdGF0aW9uLnNldEZyb21RdWF0ZXJuaW9uKCBwcmVSb3RhdGlvbnMsICdaWVgnICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gYmluZFNrZWxldG9uKCBGQlhUcmVlLCBza2VsZXRvbnMsIGdlb21ldHJ5TWFwLCBtb2RlbE1hcCwgY29ubmVjdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgYmluZE1hdHJpY2VzID0gcGFyc2VQb3NlTm9kZXMoIEZCWFRyZWUgKTtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBJRCBpbiBza2VsZXRvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHNrZWxldG9uID0gc2tlbGV0b25zWyBJRCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRzID0gY29ubmVjdGlvbnMuZ2V0KCBwYXJzZUludCggc2tlbGV0b24uSUQgKSApLnBhcmVudHM7XG4gICAgXG4gICAgICAgICAgICAgICAgcGFyZW50cy5mb3JFYWNoKCBmdW5jdGlvbiAoIHBhcmVudCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBnZW9tZXRyeU1hcC5oYXMoIHBhcmVudC5JRCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlb0lEID0gcGFyZW50LklEO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlb1JlbGF0aW9uc2hpcHMgPSBjb25uZWN0aW9ucy5nZXQoIGdlb0lEICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9SZWxhdGlvbnNoaXBzLnBhcmVudHMuZm9yRWFjaCggZnVuY3Rpb24gKCBnZW9Db25uUGFyZW50ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbW9kZWxNYXAuaGFzKCBnZW9Db25uUGFyZW50LklEICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IG1vZGVsTWFwLmdldCggZ2VvQ29ublBhcmVudC5JRCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5iaW5kKCBuZXcgVEhSRUUuU2tlbGV0b24oIHNrZWxldG9uLmJvbmVzICksIGJpbmRNYXRyaWNlc1sgZ2VvQ29ublBhcmVudC5JRCBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlUG9zZU5vZGVzKCBGQlhUcmVlICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGJpbmRNYXRyaWNlcyA9IHt9O1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnUG9zZScgaW4gRkJYVHJlZS5PYmplY3RzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBCaW5kUG9zZU5vZGUgPSBGQlhUcmVlLk9iamVjdHMuUG9zZTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIEJpbmRQb3NlTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBCaW5kUG9zZU5vZGVbIG5vZGVJRCBdLmF0dHJUeXBlID09PSAnQmluZFBvc2UnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2VOb2RlcyA9IEJpbmRQb3NlTm9kZVsgbm9kZUlEIF0uUG9zZU5vZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIEFycmF5LmlzQXJyYXkoIHBvc2VOb2RlcyApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2VOb2Rlcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHBvc2VOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kTWF0cmljZXNbIHBvc2VOb2RlLk5vZGUgXSA9IG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KCBwb3NlTm9kZS5NYXRyaXguYSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZE1hdHJpY2VzWyBwb3NlTm9kZXMuTm9kZSBdID0gbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkoIHBvc2VOb2Rlcy5NYXRyaXguYSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGJpbmRNYXRyaWNlcztcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBwYXJzZUFuaW1hdGlvbnMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zICkge1xuICAgIFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIGFjdHVhbCB0cmFuc2Zvcm1hdGlvbiBkYXRhIGlzIHN0b3JlZCBpbiBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmUsXG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIHVuZGVmaW5lZCB3ZSBjYW4gc2FmZWx5IGFzc3VtZSB0aGVyZSBhcmUgbm8gYW5pbWF0aW9uc1xuICAgICAgICAgICAgaWYgKCBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmUgPT09IHVuZGVmaW5lZCApIHJldHVybiB1bmRlZmluZWQ7XG4gICAgXG4gICAgICAgICAgICB2YXIgY3VydmVOb2Rlc01hcCA9IHBhcnNlQW5pbWF0aW9uQ3VydmVOb2RlcyggRkJYVHJlZSApO1xuICAgIFxuICAgICAgICAgICAgcGFyc2VBbmltYXRpb25DdXJ2ZXMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBjdXJ2ZU5vZGVzTWFwICk7XG4gICAgXG4gICAgICAgICAgICB2YXIgbGF5ZXJzTWFwID0gcGFyc2VBbmltYXRpb25MYXllcnMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBjdXJ2ZU5vZGVzTWFwICk7XG4gICAgICAgICAgICB2YXIgcmF3Q2xpcHMgPSBwYXJzZUFuaW1TdGFja3MoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBsYXllcnNNYXAgKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiByYXdDbGlwcztcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBwYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmVOb2RlXG4gICAgICAgIC8vIGVhY2ggQW5pbWF0aW9uQ3VydmVOb2RlIGhvbGRzIGRhdGEgZm9yIGFuIGFuaW1hdGlvbiB0cmFuc2Zvcm0gZm9yIGEgbW9kZWwgKGUuZy4gbGVmdCBhcm0gcm90YXRpb24gKVxuICAgICAgICAvLyBhbmQgaXMgcmVmZXJlbmNlZCBieSBhbiBBbmltYXRpb25MYXllclxuICAgICAgICBmdW5jdGlvbiBwYXJzZUFuaW1hdGlvbkN1cnZlTm9kZXMoIEZCWFRyZWUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcmF3Q3VydmVOb2RlcyA9IEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZU5vZGU7XG4gICAgXG4gICAgICAgICAgICB2YXIgY3VydmVOb2Rlc01hcCA9IG5ldyBNYXAoKTtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gcmF3Q3VydmVOb2RlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcmF3Q3VydmVOb2RlID0gcmF3Q3VydmVOb2Rlc1sgbm9kZUlEIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCByYXdDdXJ2ZU5vZGUuYXR0ck5hbWUubWF0Y2goIC9TfFJ8VC8gKSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnZlTm9kZSA9IHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByYXdDdXJ2ZU5vZGUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiByYXdDdXJ2ZU5vZGUuYXR0ck5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJ2ZXM6IHt9LFxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjdXJ2ZU5vZGVzTWFwLnNldCggY3VydmVOb2RlLmlkLCBjdXJ2ZU5vZGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gY3VydmVOb2Rlc01hcDtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBwYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmUgYW5kIGNvbm5lY3QgdGhlbSB1cCB0b1xuICAgICAgICAvLyBwcmV2aW91c2x5IHBhcnNlZCBBbmltYXRpb25DdXJ2ZU5vZGVzLiBFYWNoIEFuaW1hdGlvbkN1cnZlIGhvbGRzIGRhdGEgZm9yIGEgc2luZ2xlIGFuaW1hdGVkXG4gICAgICAgIC8vIGF4aXMgKCBlLmcuIHRpbWVzIGFuZCB2YWx1ZXMgb2YgeCByb3RhdGlvbilcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VBbmltYXRpb25DdXJ2ZXMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBjdXJ2ZU5vZGVzTWFwICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHJhd0N1cnZlcyA9IEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZTtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gcmF3Q3VydmVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb25DdXJ2ZSA9IHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJhd0N1cnZlc1sgbm9kZUlEIF0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzOiByYXdDdXJ2ZXNbIG5vZGVJRCBdLktleVRpbWUuYS5tYXAoIGNvbnZlcnRGQlhUaW1lVG9TZWNvbmRzICksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogcmF3Q3VydmVzWyBub2RlSUQgXS5LZXlWYWx1ZUZsb2F0LmEsXG4gICAgXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcmVsYXRpb25zaGlwcyA9IGNvbm5lY3Rpb25zLmdldCggYW5pbWF0aW9uQ3VydmUuaWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHJlbGF0aW9uc2hpcHMgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbkN1cnZlSUQgPSByZWxhdGlvbnNoaXBzLnBhcmVudHNbIDAgXS5JRDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbkN1cnZlUmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwcy5wYXJlbnRzWyAwIF0ucmVsYXRpb25zaGlwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXhpcyA9ICcnO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGFuaW1hdGlvbkN1cnZlUmVsYXRpb25zaGlwLm1hdGNoKCAvWC8gKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMgPSAneCc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGFuaW1hdGlvbkN1cnZlUmVsYXRpb25zaGlwLm1hdGNoKCAvWS8gKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMgPSAneSc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGFuaW1hdGlvbkN1cnZlUmVsYXRpb25zaGlwLm1hdGNoKCAvWi8gKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMgPSAneic7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBjdXJ2ZU5vZGVzTWFwLmdldCggYW5pbWF0aW9uQ3VydmVJRCApLmN1cnZlc1sgYXhpcyBdID0gYW5pbWF0aW9uQ3VydmU7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25MYXllci4gRWFjaCBsYXllcnMgaG9sZHMgcmVmZXJlbmNlc1xuICAgICAgICAvLyB0byB2YXJpb3VzIEFuaW1hdGlvbkN1cnZlTm9kZXMgYW5kIGlzIHJlZmVyZW5jZWQgYnkgYW4gQW5pbWF0aW9uU3RhY2sgbm9kZVxuICAgICAgICAvLyBub3RlOiB0aGVvcmV0aWNhbGx5IGEgc3RhY2sgY2FuIG11bHRpcGxlIGxheWVycywgaG93ZXZlciBpbiBwcmFjdGljZSB0aGVyZSBhbHdheXMgc2VlbXMgdG8gYmUgb25lIHBlciBzdGFja1xuICAgICAgICBmdW5jdGlvbiBwYXJzZUFuaW1hdGlvbkxheWVycyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIGN1cnZlTm9kZXNNYXAgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcmF3TGF5ZXJzID0gRkJYVHJlZS5PYmplY3RzLkFuaW1hdGlvbkxheWVyO1xuICAgIFxuICAgICAgICAgICAgdmFyIGxheWVyc01hcCA9IG5ldyBNYXAoKTtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gcmF3TGF5ZXJzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsYXllckN1cnZlTm9kZXMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY29ubmVjdGlvbiA9IGNvbm5lY3Rpb25zLmdldCggcGFyc2VJbnQoIG5vZGVJRCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBjb25uZWN0aW9uICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbCB0aGUgYW5pbWF0aW9uQ3VydmVOb2RlcyB1c2VkIGluIHRoZSBsYXllclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBjb25uZWN0aW9uLmNoaWxkcmVuO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKCBmdW5jdGlvbiAoIGNoaWxkLCBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJ2ZU5vZGVzTWFwLmhhcyggY2hpbGQuSUQgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VydmVOb2RlID0gY3VydmVOb2Rlc01hcC5nZXQoIGNoaWxkLklEICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgdGhhdCB0aGUgY3VydmVzIGFyZSBkZWZpbmVkIGZvciBhdCBsZWFzdCBvbmUgYXhpcywgb3RoZXJ3aXNlIGlnbm9yZSB0aGUgY3VydmVOb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJ2ZU5vZGUuY3VydmVzLnggIT09IHVuZGVmaW5lZCB8fCBjdXJ2ZU5vZGUuY3VydmVzLnkgIT09IHVuZGVmaW5lZCB8fCBjdXJ2ZU5vZGUuY3VydmVzLnogIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBsYXllckN1cnZlTm9kZXNbIGkgXSA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGVsSUQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5nZXQoIGNoaWxkLklEICkucGFyZW50cy5mb3JFYWNoKCBmdW5jdGlvbiAoIHBhcmVudCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmVudC5yZWxhdGlvbnNoaXAgIT09IHVuZGVmaW5lZCApIG1vZGVsSUQgPSBwYXJlbnQuSUQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmF3TW9kZWwgPSBGQlhUcmVlLk9iamVjdHMuTW9kZWxbIG1vZGVsSUQudG9TdHJpbmcoKSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxOYW1lOiBUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcuc2FuaXRpemVOb2RlTmFtZSggcmF3TW9kZWwuYXR0ck5hbWUgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsUG9zaXRpb246IFsgMCwgMCwgMCBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxSb3RhdGlvbjogWyAwLCAwLCAwIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFNjYWxlOiBbIDEsIDEsIDEgXSxcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICdMY2xfVHJhbnNsYXRpb24nIGluIHJhd01vZGVsICkgbm9kZS5pbml0aWFsUG9zaXRpb24gPSByYXdNb2RlbC5MY2xfVHJhbnNsYXRpb24udmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICdMY2xfUm90YXRpb24nIGluIHJhd01vZGVsICkgbm9kZS5pbml0aWFsUm90YXRpb24gPSByYXdNb2RlbC5MY2xfUm90YXRpb24udmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICdMY2xfU2NhbGluZycgaW4gcmF3TW9kZWwgKSBub2RlLmluaXRpYWxTY2FsZSA9IHJhd01vZGVsLkxjbF9TY2FsaW5nLnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGFuaW1hdGVkIG1vZGVsIGlzIHByZSByb3RhdGVkLCB3ZSdsbCBoYXZlIHRvIGFwcGx5IHRoZSBwcmUgcm90YXRpb25zIHRvIGV2ZXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmltYXRpb24gdmFsdWUgYXMgd2VsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAnUHJlUm90YXRpb24nIGluIHJhd01vZGVsICkgbm9kZS5wcmVSb3RhdGlvbnMgPSByYXdNb2RlbC5QcmVSb3RhdGlvbi52YWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyQ3VydmVOb2Rlc1sgaSBdID0gbm9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllckN1cnZlTm9kZXNbIGkgXVsgY3VydmVOb2RlLmF0dHIgXSA9IGN1cnZlTm9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzTWFwLnNldCggcGFyc2VJbnQoIG5vZGVJRCApLCBsYXllckN1cnZlTm9kZXMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbGF5ZXJzTWFwO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25TdGFjay4gVGhlc2UgYXJlIHRoZSB0b3AgbGV2ZWwgbm9kZSBpbiB0aGUgYW5pbWF0aW9uXG4gICAgICAgIC8vIGhpZXJhcmNoeS4gRWFjaCBTdGFjayBub2RlIHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBUSFJFRS5BbmltYXRpb25DbGlwXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlQW5pbVN0YWNrcyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIGxheWVyc01hcCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciByYXdTdGFja3MgPSBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uU3RhY2s7XG4gICAgXG4gICAgICAgICAgICAvLyBjb25uZWN0IHRoZSBzdGFja3MgKGNsaXBzKSB1cCB0byB0aGUgbGF5ZXJzXG4gICAgICAgICAgICB2YXIgcmF3Q2xpcHMgPSB7fTtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gcmF3U3RhY2tzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGNvbm5lY3Rpb25zLmdldCggcGFyc2VJbnQoIG5vZGVJRCApICkuY2hpbGRyZW47XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBjaGlsZHJlbi5sZW5ndGggPiAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBpdCBzZWVtcyBsaWtlIHN0YWNrcyB3aWxsIGFsd2F5cyBiZSBhc3NvY2lhdGVkIHdpdGggYSBzaW5nbGUgbGF5ZXIuIEJ1dCBqdXN0IGluIGNhc2UgdGhlcmUgYXJlIGZpbGVzXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZXJlIHRoZXJlIGFyZSBtdWx0aXBsZSBsYXllcnMgcGVyIHN0YWNrLCB3ZSdsbCBkaXNwbGF5IGEgd2FybmluZ1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IEVuY291bnRlcmVkIGFuIGFuaW1hdGlvbiBzdGFjayB3aXRoIG11bHRpcGxlIGxheWVycywgdGhpcyBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZC4gSWdub3Jpbmcgc3Vic2VxdWVudCBsYXllcnMuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllcnNNYXAuZ2V0KCBjaGlsZHJlblsgMCBdLklEICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmF3Q2xpcHNbIG5vZGVJRCBdID0ge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiByYXdTdGFja3NbIG5vZGVJRCBdLmF0dHJOYW1lLFxuICAgICAgICAgICAgICAgICAgICBsYXllcjogbGF5ZXIsXG4gICAgXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiByYXdDbGlwcztcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyB0YWtlIHJhdyBhbmltYXRpb24gZGF0YSBmcm9tIHBhcnNlQW5pbWF0aW9ucyBhbmQgY29ubmVjdCBpdCB1cCB0byB0aGUgbG9hZGVkIG1vZGVsc1xuICAgICAgICBmdW5jdGlvbiBhZGRBbmltYXRpb25zKCBGQlhUcmVlLCBjb25uZWN0aW9ucywgc2NlbmVHcmFwaCApIHtcbiAgICBcbiAgICAgICAgICAgIHNjZW5lR3JhcGguYW5pbWF0aW9ucyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgdmFyIHJhd0NsaXBzID0gcGFyc2VBbmltYXRpb25zKCBGQlhUcmVlLCBjb25uZWN0aW9ucyApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCByYXdDbGlwcyA9PT0gdW5kZWZpbmVkICkgcmV0dXJuO1xuICAgIFxuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGtleSBpbiByYXdDbGlwcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcmF3Q2xpcCA9IHJhd0NsaXBzWyBrZXkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY2xpcCA9IGFkZENsaXAoIHJhd0NsaXAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBzY2VuZUdyYXBoLmFuaW1hdGlvbnMucHVzaCggY2xpcCApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGFkZENsaXAoIHJhd0NsaXAgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgdHJhY2tzID0gW107XG4gICAgXG4gICAgICAgICAgICByYXdDbGlwLmxheWVyLmZvckVhY2goIGZ1bmN0aW9uICggcmF3VHJhY2tzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRyYWNrcyA9IHRyYWNrcy5jb25jYXQoIGdlbmVyYXRlVHJhY2tzKCByYXdUcmFja3MgKSApO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5BbmltYXRpb25DbGlwKCByYXdDbGlwLm5hbWUsIC0gMSwgdHJhY2tzICk7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVUcmFja3MoIHJhd1RyYWNrcyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciB0cmFja3MgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIGlmICggcmF3VHJhY2tzLlQgIT09IHVuZGVmaW5lZCAmJiBPYmplY3Qua2V5cyggcmF3VHJhY2tzLlQuY3VydmVzICkubGVuZ3RoID4gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb25UcmFjayA9IGdlbmVyYXRlVmVjdG9yVHJhY2soIHJhd1RyYWNrcy5tb2RlbE5hbWUsIHJhd1RyYWNrcy5ULmN1cnZlcywgcmF3VHJhY2tzLmluaXRpYWxQb3NpdGlvbiwgJ3Bvc2l0aW9uJyApO1xuICAgICAgICAgICAgICAgIGlmICggcG9zaXRpb25UcmFjayAhPT0gdW5kZWZpbmVkICkgdHJhY2tzLnB1c2goIHBvc2l0aW9uVHJhY2sgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggcmF3VHJhY2tzLlIgIT09IHVuZGVmaW5lZCAmJiBPYmplY3Qua2V5cyggcmF3VHJhY2tzLlIuY3VydmVzICkubGVuZ3RoID4gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcm90YXRpb25UcmFjayA9IGdlbmVyYXRlUm90YXRpb25UcmFjayggcmF3VHJhY2tzLm1vZGVsTmFtZSwgcmF3VHJhY2tzLlIuY3VydmVzLCByYXdUcmFja3MuaW5pdGlhbFJvdGF0aW9uLCByYXdUcmFja3MucHJlUm90YXRpb25zICk7XG4gICAgICAgICAgICAgICAgaWYgKCByb3RhdGlvblRyYWNrICE9PSB1bmRlZmluZWQgKSB0cmFja3MucHVzaCggcm90YXRpb25UcmFjayApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCByYXdUcmFja3MuUyAhPT0gdW5kZWZpbmVkICYmIE9iamVjdC5rZXlzKCByYXdUcmFja3MuUy5jdXJ2ZXMgKS5sZW5ndGggPiAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBzY2FsZVRyYWNrID0gZ2VuZXJhdGVWZWN0b3JUcmFjayggcmF3VHJhY2tzLm1vZGVsTmFtZSwgcmF3VHJhY2tzLlMuY3VydmVzLCByYXdUcmFja3MuaW5pdGlhbFNjYWxlLCAnc2NhbGUnICk7XG4gICAgICAgICAgICAgICAgaWYgKCBzY2FsZVRyYWNrICE9PSB1bmRlZmluZWQgKSB0cmFja3MucHVzaCggc2NhbGVUcmFjayApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRyYWNrcztcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVZlY3RvclRyYWNrKCBtb2RlbE5hbWUsIGN1cnZlcywgaW5pdGlhbFZhbHVlLCB0eXBlICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHRpbWVzID0gZ2V0VGltZXNGb3JBbGxBeGVzKCBjdXJ2ZXMgKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBnZXRLZXlmcmFtZVRyYWNrVmFsdWVzKCB0aW1lcywgY3VydmVzLCBpbml0aWFsVmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjayggbW9kZWxOYW1lICsgJy4nICsgdHlwZSwgdGltZXMsIHZhbHVlcyApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlUm90YXRpb25UcmFjayggbW9kZWxOYW1lLCBjdXJ2ZXMsIGluaXRpYWxWYWx1ZSwgcHJlUm90YXRpb25zICkge1xuICAgIFxuICAgICAgICAgICAgaWYgKCBjdXJ2ZXMueCAhPT0gdW5kZWZpbmVkICkgY3VydmVzLngudmFsdWVzID0gY3VydmVzLngudmFsdWVzLm1hcCggVEhSRUUuTWF0aC5kZWdUb1JhZCApO1xuICAgICAgICAgICAgaWYgKCBjdXJ2ZXMueSAhPT0gdW5kZWZpbmVkICkgY3VydmVzLnkudmFsdWVzID0gY3VydmVzLnkudmFsdWVzLm1hcCggVEhSRUUuTWF0aC5kZWdUb1JhZCApO1xuICAgICAgICAgICAgaWYgKCBjdXJ2ZXMueiAhPT0gdW5kZWZpbmVkICkgY3VydmVzLnoudmFsdWVzID0gY3VydmVzLnoudmFsdWVzLm1hcCggVEhSRUUuTWF0aC5kZWdUb1JhZCApO1xuICAgIFxuICAgICAgICAgICAgdmFyIHRpbWVzID0gZ2V0VGltZXNGb3JBbGxBeGVzKCBjdXJ2ZXMgKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBnZXRLZXlmcmFtZVRyYWNrVmFsdWVzKCB0aW1lcywgY3VydmVzLCBpbml0aWFsVmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgIGlmICggcHJlUm90YXRpb25zICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcHJlUm90YXRpb25zID0gcHJlUm90YXRpb25zLm1hcCggVEhSRUUuTWF0aC5kZWdUb1JhZCApO1xuICAgICAgICAgICAgICAgIHByZVJvdGF0aW9ucy5wdXNoKCAnWllYJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIHByZVJvdGF0aW9ucyA9IG5ldyBUSFJFRS5FdWxlcigpLmZyb21BcnJheSggcHJlUm90YXRpb25zICk7XG4gICAgICAgICAgICAgICAgcHJlUm90YXRpb25zID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoIHByZVJvdGF0aW9ucyApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIHF1YXRlcm5pb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgICAgICAgICAgdmFyIGV1bGVyID0gbmV3IFRIUkVFLkV1bGVyKCk7XG4gICAgXG4gICAgICAgICAgICB2YXIgcXVhdGVybmlvblZhbHVlcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSArPSAzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGV1bGVyLnNldCggdmFsdWVzWyBpIF0sIHZhbHVlc1sgaSArIDEgXSwgdmFsdWVzWyBpICsgMiBdLCAnWllYJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIHF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKCBldWxlciApO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggcHJlUm90YXRpb25zICE9PSB1bmRlZmluZWQgKXF1YXRlcm5pb24ucHJlbXVsdGlwbHkoIHByZVJvdGF0aW9ucyApO1xuICAgIFxuICAgICAgICAgICAgICAgIHF1YXRlcm5pb24udG9BcnJheSggcXVhdGVybmlvblZhbHVlcywgKCBpIC8gMyApICogNCApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5RdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjayggbW9kZWxOYW1lICsgJy5xdWF0ZXJuaW9uJywgdGltZXMsIHF1YXRlcm5pb25WYWx1ZXMgKTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBnZXRLZXlmcmFtZVRyYWNrVmFsdWVzKCB0aW1lcywgY3VydmVzLCBpbml0aWFsVmFsdWUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcHJldlZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIFxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgdmFyIHhJbmRleCA9IC0gMTtcbiAgICAgICAgICAgIHZhciB5SW5kZXggPSAtIDE7XG4gICAgICAgICAgICB2YXIgekluZGV4ID0gLSAxO1xuICAgIFxuICAgICAgICAgICAgdGltZXMuZm9yRWFjaCggZnVuY3Rpb24gKCB0aW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggY3VydmVzLnggKSB4SW5kZXggPSBjdXJ2ZXMueC50aW1lcy5pbmRleE9mKCB0aW1lICk7XG4gICAgICAgICAgICAgICAgaWYgKCBjdXJ2ZXMueSApIHlJbmRleCA9IGN1cnZlcy55LnRpbWVzLmluZGV4T2YoIHRpbWUgKTtcbiAgICAgICAgICAgICAgICBpZiAoIGN1cnZlcy56ICkgekluZGV4ID0gY3VydmVzLnoudGltZXMuaW5kZXhPZiggdGltZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFuIHggdmFsdWUgZGVmaW5lZCBmb3IgdGhpcyBmcmFtZSwgdXNlIHRoYXRcbiAgICAgICAgICAgICAgICBpZiAoIHhJbmRleCAhPT0gLSAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgeFZhbHVlID0gY3VydmVzLngudmFsdWVzWyB4SW5kZXggXTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goIHhWYWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICBwcmV2VmFsdWVbIDAgXSA9IHhWYWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgdXNlIHRoZSB4IHZhbHVlIGZyb20gdGhlIHByZXZpb3VzIGZyYW1lXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKCBwcmV2VmFsdWVbIDAgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHlJbmRleCAhPT0gLSAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgeVZhbHVlID0gY3VydmVzLnkudmFsdWVzWyB5SW5kZXggXTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goIHlWYWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICBwcmV2VmFsdWVbIDEgXSA9IHlWYWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCggcHJldlZhbHVlWyAxIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB6SW5kZXggIT09IC0gMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHpWYWx1ZSA9IGN1cnZlcy56LnZhbHVlc1sgekluZGV4IF07XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKCB6VmFsdWUgKTtcbiAgICAgICAgICAgICAgICAgICAgcHJldlZhbHVlWyAyIF0gPSB6VmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goIHByZXZWYWx1ZVsgMiBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBGb3IgYWxsIGFuaW1hdGVkIG9iamVjdHMsIHRpbWVzIGFyZSBkZWZpbmVkIHNlcGFyYXRlbHkgZm9yIGVhY2ggYXhpc1xuICAgICAgICAvLyBIZXJlIHdlJ2xsIGNvbWJpbmUgdGhlIHRpbWVzIGludG8gb25lIHNvcnRlZCBhcnJheSB3aXRob3V0IGR1cGxpY2F0ZXNcbiAgICAgICAgZnVuY3Rpb24gZ2V0VGltZXNGb3JBbGxBeGVzKCBjdXJ2ZXMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgdGltZXMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIC8vIGZpcnN0IGpvaW4gdG9nZXRoZXIgdGhlIHRpbWVzIGZvciBlYWNoIGF4aXMsIGlmIGRlZmluZWRcbiAgICAgICAgICAgIGlmICggY3VydmVzLnggIT09IHVuZGVmaW5lZCApIHRpbWVzID0gdGltZXMuY29uY2F0KCBjdXJ2ZXMueC50aW1lcyApO1xuICAgICAgICAgICAgaWYgKCBjdXJ2ZXMueSAhPT0gdW5kZWZpbmVkICkgdGltZXMgPSB0aW1lcy5jb25jYXQoIGN1cnZlcy55LnRpbWVzICk7XG4gICAgICAgICAgICBpZiAoIGN1cnZlcy56ICE9PSB1bmRlZmluZWQgKSB0aW1lcyA9IHRpbWVzLmNvbmNhdCggY3VydmVzLnoudGltZXMgKTtcbiAgICBcbiAgICAgICAgICAgIC8vIHRoZW4gc29ydCB0aGVtIGFuZCByZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICAgICAgdGltZXMgPSB0aW1lcy5zb3J0KCBmdW5jdGlvbiAoIGEsIGIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEgLSBiO1xuICAgIFxuICAgICAgICAgICAgfSApLmZpbHRlciggZnVuY3Rpb24gKCBlbGVtLCBpbmRleCwgYXJyYXkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5LmluZGV4T2YoIGVsZW0gKSA9PSBpbmRleDtcbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aW1lcztcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBwYXJzZSBhbiBGQlggZmlsZSBpbiBBU0NJSSBmb3JtYXRcbiAgICAgICAgZnVuY3Rpb24gVGV4dFBhcnNlcigpIHt9XG4gICAgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oIFRleHRQYXJzZXIucHJvdG90eXBlLCB7XG4gICAgXG4gICAgICAgICAgICBnZXRQcmV2Tm9kZTogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFja1sgdGhpcy5jdXJyZW50SW5kZW50IC0gMiBdO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldEN1cnJlbnROb2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrWyB0aGlzLmN1cnJlbnRJbmRlbnQgLSAxIF07XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0Q3VycmVudFByb3A6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UHJvcDtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBwdXNoU3RhY2s6IGZ1bmN0aW9uICggbm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKCBub2RlICk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZW50ICs9IDE7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgcG9wU3RhY2s6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRlbnQgLT0gMTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBzZXRDdXJyZW50UHJvcDogZnVuY3Rpb24gKCB2YWwsIG5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJvcCA9IHZhbDtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQcm9wTmFtZSA9IG5hbWU7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uICggdGV4dCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRlbnQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsTm9kZXMgPSBuZXcgRkJYVHJlZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJvcCA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFByb3BOYW1lID0gJyc7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBzcGxpdCA9IHRleHQuc3BsaXQoICdcXG4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgc3BsaXQuZm9yRWFjaCggZnVuY3Rpb24gKCBsaW5lLCBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hDb21tZW50ID0gbGluZS5tYXRjaCggL15bXFxzXFx0XSo7LyApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hFbXB0eSA9IGxpbmUubWF0Y2goIC9eW1xcc1xcdF0qJC8gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRjaENvbW1lbnQgfHwgbWF0Y2hFbXB0eSApIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoQmVnaW5uaW5nID0gbGluZS5tYXRjaCggJ15cXFxcdHsnICsgc2VsZi5jdXJyZW50SW5kZW50ICsgJ30oXFxcXHcrKTooLiopeycsICcnICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaFByb3BlcnR5ID0gbGluZS5tYXRjaCggJ15cXFxcdHsnICsgKCBzZWxmLmN1cnJlbnRJbmRlbnQgKSArICd9KFxcXFx3Kyk6W1xcXFxzXFxcXHRcXFxcclxcXFxuXSguKiknICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaEVuZCA9IGxpbmUubWF0Y2goICdeXFxcXHR7JyArICggc2VsZi5jdXJyZW50SW5kZW50IC0gMSApICsgJ319JyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGNoQmVnaW5uaW5nICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJzZU5vZGVCZWdpbiggbGluZSwgbWF0Y2hCZWdpbm5pbmcgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0Y2hQcm9wZXJ0eSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFyc2VOb2RlUHJvcGVydHkoIGxpbmUsIG1hdGNoUHJvcGVydHksIHNwbGl0WyArKyBpIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0Y2hFbmQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBvcFN0YWNrKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGxpbmUubWF0Y2goIC9eW15cXHNcXHR9XS8gKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxhcmdlIGFycmF5cyBhcmUgc3BsaXQgb3ZlciBtdWx0aXBsZSBsaW5lcyB0ZXJtaW5hdGVkIHdpdGggYSAnLCcgY2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGVuY291bnRlcmVkIHRoZSBsaW5lIG5lZWRzIHRvIGJlIGpvaW5lZCB0byB0aGUgcHJldmlvdXMgbGluZVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJzZU5vZGVQcm9wZXJ0eUNvbnRpbnVlZCggbGluZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbE5vZGVzO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHBhcnNlTm9kZUJlZ2luOiBmdW5jdGlvbiAoIGxpbmUsIHByb3BlcnR5ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBub2RlTmFtZSA9IHByb3BlcnR5WyAxIF0udHJpbSgpLnJlcGxhY2UoIC9eXCIvLCAnJyApLnJlcGxhY2UoIC9cIiQvLCAnJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBub2RlQXR0cnMgPSBwcm9wZXJ0eVsgMiBdLnNwbGl0KCAnLCcgKS5tYXAoIGZ1bmN0aW9uICggYXR0ciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHIudHJpbSgpLnJlcGxhY2UoIC9eXCIvLCAnJyApLnJlcGxhY2UoIC9cIiQvLCAnJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHsgbmFtZTogbm9kZU5hbWUgfTtcbiAgICAgICAgICAgICAgICB2YXIgYXR0cnMgPSB0aGlzLnBhcnNlTm9kZUF0dHIoIG5vZGVBdHRycyApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Tm9kZSA9IHRoaXMuZ2V0Q3VycmVudE5vZGUoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBhIHRvcCBub2RlXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLmN1cnJlbnRJbmRlbnQgPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsTm9kZXMuYWRkKCBub2RlTmFtZSwgbm9kZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGEgc3Vibm9kZVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgc3Vibm9kZSBhbHJlYWR5IGV4aXN0cywgYXBwZW5kIGl0XG4gICAgICAgICAgICAgICAgICAgIGlmICggbm9kZU5hbWUgaW4gY3VycmVudE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZSBQb3NlIG5lZWRzIFBvc2VOb2RlcyBhcyBhbiBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlTmFtZSA9PT0gJ1Bvc2VOb2RlJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5Qb3NlTm9kZS5wdXNoKCBub2RlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXS5pZCAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlWyBub2RlTmFtZSBdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGVbIG5vZGVOYW1lIF1bIGN1cnJlbnROb2RlWyBub2RlTmFtZSBdLmlkIF0gPSBjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYXR0cnMuaWQgIT09ICcnICkgY3VycmVudE5vZGVbIG5vZGVOYW1lIF1bIGF0dHJzLmlkIF0gPSBub2RlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB0eXBlb2YgYXR0cnMuaWQgPT09ICdudW1iZXInICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGVbIG5vZGVOYW1lIF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlWyBub2RlTmFtZSBdWyBhdHRycy5pZCBdID0gbm9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbm9kZU5hbWUgIT09ICdQcm9wZXJ0aWVzNzAnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlTmFtZSA9PT0gJ1Bvc2VOb2RlJyApXHRjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXSA9IFsgbm9kZSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXSA9IG5vZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgYXR0cnMuaWQgPT09ICdudW1iZXInICkgbm9kZS5pZCA9IGF0dHJzLmlkO1xuICAgICAgICAgICAgICAgIGlmICggYXR0cnMubmFtZSAhPT0gJycgKSBub2RlLmF0dHJOYW1lID0gYXR0cnMubmFtZTtcbiAgICAgICAgICAgICAgICBpZiAoIGF0dHJzLnR5cGUgIT09ICcnICkgbm9kZS5hdHRyVHlwZSA9IGF0dHJzLnR5cGU7XG4gICAgXG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoU3RhY2soIG5vZGUgKTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBwYXJzZU5vZGVBdHRyOiBmdW5jdGlvbiAoIGF0dHJzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBpZCA9IGF0dHJzWyAwIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBhdHRyc1sgMCBdICE9PSAnJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBwYXJzZUludCggYXR0cnNbIDAgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGlzTmFOKCBpZCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBhdHRyc1sgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gJycsIHR5cGUgPSAnJztcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGF0dHJzLmxlbmd0aCA+IDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBhdHRyc1sgMSBdLnJlcGxhY2UoIC9eKFxcdyspOjovLCAnJyApO1xuICAgICAgICAgICAgICAgICAgICB0eXBlID0gYXR0cnNbIDIgXTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgaWQ6IGlkLCBuYW1lOiBuYW1lLCB0eXBlOiB0eXBlIH07XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgcGFyc2VOb2RlUHJvcGVydHk6IGZ1bmN0aW9uICggbGluZSwgcHJvcGVydHksIGNvbnRlbnRMaW5lICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BlcnR5WyAxIF0ucmVwbGFjZSggL15cIi8sICcnICkucmVwbGFjZSggL1wiJC8sICcnICkudHJpbSgpO1xuICAgICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wZXJ0eVsgMiBdLnJlcGxhY2UoIC9eXCIvLCAnJyApLnJlcGxhY2UoIC9cIiQvLCAnJyApLnRyaW0oKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBmb3Igc3BlY2lhbCBjYXNlOiBiYXNlNjQgaW1hZ2UgZGF0YSBmb2xsb3dzIFwiQ29udGVudDogLFwiIGxpbmVcbiAgICAgICAgICAgICAgICAvL1x0Q29udGVudDogLFxuICAgICAgICAgICAgICAgIC8vXHQgXCIvOWovNFJEYVJYaHBaZ0FBVFUwQS4uLlwiXG4gICAgICAgICAgICAgICAgaWYgKCBwcm9wTmFtZSA9PT0gJ0NvbnRlbnQnICYmIHByb3BWYWx1ZSA9PT0gJywnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBwcm9wVmFsdWUgPSBjb250ZW50TGluZS5yZXBsYWNlKCAvXCIvZywgJycgKS5yZXBsYWNlKCAvLCQvLCAnJyApLnRyaW0oKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gdGhpcy5nZXRDdXJyZW50Tm9kZSgpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnROYW1lID0gY3VycmVudE5vZGUubmFtZTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHBhcmVudE5hbWUgPT09ICdQcm9wZXJ0aWVzNzAnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlTm9kZVNwZWNpYWxQcm9wZXJ0eSggbGluZSwgcHJvcE5hbWUsIHByb3BWYWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIENvbm5lY3Rpb25zXG4gICAgICAgICAgICAgICAgaWYgKCBwcm9wTmFtZSA9PT0gJ0MnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY29ublByb3BzID0gcHJvcFZhbHVlLnNwbGl0KCAnLCcgKS5zbGljZSggMSApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbSA9IHBhcnNlSW50KCBjb25uUHJvcHNbIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG8gPSBwYXJzZUludCggY29ublByb3BzWyAxIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3QgPSBwcm9wVmFsdWUuc3BsaXQoICcsJyApLnNsaWNlKCAzICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJlc3QgPSByZXN0Lm1hcCggZnVuY3Rpb24gKCBlbGVtICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0udHJpbSgpLnJlcGxhY2UoIC9eXCIvLCAnJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHByb3BOYW1lID0gJ2Nvbm5lY3Rpb25zJztcbiAgICAgICAgICAgICAgICAgICAgcHJvcFZhbHVlID0gWyBmcm9tLCB0byBdO1xuICAgICAgICAgICAgICAgICAgICBhcHBlbmQoIHByb3BWYWx1ZSwgcmVzdCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1cnJlbnROb2RlWyBwcm9wTmFtZSBdID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZVsgcHJvcE5hbWUgXSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIE5vZGVcbiAgICAgICAgICAgICAgICBpZiAoIHByb3BOYW1lID09PSAnTm9kZScgKSBjdXJyZW50Tm9kZS5pZCA9IHByb3BWYWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uc1xuICAgICAgICAgICAgICAgIGlmICggcHJvcE5hbWUgaW4gY3VycmVudE5vZGUgJiYgQXJyYXkuaXNBcnJheSggY3VycmVudE5vZGVbIHByb3BOYW1lIF0gKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGVbIHByb3BOYW1lIF0ucHVzaCggcHJvcFZhbHVlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwcm9wTmFtZSAhPT0gJ2EnICkgY3VycmVudE5vZGVbIHByb3BOYW1lIF0gPSBwcm9wVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgY3VycmVudE5vZGUuYSA9IHByb3BWYWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50UHJvcCggY3VycmVudE5vZGUsIHByb3BOYW1lICk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gY29udmVydCBzdHJpbmcgdG8gYXJyYXksIHVubGVzcyBpdCBlbmRzIGluICcsJyBpbiB3aGljaCBjYXNlIG1vcmUgd2lsbCBiZSBhZGRlZCB0byBpdFxuICAgICAgICAgICAgICAgIGlmICggcHJvcE5hbWUgPT09ICdhJyAmJiBwcm9wVmFsdWUuc2xpY2UoIC0gMSApICE9PSAnLCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLmEgPSBwYXJzZU51bWJlckFycmF5KCBwcm9wVmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgcGFyc2VOb2RlUHJvcGVydHlDb250aW51ZWQ6IGZ1bmN0aW9uICggbGluZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5vZGUgPSB0aGlzLmdldEN1cnJlbnROb2RlKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgY3VycmVudE5vZGUuYSArPSBsaW5lO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBsaW5lIGRvZXNuJ3QgZW5kIGluICcsJyB3ZSBoYXZlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgcHJvcGVydHkgdmFsdWVcbiAgICAgICAgICAgICAgICAvLyBzbyBjb252ZXJ0IHRoZSBzdHJpbmcgdG8gYW4gYXJyYXlcbiAgICAgICAgICAgICAgICBpZiAoIGxpbmUuc2xpY2UoIC0gMSApICE9PSAnLCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLmEgPSBwYXJzZU51bWJlckFycmF5KCBjdXJyZW50Tm9kZS5hICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIC8vIHBhcnNlIFwiUHJvcGVydHk3MFwiXG4gICAgICAgICAgICBwYXJzZU5vZGVTcGVjaWFsUHJvcGVydHk6IGZ1bmN0aW9uICggbGluZSwgcHJvcE5hbWUsIHByb3BWYWx1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBzcGxpdCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gUDogXCJMY2wgU2NhbGluZ1wiLCBcIkxjbCBTY2FsaW5nXCIsIFwiXCIsIFwiQVwiLDEsMSwxXG4gICAgICAgICAgICAgICAgLy8gaW50byBhcnJheSBsaWtlIGJlbG93XG4gICAgICAgICAgICAgICAgLy8gW1wiTGNsIFNjYWxpbmdcIiwgXCJMY2wgU2NhbGluZ1wiLCBcIlwiLCBcIkFcIiwgXCIxLDEsMVwiIF1cbiAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSBwcm9wVmFsdWUuc3BsaXQoICdcIiwnICkubWFwKCBmdW5jdGlvbiAoIHByb3AgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wLnRyaW0oKS5yZXBsYWNlKCAvXlxcXCIvLCAnJyApLnJlcGxhY2UoIC9cXHMvLCAnXycgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGlubmVyUHJvcE5hbWUgPSBwcm9wc1sgMCBdO1xuICAgICAgICAgICAgICAgIHZhciBpbm5lclByb3BUeXBlMSA9IHByb3BzWyAxIF07XG4gICAgICAgICAgICAgICAgdmFyIGlubmVyUHJvcFR5cGUyID0gcHJvcHNbIDIgXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJQcm9wRmxhZyA9IHByb3BzWyAzIF07XG4gICAgICAgICAgICAgICAgdmFyIGlubmVyUHJvcFZhbHVlID0gcHJvcHNbIDQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBjYXN0IHZhbHVlcyB3aGVyZSBuZWVkZWQsIG90aGVyd2lzZSBsZWF2ZSBhcyBzdHJpbmdzXG4gICAgICAgICAgICAgICAgc3dpdGNoICggaW5uZXJQcm9wVHlwZTEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VudW0nOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdib29sJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnVUxvbmdMb25nJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZG91YmxlJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRmllbGRPZlZpZXcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJQcm9wVmFsdWUgPSBwYXJzZUZsb2F0KCBpbm5lclByb3BWYWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ29sb3JSR0InOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdWZWN0b3IzRCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xjbF9UcmFuc2xhdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xjbF9Sb3RhdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xjbF9TY2FsaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyUHJvcFZhbHVlID0gcGFyc2VOdW1iZXJBcnJheSggaW5uZXJQcm9wVmFsdWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDQVVUSU9OOiB0aGVzZSBwcm9wcyBtdXN0IGFwcGVuZCB0byBwYXJlbnQncyBwYXJlbnRcbiAgICAgICAgICAgICAgICB0aGlzLmdldFByZXZOb2RlKClbIGlubmVyUHJvcE5hbWUgXSA9IHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiBpbm5lclByb3BUeXBlMSxcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUyJzogaW5uZXJQcm9wVHlwZTIsXG4gICAgICAgICAgICAgICAgICAgICdmbGFnJzogaW5uZXJQcm9wRmxhZyxcbiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogaW5uZXJQcm9wVmFsdWVcbiAgICBcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFByb3AoIHRoaXMuZ2V0UHJldk5vZGUoKSwgaW5uZXJQcm9wTmFtZSApO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAvLyBQYXJzZSBhbiBGQlggZmlsZSBpbiBCaW5hcnkgZm9ybWF0XG4gICAgICAgIGZ1bmN0aW9uIEJpbmFyeVBhcnNlcigpIHt9XG4gICAgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oIEJpbmFyeVBhcnNlci5wcm90b3R5cGUsIHtcbiAgICBcbiAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoIGJ1ZmZlciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEJpbmFyeVJlYWRlciggYnVmZmVyICk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoIDIzICk7IC8vIHNraXAgbWFnaWMgMjMgYnl0ZXNcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmVyc2lvbiA9IHJlYWRlci5nZXRVaW50MzIoKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ1RIUkVFLkZCWExvYWRlcjogRkJYIGJpbmFyeSB2ZXJzaW9uOiAnICsgdmVyc2lvbiApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhbGxOb2RlcyA9IG5ldyBGQlhUcmVlKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgd2hpbGUgKCAhIHRoaXMuZW5kT2ZDb250ZW50KCByZWFkZXIgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnBhcnNlTm9kZSggcmVhZGVyLCB2ZXJzaW9uICk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggbm9kZSAhPT0gbnVsbCApIGFsbE5vZGVzLmFkZCggbm9kZS5uYW1lLCBub2RlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBhbGxOb2RlcztcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAvLyBDaGVjayBpZiByZWFkZXIgaGFzIHJlYWNoZWQgdGhlIGVuZCBvZiBjb250ZW50LlxuICAgICAgICAgICAgZW5kT2ZDb250ZW50OiBmdW5jdGlvbiAoIHJlYWRlciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBmb290ZXIgc2l6ZTogMTYwYnl0ZXMgKyAxNi1ieXRlIGFsaWdubWVudCBwYWRkaW5nXG4gICAgICAgICAgICAgICAgLy8gLSAxNmJ5dGVzOiBtYWdpY1xuICAgICAgICAgICAgICAgIC8vIC0gcGFkZGluZyB0aWwgMTYtYnl0ZSBhbGlnbm1lbnQgKGF0IGxlYXN0IDFieXRlPylcbiAgICAgICAgICAgICAgICAvL1x0KHNlZW1zIGxpa2Ugc29tZSBleHBvcnRlcnMgZW1iZWQgZml4ZWQgMTUgb3IgMTZieXRlcz8pXG4gICAgICAgICAgICAgICAgLy8gLSA0Ynl0ZXM6IG1hZ2ljXG4gICAgICAgICAgICAgICAgLy8gLSA0Ynl0ZXM6IHZlcnNpb25cbiAgICAgICAgICAgICAgICAvLyAtIDEyMGJ5dGVzOiB6ZXJvXG4gICAgICAgICAgICAgICAgLy8gLSAxNmJ5dGVzOiBtYWdpY1xuICAgICAgICAgICAgICAgIGlmICggcmVhZGVyLnNpemUoKSAlIDE2ID09PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCAoIHJlYWRlci5nZXRPZmZzZXQoKSArIDE2MCArIDE2ICkgJiB+IDB4ZiApID49IHJlYWRlci5zaXplKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRPZmZzZXQoKSArIDE2MCArIDE2ID49IHJlYWRlci5zaXplKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IHBhcnNlIG5vZGVzIHVudGlsIHRoZSBlbmQgb2YgdGhlIGZpbGUgaXMgcmVhY2hlZFxuICAgICAgICAgICAgcGFyc2VOb2RlOiBmdW5jdGlvbiAoIHJlYWRlciwgdmVyc2lvbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBmaXJzdCB0aHJlZSBkYXRhIHNpemVzIGRlcGVuZHMgb24gdmVyc2lvbi5cbiAgICAgICAgICAgICAgICB2YXIgZW5kT2Zmc2V0ID0gKCB2ZXJzaW9uID49IDc1MDAgKSA/IHJlYWRlci5nZXRVaW50NjQoKSA6IHJlYWRlci5nZXRVaW50MzIoKTtcbiAgICAgICAgICAgICAgICB2YXIgbnVtUHJvcGVydGllcyA9ICggdmVyc2lvbiA+PSA3NTAwICkgPyByZWFkZXIuZ2V0VWludDY0KCkgOiByZWFkZXIuZ2V0VWludDMyKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gbm90ZTogZG8gbm90IHJlbW92ZSB0aGlzIGV2ZW4gaWYgeW91IGdldCBhIGxpbnRlciB3YXJuaW5nIGFzIGl0IG1vdmVzIHRoZSBidWZmZXIgZm9yd2FyZFxuICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eUxpc3RMZW4gPSAoIHZlcnNpb24gPj0gNzUwMCApID8gcmVhZGVyLmdldFVpbnQ2NCgpIDogcmVhZGVyLmdldFVpbnQzMigpO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBuYW1lTGVuID0gcmVhZGVyLmdldFVpbnQ4KCk7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSByZWFkZXIuZ2V0U3RyaW5nKCBuYW1lTGVuICk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gUmVnYXJkcyB0aGlzIG5vZGUgYXMgTlVMTC1yZWNvcmQgaWYgZW5kT2Zmc2V0IGlzIHplcm9cbiAgICAgICAgICAgICAgICBpZiAoIGVuZE9mZnNldCA9PT0gMCApIHJldHVybiBudWxsO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eUxpc3QgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBudW1Qcm9wZXJ0aWVzOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eUxpc3QucHVzaCggdGhpcy5wYXJzZVByb3BlcnR5KCByZWFkZXIgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBSZWdhcmRzIHRoZSBmaXJzdCB0aHJlZSBlbGVtZW50cyBpbiBwcm9wZXJ0eUxpc3QgYXMgaWQsIGF0dHJOYW1lLCBhbmQgYXR0clR5cGVcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBwcm9wZXJ0eUxpc3QubGVuZ3RoID4gMCA/IHByb3BlcnR5TGlzdFsgMCBdIDogJyc7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJOYW1lID0gcHJvcGVydHlMaXN0Lmxlbmd0aCA+IDEgPyBwcm9wZXJ0eUxpc3RbIDEgXSA6ICcnO1xuICAgICAgICAgICAgICAgIHZhciBhdHRyVHlwZSA9IHByb3BlcnR5TGlzdC5sZW5ndGggPiAyID8gcHJvcGVydHlMaXN0WyAyIF0gOiAnJztcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGlzIG5vZGUgcmVwcmVzZW50cyBqdXN0IGEgc2luZ2xlIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgLy8gbGlrZSAobmFtZSwgMCkgc2V0IG9yIChuYW1lMiwgWzAsIDEsIDJdKSBzZXQgb2Yge25hbWU6IDAsIG5hbWUyOiBbMCwgMSwgMl19XG4gICAgICAgICAgICAgICAgbm9kZS5zaW5nbGVQcm9wZXJ0eSA9ICggbnVtUHJvcGVydGllcyA9PT0gMSAmJiByZWFkZXIuZ2V0T2Zmc2V0KCkgPT09IGVuZE9mZnNldCApID8gdHJ1ZSA6IGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgICAgIHdoaWxlICggZW5kT2Zmc2V0ID4gcmVhZGVyLmdldE9mZnNldCgpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViTm9kZSA9IHRoaXMucGFyc2VOb2RlKCByZWFkZXIsIHZlcnNpb24gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzdWJOb2RlICE9PSBudWxsICkgdGhpcy5wYXJzZVN1Yk5vZGUoIG5hbWUsIG5vZGUsIHN1Yk5vZGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbm9kZS5wcm9wZXJ0eUxpc3QgPSBwcm9wZXJ0eUxpc3Q7IC8vIHJhdyBwcm9wZXJ0eSBsaXN0IHVzZWQgYnkgcGFyZW50XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgaWQgPT09ICdudW1iZXInICkgbm9kZS5pZCA9IGlkO1xuICAgICAgICAgICAgICAgIGlmICggYXR0ck5hbWUgIT09ICcnICkgbm9kZS5hdHRyTmFtZSA9IGF0dHJOYW1lO1xuICAgICAgICAgICAgICAgIGlmICggYXR0clR5cGUgIT09ICcnICkgbm9kZS5hdHRyVHlwZSA9IGF0dHJUeXBlO1xuICAgICAgICAgICAgICAgIGlmICggbmFtZSAhPT0gJycgKSBub2RlLm5hbWUgPSBuYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHBhcnNlU3ViTm9kZTogZnVuY3Rpb24gKCBuYW1lLCBub2RlLCBzdWJOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogY2hpbGQgbm9kZSBpcyBzaW5nbGUgcHJvcGVydHlcbiAgICAgICAgICAgICAgICBpZiAoIHN1Yk5vZGUuc2luZ2xlUHJvcGVydHkgPT09IHRydWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WyAwIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggdmFsdWUgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbIHN1Yk5vZGUubmFtZSBdID0gc3ViTm9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk5vZGUuYSA9IHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsgc3ViTm9kZS5uYW1lIF0gPSB2YWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG5hbWUgPT09ICdDb25uZWN0aW9ucycgJiYgc3ViTm9kZS5uYW1lID09PSAnQycgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzdWJOb2RlLnByb3BlcnR5TGlzdC5mb3JFYWNoKCBmdW5jdGlvbiAoIHByb3BlcnR5LCBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyc3QgQ29ubmVjdGlvbiBpcyBGQlggdHlwZSAoT08sIE9QLCBldGMuKS4gV2UnbGwgZGlzY2FyZCB0aGVzZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpICE9PSAwICkgYXJyYXkucHVzaCggcHJvcGVydHkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG5vZGUuY29ubmVjdGlvbnMgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuY29ubmVjdGlvbnMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBub2RlLmNvbm5lY3Rpb25zLnB1c2goIGFycmF5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc3ViTm9kZS5uYW1lID09PSAnUHJvcGVydGllczcwJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyggc3ViTm9kZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goIGZ1bmN0aW9uICgga2V5ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsga2V5IF0gPSBzdWJOb2RlWyBrZXkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG5hbWUgPT09ICdQcm9wZXJ0aWVzNzAnICYmIHN1Yk5vZGUubmFtZSA9PT0gJ1AnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5uZXJQcm9wTmFtZSA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WyAwIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbm5lclByb3BUeXBlMSA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WyAxIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbm5lclByb3BUeXBlMiA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WyAyIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbm5lclByb3BGbGFnID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbIDMgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyUHJvcFZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGlubmVyUHJvcE5hbWUuaW5kZXhPZiggJ0xjbCAnICkgPT09IDAgKSBpbm5lclByb3BOYW1lID0gaW5uZXJQcm9wTmFtZS5yZXBsYWNlKCAnTGNsICcsICdMY2xfJyApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGlubmVyUHJvcFR5cGUxLmluZGV4T2YoICdMY2wgJyApID09PSAwICkgaW5uZXJQcm9wVHlwZTEgPSBpbm5lclByb3BUeXBlMS5yZXBsYWNlKCAnTGNsICcsICdMY2xfJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGlubmVyUHJvcFR5cGUxID09PSAnQ29sb3InIHx8IGlubmVyUHJvcFR5cGUxID09PSAnQ29sb3JSR0InIHx8IGlubmVyUHJvcFR5cGUxID09PSAnVmVjdG9yJyB8fCBpbm5lclByb3BUeXBlMSA9PT0gJ1ZlY3RvcjNEJyB8fCBpbm5lclByb3BUeXBlMS5pbmRleE9mKCAnTGNsXycgKSA9PT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyUHJvcFZhbHVlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk5vZGUucHJvcGVydHlMaXN0WyA0IF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTm9kZS5wcm9wZXJ0eUxpc3RbIDUgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJOb2RlLnByb3BlcnR5TGlzdFsgNiBdXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJQcm9wVmFsdWUgPSBzdWJOb2RlLnByb3BlcnR5TGlzdFsgNCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBiZSBjb3BpZWQgdG8gcGFyZW50LCBzZWUgYWJvdmVcbiAgICAgICAgICAgICAgICAgICAgbm9kZVsgaW5uZXJQcm9wTmFtZSBdID0ge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiBpbm5lclByb3BUeXBlMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlMic6IGlubmVyUHJvcFR5cGUyLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZsYWcnOiBpbm5lclByb3BGbGFnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogaW5uZXJQcm9wVmFsdWVcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBub2RlWyBzdWJOb2RlLm5hbWUgXSA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBzdWJOb2RlLmlkID09PSAnbnVtYmVyJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbIHN1Yk5vZGUubmFtZSBdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlWyBzdWJOb2RlLm5hbWUgXVsgc3ViTm9kZS5pZCBdID0gc3ViTm9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbIHN1Yk5vZGUubmFtZSBdID0gc3ViTm9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggc3ViTm9kZS5uYW1lID09PSAnUG9zZU5vZGUnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhIEFycmF5LmlzQXJyYXkoIG5vZGVbIHN1Yk5vZGUubmFtZSBdICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsgc3ViTm9kZS5uYW1lIF0gPSBbIG5vZGVbIHN1Yk5vZGUubmFtZSBdIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlWyBzdWJOb2RlLm5hbWUgXS5wdXNoKCBzdWJOb2RlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG5vZGVbIHN1Yk5vZGUubmFtZSBdWyBzdWJOb2RlLmlkIF0gPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbIHN1Yk5vZGUubmFtZSBdWyBzdWJOb2RlLmlkIF0gPSBzdWJOb2RlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHBhcnNlUHJvcGVydHk6IGZ1bmN0aW9uICggcmVhZGVyICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gcmVhZGVyLmdldFN0cmluZyggMSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIHR5cGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRCb29sZWFuKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRGbG9hdDY0KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0YnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRGbG9hdDMyKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0knOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRJbnQzMigpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdMJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIuZ2V0SW50NjQoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUic6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gcmVhZGVyLmdldFVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRBcnJheUJ1ZmZlciggbGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHJlYWRlci5nZXRVaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIuZ2V0U3RyaW5nKCBsZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEludDE2KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2InOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdjJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2YnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdpJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbCc6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXlMZW5ndGggPSByZWFkZXIuZ2V0VWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5jb2RpbmcgPSByZWFkZXIuZ2V0VWludDMyKCk7IC8vIDA6IG5vbi1jb21wcmVzc2VkLCAxOiBjb21wcmVzc2VkXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcHJlc3NlZExlbmd0aCA9IHJlYWRlci5nZXRVaW50MzIoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZW5jb2RpbmcgPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRCb29sZWFuQXJyYXkoIGFycmF5TGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRGbG9hdDY0QXJyYXkoIGFycmF5TGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2YnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRGbG9hdDMyQXJyYXkoIGFycmF5TGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRJbnQzMkFycmF5KCBhcnJheUxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIuZ2V0SW50NjRBcnJheSggYXJyYXlMZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHdpbmRvdy5abGliID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvciggJ1RIUkVFLkZCWExvYWRlcjogRXh0ZXJuYWwgbGlicmFyeSBJbmZsYXRlLm1pbi5qcyByZXF1aXJlZCwgb2J0YWluIG9yIGltcG9ydCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9pbWF5YS96bGliLmpzJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZmxhdGUgPSBuZXcgWmxpYi5JbmZsYXRlKCBuZXcgVWludDhBcnJheSggcmVhZGVyLmdldEFycmF5QnVmZmVyKCBjb21wcmVzc2VkTGVuZ3RoICkgKSApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyMiA9IG5ldyBCaW5hcnlSZWFkZXIoIGluZmxhdGUuZGVjb21wcmVzcygpLmJ1ZmZlciApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdiJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlcjIuZ2V0Qm9vbGVhbkFycmF5KCBhcnJheUxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyMi5nZXRGbG9hdDY0QXJyYXkoIGFycmF5TGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIyLmdldEZsb2F0MzJBcnJheSggYXJyYXlMZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlcjIuZ2V0SW50MzJBcnJheSggYXJyYXlMZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlcjIuZ2V0SW50NjRBcnJheSggYXJyYXlMZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkZCWExvYWRlcjogVW5rbm93biBwcm9wZXJ0eSB0eXBlICcgKyB0eXBlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9ICk7XG4gICAgXG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIEJpbmFyeVJlYWRlciggYnVmZmVyLCBsaXR0bGVFbmRpYW4gKSB7XG4gICAgXG4gICAgICAgICAgICB0aGlzLmR2ID0gbmV3IERhdGFWaWV3KCBidWZmZXIgKTtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIHRoaXMubGl0dGxlRW5kaWFuID0gKCBsaXR0bGVFbmRpYW4gIT09IHVuZGVmaW5lZCApID8gbGl0dGxlRW5kaWFuIDogdHJ1ZTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBPYmplY3QuYXNzaWduKCBCaW5hcnlSZWFkZXIucHJvdG90eXBlLCB7XG4gICAgXG4gICAgICAgICAgICBnZXRPZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQ7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgc2l6ZTogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmR2LmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHNraXA6IGZ1bmN0aW9uICggbGVuZ3RoICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0ICs9IGxlbmd0aDtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAvLyBzZWVtcyBsaWtlIHRydWUvZmFsc2UgcmVwcmVzZW50YXRpb24gZGVwZW5kcyBvbiBleHBvcnRlci5cbiAgICAgICAgICAgIC8vIHRydWU6IDEgb3IgJ1knKD0weDU5KSwgZmFsc2U6IDAgb3IgJ1QnKD0weDU0KVxuICAgICAgICAgICAgLy8gdGhlbiBzZWVzIExTQi5cbiAgICAgICAgICAgIGdldEJvb2xlYW46IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gKCB0aGlzLmdldFVpbnQ4KCkgJiAxICkgPT09IDE7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0Qm9vbGVhbkFycmF5OiBmdW5jdGlvbiAoIHNpemUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBzaXplOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBhLnB1c2goIHRoaXMuZ2V0Qm9vbGVhbigpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBhO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldFVpbnQ4OiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5kdi5nZXRVaW50OCggdGhpcy5vZmZzZXQgKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBnZXRJbnQxNjogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZHYuZ2V0SW50MTYoIHRoaXMub2Zmc2V0LCB0aGlzLmxpdHRsZUVuZGlhbiApO1xuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0ICs9IDI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldEludDMyOiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5kdi5nZXRJbnQzMiggdGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuICk7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0SW50MzJBcnJheTogZnVuY3Rpb24gKCBzaXplICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKCB0aGlzLmdldEludDMyKCkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0VWludDMyOiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5kdi5nZXRVaW50MzIoIHRoaXMub2Zmc2V0LCB0aGlzLmxpdHRsZUVuZGlhbiApO1xuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0ICs9IDQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIC8vIEphdmFTY3JpcHQgZG9lc24ndCBzdXBwb3J0IDY0LWJpdCBpbnRlZ2VyIHNvIGNhbGN1bGF0ZSB0aGlzIGhlcmVcbiAgICAgICAgICAgIC8vIDEgPDwgMzIgd2lsbCByZXR1cm4gMSBzbyB1c2luZyBtdWx0aXBseSBvcGVyYXRpb24gaW5zdGVhZCBoZXJlLlxuICAgICAgICAgICAgLy8gVGhlcmUncyBhIHBvc3NpYmlsaXR5IHRoYXQgdGhpcyBtZXRob2QgcmV0dXJucyB3cm9uZyB2YWx1ZSBpZiB0aGUgdmFsdWVcbiAgICAgICAgICAgIC8vIGlzIG91dCBvZiB0aGUgcmFuZ2UgYmV0d2VlbiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBhbmQgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIuXG4gICAgICAgICAgICAvLyBUT0RPOiBzYWZlbHkgaGFuZGxlIDY0LWJpdCBpbnRlZ2VyXG4gICAgICAgICAgICBnZXRJbnQ2NDogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsb3csIGhpZ2g7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLmxpdHRsZUVuZGlhbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbG93ID0gdGhpcy5nZXRVaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgaGlnaCA9IHRoaXMuZ2V0VWludDMyKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaGlnaCA9IHRoaXMuZ2V0VWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGxvdyA9IHRoaXMuZ2V0VWludDMyKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBuZWdhdGl2ZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGlmICggaGlnaCAmIDB4ODAwMDAwMDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGhpZ2ggPSB+IGhpZ2ggJiAweEZGRkZGRkZGO1xuICAgICAgICAgICAgICAgICAgICBsb3cgPSB+IGxvdyAmIDB4RkZGRkZGRkY7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbG93ID09PSAweEZGRkZGRkZGICkgaGlnaCA9ICggaGlnaCArIDEgKSAmIDB4RkZGRkZGRkY7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGxvdyA9ICggbG93ICsgMSApICYgMHhGRkZGRkZGRjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0gKCBoaWdoICogMHgxMDAwMDAwMDAgKyBsb3cgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpZ2ggKiAweDEwMDAwMDAwMCArIGxvdztcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBnZXRJbnQ2NEFycmF5OiBmdW5jdGlvbiAoIHNpemUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBzaXplOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBhLnB1c2goIHRoaXMuZ2V0SW50NjQoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAvLyBOb3RlOiBzZWUgZ2V0SW50NjQoKSBjb21tZW50XG4gICAgICAgICAgICBnZXRVaW50NjQ6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbG93LCBoaWdoO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5saXR0bGVFbmRpYW4gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGxvdyA9IHRoaXMuZ2V0VWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2ggPSB0aGlzLmdldFVpbnQzMigpO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGhpZ2ggPSB0aGlzLmdldFVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBsb3cgPSB0aGlzLmdldFVpbnQzMigpO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgbG93O1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldEZsb2F0MzI6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmR2LmdldEZsb2F0MzIoIHRoaXMub2Zmc2V0LCB0aGlzLmxpdHRsZUVuZGlhbiApO1xuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0ICs9IDQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldEZsb2F0MzJBcnJheTogZnVuY3Rpb24gKCBzaXplICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKCB0aGlzLmdldEZsb2F0MzIoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBnZXRGbG9hdDY0OiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5kdi5nZXRGbG9hdDY0KCB0aGlzLm9mZnNldCwgdGhpcy5saXR0bGVFbmRpYW4gKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldCArPSA4O1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBnZXRGbG9hdDY0QXJyYXk6IGZ1bmN0aW9uICggc2l6ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHNpemU7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGEucHVzaCggdGhpcy5nZXRGbG9hdDY0KCkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0QXJyYXlCdWZmZXI6IGZ1bmN0aW9uICggc2l6ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmR2LmJ1ZmZlci5zbGljZSggdGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICsgc2l6ZSApO1xuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0ICs9IHNpemU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldFN0cmluZzogZnVuY3Rpb24gKCBzaXplICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhID0gbmV3IFVpbnQ4QXJyYXkoIHNpemUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBzaXplOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBhWyBpIF0gPSB0aGlzLmdldFVpbnQ4KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBudWxsQnl0ZSA9IGEuaW5kZXhPZiggMCApO1xuICAgICAgICAgICAgICAgIGlmICggbnVsbEJ5dGUgPj0gMCApIGEgPSBhLnNsaWNlKCAwLCBudWxsQnl0ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBUSFJFRS5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KCBhICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgLy8gRkJYVHJlZSBob2xkcyBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBGQlggZGF0YSwgcmV0dXJuZWQgYnkgdGhlIFRleHRQYXJzZXIgKCBGQlggQVNDSUkgZm9ybWF0KVxuICAgICAgICAvLyBhbmQgQmluYXJ5UGFyc2VyKCBGQlggQmluYXJ5IGZvcm1hdClcbiAgICAgICAgZnVuY3Rpb24gRkJYVHJlZSgpIHt9XG4gICAgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oIEZCWFRyZWUucHJvdG90eXBlLCB7XG4gICAgXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uICgga2V5LCB2YWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdGhpc1sga2V5IF0gPSB2YWw7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGlzRmJ4Rm9ybWF0QmluYXJ5KCBidWZmZXIgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgQ09SUkVDVCA9ICdLYXlkYXJhIEZCWCBCaW5hcnkgIFxcMCc7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyLmJ5dGVMZW5ndGggPj0gQ09SUkVDVC5sZW5ndGggJiYgQ09SUkVDVCA9PT0gY29udmVydEFycmF5QnVmZmVyVG9TdHJpbmcoIGJ1ZmZlciwgMCwgQ09SUkVDVC5sZW5ndGggKTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBpc0ZieEZvcm1hdEFTQ0lJKCB0ZXh0ICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIENPUlJFQ1QgPSBbICdLJywgJ2EnLCAneScsICdkJywgJ2EnLCAncicsICdhJywgJ1xcXFwnLCAnRicsICdCJywgJ1gnLCAnXFxcXCcsICdCJywgJ2knLCAnbicsICdhJywgJ3InLCAneScsICdcXFxcJywgJ1xcXFwnIF07XG4gICAgXG4gICAgICAgICAgICB2YXIgY3Vyc29yID0gMDtcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlYWQoIG9mZnNldCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGV4dFsgb2Zmc2V0IC0gMSBdO1xuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKCBjdXJzb3IgKyBvZmZzZXQgKTtcbiAgICAgICAgICAgICAgICBjdXJzb3IgKys7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IENPUlJFQ1QubGVuZ3RoOyArKyBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBudW0gPSByZWFkKCAxICk7XG4gICAgICAgICAgICAgICAgaWYgKCBudW0gPT09IENPUlJFQ1RbIGkgXSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGdldEZieFZlcnNpb24oIHRleHQgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgdmVyc2lvblJlZ0V4cCA9IC9GQlhWZXJzaW9uOiAoXFxkKykvO1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gdGV4dC5tYXRjaCggdmVyc2lvblJlZ0V4cCApO1xuICAgICAgICAgICAgaWYgKCBtYXRjaCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmVyc2lvbiA9IHBhcnNlSW50KCBtYXRjaFsgMSBdICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZlcnNpb247XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5GQlhMb2FkZXI6IENhbm5vdCBmaW5kIHRoZSB2ZXJzaW9uIG51bWJlciBmb3IgdGhlIGZpbGUgZ2l2ZW4uJyApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIENvbnZlcnRzIEZCWCB0aWNrcyBpbnRvIHJlYWwgdGltZSBzZWNvbmRzLlxuICAgICAgICBmdW5jdGlvbiBjb252ZXJ0RkJYVGltZVRvU2Vjb25kcyggdGltZSApIHtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aW1lIC8gNDYxODYxNTgwMDA7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICBcbiAgICAgICAgLy8gUGFyc2VzIGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIG51bWJlcnMgYW5kIHJldHVybnMgdGhlbSBhbiBhcnJheS5cbiAgICAgICAgLy8gVXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBUZXh0UGFyc2VyXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlTnVtYmVyQXJyYXkoIHZhbHVlICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGFycmF5ID0gdmFsdWUuc3BsaXQoICcsJyApLm1hcCggZnVuY3Rpb24gKCB2YWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoIHZhbCApO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGNvbnZlcnRBcnJheUJ1ZmZlclRvU3RyaW5nKCBidWZmZXIsIGZyb20sIHRvICkge1xuICAgIFxuICAgICAgICAgICAgaWYgKCBmcm9tID09PSB1bmRlZmluZWQgKSBmcm9tID0gMDtcbiAgICAgICAgICAgIGlmICggdG8gPT09IHVuZGVmaW5lZCApIHRvID0gYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gVEhSRUUuTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggbmV3IFVpbnQ4QXJyYXkoIGJ1ZmZlciwgZnJvbSwgdG8gKSApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGFwcGVuZCggYSwgYiApIHtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaiA9IGEubGVuZ3RoLCBsID0gYi5sZW5ndGg7IGkgPCBsOyBpICsrLCBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGFbIGogXSA9IGJbIGkgXTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBzbGljZSggYSwgYiwgZnJvbSwgdG8gKSB7XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IGZyb20sIGogPSAwOyBpIDwgdG87IGkgKyssIGogKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgYVsgaiBdID0gYlsgaSBdO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICB9ICkoKTsiLCIvKipcbiAqIEBhdXRob3IgUmljaCBUaWJiZXR0IC8gaHR0cHM6Ly9naXRodWIuY29tL3JpY2h0clxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cbiAqIEBhdXRob3IgVG9ueSBQYXJpc2kgLyBodHRwOi8vd3d3LnRvbnlwYXJpc2kuY29tL1xuICogQGF1dGhvciBUYWthaGlybyAvIGh0dHBzOi8vZ2l0aHViLmNvbS90YWthaGlyb3hcbiAqIEBhdXRob3IgRG9uIE1jQ3VyZHkgLyBodHRwczovL3d3dy5kb25tY2N1cmR5LmNvbVxuICovXG5cblRIUkVFLkdMVEZMb2FkZXIgPSAoIGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgZnVuY3Rpb24gR0xURkxvYWRlciggbWFuYWdlciApIHtcbiAgICBcbiAgICAgICAgICAgIHRoaXMubWFuYWdlciA9ICggbWFuYWdlciAhPT0gdW5kZWZpbmVkICkgPyBtYW5hZ2VyIDogVEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIEdMVEZMb2FkZXIucHJvdG90eXBlID0ge1xuICAgIFxuICAgICAgICAgICAgY29uc3RydWN0b3I6IEdMVEZMb2FkZXIsXG4gICAgXG4gICAgICAgICAgICBjcm9zc09yaWdpbjogJ0Fub255bW91cycsXG4gICAgXG4gICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLnBhdGggIT09IHVuZGVmaW5lZCA/IHRoaXMucGF0aCA6IFRIUkVFLkxvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKCB1cmwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLkZpbGVMb2FkZXIoIHNjb3BlLm1hbmFnZXIgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBsb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCAnYXJyYXlidWZmZXInICk7XG4gICAgXG4gICAgICAgICAgICAgICAgbG9hZGVyLmxvYWQoIHVybCwgZnVuY3Rpb24gKCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucGFyc2UoIGRhdGEsIHBhdGgsIG9uTG9hZCwgb25FcnJvciApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICggZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggb25FcnJvciAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoIGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBzZXRDcm9zc09yaWdpbjogZnVuY3Rpb24gKCB2YWx1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmNyb3NzT3JpZ2luID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgc2V0UGF0aDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBwYXJzZTogZnVuY3Rpb24gKCBkYXRhLCBwYXRoLCBvbkxvYWQsIG9uRXJyb3IgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGV4dGVuc2lvbnMgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGRhdGE7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hZ2ljID0gVEhSRUUuTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggbmV3IFVpbnQ4QXJyYXkoIGRhdGEsIDAsIDQgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1hZ2ljID09PSBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9NQUdJQyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfQklOQVJZX0dMVEYgXSA9IG5ldyBHTFRGQmluYXJ5RXh0ZW5zaW9uKCBkYXRhICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICggZXJyb3IgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvbkVycm9yICkgb25FcnJvciggZXJyb3IgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfQklOQVJZX0dMVEYgXS5jb250ZW50O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IFRIUkVFLkxvYWRlclV0aWxzLmRlY29kZVRleHQoIG5ldyBVaW50OEFycmF5KCBkYXRhICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UoIGNvbnRlbnQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGpzb24uYXNzZXQgPT09IHVuZGVmaW5lZCB8fCBqc29uLmFzc2V0LnZlcnNpb25bIDAgXSA8IDIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggb25FcnJvciApIG9uRXJyb3IoIG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFVuc3VwcG9ydGVkIGFzc2V0LiBnbFRGIHZlcnNpb25zID49Mi4wIGFyZSBzdXBwb3J0ZWQuIFVzZSBMZWdhY3lHTFRGTG9hZGVyIGluc3RlYWQuJyApICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBqc29uLmV4dGVuc2lvbnNVc2VkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGpzb24uZXh0ZW5zaW9uc1VzZWQuaW5kZXhPZiggRVhURU5TSU9OUy5LSFJfTElHSFRTICkgPj0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0xJR0hUUyBdID0gbmV3IEdMVEZMaWdodHNFeHRlbnNpb24oIGpzb24gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGpzb24uZXh0ZW5zaW9uc1VzZWQuaW5kZXhPZiggRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTICkgPj0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyBdID0gbmV3IEdMVEZNYXRlcmlhbHNQYnJTcGVjdWxhckdsb3NzaW5lc3NFeHRlbnNpb24oKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLnRpbWUoICdHTFRGTG9hZGVyJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgR0xURlBhcnNlcigganNvbiwgZXh0ZW5zaW9ucywge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoIHx8IHRoaXMucGF0aCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgY3Jvc3NPcmlnaW46IHRoaXMuY3Jvc3NPcmlnaW4sXG4gICAgICAgICAgICAgICAgICAgIG1hbmFnZXI6IHRoaXMubWFuYWdlclxuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJzZXIucGFyc2UoIGZ1bmN0aW9uICggc2NlbmUsIHNjZW5lcywgY2FtZXJhcywgYW5pbWF0aW9ucywgYXNzZXQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUudGltZUVuZCggJ0dMVEZMb2FkZXInICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBnbFRGID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmU6IHNjZW5lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVzOiBzY2VuZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmFzOiBjYW1lcmFzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uczogYW5pbWF0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBhc3NldFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBvbkxvYWQoIGdsVEYgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9LCBvbkVycm9yICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qIEdMVEZSRUdJU1RSWSAqL1xuICAgIFxuICAgICAgICBmdW5jdGlvbiBHTFRGUmVnaXN0cnkoKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgb2JqZWN0cyA9IHt9O1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuXHR7XG4gICAgXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoIGtleSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdHNbIGtleSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAoIGtleSwgb2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzWyBrZXkgXSA9IG9iamVjdDtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCBrZXkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmplY3RzWyBrZXkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIHJlbW92ZUFsbDogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgICAvKioqKioqKioqKiBFWFRFTlNJT05TICoqKioqKioqKioqL1xuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIFxuICAgICAgICB2YXIgRVhURU5TSU9OUyA9IHtcbiAgICAgICAgICAgIEtIUl9CSU5BUllfR0xURjogJ0tIUl9iaW5hcnlfZ2xURicsXG4gICAgICAgICAgICBLSFJfTElHSFRTOiAnS0hSX2xpZ2h0cycsXG4gICAgICAgICAgICBLSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTOiAnS0hSX21hdGVyaWFsc19wYnJTcGVjdWxhckdsb3NzaW5lc3MnXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMaWdodHMgRXh0ZW5zaW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IFBFTkRJTkdcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIEdMVEZMaWdodHNFeHRlbnNpb24oIGpzb24gKSB7XG4gICAgXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBFWFRFTlNJT05TLktIUl9MSUdIVFM7XG4gICAgXG4gICAgICAgICAgICB0aGlzLmxpZ2h0cyA9IHt9O1xuICAgIFxuICAgICAgICAgICAgdmFyIGV4dGVuc2lvbiA9ICgganNvbi5leHRlbnNpb25zICYmIGpzb24uZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTElHSFRTIF0gKSB8fCB7fTtcbiAgICAgICAgICAgIHZhciBsaWdodHMgPSBleHRlbnNpb24ubGlnaHRzIHx8IHt9O1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGxpZ2h0SWQgaW4gbGlnaHRzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsaWdodCA9IGxpZ2h0c1sgbGlnaHRJZCBdO1xuICAgICAgICAgICAgICAgIHZhciBsaWdodE5vZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCBsaWdodC5jb2xvciApO1xuICAgIFxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIGxpZ2h0LnR5cGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RpcmVjdGlvbmFsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Tm9kZSA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KCBjb2xvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlLnBvc2l0aW9uLnNldCggMCwgMCwgMSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BvaW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Tm9kZSA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KCBjb2xvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nwb3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlID0gbmV3IFRIUkVFLlNwb3RMaWdodCggY29sb3IgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Tm9kZS5wb3NpdGlvbi5zZXQoIDAsIDAsIDEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbWJpZW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Tm9kZSA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoIGNvbG9yICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBsaWdodE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbGlnaHQuY29uc3RhbnRBdHRlbnVhdGlvbiAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlLmludGVuc2l0eSA9IGxpZ2h0LmNvbnN0YW50QXR0ZW51YXRpb247XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBsaWdodC5saW5lYXJBdHRlbnVhdGlvbiAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlLmRpc3RhbmNlID0gMSAvIGxpZ2h0LmxpbmVhckF0dGVudWF0aW9uO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbGlnaHQucXVhZHJhdGljQXR0ZW51YXRpb24gIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Tm9kZS5kZWNheSA9IGxpZ2h0LnF1YWRyYXRpY0F0dGVudWF0aW9uO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbGlnaHQuZmFsbE9mZkFuZ2xlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodE5vZGUuYW5nbGUgPSBsaWdodC5mYWxsT2ZmQW5nbGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBsaWdodC5mYWxsT2ZmRXhwb25lbnQgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkdMVEZMb2FkZXI6OiBsaWdodC5mYWxsT2ZmRXhwb25lbnQgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0Tm9kZS5uYW1lID0gbGlnaHQubmFtZSB8fCAoICdsaWdodF8nICsgbGlnaHRJZCApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0c1sgbGlnaHRJZCBdID0gbGlnaHROb2RlO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvKiBCSU5BUlkgRVhURU5TSU9OICovXG4gICAgXG4gICAgICAgIHZhciBCSU5BUllfRVhURU5TSU9OX0JVRkZFUl9OQU1FID0gJ2JpbmFyeV9nbFRGJztcbiAgICAgICAgdmFyIEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX01BR0lDID0gJ2dsVEYnO1xuICAgICAgICB2YXIgQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTEVOR1RIID0gMTI7XG4gICAgICAgIHZhciBCSU5BUllfRVhURU5TSU9OX0NIVU5LX1RZUEVTID0geyBKU09OOiAweDRFNEY1MzRBLCBCSU46IDB4MDA0RTQ5NDIgfTtcbiAgICBcbiAgICAgICAgZnVuY3Rpb24gR0xURkJpbmFyeUV4dGVuc2lvbiggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX0JJTkFSWV9HTFRGO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYm9keSA9IG51bGw7XG4gICAgXG4gICAgICAgICAgICB2YXIgaGVhZGVyVmlldyA9IG5ldyBEYXRhVmlldyggZGF0YSwgMCwgQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTEVOR1RIICk7XG4gICAgXG4gICAgICAgICAgICB0aGlzLmhlYWRlciA9IHtcbiAgICAgICAgICAgICAgICBtYWdpYzogVEhSRUUuTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggbmV3IFVpbnQ4QXJyYXkoIGRhdGEuc2xpY2UoIDAsIDQgKSApICksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogaGVhZGVyVmlldy5nZXRVaW50MzIoIDQsIHRydWUgKSxcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGhlYWRlclZpZXcuZ2V0VWludDMyKCA4LCB0cnVlIClcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICBpZiAoIHRoaXMuaGVhZGVyLm1hZ2ljICE9PSBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9NQUdJQyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBnbFRGLUJpbmFyeSBoZWFkZXIuJyApO1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIGlmICggdGhpcy5oZWFkZXIudmVyc2lvbiA8IDIuMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBMZWdhY3kgYmluYXJ5IGZpbGUgZGV0ZWN0ZWQuIFVzZSBMZWdhY3lHTFRGTG9hZGVyIGluc3RlYWQuJyApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIGNodW5rVmlldyA9IG5ldyBEYXRhVmlldyggZGF0YSwgQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTEVOR1RIICk7XG4gICAgICAgICAgICB2YXIgY2h1bmtJbmRleCA9IDA7XG4gICAgXG4gICAgICAgICAgICB3aGlsZSAoIGNodW5rSW5kZXggPCBjaHVua1ZpZXcuYnl0ZUxlbmd0aCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY2h1bmtMZW5ndGggPSBjaHVua1ZpZXcuZ2V0VWludDMyKCBjaHVua0luZGV4LCB0cnVlICk7XG4gICAgICAgICAgICAgICAgY2h1bmtJbmRleCArPSA0O1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjaHVua1R5cGUgPSBjaHVua1ZpZXcuZ2V0VWludDMyKCBjaHVua0luZGV4LCB0cnVlICk7XG4gICAgICAgICAgICAgICAgY2h1bmtJbmRleCArPSA0O1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggY2h1bmtUeXBlID09PSBCSU5BUllfRVhURU5TSU9OX0NIVU5LX1RZUEVTLkpTT04gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50QXJyYXkgPSBuZXcgVWludDhBcnJheSggZGF0YSwgQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTEVOR1RIICsgY2h1bmtJbmRleCwgY2h1bmtMZW5ndGggKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gVEhSRUUuTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggY29udGVudEFycmF5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY2h1bmtUeXBlID09PSBCSU5BUllfRVhURU5TSU9OX0NIVU5LX1RZUEVTLkJJTiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ5dGVPZmZzZXQgPSBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEggKyBjaHVua0luZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvZHkgPSBkYXRhLnNsaWNlKCBieXRlT2Zmc2V0LCBieXRlT2Zmc2V0ICsgY2h1bmtMZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ2xpZW50cyBtdXN0IGlnbm9yZSBjaHVua3Mgd2l0aCB1bmtub3duIHR5cGVzLlxuICAgIFxuICAgICAgICAgICAgICAgIGNodW5rSW5kZXggKz0gY2h1bmtMZW5ndGg7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIHRoaXMuY29udGVudCA9PT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBKU09OIGNvbnRlbnQgbm90IGZvdW5kLicgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY3VsYXItR2xvc3NpbmVzcyBFeHRlbnNpb25cbiAgICAgICAgICpcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21hdGVyaWFsc19wYnJTcGVjdWxhckdsb3NzaW5lc3NcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIEdMVEZNYXRlcmlhbHNQYnJTcGVjdWxhckdsb3NzaW5lc3NFeHRlbnNpb24oKSB7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgIFxuICAgICAgICAgICAgICAgIG5hbWU6IEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyxcbiAgICBcbiAgICAgICAgICAgICAgICBzcGVjdWxhckdsb3NzaW5lc3NQYXJhbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ2NvbG9yJyxcbiAgICAgICAgICAgICAgICAgICAgJ21hcCcsXG4gICAgICAgICAgICAgICAgICAgICdsaWdodE1hcCcsXG4gICAgICAgICAgICAgICAgICAgICdsaWdodE1hcEludGVuc2l0eScsXG4gICAgICAgICAgICAgICAgICAgICdhb01hcCcsXG4gICAgICAgICAgICAgICAgICAgICdhb01hcEludGVuc2l0eScsXG4gICAgICAgICAgICAgICAgICAgICdlbWlzc2l2ZScsXG4gICAgICAgICAgICAgICAgICAgICdlbWlzc2l2ZUludGVuc2l0eScsXG4gICAgICAgICAgICAgICAgICAgICdlbWlzc2l2ZU1hcCcsXG4gICAgICAgICAgICAgICAgICAgICdidW1wTWFwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2J1bXBTY2FsZScsXG4gICAgICAgICAgICAgICAgICAgICdub3JtYWxNYXAnLFxuICAgICAgICAgICAgICAgICAgICAnZGlzcGxhY2VtZW50TWFwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYWNlbWVudFNjYWxlJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYWNlbWVudEJpYXMnLFxuICAgICAgICAgICAgICAgICAgICAnc3BlY3VsYXJNYXAnLFxuICAgICAgICAgICAgICAgICAgICAnc3BlY3VsYXInLFxuICAgICAgICAgICAgICAgICAgICAnZ2xvc3NpbmVzc01hcCcsXG4gICAgICAgICAgICAgICAgICAgICdnbG9zc2luZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FscGhhTWFwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Vudk1hcCcsXG4gICAgICAgICAgICAgICAgICAgICdlbnZNYXBJbnRlbnNpdHknLFxuICAgICAgICAgICAgICAgICAgICAncmVmcmFjdGlvblJhdGlvJyxcbiAgICAgICAgICAgICAgICBdLFxuICAgIFxuICAgICAgICAgICAgICAgIGdldE1hdGVyaWFsVHlwZTogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVEhSRUUuU2hhZGVyTWF0ZXJpYWw7XG4gICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICBleHRlbmRQYXJhbXM6IGZ1bmN0aW9uICggcGFyYW1zLCBtYXRlcmlhbCwgcGFyc2VyICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgcGJyU3BlY3VsYXJHbG9zc2luZXNzID0gbWF0ZXJpYWwuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaGFkZXIgPSBUSFJFRS5TaGFkZXJMaWJbICdzdGFuZGFyZCcgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVuaWZvcm1zID0gVEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZSggc2hhZGVyLnVuaWZvcm1zICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGVjdWxhck1hcFBhcnNGcmFnbWVudENodW5rID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgJyNpZmRlZiBVU0VfU1BFQ1VMQVJNQVAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1x0dW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJNYXA7JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICcjZW5kaWYnXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbiggJ1xcbicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdsb3NzaW5lc3NNYXBQYXJzRnJhZ21lbnRDaHVuayA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICcjaWZkZWYgVVNFX0dMT1NTSU5FU1NNQVAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1x0dW5pZm9ybSBzYW1wbGVyMkQgZ2xvc3NpbmVzc01hcDsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyNlbmRpZidcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKCAnXFxuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc3BlY3VsYXJNYXBGcmFnbWVudENodW5rID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3ZlYzMgc3BlY3VsYXJGYWN0b3IgPSBzcGVjdWxhcjsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyNpZmRlZiBVU0VfU1BFQ1VMQVJNQVAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1x0dmVjNCB0ZXhlbFNwZWN1bGFyID0gdGV4dHVyZTJEKCBzcGVjdWxhck1hcCwgdlV2ICk7JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcdHRleGVsU3BlY3VsYXIgPSBzUkdCVG9MaW5lYXIoIHRleGVsU3BlY3VsYXIgKTsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1x0Ly8gcmVhZHMgY2hhbm5lbCBSR0IsIGNvbXBhdGlibGUgd2l0aCBhIGdsVEYgU3BlY3VsYXItR2xvc3NpbmVzcyAoUkdCQSkgdGV4dHVyZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnXHRzcGVjdWxhckZhY3RvciAqPSB0ZXhlbFNwZWN1bGFyLnJnYjsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyNlbmRpZidcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKCAnXFxuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZ2xvc3NpbmVzc01hcEZyYWdtZW50Q2h1bmsgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnZmxvYXQgZ2xvc3NpbmVzc0ZhY3RvciA9IGdsb3NzaW5lc3M7JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICcjaWZkZWYgVVNFX0dMT1NTSU5FU1NNQVAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1x0dmVjNCB0ZXhlbEdsb3NzaW5lc3MgPSB0ZXh0dXJlMkQoIGdsb3NzaW5lc3NNYXAsIHZVdiApOycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnXHQvLyByZWFkcyBjaGFubmVsIEEsIGNvbXBhdGlibGUgd2l0aCBhIGdsVEYgU3BlY3VsYXItR2xvc3NpbmVzcyAoUkdCQSkgdGV4dHVyZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnXHRnbG9zc2luZXNzRmFjdG9yICo9IHRleGVsR2xvc3NpbmVzcy5hOycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnI2VuZGlmJ1xuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oICdcXG4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaWdodFBoeXNpY2FsRnJhZ21lbnRDaHVuayA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsOycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYjsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ21hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzID0gY2xhbXAoIDEuMCAtIGdsb3NzaW5lc3NGYWN0b3IsIDAuMDQsIDEuMCApOycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IHNwZWN1bGFyRmFjdG9yLnJnYjsnLFxuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oICdcXG4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudFNoYWRlciA9IHNoYWRlci5mcmFnbWVudFNoYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoICcjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+JywgJycgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoICd1bmlmb3JtIGZsb2F0IHJvdWdobmVzczsnLCAndW5pZm9ybSB2ZWMzIHNwZWN1bGFyOycgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoICd1bmlmb3JtIGZsb2F0IG1ldGFsbmVzczsnLCAndW5pZm9ybSBmbG9hdCBnbG9zc2luZXNzOycgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoICcjaW5jbHVkZSA8cm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ+Jywgc3BlY3VsYXJNYXBQYXJzRnJhZ21lbnRDaHVuayApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSggJyNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD4nLCBnbG9zc2luZXNzTWFwUGFyc0ZyYWdtZW50Q2h1bmsgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoICcjaW5jbHVkZSA8cm91Z2huZXNzbWFwX2ZyYWdtZW50PicsIHNwZWN1bGFyTWFwRnJhZ21lbnRDaHVuayApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSggJyNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfZnJhZ21lbnQ+JywgZ2xvc3NpbmVzc01hcEZyYWdtZW50Q2h1bmsgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoICcjaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50PicsIGxpZ2h0UGh5c2ljYWxGcmFnbWVudENodW5rICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1bmlmb3Jtcy5yb3VnaG5lc3M7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1bmlmb3Jtcy5tZXRhbG5lc3M7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1bmlmb3Jtcy5yb3VnaG5lc3NNYXA7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1bmlmb3Jtcy5tZXRhbG5lc3NNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLnNwZWN1bGFyID0geyB2YWx1ZTogbmV3IFRIUkVFLkNvbG9yKCkuc2V0SGV4KCAweDExMTExMSApIH07XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmdsb3NzaW5lc3MgPSB7IHZhbHVlOiAwLjUgfTtcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuc3BlY3VsYXJNYXAgPSB7IHZhbHVlOiBudWxsIH07XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmdsb3NzaW5lc3NNYXAgPSB7IHZhbHVlOiBudWxsIH07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy52ZXJ0ZXhTaGFkZXIgPSBzaGFkZXIudmVydGV4U2hhZGVyO1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZnJhZ21lbnRTaGFkZXIgPSBmcmFnbWVudFNoYWRlcjtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnVuaWZvcm1zID0gdW5pZm9ybXM7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5kZWZpbmVzID0geyAnU1RBTkRBUkQnOiAnJyB9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoIDEuMCwgMS4wLCAxLjAgKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLm9wYWNpdHkgPSAxLjA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwZW5kaW5nID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggcGJyU3BlY3VsYXJHbG9zc2luZXNzLmRpZmZ1c2VGYWN0b3IgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHBiclNwZWN1bGFyR2xvc3NpbmVzcy5kaWZmdXNlRmFjdG9yO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmNvbG9yLmZyb21BcnJheSggYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5vcGFjaXR5ID0gYXJyYXlbIDMgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5kaWZmdXNlVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggcGFyYW1zLCAnbWFwJywgcGJyU3BlY3VsYXJHbG9zc2luZXNzLmRpZmZ1c2VUZXh0dXJlLmluZGV4ICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZW1pc3NpdmUgPSBuZXcgVEhSRUUuQ29sb3IoIDAuMCwgMC4wLCAwLjAgKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmdsb3NzaW5lc3MgPSBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZ2xvc3NpbmVzc0ZhY3RvciAhPT0gdW5kZWZpbmVkID8gcGJyU3BlY3VsYXJHbG9zc2luZXNzLmdsb3NzaW5lc3NGYWN0b3IgOiAxLjA7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5zcGVjdWxhciA9IG5ldyBUSFJFRS5Db2xvciggMS4wLCAxLjAsIDEuMCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIEFycmF5LmlzQXJyYXkoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckZhY3RvciApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnNwZWN1bGFyLmZyb21BcnJheSggcGJyU3BlY3VsYXJHbG9zc2luZXNzLnNwZWN1bGFyRmFjdG9yICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwYnJTcGVjdWxhckdsb3NzaW5lc3Muc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwZWNHbG9zc0luZGV4ID0gcGJyU3BlY3VsYXJHbG9zc2luZXNzLnNwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBwYXJhbXMsICdnbG9zc2luZXNzTWFwJywgc3BlY0dsb3NzSW5kZXggKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggcGFyYW1zLCAnc3BlY3VsYXJNYXAnLCBzcGVjR2xvc3NJbmRleCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICBjcmVhdGVNYXRlcmlhbDogZnVuY3Rpb24gKCBwYXJhbXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldHVwIG1hdGVyaWFsIHByb3BlcnRpZXMgYmFzZWQgb24gTWVzaFN0YW5kYXJkTWF0ZXJpYWwgZm9yIFNwZWN1bGFyLUdsb3NzaW5lc3NcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVzOiBwYXJhbXMuZGVmaW5lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlcjogcGFyYW1zLnZlcnRleFNoYWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyOiBwYXJhbXMuZnJhZ21lbnRTaGFkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlmb3JtczogcGFyYW1zLnVuaWZvcm1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9nOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogcGFyYW1zLm9wYWNpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVudDogcGFyYW1zLnRyYW5zcGFyZW50XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuaXNHTFRGU3BlY3VsYXJHbG9zc2luZXNzTWF0ZXJpYWwgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5jb2xvciA9IHBhcmFtcy5jb2xvcjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubWFwID0gcGFyYW1zLm1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcmFtcy5tYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmxpZ2h0TWFwID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubGlnaHRNYXBJbnRlbnNpdHkgPSAxLjA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmFvTWFwID0gcGFyYW1zLmFvTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogcGFyYW1zLmFvTWFwO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hb01hcEludGVuc2l0eSA9IDEuMDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuZW1pc3NpdmUgPSBwYXJhbXMuZW1pc3NpdmU7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmVtaXNzaXZlSW50ZW5zaXR5ID0gMS4wO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5lbWlzc2l2ZU1hcCA9IHBhcmFtcy5lbWlzc2l2ZU1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcmFtcy5lbWlzc2l2ZU1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYnVtcE1hcCA9IHBhcmFtcy5idW1wTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogcGFyYW1zLmJ1bXBNYXA7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmJ1bXBTY2FsZSA9IDE7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm5vcm1hbE1hcCA9IHBhcmFtcy5ub3JtYWxNYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBwYXJhbXMubm9ybWFsTWFwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmFtcy5ub3JtYWxTY2FsZSApIG1hdGVyaWFsLm5vcm1hbFNjYWxlID0gcGFyYW1zLm5vcm1hbFNjYWxlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXAgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXMgPSAwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zcGVjdWxhck1hcCA9IHBhcmFtcy5zcGVjdWxhck1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcmFtcy5zcGVjdWxhck1hcDtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc3BlY3VsYXIgPSBwYXJhbXMuc3BlY3VsYXI7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmdsb3NzaW5lc3NNYXAgPSBwYXJhbXMuZ2xvc3NpbmVzc01hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcmFtcy5nbG9zc2luZXNzTWFwO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5nbG9zc2luZXNzID0gcGFyYW1zLmdsb3NzaW5lc3M7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmFscGhhTWFwID0gbnVsbDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuZW52TWFwID0gcGFyYW1zLmVudk1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcmFtcy5lbnZNYXA7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmVudk1hcEludGVuc2l0eSA9IDEuMDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwucmVmcmFjdGlvblJhdGlvID0gMC45ODtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcyA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENsb25lcyBhIEdMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbCBpbnN0YW5jZS4gVGhlIFNoYWRlck1hdGVyaWFsLmNvcHkoKSBtZXRob2QgY2FuXG4gICAgICAgICAgICAgICAgICogY29weSBvbmx5IHByb3BlcnRpZXMgaXQga25vd3MgYWJvdXQgb3IgaW5oZXJpdHMsIGFuZCBtaXNzZXMgbWFueSBwcm9wZXJ0aWVzIHRoYXQgd291bGRcbiAgICAgICAgICAgICAgICAgKiBub3JtYWxseSBiZSBkZWZpbmVkIGJ5IE1lc2hTdGFuZGFyZE1hdGVyaWFsLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogVGhpcyBtZXRob2QgYWxsb3dzIEdMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbHMgdG8gYmUgY2xvbmVkIGluIHRoZSBwcm9jZXNzIG9mXG4gICAgICAgICAgICAgICAgICogbG9hZGluZyBhIGdsVEYgbW9kZWwsIGJ1dCBjbG9uaW5nIGxhdGVyIChlLmcuIGJ5IHRoZSB1c2VyKSB3b3VsZCByZXF1aXJlIHRoZXNlIGNoYW5nZXNcbiAgICAgICAgICAgICAgICAgKiBBTkQgYWxzbyB1cGRhdGluZyBgLm9uQmVmb3JlUmVuZGVyYCBvbiB0aGUgcGFyZW50IG1lc2guXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gIHtUSFJFRS5TaGFkZXJNYXRlcmlhbH0gc291cmNlXG4gICAgICAgICAgICAgICAgICogQHJldHVybiB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY2xvbmVNYXRlcmlhbDogZnVuY3Rpb24gKCBzb3VyY2UgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBzb3VyY2UuY2xvbmUoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmlzR0xURlNwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMuc3BlY3VsYXJHbG9zc2luZXNzUGFyYW1zO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gcGFyYW1zLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0WyBwYXJhbXNbIGkgXSBdID0gc291cmNlWyBwYXJhbXNbIGkgXSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBIZXJlJ3MgYmFzZWQgb24gcmVmcmVzaFVuaWZvcm1zQ29tbW9uKCkgYW5kIHJlZnJlc2hVbmlmb3Jtc1N0YW5kYXJkKCkgaW4gV2ViR0xSZW5kZXJlci5cbiAgICAgICAgICAgICAgICByZWZyZXNoVW5pZm9ybXM6IGZ1bmN0aW9uICggcmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIGdlb21ldHJ5LCBtYXRlcmlhbCwgZ3JvdXAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWwuaXNHTFRGU3BlY3VsYXJHbG9zc2luZXNzTWF0ZXJpYWwgIT09IHRydWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVuaWZvcm1zID0gbWF0ZXJpYWwudW5pZm9ybXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZpbmVzID0gbWF0ZXJpYWwuZGVmaW5lcztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMub3BhY2l0eS52YWx1ZSA9IG1hdGVyaWFsLm9wYWNpdHk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmRpZmZ1c2UudmFsdWUuY29weSggbWF0ZXJpYWwuY29sb3IgKTtcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZW1pc3NpdmUudmFsdWUuY29weSggbWF0ZXJpYWwuZW1pc3NpdmUgKS5tdWx0aXBseVNjYWxhciggbWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMubWFwLnZhbHVlID0gbWF0ZXJpYWwubWFwO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5zcGVjdWxhck1hcC52YWx1ZSA9IG1hdGVyaWFsLnNwZWN1bGFyTWFwO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5hbHBoYU1hcC52YWx1ZSA9IG1hdGVyaWFsLmFscGhhTWFwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5saWdodE1hcC52YWx1ZSA9IG1hdGVyaWFsLmxpZ2h0TWFwO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5saWdodE1hcEludGVuc2l0eS52YWx1ZSA9IG1hdGVyaWFsLmxpZ2h0TWFwSW50ZW5zaXR5O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5hb01hcC52YWx1ZSA9IG1hdGVyaWFsLmFvTWFwO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5hb01hcEludGVuc2l0eS52YWx1ZSA9IG1hdGVyaWFsLmFvTWFwSW50ZW5zaXR5O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyB1diByZXBlYXQgYW5kIG9mZnNldCBzZXR0aW5nIHByaW9yaXRpZXNcbiAgICAgICAgICAgICAgICAgICAgLy8gMS4gY29sb3IgbWFwXG4gICAgICAgICAgICAgICAgICAgIC8vIDIuIHNwZWN1bGFyIG1hcFxuICAgICAgICAgICAgICAgICAgICAvLyAzLiBub3JtYWwgbWFwXG4gICAgICAgICAgICAgICAgICAgIC8vIDQuIGJ1bXAgbWFwXG4gICAgICAgICAgICAgICAgICAgIC8vIDUuIGFscGhhIG1hcFxuICAgICAgICAgICAgICAgICAgICAvLyA2LiBlbWlzc2l2ZSBtYXBcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHV2U2NhbGVNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWwubWFwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdXZTY2FsZU1hcCA9IG1hdGVyaWFsLm1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0ZXJpYWwuc3BlY3VsYXJNYXAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB1dlNjYWxlTWFwID0gbWF0ZXJpYWwuc3BlY3VsYXJNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2U2NhbGVNYXAgPSBtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1hdGVyaWFsLm5vcm1hbE1hcCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2U2NhbGVNYXAgPSBtYXRlcmlhbC5ub3JtYWxNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1hdGVyaWFsLmJ1bXBNYXAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB1dlNjYWxlTWFwID0gbWF0ZXJpYWwuYnVtcE1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0ZXJpYWwuZ2xvc3NpbmVzc01hcCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2U2NhbGVNYXAgPSBtYXRlcmlhbC5nbG9zc2luZXNzTWFwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBtYXRlcmlhbC5hbHBoYU1hcCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2U2NhbGVNYXAgPSBtYXRlcmlhbC5hbHBoYU1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0ZXJpYWwuZW1pc3NpdmVNYXAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB1dlNjYWxlTWFwID0gbWF0ZXJpYWwuZW1pc3NpdmVNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB1dlNjYWxlTWFwICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1dlNjYWxlTWFwLmlzV2ViR0xSZW5kZXJUYXJnZXQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZTY2FsZU1hcCA9IHV2U2NhbGVNYXAudGV4dHVyZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVwZWF0O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1dlNjYWxlTWFwLm1hdHJpeCAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vID4gcjg4LlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdXZTY2FsZU1hcC5tYXRyaXhBdXRvVXBkYXRlID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSB1dlNjYWxlTWFwLm9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0ID0gdXZTY2FsZU1hcC5yZXBlYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3RhdGlvbiA9IHV2U2NhbGVNYXAucm90YXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSB1dlNjYWxlTWFwLmNlbnRlcjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZTY2FsZU1hcC5tYXRyaXguc2V0VXZUcmFuc2Zvcm0oIG9mZnNldC54LCBvZmZzZXQueSwgcmVwZWF0LngsIHJlcGVhdC55LCByb3RhdGlvbiwgY2VudGVyLngsIGNlbnRlci55ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLnV2VHJhbnNmb3JtLnZhbHVlLmNvcHkoIHV2U2NhbGVNYXAubWF0cml4ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDw9IHI4Ny4gUmVtb3ZlIHdoZW4gcmVhc29uYWJsZS5cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSB1dlNjYWxlTWFwLm9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgPSB1dlNjYWxlTWFwLnJlcGVhdDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5vZmZzZXRSZXBlYXQudmFsdWUuc2V0KCBvZmZzZXQueCwgb2Zmc2V0LnksIHJlcGVhdC54LCByZXBlYXQueSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmVudk1hcC52YWx1ZSA9IG1hdGVyaWFsLmVudk1hcDtcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZW52TWFwSW50ZW5zaXR5LnZhbHVlID0gbWF0ZXJpYWwuZW52TWFwSW50ZW5zaXR5O1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5mbGlwRW52TWFwLnZhbHVlID0gKCBtYXRlcmlhbC5lbnZNYXAgJiYgbWF0ZXJpYWwuZW52TWFwLmlzQ3ViZVRleHR1cmUgKSA/IC0gMSA6IDE7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLnJlZnJhY3Rpb25SYXRpby52YWx1ZSA9IG1hdGVyaWFsLnJlZnJhY3Rpb25SYXRpbztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuc3BlY3VsYXIudmFsdWUuY29weSggbWF0ZXJpYWwuc3BlY3VsYXIgKTtcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZ2xvc3NpbmVzcy52YWx1ZSA9IG1hdGVyaWFsLmdsb3NzaW5lc3M7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmdsb3NzaW5lc3NNYXAudmFsdWUgPSBtYXRlcmlhbC5nbG9zc2luZXNzTWFwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5lbWlzc2l2ZU1hcC52YWx1ZSA9IG1hdGVyaWFsLmVtaXNzaXZlTWFwO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5idW1wTWFwLnZhbHVlID0gbWF0ZXJpYWwuYnVtcE1hcDtcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMubm9ybWFsTWFwLnZhbHVlID0gbWF0ZXJpYWwubm9ybWFsTWFwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWUgPSBtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlID0gbWF0ZXJpYWwuZGlzcGxhY2VtZW50U2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmRpc3BsYWNlbWVudEJpYXMudmFsdWUgPSBtYXRlcmlhbC5kaXNwbGFjZW1lbnRCaWFzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHVuaWZvcm1zLmdsb3NzaW5lc3NNYXAudmFsdWUgIT09IG51bGwgJiYgZGVmaW5lcy5VU0VfR0xPU1NJTkVTU01BUCA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lcy5VU0VfR0xPU1NJTkVTU01BUCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IFVTRV9ST1VHSE5FU1NNQVAgdG8gZW5hYmxlIHZVdlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lcy5VU0VfUk9VR0hORVNTTUFQID0gJyc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB1bmlmb3Jtcy5nbG9zc2luZXNzTWFwLnZhbHVlID09PSBudWxsICYmIGRlZmluZXMuVVNFX0dMT1NTSU5FU1NNQVAgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkZWZpbmVzLlVTRV9HTE9TU0lORVNTTUFQO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRlZmluZXMuVVNFX1JPVUdITkVTU01BUDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICAgICAgLyoqKioqKioqKiogSU5URVJQT0xBVElPTiAqKioqKioqKi9cbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICBcbiAgICAgICAgLy8gU3BsaW5lIEludGVycG9sYXRpb25cbiAgICAgICAgLy8gU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNhcHBlbmRpeC1jLXNwbGluZS1pbnRlcnBvbGF0aW9uXG4gICAgICAgIGZ1bmN0aW9uIEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50KCBwYXJhbWV0ZXJQb3NpdGlvbnMsIHNhbXBsZVZhbHVlcywgc2FtcGxlU2l6ZSwgcmVzdWx0QnVmZmVyICkge1xuICAgIFxuICAgICAgICAgICAgVEhSRUUuSW50ZXJwb2xhbnQuY2FsbCggdGhpcywgcGFyYW1ldGVyUG9zaXRpb25zLCBzYW1wbGVWYWx1ZXMsIHNhbXBsZVNpemUsIHJlc3VsdEJ1ZmZlciApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICBHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUSFJFRS5JbnRlcnBvbGFudC5wcm90b3R5cGUgKTtcbiAgICAgICAgR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQ7XG4gICAgXG4gICAgICAgIEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50LnByb3RvdHlwZS5pbnRlcnBvbGF0ZV8gPSBmdW5jdGlvbiAoIGkxLCB0MCwgdCwgdDEgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5yZXN1bHRCdWZmZXI7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5zYW1wbGVWYWx1ZXM7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy52YWx1ZVNpemU7XG4gICAgXG4gICAgICAgICAgICB2YXIgc3RyaWRlMiA9IHN0cmlkZSAqIDI7XG4gICAgICAgICAgICB2YXIgc3RyaWRlMyA9IHN0cmlkZSAqIDM7XG4gICAgXG4gICAgICAgICAgICB2YXIgdGQgPSB0MSAtIHQwO1xuICAgIFxuICAgICAgICAgICAgdmFyIHAgPSAoIHQgLSB0MCApIC8gdGQ7XG4gICAgICAgICAgICB2YXIgcHAgPSBwICogcDtcbiAgICAgICAgICAgIHZhciBwcHAgPSBwcCAqIHA7XG4gICAgXG4gICAgICAgICAgICB2YXIgb2Zmc2V0MSA9IGkxICogc3RyaWRlMztcbiAgICAgICAgICAgIHZhciBvZmZzZXQwID0gb2Zmc2V0MSAtIHN0cmlkZTM7XG4gICAgXG4gICAgICAgICAgICB2YXIgczAgPSAyICogcHBwIC0gMyAqIHBwICsgMTtcbiAgICAgICAgICAgIHZhciBzMSA9IHBwcCAtIDIgKiBwcCArIHA7XG4gICAgICAgICAgICB2YXIgczIgPSAtIDIgKiBwcHAgKyAzICogcHA7XG4gICAgICAgICAgICB2YXIgczMgPSBwcHAgLSBwcDtcbiAgICBcbiAgICAgICAgICAgIC8vIExheW91dCBvZiBrZXlmcmFtZSBvdXRwdXQgdmFsdWVzIGZvciBDVUJJQ1NQTElORSBhbmltYXRpb25zOlxuICAgICAgICAgICAgLy8gICBbIGluVGFuZ2VudF8xLCBzcGxpbmVWZXJ0ZXhfMSwgb3V0VGFuZ2VudF8xLCBpblRhbmdlbnRfMiwgc3BsaW5lVmVydGV4XzIsIC4uLiBdXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgIT09IHN0cmlkZTsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcDAgPSB2YWx1ZXNbIG9mZnNldDAgKyBpICsgc3RyaWRlIF07ICAgICAgICAvLyBzcGxpbmVWZXJ0ZXhfa1xuICAgICAgICAgICAgICAgIHZhciBtMCA9IHZhbHVlc1sgb2Zmc2V0MCArIGkgKyBzdHJpZGUyIF0gKiB0ZDsgIC8vIG91dFRhbmdlbnRfayAqICh0X2srMSAtIHRfaylcbiAgICAgICAgICAgICAgICB2YXIgcDEgPSB2YWx1ZXNbIG9mZnNldDEgKyBpICsgc3RyaWRlIF07ICAgICAgICAvLyBzcGxpbmVWZXJ0ZXhfaysxXG4gICAgICAgICAgICAgICAgdmFyIG0xID0gdmFsdWVzWyBvZmZzZXQxICsgaSBdICogdGQ7ICAgICAgICAgICAgLy8gaW5UYW5nZW50X2srMSAqICh0X2srMSAtIHRfaylcbiAgICBcbiAgICAgICAgICAgICAgICByZXN1bHRbIGkgXSA9IHMwICogcDAgKyBzMSAqIG0wICsgczIgKiBwMSArIHMzICogbTE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgICAvKioqKioqKioqKiBJTlRFUk5BTFMgKioqKioqKioqKioqL1xuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIFxuICAgICAgICAvKiBDT05TVEFOVFMgKi9cbiAgICBcbiAgICAgICAgdmFyIFdFQkdMX0NPTlNUQU5UUyA9IHtcbiAgICAgICAgICAgIEZMT0FUOiA1MTI2LFxuICAgICAgICAgICAgLy9GTE9BVF9NQVQyOiAzNTY3NCxcbiAgICAgICAgICAgIEZMT0FUX01BVDM6IDM1Njc1LFxuICAgICAgICAgICAgRkxPQVRfTUFUNDogMzU2NzYsXG4gICAgICAgICAgICBGTE9BVF9WRUMyOiAzNTY2NCxcbiAgICAgICAgICAgIEZMT0FUX1ZFQzM6IDM1NjY1LFxuICAgICAgICAgICAgRkxPQVRfVkVDNDogMzU2NjYsXG4gICAgICAgICAgICBMSU5FQVI6IDk3MjksXG4gICAgICAgICAgICBSRVBFQVQ6IDEwNDk3LFxuICAgICAgICAgICAgU0FNUExFUl8yRDogMzU2NzgsXG4gICAgICAgICAgICBQT0lOVFM6IDAsXG4gICAgICAgICAgICBMSU5FUzogMSxcbiAgICAgICAgICAgIExJTkVfTE9PUDogMixcbiAgICAgICAgICAgIExJTkVfU1RSSVA6IDMsXG4gICAgICAgICAgICBUUklBTkdMRVM6IDQsXG4gICAgICAgICAgICBUUklBTkdMRV9TVFJJUDogNSxcbiAgICAgICAgICAgIFRSSUFOR0xFX0ZBTjogNixcbiAgICAgICAgICAgIFVOU0lHTkVEX0JZVEU6IDUxMjEsXG4gICAgICAgICAgICBVTlNJR05FRF9TSE9SVDogNTEyM1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICB2YXIgV0VCR0xfVFlQRSA9IHtcbiAgICAgICAgICAgIDUxMjY6IE51bWJlcixcbiAgICAgICAgICAgIC8vMzU2NzQ6IFRIUkVFLk1hdHJpeDIsXG4gICAgICAgICAgICAzNTY3NTogVEhSRUUuTWF0cml4MyxcbiAgICAgICAgICAgIDM1Njc2OiBUSFJFRS5NYXRyaXg0LFxuICAgICAgICAgICAgMzU2NjQ6IFRIUkVFLlZlY3RvcjIsXG4gICAgICAgICAgICAzNTY2NTogVEhSRUUuVmVjdG9yMyxcbiAgICAgICAgICAgIDM1NjY2OiBUSFJFRS5WZWN0b3I0LFxuICAgICAgICAgICAgMzU2Nzg6IFRIUkVFLlRleHR1cmVcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIFdFQkdMX0NPTVBPTkVOVF9UWVBFUyA9IHtcbiAgICAgICAgICAgIDUxMjA6IEludDhBcnJheSxcbiAgICAgICAgICAgIDUxMjE6IFVpbnQ4QXJyYXksXG4gICAgICAgICAgICA1MTIyOiBJbnQxNkFycmF5LFxuICAgICAgICAgICAgNTEyMzogVWludDE2QXJyYXksXG4gICAgICAgICAgICA1MTI1OiBVaW50MzJBcnJheSxcbiAgICAgICAgICAgIDUxMjY6IEZsb2F0MzJBcnJheVxuICAgICAgICB9O1xuICAgIFxuICAgICAgICB2YXIgV0VCR0xfRklMVEVSUyA9IHtcbiAgICAgICAgICAgIDk3Mjg6IFRIUkVFLk5lYXJlc3RGaWx0ZXIsXG4gICAgICAgICAgICA5NzI5OiBUSFJFRS5MaW5lYXJGaWx0ZXIsXG4gICAgICAgICAgICA5OTg0OiBUSFJFRS5OZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcixcbiAgICAgICAgICAgIDk5ODU6IFRIUkVFLkxpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXIsXG4gICAgICAgICAgICA5OTg2OiBUSFJFRS5OZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyLFxuICAgICAgICAgICAgOTk4NzogVEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBXRUJHTF9XUkFQUElOR1MgPSB7XG4gICAgICAgICAgICAzMzA3MTogVEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZyxcbiAgICAgICAgICAgIDMzNjQ4OiBUSFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nLFxuICAgICAgICAgICAgMTA0OTc6IFRIUkVFLlJlcGVhdFdyYXBwaW5nXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBXRUJHTF9URVhUVVJFX0ZPUk1BVFMgPSB7XG4gICAgICAgICAgICA2NDA2OiBUSFJFRS5BbHBoYUZvcm1hdCxcbiAgICAgICAgICAgIDY0MDc6IFRIUkVFLlJHQkZvcm1hdCxcbiAgICAgICAgICAgIDY0MDg6IFRIUkVFLlJHQkFGb3JtYXQsXG4gICAgICAgICAgICA2NDA5OiBUSFJFRS5MdW1pbmFuY2VGb3JtYXQsXG4gICAgICAgICAgICA2NDEwOiBUSFJFRS5MdW1pbmFuY2VBbHBoYUZvcm1hdFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICB2YXIgV0VCR0xfVEVYVFVSRV9EQVRBVFlQRVMgPSB7XG4gICAgICAgICAgICA1MTIxOiBUSFJFRS5VbnNpZ25lZEJ5dGVUeXBlLFxuICAgICAgICAgICAgMzI4MTk6IFRIUkVFLlVuc2lnbmVkU2hvcnQ0NDQ0VHlwZSxcbiAgICAgICAgICAgIDMyODIwOiBUSFJFRS5VbnNpZ25lZFNob3J0NTU1MVR5cGUsXG4gICAgICAgICAgICAzMzYzNTogVEhSRUUuVW5zaWduZWRTaG9ydDU2NVR5cGVcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIFdFQkdMX1NJREVTID0ge1xuICAgICAgICAgICAgMTAyODogVEhSRUUuQmFja1NpZGUsIC8vIEN1bGxpbmcgZnJvbnRcbiAgICAgICAgICAgIDEwMjk6IFRIUkVFLkZyb250U2lkZSAvLyBDdWxsaW5nIGJhY2tcbiAgICAgICAgICAgIC8vMTAzMjogVEhSRUUuTm9TaWRlICAgLy8gQ3VsbGluZyBmcm9udCBhbmQgYmFjaywgd2hhdCB0byBkbz9cbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIFdFQkdMX0RFUFRIX0ZVTkNTID0ge1xuICAgICAgICAgICAgNTEyOiBUSFJFRS5OZXZlckRlcHRoLFxuICAgICAgICAgICAgNTEzOiBUSFJFRS5MZXNzRGVwdGgsXG4gICAgICAgICAgICA1MTQ6IFRIUkVFLkVxdWFsRGVwdGgsXG4gICAgICAgICAgICA1MTU6IFRIUkVFLkxlc3NFcXVhbERlcHRoLFxuICAgICAgICAgICAgNTE2OiBUSFJFRS5HcmVhdGVyRXF1YWxEZXB0aCxcbiAgICAgICAgICAgIDUxNzogVEhSRUUuTm90RXF1YWxEZXB0aCxcbiAgICAgICAgICAgIDUxODogVEhSRUUuR3JlYXRlckVxdWFsRGVwdGgsXG4gICAgICAgICAgICA1MTk6IFRIUkVFLkFsd2F5c0RlcHRoXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBXRUJHTF9CTEVORF9FUVVBVElPTlMgPSB7XG4gICAgICAgICAgICAzMjc3NDogVEhSRUUuQWRkRXF1YXRpb24sXG4gICAgICAgICAgICAzMjc3ODogVEhSRUUuU3VidHJhY3RFcXVhdGlvbixcbiAgICAgICAgICAgIDMyNzc5OiBUSFJFRS5SZXZlcnNlU3VidHJhY3RFcXVhdGlvblxuICAgICAgICB9O1xuICAgIFxuICAgICAgICB2YXIgV0VCR0xfQkxFTkRfRlVOQ1MgPSB7XG4gICAgICAgICAgICAwOiBUSFJFRS5aZXJvRmFjdG9yLFxuICAgICAgICAgICAgMTogVEhSRUUuT25lRmFjdG9yLFxuICAgICAgICAgICAgNzY4OiBUSFJFRS5TcmNDb2xvckZhY3RvcixcbiAgICAgICAgICAgIDc2OTogVEhSRUUuT25lTWludXNTcmNDb2xvckZhY3RvcixcbiAgICAgICAgICAgIDc3MDogVEhSRUUuU3JjQWxwaGFGYWN0b3IsXG4gICAgICAgICAgICA3NzE6IFRIUkVFLk9uZU1pbnVzU3JjQWxwaGFGYWN0b3IsXG4gICAgICAgICAgICA3NzI6IFRIUkVFLkRzdEFscGhhRmFjdG9yLFxuICAgICAgICAgICAgNzczOiBUSFJFRS5PbmVNaW51c0RzdEFscGhhRmFjdG9yLFxuICAgICAgICAgICAgNzc0OiBUSFJFRS5Ec3RDb2xvckZhY3RvcixcbiAgICAgICAgICAgIDc3NTogVEhSRUUuT25lTWludXNEc3RDb2xvckZhY3RvcixcbiAgICAgICAgICAgIDc3NjogVEhSRUUuU3JjQWxwaGFTYXR1cmF0ZUZhY3RvclxuICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZ3MgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgVGhyZWUuanMgeWV0XG4gICAgICAgICAgICAvLzMyNzY5OiBDT05TVEFOVF9DT0xPUixcbiAgICAgICAgICAgIC8vMzI3NzA6IE9ORV9NSU5VU19DT05TVEFOVF9DT0xPUixcbiAgICAgICAgICAgIC8vMzI3NzE6IENPTlNUQU5UX0FMUEhBLFxuICAgICAgICAgICAgLy8zMjc3MjogT05FX01JTlVTX0NPTlNUQU5UX0NPTE9SXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBXRUJHTF9UWVBFX1NJWkVTID0ge1xuICAgICAgICAgICAgJ1NDQUxBUic6IDEsXG4gICAgICAgICAgICAnVkVDMic6IDIsXG4gICAgICAgICAgICAnVkVDMyc6IDMsXG4gICAgICAgICAgICAnVkVDNCc6IDQsXG4gICAgICAgICAgICAnTUFUMic6IDQsXG4gICAgICAgICAgICAnTUFUMyc6IDksXG4gICAgICAgICAgICAnTUFUNCc6IDE2XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBQQVRIX1BST1BFUlRJRVMgPSB7XG4gICAgICAgICAgICBzY2FsZTogJ3NjYWxlJyxcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uOiAncG9zaXRpb24nLFxuICAgICAgICAgICAgcm90YXRpb246ICdxdWF0ZXJuaW9uJyxcbiAgICAgICAgICAgIHdlaWdodHM6ICdtb3JwaFRhcmdldEluZmx1ZW5jZXMnXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBJTlRFUlBPTEFUSU9OID0ge1xuICAgICAgICAgICAgQ1VCSUNTUExJTkU6IFRIUkVFLkludGVycG9sYXRlU21vb3RoLCAvLyBXZSB1c2UgY3VzdG9tIGludGVycG9sYXRpb24gR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhdGlvbiBmb3IgQ1VCSUNTUExJTkUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtleWZyYW1lVHJhY2sub3B0aW1pemUoKSBjYW4ndCBoYW5kbGUgZ2xURiBDdWJpYyBTcGxpbmUgb3V0cHV0IHZhbHVlcyBsYXlvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzaW5nIFRIUkVFLkludGVycG9sYXRlU21vb3RoIGZvciBLZXlmcmFtZVRyYWNrIGluc3RhbnRpYXRpb24gdG8gcHJldmVudCBvcHRpbWl6YXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlZSBLZXlmcmFtZVRyYWNrLm9wdGltaXplKCkgZm9yIHRoZSBkZXRhaWwuXG4gICAgICAgICAgICBMSU5FQVI6IFRIUkVFLkludGVycG9sYXRlTGluZWFyLFxuICAgICAgICAgICAgU1RFUDogVEhSRUUuSW50ZXJwb2xhdGVEaXNjcmV0ZVxuICAgICAgICB9O1xuICAgIFxuICAgICAgICB2YXIgU1RBVEVTX0VOQUJMRVMgPSB7XG4gICAgICAgICAgICAyODg0OiAnQ1VMTF9GQUNFJyxcbiAgICAgICAgICAgIDI5Mjk6ICdERVBUSF9URVNUJyxcbiAgICAgICAgICAgIDMwNDI6ICdCTEVORCcsXG4gICAgICAgICAgICAzMDg5OiAnU0NJU1NPUl9URVNUJyxcbiAgICAgICAgICAgIDMyODIzOiAnUE9MWUdPTl9PRkZTRVRfRklMTCcsXG4gICAgICAgICAgICAzMjkyNjogJ1NBTVBMRV9BTFBIQV9UT19DT1ZFUkFHRSdcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIEFMUEhBX01PREVTID0ge1xuICAgICAgICAgICAgT1BBUVVFOiAnT1BBUVVFJyxcbiAgICAgICAgICAgIE1BU0s6ICdNQVNLJyxcbiAgICAgICAgICAgIEJMRU5EOiAnQkxFTkQnXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qIFVUSUxJVFkgRlVOQ1RJT05TICovXG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwoIHVybCwgcGF0aCApIHtcbiAgICBcbiAgICAgICAgICAgIC8vIEludmFsaWQgVVJMXG4gICAgICAgICAgICBpZiAoIHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnIHx8IHVybCA9PT0gJycgKSByZXR1cm4gJyc7XG4gICAgXG4gICAgICAgICAgICAvLyBBYnNvbHV0ZSBVUkwgaHR0cDovLyxodHRwczovLywvL1xuICAgICAgICAgICAgaWYgKCAvXihodHRwcz86KT9cXC9cXC8vaS50ZXN0KCB1cmwgKSApIHJldHVybiB1cmw7XG4gICAgXG4gICAgICAgICAgICAvLyBEYXRhIFVSSVxuICAgICAgICAgICAgaWYgKCAvXmRhdGE6LiosLiokL2kudGVzdCggdXJsICkgKSByZXR1cm4gdXJsO1xuICAgIFxuICAgICAgICAgICAgLy8gQmxvYiBVUkxcbiAgICAgICAgICAgIGlmICggL15ibG9iOi4qJC9pLnRlc3QoIHVybCApICkgcmV0dXJuIHVybDtcbiAgICBcbiAgICAgICAgICAgIC8vIFJlbGF0aXZlIFVSTFxuICAgICAgICAgICAgcmV0dXJuIHBhdGggKyB1cmw7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjZGVmYXVsdC1tYXRlcmlhbFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRGVmYXVsdE1hdGVyaWFsKCkge1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCgge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAweEZGRkZGRixcbiAgICAgICAgICAgICAgICBlbWlzc2l2ZTogMHgwMDAwMDAsXG4gICAgICAgICAgICAgICAgbWV0YWxuZXNzOiAxLFxuICAgICAgICAgICAgICAgIHJvdWdobmVzczogMSxcbiAgICAgICAgICAgICAgICB0cmFuc3BhcmVudDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGVwdGhUZXN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHNpZGU6IFRIUkVFLkZyb250U2lkZVxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI21vcnBoLXRhcmdldHNcbiAgICAgICAgICpcbiAgICAgICAgICogVE9ETzogSW1wbGVtZW50IHN1cHBvcnQgZm9yIG1vcnBoIHRhcmdldHMgb24gVEFOR0VOVCBhdHRyaWJ1dGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7VEhSRUUuTWVzaH0gbWVzaFxuICAgICAgICAgKiBAcGFyYW0ge0dMVEYuTWVzaH0gbWVzaERlZlxuICAgICAgICAgKiBAcGFyYW0ge0dMVEYuUHJpbWl0aXZlfSBwcmltaXRpdmVEZWZcbiAgICAgICAgICogQHBhcmFtIHtBcnJheTxUSFJFRS5CdWZmZXJBdHRyaWJ1dGU+fSBhY2Nlc3NvcnNcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1vcnBoVGFyZ2V0cyggbWVzaCwgbWVzaERlZiwgcHJpbWl0aXZlRGVmLCBhY2Nlc3NvcnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBtZXNoLmdlb21ldHJ5O1xuICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbWVzaC5tYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgIHZhciB0YXJnZXRzID0gcHJpbWl0aXZlRGVmLnRhcmdldHM7XG4gICAgICAgICAgICB2YXIgbW9ycGhBdHRyaWJ1dGVzID0gZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzO1xuICAgIFxuICAgICAgICAgICAgbW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uID0gW107XG4gICAgICAgICAgICBtb3JwaEF0dHJpYnV0ZXMubm9ybWFsID0gW107XG4gICAgXG4gICAgICAgICAgICBtYXRlcmlhbC5tb3JwaFRhcmdldHMgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IHRhcmdldHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldHNbIGkgXTtcbiAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9ICdtb3JwaFRhcmdldCcgKyBpO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbkF0dHJpYnV0ZSwgbm9ybWFsQXR0cmlidXRlO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggdGFyZ2V0LlBPU0lUSU9OICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFRocmVlLmpzIG1vcnBoIGZvcm11bGEgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gICBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgKyB3ZWlnaHQwICogKCBtb3JwaFRhcmdldDAgLSBwb3NpdGlvbiApXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICArIHdlaWdodDEgKiAoIG1vcnBoVGFyZ2V0MSAtIHBvc2l0aW9uIClcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC4uLlxuICAgICAgICAgICAgICAgICAgICAvLyB3aGlsZSB0aGUgZ2xURiBvbmUgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gICBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgKyB3ZWlnaHQwICogbW9ycGhUYXJnZXQwXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICArIHdlaWdodDEgKiBtb3JwaFRhcmdldDFcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC4uLlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIGFkZGluZyBwb3NpdGlvbiB0byBtb3JwaFRhcmdldC5cbiAgICAgICAgICAgICAgICAgICAgLy8gU28gbW9ycGhUYXJnZXQgdmFsdWUgd2lsbCBkZXBlbmQgb24gbWVzaCdzIHBvc2l0aW9uLCB0aGVuIGNsb25pbmcgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB0aGUgY2FzZSBpZiBhdHRyaWJ1dGUgaXMgc2hhcmVkIGFtb25nIHR3byBvciBtb3JlIG1lc2hlcy5cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25BdHRyaWJ1dGUgPSBjbG9uZUJ1ZmZlckF0dHJpYnV0ZSggYWNjZXNzb3JzWyB0YXJnZXQuUE9TSVRJT04gXSApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDAsIGpsID0gcG9zaXRpb25BdHRyaWJ1dGUuY291bnQ7IGogPCBqbDsgaiArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uQXR0cmlidXRlLnNldFhZWihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uQXR0cmlidXRlLmdldFgoIGogKSArIHBvc2l0aW9uLmdldFgoIGogKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbkF0dHJpYnV0ZS5nZXRZKCBqICkgKyBwb3NpdGlvbi5nZXRZKCBqICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25BdHRyaWJ1dGUuZ2V0WiggaiApICsgcG9zaXRpb24uZ2V0WiggaiApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29weWluZyB0aGUgb3JpZ2luYWwgcG9zaXRpb24gbm90IHRvIGFmZmVjdCB0aGUgZmluYWwgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlZSB0aGUgZm9ybXVsYSBhYm92ZS5cbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25BdHRyaWJ1dGUgPSBjbG9uZUJ1ZmZlckF0dHJpYnV0ZSggZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbiApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHBvc2l0aW9uQXR0cmlidXRlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uQXR0cmlidXRlLm5hbWUgPSBhdHRyaWJ1dGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICBtb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ucHVzaCggcG9zaXRpb25BdHRyaWJ1dGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB0YXJnZXQuTk9STUFMICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm1vcnBoTm9ybWFscyA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlZSB0YXJnZXQuUE9TSVRJT04ncyBjb21tZW50XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbEF0dHJpYnV0ZSA9IGNsb25lQnVmZmVyQXR0cmlidXRlKCBhY2Nlc3NvcnNbIHRhcmdldC5OT1JNQUwgXSApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWw7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBqID0gMCwgamwgPSBub3JtYWxBdHRyaWJ1dGUuY291bnQ7IGogPCBqbDsgaiArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEF0dHJpYnV0ZS5zZXRYWVooXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxBdHRyaWJ1dGUuZ2V0WCggaiApICsgbm9ybWFsLmdldFgoIGogKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxBdHRyaWJ1dGUuZ2V0WSggaiApICsgbm9ybWFsLmdldFkoIGogKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxBdHRyaWJ1dGUuZ2V0WiggaiApICsgbm9ybWFsLmdldFooIGogKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbEF0dHJpYnV0ZSA9IGNsb25lQnVmZmVyQXR0cmlidXRlKCBnZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG5vcm1hbEF0dHJpYnV0ZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBub3JtYWxBdHRyaWJ1dGUubmFtZSA9IGF0dHJpYnV0ZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIG1vcnBoQXR0cmlidXRlcy5ub3JtYWwucHVzaCggbm9ybWFsQXR0cmlidXRlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgbWVzaC51cGRhdGVNb3JwaFRhcmdldHMoKTtcbiAgICBcbiAgICAgICAgICAgIGlmICggbWVzaERlZi53ZWlnaHRzICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IG1lc2hEZWYud2VpZ2h0cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbIGkgXSA9IG1lc2hEZWYud2VpZ2h0c1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBpc1ByaW1pdGl2ZUVxdWFsKCBhLCBiICkge1xuICAgIFxuICAgICAgICAgICAgaWYgKCBhLmluZGljZXMgIT09IGIuaW5kaWNlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgYXR0cmliQSA9IGEuYXR0cmlidXRlcyB8fCB7fTtcbiAgICAgICAgICAgIHZhciBhdHRyaWJCID0gYi5hdHRyaWJ1dGVzIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMoIGF0dHJpYkEgKTtcbiAgICAgICAgICAgIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKCBhdHRyaWJCICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBrZXlzQS5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c0FbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGF0dHJpYkFbIGtleSBdICE9PSBhdHRyaWJCWyBrZXkgXSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGdldENhY2hlZEdlb21ldHJ5KCBjYWNoZSwgbmV3UHJpbWl0aXZlICkge1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IGNhY2hlLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjYWNoZWQgPSBjYWNoZVsgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggaXNQcmltaXRpdmVFcXVhbCggY2FjaGVkLnByaW1pdGl2ZSwgbmV3UHJpbWl0aXZlICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWQuZ2VvbWV0cnk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gY2xvbmVCdWZmZXJBdHRyaWJ1dGUoIGF0dHJpYnV0ZSApIHtcbiAgICBcbiAgICAgICAgICAgIGlmICggYXR0cmlidXRlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYXR0cmlidXRlLmNvdW50O1xuICAgICAgICAgICAgICAgIHZhciBpdGVtU2l6ZSA9IGF0dHJpYnV0ZS5pdGVtU2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBhdHRyaWJ1dGUuYXJyYXkuc2xpY2UoIDAsIGNvdW50ICogaXRlbVNpemUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBjb3VudDsgKysgaSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlbIGkgXSA9IGF0dHJpYnV0ZS5nZXRYKCBpICk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbVNpemUgPj0gMiApIGFycmF5WyBpICsgMSBdID0gYXR0cmlidXRlLmdldFkoIGkgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpdGVtU2l6ZSA+PSAzICkgYXJyYXlbIGkgKyAyIF0gPSBhdHRyaWJ1dGUuZ2V0WiggaSApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW1TaXplID49IDQgKSBhcnJheVsgaSArIDMgXSA9IGF0dHJpYnV0ZS5nZXRXKCBpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBhcnJheSwgaXRlbVNpemUsIGF0dHJpYnV0ZS5ub3JtYWxpemVkICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gYXR0cmlidXRlLmNsb25lKCk7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLyogR0xURiBQQVJTRVIgKi9cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gR0xURlBhcnNlcigganNvbiwgZXh0ZW5zaW9ucywgb3B0aW9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuanNvbiA9IGpzb24gfHwge307XG4gICAgICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBcbiAgICAgICAgICAgIC8vIGxvYWRlciBvYmplY3QgY2FjaGVcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgR0xURlJlZ2lzdHJ5KCk7XG4gICAgXG4gICAgICAgICAgICAvLyBCdWZmZXJHZW9tZXRyeSBjYWNoaW5nXG4gICAgICAgICAgICB0aGlzLnByaW1pdGl2ZUNhY2hlID0gW107XG4gICAgXG4gICAgICAgICAgICB0aGlzLnRleHR1cmVMb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlciggdGhpcy5vcHRpb25zLm1hbmFnZXIgKTtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZUxvYWRlci5zZXRDcm9zc09yaWdpbiggdGhpcy5vcHRpb25zLmNyb3NzT3JpZ2luICk7XG4gICAgXG4gICAgICAgICAgICB0aGlzLmZpbGVMb2FkZXIgPSBuZXcgVEhSRUUuRmlsZUxvYWRlciggdGhpcy5vcHRpb25zLm1hbmFnZXIgKTtcbiAgICAgICAgICAgIHRoaXMuZmlsZUxvYWRlci5zZXRSZXNwb25zZVR5cGUoICdhcnJheWJ1ZmZlcicgKTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uICggb25Mb2FkLCBvbkVycm9yICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGpzb24gPSB0aGlzLmpzb247XG4gICAgXG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgbG9hZGVyIGNhY2hlXG4gICAgICAgICAgICB0aGlzLmNhY2hlLnJlbW92ZUFsbCgpO1xuICAgIFxuICAgICAgICAgICAgLy8gTWFyayB0aGUgc3BlY2lhbCBub2Rlcy9tZXNoZXMgaW4ganNvbiBmb3IgZWZmaWNpZW50IHBhcnNlXG4gICAgICAgICAgICB0aGlzLm1hcmtEZWZzKCk7XG4gICAgXG4gICAgICAgICAgICAvLyBGaXJlIHRoZSBjYWxsYmFjayBvbiBjb21wbGV0ZVxuICAgICAgICAgICAgdGhpcy5nZXRNdWx0aURlcGVuZGVuY2llcyggW1xuICAgIFxuICAgICAgICAgICAgICAgICdzY2VuZScsXG4gICAgICAgICAgICAgICAgJ2FuaW1hdGlvbicsXG4gICAgICAgICAgICAgICAgJ2NhbWVyYSdcbiAgICBcbiAgICAgICAgICAgIF0gKS50aGVuKCBmdW5jdGlvbiAoIGRlcGVuZGVuY2llcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2NlbmVzID0gZGVwZW5kZW5jaWVzLnNjZW5lcyB8fCBbXTtcbiAgICAgICAgICAgICAgICB2YXIgc2NlbmUgPSBzY2VuZXNbIGpzb24uc2NlbmUgfHwgMCBdO1xuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb25zID0gZGVwZW5kZW5jaWVzLmFuaW1hdGlvbnMgfHwgW107XG4gICAgICAgICAgICAgICAgdmFyIGFzc2V0ID0ganNvbi5hc3NldDtcbiAgICAgICAgICAgICAgICB2YXIgY2FtZXJhcyA9IGRlcGVuZGVuY2llcy5jYW1lcmFzIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIG9uTG9hZCggc2NlbmUsIHNjZW5lcywgY2FtZXJhcywgYW5pbWF0aW9ucywgYXNzZXQgKTtcbiAgICBcbiAgICAgICAgICAgIH0gKS5jYXRjaCggb25FcnJvciApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFya3MgdGhlIHNwZWNpYWwgbm9kZXMvbWVzaGVzIGluIGpzb24gZm9yIGVmZmljaWVudCBwYXJzZS5cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLm1hcmtEZWZzID0gZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgdmFyIG5vZGVEZWZzID0gdGhpcy5qc29uLm5vZGVzIHx8IFtdO1xuICAgICAgICAgICAgdmFyIHNraW5EZWZzID0gdGhpcy5qc29uLnNraW5zIHx8IFtdO1xuICAgICAgICAgICAgdmFyIG1lc2hEZWZzID0gdGhpcy5qc29uLm1lc2hlcyB8fCBbXTtcbiAgICBcbiAgICAgICAgICAgIHZhciBtZXNoUmVmZXJlbmNlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIG1lc2hVc2VzID0ge307XG4gICAgXG4gICAgICAgICAgICAvLyBOb3RoaW5nIGluIHRoZSBub2RlIGRlZmluaXRpb24gaW5kaWNhdGVzIHdoZXRoZXIgaXQgaXMgYSBCb25lIG9yIGFuXG4gICAgICAgICAgICAvLyBPYmplY3QzRC4gVXNlIHRoZSBza2lucycgam9pbnQgcmVmZXJlbmNlcyB0byBtYXJrIGJvbmVzLlxuICAgICAgICAgICAgZm9yICggdmFyIHNraW5JbmRleCA9IDAsIHNraW5MZW5ndGggPSBza2luRGVmcy5sZW5ndGg7IHNraW5JbmRleCA8IHNraW5MZW5ndGg7IHNraW5JbmRleCArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgam9pbnRzID0gc2tpbkRlZnNbIHNraW5JbmRleCBdLmpvaW50cztcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gam9pbnRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBub2RlRGVmc1sgam9pbnRzWyBpIF0gXS5pc0JvbmUgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIE1lc2hlcyBjYW4gKGFuZCBzaG91bGQpIGJlIHJldXNlZCBieSBtdWx0aXBsZSBub2RlcyBpbiBhIGdsVEYgYXNzZXQuIFRvXG4gICAgICAgICAgICAvLyBhdm9pZCBoYXZpbmcgbW9yZSB0aGFuIG9uZSBUSFJFRS5NZXNoIHdpdGggdGhlIHNhbWUgbmFtZSwgY291bnRcbiAgICAgICAgICAgIC8vIHJlZmVyZW5jZXMgYW5kIHJlbmFtZSBpbnN0YW5jZXMgYmVsb3cuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gRXhhbXBsZTogQ2VzaXVtTWlsa1RydWNrIHNhbXBsZSBtb2RlbCByZXVzZXMgXCJXaGVlbFwiIG1lc2hlcy5cbiAgICAgICAgICAgIGZvciAoIHZhciBub2RlSW5kZXggPSAwLCBub2RlTGVuZ3RoID0gbm9kZURlZnMubGVuZ3RoOyBub2RlSW5kZXggPCBub2RlTGVuZ3RoOyBub2RlSW5kZXggKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVEZWYgPSBub2RlRGVmc1sgbm9kZUluZGV4IF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBub2RlRGVmLm1lc2ggIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtZXNoUmVmZXJlbmNlc1sgbm9kZURlZi5tZXNoIF0gPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc2hSZWZlcmVuY2VzWyBub2RlRGVmLm1lc2ggXSA9IG1lc2hVc2VzWyBub2RlRGVmLm1lc2ggXSA9IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWVzaFJlZmVyZW5jZXNbIG5vZGVEZWYubWVzaCBdICsrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBOb3RoaW5nIGluIHRoZSBtZXNoIGRlZmluaXRpb24gaW5kaWNhdGVzIHdoZXRoZXIgaXQgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBTa2lubmVkTWVzaCBvciBNZXNoLiBVc2UgdGhlIG5vZGUncyBtZXNoIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgICAgICAvLyB0byBtYXJrIFNraW5uZWRNZXNoIGlmIG5vZGUgaGFzIHNraW4uXG4gICAgICAgICAgICAgICAgICAgIGlmICggbm9kZURlZi5za2luICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNoRGVmc1sgbm9kZURlZi5tZXNoIF0uaXNTa2lubmVkTWVzaCA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB0aGlzLmpzb24ubWVzaFJlZmVyZW5jZXMgPSBtZXNoUmVmZXJlbmNlcztcbiAgICAgICAgICAgIHRoaXMuanNvbi5tZXNoVXNlcyA9IG1lc2hVc2VzO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogUmVxdWVzdHMgdGhlIHNwZWNpZmllZCBkZXBlbmRlbmN5IGFzeW5jaHJvbm91c2x5LCB3aXRoIGNhY2hpbmcuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdD59XG4gICAgICAgICAqL1xuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5nZXREZXBlbmRlbmN5ID0gZnVuY3Rpb24gKCB0eXBlLCBpbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBjYWNoZUtleSA9IHR5cGUgKyAnOicgKyBpbmRleDtcbiAgICAgICAgICAgIHZhciBkZXBlbmRlbmN5ID0gdGhpcy5jYWNoZS5nZXQoIGNhY2hlS2V5ICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoICEgZGVwZW5kZW5jeSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZm5OYW1lID0gJ2xvYWQnICsgdHlwZS5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSggMSApO1xuICAgICAgICAgICAgICAgIGRlcGVuZGVuY3kgPSB0aGlzWyBmbk5hbWUgXSggaW5kZXggKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLmFkZCggY2FjaGVLZXksIGRlcGVuZGVuY3kgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBkZXBlbmRlbmN5O1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogUmVxdWVzdHMgYWxsIGRlcGVuZGVuY2llcyBvZiB0aGUgc3BlY2lmaWVkIHR5cGUgYXN5bmNocm9ub3VzbHksIHdpdGggY2FjaGluZy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxPYmplY3Q+Pn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmdldERlcGVuZGVuY2llcyA9IGZ1bmN0aW9uICggdHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBkZXBlbmRlbmNpZXMgPSB0aGlzLmNhY2hlLmdldCggdHlwZSApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCAhIGRlcGVuZGVuY2llcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VyID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgZGVmcyA9IHRoaXMuanNvblsgdHlwZSArICggdHlwZSA9PT0gJ21lc2gnID8gJ2VzJyA6ICdzJyApIF0gfHwgW107XG4gICAgXG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzID0gUHJvbWlzZS5hbGwoIGRlZnMubWFwKCBmdW5jdGlvbiAoIGRlZiwgaW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggdHlwZSwgaW5kZXggKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9ICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLmFkZCggdHlwZSwgZGVwZW5kZW5jaWVzICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gZGVwZW5kZW5jaWVzO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogUmVxdWVzdHMgYWxsIG11bHRpcGxlIGRlcGVuZGVuY2llcyBvZiB0aGUgc3BlY2lmaWVkIHR5cGVzIGFzeW5jaHJvbm91c2x5LCB3aXRoIGNhY2hpbmcuXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gdHlwZXNcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxPYmplY3Q8QXJyYXk8T2JqZWN0Pj4+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUuZ2V0TXVsdGlEZXBlbmRlbmNpZXMgPSBmdW5jdGlvbiAoIHR5cGVzICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBwZW5kaW5ncyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IHR5cGVzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gdHlwZXNbIGkgXTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldERlcGVuZGVuY2llcyggdHlwZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudGhlbiggZnVuY3Rpb24gKCBrZXksIHZhbHVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzWyBrZXkgXSA9IHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH0uYmluZCggdGhpcywgdHlwZSArICggdHlwZSA9PT0gJ21lc2gnID8gJ2VzJyA6ICdzJyApICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBwZW5kaW5ncy5wdXNoKCB2YWx1ZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5ncyApLnRoZW4oIGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjYnVmZmVycy1hbmQtYnVmZmVyLXZpZXdzXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBidWZmZXJJbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5QnVmZmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWRCdWZmZXIgPSBmdW5jdGlvbiAoIGJ1ZmZlckluZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGJ1ZmZlckRlZiA9IHRoaXMuanNvbi5idWZmZXJzWyBidWZmZXJJbmRleCBdO1xuICAgICAgICAgICAgdmFyIGxvYWRlciA9IHRoaXMuZmlsZUxvYWRlcjtcbiAgICBcbiAgICAgICAgICAgIGlmICggYnVmZmVyRGVmLnR5cGUgJiYgYnVmZmVyRGVmLnR5cGUgIT09ICdhcnJheWJ1ZmZlcicgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogJyArIGJ1ZmZlckRlZi50eXBlICsgJyBidWZmZXIgdHlwZSBpcyBub3Qgc3VwcG9ydGVkLicgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIElmIHByZXNlbnQsIEdMQiBjb250YWluZXIgaXMgcmVxdWlyZWQgdG8gYmUgdGhlIGZpcnN0IGJ1ZmZlci5cbiAgICAgICAgICAgIGlmICggYnVmZmVyRGVmLnVyaSA9PT0gdW5kZWZpbmVkICYmIGJ1ZmZlckluZGV4ID09PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoIHRoaXMuZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfQklOQVJZX0dMVEYgXS5ib2R5ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbG9hZGVyLmxvYWQoIHJlc29sdmVVUkwoIGJ1ZmZlckRlZi51cmksIG9wdGlvbnMucGF0aCApLCByZXNvbHZlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBGYWlsZWQgdG8gbG9hZCBidWZmZXIgXCInICsgYnVmZmVyRGVmLnVyaSArICdcIi4nICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2J1ZmZlcnMtYW5kLWJ1ZmZlci12aWV3c1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYnVmZmVyVmlld0luZGV4XG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXlCdWZmZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZEJ1ZmZlclZpZXcgPSBmdW5jdGlvbiAoIGJ1ZmZlclZpZXdJbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBidWZmZXJWaWV3RGVmID0gdGhpcy5qc29uLmJ1ZmZlclZpZXdzWyBidWZmZXJWaWV3SW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERlcGVuZGVuY3koICdidWZmZXInLCBidWZmZXJWaWV3RGVmLmJ1ZmZlciApLnRoZW4oIGZ1bmN0aW9uICggYnVmZmVyICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBieXRlTGVuZ3RoID0gYnVmZmVyVmlld0RlZi5ieXRlTGVuZ3RoIHx8IDA7XG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVPZmZzZXQgPSBidWZmZXJWaWV3RGVmLmJ5dGVPZmZzZXQgfHwgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVmZmVyLnNsaWNlKCBieXRlT2Zmc2V0LCBieXRlT2Zmc2V0ICsgYnl0ZUxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNhY2Nlc3NvcnNcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGFjY2Vzc29ySW5kZXhcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxUSFJFRS5CdWZmZXJBdHRyaWJ1dGV8VEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZEFjY2Vzc29yID0gZnVuY3Rpb24gKCBhY2Nlc3NvckluZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHBhcnNlciA9IHRoaXM7XG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuanNvbjtcbiAgICBcbiAgICAgICAgICAgIHZhciBhY2Nlc3NvckRlZiA9IHRoaXMuanNvbi5hY2Nlc3NvcnNbIGFjY2Vzc29ySW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgIHZhciBwZW5kaW5nQnVmZmVyVmlld3MgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIGlmICggYWNjZXNzb3JEZWYuYnVmZmVyVmlldyAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHBlbmRpbmdCdWZmZXJWaWV3cy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3JywgYWNjZXNzb3JEZWYuYnVmZmVyVmlldyApICk7XG4gICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgIHBlbmRpbmdCdWZmZXJWaWV3cy5wdXNoKCBudWxsICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIGFjY2Vzc29yRGVmLnNwYXJzZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHBlbmRpbmdCdWZmZXJWaWV3cy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3JywgYWNjZXNzb3JEZWYuc3BhcnNlLmluZGljZXMuYnVmZmVyVmlldyApICk7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0J1ZmZlclZpZXdzLnB1c2goIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlclZpZXcnLCBhY2Nlc3NvckRlZi5zcGFyc2UudmFsdWVzLmJ1ZmZlclZpZXcgKSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nQnVmZmVyVmlld3MgKS50aGVuKCBmdW5jdGlvbiAoIGJ1ZmZlclZpZXdzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBidWZmZXJWaWV3ID0gYnVmZmVyVmlld3NbIDAgXTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgaXRlbVNpemUgPSBXRUJHTF9UWVBFX1NJWkVTWyBhY2Nlc3NvckRlZi50eXBlIF07XG4gICAgICAgICAgICAgICAgdmFyIFR5cGVkQXJyYXkgPSBXRUJHTF9DT01QT05FTlRfVFlQRVNbIGFjY2Vzc29yRGVmLmNvbXBvbmVudFR5cGUgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBGb3IgVkVDMzogaXRlbVNpemUgaXMgMywgZWxlbWVudEJ5dGVzIGlzIDQsIGl0ZW1CeXRlcyBpcyAxMi5cbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudEJ5dGVzID0gVHlwZWRBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbUJ5dGVzID0gZWxlbWVudEJ5dGVzICogaXRlbVNpemU7XG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVPZmZzZXQgPSBhY2Nlc3NvckRlZi5ieXRlT2Zmc2V0IHx8IDA7XG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVTdHJpZGUgPSBqc29uLmJ1ZmZlclZpZXdzWyBhY2Nlc3NvckRlZi5idWZmZXJWaWV3IF0uYnl0ZVN0cmlkZTtcbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsaXplZCA9IGFjY2Vzc29yRGVmLm5vcm1hbGl6ZWQgPT09IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIGFycmF5LCBidWZmZXJBdHRyaWJ1dGU7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gVGhlIGJ1ZmZlciBpcyBub3QgaW50ZXJsZWF2ZWQgaWYgdGhlIHN0cmlkZSBpcyB0aGUgaXRlbSBzaXplIGluIGJ5dGVzLlxuICAgICAgICAgICAgICAgIGlmICggYnl0ZVN0cmlkZSAmJiBieXRlU3RyaWRlICE9PSBpdGVtQnl0ZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpYkNhY2hlS2V5ID0gJ0ludGVybGVhdmVkQnVmZmVyOicgKyBhY2Nlc3NvckRlZi5idWZmZXJWaWV3ICsgJzonICsgYWNjZXNzb3JEZWYuY29tcG9uZW50VHlwZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGliID0gcGFyc2VyLmNhY2hlLmdldCggaWJDYWNoZUtleSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoICEgaWIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGZ1bGwgYnVmZmVyIGlmIGl0J3MgaW50ZXJsZWF2ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheSA9IG5ldyBUeXBlZEFycmF5KCBidWZmZXJWaWV3ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnRlZ2VyIHBhcmFtZXRlcnMgdG8gSUIvSUJBIGFyZSBpbiBhcnJheSBlbGVtZW50cywgbm90IGJ5dGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWIgPSBuZXcgVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXIoIGFycmF5LCBieXRlU3RyaWRlIC8gZWxlbWVudEJ5dGVzICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2FjaGUuYWRkKCBpYkNhY2hlS2V5LCBpYiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlckF0dHJpYnV0ZSA9IG5ldyBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSggaWIsIGl0ZW1TaXplLCBieXRlT2Zmc2V0IC8gZWxlbWVudEJ5dGVzLCBub3JtYWxpemVkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBidWZmZXJWaWV3ID09PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXkgPSBuZXcgVHlwZWRBcnJheSggYWNjZXNzb3JEZWYuY291bnQgKiBpdGVtU2l6ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXkgPSBuZXcgVHlwZWRBcnJheSggYnVmZmVyVmlldywgYnl0ZU9mZnNldCwgYWNjZXNzb3JEZWYuY291bnQgKiBpdGVtU2l6ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlckF0dHJpYnV0ZSA9IG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIGFycmF5LCBpdGVtU2l6ZSwgbm9ybWFsaXplZCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI3NwYXJzZS1hY2Nlc3NvcnNcbiAgICAgICAgICAgICAgICBpZiAoIGFjY2Vzc29yRGVmLnNwYXJzZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbVNpemVJbmRpY2VzID0gV0VCR0xfVFlQRV9TSVpFUy5TQ0FMQVI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBUeXBlZEFycmF5SW5kaWNlcyA9IFdFQkdMX0NPTVBPTkVOVF9UWVBFU1sgYWNjZXNzb3JEZWYuc3BhcnNlLmluZGljZXMuY29tcG9uZW50VHlwZSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgYnl0ZU9mZnNldEluZGljZXMgPSBhY2Nlc3NvckRlZi5zcGFyc2UuaW5kaWNlcy5ieXRlT2Zmc2V0IHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBieXRlT2Zmc2V0VmFsdWVzID0gYWNjZXNzb3JEZWYuc3BhcnNlLnZhbHVlcy5ieXRlT2Zmc2V0IHx8IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGFyc2VJbmRpY2VzID0gbmV3IFR5cGVkQXJyYXlJbmRpY2VzKCBidWZmZXJWaWV3c1sgMSBdLCBieXRlT2Zmc2V0SW5kaWNlcywgYWNjZXNzb3JEZWYuc3BhcnNlLmNvdW50ICogaXRlbVNpemVJbmRpY2VzICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGFyc2VWYWx1ZXMgPSBuZXcgVHlwZWRBcnJheSggYnVmZmVyVmlld3NbIDIgXSwgYnl0ZU9mZnNldFZhbHVlcywgYWNjZXNzb3JEZWYuc3BhcnNlLmNvdW50ICogaXRlbVNpemUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBidWZmZXJWaWV3ICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXZvaWQgbW9kaWZ5aW5nIHRoZSBvcmlnaW5hbCBBcnJheUJ1ZmZlciwgaWYgdGhlIGJ1ZmZlclZpZXcgd2Fzbid0IGluaXRpYWxpemVkIHdpdGggemVyb2VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyQXR0cmlidXRlLnNldEFycmF5KCBidWZmZXJBdHRyaWJ1dGUuYXJyYXkuc2xpY2UoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBzcGFyc2VJbmRpY2VzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gc3BhcnNlSW5kaWNlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyQXR0cmlidXRlLnNldFgoIGluZGV4LCBzcGFyc2VWYWx1ZXNbIGkgKiBpdGVtU2l6ZSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW1TaXplID49IDIgKSBidWZmZXJBdHRyaWJ1dGUuc2V0WSggaW5kZXgsIHNwYXJzZVZhbHVlc1sgaSAqIGl0ZW1TaXplICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW1TaXplID49IDMgKSBidWZmZXJBdHRyaWJ1dGUuc2V0WiggaW5kZXgsIHNwYXJzZVZhbHVlc1sgaSAqIGl0ZW1TaXplICsgMiBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW1TaXplID49IDQgKSBidWZmZXJBdHRyaWJ1dGUuc2V0VyggaW5kZXgsIHNwYXJzZVZhbHVlc1sgaSAqIGl0ZW1TaXplICsgMyBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW1TaXplID49IDUgKSB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBpdGVtU2l6ZSBpbiBzcGFyc2UgQnVmZmVyQXR0cmlidXRlLicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVmZmVyQXR0cmlidXRlO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI3RleHR1cmVzXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0ZXh0dXJlSW5kZXhcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxUSFJFRS5UZXh0dXJlPn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWRUZXh0dXJlID0gZnVuY3Rpb24gKCB0ZXh0dXJlSW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcGFyc2VyID0gdGhpcztcbiAgICAgICAgICAgIHZhciBqc29uID0gdGhpcy5qc29uO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgdGV4dHVyZUxvYWRlciA9IHRoaXMudGV4dHVyZUxvYWRlcjtcbiAgICBcbiAgICAgICAgICAgIHZhciBVUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7XG4gICAgXG4gICAgICAgICAgICB2YXIgdGV4dHVyZURlZiA9IGpzb24udGV4dHVyZXNbIHRleHR1cmVJbmRleCBdO1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGpzb24uaW1hZ2VzWyB0ZXh0dXJlRGVmLnNvdXJjZSBdO1xuICAgICAgICAgICAgdmFyIHNvdXJjZVVSSSA9IHNvdXJjZS51cmk7XG4gICAgICAgICAgICB2YXIgaXNPYmplY3RVUkwgPSBmYWxzZTtcbiAgICBcbiAgICAgICAgICAgIGlmICggc291cmNlLmJ1ZmZlclZpZXcgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBMb2FkIGJpbmFyeSBpbWFnZSBkYXRhIGZyb20gYnVmZmVyVmlldywgaWYgcHJvdmlkZWQuXG4gICAgXG4gICAgICAgICAgICAgICAgc291cmNlVVJJID0gcGFyc2VyLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3Jywgc291cmNlLmJ1ZmZlclZpZXcgKS50aGVuKCBmdW5jdGlvbiAoIGJ1ZmZlclZpZXcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlzT2JqZWN0VVJMID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYiggWyBidWZmZXJWaWV3IF0sIHsgdHlwZTogc291cmNlLm1pbWVUeXBlIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVVJJID0gVVJMLmNyZWF0ZU9iamVjdFVSTCggYmxvYiApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc291cmNlVVJJO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoIHNvdXJjZVVSSSApLnRoZW4oIGZ1bmN0aW9uICggc291cmNlVVJJICkge1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIExvYWQgVGV4dHVyZSByZXNvdXJjZS5cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbG9hZGVyID0gVEhSRUUuTG9hZGVyLkhhbmRsZXJzLmdldCggc291cmNlVVJJICkgfHwgdGV4dHVyZUxvYWRlcjtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSwgcmVqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBsb2FkZXIubG9hZCggcmVzb2x2ZVVSTCggc291cmNlVVJJLCBvcHRpb25zLnBhdGggKSwgcmVzb2x2ZSwgdW5kZWZpbmVkLCByZWplY3QgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB9ICkudGhlbiggZnVuY3Rpb24gKCB0ZXh0dXJlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHJlc291cmNlcyBhbmQgY29uZmlndXJlIFRleHR1cmUuXG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBpc09iamVjdFVSTCA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCggc291cmNlVVJJICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHRleHR1cmUuZmxpcFkgPSBmYWxzZTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRleHR1cmVEZWYubmFtZSAhPT0gdW5kZWZpbmVkICkgdGV4dHVyZS5uYW1lID0gdGV4dHVyZURlZi5uYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIHRleHR1cmUuZm9ybWF0ID0gdGV4dHVyZURlZi5mb3JtYXQgIT09IHVuZGVmaW5lZCA/IFdFQkdMX1RFWFRVUkVfRk9STUFUU1sgdGV4dHVyZURlZi5mb3JtYXQgXSA6IFRIUkVFLlJHQkFGb3JtYXQ7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB0ZXh0dXJlRGVmLmludGVybmFsRm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgdGV4dHVyZS5mb3JtYXQgIT09IFdFQkdMX1RFWFRVUkVfRk9STUFUU1sgdGV4dHVyZURlZi5pbnRlcm5hbEZvcm1hdCBdICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBUaHJlZS5qcyBkb2VzIG5vdCBzdXBwb3J0IHRleHR1cmUgaW50ZXJuYWxGb3JtYXQgd2hpY2ggaXMgZGlmZmVyZW50IGZyb20gdGV4dHVyZSBmb3JtYXQuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ludGVybmFsRm9ybWF0IHdpbGwgYmUgZm9yY2VkIHRvIGJlIHRoZSBzYW1lIHZhbHVlIGFzIGZvcm1hdC4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHRleHR1cmUudHlwZSA9IHRleHR1cmVEZWYudHlwZSAhPT0gdW5kZWZpbmVkID8gV0VCR0xfVEVYVFVSRV9EQVRBVFlQRVNbIHRleHR1cmVEZWYudHlwZSBdIDogVEhSRUUuVW5zaWduZWRCeXRlVHlwZTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2FtcGxlcnMgPSBqc29uLnNhbXBsZXJzIHx8IHt9O1xuICAgICAgICAgICAgICAgIHZhciBzYW1wbGVyID0gc2FtcGxlcnNbIHRleHR1cmVEZWYuc2FtcGxlciBdIHx8IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIHRleHR1cmUubWFnRmlsdGVyID0gV0VCR0xfRklMVEVSU1sgc2FtcGxlci5tYWdGaWx0ZXIgXSB8fCBUSFJFRS5MaW5lYXJGaWx0ZXI7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5taW5GaWx0ZXIgPSBXRUJHTF9GSUxURVJTWyBzYW1wbGVyLm1pbkZpbHRlciBdIHx8IFRIUkVFLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcjtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gV0VCR0xfV1JBUFBJTkdTWyBzYW1wbGVyLndyYXBTIF0gfHwgVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS53cmFwVCA9IFdFQkdMX1dSQVBQSU5HU1sgc2FtcGxlci53cmFwVCBdIHx8IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQXN5bmNocm9ub3VzbHkgYXNzaWducyBhIHRleHR1cmUgdG8gdGhlIGdpdmVuIG1hdGVyaWFsIHBhcmFtZXRlcnMuXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXRlcmlhbFBhcmFtc1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dHVyZU5hbWVcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHRleHR1cmVJbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUuYXNzaWduVGV4dHVyZSA9IGZ1bmN0aW9uICggbWF0ZXJpYWxQYXJhbXMsIHRleHR1cmVOYW1lLCB0ZXh0dXJlSW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREZXBlbmRlbmN5KCAndGV4dHVyZScsIHRleHR1cmVJbmRleCApLnRoZW4oIGZ1bmN0aW9uICggdGV4dHVyZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtc1sgdGV4dHVyZU5hbWUgXSA9IHRleHR1cmU7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI21hdGVyaWFsc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF0ZXJpYWxJbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFRIUkVFLk1hdGVyaWFsPn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWRNYXRlcmlhbCA9IGZ1bmN0aW9uICggbWF0ZXJpYWxJbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBwYXJzZXIgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGpzb24gPSB0aGlzLmpzb247XG4gICAgICAgICAgICB2YXIgZXh0ZW5zaW9ucyA9IHRoaXMuZXh0ZW5zaW9ucztcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbERlZiA9IHRoaXMuanNvbi5tYXRlcmlhbHNbIG1hdGVyaWFsSW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbFR5cGU7XG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWxQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbEV4dGVuc2lvbnMgPSBtYXRlcmlhbERlZi5leHRlbnNpb25zIHx8IHt9O1xuICAgIFxuICAgICAgICAgICAgdmFyIHBlbmRpbmcgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIGlmICggbWF0ZXJpYWxFeHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1MgXSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2dFeHRlbnNpb24gPSBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1MgXTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFR5cGUgPSBzZ0V4dGVuc2lvbi5nZXRNYXRlcmlhbFR5cGUoIG1hdGVyaWFsRGVmICk7XG4gICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKCBzZ0V4dGVuc2lvbi5leHRlbmRQYXJhbXMoIG1hdGVyaWFsUGFyYW1zLCBtYXRlcmlhbERlZiwgcGFyc2VyICkgKTtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1hdGVyaWFsRGVmLnBick1ldGFsbGljUm91Z2huZXNzICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjbWV0YWxsaWMtcm91Z2huZXNzLW1hdGVyaWFsXG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxUeXBlID0gVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWw7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG1ldGFsbGljUm91Z2huZXNzID0gbWF0ZXJpYWxEZWYucGJyTWV0YWxsaWNSb3VnaG5lc3M7XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxQYXJhbXMuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoIDEuMCwgMS4wLCAxLjAgKTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5vcGFjaXR5ID0gMS4wO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IG1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvcjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxQYXJhbXMuY29sb3IuZnJvbUFycmF5KCBhcnJheSApO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5vcGFjaXR5ID0gYXJyYXlbIDMgXTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnbWFwJywgbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZS5pbmRleCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLm1ldGFsbmVzcyA9IG1ldGFsbGljUm91Z2huZXNzLm1ldGFsbGljRmFjdG9yICE9PSB1bmRlZmluZWQgPyBtZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY0ZhY3RvciA6IDEuMDtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5yb3VnaG5lc3MgPSBtZXRhbGxpY1JvdWdobmVzcy5yb3VnaG5lc3NGYWN0b3IgIT09IHVuZGVmaW5lZCA/IG1ldGFsbGljUm91Z2huZXNzLnJvdWdobmVzc0ZhY3RvciA6IDEuMDtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG1ldGFsbGljUm91Z2huZXNzLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZUluZGV4ID0gbWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ21ldGFsbmVzc01hcCcsIHRleHR1cmVJbmRleCApICk7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAncm91Z2huZXNzTWFwJywgdGV4dHVyZUluZGV4ICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsVHlwZSA9IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCBtYXRlcmlhbERlZi5kb3VibGVTaWRlZCA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5zaWRlID0gVEhSRUUuRG91YmxlU2lkZTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBhbHBoYU1vZGUgPSBtYXRlcmlhbERlZi5hbHBoYU1vZGUgfHwgQUxQSEFfTU9ERVMuT1BBUVVFO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBhbHBoYU1vZGUgPT09IEFMUEhBX01PREVTLkJMRU5EICkge1xuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLnRyYW5zcGFyZW50ID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxQYXJhbXMudHJhbnNwYXJlbnQgPSBmYWxzZTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGFscGhhTW9kZSA9PT0gQUxQSEFfTU9ERVMuTUFTSyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxQYXJhbXMuYWxwaGFUZXN0ID0gbWF0ZXJpYWxEZWYuYWxwaGFDdXRvZmYgIT09IHVuZGVmaW5lZCA/IG1hdGVyaWFsRGVmLmFscGhhQ3V0b2ZmIDogMC41O1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggbWF0ZXJpYWxEZWYubm9ybWFsVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnbm9ybWFsTWFwJywgbWF0ZXJpYWxEZWYubm9ybWFsVGV4dHVyZS5pbmRleCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxQYXJhbXMubm9ybWFsU2NhbGUgPSBuZXcgVEhSRUUuVmVjdG9yMiggMSwgMSApO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWxEZWYubm9ybWFsVGV4dHVyZS5zY2FsZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5ub3JtYWxTY2FsZS5zZXQoIG1hdGVyaWFsRGVmLm5vcm1hbFRleHR1cmUuc2NhbGUsIG1hdGVyaWFsRGVmLm5vcm1hbFRleHR1cmUuc2NhbGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIG1hdGVyaWFsRGVmLm9jY2x1c2lvblRleHR1cmUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ2FvTWFwJywgbWF0ZXJpYWxEZWYub2NjbHVzaW9uVGV4dHVyZS5pbmRleCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbERlZi5vY2NsdXNpb25UZXh0dXJlLnN0cmVuZ3RoICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLmFvTWFwSW50ZW5zaXR5ID0gbWF0ZXJpYWxEZWYub2NjbHVzaW9uVGV4dHVyZS5zdHJlbmd0aDtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIG1hdGVyaWFsRGVmLmVtaXNzaXZlRmFjdG9yICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbFR5cGUgPT09IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5jb2xvciA9IG5ldyBUSFJFRS5Db2xvcigpLmZyb21BcnJheSggbWF0ZXJpYWxEZWYuZW1pc3NpdmVGYWN0b3IgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5lbWlzc2l2ZSA9IG5ldyBUSFJFRS5Db2xvcigpLmZyb21BcnJheSggbWF0ZXJpYWxEZWYuZW1pc3NpdmVGYWN0b3IgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIG1hdGVyaWFsRGVmLmVtaXNzaXZlVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWxUeXBlID09PSBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdtYXAnLCBtYXRlcmlhbERlZi5lbWlzc2l2ZVRleHR1cmUuaW5kZXggKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnZW1pc3NpdmVNYXAnLCBtYXRlcmlhbERlZi5lbWlzc2l2ZVRleHR1cmUuaW5kZXggKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApLnRoZW4oIGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWw7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbFR5cGUgPT09IFRIUkVFLlNoYWRlck1hdGVyaWFsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyBdLmNyZWF0ZU1hdGVyaWFsKCBtYXRlcmlhbFBhcmFtcyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IG1hdGVyaWFsVHlwZSggbWF0ZXJpYWxQYXJhbXMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbERlZi5uYW1lICE9PSB1bmRlZmluZWQgKSBtYXRlcmlhbC5uYW1lID0gbWF0ZXJpYWxEZWYubmFtZTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBOb3JtYWwgbWFwIHRleHR1cmVzIHVzZSBPcGVuR0wgY29udmVudGlvbnM6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI21hdGVyaWFsbm9ybWFsdGV4dHVyZVxuICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWwubm9ybWFsU2NhbGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm5vcm1hbFNjYWxlLnggPSAtIG1hdGVyaWFsLm5vcm1hbFNjYWxlLng7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGVtaXNzaXZlVGV4dHVyZSBhbmQgYmFzZUNvbG9yVGV4dHVyZSB1c2Ugc1JHQiBlbmNvZGluZy5cbiAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsLm1hcCApIG1hdGVyaWFsLm1hcC5lbmNvZGluZyA9IFRIUkVFLnNSR0JFbmNvZGluZztcbiAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsLmVtaXNzaXZlTWFwICkgbWF0ZXJpYWwuZW1pc3NpdmVNYXAuZW5jb2RpbmcgPSBUSFJFRS5zUkdCRW5jb2Rpbmc7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbERlZi5leHRyYXMgKSBtYXRlcmlhbC51c2VyRGF0YSA9IG1hdGVyaWFsRGVmLmV4dHJhcztcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2dlb21ldHJ5XG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gcHJpbWl0aXZlc1xuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PFRIUkVFLkJ1ZmZlckdlb21ldHJ5Pj59XG4gICAgICAgICAqL1xuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkR2VvbWV0cmllcyA9IGZ1bmN0aW9uICggcHJpbWl0aXZlcyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IHRoaXMucHJpbWl0aXZlQ2FjaGU7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREZXBlbmRlbmNpZXMoICdhY2Nlc3NvcicgKS50aGVuKCBmdW5jdGlvbiAoIGFjY2Vzc29ycyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cmllcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBwcmltaXRpdmVzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbWl0aXZlID0gcHJpbWl0aXZlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBTZWUgaWYgd2UndmUgYWxyZWFkeSBjcmVhdGVkIHRoaXMgZ2VvbWV0cnlcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlZCA9IGdldENhY2hlZEdlb21ldHJ5KCBjYWNoZSwgcHJpbWl0aXZlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2FjaGVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBjYWNoZWQgZ2VvbWV0cnkgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyaWVzLnB1c2goIGNhY2hlZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBnZW9tZXRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHByaW1pdGl2ZS5hdHRyaWJ1dGVzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGF0dHJpYnV0ZUlkIGluIGF0dHJpYnV0ZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZUVudHJ5ID0gYXR0cmlidXRlc1sgYXR0cmlidXRlSWQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyQXR0cmlidXRlID0gYWNjZXNzb3JzWyBhdHRyaWJ1dGVFbnRyeSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGF0dHJpYnV0ZUlkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdQT1NJVElPTic6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIGJ1ZmZlckF0dHJpYnV0ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ05PUk1BTCc6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdub3JtYWwnLCBidWZmZXJBdHRyaWJ1dGUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdURVhDT09SRF8wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVEVYQ09PUkQwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVEVYQ09PUkQnOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAndXYnLCBidWZmZXJBdHRyaWJ1dGUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdURVhDT09SRF8xJzpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3V2MicsIGJ1ZmZlckF0dHJpYnV0ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NPTE9SXzAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdDT0xPUjAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdDT0xPUic6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdjb2xvcicsIGJ1ZmZlckF0dHJpYnV0ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1dFSUdIVFNfMCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1dFSUdIVCc6IC8vIFdFSUdIVCBzZW1hbnRpYyBkZXByZWNhdGVkLlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnc2tpbldlaWdodCcsIGJ1ZmZlckF0dHJpYnV0ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0pPSU5UU18wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnSk9JTlQnOiAvLyBKT0lOVCBzZW1hbnRpYyBkZXByZWNhdGVkLlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnc2tpbkluZGV4JywgYnVmZmVyQXR0cmlidXRlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZS5pbmRpY2VzICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuc2V0SW5kZXgoIGFjY2Vzc29yc1sgcHJpbWl0aXZlLmluZGljZXMgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FjaGUgdGhpcyBnZW9tZXRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUucHVzaCgge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZTogcHJpbWl0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnZW9tZXRyeVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cmllcy5wdXNoKCBnZW9tZXRyeSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBnZW9tZXRyaWVzO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNtZXNoZXNcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG1lc2hJbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFRIUkVFLkdyb3VwfFRIUkVFLk1lc2h8VEhSRUUuU2tpbm5lZE1lc2g+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZE1lc2ggPSBmdW5jdGlvbiAoIG1lc2hJbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuanNvbjtcbiAgICAgICAgICAgIHZhciBleHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zO1xuICAgIFxuICAgICAgICAgICAgdmFyIG1lc2hEZWYgPSB0aGlzLmpzb24ubWVzaGVzWyBtZXNoSW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE11bHRpRGVwZW5kZW5jaWVzKCBbXG4gICAgXG4gICAgICAgICAgICAgICAgJ2FjY2Vzc29yJyxcbiAgICAgICAgICAgICAgICAnbWF0ZXJpYWwnXG4gICAgXG4gICAgICAgICAgICBdICkudGhlbiggZnVuY3Rpb24gKCBkZXBlbmRlbmNpZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHByaW1pdGl2ZXMgPSBtZXNoRGVmLnByaW1pdGl2ZXM7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLmxvYWRHZW9tZXRyaWVzKCBwcmltaXRpdmVzICkudGhlbiggZnVuY3Rpb24gKCBnZW9tZXRyaWVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gcHJpbWl0aXZlcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmltaXRpdmUgPSBwcmltaXRpdmVzWyBpIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBnZW9tZXRyaWVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBwcmltaXRpdmUubWF0ZXJpYWwgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY3JlYXRlRGVmYXVsdE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRlcGVuZGVuY2llcy5tYXRlcmlhbHNbIHByaW1pdGl2ZS5tYXRlcmlhbCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbC5hb01hcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBnZW9tZXRyeS5hdHRyaWJ1dGVzLnV2MiA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGdlb21ldHJ5LmF0dHJpYnV0ZXMudXYgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ1RIUkVFLkdMVEZMb2FkZXI6IER1cGxpY2F0aW5nIFVWcyB0byBzdXBwb3J0IGFvTWFwLicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICd1djInLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBnZW9tZXRyeS5hdHRyaWJ1dGVzLnV2LmFycmF5LCAyICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBtYXRlcmlhbCB3aWxsIGJlIG1vZGlmaWVkIGxhdGVyIG9uLCBjbG9uZSBpdCBub3cuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlVmVydGV4Q29sb3JzID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5jb2xvciAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZUZsYXRTaGFkaW5nID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1c2VTa2lubmluZyA9IG1lc2hEZWYuaXNTa2lubmVkTWVzaCA9PT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1c2VNb3JwaFRhcmdldHMgPSBwcmltaXRpdmUudGFyZ2V0cyAhPT0gdW5kZWZpbmVkO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1c2VWZXJ0ZXhDb2xvcnMgfHwgdXNlRmxhdFNoYWRpbmcgfHwgdXNlU2tpbm5pbmcgfHwgdXNlTW9ycGhUYXJnZXRzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWwuaXNHTFRGU3BlY3VsYXJHbG9zc2luZXNzTWF0ZXJpYWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGVjR2xvc3NFeHRlbnNpb24gPSBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1MgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBzcGVjR2xvc3NFeHRlbnNpb24uY2xvbmVNYXRlcmlhbCggbWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG1hdGVyaWFsLmNsb25lKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1c2VWZXJ0ZXhDb2xvcnMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwudmVydGV4Q29sb3JzID0gVEhSRUUuVmVydGV4Q29sb3JzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdXNlRmxhdFNoYWRpbmcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuZmxhdFNoYWRpbmcgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc2g7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuVFJJQU5HTEVTIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5UUklBTkdMRV9TVFJJUCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuVFJJQU5HTEVfRkFOIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLm1vZGUgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHVzZVNraW5uaW5nICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoID0gbmV3IFRIUkVFLlNraW5uZWRNZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2tpbm5pbmcgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2ggPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5UUklBTkdMRV9TVFJJUCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaC5kcmF3TW9kZSA9IFRIUkVFLlRyaWFuZ2xlU3RyaXBEcmF3TW9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFX0ZBTiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaC5kcmF3TW9kZSA9IFRIUkVFLlRyaWFuZ2xlRmFuRHJhd01vZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5MSU5FUyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuTElORV9TVFJJUCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuTElORV9MT09QICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZUtleSA9ICdMaW5lQmFzaWNNYXRlcmlhbDonICsgbWF0ZXJpYWwudXVpZDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGluZU1hdGVyaWFsID0gc2NvcGUuY2FjaGUuZ2V0KCBjYWNoZUtleSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISBsaW5lTWF0ZXJpYWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKCBsaW5lTWF0ZXJpYWwsIG1hdGVyaWFsICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVNYXRlcmlhbC5jb2xvci5jb3B5KCBtYXRlcmlhbC5jb2xvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lTWF0ZXJpYWwubGlnaHRzID0gZmFsc2U7ICAvLyBMaW5lQmFzaWNNYXRlcmlhbCBkb2Vzbid0IHN1cHBvcnQgbGlnaHRzIHlldFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5jYWNoZS5hZGQoIGNhY2hlS2V5LCBsaW5lTWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBsaW5lTWF0ZXJpYWw7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLkxJTkVTICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoID0gbmV3IFRIUkVFLkxpbmVTZWdtZW50cyggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5MSU5FX1NUUklQICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoID0gbmV3IFRIUkVFLkxpbmUoIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2ggPSBuZXcgVEhSRUUuTGluZUxvb3AoIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuUE9JTlRTICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZUtleSA9ICdQb2ludHNNYXRlcmlhbDonICsgbWF0ZXJpYWwudXVpZDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnRzTWF0ZXJpYWwgPSBzY29wZS5jYWNoZS5nZXQoIGNhY2hlS2V5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhIHBvaW50c01hdGVyaWFsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNNYXRlcmlhbCA9IG5ldyBUSFJFRS5Qb2ludHNNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKCBwb2ludHNNYXRlcmlhbCwgbWF0ZXJpYWwgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzTWF0ZXJpYWwuY29sb3IuY29weSggbWF0ZXJpYWwuY29sb3IgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzTWF0ZXJpYWwubWFwID0gbWF0ZXJpYWwubWFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNNYXRlcmlhbC5saWdodHMgPSBmYWxzZTsgIC8vIFBvaW50c01hdGVyaWFsIGRvZXNuJ3Qgc3VwcG9ydCBsaWdodHMgeWV0XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmNhY2hlLmFkZCggY2FjaGVLZXksIHBvaW50c01hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gcG9pbnRzTWF0ZXJpYWw7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaCA9IG5ldyBUSFJFRS5Qb2ludHMoIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBQcmltaXRpdmUgbW9kZSB1bnN1cHBvcnRlZDogJyArIHByaW1pdGl2ZS5tb2RlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNoLm5hbWUgPSBtZXNoRGVmLm5hbWUgfHwgKCAnbWVzaF8nICsgbWVzaEluZGV4ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHVzZU1vcnBoVGFyZ2V0cyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRNb3JwaFRhcmdldHMoIG1lc2gsIG1lc2hEZWYsIHByaW1pdGl2ZSwgZGVwZW5kZW5jaWVzLmFjY2Vzc29ycyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtZXNoRGVmLmV4dHJhcyAhPT0gdW5kZWZpbmVkICkgbWVzaC51c2VyRGF0YSA9IG1lc2hEZWYuZXh0cmFzO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwcmltaXRpdmUuZXh0cmFzICE9PSB1bmRlZmluZWQgKSBtZXNoLmdlb21ldHJ5LnVzZXJEYXRhID0gcHJpbWl0aXZlLmV4dHJhcztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBTcGVjdWxhci1HbG9zc2luZXNzLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbC5pc0dMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbCA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoLm9uQmVmb3JlUmVuZGVyID0gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTIF0ucmVmcmVzaFVuaWZvcm1zO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwcmltaXRpdmVzLmxlbmd0aCA+IDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaC5uYW1lICs9ICdfJyArIGk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXAuYWRkKCBtZXNoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNoO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBncm91cDtcbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjY2FtZXJhc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gY2FtZXJhSW5kZXhcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxUSFJFRS5DYW1lcmE+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZENhbWVyYSA9IGZ1bmN0aW9uICggY2FtZXJhSW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgY2FtZXJhO1xuICAgICAgICAgICAgdmFyIGNhbWVyYURlZiA9IHRoaXMuanNvbi5jYW1lcmFzWyBjYW1lcmFJbmRleCBdO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IGNhbWVyYURlZlsgY2FtZXJhRGVmLnR5cGUgXTtcbiAgICBcbiAgICAgICAgICAgIGlmICggISBwYXJhbXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogTWlzc2luZyBjYW1lcmEgcGFyYW1ldGVycy4nICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCBjYW1lcmFEZWYudHlwZSA9PT0gJ3BlcnNwZWN0aXZlJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYXNwZWN0UmF0aW8gPSBwYXJhbXMuYXNwZWN0UmF0aW8gfHwgMTtcbiAgICAgICAgICAgICAgICB2YXIgeGZvdiA9IHBhcmFtcy55Zm92ICogYXNwZWN0UmF0aW87XG4gICAgXG4gICAgICAgICAgICAgICAgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKCBUSFJFRS5NYXRoLnJhZFRvRGVnKCB4Zm92ICksIGFzcGVjdFJhdGlvLCBwYXJhbXMuem5lYXIgfHwgMSwgcGFyYW1zLnpmYXIgfHwgMmU2ICk7XG4gICAgXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBjYW1lcmFEZWYudHlwZSA9PT0gJ29ydGhvZ3JhcGhpYycgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgY2FtZXJhID0gbmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSggcGFyYW1zLnhtYWcgLyAtIDIsIHBhcmFtcy54bWFnIC8gMiwgcGFyYW1zLnltYWcgLyAyLCBwYXJhbXMueW1hZyAvIC0gMiwgcGFyYW1zLnpuZWFyLCBwYXJhbXMuemZhciApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCBjYW1lcmFEZWYubmFtZSAhPT0gdW5kZWZpbmVkICkgY2FtZXJhLm5hbWUgPSBjYW1lcmFEZWYubmFtZTtcbiAgICAgICAgICAgIGlmICggY2FtZXJhRGVmLmV4dHJhcyApIGNhbWVyYS51c2VyRGF0YSA9IGNhbWVyYURlZi5leHRyYXM7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCBjYW1lcmEgKTtcbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNza2luc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc2tpbkluZGV4XG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8T2JqZWN0Pn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWRTa2luID0gZnVuY3Rpb24gKCBza2luSW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgc2tpbkRlZiA9IHRoaXMuanNvbi5za2luc1sgc2tpbkluZGV4IF07XG4gICAgXG4gICAgICAgICAgICB2YXIgc2tpbkVudHJ5ID0geyBqb2ludHM6IHNraW5EZWYuam9pbnRzIH07XG4gICAgXG4gICAgICAgICAgICBpZiAoIHNraW5EZWYuaW52ZXJzZUJpbmRNYXRyaWNlcyA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoIHNraW5FbnRyeSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ2FjY2Vzc29yJywgc2tpbkRlZi5pbnZlcnNlQmluZE1hdHJpY2VzICkudGhlbiggZnVuY3Rpb24gKCBhY2Nlc3NvciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBza2luRW50cnkuaW52ZXJzZUJpbmRNYXRyaWNlcyA9IGFjY2Vzc29yO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBza2luRW50cnk7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjYW5pbWF0aW9uc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5pbWF0aW9uSW5kZXhcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxUSFJFRS5BbmltYXRpb25DbGlwPn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWRBbmltYXRpb24gPSBmdW5jdGlvbiAoIGFuaW1hdGlvbkluZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGpzb24gPSB0aGlzLmpzb247XG4gICAgXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uRGVmID0gdGhpcy5qc29uLmFuaW1hdGlvbnNbIGFuaW1hdGlvbkluZGV4IF07XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRNdWx0aURlcGVuZGVuY2llcyggW1xuICAgIFxuICAgICAgICAgICAgICAgICdhY2Nlc3NvcicsXG4gICAgICAgICAgICAgICAgJ25vZGUnXG4gICAgXG4gICAgICAgICAgICBdICkudGhlbiggZnVuY3Rpb24gKCBkZXBlbmRlbmNpZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRyYWNrcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBhbmltYXRpb25EZWYuY2hhbm5lbHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFubmVsID0gYW5pbWF0aW9uRGVmLmNoYW5uZWxzWyBpIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBzYW1wbGVyID0gYW5pbWF0aW9uRGVmLnNhbXBsZXJzWyBjaGFubmVsLnNhbXBsZXIgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzYW1wbGVyICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGNoYW5uZWwudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB0YXJnZXQubm9kZSAhPT0gdW5kZWZpbmVkID8gdGFyZ2V0Lm5vZGUgOiB0YXJnZXQuaWQ7IC8vIE5PVEU6IHRhcmdldC5pZCBpcyBkZXByZWNhdGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gYW5pbWF0aW9uRGVmLnBhcmFtZXRlcnMgIT09IHVuZGVmaW5lZCA/IGFuaW1hdGlvbkRlZi5wYXJhbWV0ZXJzWyBzYW1wbGVyLmlucHV0IF0gOiBzYW1wbGVyLmlucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IGFuaW1hdGlvbkRlZi5wYXJhbWV0ZXJzICE9PSB1bmRlZmluZWQgPyBhbmltYXRpb25EZWYucGFyYW1ldGVyc1sgc2FtcGxlci5vdXRwdXQgXSA6IHNhbXBsZXIub3V0cHV0O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0QWNjZXNzb3IgPSBkZXBlbmRlbmNpZXMuYWNjZXNzb3JzWyBpbnB1dCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dEFjY2Vzc29yID0gZGVwZW5kZW5jaWVzLmFjY2Vzc29yc1sgb3V0cHV0IF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGRlcGVuZGVuY2llcy5ub2Rlc1sgbmFtZSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUudXBkYXRlTWF0cml4KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5tYXRyaXhBdXRvVXBkYXRlID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgVHlwZWRLZXlmcmFtZVRyYWNrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIFBBVEhfUFJPUEVSVElFU1sgdGFyZ2V0LnBhdGggXSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBQQVRIX1BST1BFUlRJRVMud2VpZ2h0czpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVkS2V5ZnJhbWVUcmFjayA9IFRIUkVFLk51bWJlcktleWZyYW1lVHJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBQQVRIX1BST1BFUlRJRVMucm90YXRpb246XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUeXBlZEtleWZyYW1lVHJhY2sgPSBUSFJFRS5RdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFBBVEhfUFJPUEVSVElFUy5wb3NpdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBQQVRIX1BST1BFUlRJRVMuc2NhbGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUeXBlZEtleWZyYW1lVHJhY2sgPSBUSFJFRS5WZWN0b3JLZXlmcmFtZVRyYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXROYW1lID0gbm9kZS5uYW1lID8gbm9kZS5uYW1lIDogbm9kZS51dWlkO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnRlcnBvbGF0aW9uID0gc2FtcGxlci5pbnRlcnBvbGF0aW9uICE9PSB1bmRlZmluZWQgPyBJTlRFUlBPTEFUSU9OWyBzYW1wbGVyLmludGVycG9sYXRpb24gXSA6IFRIUkVFLkludGVycG9sYXRlTGluZWFyO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXROYW1lcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggUEFUSF9QUk9QRVJUSUVTWyB0YXJnZXQucGF0aCBdID09PSBQQVRIX1BST1BFUlRJRVMud2VpZ2h0cyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9kZSBzaG91bGQgYmUgVEhSRUUuR3JvdXAgaGVyZSBidXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUEFUSF9QUk9QRVJUSUVTLndlaWdodHMobW9ycGhUYXJnZXRJbmZsdWVuY2VzKSBzaG91bGQgYmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHByb3BlcnR5IG9mIGEgbWVzaCBvYmplY3QgdW5kZXIgbm9kZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU28gZmluZGluZyB0YXJnZXRzIGhlcmUuXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUudHJhdmVyc2UoIGZ1bmN0aW9uICggb2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvYmplY3QuaXNNZXNoID09PSB0cnVlICYmIG9iamVjdC5tYXRlcmlhbC5tb3JwaFRhcmdldHMgPT09IHRydWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TmFtZXMucHVzaCggb2JqZWN0Lm5hbWUgPyBvYmplY3QubmFtZSA6IG9iamVjdC51dWlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lcy5wdXNoKCB0YXJnZXROYW1lICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtleWZyYW1lVHJhY2sub3B0aW1pemUoKSB3aWxsIG1vZGlmeSBnaXZlbiAndGltZXMnIGFuZCAndmFsdWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1ZmZlcnMgYmVmb3JlIGNyZWF0aW5nIGEgdHJ1bmNhdGVkIGNvcHkgdG8ga2VlcC4gQmVjYXVzZSBidWZmZXJzIG1heVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlIHJldXNlZCBieSBvdGhlciB0cmFja3MsIG1ha2UgY29waWVzIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwLCBqbCA9IHRhcmdldE5hbWVzLmxlbmd0aDsgaiA8IGpsOyBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2sgPSBuZXcgVHlwZWRLZXlmcmFtZVRyYWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TmFtZXNbIGogXSArICcuJyArIFBBVEhfUFJPUEVSVElFU1sgdGFyZ2V0LnBhdGggXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRIUkVFLkFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UoIGlucHV0QWNjZXNzb3IuYXJyYXksIDAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRIUkVFLkFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UoIG91dHB1dEFjY2Vzc29yLmFycmF5LCAwICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnBvbGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhlcmUgaXMgdGhlIHRyaWNrIHRvIGVuYWJsZSBjdXN0b20gaW50ZXJwb2xhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGVzIC5jcmVhdGVJbnRlcnBvbGFudCBpbiBhIGZhY3RvcnkgbWV0aG9kIHdoaWNoIGNyZWF0ZXMgY3VzdG9tIGludGVycG9sYXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2FtcGxlci5pbnRlcnBvbGF0aW9uID09PSAnQ1VCSUNTUExJTkUnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suY3JlYXRlSW50ZXJwb2xhbnQgPSBmdW5jdGlvbiAoIHJlc3VsdCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBIENVQklDU1BMSU5FIGtleWZyYW1lIGluIGdsVEYgaGFzIHRocmVlIG91dHB1dCB2YWx1ZXMgZm9yIGVhY2ggaW5wdXQgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwcmVzZW50aW5nIGluVGFuZ2VudCwgc3BsaW5lVmVydGV4LCBhbmQgb3V0VGFuZ2VudC4gQXMgYSByZXN1bHQsIHRyYWNrLmdldFZhbHVlU2l6ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbXVzdCBiZSBkaXZpZGVkIGJ5IHRocmVlIHRvIGdldCB0aGUgaW50ZXJwb2xhbnQncyBzYW1wbGVTaXplIGFyZ3VtZW50LlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQoIHRoaXMudGltZXMsIHRoaXMudmFsdWVzLCB0aGlzLmdldFZhbHVlU2l6ZSgpIC8gMywgcmVzdWx0ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrcy5wdXNoKCB0cmFjayApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGFuaW1hdGlvbkRlZi5uYW1lICE9PSB1bmRlZmluZWQgPyBhbmltYXRpb25EZWYubmFtZSA6ICdhbmltYXRpb25fJyArIGFuaW1hdGlvbkluZGV4O1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuQW5pbWF0aW9uQ2xpcCggbmFtZSwgdW5kZWZpbmVkLCB0cmFja3MgKTtcbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNub2Rlcy1hbmQtaGllcmFyY2h5XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBub2RlSW5kZXhcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxUSFJFRS5PYmplY3QzRD59XG4gICAgICAgICAqL1xuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkTm9kZSA9IGZ1bmN0aW9uICggbm9kZUluZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGpzb24gPSB0aGlzLmpzb247XG4gICAgICAgICAgICB2YXIgZXh0ZW5zaW9ucyA9IHRoaXMuZXh0ZW5zaW9ucztcbiAgICBcbiAgICAgICAgICAgIHZhciBtZXNoUmVmZXJlbmNlcyA9IHRoaXMuanNvbi5tZXNoUmVmZXJlbmNlcztcbiAgICAgICAgICAgIHZhciBtZXNoVXNlcyA9IHRoaXMuanNvbi5tZXNoVXNlcztcbiAgICBcbiAgICAgICAgICAgIHZhciBub2RlRGVmID0gdGhpcy5qc29uLm5vZGVzWyBub2RlSW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE11bHRpRGVwZW5kZW5jaWVzKCBbXG4gICAgXG4gICAgICAgICAgICAgICAgJ21lc2gnLFxuICAgICAgICAgICAgICAgICdza2luJyxcbiAgICAgICAgICAgICAgICAnY2FtZXJhJ1xuICAgIFxuICAgICAgICAgICAgXSApLnRoZW4oIGZ1bmN0aW9uICggZGVwZW5kZW5jaWVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBub2RlO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbm9kZURlZi5pc0JvbmUgPT09IHRydWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgVEhSRUUuQm9uZSgpO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG5vZGVEZWYubWVzaCAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzaCA9IGRlcGVuZGVuY2llcy5tZXNoZXNbIG5vZGVEZWYubWVzaCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBub2RlID0gbWVzaC5jbG9uZSgpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgU3BlY3VsYXItR2xvc3NpbmVzc1xuICAgICAgICAgICAgICAgICAgICBpZiAoIG1lc2guaXNHcm91cCA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBtZXNoLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IG1lc2guY2hpbGRyZW5bIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm1hdGVyaWFsICYmIGNoaWxkLm1hdGVyaWFsLmlzR0xURlNwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLmNoaWxkcmVuWyBpIF0ub25CZWZvcmVSZW5kZXIgPSBjaGlsZC5vbkJlZm9yZVJlbmRlcjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1lc2gubWF0ZXJpYWwgJiYgbWVzaC5tYXRlcmlhbC5pc0dMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbCA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLm9uQmVmb3JlUmVuZGVyID0gbWVzaC5vbkJlZm9yZVJlbmRlcjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1lc2hSZWZlcmVuY2VzWyBub2RlRGVmLm1lc2ggXSA+IDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLm5hbWUgKz0gJ19pbnN0YW5jZV8nICsgbWVzaFVzZXNbIG5vZGVEZWYubWVzaCBdICsrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbm9kZURlZi5jYW1lcmEgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGRlcGVuZGVuY2llcy5jYW1lcmFzWyBub2RlRGVmLmNhbWVyYSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG5vZGVEZWYuZXh0ZW5zaW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICYmIG5vZGVEZWYuZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTElHSFRTIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAmJiBub2RlRGVmLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0xJR0hUUyBdLmxpZ2h0ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaWdodHMgPSBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9MSUdIVFMgXS5saWdodHM7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBsaWdodHNbIG5vZGVEZWYuZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTElHSFRTIF0ubGlnaHQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBub2RlID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbm9kZURlZi5uYW1lICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5vZGUubmFtZSA9IFRIUkVFLlByb3BlcnR5QmluZGluZy5zYW5pdGl6ZU5vZGVOYW1lKCBub2RlRGVmLm5hbWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBub2RlRGVmLmV4dHJhcyApIG5vZGUudXNlckRhdGEgPSBub2RlRGVmLmV4dHJhcztcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG5vZGVEZWYubWF0cml4ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuICAgICAgICAgICAgICAgICAgICBtYXRyaXguZnJvbUFycmF5KCBub2RlRGVmLm1hdHJpeCApO1xuICAgICAgICAgICAgICAgICAgICBub2RlLmFwcGx5TWF0cml4KCBtYXRyaXggKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG5vZGVEZWYudHJhbnNsYXRpb24gIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucG9zaXRpb24uZnJvbUFycmF5KCBub2RlRGVmLnRyYW5zbGF0aW9uICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlRGVmLnJvdGF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnF1YXRlcm5pb24uZnJvbUFycmF5KCBub2RlRGVmLnJvdGF0aW9uICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlRGVmLnNjYWxlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNjYWxlLmZyb21BcnJheSggbm9kZURlZi5zY2FsZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI3NjZW5lc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NlbmVJbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFRIUkVFLlNjZW5lPn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWRTY2VuZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgIC8vIHNjZW5lIG5vZGUgaGllcmFjaHkgYnVpbGRlclxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGROb2RlSGllcmFjaHkoIG5vZGVJZCwgcGFyZW50T2JqZWN0LCBqc29uLCBhbGxOb2Rlcywgc2tpbnMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBhbGxOb2Rlc1sgbm9kZUlkIF07XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVEZWYgPSBqc29uLm5vZGVzWyBub2RlSWQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBidWlsZCBza2VsZXRvbiBoZXJlIGFzIHdlbGxcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG5vZGVEZWYuc2tpbiAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzaGVzID0gbm9kZS5pc0dyb3VwID09PSB0cnVlID8gbm9kZS5jaGlsZHJlbiA6IFsgbm9kZSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gbWVzaGVzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc2ggPSBtZXNoZXNbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBza2luRW50cnkgPSBza2luc1sgbm9kZURlZi5za2luIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW52ZXJzZXMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBqID0gMCwgamwgPSBza2luRW50cnkuam9pbnRzLmxlbmd0aDsgaiA8IGpsOyBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqb2ludElkID0gc2tpbkVudHJ5LmpvaW50c1sgaiBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqb2ludE5vZGUgPSBhbGxOb2Rlc1sgam9pbnRJZCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggam9pbnROb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lcy5wdXNoKCBqb2ludE5vZGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2tpbkVudHJ5LmludmVyc2VCaW5kTWF0cmljZXMgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdC5mcm9tQXJyYXkoIHNraW5FbnRyeS5pbnZlcnNlQmluZE1hdHJpY2VzLmFycmF5LCBqICogMTYgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW52ZXJzZXMucHVzaCggbWF0ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogSm9pbnQgXCIlc1wiIGNvdWxkIG5vdCBiZSBmb3VuZC4nLCBqb2ludElkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzaC5iaW5kKCBuZXcgVEhSRUUuU2tlbGV0b24oIGJvbmVzLCBib25lSW52ZXJzZXMgKSwgbWVzaC5tYXRyaXhXb3JsZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGJ1aWxkIG5vZGUgaGllcmFjaHlcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJlbnRPYmplY3QuYWRkKCBub2RlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBub2RlRGVmLmNoaWxkcmVuICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBub2RlRGVmLmNoaWxkcmVuO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlblsgaSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGROb2RlSGllcmFjaHkoIGNoaWxkLCBub2RlLCBqc29uLCBhbGxOb2Rlcywgc2tpbnMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBsb2FkU2NlbmUoIHNjZW5lSW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGpzb24gPSB0aGlzLmpzb247XG4gICAgICAgICAgICAgICAgdmFyIGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG4gICAgICAgICAgICAgICAgdmFyIHNjZW5lRGVmID0gdGhpcy5qc29uLnNjZW5lc1sgc2NlbmVJbmRleCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE11bHRpRGVwZW5kZW5jaWVzKCBbXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICdub2RlJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NraW4nXG4gICAgXG4gICAgICAgICAgICAgICAgXSApLnRoZW4oIGZ1bmN0aW9uICggZGVwZW5kZW5jaWVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzY2VuZURlZi5uYW1lICE9PSB1bmRlZmluZWQgKSBzY2VuZS5uYW1lID0gc2NlbmVEZWYubmFtZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzY2VuZURlZi5leHRyYXMgKSBzY2VuZS51c2VyRGF0YSA9IHNjZW5lRGVmLmV4dHJhcztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVJZHMgPSBzY2VuZURlZi5ub2RlcyB8fCBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IG5vZGVJZHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZE5vZGVIaWVyYWNoeSggbm9kZUlkc1sgaSBdLCBzY2VuZSwganNvbiwgZGVwZW5kZW5jaWVzLm5vZGVzLCBkZXBlbmRlbmNpZXMuc2tpbnMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBBbWJpZW50IGxpZ2h0aW5nLCBpZiBwcmVzZW50LCBpcyBhbHdheXMgYXR0YWNoZWQgdG8gdGhlIHNjZW5lIHJvb3QuXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2NlbmVEZWYuZXh0ZW5zaW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBzY2VuZURlZi5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9MSUdIVFMgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBzY2VuZURlZi5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9MSUdIVFMgXS5saWdodCAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpZ2h0cyA9IGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0xJR0hUUyBdLmxpZ2h0cztcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLmFkZCggbGlnaHRzWyBzY2VuZURlZi5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9MSUdIVFMgXS5saWdodCBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjZW5lO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgIH0oKTtcbiAgICBcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXI7XG4gICAgXG4gICAgfSApKCk7IiwiLypcbiAqIEdQVSBQYXJ0aWNsZSBTeXN0ZW1cbiAqIEBhdXRob3IgZmxpbXNoYXcgLSBDaGFybGllIEhvZXkgLSBodHRwOi8vY2hhcmxpZWhvZXkuY29tXG4gKlxuICogQSBzaW1wbGUgdG8gdXNlLCBnZW5lcmFsIHB1cnBvc2UgR1BVIHN5c3RlbS4gUGFydGljbGVzIGFyZSBzcGF3bi1hbmQtZm9yZ2V0IHdpdGhcbiAqIHNldmVyYWwgb3B0aW9ucyBhdmFpbGFibGUsIGFuZCBkbyBub3QgcmVxdWlyZSBtb25pdG9yaW5nIG9yIGNsZWFudXAgYWZ0ZXIgc3Bhd25pbmcuXG4gKiBCZWNhdXNlIHRoZSBwYXRocyBvZiBhbGwgcGFydGljbGVzIGFyZSBjb21wbGV0ZWx5IGRldGVybWluaXN0aWMgb25jZSBzcGF3bmVkLCB0aGUgc2NhbGVcbiAqIGFuZCBkaXJlY3Rpb24gb2YgdGltZSBpcyBhbHNvIHZhcmlhYmxlLlxuICpcbiAqIEN1cnJlbnRseSB1c2VzIGEgc3RhdGljIHdyYXBwaW5nIHBlcmxpbiBub2lzZSB0ZXh0dXJlIGZvciB0dXJidWxlbmNlLCBhbmQgYSBzbWFsbCBwbmcgdGV4dHVyZSBmb3JcbiAqIHBhcnRpY2xlcywgYnV0IGFkZGluZyBzdXBwb3J0IGZvciBhIHBhcnRpY2xlIHRleHR1cmUgYXRsYXMgb3IgY2hhbmdpbmcgdG8gYSBkaWZmZXJlbnQgdHlwZSBvZiB0dXJidWxlbmNlXG4gKiB3b3VsZCBiZSBhIGZhaXJseSBsaWdodCBkYXkncyB3b3JrLlxuICpcbiAqIFNoYWRlciBhbmQgamF2YXNjcmlwdCBwYWNraW5nIGNvZGUgZGVycml2ZWQgZnJvbSBzZXZlcmFsIFN0YWNrIE92ZXJmbG93IGV4YW1wbGVzLlxuICpcbiAqL1xuXG5USFJFRS5HUFVQYXJ0aWNsZVN5c3RlbSA9IGZ1bmN0aW9uICggb3B0aW9ucyApIHtcblxuXHRUSFJFRS5PYmplY3QzRC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0Ly8gcGFyc2Ugb3B0aW9ucyBhbmQgdXNlIGRlZmF1bHRzXG5cblx0dGhpcy5QQVJUSUNMRV9DT1VOVCA9IG9wdGlvbnMubWF4UGFydGljbGVzIHx8IDEwMDAwMDA7XG5cdHRoaXMuUEFSVElDTEVfQ09OVEFJTkVSUyA9IG9wdGlvbnMuY29udGFpbmVyQ291bnQgfHwgMTtcblxuXHR0aGlzLlBBUlRJQ0xFX05PSVNFX1RFWFRVUkUgPSBvcHRpb25zLnBhcnRpY2xlTm9pc2VUZXggfHwgbnVsbDtcblx0dGhpcy5QQVJUSUNMRV9TUFJJVEVfVEVYVFVSRSA9IG9wdGlvbnMucGFydGljbGVTcHJpdGVUZXggfHwgbnVsbDtcblxuXHR0aGlzLlBBUlRJQ0xFU19QRVJfQ09OVEFJTkVSID0gTWF0aC5jZWlsKCB0aGlzLlBBUlRJQ0xFX0NPVU5UIC8gdGhpcy5QQVJUSUNMRV9DT05UQUlORVJTICk7XG5cdHRoaXMuUEFSVElDTEVfQ1VSU09SID0gMDtcblx0dGhpcy50aW1lID0gMDtcblx0dGhpcy5wYXJ0aWNsZUNvbnRhaW5lcnMgPSBbXTtcblx0dGhpcy5yYW5kID0gW107XG5cblx0Ly8gY3VzdG9tIHZlcnRleCBhbmQgZnJhZ2VtZW50IHNoYWRlclxuXG5cdHZhciBHUFVQYXJ0aWNsZVNoYWRlciA9IHtcblxuXHRcdHZlcnRleFNoYWRlcjogW1xuXG5cdFx0XHQndW5pZm9ybSBmbG9hdCB1VGltZTsnLFxuXHRcdFx0J3VuaWZvcm0gZmxvYXQgdVNjYWxlOycsXG5cdFx0XHQndW5pZm9ybSBzYW1wbGVyMkQgdE5vaXNlOycsXG5cblx0XHRcdCdhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvblN0YXJ0OycsXG5cdFx0XHQnYXR0cmlidXRlIGZsb2F0IHN0YXJ0VGltZTsnLFxuXHRcdFx0J2F0dHJpYnV0ZSB2ZWMzIHZlbG9jaXR5OycsXG5cdFx0XHQnYXR0cmlidXRlIGZsb2F0IHR1cmJ1bGVuY2U7Jyxcblx0XHRcdCdhdHRyaWJ1dGUgdmVjMyBjb2xvcjsnLFxuXHRcdFx0J2F0dHJpYnV0ZSBmbG9hdCBzaXplOycsXG5cdFx0XHQnYXR0cmlidXRlIGZsb2F0IGxpZmVUaW1lOycsXG5cblx0XHRcdCd2YXJ5aW5nIHZlYzQgdkNvbG9yOycsXG5cdFx0XHQndmFyeWluZyBmbG9hdCBsaWZlTGVmdDsnLFxuXG5cdFx0XHQndm9pZCBtYWluKCkgeycsXG5cblx0XHRcdC8vIHVucGFjayB0aGluZ3MgZnJvbSBvdXIgYXR0cmlidXRlcydcblxuXHRcdFx0J1x0dkNvbG9yID0gdmVjNCggY29sb3IsIDEuMCApOycsXG5cblx0XHRcdC8vIGNvbnZlcnQgb3VyIHZlbG9jaXR5IGJhY2sgaW50byBhIHZhbHVlIHdlIGNhbiB1c2UnXG5cblx0XHRcdCdcdHZlYzMgbmV3UG9zaXRpb247Jyxcblx0XHRcdCdcdHZlYzMgdjsnLFxuXG5cdFx0XHQnXHRmbG9hdCB0aW1lRWxhcHNlZCA9IHVUaW1lIC0gc3RhcnRUaW1lOycsXG5cblx0XHRcdCdcdGxpZmVMZWZ0ID0gMS4wIC0gKCB0aW1lRWxhcHNlZCAvIGxpZmVUaW1lICk7JyxcblxuXHRcdFx0J1x0Z2xfUG9pbnRTaXplID0gKCB1U2NhbGUgKiBzaXplICkgKiBsaWZlTGVmdDsnLFxuXG5cdFx0XHQnXHR2LnggPSAoIHZlbG9jaXR5LnggLSAwLjUgKSAqIDMuMDsnLFxuXHRcdFx0J1x0di55ID0gKCB2ZWxvY2l0eS55IC0gMC41ICkgKiAzLjA7Jyxcblx0XHRcdCdcdHYueiA9ICggdmVsb2NpdHkueiAtIDAuNSApICogMy4wOycsXG5cblx0XHRcdCdcdG5ld1Bvc2l0aW9uID0gcG9zaXRpb25TdGFydCArICggdiAqIDEwLjAgKSAqIHRpbWVFbGFwc2VkOycsXG5cblx0XHRcdCdcdHZlYzMgbm9pc2UgPSB0ZXh0dXJlMkQoIHROb2lzZSwgdmVjMiggbmV3UG9zaXRpb24ueCAqIDAuMDE1ICsgKCB1VGltZSAqIDAuMDUgKSwgbmV3UG9zaXRpb24ueSAqIDAuMDIgKyAoIHVUaW1lICogMC4wMTUgKSApICkucmdiOycsXG5cdFx0XHQnXHR2ZWMzIG5vaXNlVmVsID0gKCBub2lzZS5yZ2IgLSAwLjUgKSAqIDMwLjA7JyxcblxuXHRcdFx0J1x0bmV3UG9zaXRpb24gPSBtaXgoIG5ld1Bvc2l0aW9uLCBuZXdQb3NpdGlvbiArIHZlYzMoIG5vaXNlVmVsICogKCB0dXJidWxlbmNlICogNS4wICkgKSwgKCB0aW1lRWxhcHNlZCAvIGxpZmVUaW1lICkgKTsnLFxuXG5cdFx0XHQnXHRpZiggdi55ID4gMC4gJiYgdi55IDwgLjA1ICkgeycsXG5cblx0XHRcdCdcdFx0bGlmZUxlZnQgPSAwLjA7JyxcblxuXHRcdFx0J1x0fScsXG5cblx0XHRcdCdcdGlmKCB2LnggPCAtIDEuNDUgKSB7JyxcblxuXHRcdFx0J1x0XHRsaWZlTGVmdCA9IDAuMDsnLFxuXG5cdFx0XHQnXHR9JyxcblxuXHRcdFx0J1x0aWYoIHRpbWVFbGFwc2VkID4gMC4wICkgeycsXG5cblx0XHRcdCdcdFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggbmV3UG9zaXRpb24sIDEuMCApOycsXG5cblx0XHRcdCdcdH0gZWxzZSB7JyxcblxuXHRcdFx0J1x0XHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7Jyxcblx0XHRcdCdcdFx0bGlmZUxlZnQgPSAwLjA7Jyxcblx0XHRcdCdcdFx0Z2xfUG9pbnRTaXplID0gMC47JyxcblxuXHRcdFx0J1x0fScsXG5cblx0XHRcdCd9J1xuXG5cdFx0XS5qb2luKCAnXFxuJyApLFxuXG5cdFx0ZnJhZ21lbnRTaGFkZXI6IFtcblxuXHRcdFx0J2Zsb2F0IHNjYWxlTGluZWFyKCBmbG9hdCB2YWx1ZSwgdmVjMiB2YWx1ZURvbWFpbiApIHsnLFxuXG5cdFx0XHQnXHRyZXR1cm4gKCB2YWx1ZSAtIHZhbHVlRG9tYWluLnggKSAvICggdmFsdWVEb21haW4ueSAtIHZhbHVlRG9tYWluLnggKTsnLFxuXG5cdFx0XHQnfScsXG5cblx0XHRcdCdmbG9hdCBzY2FsZUxpbmVhciggZmxvYXQgdmFsdWUsIHZlYzIgdmFsdWVEb21haW4sIHZlYzIgdmFsdWVSYW5nZSApIHsnLFxuXG5cdFx0XHQnXHRyZXR1cm4gbWl4KCB2YWx1ZVJhbmdlLngsIHZhbHVlUmFuZ2UueSwgc2NhbGVMaW5lYXIoIHZhbHVlLCB2YWx1ZURvbWFpbiApICk7JyxcblxuXHRcdFx0J30nLFxuXG5cdFx0XHQndmFyeWluZyB2ZWM0IHZDb2xvcjsnLFxuXHRcdFx0J3ZhcnlpbmcgZmxvYXQgbGlmZUxlZnQ7JyxcblxuXHRcdFx0J3VuaWZvcm0gc2FtcGxlcjJEIHRTcHJpdGU7JyxcblxuXHRcdFx0J3ZvaWQgbWFpbigpIHsnLFxuXG5cdFx0XHQnXHRmbG9hdCBhbHBoYSA9IDAuOycsXG5cblx0XHRcdCdcdGlmKCBsaWZlTGVmdCA+IDAuOTk1ICkgeycsXG5cblx0XHRcdCdcdFx0YWxwaGEgPSBzY2FsZUxpbmVhciggbGlmZUxlZnQsIHZlYzIoIDEuMCwgMC45OTUgKSwgdmVjMiggMC4wLCAxLjAgKSApOycsXG5cblx0XHRcdCdcdH0gZWxzZSB7JyxcblxuXHRcdFx0J1x0XHRhbHBoYSA9IGxpZmVMZWZ0ICogMC43NTsnLFxuXG5cdFx0XHQnXHR9JyxcblxuXHRcdFx0J1x0dmVjNCB0ZXggPSB0ZXh0dXJlMkQoIHRTcHJpdGUsIGdsX1BvaW50Q29vcmQgKTsnLFxuXHRcdFx0J1x0Z2xfRnJhZ0NvbG9yID0gdmVjNCggdkNvbG9yLnJnYiAqIHRleC5hLCBhbHBoYSAqIHRleC5hICk7JyxcblxuXHRcdFx0J30nXG5cblx0XHRdLmpvaW4oICdcXG4nIClcblxuXHR9O1xuXG5cdC8vIHByZWxvYWQgYSBtaWxsaW9uIHJhbmRvbSBudW1iZXJzXG5cblx0dmFyIGk7XG5cblx0Zm9yICggaSA9IDFlNTsgaSA+IDA7IGkgLS0gKSB7XG5cblx0XHR0aGlzLnJhbmQucHVzaCggTWF0aC5yYW5kb20oKSAtIDAuNSApO1xuXG5cdH1cblxuXHR0aGlzLnJhbmRvbSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiArKyBpID49IHRoaXMucmFuZC5sZW5ndGggPyB0aGlzLnJhbmRbIGkgPSAxIF0gOiB0aGlzLnJhbmRbIGkgXTtcblxuXHR9O1xuXG5cdHZhciB0ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcblxuXHR0aGlzLnBhcnRpY2xlTm9pc2VUZXggPSB0aGlzLlBBUlRJQ0xFX05PSVNFX1RFWFRVUkUgfHwgdGV4dHVyZUxvYWRlci5sb2FkKCAndGV4dHVyZXMvcGVybGluLTUxMi5wbmcnICk7XG5cdHRoaXMucGFydGljbGVOb2lzZVRleC53cmFwUyA9IHRoaXMucGFydGljbGVOb2lzZVRleC53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuXG5cdHRoaXMucGFydGljbGVTcHJpdGVUZXggPSB0aGlzLlBBUlRJQ0xFX1NQUklURV9URVhUVVJFIHx8IHRleHR1cmVMb2FkZXIubG9hZCggJ3RleHR1cmVzL3BhcnRpY2xlMi5wbmcnICk7XG5cdHRoaXMucGFydGljbGVTcHJpdGVUZXgud3JhcFMgPSB0aGlzLnBhcnRpY2xlU3ByaXRlVGV4LndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5cblx0dGhpcy5wYXJ0aWNsZVNoYWRlck1hdCA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCgge1xuXHRcdHRyYW5zcGFyZW50OiB0cnVlLFxuXHRcdGRlcHRoV3JpdGU6IGZhbHNlLFxuXHRcdHVuaWZvcm1zOiB7XG5cdFx0XHQndVRpbWUnOiB7XG5cdFx0XHRcdHZhbHVlOiAwLjBcblx0XHRcdH0sXG5cdFx0XHQndVNjYWxlJzoge1xuXHRcdFx0XHR2YWx1ZTogMS4wXG5cdFx0XHR9LFxuXHRcdFx0J3ROb2lzZSc6IHtcblx0XHRcdFx0dmFsdWU6IHRoaXMucGFydGljbGVOb2lzZVRleFxuXHRcdFx0fSxcblx0XHRcdCd0U3ByaXRlJzoge1xuXHRcdFx0XHR2YWx1ZTogdGhpcy5wYXJ0aWNsZVNwcml0ZVRleFxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsXG5cdFx0dmVydGV4U2hhZGVyOiBHUFVQYXJ0aWNsZVNoYWRlci52ZXJ0ZXhTaGFkZXIsXG5cdFx0ZnJhZ21lbnRTaGFkZXI6IEdQVVBhcnRpY2xlU2hhZGVyLmZyYWdtZW50U2hhZGVyXG5cdH0gKTtcblxuXHQvLyBkZWZpbmUgZGVmYXVsdHMgZm9yIGFsbCB2YWx1ZXNcblxuXHR0aGlzLnBhcnRpY2xlU2hhZGVyTWF0LmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMucGFydGljbGVQb3NpdGlvbnNTdGFydFRpbWUgPSBbIDAsIDAsIDAsIDAgXTtcblx0dGhpcy5wYXJ0aWNsZVNoYWRlck1hdC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzLnBhcnRpY2xlVmVsQ29sU2l6ZUxpZmUgPSBbIDAsIDAsIDAsIDAgXTtcblxuXHR0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB0aGlzLlBBUlRJQ0xFX0NPTlRBSU5FUlM7IGkgKysgKSB7XG5cblx0XHRcdHZhciBjID0gbmV3IFRIUkVFLkdQVVBhcnRpY2xlQ29udGFpbmVyKCB0aGlzLlBBUlRJQ0xFU19QRVJfQ09OVEFJTkVSLCB0aGlzICk7XG5cdFx0XHR0aGlzLnBhcnRpY2xlQ29udGFpbmVycy5wdXNoKCBjICk7XG5cdFx0XHR0aGlzLmFkZCggYyApO1xuXG5cdFx0fVxuXG5cdH07XG5cblx0dGhpcy5zcGF3blBhcnRpY2xlID0gZnVuY3Rpb24gKCBvcHRpb25zICkge1xuXG5cdFx0dGhpcy5QQVJUSUNMRV9DVVJTT1IgKys7XG5cblx0XHRpZiAoIHRoaXMuUEFSVElDTEVfQ1VSU09SID49IHRoaXMuUEFSVElDTEVfQ09VTlQgKSB7XG5cblx0XHRcdHRoaXMuUEFSVElDTEVfQ1VSU09SID0gMTtcblxuXHRcdH1cblxuXHRcdHZhciBjdXJyZW50Q29udGFpbmVyID0gdGhpcy5wYXJ0aWNsZUNvbnRhaW5lcnNbIE1hdGguZmxvb3IoIHRoaXMuUEFSVElDTEVfQ1VSU09SIC8gdGhpcy5QQVJUSUNMRVNfUEVSX0NPTlRBSU5FUiApIF07XG5cblx0XHRjdXJyZW50Q29udGFpbmVyLnNwYXduUGFydGljbGUoIG9wdGlvbnMgKTtcblxuXHR9O1xuXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCB0aW1lICkge1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgdGhpcy5QQVJUSUNMRV9DT05UQUlORVJTOyBpICsrICkge1xuXG5cdFx0XHR0aGlzLnBhcnRpY2xlQ29udGFpbmVyc1sgaSBdLnVwZGF0ZSggdGltZSApO1xuXG5cdFx0fVxuXG5cdH07XG5cblx0dGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dGhpcy5wYXJ0aWNsZVNoYWRlck1hdC5kaXNwb3NlKCk7XG5cdFx0dGhpcy5wYXJ0aWNsZU5vaXNlVGV4LmRpc3Bvc2UoKTtcblx0XHR0aGlzLnBhcnRpY2xlU3ByaXRlVGV4LmRpc3Bvc2UoKTtcblxuXHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHRoaXMuUEFSVElDTEVfQ09OVEFJTkVSUzsgaSArKyApIHtcblxuXHRcdFx0dGhpcy5wYXJ0aWNsZUNvbnRhaW5lcnNbIGkgXS5kaXNwb3NlKCk7XG5cblx0XHR9XG5cblx0fTtcblxuXHR0aGlzLmluaXQoKTtcblxufTtcblxuVEhSRUUuR1BVUGFydGljbGVTeXN0ZW0ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlICk7XG5USFJFRS5HUFVQYXJ0aWNsZVN5c3RlbS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUSFJFRS5HUFVQYXJ0aWNsZVN5c3RlbTtcblxuXG4vLyBTdWJjbGFzcyBmb3IgcGFydGljbGUgY29udGFpbmVycywgYWxsb3dzIGZvciB2ZXJ5IGxhcmdlIGFycmF5cyB0byBiZSBzcHJlYWQgb3V0XG5cblRIUkVFLkdQVVBhcnRpY2xlQ29udGFpbmVyID0gZnVuY3Rpb24gKCBtYXhQYXJ0aWNsZXMsIHBhcnRpY2xlU3lzdGVtICkge1xuXG5cdFRIUkVFLk9iamVjdDNELmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHR0aGlzLlBBUlRJQ0xFX0NPVU5UID0gbWF4UGFydGljbGVzIHx8IDEwMDAwMDtcblx0dGhpcy5QQVJUSUNMRV9DVVJTT1IgPSAwO1xuXHR0aGlzLnRpbWUgPSAwO1xuXHR0aGlzLm9mZnNldCA9IDA7XG5cdHRoaXMuY291bnQgPSAwO1xuXHR0aGlzLkRQUiA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuXHR0aGlzLkdQVVBhcnRpY2xlU3lzdGVtID0gcGFydGljbGVTeXN0ZW07XG5cdHRoaXMucGFydGljbGVVcGRhdGUgPSBmYWxzZTtcblxuXHQvLyBnZW9tZXRyeVxuXG5cdHRoaXMucGFydGljbGVTaGFkZXJHZW8gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcblxuXHR0aGlzLnBhcnRpY2xlU2hhZGVyR2VvLmFkZEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggdGhpcy5QQVJUSUNMRV9DT1VOVCAqIDMgKSwgMyApLnNldER5bmFtaWMoIHRydWUgKSApO1xuXHR0aGlzLnBhcnRpY2xlU2hhZGVyR2VvLmFkZEF0dHJpYnV0ZSggJ3Bvc2l0aW9uU3RhcnQnLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCB0aGlzLlBBUlRJQ0xFX0NPVU5UICogMyApLCAzICkuc2V0RHluYW1pYyggdHJ1ZSApICk7XG5cdHRoaXMucGFydGljbGVTaGFkZXJHZW8uYWRkQXR0cmlidXRlKCAnc3RhcnRUaW1lJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggdGhpcy5QQVJUSUNMRV9DT1VOVCApLCAxICkuc2V0RHluYW1pYyggdHJ1ZSApICk7XG5cdHRoaXMucGFydGljbGVTaGFkZXJHZW8uYWRkQXR0cmlidXRlKCAndmVsb2NpdHknLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCB0aGlzLlBBUlRJQ0xFX0NPVU5UICogMyApLCAzICkuc2V0RHluYW1pYyggdHJ1ZSApICk7XG5cdHRoaXMucGFydGljbGVTaGFkZXJHZW8uYWRkQXR0cmlidXRlKCAndHVyYnVsZW5jZScsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIHRoaXMuUEFSVElDTEVfQ09VTlQgKSwgMSApLnNldER5bmFtaWMoIHRydWUgKSApO1xuXHR0aGlzLnBhcnRpY2xlU2hhZGVyR2VvLmFkZEF0dHJpYnV0ZSggJ2NvbG9yJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggdGhpcy5QQVJUSUNMRV9DT1VOVCAqIDMgKSwgMyApLnNldER5bmFtaWMoIHRydWUgKSApO1xuXHR0aGlzLnBhcnRpY2xlU2hhZGVyR2VvLmFkZEF0dHJpYnV0ZSggJ3NpemUnLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCB0aGlzLlBBUlRJQ0xFX0NPVU5UICksIDEgKS5zZXREeW5hbWljKCB0cnVlICkgKTtcblx0dGhpcy5wYXJ0aWNsZVNoYWRlckdlby5hZGRBdHRyaWJ1dGUoICdsaWZlVGltZScsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIHRoaXMuUEFSVElDTEVfQ09VTlQgKSwgMSApLnNldER5bmFtaWMoIHRydWUgKSApO1xuXG5cdC8vIG1hdGVyaWFsXG5cblx0dGhpcy5wYXJ0aWNsZVNoYWRlck1hdCA9IHRoaXMuR1BVUGFydGljbGVTeXN0ZW0ucGFydGljbGVTaGFkZXJNYXQ7XG5cblx0dmFyIHBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0dmFyIHZlbG9jaXR5ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0dmFyIGNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCk7XG5cblx0dGhpcy5zcGF3blBhcnRpY2xlID0gZnVuY3Rpb24gKCBvcHRpb25zICkge1xuXG5cdFx0dmFyIHBvc2l0aW9uU3RhcnRBdHRyaWJ1dGUgPSB0aGlzLnBhcnRpY2xlU2hhZGVyR2VvLmdldEF0dHJpYnV0ZSggJ3Bvc2l0aW9uU3RhcnQnICk7XG5cdFx0dmFyIHN0YXJ0VGltZUF0dHJpYnV0ZSA9IHRoaXMucGFydGljbGVTaGFkZXJHZW8uZ2V0QXR0cmlidXRlKCAnc3RhcnRUaW1lJyApO1xuXHRcdHZhciB2ZWxvY2l0eUF0dHJpYnV0ZSA9IHRoaXMucGFydGljbGVTaGFkZXJHZW8uZ2V0QXR0cmlidXRlKCAndmVsb2NpdHknICk7XG5cdFx0dmFyIHR1cmJ1bGVuY2VBdHRyaWJ1dGUgPSB0aGlzLnBhcnRpY2xlU2hhZGVyR2VvLmdldEF0dHJpYnV0ZSggJ3R1cmJ1bGVuY2UnICk7XG5cdFx0dmFyIGNvbG9yQXR0cmlidXRlID0gdGhpcy5wYXJ0aWNsZVNoYWRlckdlby5nZXRBdHRyaWJ1dGUoICdjb2xvcicgKTtcblx0XHR2YXIgc2l6ZUF0dHJpYnV0ZSA9IHRoaXMucGFydGljbGVTaGFkZXJHZW8uZ2V0QXR0cmlidXRlKCAnc2l6ZScgKTtcblx0XHR2YXIgbGlmZVRpbWVBdHRyaWJ1dGUgPSB0aGlzLnBhcnRpY2xlU2hhZGVyR2VvLmdldEF0dHJpYnV0ZSggJ2xpZmVUaW1lJyApO1xuXG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHQvLyBzZXR1cCByZWFzb25hYmxlIGRlZmF1bHQgdmFsdWVzIGZvciBhbGwgYXJndW1lbnRzXG5cblx0XHRwb3NpdGlvbiA9IG9wdGlvbnMucG9zaXRpb24gIT09IHVuZGVmaW5lZCA/IHBvc2l0aW9uLmNvcHkoIG9wdGlvbnMucG9zaXRpb24gKSA6IHBvc2l0aW9uLnNldCggMCwgMCwgMCApO1xuXHRcdHZlbG9jaXR5ID0gb3B0aW9ucy52ZWxvY2l0eSAhPT0gdW5kZWZpbmVkID8gdmVsb2NpdHkuY29weSggb3B0aW9ucy52ZWxvY2l0eSApIDogdmVsb2NpdHkuc2V0KCAwLCAwLCAwICk7XG5cdFx0Y29sb3IgPSBvcHRpb25zLmNvbG9yICE9PSB1bmRlZmluZWQgPyBjb2xvci5zZXQoIG9wdGlvbnMuY29sb3IgKSA6IGNvbG9yLnNldCggMHhmZmZmZmYgKTtcblxuXHRcdHZhciBwb3NpdGlvblJhbmRvbW5lc3MgPSBvcHRpb25zLnBvc2l0aW9uUmFuZG9tbmVzcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wb3NpdGlvblJhbmRvbW5lc3MgOiAwO1xuXHRcdHZhciB2ZWxvY2l0eVJhbmRvbW5lc3MgPSBvcHRpb25zLnZlbG9jaXR5UmFuZG9tbmVzcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy52ZWxvY2l0eVJhbmRvbW5lc3MgOiAwO1xuXHRcdHZhciBjb2xvclJhbmRvbW5lc3MgPSBvcHRpb25zLmNvbG9yUmFuZG9tbmVzcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xvclJhbmRvbW5lc3MgOiAxO1xuXHRcdHZhciB0dXJidWxlbmNlID0gb3B0aW9ucy50dXJidWxlbmNlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnR1cmJ1bGVuY2UgOiAxO1xuXHRcdHZhciBsaWZldGltZSA9IG9wdGlvbnMubGlmZXRpbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGlmZXRpbWUgOiA1O1xuXHRcdHZhciBzaXplID0gb3B0aW9ucy5zaXplICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNpemUgOiAxMDtcblx0XHR2YXIgc2l6ZVJhbmRvbW5lc3MgPSBvcHRpb25zLnNpemVSYW5kb21uZXNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNpemVSYW5kb21uZXNzIDogMDtcblx0XHR2YXIgc21vb3RoUG9zaXRpb24gPSBvcHRpb25zLnNtb290aFBvc2l0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNtb290aFBvc2l0aW9uIDogZmFsc2U7XG5cblx0XHRpZiAoIHRoaXMuRFBSICE9PSB1bmRlZmluZWQgKSBzaXplICo9IHRoaXMuRFBSO1xuXG5cdFx0dmFyIGkgPSB0aGlzLlBBUlRJQ0xFX0NVUlNPUjtcblxuXHRcdC8vIHBvc2l0aW9uXG5cblx0XHRwb3NpdGlvblN0YXJ0QXR0cmlidXRlLmFycmF5WyBpICogMyArIDAgXSA9IHBvc2l0aW9uLnggKyAoIHBhcnRpY2xlU3lzdGVtLnJhbmRvbSgpICogcG9zaXRpb25SYW5kb21uZXNzICk7XG5cdFx0cG9zaXRpb25TdGFydEF0dHJpYnV0ZS5hcnJheVsgaSAqIDMgKyAxIF0gPSBwb3NpdGlvbi55ICsgKCBwYXJ0aWNsZVN5c3RlbS5yYW5kb20oKSAqIHBvc2l0aW9uUmFuZG9tbmVzcyApO1xuXHRcdHBvc2l0aW9uU3RhcnRBdHRyaWJ1dGUuYXJyYXlbIGkgKiAzICsgMiBdID0gcG9zaXRpb24ueiArICggcGFydGljbGVTeXN0ZW0ucmFuZG9tKCkgKiBwb3NpdGlvblJhbmRvbW5lc3MgKTtcblxuXHRcdGlmICggc21vb3RoUG9zaXRpb24gPT09IHRydWUgKSB7XG5cblx0XHRcdHBvc2l0aW9uU3RhcnRBdHRyaWJ1dGUuYXJyYXlbIGkgKiAzICsgMCBdICs9IC0gKCB2ZWxvY2l0eS54ICogcGFydGljbGVTeXN0ZW0ucmFuZG9tKCkgKTtcblx0XHRcdHBvc2l0aW9uU3RhcnRBdHRyaWJ1dGUuYXJyYXlbIGkgKiAzICsgMSBdICs9IC0gKCB2ZWxvY2l0eS55ICogcGFydGljbGVTeXN0ZW0ucmFuZG9tKCkgKTtcblx0XHRcdHBvc2l0aW9uU3RhcnRBdHRyaWJ1dGUuYXJyYXlbIGkgKiAzICsgMiBdICs9IC0gKCB2ZWxvY2l0eS56ICogcGFydGljbGVTeXN0ZW0ucmFuZG9tKCkgKTtcblxuXHRcdH1cblxuXHRcdC8vIHZlbG9jaXR5XG5cblx0XHR2YXIgbWF4VmVsID0gMjtcblxuXHRcdHZhciB2ZWxYID0gdmVsb2NpdHkueCArIHBhcnRpY2xlU3lzdGVtLnJhbmRvbSgpICogdmVsb2NpdHlSYW5kb21uZXNzO1xuXHRcdHZhciB2ZWxZID0gdmVsb2NpdHkueSArIHBhcnRpY2xlU3lzdGVtLnJhbmRvbSgpICogdmVsb2NpdHlSYW5kb21uZXNzO1xuXHRcdHZhciB2ZWxaID0gdmVsb2NpdHkueiArIHBhcnRpY2xlU3lzdGVtLnJhbmRvbSgpICogdmVsb2NpdHlSYW5kb21uZXNzO1xuXG5cdFx0dmVsWCA9IFRIUkVFLk1hdGguY2xhbXAoICggdmVsWCAtICggLSBtYXhWZWwgKSApIC8gKCBtYXhWZWwgLSAoIC0gbWF4VmVsICkgKSwgMCwgMSApO1xuXHRcdHZlbFkgPSBUSFJFRS5NYXRoLmNsYW1wKCAoIHZlbFkgLSAoIC0gbWF4VmVsICkgKSAvICggbWF4VmVsIC0gKCAtIG1heFZlbCApICksIDAsIDEgKTtcblx0XHR2ZWxaID0gVEhSRUUuTWF0aC5jbGFtcCggKCB2ZWxaIC0gKCAtIG1heFZlbCApICkgLyAoIG1heFZlbCAtICggLSBtYXhWZWwgKSApLCAwLCAxICk7XG5cblx0XHR2ZWxvY2l0eUF0dHJpYnV0ZS5hcnJheVsgaSAqIDMgKyAwIF0gPSB2ZWxYO1xuXHRcdHZlbG9jaXR5QXR0cmlidXRlLmFycmF5WyBpICogMyArIDEgXSA9IHZlbFk7XG5cdFx0dmVsb2NpdHlBdHRyaWJ1dGUuYXJyYXlbIGkgKiAzICsgMiBdID0gdmVsWjtcblxuXHRcdC8vIGNvbG9yXG5cblx0XHRjb2xvci5yID0gVEhSRUUuTWF0aC5jbGFtcCggY29sb3IuciArIHBhcnRpY2xlU3lzdGVtLnJhbmRvbSgpICogY29sb3JSYW5kb21uZXNzLCAwLCAxICk7XG5cdFx0Y29sb3IuZyA9IFRIUkVFLk1hdGguY2xhbXAoIGNvbG9yLmcgKyBwYXJ0aWNsZVN5c3RlbS5yYW5kb20oKSAqIGNvbG9yUmFuZG9tbmVzcywgMCwgMSApO1xuXHRcdGNvbG9yLmIgPSBUSFJFRS5NYXRoLmNsYW1wKCBjb2xvci5iICsgcGFydGljbGVTeXN0ZW0ucmFuZG9tKCkgKiBjb2xvclJhbmRvbW5lc3MsIDAsIDEgKTtcblxuXHRcdGNvbG9yQXR0cmlidXRlLmFycmF5WyBpICogMyArIDAgXSA9IGNvbG9yLnI7XG5cdFx0Y29sb3JBdHRyaWJ1dGUuYXJyYXlbIGkgKiAzICsgMSBdID0gY29sb3IuZztcblx0XHRjb2xvckF0dHJpYnV0ZS5hcnJheVsgaSAqIDMgKyAyIF0gPSBjb2xvci5iO1xuXG5cdFx0Ly8gdHVyYnVsZW5jZSwgc2l6ZSwgbGlmZXRpbWUgYW5kIHN0YXJ0dGltZVxuXG5cdFx0dHVyYnVsZW5jZUF0dHJpYnV0ZS5hcnJheVsgaSBdID0gdHVyYnVsZW5jZTtcblx0XHRzaXplQXR0cmlidXRlLmFycmF5WyBpIF0gPSBzaXplICsgcGFydGljbGVTeXN0ZW0ucmFuZG9tKCkgKiBzaXplUmFuZG9tbmVzcztcblx0XHRsaWZlVGltZUF0dHJpYnV0ZS5hcnJheVsgaSBdID0gbGlmZXRpbWU7XG5cdFx0c3RhcnRUaW1lQXR0cmlidXRlLmFycmF5WyBpIF0gPSB0aGlzLnRpbWUgKyBwYXJ0aWNsZVN5c3RlbS5yYW5kb20oKSAqIDJlLTI7XG5cblx0XHQvLyBvZmZzZXRcblxuXHRcdGlmICggdGhpcy5vZmZzZXQgPT09IDAgKSB7XG5cblx0XHRcdHRoaXMub2Zmc2V0ID0gdGhpcy5QQVJUSUNMRV9DVVJTT1I7XG5cblx0XHR9XG5cblx0XHQvLyBjb3VudGVyIGFuZCBjdXJzb3JcblxuXHRcdHRoaXMuY291bnQgKys7XG5cdFx0dGhpcy5QQVJUSUNMRV9DVVJTT1IgKys7XG5cblx0XHRpZiAoIHRoaXMuUEFSVElDTEVfQ1VSU09SID49IHRoaXMuUEFSVElDTEVfQ09VTlQgKSB7XG5cblx0XHRcdHRoaXMuUEFSVElDTEVfQ1VSU09SID0gMDtcblxuXHRcdH1cblxuXHRcdHRoaXMucGFydGljbGVVcGRhdGUgPSB0cnVlO1xuXG5cdH07XG5cblx0dGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dGhpcy5wYXJ0aWNsZVN5c3RlbSA9IG5ldyBUSFJFRS5Qb2ludHMoIHRoaXMucGFydGljbGVTaGFkZXJHZW8sIHRoaXMucGFydGljbGVTaGFkZXJNYXQgKTtcblx0XHR0aGlzLnBhcnRpY2xlU3lzdGVtLmZydXN0dW1DdWxsZWQgPSBmYWxzZTtcblx0XHR0aGlzLmFkZCggdGhpcy5wYXJ0aWNsZVN5c3RlbSApO1xuXG5cdH07XG5cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoIHRpbWUgKSB7XG5cblx0XHR0aGlzLnRpbWUgPSB0aW1lO1xuXHRcdHRoaXMucGFydGljbGVTaGFkZXJNYXQudW5pZm9ybXMudVRpbWUudmFsdWUgPSB0aW1lO1xuXG5cdFx0dGhpcy5nZW9tZXRyeVVwZGF0ZSgpO1xuXG5cdH07XG5cblx0dGhpcy5nZW9tZXRyeVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGlmICggdGhpcy5wYXJ0aWNsZVVwZGF0ZSA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0dGhpcy5wYXJ0aWNsZVVwZGF0ZSA9IGZhbHNlO1xuXG5cdFx0XHR2YXIgcG9zaXRpb25TdGFydEF0dHJpYnV0ZSA9IHRoaXMucGFydGljbGVTaGFkZXJHZW8uZ2V0QXR0cmlidXRlKCAncG9zaXRpb25TdGFydCcgKTtcblx0XHRcdHZhciBzdGFydFRpbWVBdHRyaWJ1dGUgPSB0aGlzLnBhcnRpY2xlU2hhZGVyR2VvLmdldEF0dHJpYnV0ZSggJ3N0YXJ0VGltZScgKTtcblx0XHRcdHZhciB2ZWxvY2l0eUF0dHJpYnV0ZSA9IHRoaXMucGFydGljbGVTaGFkZXJHZW8uZ2V0QXR0cmlidXRlKCAndmVsb2NpdHknICk7XG5cdFx0XHR2YXIgdHVyYnVsZW5jZUF0dHJpYnV0ZSA9IHRoaXMucGFydGljbGVTaGFkZXJHZW8uZ2V0QXR0cmlidXRlKCAndHVyYnVsZW5jZScgKTtcblx0XHRcdHZhciBjb2xvckF0dHJpYnV0ZSA9IHRoaXMucGFydGljbGVTaGFkZXJHZW8uZ2V0QXR0cmlidXRlKCAnY29sb3InICk7XG5cdFx0XHR2YXIgc2l6ZUF0dHJpYnV0ZSA9IHRoaXMucGFydGljbGVTaGFkZXJHZW8uZ2V0QXR0cmlidXRlKCAnc2l6ZScgKTtcblx0XHRcdHZhciBsaWZlVGltZUF0dHJpYnV0ZSA9IHRoaXMucGFydGljbGVTaGFkZXJHZW8uZ2V0QXR0cmlidXRlKCAnbGlmZVRpbWUnICk7XG5cblx0XHRcdGlmICggdGhpcy5vZmZzZXQgKyB0aGlzLmNvdW50IDwgdGhpcy5QQVJUSUNMRV9DT1VOVCApIHtcblxuXHRcdFx0XHRwb3NpdGlvblN0YXJ0QXR0cmlidXRlLnVwZGF0ZVJhbmdlLm9mZnNldCA9IHRoaXMub2Zmc2V0ICogcG9zaXRpb25TdGFydEF0dHJpYnV0ZS5pdGVtU2l6ZTtcblx0XHRcdFx0c3RhcnRUaW1lQXR0cmlidXRlLnVwZGF0ZVJhbmdlLm9mZnNldCA9IHRoaXMub2Zmc2V0ICogc3RhcnRUaW1lQXR0cmlidXRlLml0ZW1TaXplO1xuXHRcdFx0XHR2ZWxvY2l0eUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5vZmZzZXQgPSB0aGlzLm9mZnNldCAqIHZlbG9jaXR5QXR0cmlidXRlLml0ZW1TaXplO1xuXHRcdFx0XHR0dXJidWxlbmNlQXR0cmlidXRlLnVwZGF0ZVJhbmdlLm9mZnNldCA9IHRoaXMub2Zmc2V0ICogdHVyYnVsZW5jZUF0dHJpYnV0ZS5pdGVtU2l6ZTtcblx0XHRcdFx0Y29sb3JBdHRyaWJ1dGUudXBkYXRlUmFuZ2Uub2Zmc2V0ID0gdGhpcy5vZmZzZXQgKiBjb2xvckF0dHJpYnV0ZS5pdGVtU2l6ZTtcblx0XHRcdFx0c2l6ZUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5vZmZzZXQgPSB0aGlzLm9mZnNldCAqIHNpemVBdHRyaWJ1dGUuaXRlbVNpemU7XG5cdFx0XHRcdGxpZmVUaW1lQXR0cmlidXRlLnVwZGF0ZVJhbmdlLm9mZnNldCA9IHRoaXMub2Zmc2V0ICogbGlmZVRpbWVBdHRyaWJ1dGUuaXRlbVNpemU7XG5cblx0XHRcdFx0cG9zaXRpb25TdGFydEF0dHJpYnV0ZS51cGRhdGVSYW5nZS5jb3VudCA9IHRoaXMuY291bnQgKiBwb3NpdGlvblN0YXJ0QXR0cmlidXRlLml0ZW1TaXplO1xuXHRcdFx0XHRzdGFydFRpbWVBdHRyaWJ1dGUudXBkYXRlUmFuZ2UuY291bnQgPSB0aGlzLmNvdW50ICogc3RhcnRUaW1lQXR0cmlidXRlLml0ZW1TaXplO1xuXHRcdFx0XHR2ZWxvY2l0eUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5jb3VudCA9IHRoaXMuY291bnQgKiB2ZWxvY2l0eUF0dHJpYnV0ZS5pdGVtU2l6ZTtcblx0XHRcdFx0dHVyYnVsZW5jZUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5jb3VudCA9IHRoaXMuY291bnQgKiB0dXJidWxlbmNlQXR0cmlidXRlLml0ZW1TaXplO1xuXHRcdFx0XHRjb2xvckF0dHJpYnV0ZS51cGRhdGVSYW5nZS5jb3VudCA9IHRoaXMuY291bnQgKiBjb2xvckF0dHJpYnV0ZS5pdGVtU2l6ZTtcblx0XHRcdFx0c2l6ZUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5jb3VudCA9IHRoaXMuY291bnQgKiBzaXplQXR0cmlidXRlLml0ZW1TaXplO1xuXHRcdFx0XHRsaWZlVGltZUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5jb3VudCA9IHRoaXMuY291bnQgKiBsaWZlVGltZUF0dHJpYnV0ZS5pdGVtU2l6ZTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRwb3NpdGlvblN0YXJ0QXR0cmlidXRlLnVwZGF0ZVJhbmdlLm9mZnNldCA9IDA7XG5cdFx0XHRcdHN0YXJ0VGltZUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5vZmZzZXQgPSAwO1xuXHRcdFx0XHR2ZWxvY2l0eUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5vZmZzZXQgPSAwO1xuXHRcdFx0XHR0dXJidWxlbmNlQXR0cmlidXRlLnVwZGF0ZVJhbmdlLm9mZnNldCA9IDA7XG5cdFx0XHRcdGNvbG9yQXR0cmlidXRlLnVwZGF0ZVJhbmdlLm9mZnNldCA9IDA7XG5cdFx0XHRcdHNpemVBdHRyaWJ1dGUudXBkYXRlUmFuZ2Uub2Zmc2V0ID0gMDtcblx0XHRcdFx0bGlmZVRpbWVBdHRyaWJ1dGUudXBkYXRlUmFuZ2Uub2Zmc2V0ID0gMDtcblxuXHRcdFx0XHQvLyBVc2UgLTEgdG8gdXBkYXRlIHRoZSBlbnRpcmUgYnVmZmVyLCBzZWUgIzExNDc2XG5cdFx0XHRcdHBvc2l0aW9uU3RhcnRBdHRyaWJ1dGUudXBkYXRlUmFuZ2UuY291bnQgPSAtIDE7XG5cdFx0XHRcdHN0YXJ0VGltZUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5jb3VudCA9IC0gMTtcblx0XHRcdFx0dmVsb2NpdHlBdHRyaWJ1dGUudXBkYXRlUmFuZ2UuY291bnQgPSAtIDE7XG5cdFx0XHRcdHR1cmJ1bGVuY2VBdHRyaWJ1dGUudXBkYXRlUmFuZ2UuY291bnQgPSAtIDE7XG5cdFx0XHRcdGNvbG9yQXR0cmlidXRlLnVwZGF0ZVJhbmdlLmNvdW50ID0gLSAxO1xuXHRcdFx0XHRzaXplQXR0cmlidXRlLnVwZGF0ZVJhbmdlLmNvdW50ID0gLSAxO1xuXHRcdFx0XHRsaWZlVGltZUF0dHJpYnV0ZS51cGRhdGVSYW5nZS5jb3VudCA9IC0gMTtcblxuXHRcdFx0fVxuXG5cdFx0XHRwb3NpdGlvblN0YXJ0QXR0cmlidXRlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdHN0YXJ0VGltZUF0dHJpYnV0ZS5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHR2ZWxvY2l0eUF0dHJpYnV0ZS5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHR0dXJidWxlbmNlQXR0cmlidXRlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdGNvbG9yQXR0cmlidXRlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdHNpemVBdHRyaWJ1dGUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0bGlmZVRpbWVBdHRyaWJ1dGUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXG5cdFx0XHR0aGlzLm9mZnNldCA9IDA7XG5cdFx0XHR0aGlzLmNvdW50ID0gMDtcblxuXHRcdH1cblxuXHR9O1xuXG5cdHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHRoaXMucGFydGljbGVTaGFkZXJHZW8uZGlzcG9zZSgpO1xuXG5cdH07XG5cblx0dGhpcy5pbml0KCk7XG5cbn07XG5cblRIUkVFLkdQVVBhcnRpY2xlQ29udGFpbmVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSApO1xuVEhSRUUuR1BVUGFydGljbGVDb250YWluZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVEhSRUUuR1BVUGFydGljbGVDb250YWluZXI7XG4iLCIvKipcbiAqIExvYWRzIGEgV2F2ZWZyb250IC5tdGwgZmlsZSBzcGVjaWZ5aW5nIG1hdGVyaWFsc1xuICpcbiAqIEBhdXRob3IgYW5nZWx4dWFuY2hhbmdcbiAqL1xuXG5USFJFRS5NVExMb2FkZXIgPSBmdW5jdGlvbiAoIG1hbmFnZXIgKSB7XG5cblx0dGhpcy5tYW5hZ2VyID0gKCBtYW5hZ2VyICE9PSB1bmRlZmluZWQgKSA/IG1hbmFnZXIgOiBUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7XG5cbn07XG5cblRIUkVFLk1UTExvYWRlci5wcm90b3R5cGUgPSB7XG5cblx0Y29uc3RydWN0b3I6IFRIUkVFLk1UTExvYWRlcixcblxuXHQvKipcblx0ICogTG9hZHMgYW5kIHBhcnNlcyBhIE1UTCBhc3NldCBmcm9tIGEgVVJMLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdXJsIC0gVVJMIHRvIHRoZSBNVEwgZmlsZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW29uTG9hZF0gLSBDYWxsYmFjayBpbnZva2VkIHdpdGggdGhlIGxvYWRlZCBvYmplY3QuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblByb2dyZXNzXSAtIENhbGxiYWNrIGZvciBkb3dubG9hZCBwcm9ncmVzcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRXJyb3JdIC0gQ2FsbGJhY2sgZm9yIGRvd25sb2FkIGVycm9ycy5cblx0ICpcblx0ICogQHNlZSBzZXRQYXRoIHNldFRleHR1cmVQYXRoXG5cdCAqXG5cdCAqIEBub3RlIEluIG9yZGVyIGZvciByZWxhdGl2ZSB0ZXh0dXJlIHJlZmVyZW5jZXMgdG8gcmVzb2x2ZSBjb3JyZWN0bHlcblx0ICogeW91IG11c3QgY2FsbCBzZXRQYXRoIGFuZC9vciBzZXRUZXh0dXJlUGF0aCBleHBsaWNpdGx5IHByaW9yIHRvIGxvYWQuXG5cdCAqL1xuXHRsb2FkOiBmdW5jdGlvbiAoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHRcdHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuRmlsZUxvYWRlciggdGhpcy5tYW5hZ2VyICk7XG5cdFx0bG9hZGVyLnNldFBhdGgoIHRoaXMucGF0aCApO1xuXHRcdGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggdGV4dCApIHtcblxuXHRcdFx0b25Mb2FkKCBzY29wZS5wYXJzZSggdGV4dCApICk7XG5cblx0XHR9LCBvblByb2dyZXNzLCBvbkVycm9yICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogU2V0IGJhc2UgcGF0aCBmb3IgcmVzb2x2aW5nIHJlZmVyZW5jZXMuXG5cdCAqIElmIHNldCB0aGlzIHBhdGggd2lsbCBiZSBwcmVwZW5kZWQgdG8gZWFjaCBsb2FkZWQgYW5kIGZvdW5kIHJlZmVyZW5jZS5cblx0ICpcblx0ICogQHNlZSBzZXRUZXh0dXJlUGF0aFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKlxuXHQgKiBAZXhhbXBsZVxuXHQgKiAgICAgbXRsTG9hZGVyLnNldFBhdGgoICdhc3NldHMvb2JqLycgKTtcblx0ICogICAgIG10bExvYWRlci5sb2FkKCAnbXkubXRsJywgLi4uICk7XG5cdCAqL1xuXHRzZXRQYXRoOiBmdW5jdGlvbiAoIHBhdGggKSB7XG5cblx0XHR0aGlzLnBhdGggPSBwYXRoO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFNldCBiYXNlIHBhdGggZm9yIHJlc29sdmluZyB0ZXh0dXJlIHJlZmVyZW5jZXMuXG5cdCAqIElmIHNldCB0aGlzIHBhdGggd2lsbCBiZSBwcmVwZW5kZWQgZm91bmQgdGV4dHVyZSByZWZlcmVuY2UuXG5cdCAqIElmIG5vdCBzZXQgYW5kIHNldFBhdGggaXMsIGl0IHdpbGwgYmUgdXNlZCBhcyB0ZXh0dXJlIGJhc2UgcGF0aC5cblx0ICpcblx0ICogQHNlZSBzZXRQYXRoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqXG5cdCAqIEBleGFtcGxlXG5cdCAqICAgICBtdGxMb2FkZXIuc2V0UGF0aCggJ2Fzc2V0cy9vYmovJyApO1xuXHQgKiAgICAgbXRsTG9hZGVyLnNldFRleHR1cmVQYXRoKCAnYXNzZXRzL3RleHR1cmVzLycgKTtcblx0ICogICAgIG10bExvYWRlci5sb2FkKCAnbXkubXRsJywgLi4uICk7XG5cdCAqL1xuXHRzZXRUZXh0dXJlUGF0aDogZnVuY3Rpb24gKCBwYXRoICkge1xuXG5cdFx0dGhpcy50ZXh0dXJlUGF0aCA9IHBhdGg7XG5cblx0fSxcblxuXHRzZXRCYXNlVXJsOiBmdW5jdGlvbiAoIHBhdGggKSB7XG5cblx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5NVExMb2FkZXI6IC5zZXRCYXNlVXJsKCkgaXMgZGVwcmVjYXRlZC4gVXNlIC5zZXRUZXh0dXJlUGF0aCggcGF0aCApIGZvciB0ZXh0dXJlIHBhdGggb3IgLnNldFBhdGgoIHBhdGggKSBmb3IgZ2VuZXJhbCBiYXNlIHBhdGggaW5zdGVhZC4nICk7XG5cblx0XHR0aGlzLnNldFRleHR1cmVQYXRoKCBwYXRoICk7XG5cblx0fSxcblxuXHRzZXRDcm9zc09yaWdpbjogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHRoaXMuY3Jvc3NPcmlnaW4gPSB2YWx1ZTtcblxuXHR9LFxuXG5cdHNldE1hdGVyaWFsT3B0aW9uczogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHRoaXMubWF0ZXJpYWxPcHRpb25zID0gdmFsdWU7XG5cblx0fSxcblxuXHQvKipcblx0ICogUGFyc2VzIGEgTVRMIGZpbGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IC0gQ29udGVudCBvZiBNVEwgZmlsZVxuXHQgKiBAcmV0dXJuIHtUSFJFRS5NVExMb2FkZXIuTWF0ZXJpYWxDcmVhdG9yfVxuXHQgKlxuXHQgKiBAc2VlIHNldFBhdGggc2V0VGV4dHVyZVBhdGhcblx0ICpcblx0ICogQG5vdGUgSW4gb3JkZXIgZm9yIHJlbGF0aXZlIHRleHR1cmUgcmVmZXJlbmNlcyB0byByZXNvbHZlIGNvcnJlY3RseVxuXHQgKiB5b3UgbXVzdCBjYWxsIHNldFBhdGggYW5kL29yIHNldFRleHR1cmVQYXRoIGV4cGxpY2l0bHkgcHJpb3IgdG8gcGFyc2UuXG5cdCAqL1xuXHRwYXJzZTogZnVuY3Rpb24gKCB0ZXh0ICkge1xuXG5cdFx0dmFyIGxpbmVzID0gdGV4dC5zcGxpdCggJ1xcbicgKTtcblx0XHR2YXIgaW5mbyA9IHt9O1xuXHRcdHZhciBkZWxpbWl0ZXJfcGF0dGVybiA9IC9cXHMrLztcblx0XHR2YXIgbWF0ZXJpYWxzSW5mbyA9IHt9O1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHR2YXIgbGluZSA9IGxpbmVzWyBpIF07XG5cdFx0XHRsaW5lID0gbGluZS50cmltKCk7XG5cblx0XHRcdGlmICggbGluZS5sZW5ndGggPT09IDAgfHwgbGluZS5jaGFyQXQoIDAgKSA9PT0gJyMnICkge1xuXG5cdFx0XHRcdC8vIEJsYW5rIGxpbmUgb3IgY29tbWVudCBpZ25vcmVcblx0XHRcdFx0Y29udGludWU7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIHBvcyA9IGxpbmUuaW5kZXhPZiggJyAnICk7XG5cblx0XHRcdHZhciBrZXkgPSAoIHBvcyA+PSAwICkgPyBsaW5lLnN1YnN0cmluZyggMCwgcG9zICkgOiBsaW5lO1xuXHRcdFx0a2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdHZhciB2YWx1ZSA9ICggcG9zID49IDAgKSA/IGxpbmUuc3Vic3RyaW5nKCBwb3MgKyAxICkgOiAnJztcblx0XHRcdHZhbHVlID0gdmFsdWUudHJpbSgpO1xuXG5cdFx0XHRpZiAoIGtleSA9PT0gJ25ld210bCcgKSB7XG5cblx0XHRcdFx0Ly8gTmV3IG1hdGVyaWFsXG5cblx0XHRcdFx0aW5mbyA9IHsgbmFtZTogdmFsdWUgfTtcblx0XHRcdFx0bWF0ZXJpYWxzSW5mb1sgdmFsdWUgXSA9IGluZm87XG5cblx0XHRcdH0gZWxzZSBpZiAoIGluZm8gKSB7XG5cblx0XHRcdFx0aWYgKCBrZXkgPT09ICdrYScgfHwga2V5ID09PSAna2QnIHx8IGtleSA9PT0gJ2tzJyApIHtcblxuXHRcdFx0XHRcdHZhciBzcyA9IHZhbHVlLnNwbGl0KCBkZWxpbWl0ZXJfcGF0dGVybiwgMyApO1xuXHRcdFx0XHRcdGluZm9bIGtleSBdID0gWyBwYXJzZUZsb2F0KCBzc1sgMCBdICksIHBhcnNlRmxvYXQoIHNzWyAxIF0gKSwgcGFyc2VGbG9hdCggc3NbIDIgXSApIF07XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdGluZm9bIGtleSBdID0gdmFsdWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHR2YXIgbWF0ZXJpYWxDcmVhdG9yID0gbmV3IFRIUkVFLk1UTExvYWRlci5NYXRlcmlhbENyZWF0b3IoIHRoaXMudGV4dHVyZVBhdGggfHwgdGhpcy5wYXRoLCB0aGlzLm1hdGVyaWFsT3B0aW9ucyApO1xuXHRcdG1hdGVyaWFsQ3JlYXRvci5zZXRDcm9zc09yaWdpbiggdGhpcy5jcm9zc09yaWdpbiApO1xuXHRcdG1hdGVyaWFsQ3JlYXRvci5zZXRNYW5hZ2VyKCB0aGlzLm1hbmFnZXIgKTtcblx0XHRtYXRlcmlhbENyZWF0b3Iuc2V0TWF0ZXJpYWxzKCBtYXRlcmlhbHNJbmZvICk7XG5cdFx0cmV0dXJuIG1hdGVyaWFsQ3JlYXRvcjtcblxuXHR9XG5cbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IFRIUkVFLU1UTExvYWRlci5NYXRlcmlhbENyZWF0b3JcbiAqIEBwYXJhbSBiYXNlVXJsIC0gVXJsIHJlbGF0aXZlIHRvIHdoaWNoIHRleHR1cmVzIGFyZSBsb2FkZWRcbiAqIEBwYXJhbSBvcHRpb25zIC0gU2V0IG9mIG9wdGlvbnMgb24gaG93IHRvIGNvbnN0cnVjdCB0aGUgbWF0ZXJpYWxzXG4gKiAgICAgICAgICAgICAgICAgIHNpZGU6IFdoaWNoIHNpZGUgdG8gYXBwbHkgdGhlIG1hdGVyaWFsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFRIUkVFLkZyb250U2lkZSAoZGVmYXVsdCksIFRIUkVFLkJhY2tTaWRlLCBUSFJFRS5Eb3VibGVTaWRlXG4gKiAgICAgICAgICAgICAgICAgIHdyYXA6IFdoYXQgdHlwZSBvZiB3cmFwcGluZyB0byBhcHBseSBmb3IgdGV4dHVyZXNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgVEhSRUUuUmVwZWF0V3JhcHBpbmcgKGRlZmF1bHQpLCBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nLCBUSFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nXG4gKiAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZVJHQjogUkdCcyBuZWVkIHRvIGJlIG5vcm1hbGl6ZWQgdG8gMC0xIGZyb20gMC0yNTVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0OiBmYWxzZSwgYXNzdW1lZCB0byBiZSBhbHJlYWR5IG5vcm1hbGl6ZWRcbiAqICAgICAgICAgICAgICAgICAgaWdub3JlWmVyb1JHQnM6IElnbm9yZSB2YWx1ZXMgb2YgUkdCcyAoS2EsS2QsS3MpIHRoYXQgYXJlIGFsbCAwJ3NcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQ6IGZhbHNlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuXG5USFJFRS5NVExMb2FkZXIuTWF0ZXJpYWxDcmVhdG9yID0gZnVuY3Rpb24gKCBiYXNlVXJsLCBvcHRpb25zICkge1xuXG5cdHRoaXMuYmFzZVVybCA9IGJhc2VVcmwgfHwgJyc7XG5cdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdHRoaXMubWF0ZXJpYWxzSW5mbyA9IHt9O1xuXHR0aGlzLm1hdGVyaWFscyA9IHt9O1xuXHR0aGlzLm1hdGVyaWFsc0FycmF5ID0gW107XG5cdHRoaXMubmFtZUxvb2t1cCA9IHt9O1xuXG5cdHRoaXMuc2lkZSA9ICggdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5zaWRlICkgPyB0aGlzLm9wdGlvbnMuc2lkZSA6IFRIUkVFLkZyb250U2lkZTtcblx0dGhpcy53cmFwID0gKCB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLndyYXAgKSA/IHRoaXMub3B0aW9ucy53cmFwIDogVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5cbn07XG5cblRIUkVFLk1UTExvYWRlci5NYXRlcmlhbENyZWF0b3IucHJvdG90eXBlID0ge1xuXG5cdGNvbnN0cnVjdG9yOiBUSFJFRS5NVExMb2FkZXIuTWF0ZXJpYWxDcmVhdG9yLFxuXG5cdGNyb3NzT3JpZ2luOiAnQW5vbnltb3VzJyxcblxuXHRzZXRDcm9zc09yaWdpbjogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHRoaXMuY3Jvc3NPcmlnaW4gPSB2YWx1ZTtcblxuXHR9LFxuXG5cdHNldE1hbmFnZXI6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHR0aGlzLm1hbmFnZXIgPSB2YWx1ZTtcblxuXHR9LFxuXG5cdHNldE1hdGVyaWFsczogZnVuY3Rpb24gKCBtYXRlcmlhbHNJbmZvICkge1xuXG5cdFx0dGhpcy5tYXRlcmlhbHNJbmZvID0gdGhpcy5jb252ZXJ0KCBtYXRlcmlhbHNJbmZvICk7XG5cdFx0dGhpcy5tYXRlcmlhbHMgPSB7fTtcblx0XHR0aGlzLm1hdGVyaWFsc0FycmF5ID0gW107XG5cdFx0dGhpcy5uYW1lTG9va3VwID0ge307XG5cblx0fSxcblxuXHRjb252ZXJ0OiBmdW5jdGlvbiAoIG1hdGVyaWFsc0luZm8gKSB7XG5cblx0XHRpZiAoICEgdGhpcy5vcHRpb25zICkgcmV0dXJuIG1hdGVyaWFsc0luZm87XG5cblx0XHR2YXIgY29udmVydGVkID0ge307XG5cblx0XHRmb3IgKCB2YXIgbW4gaW4gbWF0ZXJpYWxzSW5mbyApIHtcblxuXHRcdFx0Ly8gQ29udmVydCBtYXRlcmlhbHMgaW5mbyBpbnRvIG5vcm1hbGl6ZWQgZm9ybSBiYXNlZCBvbiBvcHRpb25zXG5cblx0XHRcdHZhciBtYXQgPSBtYXRlcmlhbHNJbmZvWyBtbiBdO1xuXG5cdFx0XHR2YXIgY292bWF0ID0ge307XG5cblx0XHRcdGNvbnZlcnRlZFsgbW4gXSA9IGNvdm1hdDtcblxuXHRcdFx0Zm9yICggdmFyIHByb3AgaW4gbWF0ICkge1xuXG5cdFx0XHRcdHZhciBzYXZlID0gdHJ1ZTtcblx0XHRcdFx0dmFyIHZhbHVlID0gbWF0WyBwcm9wIF07XG5cdFx0XHRcdHZhciBscHJvcCA9IHByb3AudG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBscHJvcCApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2tkJzpcblx0XHRcdFx0XHRjYXNlICdrYSc6XG5cdFx0XHRcdFx0Y2FzZSAna3MnOlxuXG5cdFx0XHRcdFx0XHQvLyBEaWZmdXNlIGNvbG9yIChjb2xvciB1bmRlciB3aGl0ZSBsaWdodCkgdXNpbmcgUkdCIHZhbHVlc1xuXG5cdFx0XHRcdFx0XHRpZiAoIHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMubm9ybWFsaXplUkdCICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhbHVlID0gWyB2YWx1ZVsgMCBdIC8gMjU1LCB2YWx1ZVsgMSBdIC8gMjU1LCB2YWx1ZVsgMiBdIC8gMjU1IF07XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmlnbm9yZVplcm9SR0JzICkge1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdmFsdWVbIDAgXSA9PT0gMCAmJiB2YWx1ZVsgMSBdID09PSAwICYmIHZhbHVlWyAyIF0gPT09IDAgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBpZ25vcmVcblxuXHRcdFx0XHRcdFx0XHRcdHNhdmUgPSBmYWxzZTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBzYXZlICkge1xuXG5cdFx0XHRcdFx0Y292bWF0WyBscHJvcCBdID0gdmFsdWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gY29udmVydGVkO1xuXG5cdH0sXG5cblx0cHJlbG9hZDogZnVuY3Rpb24gKCkge1xuXG5cdFx0Zm9yICggdmFyIG1uIGluIHRoaXMubWF0ZXJpYWxzSW5mbyApIHtcblxuXHRcdFx0dGhpcy5jcmVhdGUoIG1uICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRnZXRJbmRleDogZnVuY3Rpb24gKCBtYXRlcmlhbE5hbWUgKSB7XG5cblx0XHRyZXR1cm4gdGhpcy5uYW1lTG9va3VwWyBtYXRlcmlhbE5hbWUgXTtcblxuXHR9LFxuXG5cdGdldEFzQXJyYXk6IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciBpbmRleCA9IDA7XG5cblx0XHRmb3IgKCB2YXIgbW4gaW4gdGhpcy5tYXRlcmlhbHNJbmZvICkge1xuXG5cdFx0XHR0aGlzLm1hdGVyaWFsc0FycmF5WyBpbmRleCBdID0gdGhpcy5jcmVhdGUoIG1uICk7XG5cdFx0XHR0aGlzLm5hbWVMb29rdXBbIG1uIF0gPSBpbmRleDtcblx0XHRcdGluZGV4ICsrO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMubWF0ZXJpYWxzQXJyYXk7XG5cblx0fSxcblxuXHRjcmVhdGU6IGZ1bmN0aW9uICggbWF0ZXJpYWxOYW1lICkge1xuXG5cdFx0aWYgKCB0aGlzLm1hdGVyaWFsc1sgbWF0ZXJpYWxOYW1lIF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0dGhpcy5jcmVhdGVNYXRlcmlhbF8oIG1hdGVyaWFsTmFtZSApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMubWF0ZXJpYWxzWyBtYXRlcmlhbE5hbWUgXTtcblxuXHR9LFxuXG5cdGNyZWF0ZU1hdGVyaWFsXzogZnVuY3Rpb24gKCBtYXRlcmlhbE5hbWUgKSB7XG5cblx0XHQvLyBDcmVhdGUgbWF0ZXJpYWxcblxuXHRcdHZhciBzY29wZSA9IHRoaXM7XG5cdFx0dmFyIG1hdCA9IHRoaXMubWF0ZXJpYWxzSW5mb1sgbWF0ZXJpYWxOYW1lIF07XG5cdFx0dmFyIHBhcmFtcyA9IHtcblxuXHRcdFx0bmFtZTogbWF0ZXJpYWxOYW1lLFxuXHRcdFx0c2lkZTogdGhpcy5zaWRlXG5cblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gcmVzb2x2ZVVSTCggYmFzZVVybCwgdXJsICkge1xuXG5cdFx0XHRpZiAoIHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnIHx8IHVybCA9PT0gJycgKVxuXHRcdFx0XHRyZXR1cm4gJyc7XG5cblx0XHRcdC8vIEFic29sdXRlIFVSTFxuXHRcdFx0aWYgKCAvXmh0dHBzPzpcXC9cXC8vaS50ZXN0KCB1cmwgKSApIHJldHVybiB1cmw7XG5cblx0XHRcdHJldHVybiBiYXNlVXJsICsgdXJsO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2V0TWFwRm9yVHlwZSggbWFwVHlwZSwgdmFsdWUgKSB7XG5cblx0XHRcdGlmICggcGFyYW1zWyBtYXBUeXBlIF0gKSByZXR1cm47IC8vIEtlZXAgdGhlIGZpcnN0IGVuY291bnRlcmVkIHRleHR1cmVcblxuXHRcdFx0dmFyIHRleFBhcmFtcyA9IHNjb3BlLmdldFRleHR1cmVQYXJhbXMoIHZhbHVlLCBwYXJhbXMgKTtcblx0XHRcdHZhciBtYXAgPSBzY29wZS5sb2FkVGV4dHVyZSggcmVzb2x2ZVVSTCggc2NvcGUuYmFzZVVybCwgdGV4UGFyYW1zLnVybCApICk7XG5cblx0XHRcdG1hcC5yZXBlYXQuY29weSggdGV4UGFyYW1zLnNjYWxlICk7XG5cdFx0XHRtYXAub2Zmc2V0LmNvcHkoIHRleFBhcmFtcy5vZmZzZXQgKTtcblxuXHRcdFx0bWFwLndyYXBTID0gc2NvcGUud3JhcDtcblx0XHRcdG1hcC53cmFwVCA9IHNjb3BlLndyYXA7XG5cblx0XHRcdHBhcmFtc1sgbWFwVHlwZSBdID0gbWFwO1xuXG5cdFx0fVxuXG5cdFx0Zm9yICggdmFyIHByb3AgaW4gbWF0ICkge1xuXG5cdFx0XHR2YXIgdmFsdWUgPSBtYXRbIHByb3AgXTtcblx0XHRcdHZhciBuO1xuXG5cdFx0XHRpZiAoIHZhbHVlID09PSAnJyApIGNvbnRpbnVlO1xuXG5cdFx0XHRzd2l0Y2ggKCBwcm9wLnRvTG93ZXJDYXNlKCkgKSB7XG5cblx0XHRcdFx0Ly8gTnMgaXMgbWF0ZXJpYWwgc3BlY3VsYXIgZXhwb25lbnRcblxuXHRcdFx0XHRjYXNlICdrZCc6XG5cblx0XHRcdFx0XHQvLyBEaWZmdXNlIGNvbG9yIChjb2xvciB1bmRlciB3aGl0ZSBsaWdodCkgdXNpbmcgUkdCIHZhbHVlc1xuXG5cdFx0XHRcdFx0cGFyYW1zLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAna3MnOlxuXG5cdFx0XHRcdFx0Ly8gU3BlY3VsYXIgY29sb3IgKGNvbG9yIHdoZW4gbGlnaHQgaXMgcmVmbGVjdGVkIGZyb20gc2hpbnkgc3VyZmFjZSkgdXNpbmcgUkdCIHZhbHVlc1xuXHRcdFx0XHRcdHBhcmFtcy5zcGVjdWxhciA9IG5ldyBUSFJFRS5Db2xvcigpLmZyb21BcnJheSggdmFsdWUgKTtcblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ21hcF9rZCc6XG5cblx0XHRcdFx0XHQvLyBEaWZmdXNlIHRleHR1cmUgbWFwXG5cblx0XHRcdFx0XHRzZXRNYXBGb3JUeXBlKCBcIm1hcFwiLCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnbWFwX2tzJzpcblxuXHRcdFx0XHRcdC8vIFNwZWN1bGFyIG1hcFxuXG5cdFx0XHRcdFx0c2V0TWFwRm9yVHlwZSggXCJzcGVjdWxhck1hcFwiLCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnbm9ybSc6XG5cblx0XHRcdFx0XHRzZXRNYXBGb3JUeXBlKCBcIm5vcm1hbE1hcFwiLCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnbWFwX2J1bXAnOlxuXHRcdFx0XHRjYXNlICdidW1wJzpcblxuXHRcdFx0XHRcdC8vIEJ1bXAgdGV4dHVyZSBtYXBcblxuXHRcdFx0XHRcdHNldE1hcEZvclR5cGUoIFwiYnVtcE1hcFwiLCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnbnMnOlxuXG5cdFx0XHRcdFx0Ly8gVGhlIHNwZWN1bGFyIGV4cG9uZW50IChkZWZpbmVzIHRoZSBmb2N1cyBvZiB0aGUgc3BlY3VsYXIgaGlnaGxpZ2h0KVxuXHRcdFx0XHRcdC8vIEEgaGlnaCBleHBvbmVudCByZXN1bHRzIGluIGEgdGlnaHQsIGNvbmNlbnRyYXRlZCBoaWdobGlnaHQuIE5zIHZhbHVlcyBub3JtYWxseSByYW5nZSBmcm9tIDAgdG8gMTAwMC5cblxuXHRcdFx0XHRcdHBhcmFtcy5zaGluaW5lc3MgPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnZCc6XG5cdFx0XHRcdFx0biA9IHBhcnNlRmxvYXQoIHZhbHVlICk7XG5cblx0XHRcdFx0XHRpZiAoIG4gPCAxICkge1xuXG5cdFx0XHRcdFx0XHRwYXJhbXMub3BhY2l0eSA9IG47XG5cdFx0XHRcdFx0XHRwYXJhbXMudHJhbnNwYXJlbnQgPSB0cnVlO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAndHInOlxuXHRcdFx0XHRcdG4gPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmludmVydFRyUHJvcGVydHkgKSBuID0gMSAtIG47XG5cblx0XHRcdFx0XHRpZiAoIG4gPCAxICkge1xuXG5cdFx0XHRcdFx0XHRwYXJhbXMub3BhY2l0eSA9IG47XG5cdFx0XHRcdFx0XHRwYXJhbXMudHJhbnNwYXJlbnQgPSB0cnVlO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0dGhpcy5tYXRlcmlhbHNbIG1hdGVyaWFsTmFtZSBdID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCBwYXJhbXMgKTtcblx0XHRyZXR1cm4gdGhpcy5tYXRlcmlhbHNbIG1hdGVyaWFsTmFtZSBdO1xuXG5cdH0sXG5cblx0Z2V0VGV4dHVyZVBhcmFtczogZnVuY3Rpb24gKCB2YWx1ZSwgbWF0UGFyYW1zICkge1xuXG5cdFx0dmFyIHRleFBhcmFtcyA9IHtcblxuXHRcdFx0c2NhbGU6IG5ldyBUSFJFRS5WZWN0b3IyKCAxLCAxICksXG5cdFx0XHRvZmZzZXQ6IG5ldyBUSFJFRS5WZWN0b3IyKCAwLCAwIClcblxuXHRcdCB9O1xuXG5cdFx0dmFyIGl0ZW1zID0gdmFsdWUuc3BsaXQoIC9cXHMrLyApO1xuXHRcdHZhciBwb3M7XG5cblx0XHRwb3MgPSBpdGVtcy5pbmRleE9mKCAnLWJtJyApO1xuXG5cdFx0aWYgKCBwb3MgPj0gMCApIHtcblxuXHRcdFx0bWF0UGFyYW1zLmJ1bXBTY2FsZSA9IHBhcnNlRmxvYXQoIGl0ZW1zWyBwb3MgKyAxIF0gKTtcblx0XHRcdGl0ZW1zLnNwbGljZSggcG9zLCAyICk7XG5cblx0XHR9XG5cblx0XHRwb3MgPSBpdGVtcy5pbmRleE9mKCAnLXMnICk7XG5cblx0XHRpZiAoIHBvcyA+PSAwICkge1xuXG5cdFx0XHR0ZXhQYXJhbXMuc2NhbGUuc2V0KCBwYXJzZUZsb2F0KCBpdGVtc1sgcG9zICsgMSBdICksIHBhcnNlRmxvYXQoIGl0ZW1zWyBwb3MgKyAyIF0gKSApO1xuXHRcdFx0aXRlbXMuc3BsaWNlKCBwb3MsIDQgKTsgLy8gd2UgZXhwZWN0IDMgcGFyYW1ldGVycyBoZXJlIVxuXG5cdFx0fVxuXG5cdFx0cG9zID0gaXRlbXMuaW5kZXhPZiggJy1vJyApO1xuXG5cdFx0aWYgKCBwb3MgPj0gMCApIHtcblxuXHRcdFx0dGV4UGFyYW1zLm9mZnNldC5zZXQoIHBhcnNlRmxvYXQoIGl0ZW1zWyBwb3MgKyAxIF0gKSwgcGFyc2VGbG9hdCggaXRlbXNbIHBvcyArIDIgXSApICk7XG5cdFx0XHRpdGVtcy5zcGxpY2UoIHBvcywgNCApOyAvLyB3ZSBleHBlY3QgMyBwYXJhbWV0ZXJzIGhlcmUhXG5cblx0XHR9XG5cblx0XHR0ZXhQYXJhbXMudXJsID0gaXRlbXMuam9pbiggJyAnICkudHJpbSgpO1xuXHRcdHJldHVybiB0ZXhQYXJhbXM7XG5cblx0fSxcblxuXHRsb2FkVGV4dHVyZTogZnVuY3Rpb24gKCB1cmwsIG1hcHBpbmcsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcblxuXHRcdHZhciB0ZXh0dXJlO1xuXHRcdHZhciBsb2FkZXIgPSBUSFJFRS5Mb2FkZXIuSGFuZGxlcnMuZ2V0KCB1cmwgKTtcblx0XHR2YXIgbWFuYWdlciA9ICggdGhpcy5tYW5hZ2VyICE9PSB1bmRlZmluZWQgKSA/IHRoaXMubWFuYWdlciA6IFRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjtcblxuXHRcdGlmICggbG9hZGVyID09PSBudWxsICkge1xuXG5cdFx0XHRsb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlciggbWFuYWdlciApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBsb2FkZXIuc2V0Q3Jvc3NPcmlnaW4gKSBsb2FkZXIuc2V0Q3Jvc3NPcmlnaW4oIHRoaXMuY3Jvc3NPcmlnaW4gKTtcblx0XHR0ZXh0dXJlID0gbG9hZGVyLmxvYWQoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICk7XG5cblx0XHRpZiAoIG1hcHBpbmcgIT09IHVuZGVmaW5lZCApIHRleHR1cmUubWFwcGluZyA9IG1hcHBpbmc7XG5cblx0XHRyZXR1cm4gdGV4dHVyZTtcblxuXHR9XG5cbn07XG4iLCIvKipcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXG4gKi9cblxuVEhSRUUuT0JKTG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuICAgIFxuICAgICAgICB0aGlzLm1hbmFnZXIgPSAoIG1hbmFnZXIgIT09IHVuZGVmaW5lZCApID8gbWFuYWdlciA6IFRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjtcbiAgICBcbiAgICAgICAgdGhpcy5tYXRlcmlhbHMgPSBudWxsO1xuICAgIFxuICAgICAgICB0aGlzLnJlZ2V4cCA9IHtcbiAgICAgICAgICAgIC8vIHYgZmxvYXQgZmxvYXQgZmxvYXRcbiAgICAgICAgICAgIHZlcnRleF9wYXR0ZXJuICAgICAgICAgICA6IC9edlxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKS8sXG4gICAgICAgICAgICAvLyB2biBmbG9hdCBmbG9hdCBmbG9hdFxuICAgICAgICAgICAgbm9ybWFsX3BhdHRlcm4gICAgICAgICAgIDogL152blxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKS8sXG4gICAgICAgICAgICAvLyB2dCBmbG9hdCBmbG9hdFxuICAgICAgICAgICAgdXZfcGF0dGVybiAgICAgICAgICAgICAgIDogL152dFxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspLyxcbiAgICAgICAgICAgIC8vIGYgdmVydGV4IHZlcnRleCB2ZXJ0ZXhcbiAgICAgICAgICAgIGZhY2VfdmVydGV4ICAgICAgICAgICAgICA6IC9eZlxccysoLT9cXGQrKVxccysoLT9cXGQrKVxccysoLT9cXGQrKSg/OlxccysoLT9cXGQrKSk/LyxcbiAgICAgICAgICAgIC8vIGYgdmVydGV4L3V2IHZlcnRleC91diB2ZXJ0ZXgvdXZcbiAgICAgICAgICAgIGZhY2VfdmVydGV4X3V2ICAgICAgICAgICA6IC9eZlxccysoLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC8oLT9cXGQrKSg/OlxccysoLT9cXGQrKVxcLygtP1xcZCspKT8vLFxuICAgICAgICAgICAgLy8gZiB2ZXJ0ZXgvdXYvbm9ybWFsIHZlcnRleC91di9ub3JtYWwgdmVydGV4L3V2L25vcm1hbFxuICAgICAgICAgICAgZmFjZV92ZXJ0ZXhfdXZfbm9ybWFsICAgIDogL15mXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcLygtP1xcZCspXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspKD86XFxzKygtP1xcZCspXFwvKC0/XFxkKylcXC8oLT9cXGQrKSk/LyxcbiAgICAgICAgICAgIC8vIGYgdmVydGV4Ly9ub3JtYWwgdmVydGV4Ly9ub3JtYWwgdmVydGV4Ly9ub3JtYWxcbiAgICAgICAgICAgIGZhY2VfdmVydGV4X25vcm1hbCAgICAgICA6IC9eZlxccysoLT9cXGQrKVxcL1xcLygtP1xcZCspXFxzKygtP1xcZCspXFwvXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKSg/OlxccysoLT9cXGQrKVxcL1xcLygtP1xcZCspKT8vLFxuICAgICAgICAgICAgLy8gbyBvYmplY3RfbmFtZSB8IGcgZ3JvdXBfbmFtZVxuICAgICAgICAgICAgb2JqZWN0X3BhdHRlcm4gICAgICAgICAgIDogL15bb2ddXFxzKiguKyk/LyxcbiAgICAgICAgICAgIC8vIHMgYm9vbGVhblxuICAgICAgICAgICAgc21vb3RoaW5nX3BhdHRlcm4gICAgICAgIDogL15zXFxzKyhcXGQrfG9ufG9mZikvLFxuICAgICAgICAgICAgLy8gbXRsbGliIGZpbGVfcmVmZXJlbmNlXG4gICAgICAgICAgICBtYXRlcmlhbF9saWJyYXJ5X3BhdHRlcm4gOiAvXm10bGxpYiAvLFxuICAgICAgICAgICAgLy8gdXNlbXRsIG1hdGVyaWFsX25hbWVcbiAgICAgICAgICAgIG1hdGVyaWFsX3VzZV9wYXR0ZXJuICAgICA6IC9edXNlbXRsIC9cbiAgICAgICAgfTtcbiAgICBcbiAgICB9O1xuICAgIFxuICAgIFRIUkVFLk9CSkxvYWRlci5wcm90b3R5cGUgPSB7XG4gICAgXG4gICAgICAgIGNvbnN0cnVjdG9yOiBUSFJFRS5PQkpMb2FkZXIsXG4gICAgXG4gICAgICAgIGxvYWQ6IGZ1bmN0aW9uICggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgIFxuICAgICAgICAgICAgdmFyIGxvYWRlciA9IG5ldyBUSFJFRS5GaWxlTG9hZGVyKCBzY29wZS5tYW5hZ2VyICk7XG4gICAgICAgICAgICBsb2FkZXIuc2V0UGF0aCggdGhpcy5wYXRoICk7XG4gICAgICAgICAgICBsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIHRleHQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgb25Mb2FkKCBzY29wZS5wYXJzZSggdGV4dCApICk7XG4gICAgXG4gICAgICAgICAgICB9LCBvblByb2dyZXNzLCBvbkVycm9yICk7XG4gICAgXG4gICAgICAgIH0sXG4gICAgXG4gICAgICAgIHNldFBhdGg6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG4gICAgXG4gICAgICAgICAgICB0aGlzLnBhdGggPSB2YWx1ZTtcbiAgICBcbiAgICAgICAgfSxcbiAgICBcbiAgICAgICAgc2V0TWF0ZXJpYWxzOiBmdW5jdGlvbiAoIG1hdGVyaWFscyApIHtcbiAgICBcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzID0gbWF0ZXJpYWxzO1xuICAgIFxuICAgICAgICB9LFxuICAgIFxuICAgICAgICBfY3JlYXRlUGFyc2VyU3RhdGUgOiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0cyAgOiBbXSxcbiAgICAgICAgICAgICAgICBvYmplY3QgICA6IHt9LFxuICAgIFxuICAgICAgICAgICAgICAgIHZlcnRpY2VzIDogW10sXG4gICAgICAgICAgICAgICAgbm9ybWFscyAgOiBbXSxcbiAgICAgICAgICAgICAgICB1dnMgICAgICA6IFtdLFxuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsTGlicmFyaWVzIDogW10sXG4gICAgXG4gICAgICAgICAgICAgICAgc3RhcnRPYmplY3Q6IGZ1bmN0aW9uICggbmFtZSwgZnJvbURlY2xhcmF0aW9uICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCBvYmplY3QgKGluaXRpYWwgZnJvbSByZXNldCkgaXMgbm90IGZyb20gYSBnL28gZGVjbGFyYXRpb24gaW4gdGhlIHBhcnNlZFxuICAgICAgICAgICAgICAgICAgICAvLyBmaWxlLiBXZSBuZWVkIHRvIHVzZSBpdCBmb3IgdGhlIGZpcnN0IHBhcnNlZCBnL28gdG8ga2VlcCB0aGluZ3MgaW4gc3luYy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLm9iamVjdCAmJiB0aGlzLm9iamVjdC5mcm9tRGVjbGFyYXRpb24gPT09IGZhbHNlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3QubmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5mcm9tRGVjbGFyYXRpb24gPSAoIGZyb21EZWNsYXJhdGlvbiAhPT0gZmFsc2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXNNYXRlcmlhbCA9ICggdGhpcy5vYmplY3QgJiYgdHlwZW9mIHRoaXMub2JqZWN0LmN1cnJlbnRNYXRlcmlhbCA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMub2JqZWN0LmN1cnJlbnRNYXRlcmlhbCgpIDogdW5kZWZpbmVkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5vYmplY3QgJiYgdHlwZW9mIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSA9PT0gJ2Z1bmN0aW9uJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSggdHJ1ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IG5hbWUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tRGVjbGFyYXRpb24gOiAoIGZyb21EZWNsYXJhdGlvbiAhPT0gZmFsc2UgKSxcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2VzIDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFscyAgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dnMgICAgICA6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxzIDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBzbW9vdGggOiB0cnVlLFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRNYXRlcmlhbCA6IGZ1bmN0aW9uKCBuYW1lLCBsaWJyYXJpZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzID0gdGhpcy5fZmluYWxpemUoIGZhbHNlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV3IHVzZW10bCBkZWNsYXJhdGlvbiBvdmVyd3JpdGVzIGFuIGluaGVyaXRlZCBtYXRlcmlhbCwgZXhjZXB0IGlmIGZhY2VzIHdlcmUgZGVjbGFyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciB0aGUgbWF0ZXJpYWwsIHRoZW4gaXQgbXVzdCBiZSBwcmVzZXJ2ZWQgZm9yIHByb3BlciBNdWx0aU1hdGVyaWFsIGNvbnRpbnVhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByZXZpb3VzICYmICggcHJldmlvdXMuaW5oZXJpdGVkIHx8IHByZXZpb3VzLmdyb3VwQ291bnQgPD0gMCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFscy5zcGxpY2UoIHByZXZpb3VzLmluZGV4LCAxICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggICAgICA6IHRoaXMubWF0ZXJpYWxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAgICAgICA6IG5hbWUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG10bGxpYiAgICAgOiAoIEFycmF5LmlzQXJyYXkoIGxpYnJhcmllcyApICYmIGxpYnJhcmllcy5sZW5ndGggPiAwID8gbGlicmFyaWVzWyBsaWJyYXJpZXMubGVuZ3RoIC0gMSBdIDogJycgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc21vb3RoICAgICA6ICggcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IHByZXZpb3VzLnNtb290aCA6IHRoaXMuc21vb3RoICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwU3RhcnQgOiAoIHByZXZpb3VzICE9PSB1bmRlZmluZWQgPyBwcmV2aW91cy5ncm91cEVuZCA6IDAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBFbmQgICA6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cENvdW50IDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRlZCAgOiBmYWxzZSxcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUgOiBmdW5jdGlvbiggaW5kZXggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmVkID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ICAgICAgOiAoIHR5cGVvZiBpbmRleCA9PT0gJ251bWJlcicgPyBpbmRleCA6IHRoaXMuaW5kZXggKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgICAgIDogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG10bGxpYiAgICAgOiB0aGlzLm10bGxpYixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbW9vdGggICAgIDogdGhpcy5zbW9vdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBTdGFydCA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBFbmQgICA6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQ291bnQgOiAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0ZWQgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZWQuY2xvbmUgPSB0aGlzLmNsb25lLmJpbmQoY2xvbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLnB1c2goIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRNYXRlcmlhbCA6IGZ1bmN0aW9uKCkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5tYXRlcmlhbHMubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWxzWyB0aGlzLm1hdGVyaWFscy5sZW5ndGggLSAxIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpbmFsaXplIDogZnVuY3Rpb24oIGVuZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdE11bHRpTWF0ZXJpYWwgPSB0aGlzLmN1cnJlbnRNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbGFzdE11bHRpTWF0ZXJpYWwgJiYgbGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBFbmQgPT09IC0xICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cEVuZCA9IHRoaXMuZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoIC8gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBDb3VudCA9IGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwRW5kIC0gbGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBTdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE11bHRpTWF0ZXJpYWwuaW5oZXJpdGVkID0gZmFsc2U7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBvYmplY3RzIHRhaWwgbWF0ZXJpYWxzIGlmIG5vIGZhY2UgZGVjbGFyYXRpb25zIGZvbGxvd2VkIHRoZW0gYmVmb3JlIGEgbmV3IG8vZyBzdGFydGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZW5kICYmIHRoaXMubWF0ZXJpYWxzLmxlbmd0aCA+IDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBtaSA9IHRoaXMubWF0ZXJpYWxzLmxlbmd0aCAtIDE7IG1pID49IDA7IG1pLS0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMubWF0ZXJpYWxzW21pXS5ncm91cENvdW50IDw9IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMuc3BsaWNlKCBtaSwgMSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEd1YXJhbnRlZSBhdCBsZWFzdCBvbmUgZW1wdHkgbWF0ZXJpYWwsIHRoaXMgbWFrZXMgdGhlIGNyZWF0aW9uIGxhdGVyIG1vcmUgc3RyYWlnaHQgZm9yd2FyZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGVuZCAmJiB0aGlzLm1hdGVyaWFscy5sZW5ndGggPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAgIDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbW9vdGggOiB0aGlzLnNtb290aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RNdWx0aU1hdGVyaWFsO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBJbmhlcml0IHByZXZpb3VzIG9iamVjdHMgbWF0ZXJpYWwuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNwZWMgdGVsbHMgdXMgdGhhdCBhIGRlY2xhcmVkIG1hdGVyaWFsIG11c3QgYmUgc2V0IHRvIGFsbCBvYmplY3RzIHVudGlsIGEgbmV3IG1hdGVyaWFsIGlzIGRlY2xhcmVkLlxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhIHVzZW10bCBkZWNsYXJhdGlvbiBpcyBlbmNvdW50ZXJlZCB3aGlsZSB0aGlzIG5ldyBvYmplY3QgaXMgYmVpbmcgcGFyc2VkLCBpdCB3aWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIG92ZXJ3cml0ZSB0aGUgaW5oZXJpdGVkIG1hdGVyaWFsLiBFeGNlcHRpb24gYmVpbmcgdGhhdCB0aGVyZSB3YXMgYWxyZWFkeSBmYWNlIGRlY2xhcmF0aW9uc1xuICAgICAgICAgICAgICAgICAgICAvLyB0byB0aGUgaW5oZXJpdGVkIG1hdGVyaWFsLCB0aGVuIGl0IHdpbGwgYmUgcHJlc2VydmVkIGZvciBwcm9wZXIgTXVsdGlNYXRlcmlhbCBjb250aW51YXRpb24uXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggcHJldmlvdXNNYXRlcmlhbCAmJiBwcmV2aW91c01hdGVyaWFsLm5hbWUgJiYgdHlwZW9mIHByZXZpb3VzTWF0ZXJpYWwuY2xvbmUgPT09IFwiZnVuY3Rpb25cIiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNsYXJlZCA9IHByZXZpb3VzTWF0ZXJpYWwuY2xvbmUoIDAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2xhcmVkLmluaGVyaXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5tYXRlcmlhbHMucHVzaCggZGVjbGFyZWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHMucHVzaCggdGhpcy5vYmplY3QgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIGZpbmFsaXplIDogZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5vYmplY3QgJiYgdHlwZW9mIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSA9PT0gJ2Z1bmN0aW9uJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSggdHJ1ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJzZVZlcnRleEluZGV4OiBmdW5jdGlvbiAoIHZhbHVlLCBsZW4gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KCB2YWx1ZSwgMTAgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICggaW5kZXggPj0gMCA/IGluZGV4IC0gMSA6IGluZGV4ICsgbGVuIC8gMyApICogMztcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIHBhcnNlTm9ybWFsSW5kZXg6IGZ1bmN0aW9uICggdmFsdWUsIGxlbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQoIHZhbHVlLCAxMCApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCBpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAzICkgKiAzO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgcGFyc2VVVkluZGV4OiBmdW5jdGlvbiAoIHZhbHVlLCBsZW4gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KCB2YWx1ZSwgMTAgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICggaW5kZXggPj0gMCA/IGluZGV4IC0gMSA6IGluZGV4ICsgbGVuIC8gMiApICogMjtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIGFkZFZlcnRleDogZnVuY3Rpb24gKCBhLCBiLCBjICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gdGhpcy52ZXJ0aWNlcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBhICsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGEgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYSArIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBiICsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGIgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYiArIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBjICsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGMgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYyArIDIgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgYWRkVmVydGV4TGluZTogZnVuY3Rpb24gKCBhICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gdGhpcy52ZXJ0aWNlcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBhICsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGEgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYSArIDIgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgYWRkTm9ybWFsIDogZnVuY3Rpb24gKCBhLCBiLCBjICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gdGhpcy5ub3JtYWxzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkubm9ybWFscztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYSArIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBhICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGEgKyAyIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYiArIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBiICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGIgKyAyIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYyArIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBjICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGMgKyAyIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIGFkZFVWOiBmdW5jdGlvbiAoIGEsIGIsIGMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSB0aGlzLnV2cztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnV2cztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYSArIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBhICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGIgKyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYiArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBjICsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGMgKyAxIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIGFkZFVWTGluZTogZnVuY3Rpb24gKCBhICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gdGhpcy51dnM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS51dnM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGEgKyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYSArIDEgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgYWRkRmFjZTogZnVuY3Rpb24gKCBhLCBiLCBjLCBkLCB1YSwgdWIsIHVjLCB1ZCwgbmEsIG5iLCBuYywgbmQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB2TGVuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpYSA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleCggYSwgdkxlbiApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWIgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoIGIsIHZMZW4gKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljID0gdGhpcy5wYXJzZVZlcnRleEluZGV4KCBjLCB2TGVuICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBkID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFZlcnRleCggaWEsIGliLCBpYyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoIGQsIHZMZW4gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmVydGV4KCBpYSwgaWIsIGlkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFZlcnRleCggaWIsIGljLCBpZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggdWEgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1dkxlbiA9IHRoaXMudXZzLmxlbmd0aDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlhID0gdGhpcy5wYXJzZVVWSW5kZXgoIHVhLCB1dkxlbiApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWIgPSB0aGlzLnBhcnNlVVZJbmRleCggdWIsIHV2TGVuICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpYyA9IHRoaXMucGFyc2VVVkluZGV4KCB1YywgdXZMZW4gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZCA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVVYoIGlhLCBpYiwgaWMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSB0aGlzLnBhcnNlVVZJbmRleCggdWQsIHV2TGVuICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRVViggaWEsIGliLCBpZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVVYoIGliLCBpYywgaWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG5hICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3JtYWxzIGFyZSBtYW55IHRpbWVzIHRoZSBzYW1lLiBJZiBzbywgc2tpcCBmdW5jdGlvbiBjYWxsIGFuZCBwYXJzZUludC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuTGVuID0gdGhpcy5ub3JtYWxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlhID0gdGhpcy5wYXJzZU5vcm1hbEluZGV4KCBuYSwgbkxlbiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWIgPSBuYSA9PT0gbmIgPyBpYSA6IHRoaXMucGFyc2VOb3JtYWxJbmRleCggbmIsIG5MZW4gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljID0gbmEgPT09IG5jID8gaWEgOiB0aGlzLnBhcnNlTm9ybWFsSW5kZXgoIG5jLCBuTGVuICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGQgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE5vcm1hbCggaWEsIGliLCBpYyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHRoaXMucGFyc2VOb3JtYWxJbmRleCggbmQsIG5MZW4gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE5vcm1hbCggaWEsIGliLCBpZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTm9ybWFsKCBpYiwgaWMsIGlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIGFkZExpbmVHZW9tZXRyeTogZnVuY3Rpb24gKCB2ZXJ0aWNlcywgdXZzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5nZW9tZXRyeS50eXBlID0gJ0xpbmUnO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdkxlbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXZMZW4gPSB0aGlzLnV2cy5sZW5ndGg7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciB2aSA9IDAsIGwgPSB2ZXJ0aWNlcy5sZW5ndGg7IHZpIDwgbDsgdmkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFZlcnRleExpbmUoIHRoaXMucGFyc2VWZXJ0ZXhJbmRleCggdmVydGljZXNbIHZpIF0sIHZMZW4gKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciB1dmkgPSAwLCBsID0gdXZzLmxlbmd0aDsgdXZpIDwgbDsgdXZpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRVVkxpbmUoIHRoaXMucGFyc2VVVkluZGV4KCB1dnNbIHV2aSBdLCB1dkxlbiApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgc3RhdGUuc3RhcnRPYmplY3QoICcnLCBmYWxzZSApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIFxuICAgICAgICB9LFxuICAgIFxuICAgICAgICBwYXJzZTogZnVuY3Rpb24gKCB0ZXh0ICkge1xuICAgIFxuICAgICAgICAgICAgY29uc29sZS50aW1lKCAnT0JKTG9hZGVyJyApO1xuICAgIFxuICAgICAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5fY3JlYXRlUGFyc2VyU3RhdGUoKTtcbiAgICBcbiAgICAgICAgICAgIGlmICggdGV4dC5pbmRleE9mKCAnXFxyXFxuJyApICE9PSAtIDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBmYXN0ZXIgdGhhbiBTdHJpbmcuc3BsaXQgd2l0aCByZWdleCB0aGF0IHNwbGl0cyBvbiBib3RoXG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSggL1xcclxcbi9nLCAnXFxuJyApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCB0ZXh0LmluZGV4T2YoICdcXFxcXFxuJyApICE9PSAtIDEpIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBqb2luIGxpbmVzIHNlcGFyYXRlZCBieSBhIGxpbmUgY29udGludWF0aW9uIGNoYXJhY3RlciAoXFwpXG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSggL1xcXFxcXG4vZywgJycgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBsaW5lcyA9IHRleHQuc3BsaXQoICdcXG4nICk7XG4gICAgICAgICAgICB2YXIgbGluZSA9ICcnLCBsaW5lRmlyc3RDaGFyID0gJycsIGxpbmVTZWNvbmRDaGFyID0gJyc7XG4gICAgICAgICAgICB2YXIgbGluZUxlbmd0aCA9IDA7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgXG4gICAgICAgICAgICAvLyBGYXN0ZXIgdG8ganVzdCB0cmltIGxlZnQgc2lkZSBvZiB0aGUgbGluZS4gVXNlIGlmIGF2YWlsYWJsZS5cbiAgICAgICAgICAgIHZhciB0cmltTGVmdCA9ICggdHlwZW9mICcnLnRyaW1MZWZ0ID09PSAnZnVuY3Rpb24nICk7XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBsaW5lcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGxpbmUgPSB0cmltTGVmdCA/IGxpbmUudHJpbUxlZnQoKSA6IGxpbmUudHJpbSgpO1xuICAgIFxuICAgICAgICAgICAgICAgIGxpbmVMZW5ndGggPSBsaW5lLmxlbmd0aDtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGxpbmVMZW5ndGggPT09IDAgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICBsaW5lRmlyc3RDaGFyID0gbGluZS5jaGFyQXQoIDAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBAdG9kbyBpbnZva2UgcGFzc2VkIGluIGhhbmRsZXIgaWYgYW55XG4gICAgICAgICAgICAgICAgaWYgKCBsaW5lRmlyc3RDaGFyID09PSAnIycgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGxpbmVGaXJzdENoYXIgPT09ICd2JyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbGluZVNlY29uZENoYXIgPSBsaW5lLmNoYXJBdCggMSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGxpbmVTZWNvbmRDaGFyID09PSAnICcgJiYgKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC52ZXJ0ZXhfcGF0dGVybi5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAgICAxICAgICAgMiAgICAgIDNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtcInYgMS4wIDIuMCAzLjBcIiwgXCIxLjBcIiwgXCIyLjBcIiwgXCIzLjBcIl1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnZlcnRpY2VzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdCggcmVzdWx0WyAxIF0gKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KCByZXN1bHRbIDIgXSApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoIHJlc3VsdFsgMyBdIClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGxpbmVTZWNvbmRDaGFyID09PSAnbicgJiYgKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5ub3JtYWxfcGF0dGVybi5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAgICAgMSAgICAgIDIgICAgICAzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBbXCJ2biAxLjAgMi4wIDMuMFwiLCBcIjEuMFwiLCBcIjIuMFwiLCBcIjMuMFwiXVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUubm9ybWFscy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoIHJlc3VsdFsgMSBdICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdCggcmVzdWx0WyAyIF0gKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KCByZXN1bHRbIDMgXSApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBsaW5lU2Vjb25kQ2hhciA9PT0gJ3QnICYmICggcmVzdWx0ID0gdGhpcy5yZWdleHAudXZfcGF0dGVybi5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAxICAgICAgMlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW1widnQgMC4xIDAuMlwiLCBcIjAuMVwiLCBcIjAuMlwiXVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUudXZzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdCggcmVzdWx0WyAxIF0gKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KCByZXN1bHRbIDIgXSApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIlVuZXhwZWN0ZWQgdmVydGV4L25vcm1hbC91diBsaW5lOiAnXCIgKyBsaW5lICArIFwiJ1wiICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBsaW5lRmlyc3RDaGFyID09PSBcImZcIiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLmZhY2VfdmVydGV4X3V2X25vcm1hbC5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGYgdmVydGV4L3V2L25vcm1hbCB2ZXJ0ZXgvdXYvbm9ybWFsIHZlcnRleC91di9ub3JtYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAgICAgICAgICAxICAgIDIgICAgMyAgICA0ICAgIDUgICAgNiAgICA3ICAgIDggICAgOSAgIDEwICAgICAgICAgMTEgICAgICAgICAxMlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW1wiZiAxLzEvMSAyLzIvMiAzLzMvM1wiLCBcIjFcIiwgXCIxXCIsIFwiMVwiLCBcIjJcIiwgXCIyXCIsIFwiMlwiLCBcIjNcIiwgXCIzXCIsIFwiM1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWRkRmFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbIDEgXSwgcmVzdWx0WyA0IF0sIHJlc3VsdFsgNyBdLCByZXN1bHRbIDEwIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WyAyIF0sIHJlc3VsdFsgNSBdLCByZXN1bHRbIDggXSwgcmVzdWx0WyAxMSBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsgMyBdLCByZXN1bHRbIDYgXSwgcmVzdWx0WyA5IF0sIHJlc3VsdFsgMTIgXVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5mYWNlX3ZlcnRleF91di5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGYgdmVydGV4L3V2IHZlcnRleC91diB2ZXJ0ZXgvdXZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAgICAxICAgIDIgICAgMyAgICA0ICAgIDUgICAgNiAgIDcgICAgICAgICAgOFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW1wiZiAxLzEgMi8yIDMvM1wiLCBcIjFcIiwgXCIxXCIsIFwiMlwiLCBcIjJcIiwgXCIzXCIsIFwiM1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZF1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmFkZEZhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WyAxIF0sIHJlc3VsdFsgMyBdLCByZXN1bHRbIDUgXSwgcmVzdWx0WyA3IF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WyAyIF0sIHJlc3VsdFsgNCBdLCByZXN1bHRbIDYgXSwgcmVzdWx0WyA4IF1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXhfbm9ybWFsLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZiB2ZXJ0ZXgvL25vcm1hbCB2ZXJ0ZXgvL25vcm1hbCB2ZXJ0ZXgvL25vcm1hbFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMCAgICAgICAgICAgICAgICAgICAgIDEgICAgMiAgICAzICAgIDQgICAgNSAgICA2ICAgNyAgICAgICAgICA4XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBbXCJmIDEvLzEgMi8vMiAzLy8zXCIsIFwiMVwiLCBcIjFcIiwgXCIyXCIsIFwiMlwiLCBcIjNcIiwgXCIzXCIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWRkRmFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbIDEgXSwgcmVzdWx0WyAzIF0sIHJlc3VsdFsgNSBdLCByZXN1bHRbIDcgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WyAyIF0sIHJlc3VsdFsgNCBdLCByZXN1bHRbIDYgXSwgcmVzdWx0WyA4IF1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXguZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmIHZlcnRleCB2ZXJ0ZXggdmVydGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAwICAgICAgICAgICAgMSAgICAyICAgIDMgICA0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBbXCJmIDEgMiAzXCIsIFwiMVwiLCBcIjJcIiwgXCIzXCIsIHVuZGVmaW5lZF1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmFkZEZhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WyAxIF0sIHJlc3VsdFsgMiBdLCByZXN1bHRbIDMgXSwgcmVzdWx0WyA0IF1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiVW5leHBlY3RlZCBmYWNlIGxpbmU6ICdcIiArIGxpbmUgICsgXCInXCIgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGxpbmVGaXJzdENoYXIgPT09IFwibFwiICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbGluZVBhcnRzID0gbGluZS5zdWJzdHJpbmcoIDEgKS50cmltKCkuc3BsaXQoIFwiIFwiICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5lVmVydGljZXMgPSBbXSwgbGluZVVWcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGxpbmUuaW5kZXhPZiggXCIvXCIgKSA9PT0gLSAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVZlcnRpY2VzID0gbGluZVBhcnRzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGxpID0gMCwgbGxlbiA9IGxpbmVQYXJ0cy5sZW5ndGg7IGxpIDwgbGxlbjsgbGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gbGluZVBhcnRzWyBsaSBdLnNwbGl0KCBcIi9cIiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFydHNbIDAgXSAhPT0gXCJcIiApIGxpbmVWZXJ0aWNlcy5wdXNoKCBwYXJ0c1sgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJ0c1sgMSBdICE9PSBcIlwiICkgbGluZVVWcy5wdXNoKCBwYXJ0c1sgMSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWRkTGluZUdlb21ldHJ5KCBsaW5lVmVydGljZXMsIGxpbmVVVnMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLm9iamVjdF9wYXR0ZXJuLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBvIG9iamVjdF9uYW1lXG4gICAgICAgICAgICAgICAgICAgIC8vIG9yXG4gICAgICAgICAgICAgICAgICAgIC8vIGcgZ3JvdXBfbmFtZVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBXT1JLQVJPVU5EOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yODY5XG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBuYW1lID0gcmVzdWx0WyAwIF0uc3Vic3RyKCAxICkudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICggXCIgXCIgKyByZXN1bHRbIDAgXS5zdWJzdHIoIDEgKS50cmltKCkgKS5zdWJzdHIoIDEgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuc3RhcnRPYmplY3QoIG5hbWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLnJlZ2V4cC5tYXRlcmlhbF91c2VfcGF0dGVybi50ZXN0KCBsaW5lICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hdGVyaWFsXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLm9iamVjdC5zdGFydE1hdGVyaWFsKCBsaW5lLnN1YnN0cmluZyggNyApLnRyaW0oKSwgc3RhdGUubWF0ZXJpYWxMaWJyYXJpZXMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLnJlZ2V4cC5tYXRlcmlhbF9saWJyYXJ5X3BhdHRlcm4udGVzdCggbGluZSApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBtdGwgZmlsZVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5tYXRlcmlhbExpYnJhcmllcy5wdXNoKCBsaW5lLnN1YnN0cmluZyggNyApLnRyaW0oKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAuc21vb3RoaW5nX3BhdHRlcm4uZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNtb290aCBzaGFkaW5nXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0b2RvIEhhbmRsZSBmaWxlcyB0aGF0IGhhdmUgdmFyeWluZyBzbW9vdGggdmFsdWVzIGZvciBhIHNldCBvZiBmYWNlcyBpbnNpZGUgb25lIGdlb21ldHJ5LFxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgZG9lcyBub3QgZGVmaW5lIGEgdXNlbXRsIGZvciBlYWNoIGZhY2Ugc2V0LlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBkZXRlY3RlZCBhbmQgYSBkdW1teSBtYXRlcmlhbCBjcmVhdGVkIChsYXRlciBNdWx0aU1hdGVyaWFsIGFuZCBnZW9tZXRyeSBncm91cHMpLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHJlcXVpcmVzIHNvbWUgY2FyZSB0byBub3QgY3JlYXRlIGV4dHJhIG1hdGVyaWFsIG9uIGVhY2ggc21vb3RoIHZhbHVlIGZvciBcIm5vcm1hbFwiIG9iaiBmaWxlcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlcmUgZXhwbGljaXQgdXNlbXRsIGRlZmluZXMgZ2VvbWV0cnkgZ3JvdXBzLlxuICAgICAgICAgICAgICAgICAgICAvLyBFeGFtcGxlIGFzc2V0OiBleGFtcGxlcy9tb2RlbHMvb2JqL2NlcmJlcnVzL0NlcmJlcnVzLm9ialxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHRbIDEgXS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUub2JqZWN0LnNtb290aCA9ICggdmFsdWUgPT09ICcxJyB8fCB2YWx1ZSA9PT0gJ29uJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBzdGF0ZS5vYmplY3QuY3VycmVudE1hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zbW9vdGggPSBzdGF0ZS5vYmplY3Quc21vb3RoO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG51bGwgdGVybWluYXRlZCBmaWxlcyB3aXRob3V0IGV4Y2VwdGlvblxuICAgICAgICAgICAgICAgICAgICBpZiAoIGxpbmUgPT09ICdcXDAnICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggXCJVbmV4cGVjdGVkIGxpbmU6ICdcIiArIGxpbmUgICsgXCInXCIgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBzdGF0ZS5maW5hbGl6ZSgpO1xuICAgIFxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgICAgICAgICAgY29udGFpbmVyLm1hdGVyaWFsTGlicmFyaWVzID0gW10uY29uY2F0KCBzdGF0ZS5tYXRlcmlhbExpYnJhcmllcyApO1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gc3RhdGUub2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSBzdGF0ZS5vYmplY3RzWyBpIF07XG4gICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gb2JqZWN0Lmdlb21ldHJ5O1xuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbHMgPSBvYmplY3QubWF0ZXJpYWxzO1xuICAgICAgICAgICAgICAgIHZhciBpc0xpbmUgPSAoIGdlb21ldHJ5LnR5cGUgPT09ICdMaW5lJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIFNraXAgby9nIGxpbmUgZGVjbGFyYXRpb25zIHRoYXQgZGlkIG5vdCBmb2xsb3cgd2l0aCBhbnkgZmFjZXNcbiAgICAgICAgICAgICAgICBpZiAoIGdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCA9PT0gMCApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBidWZmZXJnZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuICAgIFxuICAgICAgICAgICAgICAgIGJ1ZmZlcmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggZ2VvbWV0cnkudmVydGljZXMgKSwgMyApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBnZW9tZXRyeS5ub3JtYWxzLmxlbmd0aCA+IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ25vcm1hbCcsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIGdlb21ldHJ5Lm5vcm1hbHMgKSwgMyApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyZ2VvbWV0cnkuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBnZW9tZXRyeS51dnMubGVuZ3RoID4gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAndXYnLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCBnZW9tZXRyeS51dnMgKSwgMiApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBtYXRlcmlhbHNcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY3JlYXRlZE1hdGVyaWFscyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBtaSA9IDAsIG1pTGVuID0gbWF0ZXJpYWxzLmxlbmd0aDsgbWkgPCBtaUxlbiA7IG1pKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VNYXRlcmlhbCA9IG1hdGVyaWFsc1ttaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHVuZGVmaW5lZDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLm1hdGVyaWFscyAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHMuY3JlYXRlKCBzb3VyY2VNYXRlcmlhbC5uYW1lICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtdGwgZXRjLiBsb2FkZXJzIHByb2JhYmx5IGNhbid0IGNyZWF0ZSBsaW5lIG1hdGVyaWFscyBjb3JyZWN0bHksIGNvcHkgcHJvcGVydGllcyB0byBhIGxpbmUgbWF0ZXJpYWwuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGlzTGluZSAmJiBtYXRlcmlhbCAmJiAhICggbWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbExpbmUgPSBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbExpbmUuY29weSggbWF0ZXJpYWwgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG1hdGVyaWFsTGluZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoICEgbWF0ZXJpYWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9ICggISBpc0xpbmUgPyBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoKSA6IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCgpICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5uYW1lID0gc291cmNlTWF0ZXJpYWwubmFtZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zaGFkaW5nID0gc291cmNlTWF0ZXJpYWwuc21vb3RoID8gVEhSRUUuU21vb3RoU2hhZGluZyA6IFRIUkVFLkZsYXRTaGFkaW5nO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkTWF0ZXJpYWxzLnB1c2gobWF0ZXJpYWwpO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbWVzaFxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBtZXNoO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggY3JlYXRlZE1hdGVyaWFscy5sZW5ndGggPiAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbWkgPSAwLCBtaUxlbiA9IG1hdGVyaWFscy5sZW5ndGg7IG1pIDwgbWlMZW4gOyBtaSsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZU1hdGVyaWFsID0gbWF0ZXJpYWxzW21pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcmdlb21ldHJ5LmFkZEdyb3VwKCBzb3VyY2VNYXRlcmlhbC5ncm91cFN0YXJ0LCBzb3VyY2VNYXRlcmlhbC5ncm91cENvdW50LCBtaSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1lc2ggPSAoICEgaXNMaW5lID8gbmV3IFRIUkVFLk1lc2goIGJ1ZmZlcmdlb21ldHJ5LCBjcmVhdGVkTWF0ZXJpYWxzICkgOiBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFscyApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWVzaCA9ICggISBpc0xpbmUgPyBuZXcgVEhSRUUuTWVzaCggYnVmZmVyZ2VvbWV0cnksIGNyZWF0ZWRNYXRlcmlhbHNbIDAgXSApIDogbmV3IFRIUkVFLkxpbmVTZWdtZW50cyggYnVmZmVyZ2VvbWV0cnksIGNyZWF0ZWRNYXRlcmlhbHNbIDAgXSApICk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIG1lc2gubmFtZSA9IG9iamVjdC5uYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGQoIG1lc2ggKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGNvbnNvbGUudGltZUVuZCggJ09CSkxvYWRlcicgKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICB9OyAgICAiLCIvKipcbiAqIEBhdXRob3IgcWlhbyAvIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XG4gKiBAYXV0aG9yIGVyaWNoNjY2IC8gaHR0cDovL2VyaWNoYWluZXMuY29tXG4gKi9cblxuLy8gVGhpcyBzZXQgb2YgY29udHJvbHMgcGVyZm9ybXMgb3JiaXRpbmcsIGRvbGx5aW5nICh6b29taW5nKSwgYW5kIHBhbm5pbmcuXG4vLyBVbmxpa2UgVHJhY2tiYWxsQ29udHJvbHMsIGl0IG1haW50YWlucyB0aGUgXCJ1cFwiIGRpcmVjdGlvbiBvYmplY3QudXAgKCtZIGJ5IGRlZmF1bHQpLlxuLy9cbi8vICAgIE9yYml0IC0gbGVmdCBtb3VzZSAvIHRvdWNoOiBvbmUgZmluZ2VyIG1vdmVcbi8vICAgIFpvb20gLSBtaWRkbGUgbW91c2UsIG9yIG1vdXNld2hlZWwgLyB0b3VjaDogdHdvIGZpbmdlciBzcHJlYWQgb3Igc3F1aXNoXG4vLyAgICBQYW4gLSByaWdodCBtb3VzZSwgb3IgYXJyb3cga2V5cyAvIHRvdWNoOiB0aHJlZSBmaW5nZXIgc3dpcGVcblxuVEhSRUUuT3JiaXRDb250cm9scyA9IGZ1bmN0aW9uICggb2JqZWN0LCBkb21FbGVtZW50ICkge1xuXG5cdHRoaXMub2JqZWN0ID0gb2JqZWN0O1xuXG5cdHRoaXMuZG9tRWxlbWVudCA9ICggZG9tRWxlbWVudCAhPT0gdW5kZWZpbmVkICkgPyBkb21FbGVtZW50IDogZG9jdW1lbnQ7XG5cblx0Ly8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdGhpcyBjb250cm9sXG5cdHRoaXMuZW5hYmxlZCA9IHRydWU7XG5cblx0Ly8gXCJ0YXJnZXRcIiBzZXRzIHRoZSBsb2NhdGlvbiBvZiBmb2N1cywgd2hlcmUgdGhlIG9iamVjdCBvcmJpdHMgYXJvdW5kXG5cdHRoaXMudGFyZ2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuXHQvLyBIb3cgZmFyIHlvdSBjYW4gZG9sbHkgaW4gYW5kIG91dCAoIFBlcnNwZWN0aXZlQ2FtZXJhIG9ubHkgKVxuXHR0aGlzLm1pbkRpc3RhbmNlID0gMDtcblx0dGhpcy5tYXhEaXN0YW5jZSA9IEluZmluaXR5O1xuXG5cdC8vIEhvdyBmYXIgeW91IGNhbiB6b29tIGluIGFuZCBvdXQgKCBPcnRob2dyYXBoaWNDYW1lcmEgb25seSApXG5cdHRoaXMubWluWm9vbSA9IDA7XG5cdHRoaXMubWF4Wm9vbSA9IEluZmluaXR5O1xuXG5cdC8vIEhvdyBmYXIgeW91IGNhbiBvcmJpdCB2ZXJ0aWNhbGx5LCB1cHBlciBhbmQgbG93ZXIgbGltaXRzLlxuXHQvLyBSYW5nZSBpcyAwIHRvIE1hdGguUEkgcmFkaWFucy5cblx0dGhpcy5taW5Qb2xhckFuZ2xlID0gMDsgLy8gcmFkaWFuc1xuXHR0aGlzLm1heFBvbGFyQW5nbGUgPSBNYXRoLlBJOyAvLyByYWRpYW5zXG5cblx0Ly8gSG93IGZhciB5b3UgY2FuIG9yYml0IGhvcml6b250YWxseSwgdXBwZXIgYW5kIGxvd2VyIGxpbWl0cy5cblx0Ly8gSWYgc2V0LCBtdXN0IGJlIGEgc3ViLWludGVydmFsIG9mIHRoZSBpbnRlcnZhbCBbIC0gTWF0aC5QSSwgTWF0aC5QSSBdLlxuXHR0aGlzLm1pbkF6aW11dGhBbmdsZSA9IC0gSW5maW5pdHk7IC8vIHJhZGlhbnNcblx0dGhpcy5tYXhBemltdXRoQW5nbGUgPSBJbmZpbml0eTsgLy8gcmFkaWFuc1xuXG5cdC8vIFNldCB0byB0cnVlIHRvIGVuYWJsZSBkYW1waW5nIChpbmVydGlhKVxuXHQvLyBJZiBkYW1waW5nIGlzIGVuYWJsZWQsIHlvdSBtdXN0IGNhbGwgY29udHJvbHMudXBkYXRlKCkgaW4geW91ciBhbmltYXRpb24gbG9vcFxuXHR0aGlzLmVuYWJsZURhbXBpbmcgPSBmYWxzZTtcblx0dGhpcy5kYW1waW5nRmFjdG9yID0gMC4yNTtcblxuXHQvLyBUaGlzIG9wdGlvbiBhY3R1YWxseSBlbmFibGVzIGRvbGx5aW5nIGluIGFuZCBvdXQ7IGxlZnQgYXMgXCJ6b29tXCIgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuXHQvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB6b29taW5nXG5cdHRoaXMuZW5hYmxlWm9vbSA9IHRydWU7XG5cdHRoaXMuem9vbVNwZWVkID0gMS4wO1xuXG5cdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHJvdGF0aW5nXG5cdHRoaXMuZW5hYmxlUm90YXRlID0gdHJ1ZTtcblx0dGhpcy5yb3RhdGVTcGVlZCA9IDEuMDtcblxuXHQvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSBwYW5uaW5nXG5cdHRoaXMuZW5hYmxlUGFuID0gdHJ1ZTtcblx0dGhpcy5rZXlQYW5TcGVlZCA9IDcuMDtcdC8vIHBpeGVscyBtb3ZlZCBwZXIgYXJyb3cga2V5IHB1c2hcblxuXHQvLyBTZXQgdG8gdHJ1ZSB0byBhdXRvbWF0aWNhbGx5IHJvdGF0ZSBhcm91bmQgdGhlIHRhcmdldFxuXHQvLyBJZiBhdXRvLXJvdGF0ZSBpcyBlbmFibGVkLCB5b3UgbXVzdCBjYWxsIGNvbnRyb2xzLnVwZGF0ZSgpIGluIHlvdXIgYW5pbWF0aW9uIGxvb3Bcblx0dGhpcy5hdXRvUm90YXRlID0gZmFsc2U7XG5cdHRoaXMuYXV0b1JvdGF0ZVNwZWVkID0gMi4wOyAvLyAzMCBzZWNvbmRzIHBlciByb3VuZCB3aGVuIGZwcyBpcyA2MFxuXG5cdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHVzZSBvZiB0aGUga2V5c1xuXHR0aGlzLmVuYWJsZUtleXMgPSB0cnVlO1xuXG5cdC8vIFRoZSBmb3VyIGFycm93IGtleXNcblx0dGhpcy5rZXlzID0geyBMRUZUOiAzNywgVVA6IDM4LCBSSUdIVDogMzksIEJPVFRPTTogNDAgfTtcblxuXHQvLyBNb3VzZSBidXR0b25zXG5cdHRoaXMubW91c2VCdXR0b25zID0geyBPUkJJVDogVEhSRUUuTU9VU0UuTEVGVCwgWk9PTTogVEhSRUUuTU9VU0UuTUlERExFLCBQQU46IFRIUkVFLk1PVVNFLlJJR0hUIH07XG5cblx0Ly8gZm9yIHJlc2V0XG5cdHRoaXMudGFyZ2V0MCA9IHRoaXMudGFyZ2V0LmNsb25lKCk7XG5cdHRoaXMucG9zaXRpb24wID0gdGhpcy5vYmplY3QucG9zaXRpb24uY2xvbmUoKTtcblx0dGhpcy56b29tMCA9IHRoaXMub2JqZWN0Lnpvb207XG5cblx0Ly9cblx0Ly8gcHVibGljIG1ldGhvZHNcblx0Ly9cblxuXHR0aGlzLmdldFBvbGFyQW5nbGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRyZXR1cm4gc3BoZXJpY2FsLnBoaTtcblxuXHR9O1xuXG5cdHRoaXMuZ2V0QXppbXV0aGFsQW5nbGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRyZXR1cm4gc3BoZXJpY2FsLnRoZXRhO1xuXG5cdH07XG5cblx0dGhpcy5zYXZlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRzY29wZS50YXJnZXQwLmNvcHkoIHNjb3BlLnRhcmdldCApO1xuXHRcdHNjb3BlLnBvc2l0aW9uMC5jb3B5KCBzY29wZS5vYmplY3QucG9zaXRpb24gKTtcblx0XHRzY29wZS56b29tMCA9IHNjb3BlLm9iamVjdC56b29tO1xuXG5cdH07XG5cblx0dGhpcy5yZXNldCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHNjb3BlLnRhcmdldC5jb3B5KCBzY29wZS50YXJnZXQwICk7XG5cdFx0c2NvcGUub2JqZWN0LnBvc2l0aW9uLmNvcHkoIHNjb3BlLnBvc2l0aW9uMCApO1xuXHRcdHNjb3BlLm9iamVjdC56b29tID0gc2NvcGUuem9vbTA7XG5cblx0XHRzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuXHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIGNoYW5nZUV2ZW50ICk7XG5cblx0XHRzY29wZS51cGRhdGUoKTtcblxuXHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcblxuXHR9O1xuXG5cdC8vIHRoaXMgbWV0aG9kIGlzIGV4cG9zZWQsIGJ1dCBwZXJoYXBzIGl0IHdvdWxkIGJlIGJldHRlciBpZiB3ZSBjYW4gbWFrZSBpdCBwcml2YXRlLi4uXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cblx0XHQvLyBzbyBjYW1lcmEudXAgaXMgdGhlIG9yYml0IGF4aXNcblx0XHR2YXIgcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbVVuaXRWZWN0b3JzKCBvYmplY3QudXAsIG5ldyBUSFJFRS5WZWN0b3IzKCAwLCAxLCAwICkgKTtcblx0XHR2YXIgcXVhdEludmVyc2UgPSBxdWF0LmNsb25lKCkuaW52ZXJzZSgpO1xuXG5cdFx0dmFyIGxhc3RQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cdFx0dmFyIGxhc3RRdWF0ZXJuaW9uID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcblxuXHRcdHJldHVybiBmdW5jdGlvbiB1cGRhdGUoKSB7XG5cblx0XHRcdHZhciBwb3NpdGlvbiA9IHNjb3BlLm9iamVjdC5wb3NpdGlvbjtcblxuXHRcdFx0b2Zmc2V0LmNvcHkoIHBvc2l0aW9uICkuc3ViKCBzY29wZS50YXJnZXQgKTtcblxuXHRcdFx0Ly8gcm90YXRlIG9mZnNldCB0byBcInktYXhpcy1pcy11cFwiIHNwYWNlXG5cdFx0XHRvZmZzZXQuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0ICk7XG5cblx0XHRcdC8vIGFuZ2xlIGZyb20gei1heGlzIGFyb3VuZCB5LWF4aXNcblx0XHRcdHNwaGVyaWNhbC5zZXRGcm9tVmVjdG9yMyggb2Zmc2V0ICk7XG5cblx0XHRcdGlmICggc2NvcGUuYXV0b1JvdGF0ZSAmJiBzdGF0ZSA9PT0gU1RBVEUuTk9ORSApIHtcblxuXHRcdFx0XHRyb3RhdGVMZWZ0KCBnZXRBdXRvUm90YXRpb25BbmdsZSgpICk7XG5cblx0XHRcdH1cblxuXHRcdFx0c3BoZXJpY2FsLnRoZXRhICs9IHNwaGVyaWNhbERlbHRhLnRoZXRhO1xuXHRcdFx0c3BoZXJpY2FsLnBoaSArPSBzcGhlcmljYWxEZWx0YS5waGk7XG5cblx0XHRcdC8vIHJlc3RyaWN0IHRoZXRhIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHNcblx0XHRcdHNwaGVyaWNhbC50aGV0YSA9IE1hdGgubWF4KCBzY29wZS5taW5BemltdXRoQW5nbGUsIE1hdGgubWluKCBzY29wZS5tYXhBemltdXRoQW5nbGUsIHNwaGVyaWNhbC50aGV0YSApICk7XG5cblx0XHRcdC8vIHJlc3RyaWN0IHBoaSB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzXG5cdFx0XHRzcGhlcmljYWwucGhpID0gTWF0aC5tYXgoIHNjb3BlLm1pblBvbGFyQW5nbGUsIE1hdGgubWluKCBzY29wZS5tYXhQb2xhckFuZ2xlLCBzcGhlcmljYWwucGhpICkgKTtcblxuXHRcdFx0c3BoZXJpY2FsLm1ha2VTYWZlKCk7XG5cblxuXHRcdFx0c3BoZXJpY2FsLnJhZGl1cyAqPSBzY2FsZTtcblxuXHRcdFx0Ly8gcmVzdHJpY3QgcmFkaXVzIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHNcblx0XHRcdHNwaGVyaWNhbC5yYWRpdXMgPSBNYXRoLm1heCggc2NvcGUubWluRGlzdGFuY2UsIE1hdGgubWluKCBzY29wZS5tYXhEaXN0YW5jZSwgc3BoZXJpY2FsLnJhZGl1cyApICk7XG5cblx0XHRcdC8vIG1vdmUgdGFyZ2V0IHRvIHBhbm5lZCBsb2NhdGlvblxuXHRcdFx0c2NvcGUudGFyZ2V0LmFkZCggcGFuT2Zmc2V0ICk7XG5cblx0XHRcdG9mZnNldC5zZXRGcm9tU3BoZXJpY2FsKCBzcGhlcmljYWwgKTtcblxuXHRcdFx0Ly8gcm90YXRlIG9mZnNldCBiYWNrIHRvIFwiY2FtZXJhLXVwLXZlY3Rvci1pcy11cFwiIHNwYWNlXG5cdFx0XHRvZmZzZXQuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0SW52ZXJzZSApO1xuXG5cdFx0XHRwb3NpdGlvbi5jb3B5KCBzY29wZS50YXJnZXQgKS5hZGQoIG9mZnNldCApO1xuXG5cdFx0XHRzY29wZS5vYmplY3QubG9va0F0KCBzY29wZS50YXJnZXQgKTtcblxuXHRcdFx0aWYgKCBzY29wZS5lbmFibGVEYW1waW5nID09PSB0cnVlICkge1xuXG5cdFx0XHRcdHNwaGVyaWNhbERlbHRhLnRoZXRhICo9ICggMSAtIHNjb3BlLmRhbXBpbmdGYWN0b3IgKTtcblx0XHRcdFx0c3BoZXJpY2FsRGVsdGEucGhpICo9ICggMSAtIHNjb3BlLmRhbXBpbmdGYWN0b3IgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRzcGhlcmljYWxEZWx0YS5zZXQoIDAsIDAsIDAgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRzY2FsZSA9IDE7XG5cdFx0XHRwYW5PZmZzZXQuc2V0KCAwLCAwLCAwICk7XG5cblx0XHRcdC8vIHVwZGF0ZSBjb25kaXRpb24gaXM6XG5cdFx0XHQvLyBtaW4oY2FtZXJhIGRpc3BsYWNlbWVudCwgY2FtZXJhIHJvdGF0aW9uIGluIHJhZGlhbnMpXjIgPiBFUFNcblx0XHRcdC8vIHVzaW5nIHNtYWxsLWFuZ2xlIGFwcHJveGltYXRpb24gY29zKHgvMikgPSAxIC0geF4yIC8gOFxuXG5cdFx0XHRpZiAoIHpvb21DaGFuZ2VkIHx8XG5cdFx0XHRcdGxhc3RQb3NpdGlvbi5kaXN0YW5jZVRvU3F1YXJlZCggc2NvcGUub2JqZWN0LnBvc2l0aW9uICkgPiBFUFMgfHxcblx0XHRcdFx0OCAqICggMSAtIGxhc3RRdWF0ZXJuaW9uLmRvdCggc2NvcGUub2JqZWN0LnF1YXRlcm5pb24gKSApID4gRVBTICkge1xuXG5cdFx0XHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIGNoYW5nZUV2ZW50ICk7XG5cblx0XHRcdFx0bGFzdFBvc2l0aW9uLmNvcHkoIHNjb3BlLm9iamVjdC5wb3NpdGlvbiApO1xuXHRcdFx0XHRsYXN0UXVhdGVybmlvbi5jb3B5KCBzY29wZS5vYmplY3QucXVhdGVybmlvbiApO1xuXHRcdFx0XHR6b29tQ2hhbmdlZCA9IGZhbHNlO1xuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdH07XG5cblx0fSgpO1xuXG5cdHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2NvbnRleHRtZW51Jywgb25Db250ZXh0TWVudSwgZmFsc2UgKTtcblx0XHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZWRvd24nLCBvbk1vdXNlRG93biwgZmFsc2UgKTtcblx0XHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICd3aGVlbCcsIG9uTW91c2VXaGVlbCwgZmFsc2UgKTtcblxuXHRcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQsIGZhbHNlICk7XG5cdFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAndG91Y2hlbmQnLCBvblRvdWNoRW5kLCBmYWxzZSApO1xuXHRcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSApO1xuXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlLCBmYWxzZSApO1xuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSApO1xuXG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSApO1xuXG5cdFx0Ly9zY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICdkaXNwb3NlJyB9ICk7IC8vIHNob3VsZCB0aGlzIGJlIGFkZGVkIGhlcmU/XG5cblx0fTtcblxuXHQvL1xuXHQvLyBpbnRlcm5hbHNcblx0Ly9cblxuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdHZhciBjaGFuZ2VFdmVudCA9IHsgdHlwZTogJ2NoYW5nZScgfTtcblx0dmFyIHN0YXJ0RXZlbnQgPSB7IHR5cGU6ICdzdGFydCcgfTtcblx0dmFyIGVuZEV2ZW50ID0geyB0eXBlOiAnZW5kJyB9O1xuXG5cdHZhciBTVEFURSA9IHsgTk9ORTogLSAxLCBST1RBVEU6IDAsIERPTExZOiAxLCBQQU46IDIsIFRPVUNIX1JPVEFURTogMywgVE9VQ0hfRE9MTFk6IDQsIFRPVUNIX1BBTjogNSB9O1xuXG5cdHZhciBzdGF0ZSA9IFNUQVRFLk5PTkU7XG5cblx0dmFyIEVQUyA9IDAuMDAwMDAxO1xuXG5cdC8vIGN1cnJlbnQgcG9zaXRpb24gaW4gc3BoZXJpY2FsIGNvb3JkaW5hdGVzXG5cdHZhciBzcGhlcmljYWwgPSBuZXcgVEhSRUUuU3BoZXJpY2FsKCk7XG5cdHZhciBzcGhlcmljYWxEZWx0YSA9IG5ldyBUSFJFRS5TcGhlcmljYWwoKTtcblxuXHR2YXIgc2NhbGUgPSAxO1xuXHR2YXIgcGFuT2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0dmFyIHpvb21DaGFuZ2VkID0gZmFsc2U7XG5cblx0dmFyIHJvdGF0ZVN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblx0dmFyIHJvdGF0ZUVuZCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cdHZhciByb3RhdGVEZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cblx0dmFyIHBhblN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblx0dmFyIHBhbkVuZCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cdHZhciBwYW5EZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cblx0dmFyIGRvbGx5U3RhcnQgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuXHR2YXIgZG9sbHlFbmQgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuXHR2YXIgZG9sbHlEZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cblx0ZnVuY3Rpb24gZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKSB7XG5cblx0XHRyZXR1cm4gMiAqIE1hdGguUEkgLyA2MCAvIDYwICogc2NvcGUuYXV0b1JvdGF0ZVNwZWVkO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRab29tU2NhbGUoKSB7XG5cblx0XHRyZXR1cm4gTWF0aC5wb3coIDAuOTUsIHNjb3BlLnpvb21TcGVlZCApO1xuXG5cdH1cblxuXHRmdW5jdGlvbiByb3RhdGVMZWZ0KCBhbmdsZSApIHtcblxuXHRcdHNwaGVyaWNhbERlbHRhLnRoZXRhIC09IGFuZ2xlO1xuXG5cdH1cblxuXHRmdW5jdGlvbiByb3RhdGVVcCggYW5nbGUgKSB7XG5cblx0XHRzcGhlcmljYWxEZWx0YS5waGkgLT0gYW5nbGU7XG5cblx0fVxuXG5cdHZhciBwYW5MZWZ0ID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIHYgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHBhbkxlZnQoIGRpc3RhbmNlLCBvYmplY3RNYXRyaXggKSB7XG5cblx0XHRcdHYuc2V0RnJvbU1hdHJpeENvbHVtbiggb2JqZWN0TWF0cml4LCAwICk7IC8vIGdldCBYIGNvbHVtbiBvZiBvYmplY3RNYXRyaXhcblx0XHRcdHYubXVsdGlwbHlTY2FsYXIoIC0gZGlzdGFuY2UgKTtcblxuXHRcdFx0cGFuT2Zmc2V0LmFkZCggdiApO1xuXG5cdFx0fTtcblxuXHR9KCk7XG5cblx0dmFyIHBhblVwID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIHYgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHBhblVwKCBkaXN0YW5jZSwgb2JqZWN0TWF0cml4ICkge1xuXG5cdFx0XHR2LnNldEZyb21NYXRyaXhDb2x1bW4oIG9iamVjdE1hdHJpeCwgMSApOyAvLyBnZXQgWSBjb2x1bW4gb2Ygb2JqZWN0TWF0cml4XG5cdFx0XHR2Lm11bHRpcGx5U2NhbGFyKCBkaXN0YW5jZSApO1xuXG5cdFx0XHRwYW5PZmZzZXQuYWRkKCB2ICk7XG5cblx0XHR9O1xuXG5cdH0oKTtcblxuXHQvLyBkZWx0YVggYW5kIGRlbHRhWSBhcmUgaW4gcGl4ZWxzOyByaWdodCBhbmQgZG93biBhcmUgcG9zaXRpdmVcblx0dmFyIHBhbiA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciBvZmZzZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHBhbiggZGVsdGFYLCBkZWx0YVkgKSB7XG5cblx0XHRcdHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudCA9PT0gZG9jdW1lbnQgPyBzY29wZS5kb21FbGVtZW50LmJvZHkgOiBzY29wZS5kb21FbGVtZW50O1xuXG5cdFx0XHRpZiAoIHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhICkge1xuXG5cdFx0XHRcdC8vIHBlcnNwZWN0aXZlXG5cdFx0XHRcdHZhciBwb3NpdGlvbiA9IHNjb3BlLm9iamVjdC5wb3NpdGlvbjtcblx0XHRcdFx0b2Zmc2V0LmNvcHkoIHBvc2l0aW9uICkuc3ViKCBzY29wZS50YXJnZXQgKTtcblx0XHRcdFx0dmFyIHRhcmdldERpc3RhbmNlID0gb2Zmc2V0Lmxlbmd0aCgpO1xuXG5cdFx0XHRcdC8vIGhhbGYgb2YgdGhlIGZvdiBpcyBjZW50ZXIgdG8gdG9wIG9mIHNjcmVlblxuXHRcdFx0XHR0YXJnZXREaXN0YW5jZSAqPSBNYXRoLnRhbiggKCBzY29wZS5vYmplY3QuZm92IC8gMiApICogTWF0aC5QSSAvIDE4MC4wICk7XG5cblx0XHRcdFx0Ly8gd2UgYWN0dWFsbHkgZG9uJ3QgdXNlIHNjcmVlbldpZHRoLCBzaW5jZSBwZXJzcGVjdGl2ZSBjYW1lcmEgaXMgZml4ZWQgdG8gc2NyZWVuIGhlaWdodFxuXHRcdFx0XHRwYW5MZWZ0KCAyICogZGVsdGFYICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCApO1xuXHRcdFx0XHRwYW5VcCggMiAqIGRlbHRhWSAqIHRhcmdldERpc3RhbmNlIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXggKTtcblxuXHRcdFx0fSBlbHNlIGlmICggc2NvcGUub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhICkge1xuXG5cdFx0XHRcdC8vIG9ydGhvZ3JhcGhpY1xuXHRcdFx0XHRwYW5MZWZ0KCBkZWx0YVggKiAoIHNjb3BlLm9iamVjdC5yaWdodCAtIHNjb3BlLm9iamVjdC5sZWZ0ICkgLyBzY29wZS5vYmplY3Quem9vbSAvIGVsZW1lbnQuY2xpZW50V2lkdGgsIHNjb3BlLm9iamVjdC5tYXRyaXggKTtcblx0XHRcdFx0cGFuVXAoIGRlbHRhWSAqICggc2NvcGUub2JqZWN0LnRvcCAtIHNjb3BlLm9iamVjdC5ib3R0b20gKSAvIHNjb3BlLm9iamVjdC56b29tIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXggKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBjYW1lcmEgbmVpdGhlciBvcnRob2dyYXBoaWMgbm9yIHBlcnNwZWN0aXZlXG5cdFx0XHRcdGNvbnNvbGUud2FybiggJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIHBhbiBkaXNhYmxlZC4nICk7XG5cdFx0XHRcdHNjb3BlLmVuYWJsZVBhbiA9IGZhbHNlO1xuXG5cdFx0XHR9XG5cblx0XHR9O1xuXG5cdH0oKTtcblxuXHRmdW5jdGlvbiBkb2xseUluKCBkb2xseVNjYWxlICkge1xuXG5cdFx0aWYgKCBzY29wZS5vYmplY3QuaXNQZXJzcGVjdGl2ZUNhbWVyYSApIHtcblxuXHRcdFx0c2NhbGUgLz0gZG9sbHlTY2FsZTtcblxuXHRcdH0gZWxzZSBpZiAoIHNjb3BlLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYSApIHtcblxuXHRcdFx0c2NvcGUub2JqZWN0Lnpvb20gPSBNYXRoLm1heCggc2NvcGUubWluWm9vbSwgTWF0aC5taW4oIHNjb3BlLm1heFpvb20sIHNjb3BlLm9iamVjdC56b29tICogZG9sbHlTY2FsZSApICk7XG5cdFx0XHRzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuXHRcdFx0em9vbUNoYW5nZWQgPSB0cnVlO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gZG9sbHkvem9vbSBkaXNhYmxlZC4nICk7XG5cdFx0XHRzY29wZS5lbmFibGVab29tID0gZmFsc2U7XG5cblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGRvbGx5T3V0KCBkb2xseVNjYWxlICkge1xuXG5cdFx0aWYgKCBzY29wZS5vYmplY3QuaXNQZXJzcGVjdGl2ZUNhbWVyYSApIHtcblxuXHRcdFx0c2NhbGUgKj0gZG9sbHlTY2FsZTtcblxuXHRcdH0gZWxzZSBpZiAoIHNjb3BlLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYSApIHtcblxuXHRcdFx0c2NvcGUub2JqZWN0Lnpvb20gPSBNYXRoLm1heCggc2NvcGUubWluWm9vbSwgTWF0aC5taW4oIHNjb3BlLm1heFpvb20sIHNjb3BlLm9iamVjdC56b29tIC8gZG9sbHlTY2FsZSApICk7XG5cdFx0XHRzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuXHRcdFx0em9vbUNoYW5nZWQgPSB0cnVlO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gZG9sbHkvem9vbSBkaXNhYmxlZC4nICk7XG5cdFx0XHRzY29wZS5lbmFibGVab29tID0gZmFsc2U7XG5cblx0XHR9XG5cblx0fVxuXG5cdC8vXG5cdC8vIGV2ZW50IGNhbGxiYWNrcyAtIHVwZGF0ZSB0aGUgb2JqZWN0IHN0YXRlXG5cdC8vXG5cblx0ZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duUm90YXRlKCBldmVudCApIHtcblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVNb3VzZURvd25Sb3RhdGUnICk7XG5cblx0XHRyb3RhdGVTdGFydC5zZXQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkgKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duRG9sbHkoIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlRG93bkRvbGx5JyApO1xuXG5cdFx0ZG9sbHlTdGFydC5zZXQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkgKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duUGFuKCBldmVudCApIHtcblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVNb3VzZURvd25QYW4nICk7XG5cblx0XHRwYW5TdGFydC5zZXQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkgKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlUm90YXRlKCBldmVudCApIHtcblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVNb3VzZU1vdmVSb3RhdGUnICk7XG5cblx0XHRyb3RhdGVFbmQuc2V0KCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZICk7XG5cdFx0cm90YXRlRGVsdGEuc3ViVmVjdG9ycyggcm90YXRlRW5kLCByb3RhdGVTdGFydCApO1xuXG5cdFx0dmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50ID09PSBkb2N1bWVudCA/IHNjb3BlLmRvbUVsZW1lbnQuYm9keSA6IHNjb3BlLmRvbUVsZW1lbnQ7XG5cblx0XHQvLyByb3RhdGluZyBhY3Jvc3Mgd2hvbGUgc2NyZWVuIGdvZXMgMzYwIGRlZ3JlZXMgYXJvdW5kXG5cdFx0cm90YXRlTGVmdCggMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS54IC8gZWxlbWVudC5jbGllbnRXaWR0aCAqIHNjb3BlLnJvdGF0ZVNwZWVkICk7XG5cblx0XHQvLyByb3RhdGluZyB1cCBhbmQgZG93biBhbG9uZyB3aG9sZSBzY3JlZW4gYXR0ZW1wdHMgdG8gZ28gMzYwLCBidXQgbGltaXRlZCB0byAxODBcblx0XHRyb3RhdGVVcCggMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQgKiBzY29wZS5yb3RhdGVTcGVlZCApO1xuXG5cdFx0cm90YXRlU3RhcnQuY29weSggcm90YXRlRW5kICk7XG5cblx0XHRzY29wZS51cGRhdGUoKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlRG9sbHkoIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlTW92ZURvbGx5JyApO1xuXG5cdFx0ZG9sbHlFbmQuc2V0KCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZICk7XG5cblx0XHRkb2xseURlbHRhLnN1YlZlY3RvcnMoIGRvbGx5RW5kLCBkb2xseVN0YXJ0ICk7XG5cblx0XHRpZiAoIGRvbGx5RGVsdGEueSA+IDAgKSB7XG5cblx0XHRcdGRvbGx5SW4oIGdldFpvb21TY2FsZSgpICk7XG5cblx0XHR9IGVsc2UgaWYgKCBkb2xseURlbHRhLnkgPCAwICkge1xuXG5cdFx0XHRkb2xseU91dCggZ2V0Wm9vbVNjYWxlKCkgKTtcblxuXHRcdH1cblxuXHRcdGRvbGx5U3RhcnQuY29weSggZG9sbHlFbmQgKTtcblxuXHRcdHNjb3BlLnVwZGF0ZSgpO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmVQYW4oIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlTW92ZVBhbicgKTtcblxuXHRcdHBhbkVuZC5zZXQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkgKTtcblxuXHRcdHBhbkRlbHRhLnN1YlZlY3RvcnMoIHBhbkVuZCwgcGFuU3RhcnQgKTtcblxuXHRcdHBhbiggcGFuRGVsdGEueCwgcGFuRGVsdGEueSApO1xuXG5cdFx0cGFuU3RhcnQuY29weSggcGFuRW5kICk7XG5cblx0XHRzY29wZS51cGRhdGUoKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlTW91c2VVcCggZXZlbnQgKSB7XG5cblx0XHQvLyBjb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlVXAnICk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGhhbmRsZU1vdXNlV2hlZWwoIGV2ZW50ICkge1xuXG5cdFx0Ly8gY29uc29sZS5sb2coICdoYW5kbGVNb3VzZVdoZWVsJyApO1xuXG5cdFx0aWYgKCBldmVudC5kZWx0YVkgPCAwICkge1xuXG5cdFx0XHRkb2xseU91dCggZ2V0Wm9vbVNjYWxlKCkgKTtcblxuXHRcdH0gZWxzZSBpZiAoIGV2ZW50LmRlbHRhWSA+IDAgKSB7XG5cblx0XHRcdGRvbGx5SW4oIGdldFpvb21TY2FsZSgpICk7XG5cblx0XHR9XG5cblx0XHRzY29wZS51cGRhdGUoKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlS2V5RG93biggZXZlbnQgKSB7XG5cblx0XHQvL2NvbnNvbGUubG9nKCAnaGFuZGxlS2V5RG93bicgKTtcblxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XG5cblx0XHRcdGNhc2Ugc2NvcGUua2V5cy5VUDpcblx0XHRcdFx0cGFuKCAwLCBzY29wZS5rZXlQYW5TcGVlZCApO1xuXHRcdFx0XHRzY29wZS51cGRhdGUoKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2Ugc2NvcGUua2V5cy5CT1RUT006XG5cdFx0XHRcdHBhbiggMCwgLSBzY29wZS5rZXlQYW5TcGVlZCApO1xuXHRcdFx0XHRzY29wZS51cGRhdGUoKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2Ugc2NvcGUua2V5cy5MRUZUOlxuXHRcdFx0XHRwYW4oIHNjb3BlLmtleVBhblNwZWVkLCAwICk7XG5cdFx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLlJJR0hUOlxuXHRcdFx0XHRwYW4oIC0gc2NvcGUua2V5UGFuU3BlZWQsIDAgKTtcblx0XHRcdFx0c2NvcGUudXBkYXRlKCk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKCBldmVudCApIHtcblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaFN0YXJ0Um90YXRlJyApO1xuXG5cdFx0cm90YXRlU3RhcnQuc2V0KCBldmVudC50b3VjaGVzWyAwIF0ucGFnZVgsIGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWSApO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0RG9sbHkoIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZVRvdWNoU3RhcnREb2xseScgKTtcblxuXHRcdHZhciBkeCA9IGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWCAtIGV2ZW50LnRvdWNoZXNbIDEgXS5wYWdlWDtcblx0XHR2YXIgZHkgPSBldmVudC50b3VjaGVzWyAwIF0ucGFnZVkgLSBldmVudC50b3VjaGVzWyAxIF0ucGFnZVk7XG5cblx0XHR2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoIGR4ICogZHggKyBkeSAqIGR5ICk7XG5cblx0XHRkb2xseVN0YXJ0LnNldCggMCwgZGlzdGFuY2UgKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydFBhbiggZXZlbnQgKSB7XG5cblx0XHQvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hTdGFydFBhbicgKTtcblxuXHRcdHBhblN0YXJ0LnNldCggZXZlbnQudG91Y2hlc1sgMCBdLnBhZ2VYLCBldmVudC50b3VjaGVzWyAwIF0ucGFnZVkgKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlUm90YXRlKCBldmVudCApIHtcblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaE1vdmVSb3RhdGUnICk7XG5cblx0XHRyb3RhdGVFbmQuc2V0KCBldmVudC50b3VjaGVzWyAwIF0ucGFnZVgsIGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWSApO1xuXHRcdHJvdGF0ZURlbHRhLnN1YlZlY3RvcnMoIHJvdGF0ZUVuZCwgcm90YXRlU3RhcnQgKTtcblxuXHRcdHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudCA9PT0gZG9jdW1lbnQgPyBzY29wZS5kb21FbGVtZW50LmJvZHkgOiBzY29wZS5kb21FbGVtZW50O1xuXG5cdFx0Ly8gcm90YXRpbmcgYWNyb3NzIHdob2xlIHNjcmVlbiBnb2VzIDM2MCBkZWdyZWVzIGFyb3VuZFxuXHRcdHJvdGF0ZUxlZnQoIDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueCAvIGVsZW1lbnQuY2xpZW50V2lkdGggKiBzY29wZS5yb3RhdGVTcGVlZCApO1xuXG5cdFx0Ly8gcm90YXRpbmcgdXAgYW5kIGRvd24gYWxvbmcgd2hvbGUgc2NyZWVuIGF0dGVtcHRzIHRvIGdvIDM2MCwgYnV0IGxpbWl0ZWQgdG8gMTgwXG5cdFx0cm90YXRlVXAoIDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0ICogc2NvcGUucm90YXRlU3BlZWQgKTtcblxuXHRcdHJvdGF0ZVN0YXJ0LmNvcHkoIHJvdGF0ZUVuZCApO1xuXG5cdFx0c2NvcGUudXBkYXRlKCk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZURvbGx5KCBldmVudCApIHtcblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaE1vdmVEb2xseScgKTtcblxuXHRcdHZhciBkeCA9IGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWCAtIGV2ZW50LnRvdWNoZXNbIDEgXS5wYWdlWDtcblx0XHR2YXIgZHkgPSBldmVudC50b3VjaGVzWyAwIF0ucGFnZVkgLSBldmVudC50b3VjaGVzWyAxIF0ucGFnZVk7XG5cblx0XHR2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoIGR4ICogZHggKyBkeSAqIGR5ICk7XG5cblx0XHRkb2xseUVuZC5zZXQoIDAsIGRpc3RhbmNlICk7XG5cblx0XHRkb2xseURlbHRhLnN1YlZlY3RvcnMoIGRvbGx5RW5kLCBkb2xseVN0YXJ0ICk7XG5cblx0XHRpZiAoIGRvbGx5RGVsdGEueSA+IDAgKSB7XG5cblx0XHRcdGRvbGx5T3V0KCBnZXRab29tU2NhbGUoKSApO1xuXG5cdFx0fSBlbHNlIGlmICggZG9sbHlEZWx0YS55IDwgMCApIHtcblxuXHRcdFx0ZG9sbHlJbiggZ2V0Wm9vbVNjYWxlKCkgKTtcblxuXHRcdH1cblxuXHRcdGRvbGx5U3RhcnQuY29weSggZG9sbHlFbmQgKTtcblxuXHRcdHNjb3BlLnVwZGF0ZSgpO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVQYW4oIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZVRvdWNoTW92ZVBhbicgKTtcblxuXHRcdHBhbkVuZC5zZXQoIGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWCwgZXZlbnQudG91Y2hlc1sgMCBdLnBhZ2VZICk7XG5cblx0XHRwYW5EZWx0YS5zdWJWZWN0b3JzKCBwYW5FbmQsIHBhblN0YXJ0ICk7XG5cblx0XHRwYW4oIHBhbkRlbHRhLngsIHBhbkRlbHRhLnkgKTtcblxuXHRcdHBhblN0YXJ0LmNvcHkoIHBhbkVuZCApO1xuXG5cdFx0c2NvcGUudXBkYXRlKCk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGhhbmRsZVRvdWNoRW5kKCBldmVudCApIHtcblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaEVuZCcgKTtcblxuXHR9XG5cblx0Ly9cblx0Ly8gZXZlbnQgaGFuZGxlcnMgLSBGU006IGxpc3RlbiBmb3IgZXZlbnRzIGFuZCByZXNldCBzdGF0ZVxuXHQvL1xuXG5cdGZ1bmN0aW9uIG9uTW91c2VEb3duKCBldmVudCApIHtcblxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0c3dpdGNoICggZXZlbnQuYnV0dG9uICkge1xuXG5cdFx0XHRjYXNlIHNjb3BlLm1vdXNlQnV0dG9ucy5PUkJJVDpcblxuXHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRcdFx0aGFuZGxlTW91c2VEb3duUm90YXRlKCBldmVudCApO1xuXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuUk9UQVRFO1xuXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIHNjb3BlLm1vdXNlQnV0dG9ucy5aT09NOlxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRcdFx0aGFuZGxlTW91c2VEb3duRG9sbHkoIGV2ZW50ICk7XG5cblx0XHRcdFx0c3RhdGUgPSBTVEFURS5ET0xMWTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBzY29wZS5tb3VzZUJ1dHRvbnMuUEFOOlxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVNb3VzZURvd25QYW4oIGV2ZW50ICk7XG5cblx0XHRcdFx0c3RhdGUgPSBTVEFURS5QQU47XG5cblx0XHRcdFx0YnJlYWs7XG5cblx0XHR9XG5cblx0XHRpZiAoIHN0YXRlICE9PSBTVEFURS5OT05FICkge1xuXG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUsIGZhbHNlICk7XG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2V1cCcsIG9uTW91c2VVcCwgZmFsc2UgKTtcblxuXHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggc3RhcnRFdmVudCApO1xuXG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBvbk1vdXNlTW92ZSggZXZlbnQgKSB7XG5cblx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHN3aXRjaCAoIHN0YXRlICkge1xuXG5cdFx0XHRjYXNlIFNUQVRFLlJPVEFURTpcblxuXHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRcdFx0aGFuZGxlTW91c2VNb3ZlUm90YXRlKCBldmVudCApO1xuXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIFNUQVRFLkRPTExZOlxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRcdFx0aGFuZGxlTW91c2VNb3ZlRG9sbHkoIGV2ZW50ICk7XG5cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgU1RBVEUuUEFOOlxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVNb3VzZU1vdmVQYW4oIGV2ZW50ICk7XG5cblx0XHRcdFx0YnJlYWs7XG5cblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIG9uTW91c2VVcCggZXZlbnQgKSB7XG5cblx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0aGFuZGxlTW91c2VVcCggZXZlbnQgKTtcblxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UgKTtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2V1cCcsIG9uTW91c2VVcCwgZmFsc2UgKTtcblxuXHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIGVuZEV2ZW50ICk7XG5cblx0XHRzdGF0ZSA9IFNUQVRFLk5PTkU7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIG9uTW91c2VXaGVlbCggZXZlbnQgKSB7XG5cblx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlIHx8ICggc3RhdGUgIT09IFNUQVRFLk5PTkUgJiYgc3RhdGUgIT09IFNUQVRFLlJPVEFURSApICkgcmV0dXJuO1xuXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIHN0YXJ0RXZlbnQgKTtcblxuXHRcdGhhbmRsZU1vdXNlV2hlZWwoIGV2ZW50ICk7XG5cblx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KCBlbmRFdmVudCApO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBvbktleURvd24oIGV2ZW50ICkge1xuXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSB8fCBzY29wZS5lbmFibGVLZXlzID09PSBmYWxzZSB8fCBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0aGFuZGxlS2V5RG93biggZXZlbnQgKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KCBldmVudCApIHtcblxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRzd2l0Y2ggKCBldmVudC50b3VjaGVzLmxlbmd0aCApIHtcblxuXHRcdFx0Y2FzZSAxOlx0Ly8gb25lLWZpbmdlcmVkIHRvdWNoOiByb3RhdGVcblxuXHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRcdFx0aGFuZGxlVG91Y2hTdGFydFJvdGF0ZSggZXZlbnQgKTtcblxuXHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlRPVUNIX1JPVEFURTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAyOlx0Ly8gdHdvLWZpbmdlcmVkIHRvdWNoOiBkb2xseVxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRcdFx0aGFuZGxlVG91Y2hTdGFydERvbGx5KCBldmVudCApO1xuXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuVE9VQ0hfRE9MTFk7XG5cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgMzogLy8gdGhyZWUtZmluZ2VyZWQgdG91Y2g6IHBhblxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVUb3VjaFN0YXJ0UGFuKCBldmVudCApO1xuXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuVE9VQ0hfUEFOO1xuXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcblxuXHRcdH1cblxuXHRcdGlmICggc3RhdGUgIT09IFNUQVRFLk5PTkUgKSB7XG5cblx0XHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIHN0YXJ0RXZlbnQgKTtcblxuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gb25Ub3VjaE1vdmUoIGV2ZW50ICkge1xuXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRzd2l0Y2ggKCBldmVudC50b3VjaGVzLmxlbmd0aCApIHtcblxuXHRcdFx0Y2FzZSAxOiAvLyBvbmUtZmluZ2VyZWQgdG91Y2g6IHJvdGF0ZVxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSApIHJldHVybjtcblx0XHRcdFx0aWYgKCBzdGF0ZSAhPT0gU1RBVEUuVE9VQ0hfUk9UQVRFICkgcmV0dXJuOyAvLyBpcyB0aGlzIG5lZWRlZD8uLi5cblxuXHRcdFx0XHRoYW5kbGVUb3VjaE1vdmVSb3RhdGUoIGV2ZW50ICk7XG5cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgMjogLy8gdHdvLWZpbmdlcmVkIHRvdWNoOiBkb2xseVxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgKSByZXR1cm47XG5cdFx0XHRcdGlmICggc3RhdGUgIT09IFNUQVRFLlRPVUNIX0RPTExZICkgcmV0dXJuOyAvLyBpcyB0aGlzIG5lZWRlZD8uLi5cblxuXHRcdFx0XHRoYW5kbGVUb3VjaE1vdmVEb2xseSggZXZlbnQgKTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAzOiAvLyB0aHJlZS1maW5nZXJlZCB0b3VjaDogcGFuXG5cblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlICkgcmV0dXJuO1xuXHRcdFx0XHRpZiAoIHN0YXRlICE9PSBTVEFURS5UT1VDSF9QQU4gKSByZXR1cm47IC8vIGlzIHRoaXMgbmVlZGVkPy4uLlxuXG5cdFx0XHRcdGhhbmRsZVRvdWNoTW92ZVBhbiggZXZlbnQgKTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblxuXHRcdFx0XHRzdGF0ZSA9IFNUQVRFLk5PTkU7XG5cblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIG9uVG91Y2hFbmQoIGV2ZW50ICkge1xuXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdGhhbmRsZVRvdWNoRW5kKCBldmVudCApO1xuXG5cdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggZW5kRXZlbnQgKTtcblxuXHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gb25Db250ZXh0TWVudSggZXZlbnQgKSB7XG5cblx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHR9XG5cblx0Ly9cblxuXHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdjb250ZXh0bWVudScsIG9uQ29udGV4dE1lbnUsIGZhbHNlICk7XG5cblx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2Vkb3duJywgb25Nb3VzZURvd24sIGZhbHNlICk7XG5cdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3doZWVsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSApO1xuXG5cdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQsIGZhbHNlICk7XG5cdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCwgZmFsc2UgKTtcblx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUsIGZhbHNlICk7XG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSApO1xuXG5cdC8vIGZvcmNlIGFuIHVwZGF0ZSBhdCBzdGFydFxuXG5cdHRoaXMudXBkYXRlKCk7XG5cbn07XG5cblRIUkVFLk9yYml0Q29udHJvbHMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSApO1xuVEhSRUUuT3JiaXRDb250cm9scy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUSFJFRS5PcmJpdENvbnRyb2xzO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyggVEhSRUUuT3JiaXRDb250cm9scy5wcm90b3R5cGUsIHtcblxuXHRjZW50ZXI6IHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAuY2VudGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnRhcmdldCcgKTtcblx0XHRcdHJldHVybiB0aGlzLnRhcmdldDtcblxuXHRcdH1cblxuXHR9LFxuXG5cdC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcblxuXHRub1pvb206IHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9ab29tIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlWm9vbSBpbnN0ZWFkLicgKTtcblx0XHRcdHJldHVybiAhIHRoaXMuZW5hYmxlWm9vbTtcblxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5ub1pvb20gaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVab29tIGluc3RlYWQuJyApO1xuXHRcdFx0dGhpcy5lbmFibGVab29tID0gISB2YWx1ZTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdG5vUm90YXRlOiB7XG5cblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuT3JiaXRDb250cm9sczogLm5vUm90YXRlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlUm90YXRlIGluc3RlYWQuJyApO1xuXHRcdFx0cmV0dXJuICEgdGhpcy5lbmFibGVSb3RhdGU7XG5cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9Sb3RhdGUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVSb3RhdGUgaW5zdGVhZC4nICk7XG5cdFx0XHR0aGlzLmVuYWJsZVJvdGF0ZSA9ICEgdmFsdWU7XG5cblx0XHR9XG5cblx0fSxcblxuXHRub1Bhbjoge1xuXG5cdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5ub1BhbiBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZVBhbiBpbnN0ZWFkLicgKTtcblx0XHRcdHJldHVybiAhIHRoaXMuZW5hYmxlUGFuO1xuXG5cdFx0fSxcblxuXHRcdHNldDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuT3JiaXRDb250cm9sczogLm5vUGFuIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlUGFuIGluc3RlYWQuJyApO1xuXHRcdFx0dGhpcy5lbmFibGVQYW4gPSAhIHZhbHVlO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0bm9LZXlzOiB7XG5cblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuT3JiaXRDb250cm9sczogLm5vS2V5cyBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZUtleXMgaW5zdGVhZC4nICk7XG5cdFx0XHRyZXR1cm4gISB0aGlzLmVuYWJsZUtleXM7XG5cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9LZXlzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlS2V5cyBpbnN0ZWFkLicgKTtcblx0XHRcdHRoaXMuZW5hYmxlS2V5cyA9ICEgdmFsdWU7XG5cblx0XHR9XG5cblx0fSxcblxuXHRzdGF0aWNNb3Zpbmc6IHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAuc3RhdGljTW92aW5nIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlRGFtcGluZyBpbnN0ZWFkLicgKTtcblx0XHRcdHJldHVybiAhIHRoaXMuZW5hYmxlRGFtcGluZztcblxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5zdGF0aWNNb3ZpbmcgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVEYW1waW5nIGluc3RlYWQuJyApO1xuXHRcdFx0dGhpcy5lbmFibGVEYW1waW5nID0gISB2YWx1ZTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdGR5bmFtaWNEYW1waW5nRmFjdG9yOiB7XG5cblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuT3JiaXRDb250cm9sczogLmR5bmFtaWNEYW1waW5nRmFjdG9yIGhhcyBiZWVuIHJlbmFtZWQuIFVzZSAuZGFtcGluZ0ZhY3RvciBpbnN0ZWFkLicgKTtcblx0XHRcdHJldHVybiB0aGlzLmRhbXBpbmdGYWN0b3I7XG5cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAuZHluYW1pY0RhbXBpbmdGYWN0b3IgaGFzIGJlZW4gcmVuYW1lZC4gVXNlIC5kYW1waW5nRmFjdG9yIGluc3RlYWQuJyApO1xuXHRcdFx0dGhpcy5kYW1waW5nRmFjdG9yID0gdmFsdWU7XG5cblx0XHR9XG5cblx0fVxuXG59ICk7XG4iLCIvKlxuICogQXV0b2Rlc2sgM0RTIHRocmVlZS5qcyBmaWxlIGxvYWRlciwgYmFzZWQgb24gbGliM2RzLlxuICpcbiAqIExvYWRzIGdlb21ldHJ5IHdpdGggdXYgYW5kIG1hdGVyaWFscyBiYXNpYyBwcm9wZXJ0aWVzIHdpdGggdGV4dHVyZSBzdXBwb3J0LlxuICpcbiAqIEBhdXRob3IgQHRlbnRvbmVcbiAqIEBhdXRob3IgQHRpbWtuaXBcbiAqIEBjbGFzcyBURFNMb2FkZXJcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuVEhSRUUuVERTTG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuXG5cdHRoaXMubWFuYWdlciA9ICggbWFuYWdlciAhPT0gdW5kZWZpbmVkICkgPyBtYW5hZ2VyIDogVEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO1xuXHR0aGlzLmRlYnVnID0gZmFsc2U7XG5cblx0dGhpcy5ncm91cCA9IG51bGw7XG5cdHRoaXMucG9zaXRpb24gPSAwO1xuXG5cdHRoaXMubWF0ZXJpYWxzID0gW107XG5cdHRoaXMubWVzaGVzID0gW107XG5cbn07XG5cblRIUkVFLlREU0xvYWRlci5wcm90b3R5cGUgPSB7XG5cblx0Y29uc3RydWN0b3I6IFRIUkVFLlREU0xvYWRlcixcblxuXHQvKipcblx0ICogTG9hZCAzZHMgZmlsZSBmcm9tIHVybC5cblx0ICpcblx0ICogQG1ldGhvZCBsb2FkXG5cdCAqIEBwYXJhbSB7W3R5cGVdfSB1cmwgVVJMIGZvciB0aGUgZmlsZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb25Mb2FkIG9uTG9hZCBjYWxsYmFjaywgcmVjZWl2ZXMgZ3JvdXAgT2JqZWN0M0QgYXMgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9uUHJvZ3Jlc3Mgb25Qcm9ncmVzcyBjYWxsYmFjay5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBvbkVycm9yIGNhbGxiYWNrLlxuXHQgKi9cblx0bG9hZDogZnVuY3Rpb24gKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcblxuXHRcdHZhciBzY29wZSA9IHRoaXM7XG5cblx0XHR2YXIgcGF0aCA9IHRoaXMucGF0aCAhPT0gdW5kZWZpbmVkID8gdGhpcy5wYXRoIDogVEhSRUUuTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UoIHVybCApO1xuXG5cdFx0dmFyIGxvYWRlciA9IG5ldyBUSFJFRS5GaWxlTG9hZGVyKCB0aGlzLm1hbmFnZXIgKTtcblxuXHRcdGxvYWRlci5zZXRSZXNwb25zZVR5cGUoICdhcnJheWJ1ZmZlcicgKTtcblxuXHRcdGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggZGF0YSApIHtcblxuXHRcdFx0b25Mb2FkKCBzY29wZS5wYXJzZSggZGF0YSwgcGF0aCApICk7XG5cblx0XHR9LCBvblByb2dyZXNzLCBvbkVycm9yICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogUGFyc2UgYXJyYXlidWZmZXIgZGF0YSBhbmQgbG9hZCAzZHMgZmlsZS5cblx0ICpcblx0ICogQG1ldGhvZCBwYXJzZVxuXHQgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhcnJheWJ1ZmZlciBBcnJheWJ1ZmZlciBkYXRhIHRvIGJlIGxvYWRlZC5cblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGggUGF0aCBmb3IgZXh0ZXJuYWwgcmVzb3VyY2VzLlxuXHQgKiBAcmV0dXJuIHtPYmplY3QzRH0gR3JvdXAgbG9hZGVkIGZyb20gM2RzIGZpbGUuXG5cdCAqL1xuXHRwYXJzZTogZnVuY3Rpb24gKCBhcnJheWJ1ZmZlciwgcGF0aCApIHtcblxuXHRcdHRoaXMuZ3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcblx0XHR0aGlzLnBvc2l0aW9uID0gMDtcblx0XHR0aGlzLm1hdGVyaWFscyA9IFtdO1xuXHRcdHRoaXMubWVzaGVzID0gW107XG5cblx0XHR0aGlzLnJlYWRGaWxlKCBhcnJheWJ1ZmZlciwgcGF0aCApO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgdGhpcy5tZXNoZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHR0aGlzLmdyb3VwLmFkZCggdGhpcy5tZXNoZXNbIGkgXSApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZ3JvdXA7XG5cblx0fSxcblxuXHQvKipcblx0ICogRGVjb2RlIGZpbGUgY29udGVudCB0byByZWFkIDNkcyBkYXRhLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHJlYWRGaWxlXG5cdCAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFycmF5YnVmZmVyIEFycmF5YnVmZmVyIGRhdGEgdG8gYmUgbG9hZGVkLlxuXHQgKi9cblx0cmVhZEZpbGU6IGZ1bmN0aW9uICggYXJyYXlidWZmZXIsIHBhdGggKSB7XG5cblx0XHR2YXIgZGF0YSA9IG5ldyBEYXRhVmlldyggYXJyYXlidWZmZXIgKTtcblx0XHR2YXIgY2h1bmsgPSB0aGlzLnJlYWRDaHVuayggZGF0YSApO1xuXG5cdFx0aWYgKCBjaHVuay5pZCA9PT0gTUxJQk1BR0lDIHx8IGNodW5rLmlkID09PSBDTUFHSUMgfHwgY2h1bmsuaWQgPT09IE0zRE1BR0lDICkge1xuXG5cdFx0XHR2YXIgbmV4dCA9IHRoaXMubmV4dENodW5rKCBkYXRhLCBjaHVuayApO1xuXG5cdFx0XHR3aGlsZSAoIG5leHQgIT09IDAgKSB7XG5cblx0XHRcdFx0aWYgKCBuZXh0ID09PSBNM0RfVkVSU0lPTiApIHtcblxuXHRcdFx0XHRcdHZhciB2ZXJzaW9uID0gdGhpcy5yZWFkRFdvcmQoIGRhdGEgKTtcblx0XHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJzNEUyBmaWxlIHZlcnNpb246ICcgKyB2ZXJzaW9uICk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTURBVEEgKSB7XG5cblx0XHRcdFx0XHR0aGlzLnJlc2V0UG9zaXRpb24oIGRhdGEgKTtcblx0XHRcdFx0XHR0aGlzLnJlYWRNZXNoRGF0YSggZGF0YSwgcGF0aCApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJ1Vua25vd24gbWFpbiBjaHVuazogJyArIG5leHQudG9TdHJpbmcoIDE2ICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0bmV4dCA9IHRoaXMubmV4dENodW5rKCBkYXRhLCBjaHVuayApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJ1BhcnNlZCAnICsgdGhpcy5tZXNoZXMubGVuZ3RoICsgJyBtZXNoZXMnICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogUmVhZCBtZXNoIGRhdGEgY2h1bmsuXG5cdCAqXG5cdCAqIEBtZXRob2QgcmVhZE1lc2hEYXRhXG5cdCAqIEBwYXJhbSB7RGF0YXZpZXd9IGRhdGEgRGF0YXZpZXcgaW4gdXNlLlxuXHQgKi9cblx0cmVhZE1lc2hEYXRhOiBmdW5jdGlvbiAoIGRhdGEsIHBhdGggKSB7XG5cblx0XHR2YXIgY2h1bmsgPSB0aGlzLnJlYWRDaHVuayggZGF0YSApO1xuXHRcdHZhciBuZXh0ID0gdGhpcy5uZXh0Q2h1bmsoIGRhdGEsIGNodW5rICk7XG5cblx0XHR3aGlsZSAoIG5leHQgIT09IDAgKSB7XG5cblx0XHRcdGlmICggbmV4dCA9PT0gTUVTSF9WRVJTSU9OICkge1xuXG5cdFx0XHRcdHZhciB2ZXJzaW9uID0gKyB0aGlzLnJlYWREV29yZCggZGF0YSApO1xuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJ01lc2ggVmVyc2lvbjogJyArIHZlcnNpb24gKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFTVEVSX1NDQUxFICkge1xuXG5cdFx0XHRcdHZhciBzY2FsZSA9IHRoaXMucmVhZEZsb2F0KCBkYXRhICk7XG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnTWFzdGVyIHNjYWxlOiAnICsgc2NhbGUgKTtcblx0XHRcdFx0dGhpcy5ncm91cC5zY2FsZS5zZXQoIHNjYWxlLCBzY2FsZSwgc2NhbGUgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTkFNRURfT0JKRUNUICkge1xuXG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnTmFtZWQgT2JqZWN0JyApO1xuXHRcdFx0XHR0aGlzLnJlc2V0UG9zaXRpb24oIGRhdGEgKTtcblx0XHRcdFx0dGhpcy5yZWFkTmFtZWRPYmplY3QoIGRhdGEgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFUX0VOVFJZICkge1xuXG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnTWF0ZXJpYWwnICk7XG5cdFx0XHRcdHRoaXMucmVzZXRQb3NpdGlvbiggZGF0YSApO1xuXHRcdFx0XHR0aGlzLnJlYWRNYXRlcmlhbEVudHJ5KCBkYXRhLCBwYXRoICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICdVbmtub3duIE1EQVRBIGNodW5rOiAnICsgbmV4dC50b1N0cmluZyggMTYgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdG5leHQgPSB0aGlzLm5leHRDaHVuayggZGF0YSwgY2h1bmsgKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBSZWFkIG5hbWVkIG9iamVjdCBjaHVuay5cblx0ICpcblx0ICogQG1ldGhvZCByZWFkTmFtZWRPYmplY3Rcblx0ICogQHBhcmFtIHtEYXRhdmlld30gZGF0YSBEYXRhdmlldyBpbiB1c2UuXG5cdCAqL1xuXHRyZWFkTmFtZWRPYmplY3Q6IGZ1bmN0aW9uICggZGF0YSApIHtcblxuXHRcdHZhciBjaHVuayA9IHRoaXMucmVhZENodW5rKCBkYXRhICk7XG5cdFx0dmFyIG5hbWUgPSB0aGlzLnJlYWRTdHJpbmcoIGRhdGEsIDY0ICk7XG5cdFx0Y2h1bmsuY3VyID0gdGhpcy5wb3NpdGlvbjtcblxuXHRcdHZhciBuZXh0ID0gdGhpcy5uZXh0Q2h1bmsoIGRhdGEsIGNodW5rICk7XG5cdFx0d2hpbGUgKCBuZXh0ICE9PSAwICkge1xuXG5cdFx0XHRpZiAoIG5leHQgPT09IE5fVFJJX09CSkVDVCApIHtcblxuXHRcdFx0XHR0aGlzLnJlc2V0UG9zaXRpb24oIGRhdGEgKTtcblx0XHRcdFx0dmFyIG1lc2ggPSB0aGlzLnJlYWRNZXNoKCBkYXRhICk7XG5cdFx0XHRcdG1lc2gubmFtZSA9IG5hbWU7XG5cdFx0XHRcdHRoaXMubWVzaGVzLnB1c2goIG1lc2ggKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJ1Vua25vd24gbmFtZWQgb2JqZWN0IGNodW5rOiAnICsgbmV4dC50b1N0cmluZyggMTYgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdG5leHQgPSB0aGlzLm5leHRDaHVuayggZGF0YSwgY2h1bmsgKTtcblxuXHRcdH1cblxuXHRcdHRoaXMuZW5kQ2h1bmsoIGNodW5rICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogUmVhZCBtYXRlcmlhbCBkYXRhIGNodW5rIGFuZCBhZGQgaXQgdG8gdGhlIG1hdGVyaWFsIGxpc3QuXG5cdCAqXG5cdCAqIEBtZXRob2QgcmVhZE1hdGVyaWFsRW50cnlcblx0ICogQHBhcmFtIHtEYXRhdmlld30gZGF0YSBEYXRhdmlldyBpbiB1c2UuXG5cdCAqL1xuXHRyZWFkTWF0ZXJpYWxFbnRyeTogZnVuY3Rpb24gKCBkYXRhLCBwYXRoICkge1xuXG5cdFx0dmFyIGNodW5rID0gdGhpcy5yZWFkQ2h1bmsoIGRhdGEgKTtcblx0XHR2YXIgbmV4dCA9IHRoaXMubmV4dENodW5rKCBkYXRhLCBjaHVuayApO1xuXHRcdHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgpO1xuXG5cdFx0d2hpbGUgKCBuZXh0ICE9PSAwICkge1xuXG5cdFx0XHRpZiAoIG5leHQgPT09IE1BVF9OQU1FICkge1xuXG5cdFx0XHRcdG1hdGVyaWFsLm5hbWUgPSB0aGlzLnJlYWRTdHJpbmcoIGRhdGEsIDY0ICk7XG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnICAgTmFtZTogJyArIG1hdGVyaWFsLm5hbWUgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFUX1dJUkUgKSB7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICBXaXJlZnJhbWUnICk7XG5cdFx0XHRcdG1hdGVyaWFsLndpcmVmcmFtZSA9IHRydWU7XG5cblx0XHRcdH0gZWxzZSBpZiAoIG5leHQgPT09IE1BVF9XSVJFX1NJWkUgKSB7XG5cblx0XHRcdFx0dmFyIHZhbHVlID0gdGhpcy5yZWFkQnl0ZSggZGF0YSApO1xuXHRcdFx0XHRtYXRlcmlhbC53aXJlZnJhbWVMaW5ld2lkdGggPSB2YWx1ZTtcblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICBXaXJlZnJhbWUgVGhpY2tuZXNzOiAnICsgdmFsdWUgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFUX1RXT19TSURFICkge1xuXG5cdFx0XHRcdG1hdGVyaWFsLnNpZGUgPSBUSFJFRS5Eb3VibGVTaWRlO1xuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgIERvdWJsZVNpZGVkJyApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBuZXh0ID09PSBNQVRfQURESVRJVkUgKSB7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICBBZGRpdGl2ZSBCbGVuZGluZycgKTtcblx0XHRcdFx0bWF0ZXJpYWwuYmxlbmRpbmcgPSBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBuZXh0ID09PSBNQVRfRElGRlVTRSApIHtcblxuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgIERpZmZ1c2UgQ29sb3InICk7XG5cdFx0XHRcdG1hdGVyaWFsLmNvbG9yID0gdGhpcy5yZWFkQ29sb3IoIGRhdGEgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFUX1NQRUNVTEFSICkge1xuXG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnICAgU3BlY3VsYXIgQ29sb3InICk7XG5cdFx0XHRcdG1hdGVyaWFsLnNwZWN1bGFyID0gdGhpcy5yZWFkQ29sb3IoIGRhdGEgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFUX0FNQklFTlQgKSB7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICBBbWJpZW50IGNvbG9yJyApO1xuXHRcdFx0XHRtYXRlcmlhbC5jb2xvciA9IHRoaXMucmVhZENvbG9yKCBkYXRhICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIG5leHQgPT09IE1BVF9TSElOSU5FU1MgKSB7XG5cblx0XHRcdFx0dmFyIHNoaW5pbmVzcyA9IHRoaXMucmVhZFdvcmQoIGRhdGEgKTtcblx0XHRcdFx0bWF0ZXJpYWwuc2hpbmluZXNzID0gc2hpbmluZXNzO1xuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgIFNoaW5pbmVzcyA6ICcgKyBzaGluaW5lc3MgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFUX1RFWE1BUCApIHtcblxuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgIENvbG9yTWFwJyApO1xuXHRcdFx0XHR0aGlzLnJlc2V0UG9zaXRpb24oIGRhdGEgKTtcblx0XHRcdFx0bWF0ZXJpYWwubWFwID0gdGhpcy5yZWFkTWFwKCBkYXRhLCBwYXRoICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIG5leHQgPT09IE1BVF9CVU1QTUFQICkge1xuXG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnICAgQnVtcE1hcCcgKTtcblx0XHRcdFx0dGhpcy5yZXNldFBvc2l0aW9uKCBkYXRhICk7XG5cdFx0XHRcdG1hdGVyaWFsLmJ1bXBNYXAgPSB0aGlzLnJlYWRNYXAoIGRhdGEsIHBhdGggKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFUX09QQUNNQVAgKSB7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICBPcGFjaXR5TWFwJyApO1xuXHRcdFx0XHR0aGlzLnJlc2V0UG9zaXRpb24oIGRhdGEgKTtcblx0XHRcdFx0bWF0ZXJpYWwuYWxwaGFNYXAgPSB0aGlzLnJlYWRNYXAoIGRhdGEsIHBhdGggKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFUX1NQRUNNQVAgKSB7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICBTcGVjdWxhck1hcCcgKTtcblx0XHRcdFx0dGhpcy5yZXNldFBvc2l0aW9uKCBkYXRhICk7XG5cdFx0XHRcdG1hdGVyaWFsLnNwZWN1bGFyTWFwID0gdGhpcy5yZWFkTWFwKCBkYXRhLCBwYXRoICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICBVbmtub3duIG1hdGVyaWFsIGNodW5rOiAnICsgbmV4dC50b1N0cmluZyggMTYgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdG5leHQgPSB0aGlzLm5leHRDaHVuayggZGF0YSwgY2h1bmsgKTtcblxuXHRcdH1cblxuXHRcdHRoaXMuZW5kQ2h1bmsoIGNodW5rICk7XG5cblx0XHR0aGlzLm1hdGVyaWFsc1sgbWF0ZXJpYWwubmFtZSBdID0gbWF0ZXJpYWw7XG5cblx0fSxcblxuXHQvKipcblx0ICogUmVhZCBtZXNoIGRhdGEgY2h1bmsuXG5cdCAqXG5cdCAqIEBtZXRob2QgcmVhZE1lc2hcblx0ICogQHBhcmFtIHtEYXRhdmlld30gZGF0YSBEYXRhdmlldyBpbiB1c2UuXG5cdCAqL1xuXHRyZWFkTWVzaDogZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0dmFyIGNodW5rID0gdGhpcy5yZWFkQ2h1bmsoIGRhdGEgKTtcblx0XHR2YXIgbmV4dCA9IHRoaXMubmV4dENodW5rKCBkYXRhLCBjaHVuayApO1xuXG5cdFx0dmFyIHVzZUJ1ZmZlckdlb21ldHJ5ID0gZmFsc2U7XG5cdFx0dmFyIGdlb21ldHJ5ID0gbnVsbDtcblx0XHR2YXIgdXZzID0gW107XG5cblx0XHRpZiAoIHVzZUJ1ZmZlckdlb21ldHJ5ICkge1xuXG5cdFx0XHRnZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuXG5cdFx0fVx0ZWxzZSB7XG5cblx0XHRcdGdlb21ldHJ5ID0gbmV3IFRIUkVFLkdlb21ldHJ5KCk7XG5cblx0XHR9XG5cblx0XHR2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoKTtcblx0XHR2YXIgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcblx0XHRtZXNoLm5hbWUgPSAnbWVzaCc7XG5cblx0XHR3aGlsZSAoIG5leHQgIT09IDAgKSB7XG5cblx0XHRcdGlmICggbmV4dCA9PT0gUE9JTlRfQVJSQVkgKSB7XG5cblx0XHRcdFx0dmFyIHBvaW50cyA9IHRoaXMucmVhZFdvcmQoIGRhdGEgKTtcblxuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgIFZlcnRleDogJyArIHBvaW50cyApO1xuXG5cdFx0XHRcdC8vQnVmZmVyR2VvbWV0cnlcblxuXHRcdFx0XHRpZiAoIHVzZUJ1ZmZlckdlb21ldHJ5IClcdHtcblxuXHRcdFx0XHRcdHZhciB2ZXJ0aWNlcyA9IFtdO1xuXHRcdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHBvaW50czsgaSArKyApXHRcdHtcblxuXHRcdFx0XHRcdFx0dmVydGljZXMucHVzaCggdGhpcy5yZWFkRmxvYXQoIGRhdGEgKSApO1xuXHRcdFx0XHRcdFx0dmVydGljZXMucHVzaCggdGhpcy5yZWFkRmxvYXQoIGRhdGEgKSApO1xuXHRcdFx0XHRcdFx0dmVydGljZXMucHVzaCggdGhpcy5yZWFkRmxvYXQoIGRhdGEgKSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Z2VvbWV0cnkuYWRkQXR0cmlidXRlKCAncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCB2ZXJ0aWNlcyApLCAzICkgKTtcblxuXHRcdFx0XHR9IGVsc2VcdHsgLy9HZW9tZXRyeVxuXG5cdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgcG9pbnRzOyBpICsrIClcdFx0e1xuXG5cdFx0XHRcdFx0XHRnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBuZXcgVEhSRUUuVmVjdG9yMyggdGhpcy5yZWFkRmxvYXQoIGRhdGEgKSwgdGhpcy5yZWFkRmxvYXQoIGRhdGEgKSwgdGhpcy5yZWFkRmxvYXQoIGRhdGEgKSApICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2UgaWYgKCBuZXh0ID09PSBGQUNFX0FSUkFZICkge1xuXG5cdFx0XHRcdHRoaXMucmVzZXRQb3NpdGlvbiggZGF0YSApO1xuXHRcdFx0XHR0aGlzLnJlYWRGYWNlQXJyYXkoIGRhdGEsIG1lc2ggKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gVEVYX1ZFUlRTICkge1xuXG5cdFx0XHRcdHZhciB0ZXhlbHMgPSB0aGlzLnJlYWRXb3JkKCBkYXRhICk7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICBVVjogJyArIHRleGVscyApO1xuXG5cdFx0XHRcdC8vQnVmZmVyR2VvbWV0cnlcblxuXHRcdFx0XHRpZiAoIHVzZUJ1ZmZlckdlb21ldHJ5IClcdHtcblxuXHRcdFx0XHRcdHZhciB1dnMgPSBbXTtcblx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB0ZXhlbHM7IGkgKysgKVx0XHR7XG5cblx0XHRcdFx0XHRcdHV2cy5wdXNoKCB0aGlzLnJlYWRGbG9hdCggZGF0YSApICk7XG5cdFx0XHRcdFx0XHR1dnMucHVzaCggdGhpcy5yZWFkRmxvYXQoIGRhdGEgKSApO1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3V2JywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggdXZzICksIDIgKSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7IC8vR2VvbWV0cnlcblxuXHRcdFx0XHRcdHV2cyA9IFtdO1xuXHRcdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHRleGVsczsgaSArKyApXHRcdHtcblxuXHRcdFx0XHRcdFx0dXZzLnB1c2goIG5ldyBUSFJFRS5WZWN0b3IyKCB0aGlzLnJlYWRGbG9hdCggZGF0YSApLCB0aGlzLnJlYWRGbG9hdCggZGF0YSApICkgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAoIG5leHQgPT09IE1FU0hfTUFUUklYICkge1xuXG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnICAgVHJhbmZvcm1hdGlvbiBNYXRyaXggKFRPRE8pJyApO1xuXG5cdFx0XHRcdHZhciB2YWx1ZXMgPSBbXTtcblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgMTI7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YWx1ZXNbIGkgXSA9IHRoaXMucmVhZEZsb2F0KCBkYXRhICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBtYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuXG5cdFx0XHRcdC8vWCBMaW5lXG5cdFx0XHRcdG1hdHJpeC5lbGVtZW50c1sgMCBdID0gdmFsdWVzWyAwIF07XG5cdFx0XHRcdG1hdHJpeC5lbGVtZW50c1sgMSBdID0gdmFsdWVzWyA2IF07XG5cdFx0XHRcdG1hdHJpeC5lbGVtZW50c1sgMiBdID0gdmFsdWVzWyAzIF07XG5cdFx0XHRcdG1hdHJpeC5lbGVtZW50c1sgMyBdID0gdmFsdWVzWyA5IF07XG5cblx0XHRcdFx0Ly9ZIExpbmVcblx0XHRcdFx0bWF0cml4LmVsZW1lbnRzWyA0IF0gPSB2YWx1ZXNbIDIgXTtcblx0XHRcdFx0bWF0cml4LmVsZW1lbnRzWyA1IF0gPSB2YWx1ZXNbIDggXTtcblx0XHRcdFx0bWF0cml4LmVsZW1lbnRzWyA2IF0gPSB2YWx1ZXNbIDUgXTtcblx0XHRcdFx0bWF0cml4LmVsZW1lbnRzWyA3IF0gPSB2YWx1ZXNbIDExIF07XG5cblx0XHRcdFx0Ly9aIExpbmVcblx0XHRcdFx0bWF0cml4LmVsZW1lbnRzWyA4IF0gPSB2YWx1ZXNbIDEgXTtcblx0XHRcdFx0bWF0cml4LmVsZW1lbnRzWyA5IF0gPSB2YWx1ZXNbIDcgXTtcblx0XHRcdFx0bWF0cml4LmVsZW1lbnRzWyAxMCBdID0gdmFsdWVzWyA0IF07XG5cdFx0XHRcdG1hdHJpeC5lbGVtZW50c1sgMTEgXSA9IHZhbHVlc1sgMTAgXTtcblxuXHRcdFx0XHQvL1cgTGluZVxuXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDEyIF0gPSAwO1xuXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDEzIF0gPSAwO1xuXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDE0IF0gPSAwO1xuXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDE1IF0gPSAxO1xuXG5cdFx0XHRcdG1hdHJpeC50cmFuc3Bvc2UoKTtcblxuXHRcdFx0XHR2YXIgaW52ZXJzZSA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG5cdFx0XHRcdGludmVyc2UuZ2V0SW52ZXJzZSggbWF0cml4LCB0cnVlICk7XG5cdFx0XHRcdGdlb21ldHJ5LmFwcGx5TWF0cml4KCBpbnZlcnNlICk7XG5cblx0XHRcdFx0bWF0cml4LmRlY29tcG9zZSggbWVzaC5wb3NpdGlvbiwgbWVzaC5xdWF0ZXJuaW9uLCBtZXNoLnNjYWxlICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICBVbmtub3duIG1lc2ggY2h1bms6ICcgKyBuZXh0LnRvU3RyaW5nKCAxNiApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0bmV4dCA9IHRoaXMubmV4dENodW5rKCBkYXRhLCBjaHVuayApO1xuXG5cdFx0fVxuXG5cdFx0dGhpcy5lbmRDaHVuayggY2h1bmsgKTtcblxuXHRcdGlmICggISB1c2VCdWZmZXJHZW9tZXRyeSApIHtcblxuXHRcdFx0Ly9nZW9tZXRyeS5mYWNlVmVydGV4VXZzWzBdW2ZhY2VJbmRleF1bdmVydGV4SW5kZXhdXG5cblx0XHRcdGlmICggdXZzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0dmFyIGZhY2VVViA9IFtdO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IGdlb21ldHJ5LmZhY2VzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHRcdGZhY2VVVi5wdXNoKCBbIHV2c1sgZ2VvbWV0cnkuZmFjZXNbIGkgXS5hIF0sIHV2c1sgZ2VvbWV0cnkuZmFjZXNbIGkgXS5iIF0sIHV2c1sgZ2VvbWV0cnkuZmFjZXNbIGkgXS5jIF0gXSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRnZW9tZXRyeS5mYWNlVmVydGV4VXZzWyAwIF0gPSBmYWNlVVY7XG5cblx0XHRcdH1cblxuXHRcdFx0Z2VvbWV0cnkuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBtZXNoO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFJlYWQgZmFjZSBhcnJheSBkYXRhIGNodW5rLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHJlYWRGYWNlQXJyYXlcblx0ICogQHBhcmFtIHtEYXRhdmlld30gZGF0YSBEYXRhdmlldyBpbiB1c2UuXG5cdCAqIEBwYXJhbSB7TWVzaH0gbWVzaCBNZXNoIHRvIGJlIGZpbGxlZCB3aXRoIHRoZSBkYXRhIHJlYWQuXG5cdCAqL1xuXHRyZWFkRmFjZUFycmF5OiBmdW5jdGlvbiAoIGRhdGEsIG1lc2ggKSB7XG5cblx0XHR2YXIgY2h1bmsgPSB0aGlzLnJlYWRDaHVuayggZGF0YSApO1xuXHRcdHZhciBmYWNlcyA9IHRoaXMucmVhZFdvcmQoIGRhdGEgKTtcblxuXHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnICAgRmFjZXM6ICcgKyBmYWNlcyApO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgZmFjZXM7ICsrIGkgKSB7XG5cblx0XHRcdG1lc2guZ2VvbWV0cnkuZmFjZXMucHVzaCggbmV3IFRIUkVFLkZhY2UzKCB0aGlzLnJlYWRXb3JkKCBkYXRhICksIHRoaXMucmVhZFdvcmQoIGRhdGEgKSwgdGhpcy5yZWFkV29yZCggZGF0YSApICkgKTtcblxuXHRcdFx0dmFyIHZpc2liaWxpdHkgPSB0aGlzLnJlYWRXb3JkKCBkYXRhICk7XG5cblx0XHR9XG5cblx0XHQvL1RoZSByZXN0IG9mIHRoZSBGQUNFX0FSUkFZIGNodW5rIGlzIHN1YmNodW5rc1xuXG5cdFx0d2hpbGUgKCB0aGlzLnBvc2l0aW9uIDwgY2h1bmsuZW5kICkge1xuXG5cdFx0XHR2YXIgY2h1bmsgPSB0aGlzLnJlYWRDaHVuayggZGF0YSApO1xuXG5cdFx0XHRpZiAoIGNodW5rLmlkID09PSBNU0hfTUFUX0dST1VQICkge1xuXG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnICAgICAgTWF0ZXJpYWwgR3JvdXAnICk7XG5cblx0XHRcdFx0dGhpcy5yZXNldFBvc2l0aW9uKCBkYXRhICk7XG5cblx0XHRcdFx0dmFyIGdyb3VwID0gdGhpcy5yZWFkTWF0ZXJpYWxHcm91cCggZGF0YSApO1xuXG5cdFx0XHRcdHZhciBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzWyBncm91cC5uYW1lIF07XG5cblx0XHRcdFx0aWYgKCBtYXRlcmlhbCAhPT0gdW5kZWZpbmVkIClcdHtcblxuXHRcdFx0XHRcdG1lc2gubWF0ZXJpYWwgPSBtYXRlcmlhbDtcblxuXHRcdFx0XHRcdGlmICggbWF0ZXJpYWwubmFtZSA9PT0gJycgKVx0XHR7XG5cblx0XHRcdFx0XHRcdG1hdGVyaWFsLm5hbWUgPSBtZXNoLm5hbWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnICAgICAgVW5rbm93biBmYWNlIGFycmF5IGNodW5rOiAnICsgY2h1bmsudG9TdHJpbmcoIDE2ICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmVuZENodW5rKCBjaHVuayApO1xuXG5cdFx0fVxuXG5cdFx0dGhpcy5lbmRDaHVuayggY2h1bmsgKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBSZWFkIHRleHR1cmUgbWFwIGRhdGEgY2h1bmsuXG5cdCAqXG5cdCAqIEBtZXRob2QgcmVhZE1hcFxuXHQgKiBAcGFyYW0ge0RhdGF2aWV3fSBkYXRhIERhdGF2aWV3IGluIHVzZS5cblx0ICogQHJldHVybiB7VGV4dHVyZX0gVGV4dHVyZSByZWFkIGZyb20gdGhpcyBkYXRhIGNodW5rLlxuXHQgKi9cblx0cmVhZE1hcDogZnVuY3Rpb24gKCBkYXRhLCBwYXRoICkge1xuXG5cdFx0dmFyIGNodW5rID0gdGhpcy5yZWFkQ2h1bmsoIGRhdGEgKTtcblx0XHR2YXIgbmV4dCA9IHRoaXMubmV4dENodW5rKCBkYXRhLCBjaHVuayApO1xuXHRcdHZhciB0ZXh0dXJlID0ge307XG5cblx0XHR2YXIgbG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuXHRcdGxvYWRlci5zZXRQYXRoKCBwYXRoICk7XG5cblx0XHR3aGlsZSAoIG5leHQgIT09IDAgKSB7XG5cblx0XHRcdGlmICggbmV4dCA9PT0gTUFUX01BUE5BTUUgKSB7XG5cblx0XHRcdFx0dmFyIG5hbWUgPSB0aGlzLnJlYWRTdHJpbmcoIGRhdGEsIDEyOCApO1xuXHRcdFx0XHR0ZXh0dXJlID0gbG9hZGVyLmxvYWQoIG5hbWUgKTtcblxuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgICAgIEZpbGU6ICcgKyBwYXRoICsgbmFtZSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBuZXh0ID09PSBNQVRfTUFQX1VPRkZTRVQgKSB7XG5cblx0XHRcdFx0dGV4dHVyZS5vZmZzZXQueCA9IHRoaXMucmVhZEZsb2F0KCBkYXRhICk7XG5cdFx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnICAgICAgT2Zmc2V0WDogJyArIHRleHR1cmUub2Zmc2V0LnggKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmV4dCA9PT0gTUFUX01BUF9WT0ZGU0VUICkge1xuXG5cdFx0XHRcdHRleHR1cmUub2Zmc2V0LnkgPSB0aGlzLnJlYWRGbG9hdCggZGF0YSApO1xuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgICAgIE9mZnNldFk6ICcgKyB0ZXh0dXJlLm9mZnNldC55ICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIG5leHQgPT09IE1BVF9NQVBfVVNDQUxFICkge1xuXG5cdFx0XHRcdHRleHR1cmUucmVwZWF0LnggPSB0aGlzLnJlYWRGbG9hdCggZGF0YSApO1xuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgICAgIFJlcGVhdFg6ICcgKyB0ZXh0dXJlLnJlcGVhdC54ICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIG5leHQgPT09IE1BVF9NQVBfVlNDQUxFICkge1xuXG5cdFx0XHRcdHRleHR1cmUucmVwZWF0LnkgPSB0aGlzLnJlYWRGbG9hdCggZGF0YSApO1xuXHRcdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgICAgIFJlcGVhdFk6ICcgKyB0ZXh0dXJlLnJlcGVhdC55ICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICAgICBVbmtub3duIG1hcCBjaHVuazogJyArIG5leHQudG9TdHJpbmcoIDE2ICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRuZXh0ID0gdGhpcy5uZXh0Q2h1bmsoIGRhdGEsIGNodW5rICk7XG5cblx0XHR9XG5cblx0XHR0aGlzLmVuZENodW5rKCBjaHVuayApO1xuXG5cdFx0cmV0dXJuIHRleHR1cmU7XG5cblx0fSxcblxuXHQvKipcblx0ICogUmVhZCBtYXRlcmlhbCBncm91cCBkYXRhIGNodW5rLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHJlYWRNYXRlcmlhbEdyb3VwXG5cdCAqIEBwYXJhbSB7RGF0YXZpZXd9IGRhdGEgRGF0YXZpZXcgaW4gdXNlLlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IE9iamVjdCB3aXRoIG5hbWUgYW5kIGluZGV4IG9mIHRoZSBvYmplY3QuXG5cdCAqL1xuXHRyZWFkTWF0ZXJpYWxHcm91cDogZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0dmFyIGNodW5rID0gdGhpcy5yZWFkQ2h1bmsoIGRhdGEgKTtcblx0XHR2YXIgbmFtZSA9IHRoaXMucmVhZFN0cmluZyggZGF0YSwgNjQgKTtcblx0XHR2YXIgbnVtRmFjZXMgPSB0aGlzLnJlYWRXb3JkKCBkYXRhICk7XG5cblx0XHR0aGlzLmRlYnVnTWVzc2FnZSggJyAgICAgICAgIE5hbWU6ICcgKyBuYW1lICk7XG5cdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICAgICAgICBGYWNlczogJyArIG51bUZhY2VzICk7XG5cblx0XHR2YXIgaW5kZXggPSBbXTtcblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBudW1GYWNlczsgKysgaSApIHtcblxuXHRcdFx0aW5kZXgucHVzaCggdGhpcy5yZWFkV29yZCggZGF0YSApICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4geyBuYW1lOiBuYW1lLCBpbmRleDogaW5kZXggfTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBSZWFkIGEgY29sb3IgdmFsdWUuXG5cdCAqXG5cdCAqIEBtZXRob2QgcmVhZENvbG9yXG5cdCAqIEBwYXJhbSB7RGF0YVZpZXd9IGRhdGEgRGF0YXZpZXcuXG5cdCAqIEByZXR1cm4ge0NvbG9yfSBDb2xvciB2YWx1ZSByZWFkLi5cblx0ICovXG5cdHJlYWRDb2xvcjogZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0dmFyIGNodW5rID0gdGhpcy5yZWFkQ2h1bmsoIGRhdGEgKTtcblx0XHR2YXIgY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKTtcblxuXHRcdGlmICggY2h1bmsuaWQgPT09IENPTE9SXzI0IHx8IGNodW5rLmlkID09PSBMSU5fQ09MT1JfMjQgKSB7XG5cblx0XHRcdHZhciByID0gdGhpcy5yZWFkQnl0ZSggZGF0YSApO1xuXHRcdFx0dmFyIGcgPSB0aGlzLnJlYWRCeXRlKCBkYXRhICk7XG5cdFx0XHR2YXIgYiA9IHRoaXMucmVhZEJ5dGUoIGRhdGEgKTtcblxuXHRcdFx0Y29sb3Iuc2V0UkdCKCByIC8gMjU1LCBnIC8gMjU1LCBiIC8gMjU1ICk7XG5cblx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnICAgICAgQ29sb3I6ICcgKyBjb2xvci5yICsgJywgJyArIGNvbG9yLmcgKyAnLCAnICsgY29sb3IuYiApO1xuXG5cdFx0fVx0ZWxzZSBpZiAoIGNodW5rLmlkID09PSBDT0xPUl9GIHx8IGNodW5rLmlkID09PSBMSU5fQ09MT1JfRiApIHtcblxuXHRcdFx0dmFyIHIgPSB0aGlzLnJlYWRGbG9hdCggZGF0YSApO1xuXHRcdFx0dmFyIGcgPSB0aGlzLnJlYWRGbG9hdCggZGF0YSApO1xuXHRcdFx0dmFyIGIgPSB0aGlzLnJlYWRGbG9hdCggZGF0YSApO1xuXG5cdFx0XHRjb2xvci5zZXRSR0IoIHIsIGcsIGIgKTtcblxuXHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICAgICBDb2xvcjogJyArIGNvbG9yLnIgKyAnLCAnICsgY29sb3IuZyArICcsICcgKyBjb2xvci5iICk7XG5cblx0XHR9XHRlbHNlIHtcblxuXHRcdFx0dGhpcy5kZWJ1Z01lc3NhZ2UoICcgICAgICBVbmtub3duIGNvbG9yIGNodW5rOiAnICsgY2h1bmsudG9TdHJpbmcoIDE2ICkgKTtcblxuXHRcdH1cblxuXHRcdHRoaXMuZW5kQ2h1bmsoIGNodW5rICk7XG5cdFx0cmV0dXJuIGNvbG9yO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFJlYWQgbmV4dCBjaHVuayBvZiBkYXRhLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHJlYWRDaHVua1xuXHQgKiBAcGFyYW0ge0RhdGFWaWV3fSBkYXRhIERhdGF2aWV3LlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IENodW5rIG9mIGRhdGEgcmVhZC5cblx0ICovXG5cdHJlYWRDaHVuazogZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0dmFyIGNodW5rID0ge307XG5cblx0XHRjaHVuay5jdXIgPSB0aGlzLnBvc2l0aW9uO1xuXHRcdGNodW5rLmlkID0gdGhpcy5yZWFkV29yZCggZGF0YSApO1xuXHRcdGNodW5rLnNpemUgPSB0aGlzLnJlYWREV29yZCggZGF0YSApO1xuXHRcdGNodW5rLmVuZCA9IGNodW5rLmN1ciArIGNodW5rLnNpemU7XG5cdFx0Y2h1bmsuY3VyICs9IDY7XG5cblx0XHRyZXR1cm4gY2h1bms7XG5cblx0fSxcblxuXHQvKipcblx0ICogU2V0IHBvc2l0aW9uIHRvIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgY2h1bmsgb2YgZGF0YS5cblx0ICpcblx0ICogQG1ldGhvZCBlbmRDaHVua1xuXHQgKiBAcGFyYW0ge09iamVjdH0gY2h1bmsgRGF0YSBjaHVuay5cblx0ICovXG5cdGVuZENodW5rOiBmdW5jdGlvbiAoIGNodW5rICkge1xuXG5cdFx0dGhpcy5wb3NpdGlvbiA9IGNodW5rLmVuZDtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBNb3ZlIHRvIHRoZSBuZXh0IGRhdGEgY2h1bmsuXG5cdCAqXG5cdCAqIEBtZXRob2QgbmV4dENodW5rXG5cdCAqIEBwYXJhbSB7RGF0YVZpZXd9IGRhdGEgRGF0YXZpZXcuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjaHVuayBEYXRhIGNodW5rLlxuXHQgKi9cblx0bmV4dENodW5rOiBmdW5jdGlvbiAoIGRhdGEsIGNodW5rICkge1xuXG5cdFx0aWYgKCBjaHVuay5jdXIgPj0gY2h1bmsuZW5kICkge1xuXG5cdFx0XHRyZXR1cm4gMDtcblxuXHRcdH1cblxuXHRcdHRoaXMucG9zaXRpb24gPSBjaHVuay5jdXI7XG5cblx0XHR0cnkge1xuXG5cdFx0XHR2YXIgbmV4dCA9IHRoaXMucmVhZENodW5rKCBkYXRhICk7XG5cdFx0XHRjaHVuay5jdXIgKz0gbmV4dC5zaXplO1xuXHRcdFx0cmV0dXJuIG5leHQuaWQ7XG5cblx0XHR9XHRjYXRjaCAoIGUgKSB7XG5cblx0XHRcdHRoaXMuZGVidWdNZXNzYWdlKCAnVW5hYmxlIHRvIHJlYWQgY2h1bmsgYXQgJyArIHRoaXMucG9zaXRpb24gKTtcblx0XHRcdHJldHVybiAwO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFJlc2V0IGRhdGF2aWV3IHBvc2l0aW9uLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHJlc2V0UG9zaXRpb25cblx0ICogQHBhcmFtIHtEYXRhVmlld30gZGF0YSBEYXRhdmlldy5cblx0ICovXG5cdHJlc2V0UG9zaXRpb246IGZ1bmN0aW9uICgpIHtcblxuXHRcdHRoaXMucG9zaXRpb24gLT0gNjtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBSZWFkIGJ5dGUgdmFsdWUuXG5cdCAqXG5cdCAqIEBtZXRob2QgcmVhZEJ5dGVcblx0ICogQHBhcmFtIHtEYXRhVmlld30gZGF0YSBEYXRhdmlldyB0byByZWFkIGRhdGEgZnJvbS5cblx0ICogQHJldHVybiB7TnVtYmVyfSBEYXRhIHJlYWQgZnJvbSB0aGUgZGF0YXZpZXcuXG5cdCAqL1xuXHRyZWFkQnl0ZTogZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0dmFyIHYgPSBkYXRhLmdldFVpbnQ4KCB0aGlzLnBvc2l0aW9uLCB0cnVlICk7XG5cdFx0dGhpcy5wb3NpdGlvbiArPSAxO1xuXHRcdHJldHVybiB2O1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFJlYWQgMzIgYml0IGZsb2F0IHZhbHVlLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHJlYWRGbG9hdFxuXHQgKiBAcGFyYW0ge0RhdGFWaWV3fSBkYXRhIERhdGF2aWV3IHRvIHJlYWQgZGF0YSBmcm9tLlxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IERhdGEgcmVhZCBmcm9tIHRoZSBkYXRhdmlldy5cblx0ICovXG5cdHJlYWRGbG9hdDogZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0dHJ5IHtcblxuXHRcdFx0dmFyIHYgPSBkYXRhLmdldEZsb2F0MzIoIHRoaXMucG9zaXRpb24sIHRydWUgKTtcblx0XHRcdHRoaXMucG9zaXRpb24gKz0gNDtcblx0XHRcdHJldHVybiB2O1xuXG5cdFx0fVx0Y2F0Y2ggKCBlICkge1xuXG5cdFx0XHR0aGlzLmRlYnVnTWVzc2FnZSggZSArICcgJyArIHRoaXMucG9zaXRpb24gKyAnICcgKyBkYXRhLmJ5dGVMZW5ndGggKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBSZWFkIDMyIGJpdCBzaWduZWQgaW50ZWdlciB2YWx1ZS5cblx0ICpcblx0ICogQG1ldGhvZCByZWFkSW50XG5cdCAqIEBwYXJhbSB7RGF0YVZpZXd9IGRhdGEgRGF0YXZpZXcgdG8gcmVhZCBkYXRhIGZyb20uXG5cdCAqIEByZXR1cm4ge051bWJlcn0gRGF0YSByZWFkIGZyb20gdGhlIGRhdGF2aWV3LlxuXHQgKi9cblx0cmVhZEludDogZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0dmFyIHYgPSBkYXRhLmdldEludDMyKCB0aGlzLnBvc2l0aW9uLCB0cnVlICk7XG5cdFx0dGhpcy5wb3NpdGlvbiArPSA0O1xuXHRcdHJldHVybiB2O1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFJlYWQgMTYgYml0IHNpZ25lZCBpbnRlZ2VyIHZhbHVlLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHJlYWRTaG9ydFxuXHQgKiBAcGFyYW0ge0RhdGFWaWV3fSBkYXRhIERhdGF2aWV3IHRvIHJlYWQgZGF0YSBmcm9tLlxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IERhdGEgcmVhZCBmcm9tIHRoZSBkYXRhdmlldy5cblx0ICovXG5cdHJlYWRTaG9ydDogZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0dmFyIHYgPSBkYXRhLmdldEludDE2KCB0aGlzLnBvc2l0aW9uLCB0cnVlICk7XG5cdFx0dGhpcy5wb3NpdGlvbiArPSAyO1xuXHRcdHJldHVybiB2O1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFJlYWQgNjQgYml0IHVuc2lnbmVkIGludGVnZXIgdmFsdWUuXG5cdCAqXG5cdCAqIEBtZXRob2QgcmVhZERXb3JkXG5cdCAqIEBwYXJhbSB7RGF0YVZpZXd9IGRhdGEgRGF0YXZpZXcgdG8gcmVhZCBkYXRhIGZyb20uXG5cdCAqIEByZXR1cm4ge051bWJlcn0gRGF0YSByZWFkIGZyb20gdGhlIGRhdGF2aWV3LlxuXHQgKi9cblx0cmVhZERXb3JkOiBmdW5jdGlvbiAoIGRhdGEgKSB7XG5cblx0XHR2YXIgdiA9IGRhdGEuZ2V0VWludDMyKCB0aGlzLnBvc2l0aW9uLCB0cnVlICk7XG5cdFx0dGhpcy5wb3NpdGlvbiArPSA0O1xuXHRcdHJldHVybiB2O1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFJlYWQgMzIgYml0IHVuc2lnbmVkIGludGVnZXIgdmFsdWUuXG5cdCAqXG5cdCAqIEBtZXRob2QgcmVhZFdvcmRcblx0ICogQHBhcmFtIHtEYXRhVmlld30gZGF0YSBEYXRhdmlldyB0byByZWFkIGRhdGEgZnJvbS5cblx0ICogQHJldHVybiB7TnVtYmVyfSBEYXRhIHJlYWQgZnJvbSB0aGUgZGF0YXZpZXcuXG5cdCAqL1xuXHRyZWFkV29yZDogZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0dmFyIHYgPSBkYXRhLmdldFVpbnQxNiggdGhpcy5wb3NpdGlvbiwgdHJ1ZSApO1xuXHRcdHRoaXMucG9zaXRpb24gKz0gMjtcblx0XHRyZXR1cm4gdjtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBSZWFkIHN0cmluZyB2YWx1ZS5cblx0ICpcblx0ICogQG1ldGhvZCByZWFkU3RyaW5nXG5cdCAqIEBwYXJhbSB7RGF0YVZpZXd9IGRhdGEgRGF0YXZpZXcgdG8gcmVhZCBkYXRhIGZyb20uXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBtYXhMZW5ndGggTWF4IHNpemUgb2YgdGhlIHN0cmluZyB0byBiZSByZWFkLlxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IERhdGEgcmVhZCBmcm9tIHRoZSBkYXRhdmlldy5cblx0ICovXG5cdHJlYWRTdHJpbmc6IGZ1bmN0aW9uICggZGF0YSwgbWF4TGVuZ3RoICkge1xuXG5cdFx0dmFyIHMgPSAnJztcblxuXHRcdGZvciAoIHZhciBpID0gMDsgaSA8IG1heExlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0dmFyIGMgPSB0aGlzLnJlYWRCeXRlKCBkYXRhICk7XG5cdFx0XHRpZiAoICEgYyApIHtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0fVxuXG5cdFx0XHRzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoIGMgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBzO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFNldCByZXNvdXJjZSBwYXRoIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBmaWxlIHBhdGggdG8gYXR0YWNoZWQgcmVzb3VyY2VzLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHNldFBhdGhcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGggUGF0aCB0byByZXNvdXJjZXMuXG5cdCAqIEByZXR1cm4gU2VsZiBmb3IgY2hhaW5pbmcuXG5cdCAqL1xuXHRzZXRQYXRoOiBmdW5jdGlvbiAoIHBhdGggKSB7XG5cblx0XHR0aGlzLnBhdGggPSBwYXRoO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fSxcblxuXHQvKipcblx0ICogUHJpbnQgZGVidWcgbWVzc2FnZSB0byB0aGUgY29uc29sZS5cblx0ICpcblx0ICogSXMgY29udHJvbGxlZCBieSBhIGZsYWcgdG8gc2hvdyBvciBoaWRlIGRlYnVnIG1lc3NhZ2VzLlxuXHQgKlxuXHQgKiBAbWV0aG9kIGRlYnVnTWVzc2FnZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWVzc2FnZSBEZWJ1ZyBtZXNzYWdlIHRvIHByaW50IHRvIHRoZSBjb25zb2xlLlxuXHQgKi9cblx0ZGVidWdNZXNzYWdlOiBmdW5jdGlvbiAoIG1lc3NhZ2UgKSB7XG5cblx0XHRpZiAoIHRoaXMuZGVidWcgKSB7XG5cblx0XHRcdGNvbnNvbGUubG9nKCBtZXNzYWdlICk7XG5cblx0XHR9XG5cblx0fVxufTtcblxudmFyIE5VTExfQ0hVTksgPSAweDAwMDA7XG52YXIgTTNETUFHSUMgPSAweDRENEQ7XG52YXIgU01BR0lDID0gMHgyRDJEO1xudmFyIExNQUdJQyA9IDB4MkQzRDtcbnZhciBNTElCTUFHSUMgPSAweDNEQUE7XG52YXIgTUFUTUFHSUMgPSAweDNERkY7XG52YXIgQ01BR0lDID0gMHhDMjNEO1xudmFyIE0zRF9WRVJTSU9OID0gMHgwMDAyO1xudmFyIE0zRF9LRlZFUlNJT04gPSAweDAwMDU7XG52YXIgQ09MT1JfRiA9IDB4MDAxMDtcbnZhciBDT0xPUl8yNCA9IDB4MDAxMTtcbnZhciBMSU5fQ09MT1JfMjQgPSAweDAwMTI7XG52YXIgTElOX0NPTE9SX0YgPSAweDAwMTM7XG52YXIgSU5UX1BFUkNFTlRBR0UgPSAweDAwMzA7XG52YXIgRkxPQVRfUEVSQ0VOVEFHRSA9IDB4MDAzMTtcbnZhciBNREFUQSA9IDB4M0QzRDtcbnZhciBNRVNIX1ZFUlNJT04gPSAweDNEM0U7XG52YXIgTUFTVEVSX1NDQUxFID0gMHgwMTAwO1xudmFyIExPX1NIQURPV19CSUFTID0gMHgxNDAwO1xudmFyIEhJX1NIQURPV19CSUFTID0gMHgxNDEwO1xudmFyIFNIQURPV19NQVBfU0laRSA9IDB4MTQyMDtcbnZhciBTSEFET1dfU0FNUExFUyA9IDB4MTQzMDtcbnZhciBTSEFET1dfUkFOR0UgPSAweDE0NDA7XG52YXIgU0hBRE9XX0ZJTFRFUiA9IDB4MTQ1MDtcbnZhciBSQVlfQklBUyA9IDB4MTQ2MDtcbnZhciBPX0NPTlNUUyA9IDB4MTUwMDtcbnZhciBBTUJJRU5UX0xJR0hUID0gMHgyMTAwO1xudmFyIEJJVF9NQVAgPSAweDExMDA7XG52YXIgU09MSURfQkdORCA9IDB4MTIwMDtcbnZhciBWX0dSQURJRU5UID0gMHgxMzAwO1xudmFyIFVTRV9CSVRfTUFQID0gMHgxMTAxO1xudmFyIFVTRV9TT0xJRF9CR05EID0gMHgxMjAxO1xudmFyIFVTRV9WX0dSQURJRU5UID0gMHgxMzAxO1xudmFyIEZPRyA9IDB4MjIwMDtcbnZhciBGT0dfQkdORCA9IDB4MjIxMDtcbnZhciBMQVlFUl9GT0cgPSAweDIzMDI7XG52YXIgRElTVEFOQ0VfQ1VFID0gMHgyMzAwO1xudmFyIERDVUVfQkdORCA9IDB4MjMxMDtcbnZhciBVU0VfRk9HID0gMHgyMjAxO1xudmFyIFVTRV9MQVlFUl9GT0cgPSAweDIzMDM7XG52YXIgVVNFX0RJU1RBTkNFX0NVRSA9IDB4MjMwMTtcbnZhciBNQVRfRU5UUlkgPSAweEFGRkY7XG52YXIgTUFUX05BTUUgPSAweEEwMDA7XG52YXIgTUFUX0FNQklFTlQgPSAweEEwMTA7XG52YXIgTUFUX0RJRkZVU0UgPSAweEEwMjA7XG52YXIgTUFUX1NQRUNVTEFSID0gMHhBMDMwO1xudmFyIE1BVF9TSElOSU5FU1MgPSAweEEwNDA7XG52YXIgTUFUX1NISU4yUENUID0gMHhBMDQxO1xudmFyIE1BVF9UUkFOU1BBUkVOQ1kgPSAweEEwNTA7XG52YXIgTUFUX1hQRkFMTCA9IDB4QTA1MjtcbnZhciBNQVRfVVNFX1hQRkFMTCA9IDB4QTI0MDtcbnZhciBNQVRfUkVGQkxVUiA9IDB4QTA1MztcbnZhciBNQVRfU0hBRElORyA9IDB4QTEwMDtcbnZhciBNQVRfVVNFX1JFRkJMVVIgPSAweEEyNTA7XG52YXIgTUFUX1NFTEZfSUxMVU0gPSAweEEwODQ7XG52YXIgTUFUX1RXT19TSURFID0gMHhBMDgxO1xudmFyIE1BVF9ERUNBTCA9IDB4QTA4MjtcbnZhciBNQVRfQURESVRJVkUgPSAweEEwODM7XG52YXIgTUFUX1dJUkUgPSAweEEwODU7XG52YXIgTUFUX0ZBQ0VNQVAgPSAweEEwODg7XG52YXIgTUFUX1RSQU5TRkFMTE9GRl9JTiA9IDB4QTA4QTtcbnZhciBNQVRfUEhPTkdTT0ZUID0gMHhBMDhDO1xudmFyIE1BVF9XSVJFQUJTID0gMHhBMDhFO1xudmFyIE1BVF9XSVJFX1NJWkUgPSAweEEwODc7XG52YXIgTUFUX1RFWE1BUCA9IDB4QTIwMDtcbnZhciBNQVRfU1hQX1RFWFRfREFUQSA9IDB4QTMyMDtcbnZhciBNQVRfVEVYTUFTSyA9IDB4QTMzRTtcbnZhciBNQVRfU1hQX1RFWFRNQVNLX0RBVEEgPSAweEEzMkE7XG52YXIgTUFUX1RFWDJNQVAgPSAweEEzM0E7XG52YXIgTUFUX1NYUF9URVhUMl9EQVRBID0gMHhBMzIxO1xudmFyIE1BVF9URVgyTUFTSyA9IDB4QTM0MDtcbnZhciBNQVRfU1hQX1RFWFQyTUFTS19EQVRBID0gMHhBMzJDO1xudmFyIE1BVF9PUEFDTUFQID0gMHhBMjEwO1xudmFyIE1BVF9TWFBfT1BBQ19EQVRBID0gMHhBMzIyO1xudmFyIE1BVF9PUEFDTUFTSyA9IDB4QTM0MjtcbnZhciBNQVRfU1hQX09QQUNNQVNLX0RBVEEgPSAweEEzMkU7XG52YXIgTUFUX0JVTVBNQVAgPSAweEEyMzA7XG52YXIgTUFUX1NYUF9CVU1QX0RBVEEgPSAweEEzMjQ7XG52YXIgTUFUX0JVTVBNQVNLID0gMHhBMzQ0O1xudmFyIE1BVF9TWFBfQlVNUE1BU0tfREFUQSA9IDB4QTMzMDtcbnZhciBNQVRfU1BFQ01BUCA9IDB4QTIwNDtcbnZhciBNQVRfU1hQX1NQRUNfREFUQSA9IDB4QTMyNTtcbnZhciBNQVRfU1BFQ01BU0sgPSAweEEzNDg7XG52YXIgTUFUX1NYUF9TUEVDTUFTS19EQVRBID0gMHhBMzMyO1xudmFyIE1BVF9TSElOTUFQID0gMHhBMzNDO1xudmFyIE1BVF9TWFBfU0hJTl9EQVRBID0gMHhBMzI2O1xudmFyIE1BVF9TSElOTUFTSyA9IDB4QTM0NjtcbnZhciBNQVRfU1hQX1NISU5NQVNLX0RBVEEgPSAweEEzMzQ7XG52YXIgTUFUX1NFTEZJTUFQID0gMHhBMzNEO1xudmFyIE1BVF9TWFBfU0VMRklfREFUQSA9IDB4QTMyODtcbnZhciBNQVRfU0VMRklNQVNLID0gMHhBMzRBO1xudmFyIE1BVF9TWFBfU0VMRklNQVNLX0RBVEEgPSAweEEzMzY7XG52YXIgTUFUX1JFRkxNQVAgPSAweEEyMjA7XG52YXIgTUFUX1JFRkxNQVNLID0gMHhBMzRDO1xudmFyIE1BVF9TWFBfUkVGTE1BU0tfREFUQSA9IDB4QTMzODtcbnZhciBNQVRfQUNVQklDID0gMHhBMzEwO1xudmFyIE1BVF9NQVBOQU1FID0gMHhBMzAwO1xudmFyIE1BVF9NQVBfVElMSU5HID0gMHhBMzUxO1xudmFyIE1BVF9NQVBfVEVYQkxVUiA9IDB4QTM1MztcbnZhciBNQVRfTUFQX1VTQ0FMRSA9IDB4QTM1NDtcbnZhciBNQVRfTUFQX1ZTQ0FMRSA9IDB4QTM1NjtcbnZhciBNQVRfTUFQX1VPRkZTRVQgPSAweEEzNTg7XG52YXIgTUFUX01BUF9WT0ZGU0VUID0gMHhBMzVBO1xudmFyIE1BVF9NQVBfQU5HID0gMHhBMzVDO1xudmFyIE1BVF9NQVBfQ09MMSA9IDB4QTM2MDtcbnZhciBNQVRfTUFQX0NPTDIgPSAweEEzNjI7XG52YXIgTUFUX01BUF9SQ09MID0gMHhBMzY0O1xudmFyIE1BVF9NQVBfR0NPTCA9IDB4QTM2NjtcbnZhciBNQVRfTUFQX0JDT0wgPSAweEEzNjg7XG52YXIgTkFNRURfT0JKRUNUID0gMHg0MDAwO1xudmFyIE5fRElSRUNUX0xJR0hUID0gMHg0NjAwO1xudmFyIERMX09GRiA9IDB4NDYyMDtcbnZhciBETF9PVVRFUl9SQU5HRSA9IDB4NDY1QTtcbnZhciBETF9JTk5FUl9SQU5HRSA9IDB4NDY1OTtcbnZhciBETF9NVUxUSVBMSUVSID0gMHg0NjVCO1xudmFyIERMX0VYQ0xVREUgPSAweDQ2NTQ7XG52YXIgRExfQVRURU5VQVRFID0gMHg0NjI1O1xudmFyIERMX1NQT1RMSUdIVCA9IDB4NDYxMDtcbnZhciBETF9TUE9UX1JPTEwgPSAweDQ2NTY7XG52YXIgRExfU0hBRE9XRUQgPSAweDQ2MzA7XG52YXIgRExfTE9DQUxfU0hBRE9XMiA9IDB4NDY0MTtcbnZhciBETF9TRUVfQ09ORSA9IDB4NDY1MDtcbnZhciBETF9TUE9UX1JFQ1RBTkdVTEFSID0gMHg0NjUxO1xudmFyIERMX1NQT1RfQVNQRUNUID0gMHg0NjU3O1xudmFyIERMX1NQT1RfUFJPSkVDVE9SID0gMHg0NjUzO1xudmFyIERMX1NQT1RfT1ZFUlNIT09UID0gMHg0NjUyO1xudmFyIERMX1JBWV9CSUFTID0gMHg0NjU4O1xudmFyIERMX1JBWVNIQUQgPSAweDQ2Mjc7XG52YXIgTl9DQU1FUkEgPSAweDQ3MDA7XG52YXIgQ0FNX1NFRV9DT05FID0gMHg0NzEwO1xudmFyIENBTV9SQU5HRVMgPSAweDQ3MjA7XG52YXIgT0JKX0hJRERFTiA9IDB4NDAxMDtcbnZhciBPQkpfVklTX0xPRlRFUiA9IDB4NDAxMTtcbnZhciBPQkpfRE9FU05UX0NBU1QgPSAweDQwMTI7XG52YXIgT0JKX0RPTlRfUkVDVlNIQURPVyA9IDB4NDAxNztcbnZhciBPQkpfTUFUVEUgPSAweDQwMTM7XG52YXIgT0JKX0ZBU1QgPSAweDQwMTQ7XG52YXIgT0JKX1BST0NFRFVSQUwgPSAweDQwMTU7XG52YXIgT0JKX0ZST1pFTiA9IDB4NDAxNjtcbnZhciBOX1RSSV9PQkpFQ1QgPSAweDQxMDA7XG52YXIgUE9JTlRfQVJSQVkgPSAweDQxMTA7XG52YXIgUE9JTlRfRkxBR19BUlJBWSA9IDB4NDExMTtcbnZhciBGQUNFX0FSUkFZID0gMHg0MTIwO1xudmFyIE1TSF9NQVRfR1JPVVAgPSAweDQxMzA7XG52YXIgU01PT1RIX0dST1VQID0gMHg0MTUwO1xudmFyIE1TSF9CT1hNQVAgPSAweDQxOTA7XG52YXIgVEVYX1ZFUlRTID0gMHg0MTQwO1xudmFyIE1FU0hfTUFUUklYID0gMHg0MTYwO1xudmFyIE1FU0hfQ09MT1IgPSAweDQxNjU7XG52YXIgTUVTSF9URVhUVVJFX0lORk8gPSAweDQxNzA7XG52YXIgS0ZEQVRBID0gMHhCMDAwO1xudmFyIEtGSERSID0gMHhCMDBBO1xudmFyIEtGU0VHID0gMHhCMDA4O1xudmFyIEtGQ1VSVElNRSA9IDB4QjAwOTtcbnZhciBBTUJJRU5UX05PREVfVEFHID0gMHhCMDAxO1xudmFyIE9CSkVDVF9OT0RFX1RBRyA9IDB4QjAwMjtcbnZhciBDQU1FUkFfTk9ERV9UQUcgPSAweEIwMDM7XG52YXIgVEFSR0VUX05PREVfVEFHID0gMHhCMDA0O1xudmFyIExJR0hUX05PREVfVEFHID0gMHhCMDA1O1xudmFyIExfVEFSR0VUX05PREVfVEFHID0gMHhCMDA2O1xudmFyIFNQT1RMSUdIVF9OT0RFX1RBRyA9IDB4QjAwNztcbnZhciBOT0RFX0lEID0gMHhCMDMwO1xudmFyIE5PREVfSERSID0gMHhCMDEwO1xudmFyIFBJVk9UID0gMHhCMDEzO1xudmFyIElOU1RBTkNFX05BTUUgPSAweEIwMTE7XG52YXIgTU9SUEhfU01PT1RIID0gMHhCMDE1O1xudmFyIEJPVU5EQk9YID0gMHhCMDE0O1xudmFyIFBPU19UUkFDS19UQUcgPSAweEIwMjA7XG52YXIgQ09MX1RSQUNLX1RBRyA9IDB4QjAyNTtcbnZhciBST1RfVFJBQ0tfVEFHID0gMHhCMDIxO1xudmFyIFNDTF9UUkFDS19UQUcgPSAweEIwMjI7XG52YXIgTU9SUEhfVFJBQ0tfVEFHID0gMHhCMDI2O1xudmFyIEZPVl9UUkFDS19UQUcgPSAweEIwMjM7XG52YXIgUk9MTF9UUkFDS19UQUcgPSAweEIwMjQ7XG52YXIgSE9UX1RSQUNLX1RBRyA9IDB4QjAyNztcbnZhciBGQUxMX1RSQUNLX1RBRyA9IDB4QjAyODtcbnZhciBISURFX1RSQUNLX1RBRyA9IDB4QjAyOTtcbnZhciBQT0xZXzJEID0gMHg1MDAwO1xudmFyIFNIQVBFX09LID0gMHg1MDEwO1xudmFyIFNIQVBFX05PVF9PSyA9IDB4NTAxMTtcbnZhciBTSEFQRV9IT09LID0gMHg1MDIwO1xudmFyIFBBVEhfM0QgPSAweDYwMDA7XG52YXIgUEFUSF9NQVRSSVggPSAweDYwMDU7XG52YXIgU0hBUEVfMkQgPSAweDYwMTA7XG52YXIgTV9TQ0FMRSA9IDB4NjAyMDtcbnZhciBNX1RXSVNUID0gMHg2MDMwO1xudmFyIE1fVEVFVEVSID0gMHg2MDQwO1xudmFyIE1fRklUID0gMHg2MDUwO1xudmFyIE1fQkVWRUwgPSAweDYwNjA7XG52YXIgWFpfQ1VSVkUgPSAweDYwNzA7XG52YXIgWVpfQ1VSVkUgPSAweDYwODA7XG52YXIgSU5URVJQQ1QgPSAweDYwOTA7XG52YXIgREVGT1JNX0xJTUlUID0gMHg2MEEwO1xudmFyIFVTRV9DT05UT1VSID0gMHg2MTAwO1xudmFyIFVTRV9UV0VFTiA9IDB4NjExMDtcbnZhciBVU0VfU0NBTEUgPSAweDYxMjA7XG52YXIgVVNFX1RXSVNUID0gMHg2MTMwO1xudmFyIFVTRV9URUVURVIgPSAweDYxNDA7XG52YXIgVVNFX0ZJVCA9IDB4NjE1MDtcbnZhciBVU0VfQkVWRUwgPSAweDYxNjA7XG52YXIgREVGQVVMVF9WSUVXID0gMHgzMDAwO1xudmFyIFZJRVdfVE9QID0gMHgzMDEwO1xudmFyIFZJRVdfQk9UVE9NID0gMHgzMDIwO1xudmFyIFZJRVdfTEVGVCA9IDB4MzAzMDtcbnZhciBWSUVXX1JJR0hUID0gMHgzMDQwO1xudmFyIFZJRVdfRlJPTlQgPSAweDMwNTA7XG52YXIgVklFV19CQUNLID0gMHgzMDYwO1xudmFyIFZJRVdfVVNFUiA9IDB4MzA3MDtcbnZhciBWSUVXX0NBTUVSQSA9IDB4MzA4MDtcbnZhciBWSUVXX1dJTkRPVyA9IDB4MzA5MDtcbnZhciBWSUVXUE9SVF9MQVlPVVRfT0xEID0gMHg3MDAwO1xudmFyIFZJRVdQT1JUX0RBVEFfT0xEID0gMHg3MDEwO1xudmFyIFZJRVdQT1JUX0xBWU9VVCA9IDB4NzAwMTtcbnZhciBWSUVXUE9SVF9EQVRBID0gMHg3MDExO1xudmFyIFZJRVdQT1JUX0RBVEFfMyA9IDB4NzAxMjtcbnZhciBWSUVXUE9SVF9TSVpFID0gMHg3MDIwO1xudmFyIE5FVFdPUktfVklFVyA9IDB4NzAzMDsiLCIvKiogQGxpY2Vuc2UgemxpYi5qcyAyMDEyIC0gaW1heWEgWyBodHRwczovL2dpdGh1Yi5jb20vaW1heWEvemxpYi5qcyBdIFRoZSBNSVQgTGljZW5zZSAqLyhmdW5jdGlvbigpIHsndXNlIHN0cmljdCc7dmFyIGw9dm9pZCAwLGFhPXRoaXM7ZnVuY3Rpb24gcihjLGQpe3ZhciBhPWMuc3BsaXQoXCIuXCIpLGI9YWE7IShhWzBdaW4gYikmJmIuZXhlY1NjcmlwdCYmYi5leGVjU2NyaXB0KFwidmFyIFwiK2FbMF0pO2Zvcih2YXIgZTthLmxlbmd0aCYmKGU9YS5zaGlmdCgpKTspIWEubGVuZ3RoJiZkIT09bD9iW2VdPWQ6Yj1iW2VdP2JbZV06YltlXT17fX07dmFyIHQ9XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBVaW50OEFycmF5JiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIFVpbnQxNkFycmF5JiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIFVpbnQzMkFycmF5JiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIERhdGFWaWV3O2Z1bmN0aW9uIHYoYyl7dmFyIGQ9Yy5sZW5ndGgsYT0wLGI9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGUsZixnLGgsayxtLG4scCxzLHg7Zm9yKHA9MDtwPGQ7KytwKWNbcF0+YSYmKGE9Y1twXSksY1twXTxiJiYoYj1jW3BdKTtlPTE8PGE7Zj1uZXcgKHQ/VWludDMyQXJyYXk6QXJyYXkpKGUpO2c9MTtoPTA7Zm9yKGs9MjtnPD1hOyl7Zm9yKHA9MDtwPGQ7KytwKWlmKGNbcF09PT1nKXttPTA7bj1oO2ZvcihzPTA7czxnOysrcyltPW08PDF8biYxLG4+Pj0xO3g9Zzw8MTZ8cDtmb3Iocz1tO3M8ZTtzKz1rKWZbc109eDsrK2h9KytnO2g8PD0xO2s8PD0xfXJldHVybltmLGEsYl19O2Z1bmN0aW9uIHcoYyxkKXt0aGlzLmc9W107dGhpcy5oPTMyNzY4O3RoaXMuZD10aGlzLmY9dGhpcy5hPXRoaXMubD0wO3RoaXMuaW5wdXQ9dD9uZXcgVWludDhBcnJheShjKTpjO3RoaXMubT0hMTt0aGlzLmk9eTt0aGlzLnI9ITE7aWYoZHx8IShkPXt9KSlkLmluZGV4JiYodGhpcy5hPWQuaW5kZXgpLGQuYnVmZmVyU2l6ZSYmKHRoaXMuaD1kLmJ1ZmZlclNpemUpLGQuYnVmZmVyVHlwZSYmKHRoaXMuaT1kLmJ1ZmZlclR5cGUpLGQucmVzaXplJiYodGhpcy5yPWQucmVzaXplKTtzd2l0Y2godGhpcy5pKXtjYXNlIEE6dGhpcy5iPTMyNzY4O3RoaXMuYz1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkoMzI3NjgrdGhpcy5oKzI1OCk7YnJlYWs7Y2FzZSB5OnRoaXMuYj0wO3RoaXMuYz1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkodGhpcy5oKTt0aGlzLmU9dGhpcy56O3RoaXMubj10aGlzLnY7dGhpcy5qPXRoaXMudzticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW52YWxpZCBpbmZsYXRlIG1vZGVcIik7XG59fXZhciBBPTAseT0xLEI9e3Q6QSxzOnl9O1xudy5wcm90b3R5cGUuaz1mdW5jdGlvbigpe2Zvcig7IXRoaXMubTspe3ZhciBjPUModGhpcywzKTtjJjEmJih0aGlzLm09ITApO2M+Pj49MTtzd2l0Y2goYyl7Y2FzZSAwOnZhciBkPXRoaXMuaW5wdXQsYT10aGlzLmEsYj10aGlzLmMsZT10aGlzLmIsZj1kLmxlbmd0aCxnPWwsaD1sLGs9Yi5sZW5ndGgsbT1sO3RoaXMuZD10aGlzLmY9MDtpZihhKzE+PWYpdGhyb3cgRXJyb3IoXCJpbnZhbGlkIHVuY29tcHJlc3NlZCBibG9jayBoZWFkZXI6IExFTlwiKTtnPWRbYSsrXXxkW2ErK108PDg7aWYoYSsxPj1mKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBOTEVOXCIpO2g9ZFthKytdfGRbYSsrXTw8ODtpZihnPT09fmgpdGhyb3cgRXJyb3IoXCJpbnZhbGlkIHVuY29tcHJlc3NlZCBibG9jayBoZWFkZXI6IGxlbmd0aCB2ZXJpZnlcIik7aWYoYStnPmQubGVuZ3RoKXRocm93IEVycm9yKFwiaW5wdXQgYnVmZmVyIGlzIGJyb2tlblwiKTtzd2l0Y2godGhpcy5pKXtjYXNlIEE6Zm9yKDtlK1xuZz5iLmxlbmd0aDspe209ay1lO2ctPW07aWYodCliLnNldChkLnN1YmFycmF5KGEsYSttKSxlKSxlKz1tLGErPW07ZWxzZSBmb3IoO20tLTspYltlKytdPWRbYSsrXTt0aGlzLmI9ZTtiPXRoaXMuZSgpO2U9dGhpcy5ifWJyZWFrO2Nhc2UgeTpmb3IoO2UrZz5iLmxlbmd0aDspYj10aGlzLmUoe3A6Mn0pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbnZhbGlkIGluZmxhdGUgbW9kZVwiKTt9aWYodCliLnNldChkLnN1YmFycmF5KGEsYStnKSxlKSxlKz1nLGErPWc7ZWxzZSBmb3IoO2ctLTspYltlKytdPWRbYSsrXTt0aGlzLmE9YTt0aGlzLmI9ZTt0aGlzLmM9YjticmVhaztjYXNlIDE6dGhpcy5qKGJhLGNhKTticmVhaztjYXNlIDI6Zm9yKHZhciBuPUModGhpcyw1KSsyNTcscD1DKHRoaXMsNSkrMSxzPUModGhpcyw0KSs0LHg9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKEQubGVuZ3RoKSxTPWwsVD1sLFU9bCx1PWwsTT1sLEY9bCx6PWwscT1sLFY9bCxxPTA7cTxzOysrcSl4W0RbcV1dPVxuQyh0aGlzLDMpO2lmKCF0KXtxPXM7Zm9yKHM9eC5sZW5ndGg7cTxzOysrcSl4W0RbcV1dPTB9Uz12KHgpO3U9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKG4rcCk7cT0wO2ZvcihWPW4rcDtxPFY7KXN3aXRjaChNPUUodGhpcyxTKSxNKXtjYXNlIDE2OmZvcih6PTMrQyh0aGlzLDIpO3otLTspdVtxKytdPUY7YnJlYWs7Y2FzZSAxNzpmb3Ioej0zK0ModGhpcywzKTt6LS07KXVbcSsrXT0wO0Y9MDticmVhaztjYXNlIDE4OmZvcih6PTExK0ModGhpcyw3KTt6LS07KXVbcSsrXT0wO0Y9MDticmVhaztkZWZhdWx0OkY9dVtxKytdPU19VD10P3YodS5zdWJhcnJheSgwLG4pKTp2KHUuc2xpY2UoMCxuKSk7VT10P3YodS5zdWJhcnJheShuKSk6dih1LnNsaWNlKG4pKTt0aGlzLmooVCxVKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwidW5rbm93biBCVFlQRTogXCIrYyk7fX1yZXR1cm4gdGhpcy5uKCl9O1xudmFyIEc9WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdLEQ9dD9uZXcgVWludDE2QXJyYXkoRyk6RyxIPVszLDQsNSw2LDcsOCw5LDEwLDExLDEzLDE1LDE3LDE5LDIzLDI3LDMxLDM1LDQzLDUxLDU5LDY3LDgzLDk5LDExNSwxMzEsMTYzLDE5NSwyMjcsMjU4LDI1OCwyNThdLEk9dD9uZXcgVWludDE2QXJyYXkoSCk6SCxKPVswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDAsMCwwXSxLPXQ/bmV3IFVpbnQ4QXJyYXkoSik6SixMPVsxLDIsMyw0LDUsNyw5LDEzLDE3LDI1LDMzLDQ5LDY1LDk3LDEyOSwxOTMsMjU3LDM4NSw1MTMsNzY5LDEwMjUsMTUzNywyMDQ5LDMwNzMsNDA5Nyw2MTQ1LDgxOTMsMTIyODksMTYzODUsMjQ1NzddLGRhPXQ/bmV3IFVpbnQxNkFycmF5KEwpOkwsZWE9WzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsXG4xMywxM10sTj10P25ldyBVaW50OEFycmF5KGVhKTplYSxPPW5ldyAodD9VaW50OEFycmF5OkFycmF5KSgyODgpLFAsZmE7UD0wO2ZvcihmYT1PLmxlbmd0aDtQPGZhOysrUClPW1BdPTE0Mz49UD84OjI1NT49UD85OjI3OT49UD83Ojg7dmFyIGJhPXYoTyksUT1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkoMzApLFIsZ2E7Uj0wO2ZvcihnYT1RLmxlbmd0aDtSPGdhOysrUilRW1JdPTU7dmFyIGNhPXYoUSk7ZnVuY3Rpb24gQyhjLGQpe2Zvcih2YXIgYT1jLmYsYj1jLmQsZT1jLmlucHV0LGY9Yy5hLGc9ZS5sZW5ndGgsaDtiPGQ7KXtpZihmPj1nKXRocm93IEVycm9yKFwiaW5wdXQgYnVmZmVyIGlzIGJyb2tlblwiKTthfD1lW2YrK108PGI7Yis9OH1oPWEmKDE8PGQpLTE7Yy5mPWE+Pj5kO2MuZD1iLWQ7Yy5hPWY7cmV0dXJuIGh9XG5mdW5jdGlvbiBFKGMsZCl7Zm9yKHZhciBhPWMuZixiPWMuZCxlPWMuaW5wdXQsZj1jLmEsZz1lLmxlbmd0aCxoPWRbMF0saz1kWzFdLG0sbjtiPGsmJiEoZj49Zyk7KWF8PWVbZisrXTw8YixiKz04O209aFthJigxPDxrKS0xXTtuPW0+Pj4xNjtpZihuPmIpdGhyb3cgRXJyb3IoXCJpbnZhbGlkIGNvZGUgbGVuZ3RoOiBcIituKTtjLmY9YT4+bjtjLmQ9Yi1uO2MuYT1mO3JldHVybiBtJjY1NTM1fVxudy5wcm90b3R5cGUuaj1mdW5jdGlvbihjLGQpe3ZhciBhPXRoaXMuYyxiPXRoaXMuYjt0aGlzLm89Yztmb3IodmFyIGU9YS5sZW5ndGgtMjU4LGYsZyxoLGs7MjU2IT09KGY9RSh0aGlzLGMpKTspaWYoMjU2PmYpYj49ZSYmKHRoaXMuYj1iLGE9dGhpcy5lKCksYj10aGlzLmIpLGFbYisrXT1mO2Vsc2V7Zz1mLTI1NztrPUlbZ107MDxLW2ddJiYoays9Qyh0aGlzLEtbZ10pKTtmPUUodGhpcyxkKTtoPWRhW2ZdOzA8TltmXSYmKGgrPUModGhpcyxOW2ZdKSk7Yj49ZSYmKHRoaXMuYj1iLGE9dGhpcy5lKCksYj10aGlzLmIpO2Zvcig7ay0tOylhW2JdPWFbYisrLWhdfWZvcig7ODw9dGhpcy5kOyl0aGlzLmQtPTgsdGhpcy5hLS07dGhpcy5iPWJ9O1xudy5wcm90b3R5cGUudz1mdW5jdGlvbihjLGQpe3ZhciBhPXRoaXMuYyxiPXRoaXMuYjt0aGlzLm89Yztmb3IodmFyIGU9YS5sZW5ndGgsZixnLGgsazsyNTYhPT0oZj1FKHRoaXMsYykpOylpZigyNTY+ZiliPj1lJiYoYT10aGlzLmUoKSxlPWEubGVuZ3RoKSxhW2IrK109ZjtlbHNle2c9Zi0yNTc7az1JW2ddOzA8S1tnXSYmKGsrPUModGhpcyxLW2ddKSk7Zj1FKHRoaXMsZCk7aD1kYVtmXTswPE5bZl0mJihoKz1DKHRoaXMsTltmXSkpO2Iraz5lJiYoYT10aGlzLmUoKSxlPWEubGVuZ3RoKTtmb3IoO2stLTspYVtiXT1hW2IrKy1oXX1mb3IoOzg8PXRoaXMuZDspdGhpcy5kLT04LHRoaXMuYS0tO3RoaXMuYj1ifTtcbncucHJvdG90eXBlLmU9ZnVuY3Rpb24oKXt2YXIgYz1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkodGhpcy5iLTMyNzY4KSxkPXRoaXMuYi0zMjc2OCxhLGIsZT10aGlzLmM7aWYodCljLnNldChlLnN1YmFycmF5KDMyNzY4LGMubGVuZ3RoKSk7ZWxzZXthPTA7Zm9yKGI9Yy5sZW5ndGg7YTxiOysrYSljW2FdPWVbYSszMjc2OF19dGhpcy5nLnB1c2goYyk7dGhpcy5sKz1jLmxlbmd0aDtpZih0KWUuc2V0KGUuc3ViYXJyYXkoZCxkKzMyNzY4KSk7ZWxzZSBmb3IoYT0wOzMyNzY4PmE7KythKWVbYV09ZVtkK2FdO3RoaXMuYj0zMjc2ODtyZXR1cm4gZX07XG53LnByb3RvdHlwZS56PWZ1bmN0aW9uKGMpe3ZhciBkLGE9dGhpcy5pbnB1dC5sZW5ndGgvdGhpcy5hKzF8MCxiLGUsZixnPXRoaXMuaW5wdXQsaD10aGlzLmM7YyYmKFwibnVtYmVyXCI9PT10eXBlb2YgYy5wJiYoYT1jLnApLFwibnVtYmVyXCI9PT10eXBlb2YgYy51JiYoYSs9Yy51KSk7Mj5hPyhiPShnLmxlbmd0aC10aGlzLmEpL3RoaXMub1syXSxmPTI1OCooYi8yKXwwLGU9ZjxoLmxlbmd0aD9oLmxlbmd0aCtmOmgubGVuZ3RoPDwxKTplPWgubGVuZ3RoKmE7dD8oZD1uZXcgVWludDhBcnJheShlKSxkLnNldChoKSk6ZD1oO3JldHVybiB0aGlzLmM9ZH07XG53LnByb3RvdHlwZS5uPWZ1bmN0aW9uKCl7dmFyIGM9MCxkPXRoaXMuYyxhPXRoaXMuZyxiLGU9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMubCsodGhpcy5iLTMyNzY4KSksZixnLGgsaztpZigwPT09YS5sZW5ndGgpcmV0dXJuIHQ/dGhpcy5jLnN1YmFycmF5KDMyNzY4LHRoaXMuYik6dGhpcy5jLnNsaWNlKDMyNzY4LHRoaXMuYik7Zj0wO2ZvcihnPWEubGVuZ3RoO2Y8ZzsrK2Ype2I9YVtmXTtoPTA7Zm9yKGs9Yi5sZW5ndGg7aDxrOysraCllW2MrK109YltoXX1mPTMyNzY4O2ZvcihnPXRoaXMuYjtmPGc7KytmKWVbYysrXT1kW2ZdO3RoaXMuZz1bXTtyZXR1cm4gdGhpcy5idWZmZXI9ZX07XG53LnByb3RvdHlwZS52PWZ1bmN0aW9uKCl7dmFyIGMsZD10aGlzLmI7dD90aGlzLnI/KGM9bmV3IFVpbnQ4QXJyYXkoZCksYy5zZXQodGhpcy5jLnN1YmFycmF5KDAsZCkpKTpjPXRoaXMuYy5zdWJhcnJheSgwLGQpOih0aGlzLmMubGVuZ3RoPmQmJih0aGlzLmMubGVuZ3RoPWQpLGM9dGhpcy5jKTtyZXR1cm4gdGhpcy5idWZmZXI9Y307ZnVuY3Rpb24gVyhjLGQpe3ZhciBhLGI7dGhpcy5pbnB1dD1jO3RoaXMuYT0wO2lmKGR8fCEoZD17fSkpZC5pbmRleCYmKHRoaXMuYT1kLmluZGV4KSxkLnZlcmlmeSYmKHRoaXMuQT1kLnZlcmlmeSk7YT1jW3RoaXMuYSsrXTtiPWNbdGhpcy5hKytdO3N3aXRjaChhJjE1KXtjYXNlIGhhOnRoaXMubWV0aG9kPWhhO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJ1bnN1cHBvcnRlZCBjb21wcmVzc2lvbiBtZXRob2RcIik7fWlmKDAhPT0oKGE8PDgpK2IpJTMxKXRocm93IEVycm9yKFwiaW52YWxpZCBmY2hlY2sgZmxhZzpcIisoKGE8PDgpK2IpJTMxKTtpZihiJjMyKXRocm93IEVycm9yKFwiZmRpY3QgZmxhZyBpcyBub3Qgc3VwcG9ydGVkXCIpO3RoaXMucT1uZXcgdyhjLHtpbmRleDp0aGlzLmEsYnVmZmVyU2l6ZTpkLmJ1ZmZlclNpemUsYnVmZmVyVHlwZTpkLmJ1ZmZlclR5cGUscmVzaXplOmQucmVzaXplfSl9XG5XLnByb3RvdHlwZS5rPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5pbnB1dCxkLGE7ZD10aGlzLnEuaygpO3RoaXMuYT10aGlzLnEuYTtpZih0aGlzLkEpe2E9KGNbdGhpcy5hKytdPDwyNHxjW3RoaXMuYSsrXTw8MTZ8Y1t0aGlzLmErK108PDh8Y1t0aGlzLmErK10pPj4+MDt2YXIgYj1kO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYil7dmFyIGU9Yi5zcGxpdChcIlwiKSxmLGc7Zj0wO2ZvcihnPWUubGVuZ3RoO2Y8ZztmKyspZVtmXT0oZVtmXS5jaGFyQ29kZUF0KDApJjI1NSk+Pj4wO2I9ZX1mb3IodmFyIGg9MSxrPTAsbT1iLmxlbmd0aCxuLHA9MDswPG07KXtuPTEwMjQ8bT8xMDI0Om07bS09bjtkbyBoKz1iW3ArK10says9aDt3aGlsZSgtLW4pO2glPTY1NTIxO2slPTY1NTIxfWlmKGEhPT0oazw8MTZ8aCk+Pj4wKXRocm93IEVycm9yKFwiaW52YWxpZCBhZGxlci0zMiBjaGVja3N1bVwiKTt9cmV0dXJuIGR9O3ZhciBoYT04O3IoXCJabGliLkluZmxhdGVcIixXKTtyKFwiWmxpYi5JbmZsYXRlLnByb3RvdHlwZS5kZWNvbXByZXNzXCIsVy5wcm90b3R5cGUuayk7dmFyIFg9e0FEQVBUSVZFOkIucyxCTE9DSzpCLnR9LFksWiwkLGlhO2lmKE9iamVjdC5rZXlzKVk9T2JqZWN0LmtleXMoWCk7ZWxzZSBmb3IoWiBpbiBZPVtdLCQ9MCxYKVlbJCsrXT1aOyQ9MDtmb3IoaWE9WS5sZW5ndGg7JDxpYTsrKyQpWj1ZWyRdLHIoXCJabGliLkluZmxhdGUuQnVmZmVyVHlwZS5cIitaLFhbWl0pO30pLmNhbGwodGhpcyk7IiwiLy8gdGhyZWVqcy5vcmcvbGljZW5zZVxuKGZ1bmN0aW9uKGwsemEpe1wib2JqZWN0XCI9PT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBtb2R1bGU/emEoZXhwb3J0cyk6XCJmdW5jdGlvblwiPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiZXhwb3J0c1wiXSx6YSk6emEobC5USFJFRT17fSl9KSh0aGlzLGZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHphKCl7fWZ1bmN0aW9uIEQoYSxiKXt0aGlzLng9YXx8MDt0aGlzLnk9Ynx8MH1mdW5jdGlvbiBPKCl7dGhpcy5lbGVtZW50cz1bMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV07MDxhcmd1bWVudHMubGVuZ3RoJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogdGhlIGNvbnN0cnVjdG9yIG5vIGxvbmdlciByZWFkcyBhcmd1bWVudHMuIHVzZSAuc2V0KCkgaW5zdGVhZC5cIil9ZnVuY3Rpb24gaGEoYSxiLGMsZCl7dGhpcy5feD1hfHwwO3RoaXMuX3k9Ynx8MDt0aGlzLl96PWN8fDA7dGhpcy5fdz12b2lkIDAhPT1kP2Q6MX1mdW5jdGlvbiBwKGEsXG4gICAgYixjKXt0aGlzLng9YXx8MDt0aGlzLnk9Ynx8MDt0aGlzLno9Y3x8MH1mdW5jdGlvbiBtYSgpe3RoaXMuZWxlbWVudHM9WzEsMCwwLDAsMSwwLDAsMCwxXTswPGFyZ3VtZW50cy5sZW5ndGgmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXgzOiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLlwiKX1mdW5jdGlvbiBVKGEsYixjLGQsZSxmLGcsaCxrLG0pe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6QWYrK30pO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMuaW1hZ2U9dm9pZCAwIT09YT9hOlUuREVGQVVMVF9JTUFHRTt0aGlzLm1pcG1hcHM9W107dGhpcy5tYXBwaW5nPXZvaWQgMCE9PWI/YjpVLkRFRkFVTFRfTUFQUElORzt0aGlzLndyYXBTPXZvaWQgMCE9PWM/YzoxMDAxO3RoaXMud3JhcFQ9dm9pZCAwIT09ZD9kOjEwMDE7dGhpcy5tYWdGaWx0ZXI9dm9pZCAwIT09XG4gICAgZT9lOjEwMDY7dGhpcy5taW5GaWx0ZXI9dm9pZCAwIT09Zj9mOjEwMDg7dGhpcy5hbmlzb3Ryb3B5PXZvaWQgMCE9PWs/azoxO3RoaXMuZm9ybWF0PXZvaWQgMCE9PWc/ZzoxMDIzO3RoaXMudHlwZT12b2lkIDAhPT1oP2g6MTAwOTt0aGlzLm9mZnNldD1uZXcgRCgwLDApO3RoaXMucmVwZWF0PW5ldyBEKDEsMSk7dGhpcy5jZW50ZXI9bmV3IEQoMCwwKTt0aGlzLnJvdGF0aW9uPTA7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSEwO3RoaXMubWF0cml4PW5ldyBtYTt0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMDt0aGlzLnByZW11bHRpcGx5QWxwaGE9ITE7dGhpcy5mbGlwWT0hMDt0aGlzLnVucGFja0FsaWdubWVudD00O3RoaXMuZW5jb2Rpbmc9dm9pZCAwIT09bT9tOjNFMzt0aGlzLnZlcnNpb249MDt0aGlzLm9uVXBkYXRlPW51bGx9ZnVuY3Rpb24gYWEoYSxiLGMsZCl7dGhpcy54PWF8fDA7dGhpcy55PWJ8fDA7dGhpcy56PWN8fDA7dGhpcy53PXZvaWQgMCE9PWQ/ZDoxfWZ1bmN0aW9uIGtiKGEsXG4gICAgYixjKXt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTt0aGlzLndpZHRoPWE7dGhpcy5oZWlnaHQ9Yjt0aGlzLnNjaXNzb3I9bmV3IGFhKDAsMCxhLGIpO3RoaXMuc2Npc3NvclRlc3Q9ITE7dGhpcy52aWV3cG9ydD1uZXcgYWEoMCwwLGEsYik7Yz1jfHx7fTt2b2lkIDA9PT1jLm1pbkZpbHRlciYmKGMubWluRmlsdGVyPTEwMDYpO3RoaXMudGV4dHVyZT1uZXcgVSh2b2lkIDAsdm9pZCAwLGMud3JhcFMsYy53cmFwVCxjLm1hZ0ZpbHRlcixjLm1pbkZpbHRlcixjLmZvcm1hdCxjLnR5cGUsYy5hbmlzb3Ryb3B5LGMuZW5jb2RpbmcpO3RoaXMuZGVwdGhCdWZmZXI9dm9pZCAwIT09Yy5kZXB0aEJ1ZmZlcj9jLmRlcHRoQnVmZmVyOiEwO3RoaXMuc3RlbmNpbEJ1ZmZlcj12b2lkIDAhPT1jLnN0ZW5jaWxCdWZmZXI/Yy5zdGVuY2lsQnVmZmVyOiEwO3RoaXMuZGVwdGhUZXh0dXJlPXZvaWQgMCE9PWMuZGVwdGhUZXh0dXJlP2MuZGVwdGhUZXh0dXJlOm51bGx9ZnVuY3Rpb24gSmIoYSxiLGMpe2tiLmNhbGwodGhpcyxcbiAgICBhLGIsYyk7dGhpcy5hY3RpdmVNaXBNYXBMZXZlbD10aGlzLmFjdGl2ZUN1YmVGYWNlPTB9ZnVuY3Rpb24gbGIoYSxiLGMsZCxlLGYsZyxoLGssbSxxLG4pe1UuY2FsbCh0aGlzLG51bGwsZixnLGgsayxtLGQsZSxxLG4pO3RoaXMuaW1hZ2U9e2RhdGE6YSx3aWR0aDpiLGhlaWdodDpjfTt0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1rP2s6MTAwMzt0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1tP206MTAwMzt0aGlzLmZsaXBZPXRoaXMuZ2VuZXJhdGVNaXBtYXBzPSExO3RoaXMudW5wYWNrQWxpZ25tZW50PTF9ZnVuY3Rpb24gZGIoYSxiLGMsZCxlLGYsZyxoLGssbSl7YT12b2lkIDAhPT1hP2E6W107VS5jYWxsKHRoaXMsYSx2b2lkIDAhPT1iP2I6MzAxLGMsZCxlLGYsZyxoLGssbSk7dGhpcy5mbGlwWT0hMX1mdW5jdGlvbiBLYihhLGIsYyl7dmFyIGQ9YVswXTtpZigwPj1kfHwwPGQpcmV0dXJuIGE7dmFyIGU9YipjLGY9SWVbZV07dm9pZCAwPT09ZiYmKGY9bmV3IEZsb2F0MzJBcnJheShlKSxcbiAgICBJZVtlXT1mKTtpZigwIT09Yilmb3IoZC50b0FycmF5KGYsMCksZD0xLGU9MDtkIT09YjsrK2QpZSs9YyxhW2RdLnRvQXJyYXkoZixlKTtyZXR1cm4gZn1mdW5jdGlvbiBKZShhLGIpe3ZhciBjPUtlW2JdO3ZvaWQgMD09PWMmJihjPW5ldyBJbnQzMkFycmF5KGIpLEtlW2JdPWMpO2Zvcih2YXIgZD0wO2QhPT1iOysrZCljW2RdPWEuYWxsb2NUZXh0dXJlVW5pdCgpO3JldHVybiBjfWZ1bmN0aW9uIEJmKGEsYil7YS51bmlmb3JtMWYodGhpcy5hZGRyLGIpfWZ1bmN0aW9uIENmKGEsYil7YS51bmlmb3JtMWkodGhpcy5hZGRyLGIpfWZ1bmN0aW9uIERmKGEsYil7dm9pZCAwPT09Yi54P2EudW5pZm9ybTJmdih0aGlzLmFkZHIsYik6YS51bmlmb3JtMmYodGhpcy5hZGRyLGIueCxiLnkpfWZ1bmN0aW9uIEVmKGEsYil7dm9pZCAwIT09Yi54P2EudW5pZm9ybTNmKHRoaXMuYWRkcixiLngsYi55LGIueik6dm9pZCAwIT09Yi5yP2EudW5pZm9ybTNmKHRoaXMuYWRkcixiLnIsYi5nLGIuYik6YS51bmlmb3JtM2Z2KHRoaXMuYWRkcixcbiAgICBiKX1mdW5jdGlvbiBGZihhLGIpe3ZvaWQgMD09PWIueD9hLnVuaWZvcm00ZnYodGhpcy5hZGRyLGIpOmEudW5pZm9ybTRmKHRoaXMuYWRkcixiLngsYi55LGIueixiLncpfWZ1bmN0aW9uIEdmKGEsYil7YS51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkciwhMSxiLmVsZW1lbnRzfHxiKX1mdW5jdGlvbiBIZihhLGIpe3ZvaWQgMD09PWIuZWxlbWVudHM/YS51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkciwhMSxiKTooTGUuc2V0KGIuZWxlbWVudHMpLGEudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsITEsTGUpKX1mdW5jdGlvbiBJZihhLGIpe3ZvaWQgMD09PWIuZWxlbWVudHM/YS51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkciwhMSxiKTooTWUuc2V0KGIuZWxlbWVudHMpLGEudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsITEsTWUpKX1mdW5jdGlvbiBKZihhLGIsYyl7dmFyIGQ9Yy5hbGxvY1RleHR1cmVVbml0KCk7YS51bmlmb3JtMWkodGhpcy5hZGRyLGQpO2Muc2V0VGV4dHVyZTJEKGJ8fFxuICAgIE5lLGQpfWZ1bmN0aW9uIEtmKGEsYixjKXt2YXIgZD1jLmFsbG9jVGV4dHVyZVVuaXQoKTthLnVuaWZvcm0xaSh0aGlzLmFkZHIsZCk7Yy5zZXRUZXh0dXJlQ3ViZShifHxPZSxkKX1mdW5jdGlvbiBQZShhLGIpe2EudW5pZm9ybTJpdih0aGlzLmFkZHIsYil9ZnVuY3Rpb24gUWUoYSxiKXthLnVuaWZvcm0zaXYodGhpcy5hZGRyLGIpfWZ1bmN0aW9uIFJlKGEsYil7YS51bmlmb3JtNGl2KHRoaXMuYWRkcixiKX1mdW5jdGlvbiBMZihhKXtzd2l0Y2goYSl7Y2FzZSA1MTI2OnJldHVybiBCZjtjYXNlIDM1NjY0OnJldHVybiBEZjtjYXNlIDM1NjY1OnJldHVybiBFZjtjYXNlIDM1NjY2OnJldHVybiBGZjtjYXNlIDM1Njc0OnJldHVybiBHZjtjYXNlIDM1Njc1OnJldHVybiBIZjtjYXNlIDM1Njc2OnJldHVybiBJZjtjYXNlIDM1Njc4OmNhc2UgMzYxOTg6cmV0dXJuIEpmO2Nhc2UgMzU2ODA6cmV0dXJuIEtmO2Nhc2UgNTEyNDpjYXNlIDM1NjcwOnJldHVybiBDZjtjYXNlIDM1NjY3OmNhc2UgMzU2NzE6cmV0dXJuIFBlO1xuICAgIGNhc2UgMzU2Njg6Y2FzZSAzNTY3MjpyZXR1cm4gUWU7Y2FzZSAzNTY2OTpjYXNlIDM1NjczOnJldHVybiBSZX19ZnVuY3Rpb24gTWYoYSxiKXthLnVuaWZvcm0xZnYodGhpcy5hZGRyLGIpfWZ1bmN0aW9uIE5mKGEsYil7YS51bmlmb3JtMWl2KHRoaXMuYWRkcixiKX1mdW5jdGlvbiBPZihhLGIpe2EudW5pZm9ybTJmdih0aGlzLmFkZHIsS2IoYix0aGlzLnNpemUsMikpfWZ1bmN0aW9uIFBmKGEsYil7YS51bmlmb3JtM2Z2KHRoaXMuYWRkcixLYihiLHRoaXMuc2l6ZSwzKSl9ZnVuY3Rpb24gUWYoYSxiKXthLnVuaWZvcm00ZnYodGhpcy5hZGRyLEtiKGIsdGhpcy5zaXplLDQpKX1mdW5jdGlvbiBSZihhLGIpe2EudW5pZm9ybU1hdHJpeDJmdih0aGlzLmFkZHIsITEsS2IoYix0aGlzLnNpemUsNCkpfWZ1bmN0aW9uIFNmKGEsYil7YS51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkciwhMSxLYihiLHRoaXMuc2l6ZSw5KSl9ZnVuY3Rpb24gVGYoYSxiKXthLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLFxuICAgICExLEtiKGIsdGhpcy5zaXplLDE2KSl9ZnVuY3Rpb24gVWYoYSxiLGMpe3ZhciBkPWIubGVuZ3RoLGU9SmUoYyxkKTthLnVuaWZvcm0xaXYodGhpcy5hZGRyLGUpO2ZvcihhPTA7YSE9PWQ7KythKWMuc2V0VGV4dHVyZTJEKGJbYV18fE5lLGVbYV0pfWZ1bmN0aW9uIFZmKGEsYixjKXt2YXIgZD1iLmxlbmd0aCxlPUplKGMsZCk7YS51bmlmb3JtMWl2KHRoaXMuYWRkcixlKTtmb3IoYT0wO2EhPT1kOysrYSljLnNldFRleHR1cmVDdWJlKGJbYV18fE9lLGVbYV0pfWZ1bmN0aW9uIFdmKGEpe3N3aXRjaChhKXtjYXNlIDUxMjY6cmV0dXJuIE1mO2Nhc2UgMzU2NjQ6cmV0dXJuIE9mO2Nhc2UgMzU2NjU6cmV0dXJuIFBmO2Nhc2UgMzU2NjY6cmV0dXJuIFFmO2Nhc2UgMzU2NzQ6cmV0dXJuIFJmO2Nhc2UgMzU2NzU6cmV0dXJuIFNmO2Nhc2UgMzU2NzY6cmV0dXJuIFRmO2Nhc2UgMzU2Nzg6cmV0dXJuIFVmO2Nhc2UgMzU2ODA6cmV0dXJuIFZmO2Nhc2UgNTEyNDpjYXNlIDM1NjcwOnJldHVybiBOZjtcbiAgICBjYXNlIDM1NjY3OmNhc2UgMzU2NzE6cmV0dXJuIFBlO2Nhc2UgMzU2Njg6Y2FzZSAzNTY3MjpyZXR1cm4gUWU7Y2FzZSAzNTY2OTpjYXNlIDM1NjczOnJldHVybiBSZX19ZnVuY3Rpb24gWGYoYSxiLGMpe3RoaXMuaWQ9YTt0aGlzLmFkZHI9Yzt0aGlzLnNldFZhbHVlPUxmKGIudHlwZSl9ZnVuY3Rpb24gWWYoYSxiLGMpe3RoaXMuaWQ9YTt0aGlzLmFkZHI9Yzt0aGlzLnNpemU9Yi5zaXplO3RoaXMuc2V0VmFsdWU9V2YoYi50eXBlKX1mdW5jdGlvbiBTZShhKXt0aGlzLmlkPWE7dGhpcy5zZXE9W107dGhpcy5tYXA9e319ZnVuY3Rpb24gbWIoYSxiLGMpe3RoaXMuc2VxPVtdO3RoaXMubWFwPXt9O3RoaXMucmVuZGVyZXI9YztjPWEuZ2V0UHJvZ3JhbVBhcmFtZXRlcihiLGEuQUNUSVZFX1VOSUZPUk1TKTtmb3IodmFyIGQ9MDtkPGM7KytkKXt2YXIgZT1hLmdldEFjdGl2ZVVuaWZvcm0oYixkKSxmPWEuZ2V0VW5pZm9ybUxvY2F0aW9uKGIsZS5uYW1lKSxnPXRoaXMsaD1lLm5hbWUsaz1cbiAgICBoLmxlbmd0aDtmb3IoVmQubGFzdEluZGV4PTA7Oyl7dmFyIG09VmQuZXhlYyhoKSxxPVZkLmxhc3RJbmRleCxuPW1bMV0sdT1tWzNdO1wiXVwiPT09bVsyXSYmKG58PTApO2lmKHZvaWQgMD09PXV8fFwiW1wiPT09dSYmcSsyPT09ayl7aD1nO2U9dm9pZCAwPT09dT9uZXcgWGYobixlLGYpOm5ldyBZZihuLGUsZik7aC5zZXEucHVzaChlKTtoLm1hcFtlLmlkXT1lO2JyZWFrfWVsc2UgdT1nLm1hcFtuXSx2b2lkIDA9PT11JiYodT1uZXcgU2Uobiksbj1nLGc9dSxuLnNlcS5wdXNoKGcpLG4ubWFwW2cuaWRdPWcpLGc9dX19fWZ1bmN0aW9uIEgoYSxiLGMpe3JldHVybiB2b2lkIDA9PT1iJiZ2b2lkIDA9PT1jP3RoaXMuc2V0KGEpOnRoaXMuc2V0UkdCKGEsYixjKX1mdW5jdGlvbiBvZChhLGIpe3RoaXMubWluPXZvaWQgMCE9PWE/YTpuZXcgRChJbmZpbml0eSxJbmZpbml0eSk7dGhpcy5tYXg9dm9pZCAwIT09Yj9iOm5ldyBEKC1JbmZpbml0eSwtSW5maW5pdHkpfWZ1bmN0aW9uIFpmKGEsYixjLFxuICAgIGQsZSl7dmFyIGYsZyxoLGssbSxxLG4sdSxyLHQsbCx3LHoseSxJLEE7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYSx2LERhLG5hKXtpZigwIT09YS5sZW5ndGgpe3Y9bmV3IHA7dmFyIEo9bmEudy9uYS56LEhhPS41Km5hLnoscGQ9LjUqbmEudyxsYT0xNi9uYS53LFM9bmV3IEQobGEqSixsYSksdmE9bmV3IHAoMSwxLDApLE49bmV3IEQoMSwxKSxCPW5ldyBvZDtCLm1pbi5zZXQobmEueCxuYS55KTtCLm1heC5zZXQobmEueCsobmEuei0xNiksbmEueSsobmEudy0xNikpO2lmKHZvaWQgMD09PXkpe3ZhciBsYT1uZXcgRmxvYXQzMkFycmF5KFstMSwtMSwwLDAsMSwtMSwxLDAsMSwxLDEsMSwtMSwxLDAsMV0pLHg9bmV3IFVpbnQxNkFycmF5KFswLDEsMiwwLDIsM10pO2w9Yi5jcmVhdGVCdWZmZXIoKTt3PWIuY3JlYXRlQnVmZmVyKCk7Yi5iaW5kQnVmZmVyKGIuQVJSQVlfQlVGRkVSLGwpO2IuYnVmZmVyRGF0YShiLkFSUkFZX0JVRkZFUixsYSxiLlNUQVRJQ19EUkFXKTtiLmJpbmRCdWZmZXIoYi5FTEVNRU5UX0FSUkFZX0JVRkZFUixcbiAgICB3KTtiLmJ1ZmZlckRhdGEoYi5FTEVNRU5UX0FSUkFZX0JVRkZFUix4LGIuU1RBVElDX0RSQVcpO0k9Yi5jcmVhdGVUZXh0dXJlKCk7QT1iLmNyZWF0ZVRleHR1cmUoKTtjLmJpbmRUZXh0dXJlKGIuVEVYVFVSRV8yRCxJKTtiLnRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsYi5SR0IsMTYsMTYsMCxiLlJHQixiLlVOU0lHTkVEX0JZVEUsbnVsbCk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfV1JBUF9TLGIuQ0xBTVBfVE9fRURHRSk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfV1JBUF9ULGIuQ0xBTVBfVE9fRURHRSk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfTUFHX0ZJTFRFUixiLk5FQVJFU1QpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX01JTl9GSUxURVIsYi5ORUFSRVNUKTtjLmJpbmRUZXh0dXJlKGIuVEVYVFVSRV8yRCxBKTtiLnRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsXG4gICAgYi5SR0JBLDE2LDE2LDAsYi5SR0JBLGIuVU5TSUdORURfQllURSxudWxsKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1MsYi5DTEFNUF9UT19FREdFKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1QsYi5DTEFNUF9UT19FREdFKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9NQUdfRklMVEVSLGIuTkVBUkVTVCk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfTUlOX0ZJTFRFUixiLk5FQVJFU1QpO3ZhciBsYT16PXt2ZXJ0ZXhTaGFkZXI6XCJ1bmlmb3JtIGxvd3AgaW50IHJlbmRlclR5cGU7XFxudW5pZm9ybSB2ZWMzIHNjcmVlblBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMiBzY2FsZTtcXG51bmlmb3JtIGZsb2F0IHJvdGF0aW9uO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG9jY2x1c2lvbk1hcDtcXG5hdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgZmxvYXQgdlZpc2liaWxpdHk7XFxudm9pZCBtYWluKCkge1xcblxcdHZVViA9IHV2O1xcblxcdHZlYzIgcG9zID0gcG9zaXRpb247XFxuXFx0aWYgKCByZW5kZXJUeXBlID09IDIgKSB7XFxuXFx0XFx0dmVjNCB2aXNpYmlsaXR5ID0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC4xICkgKTtcXG5cXHRcXHR2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuMSApICk7XFxuXFx0XFx0dmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC45LCAwLjEgKSApO1xcblxcdFxcdHZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC41ICkgKTtcXG5cXHRcXHR2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuOSApICk7XFxuXFx0XFx0dmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjkgKSApO1xcblxcdFxcdHZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC45ICkgKTtcXG5cXHRcXHR2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuNSApICk7XFxuXFx0XFx0dmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjUgKSApO1xcblxcdFxcdHZWaXNpYmlsaXR5ID0gICAgICAgIHZpc2liaWxpdHkuciAvIDkuMDtcXG5cXHRcXHR2VmlzaWJpbGl0eSAqPSAxLjAgLSB2aXNpYmlsaXR5LmcgLyA5LjA7XFxuXFx0XFx0dlZpc2liaWxpdHkgKj0gICAgICAgdmlzaWJpbGl0eS5iIC8gOS4wO1xcblxcdFxcdHZWaXNpYmlsaXR5ICo9IDEuMCAtIHZpc2liaWxpdHkuYSAvIDkuMDtcXG5cXHRcXHRwb3MueCA9IGNvcyggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55O1xcblxcdFxcdHBvcy55ID0gc2luKCByb3RhdGlvbiApICogcG9zaXRpb24ueCArIGNvcyggcm90YXRpb24gKSAqIHBvc2l0aW9uLnk7XFxuXFx0fVxcblxcdGdsX1Bvc2l0aW9uID0gdmVjNCggKCBwb3MgKiBzY2FsZSArIHNjcmVlblBvc2l0aW9uLnh5ICkueHksIHNjcmVlblBvc2l0aW9uLnosIDEuMCApO1xcbn1cIixcbiAgICBmcmFnbWVudFNoYWRlcjpcInVuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gdmVjMyBjb2xvcjtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgZmxvYXQgdlZpc2liaWxpdHk7XFxudm9pZCBtYWluKCkge1xcblxcdGlmICggcmVuZGVyVHlwZSA9PSAwICkge1xcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIDEuMCwgMC4wLCAxLjAsIDAuMCApO1xcblxcdH0gZWxzZSBpZiAoIHJlbmRlclR5cGUgPT0gMSApIHtcXG5cXHRcXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxuXFx0fSBlbHNlIHtcXG5cXHRcXHR2ZWM0IHRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxuXFx0XFx0dGV4dHVyZS5hICo9IG9wYWNpdHkgKiB2VmlzaWJpbGl0eTtcXG5cXHRcXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlO1xcblxcdFxcdGdsX0ZyYWdDb2xvci5yZ2IgKj0gY29sb3I7XFxuXFx0fVxcbn1cIn0seD1iLmNyZWF0ZVByb2dyYW0oKSxcbiAgICBFPWIuY3JlYXRlU2hhZGVyKGIuRlJBR01FTlRfU0hBREVSKSxWPWIuY3JlYXRlU2hhZGVyKGIuVkVSVEVYX1NIQURFUiksSD1cInByZWNpc2lvbiBcIitlLnByZWNpc2lvbitcIiBmbG9hdDtcXG5cIjtiLnNoYWRlclNvdXJjZShFLEgrbGEuZnJhZ21lbnRTaGFkZXIpO2Iuc2hhZGVyU291cmNlKFYsSCtsYS52ZXJ0ZXhTaGFkZXIpO2IuY29tcGlsZVNoYWRlcihFKTtiLmNvbXBpbGVTaGFkZXIoVik7Yi5hdHRhY2hTaGFkZXIoeCxFKTtiLmF0dGFjaFNoYWRlcih4LFYpO2IubGlua1Byb2dyYW0oeCk7eT14O3I9Yi5nZXRBdHRyaWJMb2NhdGlvbih5LFwicG9zaXRpb25cIik7dD1iLmdldEF0dHJpYkxvY2F0aW9uKHksXCJ1dlwiKTtmPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKHksXCJyZW5kZXJUeXBlXCIpO2c9Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcIm1hcFwiKTtoPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKHksXCJvY2NsdXNpb25NYXBcIik7az1iLmdldFVuaWZvcm1Mb2NhdGlvbih5LFwib3BhY2l0eVwiKTttPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKHksXG4gICAgXCJjb2xvclwiKTtxPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKHksXCJzY2FsZVwiKTtuPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKHksXCJyb3RhdGlvblwiKTt1PWIuZ2V0VW5pZm9ybUxvY2F0aW9uKHksXCJzY3JlZW5Qb3NpdGlvblwiKX1jLnVzZVByb2dyYW0oeSk7Yy5pbml0QXR0cmlidXRlcygpO2MuZW5hYmxlQXR0cmlidXRlKHIpO2MuZW5hYmxlQXR0cmlidXRlKHQpO2MuZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKTtiLnVuaWZvcm0xaShoLDApO2IudW5pZm9ybTFpKGcsMSk7Yi5iaW5kQnVmZmVyKGIuQVJSQVlfQlVGRkVSLGwpO2IudmVydGV4QXR0cmliUG9pbnRlcihyLDIsYi5GTE9BVCwhMSwxNiwwKTtiLnZlcnRleEF0dHJpYlBvaW50ZXIodCwyLGIuRkxPQVQsITEsMTYsOCk7Yi5iaW5kQnVmZmVyKGIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdyk7Yy5kaXNhYmxlKGIuQ1VMTF9GQUNFKTtjLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayghMSk7eD0wO2ZvcihFPWEubGVuZ3RoO3g8RTt4KyspaWYobGE9XG4gICAgMTYvbmEudyxTLnNldChsYSpKLGxhKSxWPWFbeF0sdi5zZXQoVi5tYXRyaXhXb3JsZC5lbGVtZW50c1sxMl0sVi5tYXRyaXhXb3JsZC5lbGVtZW50c1sxM10sVi5tYXRyaXhXb3JsZC5lbGVtZW50c1sxNF0pLHYuYXBwbHlNYXRyaXg0KERhLm1hdHJpeFdvcmxkSW52ZXJzZSksdi5hcHBseU1hdHJpeDQoRGEucHJvamVjdGlvbk1hdHJpeCksdmEuY29weSh2KSxOLng9bmEueCt2YS54KkhhK0hhLTgsTi55PW5hLnkrdmEueSpwZCtwZC04LCEwPT09Qi5jb250YWluc1BvaW50KE4pKXtjLmFjdGl2ZVRleHR1cmUoYi5URVhUVVJFMCk7Yy5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsbnVsbCk7Yy5hY3RpdmVUZXh0dXJlKGIuVEVYVFVSRTEpO2MuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELEkpO2IuY29weVRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsYi5SR0IsTi54LE4ueSwxNiwxNiwwKTtiLnVuaWZvcm0xaShmLDApO2IudW5pZm9ybTJmKHEsUy54LFMueSk7Yi51bmlmb3JtM2YodSx2YS54LFxuICAgIHZhLnksdmEueik7Yy5kaXNhYmxlKGIuQkxFTkQpO2MuZW5hYmxlKGIuREVQVEhfVEVTVCk7Yi5kcmF3RWxlbWVudHMoYi5UUklBTkdMRVMsNixiLlVOU0lHTkVEX1NIT1JULDApO2MuYWN0aXZlVGV4dHVyZShiLlRFWFRVUkUwKTtjLmJpbmRUZXh0dXJlKGIuVEVYVFVSRV8yRCxBKTtiLmNvcHlUZXhJbWFnZTJEKGIuVEVYVFVSRV8yRCwwLGIuUkdCQSxOLngsTi55LDE2LDE2LDApO2IudW5pZm9ybTFpKGYsMSk7Yy5kaXNhYmxlKGIuREVQVEhfVEVTVCk7Yy5hY3RpdmVUZXh0dXJlKGIuVEVYVFVSRTEpO2MuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELEkpO2IuZHJhd0VsZW1lbnRzKGIuVFJJQU5HTEVTLDYsYi5VTlNJR05FRF9TSE9SVCwwKTtWLnBvc2l0aW9uU2NyZWVuLmNvcHkodmEpO1YuY3VzdG9tVXBkYXRlQ2FsbGJhY2s/Vi5jdXN0b21VcGRhdGVDYWxsYmFjayhWKTpWLnVwZGF0ZUxlbnNGbGFyZXMoKTtiLnVuaWZvcm0xaShmLDIpO2MuZW5hYmxlKGIuQkxFTkQpO2Zvcih2YXIgSD1cbiAgICAwLEs9Vi5sZW5zRmxhcmVzLmxlbmd0aDtIPEs7SCsrKXt2YXIgQz1WLmxlbnNGbGFyZXNbSF07LjAwMTxDLm9wYWNpdHkmJi4wMDE8Qy5zY2FsZSYmKHZhLng9Qy54LHZhLnk9Qy55LHZhLno9Qy56LGxhPUMuc2l6ZSpDLnNjYWxlL25hLncsUy54PWxhKkosUy55PWxhLGIudW5pZm9ybTNmKHUsdmEueCx2YS55LHZhLnopLGIudW5pZm9ybTJmKHEsUy54LFMueSksYi51bmlmb3JtMWYobixDLnJvdGF0aW9uKSxiLnVuaWZvcm0xZihrLEMub3BhY2l0eSksYi51bmlmb3JtM2YobSxDLmNvbG9yLnIsQy5jb2xvci5nLEMuY29sb3IuYiksYy5zZXRCbGVuZGluZyhDLmJsZW5kaW5nLEMuYmxlbmRFcXVhdGlvbixDLmJsZW5kU3JjLEMuYmxlbmREc3QpLGQuc2V0VGV4dHVyZTJEKEMudGV4dHVyZSwxKSxiLmRyYXdFbGVtZW50cyhiLlRSSUFOR0xFUyw2LGIuVU5TSUdORURfU0hPUlQsMCkpfX1jLmVuYWJsZShiLkNVTExfRkFDRSk7Yy5lbmFibGUoYi5ERVBUSF9URVNUKTtjLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayghMCk7XG4gICAgYy5yZXNldCgpfX19ZnVuY3Rpb24gdGMoYSxiLGMsZCxlLGYsZyxoLGspe1UuY2FsbCh0aGlzLGEsYixjLGQsZSxmLGcsaCxrKTt0aGlzLm5lZWRzVXBkYXRlPSEwfWZ1bmN0aW9uICRmKGEsYixjLGQsZSl7dmFyIGYsZyxoLGssbSxxLG4sdSxyLHQsbCx3LHoseSxJLEEsSjtmdW5jdGlvbiBIYShhLGIpe3JldHVybiBhLnJlbmRlck9yZGVyIT09Yi5yZW5kZXJPcmRlcj9hLnJlbmRlck9yZGVyLWIucmVuZGVyT3JkZXI6YS56IT09Yi56P2Iuei1hLno6Yi5pZC1hLmlkfXZhciBEYSxuYSxvYSxUZSxwZD1uZXcgcCxsYT1uZXcgaGEsUz1uZXcgcDt0aGlzLnJlbmRlcj1mdW5jdGlvbih2LHAsRCl7aWYoMCE9PXYubGVuZ3RoKXtpZih2b2lkIDA9PT1vYSl7dmFyIHg9bmV3IEZsb2F0MzJBcnJheShbLS41LC0uNSwwLDAsLjUsLS41LDEsMCwuNSwuNSwxLDEsLS41LC41LDAsMV0pLE49bmV3IFVpbnQxNkFycmF5KFswLDEsMiwwLDIsM10pO0RhPWIuY3JlYXRlQnVmZmVyKCk7bmE9Yi5jcmVhdGVCdWZmZXIoKTtcbiAgICBiLmJpbmRCdWZmZXIoYi5BUlJBWV9CVUZGRVIsRGEpO2IuYnVmZmVyRGF0YShiLkFSUkFZX0JVRkZFUix4LGIuU1RBVElDX0RSQVcpO2IuYmluZEJ1ZmZlcihiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLG5hKTtiLmJ1ZmZlckRhdGEoYi5FTEVNRU5UX0FSUkFZX0JVRkZFUixOLGIuU1RBVElDX0RSQVcpO3g9Yi5jcmVhdGVQcm9ncmFtKCk7Tj1iLmNyZWF0ZVNoYWRlcihiLlZFUlRFWF9TSEFERVIpO3ZhciBCPWIuY3JlYXRlU2hhZGVyKGIuRlJBR01FTlRfU0hBREVSKTtiLnNoYWRlclNvdXJjZShOLFtcInByZWNpc2lvbiBcIitlLnByZWNpc2lvbitcIiBmbG9hdDtcIixcIiNkZWZpbmUgU0hBREVSX05BTUUgU3ByaXRlTWF0ZXJpYWxcXG51bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4O1xcbnVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4O1xcbnVuaWZvcm0gZmxvYXQgcm90YXRpb247XFxudW5pZm9ybSB2ZWMyIHNjYWxlO1xcbnVuaWZvcm0gdmVjMiB1dk9mZnNldDtcXG51bmlmb3JtIHZlYzIgdXZTY2FsZTtcXG5hdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7XFxudm9pZCBtYWluKCkge1xcblxcdHZVViA9IHV2T2Zmc2V0ICsgdXYgKiB1dlNjYWxlO1xcblxcdHZlYzIgYWxpZ25lZFBvc2l0aW9uID0gcG9zaXRpb24gKiBzY2FsZTtcXG5cXHR2ZWMyIHJvdGF0ZWRQb3NpdGlvbjtcXG5cXHRyb3RhdGVkUG9zaXRpb24ueCA9IGNvcyggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54IC0gc2luKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7XFxuXFx0cm90YXRlZFBvc2l0aW9uLnkgPSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueCArIGNvcyggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi55O1xcblxcdHZlYzQgbXZQb3NpdGlvbjtcXG5cXHRtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7XFxuXFx0bXZQb3NpdGlvbi54eSArPSByb3RhdGVkUG9zaXRpb247XFxuXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG5cXHRmb2dEZXB0aCA9IC0gbXZQb3NpdGlvbi56O1xcbn1cIl0uam9pbihcIlxcblwiKSk7XG4gICAgYi5zaGFkZXJTb3VyY2UoQixbXCJwcmVjaXNpb24gXCIrZS5wcmVjaXNpb24rXCIgZmxvYXQ7XCIsXCIjZGVmaW5lIFNIQURFUl9OQU1FIFNwcml0ZU1hdGVyaWFsXFxudW5pZm9ybSB2ZWMzIGNvbG9yO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBpbnQgZm9nVHlwZTtcXG51bmlmb3JtIHZlYzMgZm9nQ29sb3I7XFxudW5pZm9ybSBmbG9hdCBmb2dEZW5zaXR5O1xcbnVuaWZvcm0gZmxvYXQgZm9nTmVhcjtcXG51bmlmb3JtIGZsb2F0IGZvZ0ZhcjtcXG51bmlmb3JtIGZsb2F0IGFscGhhVGVzdDtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7XFxudm9pZCBtYWluKCkge1xcblxcdHZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBjb2xvciAqIHRleHR1cmUueHl6LCB0ZXh0dXJlLmEgKiBvcGFjaXR5ICk7XFxuXFx0aWYgKCBnbF9GcmFnQ29sb3IuYSA8IGFscGhhVGVzdCApIGRpc2NhcmQ7XFxuXFx0aWYgKCBmb2dUeXBlID4gMCApIHtcXG5cXHRcXHRmbG9hdCBmb2dGYWN0b3IgPSAwLjA7XFxuXFx0XFx0aWYgKCBmb2dUeXBlID09IDEgKSB7XFxuXFx0XFx0XFx0Zm9nRmFjdG9yID0gc21vb3Roc3RlcCggZm9nTmVhciwgZm9nRmFyLCBmb2dEZXB0aCApO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0Y29uc3QgZmxvYXQgTE9HMiA9IDEuNDQyNjk1O1xcblxcdFxcdFxcdGZvZ0ZhY3RvciA9IGV4cDIoIC0gZm9nRGVuc2l0eSAqIGZvZ0RlbnNpdHkgKiBmb2dEZXB0aCAqIGZvZ0RlcHRoICogTE9HMiApO1xcblxcdFxcdFxcdGZvZ0ZhY3RvciA9IDEuMCAtIGNsYW1wKCBmb2dGYWN0b3IsIDAuMCwgMS4wICk7XFxuXFx0XFx0fVxcblxcdFxcdGdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoIGdsX0ZyYWdDb2xvci5yZ2IsIGZvZ0NvbG9yLCBmb2dGYWN0b3IgKTtcXG5cXHR9XFxufVwiXS5qb2luKFwiXFxuXCIpKTtcbiAgICBiLmNvbXBpbGVTaGFkZXIoTik7Yi5jb21waWxlU2hhZGVyKEIpO2IuYXR0YWNoU2hhZGVyKHgsTik7Yi5hdHRhY2hTaGFkZXIoeCxCKTtiLmxpbmtQcm9ncmFtKHgpO29hPXg7QT1iLmdldEF0dHJpYkxvY2F0aW9uKG9hLFwicG9zaXRpb25cIik7Sj1iLmdldEF0dHJpYkxvY2F0aW9uKG9hLFwidXZcIik7Zj1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcInV2T2Zmc2V0XCIpO2c9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJ1dlNjYWxlXCIpO2g9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJyb3RhdGlvblwiKTtrPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwic2NhbGVcIik7bT1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcImNvbG9yXCIpO3E9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJtYXBcIik7bj1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcIm9wYWNpdHlcIik7dT1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcIm1vZGVsVmlld01hdHJpeFwiKTtyPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwicHJvamVjdGlvbk1hdHJpeFwiKTtcbiAgICB0PWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwiZm9nVHlwZVwiKTtsPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwiZm9nRGVuc2l0eVwiKTt3PWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwiZm9nTmVhclwiKTt6PWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwiZm9nRmFyXCIpO3k9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJmb2dDb2xvclwiKTtiLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcImZvZ0RlcHRoXCIpO0k9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJhbHBoYVRlc3RcIik7eD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIik7eC53aWR0aD04O3guaGVpZ2h0PTg7Tj14LmdldENvbnRleHQoXCIyZFwiKTtOLmZpbGxTdHlsZT1cIndoaXRlXCI7Ti5maWxsUmVjdCgwLDAsOCw4KTtUZT1uZXcgdGMoeCl9Yy51c2VQcm9ncmFtKG9hKTtjLmluaXRBdHRyaWJ1dGVzKCk7Yy5lbmFibGVBdHRyaWJ1dGUoQSk7Yy5lbmFibGVBdHRyaWJ1dGUoSik7XG4gICAgYy5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpO2MuZGlzYWJsZShiLkNVTExfRkFDRSk7Yy5lbmFibGUoYi5CTEVORCk7Yi5iaW5kQnVmZmVyKGIuQVJSQVlfQlVGRkVSLERhKTtiLnZlcnRleEF0dHJpYlBvaW50ZXIoQSwyLGIuRkxPQVQsITEsMTYsMCk7Yi52ZXJ0ZXhBdHRyaWJQb2ludGVyKEosMixiLkZMT0FULCExLDE2LDgpO2IuYmluZEJ1ZmZlcihiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLG5hKTtiLnVuaWZvcm1NYXRyaXg0ZnYociwhMSxELnByb2plY3Rpb25NYXRyaXguZWxlbWVudHMpO2MuYWN0aXZlVGV4dHVyZShiLlRFWFRVUkUwKTtiLnVuaWZvcm0xaShxLDApO049eD0wOyhCPXAuZm9nKT8oYi51bmlmb3JtM2YoeSxCLmNvbG9yLnIsQi5jb2xvci5nLEIuY29sb3IuYiksQi5pc0ZvZz8oYi51bmlmb3JtMWYodyxCLm5lYXIpLGIudW5pZm9ybTFmKHosQi5mYXIpLGIudW5pZm9ybTFpKHQsMSksTj14PTEpOkIuaXNGb2dFeHAyJiYoYi51bmlmb3JtMWYobCxCLmRlbnNpdHkpLFxuICAgIGIudW5pZm9ybTFpKHQsMiksTj14PTIpKTooYi51bmlmb3JtMWkodCwwKSxOPXg9MCk7Zm9yKHZhciBDPTAsRT12Lmxlbmd0aDtDPEU7QysrKUI9dltDXSxCLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKEQubWF0cml4V29ybGRJbnZlcnNlLEIubWF0cml4V29ybGQpLEIuej0tQi5tb2RlbFZpZXdNYXRyaXguZWxlbWVudHNbMTRdO3Yuc29ydChIYSk7Zm9yKHZhciB2YT1bXSxDPTAsRT12Lmxlbmd0aDtDPEU7QysrKXtCPXZbQ107dmFyIEc9Qi5tYXRlcmlhbDtpZighMSE9PUcudmlzaWJsZSl7Qi5vbkJlZm9yZVJlbmRlcihhLHAsRCx2b2lkIDAsRyx2b2lkIDApO2IudW5pZm9ybTFmKEksRy5hbHBoYVRlc3QpO2IudW5pZm9ybU1hdHJpeDRmdih1LCExLEIubW9kZWxWaWV3TWF0cml4LmVsZW1lbnRzKTtCLm1hdHJpeFdvcmxkLmRlY29tcG9zZShwZCxsYSxTKTt2YVswXT1TLng7dmFbMV09Uy55O3ZhciBxZD0wO3AuZm9nJiZHLmZvZyYmKHFkPU4pO3ghPT1xZCYmKGIudW5pZm9ybTFpKHQsXG4gICAgcWQpLHg9cWQpO251bGwhPT1HLm1hcD8oYi51bmlmb3JtMmYoZixHLm1hcC5vZmZzZXQueCxHLm1hcC5vZmZzZXQueSksYi51bmlmb3JtMmYoZyxHLm1hcC5yZXBlYXQueCxHLm1hcC5yZXBlYXQueSkpOihiLnVuaWZvcm0yZihmLDAsMCksYi51bmlmb3JtMmYoZywxLDEpKTtiLnVuaWZvcm0xZihuLEcub3BhY2l0eSk7Yi51bmlmb3JtM2YobSxHLmNvbG9yLnIsRy5jb2xvci5nLEcuY29sb3IuYik7Yi51bmlmb3JtMWYoaCxHLnJvdGF0aW9uKTtiLnVuaWZvcm0yZnYoayx2YSk7Yy5zZXRCbGVuZGluZyhHLmJsZW5kaW5nLEcuYmxlbmRFcXVhdGlvbixHLmJsZW5kU3JjLEcuYmxlbmREc3QsRy5ibGVuZEVxdWF0aW9uQWxwaGEsRy5ibGVuZFNyY0FscGhhLEcuYmxlbmREc3RBbHBoYSxHLnByZW11bHRpcGxpZWRBbHBoYSk7Yy5idWZmZXJzLmRlcHRoLnNldFRlc3QoRy5kZXB0aFRlc3QpO2MuYnVmZmVycy5kZXB0aC5zZXRNYXNrKEcuZGVwdGhXcml0ZSk7Yy5idWZmZXJzLmNvbG9yLnNldE1hc2soRy5jb2xvcldyaXRlKTtcbiAgICBkLnNldFRleHR1cmUyRChHLm1hcHx8VGUsMCk7Yi5kcmF3RWxlbWVudHMoYi5UUklBTkdMRVMsNixiLlVOU0lHTkVEX1NIT1JULDApO0Iub25BZnRlclJlbmRlcihhLHAsRCx2b2lkIDAsRyx2b2lkIDApfX1jLmVuYWJsZShiLkNVTExfRkFDRSk7Yy5yZXNldCgpfX19ZnVuY3Rpb24gUCgpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6YWcrK30pO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIk1hdGVyaWFsXCI7dGhpcy5saWdodHM9dGhpcy5mb2c9ITA7dGhpcy5ibGVuZGluZz0xO3RoaXMuc2lkZT0wO3RoaXMuZmxhdFNoYWRpbmc9ITE7dGhpcy52ZXJ0ZXhDb2xvcnM9MDt0aGlzLm9wYWNpdHk9MTt0aGlzLnRyYW5zcGFyZW50PSExO3RoaXMuYmxlbmRTcmM9MjA0O3RoaXMuYmxlbmREc3Q9MjA1O3RoaXMuYmxlbmRFcXVhdGlvbj0xMDA7dGhpcy5ibGVuZEVxdWF0aW9uQWxwaGE9dGhpcy5ibGVuZERzdEFscGhhPXRoaXMuYmxlbmRTcmNBbHBoYT1cbiAgICBudWxsO3RoaXMuZGVwdGhGdW5jPTM7dGhpcy5kZXB0aFdyaXRlPXRoaXMuZGVwdGhUZXN0PSEwO3RoaXMuY2xpcHBpbmdQbGFuZXM9bnVsbDt0aGlzLmNsaXBTaGFkb3dzPXRoaXMuY2xpcEludGVyc2VjdGlvbj0hMTt0aGlzLmNvbG9yV3JpdGU9ITA7dGhpcy5wcmVjaXNpb249bnVsbDt0aGlzLnBvbHlnb25PZmZzZXQ9ITE7dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPTA7dGhpcy5kaXRoZXJpbmc9ITE7dGhpcy5hbHBoYVRlc3Q9MDt0aGlzLnByZW11bHRpcGxpZWRBbHBoYT0hMTt0aGlzLm92ZXJkcmF3PTA7dGhpcy52aXNpYmxlPSEwO3RoaXMudXNlckRhdGE9e307dGhpcy5uZWVkc1VwZGF0ZT0hMH1mdW5jdGlvbiBlYihhKXtQLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaERlcHRoTWF0ZXJpYWxcIjt0aGlzLmRlcHRoUGFja2luZz0zMjAwO3RoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5kaXNwbGFjZW1lbnRNYXA9XG4gICAgdGhpcy5hbHBoYU1hcD10aGlzLm1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMubGlnaHRzPXRoaXMuZm9nPSExO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIGZiKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoRGlzdGFuY2VNYXRlcmlhbFwiO3RoaXMucmVmZXJlbmNlUG9zaXRpb249bmV3IHA7dGhpcy5uZWFyRGlzdGFuY2U9MTt0aGlzLmZhckRpc3RhbmNlPTFFMzt0aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuZGlzcGxhY2VtZW50TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy5saWdodHM9dGhpcy5mb2c9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gWGEoYSxiKXt0aGlzLm1pbj12b2lkIDAhPT1cbiAgICBhP2E6bmV3IHAoSW5maW5pdHksSW5maW5pdHksSW5maW5pdHkpO3RoaXMubWF4PXZvaWQgMCE9PWI/YjpuZXcgcCgtSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eSl9ZnVuY3Rpb24gSWEoYSxiKXt0aGlzLmNlbnRlcj12b2lkIDAhPT1hP2E6bmV3IHA7dGhpcy5yYWRpdXM9dm9pZCAwIT09Yj9iOjB9ZnVuY3Rpb24gRWEoYSxiKXt0aGlzLm5vcm1hbD12b2lkIDAhPT1hP2E6bmV3IHAoMSwwLDApO3RoaXMuY29uc3RhbnQ9dm9pZCAwIT09Yj9iOjB9ZnVuY3Rpb24gcmQoYSxiLGMsZCxlLGYpe3RoaXMucGxhbmVzPVt2b2lkIDAhPT1hP2E6bmV3IEVhLHZvaWQgMCE9PWI/YjpuZXcgRWEsdm9pZCAwIT09Yz9jOm5ldyBFYSx2b2lkIDAhPT1kP2Q6bmV3IEVhLHZvaWQgMCE9PWU/ZTpuZXcgRWEsdm9pZCAwIT09Zj9mOm5ldyBFYV19ZnVuY3Rpb24gVWUoYSxiLGMpe2Z1bmN0aW9uIGQoYixjLGQsZSxmLGcpe3ZhciBoPWIuZ2VvbWV0cnk7dmFyIGs9bjt2YXIgbT1iLmN1c3RvbURlcHRoTWF0ZXJpYWw7XG4gICAgZCYmKGs9dSxtPWIuY3VzdG9tRGlzdGFuY2VNYXRlcmlhbCk7bT9rPW06KG09ITEsYy5tb3JwaFRhcmdldHMmJihoJiZoLmlzQnVmZmVyR2VvbWV0cnk/bT1oLm1vcnBoQXR0cmlidXRlcyYmaC5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24mJjA8aC5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoOmgmJmguaXNHZW9tZXRyeSYmKG09aC5tb3JwaFRhcmdldHMmJjA8aC5tb3JwaFRhcmdldHMubGVuZ3RoKSksYi5pc1NraW5uZWRNZXNoJiYhMT09PWMuc2tpbm5pbmcmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMU2hhZG93TWFwOiBUSFJFRS5Ta2lubmVkTWVzaCB3aXRoIG1hdGVyaWFsLnNraW5uaW5nIHNldCB0byBmYWxzZTpcIixiKSxiPWIuaXNTa2lubmVkTWVzaCYmYy5za2lubmluZyxoPTAsbSYmKGh8PTEpLGImJihofD0yKSxrPWtbaF0pO2EubG9jYWxDbGlwcGluZ0VuYWJsZWQmJiEwPT09Yy5jbGlwU2hhZG93cyYmMCE9PWMuY2xpcHBpbmdQbGFuZXMubGVuZ3RoJiYoaD1cbiAgICBrLnV1aWQsbT1jLnV1aWQsYj1yW2hdLHZvaWQgMD09PWImJihiPXt9LHJbaF09YiksaD1iW21dLHZvaWQgMD09PWgmJihoPWsuY2xvbmUoKSxiW21dPWgpLGs9aCk7ay52aXNpYmxlPWMudmlzaWJsZTtrLndpcmVmcmFtZT1jLndpcmVmcmFtZTttPWMuc2lkZTtBLnJlbmRlclNpbmdsZVNpZGVkJiYyPT1tJiYobT0wKTtBLnJlbmRlclJldmVyc2VTaWRlZCYmKDA9PT1tP209MToxPT09bSYmKG09MCkpO2suc2lkZT1tO2suY2xpcFNoYWRvd3M9Yy5jbGlwU2hhZG93cztrLmNsaXBwaW5nUGxhbmVzPWMuY2xpcHBpbmdQbGFuZXM7ay5jbGlwSW50ZXJzZWN0aW9uPWMuY2xpcEludGVyc2VjdGlvbjtrLndpcmVmcmFtZUxpbmV3aWR0aD1jLndpcmVmcmFtZUxpbmV3aWR0aDtrLmxpbmV3aWR0aD1jLmxpbmV3aWR0aDtkJiZrLmlzTWVzaERpc3RhbmNlTWF0ZXJpYWwmJihrLnJlZmVyZW5jZVBvc2l0aW9uLmNvcHkoZSksay5uZWFyRGlzdGFuY2U9ZixrLmZhckRpc3RhbmNlPWcpO3JldHVybiBrfVxuICAgIGZ1bmN0aW9uIGUoYyxoLGcsayl7dmFyIG07aWYoITEhPT1jLnZpc2libGUpe2lmKGMubGF5ZXJzLnRlc3QoaC5sYXllcnMpJiYoYy5pc01lc2h8fGMuaXNMaW5lfHxjLmlzUG9pbnRzKSYmYy5jYXN0U2hhZG93JiYoIWMuZnJ1c3R1bUN1bGxlZHx8Zi5pbnRlcnNlY3RzT2JqZWN0KGMpKSl7Yy5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhnLm1hdHJpeFdvcmxkSW52ZXJzZSxjLm1hdHJpeFdvcmxkKTt2YXIgbj1iLnVwZGF0ZShjKSx1PWMubWF0ZXJpYWw7aWYoQXJyYXkuaXNBcnJheSh1KSlmb3IodmFyIHI9bi5ncm91cHMsdD0wLGw9ci5sZW5ndGg7dDxsO3QrKyl7dmFyIEk9clt0XTsobT11W0kubWF0ZXJpYWxJbmRleF0pJiZtLnZpc2libGUmJihtPWQoYyxtLGsscSxnLm5lYXIsZy5mYXIpLGEucmVuZGVyQnVmZmVyRGlyZWN0KGcsbnVsbCxuLG0sYyxJKSl9ZWxzZSB1LnZpc2libGUmJihtPWQoYyx1LGsscSxnLm5lYXIsZy5mYXIpLGEucmVuZGVyQnVmZmVyRGlyZWN0KGcsXG4gICAgbnVsbCxuLG0sYyxudWxsKSl9Yz1jLmNoaWxkcmVuO249MDtmb3IodT1jLmxlbmd0aDtuPHU7bisrKWUoY1tuXSxoLGcsayl9fXZhciBmPW5ldyByZCxnPW5ldyBPLGg9bmV3IEQsaz1uZXcgRChjLGMpLG09bmV3IHAscT1uZXcgcCxuPUFycmF5KDQpLHU9QXJyYXkoNCkscj17fSx0PVtuZXcgcCgxLDAsMCksbmV3IHAoLTEsMCwwKSxuZXcgcCgwLDAsMSksbmV3IHAoMCwwLC0xKSxuZXcgcCgwLDEsMCksbmV3IHAoMCwtMSwwKV0sbD1bbmV3IHAoMCwxLDApLG5ldyBwKDAsMSwwKSxuZXcgcCgwLDEsMCksbmV3IHAoMCwxLDApLG5ldyBwKDAsMCwxKSxuZXcgcCgwLDAsLTEpXSx3PVtuZXcgYWEsbmV3IGFhLG5ldyBhYSxuZXcgYWEsbmV3IGFhLG5ldyBhYV07Zm9yKGM9MDs0IT09YzsrK2Mpe3ZhciB6PTAhPT0oYyYxKSx5PTAhPT0oYyYyKSxJPW5ldyBlYih7ZGVwdGhQYWNraW5nOjMyMDEsbW9ycGhUYXJnZXRzOnosc2tpbm5pbmc6eX0pO25bY109STt6PW5ldyBmYih7bW9ycGhUYXJnZXRzOnosXG4gICAgc2tpbm5pbmc6eX0pO3VbY109en12YXIgQT10aGlzO3RoaXMuZW5hYmxlZD0hMTt0aGlzLmF1dG9VcGRhdGU9ITA7dGhpcy5uZWVkc1VwZGF0ZT0hMTt0aGlzLnR5cGU9MTt0aGlzLnJlbmRlclNpbmdsZVNpZGVkPXRoaXMucmVuZGVyUmV2ZXJzZVNpZGVkPSEwO3RoaXMucmVuZGVyPWZ1bmN0aW9uKGIsYyxkKXtpZighMSE9PUEuZW5hYmxlZCYmKCExIT09QS5hdXRvVXBkYXRlfHwhMSE9PUEubmVlZHNVcGRhdGUpJiYwIT09Yi5sZW5ndGgpe3ZhciBuPWEuc3RhdGU7bi5kaXNhYmxlKGEuY29udGV4dC5CTEVORCk7bi5idWZmZXJzLmNvbG9yLnNldENsZWFyKDEsMSwxLDEpO24uYnVmZmVycy5kZXB0aC5zZXRUZXN0KCEwKTtuLnNldFNjaXNzb3JUZXN0KCExKTtmb3IodmFyIHUscj0wLEk9Yi5sZW5ndGg7cjxJO3IrKyl7dmFyIHY9YltyXTt1PXYuc2hhZG93O3ZhciBwPXYmJnYuaXNQb2ludExpZ2h0O2lmKHZvaWQgMD09PXUpY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xTaGFkb3dNYXA6XCIsXG4gICAgdixcImhhcyBubyBzaGFkb3cuXCIpO2Vsc2V7dmFyIHo9dS5jYW1lcmE7aC5jb3B5KHUubWFwU2l6ZSk7aC5taW4oayk7aWYocCl7dmFyIHk9aC54LEo9aC55O3dbMF0uc2V0KDIqeSxKLHksSik7d1sxXS5zZXQoMCxKLHksSik7d1syXS5zZXQoMyp5LEoseSxKKTt3WzNdLnNldCh5LEoseSxKKTt3WzRdLnNldCgzKnksMCx5LEopO3dbNV0uc2V0KHksMCx5LEopO2gueCo9NDtoLnkqPTJ9bnVsbD09PXUubWFwJiYodS5tYXA9bmV3IGtiKGgueCxoLnkse21pbkZpbHRlcjoxMDAzLG1hZ0ZpbHRlcjoxMDAzLGZvcm1hdDoxMDIzfSksdS5tYXAudGV4dHVyZS5uYW1lPXYubmFtZStcIi5zaGFkb3dNYXBcIix6LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKSk7dS5pc1Nwb3RMaWdodFNoYWRvdyYmdS51cGRhdGUodik7eT11Lm1hcDtKPXUubWF0cml4O3Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHYubWF0cml4V29ybGQpO3oucG9zaXRpb24uY29weShxKTtwPyh1PTYsSi5tYWtlVHJhbnNsYXRpb24oLXEueCxcbiAgICAtcS55LC1xLnopKToodT0xLG0uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHYudGFyZ2V0Lm1hdHJpeFdvcmxkKSx6Lmxvb2tBdChtKSx6LnVwZGF0ZU1hdHJpeFdvcmxkKCksSi5zZXQoLjUsMCwwLC41LDAsLjUsMCwuNSwwLDAsLjUsLjUsMCwwLDAsMSksSi5tdWx0aXBseSh6LnByb2plY3Rpb25NYXRyaXgpLEoubXVsdGlwbHkoei5tYXRyaXhXb3JsZEludmVyc2UpKTthLnNldFJlbmRlclRhcmdldCh5KTthLmNsZWFyKCk7Zm9yKHY9MDt2PHU7disrKXAmJihtLmNvcHkoei5wb3NpdGlvbiksbS5hZGQodFt2XSksei51cC5jb3B5KGxbdl0pLHoubG9va0F0KG0pLHoudXBkYXRlTWF0cml4V29ybGQoKSxuLnZpZXdwb3J0KHdbdl0pKSxnLm11bHRpcGx5TWF0cmljZXMoei5wcm9qZWN0aW9uTWF0cml4LHoubWF0cml4V29ybGRJbnZlcnNlKSxmLnNldEZyb21NYXRyaXgoZyksZShjLGQseixwKX19QS5uZWVkc1VwZGF0ZT0hMX19fWZ1bmN0aW9uIGJnKGEpe3ZhciBiPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oYSl7YS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiZcbiAgICAoYT1hLmRhdGEpO3JldHVybiBiW2EudXVpZF19LHJlbW92ZTpmdW5jdGlvbihjKXtjLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUmJihjPWMuZGF0YSk7dmFyIGQ9YltjLnV1aWRdO2QmJihhLmRlbGV0ZUJ1ZmZlcihkLmJ1ZmZlciksZGVsZXRlIGJbYy51dWlkXSl9LHVwZGF0ZTpmdW5jdGlvbihjLGQpe2MuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSYmKGM9Yy5kYXRhKTt2YXIgZT1iW2MudXVpZF07aWYodm9pZCAwPT09ZSl7dmFyIGU9Yy51dWlkLGY9Yy5hcnJheSxnPWMuZHluYW1pYz9hLkRZTkFNSUNfRFJBVzphLlNUQVRJQ19EUkFXLGg9YS5jcmVhdGVCdWZmZXIoKTthLmJpbmRCdWZmZXIoZCxoKTthLmJ1ZmZlckRhdGEoZCxmLGcpO2Mub25VcGxvYWRDYWxsYmFjaygpO2Q9YS5GTE9BVDtmIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5P2Q9YS5GTE9BVDpmIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5P2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMQXR0cmlidXRlczogVW5zdXBwb3J0ZWQgZGF0YSBidWZmZXIgZm9ybWF0OiBGbG9hdDY0QXJyYXkuXCIpOlxuICAgIGYgaW5zdGFuY2VvZiBVaW50MTZBcnJheT9kPWEuVU5TSUdORURfU0hPUlQ6ZiBpbnN0YW5jZW9mIEludDE2QXJyYXk/ZD1hLlNIT1JUOmYgaW5zdGFuY2VvZiBVaW50MzJBcnJheT9kPWEuVU5TSUdORURfSU5UOmYgaW5zdGFuY2VvZiBJbnQzMkFycmF5P2Q9YS5JTlQ6ZiBpbnN0YW5jZW9mIEludDhBcnJheT9kPWEuQllURTpmIGluc3RhbmNlb2YgVWludDhBcnJheSYmKGQ9YS5VTlNJR05FRF9CWVRFKTtiW2VdPXtidWZmZXI6aCx0eXBlOmQsYnl0ZXNQZXJFbGVtZW50OmYuQllURVNfUEVSX0VMRU1FTlQsdmVyc2lvbjpjLnZlcnNpb259fWVsc2UgZS52ZXJzaW9uPGMudmVyc2lvbiYmKGY9YyxoPWYuYXJyYXksZz1mLnVwZGF0ZVJhbmdlLGEuYmluZEJ1ZmZlcihkLGUuYnVmZmVyKSwhMT09PWYuZHluYW1pYz9hLmJ1ZmZlckRhdGEoZCxoLGEuU1RBVElDX0RSQVcpOi0xPT09Zy5jb3VudD9hLmJ1ZmZlclN1YkRhdGEoZCwwLGgpOjA9PT1nLmNvdW50P2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTE9iamVjdHMudXBkYXRlQnVmZmVyOiBkeW5hbWljIFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSBtYXJrZWQgYXMgbmVlZHNVcGRhdGUgYnV0IHVwZGF0ZVJhbmdlLmNvdW50IGlzIDAsIGVuc3VyZSB5b3UgYXJlIHVzaW5nIHNldCBtZXRob2RzIG9yIHVwZGF0aW5nIG1hbnVhbGx5LlwiKTpcbiAgICAoYS5idWZmZXJTdWJEYXRhKGQsZy5vZmZzZXQqaC5CWVRFU19QRVJfRUxFTUVOVCxoLnN1YmFycmF5KGcub2Zmc2V0LGcub2Zmc2V0K2cuY291bnQpKSxnLmNvdW50PS0xKSxlLnZlcnNpb249Yy52ZXJzaW9uKX19fWZ1bmN0aW9uIGdiKGEsYixjLGQpe3RoaXMuX3g9YXx8MDt0aGlzLl95PWJ8fDA7dGhpcy5fej1jfHwwO3RoaXMuX29yZGVyPWR8fGdiLkRlZmF1bHRPcmRlcn1mdW5jdGlvbiBXZCgpe3RoaXMubWFzaz0xfWZ1bmN0aW9uIHgoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOmNnKyt9KTt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnR5cGU9XCJPYmplY3QzRFwiO3RoaXMucGFyZW50PW51bGw7dGhpcy5jaGlsZHJlbj1bXTt0aGlzLnVwPXguRGVmYXVsdFVwLmNsb25lKCk7dmFyIGE9bmV3IHAsYj1uZXcgZ2IsYz1uZXcgaGEsZD1uZXcgcCgxLDEsMSk7Yi5vbkNoYW5nZShmdW5jdGlvbigpe2Muc2V0RnJvbUV1bGVyKGIsXG4gICAgITEpfSk7Yy5vbkNoYW5nZShmdW5jdGlvbigpe2Iuc2V0RnJvbVF1YXRlcm5pb24oYyx2b2lkIDAsITEpfSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7cG9zaXRpb246e2VudW1lcmFibGU6ITAsdmFsdWU6YX0scm90YXRpb246e2VudW1lcmFibGU6ITAsdmFsdWU6Yn0scXVhdGVybmlvbjp7ZW51bWVyYWJsZTohMCx2YWx1ZTpjfSxzY2FsZTp7ZW51bWVyYWJsZTohMCx2YWx1ZTpkfSxtb2RlbFZpZXdNYXRyaXg6e3ZhbHVlOm5ldyBPfSxub3JtYWxNYXRyaXg6e3ZhbHVlOm5ldyBtYX19KTt0aGlzLm1hdHJpeD1uZXcgTzt0aGlzLm1hdHJpeFdvcmxkPW5ldyBPO3RoaXMubWF0cml4QXV0b1VwZGF0ZT14LkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMTt0aGlzLmxheWVycz1uZXcgV2Q7dGhpcy52aXNpYmxlPSEwO3RoaXMucmVjZWl2ZVNoYWRvdz10aGlzLmNhc3RTaGFkb3c9ITE7dGhpcy5mcnVzdHVtQ3VsbGVkPSEwO3RoaXMucmVuZGVyT3JkZXI9XG4gICAgMDt0aGlzLnVzZXJEYXRhPXt9fWZ1bmN0aW9uIFRhKCl7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNhbWVyYVwiO3RoaXMubWF0cml4V29ybGRJbnZlcnNlPW5ldyBPO3RoaXMucHJvamVjdGlvbk1hdHJpeD1uZXcgT31mdW5jdGlvbiBMYihhLGIsYyxkLGUsZil7VGEuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJPcnRob2dyYXBoaWNDYW1lcmFcIjt0aGlzLnpvb209MTt0aGlzLnZpZXc9bnVsbDt0aGlzLmxlZnQ9YTt0aGlzLnJpZ2h0PWI7dGhpcy50b3A9Yzt0aGlzLmJvdHRvbT1kO3RoaXMubmVhcj12b2lkIDAhPT1lP2U6LjE7dGhpcy5mYXI9dm9pZCAwIT09Zj9mOjJFMzt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX1mdW5jdGlvbiBZYShhLGIsYyxkLGUsZil7dGhpcy5hPWE7dGhpcy5iPWI7dGhpcy5jPWM7dGhpcy5ub3JtYWw9ZCYmZC5pc1ZlY3RvcjM/ZDpuZXcgcDt0aGlzLnZlcnRleE5vcm1hbHM9QXJyYXkuaXNBcnJheShkKT9kOltdO3RoaXMuY29sb3I9ZSYmZS5pc0NvbG9yP1xuICAgIGU6bmV3IEg7dGhpcy52ZXJ0ZXhDb2xvcnM9QXJyYXkuaXNBcnJheShlKT9lOltdO3RoaXMubWF0ZXJpYWxJbmRleD12b2lkIDAhPT1mP2Y6MH1mdW5jdGlvbiBMKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpkZys9Mn0pO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIkdlb21ldHJ5XCI7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLmZhY2VzPVtdO3RoaXMuZmFjZVZlcnRleFV2cz1bW11dO3RoaXMubW9ycGhUYXJnZXRzPVtdO3RoaXMubW9ycGhOb3JtYWxzPVtdO3RoaXMuc2tpbldlaWdodHM9W107dGhpcy5za2luSW5kaWNlcz1bXTt0aGlzLmxpbmVEaXN0YW5jZXM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5ncm91cHNOZWVkVXBkYXRlPXRoaXMubGluZURpc3RhbmNlc05lZWRVcGRhdGU9dGhpcy5jb2xvcnNOZWVkVXBkYXRlPXRoaXMubm9ybWFsc05lZWRVcGRhdGU9XG4gICAgdGhpcy51dnNOZWVkVXBkYXRlPXRoaXMudmVydGljZXNOZWVkVXBkYXRlPXRoaXMuZWxlbWVudHNOZWVkVXBkYXRlPSExfWZ1bmN0aW9uIE0oYSxiLGMpe2lmKEFycmF5LmlzQXJyYXkoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogYXJyYXkgc2hvdWxkIGJlIGEgVHlwZWQgQXJyYXkuXCIpO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMuYXJyYXk9YTt0aGlzLml0ZW1TaXplPWI7dGhpcy5jb3VudD12b2lkIDAhPT1hP2EubGVuZ3RoL2I6MDt0aGlzLm5vcm1hbGl6ZWQ9ITA9PT1jO3RoaXMuZHluYW1pYz0hMTt0aGlzLnVwZGF0ZVJhbmdlPXtvZmZzZXQ6MCxjb3VudDotMX07dGhpcy5vblVwbG9hZENhbGxiYWNrPWZ1bmN0aW9uKCl7fTt0aGlzLnZlcnNpb249MH1mdW5jdGlvbiB1YyhhLGIsYyl7TS5jYWxsKHRoaXMsbmV3IEludDhBcnJheShhKSxiLGMpfWZ1bmN0aW9uIHZjKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgVWludDhBcnJheShhKSxcbiAgICBiLGMpfWZ1bmN0aW9uIHdjKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgVWludDhDbGFtcGVkQXJyYXkoYSksYixjKX1mdW5jdGlvbiB4YyhhLGIsYyl7TS5jYWxsKHRoaXMsbmV3IEludDE2QXJyYXkoYSksYixjKX1mdW5jdGlvbiBvYihhLGIsYyl7TS5jYWxsKHRoaXMsbmV3IFVpbnQxNkFycmF5KGEpLGIsYyl9ZnVuY3Rpb24geWMoYSxiLGMpe00uY2FsbCh0aGlzLG5ldyBJbnQzMkFycmF5KGEpLGIsYyl9ZnVuY3Rpb24gcGIoYSxiLGMpe00uY2FsbCh0aGlzLG5ldyBVaW50MzJBcnJheShhKSxiLGMpfWZ1bmN0aW9uIEIoYSxiLGMpe00uY2FsbCh0aGlzLG5ldyBGbG9hdDMyQXJyYXkoYSksYixjKX1mdW5jdGlvbiB6YyhhLGIsYyl7TS5jYWxsKHRoaXMsbmV3IEZsb2F0NjRBcnJheShhKSxiLGMpfWZ1bmN0aW9uIFZlKCl7dGhpcy5pbmRpY2VzPVtdO3RoaXMudmVydGljZXM9W107dGhpcy5ub3JtYWxzPVtdO3RoaXMuY29sb3JzPVtdO3RoaXMudXZzPVtdO3RoaXMudXZzMj1bXTt0aGlzLmdyb3Vwcz1cbiAgICBbXTt0aGlzLm1vcnBoVGFyZ2V0cz17fTt0aGlzLnNraW5XZWlnaHRzPVtdO3RoaXMuc2tpbkluZGljZXM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5ncm91cHNOZWVkVXBkYXRlPXRoaXMudXZzTmVlZFVwZGF0ZT10aGlzLmNvbG9yc05lZWRVcGRhdGU9dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMX1mdW5jdGlvbiBYZChhKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuLUluZmluaXR5O2Zvcih2YXIgYj1hWzBdLGM9MSxkPWEubGVuZ3RoO2M8ZDsrK2MpYVtjXT5iJiYoYj1hW2NdKTtyZXR1cm4gYn1mdW5jdGlvbiBFKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTplZys9Mn0pO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIkJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5pbmRleD1udWxsO3RoaXMuYXR0cmlidXRlcz17fTt0aGlzLm1vcnBoQXR0cmlidXRlcz1cbiAgICB7fTt0aGlzLmdyb3Vwcz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmRyYXdSYW5nZT17c3RhcnQ6MCxjb3VudDpJbmZpbml0eX19ZnVuY3Rpb24gTWIoYSxiLGMsZCxlLGYpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJCb3hHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17d2lkdGg6YSxoZWlnaHQ6YixkZXB0aDpjLHdpZHRoU2VnbWVudHM6ZCxoZWlnaHRTZWdtZW50czplLGRlcHRoU2VnbWVudHM6Zn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IHFiKGEsYixjLGQsZSxmKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gcWIoYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSxiLGMsZCxlLGYsZyxsLEhhLERhLG5hKXt2YXIgdD1mL0hhLHY9Zy9EYSxJPWYvMixBPWcvMix3PWwvMjtnPUhhKzE7dmFyIHo9RGErMSx5PWY9MCxKLHgsQj1uZXcgcDtmb3IoeD0wO3g8ejt4Kyspe3ZhciBEPXgqdi1BO2ZvcihKPTA7SjxnO0orKylCW2FdPVxuICAgIChKKnQtSSkqZCxCW2JdPUQqZSxCW2NdPXcsbS5wdXNoKEIueCxCLnksQi56KSxCW2FdPTAsQltiXT0wLEJbY109MDxsPzE6LTEscS5wdXNoKEIueCxCLnksQi56KSxuLnB1c2goSi9IYSksbi5wdXNoKDEteC9EYSksZis9MX1mb3IoeD0wO3g8RGE7eCsrKWZvcihKPTA7SjxIYTtKKyspYT11K0orZyooeCsxKSxiPXUrKEorMSkrZyooeCsxKSxjPXUrKEorMSkrZyp4LGsucHVzaCh1K0orZyp4LGEsYyksay5wdXNoKGEsYixjKSx5Kz02O2guYWRkR3JvdXAocix5LG5hKTtyKz15O3UrPWZ9RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkJveEJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDphLGhlaWdodDpiLGRlcHRoOmMsd2lkdGhTZWdtZW50czpkLGhlaWdodFNlZ21lbnRzOmUsZGVwdGhTZWdtZW50czpmfTt2YXIgaD10aGlzO2E9YXx8MTtiPWJ8fDE7Yz1jfHwxO2Q9TWF0aC5mbG9vcihkKXx8MTtlPU1hdGguZmxvb3IoZSl8fDE7Zj1NYXRoLmZsb29yKGYpfHwxO3ZhciBrPVxuICAgIFtdLG09W10scT1bXSxuPVtdLHU9MCxyPTA7ZyhcInpcIixcInlcIixcInhcIiwtMSwtMSxjLGIsYSxmLGUsMCk7ZyhcInpcIixcInlcIixcInhcIiwxLC0xLGMsYiwtYSxmLGUsMSk7ZyhcInhcIixcInpcIixcInlcIiwxLDEsYSxjLGIsZCxmLDIpO2coXCJ4XCIsXCJ6XCIsXCJ5XCIsMSwtMSxhLGMsLWIsZCxmLDMpO2coXCJ4XCIsXCJ5XCIsXCJ6XCIsMSwtMSxhLGIsYyxkLGUsNCk7ZyhcInhcIixcInlcIixcInpcIiwtMSwtMSxhLGIsLWMsZCxlLDUpO3RoaXMuc2V0SW5kZXgoayk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKG0sMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIocSwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKG4sMikpfWZ1bmN0aW9uIEFjKGEsYixjLGQpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQbGFuZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDphLGhlaWdodDpiLHdpZHRoU2VnbWVudHM6YyxoZWlnaHRTZWdtZW50czpkfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgcmIoYSxcbiAgICBiLGMsZCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIHJiKGEsYixjLGQpe0UuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQbGFuZUJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDphLGhlaWdodDpiLHdpZHRoU2VnbWVudHM6YyxoZWlnaHRTZWdtZW50czpkfTthPWF8fDE7Yj1ifHwxO3ZhciBlPWEvMixmPWIvMjtjPU1hdGguZmxvb3IoYyl8fDE7ZD1NYXRoLmZsb29yKGQpfHwxO3ZhciBnPWMrMSxoPWQrMSxrPWEvYyxtPWIvZCxxPVtdLG49W10sdT1bXSxyPVtdO2ZvcihhPTA7YTxoO2ErKyl7dmFyIHQ9YSptLWY7Zm9yKGI9MDtiPGc7YisrKW4ucHVzaChiKmstZSwtdCwwKSx1LnB1c2goMCwwLDEpLHIucHVzaChiL2MpLHIucHVzaCgxLWEvZCl9Zm9yKGE9MDthPGQ7YSsrKWZvcihiPTA7YjxjO2IrKyllPWIrZyooYSsxKSxmPWIrMStnKihhKzEpLGg9YisxK2cqYSxxLnB1c2goYitnKmEsZSxoKSxxLnB1c2goZSxmLGgpO3RoaXMuc2V0SW5kZXgocSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLFxuICAgIG5ldyBCKG4sMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIodSwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKHIsMikpfWZ1bmN0aW9uIEFhKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoQmFzaWNNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IEgoMTY3NzcyMTUpO3RoaXMubGlnaHRNYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTE7dGhpcy5hb01hcD1udWxsO3RoaXMuYW9NYXBJbnRlbnNpdHk9MTt0aGlzLmVudk1hcD10aGlzLmFscGhhTWFwPXRoaXMuc3BlY3VsYXJNYXA9bnVsbDt0aGlzLmNvbWJpbmU9MDt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPS45ODt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIjt0aGlzLmxpZ2h0cz10aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPVxuICAgICExO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIEZhKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTaGFkZXJNYXRlcmlhbFwiO3RoaXMuZGVmaW5lcz17fTt0aGlzLnVuaWZvcm1zPXt9O3RoaXMudmVydGV4U2hhZGVyPVwidm9pZCBtYWluKCkge1xcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG59XCI7dGhpcy5mcmFnbWVudFNoYWRlcj1cInZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCAxLjAsIDAuMCwgMC4wLCAxLjAgKTtcXG59XCI7dGhpcy5saW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9dGhpcy5jbGlwcGluZz10aGlzLmxpZ2h0cz10aGlzLmZvZz0hMTt0aGlzLmV4dGVuc2lvbnM9e2Rlcml2YXRpdmVzOiExLGZyYWdEZXB0aDohMSxcbiAgICBkcmF3QnVmZmVyczohMSxzaGFkZXJUZXh0dXJlTE9EOiExfTt0aGlzLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM9e2NvbG9yOlsxLDEsMV0sdXY6WzAsMF0sdXYyOlswLDBdfTt0aGlzLmluZGV4MEF0dHJpYnV0ZU5hbWU9dm9pZCAwO3ZvaWQgMCE9PWEmJih2b2lkIDAhPT1hLmF0dHJpYnV0ZXMmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5TaGFkZXJNYXRlcmlhbDogYXR0cmlidXRlcyBzaG91bGQgbm93IGJlIGRlZmluZWQgaW4gVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC5cIiksdGhpcy5zZXRWYWx1ZXMoYSkpfWZ1bmN0aW9uIHNiKGEsYil7dGhpcy5vcmlnaW49dm9pZCAwIT09YT9hOm5ldyBwO3RoaXMuZGlyZWN0aW9uPXZvaWQgMCE9PWI/YjpuZXcgcH1mdW5jdGlvbiBOYihhLGIpe3RoaXMuc3RhcnQ9dm9pZCAwIT09YT9hOm5ldyBwO3RoaXMuZW5kPXZvaWQgMCE9PWI/YjpuZXcgcH1mdW5jdGlvbiBaYShhLGIsYyl7dGhpcy5hPXZvaWQgMCE9PWE/YTpuZXcgcDt0aGlzLmI9dm9pZCAwIT09XG4gICAgYj9iOm5ldyBwO3RoaXMuYz12b2lkIDAhPT1jP2M6bmV3IHB9ZnVuY3Rpb24gcmEoYSxiKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaFwiO3RoaXMuZ2VvbWV0cnk9dm9pZCAwIT09YT9hOm5ldyBFO3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09Yj9iOm5ldyBBYSh7Y29sb3I6MTY3NzcyMTUqTWF0aC5yYW5kb20oKX0pO3RoaXMuZHJhd01vZGU9MDt0aGlzLnVwZGF0ZU1vcnBoVGFyZ2V0cygpfWZ1bmN0aW9uIGZnKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSxjKXtiLmJ1ZmZlcnMuY29sb3Iuc2V0Q2xlYXIoYS5yLGEuZyxhLmIsYyxkKX12YXIgZj1uZXcgSCgwKSxnPTAsaCxrLG07cmV0dXJue2dldENsZWFyQ29sb3I6ZnVuY3Rpb24oKXtyZXR1cm4gZn0sc2V0Q2xlYXJDb2xvcjpmdW5jdGlvbihhLGIpe2Yuc2V0KGEpO2c9dm9pZCAwIT09Yj9iOjE7ZShmLGcpfSxnZXRDbGVhckFscGhhOmZ1bmN0aW9uKCl7cmV0dXJuIGd9LHNldENsZWFyQWxwaGE6ZnVuY3Rpb24oYSl7Zz1hO2UoZixcbiAgICBnKX0scmVuZGVyOmZ1bmN0aW9uKGIsZCx1LHIpe2Q9ZC5iYWNrZ3JvdW5kO251bGw9PT1kP2UoZixnKTpkJiZkLmlzQ29sb3ImJihlKGQsMSkscj0hMCk7KGEuYXV0b0NsZWFyfHxyKSYmYS5jbGVhcihhLmF1dG9DbGVhckNvbG9yLGEuYXV0b0NsZWFyRGVwdGgsYS5hdXRvQ2xlYXJTdGVuY2lsKTtkJiZkLmlzQ3ViZVRleHR1cmU/KHZvaWQgMD09PW0mJihtPW5ldyByYShuZXcgcWIoMSwxLDEpLG5ldyBGYSh7dW5pZm9ybXM6dGIuY3ViZS51bmlmb3Jtcyx2ZXJ0ZXhTaGFkZXI6dGIuY3ViZS52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6dGIuY3ViZS5mcmFnbWVudFNoYWRlcixzaWRlOjEsZGVwdGhUZXN0OiEwLGRlcHRoV3JpdGU6ITEsZm9nOiExfSkpLG0uZ2VvbWV0cnkucmVtb3ZlQXR0cmlidXRlKFwibm9ybWFsXCIpLG0uZ2VvbWV0cnkucmVtb3ZlQXR0cmlidXRlKFwidXZcIiksbS5vbkJlZm9yZVJlbmRlcj1mdW5jdGlvbihhLGIsYyl7dGhpcy5tYXRyaXhXb3JsZC5jb3B5UG9zaXRpb24oYy5tYXRyaXhXb3JsZCl9LFxuICAgIGMudXBkYXRlKG0uZ2VvbWV0cnkpKSxtLm1hdGVyaWFsLnVuaWZvcm1zLnRDdWJlLnZhbHVlPWQsYi5wdXNoKG0sbS5nZW9tZXRyeSxtLm1hdGVyaWFsLDAsbnVsbCkpOmQmJmQuaXNUZXh0dXJlJiYodm9pZCAwPT09aCYmKGg9bmV3IExiKC0xLDEsMSwtMSwwLDEpLGs9bmV3IHJhKG5ldyByYigyLDIpLG5ldyBBYSh7ZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITEsZm9nOiExfSkpLGMudXBkYXRlKGsuZ2VvbWV0cnkpKSxrLm1hdGVyaWFsLm1hcD1kLGEucmVuZGVyQnVmZmVyRGlyZWN0KGgsbnVsbCxrLmdlb21ldHJ5LGsubWF0ZXJpYWwsayxudWxsKSl9fX1mdW5jdGlvbiBnZyhhLGIpe3JldHVybiBhLnJlbmRlck9yZGVyIT09Yi5yZW5kZXJPcmRlcj9hLnJlbmRlck9yZGVyLWIucmVuZGVyT3JkZXI6YS5wcm9ncmFtJiZiLnByb2dyYW0mJmEucHJvZ3JhbSE9PWIucHJvZ3JhbT9hLnByb2dyYW0uaWQtYi5wcm9ncmFtLmlkOmEubWF0ZXJpYWwuaWQhPT1iLm1hdGVyaWFsLmlkP2EubWF0ZXJpYWwuaWQtXG4gICAgYi5tYXRlcmlhbC5pZDphLnohPT1iLno/YS56LWIuejphLmlkLWIuaWR9ZnVuY3Rpb24gaGcoYSxiKXtyZXR1cm4gYS5yZW5kZXJPcmRlciE9PWIucmVuZGVyT3JkZXI/YS5yZW5kZXJPcmRlci1iLnJlbmRlck9yZGVyOmEueiE9PWIuej9iLnotYS56OmEuaWQtYi5pZH1mdW5jdGlvbiBpZygpe3ZhciBhPVtdLGI9MCxjPVtdLGQ9W107cmV0dXJue29wYXF1ZTpjLHRyYW5zcGFyZW50OmQsaW5pdDpmdW5jdGlvbigpe2I9MDtjLmxlbmd0aD0wO2QubGVuZ3RoPTB9LHB1c2g6ZnVuY3Rpb24oZSxmLGcsaCxrKXt2YXIgbT1hW2JdO3ZvaWQgMD09PW0/KG09e2lkOmUuaWQsb2JqZWN0OmUsZ2VvbWV0cnk6ZixtYXRlcmlhbDpnLHByb2dyYW06Zy5wcm9ncmFtLHJlbmRlck9yZGVyOmUucmVuZGVyT3JkZXIsejpoLGdyb3VwOmt9LGFbYl09bSk6KG0uaWQ9ZS5pZCxtLm9iamVjdD1lLG0uZ2VvbWV0cnk9ZixtLm1hdGVyaWFsPWcsbS5wcm9ncmFtPWcucHJvZ3JhbSxtLnJlbmRlck9yZGVyPWUucmVuZGVyT3JkZXIsXG4gICAgbS56PWgsbS5ncm91cD1rKTsoITA9PT1nLnRyYW5zcGFyZW50P2Q6YykucHVzaChtKTtiKyt9LHNvcnQ6ZnVuY3Rpb24oKXsxPGMubGVuZ3RoJiZjLnNvcnQoZ2cpOzE8ZC5sZW5ndGgmJmQuc29ydChoZyl9fX1mdW5jdGlvbiBqZygpe3ZhciBhPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oYixjKXtiPWIuaWQrXCIsXCIrYy5pZDtjPWFbYl07dm9pZCAwPT09YyYmKGM9bmV3IGlnLGFbYl09Yyk7cmV0dXJuIGN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXthPXt9fX19ZnVuY3Rpb24ga2coYSxiKXtyZXR1cm4gTWF0aC5hYnMoYlsxXSktTWF0aC5hYnMoYVsxXSl9ZnVuY3Rpb24gbGcoYSl7dmFyIGI9e30sYz1uZXcgRmxvYXQzMkFycmF5KDgpO3JldHVybnt1cGRhdGU6ZnVuY3Rpb24oZCxlLGYsZyl7dmFyIGg9ZC5tb3JwaFRhcmdldEluZmx1ZW5jZXMsaz1oLmxlbmd0aDtkPWJbZS5pZF07aWYodm9pZCAwPT09ZCl7ZD1bXTtmb3IodmFyIG09MDttPGs7bSsrKWRbbV09W20sMF07YltlLmlkXT1kfXZhciBxPVxuICAgIGYubW9ycGhUYXJnZXRzJiZlLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbjtmPWYubW9ycGhOb3JtYWxzJiZlLm1vcnBoQXR0cmlidXRlcy5ub3JtYWw7Zm9yKG09MDttPGs7bSsrKXt2YXIgbj1kW21dOzAhPT1uWzFdJiYocSYmZS5yZW1vdmVBdHRyaWJ1dGUoXCJtb3JwaFRhcmdldFwiK20pLGYmJmUucmVtb3ZlQXR0cmlidXRlKFwibW9ycGhOb3JtYWxcIittKSl9Zm9yKG09MDttPGs7bSsrKW49ZFttXSxuWzBdPW0sblsxXT1oW21dO2Quc29ydChrZyk7Zm9yKG09MDs4Pm07bSsrKXtpZihuPWRbbV0paWYoaD1uWzBdLG49blsxXSl7cSYmZS5hZGRBdHRyaWJ1dGUoXCJtb3JwaFRhcmdldFwiK20scVtoXSk7ZiYmZS5hZGRBdHRyaWJ1dGUoXCJtb3JwaE5vcm1hbFwiK20sZltoXSk7Y1ttXT1uO2NvbnRpbnVlfWNbbV09MH1nLmdldFVuaWZvcm1zKCkuc2V0VmFsdWUoYSxcIm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1wiLGMpfX19ZnVuY3Rpb24gbWcoYSxiLGMpe3ZhciBkLGUsZjt0aGlzLnNldE1vZGU9ZnVuY3Rpb24oYSl7ZD1cbiAgICBhfTt0aGlzLnNldEluZGV4PWZ1bmN0aW9uKGEpe2U9YS50eXBlO2Y9YS5ieXRlc1BlckVsZW1lbnR9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGIsaCl7YS5kcmF3RWxlbWVudHMoZCxoLGUsYipmKTtjLmNhbGxzKys7Yy52ZXJ0aWNlcys9aDtkPT09YS5UUklBTkdMRVM/Yy5mYWNlcys9aC8zOmQ9PT1hLlBPSU5UUyYmKGMucG9pbnRzKz1oKX07dGhpcy5yZW5kZXJJbnN0YW5jZXM9ZnVuY3Rpb24oZyxoLGspe3ZhciBtPWIuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKTtudWxsPT09bT9jb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xJbmRleGVkQnVmZmVyUmVuZGVyZXI6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLlwiKToobS5kcmF3RWxlbWVudHNJbnN0YW5jZWRBTkdMRShkLGssZSxoKmYsZy5tYXhJbnN0YW5jZWRDb3VudCksYy5jYWxscysrLGMudmVydGljZXMrPVxuICAgIGsqZy5tYXhJbnN0YW5jZWRDb3VudCxkPT09YS5UUklBTkdMRVM/Yy5mYWNlcys9Zy5tYXhJbnN0YW5jZWRDb3VudCprLzM6ZD09PWEuUE9JTlRTJiYoYy5wb2ludHMrPWcubWF4SW5zdGFuY2VkQ291bnQqaykpfX1mdW5jdGlvbiBuZyhhLGIsYyl7dmFyIGQ7dGhpcy5zZXRNb2RlPWZ1bmN0aW9uKGEpe2Q9YX07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYixmKXthLmRyYXdBcnJheXMoZCxiLGYpO2MuY2FsbHMrKztjLnZlcnRpY2VzKz1mO2Q9PT1hLlRSSUFOR0xFUz9jLmZhY2VzKz1mLzM6ZD09PWEuUE9JTlRTJiYoYy5wb2ludHMrPWYpfTt0aGlzLnJlbmRlckluc3RhbmNlcz1mdW5jdGlvbihlLGYsZyl7dmFyIGg9Yi5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO2lmKG51bGw9PT1oKWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik7XG4gICAgZWxzZXt2YXIgaz1lLmF0dHJpYnV0ZXMucG9zaXRpb247ay5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlPyhnPWsuZGF0YS5jb3VudCxoLmRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRShkLDAsZyxlLm1heEluc3RhbmNlZENvdW50KSk6aC5kcmF3QXJyYXlzSW5zdGFuY2VkQU5HTEUoZCxmLGcsZS5tYXhJbnN0YW5jZWRDb3VudCk7Yy5jYWxscysrO2MudmVydGljZXMrPWcqZS5tYXhJbnN0YW5jZWRDb3VudDtkPT09YS5UUklBTkdMRVM/Yy5mYWNlcys9ZS5tYXhJbnN0YW5jZWRDb3VudCpnLzM6ZD09PWEuUE9JTlRTJiYoYy5wb2ludHMrPWUubWF4SW5zdGFuY2VkQ291bnQqZyl9fX1mdW5jdGlvbiBvZyhhLGIsYyl7ZnVuY3Rpb24gZChhKXthPWEudGFyZ2V0O3ZhciBoPWVbYS5pZF07bnVsbCE9PWguaW5kZXgmJmIucmVtb3ZlKGguaW5kZXgpO2Zvcih2YXIgZyBpbiBoLmF0dHJpYnV0ZXMpYi5yZW1vdmUoaC5hdHRyaWJ1dGVzW2ddKTthLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsXG4gICAgZCk7ZGVsZXRlIGVbYS5pZF07aWYoZz1mW2EuaWRdKWIucmVtb3ZlKGcpLGRlbGV0ZSBmW2EuaWRdO2lmKGc9ZltoLmlkXSliLnJlbW92ZShnKSxkZWxldGUgZltoLmlkXTtjLmdlb21ldHJpZXMtLX12YXIgZT17fSxmPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgZj1lW2IuaWRdO2lmKGYpcmV0dXJuIGY7Yi5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGQpO2IuaXNCdWZmZXJHZW9tZXRyeT9mPWI6Yi5pc0dlb21ldHJ5JiYodm9pZCAwPT09Yi5fYnVmZmVyR2VvbWV0cnkmJihiLl9idWZmZXJHZW9tZXRyeT0obmV3IEUpLnNldEZyb21PYmplY3QoYSkpLGY9Yi5fYnVmZmVyR2VvbWV0cnkpO2VbYi5pZF09ZjtjLmdlb21ldHJpZXMrKztyZXR1cm4gZn0sdXBkYXRlOmZ1bmN0aW9uKGMpe3ZhciBkPWMuaW5kZXgsZT1jLmF0dHJpYnV0ZXM7bnVsbCE9PWQmJmIudXBkYXRlKGQsYS5FTEVNRU5UX0FSUkFZX0JVRkZFUik7Zm9yKHZhciBmIGluIGUpYi51cGRhdGUoZVtmXSxcbiAgICBhLkFSUkFZX0JVRkZFUik7Yz1jLm1vcnBoQXR0cmlidXRlcztmb3IoZiBpbiBjKWZvcih2YXIgZD1jW2ZdLGU9MCxnPWQubGVuZ3RoO2U8ZztlKyspYi51cGRhdGUoZFtlXSxhLkFSUkFZX0JVRkZFUil9LGdldFdpcmVmcmFtZUF0dHJpYnV0ZTpmdW5jdGlvbihjKXt2YXIgZD1mW2MuaWRdO2lmKGQpcmV0dXJuIGQ7ZD1bXTt2YXIgZT1jLmluZGV4O3ZhciBnPWMuYXR0cmlidXRlcztpZihudWxsIT09ZSl7dmFyIHE9ZS5hcnJheTtmb3IodmFyIG49MCx1PXEubGVuZ3RoO248dTtuKz0zKXt2YXIgcj1xW24rMF07Zz1xW24rMV07ZT1xW24rMl07ZC5wdXNoKHIsZyxnLGUsZSxyKX19ZWxzZSBmb3IocT1nLnBvc2l0aW9uLmFycmF5LG49MCx1PXEubGVuZ3RoLzMtMTtuPHU7bis9MylyPW4rMCxnPW4rMSxlPW4rMixkLnB1c2gocixnLGcsZSxlLHIpO2Q9bmV3ICg2NTUzNTxYZChkKT9wYjpvYikoZCwxKTtiLnVwZGF0ZShkLGEuRUxFTUVOVF9BUlJBWV9CVUZGRVIpO3JldHVybiBmW2MuaWRdPVxuICAgIGR9fX1mdW5jdGlvbiBwZygpe3ZhciBhPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oYil7aWYodm9pZCAwIT09YVtiLmlkXSlyZXR1cm4gYVtiLmlkXTtzd2l0Y2goYi50eXBlKXtjYXNlIFwiRGlyZWN0aW9uYWxMaWdodFwiOnZhciBjPXtkaXJlY3Rpb246bmV3IHAsY29sb3I6bmV3IEgsc2hhZG93OiExLHNoYWRvd0JpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBEfTticmVhaztjYXNlIFwiU3BvdExpZ2h0XCI6Yz17cG9zaXRpb246bmV3IHAsZGlyZWN0aW9uOm5ldyBwLGNvbG9yOm5ldyBILGRpc3RhbmNlOjAsY29uZUNvczowLHBlbnVtYnJhQ29zOjAsZGVjYXk6MCxzaGFkb3c6ITEsc2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IER9O2JyZWFrO2Nhc2UgXCJQb2ludExpZ2h0XCI6Yz17cG9zaXRpb246bmV3IHAsY29sb3I6bmV3IEgsZGlzdGFuY2U6MCxkZWNheTowLHNoYWRvdzohMSxzaGFkb3dCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgRCxcbiAgICBzaGFkb3dDYW1lcmFOZWFyOjEsc2hhZG93Q2FtZXJhRmFyOjFFM307YnJlYWs7Y2FzZSBcIkhlbWlzcGhlcmVMaWdodFwiOmM9e2RpcmVjdGlvbjpuZXcgcCxza3lDb2xvcjpuZXcgSCxncm91bmRDb2xvcjpuZXcgSH07YnJlYWs7Y2FzZSBcIlJlY3RBcmVhTGlnaHRcIjpjPXtjb2xvcjpuZXcgSCxwb3NpdGlvbjpuZXcgcCxoYWxmV2lkdGg6bmV3IHAsaGFsZkhlaWdodDpuZXcgcH19cmV0dXJuIGFbYi5pZF09Y319fWZ1bmN0aW9uIHFnKCl7dmFyIGE9bmV3IHBnLGI9e2hhc2g6XCJcIixhbWJpZW50OlswLDAsMF0sZGlyZWN0aW9uYWw6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXA6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6W10sc3BvdDpbXSxzcG90U2hhZG93TWFwOltdLHNwb3RTaGFkb3dNYXRyaXg6W10scmVjdEFyZWE6W10scG9pbnQ6W10scG9pbnRTaGFkb3dNYXA6W10scG9pbnRTaGFkb3dNYXRyaXg6W10saGVtaTpbXX0sYz1uZXcgcCxkPW5ldyBPLGU9bmV3IE87cmV0dXJue3NldHVwOmZ1bmN0aW9uKGYsXG4gICAgZyxoKXtmb3IodmFyIGssbT0wLHE9MCxuPTAsdT0wLHI9MCx0PTAsbD0wLHc9MCxwPWgubWF0cml4V29ybGRJbnZlcnNlLHk9MCxJPWYubGVuZ3RoO3k8STt5Kyspe3ZhciBBPWZbeV07az1BLmNvbG9yO3ZhciBKPUEuaW50ZW5zaXR5LEhhPUEuZGlzdGFuY2UsRGE9QS5zaGFkb3cmJkEuc2hhZG93Lm1hcD9BLnNoYWRvdy5tYXAudGV4dHVyZTpudWxsO2lmKEEuaXNBbWJpZW50TGlnaHQpbSs9ay5yKkoscSs9ay5nKkosbis9ay5iKko7ZWxzZSBpZihBLmlzRGlyZWN0aW9uYWxMaWdodCl7aD1hLmdldChBKTtoLmNvbG9yLmNvcHkoQS5jb2xvcikubXVsdGlwbHlTY2FsYXIoQS5pbnRlbnNpdHkpO2guZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLm1hdHJpeFdvcmxkKTtjLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLnRhcmdldC5tYXRyaXhXb3JsZCk7aC5kaXJlY3Rpb24uc3ViKGMpO2guZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihwKTtpZihoLnNoYWRvdz1BLmNhc3RTaGFkb3cpaz1cbiAgICBBLnNoYWRvdyxoLnNoYWRvd0JpYXM9ay5iaWFzLGguc2hhZG93UmFkaXVzPWsucmFkaXVzLGguc2hhZG93TWFwU2l6ZT1rLm1hcFNpemU7Yi5kaXJlY3Rpb25hbFNoYWRvd01hcFt1XT1EYTtiLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4W3VdPUEuc2hhZG93Lm1hdHJpeDtiLmRpcmVjdGlvbmFsW3VdPWg7dSsrfWVsc2UgaWYoQS5pc1Nwb3RMaWdodCl7aD1hLmdldChBKTtoLnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLm1hdHJpeFdvcmxkKTtoLnBvc2l0aW9uLmFwcGx5TWF0cml4NChwKTtoLmNvbG9yLmNvcHkoaykubXVsdGlwbHlTY2FsYXIoSik7aC5kaXN0YW5jZT1IYTtoLmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oQS5tYXRyaXhXb3JsZCk7Yy5zZXRGcm9tTWF0cml4UG9zaXRpb24oQS50YXJnZXQubWF0cml4V29ybGQpO2guZGlyZWN0aW9uLnN1YihjKTtoLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24ocCk7aC5jb25lQ29zPU1hdGguY29zKEEuYW5nbGUpO1xuICAgIGgucGVudW1icmFDb3M9TWF0aC5jb3MoQS5hbmdsZSooMS1BLnBlbnVtYnJhKSk7aC5kZWNheT0wPT09QS5kaXN0YW5jZT8wOkEuZGVjYXk7aWYoaC5zaGFkb3c9QS5jYXN0U2hhZG93KWs9QS5zaGFkb3csaC5zaGFkb3dCaWFzPWsuYmlhcyxoLnNoYWRvd1JhZGl1cz1rLnJhZGl1cyxoLnNoYWRvd01hcFNpemU9ay5tYXBTaXplO2Iuc3BvdFNoYWRvd01hcFt0XT1EYTtiLnNwb3RTaGFkb3dNYXRyaXhbdF09QS5zaGFkb3cubWF0cml4O2Iuc3BvdFt0XT1oO3QrK31lbHNlIGlmKEEuaXNSZWN0QXJlYUxpZ2h0KWg9YS5nZXQoQSksaC5jb2xvci5jb3B5KGspLm11bHRpcGx5U2NhbGFyKEovKEEud2lkdGgqQS5oZWlnaHQpKSxoLnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLm1hdHJpeFdvcmxkKSxoLnBvc2l0aW9uLmFwcGx5TWF0cml4NChwKSxlLmlkZW50aXR5KCksZC5jb3B5KEEubWF0cml4V29ybGQpLGQucHJlbXVsdGlwbHkocCksZS5leHRyYWN0Um90YXRpb24oZCksaC5oYWxmV2lkdGguc2V0KC41KlxuICAgIEEud2lkdGgsMCwwKSxoLmhhbGZIZWlnaHQuc2V0KDAsLjUqQS5oZWlnaHQsMCksaC5oYWxmV2lkdGguYXBwbHlNYXRyaXg0KGUpLGguaGFsZkhlaWdodC5hcHBseU1hdHJpeDQoZSksYi5yZWN0QXJlYVtsXT1oLGwrKztlbHNlIGlmKEEuaXNQb2ludExpZ2h0KXtoPWEuZ2V0KEEpO2gucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKEEubWF0cml4V29ybGQpO2gucG9zaXRpb24uYXBwbHlNYXRyaXg0KHApO2guY29sb3IuY29weShBLmNvbG9yKS5tdWx0aXBseVNjYWxhcihBLmludGVuc2l0eSk7aC5kaXN0YW5jZT1BLmRpc3RhbmNlO2guZGVjYXk9MD09PUEuZGlzdGFuY2U/MDpBLmRlY2F5O2lmKGguc2hhZG93PUEuY2FzdFNoYWRvdylrPUEuc2hhZG93LGguc2hhZG93Qmlhcz1rLmJpYXMsaC5zaGFkb3dSYWRpdXM9ay5yYWRpdXMsaC5zaGFkb3dNYXBTaXplPWsubWFwU2l6ZSxoLnNoYWRvd0NhbWVyYU5lYXI9ay5jYW1lcmEubmVhcixoLnNoYWRvd0NhbWVyYUZhcj1rLmNhbWVyYS5mYXI7XG4gICAgYi5wb2ludFNoYWRvd01hcFtyXT1EYTtiLnBvaW50U2hhZG93TWF0cml4W3JdPUEuc2hhZG93Lm1hdHJpeDtiLnBvaW50W3JdPWg7cisrfWVsc2UgQS5pc0hlbWlzcGhlcmVMaWdodCYmKGg9YS5nZXQoQSksaC5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKEEubWF0cml4V29ybGQpLGguZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihwKSxoLmRpcmVjdGlvbi5ub3JtYWxpemUoKSxoLnNreUNvbG9yLmNvcHkoQS5jb2xvcikubXVsdGlwbHlTY2FsYXIoSiksaC5ncm91bmRDb2xvci5jb3B5KEEuZ3JvdW5kQ29sb3IpLm11bHRpcGx5U2NhbGFyKEopLGIuaGVtaVt3XT1oLHcrKyl9Yi5hbWJpZW50WzBdPW07Yi5hbWJpZW50WzFdPXE7Yi5hbWJpZW50WzJdPW47Yi5kaXJlY3Rpb25hbC5sZW5ndGg9dTtiLnNwb3QubGVuZ3RoPXQ7Yi5yZWN0QXJlYS5sZW5ndGg9bDtiLnBvaW50Lmxlbmd0aD1yO2IuaGVtaS5sZW5ndGg9dztiLmhhc2g9dStcIixcIityK1wiLFwiK3QrXCIsXCIrbCtcIixcIitcbiAgICB3K1wiLFwiK2cubGVuZ3RofSxzdGF0ZTpifX1mdW5jdGlvbiByZyhhLGIpe3ZhciBjPXt9O3JldHVybnt1cGRhdGU6ZnVuY3Rpb24oZCl7dmFyIGU9Yi5mcmFtZSxmPWQuZ2VvbWV0cnksZz1hLmdldChkLGYpO2NbZy5pZF0hPT1lJiYoZi5pc0dlb21ldHJ5JiZnLnVwZGF0ZUZyb21PYmplY3QoZCksYS51cGRhdGUoZyksY1tnLmlkXT1lKTtyZXR1cm4gZ30sY2xlYXI6ZnVuY3Rpb24oKXtjPXt9fX19ZnVuY3Rpb24gc2coYSl7YT1hLnNwbGl0KFwiXFxuXCIpO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl09YisxK1wiOiBcIithW2JdO3JldHVybiBhLmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gV2UoYSxiLGMpe3ZhciBkPWEuY3JlYXRlU2hhZGVyKGIpO2Euc2hhZGVyU291cmNlKGQsYyk7YS5jb21waWxlU2hhZGVyKGQpOyExPT09YS5nZXRTaGFkZXJQYXJhbWV0ZXIoZCxhLkNPTVBJTEVfU1RBVFVTKSYmY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMU2hhZGVyOiBTaGFkZXIgY291bGRuJ3QgY29tcGlsZS5cIik7XG4gICAgXCJcIiE9PWEuZ2V0U2hhZGVySW5mb0xvZyhkKSYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xTaGFkZXI6IGdsLmdldFNoYWRlckluZm9Mb2coKVwiLGI9PT1hLlZFUlRFWF9TSEFERVI/XCJ2ZXJ0ZXhcIjpcImZyYWdtZW50XCIsYS5nZXRTaGFkZXJJbmZvTG9nKGQpLHNnKGMpKTtyZXR1cm4gZH1mdW5jdGlvbiBYZShhKXtzd2l0Y2goYSl7Y2FzZSAzRTM6cmV0dXJuW1wiTGluZWFyXCIsXCIoIHZhbHVlIClcIl07Y2FzZSAzMDAxOnJldHVybltcInNSR0JcIixcIiggdmFsdWUgKVwiXTtjYXNlIDMwMDI6cmV0dXJuW1wiUkdCRVwiLFwiKCB2YWx1ZSApXCJdO2Nhc2UgMzAwNDpyZXR1cm5bXCJSR0JNXCIsXCIoIHZhbHVlLCA3LjAgKVwiXTtjYXNlIDMwMDU6cmV0dXJuW1wiUkdCTVwiLFwiKCB2YWx1ZSwgMTYuMCApXCJdO2Nhc2UgMzAwNjpyZXR1cm5bXCJSR0JEXCIsXCIoIHZhbHVlLCAyNTYuMCApXCJdO2Nhc2UgMzAwNzpyZXR1cm5bXCJHYW1tYVwiLFwiKCB2YWx1ZSwgZmxvYXQoIEdBTU1BX0ZBQ1RPUiApIClcIl07ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVuc3VwcG9ydGVkIGVuY29kaW5nOiBcIitcbiAgICBhKTt9fWZ1bmN0aW9uIFlkKGEsYil7Yj1YZShiKTtyZXR1cm5cInZlYzQgXCIrYStcIiggdmVjNCB2YWx1ZSApIHsgcmV0dXJuIFwiK2JbMF0rXCJUb0xpbmVhclwiK2JbMV0rXCI7IH1cIn1mdW5jdGlvbiB0ZyhhLGIpe2I9WGUoYik7cmV0dXJuXCJ2ZWM0IFwiK2ErXCIoIHZlYzQgdmFsdWUgKSB7IHJldHVybiBMaW5lYXJUb1wiK2JbMF0rYlsxXStcIjsgfVwifWZ1bmN0aW9uIHVnKGEsYil7c3dpdGNoKGIpe2Nhc2UgMTpiPVwiTGluZWFyXCI7YnJlYWs7Y2FzZSAyOmI9XCJSZWluaGFyZFwiO2JyZWFrO2Nhc2UgMzpiPVwiVW5jaGFydGVkMlwiO2JyZWFrO2Nhc2UgNDpiPVwiT3B0aW1pemVkQ2luZW9uXCI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVuc3VwcG9ydGVkIHRvbmVNYXBwaW5nOiBcIitiKTt9cmV0dXJuXCJ2ZWMzIFwiK2ErXCIoIHZlYzMgY29sb3IgKSB7IHJldHVybiBcIitiK1wiVG9uZU1hcHBpbmcoIGNvbG9yICk7IH1cIn1mdW5jdGlvbiB2ZyhhLGIsYyl7YT1hfHx7fTtyZXR1cm5bYS5kZXJpdmF0aXZlc3x8XG4gICAgYi5lbnZNYXBDdWJlVVZ8fGIuYnVtcE1hcHx8Yi5ub3JtYWxNYXB8fGIuZmxhdFNoYWRpbmc/XCIjZXh0ZW5zaW9uIEdMX09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcyA6IGVuYWJsZVwiOlwiXCIsKGEuZnJhZ0RlcHRofHxiLmxvZ2FyaXRobWljRGVwdGhCdWZmZXIpJiZjLmdldChcIkVYVF9mcmFnX2RlcHRoXCIpP1wiI2V4dGVuc2lvbiBHTF9FWFRfZnJhZ19kZXB0aCA6IGVuYWJsZVwiOlwiXCIsYS5kcmF3QnVmZmVycyYmYy5nZXQoXCJXRUJHTF9kcmF3X2J1ZmZlcnNcIik/XCIjZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnMgOiByZXF1aXJlXCI6XCJcIiwoYS5zaGFkZXJUZXh0dXJlTE9EfHxiLmVudk1hcCkmJmMuZ2V0KFwiRVhUX3NoYWRlcl90ZXh0dXJlX2xvZFwiKT9cIiNleHRlbnNpb24gR0xfRVhUX3NoYWRlcl90ZXh0dXJlX2xvZCA6IGVuYWJsZVwiOlwiXCJdLmZpbHRlcihCYykuam9pbihcIlxcblwiKX1mdW5jdGlvbiB3ZyhhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107ITEhPT1kJiZiLnB1c2goXCIjZGVmaW5lIFwiK1xuICAgIGMrXCIgXCIrZCl9cmV0dXJuIGIuam9pbihcIlxcblwiKX1mdW5jdGlvbiBCYyhhKXtyZXR1cm5cIlwiIT09YX1mdW5jdGlvbiBZZShhLGIpe3JldHVybiBhLnJlcGxhY2UoL05VTV9ESVJfTElHSFRTL2csYi5udW1EaXJMaWdodHMpLnJlcGxhY2UoL05VTV9TUE9UX0xJR0hUUy9nLGIubnVtU3BvdExpZ2h0cykucmVwbGFjZSgvTlVNX1JFQ1RfQVJFQV9MSUdIVFMvZyxiLm51bVJlY3RBcmVhTGlnaHRzKS5yZXBsYWNlKC9OVU1fUE9JTlRfTElHSFRTL2csYi5udW1Qb2ludExpZ2h0cykucmVwbGFjZSgvTlVNX0hFTUlfTElHSFRTL2csYi5udW1IZW1pTGlnaHRzKX1mdW5jdGlvbiBaZChhKXtyZXR1cm4gYS5yZXBsYWNlKC9eWyBcXHRdKiNpbmNsdWRlICs8KFtcXHdcXGQuXSspPi9nbSxmdW5jdGlvbihhLGMpe2E9UltjXTtpZih2b2lkIDA9PT1hKXRocm93IEVycm9yKFwiQ2FuIG5vdCByZXNvbHZlICNpbmNsdWRlIDxcIitjK1wiPlwiKTtyZXR1cm4gWmQoYSl9KX1mdW5jdGlvbiBaZShhKXtyZXR1cm4gYS5yZXBsYWNlKC9mb3IgXFwoIGludCBpIFxcPSAoXFxkKylcXDsgaSA8IChcXGQrKVxcOyBpIFxcK1xcKyBcXCkgXFx7KFtcXHNcXFNdKz8pKD89XFx9KVxcfS9nLFxuICAgIGZ1bmN0aW9uKGEsYyxkLGUpe2E9XCJcIjtmb3IoYz1wYXJzZUludChjKTtjPHBhcnNlSW50KGQpO2MrKylhKz1lLnJlcGxhY2UoL1xcWyBpIFxcXS9nLFwiWyBcIitjK1wiIF1cIik7cmV0dXJuIGF9KX1mdW5jdGlvbiB4ZyhhLGIsYyxkLGUsZil7dmFyIGc9YS5jb250ZXh0LGg9ZC5kZWZpbmVzLGs9ZS52ZXJ0ZXhTaGFkZXIsbT1lLmZyYWdtZW50U2hhZGVyLHE9XCJTSEFET1dNQVBfVFlQRV9CQVNJQ1wiOzE9PT1mLnNoYWRvd01hcFR5cGU/cT1cIlNIQURPV01BUF9UWVBFX1BDRlwiOjI9PT1mLnNoYWRvd01hcFR5cGUmJihxPVwiU0hBRE9XTUFQX1RZUEVfUENGX1NPRlRcIik7dmFyIG49XCJFTlZNQVBfVFlQRV9DVUJFXCIsdT1cIkVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cIixyPVwiRU5WTUFQX0JMRU5ESU5HX01VTFRJUExZXCI7aWYoZi5lbnZNYXApe3N3aXRjaChkLmVudk1hcC5tYXBwaW5nKXtjYXNlIDMwMTpjYXNlIDMwMjpuPVwiRU5WTUFQX1RZUEVfQ1VCRVwiO2JyZWFrO2Nhc2UgMzA2OmNhc2UgMzA3Om49XCJFTlZNQVBfVFlQRV9DVUJFX1VWXCI7XG4gICAgYnJlYWs7Y2FzZSAzMDM6Y2FzZSAzMDQ6bj1cIkVOVk1BUF9UWVBFX0VRVUlSRUNcIjticmVhaztjYXNlIDMwNTpuPVwiRU5WTUFQX1RZUEVfU1BIRVJFXCJ9c3dpdGNoKGQuZW52TWFwLm1hcHBpbmcpe2Nhc2UgMzAyOmNhc2UgMzA0OnU9XCJFTlZNQVBfTU9ERV9SRUZSQUNUSU9OXCJ9c3dpdGNoKGQuY29tYmluZSl7Y2FzZSAwOnI9XCJFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFlcIjticmVhaztjYXNlIDE6cj1cIkVOVk1BUF9CTEVORElOR19NSVhcIjticmVhaztjYXNlIDI6cj1cIkVOVk1BUF9CTEVORElOR19BRERcIn19dmFyIHQ9MDxhLmdhbW1hRmFjdG9yP2EuZ2FtbWFGYWN0b3I6MSxsPXZnKGQuZXh0ZW5zaW9ucyxmLGIpLHA9d2coaCksej1nLmNyZWF0ZVByb2dyYW0oKTtkLmlzUmF3U2hhZGVyTWF0ZXJpYWw/KGg9W3BdLmZpbHRlcihCYykuam9pbihcIlxcblwiKSwwPGgubGVuZ3RoJiYoaCs9XCJcXG5cIiksYj1bbCxwXS5maWx0ZXIoQmMpLmpvaW4oXCJcXG5cIiksMDxiLmxlbmd0aCYmKGIrPVwiXFxuXCIpKTooaD1cbiAgICBbXCJwcmVjaXNpb24gXCIrZi5wcmVjaXNpb24rXCIgZmxvYXQ7XCIsXCJwcmVjaXNpb24gXCIrZi5wcmVjaXNpb24rXCIgaW50O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIitlLm5hbWUscCxmLnN1cHBvcnRzVmVydGV4VGV4dHVyZXM/XCIjZGVmaW5lIFZFUlRFWF9URVhUVVJFU1wiOlwiXCIsXCIjZGVmaW5lIEdBTU1BX0ZBQ1RPUiBcIit0LFwiI2RlZmluZSBNQVhfQk9ORVMgXCIrZi5tYXhCb25lcyxmLnVzZUZvZyYmZi5mb2c/XCIjZGVmaW5lIFVTRV9GT0dcIjpcIlwiLGYudXNlRm9nJiZmLmZvZ0V4cD9cIiNkZWZpbmUgRk9HX0VYUDJcIjpcIlwiLGYubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XCJcIixmLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsZi5lbnZNYXA/XCIjZGVmaW5lIFwiK3U6XCJcIixmLmxpZ2h0TWFwP1wiI2RlZmluZSBVU0VfTElHSFRNQVBcIjpcIlwiLGYuYW9NYXA/XCIjZGVmaW5lIFVTRV9BT01BUFwiOlwiXCIsZi5lbWlzc2l2ZU1hcD9cIiNkZWZpbmUgVVNFX0VNSVNTSVZFTUFQXCI6XCJcIixmLmJ1bXBNYXA/XCIjZGVmaW5lIFVTRV9CVU1QTUFQXCI6XG4gICAgXCJcIixmLm5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX05PUk1BTE1BUFwiOlwiXCIsZi5kaXNwbGFjZW1lbnRNYXAmJmYuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz9cIiNkZWZpbmUgVVNFX0RJU1BMQUNFTUVOVE1BUFwiOlwiXCIsZi5zcGVjdWxhck1hcD9cIiNkZWZpbmUgVVNFX1NQRUNVTEFSTUFQXCI6XCJcIixmLnJvdWdobmVzc01hcD9cIiNkZWZpbmUgVVNFX1JPVUdITkVTU01BUFwiOlwiXCIsZi5tZXRhbG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9NRVRBTE5FU1NNQVBcIjpcIlwiLGYuYWxwaGFNYXA/XCIjZGVmaW5lIFVTRV9BTFBIQU1BUFwiOlwiXCIsZi52ZXJ0ZXhDb2xvcnM/XCIjZGVmaW5lIFVTRV9DT0xPUlwiOlwiXCIsZi5mbGF0U2hhZGluZz9cIiNkZWZpbmUgRkxBVF9TSEFERURcIjpcIlwiLGYuc2tpbm5pbmc/XCIjZGVmaW5lIFVTRV9TS0lOTklOR1wiOlwiXCIsZi51c2VWZXJ0ZXhUZXh0dXJlP1wiI2RlZmluZSBCT05FX1RFWFRVUkVcIjpcIlwiLGYubW9ycGhUYXJnZXRzP1wiI2RlZmluZSBVU0VfTU9SUEhUQVJHRVRTXCI6XCJcIixmLm1vcnBoTm9ybWFscyYmXG4gICAgITE9PT1mLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBVU0VfTU9SUEhOT1JNQUxTXCI6XCJcIixmLmRvdWJsZVNpZGVkP1wiI2RlZmluZSBET1VCTEVfU0lERURcIjpcIlwiLGYuZmxpcFNpZGVkP1wiI2RlZmluZSBGTElQX1NJREVEXCI6XCJcIixcIiNkZWZpbmUgTlVNX0NMSVBQSU5HX1BMQU5FUyBcIitmLm51bUNsaXBwaW5nUGxhbmVzLGYuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgVVNFX1NIQURPV01BUFwiOlwiXCIsZi5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBcIitxOlwiXCIsZi5zaXplQXR0ZW51YXRpb24/XCIjZGVmaW5lIFVTRV9TSVpFQVRURU5VQVRJT05cIjpcIlwiLGYubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGXCI6XCJcIixmLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJmIuZ2V0KFwiRVhUX2ZyYWdfZGVwdGhcIik/XCIjZGVmaW5lIFVTRV9MT0dERVBUSEJVRl9FWFRcIjpcIlwiLFwidW5pZm9ybSBtYXQ0IG1vZGVsTWF0cml4O1wiLFwidW5pZm9ybSBtYXQ0IG1vZGVsVmlld01hdHJpeDtcIixcbiAgICBcInVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4O1wiLFwidW5pZm9ybSBtYXQ0IHZpZXdNYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDMgbm9ybWFsTWF0cml4O1wiLFwidW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uO1wiLFwiYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XCIsXCJhdHRyaWJ1dGUgdmVjMyBub3JtYWw7XCIsXCJhdHRyaWJ1dGUgdmVjMiB1djtcIixcIiNpZmRlZiBVU0VfQ09MT1JcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIGNvbG9yO1wiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQwO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQxO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQyO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQzO1wiLFwiXFx0I2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMDtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMTtcIixcbiAgICBcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMjtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMztcIixcIlxcdCNlbHNlXCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDQ7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDU7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDY7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDc7XCIsXCJcXHQjZW5kaWZcIixcIiNlbmRpZlwiLFwiI2lmZGVmIFVTRV9TS0lOTklOR1wiLFwiXFx0YXR0cmlidXRlIHZlYzQgc2tpbkluZGV4O1wiLFwiXFx0YXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDtcIixcIiNlbmRpZlwiLFwiXFxuXCJdLmZpbHRlcihCYykuam9pbihcIlxcblwiKSxiPVtsLFwicHJlY2lzaW9uIFwiK2YucHJlY2lzaW9uK1wiIGZsb2F0O1wiLFwicHJlY2lzaW9uIFwiK2YucHJlY2lzaW9uK1wiIGludDtcIixcIiNkZWZpbmUgU0hBREVSX05BTUUgXCIrZS5uYW1lLHAsZi5hbHBoYVRlc3Q/XCIjZGVmaW5lIEFMUEhBVEVTVCBcIitmLmFscGhhVGVzdDpcbiAgICBcIlwiLFwiI2RlZmluZSBHQU1NQV9GQUNUT1IgXCIrdCxmLnVzZUZvZyYmZi5mb2c/XCIjZGVmaW5lIFVTRV9GT0dcIjpcIlwiLGYudXNlRm9nJiZmLmZvZ0V4cD9cIiNkZWZpbmUgRk9HX0VYUDJcIjpcIlwiLGYubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XCJcIixmLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsZi5lbnZNYXA/XCIjZGVmaW5lIFwiK246XCJcIixmLmVudk1hcD9cIiNkZWZpbmUgXCIrdTpcIlwiLGYuZW52TWFwP1wiI2RlZmluZSBcIityOlwiXCIsZi5saWdodE1hcD9cIiNkZWZpbmUgVVNFX0xJR0hUTUFQXCI6XCJcIixmLmFvTWFwP1wiI2RlZmluZSBVU0VfQU9NQVBcIjpcIlwiLGYuZW1pc3NpdmVNYXA/XCIjZGVmaW5lIFVTRV9FTUlTU0lWRU1BUFwiOlwiXCIsZi5idW1wTWFwP1wiI2RlZmluZSBVU0VfQlVNUE1BUFwiOlwiXCIsZi5ub3JtYWxNYXA/XCIjZGVmaW5lIFVTRV9OT1JNQUxNQVBcIjpcIlwiLGYuc3BlY3VsYXJNYXA/XCIjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUFwiOlwiXCIsZi5yb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9ST1VHSE5FU1NNQVBcIjpcbiAgICBcIlwiLGYubWV0YWxuZXNzTWFwP1wiI2RlZmluZSBVU0VfTUVUQUxORVNTTUFQXCI6XCJcIixmLmFscGhhTWFwP1wiI2RlZmluZSBVU0VfQUxQSEFNQVBcIjpcIlwiLGYudmVydGV4Q29sb3JzP1wiI2RlZmluZSBVU0VfQ09MT1JcIjpcIlwiLGYuZ3JhZGllbnRNYXA/XCIjZGVmaW5lIFVTRV9HUkFESUVOVE1BUFwiOlwiXCIsZi5mbGF0U2hhZGluZz9cIiNkZWZpbmUgRkxBVF9TSEFERURcIjpcIlwiLGYuZG91YmxlU2lkZWQ/XCIjZGVmaW5lIERPVUJMRV9TSURFRFwiOlwiXCIsZi5mbGlwU2lkZWQ/XCIjZGVmaW5lIEZMSVBfU0lERURcIjpcIlwiLFwiI2RlZmluZSBOVU1fQ0xJUFBJTkdfUExBTkVTIFwiK2YubnVtQ2xpcHBpbmdQbGFuZXMsXCIjZGVmaW5lIFVOSU9OX0NMSVBQSU5HX1BMQU5FUyBcIisoZi5udW1DbGlwcGluZ1BsYW5lcy1mLm51bUNsaXBJbnRlcnNlY3Rpb24pLGYuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgVVNFX1NIQURPV01BUFwiOlwiXCIsZi5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBcIitxOlwiXCIsZi5wcmVtdWx0aXBsaWVkQWxwaGE/XG4gICAgXCIjZGVmaW5lIFBSRU1VTFRJUExJRURfQUxQSEFcIjpcIlwiLGYucGh5c2ljYWxseUNvcnJlY3RMaWdodHM/XCIjZGVmaW5lIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcIjpcIlwiLGYubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGXCI6XCJcIixmLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJmIuZ2V0KFwiRVhUX2ZyYWdfZGVwdGhcIik/XCIjZGVmaW5lIFVTRV9MT0dERVBUSEJVRl9FWFRcIjpcIlwiLGYuZW52TWFwJiZiLmdldChcIkVYVF9zaGFkZXJfdGV4dHVyZV9sb2RcIik/XCIjZGVmaW5lIFRFWFRVUkVfTE9EX0VYVFwiOlwiXCIsXCJ1bmlmb3JtIG1hdDQgdmlld01hdHJpeDtcIixcInVuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjtcIiwwIT09Zi50b25lTWFwcGluZz9cIiNkZWZpbmUgVE9ORV9NQVBQSU5HXCI6XCJcIiwwIT09Zi50b25lTWFwcGluZz9SLnRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ6XCJcIiwwIT09Zi50b25lTWFwcGluZz91ZyhcInRvbmVNYXBwaW5nXCIsZi50b25lTWFwcGluZyk6XG4gICAgXCJcIixmLmRpdGhlcmluZz9cIiNkZWZpbmUgRElUSEVSSU5HXCI6XCJcIixmLm91dHB1dEVuY29kaW5nfHxmLm1hcEVuY29kaW5nfHxmLmVudk1hcEVuY29kaW5nfHxmLmVtaXNzaXZlTWFwRW5jb2Rpbmc/Ui5lbmNvZGluZ3NfcGFyc19mcmFnbWVudDpcIlwiLGYubWFwRW5jb2Rpbmc/WWQoXCJtYXBUZXhlbFRvTGluZWFyXCIsZi5tYXBFbmNvZGluZyk6XCJcIixmLmVudk1hcEVuY29kaW5nP1lkKFwiZW52TWFwVGV4ZWxUb0xpbmVhclwiLGYuZW52TWFwRW5jb2RpbmcpOlwiXCIsZi5lbWlzc2l2ZU1hcEVuY29kaW5nP1lkKFwiZW1pc3NpdmVNYXBUZXhlbFRvTGluZWFyXCIsZi5lbWlzc2l2ZU1hcEVuY29kaW5nKTpcIlwiLGYub3V0cHV0RW5jb2Rpbmc/dGcoXCJsaW5lYXJUb091dHB1dFRleGVsXCIsZi5vdXRwdXRFbmNvZGluZyk6XCJcIixmLmRlcHRoUGFja2luZz9cIiNkZWZpbmUgREVQVEhfUEFDS0lORyBcIitkLmRlcHRoUGFja2luZzpcIlwiLFwiXFxuXCJdLmZpbHRlcihCYykuam9pbihcIlxcblwiKSk7az1aZChrKTtrPVllKGssZik7XG4gICAgbT1aZChtKTttPVllKG0sZik7ZC5pc1NoYWRlck1hdGVyaWFsfHwoaz1aZShrKSxtPVplKG0pKTttPWIrbTtrPVdlKGcsZy5WRVJURVhfU0hBREVSLGgrayk7bT1XZShnLGcuRlJBR01FTlRfU0hBREVSLG0pO2cuYXR0YWNoU2hhZGVyKHosayk7Zy5hdHRhY2hTaGFkZXIoeixtKTt2b2lkIDAhPT1kLmluZGV4MEF0dHJpYnV0ZU5hbWU/Zy5iaW5kQXR0cmliTG9jYXRpb24oeiwwLGQuaW5kZXgwQXR0cmlidXRlTmFtZSk6ITA9PT1mLm1vcnBoVGFyZ2V0cyYmZy5iaW5kQXR0cmliTG9jYXRpb24oeiwwLFwicG9zaXRpb25cIik7Zy5saW5rUHJvZ3JhbSh6KTtmPWcuZ2V0UHJvZ3JhbUluZm9Mb2coeik7ZT1nLmdldFNoYWRlckluZm9Mb2coayk7cT1nLmdldFNoYWRlckluZm9Mb2cobSk7dT1uPSEwO2lmKCExPT09Zy5nZXRQcm9ncmFtUGFyYW1ldGVyKHosZy5MSU5LX1NUQVRVUykpbj0hMSxjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiBzaGFkZXIgZXJyb3I6IFwiLGcuZ2V0RXJyb3IoKSxcbiAgICBcImdsLlZBTElEQVRFX1NUQVRVU1wiLGcuZ2V0UHJvZ3JhbVBhcmFtZXRlcih6LGcuVkFMSURBVEVfU1RBVFVTKSxcImdsLmdldFByb2dyYW1JbmZvTG9nXCIsZixlLHEpO2Vsc2UgaWYoXCJcIiE9PWYpY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiBnbC5nZXRQcm9ncmFtSW5mb0xvZygpXCIsZik7ZWxzZSBpZihcIlwiPT09ZXx8XCJcIj09PXEpdT0hMTt1JiYodGhpcy5kaWFnbm9zdGljcz17cnVubmFibGU6bixtYXRlcmlhbDpkLHByb2dyYW1Mb2c6Zix2ZXJ0ZXhTaGFkZXI6e2xvZzplLHByZWZpeDpofSxmcmFnbWVudFNoYWRlcjp7bG9nOnEscHJlZml4OmJ9fSk7Zy5kZWxldGVTaGFkZXIoayk7Zy5kZWxldGVTaGFkZXIobSk7dmFyIHk7dGhpcy5nZXRVbmlmb3Jtcz1mdW5jdGlvbigpe3ZvaWQgMD09PXkmJih5PW5ldyBtYihnLHosYSkpO3JldHVybiB5fTt2YXIgSTt0aGlzLmdldEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtpZih2b2lkIDA9PT1JKXtmb3IodmFyIGE9e30sYj1nLmdldFByb2dyYW1QYXJhbWV0ZXIoeixcbiAgICBnLkFDVElWRV9BVFRSSUJVVEVTKSxjPTA7YzxiO2MrKyl7dmFyIGQ9Zy5nZXRBY3RpdmVBdHRyaWIoeixjKS5uYW1lO2FbZF09Zy5nZXRBdHRyaWJMb2NhdGlvbih6LGQpfUk9YX1yZXR1cm4gSX07dGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7Zy5kZWxldGVQcm9ncmFtKHopO3RoaXMucHJvZ3JhbT12b2lkIDB9O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3VuaWZvcm1zOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW06IC51bmlmb3JtcyBpcyBub3cgLmdldFVuaWZvcm1zKCkuXCIpO3JldHVybiB0aGlzLmdldFVuaWZvcm1zKCl9fSxhdHRyaWJ1dGVzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW06IC5hdHRyaWJ1dGVzIGlzIG5vdyAuZ2V0QXR0cmlidXRlcygpLlwiKTtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVzKCl9fX0pO3RoaXMuaWQ9eWcrKzt0aGlzLmNvZGU9Yzt0aGlzLnVzZWRUaW1lcz0xO1xuICAgIHRoaXMucHJvZ3JhbT16O3RoaXMudmVydGV4U2hhZGVyPWs7dGhpcy5mcmFnbWVudFNoYWRlcj1tO3JldHVybiB0aGlzfWZ1bmN0aW9uIHpnKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7aWYoYSlhLmlzVGV4dHVyZT9jPWEuZW5jb2Rpbmc6YS5pc1dlYkdMUmVuZGVyVGFyZ2V0JiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtcy5nZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwOiBkb24ndCB1c2UgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxjPWEudGV4dHVyZS5lbmNvZGluZyk7ZWxzZSB2YXIgYz0zRTM7M0UzPT09YyYmYiYmKGM9MzAwNyk7cmV0dXJuIGN9dmFyIGU9W10sZj17TWVzaERlcHRoTWF0ZXJpYWw6XCJkZXB0aFwiLE1lc2hEaXN0YW5jZU1hdGVyaWFsOlwiZGlzdGFuY2VSR0JBXCIsTWVzaE5vcm1hbE1hdGVyaWFsOlwibm9ybWFsXCIsTWVzaEJhc2ljTWF0ZXJpYWw6XCJiYXNpY1wiLE1lc2hMYW1iZXJ0TWF0ZXJpYWw6XCJsYW1iZXJ0XCIsXG4gICAgTWVzaFBob25nTWF0ZXJpYWw6XCJwaG9uZ1wiLE1lc2hUb29uTWF0ZXJpYWw6XCJwaG9uZ1wiLE1lc2hTdGFuZGFyZE1hdGVyaWFsOlwicGh5c2ljYWxcIixNZXNoUGh5c2ljYWxNYXRlcmlhbDpcInBoeXNpY2FsXCIsTGluZUJhc2ljTWF0ZXJpYWw6XCJiYXNpY1wiLExpbmVEYXNoZWRNYXRlcmlhbDpcImRhc2hlZFwiLFBvaW50c01hdGVyaWFsOlwicG9pbnRzXCIsU2hhZG93TWF0ZXJpYWw6XCJzaGFkb3dcIn0sZz1cInByZWNpc2lvbiBzdXBwb3J0c1ZlcnRleFRleHR1cmVzIG1hcCBtYXBFbmNvZGluZyBlbnZNYXAgZW52TWFwTW9kZSBlbnZNYXBFbmNvZGluZyBsaWdodE1hcCBhb01hcCBlbWlzc2l2ZU1hcCBlbWlzc2l2ZU1hcEVuY29kaW5nIGJ1bXBNYXAgbm9ybWFsTWFwIGRpc3BsYWNlbWVudE1hcCBzcGVjdWxhck1hcCByb3VnaG5lc3NNYXAgbWV0YWxuZXNzTWFwIGdyYWRpZW50TWFwIGFscGhhTWFwIGNvbWJpbmUgdmVydGV4Q29sb3JzIGZvZyB1c2VGb2cgZm9nRXhwIGZsYXRTaGFkaW5nIHNpemVBdHRlbnVhdGlvbiBsb2dhcml0aG1pY0RlcHRoQnVmZmVyIHNraW5uaW5nIG1heEJvbmVzIHVzZVZlcnRleFRleHR1cmUgbW9ycGhUYXJnZXRzIG1vcnBoTm9ybWFscyBtYXhNb3JwaFRhcmdldHMgbWF4TW9ycGhOb3JtYWxzIHByZW11bHRpcGxpZWRBbHBoYSBudW1EaXJMaWdodHMgbnVtUG9pbnRMaWdodHMgbnVtU3BvdExpZ2h0cyBudW1IZW1pTGlnaHRzIG51bVJlY3RBcmVhTGlnaHRzIHNoYWRvd01hcEVuYWJsZWQgc2hhZG93TWFwVHlwZSB0b25lTWFwcGluZyBwaHlzaWNhbGx5Q29ycmVjdExpZ2h0cyBhbHBoYVRlc3QgZG91YmxlU2lkZWQgZmxpcFNpZGVkIG51bUNsaXBwaW5nUGxhbmVzIG51bUNsaXBJbnRlcnNlY3Rpb24gZGVwdGhQYWNraW5nIGRpdGhlcmluZ1wiLnNwbGl0KFwiIFwiKTtcbiAgICB0aGlzLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oYixlLGcscSxuLHUscil7dmFyIGg9ZltiLnR5cGVdO2lmKHIuaXNTa2lubmVkTWVzaCl7dmFyIGs9ci5za2VsZXRvbi5ib25lcztpZihjLmZsb2F0VmVydGV4VGV4dHVyZXMpaz0xMDI0O2Vsc2V7dmFyIG09TWF0aC5taW4oTWF0aC5mbG9vcigoYy5tYXhWZXJ0ZXhVbmlmb3Jtcy0yMCkvNCksay5sZW5ndGgpO208ay5sZW5ndGg/KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFNrZWxldG9uIGhhcyBcIitrLmxlbmd0aCtcIiBib25lcy4gVGhpcyBHUFUgc3VwcG9ydHMgXCIrbStcIi5cIiksaz0wKTprPW19fWVsc2Ugaz0wO209Yy5wcmVjaXNpb247bnVsbCE9PWIucHJlY2lzaW9uJiYobT1jLmdldE1heFByZWNpc2lvbihiLnByZWNpc2lvbiksbSE9PWIucHJlY2lzaW9uJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW0uZ2V0UGFyYW1ldGVyczpcIixiLnByZWNpc2lvbixcIm5vdCBzdXBwb3J0ZWQsIHVzaW5nXCIsbSxcImluc3RlYWQuXCIpKTtcbiAgICB2YXIgbD1hLmdldFJlbmRlclRhcmdldCgpO3JldHVybntzaGFkZXJJRDpoLHByZWNpc2lvbjptLHN1cHBvcnRzVmVydGV4VGV4dHVyZXM6Yy52ZXJ0ZXhUZXh0dXJlcyxvdXRwdXRFbmNvZGluZzpkKGw/bC50ZXh0dXJlOm51bGwsYS5nYW1tYU91dHB1dCksbWFwOiEhYi5tYXAsbWFwRW5jb2Rpbmc6ZChiLm1hcCxhLmdhbW1hSW5wdXQpLGVudk1hcDohIWIuZW52TWFwLGVudk1hcE1vZGU6Yi5lbnZNYXAmJmIuZW52TWFwLm1hcHBpbmcsZW52TWFwRW5jb2Rpbmc6ZChiLmVudk1hcCxhLmdhbW1hSW5wdXQpLGVudk1hcEN1YmVVVjohIWIuZW52TWFwJiYoMzA2PT09Yi5lbnZNYXAubWFwcGluZ3x8MzA3PT09Yi5lbnZNYXAubWFwcGluZyksbGlnaHRNYXA6ISFiLmxpZ2h0TWFwLGFvTWFwOiEhYi5hb01hcCxlbWlzc2l2ZU1hcDohIWIuZW1pc3NpdmVNYXAsZW1pc3NpdmVNYXBFbmNvZGluZzpkKGIuZW1pc3NpdmVNYXAsYS5nYW1tYUlucHV0KSxidW1wTWFwOiEhYi5idW1wTWFwLG5vcm1hbE1hcDohIWIubm9ybWFsTWFwLFxuICAgIGRpc3BsYWNlbWVudE1hcDohIWIuZGlzcGxhY2VtZW50TWFwLHJvdWdobmVzc01hcDohIWIucm91Z2huZXNzTWFwLG1ldGFsbmVzc01hcDohIWIubWV0YWxuZXNzTWFwLHNwZWN1bGFyTWFwOiEhYi5zcGVjdWxhck1hcCxhbHBoYU1hcDohIWIuYWxwaGFNYXAsZ3JhZGllbnRNYXA6ISFiLmdyYWRpZW50TWFwLGNvbWJpbmU6Yi5jb21iaW5lLHZlcnRleENvbG9yczpiLnZlcnRleENvbG9ycyxmb2c6ISFxLHVzZUZvZzpiLmZvZyxmb2dFeHA6cSYmcS5pc0ZvZ0V4cDIsZmxhdFNoYWRpbmc6Yi5mbGF0U2hhZGluZyxzaXplQXR0ZW51YXRpb246Yi5zaXplQXR0ZW51YXRpb24sbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjpjLmxvZ2FyaXRobWljRGVwdGhCdWZmZXIsc2tpbm5pbmc6Yi5za2lubmluZyYmMDxrLG1heEJvbmVzOmssdXNlVmVydGV4VGV4dHVyZTpjLmZsb2F0VmVydGV4VGV4dHVyZXMsbW9ycGhUYXJnZXRzOmIubW9ycGhUYXJnZXRzLG1vcnBoTm9ybWFsczpiLm1vcnBoTm9ybWFscyxcbiAgICBtYXhNb3JwaFRhcmdldHM6YS5tYXhNb3JwaFRhcmdldHMsbWF4TW9ycGhOb3JtYWxzOmEubWF4TW9ycGhOb3JtYWxzLG51bURpckxpZ2h0czplLmRpcmVjdGlvbmFsLmxlbmd0aCxudW1Qb2ludExpZ2h0czplLnBvaW50Lmxlbmd0aCxudW1TcG90TGlnaHRzOmUuc3BvdC5sZW5ndGgsbnVtUmVjdEFyZWFMaWdodHM6ZS5yZWN0QXJlYS5sZW5ndGgsbnVtSGVtaUxpZ2h0czplLmhlbWkubGVuZ3RoLG51bUNsaXBwaW5nUGxhbmVzOm4sbnVtQ2xpcEludGVyc2VjdGlvbjp1LGRpdGhlcmluZzpiLmRpdGhlcmluZyxzaGFkb3dNYXBFbmFibGVkOmEuc2hhZG93TWFwLmVuYWJsZWQmJnIucmVjZWl2ZVNoYWRvdyYmMDxnLmxlbmd0aCxzaGFkb3dNYXBUeXBlOmEuc2hhZG93TWFwLnR5cGUsdG9uZU1hcHBpbmc6YS50b25lTWFwcGluZyxwaHlzaWNhbGx5Q29ycmVjdExpZ2h0czphLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzLHByZW11bHRpcGxpZWRBbHBoYTpiLnByZW11bHRpcGxpZWRBbHBoYSxcbiAgICBhbHBoYVRlc3Q6Yi5hbHBoYVRlc3QsZG91YmxlU2lkZWQ6Mj09PWIuc2lkZSxmbGlwU2lkZWQ6MT09PWIuc2lkZSxkZXB0aFBhY2tpbmc6dm9pZCAwIT09Yi5kZXB0aFBhY2tpbmc/Yi5kZXB0aFBhY2tpbmc6ITF9fTt0aGlzLmdldFByb2dyYW1Db2RlPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9W107Yy5zaGFkZXJJRD9kLnB1c2goYy5zaGFkZXJJRCk6KGQucHVzaChiLmZyYWdtZW50U2hhZGVyKSxkLnB1c2goYi52ZXJ0ZXhTaGFkZXIpKTtpZih2b2lkIDAhPT1iLmRlZmluZXMpZm9yKHZhciBlIGluIGIuZGVmaW5lcylkLnB1c2goZSksZC5wdXNoKGIuZGVmaW5lc1tlXSk7Zm9yKGU9MDtlPGcubGVuZ3RoO2UrKylkLnB1c2goY1tnW2VdXSk7ZC5wdXNoKGIub25CZWZvcmVDb21waWxlLnRvU3RyaW5nKCkpO2QucHVzaChhLmdhbW1hT3V0cHV0KTtyZXR1cm4gZC5qb2luKCl9O3RoaXMuYWNxdWlyZVByb2dyYW09ZnVuY3Rpb24oYyxkLGYsZyl7Zm9yKHZhciBoLGs9MCxtPWUubGVuZ3RoO2s8XG4gICAgbTtrKyspe3ZhciBxPWVba107aWYocS5jb2RlPT09Zyl7aD1xOysraC51c2VkVGltZXM7YnJlYWt9fXZvaWQgMD09PWgmJihoPW5ldyB4ZyhhLGIsZyxjLGQsZiksZS5wdXNoKGgpKTtyZXR1cm4gaH07dGhpcy5yZWxlYXNlUHJvZ3JhbT1mdW5jdGlvbihhKXtpZigwPT09LS1hLnVzZWRUaW1lcyl7dmFyIGI9ZS5pbmRleE9mKGEpO2VbYl09ZVtlLmxlbmd0aC0xXTtlLnBvcCgpO2EuZGVzdHJveSgpfX07dGhpcy5wcm9ncmFtcz1lfWZ1bmN0aW9uIEFnKGEsYixjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoYSxiKXtpZihhLndpZHRoPmJ8fGEuaGVpZ2h0PmIpe2IvPU1hdGgubWF4KGEud2lkdGgsYS5oZWlnaHQpO3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImNhbnZhc1wiKTtjLndpZHRoPU1hdGguZmxvb3IoYS53aWR0aCpiKTtjLmhlaWdodD1NYXRoLmZsb29yKGEuaGVpZ2h0KmIpO2MuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShhLFxuICAgIDAsMCxhLndpZHRoLGEuaGVpZ2h0LDAsMCxjLndpZHRoLGMuaGVpZ2h0KTtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBpbWFnZSBpcyB0b28gYmlnIChcIithLndpZHRoK1wieFwiK2EuaGVpZ2h0K1wiKS4gUmVzaXplZCB0byBcIitjLndpZHRoK1wieFwiK2MuaGVpZ2h0LGEpO3JldHVybiBjfXJldHVybiBhfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIFEuaXNQb3dlck9mVHdvKGEud2lkdGgpJiZRLmlzUG93ZXJPZlR3byhhLmhlaWdodCl9ZnVuY3Rpb24gbShhLGIpe3JldHVybiBhLmdlbmVyYXRlTWlwbWFwcyYmYiYmMTAwMyE9PWEubWluRmlsdGVyJiYxMDA2IT09YS5taW5GaWx0ZXJ9ZnVuY3Rpb24gcShiKXtyZXR1cm4gMTAwMz09PWJ8fDEwMDQ9PT1ifHwxMDA1PT09Yj9hLk5FQVJFU1Q6YS5MSU5FQVJ9ZnVuY3Rpb24gbihiKXtiPWIudGFyZ2V0O2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixuKTthOnt2YXIgYz1kLmdldChiKTtpZihiLmltYWdlJiZjLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpYS5kZWxldGVUZXh0dXJlKGMuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZSk7XG4gICAgZWxzZXtpZih2b2lkIDA9PT1jLl9fd2ViZ2xJbml0KWJyZWFrIGE7YS5kZWxldGVUZXh0dXJlKGMuX193ZWJnbFRleHR1cmUpfWQucmVtb3ZlKGIpfWIuaXNWaWRlb1RleHR1cmUmJmRlbGV0ZSB5W2IuaWRdO2cudGV4dHVyZXMtLX1mdW5jdGlvbiB1KGIpe2I9Yi50YXJnZXQ7Yi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLHUpO3ZhciBjPWQuZ2V0KGIpLGU9ZC5nZXQoYi50ZXh0dXJlKTtpZihiKXt2b2lkIDAhPT1lLl9fd2ViZ2xUZXh0dXJlJiZhLmRlbGV0ZVRleHR1cmUoZS5fX3dlYmdsVGV4dHVyZSk7Yi5kZXB0aFRleHR1cmUmJmIuZGVwdGhUZXh0dXJlLmRpc3Bvc2UoKTtpZihiLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlKWZvcihlPTA7Nj5lO2UrKylhLmRlbGV0ZUZyYW1lYnVmZmVyKGMuX193ZWJnbEZyYW1lYnVmZmVyW2VdKSxjLl9fd2ViZ2xEZXB0aGJ1ZmZlciYmYS5kZWxldGVSZW5kZXJidWZmZXIoYy5fX3dlYmdsRGVwdGhidWZmZXJbZV0pO2Vsc2UgYS5kZWxldGVGcmFtZWJ1ZmZlcihjLl9fd2ViZ2xGcmFtZWJ1ZmZlciksXG4gICAgYy5fX3dlYmdsRGVwdGhidWZmZXImJmEuZGVsZXRlUmVuZGVyYnVmZmVyKGMuX193ZWJnbERlcHRoYnVmZmVyKTtkLnJlbW92ZShiLnRleHR1cmUpO2QucmVtb3ZlKGIpfWcudGV4dHVyZXMtLX1mdW5jdGlvbiByKGIscSl7dmFyIHU9ZC5nZXQoYik7aWYoMDxiLnZlcnNpb24mJnUuX192ZXJzaW9uIT09Yi52ZXJzaW9uKXt2YXIgcj1iLmltYWdlO2lmKHZvaWQgMD09PXIpY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgdW5kZWZpbmVkXCIsYik7ZWxzZSBpZighMT09PXIuY29tcGxldGUpY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgaW5jb21wbGV0ZVwiLGIpO2Vsc2V7dm9pZCAwPT09dS5fX3dlYmdsSW5pdCYmKHUuX193ZWJnbEluaXQ9ITAsYi5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLG4pLHUuX193ZWJnbFRleHR1cmU9XG4gICAgYS5jcmVhdGVUZXh0dXJlKCksYi5pc1ZpZGVvVGV4dHVyZSYmKHlbYi5pZF09YiksZy50ZXh0dXJlcysrKTtjLmFjdGl2ZVRleHR1cmUoYS5URVhUVVJFMCtxKTtjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCx1Ll9fd2ViZ2xUZXh0dXJlKTthLnBpeGVsU3RvcmVpKGEuVU5QQUNLX0ZMSVBfWV9XRUJHTCxiLmZsaXBZKTthLnBpeGVsU3RvcmVpKGEuVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMLGIucHJlbXVsdGlwbHlBbHBoYSk7YS5waXhlbFN0b3JlaShhLlVOUEFDS19BTElHTk1FTlQsYi51bnBhY2tBbGlnbm1lbnQpO3ZhciBsPWgoYi5pbWFnZSxlLm1heFRleHR1cmVTaXplKTsoMTAwMSE9PWIud3JhcFN8fDEwMDEhPT1iLndyYXBUfHwxMDAzIT09Yi5taW5GaWx0ZXImJjEwMDYhPT1iLm1pbkZpbHRlcikmJiExPT09ayhsKSYmKHE9bCxxIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudHx8cSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50fHxxIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXA/XG4gICAgKHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpLHIud2lkdGg9US5mbG9vclBvd2VyT2ZUd28ocS53aWR0aCksci5oZWlnaHQ9US5mbG9vclBvd2VyT2ZUd28ocS5oZWlnaHQpLHIuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShxLDAsMCxyLndpZHRoLHIuaGVpZ2h0KSxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBpbWFnZSBpcyBub3QgcG93ZXIgb2YgdHdvIChcIitxLndpZHRoK1wieFwiK3EuaGVpZ2h0K1wiKS4gUmVzaXplZCB0byBcIityLndpZHRoK1wieFwiK3IuaGVpZ2h0LHEpLGw9cik6bD1xKTtxPWsobCk7dmFyIHI9Zi5jb252ZXJ0KGIuZm9ybWF0KSx2PWYuY29udmVydChiLnR5cGUpO3QoYS5URVhUVVJFXzJELGIscSk7dmFyIHA9Yi5taXBtYXBzO2lmKGIuaXNEZXB0aFRleHR1cmUpe3A9YS5ERVBUSF9DT01QT05FTlQ7aWYoMTAxNT09PWIudHlwZSl7aWYoIXopdGhyb3cgRXJyb3IoXCJGbG9hdCBEZXB0aCBUZXh0dXJlIG9ubHkgc3VwcG9ydGVkIGluIFdlYkdMMi4wXCIpO1xuICAgIHA9YS5ERVBUSF9DT01QT05FTlQzMkZ9ZWxzZSB6JiYocD1hLkRFUFRIX0NPTVBPTkVOVDE2KTsxMDI2PT09Yi5mb3JtYXQmJnA9PT1hLkRFUFRIX0NPTVBPTkVOVCYmMTAxMiE9PWIudHlwZSYmMTAxNCE9PWIudHlwZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFVzZSBVbnNpZ25lZFNob3J0VHlwZSBvciBVbnNpZ25lZEludFR5cGUgZm9yIERlcHRoRm9ybWF0IERlcHRoVGV4dHVyZS5cIiksYi50eXBlPTEwMTIsdj1mLmNvbnZlcnQoYi50eXBlKSk7MTAyNz09PWIuZm9ybWF0JiYocD1hLkRFUFRIX1NURU5DSUwsMTAyMCE9PWIudHlwZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFVzZSBVbnNpZ25lZEludDI0OFR5cGUgZm9yIERlcHRoU3RlbmNpbEZvcm1hdCBEZXB0aFRleHR1cmUuXCIpLGIudHlwZT0xMDIwLHY9Zi5jb252ZXJ0KGIudHlwZSkpKTtjLnRleEltYWdlMkQoYS5URVhUVVJFXzJELDAscCxsLndpZHRoLGwuaGVpZ2h0LDAscixcbiAgICB2LG51bGwpfWVsc2UgaWYoYi5pc0RhdGFUZXh0dXJlKWlmKDA8cC5sZW5ndGgmJnEpe2Zvcih2YXIgQT0wLHc9cC5sZW5ndGg7QTx3O0ErKylsPXBbQV0sYy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCxBLHIsbC53aWR0aCxsLmhlaWdodCwwLHIsdixsLmRhdGEpO2IuZ2VuZXJhdGVNaXBtYXBzPSExfWVsc2UgYy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCwwLHIsbC53aWR0aCxsLmhlaWdodCwwLHIsdixsLmRhdGEpO2Vsc2UgaWYoYi5pc0NvbXByZXNzZWRUZXh0dXJlKWZvcihBPTAsdz1wLmxlbmd0aDtBPHc7QSsrKWw9cFtBXSwxMDIzIT09Yi5mb3JtYXQmJjEwMjIhPT1iLmZvcm1hdD8tMTxjLmdldENvbXByZXNzZWRUZXh0dXJlRm9ybWF0cygpLmluZGV4T2Yocik/Yy5jb21wcmVzc2VkVGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsQSxyLGwud2lkdGgsbC5oZWlnaHQsMCxsLmRhdGEpOmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IEF0dGVtcHQgdG8gbG9hZCB1bnN1cHBvcnRlZCBjb21wcmVzc2VkIHRleHR1cmUgZm9ybWF0IGluIC51cGxvYWRUZXh0dXJlKClcIik6XG4gICAgYy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCxBLHIsbC53aWR0aCxsLmhlaWdodCwwLHIsdixsLmRhdGEpO2Vsc2UgaWYoMDxwLmxlbmd0aCYmcSl7QT0wO2Zvcih3PXAubGVuZ3RoO0E8dztBKyspbD1wW0FdLGMudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsQSxyLHIsdixsKTtiLmdlbmVyYXRlTWlwbWFwcz0hMX1lbHNlIGMudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsMCxyLHIsdixsKTttKGIscSkmJmEuZ2VuZXJhdGVNaXBtYXAoYS5URVhUVVJFXzJEKTt1Ll9fdmVyc2lvbj1iLnZlcnNpb247aWYoYi5vblVwZGF0ZSliLm9uVXBkYXRlKGIpO3JldHVybn19Yy5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTArcSk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsdS5fX3dlYmdsVGV4dHVyZSl9ZnVuY3Rpb24gdChjLGcsaCl7aD8oYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX1dSQVBfUyxmLmNvbnZlcnQoZy53cmFwUykpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9XUkFQX1QsXG4gICAgZi5jb252ZXJ0KGcud3JhcFQpKSxhLnRleFBhcmFtZXRlcmkoYyxhLlRFWFRVUkVfTUFHX0ZJTFRFUixmLmNvbnZlcnQoZy5tYWdGaWx0ZXIpKSxhLnRleFBhcmFtZXRlcmkoYyxhLlRFWFRVUkVfTUlOX0ZJTFRFUixmLmNvbnZlcnQoZy5taW5GaWx0ZXIpKSk6KGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9XUkFQX1MsYS5DTEFNUF9UT19FREdFKSxhLnRleFBhcmFtZXRlcmkoYyxhLlRFWFRVUkVfV1JBUF9ULGEuQ0xBTVBfVE9fRURHRSksMTAwMT09PWcud3JhcFMmJjEwMDE9PT1nLndyYXBUfHxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGlzIG5vdCBwb3dlciBvZiB0d28uIFRleHR1cmUud3JhcFMgYW5kIFRleHR1cmUud3JhcFQgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nLlwiLGcpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9NQUdfRklMVEVSLHEoZy5tYWdGaWx0ZXIpKSxhLnRleFBhcmFtZXRlcmkoYyxcbiAgICBhLlRFWFRVUkVfTUlOX0ZJTFRFUixxKGcubWluRmlsdGVyKSksMTAwMyE9PWcubWluRmlsdGVyJiYxMDA2IT09Zy5taW5GaWx0ZXImJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS5taW5GaWx0ZXIgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5OZWFyZXN0RmlsdGVyIG9yIFRIUkVFLkxpbmVhckZpbHRlci5cIixnKSk7IShoPWIuZ2V0KFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpKXx8MTAxNT09PWcudHlwZSYmbnVsbD09PWIuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpfHwxMDE2PT09Zy50eXBlJiZudWxsPT09Yi5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiKXx8ISgxPGcuYW5pc290cm9weXx8ZC5nZXQoZykuX19jdXJyZW50QW5pc290cm9weSl8fChhLnRleFBhcmFtZXRlcmYoYyxoLlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULE1hdGgubWluKGcuYW5pc290cm9weSxcbiAgICBlLmdldE1heEFuaXNvdHJvcHkoKSkpLGQuZ2V0KGcpLl9fY3VycmVudEFuaXNvdHJvcHk9Zy5hbmlzb3Ryb3B5KX1mdW5jdGlvbiBsKGIsZSxnLGgpe3ZhciBrPWYuY29udmVydChlLnRleHR1cmUuZm9ybWF0KSxtPWYuY29udmVydChlLnRleHR1cmUudHlwZSk7Yy50ZXhJbWFnZTJEKGgsMCxrLGUud2lkdGgsZS5oZWlnaHQsMCxrLG0sbnVsbCk7YS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixiKTthLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGEuRlJBTUVCVUZGRVIsZyxoLGQuZ2V0KGUudGV4dHVyZSkuX193ZWJnbFRleHR1cmUsMCk7YS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixudWxsKX1mdW5jdGlvbiBwKGIsYyl7YS5iaW5kUmVuZGVyYnVmZmVyKGEuUkVOREVSQlVGRkVSLGIpO2MuZGVwdGhCdWZmZXImJiFjLnN0ZW5jaWxCdWZmZXI/KGEucmVuZGVyYnVmZmVyU3RvcmFnZShhLlJFTkRFUkJVRkZFUixhLkRFUFRIX0NPTVBPTkVOVDE2LGMud2lkdGgsYy5oZWlnaHQpLFxuICAgIGEuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoYS5GUkFNRUJVRkZFUixhLkRFUFRIX0FUVEFDSE1FTlQsYS5SRU5ERVJCVUZGRVIsYikpOmMuZGVwdGhCdWZmZXImJmMuc3RlbmNpbEJ1ZmZlcj8oYS5yZW5kZXJidWZmZXJTdG9yYWdlKGEuUkVOREVSQlVGRkVSLGEuREVQVEhfU1RFTkNJTCxjLndpZHRoLGMuaGVpZ2h0KSxhLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGEuRlJBTUVCVUZGRVIsYS5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsYS5SRU5ERVJCVUZGRVIsYikpOmEucmVuZGVyYnVmZmVyU3RvcmFnZShhLlJFTkRFUkJVRkZFUixhLlJHQkE0LGMud2lkdGgsYy5oZWlnaHQpO2EuYmluZFJlbmRlcmJ1ZmZlcihhLlJFTkRFUkJVRkZFUixudWxsKX12YXIgej1cInVuZGVmaW5lZFwiIT09dHlwZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQmJmEgaW5zdGFuY2VvZiB3aW5kb3cuV2ViR0wyUmVuZGVyaW5nQ29udGV4dCx5PXt9O3RoaXMuc2V0VGV4dHVyZTJEPXI7dGhpcy5zZXRUZXh0dXJlQ3ViZT1cbiAgICBmdW5jdGlvbihiLHEpe3ZhciB1PWQuZ2V0KGIpO2lmKDY9PT1iLmltYWdlLmxlbmd0aClpZigwPGIudmVyc2lvbiYmdS5fX3ZlcnNpb24hPT1iLnZlcnNpb24pe3UuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZXx8KGIuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixuKSx1Ll9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmU9YS5jcmVhdGVUZXh0dXJlKCksZy50ZXh0dXJlcysrKTtjLmFjdGl2ZVRleHR1cmUoYS5URVhUVVJFMCtxKTtjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV9DVUJFX01BUCx1Ll9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpO2EucGl4ZWxTdG9yZWkoYS5VTlBBQ0tfRkxJUF9ZX1dFQkdMLGIuZmxpcFkpO3E9YiYmYi5pc0NvbXByZXNzZWRUZXh0dXJlO2Zvcih2YXIgcj1iLmltYWdlWzBdJiZiLmltYWdlWzBdLmlzRGF0YVRleHR1cmUsbD1bXSx2PTA7Nj52O3YrKylsW3ZdPXF8fHI/cj9iLmltYWdlW3ZdLmltYWdlOmIuaW1hZ2Vbdl06aChiLmltYWdlW3ZdLGUubWF4Q3ViZW1hcFNpemUpO1xuICAgIHZhciBwPWsobFswXSksdz1mLmNvbnZlcnQoYi5mb3JtYXQpLEE9Zi5jb252ZXJ0KGIudHlwZSk7dChhLlRFWFRVUkVfQ1VCRV9NQVAsYixwKTtmb3Iodj0wOzY+djt2KyspaWYocSlmb3IodmFyIHksST1sW3ZdLm1pcG1hcHMsej0wLHg9SS5sZW5ndGg7ejx4O3orKyl5PUlbel0sMTAyMyE9PWIuZm9ybWF0JiYxMDIyIT09Yi5mb3JtYXQ/LTE8Yy5nZXRDb21wcmVzc2VkVGV4dHVyZUZvcm1hdHMoKS5pbmRleE9mKHcpP2MuY29tcHJlc3NlZFRleEltYWdlMkQoYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grdix6LHcseS53aWR0aCx5LmhlaWdodCwwLHkuZGF0YSk6Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnNldFRleHR1cmVDdWJlKClcIik6Yy50ZXhJbWFnZTJEKGEuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK3Yseix3LHkud2lkdGgseS5oZWlnaHQsXG4gICAgMCx3LEEseS5kYXRhKTtlbHNlIHI/Yy50ZXhJbWFnZTJEKGEuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK3YsMCx3LGxbdl0ud2lkdGgsbFt2XS5oZWlnaHQsMCx3LEEsbFt2XS5kYXRhKTpjLnRleEltYWdlMkQoYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grdiwwLHcsdyxBLGxbdl0pO20oYixwKSYmYS5nZW5lcmF0ZU1pcG1hcChhLlRFWFRVUkVfQ1VCRV9NQVApO3UuX192ZXJzaW9uPWIudmVyc2lvbjtpZihiLm9uVXBkYXRlKWIub25VcGRhdGUoYil9ZWxzZSBjLmFjdGl2ZVRleHR1cmUoYS5URVhUVVJFMCtxKSxjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV9DVUJFX01BUCx1Ll9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpfTt0aGlzLnNldFRleHR1cmVDdWJlRHluYW1pYz1mdW5jdGlvbihiLGUpe2MuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUwK2UpO2MuYmluZFRleHR1cmUoYS5URVhUVVJFX0NVQkVfTUFQLGQuZ2V0KGIpLl9fd2ViZ2xUZXh0dXJlKX07dGhpcy5zZXR1cFJlbmRlclRhcmdldD1cbiAgICBmdW5jdGlvbihiKXt2YXIgZT1kLmdldChiKSxmPWQuZ2V0KGIudGV4dHVyZSk7Yi5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLHUpO2YuX193ZWJnbFRleHR1cmU9YS5jcmVhdGVUZXh0dXJlKCk7Zy50ZXh0dXJlcysrO3ZhciBoPSEwPT09Yi5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZSxuPWsoYik7aWYoaCl7ZS5fX3dlYmdsRnJhbWVidWZmZXI9W107Zm9yKHZhciBxPTA7Nj5xO3ErKyllLl9fd2ViZ2xGcmFtZWJ1ZmZlcltxXT1hLmNyZWF0ZUZyYW1lYnVmZmVyKCl9ZWxzZSBlLl9fd2ViZ2xGcmFtZWJ1ZmZlcj1hLmNyZWF0ZUZyYW1lYnVmZmVyKCk7aWYoaCl7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsZi5fX3dlYmdsVGV4dHVyZSk7dChhLlRFWFRVUkVfQ1VCRV9NQVAsYi50ZXh0dXJlLG4pO2ZvcihxPTA7Nj5xO3ErKylsKGUuX193ZWJnbEZyYW1lYnVmZmVyW3FdLGIsYS5DT0xPUl9BVFRBQ0hNRU5UMCxhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtxKTtcbiAgICBtKGIudGV4dHVyZSxuKSYmYS5nZW5lcmF0ZU1pcG1hcChhLlRFWFRVUkVfQ1VCRV9NQVApO2MuYmluZFRleHR1cmUoYS5URVhUVVJFX0NVQkVfTUFQLG51bGwpfWVsc2UgYy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsZi5fX3dlYmdsVGV4dHVyZSksdChhLlRFWFRVUkVfMkQsYi50ZXh0dXJlLG4pLGwoZS5fX3dlYmdsRnJhbWVidWZmZXIsYixhLkNPTE9SX0FUVEFDSE1FTlQwLGEuVEVYVFVSRV8yRCksbShiLnRleHR1cmUsbikmJmEuZ2VuZXJhdGVNaXBtYXAoYS5URVhUVVJFXzJEKSxjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCxudWxsKTtpZihiLmRlcHRoQnVmZmVyKXtlPWQuZ2V0KGIpO2Y9ITA9PT1iLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlO2lmKGIuZGVwdGhUZXh0dXJlKXtpZihmKXRocm93IEVycm9yKFwidGFyZ2V0LmRlcHRoVGV4dHVyZSBub3Qgc3VwcG9ydGVkIGluIEN1YmUgcmVuZGVyIHRhcmdldHNcIik7aWYoYiYmYi5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZSl0aHJvdyBFcnJvcihcIkRlcHRoIFRleHR1cmUgd2l0aCBjdWJlIHJlbmRlciB0YXJnZXRzIGlzIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgYS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixlLl9fd2ViZ2xGcmFtZWJ1ZmZlcik7aWYoIWIuZGVwdGhUZXh0dXJlfHwhYi5kZXB0aFRleHR1cmUuaXNEZXB0aFRleHR1cmUpdGhyb3cgRXJyb3IoXCJyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuRGVwdGhUZXh0dXJlXCIpO2QuZ2V0KGIuZGVwdGhUZXh0dXJlKS5fX3dlYmdsVGV4dHVyZSYmYi5kZXB0aFRleHR1cmUuaW1hZ2Uud2lkdGg9PT1iLndpZHRoJiZiLmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQ9PT1iLmhlaWdodHx8KGIuZGVwdGhUZXh0dXJlLmltYWdlLndpZHRoPWIud2lkdGgsYi5kZXB0aFRleHR1cmUuaW1hZ2UuaGVpZ2h0PWIuaGVpZ2h0LGIuZGVwdGhUZXh0dXJlLm5lZWRzVXBkYXRlPSEwKTtyKGIuZGVwdGhUZXh0dXJlLDApO2U9ZC5nZXQoYi5kZXB0aFRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlO2lmKDEwMjY9PT1iLmRlcHRoVGV4dHVyZS5mb3JtYXQpYS5mcmFtZWJ1ZmZlclRleHR1cmUyRChhLkZSQU1FQlVGRkVSLFxuICAgIGEuREVQVEhfQVRUQUNITUVOVCxhLlRFWFRVUkVfMkQsZSwwKTtlbHNlIGlmKDEwMjc9PT1iLmRlcHRoVGV4dHVyZS5mb3JtYXQpYS5mcmFtZWJ1ZmZlclRleHR1cmUyRChhLkZSQU1FQlVGRkVSLGEuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULGEuVEVYVFVSRV8yRCxlLDApO2Vsc2UgdGhyb3cgRXJyb3IoXCJVbmtub3duIGRlcHRoVGV4dHVyZSBmb3JtYXRcIik7fWVsc2UgaWYoZilmb3IoZS5fX3dlYmdsRGVwdGhidWZmZXI9W10sZj0wOzY+ZjtmKyspYS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixlLl9fd2ViZ2xGcmFtZWJ1ZmZlcltmXSksZS5fX3dlYmdsRGVwdGhidWZmZXJbZl09YS5jcmVhdGVSZW5kZXJidWZmZXIoKSxwKGUuX193ZWJnbERlcHRoYnVmZmVyW2ZdLGIpO2Vsc2UgYS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixlLl9fd2ViZ2xGcmFtZWJ1ZmZlciksZS5fX3dlYmdsRGVwdGhidWZmZXI9YS5jcmVhdGVSZW5kZXJidWZmZXIoKSxwKGUuX193ZWJnbERlcHRoYnVmZmVyLFxuICAgIGIpO2EuYmluZEZyYW1lYnVmZmVyKGEuRlJBTUVCVUZGRVIsbnVsbCl9fTt0aGlzLnVwZGF0ZVJlbmRlclRhcmdldE1pcG1hcD1mdW5jdGlvbihiKXt2YXIgZT1iLnRleHR1cmUsZj1rKGIpO20oZSxmKSYmKGI9Yi5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZT9hLlRFWFRVUkVfQ1VCRV9NQVA6YS5URVhUVVJFXzJELGU9ZC5nZXQoZSkuX193ZWJnbFRleHR1cmUsYy5iaW5kVGV4dHVyZShiLGUpLGEuZ2VuZXJhdGVNaXBtYXAoYiksYy5iaW5kVGV4dHVyZShiLG51bGwpKX07dGhpcy51cGRhdGVWaWRlb1RleHR1cmVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHkpeVthXS51cGRhdGUoKX19ZnVuY3Rpb24gQmcoKXt2YXIgYT17fTtyZXR1cm57Z2V0OmZ1bmN0aW9uKGIpe2I9Yi51dWlkO3ZhciBjPWFbYl07dm9pZCAwPT09YyYmKGM9e30sYVtiXT1jKTtyZXR1cm4gY30scmVtb3ZlOmZ1bmN0aW9uKGIpe2RlbGV0ZSBhW2IudXVpZF19LGNsZWFyOmZ1bmN0aW9uKCl7YT17fX19fWZ1bmN0aW9uIENnKGEsXG4gICAgYixjKXtmdW5jdGlvbiBkKGIsYyxkKXt2YXIgZT1uZXcgVWludDhBcnJheSg0KSxmPWEuY3JlYXRlVGV4dHVyZSgpO2EuYmluZFRleHR1cmUoYixmKTthLnRleFBhcmFtZXRlcmkoYixhLlRFWFRVUkVfTUlOX0ZJTFRFUixhLk5FQVJFU1QpO2EudGV4UGFyYW1ldGVyaShiLGEuVEVYVFVSRV9NQUdfRklMVEVSLGEuTkVBUkVTVCk7Zm9yKGI9MDtiPGQ7YisrKWEudGV4SW1hZ2UyRChjK2IsMCxhLlJHQkEsMSwxLDAsYS5SR0JBLGEuVU5TSUdORURfQllURSxlKTtyZXR1cm4gZn1mdW5jdGlvbiBlKGIpeyEwIT09eVtiXSYmKGEuZW5hYmxlKGIpLHlbYl09ITApfWZ1bmN0aW9uIGYoYil7ITEhPT15W2JdJiYoYS5kaXNhYmxlKGIpLHlbYl09ITEpfWZ1bmN0aW9uIGcoYixkLGcsaCxrLG0scSxuKXswIT09Yj9lKGEuQkxFTkQpOmYoYS5CTEVORCk7aWYoNSE9PWIpe2lmKGIhPT1KfHxuIT09bGEpc3dpdGNoKGIpe2Nhc2UgMjpuPyhhLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShhLkZVTkNfQURELFxuICAgIGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jU2VwYXJhdGUoYS5PTkUsYS5PTkUsYS5PTkUsYS5PTkUpKTooYS5ibGVuZEVxdWF0aW9uKGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jKGEuU1JDX0FMUEhBLGEuT05FKSk7YnJlYWs7Y2FzZSAzOm4/KGEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGEuRlVOQ19BREQsYS5GVU5DX0FERCksYS5ibGVuZEZ1bmNTZXBhcmF0ZShhLlpFUk8sYS5aRVJPLGEuT05FX01JTlVTX1NSQ19DT0xPUixhLk9ORV9NSU5VU19TUkNfQUxQSEEpKTooYS5ibGVuZEVxdWF0aW9uKGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jKGEuWkVSTyxhLk9ORV9NSU5VU19TUkNfQ09MT1IpKTticmVhaztjYXNlIDQ6bj8oYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuWkVSTyxhLlNSQ19DT0xPUixhLlpFUk8sYS5TUkNfQUxQSEEpKTooYS5ibGVuZEVxdWF0aW9uKGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jKGEuWkVSTyxcbiAgICBhLlNSQ19DT0xPUikpO2JyZWFrO2RlZmF1bHQ6bj8oYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuT05FLGEuT05FX01JTlVTX1NSQ19BTFBIQSxhLk9ORSxhLk9ORV9NSU5VU19TUkNfQUxQSEEpKTooYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuU1JDX0FMUEhBLGEuT05FX01JTlVTX1NSQ19BTFBIQSxhLk9ORSxhLk9ORV9NSU5VU19TUkNfQUxQSEEpKX1IPUU9Qz1EPUI9eD1udWxsfWVsc2V7az1rfHxkO209bXx8ZztxPXF8fGg7aWYoZCE9PXh8fGshPT1DKWEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGMuY29udmVydChkKSxjLmNvbnZlcnQoaykpLHg9ZCxDPWs7aWYoZyE9PUJ8fGghPT1EfHxtIT09RXx8cSE9PUgpYS5ibGVuZEZ1bmNTZXBhcmF0ZShjLmNvbnZlcnQoZyksYy5jb252ZXJ0KGgpLGMuY29udmVydChtKSxjLmNvbnZlcnQocSkpLFxuICAgIEI9ZyxEPWgsRT1tLEg9cX1KPWI7bGE9bn1mdW5jdGlvbiBoKGIpe1MhPT1iJiYoYj9hLmZyb250RmFjZShhLkNXKTphLmZyb250RmFjZShhLkNDVyksUz1iKX1mdW5jdGlvbiBrKGIpezAhPT1iPyhlKGEuQ1VMTF9GQUNFKSxiIT09SyYmKDE9PT1iP2EuY3VsbEZhY2UoYS5CQUNLKToyPT09Yj9hLmN1bGxGYWNlKGEuRlJPTlQpOmEuY3VsbEZhY2UoYS5GUk9OVF9BTkRfQkFDSykpKTpmKGEuQ1VMTF9GQUNFKTtLPWJ9ZnVuY3Rpb24gbShiLGMsZCl7aWYoYil7aWYoZShhLlBPTFlHT05fT0ZGU0VUX0ZJTEwpLEwhPT1jfHxPIT09ZClhLnBvbHlnb25PZmZzZXQoYyxkKSxMPWMsTz1kfWVsc2UgZihhLlBPTFlHT05fT0ZGU0VUX0ZJTEwpfWZ1bmN0aW9uIHEoYil7dm9pZCAwPT09YiYmKGI9YS5URVhUVVJFMCtRLTEpO00hPT1iJiYoYS5hY3RpdmVUZXh0dXJlKGIpLE09Yil9dmFyIG49bmV3IGZ1bmN0aW9uKCl7dmFyIGI9ITEsYz1uZXcgYWEsZD1udWxsLGU9bmV3IGFhKDAsMCwwLDApO1xuICAgIHJldHVybntzZXRNYXNrOmZ1bmN0aW9uKGMpe2Q9PT1jfHxifHwoYS5jb2xvck1hc2soYyxjLGMsYyksZD1jKX0sc2V0TG9ja2VkOmZ1bmN0aW9uKGEpe2I9YX0sc2V0Q2xlYXI6ZnVuY3Rpb24oYixkLGYsZyxoKXshMD09PWgmJihiKj1nLGQqPWcsZio9Zyk7Yy5zZXQoYixkLGYsZyk7ITE9PT1lLmVxdWFscyhjKSYmKGEuY2xlYXJDb2xvcihiLGQsZixnKSxlLmNvcHkoYykpfSxyZXNldDpmdW5jdGlvbigpe2I9ITE7ZD1udWxsO2Uuc2V0KC0xLDAsMCwwKX19fSx1PW5ldyBmdW5jdGlvbigpe3ZhciBiPSExLGM9bnVsbCxkPW51bGwsZz1udWxsO3JldHVybntzZXRUZXN0OmZ1bmN0aW9uKGIpe2I/ZShhLkRFUFRIX1RFU1QpOmYoYS5ERVBUSF9URVNUKX0sc2V0TWFzazpmdW5jdGlvbihkKXtjPT09ZHx8Ynx8KGEuZGVwdGhNYXNrKGQpLGM9ZCl9LHNldEZ1bmM6ZnVuY3Rpb24oYil7aWYoZCE9PWIpe2lmKGIpc3dpdGNoKGIpe2Nhc2UgMDphLmRlcHRoRnVuYyhhLk5FVkVSKTticmVhaztcbiAgICBjYXNlIDE6YS5kZXB0aEZ1bmMoYS5BTFdBWVMpO2JyZWFrO2Nhc2UgMjphLmRlcHRoRnVuYyhhLkxFU1MpO2JyZWFrO2Nhc2UgMzphLmRlcHRoRnVuYyhhLkxFUVVBTCk7YnJlYWs7Y2FzZSA0OmEuZGVwdGhGdW5jKGEuRVFVQUwpO2JyZWFrO2Nhc2UgNTphLmRlcHRoRnVuYyhhLkdFUVVBTCk7YnJlYWs7Y2FzZSA2OmEuZGVwdGhGdW5jKGEuR1JFQVRFUik7YnJlYWs7Y2FzZSA3OmEuZGVwdGhGdW5jKGEuTk9URVFVQUwpO2JyZWFrO2RlZmF1bHQ6YS5kZXB0aEZ1bmMoYS5MRVFVQUwpfWVsc2UgYS5kZXB0aEZ1bmMoYS5MRVFVQUwpO2Q9Yn19LHNldExvY2tlZDpmdW5jdGlvbihhKXtiPWF9LHNldENsZWFyOmZ1bmN0aW9uKGIpe2chPT1iJiYoYS5jbGVhckRlcHRoKGIpLGc9Yil9LHJlc2V0OmZ1bmN0aW9uKCl7Yj0hMTtnPWQ9Yz1udWxsfX19LHI9bmV3IGZ1bmN0aW9uKCl7dmFyIGI9ITEsYz1udWxsLGQ9bnVsbCxnPW51bGwsaD1udWxsLGs9bnVsbCxtPW51bGwsbj1udWxsLHE9bnVsbDtcbiAgICByZXR1cm57c2V0VGVzdDpmdW5jdGlvbihiKXtiP2UoYS5TVEVOQ0lMX1RFU1QpOmYoYS5TVEVOQ0lMX1RFU1QpfSxzZXRNYXNrOmZ1bmN0aW9uKGQpe2M9PT1kfHxifHwoYS5zdGVuY2lsTWFzayhkKSxjPWQpfSxzZXRGdW5jOmZ1bmN0aW9uKGIsYyxlKXtpZihkIT09Ynx8ZyE9PWN8fGghPT1lKWEuc3RlbmNpbEZ1bmMoYixjLGUpLGQ9YixnPWMsaD1lfSxzZXRPcDpmdW5jdGlvbihiLGMsZCl7aWYoayE9PWJ8fG0hPT1jfHxuIT09ZClhLnN0ZW5jaWxPcChiLGMsZCksaz1iLG09YyxuPWR9LHNldExvY2tlZDpmdW5jdGlvbihhKXtiPWF9LHNldENsZWFyOmZ1bmN0aW9uKGIpe3EhPT1iJiYoYS5jbGVhclN0ZW5jaWwoYikscT1iKX0scmVzZXQ6ZnVuY3Rpb24oKXtiPSExO3E9bj1tPWs9aD1nPWQ9Yz1udWxsfX19LGw9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX0FUVFJJQlMpLHY9bmV3IFVpbnQ4QXJyYXkobCkscD1uZXcgVWludDhBcnJheShsKSx6PW5ldyBVaW50OEFycmF5KGwpLFxuICAgIHk9e30sST1udWxsLEE9bnVsbCxKPW51bGwseD1udWxsLEI9bnVsbCxEPW51bGwsQz1udWxsLEU9bnVsbCxIPW51bGwsbGE9ITEsUz1udWxsLEs9bnVsbCxOPW51bGwsTD1udWxsLE89bnVsbCxRPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX0NPTUJJTkVEX1RFWFRVUkVfSU1BR0VfVU5JVFMpLGw9cGFyc2VGbG9hdCgvXldlYkdMXFwgKFswLTldKS8uZXhlYyhhLmdldFBhcmFtZXRlcihhLlZFUlNJT04pKVsxXSksVj0xPD1wYXJzZUZsb2F0KGwpLE09bnVsbCxQPXt9LFI9bmV3IGFhLEc9bmV3IGFhLFk9e307WVthLlRFWFRVUkVfMkRdPWQoYS5URVhUVVJFXzJELGEuVEVYVFVSRV8yRCwxKTtZW2EuVEVYVFVSRV9DVUJFX01BUF09ZChhLlRFWFRVUkVfQ1VCRV9NQVAsYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1gsNik7bi5zZXRDbGVhcigwLDAsMCwxKTt1LnNldENsZWFyKDEpO3Iuc2V0Q2xlYXIoMCk7ZShhLkRFUFRIX1RFU1QpO3Uuc2V0RnVuYygzKTtoKCExKTtrKDEpO2UoYS5DVUxMX0ZBQ0UpO1xuICAgIGUoYS5CTEVORCk7ZygxKTtyZXR1cm57YnVmZmVyczp7Y29sb3I6bixkZXB0aDp1LHN0ZW5jaWw6cn0saW5pdEF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXYubGVuZ3RoO2E8YjthKyspdlthXT0wfSxlbmFibGVBdHRyaWJ1dGU6ZnVuY3Rpb24oYyl7dltjXT0xOzA9PT1wW2NdJiYoYS5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShjKSxwW2NdPTEpOzAhPT16W2NdJiYoYi5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpLnZlcnRleEF0dHJpYkRpdmlzb3JBTkdMRShjLDApLHpbY109MCl9LGVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3I6ZnVuY3Rpb24oYyxkKXt2W2NdPTE7MD09PXBbY10mJihhLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGMpLHBbY109MSk7eltjXSE9PWQmJihiLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIikudmVydGV4QXR0cmliRGl2aXNvckFOR0xFKGMsZCkseltjXT1kKX0sZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGI9XG4gICAgMCxjPXAubGVuZ3RoO2IhPT1jOysrYilwW2JdIT09dltiXSYmKGEuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGIpLHBbYl09MCl9LGVuYWJsZTplLGRpc2FibGU6ZixnZXRDb21wcmVzc2VkVGV4dHVyZUZvcm1hdHM6ZnVuY3Rpb24oKXtpZihudWxsPT09SSYmKEk9W10sYi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIil8fGIuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fGIuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIikpKWZvcih2YXIgYz1hLmdldFBhcmFtZXRlcihhLkNPTVBSRVNTRURfVEVYVFVSRV9GT1JNQVRTKSxkPTA7ZDxjLmxlbmd0aDtkKyspSS5wdXNoKGNbZF0pO3JldHVybiBJfSx1c2VQcm9ncmFtOmZ1bmN0aW9uKGIpe3JldHVybiBBIT09Yj8oYS51c2VQcm9ncmFtKGIpLEE9YiwhMCk6ITF9LHNldEJsZW5kaW5nOmcsc2V0TWF0ZXJpYWw6ZnVuY3Rpb24oYixjKXsyPT09Yi5zaWRlP2YoYS5DVUxMX0ZBQ0UpOlxuICAgIGUoYS5DVUxMX0ZBQ0UpO3ZhciBkPTE9PT1iLnNpZGU7YyYmKGQ9IWQpO2goZCk7ITA9PT1iLnRyYW5zcGFyZW50P2coYi5ibGVuZGluZyxiLmJsZW5kRXF1YXRpb24sYi5ibGVuZFNyYyxiLmJsZW5kRHN0LGIuYmxlbmRFcXVhdGlvbkFscGhhLGIuYmxlbmRTcmNBbHBoYSxiLmJsZW5kRHN0QWxwaGEsYi5wcmVtdWx0aXBsaWVkQWxwaGEpOmcoMCk7dS5zZXRGdW5jKGIuZGVwdGhGdW5jKTt1LnNldFRlc3QoYi5kZXB0aFRlc3QpO3Uuc2V0TWFzayhiLmRlcHRoV3JpdGUpO24uc2V0TWFzayhiLmNvbG9yV3JpdGUpO20oYi5wb2x5Z29uT2Zmc2V0LGIucG9seWdvbk9mZnNldEZhY3RvcixiLnBvbHlnb25PZmZzZXRVbml0cyl9LHNldEZsaXBTaWRlZDpoLHNldEN1bGxGYWNlOmssc2V0TGluZVdpZHRoOmZ1bmN0aW9uKGIpe2IhPT1OJiYoViYmYS5saW5lV2lkdGgoYiksTj1iKX0sc2V0UG9seWdvbk9mZnNldDptLHNldFNjaXNzb3JUZXN0OmZ1bmN0aW9uKGIpe2I/ZShhLlNDSVNTT1JfVEVTVCk6XG4gICAgZihhLlNDSVNTT1JfVEVTVCl9LGFjdGl2ZVRleHR1cmU6cSxiaW5kVGV4dHVyZTpmdW5jdGlvbihiLGMpe251bGw9PT1NJiZxKCk7dmFyIGQ9UFtNXTt2b2lkIDA9PT1kJiYoZD17dHlwZTp2b2lkIDAsdGV4dHVyZTp2b2lkIDB9LFBbTV09ZCk7aWYoZC50eXBlIT09Ynx8ZC50ZXh0dXJlIT09YylhLmJpbmRUZXh0dXJlKGIsY3x8WVtiXSksZC50eXBlPWIsZC50ZXh0dXJlPWN9LGNvbXByZXNzZWRUZXhJbWFnZTJEOmZ1bmN0aW9uKCl7dHJ5e2EuY29tcHJlc3NlZFRleEltYWdlMkQuYXBwbHkoYSxhcmd1bWVudHMpfWNhdGNoKGVhKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xTdGF0ZTpcIixlYSl9fSx0ZXhJbWFnZTJEOmZ1bmN0aW9uKCl7dHJ5e2EudGV4SW1hZ2UyRC5hcHBseShhLGFyZ3VtZW50cyl9Y2F0Y2goZWEpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOlwiLGVhKX19LHNjaXNzb3I6ZnVuY3Rpb24oYil7ITE9PT1SLmVxdWFscyhiKSYmKGEuc2Npc3NvcihiLngsXG4gICAgYi55LGIueixiLncpLFIuY29weShiKSl9LHZpZXdwb3J0OmZ1bmN0aW9uKGIpeyExPT09Ry5lcXVhbHMoYikmJihhLnZpZXdwb3J0KGIueCxiLnksYi56LGIudyksRy5jb3B5KGIpKX0scmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGI9MDtiPHAubGVuZ3RoO2IrKykxPT09cFtiXSYmKGEuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGIpLHBbYl09MCk7eT17fTtNPUk9bnVsbDtQPXt9O0s9Uz1KPUE9bnVsbDtuLnJlc2V0KCk7dS5yZXNldCgpO3IucmVzZXQoKX19fWZ1bmN0aW9uIERnKGEsYixjKXtmdW5jdGlvbiBkKGIpe2lmKFwiaGlnaHBcIj09PWIpe2lmKDA8YS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoYS5WRVJURVhfU0hBREVSLGEuSElHSF9GTE9BVCkucHJlY2lzaW9uJiYwPGEuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGEuRlJBR01FTlRfU0hBREVSLGEuSElHSF9GTE9BVCkucHJlY2lzaW9uKXJldHVyblwiaGlnaHBcIjtiPVwibWVkaXVtcFwifXJldHVyblwibWVkaXVtcFwiPT09YiYmXG4gICAgMDxhLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChhLlZFUlRFWF9TSEFERVIsYS5NRURJVU1fRkxPQVQpLnByZWNpc2lvbiYmMDxhLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChhLkZSQUdNRU5UX1NIQURFUixhLk1FRElVTV9GTE9BVCkucHJlY2lzaW9uP1wibWVkaXVtcFwiOlwibG93cFwifXZhciBlLGY9dm9pZCAwIT09Yy5wcmVjaXNpb24/Yy5wcmVjaXNpb246XCJoaWdocFwiLGc9ZChmKTtnIT09ZiYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6XCIsZixcIm5vdCBzdXBwb3J0ZWQsIHVzaW5nXCIsZyxcImluc3RlYWQuXCIpLGY9Zyk7Yz0hMD09PWMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjt2YXIgZz1hLmdldFBhcmFtZXRlcihhLk1BWF9URVhUVVJFX0lNQUdFX1VOSVRTKSxoPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX1ZFUlRFWF9URVhUVVJFX0lNQUdFX1VOSVRTKSxrPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX1RFWFRVUkVfU0laRSksbT1hLmdldFBhcmFtZXRlcihhLk1BWF9DVUJFX01BUF9URVhUVVJFX1NJWkUpLFxuICAgIHE9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX0FUVFJJQlMpLG49YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUyksdT1hLmdldFBhcmFtZXRlcihhLk1BWF9WQVJZSU5HX1ZFQ1RPUlMpLHI9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfRlJBR01FTlRfVU5JRk9STV9WRUNUT1JTKSxsPTA8aCx2PSEhYi5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKTtyZXR1cm57Z2V0TWF4QW5pc290cm9weTpmdW5jdGlvbigpe2lmKHZvaWQgMCE9PWUpcmV0dXJuIGU7dmFyIGM9Yi5nZXQoXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIik7cmV0dXJuIGU9bnVsbCE9PWM/YS5nZXRQYXJhbWV0ZXIoYy5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpOjB9LGdldE1heFByZWNpc2lvbjpkLHByZWNpc2lvbjpmLGxvZ2FyaXRobWljRGVwdGhCdWZmZXI6YyxtYXhUZXh0dXJlczpnLG1heFZlcnRleFRleHR1cmVzOmgsbWF4VGV4dHVyZVNpemU6ayxtYXhDdWJlbWFwU2l6ZTptLFxuICAgIG1heEF0dHJpYnV0ZXM6cSxtYXhWZXJ0ZXhVbmlmb3JtczpuLG1heFZhcnlpbmdzOnUsbWF4RnJhZ21lbnRVbmlmb3JtczpyLHZlcnRleFRleHR1cmVzOmwsZmxvYXRGcmFnbWVudFRleHR1cmVzOnYsZmxvYXRWZXJ0ZXhUZXh0dXJlczpsJiZ2fX1mdW5jdGlvbiBiYShhLGIsYyxkKXtUYS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBlcnNwZWN0aXZlQ2FtZXJhXCI7dGhpcy5mb3Y9dm9pZCAwIT09YT9hOjUwO3RoaXMuem9vbT0xO3RoaXMubmVhcj12b2lkIDAhPT1jP2M6LjE7dGhpcy5mYXI9dm9pZCAwIT09ZD9kOjJFMzt0aGlzLmZvY3VzPTEwO3RoaXMuYXNwZWN0PXZvaWQgMCE9PWI/YjoxO3RoaXMudmlldz1udWxsO3RoaXMuZmlsbUdhdWdlPTM1O3RoaXMuZmlsbU9mZnNldD0wO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfWZ1bmN0aW9uIHVkKGEpe2JhLmNhbGwodGhpcyk7dGhpcy5jYW1lcmFzPWF8fFtdfWZ1bmN0aW9uIGJlKGEpe2Z1bmN0aW9uIGIoKXtpZihudWxsIT09XG4gICAgZCYmZC5pc1ByZXNlbnRpbmcpe3ZhciBiPWQuZ2V0RXllUGFyYW1ldGVycyhcImxlZnRcIiksZT1iLnJlbmRlcldpZHRoLGI9Yi5yZW5kZXJIZWlnaHQ7bj1hLmdldFBpeGVsUmF0aW8oKTtxPWEuZ2V0U2l6ZSgpO2Euc2V0RHJhd2luZ0J1ZmZlclNpemUoMiplLGIsMSl9ZWxzZSBjLmVuYWJsZWQmJmEuc2V0RHJhd2luZ0J1ZmZlclNpemUocS53aWR0aCxxLmhlaWdodCxuKX12YXIgYz10aGlzLGQ9bnVsbCxlPW51bGwsZj1udWxsO1widW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93JiZcIlZSRnJhbWVEYXRhXCJpbiB3aW5kb3cmJihlPW5ldyB3aW5kb3cuVlJGcmFtZURhdGEpO3ZhciBnPW5ldyBPLGg9bmV3IGJhO2guYm91bmRzPW5ldyBhYSgwLDAsLjUsMSk7aC5sYXllcnMuZW5hYmxlKDEpO3ZhciBrPW5ldyBiYTtrLmJvdW5kcz1uZXcgYWEoLjUsMCwuNSwxKTtrLmxheWVycy5lbmFibGUoMik7dmFyIG09bmV3IHVkKFtoLGtdKTttLmxheWVycy5lbmFibGUoMSk7bS5sYXllcnMuZW5hYmxlKDIpO1xuICAgIHZhciBxLG47XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidnJkaXNwbGF5cHJlc2VudGNoYW5nZVwiLGIsITEpO3RoaXMuZW5hYmxlZD0hMTt0aGlzLmdldERldmljZT1mdW5jdGlvbigpe3JldHVybiBkfTt0aGlzLnNldERldmljZT1mdW5jdGlvbihhKXt2b2lkIDAhPT1hJiYoZD1hKX07dGhpcy5zZXRQb3NlVGFyZ2V0PWZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEmJihmPWEpfTt0aGlzLmdldENhbWVyYT1mdW5jdGlvbihhKXtpZihudWxsPT09ZClyZXR1cm4gYTtkLmRlcHRoTmVhcj1hLm5lYXI7ZC5kZXB0aEZhcj1hLmZhcjtkLmdldEZyYW1lRGF0YShlKTt2YXIgYj1lLnBvc2UsYz1udWxsIT09Zj9mOmE7bnVsbCE9PWIucG9zaXRpb24/Yy5wb3NpdGlvbi5mcm9tQXJyYXkoYi5wb3NpdGlvbik6Yy5wb3NpdGlvbi5zZXQoMCwwLDApO251bGwhPT1iLm9yaWVudGF0aW9uJiZjLnF1YXRlcm5pb24uZnJvbUFycmF5KGIub3JpZW50YXRpb24pO1xuICAgIGMudXBkYXRlTWF0cml4V29ybGQoKTtpZighMT09PWQuaXNQcmVzZW50aW5nKXJldHVybiBhO2gubmVhcj1hLm5lYXI7ay5uZWFyPWEubmVhcjtoLmZhcj1hLmZhcjtrLmZhcj1hLmZhcjttLm1hdHJpeFdvcmxkLmNvcHkoYS5tYXRyaXhXb3JsZCk7bS5tYXRyaXhXb3JsZEludmVyc2UuY29weShhLm1hdHJpeFdvcmxkSW52ZXJzZSk7aC5tYXRyaXhXb3JsZEludmVyc2UuZnJvbUFycmF5KGUubGVmdFZpZXdNYXRyaXgpO2subWF0cml4V29ybGRJbnZlcnNlLmZyb21BcnJheShlLnJpZ2h0Vmlld01hdHJpeCk7YT1jLnBhcmVudDtudWxsIT09YSYmKGcuZ2V0SW52ZXJzZShhLm1hdHJpeFdvcmxkKSxoLm1hdHJpeFdvcmxkSW52ZXJzZS5tdWx0aXBseShnKSxrLm1hdHJpeFdvcmxkSW52ZXJzZS5tdWx0aXBseShnKSk7aC5tYXRyaXhXb3JsZC5nZXRJbnZlcnNlKGgubWF0cml4V29ybGRJbnZlcnNlKTtrLm1hdHJpeFdvcmxkLmdldEludmVyc2Uoay5tYXRyaXhXb3JsZEludmVyc2UpO2gucHJvamVjdGlvbk1hdHJpeC5mcm9tQXJyYXkoZS5sZWZ0UHJvamVjdGlvbk1hdHJpeCk7XG4gICAgay5wcm9qZWN0aW9uTWF0cml4LmZyb21BcnJheShlLnJpZ2h0UHJvamVjdGlvbk1hdHJpeCk7bS5wcm9qZWN0aW9uTWF0cml4LmNvcHkoaC5wcm9qZWN0aW9uTWF0cml4KTthPWQuZ2V0TGF5ZXJzKCk7YS5sZW5ndGgmJihhPWFbMF0sbnVsbCE9PWEubGVmdEJvdW5kcyYmND09PWEubGVmdEJvdW5kcy5sZW5ndGgmJmguYm91bmRzLmZyb21BcnJheShhLmxlZnRCb3VuZHMpLG51bGwhPT1hLnJpZ2h0Qm91bmRzJiY0PT09YS5yaWdodEJvdW5kcy5sZW5ndGgmJmsuYm91bmRzLmZyb21BcnJheShhLnJpZ2h0Qm91bmRzKSk7cmV0dXJuIG19O3RoaXMuc3VibWl0RnJhbWU9ZnVuY3Rpb24oKXtkJiZkLmlzUHJlc2VudGluZyYmZC5zdWJtaXRGcmFtZSgpfTt0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT09dHlwZW9mIHdpbmRvdyYmd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2cmRpc3BsYXlwcmVzZW50Y2hhbmdlXCIsYil9fWZ1bmN0aW9uIEVnKGEpe3ZhciBiPXt9O1xuICAgIHJldHVybntnZXQ6ZnVuY3Rpb24oYyl7aWYodm9pZCAwIT09YltjXSlyZXR1cm4gYltjXTtzd2l0Y2goYyl7Y2FzZSBcIldFQkdMX2RlcHRoX3RleHR1cmVcIjp2YXIgZD1hLmdldEV4dGVuc2lvbihcIldFQkdMX2RlcHRoX3RleHR1cmVcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2RlcHRoX3RleHR1cmVcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2RlcHRoX3RleHR1cmVcIik7YnJlYWs7Y2FzZSBcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiOmQ9YS5nZXRFeHRlbnNpb24oXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiTU9aX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKXx8YS5nZXRFeHRlbnNpb24oXCJXRUJLSVRfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpO2JyZWFrO2Nhc2UgXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiOmQ9YS5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8XG4gICAgYS5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpO2JyZWFrO2Nhc2UgXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIjpkPWEuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpfHxhLmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIik7YnJlYWs7Y2FzZSBcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCI6ZD1hLmdldEV4dGVuc2lvbihcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCIpO2JyZWFrO2RlZmF1bHQ6ZD1hLmdldEV4dGVuc2lvbihjKX1udWxsPT09ZCYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogXCIrYytcIiBleHRlbnNpb24gbm90IHN1cHBvcnRlZC5cIik7cmV0dXJuIGJbY109ZH19fWZ1bmN0aW9uIEZnKCl7ZnVuY3Rpb24gYSgpe20udmFsdWUhPT1cbiAgICBkJiYobS52YWx1ZT1kLG0ubmVlZHNVcGRhdGU9MDxlKTtjLm51bVBsYW5lcz1lO2MubnVtSW50ZXJzZWN0aW9uPTB9ZnVuY3Rpb24gYihhLGIsZCxlKXt2YXIgZj1udWxsIT09YT9hLmxlbmd0aDowLGc9bnVsbDtpZigwIT09Zil7Zz1tLnZhbHVlO2lmKCEwIT09ZXx8bnVsbD09PWcpe2U9ZCs0KmY7Yj1iLm1hdHJpeFdvcmxkSW52ZXJzZTtrLmdldE5vcm1hbE1hdHJpeChiKTtpZihudWxsPT09Z3x8Zy5sZW5ndGg8ZSlnPW5ldyBGbG9hdDMyQXJyYXkoZSk7Zm9yKGU9MDtlIT09ZjsrK2UsZCs9NCloLmNvcHkoYVtlXSkuYXBwbHlNYXRyaXg0KGIsayksaC5ub3JtYWwudG9BcnJheShnLGQpLGdbZCszXT1oLmNvbnN0YW50fW0udmFsdWU9ZzttLm5lZWRzVXBkYXRlPSEwfWMubnVtUGxhbmVzPWY7cmV0dXJuIGd9dmFyIGM9dGhpcyxkPW51bGwsZT0wLGY9ITEsZz0hMSxoPW5ldyBFYSxrPW5ldyBtYSxtPXt2YWx1ZTpudWxsLG5lZWRzVXBkYXRlOiExfTt0aGlzLnVuaWZvcm09bTt0aGlzLm51bUludGVyc2VjdGlvbj1cbiAgICB0aGlzLm51bVBsYW5lcz0wO3RoaXMuaW5pdD1mdW5jdGlvbihhLGMsZyl7dmFyIGg9MCE9PWEubGVuZ3RofHxjfHwwIT09ZXx8ZjtmPWM7ZD1iKGEsZywwKTtlPWEubGVuZ3RoO3JldHVybiBofTt0aGlzLmJlZ2luU2hhZG93cz1mdW5jdGlvbigpe2c9ITA7YihudWxsKX07dGhpcy5lbmRTaGFkb3dzPWZ1bmN0aW9uKCl7Zz0hMTthKCl9O3RoaXMuc2V0U3RhdGU9ZnVuY3Rpb24oYyxoLGssbCx0LHYpe2lmKCFmfHxudWxsPT09Y3x8MD09PWMubGVuZ3RofHxnJiYhaylnP2IobnVsbCk6YSgpO2Vsc2V7az1nPzA6ZTt2YXIgbj00KmsscT10LmNsaXBwaW5nU3RhdGV8fG51bGw7bS52YWx1ZT1xO3E9YihjLGwsbix2KTtmb3IoYz0wO2MhPT1uOysrYylxW2NdPWRbY107dC5jbGlwcGluZ1N0YXRlPXE7dGhpcy5udW1JbnRlcnNlY3Rpb249aD90aGlzLm51bVBsYW5lczowO3RoaXMubnVtUGxhbmVzKz1rfX19ZnVuY3Rpb24gYWYoYSxiKXtyZXR1cm57Y29udmVydDpmdW5jdGlvbihjKXtpZigxRTM9PT1cbiAgICBjKXJldHVybiBhLlJFUEVBVDtpZigxMDAxPT09YylyZXR1cm4gYS5DTEFNUF9UT19FREdFO2lmKDEwMDI9PT1jKXJldHVybiBhLk1JUlJPUkVEX1JFUEVBVDtpZigxMDAzPT09YylyZXR1cm4gYS5ORUFSRVNUO2lmKDEwMDQ9PT1jKXJldHVybiBhLk5FQVJFU1RfTUlQTUFQX05FQVJFU1Q7aWYoMTAwNT09PWMpcmV0dXJuIGEuTkVBUkVTVF9NSVBNQVBfTElORUFSO2lmKDEwMDY9PT1jKXJldHVybiBhLkxJTkVBUjtpZigxMDA3PT09YylyZXR1cm4gYS5MSU5FQVJfTUlQTUFQX05FQVJFU1Q7aWYoMTAwOD09PWMpcmV0dXJuIGEuTElORUFSX01JUE1BUF9MSU5FQVI7aWYoMTAwOT09PWMpcmV0dXJuIGEuVU5TSUdORURfQllURTtpZigxMDE3PT09YylyZXR1cm4gYS5VTlNJR05FRF9TSE9SVF80XzRfNF80O2lmKDEwMTg9PT1jKXJldHVybiBhLlVOU0lHTkVEX1NIT1JUXzVfNV81XzE7aWYoMTAxOT09PWMpcmV0dXJuIGEuVU5TSUdORURfU0hPUlRfNV82XzU7aWYoMTAxMD09PWMpcmV0dXJuIGEuQllURTtcbiAgICBpZigxMDExPT09YylyZXR1cm4gYS5TSE9SVDtpZigxMDEyPT09YylyZXR1cm4gYS5VTlNJR05FRF9TSE9SVDtpZigxMDEzPT09YylyZXR1cm4gYS5JTlQ7aWYoMTAxND09PWMpcmV0dXJuIGEuVU5TSUdORURfSU5UO2lmKDEwMTU9PT1jKXJldHVybiBhLkZMT0FUO2lmKDEwMTY9PT1jKXt2YXIgZD1iLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIik7aWYobnVsbCE9PWQpcmV0dXJuIGQuSEFMRl9GTE9BVF9PRVN9aWYoMTAyMT09PWMpcmV0dXJuIGEuQUxQSEE7aWYoMTAyMj09PWMpcmV0dXJuIGEuUkdCO2lmKDEwMjM9PT1jKXJldHVybiBhLlJHQkE7aWYoMTAyND09PWMpcmV0dXJuIGEuTFVNSU5BTkNFO2lmKDEwMjU9PT1jKXJldHVybiBhLkxVTUlOQU5DRV9BTFBIQTtpZigxMDI2PT09YylyZXR1cm4gYS5ERVBUSF9DT01QT05FTlQ7aWYoMTAyNz09PWMpcmV0dXJuIGEuREVQVEhfU1RFTkNJTDtpZigxMDA9PT1jKXJldHVybiBhLkZVTkNfQUREO2lmKDEwMT09PWMpcmV0dXJuIGEuRlVOQ19TVUJUUkFDVDtcbiAgICBpZigxMDI9PT1jKXJldHVybiBhLkZVTkNfUkVWRVJTRV9TVUJUUkFDVDtpZigyMDA9PT1jKXJldHVybiBhLlpFUk87aWYoMjAxPT09YylyZXR1cm4gYS5PTkU7aWYoMjAyPT09YylyZXR1cm4gYS5TUkNfQ09MT1I7aWYoMjAzPT09YylyZXR1cm4gYS5PTkVfTUlOVVNfU1JDX0NPTE9SO2lmKDIwND09PWMpcmV0dXJuIGEuU1JDX0FMUEhBO2lmKDIwNT09PWMpcmV0dXJuIGEuT05FX01JTlVTX1NSQ19BTFBIQTtpZigyMDY9PT1jKXJldHVybiBhLkRTVF9BTFBIQTtpZigyMDc9PT1jKXJldHVybiBhLk9ORV9NSU5VU19EU1RfQUxQSEE7aWYoMjA4PT09YylyZXR1cm4gYS5EU1RfQ09MT1I7aWYoMjA5PT09YylyZXR1cm4gYS5PTkVfTUlOVVNfRFNUX0NPTE9SO2lmKDIxMD09PWMpcmV0dXJuIGEuU1JDX0FMUEhBX1NBVFVSQVRFO2lmKDIwMDE9PT1jfHwyMDAyPT09Y3x8MjAwMz09PWN8fDIwMDQ9PT1jKWlmKGQ9Yi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKSxudWxsIT09XG4gICAgZCl7aWYoMjAwMT09PWMpcmV0dXJuIGQuQ09NUFJFU1NFRF9SR0JfUzNUQ19EWFQxX0VYVDtpZigyMDAyPT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQxX0VYVDtpZigyMDAzPT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVDtpZigyMDA0PT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQ1X0VYVH1pZigyMTAwPT09Y3x8MjEwMT09PWN8fDIxMDI9PT1jfHwyMTAzPT09YylpZihkPWIuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpLG51bGwhPT1kKXtpZigyMTAwPT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQl9QVlJUQ180QlBQVjFfSU1HO2lmKDIxMDE9PT1jKXJldHVybiBkLkNPTVBSRVNTRURfUkdCX1BWUlRDXzJCUFBWMV9JTUc7aWYoMjEwMj09PWMpcmV0dXJuIGQuQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzRCUFBWMV9JTUc7aWYoMjEwMz09PWMpcmV0dXJuIGQuQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzJCUFBWMV9JTUd9aWYoMjE1MT09PVxuICAgIGMmJihkPWIuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIiksbnVsbCE9PWQpKXJldHVybiBkLkNPTVBSRVNTRURfUkdCX0VUQzFfV0VCR0w7aWYoMTAzPT09Y3x8MTA0PT09YylpZihkPWIuZ2V0KFwiRVhUX2JsZW5kX21pbm1heFwiKSxudWxsIT09ZCl7aWYoMTAzPT09YylyZXR1cm4gZC5NSU5fRVhUO2lmKDEwND09PWMpcmV0dXJuIGQuTUFYX0VYVH1yZXR1cm4gMTAyMD09PWMmJihkPWIuZ2V0KFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiKSxudWxsIT09ZCk/ZC5VTlNJR05FRF9JTlRfMjRfOF9XRUJHTDowfX19ZnVuY3Rpb24gY2UoYSl7ZnVuY3Rpb24gYigpe2lhPW5ldyBFZyhGKTtpYS5nZXQoXCJXRUJHTF9kZXB0aF90ZXh0dXJlXCIpO2lhLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpO2lhLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiKTtpYS5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIpO2lhLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCIpO1xuICAgIGlhLmdldChcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKTtpYS5nZXQoXCJPRVNfZWxlbWVudF9pbmRleF91aW50XCIpO2lhLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7cGE9bmV3IGFmKEYsaWEpO1Q9bmV3IERnKEYsaWEsYSk7Wj1uZXcgQ2coRixpYSxwYSk7Wi5zY2lzc29yKFguY29weShmYSkubXVsdGlwbHlTY2FsYXIod2EpKTtaLnZpZXdwb3J0KG5iLmNvcHkoZGEpLm11bHRpcGx5U2NhbGFyKHdhKSk7Y2E9bmV3IEJnO2dhPW5ldyBBZyhGLGlhLFosY2EsVCxwYSxoYSk7cWE9bmV3IGJnKEYpO3JhPW5ldyBvZyhGLHFhLGhhKTt0YT1uZXcgcmcocmEsYmEpO3hhPW5ldyBsZyhGKTttYT1uZXcgemcoUyxpYSxUKTt1YT1uZXcgcWc7c2E9bmV3IGpnO2phPW5ldyBmZyhTLFoscmEsSik7eWE9bmV3IG5nKEYsaWEsYmEpO3phPW5ldyBtZyhGLGlhLGJhKTtBYT1uZXcgWmYoUyxGLFosZ2EsVCk7QmE9bmV3ICRmKFMsRixaLGdhLFQpO1MuaW5mby5wcm9ncmFtcz1tYS5wcm9ncmFtcztcbiAgICBTLmNvbnRleHQ9RjtTLmNhcGFiaWxpdGllcz1UO1MuZXh0ZW5zaW9ucz1pYTtTLnByb3BlcnRpZXM9Y2E7Uy5yZW5kZXJMaXN0cz1zYTtTLnN0YXRlPVp9ZnVuY3Rpb24gYyhhKXthLnByZXZlbnREZWZhdWx0KCk7Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBDb250ZXh0IExvc3QuXCIpO0w9ITB9ZnVuY3Rpb24gZCgpe2NvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQ29udGV4dCBSZXN0b3JlZC5cIik7TD0hMTtiKCl9ZnVuY3Rpb24gZShhKXthPWEudGFyZ2V0O2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixlKTtmKGEpO2NhLnJlbW92ZShhKX1mdW5jdGlvbiBmKGEpe3ZhciBiPWNhLmdldChhKS5wcm9ncmFtO2EucHJvZ3JhbT12b2lkIDA7dm9pZCAwIT09YiYmbWEucmVsZWFzZVByb2dyYW0oYil9ZnVuY3Rpb24gZyhhLGIsYyl7YS5yZW5kZXIoZnVuY3Rpb24oYSl7Uy5yZW5kZXJCdWZmZXJJbW1lZGlhdGUoYSxiLGMpfSl9ZnVuY3Rpb24gaChhKXtudWxsIT09XG4gICAgQ2EmJkNhKGEpOyhhPWthLmdldERldmljZSgpKSYmYS5pc1ByZXNlbnRpbmc/YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaCk6d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShoKX1mdW5jdGlvbiBrKGEsYixjKXtpZighMSE9PWEudmlzaWJsZSl7aWYoYS5sYXllcnMudGVzdChiLmxheWVycykpaWYoYS5pc0xpZ2h0KUQucHVzaChhKSxhLmNhc3RTaGFkb3cmJkMucHVzaChhKTtlbHNlIGlmKGEuaXNTcHJpdGUpYS5mcnVzdHVtQ3VsbGVkJiYhJGQuaW50ZXJzZWN0c1Nwcml0ZShhKXx8SC5wdXNoKGEpO2Vsc2UgaWYoYS5pc0xlbnNGbGFyZSlsYS5wdXNoKGEpO2Vsc2UgaWYoYS5pc0ltbWVkaWF0ZVJlbmRlck9iamVjdCljJiZPYi5zZXRGcm9tTWF0cml4UG9zaXRpb24oYS5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KHRkKSxFLnB1c2goYSxudWxsLGEubWF0ZXJpYWwsT2IueixudWxsKTtlbHNlIGlmKGEuaXNNZXNofHxhLmlzTGluZXx8YS5pc1BvaW50cylpZihhLmlzU2tpbm5lZE1lc2gmJlxuICAgIGEuc2tlbGV0b24udXBkYXRlKCksIWEuZnJ1c3R1bUN1bGxlZHx8JGQuaW50ZXJzZWN0c09iamVjdChhKSl7YyYmT2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEubWF0cml4V29ybGQpLmFwcGx5TWF0cml4NCh0ZCk7dmFyIGQ9dGEudXBkYXRlKGEpLGU9YS5tYXRlcmlhbDtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgZj1kLmdyb3VwcyxnPTAsaD1mLmxlbmd0aDtnPGg7ZysrKXt2YXIgbT1mW2ddLG49ZVttLm1hdGVyaWFsSW5kZXhdO24mJm4udmlzaWJsZSYmRS5wdXNoKGEsZCxuLE9iLnosbSl9ZWxzZSBlLnZpc2libGUmJkUucHVzaChhLGQsZSxPYi56LG51bGwpfWE9YS5jaGlsZHJlbjtnPTA7Zm9yKGg9YS5sZW5ndGg7ZzxoO2crKylrKGFbZ10sYixjKX19ZnVuY3Rpb24gbShhLGIsYyxkKXtmb3IodmFyIGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspe3ZhciBnPWFbZV0saD1nLm9iamVjdCxrPWcuZ2VvbWV0cnksbT12b2lkIDA9PT1kP2cubWF0ZXJpYWw6ZCxnPWcuZ3JvdXA7aWYoYy5pc0FycmF5Q2FtZXJhKXtXPVxuICAgIGM7Zm9yKHZhciBuPWMuY2FtZXJhcyx1PTAsbD1uLmxlbmd0aDt1PGw7dSsrKXt2YXIgcj1uW3VdO2lmKGgubGF5ZXJzLnRlc3Qoci5sYXllcnMpKXt2YXIgdD1yLmJvdW5kcztaLnZpZXdwb3J0KG5iLnNldCh0LngqZWEsdC55KlUsdC56KmVhLHQudypVKS5tdWx0aXBseVNjYWxhcih3YSkpO3EoaCxiLHIsayxtLGcpfX19ZWxzZSBXPW51bGwscShoLGIsYyxrLG0sZyl9fWZ1bmN0aW9uIHEoYSxiLGMsZCxlLGYpe2Eub25CZWZvcmVSZW5kZXIoUyxiLGMsZCxlLGYpO2EubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoYy5tYXRyaXhXb3JsZEludmVyc2UsYS5tYXRyaXhXb3JsZCk7YS5ub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KGEubW9kZWxWaWV3TWF0cml4KTtpZihhLmlzSW1tZWRpYXRlUmVuZGVyT2JqZWN0KXt2YXIgaD1hLmlzTWVzaCYmMD5hLm1hdHJpeFdvcmxkLmRldGVybWluYW50KCk7Wi5zZXRNYXRlcmlhbChlLGgpO2g9dShjLGIuZm9nLGUsYSk7Uj1cIlwiO1xuICAgIGcoYSxoLGUpfWVsc2UgUy5yZW5kZXJCdWZmZXJEaXJlY3QoYyxiLmZvZyxkLGUsYSxmKTthLm9uQWZ0ZXJSZW5kZXIoUyxiLGMsZCxlLGYpfWZ1bmN0aW9uIG4oYSxiLGMpe3ZhciBkPWNhLmdldChhKTtjPW1hLmdldFBhcmFtZXRlcnMoYSx1YS5zdGF0ZSxDLGIsSmEubnVtUGxhbmVzLEphLm51bUludGVyc2VjdGlvbixjKTt2YXIgZz1tYS5nZXRQcm9ncmFtQ29kZShhLGMpLGg9ZC5wcm9ncmFtLGs9ITA7aWYodm9pZCAwPT09aClhLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsZSk7ZWxzZSBpZihoLmNvZGUhPT1nKWYoYSk7ZWxzZXtpZih2b2lkIDAhPT1jLnNoYWRlcklEKXJldHVybjtrPSExfWsmJihjLnNoYWRlcklEPyhoPXRiW2Muc2hhZGVySURdLGQuc2hhZGVyPXtuYW1lOmEudHlwZSx1bmlmb3JtczpHYS5jbG9uZShoLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6aC52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6aC5mcmFnbWVudFNoYWRlcn0pOmQuc2hhZGVyPXtuYW1lOmEudHlwZSxcbiAgICB1bmlmb3JtczphLnVuaWZvcm1zLHZlcnRleFNoYWRlcjphLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjphLmZyYWdtZW50U2hhZGVyfSxhLm9uQmVmb3JlQ29tcGlsZShkLnNoYWRlciksaD1tYS5hY3F1aXJlUHJvZ3JhbShhLGQuc2hhZGVyLGMsZyksZC5wcm9ncmFtPWgsYS5wcm9ncmFtPWgpO2M9aC5nZXRBdHRyaWJ1dGVzKCk7aWYoYS5tb3JwaFRhcmdldHMpZm9yKGc9YS5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHM9MDtnPFMubWF4TW9ycGhUYXJnZXRzO2crKykwPD1jW1wibW9ycGhUYXJnZXRcIitnXSYmYS5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHMrKztpZihhLm1vcnBoTm9ybWFscylmb3IoZz1hLm51bVN1cHBvcnRlZE1vcnBoTm9ybWFscz0wO2c8Uy5tYXhNb3JwaE5vcm1hbHM7ZysrKTA8PWNbXCJtb3JwaE5vcm1hbFwiK2ddJiZhLm51bVN1cHBvcnRlZE1vcnBoTm9ybWFscysrO2M9ZC5zaGFkZXIudW5pZm9ybXM7aWYoIWEuaXNTaGFkZXJNYXRlcmlhbCYmIWEuaXNSYXdTaGFkZXJNYXRlcmlhbHx8XG4gICAgITA9PT1hLmNsaXBwaW5nKWQubnVtQ2xpcHBpbmdQbGFuZXM9SmEubnVtUGxhbmVzLGQubnVtSW50ZXJzZWN0aW9uPUphLm51bUludGVyc2VjdGlvbixjLmNsaXBwaW5nUGxhbmVzPUphLnVuaWZvcm07ZC5mb2c9YjtkLmxpZ2h0c0hhc2g9dWEuc3RhdGUuaGFzaDthLmxpZ2h0cyYmKGMuYW1iaWVudExpZ2h0Q29sb3IudmFsdWU9dWEuc3RhdGUuYW1iaWVudCxjLmRpcmVjdGlvbmFsTGlnaHRzLnZhbHVlPXVhLnN0YXRlLmRpcmVjdGlvbmFsLGMuc3BvdExpZ2h0cy52YWx1ZT11YS5zdGF0ZS5zcG90LGMucmVjdEFyZWFMaWdodHMudmFsdWU9dWEuc3RhdGUucmVjdEFyZWEsYy5wb2ludExpZ2h0cy52YWx1ZT11YS5zdGF0ZS5wb2ludCxjLmhlbWlzcGhlcmVMaWdodHMudmFsdWU9dWEuc3RhdGUuaGVtaSxjLmRpcmVjdGlvbmFsU2hhZG93TWFwLnZhbHVlPXVhLnN0YXRlLmRpcmVjdGlvbmFsU2hhZG93TWFwLGMuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXgudmFsdWU9dWEuc3RhdGUuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXgsXG4gICAgYy5zcG90U2hhZG93TWFwLnZhbHVlPXVhLnN0YXRlLnNwb3RTaGFkb3dNYXAsYy5zcG90U2hhZG93TWF0cml4LnZhbHVlPXVhLnN0YXRlLnNwb3RTaGFkb3dNYXRyaXgsYy5wb2ludFNoYWRvd01hcC52YWx1ZT11YS5zdGF0ZS5wb2ludFNoYWRvd01hcCxjLnBvaW50U2hhZG93TWF0cml4LnZhbHVlPXVhLnN0YXRlLnBvaW50U2hhZG93TWF0cml4KTthPWQucHJvZ3JhbS5nZXRVbmlmb3JtcygpO2E9bWIuc2VxV2l0aFZhbHVlKGEuc2VxLGMpO2QudW5pZm9ybXNMaXN0PWF9ZnVuY3Rpb24gdShhLGIsYyxkKXtZPTA7dmFyIGU9Y2EuZ2V0KGMpO3NkJiYoYWV8fGEhPT1WKSYmSmEuc2V0U3RhdGUoYy5jbGlwcGluZ1BsYW5lcyxjLmNsaXBJbnRlcnNlY3Rpb24sYy5jbGlwU2hhZG93cyxhLGUsYT09PVYmJmMuaWQ9PT1QKTshMT09PWMubmVlZHNVcGRhdGUmJih2b2lkIDA9PT1lLnByb2dyYW0/Yy5uZWVkc1VwZGF0ZT0hMDpjLmZvZyYmZS5mb2chPT1iP2MubmVlZHNVcGRhdGU9ITA6Yy5saWdodHMmJlxuICAgIGUubGlnaHRzSGFzaCE9PXVhLnN0YXRlLmhhc2g/Yy5uZWVkc1VwZGF0ZT0hMDp2b2lkIDA9PT1lLm51bUNsaXBwaW5nUGxhbmVzfHxlLm51bUNsaXBwaW5nUGxhbmVzPT09SmEubnVtUGxhbmVzJiZlLm51bUludGVyc2VjdGlvbj09PUphLm51bUludGVyc2VjdGlvbnx8KGMubmVlZHNVcGRhdGU9ITApKTtjLm5lZWRzVXBkYXRlJiYobihjLGIsZCksYy5uZWVkc1VwZGF0ZT0hMSk7dmFyIGY9ITEsZz0hMSxoPSExLGs9ZS5wcm9ncmFtLG09ay5nZXRVbmlmb3JtcygpLHE9ZS5zaGFkZXIudW5pZm9ybXM7Wi51c2VQcm9ncmFtKGsucHJvZ3JhbSkmJihoPWc9Zj0hMCk7Yy5pZCE9PVAmJihQPWMuaWQsZz0hMCk7aWYoZnx8YSE9PVYpe20uc2V0VmFsdWUoRixcInByb2plY3Rpb25NYXRyaXhcIixhLnByb2plY3Rpb25NYXRyaXgpO1QubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmbS5zZXRWYWx1ZShGLFwibG9nRGVwdGhCdWZGQ1wiLDIvKE1hdGgubG9nKGEuZmFyKzEpL01hdGguTE4yKSk7ViE9PShXfHxcbiAgICBhKSYmKFY9V3x8YSxoPWc9ITApO2lmKGMuaXNTaGFkZXJNYXRlcmlhbHx8Yy5pc01lc2hQaG9uZ01hdGVyaWFsfHxjLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fGMuZW52TWFwKWY9bS5tYXAuY2FtZXJhUG9zaXRpb24sdm9pZCAwIT09ZiYmZi5zZXRWYWx1ZShGLE9iLnNldEZyb21NYXRyaXhQb3NpdGlvbihhLm1hdHJpeFdvcmxkKSk7KGMuaXNNZXNoUGhvbmdNYXRlcmlhbHx8Yy5pc01lc2hMYW1iZXJ0TWF0ZXJpYWx8fGMuaXNNZXNoQmFzaWNNYXRlcmlhbHx8Yy5pc01lc2hTdGFuZGFyZE1hdGVyaWFsfHxjLmlzU2hhZGVyTWF0ZXJpYWx8fGMuc2tpbm5pbmcpJiZtLnNldFZhbHVlKEYsXCJ2aWV3TWF0cml4XCIsYS5tYXRyaXhXb3JsZEludmVyc2UpfWlmKGMuc2tpbm5pbmcmJihtLnNldE9wdGlvbmFsKEYsZCxcImJpbmRNYXRyaXhcIiksbS5zZXRPcHRpb25hbChGLGQsXCJiaW5kTWF0cml4SW52ZXJzZVwiKSxhPWQuc2tlbGV0b24pKWlmKGY9YS5ib25lcyxULmZsb2F0VmVydGV4VGV4dHVyZXMpe2lmKHZvaWQgMD09PVxuICAgIGEuYm9uZVRleHR1cmUpe3ZhciBmPU1hdGguc3FydCg0KmYubGVuZ3RoKSxmPVEuY2VpbFBvd2VyT2ZUd28oZiksZj1NYXRoLm1heChmLDQpLHU9bmV3IEZsb2F0MzJBcnJheShmKmYqNCk7dS5zZXQoYS5ib25lTWF0cmljZXMpO3ZhciByPW5ldyBsYih1LGYsZiwxMDIzLDEwMTUpO2EuYm9uZU1hdHJpY2VzPXU7YS5ib25lVGV4dHVyZT1yO2EuYm9uZVRleHR1cmVTaXplPWZ9bS5zZXRWYWx1ZShGLFwiYm9uZVRleHR1cmVcIixhLmJvbmVUZXh0dXJlKTttLnNldFZhbHVlKEYsXCJib25lVGV4dHVyZVNpemVcIixhLmJvbmVUZXh0dXJlU2l6ZSl9ZWxzZSBtLnNldE9wdGlvbmFsKEYsYSxcImJvbmVNYXRyaWNlc1wiKTtnJiYobS5zZXRWYWx1ZShGLFwidG9uZU1hcHBpbmdFeHBvc3VyZVwiLFMudG9uZU1hcHBpbmdFeHBvc3VyZSksbS5zZXRWYWx1ZShGLFwidG9uZU1hcHBpbmdXaGl0ZVBvaW50XCIsUy50b25lTWFwcGluZ1doaXRlUG9pbnQpLGMubGlnaHRzJiYoZz1oLHEuYW1iaWVudExpZ2h0Q29sb3IubmVlZHNVcGRhdGU9XG4gICAgZyxxLmRpcmVjdGlvbmFsTGlnaHRzLm5lZWRzVXBkYXRlPWcscS5wb2ludExpZ2h0cy5uZWVkc1VwZGF0ZT1nLHEuc3BvdExpZ2h0cy5uZWVkc1VwZGF0ZT1nLHEucmVjdEFyZWFMaWdodHMubmVlZHNVcGRhdGU9ZyxxLmhlbWlzcGhlcmVMaWdodHMubmVlZHNVcGRhdGU9ZyksYiYmYy5mb2cmJihxLmZvZ0NvbG9yLnZhbHVlPWIuY29sb3IsYi5pc0ZvZz8ocS5mb2dOZWFyLnZhbHVlPWIubmVhcixxLmZvZ0Zhci52YWx1ZT1iLmZhcik6Yi5pc0ZvZ0V4cDImJihxLmZvZ0RlbnNpdHkudmFsdWU9Yi5kZW5zaXR5KSksYy5pc01lc2hCYXNpY01hdGVyaWFsP2wocSxjKTpjLmlzTWVzaExhbWJlcnRNYXRlcmlhbD8obChxLGMpLGMuZW1pc3NpdmVNYXAmJihxLmVtaXNzaXZlTWFwLnZhbHVlPWMuZW1pc3NpdmVNYXApKTpjLmlzTWVzaFBob25nTWF0ZXJpYWw/KGwocSxjKSxjLmlzTWVzaFRvb25NYXRlcmlhbD8odChxLGMpLGMuZ3JhZGllbnRNYXAmJihxLmdyYWRpZW50TWFwLnZhbHVlPWMuZ3JhZGllbnRNYXApKTpcbiAgICB0KHEsYykpOmMuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbD8obChxLGMpLGMuaXNNZXNoUGh5c2ljYWxNYXRlcmlhbCYmKHEuY2xlYXJDb2F0LnZhbHVlPWMuY2xlYXJDb2F0LHEuY2xlYXJDb2F0Um91Z2huZXNzLnZhbHVlPWMuY2xlYXJDb2F0Um91Z2huZXNzKSxxLnJvdWdobmVzcy52YWx1ZT1jLnJvdWdobmVzcyxxLm1ldGFsbmVzcy52YWx1ZT1jLm1ldGFsbmVzcyxjLnJvdWdobmVzc01hcCYmKHEucm91Z2huZXNzTWFwLnZhbHVlPWMucm91Z2huZXNzTWFwKSxjLm1ldGFsbmVzc01hcCYmKHEubWV0YWxuZXNzTWFwLnZhbHVlPWMubWV0YWxuZXNzTWFwKSxjLmVtaXNzaXZlTWFwJiYocS5lbWlzc2l2ZU1hcC52YWx1ZT1jLmVtaXNzaXZlTWFwKSxjLmJ1bXBNYXAmJihxLmJ1bXBNYXAudmFsdWU9Yy5idW1wTWFwLHEuYnVtcFNjYWxlLnZhbHVlPWMuYnVtcFNjYWxlKSxjLm5vcm1hbE1hcCYmKHEubm9ybWFsTWFwLnZhbHVlPWMubm9ybWFsTWFwLHEubm9ybWFsU2NhbGUudmFsdWUuY29weShjLm5vcm1hbFNjYWxlKSksXG4gICAgYy5kaXNwbGFjZW1lbnRNYXAmJihxLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1jLmRpc3BsYWNlbWVudE1hcCxxLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWMuZGlzcGxhY2VtZW50U2NhbGUscS5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWMuZGlzcGxhY2VtZW50QmlhcyksYy5lbnZNYXAmJihxLmVudk1hcEludGVuc2l0eS52YWx1ZT1jLmVudk1hcEludGVuc2l0eSkpOmMuaXNNZXNoRGVwdGhNYXRlcmlhbD8obChxLGMpLGMuZGlzcGxhY2VtZW50TWFwJiYocS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9Yy5kaXNwbGFjZW1lbnRNYXAscS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1jLmRpc3BsYWNlbWVudFNjYWxlLHEuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1jLmRpc3BsYWNlbWVudEJpYXMpKTpjLmlzTWVzaERpc3RhbmNlTWF0ZXJpYWw/KGwocSxjKSxjLmRpc3BsYWNlbWVudE1hcCYmKHEuZGlzcGxhY2VtZW50TWFwLnZhbHVlPWMuZGlzcGxhY2VtZW50TWFwLHEuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9XG4gICAgYy5kaXNwbGFjZW1lbnRTY2FsZSxxLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9Yy5kaXNwbGFjZW1lbnRCaWFzKSxxLnJlZmVyZW5jZVBvc2l0aW9uLnZhbHVlLmNvcHkoYy5yZWZlcmVuY2VQb3NpdGlvbikscS5uZWFyRGlzdGFuY2UudmFsdWU9Yy5uZWFyRGlzdGFuY2UscS5mYXJEaXN0YW5jZS52YWx1ZT1jLmZhckRpc3RhbmNlKTpjLmlzTWVzaE5vcm1hbE1hdGVyaWFsPyhsKHEsYyksYy5idW1wTWFwJiYocS5idW1wTWFwLnZhbHVlPWMuYnVtcE1hcCxxLmJ1bXBTY2FsZS52YWx1ZT1jLmJ1bXBTY2FsZSksYy5ub3JtYWxNYXAmJihxLm5vcm1hbE1hcC52YWx1ZT1jLm5vcm1hbE1hcCxxLm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkoYy5ub3JtYWxTY2FsZSkpLGMuZGlzcGxhY2VtZW50TWFwJiYocS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9Yy5kaXNwbGFjZW1lbnRNYXAscS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1jLmRpc3BsYWNlbWVudFNjYWxlLHEuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1cbiAgICBjLmRpc3BsYWNlbWVudEJpYXMpKTpjLmlzTGluZUJhc2ljTWF0ZXJpYWw/KHEuZGlmZnVzZS52YWx1ZT1jLmNvbG9yLHEub3BhY2l0eS52YWx1ZT1jLm9wYWNpdHksYy5pc0xpbmVEYXNoZWRNYXRlcmlhbCYmKHEuZGFzaFNpemUudmFsdWU9Yy5kYXNoU2l6ZSxxLnRvdGFsU2l6ZS52YWx1ZT1jLmRhc2hTaXplK2MuZ2FwU2l6ZSxxLnNjYWxlLnZhbHVlPWMuc2NhbGUpKTpjLmlzUG9pbnRzTWF0ZXJpYWw/KHEuZGlmZnVzZS52YWx1ZT1jLmNvbG9yLHEub3BhY2l0eS52YWx1ZT1jLm9wYWNpdHkscS5zaXplLnZhbHVlPWMuc2l6ZSp3YSxxLnNjYWxlLnZhbHVlPS41KlUscS5tYXAudmFsdWU9Yy5tYXAsbnVsbCE9PWMubWFwJiYoITA9PT1jLm1hcC5tYXRyaXhBdXRvVXBkYXRlJiYoYj1jLm1hcC5vZmZzZXQsZz1jLm1hcC5yZXBlYXQsaD1jLm1hcC5jZW50ZXIsYy5tYXAubWF0cml4LnNldFV2VHJhbnNmb3JtKGIueCxiLnksZy54LGcueSxjLm1hcC5yb3RhdGlvbixoLngsaC55KSkscS51dlRyYW5zZm9ybS52YWx1ZS5jb3B5KGMubWFwLm1hdHJpeCkpKTpcbiAgICBjLmlzU2hhZG93TWF0ZXJpYWwmJihxLmNvbG9yLnZhbHVlPWMuY29sb3IscS5vcGFjaXR5LnZhbHVlPWMub3BhY2l0eSksdm9pZCAwIT09cS5sdGNNYXQmJihxLmx0Y01hdC52YWx1ZT1LLkxUQ19NQVRfVEVYVFVSRSksdm9pZCAwIT09cS5sdGNNYWcmJihxLmx0Y01hZy52YWx1ZT1LLkxUQ19NQUdfVEVYVFVSRSksbWIudXBsb2FkKEYsZS51bmlmb3Jtc0xpc3QscSxTKSk7bS5zZXRWYWx1ZShGLFwibW9kZWxWaWV3TWF0cml4XCIsZC5tb2RlbFZpZXdNYXRyaXgpO20uc2V0VmFsdWUoRixcIm5vcm1hbE1hdHJpeFwiLGQubm9ybWFsTWF0cml4KTttLnNldFZhbHVlKEYsXCJtb2RlbE1hdHJpeFwiLGQubWF0cml4V29ybGQpO3JldHVybiBrfWZ1bmN0aW9uIGwoYSxiKXthLm9wYWNpdHkudmFsdWU9Yi5vcGFjaXR5O2IuY29sb3ImJihhLmRpZmZ1c2UudmFsdWU9Yi5jb2xvcik7Yi5lbWlzc2l2ZSYmYS5lbWlzc2l2ZS52YWx1ZS5jb3B5KGIuZW1pc3NpdmUpLm11bHRpcGx5U2NhbGFyKGIuZW1pc3NpdmVJbnRlbnNpdHkpO1xuICAgIGIubWFwJiYoYS5tYXAudmFsdWU9Yi5tYXApO2IuYWxwaGFNYXAmJihhLmFscGhhTWFwLnZhbHVlPWIuYWxwaGFNYXApO2Iuc3BlY3VsYXJNYXAmJihhLnNwZWN1bGFyTWFwLnZhbHVlPWIuc3BlY3VsYXJNYXApO2IuZW52TWFwJiYoYS5lbnZNYXAudmFsdWU9Yi5lbnZNYXAsYS5mbGlwRW52TWFwLnZhbHVlPWIuZW52TWFwJiZiLmVudk1hcC5pc0N1YmVUZXh0dXJlPy0xOjEsYS5yZWZsZWN0aXZpdHkudmFsdWU9Yi5yZWZsZWN0aXZpdHksYS5yZWZyYWN0aW9uUmF0aW8udmFsdWU9Yi5yZWZyYWN0aW9uUmF0aW8pO2IubGlnaHRNYXAmJihhLmxpZ2h0TWFwLnZhbHVlPWIubGlnaHRNYXAsYS5saWdodE1hcEludGVuc2l0eS52YWx1ZT1iLmxpZ2h0TWFwSW50ZW5zaXR5KTtiLmFvTWFwJiYoYS5hb01hcC52YWx1ZT1iLmFvTWFwLGEuYW9NYXBJbnRlbnNpdHkudmFsdWU9Yi5hb01hcEludGVuc2l0eSk7aWYoYi5tYXApdmFyIGM9Yi5tYXA7ZWxzZSBiLnNwZWN1bGFyTWFwP2M9Yi5zcGVjdWxhck1hcDpcbiAgICBiLmRpc3BsYWNlbWVudE1hcD9jPWIuZGlzcGxhY2VtZW50TWFwOmIubm9ybWFsTWFwP2M9Yi5ub3JtYWxNYXA6Yi5idW1wTWFwP2M9Yi5idW1wTWFwOmIucm91Z2huZXNzTWFwP2M9Yi5yb3VnaG5lc3NNYXA6Yi5tZXRhbG5lc3NNYXA/Yz1iLm1ldGFsbmVzc01hcDpiLmFscGhhTWFwP2M9Yi5hbHBoYU1hcDpiLmVtaXNzaXZlTWFwJiYoYz1iLmVtaXNzaXZlTWFwKTtpZih2b2lkIDAhPT1jKXtjLmlzV2ViR0xSZW5kZXJUYXJnZXQmJihjPWMudGV4dHVyZSk7aWYoITA9PT1jLm1hdHJpeEF1dG9VcGRhdGUpe2I9Yy5vZmZzZXQ7dmFyIGQ9Yy5yZXBlYXQsZT1jLmNlbnRlcjtjLm1hdHJpeC5zZXRVdlRyYW5zZm9ybShiLngsYi55LGQueCxkLnksYy5yb3RhdGlvbixlLngsZS55KX1hLnV2VHJhbnNmb3JtLnZhbHVlLmNvcHkoYy5tYXRyaXgpfX1mdW5jdGlvbiB0KGEsYil7YS5zcGVjdWxhci52YWx1ZT1iLnNwZWN1bGFyO2Euc2hpbmluZXNzLnZhbHVlPU1hdGgubWF4KGIuc2hpbmluZXNzLFxuICAgIDFFLTQpO2IuZW1pc3NpdmVNYXAmJihhLmVtaXNzaXZlTWFwLnZhbHVlPWIuZW1pc3NpdmVNYXApO2IuYnVtcE1hcCYmKGEuYnVtcE1hcC52YWx1ZT1iLmJ1bXBNYXAsYS5idW1wU2NhbGUudmFsdWU9Yi5idW1wU2NhbGUpO2Iubm9ybWFsTWFwJiYoYS5ub3JtYWxNYXAudmFsdWU9Yi5ub3JtYWxNYXAsYS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGIubm9ybWFsU2NhbGUpKTtiLmRpc3BsYWNlbWVudE1hcCYmKGEuZGlzcGxhY2VtZW50TWFwLnZhbHVlPWIuZGlzcGxhY2VtZW50TWFwLGEuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9Yi5kaXNwbGFjZW1lbnRTY2FsZSxhLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9Yi5kaXNwbGFjZW1lbnRCaWFzKX1jb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXJcIixcIjg5XCIpO2E9YXx8e307dmFyIHY9dm9pZCAwIT09YS5jYW52YXM/YS5jYW52YXM6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFxuICAgIFwiY2FudmFzXCIpLHc9dm9pZCAwIT09YS5jb250ZXh0P2EuY29udGV4dDpudWxsLHo9dm9pZCAwIT09YS5hbHBoYT9hLmFscGhhOiExLHk9dm9pZCAwIT09YS5kZXB0aD9hLmRlcHRoOiEwLEk9dm9pZCAwIT09YS5zdGVuY2lsP2Euc3RlbmNpbDohMCxBPXZvaWQgMCE9PWEuYW50aWFsaWFzP2EuYW50aWFsaWFzOiExLEo9dm9pZCAwIT09YS5wcmVtdWx0aXBsaWVkQWxwaGE/YS5wcmVtdWx0aXBsaWVkQWxwaGE6ITAseD12b2lkIDAhPT1hLnByZXNlcnZlRHJhd2luZ0J1ZmZlcj9hLnByZXNlcnZlRHJhd2luZ0J1ZmZlcjohMSxCPXZvaWQgMCE9PWEucG93ZXJQcmVmZXJlbmNlP2EucG93ZXJQcmVmZXJlbmNlOlwiZGVmYXVsdFwiLEQ9W10sQz1bXSxFPW51bGwsSD1bXSxsYT1bXTt0aGlzLmRvbUVsZW1lbnQ9djt0aGlzLmNvbnRleHQ9bnVsbDt0aGlzLnNvcnRPYmplY3RzPXRoaXMuYXV0b0NsZWFyU3RlbmNpbD10aGlzLmF1dG9DbGVhckRlcHRoPXRoaXMuYXV0b0NsZWFyQ29sb3I9dGhpcy5hdXRvQ2xlYXI9XG4gICAgITA7dGhpcy5jbGlwcGluZ1BsYW5lcz1bXTt0aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkPSExO3RoaXMuZ2FtbWFGYWN0b3I9Mjt0aGlzLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzPXRoaXMuZ2FtbWFPdXRwdXQ9dGhpcy5nYW1tYUlucHV0PSExO3RoaXMudG9uZU1hcHBpbmdXaGl0ZVBvaW50PXRoaXMudG9uZU1hcHBpbmdFeHBvc3VyZT10aGlzLnRvbmVNYXBwaW5nPTE7dGhpcy5tYXhNb3JwaFRhcmdldHM9ODt0aGlzLm1heE1vcnBoTm9ybWFscz00O3ZhciBTPXRoaXMsTD0hMSxOPW51bGwsTT1udWxsLFA9LTEsUj1cIlwiLFY9bnVsbCxXPW51bGwsbmI9bmV3IGFhLFg9bmV3IGFhLEc9bnVsbCxZPTAsZWE9di53aWR0aCxVPXYuaGVpZ2h0LHdhPTEsZGE9bmV3IGFhKDAsMCxlYSxVKSxmYT1uZXcgYWEoMCwwLGVhLFUpLCRlPSExLCRkPW5ldyByZCxKYT1uZXcgRmcsc2Q9ITEsYWU9ITEsdGQ9bmV3IE8sT2I9bmV3IHAsaGE9e2dlb21ldHJpZXM6MCx0ZXh0dXJlczowfSxiYT17ZnJhbWU6MCxcbiAgICBjYWxsczowLHZlcnRpY2VzOjAsZmFjZXM6MCxwb2ludHM6MH07dGhpcy5pbmZvPXtyZW5kZXI6YmEsbWVtb3J5OmhhLHByb2dyYW1zOm51bGx9O3RyeXt6PXthbHBoYTp6LGRlcHRoOnksc3RlbmNpbDpJLGFudGlhbGlhczpBLHByZW11bHRpcGxpZWRBbHBoYTpKLHByZXNlcnZlRHJhd2luZ0J1ZmZlcjp4LHBvd2VyUHJlZmVyZW5jZTpCfTt2LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRsb3N0XCIsYywhMSk7di5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0cmVzdG9yZWRcIixkLCExKTt2YXIgRj13fHx2LmdldENvbnRleHQoXCJ3ZWJnbFwiLHopfHx2LmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIix6KTtpZihudWxsPT09Ril7aWYobnVsbCE9PXYuZ2V0Q29udGV4dChcIndlYmdsXCIpKXRocm93IEVycm9yKFwiRXJyb3IgY3JlYXRpbmcgV2ViR0wgY29udGV4dCB3aXRoIHlvdXIgc2VsZWN0ZWQgYXR0cmlidXRlcy5cIik7dGhyb3cgRXJyb3IoXCJFcnJvciBjcmVhdGluZyBXZWJHTCBjb250ZXh0LlwiKTtcbiAgICB9dm9pZCAwPT09Ri5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQmJihGLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdD1mdW5jdGlvbigpe3JldHVybntyYW5nZU1pbjoxLHJhbmdlTWF4OjEscHJlY2lzaW9uOjF9fSl9Y2F0Y2goR2cpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBcIitHZy5tZXNzYWdlKX12YXIgaWEsVCxaLGNhLGdhLHFhLHJhLHRhLHVhLG1hLHNhLGphLHhhLHlhLHphLEFhLEJhLHBhO2IoKTt2YXIga2E9bmV3IGJlKFMpO3RoaXMudnI9a2E7dmFyIEVhPW5ldyBVZShTLHRhLFQubWF4VGV4dHVyZVNpemUpO3RoaXMuc2hhZG93TWFwPUVhO3RoaXMuZ2V0Q29udGV4dD1mdW5jdGlvbigpe3JldHVybiBGfTt0aGlzLmdldENvbnRleHRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIEYuZ2V0Q29udGV4dEF0dHJpYnV0ZXMoKX07dGhpcy5mb3JjZUNvbnRleHRMb3NzPWZ1bmN0aW9uKCl7dmFyIGE9aWEuZ2V0KFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpO2EmJlxuICAgIGEubG9zZUNvbnRleHQoKX07dGhpcy5mb3JjZUNvbnRleHRSZXN0b3JlPWZ1bmN0aW9uKCl7dmFyIGE9aWEuZ2V0KFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpO2EmJmEucmVzdG9yZUNvbnRleHQoKX07dGhpcy5nZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKCl7cmV0dXJuIHdhfTt0aGlzLnNldFBpeGVsUmF0aW89ZnVuY3Rpb24oYSl7dm9pZCAwIT09YSYmKHdhPWEsdGhpcy5zZXRTaXplKGVhLFUsITEpKX07dGhpcy5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJue3dpZHRoOmVhLGhlaWdodDpVfX07dGhpcy5zZXRTaXplPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1rYS5nZXREZXZpY2UoKTtkJiZkLmlzUHJlc2VudGluZz9jb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBDYW4ndCBjaGFuZ2Ugc2l6ZSB3aGlsZSBWUiBkZXZpY2UgaXMgcHJlc2VudGluZy5cIik6KGVhPWEsVT1iLHYud2lkdGg9YSp3YSx2LmhlaWdodD1iKndhLCExIT09YyYmKHYuc3R5bGUud2lkdGg9YStcInB4XCIsdi5zdHlsZS5oZWlnaHQ9XG4gICAgYitcInB4XCIpLHRoaXMuc2V0Vmlld3BvcnQoMCwwLGEsYikpfTt0aGlzLmdldERyYXdpbmdCdWZmZXJTaXplPWZ1bmN0aW9uKCl7cmV0dXJue3dpZHRoOmVhKndhLGhlaWdodDpVKndhfX07dGhpcy5zZXREcmF3aW5nQnVmZmVyU2l6ZT1mdW5jdGlvbihhLGIsYyl7ZWE9YTtVPWI7d2E9Yzt2LndpZHRoPWEqYzt2LmhlaWdodD1iKmM7dGhpcy5zZXRWaWV3cG9ydCgwLDAsYSxiKX07dGhpcy5zZXRWaWV3cG9ydD1mdW5jdGlvbihhLGIsYyxkKXtkYS5zZXQoYSxVLWItZCxjLGQpO1oudmlld3BvcnQobmIuY29weShkYSkubXVsdGlwbHlTY2FsYXIod2EpKX07dGhpcy5zZXRTY2lzc29yPWZ1bmN0aW9uKGEsYixjLGQpe2ZhLnNldChhLFUtYi1kLGMsZCk7Wi5zY2lzc29yKFguY29weShmYSkubXVsdGlwbHlTY2FsYXIod2EpKX07dGhpcy5zZXRTY2lzc29yVGVzdD1mdW5jdGlvbihhKXtaLnNldFNjaXNzb3JUZXN0KCRlPWEpfTt0aGlzLmdldENsZWFyQ29sb3I9ZnVuY3Rpb24oKXtyZXR1cm4gamEuZ2V0Q2xlYXJDb2xvcigpfTtcbiAgICB0aGlzLnNldENsZWFyQ29sb3I9ZnVuY3Rpb24oKXtqYS5zZXRDbGVhckNvbG9yLmFwcGx5KGphLGFyZ3VtZW50cyl9O3RoaXMuZ2V0Q2xlYXJBbHBoYT1mdW5jdGlvbigpe3JldHVybiBqYS5nZXRDbGVhckFscGhhKCl9O3RoaXMuc2V0Q2xlYXJBbHBoYT1mdW5jdGlvbigpe2phLnNldENsZWFyQWxwaGEuYXBwbHkoamEsYXJndW1lbnRzKX07dGhpcy5jbGVhcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9MDtpZih2b2lkIDA9PT1hfHxhKWR8PUYuQ09MT1JfQlVGRkVSX0JJVDtpZih2b2lkIDA9PT1ifHxiKWR8PUYuREVQVEhfQlVGRkVSX0JJVDtpZih2b2lkIDA9PT1jfHxjKWR8PUYuU1RFTkNJTF9CVUZGRVJfQklUO0YuY2xlYXIoZCl9O3RoaXMuY2xlYXJDb2xvcj1mdW5jdGlvbigpe3RoaXMuY2xlYXIoITAsITEsITEpfTt0aGlzLmNsZWFyRGVwdGg9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCExLCEwLCExKX07dGhpcy5jbGVhclN0ZW5jaWw9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCExLCExLFxuICAgICEwKX07dGhpcy5jbGVhclRhcmdldD1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLnNldFJlbmRlclRhcmdldChhKTt0aGlzLmNsZWFyKGIsYyxkKX07dGhpcy5kaXNwb3NlPWZ1bmN0aW9uKCl7di5yZW1vdmVFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0bG9zdFwiLGMsITEpO3YucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dHJlc3RvcmVkXCIsZCwhMSk7c2EuZGlzcG9zZSgpO2thLmRpc3Bvc2UoKX07dGhpcy5yZW5kZXJCdWZmZXJJbW1lZGlhdGU9ZnVuY3Rpb24oYSxiLGMpe1ouaW5pdEF0dHJpYnV0ZXMoKTt2YXIgZD1jYS5nZXQoYSk7YS5oYXNQb3NpdGlvbnMmJiFkLnBvc2l0aW9uJiYoZC5wb3NpdGlvbj1GLmNyZWF0ZUJ1ZmZlcigpKTthLmhhc05vcm1hbHMmJiFkLm5vcm1hbCYmKGQubm9ybWFsPUYuY3JlYXRlQnVmZmVyKCkpO2EuaGFzVXZzJiYhZC51diYmKGQudXY9Ri5jcmVhdGVCdWZmZXIoKSk7YS5oYXNDb2xvcnMmJiFkLmNvbG9yJiYoZC5jb2xvcj1GLmNyZWF0ZUJ1ZmZlcigpKTtcbiAgICBiPWIuZ2V0QXR0cmlidXRlcygpO2EuaGFzUG9zaXRpb25zJiYoRi5iaW5kQnVmZmVyKEYuQVJSQVlfQlVGRkVSLGQucG9zaXRpb24pLEYuYnVmZmVyRGF0YShGLkFSUkFZX0JVRkZFUixhLnBvc2l0aW9uQXJyYXksRi5EWU5BTUlDX0RSQVcpLFouZW5hYmxlQXR0cmlidXRlKGIucG9zaXRpb24pLEYudmVydGV4QXR0cmliUG9pbnRlcihiLnBvc2l0aW9uLDMsRi5GTE9BVCwhMSwwLDApKTtpZihhLmhhc05vcm1hbHMpe0YuYmluZEJ1ZmZlcihGLkFSUkFZX0JVRkZFUixkLm5vcm1hbCk7aWYoIWMuaXNNZXNoUGhvbmdNYXRlcmlhbCYmIWMuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbCYmIWMuaXNNZXNoTm9ybWFsTWF0ZXJpYWwmJiEwPT09Yy5mbGF0U2hhZGluZylmb3IodmFyIGU9MCxmPTMqYS5jb3VudDtlPGY7ZSs9OSl7dmFyIGc9YS5ub3JtYWxBcnJheSxoPShnW2UrMF0rZ1tlKzNdK2dbZSs2XSkvMyxrPShnW2UrMV0rZ1tlKzRdK2dbZSs3XSkvMyxtPShnW2UrMl0rZ1tlKzVdK2dbZStcbiAgICA4XSkvMztnW2UrMF09aDtnW2UrMV09aztnW2UrMl09bTtnW2UrM109aDtnW2UrNF09aztnW2UrNV09bTtnW2UrNl09aDtnW2UrN109aztnW2UrOF09bX1GLmJ1ZmZlckRhdGEoRi5BUlJBWV9CVUZGRVIsYS5ub3JtYWxBcnJheSxGLkRZTkFNSUNfRFJBVyk7Wi5lbmFibGVBdHRyaWJ1dGUoYi5ub3JtYWwpO0YudmVydGV4QXR0cmliUG9pbnRlcihiLm5vcm1hbCwzLEYuRkxPQVQsITEsMCwwKX1hLmhhc1V2cyYmYy5tYXAmJihGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsZC51diksRi5idWZmZXJEYXRhKEYuQVJSQVlfQlVGRkVSLGEudXZBcnJheSxGLkRZTkFNSUNfRFJBVyksWi5lbmFibGVBdHRyaWJ1dGUoYi51diksRi52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIudXYsMixGLkZMT0FULCExLDAsMCkpO2EuaGFzQ29sb3JzJiYwIT09Yy52ZXJ0ZXhDb2xvcnMmJihGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsZC5jb2xvciksRi5idWZmZXJEYXRhKEYuQVJSQVlfQlVGRkVSLGEuY29sb3JBcnJheSxcbiAgICBGLkRZTkFNSUNfRFJBVyksWi5lbmFibGVBdHRyaWJ1dGUoYi5jb2xvciksRi52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIuY29sb3IsMyxGLkZMT0FULCExLDAsMCkpO1ouZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKTtGLmRyYXdBcnJheXMoRi5UUklBTkdMRVMsMCxhLmNvdW50KTthLmNvdW50PTB9O3RoaXMucmVuZGVyQnVmZmVyRGlyZWN0PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz1lLmlzTWVzaCYmMD5lLm1hdHJpeFdvcmxkLmRldGVybWluYW50KCk7Wi5zZXRNYXRlcmlhbChkLGcpO3ZhciBoPXUoYSxiLGQsZSk7YT1jLmlkK1wiX1wiK2guaWQrXCJfXCIrKCEwPT09ZC53aXJlZnJhbWUpO3ZhciBrPSExO2EhPT1SJiYoUj1hLGs9ITApO2UubW9ycGhUYXJnZXRJbmZsdWVuY2VzJiYoeGEudXBkYXRlKGUsYyxkLGgpLGs9ITApO3ZhciBnPWMuaW5kZXgsbT1jLmF0dHJpYnV0ZXMucG9zaXRpb247Yj0xOyEwPT09ZC53aXJlZnJhbWUmJihnPXJhLmdldFdpcmVmcmFtZUF0dHJpYnV0ZShjKSxcbiAgICBiPTIpO2E9eWE7aWYobnVsbCE9PWcpe3ZhciBxPXFhLmdldChnKTthPXphO2Euc2V0SW5kZXgocSl9aWYoayl7az12b2lkIDA7aWYoYyYmYy5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5JiZudWxsPT09aWEuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKSljb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5zZXR1cFZlcnRleEF0dHJpYnV0ZXM6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLlwiKTtlbHNle3ZvaWQgMD09PWsmJihrPTApO1ouaW5pdEF0dHJpYnV0ZXMoKTt2YXIgbj1jLmF0dHJpYnV0ZXMsaD1oLmdldEF0dHJpYnV0ZXMoKSxsPWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcztmb3IoSiBpbiBoKXt2YXIgcj1oW0pdO2lmKDA8PXIpe3ZhciB0PW5bSl07aWYodm9pZCAwIT09dCl7dmFyIHY9dC5ub3JtYWxpemVkLHA9dC5pdGVtU2l6ZSxcbiAgICB3PXFhLmdldCh0KTtpZih2b2lkIDAhPT13KXt2YXIgQT13LmJ1ZmZlcix5PXcudHlwZSx3PXcuYnl0ZXNQZXJFbGVtZW50O2lmKHQuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSl7dmFyIHo9dC5kYXRhLEk9ei5zdHJpZGUsdD10Lm9mZnNldDt6JiZ6LmlzSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI/KFouZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihyLHoubWVzaFBlckF0dHJpYnV0ZSksdm9pZCAwPT09Yy5tYXhJbnN0YW5jZWRDb3VudCYmKGMubWF4SW5zdGFuY2VkQ291bnQ9ei5tZXNoUGVyQXR0cmlidXRlKnouY291bnQpKTpaLmVuYWJsZUF0dHJpYnV0ZShyKTtGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsQSk7Ri52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIscCx5LHYsSSp3LChrKkkrdCkqdyl9ZWxzZSB0LmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPyhaLmVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3Iocix0Lm1lc2hQZXJBdHRyaWJ1dGUpLHZvaWQgMD09PWMubWF4SW5zdGFuY2VkQ291bnQmJlxuICAgIChjLm1heEluc3RhbmNlZENvdW50PXQubWVzaFBlckF0dHJpYnV0ZSp0LmNvdW50KSk6Wi5lbmFibGVBdHRyaWJ1dGUociksRi5iaW5kQnVmZmVyKEYuQVJSQVlfQlVGRkVSLEEpLEYudmVydGV4QXR0cmliUG9pbnRlcihyLHAseSx2LDAsaypwKncpfX1lbHNlIGlmKHZvaWQgMCE9PWwmJih2PWxbSl0sdm9pZCAwIT09dikpc3dpdGNoKHYubGVuZ3RoKXtjYXNlIDI6Ri52ZXJ0ZXhBdHRyaWIyZnYocix2KTticmVhaztjYXNlIDM6Ri52ZXJ0ZXhBdHRyaWIzZnYocix2KTticmVhaztjYXNlIDQ6Ri52ZXJ0ZXhBdHRyaWI0ZnYocix2KTticmVhaztkZWZhdWx0OkYudmVydGV4QXR0cmliMWZ2KHIsdil9fX1aLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCl9bnVsbCE9PWcmJkYuYmluZEJ1ZmZlcihGLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHEuYnVmZmVyKX1xPTA7bnVsbCE9PWc/cT1nLmNvdW50OnZvaWQgMCE9PW0mJihxPW0uY291bnQpO2c9Yy5kcmF3UmFuZ2Uuc3RhcnQqYjttPW51bGwhPT1cbiAgICBmP2Yuc3RhcnQqYjowO3ZhciBKPU1hdGgubWF4KGcsbSk7Zj1NYXRoLm1heCgwLE1hdGgubWluKHEsZytjLmRyYXdSYW5nZS5jb3VudCpiLG0rKG51bGwhPT1mP2YuY291bnQqYjpJbmZpbml0eSkpLTEtSisxKTtpZigwIT09Zil7aWYoZS5pc01lc2gpaWYoITA9PT1kLndpcmVmcmFtZSlaLnNldExpbmVXaWR0aChkLndpcmVmcmFtZUxpbmV3aWR0aCoobnVsbD09PU4/d2E6MSkpLGEuc2V0TW9kZShGLkxJTkVTKTtlbHNlIHN3aXRjaChlLmRyYXdNb2RlKXtjYXNlIDA6YS5zZXRNb2RlKEYuVFJJQU5HTEVTKTticmVhaztjYXNlIDE6YS5zZXRNb2RlKEYuVFJJQU5HTEVfU1RSSVApO2JyZWFrO2Nhc2UgMjphLnNldE1vZGUoRi5UUklBTkdMRV9GQU4pfWVsc2UgZS5pc0xpbmU/KGQ9ZC5saW5ld2lkdGgsdm9pZCAwPT09ZCYmKGQ9MSksWi5zZXRMaW5lV2lkdGgoZCoobnVsbD09PU4/d2E6MSkpLGUuaXNMaW5lU2VnbWVudHM/YS5zZXRNb2RlKEYuTElORVMpOmUuaXNMaW5lTG9vcD9hLnNldE1vZGUoRi5MSU5FX0xPT1ApOlxuICAgIGEuc2V0TW9kZShGLkxJTkVfU1RSSVApKTplLmlzUG9pbnRzJiZhLnNldE1vZGUoRi5QT0lOVFMpO2MmJmMuaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeT8wPGMubWF4SW5zdGFuY2VkQ291bnQmJmEucmVuZGVySW5zdGFuY2VzKGMsSixmKTphLnJlbmRlcihKLGYpfX07dGhpcy5jb21waWxlPWZ1bmN0aW9uKGEsYil7RC5sZW5ndGg9MDtDLmxlbmd0aD0wO2EudHJhdmVyc2UoZnVuY3Rpb24oYSl7YS5pc0xpZ2h0JiYoRC5wdXNoKGEpLGEuY2FzdFNoYWRvdyYmQy5wdXNoKGEpKX0pO3VhLnNldHVwKEQsQyxiKTthLnRyYXZlcnNlKGZ1bmN0aW9uKGIpe2lmKGIubWF0ZXJpYWwpaWYoQXJyYXkuaXNBcnJheShiLm1hdGVyaWFsKSlmb3IodmFyIGM9MDtjPGIubWF0ZXJpYWwubGVuZ3RoO2MrKyluKGIubWF0ZXJpYWxbY10sYS5mb2csYik7ZWxzZSBuKGIubWF0ZXJpYWwsYS5mb2csYil9KX07dmFyIEZhPSExLENhPW51bGw7dGhpcy5hbmltYXRlPWZ1bmN0aW9uKGEpe0NhPWE7RmF8fCgoYT1cbiAgICBrYS5nZXREZXZpY2UoKSkmJmEuaXNQcmVzZW50aW5nP2EucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGgpOndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaCksRmE9ITApfTt0aGlzLnJlbmRlcj1mdW5jdGlvbihhLGIsYyxkKXtpZighYnx8IWIuaXNDYW1lcmEpY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVuZGVyOiBjYW1lcmEgaXMgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkNhbWVyYS5cIik7ZWxzZSBpZighTCl7Uj1cIlwiO1A9LTE7Vj1udWxsOyEwPT09YS5hdXRvVXBkYXRlJiZhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7bnVsbD09PWIucGFyZW50JiZiLnVwZGF0ZU1hdHJpeFdvcmxkKCk7a2EuZW5hYmxlZCYmKGI9a2EuZ2V0Q2FtZXJhKGIpKTt0ZC5tdWx0aXBseU1hdHJpY2VzKGIucHJvamVjdGlvbk1hdHJpeCxiLm1hdHJpeFdvcmxkSW52ZXJzZSk7JGQuc2V0RnJvbU1hdHJpeCh0ZCk7RC5sZW5ndGg9MDtDLmxlbmd0aD0wO0gubGVuZ3RoPTA7bGEubGVuZ3RoPVxuICAgIDA7YWU9dGhpcy5sb2NhbENsaXBwaW5nRW5hYmxlZDtzZD1KYS5pbml0KHRoaXMuY2xpcHBpbmdQbGFuZXMsYWUsYik7RT1zYS5nZXQoYSxiKTtFLmluaXQoKTtrKGEsYixTLnNvcnRPYmplY3RzKTshMD09PVMuc29ydE9iamVjdHMmJkUuc29ydCgpO2dhLnVwZGF0ZVZpZGVvVGV4dHVyZXMoKTtzZCYmSmEuYmVnaW5TaGFkb3dzKCk7RWEucmVuZGVyKEMsYSxiKTt1YS5zZXR1cChELEMsYik7c2QmJkphLmVuZFNoYWRvd3MoKTtiYS5mcmFtZSsrO2JhLmNhbGxzPTA7YmEudmVydGljZXM9MDtiYS5mYWNlcz0wO2JhLnBvaW50cz0wO3ZvaWQgMD09PWMmJihjPW51bGwpO3RoaXMuc2V0UmVuZGVyVGFyZ2V0KGMpO2phLnJlbmRlcihFLGEsYixkKTtkPUUub3BhcXVlO3ZhciBlPUUudHJhbnNwYXJlbnQ7aWYoYS5vdmVycmlkZU1hdGVyaWFsKXt2YXIgZj1hLm92ZXJyaWRlTWF0ZXJpYWw7ZC5sZW5ndGgmJm0oZCxhLGIsZik7ZS5sZW5ndGgmJm0oZSxhLGIsZil9ZWxzZSBkLmxlbmd0aCYmbShkLFxuICAgIGEsYiksZS5sZW5ndGgmJm0oZSxhLGIpO0JhLnJlbmRlcihILGEsYik7QWEucmVuZGVyKGxhLGEsYixuYik7YyYmZ2EudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwKGMpO1ouYnVmZmVycy5kZXB0aC5zZXRUZXN0KCEwKTtaLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayghMCk7Wi5idWZmZXJzLmNvbG9yLnNldE1hc2soITApO1ouc2V0UG9seWdvbk9mZnNldCghMSk7a2EuZW5hYmxlZCYma2Euc3VibWl0RnJhbWUoKX19O3RoaXMuc2V0RmFjZUN1bGxpbmc9ZnVuY3Rpb24oYSxiKXtaLnNldEN1bGxGYWNlKGEpO1ouc2V0RmxpcFNpZGVkKDA9PT1iKX07dGhpcy5hbGxvY1RleHR1cmVVbml0PWZ1bmN0aW9uKCl7dmFyIGE9WTthPj1ULm1heFRleHR1cmVzJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUcnlpbmcgdG8gdXNlIFwiK2ErXCIgdGV4dHVyZSB1bml0cyB3aGlsZSB0aGlzIEdQVSBzdXBwb3J0cyBvbmx5IFwiK1QubWF4VGV4dHVyZXMpO1krPTE7cmV0dXJuIGF9O3RoaXMuc2V0VGV4dHVyZTJEPVxuICAgIGZ1bmN0aW9uKCl7dmFyIGE9ITE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YiYmYi5pc1dlYkdMUmVuZGVyVGFyZ2V0JiYoYXx8KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIuc2V0VGV4dHVyZTJEOiBkb24ndCB1c2UgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxhPSEwKSxiPWIudGV4dHVyZSk7Z2Euc2V0VGV4dHVyZTJEKGIsYyl9fSgpO3RoaXMuc2V0VGV4dHVyZT1mdW5jdGlvbigpe3ZhciBhPSExO3JldHVybiBmdW5jdGlvbihiLGMpe2F8fChjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2V0VGV4dHVyZSBpcyBkZXByZWNhdGVkLCB1c2Ugc2V0VGV4dHVyZTJEIGluc3RlYWQuXCIpLGE9ITApO2dhLnNldFRleHR1cmUyRChiLGMpfX0oKTt0aGlzLnNldFRleHR1cmVDdWJlPWZ1bmN0aW9uKCl7dmFyIGE9ITE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YiYmYi5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZSYmXG4gICAgKGF8fChjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnNldFRleHR1cmVDdWJlOiBkb24ndCB1c2UgY3ViZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpLGE9ITApLGI9Yi50ZXh0dXJlKTtiJiZiLmlzQ3ViZVRleHR1cmV8fEFycmF5LmlzQXJyYXkoYi5pbWFnZSkmJjY9PT1iLmltYWdlLmxlbmd0aD9nYS5zZXRUZXh0dXJlQ3ViZShiLGMpOmdhLnNldFRleHR1cmVDdWJlRHluYW1pYyhiLGMpfX0oKTt0aGlzLmdldFJlbmRlclRhcmdldD1mdW5jdGlvbigpe3JldHVybiBOfTt0aGlzLnNldFJlbmRlclRhcmdldD1mdW5jdGlvbihhKXsoTj1hKSYmdm9pZCAwPT09Y2EuZ2V0KGEpLl9fd2ViZ2xGcmFtZWJ1ZmZlciYmZ2Euc2V0dXBSZW5kZXJUYXJnZXQoYSk7dmFyIGI9bnVsbCxjPSExO2E/KGI9Y2EuZ2V0KGEpLl9fd2ViZ2xGcmFtZWJ1ZmZlcixhLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlJiYoYj1cbiAgICBiW2EuYWN0aXZlQ3ViZUZhY2VdLGM9ITApLG5iLmNvcHkoYS52aWV3cG9ydCksWC5jb3B5KGEuc2Npc3NvciksRz1hLnNjaXNzb3JUZXN0KToobmIuY29weShkYSkubXVsdGlwbHlTY2FsYXIod2EpLFguY29weShmYSkubXVsdGlwbHlTY2FsYXIod2EpLEc9JGUpO00hPT1iJiYoRi5iaW5kRnJhbWVidWZmZXIoRi5GUkFNRUJVRkZFUixiKSxNPWIpO1oudmlld3BvcnQobmIpO1ouc2Npc3NvcihYKTtaLnNldFNjaXNzb3JUZXN0KEcpO2MmJihjPWNhLmdldChhLnRleHR1cmUpLEYuZnJhbWVidWZmZXJUZXh0dXJlMkQoRi5GUkFNRUJVRkZFUixGLkNPTE9SX0FUVEFDSE1FTlQwLEYuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2EuYWN0aXZlQ3ViZUZhY2UsYy5fX3dlYmdsVGV4dHVyZSxhLmFjdGl2ZU1pcE1hcExldmVsKSl9O3RoaXMucmVhZFJlbmRlclRhcmdldFBpeGVscz1mdW5jdGlvbihhLGIsYyxkLGUsZil7aWYoYSYmYS5pc1dlYkdMUmVuZGVyVGFyZ2V0KXt2YXIgZz1jYS5nZXQoYSkuX193ZWJnbEZyYW1lYnVmZmVyO1xuICAgIGlmKGcpe3ZhciBoPSExO2chPT1NJiYoRi5iaW5kRnJhbWVidWZmZXIoRi5GUkFNRUJVRkZFUixnKSxoPSEwKTt0cnl7dmFyIGs9YS50ZXh0dXJlLG09ay5mb3JtYXQscT1rLnR5cGU7MTAyMyE9PW0mJnBhLmNvbnZlcnQobSkhPT1GLmdldFBhcmFtZXRlcihGLklNUExFTUVOVEFUSU9OX0NPTE9SX1JFQURfRk9STUFUKT9jb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IGluIFJHQkEgb3IgaW1wbGVtZW50YXRpb24gZGVmaW5lZCBmb3JtYXQuXCIpOjEwMDk9PT1xfHxwYS5jb252ZXJ0KHEpPT09Ri5nZXRQYXJhbWV0ZXIoRi5JTVBMRU1FTlRBVElPTl9DT0xPUl9SRUFEX1RZUEUpfHwxMDE1PT09cSYmKGlhLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpfHxpYS5nZXQoXCJXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXRcIikpfHwxMDE2PT09cSYmaWEuZ2V0KFwiRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0XCIpP1xuICAgIEYuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhGLkZSQU1FQlVGRkVSKT09PUYuRlJBTUVCVUZGRVJfQ09NUExFVEU/MDw9YiYmYjw9YS53aWR0aC1kJiYwPD1jJiZjPD1hLmhlaWdodC1lJiZGLnJlYWRQaXhlbHMoYixjLGQsZSxwYS5jb252ZXJ0KG0pLHBhLmNvbnZlcnQocSksZik6Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVhZFBpeGVscyBmcm9tIHJlbmRlclRhcmdldCBmYWlsZWQuIEZyYW1lYnVmZmVyIG5vdCBjb21wbGV0ZS5cIik6Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVuZGVyVGFyZ2V0IGlzIG5vdCBpbiBVbnNpZ25lZEJ5dGVUeXBlIG9yIGltcGxlbWVudGF0aW9uIGRlZmluZWQgdHlwZS5cIil9ZmluYWxseXtoJiZGLmJpbmRGcmFtZWJ1ZmZlcihGLkZSQU1FQlVGRkVSLE0pfX19ZWxzZSBjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LlwiKX19XG4gICAgZnVuY3Rpb24gUGIoYSxiKXt0aGlzLm5hbWU9XCJcIjt0aGlzLmNvbG9yPW5ldyBIKGEpO3RoaXMuZGVuc2l0eT12b2lkIDAhPT1iP2I6Mi41RS00fWZ1bmN0aW9uIFFiKGEsYixjKXt0aGlzLm5hbWU9XCJcIjt0aGlzLmNvbG9yPW5ldyBIKGEpO3RoaXMubmVhcj12b2lkIDAhPT1iP2I6MTt0aGlzLmZhcj12b2lkIDAhPT1jP2M6MUUzfWZ1bmN0aW9uIHZkKCl7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNjZW5lXCI7dGhpcy5vdmVycmlkZU1hdGVyaWFsPXRoaXMuZm9nPXRoaXMuYmFja2dyb3VuZD1udWxsO3RoaXMuYXV0b1VwZGF0ZT0hMH1mdW5jdGlvbiBkZShhLGIsYyxkLGUpe3guY2FsbCh0aGlzKTt0aGlzLmxlbnNGbGFyZXM9W107dGhpcy5wb3NpdGlvblNjcmVlbj1uZXcgcDt0aGlzLmN1c3RvbVVwZGF0ZUNhbGxiYWNrPXZvaWQgMDt2b2lkIDAhPT1hJiZ0aGlzLmFkZChhLGIsYyxkLGUpfWZ1bmN0aW9uIGhiKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcHJpdGVNYXRlcmlhbFwiO1xuICAgIHRoaXMuY29sb3I9bmV3IEgoMTY3NzcyMTUpO3RoaXMubWFwPW51bGw7dGhpcy5yb3RhdGlvbj0wO3RoaXMubGlnaHRzPXRoaXMuZm9nPSExO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIENjKGEpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcHJpdGVcIjt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWE/YTpuZXcgaGJ9ZnVuY3Rpb24gRGMoKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTE9EXCI7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7bGV2ZWxzOntlbnVtZXJhYmxlOiEwLHZhbHVlOltdfX0pfWZ1bmN0aW9uIEVjKGEsYil7YT1hfHxbXTt0aGlzLmJvbmVzPWEuc2xpY2UoMCk7dGhpcy5ib25lTWF0cmljZXM9bmV3IEZsb2F0MzJBcnJheSgxNip0aGlzLmJvbmVzLmxlbmd0aCk7aWYodm9pZCAwPT09Yil0aGlzLmNhbGN1bGF0ZUludmVyc2VzKCk7ZWxzZSBpZih0aGlzLmJvbmVzLmxlbmd0aD09PWIubGVuZ3RoKXRoaXMuYm9uZUludmVyc2VzPWIuc2xpY2UoMCk7ZWxzZSBmb3IoY29uc29sZS53YXJuKFwiVEhSRUUuU2tlbGV0b24gYm9uZUludmVyc2VzIGlzIHRoZSB3cm9uZyBsZW5ndGguXCIpLFxuICAgIHRoaXMuYm9uZUludmVyc2VzPVtdLGE9MCxiPXRoaXMuYm9uZXMubGVuZ3RoO2E8YjthKyspdGhpcy5ib25lSW52ZXJzZXMucHVzaChuZXcgTyl9ZnVuY3Rpb24gd2QoKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQm9uZVwifWZ1bmN0aW9uIHhkKGEsYil7cmEuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiU2tpbm5lZE1lc2hcIjt0aGlzLmJpbmRNb2RlPVwiYXR0YWNoZWRcIjt0aGlzLmJpbmRNYXRyaXg9bmV3IE87dGhpcy5iaW5kTWF0cml4SW52ZXJzZT1uZXcgTzthPXRoaXMuaW5pdEJvbmVzKCk7YT1uZXcgRWMoYSk7dGhpcy5iaW5kKGEsdGhpcy5tYXRyaXhXb3JsZCk7dGhpcy5ub3JtYWxpemVTa2luV2VpZ2h0cygpfWZ1bmN0aW9uIFcoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpbmVCYXNpY01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgSCgxNjc3NzIxNSk7dGhpcy5saW5ld2lkdGg9MTt0aGlzLmxpbmVqb2luPXRoaXMubGluZWNhcD1cInJvdW5kXCI7dGhpcy5saWdodHM9ITE7XG4gICAgdGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gc2EoYSxiLGMpe2lmKDE9PT1jKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lOiBwYXJhbWV0ZXIgVEhSRUUuTGluZVBpZWNlcyBubyBsb25nZXIgc3VwcG9ydGVkLiBDcmVhdGVkIFRIUkVFLkxpbmVTZWdtZW50cyBpbnN0ZWFkLlwiKSxuZXcgWChhLGIpO3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaW5lXCI7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1hP2E6bmV3IEU7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1iP2I6bmV3IFcoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KX1mdW5jdGlvbiBYKGEsYil7c2EuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiTGluZVNlZ21lbnRzXCJ9ZnVuY3Rpb24geWQoYSxiKXtzYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJMaW5lTG9vcFwifWZ1bmN0aW9uIEthKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQb2ludHNNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IEgoMTY3NzcyMTUpO1xuICAgIHRoaXMubWFwPW51bGw7dGhpcy5zaXplPTE7dGhpcy5zaXplQXR0ZW51YXRpb249ITA7dGhpcy5saWdodHM9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gUmIoYSxiKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUG9pbnRzXCI7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1hP2E6bmV3IEU7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1iP2I6bmV3IEthKHtjb2xvcjoxNjc3NzIxNSpNYXRoLnJhbmRvbSgpfSl9ZnVuY3Rpb24gRmMoKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiR3JvdXBcIn1mdW5jdGlvbiBlZShhLGIsYyxkLGUsZixnLGgsayl7ZnVuY3Rpb24gbSgpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRlZGRhdGFcIixtLCExKTtxLm5lZWRzVXBkYXRlPSEwfVUuY2FsbCh0aGlzLGEsYixjLGQsZSxmLGcsaCxrKTt0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMTt2YXIgcT10aGlzO2EuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZGRhdGFcIixtLCExKX1mdW5jdGlvbiBTYihhLGIsYyxkLFxuICAgIGUsZixnLGgsayxtLHEsbil7VS5jYWxsKHRoaXMsbnVsbCxmLGcsaCxrLG0sZCxlLHEsbik7dGhpcy5pbWFnZT17d2lkdGg6YixoZWlnaHQ6Y307dGhpcy5taXBtYXBzPWE7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9dGhpcy5mbGlwWT0hMX1mdW5jdGlvbiBHYyhhLGIsYyxkLGUsZixnLGgsayxtKXttPXZvaWQgMCE9PW0/bToxMDI2O2lmKDEwMjYhPT1tJiYxMDI3IT09bSl0aHJvdyBFcnJvcihcIkRlcHRoVGV4dHVyZSBmb3JtYXQgbXVzdCBiZSBlaXRoZXIgVEhSRUUuRGVwdGhGb3JtYXQgb3IgVEhSRUUuRGVwdGhTdGVuY2lsRm9ybWF0XCIpO3ZvaWQgMD09PWMmJjEwMjY9PT1tJiYoYz0xMDEyKTt2b2lkIDA9PT1jJiYxMDI3PT09bSYmKGM9MTAyMCk7VS5jYWxsKHRoaXMsbnVsbCxkLGUsZixnLGgsbSxjLGspO3RoaXMuaW1hZ2U9e3dpZHRoOmEsaGVpZ2h0OmJ9O3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWc/ZzoxMDAzO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PWg/aDoxMDAzO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPVxuICAgIHRoaXMuZmxpcFk9ITF9ZnVuY3Rpb24gVGIoYSl7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIldpcmVmcmFtZUdlb21ldHJ5XCI7dmFyIGI9W10sYyxkLGUsZj1bMCwwXSxnPXt9LGg9W1wiYVwiLFwiYlwiLFwiY1wiXTtpZihhJiZhLmlzR2VvbWV0cnkpe3ZhciBrPWEuZmFjZXM7dmFyIG09MDtmb3IoZD1rLmxlbmd0aDttPGQ7bSsrKXt2YXIgcT1rW21dO2ZvcihjPTA7Mz5jO2MrKyl7dmFyIG49cVtoW2NdXTt2YXIgdT1xW2hbKGMrMSklM11dO2ZbMF09TWF0aC5taW4obix1KTtmWzFdPU1hdGgubWF4KG4sdSk7bj1mWzBdK1wiLFwiK2ZbMV07dm9pZCAwPT09Z1tuXSYmKGdbbl09e2luZGV4MTpmWzBdLGluZGV4MjpmWzFdfSl9fWZvcihuIGluIGcpbT1nW25dLGg9YS52ZXJ0aWNlc1ttLmluZGV4MV0sYi5wdXNoKGgueCxoLnksaC56KSxoPWEudmVydGljZXNbbS5pbmRleDJdLGIucHVzaChoLngsaC55LGgueil9ZWxzZSBpZihhJiZhLmlzQnVmZmVyR2VvbWV0cnkpe3ZhciBoPW5ldyBwO2lmKG51bGwhPT1cbiAgICBhLmluZGV4KXtrPWEuYXR0cmlidXRlcy5wb3NpdGlvbjtxPWEuaW5kZXg7dmFyIGw9YS5ncm91cHM7MD09PWwubGVuZ3RoJiYobD1be3N0YXJ0OjAsY291bnQ6cS5jb3VudCxtYXRlcmlhbEluZGV4OjB9XSk7YT0wO2ZvcihlPWwubGVuZ3RoO2E8ZTsrK2EpZm9yKG09bFthXSxjPW0uc3RhcnQsZD1tLmNvdW50LG09YyxkPWMrZDttPGQ7bSs9Mylmb3IoYz0wOzM+YztjKyspbj1xLmdldFgobStjKSx1PXEuZ2V0WChtKyhjKzEpJTMpLGZbMF09TWF0aC5taW4obix1KSxmWzFdPU1hdGgubWF4KG4sdSksbj1mWzBdK1wiLFwiK2ZbMV0sdm9pZCAwPT09Z1tuXSYmKGdbbl09e2luZGV4MTpmWzBdLGluZGV4MjpmWzFdfSk7Zm9yKG4gaW4gZyltPWdbbl0saC5mcm9tQnVmZmVyQXR0cmlidXRlKGssbS5pbmRleDEpLGIucHVzaChoLngsaC55LGgueiksaC5mcm9tQnVmZmVyQXR0cmlidXRlKGssbS5pbmRleDIpLGIucHVzaChoLngsaC55LGgueil9ZWxzZSBmb3Ioaz1hLmF0dHJpYnV0ZXMucG9zaXRpb24sXG4gICAgbT0wLGQ9ay5jb3VudC8zO208ZDttKyspZm9yKGM9MDszPmM7YysrKWc9MyptK2MsaC5mcm9tQnVmZmVyQXR0cmlidXRlKGssZyksYi5wdXNoKGgueCxoLnksaC56KSxnPTMqbSsoYysxKSUzLGguZnJvbUJ1ZmZlckF0dHJpYnV0ZShrLGcpLGIucHVzaChoLngsaC55LGgueil9dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGIsMykpfWZ1bmN0aW9uIEhjKGEsYixjKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUGFyYW1ldHJpY0dlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtmdW5jOmEsc2xpY2VzOmIsc3RhY2tzOmN9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBVYihhLGIsYykpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIFViKGEsYixjKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUGFyYW1ldHJpY0J1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtmdW5jOmEsc2xpY2VzOmIsc3RhY2tzOmN9O3ZhciBkPVtdLGU9W10sZj1bXSxnPVtdLGg9XG4gICAgbmV3IHAsaz1uZXcgcCxtPW5ldyBwLHE9bmV3IHAsbj1uZXcgcCx1LGwsdD1iKzE7Zm9yKHU9MDt1PD1jO3UrKyl7dmFyIHY9dS9jO2ZvcihsPTA7bDw9YjtsKyspe3ZhciB3PWwvYixrPWEodyx2LGspO2UucHVzaChrLngsay55LGsueik7MDw9dy0xRS01PyhtPWEody0xRS01LHYsbSkscS5zdWJWZWN0b3JzKGssbSkpOihtPWEodysxRS01LHYsbSkscS5zdWJWZWN0b3JzKG0saykpOzA8PXYtMUUtNT8obT1hKHcsdi0xRS01LG0pLG4uc3ViVmVjdG9ycyhrLG0pKToobT1hKHcsdisxRS01LG0pLG4uc3ViVmVjdG9ycyhtLGspKTtoLmNyb3NzVmVjdG9ycyhxLG4pLm5vcm1hbGl6ZSgpO2YucHVzaChoLngsaC55LGgueik7Zy5wdXNoKHcsdil9fWZvcih1PTA7dTxjO3UrKylmb3IobD0wO2w8YjtsKyspYT11KnQrbCsxLGg9KHUrMSkqdCtsKzEsaz0odSsxKSp0K2wsZC5wdXNoKHUqdCtsLGEsayksZC5wdXNoKGEsaCxrKTt0aGlzLnNldEluZGV4KGQpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixcbiAgICBuZXcgQihlLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBCKGYsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihnLDIpKX1mdW5jdGlvbiBJYyhhLGIsYyxkKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUG9seWhlZHJvbkdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt2ZXJ0aWNlczphLGluZGljZXM6YixyYWRpdXM6YyxkZXRhaWw6ZH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGphKGEsYixjLGQpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBqYShhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe2gucHVzaChhLngsYS55LGEueil9ZnVuY3Rpb24gZihiLGMpe2IqPTM7Yy54PWFbYiswXTtjLnk9YVtiKzFdO2Muej1hW2IrMl19ZnVuY3Rpb24gZyhhLGIsYyxkKXswPmQmJjE9PT1hLngmJihrW2JdPWEueC0xKTswPT09Yy54JiYwPT09Yy56JiYoa1tiXT1kLzIvTWF0aC5QSSsuNSl9RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBvbHloZWRyb25CdWZmZXJHZW9tZXRyeVwiO1xuICAgIHRoaXMucGFyYW1ldGVycz17dmVydGljZXM6YSxpbmRpY2VzOmIscmFkaXVzOmMsZGV0YWlsOmR9O2M9Y3x8MTtkPWR8fDA7dmFyIGg9W10saz1bXTsoZnVuY3Rpb24oYSl7Zm9yKHZhciBjPW5ldyBwLGQ9bmV3IHAsZz1uZXcgcCxoPTA7aDxiLmxlbmd0aDtoKz0zKXtmKGJbaCswXSxjKTtmKGJbaCsxXSxkKTtmKGJbaCsyXSxnKTt2YXIgayxtLGw9Yyx6PWQseT1nLEk9TWF0aC5wb3coMixhKSxBPVtdO2ZvcihtPTA7bTw9STttKyspe0FbbV09W107dmFyIEo9bC5jbG9uZSgpLmxlcnAoeSxtL0kpLHg9ei5jbG9uZSgpLmxlcnAoeSxtL0kpLEI9SS1tO2ZvcihrPTA7azw9QjtrKyspQVttXVtrXT0wPT09ayYmbT09PUk/SjpKLmNsb25lKCkubGVycCh4LGsvQil9Zm9yKG09MDttPEk7bSsrKWZvcihrPTA7azwyKihJLW0pLTE7aysrKWw9TWF0aC5mbG9vcihrLzIpLDA9PT1rJTI/KGUoQVttXVtsKzFdKSxlKEFbbSsxXVtsXSksZShBW21dW2xdKSk6KGUoQVttXVtsKzFdKSxlKEFbbSsxXVtsK1xuICAgIDFdKSxlKEFbbSsxXVtsXSkpfX0pKGQpOyhmdW5jdGlvbihhKXtmb3IodmFyIGI9bmV3IHAsYz0wO2M8aC5sZW5ndGg7Yys9MyliLng9aFtjKzBdLGIueT1oW2MrMV0sYi56PWhbYysyXSxiLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKGEpLGhbYyswXT1iLngsaFtjKzFdPWIueSxoW2MrMl09Yi56fSkoYyk7KGZ1bmN0aW9uKCl7Zm9yKHZhciBhPW5ldyBwLGI9MDtiPGgubGVuZ3RoO2IrPTMpYS54PWhbYiswXSxhLnk9aFtiKzFdLGEuej1oW2IrMl0say5wdXNoKE1hdGguYXRhbjIoYS56LC1hLngpLzIvTWF0aC5QSSsuNSwxLShNYXRoLmF0YW4yKC1hLnksTWF0aC5zcXJ0KGEueCphLngrYS56KmEueikpL01hdGguUEkrLjUpKTtmb3IodmFyIGE9bmV3IHAsYj1uZXcgcCxjPW5ldyBwLGQ9bmV3IHAsZT1uZXcgRCxmPW5ldyBELGw9bmV3IEQsdz0wLHo9MDt3PGgubGVuZ3RoO3crPTkseis9Nil7YS5zZXQoaFt3KzBdLGhbdysxXSxoW3crMl0pO2Iuc2V0KGhbdyszXSxoW3crNF0saFt3K1xuICAgIDVdKTtjLnNldChoW3crNl0saFt3KzddLGhbdys4XSk7ZS5zZXQoa1t6KzBdLGtbeisxXSk7Zi5zZXQoa1t6KzJdLGtbeiszXSk7bC5zZXQoa1t6KzRdLGtbeis1XSk7ZC5jb3B5KGEpLmFkZChiKS5hZGQoYykuZGl2aWRlU2NhbGFyKDMpO3ZhciB5PU1hdGguYXRhbjIoZC56LC1kLngpO2coZSx6KzAsYSx5KTtnKGYseisyLGIseSk7ZyhsLHorNCxjLHkpfWZvcihhPTA7YTxrLmxlbmd0aDthKz02KWI9a1thKzBdLGM9a1thKzJdLGQ9a1thKzRdLGU9TWF0aC5taW4oYixjLGQpLC45PE1hdGgubWF4KGIsYyxkKSYmLjE+ZSYmKC4yPmImJihrW2ErMF0rPTEpLC4yPmMmJihrW2ErMl0rPTEpLC4yPmQmJihrW2ErNF0rPTEpKX0pKCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGgsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIoaC5zbGljZSgpLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIoaywyKSk7MD09PWQ/dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpOlxuICAgIHRoaXMubm9ybWFsaXplTm9ybWFscygpfWZ1bmN0aW9uIEpjKGEsYil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRldHJhaGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVmIoYSxiKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gVmIoYSxiKXtqYS5jYWxsKHRoaXMsWzEsMSwxLC0xLC0xLDEsLTEsMSwtMSwxLC0xLC0xXSxbMiwxLDAsMCwzLDIsMSwzLDAsMiwzLDFdLGEsYik7dGhpcy50eXBlPVwiVGV0cmFoZWRyb25CdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9fWZ1bmN0aW9uIEtjKGEsYil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk9jdGFoZWRyb25HZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyB1YihhLGIpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1cbiAgICBmdW5jdGlvbiB1YihhLGIpe2phLmNhbGwodGhpcyxbMSwwLDAsLTEsMCwwLDAsMSwwLDAsLTEsMCwwLDAsMSwwLDAsLTFdLFswLDIsNCwwLDQsMywwLDMsNSwwLDUsMiwxLDIsNSwxLDUsMywxLDMsNCwxLDQsMl0sYSxiKTt0aGlzLnR5cGU9XCJPY3RhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifX1mdW5jdGlvbiBMYyhhLGIpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJJY29zYWhlZHJvbkdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFdiKGEsYikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIFdiKGEsYil7dmFyIGM9KDErTWF0aC5zcXJ0KDUpKS8yO2phLmNhbGwodGhpcyxbLTEsYywwLDEsYywwLC0xLC1jLDAsMSwtYywwLDAsLTEsYywwLDEsYywwLC0xLC1jLDAsMSwtYyxjLDAsLTEsYywwLDEsLWMsMCwtMSwtYywwLDFdLFswLDExLFxuICAgIDUsMCw1LDEsMCwxLDcsMCw3LDEwLDAsMTAsMTEsMSw1LDksNSwxMSw0LDExLDEwLDIsMTAsNyw2LDcsMSw4LDMsOSw0LDMsNCwyLDMsMiw2LDMsNiw4LDMsOCw5LDQsOSw1LDIsNCwxMSw2LDIsMTAsOCw2LDcsOSw4LDFdLGEsYik7dGhpcy50eXBlPVwiSWNvc2FoZWRyb25CdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9fWZ1bmN0aW9uIE1jKGEsYil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkRvZGVjYWhlZHJvbkdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFhiKGEsYikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIFhiKGEsYil7dmFyIGM9KDErTWF0aC5zcXJ0KDUpKS8yLGQ9MS9jO2phLmNhbGwodGhpcyxbLTEsLTEsLTEsLTEsLTEsMSwtMSwxLC0xLC0xLDEsMSwxLC0xLC0xLDEsLTEsMSwxLDEsLTEsMSwxLDEsMCwtZCwtYywwLC1kLGMsMCxcbiAgICBkLC1jLDAsZCxjLC1kLC1jLDAsLWQsYywwLGQsLWMsMCxkLGMsMCwtYywwLC1kLGMsMCwtZCwtYywwLGQsYywwLGRdLFszLDExLDcsMyw3LDE1LDMsMTUsMTMsNywxOSwxNyw3LDE3LDYsNyw2LDE1LDE3LDQsOCwxNyw4LDEwLDE3LDEwLDYsOCwwLDE2LDgsMTYsMiw4LDIsMTAsMCwxMiwxLDAsMSwxOCwwLDE4LDE2LDYsMTAsMiw2LDIsMTMsNiwxMywxNSwyLDE2LDE4LDIsMTgsMywyLDMsMTMsMTgsMSw5LDE4LDksMTEsMTgsMTEsMyw0LDE0LDEyLDQsMTIsMCw0LDAsOCwxMSw5LDUsMTEsNSwxOSwxMSwxOSw3LDE5LDUsMTQsMTksMTQsNCwxOSw0LDE3LDEsMTIsMTQsMSwxNCw1LDEsNSw5XSxhLGIpO3RoaXMudHlwZT1cIkRvZGVjYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn19ZnVuY3Rpb24gTmMoYSxiLGMsZCxlLGYpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUdWJlR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3BhdGg6YSxcbiAgICB0dWJ1bGFyU2VnbWVudHM6YixyYWRpdXM6YyxyYWRpYWxTZWdtZW50czpkLGNsb3NlZDplfTt2b2lkIDAhPT1mJiZjb25zb2xlLndhcm4oXCJUSFJFRS5UdWJlR2VvbWV0cnk6IHRhcGVyIGhhcyBiZWVuIHJlbW92ZWQuXCIpO2E9bmV3IFliKGEsYixjLGQsZSk7dGhpcy50YW5nZW50cz1hLnRhbmdlbnRzO3RoaXMubm9ybWFscz1hLm5vcm1hbHM7dGhpcy5iaW5vcm1hbHM9YS5iaW5vcm1hbHM7dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkoYSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gWWIoYSxiLGMsZCxlKXtmdW5jdGlvbiBmKGUpe3E9YS5nZXRQb2ludEF0KGUvYixxKTt2YXIgZj1nLm5vcm1hbHNbZV07ZT1nLmJpbm9ybWFsc1tlXTtmb3IobD0wO2w8PWQ7bCsrKXt2YXIgbT1sL2QqTWF0aC5QSSoyLG49TWF0aC5zaW4obSksbT0tTWF0aC5jb3MobSk7ay54PW0qZi54K24qZS54O2sueT1tKmYueStuKmUueTtrLno9bSpmLnorbiplLno7ay5ub3JtYWxpemUoKTt0LnB1c2goay54LFxuICAgIGsueSxrLnopO2gueD1xLngrYyprLng7aC55PXEueStjKmsueTtoLno9cS56K2Mqay56O3IucHVzaChoLngsaC55LGgueil9fUUuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUdWJlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3BhdGg6YSx0dWJ1bGFyU2VnbWVudHM6YixyYWRpdXM6YyxyYWRpYWxTZWdtZW50czpkLGNsb3NlZDplfTtiPWJ8fDY0O2M9Y3x8MTtkPWR8fDg7ZT1lfHwhMTt2YXIgZz1hLmNvbXB1dGVGcmVuZXRGcmFtZXMoYixlKTt0aGlzLnRhbmdlbnRzPWcudGFuZ2VudHM7dGhpcy5ub3JtYWxzPWcubm9ybWFsczt0aGlzLmJpbm9ybWFscz1nLmJpbm9ybWFsczt2YXIgaD1uZXcgcCxrPW5ldyBwLG09bmV3IEQscT1uZXcgcCxuLGwscj1bXSx0PVtdLHY9W10sdz1bXTtmb3Iobj0wO248YjtuKyspZihuKTtmKCExPT09ZT9iOjApO2ZvcihuPTA7bjw9YjtuKyspZm9yKGw9MDtsPD1kO2wrKyltLng9bi9iLG0ueT1sL2Qsdi5wdXNoKG0ueCxtLnkpOyhmdW5jdGlvbigpe2ZvcihsPVxuICAgIDE7bDw9YjtsKyspZm9yKG49MTtuPD1kO24rKyl7dmFyIGE9KGQrMSkqbCsobi0xKSxjPShkKzEpKmwrbixlPShkKzEpKihsLTEpK247dy5wdXNoKChkKzEpKihsLTEpKyhuLTEpLGEsZSk7dy5wdXNoKGEsYyxlKX19KSgpO3RoaXMuc2V0SW5kZXgodyk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKHIsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIodCwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKHYsMikpfWZ1bmN0aW9uIE9jKGEsYixjLGQsZSxmLGcpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUb3J1c0tub3RHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsdHViZTpiLHR1YnVsYXJTZWdtZW50czpjLHJhZGlhbFNlZ21lbnRzOmQscDplLHE6Zn07dm9pZCAwIT09ZyYmY29uc29sZS53YXJuKFwiVEhSRUUuVG9ydXNLbm90R2VvbWV0cnk6IGhlaWdodFNjYWxlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuc2NhbGUoIHgsIHksIHogKSBpbnN0ZWFkLlwiKTtcbiAgICB0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgWmIoYSxiLGMsZCxlLGYpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBaYihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGIsYyxkLGUpe3ZhciBmPU1hdGguc2luKGEpO2I9Yy9iKmE7Yz1NYXRoLmNvcyhiKTtlLng9ZCooMitjKSouNSpNYXRoLmNvcyhhKTtlLnk9ZCooMitjKSpmKi41O2Uuej1kKk1hdGguc2luKGIpKi41fUUuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUb3J1c0tub3RCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsdHViZTpiLHR1YnVsYXJTZWdtZW50czpjLHJhZGlhbFNlZ21lbnRzOmQscDplLHE6Zn07YT1hfHwxO2I9Ynx8LjQ7Yz1NYXRoLmZsb29yKGMpfHw2NDtkPU1hdGguZmxvb3IoZCl8fDg7ZT1lfHwyO2Y9Znx8Mzt2YXIgaD1bXSxrPVtdLG09W10scT1bXSxuLGw9bmV3IHAscj1uZXcgcCx0PW5ldyBwLHY9bmV3IHAsdz1uZXcgcCx6PW5ldyBwLHk9bmV3IHA7Zm9yKG49MDtuPD1cbiAgICBjOysrbil7dmFyIEk9bi9jKmUqTWF0aC5QSSoyO2coSSxlLGYsYSx0KTtnKEkrLjAxLGUsZixhLHYpO3ouc3ViVmVjdG9ycyh2LHQpO3kuYWRkVmVjdG9ycyh2LHQpO3cuY3Jvc3NWZWN0b3JzKHoseSk7eS5jcm9zc1ZlY3RvcnModyx6KTt3Lm5vcm1hbGl6ZSgpO3kubm9ybWFsaXplKCk7Zm9yKEk9MDtJPD1kOysrSSl7dmFyIEE9SS9kKk1hdGguUEkqMixKPS1iKk1hdGguY29zKEEpLEE9YipNYXRoLnNpbihBKTtsLng9dC54KyhKKnkueCtBKncueCk7bC55PXQueSsoSip5LnkrQSp3LnkpO2wuej10LnorKEoqeS56K0Eqdy56KTtrLnB1c2gobC54LGwueSxsLnopO3Iuc3ViVmVjdG9ycyhsLHQpLm5vcm1hbGl6ZSgpO20ucHVzaChyLngsci55LHIueik7cS5wdXNoKG4vYyk7cS5wdXNoKEkvZCl9fWZvcihJPTE7STw9YztJKyspZm9yKG49MTtuPD1kO24rKylhPShkKzEpKkkrKG4tMSksYj0oZCsxKSpJK24sZT0oZCsxKSooSS0xKStuLGgucHVzaCgoZCsxKSooSS0xKSsobi0xKSxhLGUpLFxuICAgIGgucHVzaChhLGIsZSk7dGhpcy5zZXRJbmRleChoKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoaywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQihtLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIocSwyKSl9ZnVuY3Rpb24gUGMoYSxiLGMsZCxlKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVG9ydXNHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsdHViZTpiLHJhZGlhbFNlZ21lbnRzOmMsdHVidWxhclNlZ21lbnRzOmQsYXJjOmV9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyAkYihhLGIsYyxkLGUpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiAkYihhLGIsYyxkLGUpe0UuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUb3J1c0J1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSx0dWJlOmIscmFkaWFsU2VnbWVudHM6Yyx0dWJ1bGFyU2VnbWVudHM6ZCxhcmM6ZX07YT1hfHwxO2I9Ynx8XG4gICAgLjQ7Yz1NYXRoLmZsb29yKGMpfHw4O2Q9TWF0aC5mbG9vcihkKXx8NjtlPWV8fDIqTWF0aC5QSTt2YXIgZj1bXSxnPVtdLGg9W10saz1bXSxtPW5ldyBwLHE9bmV3IHAsbj1uZXcgcCxsLHI7Zm9yKGw9MDtsPD1jO2wrKylmb3Iocj0wO3I8PWQ7cisrKXt2YXIgdD1yL2QqZSx2PWwvYypNYXRoLlBJKjI7cS54PShhK2IqTWF0aC5jb3ModikpKk1hdGguY29zKHQpO3EueT0oYStiKk1hdGguY29zKHYpKSpNYXRoLnNpbih0KTtxLno9YipNYXRoLnNpbih2KTtnLnB1c2gocS54LHEueSxxLnopO20ueD1hKk1hdGguY29zKHQpO20ueT1hKk1hdGguc2luKHQpO24uc3ViVmVjdG9ycyhxLG0pLm5vcm1hbGl6ZSgpO2gucHVzaChuLngsbi55LG4ueik7ay5wdXNoKHIvZCk7ay5wdXNoKGwvYyl9Zm9yKGw9MTtsPD1jO2wrKylmb3Iocj0xO3I8PWQ7cisrKWE9KGQrMSkqKGwtMSkrci0xLGI9KGQrMSkqKGwtMSkrcixlPShkKzEpKmwrcixmLnB1c2goKGQrMSkqbCtyLTEsYSxlKSxmLnB1c2goYSxiLFxuICAgIGUpO3RoaXMuc2V0SW5kZXgoZik7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGcsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIoaCwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKGssMikpfWZ1bmN0aW9uIGJmKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9MCxoPWIsaz1jLWQ7aDxjO2grPWQpZys9KGFba10tYVtoXSkqKGFbaCsxXSthW2srMV0pLGs9aDtpZihlPT09MDxnKWZvcihlPWI7ZTxjO2UrPWQpZj1jZihlLGFbZV0sYVtlKzFdLGYpO2Vsc2UgZm9yKGU9Yy1kO2U+PWI7ZS09ZClmPWNmKGUsYVtlXSxhW2UrMV0sZik7ZiYmdmIoZixmLm5leHQpJiYoUWMoZiksZj1mLm5leHQpO3JldHVybiBmfWZ1bmN0aW9uIFJjKGEsYil7aWYoIWEpcmV0dXJuIGE7Ynx8KGI9YSk7ZG97dmFyIGM9ITE7aWYoYS5zdGVpbmVyfHwhdmIoYSxhLm5leHQpJiYwIT09dGEoYS5wcmV2LGEsYS5uZXh0KSlhPWEubmV4dDtlbHNle1FjKGEpO2E9Yj1hLnByZXY7XG4gICAgaWYoYT09PWEubmV4dClicmVhaztjPSEwfX13aGlsZShjfHxhIT09Yik7cmV0dXJuIGJ9ZnVuY3Rpb24gU2MoYSxiLGMsZCxlLGYsZyl7aWYoYSl7aWYoIWcmJmYpe3ZhciBoPWEsaz1oO2RvIG51bGw9PT1rLnomJihrLno9ZmUoay54LGsueSxkLGUsZikpLGsucHJldlo9ay5wcmV2LGs9ay5uZXh0Wj1rLm5leHQ7d2hpbGUoayE9PWgpO2sucHJldloubmV4dFo9bnVsbDtrLnByZXZaPW51bGw7dmFyIGg9ayxtLHEsbixsLHI9MTtkb3trPWg7dmFyIHQ9aD1udWxsO2ZvcihxPTA7azspe3ErKzt2YXIgcD1rO2ZvcihtPW49MDttPHImJihuKysscD1wLm5leHRaLHApO20rKyk7Zm9yKGw9cjswPG58fDA8bCYmcDspMCE9PW4mJigwPT09bHx8IXB8fGsuejw9cC56KT8obT1rLGs9ay5uZXh0WixuLS0pOihtPXAscD1wLm5leHRaLGwtLSksdD90Lm5leHRaPW06aD1tLG0ucHJldlo9dCx0PW07az1wfXQubmV4dFo9bnVsbDtyKj0yfXdoaWxlKDE8cSl9Zm9yKGg9YTthLnByZXYhPT1hLm5leHQ7KXtrPVxuICAgIGEucHJldjtwPWEubmV4dDtpZihmKWE6e3Q9YTtsPWQ7dmFyIHc9ZSx6PWY7cT10LnByZXY7bj10O3I9dC5uZXh0O2lmKDA8PXRhKHEsbixyKSl0PSExO2Vsc2V7dmFyIHk9cS54Pm4ueD9xLng+ci54P3EueDpyLng6bi54PnIueD9uLng6ci54LEk9cS55Pm4ueT9xLnk+ci55P3EueTpyLnk6bi55PnIueT9uLnk6ci55O209ZmUocS54PG4ueD9xLng8ci54P3EueDpyLng6bi54PHIueD9uLng6ci54LHEueTxuLnk/cS55PHIueT9xLnk6ci55Om4ueTxyLnk/bi55OnIueSxsLHcseik7bD1mZSh5LEksbCx3LHopO2Zvcih3PXQubmV4dFo7dyYmdy56PD1sOyl7aWYodyE9PXQucHJldiYmdyE9PXQubmV4dCYmemQocS54LHEueSxuLngsbi55LHIueCxyLnksdy54LHcueSkmJjA8PXRhKHcucHJldix3LHcubmV4dCkpe3Q9ITE7YnJlYWsgYX13PXcubmV4dFp9Zm9yKHc9dC5wcmV2Wjt3JiZ3Lno+PW07KXtpZih3IT09dC5wcmV2JiZ3IT09dC5uZXh0JiZ6ZChxLngscS55LG4ueCxuLnksci54LFxuICAgIHIueSx3Lngsdy55KSYmMDw9dGEody5wcmV2LHcsdy5uZXh0KSl7dD0hMTticmVhayBhfXc9dy5wcmV2Wn10PSEwfX1lbHNlIGE6aWYodD1hLHE9dC5wcmV2LG49dCxyPXQubmV4dCwwPD10YShxLG4scikpdD0hMTtlbHNle2ZvcihtPXQubmV4dC5uZXh0O20hPT10LnByZXY7KXtpZih6ZChxLngscS55LG4ueCxuLnksci54LHIueSxtLngsbS55KSYmMDw9dGEobS5wcmV2LG0sbS5uZXh0KSl7dD0hMTticmVhayBhfW09bS5uZXh0fXQ9ITB9aWYodCliLnB1c2goay5pL2MpLGIucHVzaChhLmkvYyksYi5wdXNoKHAuaS9jKSxRYyhhKSxoPWE9cC5uZXh0O2Vsc2UgaWYoYT1wLGE9PT1oKXtpZighZylTYyhSYyhhKSxiLGMsZCxlLGYsMSk7ZWxzZSBpZigxPT09Zyl7Zz1iO2g9YztrPWE7ZG8gcD1rLnByZXYsdD1rLm5leHQubmV4dCwhdmIocCx0KSYmZGYocCxrLGsubmV4dCx0KSYmVGMocCx0KSYmVGModCxwKSYmKGcucHVzaChwLmkvaCksZy5wdXNoKGsuaS9oKSxnLnB1c2godC5pL2gpLFxuICAgIFFjKGspLFFjKGsubmV4dCksaz1hPXQpLGs9ay5uZXh0O3doaWxlKGshPT1hKTthPWs7U2MoYSxiLGMsZCxlLGYsMil9ZWxzZSBpZigyPT09ZylhOntnPWE7ZG97Zm9yKGg9Zy5uZXh0Lm5leHQ7aCE9PWcucHJldjspe2lmKGs9Zy5pIT09aC5pKXtrPWc7cD1oO2lmKHQ9ay5uZXh0LmkhPT1wLmkmJmsucHJldi5pIT09cC5pKXtiOnt0PWs7ZG97aWYodC5pIT09ay5pJiZ0Lm5leHQuaSE9PWsuaSYmdC5pIT09cC5pJiZ0Lm5leHQuaSE9PXAuaSYmZGYodCx0Lm5leHQsayxwKSl7dD0hMDticmVhayBifXQ9dC5uZXh0fXdoaWxlKHQhPT1rKTt0PSExfXQ9IXR9aWYodD10JiZUYyhrLHApJiZUYyhwLGspKXt0PWs7cT0hMTtuPShrLngrcC54KS8yO3A9KGsueStwLnkpLzI7ZG8gdC55PnAhPT10Lm5leHQueT5wJiZ0Lm5leHQueSE9PXQueSYmbjwodC5uZXh0LngtdC54KSoocC10LnkpLyh0Lm5leHQueS10LnkpK3QueCYmKHE9IXEpLHQ9dC5uZXh0O3doaWxlKHQhPT1rKTt0PXF9az10fWlmKGspe2E9XG4gICAgZWYoZyxoKTtnPVJjKGcsZy5uZXh0KTthPVJjKGEsYS5uZXh0KTtTYyhnLGIsYyxkLGUsZik7U2MoYSxiLGMsZCxlLGYpO2JyZWFrIGF9aD1oLm5leHR9Zz1nLm5leHR9d2hpbGUoZyE9PWEpfWJyZWFrfX19fWZ1bmN0aW9uIEhnKGEsYil7cmV0dXJuIGEueC1iLnh9ZnVuY3Rpb24gSWcoYSxiKXt2YXIgYz1iLGQ9YS54LGU9YS55LGY9LUluZmluaXR5O2Rve2lmKGU8PWMueSYmZT49Yy5uZXh0LnkmJmMubmV4dC55IT09Yy55KXt2YXIgZz1jLngrKGUtYy55KSooYy5uZXh0LngtYy54KS8oYy5uZXh0LnktYy55KTtpZihnPD1kJiZnPmYpe2Y9ZztpZihnPT09ZCl7aWYoZT09PWMueSlyZXR1cm4gYztpZihlPT09Yy5uZXh0LnkpcmV0dXJuIGMubmV4dH12YXIgaD1jLng8Yy5uZXh0Lng/YzpjLm5leHR9fWM9Yy5uZXh0fXdoaWxlKGMhPT1iKTtpZighaClyZXR1cm4gbnVsbDtpZihkPT09ZilyZXR1cm4gaC5wcmV2O2I9aDtmb3IodmFyIGc9aC54LGs9aC55LG09SW5maW5pdHkscSxjPWgubmV4dDtjIT09XG4gICAgYjspZD49Yy54JiZjLng+PWcmJmQhPT1jLngmJnpkKGU8az9kOmYsZSxnLGssZTxrP2Y6ZCxlLGMueCxjLnkpJiYocT1NYXRoLmFicyhlLWMueSkvKGQtYy54KSwocTxtfHxxPT09bSYmYy54PmgueCkmJlRjKGMsYSkmJihoPWMsbT1xKSksYz1jLm5leHQ7cmV0dXJuIGh9ZnVuY3Rpb24gZmUoYSxiLGMsZCxlKXthPTMyNzY3KihhLWMpKmU7Yj0zMjc2NyooYi1kKSplO2E9KGF8YTw8OCkmMTY3MTE5MzU7YT0oYXxhPDw0KSYyNTI2NDUxMzU7YT0oYXxhPDwyKSY4NTg5OTM0NTk7Yj0oYnxiPDw4KSYxNjcxMTkzNTtiPShifGI8PDQpJjI1MjY0NTEzNTtiPShifGI8PDIpJjg1ODk5MzQ1OTtyZXR1cm4oYXxhPDwxKSYxNDMxNjU1NzY1fCgoYnxiPDwxKSYxNDMxNjU1NzY1KTw8MX1mdW5jdGlvbiBKZyhhKXt2YXIgYj1hLGM9YTtkbyBiLng8Yy54JiYoYz1iKSxiPWIubmV4dDt3aGlsZShiIT09YSk7cmV0dXJuIGN9ZnVuY3Rpb24gemQoYSxiLGMsZCxlLGYsZyxoKXtyZXR1cm4gMDw9KGUtXG4gICAgZykqKGItaCktKGEtZykqKGYtaCkmJjA8PShhLWcpKihkLWgpLShjLWcpKihiLWgpJiYwPD0oYy1nKSooZi1oKS0oZS1nKSooZC1oKX1mdW5jdGlvbiB0YShhLGIsYyl7cmV0dXJuKGIueS1hLnkpKihjLngtYi54KS0oYi54LWEueCkqKGMueS1iLnkpfWZ1bmN0aW9uIHZiKGEsYil7cmV0dXJuIGEueD09PWIueCYmYS55PT09Yi55fWZ1bmN0aW9uIGRmKGEsYixjLGQpe3JldHVybiB2YihhLGIpJiZ2YihjLGQpfHx2YihhLGQpJiZ2YihjLGIpPyEwOjA8dGEoYSxiLGMpIT09MDx0YShhLGIsZCkmJjA8dGEoYyxkLGEpIT09MDx0YShjLGQsYil9ZnVuY3Rpb24gVGMoYSxiKXtyZXR1cm4gMD50YShhLnByZXYsYSxhLm5leHQpPzA8PXRhKGEsYixhLm5leHQpJiYwPD10YShhLGEucHJldixiKTowPnRhKGEsYixhLnByZXYpfHwwPnRhKGEsYS5uZXh0LGIpfWZ1bmN0aW9uIGVmKGEsYil7dmFyIGM9bmV3IGdlKGEuaSxhLngsYS55KSxkPW5ldyBnZShiLmksYi54LGIueSksZT1hLm5leHQsZj1iLnByZXY7XG4gICAgYS5uZXh0PWI7Yi5wcmV2PWE7Yy5uZXh0PWU7ZS5wcmV2PWM7ZC5uZXh0PWM7Yy5wcmV2PWQ7Zi5uZXh0PWQ7ZC5wcmV2PWY7cmV0dXJuIGR9ZnVuY3Rpb24gY2YoYSxiLGMsZCl7YT1uZXcgZ2UoYSxiLGMpO2Q/KGEubmV4dD1kLm5leHQsYS5wcmV2PWQsZC5uZXh0LnByZXY9YSxkLm5leHQ9YSk6KGEucHJldj1hLGEubmV4dD1hKTtyZXR1cm4gYX1mdW5jdGlvbiBRYyhhKXthLm5leHQucHJldj1hLnByZXY7YS5wcmV2Lm5leHQ9YS5uZXh0O2EucHJldlomJihhLnByZXZaLm5leHRaPWEubmV4dFopO2EubmV4dFomJihhLm5leHRaLnByZXZaPWEucHJldlopfWZ1bmN0aW9uIGdlKGEsYixjKXt0aGlzLmk9YTt0aGlzLng9Yjt0aGlzLnk9Yzt0aGlzLm5leHRaPXRoaXMucHJldlo9dGhpcy56PXRoaXMubmV4dD10aGlzLnByZXY9bnVsbDt0aGlzLnN0ZWluZXI9ITF9ZnVuY3Rpb24gaWIoYSxiKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiRXh0cnVkZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPVxuICAgIHtzaGFwZXM6YSxvcHRpb25zOmJ9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBMYShhLGIpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBMYShhLGIpe1widW5kZWZpbmVkXCIhPT10eXBlb2YgYSYmKEUuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJFeHRydWRlQnVmZmVyR2VvbWV0cnlcIixhPUFycmF5LmlzQXJyYXkoYSk/YTpbYV0sdGhpcy5hZGRTaGFwZUxpc3QoYSxiKSx0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCkpfWZ1bmN0aW9uIFVjKGEsYil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRleHRHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17dGV4dDphLHBhcmFtZXRlcnM6Yn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGFjKGEsYikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGFjKGEsYil7Yj1ifHx7fTt2YXIgYz1iLmZvbnQ7aWYoIWN8fCFjLmlzRm9udClyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLlRleHRHZW9tZXRyeTogZm9udCBwYXJhbWV0ZXIgaXMgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkZvbnQuXCIpLFxuICAgIG5ldyBMO2E9Yy5nZW5lcmF0ZVNoYXBlcyhhLGIuc2l6ZSxiLmN1cnZlU2VnbWVudHMpO2IuYW1vdW50PXZvaWQgMCE9PWIuaGVpZ2h0P2IuaGVpZ2h0OjUwO3ZvaWQgMD09PWIuYmV2ZWxUaGlja25lc3MmJihiLmJldmVsVGhpY2tuZXNzPTEwKTt2b2lkIDA9PT1iLmJldmVsU2l6ZSYmKGIuYmV2ZWxTaXplPTgpO3ZvaWQgMD09PWIuYmV2ZWxFbmFibGVkJiYoYi5iZXZlbEVuYWJsZWQ9ITEpO0xhLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIlRleHRCdWZmZXJHZW9tZXRyeVwifWZ1bmN0aW9uIFZjKGEsYixjLGQsZSxmLGcpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcGhlcmVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsd2lkdGhTZWdtZW50czpiLGhlaWdodFNlZ21lbnRzOmMscGhpU3RhcnQ6ZCxwaGlMZW5ndGg6ZSx0aGV0YVN0YXJ0OmYsdGhldGFMZW5ndGg6Z307dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IHdiKGEsYixjLGQsZSxmLGcpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1cbiAgICBmdW5jdGlvbiB3YihhLGIsYyxkLGUsZixnKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU3BoZXJlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHdpZHRoU2VnbWVudHM6YixoZWlnaHRTZWdtZW50czpjLHBoaVN0YXJ0OmQscGhpTGVuZ3RoOmUsdGhldGFTdGFydDpmLHRoZXRhTGVuZ3RoOmd9O2E9YXx8MTtiPU1hdGgubWF4KDMsTWF0aC5mbG9vcihiKXx8OCk7Yz1NYXRoLm1heCgyLE1hdGguZmxvb3IoYyl8fDYpO2Q9dm9pZCAwIT09ZD9kOjA7ZT12b2lkIDAhPT1lP2U6MipNYXRoLlBJO2Y9dm9pZCAwIT09Zj9mOjA7Zz12b2lkIDAhPT1nP2c6TWF0aC5QSTt2YXIgaD1mK2csayxtLHE9MCxuPVtdLGw9bmV3IHAscj1uZXcgcCx0PVtdLHY9W10sdz1bXSx6PVtdO2ZvcihtPTA7bTw9YzttKyspe3ZhciB5PVtdLEk9bS9jO2ZvcihrPTA7azw9YjtrKyspe3ZhciBBPWsvYjtsLng9LWEqTWF0aC5jb3MoZCtBKmUpKk1hdGguc2luKGYrSSpnKTtsLnk9YSpNYXRoLmNvcyhmK1xuICAgIEkqZyk7bC56PWEqTWF0aC5zaW4oZCtBKmUpKk1hdGguc2luKGYrSSpnKTt2LnB1c2gobC54LGwueSxsLnopO3Iuc2V0KGwueCxsLnksbC56KS5ub3JtYWxpemUoKTt3LnB1c2goci54LHIueSxyLnopO3oucHVzaChBLDEtSSk7eS5wdXNoKHErKyl9bi5wdXNoKHkpfWZvcihtPTA7bTxjO20rKylmb3Ioaz0wO2s8YjtrKyspYT1uW21dW2srMV0sZD1uW21dW2tdLGU9blttKzFdW2tdLGc9blttKzFdW2srMV0sKDAhPT1tfHwwPGYpJiZ0LnB1c2goYSxkLGcpLChtIT09Yy0xfHxoPE1hdGguUEkpJiZ0LnB1c2goZCxlLGcpO3RoaXMuc2V0SW5kZXgodCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKHYsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIodywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKHosMikpfWZ1bmN0aW9uIFdjKGEsYixjLGQsZSxmKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUmluZ0dlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPVxuICAgIHtpbm5lclJhZGl1czphLG91dGVyUmFkaXVzOmIsdGhldGFTZWdtZW50czpjLHBoaVNlZ21lbnRzOmQsdGhldGFTdGFydDplLHRoZXRhTGVuZ3RoOmZ9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBiYyhhLGIsYyxkLGUsZikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGJjKGEsYixjLGQsZSxmKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUmluZ0J1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtpbm5lclJhZGl1czphLG91dGVyUmFkaXVzOmIsdGhldGFTZWdtZW50czpjLHBoaVNlZ21lbnRzOmQsdGhldGFTdGFydDplLHRoZXRhTGVuZ3RoOmZ9O2E9YXx8LjU7Yj1ifHwxO2U9dm9pZCAwIT09ZT9lOjA7Zj12b2lkIDAhPT1mP2Y6MipNYXRoLlBJO2M9dm9pZCAwIT09Yz9NYXRoLm1heCgzLGMpOjg7ZD12b2lkIDAhPT1kP01hdGgubWF4KDEsZCk6MTt2YXIgZz1bXSxoPVtdLGs9W10sbT1bXSxxPWEsbj0oYi1hKS9kLGw9bmV3IHAscj1uZXcgRCx0LHY7Zm9yKHQ9XG4gICAgMDt0PD1kO3QrKyl7Zm9yKHY9MDt2PD1jO3YrKylhPWUrdi9jKmYsbC54PXEqTWF0aC5jb3MoYSksbC55PXEqTWF0aC5zaW4oYSksaC5wdXNoKGwueCxsLnksbC56KSxrLnB1c2goMCwwLDEpLHIueD0obC54L2IrMSkvMixyLnk9KGwueS9iKzEpLzIsbS5wdXNoKHIueCxyLnkpO3ErPW59Zm9yKHQ9MDt0PGQ7dCsrKWZvcihiPXQqKGMrMSksdj0wO3Y8Yzt2KyspYT12K2IsZT1hK2MrMSxmPWErYysyLHE9YSsxLGcucHVzaChhLGUscSksZy5wdXNoKGUsZixxKTt0aGlzLnNldEluZGV4KGcpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihoLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBCKGssMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihtLDIpKX1mdW5jdGlvbiBYYyhhLGIsYyxkKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGF0aGVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cG9pbnRzOmEsc2VnbWVudHM6YixwaGlTdGFydDpjLHBoaUxlbmd0aDpkfTtcbiAgICB0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgY2MoYSxiLGMsZCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGNjKGEsYixjLGQpe0UuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMYXRoZUJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtwb2ludHM6YSxzZWdtZW50czpiLHBoaVN0YXJ0OmMscGhpTGVuZ3RoOmR9O2I9TWF0aC5mbG9vcihiKXx8MTI7Yz1jfHwwO2Q9ZHx8MipNYXRoLlBJO2Q9US5jbGFtcChkLDAsMipNYXRoLlBJKTt2YXIgZT1bXSxmPVtdLGc9W10saD0xL2Isaz1uZXcgcCxtPW5ldyBELHE7Zm9yKHE9MDtxPD1iO3ErKyl7dmFyIG49YytxKmgqZDt2YXIgbD1NYXRoLnNpbihuKSxyPU1hdGguY29zKG4pO2ZvcihuPTA7bjw9YS5sZW5ndGgtMTtuKyspay54PWFbbl0ueCpsLGsueT1hW25dLnksay56PWFbbl0ueCpyLGYucHVzaChrLngsay55LGsueiksbS54PXEvYixtLnk9bi8oYS5sZW5ndGgtMSksZy5wdXNoKG0ueCxtLnkpfWZvcihxPTA7cTxiO3ErKylmb3Iobj1cbiAgICAwO248YS5sZW5ndGgtMTtuKyspYz1uK3EqYS5sZW5ndGgsaD1jK2EubGVuZ3RoLGs9YythLmxlbmd0aCsxLG09YysxLGUucHVzaChjLGgsbSksZS5wdXNoKGgsayxtKTt0aGlzLnNldEluZGV4KGUpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihmLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIoZywyKSk7dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpO2lmKGQ9PT0yKk1hdGguUEkpZm9yKGQ9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheSxlPW5ldyBwLGY9bmV3IHAsZz1uZXcgcCxjPWIqYS5sZW5ndGgqMyxuPXE9MDtxPGEubGVuZ3RoO3ErKyxuKz0zKWUueD1kW24rMF0sZS55PWRbbisxXSxlLno9ZFtuKzJdLGYueD1kW2MrbiswXSxmLnk9ZFtjK24rMV0sZi56PWRbYytuKzJdLGcuYWRkVmVjdG9ycyhlLGYpLm5vcm1hbGl6ZSgpLGRbbiswXT1kW2MrbiswXT1nLngsZFtuKzFdPWRbYytuKzFdPWcueSxkW24rMl09ZFtjK24rMl09Zy56fWZ1bmN0aW9uIHhiKGEsXG4gICAgYil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYXBlR2VvbWV0cnlcIjtcIm9iamVjdFwiPT09dHlwZW9mIGImJihjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFwZUdlb21ldHJ5OiBPcHRpb25zIHBhcmFtZXRlciBoYXMgYmVlbiByZW1vdmVkLlwiKSxiPWIuY3VydmVTZWdtZW50cyk7dGhpcy5wYXJhbWV0ZXJzPXtzaGFwZXM6YSxjdXJ2ZVNlZ21lbnRzOmJ9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyB5YihhLGIpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiB5YihhLGIpe2Z1bmN0aW9uIGMoYSl7dmFyIGMsaD1lLmxlbmd0aC8zO2E9YS5leHRyYWN0UG9pbnRzKGIpO3ZhciBtPWEuc2hhcGUscT1hLmhvbGVzO2lmKCExPT09JGEuaXNDbG9ja1dpc2UobSkpZm9yKG09bS5yZXZlcnNlKCksYT0wLGM9cS5sZW5ndGg7YTxjO2ErKyl7dmFyIGw9cVthXTshMD09PSRhLmlzQ2xvY2tXaXNlKGwpJiYocVthXT1sLnJldmVyc2UoKSl9dmFyIHA9JGEudHJpYW5ndWxhdGVTaGFwZShtLFxuICAgIHEpO2E9MDtmb3IoYz1xLmxlbmd0aDthPGM7YSsrKWw9cVthXSxtPW0uY29uY2F0KGwpO2E9MDtmb3IoYz1tLmxlbmd0aDthPGM7YSsrKWw9bVthXSxlLnB1c2gobC54LGwueSwwKSxmLnB1c2goMCwwLDEpLGcucHVzaChsLngsbC55KTthPTA7Zm9yKGM9cC5sZW5ndGg7YTxjO2ErKyltPXBbYV0sZC5wdXNoKG1bMF0raCxtWzFdK2gsbVsyXStoKSxrKz0zfUUuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTaGFwZUJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtzaGFwZXM6YSxjdXJ2ZVNlZ21lbnRzOmJ9O2I9Ynx8MTI7dmFyIGQ9W10sZT1bXSxmPVtdLGc9W10saD0wLGs9MDtpZighMT09PUFycmF5LmlzQXJyYXkoYSkpYyhhKTtlbHNlIGZvcih2YXIgbT0wO208YS5sZW5ndGg7bSsrKWMoYVttXSksdGhpcy5hZGRHcm91cChoLGssbSksaCs9ayxrPTA7dGhpcy5zZXRJbmRleChkKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoZSwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixcbiAgICBuZXcgQihmLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIoZywyKSl9ZnVuY3Rpb24gZmYoYSxiKXtiLnNoYXBlcz1bXTtpZihBcnJheS5pc0FycmF5KGEpKWZvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyliLnNoYXBlcy5wdXNoKGFbY10udXVpZCk7ZWxzZSBiLnNoYXBlcy5wdXNoKGEudXVpZCk7cmV0dXJuIGJ9ZnVuY3Rpb24gZGMoYSxiKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiRWRnZXNHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17dGhyZXNob2xkQW5nbGU6Yn07dmFyIGM9W107Yj1NYXRoLmNvcyhRLkRFRzJSQUQqKHZvaWQgMCE9PWI/YjoxKSk7dmFyIGQ9WzAsMF0sZT17fSxmPVtcImFcIixcImJcIixcImNcIl07aWYoYS5pc0J1ZmZlckdlb21ldHJ5KXt2YXIgZz1uZXcgTDtnLmZyb21CdWZmZXJHZW9tZXRyeShhKX1lbHNlIGc9YS5jbG9uZSgpO2cubWVyZ2VWZXJ0aWNlcygpO2cuY29tcHV0ZUZhY2VOb3JtYWxzKCk7YT1nLnZlcnRpY2VzO2c9Zy5mYWNlcztmb3IodmFyIGg9XG4gICAgMCxrPWcubGVuZ3RoO2g8aztoKyspZm9yKHZhciBtPWdbaF0scT0wOzM+cTtxKyspe3ZhciBuPW1bZltxXV07dmFyIGw9bVtmWyhxKzEpJTNdXTtkWzBdPU1hdGgubWluKG4sbCk7ZFsxXT1NYXRoLm1heChuLGwpO249ZFswXStcIixcIitkWzFdO3ZvaWQgMD09PWVbbl0/ZVtuXT17aW5kZXgxOmRbMF0saW5kZXgyOmRbMV0sZmFjZTE6aCxmYWNlMjp2b2lkIDB9OmVbbl0uZmFjZTI9aH1mb3IobiBpbiBlKWlmKGQ9ZVtuXSx2b2lkIDA9PT1kLmZhY2UyfHxnW2QuZmFjZTFdLm5vcm1hbC5kb3QoZ1tkLmZhY2UyXS5ub3JtYWwpPD1iKWY9YVtkLmluZGV4MV0sYy5wdXNoKGYueCxmLnksZi56KSxmPWFbZC5pbmRleDJdLGMucHVzaChmLngsZi55LGYueik7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGMsMykpfWZ1bmN0aW9uIHpiKGEsYixjLGQsZSxmLGcsaCl7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkN5bGluZGVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1c1RvcDphLFxuICAgIHJhZGl1c0JvdHRvbTpiLGhlaWdodDpjLHJhZGlhbFNlZ21lbnRzOmQsaGVpZ2h0U2VnbWVudHM6ZSxvcGVuRW5kZWQ6Zix0aGV0YVN0YXJ0OmcsdGhldGFMZW5ndGg6aH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGFiKGEsYixjLGQsZSxmLGcsaCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGFiKGEsYixjLGQsZSxmLGcsaCl7ZnVuY3Rpb24gayhjKXt2YXIgZSxmPW5ldyBELGs9bmV3IHAsdT0wLHY9ITA9PT1jP2E6Yix5PSEwPT09Yz8xOi0xO3ZhciB4PXQ7Zm9yKGU9MTtlPD1kO2UrKyluLnB1c2goMCx3KnksMCksbC5wdXNoKDAseSwwKSxyLnB1c2goLjUsLjUpLHQrKzt2YXIgQj10O2ZvcihlPTA7ZTw9ZDtlKyspe3ZhciBDPWUvZCpoK2csRT1NYXRoLmNvcyhDKSxDPU1hdGguc2luKEMpO2sueD12KkM7ay55PXcqeTtrLno9dipFO24ucHVzaChrLngsay55LGsueik7bC5wdXNoKDAseSwwKTtmLng9LjUqRSsuNTtmLnk9LjUqQyp5Ky41O3IucHVzaChmLngsZi55KTtcbiAgICB0Kyt9Zm9yKGU9MDtlPGQ7ZSsrKWY9eCtlLGs9QitlLCEwPT09Yz9xLnB1c2goayxrKzEsZik6cS5wdXNoKGsrMSxrLGYpLHUrPTM7bS5hZGRHcm91cCh6LHUsITA9PT1jPzE6Mik7eis9dX1FLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzVG9wOmEscmFkaXVzQm90dG9tOmIsaGVpZ2h0OmMscmFkaWFsU2VnbWVudHM6ZCxoZWlnaHRTZWdtZW50czplLG9wZW5FbmRlZDpmLHRoZXRhU3RhcnQ6Zyx0aGV0YUxlbmd0aDpofTt2YXIgbT10aGlzO2E9dm9pZCAwIT09YT9hOjE7Yj12b2lkIDAhPT1iP2I6MTtjPWN8fDE7ZD1NYXRoLmZsb29yKGQpfHw4O2U9TWF0aC5mbG9vcihlKXx8MTtmPXZvaWQgMCE9PWY/ZjohMTtnPXZvaWQgMCE9PWc/ZzowO2g9dm9pZCAwIT09aD9oOjIqTWF0aC5QSTt2YXIgcT1bXSxuPVtdLGw9W10scj1bXSx0PTAsdj1bXSx3PWMvMix6PTA7KGZ1bmN0aW9uKCl7dmFyIGYsayx1PW5ldyBwLFxuICAgIEo9bmV3IHAseD0wLEI9KGItYSkvYztmb3Ioaz0wO2s8PWU7aysrKXt2YXIgRD1bXSxDPWsvZSxFPUMqKGItYSkrYTtmb3IoZj0wO2Y8PWQ7ZisrKXt2YXIgSD1mL2QsSz1IKmgrZyxTPU1hdGguc2luKEspLEs9TWF0aC5jb3MoSyk7Si54PUUqUztKLnk9LUMqYyt3O0ouej1FKks7bi5wdXNoKEoueCxKLnksSi56KTt1LnNldChTLEIsSykubm9ybWFsaXplKCk7bC5wdXNoKHUueCx1LnksdS56KTtyLnB1c2goSCwxLUMpO0QucHVzaCh0KyspfXYucHVzaChEKX1mb3IoZj0wO2Y8ZDtmKyspZm9yKGs9MDtrPGU7aysrKXU9dltrKzFdW2ZdLEo9dltrKzFdW2YrMV0sQj12W2tdW2YrMV0scS5wdXNoKHZba11bZl0sdSxCKSxxLnB1c2godSxKLEIpLHgrPTY7bS5hZGRHcm91cCh6LHgsMCk7eis9eH0pKCk7ITE9PT1mJiYoMDxhJiZrKCEwKSwwPGImJmsoITEpKTt0aGlzLnNldEluZGV4KHEpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihuLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLFxuICAgIG5ldyBCKGwsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihyLDIpKX1mdW5jdGlvbiBZYyhhLGIsYyxkLGUsZixnKXt6Yi5jYWxsKHRoaXMsMCxhLGIsYyxkLGUsZixnKTt0aGlzLnR5cGU9XCJDb25lR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGhlaWdodDpiLHJhZGlhbFNlZ21lbnRzOmMsaGVpZ2h0U2VnbWVudHM6ZCxvcGVuRW5kZWQ6ZSx0aGV0YVN0YXJ0OmYsdGhldGFMZW5ndGg6Z319ZnVuY3Rpb24gWmMoYSxiLGMsZCxlLGYsZyl7YWIuY2FsbCh0aGlzLDAsYSxiLGMsZCxlLGYsZyk7dGhpcy50eXBlPVwiQ29uZUJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxoZWlnaHQ6YixyYWRpYWxTZWdtZW50czpjLGhlaWdodFNlZ21lbnRzOmQsb3BlbkVuZGVkOmUsdGhldGFTdGFydDpmLHRoZXRhTGVuZ3RoOmd9fWZ1bmN0aW9uICRjKGEsYixjLGQpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDaXJjbGVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz1cbiAgICB7cmFkaXVzOmEsc2VnbWVudHM6Yix0aGV0YVN0YXJ0OmMsdGhldGFMZW5ndGg6ZH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGVjKGEsYixjLGQpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBlYyhhLGIsYyxkKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ2lyY2xlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHNlZ21lbnRzOmIsdGhldGFTdGFydDpjLHRoZXRhTGVuZ3RoOmR9O2E9YXx8MTtiPXZvaWQgMCE9PWI/TWF0aC5tYXgoMyxiKTo4O2M9dm9pZCAwIT09Yz9jOjA7ZD12b2lkIDAhPT1kP2Q6MipNYXRoLlBJO3ZhciBlPVtdLGY9W10sZz1bXSxoPVtdLGssbT1uZXcgcCxxPW5ldyBEO2YucHVzaCgwLDAsMCk7Zy5wdXNoKDAsMCwxKTtoLnB1c2goLjUsLjUpO3ZhciBuPTA7Zm9yKGs9MztuPD1iO24rKyxrKz0zKXt2YXIgbD1jK24vYipkO20ueD1hKk1hdGguY29zKGwpO20ueT1hKk1hdGguc2luKGwpO2YucHVzaChtLngsbS55LFxuICAgIG0ueik7Zy5wdXNoKDAsMCwxKTtxLng9KGZba10vYSsxKS8yO3EueT0oZltrKzFdL2ErMSkvMjtoLnB1c2gocS54LHEueSl9Zm9yKGs9MTtrPD1iO2srKyllLnB1c2goayxrKzEsMCk7dGhpcy5zZXRJbmRleChlKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoZiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQihnLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIoaCwyKSl9ZnVuY3Rpb24gZmMoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYWRvd01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgSCgwKTt0aGlzLm9wYWNpdHk9MTt0aGlzLnRyYW5zcGFyZW50PXRoaXMubGlnaHRzPSEwO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIGdjKGEpe0ZhLmNhbGwodGhpcyxhKTt0aGlzLnR5cGU9XCJSYXdTaGFkZXJNYXRlcmlhbFwifWZ1bmN0aW9uIFVhKGEpe1AuY2FsbCh0aGlzKTt0aGlzLmRlZmluZXM9e1NUQU5EQVJEOlwiXCJ9O3RoaXMudHlwZT1cbiAgICBcIk1lc2hTdGFuZGFyZE1hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgSCgxNjc3NzIxNSk7dGhpcy5tZXRhbG5lc3M9dGhpcy5yb3VnaG5lc3M9LjU7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IEgoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuYnVtcE1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsU2NhbGU9bmV3IEQoMSwxKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLmVudk1hcD10aGlzLmFscGhhTWFwPXRoaXMubWV0YWxuZXNzTWFwPXRoaXMucm91Z2huZXNzTWFwPW51bGw7dGhpcy5lbnZNYXBJbnRlbnNpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1cbiAgICAuOTg7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBBYihhKXtVYS5jYWxsKHRoaXMpO3RoaXMuZGVmaW5lcz17UEhZU0lDQUw6XCJcIn07dGhpcy50eXBlPVwiTWVzaFBoeXNpY2FsTWF0ZXJpYWxcIjt0aGlzLnJlZmxlY3Rpdml0eT0uNTt0aGlzLmNsZWFyQ29hdFJvdWdobmVzcz10aGlzLmNsZWFyQ29hdD0wO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIE1hKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoUGhvbmdNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IEgoMTY3NzcyMTUpO3RoaXMuc3BlY3VsYXI9bmV3IEgoMTExODQ4MSk7dGhpcy5zaGluaW5lc3M9MzA7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO1xuICAgIHRoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IEgoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuYnVtcE1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsU2NhbGU9bmV3IEQoMSwxKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLmVudk1hcD10aGlzLmFscGhhTWFwPXRoaXMuc3BlY3VsYXJNYXA9bnVsbDt0aGlzLmNvbWJpbmU9MDt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPS45ODt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIjt0aGlzLm1vcnBoTm9ybWFscz1cbiAgICB0aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIEJiKGEpe01hLmNhbGwodGhpcyk7dGhpcy5kZWZpbmVzPXtUT09OOlwiXCJ9O3RoaXMudHlwZT1cIk1lc2hUb29uTWF0ZXJpYWxcIjt0aGlzLmdyYWRpZW50TWFwPW51bGw7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gQ2IoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hOb3JtYWxNYXRlcmlhbFwiO3RoaXMuYnVtcE1hcD1udWxsO3RoaXMuYnVtcFNjYWxlPTE7dGhpcy5ub3JtYWxNYXA9bnVsbDt0aGlzLm5vcm1hbFNjYWxlPW5ldyBEKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPXRoaXMubGlnaHRzPXRoaXMuZm9nPVxuICAgICExO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIERiKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoTGFtYmVydE1hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgSCgxNjc3NzIxNSk7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IEgoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuZW52TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5zcGVjdWxhck1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5jb21iaW5lPTA7dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTg7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9XG4gICAgdGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBFYihhKXtXLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGluZURhc2hlZE1hdGVyaWFsXCI7dGhpcy5zY2FsZT0xO3RoaXMuZGFzaFNpemU9Mzt0aGlzLmdhcFNpemU9MTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBoZShhLGIsYyl7dmFyIGQ9dGhpcyxlPSExLGY9MCxnPTAsaD12b2lkIDA7dGhpcy5vblN0YXJ0PXZvaWQgMDt0aGlzLm9uTG9hZD1hO3RoaXMub25Qcm9ncmVzcz1iO3RoaXMub25FcnJvcj1jO3RoaXMuaXRlbVN0YXJ0PWZ1bmN0aW9uKGEpe2crKztpZighMT09PWUmJnZvaWQgMCE9PWQub25TdGFydClkLm9uU3RhcnQoYSxmLGcpO2U9ITB9O3RoaXMuaXRlbUVuZD1mdW5jdGlvbihhKXtmKys7aWYodm9pZCAwIT09ZC5vblByb2dyZXNzKWQub25Qcm9ncmVzcyhhLGYsZyk7aWYoZj09PWcmJihlPSExLHZvaWQgMCE9PWQub25Mb2FkKSlkLm9uTG9hZCgpfTt0aGlzLml0ZW1FcnJvcj1mdW5jdGlvbihhKXtpZih2b2lkIDAhPT1cbiAgICBkLm9uRXJyb3IpZC5vbkVycm9yKGEpfTt0aGlzLnJlc29sdmVVUkw9ZnVuY3Rpb24oYSl7cmV0dXJuIGg/aChhKTphfTt0aGlzLnNldFVSTE1vZGlmaWVyPWZ1bmN0aW9uKGEpe2g9YTtyZXR1cm4gdGhpc319ZnVuY3Rpb24gTmEoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YX1mdW5jdGlvbiBnZihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhO3RoaXMuX3BhcnNlcj1udWxsfWZ1bmN0aW9uIGllKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGE7dGhpcy5fcGFyc2VyPW51bGx9ZnVuY3Rpb24gYWQoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YX1mdW5jdGlvbiBqZShhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhfWZ1bmN0aW9uIEFkKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGF9ZnVuY3Rpb24gQygpe3RoaXMudHlwZT1cIkN1cnZlXCI7dGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9MjAwfWZ1bmN0aW9uIEJhKGEsYixjLGQsZSxmLFxuICAgIGcsaCl7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkVsbGlwc2VDdXJ2ZVwiO3RoaXMuYVg9YXx8MDt0aGlzLmFZPWJ8fDA7dGhpcy54UmFkaXVzPWN8fDE7dGhpcy55UmFkaXVzPWR8fDE7dGhpcy5hU3RhcnRBbmdsZT1lfHwwO3RoaXMuYUVuZEFuZ2xlPWZ8fDIqTWF0aC5QSTt0aGlzLmFDbG9ja3dpc2U9Z3x8ITE7dGhpcy5hUm90YXRpb249aHx8MH1mdW5jdGlvbiBoYyhhLGIsYyxkLGUsZil7QmEuY2FsbCh0aGlzLGEsYixjLGMsZCxlLGYpO3RoaXMudHlwZT1cIkFyY0N1cnZlXCJ9ZnVuY3Rpb24ga2UoKXt2YXIgYT0wLGI9MCxjPTAsZD0wO3JldHVybntpbml0Q2F0bXVsbFJvbTpmdW5jdGlvbihlLGYsZyxoLGspe2U9ayooZy1lKTtoPWsqKGgtZik7YT1mO2I9ZTtjPS0zKmYrMypnLTIqZS1oO2Q9MipmLTIqZytlK2h9LGluaXROb251bmlmb3JtQ2F0bXVsbFJvbTpmdW5jdGlvbihlLGYsZyxoLGssbSxxKXtlPSgoZi1lKS9rLShnLWUpLyhrK20pKyhnLWYpL20pKm07aD0oKGctZikvbS1cbiAgICAoaC1mKS8obStxKSsoaC1nKS9xKSptO2E9ZjtiPWU7Yz0tMypmKzMqZy0yKmUtaDtkPTIqZi0yKmcrZStofSxjYWxjOmZ1bmN0aW9uKGUpe3ZhciBmPWUqZTtyZXR1cm4gYStiKmUrYypmK2QqZiplfX19ZnVuY3Rpb24gY2EoYSxiLGMsZCl7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNhdG11bGxSb21DdXJ2ZTNcIjt0aGlzLnBvaW50cz1hfHxbXTt0aGlzLmNsb3NlZD1ifHwhMTt0aGlzLmN1cnZlVHlwZT1jfHxcImNlbnRyaXBldGFsXCI7dGhpcy50ZW5zaW9uPWR8fC41fWZ1bmN0aW9uIGhmKGEsYixjLGQsZSl7Yj0uNSooZC1iKTtlPS41KihlLWMpO3ZhciBmPWEqYTtyZXR1cm4oMipjLTIqZCtiK2UpKmEqZisoLTMqYyszKmQtMipiLWUpKmYrYiphK2N9ZnVuY3Rpb24gYmQoYSxiLGMsZCl7dmFyIGU9MS1hO3JldHVybiBlKmUqYisyKigxLWEpKmEqYythKmEqZH1mdW5jdGlvbiBjZChhLGIsYyxkLGUpe3ZhciBmPTEtYSxnPTEtYTtyZXR1cm4gZipmKmYqYiszKmcqZyphKmMrMyooMS1hKSpcbiAgICBhKmEqZCthKmEqYSplfWZ1bmN0aW9uIE9hKGEsYixjLGQpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdWJpY0JlemllckN1cnZlXCI7dGhpcy52MD1hfHxuZXcgRDt0aGlzLnYxPWJ8fG5ldyBEO3RoaXMudjI9Y3x8bmV3IEQ7dGhpcy52Mz1kfHxuZXcgRH1mdW5jdGlvbiBWYShhLGIsYyxkKXtDLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ3ViaWNCZXppZXJDdXJ2ZTNcIjt0aGlzLnYwPWF8fG5ldyBwO3RoaXMudjE9Ynx8bmV3IHA7dGhpcy52Mj1jfHxuZXcgcDt0aGlzLnYzPWR8fG5ldyBwfWZ1bmN0aW9uIHlhKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpbmVDdXJ2ZVwiO3RoaXMudjE9YXx8bmV3IEQ7dGhpcy52Mj1ifHxuZXcgRH1mdW5jdGlvbiBQYShhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaW5lQ3VydmUzXCI7dGhpcy52MT1hfHxuZXcgcDt0aGlzLnYyPWJ8fG5ldyBwfWZ1bmN0aW9uIFFhKGEsYixjKXtDLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUXVhZHJhdGljQmV6aWVyQ3VydmVcIjtcbiAgICB0aGlzLnYwPWF8fG5ldyBEO3RoaXMudjE9Ynx8bmV3IEQ7dGhpcy52Mj1jfHxuZXcgRH1mdW5jdGlvbiBXYShhLGIsYyl7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlF1YWRyYXRpY0JlemllckN1cnZlM1wiO3RoaXMudjA9YXx8bmV3IHA7dGhpcy52MT1ifHxuZXcgcDt0aGlzLnYyPWN8fG5ldyBwfWZ1bmN0aW9uIFJhKGEpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcGxpbmVDdXJ2ZVwiO3RoaXMucG9pbnRzPWF8fFtdfWZ1bmN0aW9uIGJiKCl7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkN1cnZlUGF0aFwiO3RoaXMuY3VydmVzPVtdO3RoaXMuYXV0b0Nsb3NlPSExfWZ1bmN0aW9uIFNhKGEpe2JiLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUGF0aFwiO3RoaXMuY3VycmVudFBvaW50PW5ldyBEO2EmJnRoaXMuc2V0RnJvbVBvaW50cyhhKX1mdW5jdGlvbiBqYihhKXtTYS5jYWxsKHRoaXMsYSk7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy50eXBlPVwiU2hhcGVcIjt0aGlzLmhvbGVzPVxuICAgIFtdfWZ1bmN0aW9uIGRhKGEsYil7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpZ2h0XCI7dGhpcy5jb2xvcj1uZXcgSChhKTt0aGlzLmludGVuc2l0eT12b2lkIDAhPT1iP2I6MTt0aGlzLnJlY2VpdmVTaGFkb3c9dm9pZCAwfWZ1bmN0aW9uIEJkKGEsYixjKXtkYS5jYWxsKHRoaXMsYSxjKTt0aGlzLnR5cGU9XCJIZW1pc3BoZXJlTGlnaHRcIjt0aGlzLmNhc3RTaGFkb3c9dm9pZCAwO3RoaXMucG9zaXRpb24uY29weSh4LkRlZmF1bHRVcCk7dGhpcy51cGRhdGVNYXRyaXgoKTt0aGlzLmdyb3VuZENvbG9yPW5ldyBIKGIpfWZ1bmN0aW9uIEZiKGEpe3RoaXMuY2FtZXJhPWE7dGhpcy5iaWFzPTA7dGhpcy5yYWRpdXM9MTt0aGlzLm1hcFNpemU9bmV3IEQoNTEyLDUxMik7dGhpcy5tYXA9bnVsbDt0aGlzLm1hdHJpeD1uZXcgT31mdW5jdGlvbiBDZCgpe0ZiLmNhbGwodGhpcyxuZXcgYmEoNTAsMSwuNSw1MDApKX1mdW5jdGlvbiBEZChhLGIsYyxkLGUsZil7ZGEuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVxuICAgIFwiU3BvdExpZ2h0XCI7dGhpcy5wb3NpdGlvbi5jb3B5KHguRGVmYXVsdFVwKTt0aGlzLnVwZGF0ZU1hdHJpeCgpO3RoaXMudGFyZ2V0PW5ldyB4O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicG93ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZW5zaXR5Kk1hdGguUEl9LHNldDpmdW5jdGlvbihhKXt0aGlzLmludGVuc2l0eT1hL01hdGguUEl9fSk7dGhpcy5kaXN0YW5jZT12b2lkIDAhPT1jP2M6MDt0aGlzLmFuZ2xlPXZvaWQgMCE9PWQ/ZDpNYXRoLlBJLzM7dGhpcy5wZW51bWJyYT12b2lkIDAhPT1lP2U6MDt0aGlzLmRlY2F5PXZvaWQgMCE9PWY/ZjoxO3RoaXMuc2hhZG93PW5ldyBDZH1mdW5jdGlvbiBFZChhLGIsYyxkKXtkYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJQb2ludExpZ2h0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwb3dlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gNCp0aGlzLmludGVuc2l0eSpNYXRoLlBJfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5pbnRlbnNpdHk9XG4gICAgYS8oNCpNYXRoLlBJKX19KTt0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PWM/YzowO3RoaXMuZGVjYXk9dm9pZCAwIT09ZD9kOjE7dGhpcy5zaGFkb3c9bmV3IEZiKG5ldyBiYSg5MCwxLC41LDUwMCkpfWZ1bmN0aW9uIEZkKCl7RmIuY2FsbCh0aGlzLG5ldyBMYigtNSw1LDUsLTUsLjUsNTAwKSl9ZnVuY3Rpb24gR2QoYSxiKXtkYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJEaXJlY3Rpb25hbExpZ2h0XCI7dGhpcy5wb3NpdGlvbi5jb3B5KHguRGVmYXVsdFVwKTt0aGlzLnVwZGF0ZU1hdHJpeCgpO3RoaXMudGFyZ2V0PW5ldyB4O3RoaXMuc2hhZG93PW5ldyBGZH1mdW5jdGlvbiBIZChhLGIpe2RhLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIkFtYmllbnRMaWdodFwiO3RoaXMuY2FzdFNoYWRvdz12b2lkIDB9ZnVuY3Rpb24gSWQoYSxiLGMsZCl7ZGEuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiUmVjdEFyZWFMaWdodFwiO3RoaXMucG9zaXRpb24uc2V0KDAsMSwwKTt0aGlzLnVwZGF0ZU1hdHJpeCgpO1xuICAgIHRoaXMud2lkdGg9dm9pZCAwIT09Yz9jOjEwO3RoaXMuaGVpZ2h0PXZvaWQgMCE9PWQ/ZDoxMH1mdW5jdGlvbiBKZChhLGIsYyxkKXtULmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBLZChhLGIsYyl7VC5jYWxsKHRoaXMsYSxiLGMpfWZ1bmN0aW9uIHBhKGEsYixjLGQpe3RoaXMucGFyYW1ldGVyUG9zaXRpb25zPWE7dGhpcy5fY2FjaGVkSW5kZXg9MDt0aGlzLnJlc3VsdEJ1ZmZlcj12b2lkIDAhPT1kP2Q6bmV3IGIuY29uc3RydWN0b3IoYyk7dGhpcy5zYW1wbGVWYWx1ZXM9Yjt0aGlzLnZhbHVlU2l6ZT1jfWZ1bmN0aW9uIExkKGEsYixjLGQpe3BhLmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBkZChhLGIsYyxkKXtULmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBNZChhLGIsYyxkKXtULmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBpYyhhLGIsYyxkKXtULmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBOZChhLGIsYyxkKXtwYS5jYWxsKHRoaXMsYSxiLGMsZCk7XG4gICAgdGhpcy5fb2Zmc2V0TmV4dD10aGlzLl93ZWlnaHROZXh0PXRoaXMuX29mZnNldFByZXY9dGhpcy5fd2VpZ2h0UHJldj0tMH1mdW5jdGlvbiBlZChhLGIsYyxkKXtwYS5jYWxsKHRoaXMsYSxiLGMsZCl9ZnVuY3Rpb24gT2QoYSxiLGMsZCl7cGEuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIFQoYSxiLGMsZCl7aWYodm9pZCAwPT09YSl0aHJvdyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IHRyYWNrIG5hbWUgaXMgdW5kZWZpbmVkXCIpO2lmKHZvaWQgMD09PWJ8fDA9PT1iLmxlbmd0aCl0aHJvdyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IG5vIGtleWZyYW1lcyBpbiB0cmFjayBuYW1lZCBcIithKTt0aGlzLm5hbWU9YTt0aGlzLnRpbWVzPWdhLmNvbnZlcnRBcnJheShiLHRoaXMuVGltZUJ1ZmZlclR5cGUpO3RoaXMudmFsdWVzPWdhLmNvbnZlcnRBcnJheShjLHRoaXMuVmFsdWVCdWZmZXJUeXBlKTt0aGlzLnNldEludGVycG9sYXRpb24oZHx8dGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbik7XG4gICAgdGhpcy52YWxpZGF0ZSgpO3RoaXMub3B0aW1pemUoKX1mdW5jdGlvbiBqYyhhLGIsYyxkKXtULmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBDYShhLGIsYyl7dGhpcy5uYW1lPWE7dGhpcy50cmFja3M9Yzt0aGlzLmR1cmF0aW9uPXZvaWQgMCE9PWI/YjotMTt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTswPnRoaXMuZHVyYXRpb24mJnRoaXMucmVzZXREdXJhdGlvbigpO3RoaXMub3B0aW1pemUoKX1mdW5jdGlvbiBQZChhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhO3RoaXMudGV4dHVyZXM9e319ZnVuY3Rpb24gbGUoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YX1mdW5jdGlvbiBrYygpe3RoaXMub25Mb2FkU3RhcnQ9ZnVuY3Rpb24oKXt9O3RoaXMub25Mb2FkUHJvZ3Jlc3M9ZnVuY3Rpb24oKXt9O3RoaXMub25Mb2FkQ29tcGxldGU9ZnVuY3Rpb24oKXt9fWZ1bmN0aW9uIG1lKGEpe1wiYm9vbGVhblwiPT09dHlwZW9mIGEmJihjb25zb2xlLndhcm4oXCJUSFJFRS5KU09OTG9hZGVyOiBzaG93U3RhdHVzIHBhcmFtZXRlciBoYXMgYmVlbiByZW1vdmVkIGZyb20gY29uc3RydWN0b3IuXCIpLFxuICAgIGE9dm9pZCAwKTt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhO3RoaXMud2l0aENyZWRlbnRpYWxzPSExfWZ1bmN0aW9uIGpmKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGE7dGhpcy50ZXh0dXJlUGF0aD1cIlwifWZ1bmN0aW9uIG5lKGEpe1widW5kZWZpbmVkXCI9PT10eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXAmJmNvbnNvbGUud2FybihcIlRIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBjcmVhdGVJbWFnZUJpdG1hcCgpIG5vdCBzdXBwb3J0ZWQuXCIpO1widW5kZWZpbmVkXCI9PT10eXBlb2YgZmV0Y2gmJmNvbnNvbGUud2FybihcIlRIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBmZXRjaCgpIG5vdCBzdXBwb3J0ZWQuXCIpO3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGE7dGhpcy5vcHRpb25zPXZvaWQgMH1mdW5jdGlvbiBvZSgpe3RoaXMudHlwZT1cIlNoYXBlUGF0aFwiO3RoaXMuc3ViUGF0aHM9W107dGhpcy5jdXJyZW50UGF0aD1udWxsfWZ1bmN0aW9uIHBlKGEpe3RoaXMudHlwZT1cIkZvbnRcIjtcbiAgICB0aGlzLmRhdGE9YX1mdW5jdGlvbiBrZihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhfWZ1bmN0aW9uIHFlKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGF9ZnVuY3Rpb24gbGYoKXt0aGlzLnR5cGU9XCJTdGVyZW9DYW1lcmFcIjt0aGlzLmFzcGVjdD0xO3RoaXMuZXllU2VwPS4wNjQ7dGhpcy5jYW1lcmFMPW5ldyBiYTt0aGlzLmNhbWVyYUwubGF5ZXJzLmVuYWJsZSgxKTt0aGlzLmNhbWVyYUwubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmNhbWVyYVI9bmV3IGJhO3RoaXMuY2FtZXJhUi5sYXllcnMuZW5hYmxlKDIpO3RoaXMuY2FtZXJhUi5tYXRyaXhBdXRvVXBkYXRlPSExfWZ1bmN0aW9uIGZkKGEsYixjKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ3ViZUNhbWVyYVwiO3ZhciBkPW5ldyBiYSg5MCwxLGEsYik7ZC51cC5zZXQoMCwtMSwwKTtkLmxvb2tBdChuZXcgcCgxLDAsMCkpO3RoaXMuYWRkKGQpO3ZhciBlPW5ldyBiYSg5MCwxLGEsYik7ZS51cC5zZXQoMCwtMSxcbiAgICAwKTtlLmxvb2tBdChuZXcgcCgtMSwwLDApKTt0aGlzLmFkZChlKTt2YXIgZj1uZXcgYmEoOTAsMSxhLGIpO2YudXAuc2V0KDAsMCwxKTtmLmxvb2tBdChuZXcgcCgwLDEsMCkpO3RoaXMuYWRkKGYpO3ZhciBnPW5ldyBiYSg5MCwxLGEsYik7Zy51cC5zZXQoMCwwLC0xKTtnLmxvb2tBdChuZXcgcCgwLC0xLDApKTt0aGlzLmFkZChnKTt2YXIgaD1uZXcgYmEoOTAsMSxhLGIpO2gudXAuc2V0KDAsLTEsMCk7aC5sb29rQXQobmV3IHAoMCwwLDEpKTt0aGlzLmFkZChoKTt2YXIgaz1uZXcgYmEoOTAsMSxhLGIpO2sudXAuc2V0KDAsLTEsMCk7ay5sb29rQXQobmV3IHAoMCwwLC0xKSk7dGhpcy5hZGQoayk7dGhpcy5yZW5kZXJUYXJnZXQ9bmV3IEpiKGMsYyx7Zm9ybWF0OjEwMjIsbWFnRmlsdGVyOjEwMDYsbWluRmlsdGVyOjEwMDZ9KTt0aGlzLnJlbmRlclRhcmdldC50ZXh0dXJlLm5hbWU9XCJDdWJlQ2FtZXJhXCI7dGhpcy51cGRhdGU9ZnVuY3Rpb24oYSxiKXtudWxsPT09dGhpcy5wYXJlbnQmJlxuICAgIHRoaXMudXBkYXRlTWF0cml4V29ybGQoKTt2YXIgYz10aGlzLnJlbmRlclRhcmdldCxtPWMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM7Yy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz0hMTtjLmFjdGl2ZUN1YmVGYWNlPTA7YS5yZW5kZXIoYixkLGMpO2MuYWN0aXZlQ3ViZUZhY2U9MTthLnJlbmRlcihiLGUsYyk7Yy5hY3RpdmVDdWJlRmFjZT0yO2EucmVuZGVyKGIsZixjKTtjLmFjdGl2ZUN1YmVGYWNlPTM7YS5yZW5kZXIoYixnLGMpO2MuYWN0aXZlQ3ViZUZhY2U9NDthLnJlbmRlcihiLGgsYyk7Yy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz1tO2MuYWN0aXZlQ3ViZUZhY2U9NTthLnJlbmRlcihiLGssYyk7YS5zZXRSZW5kZXJUYXJnZXQobnVsbCl9O3RoaXMuY2xlYXI9ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlPXRoaXMucmVuZGVyVGFyZ2V0LGY9MDs2PmY7ZisrKWUuYWN0aXZlQ3ViZUZhY2U9ZixhLnNldFJlbmRlclRhcmdldChlKSxhLmNsZWFyKGIsYyxkKTthLnNldFJlbmRlclRhcmdldChudWxsKX19XG4gICAgZnVuY3Rpb24gcmUoKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQXVkaW9MaXN0ZW5lclwiO3RoaXMuY29udGV4dD1zZS5nZXRDb250ZXh0KCk7dGhpcy5nYWluPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7dGhpcy5nYWluLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTt0aGlzLmZpbHRlcj1udWxsfWZ1bmN0aW9uIGxjKGEpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJBdWRpb1wiO3RoaXMuY29udGV4dD1hLmNvbnRleHQ7dGhpcy5nYWluPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7dGhpcy5nYWluLmNvbm5lY3QoYS5nZXRJbnB1dCgpKTt0aGlzLmF1dG9wbGF5PSExO3RoaXMuYnVmZmVyPW51bGw7dGhpcy5sb29wPSExO3RoaXMub2Zmc2V0PXRoaXMuc3RhcnRUaW1lPTA7dGhpcy5wbGF5YmFja1JhdGU9MTt0aGlzLmlzUGxheWluZz0hMTt0aGlzLmhhc1BsYXliYWNrQ29udHJvbD0hMDt0aGlzLnNvdXJjZVR5cGU9XCJlbXB0eVwiO3RoaXMuZmlsdGVycz1bXX1mdW5jdGlvbiB0ZShhKXtsYy5jYWxsKHRoaXMsXG4gICAgYSk7dGhpcy5wYW5uZXI9dGhpcy5jb250ZXh0LmNyZWF0ZVBhbm5lcigpO3RoaXMucGFubmVyLmNvbm5lY3QodGhpcy5nYWluKX1mdW5jdGlvbiB1ZShhLGIpe3RoaXMuYW5hbHlzZXI9YS5jb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7dGhpcy5hbmFseXNlci5mZnRTaXplPXZvaWQgMCE9PWI/YjoyMDQ4O3RoaXMuZGF0YT1uZXcgVWludDhBcnJheSh0aGlzLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KTthLmdldE91dHB1dCgpLmNvbm5lY3QodGhpcy5hbmFseXNlcil9ZnVuY3Rpb24gdmUoYSxiLGMpe3RoaXMuYmluZGluZz1hO3RoaXMudmFsdWVTaXplPWM7YT1GbG9hdDY0QXJyYXk7c3dpdGNoKGIpe2Nhc2UgXCJxdWF0ZXJuaW9uXCI6Yj10aGlzLl9zbGVycDticmVhaztjYXNlIFwic3RyaW5nXCI6Y2FzZSBcImJvb2xcIjphPUFycmF5O2I9dGhpcy5fc2VsZWN0O2JyZWFrO2RlZmF1bHQ6Yj10aGlzLl9sZXJwfXRoaXMuYnVmZmVyPW5ldyBhKDQqYyk7dGhpcy5fbWl4QnVmZmVyUmVnaW9uPVxuICAgIGI7dGhpcy5yZWZlcmVuY2VDb3VudD10aGlzLnVzZUNvdW50PXRoaXMuY3VtdWxhdGl2ZVdlaWdodD0wfWZ1bmN0aW9uIG1mKGEsYixjKXtjPWN8fHFhLnBhcnNlVHJhY2tOYW1lKGIpO3RoaXMuX3RhcmdldEdyb3VwPWE7dGhpcy5fYmluZGluZ3M9YS5zdWJzY3JpYmVfKGIsYyl9ZnVuY3Rpb24gcWEoYSxiLGMpe3RoaXMucGF0aD1iO3RoaXMucGFyc2VkUGF0aD1jfHxxYS5wYXJzZVRyYWNrTmFtZShiKTt0aGlzLm5vZGU9cWEuZmluZE5vZGUoYSx0aGlzLnBhcnNlZFBhdGgubm9kZU5hbWUpfHxhO3RoaXMucm9vdE5vZGU9YX1mdW5jdGlvbiBuZigpe3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMuX29iamVjdHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTt0aGlzLm5DYWNoZWRPYmplY3RzXz0wO3ZhciBhPXt9O3RoaXMuX2luZGljZXNCeVVVSUQ9YTtmb3IodmFyIGI9MCxjPWFyZ3VtZW50cy5sZW5ndGg7YiE9PWM7KytiKWFbYXJndW1lbnRzW2JdLnV1aWRdPVxuICAgIGI7dGhpcy5fcGF0aHM9W107dGhpcy5fcGFyc2VkUGF0aHM9W107dGhpcy5fYmluZGluZ3M9W107dGhpcy5fYmluZGluZ3NJbmRpY2VzQnlQYXRoPXt9O3ZhciBkPXRoaXM7dGhpcy5zdGF0cz17b2JqZWN0czp7Z2V0IHRvdGFsKCl7cmV0dXJuIGQuX29iamVjdHMubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gdGhpcy50b3RhbC1kLm5DYWNoZWRPYmplY3RzX319LGdldCBiaW5kaW5nc1Blck9iamVjdCgpe3JldHVybiBkLl9iaW5kaW5ncy5sZW5ndGh9fX1mdW5jdGlvbiBvZihhLGIsYyl7dGhpcy5fbWl4ZXI9YTt0aGlzLl9jbGlwPWI7dGhpcy5fbG9jYWxSb290PWN8fG51bGw7YT1iLnRyYWNrcztiPWEubGVuZ3RoO2M9QXJyYXkoYik7Zm9yKHZhciBkPXtlbmRpbmdTdGFydDoyNDAwLGVuZGluZ0VuZDoyNDAwfSxlPTA7ZSE9PWI7KytlKXt2YXIgZj1hW2VdLmNyZWF0ZUludGVycG9sYW50KG51bGwpO2NbZV09ZjtmLnNldHRpbmdzPWR9dGhpcy5faW50ZXJwb2xhbnRTZXR0aW5ncz1cbiAgICBkO3RoaXMuX2ludGVycG9sYW50cz1jO3RoaXMuX3Byb3BlcnR5QmluZGluZ3M9QXJyYXkoYik7dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ9dGhpcy5fYnlDbGlwQ2FjaGVJbmRleD10aGlzLl9jYWNoZUluZGV4PW51bGw7dGhpcy5sb29wPTIyMDE7dGhpcy5fbG9vcENvdW50PS0xO3RoaXMuX3N0YXJ0VGltZT1udWxsO3RoaXMudGltZT0wO3RoaXMuX2VmZmVjdGl2ZVdlaWdodD10aGlzLndlaWdodD10aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9dGhpcy50aW1lU2NhbGU9MTt0aGlzLnJlcGV0aXRpb25zPUluZmluaXR5O3RoaXMucGF1c2VkPSExO3RoaXMuZW5hYmxlZD0hMDt0aGlzLmNsYW1wV2hlbkZpbmlzaGVkPSExO3RoaXMuemVyb1Nsb3BlQXRFbmQ9dGhpcy56ZXJvU2xvcGVBdFN0YXJ0PSEwfWZ1bmN0aW9uIHdlKGEpe3RoaXMuX3Jvb3Q9YTt0aGlzLl9pbml0TWVtb3J5TWFuYWdlcigpO3RoaXMudGltZT10aGlzLl9hY2N1SW5kZXg9XG4gICAgMDt0aGlzLnRpbWVTY2FsZT0xfWZ1bmN0aW9uIFFkKGEsYil7XCJzdHJpbmdcIj09PXR5cGVvZiBhJiYoY29uc29sZS53YXJuKFwiVEhSRUUuVW5pZm9ybTogVHlwZSBwYXJhbWV0ZXIgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cIiksYT1iKTt0aGlzLnZhbHVlPWF9ZnVuY3Rpb24geGUoKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnlcIjt0aGlzLm1heEluc3RhbmNlZENvdW50PXZvaWQgMH1mdW5jdGlvbiB5ZShhLGIsYyxkKXt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTt0aGlzLmRhdGE9YTt0aGlzLml0ZW1TaXplPWI7dGhpcy5vZmZzZXQ9Yzt0aGlzLm5vcm1hbGl6ZWQ9ITA9PT1kfWZ1bmN0aW9uIG1jKGEsYil7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5hcnJheT1hO3RoaXMuc3RyaWRlPWI7dGhpcy5jb3VudD12b2lkIDAhPT1hP2EubGVuZ3RoL2I6MDt0aGlzLmR5bmFtaWM9ITE7dGhpcy51cGRhdGVSYW5nZT17b2Zmc2V0OjAsY291bnQ6LTF9O1xuICAgIHRoaXMub25VcGxvYWRDYWxsYmFjaz1mdW5jdGlvbigpe307dGhpcy52ZXJzaW9uPTB9ZnVuY3Rpb24gemUoYSxiLGMpe21jLmNhbGwodGhpcyxhLGIpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1jfHwxfWZ1bmN0aW9uIEFlKGEsYixjKXtNLmNhbGwodGhpcyxhLGIpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1jfHwxfWZ1bmN0aW9uIHBmKGEsYixjLGQpe3RoaXMucmF5PW5ldyBzYihhLGIpO3RoaXMubmVhcj1jfHwwO3RoaXMuZmFyPWR8fEluZmluaXR5O3RoaXMucGFyYW1zPXtNZXNoOnt9LExpbmU6e30sTE9EOnt9LFBvaW50czp7dGhyZXNob2xkOjF9LFNwcml0ZTp7fX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcy5wYXJhbXMse1BvaW50Q2xvdWQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlJheWNhc3RlcjogcGFyYW1zLlBvaW50Q2xvdWQgaGFzIGJlZW4gcmVuYW1lZCB0byBwYXJhbXMuUG9pbnRzLlwiKTtyZXR1cm4gdGhpcy5Qb2ludHN9fX0pfWZ1bmN0aW9uIHFmKGEsXG4gICAgYil7cmV0dXJuIGEuZGlzdGFuY2UtYi5kaXN0YW5jZX1mdW5jdGlvbiBCZShhLGIsYyxkKXtpZighMSE9PWEudmlzaWJsZSYmKGEucmF5Y2FzdChiLGMpLCEwPT09ZCkpe2E9YS5jaGlsZHJlbjtkPTA7Zm9yKHZhciBlPWEubGVuZ3RoO2Q8ZTtkKyspQmUoYVtkXSxiLGMsITApfX1mdW5jdGlvbiByZihhKXt0aGlzLmF1dG9TdGFydD12b2lkIDAhPT1hP2E6ITA7dGhpcy5lbGFwc2VkVGltZT10aGlzLm9sZFRpbWU9dGhpcy5zdGFydFRpbWU9MDt0aGlzLnJ1bm5pbmc9ITF9ZnVuY3Rpb24gc2YoYSxiLGMpe3RoaXMucmFkaXVzPXZvaWQgMCE9PWE/YToxO3RoaXMucGhpPXZvaWQgMCE9PWI/YjowO3RoaXMudGhldGE9dm9pZCAwIT09Yz9jOjA7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gdGYoYSxiLGMpe3RoaXMucmFkaXVzPXZvaWQgMCE9PWE/YToxO3RoaXMudGhldGE9dm9pZCAwIT09Yj9iOjA7dGhpcy55PXZvaWQgMCE9PWM/YzowO3JldHVybiB0aGlzfWZ1bmN0aW9uIGdkKGEpe3guY2FsbCh0aGlzKTtcbiAgICB0aGlzLm1hdGVyaWFsPWE7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXt9fWZ1bmN0aW9uIGhkKGEsYixjLGQpe3RoaXMub2JqZWN0PWE7dGhpcy5zaXplPXZvaWQgMCE9PWI/YjoxO2E9dm9pZCAwIT09Yz9jOjE2NzExNjgwO2Q9dm9pZCAwIT09ZD9kOjE7Yj0wOyhjPXRoaXMub2JqZWN0Lmdlb21ldHJ5KSYmYy5pc0dlb21ldHJ5P2I9MypjLmZhY2VzLmxlbmd0aDpjJiZjLmlzQnVmZmVyR2VvbWV0cnkmJihiPWMuYXR0cmlidXRlcy5ub3JtYWwuY291bnQpO2M9bmV3IEU7Yj1uZXcgQig2KmIsMyk7Yy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLGIpO1guY2FsbCh0aGlzLGMsbmV3IFcoe2NvbG9yOmEsbGluZXdpZHRoOmR9KSk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMudXBkYXRlKCl9ZnVuY3Rpb24gbmMoYSxiKXt4LmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1cbiAgICAhMTt0aGlzLmNvbG9yPWI7YT1uZXcgRTtiPVswLDAsMCwwLDAsMSwwLDAsMCwxLDAsMSwwLDAsMCwtMSwwLDEsMCwwLDAsMCwxLDEsMCwwLDAsMCwtMSwxXTtmb3IodmFyIGM9MCxkPTE7MzI+YztjKyssZCsrKXt2YXIgZT1jLzMyKk1hdGguUEkqMixmPWQvMzIqTWF0aC5QSSoyO2IucHVzaChNYXRoLmNvcyhlKSxNYXRoLnNpbihlKSwxLE1hdGguY29zKGYpLE1hdGguc2luKGYpLDEpfWEuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihiLDMpKTtiPW5ldyBXKHtmb2c6ITF9KTt0aGlzLmNvbmU9bmV3IFgoYSxiKTt0aGlzLmFkZCh0aGlzLmNvbmUpO3RoaXMudXBkYXRlKCl9ZnVuY3Rpb24gdWYoYSl7dmFyIGI9W107YSYmYS5pc0JvbmUmJmIucHVzaChhKTtmb3IodmFyIGM9MDtjPGEuY2hpbGRyZW4ubGVuZ3RoO2MrKyliLnB1c2guYXBwbHkoYix1ZihhLmNoaWxkcmVuW2NdKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gb2MoYSl7Zm9yKHZhciBiPXVmKGEpLGM9bmV3IEUsZD1bXSxlPVxuICAgIFtdLGY9bmV3IEgoMCwwLDEpLGc9bmV3IEgoMCwxLDApLGg9MDtoPGIubGVuZ3RoO2grKyl7dmFyIGs9YltoXTtrLnBhcmVudCYmay5wYXJlbnQuaXNCb25lJiYoZC5wdXNoKDAsMCwwKSxkLnB1c2goMCwwLDApLGUucHVzaChmLnIsZi5nLGYuYiksZS5wdXNoKGcucixnLmcsZy5iKSl9Yy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGQsMykpO2MuYWRkQXR0cmlidXRlKFwiY29sb3JcIixuZXcgQihlLDMpKTtkPW5ldyBXKHt2ZXJ0ZXhDb2xvcnM6MixkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSx0cmFuc3BhcmVudDohMH0pO1guY2FsbCh0aGlzLGMsZCk7dGhpcy5yb290PWE7dGhpcy5ib25lcz1iO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExfWZ1bmN0aW9uIHBjKGEsYixjKXt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMuY29sb3I9YzthPW5ldyB3YihiLDQsMik7Yj1uZXcgQWEoe3dpcmVmcmFtZTohMCxcbiAgICBmb2c6ITF9KTtyYS5jYWxsKHRoaXMsYSxiKTt0aGlzLm1hdHJpeD10aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIHFjKGEsYil7eC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXg9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5jb2xvcj1iO2E9bmV3IFcoe2ZvZzohMX0pO2I9bmV3IEU7Yi5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBNKG5ldyBGbG9hdDMyQXJyYXkoMTUpLDMpKTt0aGlzLmxpbmU9bmV3IHNhKGIsYSk7dGhpcy5hZGQodGhpcy5saW5lKTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIHJjKGEsYixjKXt4LmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1cbiAgICAhMTt0aGlzLmNvbG9yPWM7YT1uZXcgdWIoYik7YS5yb3RhdGVZKC41Kk1hdGguUEkpO3RoaXMubWF0ZXJpYWw9bmV3IEFhKHt3aXJlZnJhbWU6ITAsZm9nOiExfSk7dm9pZCAwPT09dGhpcy5jb2xvciYmKHRoaXMubWF0ZXJpYWwudmVydGV4Q29sb3JzPTIpO2I9YS5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKTtiPW5ldyBGbG9hdDMyQXJyYXkoMypiLmNvdW50KTthLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IE0oYiwzKSk7dGhpcy5hZGQobmV3IHJhKGEsdGhpcy5tYXRlcmlhbCkpO3RoaXMudXBkYXRlKCl9ZnVuY3Rpb24gaWQoYSxiLGMsZCl7YT1hfHwxMDtiPWJ8fDEwO2M9bmV3IEgodm9pZCAwIT09Yz9jOjQ0NzM5MjQpO2Q9bmV3IEgodm9pZCAwIT09ZD9kOjg5NDc4NDgpO3ZhciBlPWIvMixmPWEvYixnPWEvMjthPVtdO2Zvcih2YXIgaD1bXSxrPTAsbT0wLHE9LWc7azw9YjtrKysscSs9Zil7YS5wdXNoKC1nLDAscSxnLDAscSk7YS5wdXNoKHEsMCwtZyxxLDAsZyk7dmFyIG49XG4gICAgaz09PWU/YzpkO24udG9BcnJheShoLG0pO20rPTM7bi50b0FycmF5KGgsbSk7bSs9MztuLnRvQXJyYXkoaCxtKTttKz0zO24udG9BcnJheShoLG0pO20rPTN9Yj1uZXcgRTtiLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoYSwzKSk7Yi5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBCKGgsMykpO2M9bmV3IFcoe3ZlcnRleENvbG9yczoyfSk7WC5jYWxsKHRoaXMsYixjKX1mdW5jdGlvbiBSZChhLGIsYyxkLGUsZil7YT1hfHwxMDtiPWJ8fDE2O2M9Y3x8ODtkPWR8fDY0O2U9bmV3IEgodm9pZCAwIT09ZT9lOjQ0NzM5MjQpO2Y9bmV3IEgodm9pZCAwIT09Zj9mOjg5NDc4NDgpO3ZhciBnPVtdLGg9W10saztmb3Ioaz0wO2s8PWI7aysrKXt2YXIgbT1rL2IqMipNYXRoLlBJO3ZhciBxPU1hdGguc2luKG0pKmE7bT1NYXRoLmNvcyhtKSphO2cucHVzaCgwLDAsMCk7Zy5wdXNoKHEsMCxtKTt2YXIgbj1rJjE/ZTpmO2gucHVzaChuLnIsbi5nLG4uYik7aC5wdXNoKG4ucixuLmcsbi5iKX1mb3Ioaz1cbiAgICAwO2s8PWM7aysrKXtuPWsmMT9lOmY7dmFyIGw9YS1hL2Mqaztmb3IoYj0wO2I8ZDtiKyspbT1iL2QqMipNYXRoLlBJLHE9TWF0aC5zaW4obSkqbCxtPU1hdGguY29zKG0pKmwsZy5wdXNoKHEsMCxtKSxoLnB1c2gobi5yLG4uZyxuLmIpLG09KGIrMSkvZCoyKk1hdGguUEkscT1NYXRoLnNpbihtKSpsLG09TWF0aC5jb3MobSkqbCxnLnB1c2gocSwwLG0pLGgucHVzaChuLnIsbi5nLG4uYil9YT1uZXcgRTthLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoZywzKSk7YS5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBCKGgsMykpO2c9bmV3IFcoe3ZlcnRleENvbG9yczoyfSk7WC5jYWxsKHRoaXMsYSxnKX1mdW5jdGlvbiBqZChhLGIsYyxkKXt0aGlzLm9iamVjdD1hO3RoaXMuc2l6ZT12b2lkIDAhPT1iP2I6MTthPXZvaWQgMCE9PWM/YzoxNjc3Njk2MDtkPXZvaWQgMCE9PWQ/ZDoxO2I9MDsoYz10aGlzLm9iamVjdC5nZW9tZXRyeSkmJmMuaXNHZW9tZXRyeT9iPWMuZmFjZXMubGVuZ3RoOlxuICAgIGNvbnNvbGUud2FybihcIlRIUkVFLkZhY2VOb3JtYWxzSGVscGVyOiBvbmx5IFRIUkVFLkdlb21ldHJ5IGlzIHN1cHBvcnRlZC4gVXNlIFRIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXIsIGluc3RlYWQuXCIpO2M9bmV3IEU7Yj1uZXcgQig2KmIsMyk7Yy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLGIpO1guY2FsbCh0aGlzLGMsbmV3IFcoe2NvbG9yOmEsbGluZXdpZHRoOmR9KSk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMudXBkYXRlKCl9ZnVuY3Rpb24gc2MoYSxiLGMpe3guY2FsbCh0aGlzKTt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuY29sb3I9Yzt2b2lkIDA9PT1iJiYoYj0xKTthPW5ldyBFO2EuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihbLWIsYiwwLGIsYiwwLGIsLWIsMCwtYiwtYiwwLC1iLGIsMF0sMykpO2I9bmV3IFcoe2ZvZzohMX0pO1xuICAgIHRoaXMubGlnaHRQbGFuZT1uZXcgc2EoYSxiKTt0aGlzLmFkZCh0aGlzLmxpZ2h0UGxhbmUpO2E9bmV3IEU7YS5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKFswLDAsMCwwLDAsMV0sMykpO3RoaXMudGFyZ2V0TGluZT1uZXcgc2EoYSxiKTt0aGlzLmFkZCh0aGlzLnRhcmdldExpbmUpO3RoaXMudXBkYXRlKCl9ZnVuY3Rpb24ga2QoYSl7ZnVuY3Rpb24gYihhLGIsZCl7YyhhLGQpO2MoYixkKX1mdW5jdGlvbiBjKGEsYil7Zi5wdXNoKDAsMCwwKTtnLnB1c2goYi5yLGIuZyxiLmIpO3ZvaWQgMD09PWhbYV0mJihoW2FdPVtdKTtoW2FdLnB1c2goZi5sZW5ndGgvMy0xKX12YXIgZD1uZXcgRSxlPW5ldyBXKHtjb2xvcjoxNjc3NzIxNSx2ZXJ0ZXhDb2xvcnM6MX0pLGY9W10sZz1bXSxoPXt9LGs9bmV3IEgoMTY3NTUyMDApLG09bmV3IEgoMTY3MTE2ODApLHE9bmV3IEgoNDM3NzUpLGw9bmV3IEgoMTY3NzcyMTUpLHU9bmV3IEgoMzM1NTQ0Myk7YihcIm4xXCIsXCJuMlwiLGspO2IoXCJuMlwiLFxuICAgIFwibjRcIixrKTtiKFwibjRcIixcIm4zXCIsayk7YihcIm4zXCIsXCJuMVwiLGspO2IoXCJmMVwiLFwiZjJcIixrKTtiKFwiZjJcIixcImY0XCIsayk7YihcImY0XCIsXCJmM1wiLGspO2IoXCJmM1wiLFwiZjFcIixrKTtiKFwibjFcIixcImYxXCIsayk7YihcIm4yXCIsXCJmMlwiLGspO2IoXCJuM1wiLFwiZjNcIixrKTtiKFwibjRcIixcImY0XCIsayk7YihcInBcIixcIm4xXCIsbSk7YihcInBcIixcIm4yXCIsbSk7YihcInBcIixcIm4zXCIsbSk7YihcInBcIixcIm40XCIsbSk7YihcInUxXCIsXCJ1MlwiLHEpO2IoXCJ1MlwiLFwidTNcIixxKTtiKFwidTNcIixcInUxXCIscSk7YihcImNcIixcInRcIixsKTtiKFwicFwiLFwiY1wiLHUpO2IoXCJjbjFcIixcImNuMlwiLHUpO2IoXCJjbjNcIixcImNuNFwiLHUpO2IoXCJjZjFcIixcImNmMlwiLHUpO2IoXCJjZjNcIixcImNmNFwiLHUpO2QuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihmLDMpKTtkLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IEIoZywzKSk7WC5jYWxsKHRoaXMsZCxlKTt0aGlzLmNhbWVyYT1hO3RoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgmJnRoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICB0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLnBvaW50TWFwPWg7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBHYihhLGIpe3RoaXMub2JqZWN0PWE7dm9pZCAwPT09YiYmKGI9MTY3NzY5NjApO2E9bmV3IFVpbnQxNkFycmF5KFswLDEsMSwyLDIsMywzLDAsNCw1LDUsNiw2LDcsNyw0LDAsNCwxLDUsMiw2LDMsN10pO3ZhciBjPW5ldyBGbG9hdDMyQXJyYXkoMjQpLGQ9bmV3IEU7ZC5zZXRJbmRleChuZXcgTShhLDEpKTtkLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE0oYywzKSk7WC5jYWxsKHRoaXMsZCxuZXcgVyh7Y29sb3I6Yn0pKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBsZChhLGIpe3RoaXMudHlwZT1cIkJveDNIZWxwZXJcIjt0aGlzLmJveD1hO2E9dm9pZCAwIT09Yj9iOjE2Nzc2OTYwO2I9bmV3IFVpbnQxNkFycmF5KFswLDEsMSwyLDIsMywzLDAsNCw1LDUsNiw2LDcsNyw0LDAsXG4gICAgNCwxLDUsMiw2LDMsN10pO3ZhciBjPW5ldyBFO2Muc2V0SW5kZXgobmV3IE0oYiwxKSk7Yy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKFsxLDEsMSwtMSwxLDEsLTEsLTEsMSwxLC0xLDEsMSwxLC0xLC0xLDEsLTEsLTEsLTEsLTEsMSwtMSwtMV0sMykpO1guY2FsbCh0aGlzLGMsbmV3IFcoe2NvbG9yOmF9KSk7dGhpcy5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKX1mdW5jdGlvbiBtZChhLGIsYyl7dGhpcy50eXBlPVwiUGxhbmVIZWxwZXJcIjt0aGlzLnBsYW5lPWE7dGhpcy5zaXplPXZvaWQgMD09PWI/MTpiO2E9dm9pZCAwIT09Yz9jOjE2Nzc2OTYwO2I9bmV3IEU7Yi5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKFsxLC0xLDEsLTEsMSwxLC0xLC0xLDEsMSwxLDEsLTEsMSwxLC0xLC0xLDEsMSwtMSwxLDEsMSwxLDAsMCwxLDAsMCwwXSwzKSk7Yi5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtzYS5jYWxsKHRoaXMsYixuZXcgVyh7Y29sb3I6YX0pKTtiPW5ldyBFO1xuICAgIGIuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihbMSwxLDEsLTEsMSwxLC0xLC0xLDEsMSwxLDEsLTEsLTEsMSwxLC0xLDFdLDMpKTtiLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3RoaXMuYWRkKG5ldyByYShiLG5ldyBBYSh7Y29sb3I6YSxvcGFjaXR5Oi4yLHRyYW5zcGFyZW50OiEwLGRlcHRoV3JpdGU6ITF9KSkpfWZ1bmN0aW9uIEhiKGEsYixjLGQsZSxmKXt4LmNhbGwodGhpcyk7dm9pZCAwPT09ZCYmKGQ9MTY3NzY5NjApO3ZvaWQgMD09PWMmJihjPTEpO3ZvaWQgMD09PWUmJihlPS4yKmMpO3ZvaWQgMD09PWYmJihmPS4yKmUpO3ZvaWQgMD09PVNkJiYoU2Q9bmV3IEUsU2QuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihbMCwwLDAsMCwxLDBdLDMpKSxDZT1uZXcgYWIoMCwuNSwxLDUsMSksQ2UudHJhbnNsYXRlKDAsLS41LDApKTt0aGlzLnBvc2l0aW9uLmNvcHkoYik7dGhpcy5saW5lPW5ldyBzYShTZCxuZXcgVyh7Y29sb3I6ZH0pKTt0aGlzLmxpbmUubWF0cml4QXV0b1VwZGF0ZT1cbiAgICAhMTt0aGlzLmFkZCh0aGlzLmxpbmUpO3RoaXMuY29uZT1uZXcgcmEoQ2UsbmV3IEFhKHtjb2xvcjpkfSkpO3RoaXMuY29uZS5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuYWRkKHRoaXMuY29uZSk7dGhpcy5zZXREaXJlY3Rpb24oYSk7dGhpcy5zZXRMZW5ndGgoYyxlLGYpfWZ1bmN0aW9uIG5kKGEpe2E9YXx8MTt2YXIgYj1bMCwwLDAsYSwwLDAsMCwwLDAsMCxhLDAsMCwwLDAsMCwwLGFdO2E9bmV3IEU7YS5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGIsMykpO2EuYWRkQXR0cmlidXRlKFwiY29sb3JcIixuZXcgQihbMSwwLDAsMSwuNiwwLDAsMSwwLC42LDEsMCwwLDAsMSwwLC42LDFdLDMpKTtiPW5ldyBXKHt2ZXJ0ZXhDb2xvcnM6Mn0pO1guY2FsbCh0aGlzLGEsYil9ZnVuY3Rpb24gdmYoYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ2xvc2VkU3BsaW5lQ3VydmUzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzIGluc3RlYWQuXCIpO2NhLmNhbGwodGhpcyxcbiAgICBhKTt0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCI7dGhpcy5jbG9zZWQ9ITB9ZnVuY3Rpb24gd2YoYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuU3BsaW5lQ3VydmUzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzIGluc3RlYWQuXCIpO2NhLmNhbGwodGhpcyxhKTt0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCJ9ZnVuY3Rpb24gRGUoYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuU3BsaW5lIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzIGluc3RlYWQuXCIpO2NhLmNhbGwodGhpcyxhKTt0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCJ9dm9pZCAwPT09TnVtYmVyLkVQU0lMT04mJihOdW1iZXIuRVBTSUxPTj1NYXRoLnBvdygyLC01MikpO3ZvaWQgMD09PU51bWJlci5pc0ludGVnZXImJihOdW1iZXIuaXNJbnRlZ2VyPWZ1bmN0aW9uKGEpe3JldHVyblwibnVtYmVyXCI9PT10eXBlb2YgYSYmaXNGaW5pdGUoYSkmJk1hdGguZmxvb3IoYSk9PT1hfSk7dm9pZCAwPT09XG4gICAgTWF0aC5zaWduJiYoTWF0aC5zaWduPWZ1bmN0aW9uKGEpe3JldHVybiAwPmE/LTE6MDxhPzE6K2F9KTshMT09PVwibmFtZVwiaW4gRnVuY3Rpb24ucHJvdG90eXBlJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwibmFtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpLm1hdGNoKC9eXFxzKmZ1bmN0aW9uXFxzKihbXlxcKFxcc10qKS8pWzFdfX0pO3ZvaWQgMD09PU9iamVjdC5hc3NpZ24mJmZ1bmN0aW9uKCl7T2JqZWN0LmFzc2lnbj1mdW5jdGlvbihhKXtpZih2b2lkIDA9PT1hfHxudWxsPT09YSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO2Zvcih2YXIgYj1PYmplY3QoYSksYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe3ZhciBkPWFyZ3VtZW50c1tjXTtpZih2b2lkIDAhPT1kJiZudWxsIT09ZClmb3IodmFyIGUgaW4gZClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxcbiAgICBlKSYmKGJbZV09ZFtlXSl9cmV0dXJuIGJ9fSgpO09iamVjdC5hc3NpZ24oemEucHJvdG90eXBlLHthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09dGhpcy5fbGlzdGVuZXJzJiYodGhpcy5fbGlzdGVuZXJzPXt9KTt2YXIgYz10aGlzLl9saXN0ZW5lcnM7dm9pZCAwPT09Y1thXSYmKGNbYV09W10pOy0xPT09Y1thXS5pbmRleE9mKGIpJiZjW2FdLnB1c2goYil9LGhhc0V2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMpcmV0dXJuITE7dmFyIGM9dGhpcy5fbGlzdGVuZXJzO3JldHVybiB2b2lkIDAhPT1jW2FdJiYtMSE9PWNbYV0uaW5kZXhPZihiKX0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe3ZvaWQgMCE9PXRoaXMuX2xpc3RlbmVycyYmKGE9dGhpcy5fbGlzdGVuZXJzW2FdLHZvaWQgMCE9PWEmJihiPWEuaW5kZXhPZihiKSwtMSE9PWImJmEuc3BsaWNlKGIsMSkpKX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXtpZih2b2lkIDAhPT1cbiAgICB0aGlzLl9saXN0ZW5lcnMpe3ZhciBiPXRoaXMuX2xpc3RlbmVyc1thLnR5cGVdO2lmKHZvaWQgMCE9PWIpe2EudGFyZ2V0PXRoaXM7Zm9yKHZhciBiPWIuc2xpY2UoMCksYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyliW2NdLmNhbGwodGhpcyxhKX19fX0pO3ZhciBRPXtERUcyUkFEOk1hdGguUEkvMTgwLFJBRDJERUc6MTgwL01hdGguUEksZ2VuZXJhdGVVVUlEOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MDsyNTY+YjtiKyspYVtiXT0oMTY+Yj9cIjBcIjpcIlwiKStiLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO3JldHVybiBmdW5jdGlvbigpe3ZhciBiPTQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKXwwLGQ9NDI5NDk2NzI5NSpNYXRoLnJhbmRvbSgpfDAsZT00Mjk0OTY3Mjk1Kk1hdGgucmFuZG9tKCl8MCxmPTQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKXwwO3JldHVybiBhW2ImMjU1XSthW2I+PjgmMjU1XSthW2I+PjE2JjI1NV0rYVtiPj4yNCYyNTVdK1wiLVwiK2FbZCYyNTVdK2FbZD4+OCZcbiAgICAyNTVdK1wiLVwiK2FbZD4+MTYmMTV8NjRdK2FbZD4+MjQmMjU1XStcIi1cIithW2UmNjN8MTI4XSthW2U+PjgmMjU1XStcIi1cIithW2U+PjE2JjI1NV0rYVtlPj4yNCYyNTVdK2FbZiYyNTVdK2FbZj4+OCYyNTVdK2FbZj4+MTYmMjU1XSthW2Y+PjI0JjI1NV19fSgpLGNsYW1wOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTWF0aC5tYXgoYixNYXRoLm1pbihjLGEpKX0sZXVjbGlkZWFuTW9kdWxvOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGElYitiKSVifSxtYXBMaW5lYXI6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCsoYS1iKSooZS1kKS8oYy1iKX0sbGVycDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuKDEtYykqYStjKmJ9LHNtb290aHN0ZXA6ZnVuY3Rpb24oYSxiLGMpe2lmKGE8PWIpcmV0dXJuIDA7aWYoYT49YylyZXR1cm4gMTthPShhLWIpLyhjLWIpO3JldHVybiBhKmEqKDMtMiphKX0sc21vb3RoZXJzdGVwOmZ1bmN0aW9uKGEsYixjKXtpZihhPD1iKXJldHVybiAwO2lmKGE+PWMpcmV0dXJuIDE7XG4gICAgYT0oYS1iKS8oYy1iKTtyZXR1cm4gYSphKmEqKGEqKDYqYS0xNSkrMTApfSxyYW5kSW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihiLWErMSkpfSxyYW5kRmxvYXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStNYXRoLnJhbmRvbSgpKihiLWEpfSxyYW5kRmxvYXRTcHJlYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEqKC41LU1hdGgucmFuZG9tKCkpfSxkZWdUb1JhZDpmdW5jdGlvbihhKXtyZXR1cm4gYSpRLkRFRzJSQUR9LHJhZFRvRGVnOmZ1bmN0aW9uKGEpe3JldHVybiBhKlEuUkFEMkRFR30saXNQb3dlck9mVHdvOmZ1bmN0aW9uKGEpe3JldHVybiAwPT09KGEmYS0xKSYmMCE9PWF9LGNlaWxQb3dlck9mVHdvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnBvdygyLE1hdGguY2VpbChNYXRoLmxvZyhhKS9NYXRoLkxOMikpfSxmbG9vclBvd2VyT2ZUd286ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KDIsTWF0aC5mbG9vcihNYXRoLmxvZyhhKS9cbiAgICBNYXRoLkxOMikpfX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRC5wcm90b3R5cGUse3dpZHRoOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54fSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy54PWF9fSxoZWlnaHQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnl9LHNldDpmdW5jdGlvbihhKXt0aGlzLnk9YX19fSk7T2JqZWN0LmFzc2lnbihELnByb3RvdHlwZSx7aXNWZWN0b3IyOiEwLHNldDpmdW5jdGlvbihhLGIpe3RoaXMueD1hO3RoaXMueT1iO3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy55PXRoaXMueD1hO3JldHVybiB0aGlzfSxzZXRYOmZ1bmN0aW9uKGEpe3RoaXMueD1hO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEpe3RoaXMueT1hO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYSl7Y2FzZSAwOnRoaXMueD1iO2JyZWFrO2Nhc2UgMTp0aGlzLnk9YjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIitcbiAgICBhKTt9cmV0dXJuIHRoaXN9LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55O3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyhhLGIpO3RoaXMueCs9YS54O3RoaXMueSs9YS55O3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kz1hO3RoaXMueSs9YTtyZXR1cm4gdGhpc30sXG4gICAgYWRkVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngrYi54O3RoaXMueT1hLnkrYi55O3JldHVybiB0aGlzfSxhZGRTY2FsZWRWZWN0b3I6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPWEueCpiO3RoaXMueSs9YS55KmI7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKGEsYik7dGhpcy54LT1hLng7dGhpcy55LT1hLnk7cmV0dXJuIHRoaXN9LHN1YlNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngtPWE7dGhpcy55LT1hO3JldHVybiB0aGlzfSxzdWJWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueC1iLng7dGhpcy55PWEueS1iLnk7cmV0dXJuIHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGEpe3RoaXMueCo9YS54O3RoaXMueSo9XG4gICAgYS55O3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngqPWE7dGhpcy55Kj1hO3JldHVybiB0aGlzfSxkaXZpZGU6ZnVuY3Rpb24oYSl7dGhpcy54Lz1hLng7dGhpcy55Lz1hLnk7cmV0dXJuIHRoaXN9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL2EpfSxhcHBseU1hdHJpeDM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55O2E9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbM10qYythWzZdO3RoaXMueT1hWzFdKmIrYVs0XSpjK2FbN107cmV0dXJuIHRoaXN9LG1pbjpmdW5jdGlvbihhKXt0aGlzLng9TWF0aC5taW4odGhpcy54LGEueCk7dGhpcy55PU1hdGgubWluKHRoaXMueSxhLnkpO3JldHVybiB0aGlzfSxtYXg6ZnVuY3Rpb24oYSl7dGhpcy54PU1hdGgubWF4KHRoaXMueCxhLngpO3RoaXMueT1NYXRoLm1heCh0aGlzLnksYS55KTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oYSxcbiAgICBiKXt0aGlzLng9TWF0aC5tYXgoYS54LE1hdGgubWluKGIueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgoYS55LE1hdGgubWluKGIueSx0aGlzLnkpKTtyZXR1cm4gdGhpc30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgRCxiPW5ldyBEO3JldHVybiBmdW5jdGlvbihjLGQpe2Euc2V0KGMsYyk7Yi5zZXQoZCxkKTtyZXR1cm4gdGhpcy5jbGFtcChhLGIpfX0oKSxjbGFtcExlbmd0aDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKGN8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KGEsTWF0aC5taW4oYixjKSkpfSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTtyZXR1cm4gdGhpc30sY2VpbDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmNlaWwodGhpcy54KTt0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSk7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PVxuICAgIE1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3JldHVybiB0aGlzfSxyb3VuZFRvWmVybzpmdW5jdGlvbigpe3RoaXMueD0wPnRoaXMueD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PTA+dGhpcy55P01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy54PS10aGlzLng7dGhpcy55PS10aGlzLnk7cmV0dXJuIHRoaXN9LGRvdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy54KmEueCt0aGlzLnkqYS55fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnl9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55KX0sbWFuaGF0dGFuTGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCl8fFxuICAgIDEpfSxhbmdsZTpmdW5jdGlvbigpe3ZhciBhPU1hdGguYXRhbjIodGhpcy55LHRoaXMueCk7MD5hJiYoYSs9MipNYXRoLlBJKTtyZXR1cm4gYX0sZGlzdGFuY2VUbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQoYSkpfSxkaXN0YW5jZVRvU3F1YXJlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngtYS54O2E9dGhpcy55LWEueTtyZXR1cm4gYipiK2EqYX0sbWFuaGF0dGFuRGlzdGFuY2VUbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5hYnModGhpcy54LWEueCkrTWF0aC5hYnModGhpcy55LWEueSl9LHNldExlbmd0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihhKX0sbGVycDpmdW5jdGlvbihhLGIpe3RoaXMueCs9KGEueC10aGlzLngpKmI7dGhpcy55Kz0oYS55LXRoaXMueSkqYjtyZXR1cm4gdGhpc30sbGVycFZlY3RvcnM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLnN1YlZlY3RvcnMoYixcbiAgICBhKS5tdWx0aXBseVNjYWxhcihjKS5hZGQoYSl9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS54PT09dGhpcy54JiZhLnk9PT10aGlzLnl9LGZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMueD1hW2JdO3RoaXMueT1hW2IrMV07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLng7YVtiKzFdPXRoaXMueTtyZXR1cm4gYX0sZnJvbUJ1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7dm9pZCAwIT09YyYmY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogb2Zmc2V0IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKTt0aGlzLng9YS5nZXRYKGIpO3RoaXMueT1hLmdldFkoYik7cmV0dXJuIHRoaXN9LHJvdGF0ZUFyb3VuZDpmdW5jdGlvbihhLGIpe3ZhciBjPU1hdGguY29zKGIpO2I9TWF0aC5zaW4oYik7dmFyIGQ9XG4gICAgdGhpcy54LWEueCxlPXRoaXMueS1hLnk7dGhpcy54PWQqYy1lKmIrYS54O3RoaXMueT1kKmIrZSpjK2EueTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKE8ucHJvdG90eXBlLHtpc01hdHJpeDQ6ITAsc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrLG0scSxsLHUscix0LHApe3ZhciBuPXRoaXMuZWxlbWVudHM7blswXT1hO25bNF09YjtuWzhdPWM7blsxMl09ZDtuWzFdPWU7bls1XT1mO25bOV09ZztuWzEzXT1oO25bMl09aztuWzZdPW07blsxMF09cTtuWzE0XT1sO25bM109dTtuWzddPXI7blsxMV09dDtuWzE1XT1wO3JldHVybiB0aGlzfSxpZGVudGl0eTpmdW5jdGlvbigpe3RoaXMuc2V0KDEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgTykuZnJvbUFycmF5KHRoaXMuZWxlbWVudHMpfSxjb3B5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YT1hLmVsZW1lbnRzO2JbMF09XG4gICAgYVswXTtiWzFdPWFbMV07YlsyXT1hWzJdO2JbM109YVszXTtiWzRdPWFbNF07Yls1XT1hWzVdO2JbNl09YVs2XTtiWzddPWFbN107Yls4XT1hWzhdO2JbOV09YVs5XTtiWzEwXT1hWzEwXTtiWzExXT1hWzExXTtiWzEyXT1hWzEyXTtiWzEzXT1hWzEzXTtiWzE0XT1hWzE0XTtiWzE1XT1hWzE1XTtyZXR1cm4gdGhpc30sY29weVBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YT1hLmVsZW1lbnRzO2JbMTJdPWFbMTJdO2JbMTNdPWFbMTNdO2JbMTRdPWFbMTRdO3JldHVybiB0aGlzfSxleHRyYWN0QmFzaXM6ZnVuY3Rpb24oYSxiLGMpe2Euc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDApO2Iuc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDEpO2Muc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDIpO3JldHVybiB0aGlzfSxtYWtlQmFzaXM6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0KGEueCxiLngsYy54LDAsYS55LGIueSxjLnksMCxhLnosYi56LGMueiwwLDAsMCwwLFxuICAgIDEpO3JldHVybiB0aGlzfSxleHRyYWN0Um90YXRpb246ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5lbGVtZW50cyxkPWIuZWxlbWVudHMsZT0xL2Euc2V0RnJvbU1hdHJpeENvbHVtbihiLDApLmxlbmd0aCgpLGY9MS9hLnNldEZyb21NYXRyaXhDb2x1bW4oYiwxKS5sZW5ndGgoKTtiPTEvYS5zZXRGcm9tTWF0cml4Q29sdW1uKGIsMikubGVuZ3RoKCk7Y1swXT1kWzBdKmU7Y1sxXT1kWzFdKmU7Y1syXT1kWzJdKmU7Y1s0XT1kWzRdKmY7Y1s1XT1kWzVdKmY7Y1s2XT1kWzZdKmY7Y1s4XT1kWzhdKmI7Y1s5XT1kWzldKmI7Y1sxMF09ZFsxMF0qYjtyZXR1cm4gdGhpc319KCksbWFrZVJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKGEpe2EmJmEuaXNFdWxlcnx8Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5tYWtlUm90YXRpb25Gcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuXCIpO1xuICAgIHZhciBiPXRoaXMuZWxlbWVudHMsYz1hLngsZD1hLnksZT1hLnosZj1NYXRoLmNvcyhjKSxjPU1hdGguc2luKGMpLGc9TWF0aC5jb3MoZCksZD1NYXRoLnNpbihkKSxoPU1hdGguY29zKGUpLGU9TWF0aC5zaW4oZSk7aWYoXCJYWVpcIj09PWEub3JkZXIpe3ZhciBrPWYqaDt2YXIgbT1mKmU7dmFyIHE9YypoO2E9YyplO2JbMF09ZypoO2JbNF09LWcqZTtiWzhdPWQ7YlsxXT1tK3EqZDtiWzVdPWstYSpkO2JbOV09LWMqZztiWzJdPWEtaypkO2JbNl09cSttKmQ7YlsxMF09ZipnfWVsc2VcIllYWlwiPT09YS5vcmRlcj8oaz1nKmgsbT1nKmUscT1kKmgsYT1kKmUsYlswXT1rK2EqYyxiWzRdPXEqYy1tLGJbOF09ZipkLGJbMV09ZiplLGJbNV09ZipoLGJbOV09LWMsYlsyXT1tKmMtcSxiWzZdPWEraypjLGJbMTBdPWYqZyk6XCJaWFlcIj09PWEub3JkZXI/KGs9ZypoLG09ZyplLHE9ZCpoLGE9ZCplLGJbMF09ay1hKmMsYls0XT0tZiplLGJbOF09cSttKmMsYlsxXT1tK3EqYyxiWzVdPWYqaCxiWzldPVxuICAgIGEtaypjLGJbMl09LWYqZCxiWzZdPWMsYlsxMF09ZipnKTpcIlpZWFwiPT09YS5vcmRlcj8oaz1mKmgsbT1mKmUscT1jKmgsYT1jKmUsYlswXT1nKmgsYls0XT1xKmQtbSxiWzhdPWsqZCthLGJbMV09ZyplLGJbNV09YSpkK2ssYls5XT1tKmQtcSxiWzJdPS1kLGJbNl09YypnLGJbMTBdPWYqZyk6XCJZWlhcIj09PWEub3JkZXI/KGs9ZipnLG09ZipkLHE9YypnLGE9YypkLGJbMF09ZypoLGJbNF09YS1rKmUsYls4XT1xKmUrbSxiWzFdPWUsYls1XT1mKmgsYls5XT0tYypoLGJbMl09LWQqaCxiWzZdPW0qZStxLGJbMTBdPWstYSplKTpcIlhaWVwiPT09YS5vcmRlciYmKGs9ZipnLG09ZipkLHE9YypnLGE9YypkLGJbMF09ZypoLGJbNF09LWUsYls4XT1kKmgsYlsxXT1rKmUrYSxiWzVdPWYqaCxiWzldPW0qZS1xLGJbMl09cSplLW0sYls2XT1jKmgsYlsxMF09YSplK2spO2JbM109MDtiWzddPTA7YlsxMV09MDtiWzEyXT0wO2JbMTNdPTA7YlsxNF09MDtiWzE1XT0xO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbihhKXt2YXIgYj1cbiAgICB0aGlzLmVsZW1lbnRzLGM9YS5feCxkPWEuX3ksZT1hLl96LGY9YS5fdyxnPWMrYyxoPWQrZCxrPWUrZTthPWMqZzt2YXIgbT1jKmgsYz1jKmsscT1kKmgsZD1kKmssZT1lKmssZz1mKmcsaD1mKmgsZj1mKms7YlswXT0xLShxK2UpO2JbNF09bS1mO2JbOF09YytoO2JbMV09bStmO2JbNV09MS0oYStlKTtiWzldPWQtZztiWzJdPWMtaDtiWzZdPWQrZztiWzEwXT0xLShhK3EpO2JbM109MDtiWzddPTA7YlsxMV09MDtiWzEyXT0wO2JbMTNdPTA7YlsxNF09MDtiWzE1XT0xO3JldHVybiB0aGlzfSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmKXt2YXIgZz10aGlzLmVsZW1lbnRzO2Muc3ViVmVjdG9ycyhkLGUpOzA9PT1jLmxlbmd0aFNxKCkmJihjLno9MSk7Yy5ub3JtYWxpemUoKTthLmNyb3NzVmVjdG9ycyhmLGMpOzA9PT1hLmxlbmd0aFNxKCkmJigxPT09TWF0aC5hYnMoZi56KT9jLngrPTFFLTQ6Yy56Kz0xRS00LFxuICAgIGMubm9ybWFsaXplKCksYS5jcm9zc1ZlY3RvcnMoZixjKSk7YS5ub3JtYWxpemUoKTtiLmNyb3NzVmVjdG9ycyhjLGEpO2dbMF09YS54O2dbNF09Yi54O2dbOF09Yy54O2dbMV09YS55O2dbNV09Yi55O2dbOV09Yy55O2dbMl09YS56O2dbNl09Yi56O2dbMTBdPWMuejtyZXR1cm4gdGhpc319KCksbXVsdGlwbHk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwIT09Yj8oY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlNYXRyaWNlcyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlNYXRyaWNlcyhhLGIpKTp0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyxhKX0scHJlbXVsdGlwbHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyhhLHRoaXMpfSxtdWx0aXBseU1hdHJpY2VzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5lbGVtZW50cyxkPWIuZWxlbWVudHM7XG4gICAgYj10aGlzLmVsZW1lbnRzO2E9Y1swXTt2YXIgZT1jWzRdLGY9Y1s4XSxnPWNbMTJdLGg9Y1sxXSxrPWNbNV0sbT1jWzldLHE9Y1sxM10sbj1jWzJdLGw9Y1s2XSxyPWNbMTBdLHQ9Y1sxNF0scD1jWzNdLHc9Y1s3XSx6PWNbMTFdLGM9Y1sxNV0seT1kWzBdLEk9ZFs0XSxBPWRbOF0sSj1kWzEyXSx4PWRbMV0sQj1kWzVdLEQ9ZFs5XSxDPWRbMTNdLEU9ZFsyXSxIPWRbNl0sSz1kWzEwXSxTPWRbMTRdLEw9ZFszXSxOPWRbN10sTT1kWzExXSxkPWRbMTVdO2JbMF09YSp5K2UqeCtmKkUrZypMO2JbNF09YSpJK2UqQitmKkgrZypOO2JbOF09YSpBK2UqRCtmKksrZypNO2JbMTJdPWEqSitlKkMrZipTK2cqZDtiWzFdPWgqeStrKngrbSpFK3EqTDtiWzVdPWgqSStrKkIrbSpIK3EqTjtiWzldPWgqQStrKkQrbSpLK3EqTTtiWzEzXT1oKkoraypDK20qUytxKmQ7YlsyXT1uKnkrbCp4K3IqRSt0Kkw7Yls2XT1uKkkrbCpCK3IqSCt0Kk47YlsxMF09bipBK2wqRCtyKksrdCpNO2JbMTRdPW4qSitsKlxuICAgIEMrcipTK3QqZDtiWzNdPXAqeSt3KngreipFK2MqTDtiWzddPXAqSSt3KkIreipIK2MqTjtiWzExXT1wKkErdypEK3oqSytjKk07YlsxNV09cCpKK3cqQyt6KlMrYypkO3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2JbMF0qPWE7Yls0XSo9YTtiWzhdKj1hO2JbMTJdKj1hO2JbMV0qPWE7Yls1XSo9YTtiWzldKj1hO2JbMTNdKj1hO2JbMl0qPWE7Yls2XSo9YTtiWzEwXSo9YTtiWzE0XSo9YTtiWzNdKj1hO2JbN10qPWE7YlsxMV0qPWE7YlsxNV0qPWE7cmV0dXJuIHRoaXN9LGFwcGx5VG9CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPTAsZD1iLmNvdW50O2M8ZDtjKyspYS54PWIuZ2V0WChjKSxhLnk9Yi5nZXRZKGMpLGEuej1iLmdldFooYyksYS5hcHBseU1hdHJpeDQodGhpcyksYi5zZXRYWVooYyxhLngsYS55LGEueik7cmV0dXJuIGJ9fSgpLGRldGVybWluYW50OmZ1bmN0aW9uKCl7dmFyIGE9XG4gICAgdGhpcy5lbGVtZW50cyxiPWFbMF0sYz1hWzRdLGQ9YVs4XSxlPWFbMTJdLGY9YVsxXSxnPWFbNV0saD1hWzldLGs9YVsxM10sbT1hWzJdLHE9YVs2XSxuPWFbMTBdLGw9YVsxNF07cmV0dXJuIGFbM10qKCtlKmgqcS1kKmsqcS1lKmcqbitjKmsqbitkKmcqbC1jKmgqbCkrYVs3XSooK2IqaCpsLWIqaypuK2UqZipuLWQqZipsK2QqayptLWUqaCptKSthWzExXSooK2IqaypxLWIqZypsLWUqZipxK2MqZipsK2UqZyptLWMqayptKSthWzE1XSooLWQqZyptLWIqaCpxK2IqZypuK2QqZipxLWMqZipuK2MqaCptKX0sdHJhbnNwb3NlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50czt2YXIgYj1hWzFdO2FbMV09YVs0XTthWzRdPWI7Yj1hWzJdO2FbMl09YVs4XTthWzhdPWI7Yj1hWzZdO2FbNl09YVs5XTthWzldPWI7Yj1hWzNdO2FbM109YVsxMl07YVsxMl09YjtiPWFbN107YVs3XT1hWzEzXTthWzEzXT1iO2I9YVsxMV07YVsxMV09YVsxNF07YVsxNF09YjtyZXR1cm4gdGhpc30sc2V0UG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9XG4gICAgdGhpcy5lbGVtZW50cztiWzEyXT1hLng7YlsxM109YS55O2JbMTRdPWEuejtyZXR1cm4gdGhpc30sZ2V0SW52ZXJzZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWxlbWVudHMsZD1hLmVsZW1lbnRzO2E9ZFswXTt2YXIgZT1kWzFdLGY9ZFsyXSxnPWRbM10saD1kWzRdLGs9ZFs1XSxtPWRbNl0scT1kWzddLGw9ZFs4XSx1PWRbOV0scj1kWzEwXSx0PWRbMTFdLHA9ZFsxMl0sdz1kWzEzXSx6PWRbMTRdLGQ9ZFsxNV0seT11KnoqcS13KnIqcSt3Km0qdC1rKnoqdC11Km0qZCtrKnIqZCx4PXAqcipxLWwqeipxLXAqbSp0K2gqeip0K2wqbSpkLWgqcipkLEE9bCp3KnEtcCp1KnErcCprKnQtaCp3KnQtbCprKmQraCp1KmQsSj1wKnUqbS1sKncqbS1wKmsqcitoKncqcitsKmsqei1oKnUqeixCPWEqeStlKngrZipBK2cqSjtpZigwPT09Qil7aWYoITA9PT1iKXRocm93IEVycm9yKFwiVEhSRUUuTWF0cml4NDogLmdldEludmVyc2UoKSBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO1xuICAgIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5nZXRJbnZlcnNlKCkgY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtyZXR1cm4gdGhpcy5pZGVudGl0eSgpfWI9MS9CO2NbMF09eSpiO2NbMV09KHcqcipnLXUqeipnLXcqZip0K2Uqeip0K3UqZipkLWUqcipkKSpiO2NbMl09KGsqeipnLXcqbSpnK3cqZipxLWUqeipxLWsqZipkK2UqbSpkKSpiO2NbM109KHUqbSpnLWsqcipnLXUqZipxK2UqcipxK2sqZip0LWUqbSp0KSpiO2NbNF09eCpiO2NbNV09KGwqeipnLXAqcipnK3AqZip0LWEqeip0LWwqZipkK2EqcipkKSpiO2NbNl09KHAqbSpnLWgqeipnLXAqZipxK2EqeipxK2gqZipkLWEqbSpkKSpiO2NbN109KGgqcipnLWwqbSpnK2wqZipxLWEqcipxLWgqZip0K2EqbSp0KSpiO2NbOF09QSpiO2NbOV09KHAqdSpnLWwqdypnLXAqZSp0K2Eqdyp0K2wqZSpkLWEqdSpkKSpiO2NbMTBdPShoKncqZy1wKmsqZytwKmUqcS1hKncqcS1oKmUqZCthKmsqZCkqYjtjWzExXT1cbiAgICAobCprKmctaCp1KmctbCplKnErYSp1KnEraCplKnQtYSprKnQpKmI7Y1sxMl09SipiO2NbMTNdPShsKncqZi1wKnUqZitwKmUqci1hKncqci1sKmUqeithKnUqeikqYjtjWzE0XT0ocCprKmYtaCp3KmYtcCplKm0rYSp3Km0raCplKnotYSprKnopKmI7Y1sxNV09KGgqdSpmLWwqaypmK2wqZSptLWEqdSptLWgqZSpyK2EqaypyKSpiO3JldHVybiB0aGlzfSxzY2FsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzLGM9YS54LGQ9YS55O2E9YS56O2JbMF0qPWM7Yls0XSo9ZDtiWzhdKj1hO2JbMV0qPWM7Yls1XSo9ZDtiWzldKj1hO2JbMl0qPWM7Yls2XSo9ZDtiWzEwXSo9YTtiWzNdKj1jO2JbN10qPWQ7YlsxMV0qPWE7cmV0dXJuIHRoaXN9LGdldE1heFNjYWxlT25BeGlzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cztyZXR1cm4gTWF0aC5zcXJ0KE1hdGgubWF4KGFbMF0qYVswXSthWzFdKmFbMV0rYVsyXSphWzJdLGFbNF0qYVs0XSthWzVdKmFbNV0rYVs2XSphWzZdLFxuICAgIGFbOF0qYVs4XSthWzldKmFbOV0rYVsxMF0qYVsxMF0pKX0sbWFrZVRyYW5zbGF0aW9uOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldCgxLDAsMCxhLDAsMSwwLGIsMCwwLDEsYywwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uWDpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKTthPU1hdGguc2luKGEpO3RoaXMuc2V0KDEsMCwwLDAsMCxiLC1hLDAsMCxhLGIsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uWTpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKTthPU1hdGguc2luKGEpO3RoaXMuc2V0KGIsMCxhLDAsMCwxLDAsMCwtYSwwLGIsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uWjpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKTthPU1hdGguc2luKGEpO3RoaXMuc2V0KGIsLWEsMCwwLGEsYiwwLDAsMCwwLDEsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uQXhpczpmdW5jdGlvbihhLGIpe3ZhciBjPVxuICAgIE1hdGguY29zKGIpO2I9TWF0aC5zaW4oYik7dmFyIGQ9MS1jLGU9YS54LGY9YS55O2E9YS56O3ZhciBnPWQqZSxoPWQqZjt0aGlzLnNldChnKmUrYyxnKmYtYiphLGcqYStiKmYsMCxnKmYrYiphLGgqZitjLGgqYS1iKmUsMCxnKmEtYipmLGgqYStiKmUsZCphKmErYywwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlU2NhbGU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0KGEsMCwwLDAsMCxiLDAsMCwwLDAsYywwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlU2hlYXI6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0KDEsYixjLDAsYSwxLGMsMCxhLGIsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxjb21wb3NlOmZ1bmN0aW9uKGEsYixjKXt0aGlzLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGIpO3RoaXMuc2NhbGUoYyk7dGhpcy5zZXRQb3NpdGlvbihhKTtyZXR1cm4gdGhpc30sZGVjb21wb3NlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYyxcbiAgICBkLGUpe3ZhciBmPXRoaXMuZWxlbWVudHMsZz1hLnNldChmWzBdLGZbMV0sZlsyXSkubGVuZ3RoKCksaD1hLnNldChmWzRdLGZbNV0sZls2XSkubGVuZ3RoKCksaz1hLnNldChmWzhdLGZbOV0sZlsxMF0pLmxlbmd0aCgpOzA+dGhpcy5kZXRlcm1pbmFudCgpJiYoZz0tZyk7Yy54PWZbMTJdO2MueT1mWzEzXTtjLno9ZlsxNF07Yi5jb3B5KHRoaXMpO2M9MS9nO3ZhciBmPTEvaCxtPTEvaztiLmVsZW1lbnRzWzBdKj1jO2IuZWxlbWVudHNbMV0qPWM7Yi5lbGVtZW50c1syXSo9YztiLmVsZW1lbnRzWzRdKj1mO2IuZWxlbWVudHNbNV0qPWY7Yi5lbGVtZW50c1s2XSo9ZjtiLmVsZW1lbnRzWzhdKj1tO2IuZWxlbWVudHNbOV0qPW07Yi5lbGVtZW50c1sxMF0qPW07ZC5zZXRGcm9tUm90YXRpb25NYXRyaXgoYik7ZS54PWc7ZS55PWg7ZS56PWs7cmV0dXJuIHRoaXN9fSgpLG1ha2VQZXJzcGVjdGl2ZTpmdW5jdGlvbihhLGIsYyxkLGUsZil7dm9pZCAwPT09ZiYmY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm1ha2VQZXJzcGVjdGl2ZSgpIGhhcyBiZWVuIHJlZGVmaW5lZCBhbmQgaGFzIGEgbmV3IHNpZ25hdHVyZS4gUGxlYXNlIGNoZWNrIHRoZSBkb2NzLlwiKTtcbiAgICB2YXIgZz10aGlzLmVsZW1lbnRzO2dbMF09MiplLyhiLWEpO2dbNF09MDtnWzhdPShiK2EpLyhiLWEpO2dbMTJdPTA7Z1sxXT0wO2dbNV09MiplLyhjLWQpO2dbOV09KGMrZCkvKGMtZCk7Z1sxM109MDtnWzJdPTA7Z1s2XT0wO2dbMTBdPS0oZitlKS8oZi1lKTtnWzE0XT0tMipmKmUvKGYtZSk7Z1szXT0wO2dbN109MDtnWzExXT0tMTtnWzE1XT0wO3JldHVybiB0aGlzfSxtYWtlT3J0aG9ncmFwaGljOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz10aGlzLmVsZW1lbnRzLGg9MS8oYi1hKSxrPTEvKGMtZCksbT0xLyhmLWUpO2dbMF09MipoO2dbNF09MDtnWzhdPTA7Z1sxMl09LSgoYithKSpoKTtnWzFdPTA7Z1s1XT0yKms7Z1s5XT0wO2dbMTNdPS0oKGMrZCkqayk7Z1syXT0wO2dbNl09MDtnWzEwXT0tMiptO2dbMTRdPS0oKGYrZSkqbSk7Z1szXT0wO2dbN109MDtnWzExXT0wO2dbMTVdPTE7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO1xuICAgIGE9YS5lbGVtZW50cztmb3IodmFyIGM9MDsxNj5jO2MrKylpZihiW2NdIT09YVtjXSlyZXR1cm4hMTtyZXR1cm4hMH0sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7Zm9yKHZhciBjPTA7MTY+YztjKyspdGhpcy5lbGVtZW50c1tjXT1hW2MrYl07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7dmFyIGM9dGhpcy5lbGVtZW50czthW2JdPWNbMF07YVtiKzFdPWNbMV07YVtiKzJdPWNbMl07YVtiKzNdPWNbM107YVtiKzRdPWNbNF07YVtiKzVdPWNbNV07YVtiKzZdPWNbNl07YVtiKzddPWNbN107YVtiKzhdPWNbOF07YVtiKzldPWNbOV07YVtiKzEwXT1jWzEwXTthW2IrMTFdPWNbMTFdO2FbYisxMl09Y1sxMl07YVtiKzEzXT1jWzEzXTthW2IrMTRdPWNbMTRdO2FbYisxNV09Y1sxNV07cmV0dXJuIGF9fSk7T2JqZWN0LmFzc2lnbihoYSx7c2xlcnA6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMuY29weShhKS5zbGVycChiLFxuICAgIGQpfSxzbGVycEZsYXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9Y1tkKzBdLGs9Y1tkKzFdLG09Y1tkKzJdO2M9Y1tkKzNdO2Q9ZVtmKzBdO3ZhciBxPWVbZisxXSxsPWVbZisyXTtlPWVbZiszXTtpZihjIT09ZXx8aCE9PWR8fGshPT1xfHxtIT09bCl7Zj0xLWc7dmFyIHU9aCpkK2sqcSttKmwrYyplLHI9MDw9dT8xOi0xLHA9MS11KnU7cD5OdW1iZXIuRVBTSUxPTiYmKHA9TWF0aC5zcXJ0KHApLHU9TWF0aC5hdGFuMihwLHUqciksZj1NYXRoLnNpbihmKnUpL3AsZz1NYXRoLnNpbihnKnUpL3ApO3IqPWc7aD1oKmYrZCpyO2s9aypmK3EqcjttPW0qZitsKnI7Yz1jKmYrZSpyO2Y9PT0xLWcmJihnPTEvTWF0aC5zcXJ0KGgqaCtrKmsrbSptK2MqYyksaCo9ZyxrKj1nLG0qPWcsYyo9Zyl9YVtiXT1oO2FbYisxXT1rO2FbYisyXT1tO2FbYiszXT1jfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGhhLnByb3RvdHlwZSx7eDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3h9LFxuICAgIHNldDpmdW5jdGlvbihhKXt0aGlzLl94PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fSx5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX3k9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19LHo6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl96fSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5fej1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfX0sdzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3d9LHNldDpmdW5jdGlvbihhKXt0aGlzLl93PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fX0pO09iamVjdC5hc3NpZ24oaGEucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5feD1hO3RoaXMuX3k9Yjt0aGlzLl96PWM7dGhpcy5fdz1kO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLl94LHRoaXMuX3ksdGhpcy5feixcbiAgICB0aGlzLl93KX0sY29weTpmdW5jdGlvbihhKXt0aGlzLl94PWEueDt0aGlzLl95PWEueTt0aGlzLl96PWEuejt0aGlzLl93PWEudzt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbUV1bGVyOmZ1bmN0aW9uKGEsYil7aWYoIWF8fCFhLmlzRXVsZXIpdGhyb3cgRXJyb3IoXCJUSFJFRS5RdWF0ZXJuaW9uOiAuc2V0RnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYW4gRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7dmFyIGM9YS5feCxkPWEuX3ksZT1hLl96O2E9YS5vcmRlcjt2YXIgZj1NYXRoLmNvcyxnPU1hdGguc2luLGg9ZihjLzIpLGs9ZihkLzIpLGY9ZihlLzIpLGM9ZyhjLzIpLGQ9ZyhkLzIpLGU9ZyhlLzIpO1wiWFlaXCI9PT1hPyh0aGlzLl94PWMqaypmK2gqZCplLHRoaXMuX3k9aCpkKmYtYyprKmUsdGhpcy5fej1oKmsqZStjKmQqZix0aGlzLl93PWgqaypmLWMqZCplKTpcIllYWlwiPT09YT8odGhpcy5feD1jKmsqZitcbiAgICBoKmQqZSx0aGlzLl95PWgqZCpmLWMqayplLHRoaXMuX3o9aCprKmUtYypkKmYsdGhpcy5fdz1oKmsqZitjKmQqZSk6XCJaWFlcIj09PWE/KHRoaXMuX3g9YyprKmYtaCpkKmUsdGhpcy5feT1oKmQqZitjKmsqZSx0aGlzLl96PWgqayplK2MqZCpmLHRoaXMuX3c9aCprKmYtYypkKmUpOlwiWllYXCI9PT1hPyh0aGlzLl94PWMqaypmLWgqZCplLHRoaXMuX3k9aCpkKmYrYyprKmUsdGhpcy5fej1oKmsqZS1jKmQqZix0aGlzLl93PWgqaypmK2MqZCplKTpcIllaWFwiPT09YT8odGhpcy5feD1jKmsqZitoKmQqZSx0aGlzLl95PWgqZCpmK2MqayplLHRoaXMuX3o9aCprKmUtYypkKmYsdGhpcy5fdz1oKmsqZi1jKmQqZSk6XCJYWllcIj09PWEmJih0aGlzLl94PWMqaypmLWgqZCplLHRoaXMuX3k9aCpkKmYtYyprKmUsdGhpcy5fej1oKmsqZStjKmQqZix0aGlzLl93PWgqaypmK2MqZCplKTtpZighMSE9PWIpdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21BeGlzQW5nbGU6ZnVuY3Rpb24oYSxcbiAgICBiKXtiLz0yO3ZhciBjPU1hdGguc2luKGIpO3RoaXMuX3g9YS54KmM7dGhpcy5feT1hLnkqYzt0aGlzLl96PWEueipjO3RoaXMuX3c9TWF0aC5jb3MoYik7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihhKXt2YXIgYj1hLmVsZW1lbnRzLGM9YlswXTthPWJbNF07dmFyIGQ9Yls4XSxlPWJbMV0sZj1iWzVdLGc9Yls5XSxoPWJbMl0saz1iWzZdLGI9YlsxMF0sbT1jK2YrYjswPG0/KGM9LjUvTWF0aC5zcXJ0KG0rMSksdGhpcy5fdz0uMjUvYyx0aGlzLl94PShrLWcpKmMsdGhpcy5feT0oZC1oKSpjLHRoaXMuX3o9KGUtYSkqYyk6Yz5mJiZjPmI/KGM9MipNYXRoLnNxcnQoMStjLWYtYiksdGhpcy5fdz0oay1nKS9jLHRoaXMuX3g9LjI1KmMsdGhpcy5feT0oYStlKS9jLHRoaXMuX3o9KGQraCkvYyk6Zj5iPyhjPTIqTWF0aC5zcXJ0KDErZi1jLWIpLHRoaXMuX3c9KGQtaCkvYyx0aGlzLl94PShhK2UpL2MsdGhpcy5feT1cbiAgICAuMjUqYyx0aGlzLl96PShnK2spL2MpOihjPTIqTWF0aC5zcXJ0KDErYi1jLWYpLHRoaXMuX3c9KGUtYSkvYyx0aGlzLl94PShkK2gpL2MsdGhpcy5feT0oZytrKS9jLHRoaXMuX3o9LjI1KmMpO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxzZXRGcm9tVW5pdFZlY3RvcnM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiO3JldHVybiBmdW5jdGlvbihjLGQpe3ZvaWQgMD09PWEmJihhPW5ldyBwKTtiPWMuZG90KGQpKzE7MUUtNj5iPyhiPTAsTWF0aC5hYnMoYy54KT5NYXRoLmFicyhjLnopP2Euc2V0KC1jLnksYy54LDApOmEuc2V0KDAsLWMueixjLnkpKTphLmNyb3NzVmVjdG9ycyhjLGQpO3RoaXMuX3g9YS54O3RoaXMuX3k9YS55O3RoaXMuX3o9YS56O3RoaXMuX3c9YjtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKX19KCksaW52ZXJzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmp1Z2F0ZSgpLm5vcm1hbGl6ZSgpfSxjb25qdWdhdGU6ZnVuY3Rpb24oKXt0aGlzLl94Kj1cbiAgICAtMTt0aGlzLl95Kj0tMTt0aGlzLl96Kj0tMTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl94KmEuX3grdGhpcy5feSphLl95K3RoaXMuX3oqYS5feit0aGlzLl93KmEuX3d9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3gqdGhpcy5feCt0aGlzLl95KnRoaXMuX3krdGhpcy5feip0aGlzLl96K3RoaXMuX3cqdGhpcy5fd30sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLl94KnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3cpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxlbmd0aCgpOzA9PT1hPyh0aGlzLl96PXRoaXMuX3k9dGhpcy5feD0wLHRoaXMuX3c9MSk6KGE9MS9hLHRoaXMuX3gqPWEsdGhpcy5feSo9YSx0aGlzLl96Kj1hLHRoaXMuX3cqPWEpO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxcbiAgICBtdWx0aXBseTpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDAhPT1iPyhjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseVF1YXRlcm5pb25zKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKGEsYikpOnRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyh0aGlzLGEpfSxwcmVtdWx0aXBseTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKGEsdGhpcyl9LG11bHRpcGx5UXVhdGVybmlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLl94LGQ9YS5feSxlPWEuX3o7YT1hLl93O3ZhciBmPWIuX3gsZz1iLl95LGg9Yi5fejtiPWIuX3c7dGhpcy5feD1jKmIrYSpmK2QqaC1lKmc7dGhpcy5feT1kKmIrYSpnK2UqZi1jKmg7dGhpcy5fej1lKmIrYSpoK2MqZy1kKmY7dGhpcy5fdz1hKmItYypmLWQqZy1lKmg7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7XG4gICAgcmV0dXJuIHRoaXN9LHNsZXJwOmZ1bmN0aW9uKGEsYil7aWYoMD09PWIpcmV0dXJuIHRoaXM7aWYoMT09PWIpcmV0dXJuIHRoaXMuY29weShhKTt2YXIgYz10aGlzLl94LGQ9dGhpcy5feSxlPXRoaXMuX3osZj10aGlzLl93LGc9ZiphLl93K2MqYS5feCtkKmEuX3krZSphLl96OzA+Zz8odGhpcy5fdz0tYS5fdyx0aGlzLl94PS1hLl94LHRoaXMuX3k9LWEuX3ksdGhpcy5fej0tYS5feixnPS1nKTp0aGlzLmNvcHkoYSk7aWYoMTw9ZylyZXR1cm4gdGhpcy5fdz1mLHRoaXMuX3g9Yyx0aGlzLl95PWQsdGhpcy5fej1lLHRoaXM7YT1NYXRoLnNxcnQoMS1nKmcpO2lmKC4wMDE+TWF0aC5hYnMoYSkpcmV0dXJuIHRoaXMuX3c9LjUqKGYrdGhpcy5fdyksdGhpcy5feD0uNSooYyt0aGlzLl94KSx0aGlzLl95PS41KihkK3RoaXMuX3kpLHRoaXMuX3o9LjUqKGUrdGhpcy5feiksdGhpczt2YXIgaD1NYXRoLmF0YW4yKGEsZyksZz1NYXRoLnNpbigoMS1iKSpoKS9hO2I9TWF0aC5zaW4oYipoKS9hO1xuICAgIHRoaXMuX3c9ZipnK3RoaXMuX3cqYjt0aGlzLl94PWMqZyt0aGlzLl94KmI7dGhpcy5feT1kKmcrdGhpcy5feSpiO3RoaXMuX3o9ZSpnK3RoaXMuX3oqYjt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLl94PT09dGhpcy5feCYmYS5feT09PXRoaXMuX3kmJmEuX3o9PT10aGlzLl96JiZhLl93PT09dGhpcy5fd30sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy5feD1hW2JdO3RoaXMuX3k9YVtiKzFdO3RoaXMuX3o9YVtiKzJdO3RoaXMuX3c9YVtiKzNdO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy5feDthW2IrMV09dGhpcy5feTthW2IrMl09dGhpcy5fejthW2IrM109dGhpcy5fdztyZXR1cm4gYX0sb25DaGFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5vbkNoYW5nZUNhbGxiYWNrPVxuICAgIGE7cmV0dXJuIHRoaXN9LG9uQ2hhbmdlQ2FsbGJhY2s6ZnVuY3Rpb24oKXt9fSk7T2JqZWN0LmFzc2lnbihwLnByb3RvdHlwZSx7aXNWZWN0b3IzOiEwLHNldDpmdW5jdGlvbihhLGIsYyl7dGhpcy54PWE7dGhpcy55PWI7dGhpcy56PWM7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLno9dGhpcy55PXRoaXMueD1hO3JldHVybiB0aGlzfSxzZXRYOmZ1bmN0aW9uKGEpe3RoaXMueD1hO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEpe3RoaXMueT1hO3JldHVybiB0aGlzfSxzZXRaOmZ1bmN0aW9uKGEpe3RoaXMuej1hO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYSl7Y2FzZSAwOnRoaXMueD1iO2JyZWFrO2Nhc2UgMTp0aGlzLnk9YjticmVhaztjYXNlIDI6dGhpcy56PWI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fXJldHVybiB0aGlzfSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O1xuICAgIGNhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnksdGhpcy56KX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7dGhpcy56PWEuejtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnMoYSxiKTt0aGlzLngrPWEueDt0aGlzLnkrPWEueTt0aGlzLnorPWEuejtyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCs9YTt0aGlzLnkrPWE7dGhpcy56Kz1hO3JldHVybiB0aGlzfSxcbiAgICBhZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7dGhpcy56PWEueitiLno7cmV0dXJuIHRoaXN9LGFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbihhLGIpe3RoaXMueCs9YS54KmI7dGhpcy55Kz1hLnkqYjt0aGlzLnorPWEueipiO3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyhhLGIpO3RoaXMueC09YS54O3RoaXMueS09YS55O3RoaXMuei09YS56O3JldHVybiB0aGlzfSxzdWJTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54LT1hO3RoaXMueS09YTt0aGlzLnotPWE7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTt0aGlzLno9XG4gICAgYS56LWIuejtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseVZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5VmVjdG9ycyhhLGIpO3RoaXMueCo9YS54O3RoaXMueSo9YS55O3RoaXMueio9YS56O3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngqPWE7dGhpcy55Kj1hO3RoaXMueio9YTtyZXR1cm4gdGhpc30sbXVsdGlwbHlWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCpiLng7dGhpcy55PWEueSpiLnk7dGhpcy56PWEueipiLno7cmV0dXJuIHRoaXN9LGFwcGx5RXVsZXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGIpe2ImJmIuaXNFdWxlcnx8Y29uc29sZS5lcnJvcihcIlRIUkVFLlZlY3RvcjM6IC5hcHBseUV1bGVyKCkgbm93IGV4cGVjdHMgYW4gRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7XG4gICAgcmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKGEuc2V0RnJvbUV1bGVyKGIpKX19KCksYXBwbHlBeGlzQW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7cmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKGEuc2V0RnJvbUF4aXNBbmdsZShiLGMpKX19KCksYXBwbHlNYXRyaXgzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMuejthPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzNdKmMrYVs2XSpkO3RoaXMueT1hWzFdKmIrYVs0XSpjK2FbN10qZDt0aGlzLno9YVsyXSpiK2FbNV0qYythWzhdKmQ7cmV0dXJuIHRoaXN9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLno7YT1hLmVsZW1lbnRzO3ZhciBlPTEvKGFbM10qYithWzddKmMrYVsxMV0qZCthWzE1XSk7dGhpcy54PShhWzBdKmIrYVs0XSpjK2FbOF0qZCthWzEyXSkqZTt0aGlzLnk9KGFbMV0qYithWzVdKmMrXG4gICAgYVs5XSpkK2FbMTNdKSplO3RoaXMuej0oYVsyXSpiK2FbNl0qYythWzEwXSpkK2FbMTRdKSplO3JldHVybiB0aGlzfSxhcHBseVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGU9YS54LGY9YS55LGc9YS56O2E9YS53O3ZhciBoPWEqYitmKmQtZypjLGs9YSpjK2cqYi1lKmQsbT1hKmQrZSpjLWYqYixiPS1lKmItZipjLWcqZDt0aGlzLng9aCphK2IqLWUrayotZy1tKi1mO3RoaXMueT1rKmErYiotZittKi1lLWgqLWc7dGhpcy56PW0qYStiKi1nK2gqLWYtayotZTtyZXR1cm4gdGhpc30scHJvamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm11bHRpcGx5TWF0cmljZXMoYi5wcm9qZWN0aW9uTWF0cml4LGEuZ2V0SW52ZXJzZShiLm1hdHJpeFdvcmxkKSk7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KGEpfX0oKSx1bnByb2plY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYil7YS5tdWx0aXBseU1hdHJpY2VzKGIubWF0cml4V29ybGQsXG4gICAgYS5nZXRJbnZlcnNlKGIucHJvamVjdGlvbk1hdHJpeCkpO3JldHVybiB0aGlzLmFwcGx5TWF0cml4NChhKX19KCksdHJhbnNmb3JtRGlyZWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMuejthPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzRdKmMrYVs4XSpkO3RoaXMueT1hWzFdKmIrYVs1XSpjK2FbOV0qZDt0aGlzLno9YVsyXSpiK2FbNl0qYythWzEwXSpkO3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpfSxkaXZpZGU6ZnVuY3Rpb24oYSl7dGhpcy54Lz1hLng7dGhpcy55Lz1hLnk7dGhpcy56Lz1hLno7cmV0dXJuIHRoaXN9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL2EpfSxtaW46ZnVuY3Rpb24oYSl7dGhpcy54PU1hdGgubWluKHRoaXMueCxhLngpO3RoaXMueT1NYXRoLm1pbih0aGlzLnksYS55KTt0aGlzLno9TWF0aC5taW4odGhpcy56LGEueik7cmV0dXJuIHRoaXN9LG1heDpmdW5jdGlvbihhKXt0aGlzLng9XG4gICAgTWF0aC5tYXgodGhpcy54LGEueCk7dGhpcy55PU1hdGgubWF4KHRoaXMueSxhLnkpO3RoaXMuej1NYXRoLm1heCh0aGlzLnosYS56KTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oYSxiKXt0aGlzLng9TWF0aC5tYXgoYS54LE1hdGgubWluKGIueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgoYS55LE1hdGgubWluKGIueSx0aGlzLnkpKTt0aGlzLno9TWF0aC5tYXgoYS56LE1hdGgubWluKGIueix0aGlzLnopKTtyZXR1cm4gdGhpc30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwO3JldHVybiBmdW5jdGlvbihjLGQpe2Euc2V0KGMsYyxjKTtiLnNldChkLGQsZCk7cmV0dXJuIHRoaXMuY2xhbXAoYSxiKX19KCksY2xhbXBMZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihjfHwxKS5tdWx0aXBseVNjYWxhcihNYXRoLm1heChhLE1hdGgubWluKGIsYykpKX0sZmxvb3I6ZnVuY3Rpb24oKXt0aGlzLng9XG4gICAgTWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT1NYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PU1hdGguZmxvb3IodGhpcy56KTtyZXR1cm4gdGhpc30sY2VpbDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmNlaWwodGhpcy54KTt0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSk7dGhpcy56PU1hdGguY2VpbCh0aGlzLnopO3JldHVybiB0aGlzfSxyb3VuZDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLnJvdW5kKHRoaXMueCk7dGhpcy55PU1hdGgucm91bmQodGhpcy55KTt0aGlzLno9TWF0aC5yb3VuZCh0aGlzLnopO3JldHVybiB0aGlzfSxyb3VuZFRvWmVybzpmdW5jdGlvbigpe3RoaXMueD0wPnRoaXMueD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PTA+dGhpcy55P01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9MD50aGlzLno/TWF0aC5jZWlsKHRoaXMueik6TWF0aC5mbG9vcih0aGlzLnopO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLng9XG4gICAgLXRoaXMueDt0aGlzLnk9LXRoaXMueTt0aGlzLno9LXRoaXMuejtyZXR1cm4gdGhpc30sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLngqYS54K3RoaXMueSphLnkrdGhpcy56KmEuen0sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnp9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnopfSxtYW5oYXR0YW5MZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueil9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpfHwxKX0sc2V0TGVuZ3RoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKGEpfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz0oYS54LVxuICAgIHRoaXMueCkqYjt0aGlzLnkrPShhLnktdGhpcy55KSpiO3RoaXMueis9KGEuei10aGlzLnopKmI7cmV0dXJuIHRoaXN9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGIsYSkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfSxjcm9zczpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDAhPT1iPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuY3Jvc3MoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5jcm9zc1ZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmNyb3NzVmVjdG9ycyhhLGIpKTp0aGlzLmNyb3NzVmVjdG9ycyh0aGlzLGEpfSxjcm9zc1ZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLngsZD1hLnk7YT1hLno7dmFyIGU9Yi54LGY9Yi55O2I9Yi56O3RoaXMueD1kKmItYSpmO3RoaXMueT1hKmUtYypiO3RoaXMuej1jKmYtZCplO3JldHVybiB0aGlzfSxwcm9qZWN0T25WZWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9XG4gICAgYS5kb3QodGhpcykvYS5sZW5ndGhTcSgpO3JldHVybiB0aGlzLmNvcHkoYSkubXVsdGlwbHlTY2FsYXIoYil9LHByb2plY3RPblBsYW5lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe2EuY29weSh0aGlzKS5wcm9qZWN0T25WZWN0b3IoYik7cmV0dXJuIHRoaXMuc3ViKGEpfX0oKSxyZWZsZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnN1YihhLmNvcHkoYikubXVsdGlwbHlTY2FsYXIoMip0aGlzLmRvdChiKSkpfX0oKSxhbmdsZVRvOmZ1bmN0aW9uKGEpe2E9dGhpcy5kb3QoYSkvTWF0aC5zcXJ0KHRoaXMubGVuZ3RoU3EoKSphLmxlbmd0aFNxKCkpO3JldHVybiBNYXRoLmFjb3MoUS5jbGFtcChhLC0xLDEpKX0sZGlzdGFuY2VUbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQoYSkpfSxkaXN0YW5jZVRvU3F1YXJlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngtXG4gICAgYS54LGM9dGhpcy55LWEueTthPXRoaXMuei1hLno7cmV0dXJuIGIqYitjKmMrYSphfSxtYW5oYXR0YW5EaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLmFicyh0aGlzLngtYS54KStNYXRoLmFicyh0aGlzLnktYS55KStNYXRoLmFicyh0aGlzLnotYS56KX0sc2V0RnJvbVNwaGVyaWNhbDpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLnNpbihhLnBoaSkqYS5yYWRpdXM7dGhpcy54PWIqTWF0aC5zaW4oYS50aGV0YSk7dGhpcy55PU1hdGguY29zKGEucGhpKSphLnJhZGl1czt0aGlzLno9YipNYXRoLmNvcyhhLnRoZXRhKTtyZXR1cm4gdGhpc30sc2V0RnJvbUN5bGluZHJpY2FsOmZ1bmN0aW9uKGEpe3RoaXMueD1hLnJhZGl1cypNYXRoLnNpbihhLnRoZXRhKTt0aGlzLnk9YS55O3RoaXMuej1hLnJhZGl1cypNYXRoLmNvcyhhLnRoZXRhKTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeFBvc2l0aW9uOmZ1bmN0aW9uKGEpe2E9YS5lbGVtZW50czt0aGlzLng9YVsxMl07dGhpcy55PVxuICAgIGFbMTNdO3RoaXMuej1hWzE0XTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeFNjYWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihhLDApLmxlbmd0aCgpLGM9dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGEsMSkubGVuZ3RoKCk7YT10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oYSwyKS5sZW5ndGgoKTt0aGlzLng9Yjt0aGlzLnk9Yzt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeENvbHVtbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmZyb21BcnJheShhLmVsZW1lbnRzLDQqYil9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS54PT09dGhpcy54JiZhLnk9PT10aGlzLnkmJmEuej09PXRoaXMuen0sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy54PWFbYl07dGhpcy55PWFbYisxXTt0aGlzLno9YVtiKzJdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9XG4gICAgW10pO3ZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy54O2FbYisxXT10aGlzLnk7YVtiKzJdPXRoaXMuejtyZXR1cm4gYX0sZnJvbUJ1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7dm9pZCAwIT09YyYmY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogb2Zmc2V0IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKTt0aGlzLng9YS5nZXRYKGIpO3RoaXMueT1hLmdldFkoYik7dGhpcy56PWEuZ2V0WihiKTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKG1hLnByb3RvdHlwZSx7aXNNYXRyaXgzOiEwLHNldDpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7dmFyIG09dGhpcy5lbGVtZW50czttWzBdPWE7bVsxXT1kO21bMl09ZzttWzNdPWI7bVs0XT1lO21bNV09aDttWzZdPWM7bVs3XT1mO21bOF09aztyZXR1cm4gdGhpc30saWRlbnRpdHk6ZnVuY3Rpb24oKXt0aGlzLnNldCgxLDAsMCwwLDEsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5mcm9tQXJyYXkodGhpcy5lbGVtZW50cyl9LFxuICAgIGNvcHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthPWEuZWxlbWVudHM7YlswXT1hWzBdO2JbMV09YVsxXTtiWzJdPWFbMl07YlszXT1hWzNdO2JbNF09YVs0XTtiWzVdPWFbNV07Yls2XT1hWzZdO2JbN109YVs3XTtiWzhdPWFbOF07cmV0dXJuIHRoaXN9LHNldEZyb21NYXRyaXg0OmZ1bmN0aW9uKGEpe2E9YS5lbGVtZW50czt0aGlzLnNldChhWzBdLGFbNF0sYVs4XSxhWzFdLGFbNV0sYVs5XSxhWzJdLGFbNl0sYVsxMF0pO3JldHVybiB0aGlzfSxhcHBseVRvQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wLGQ9Yi5jb3VudDtjPGQ7YysrKWEueD1iLmdldFgoYyksYS55PWIuZ2V0WShjKSxhLno9Yi5nZXRaKGMpLGEuYXBwbHlNYXRyaXgzKHRoaXMpLGIuc2V0WFlaKGMsYS54LGEueSxhLnopO3JldHVybiBifX0oKSxtdWx0aXBseTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKHRoaXMsXG4gICAgYSl9LHByZW11bHRpcGx5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXMoYSx0aGlzKX0sbXVsdGlwbHlNYXRyaWNlczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZWxlbWVudHMsZD1iLmVsZW1lbnRzO2I9dGhpcy5lbGVtZW50czthPWNbMF07dmFyIGU9Y1szXSxmPWNbNl0sZz1jWzFdLGg9Y1s0XSxrPWNbN10sbT1jWzJdLHE9Y1s1XSxjPWNbOF0sbD1kWzBdLHA9ZFszXSxyPWRbNl0sdD1kWzFdLHY9ZFs0XSx3PWRbN10sej1kWzJdLHk9ZFs1XSxkPWRbOF07YlswXT1hKmwrZSp0K2YqejtiWzNdPWEqcCtlKnYrZip5O2JbNl09YSpyK2UqdytmKmQ7YlsxXT1nKmwraCp0K2sqejtiWzRdPWcqcCtoKnYrayp5O2JbN109ZypyK2gqdytrKmQ7YlsyXT1tKmwrcSp0K2MqejtiWzVdPW0qcCtxKnYrYyp5O2JbOF09bSpyK3EqdytjKmQ7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YlswXSo9YTtiWzNdKj1hO1xuICAgIGJbNl0qPWE7YlsxXSo9YTtiWzRdKj1hO2JbN10qPWE7YlsyXSo9YTtiWzVdKj1hO2JbOF0qPWE7cmV0dXJuIHRoaXN9LGRldGVybWluYW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cyxiPWFbMF0sYz1hWzFdLGQ9YVsyXSxlPWFbM10sZj1hWzRdLGc9YVs1XSxoPWFbNl0saz1hWzddLGE9YVs4XTtyZXR1cm4gYipmKmEtYipnKmstYyplKmErYypnKmgrZCplKmstZCpmKmh9LGdldEludmVyc2U6ZnVuY3Rpb24oYSxiKXthJiZhLmlzTWF0cml4NCYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IC5nZXRJbnZlcnNlKCkgbm8gbG9uZ2VyIHRha2VzIGEgTWF0cml4NCBhcmd1bWVudC5cIik7dmFyIGM9YS5lbGVtZW50czthPXRoaXMuZWxlbWVudHM7dmFyIGQ9Y1swXSxlPWNbMV0sZj1jWzJdLGc9Y1szXSxoPWNbNF0saz1jWzVdLG09Y1s2XSxxPWNbN10sYz1jWzhdLGw9YypoLWsqcSxwPWsqbS1jKmcscj1xKmctaCptLHQ9ZCpsK2UqcCtmKnI7aWYoMD09PXQpe2lmKCEwPT09XG4gICAgYil0aHJvdyBFcnJvcihcIlRIUkVFLk1hdHJpeDM6IC5nZXRJbnZlcnNlKCkgY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXgzOiAuZ2V0SW52ZXJzZSgpIGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIik7cmV0dXJuIHRoaXMuaWRlbnRpdHkoKX1iPTEvdDthWzBdPWwqYjthWzFdPShmKnEtYyplKSpiO2FbMl09KGsqZS1mKmgpKmI7YVszXT1wKmI7YVs0XT0oYypkLWYqbSkqYjthWzVdPShmKmctaypkKSpiO2FbNl09cipiO2FbN109KGUqbS1xKmQpKmI7YVs4XT0oaCpkLWUqZykqYjtyZXR1cm4gdGhpc30sdHJhbnNwb3NlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50czt2YXIgYj1hWzFdO2FbMV09YVszXTthWzNdPWI7Yj1hWzJdO2FbMl09YVs2XTthWzZdPWI7Yj1hWzVdO2FbNV09YVs3XTthWzddPWI7cmV0dXJuIHRoaXN9LGdldE5vcm1hbE1hdHJpeDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4NChhKS5nZXRJbnZlcnNlKHRoaXMpLnRyYW5zcG9zZSgpfSxcbiAgICB0cmFuc3Bvc2VJbnRvQXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthWzBdPWJbMF07YVsxXT1iWzNdO2FbMl09Yls2XTthWzNdPWJbMV07YVs0XT1iWzRdO2FbNV09Yls3XTthWzZdPWJbMl07YVs3XT1iWzVdO2FbOF09Yls4XTtyZXR1cm4gdGhpc30sc2V0VXZUcmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9TWF0aC5jb3MoZSk7ZT1NYXRoLnNpbihlKTt0aGlzLnNldChjKmgsYyplLC1jKihoKmYrZSpnKStmK2EsLWQqZSxkKmgsLWQqKC1lKmYraCpnKStnK2IsMCwwLDEpfSxzY2FsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWxlbWVudHM7Y1swXSo9YTtjWzNdKj1hO2NbNl0qPWE7Y1sxXSo9YjtjWzRdKj1iO2NbN10qPWI7cmV0dXJuIHRoaXN9LHJvdGF0ZTpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKTthPU1hdGguc2luKGEpO3ZhciBjPXRoaXMuZWxlbWVudHMsZD1jWzBdLGU9Y1szXSxmPWNbNl0sZz1jWzFdLGg9Y1s0XSxcbiAgICBrPWNbN107Y1swXT1iKmQrYSpnO2NbM109YiplK2EqaDtjWzZdPWIqZithKms7Y1sxXT0tYSpkK2IqZztjWzRdPS1hKmUrYipoO2NbN109LWEqZitiKms7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWxlbWVudHM7Y1swXSs9YSpjWzJdO2NbM10rPWEqY1s1XTtjWzZdKz1hKmNbOF07Y1sxXSs9YipjWzJdO2NbNF0rPWIqY1s1XTtjWzddKz1iKmNbOF07cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2E9YS5lbGVtZW50cztmb3IodmFyIGM9MDs5PmM7YysrKWlmKGJbY10hPT1hW2NdKXJldHVybiExO3JldHVybiEwfSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTtmb3IodmFyIGM9MDs5PmM7YysrKXRoaXMuZWxlbWVudHNbY109YVtjK2JdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO3ZhciBjPVxuICAgIHRoaXMuZWxlbWVudHM7YVtiXT1jWzBdO2FbYisxXT1jWzFdO2FbYisyXT1jWzJdO2FbYiszXT1jWzNdO2FbYis0XT1jWzRdO2FbYis1XT1jWzVdO2FbYis2XT1jWzZdO2FbYis3XT1jWzddO2FbYis4XT1jWzhdO3JldHVybiBhfX0pO3ZhciBBZj0wO1UuREVGQVVMVF9JTUFHRT12b2lkIDA7VS5ERUZBVUxUX01BUFBJTkc9MzAwO1UucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpVLGlzVGV4dHVyZTohMCxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLm5hbWU9YS5uYW1lO3RoaXMuaW1hZ2U9YS5pbWFnZTt0aGlzLm1pcG1hcHM9YS5taXBtYXBzLnNsaWNlKDApO3RoaXMubWFwcGluZz1hLm1hcHBpbmc7dGhpcy53cmFwUz1hLndyYXBTO3RoaXMud3JhcFQ9YS53cmFwVDt0aGlzLm1hZ0ZpbHRlcj1hLm1hZ0ZpbHRlcjt0aGlzLm1pbkZpbHRlcj1cbiAgICBhLm1pbkZpbHRlcjt0aGlzLmFuaXNvdHJvcHk9YS5hbmlzb3Ryb3B5O3RoaXMuZm9ybWF0PWEuZm9ybWF0O3RoaXMudHlwZT1hLnR5cGU7dGhpcy5vZmZzZXQuY29weShhLm9mZnNldCk7dGhpcy5yZXBlYXQuY29weShhLnJlcGVhdCk7dGhpcy5jZW50ZXIuY29weShhLmNlbnRlcik7dGhpcy5yb3RhdGlvbj1hLnJvdGF0aW9uO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1hLm1hdHJpeEF1dG9VcGRhdGU7dGhpcy5tYXRyaXguY29weShhLm1hdHJpeCk7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9YS5nZW5lcmF0ZU1pcG1hcHM7dGhpcy5wcmVtdWx0aXBseUFscGhhPWEucHJlbXVsdGlwbHlBbHBoYTt0aGlzLmZsaXBZPWEuZmxpcFk7dGhpcy51bnBhY2tBbGlnbm1lbnQ9YS51bnBhY2tBbGlnbm1lbnQ7dGhpcy5lbmNvZGluZz1hLmVuY29kaW5nO3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oYSl7dmFyIGI9dm9pZCAwPT09YXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhO2lmKCFiJiZ2b2lkIDAhPT1cbiAgICBhLnRleHR1cmVzW3RoaXMudXVpZF0pcmV0dXJuIGEudGV4dHVyZXNbdGhpcy51dWlkXTt2YXIgYz17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJUZXh0dXJlXCIsZ2VuZXJhdG9yOlwiVGV4dHVyZS50b0pTT05cIn0sdXVpZDp0aGlzLnV1aWQsbmFtZTp0aGlzLm5hbWUsbWFwcGluZzp0aGlzLm1hcHBpbmcscmVwZWF0Olt0aGlzLnJlcGVhdC54LHRoaXMucmVwZWF0LnldLG9mZnNldDpbdGhpcy5vZmZzZXQueCx0aGlzLm9mZnNldC55XSxjZW50ZXI6W3RoaXMuY2VudGVyLngsdGhpcy5jZW50ZXIueV0scm90YXRpb246dGhpcy5yb3RhdGlvbix3cmFwOlt0aGlzLndyYXBTLHRoaXMud3JhcFRdLG1pbkZpbHRlcjp0aGlzLm1pbkZpbHRlcixtYWdGaWx0ZXI6dGhpcy5tYWdGaWx0ZXIsYW5pc290cm9weTp0aGlzLmFuaXNvdHJvcHksZmxpcFk6dGhpcy5mbGlwWX07aWYodm9pZCAwIT09dGhpcy5pbWFnZSl7dmFyIGQ9dGhpcy5pbWFnZTt2b2lkIDA9PT1kLnV1aWQmJihkLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKSk7XG4gICAgaWYoIWImJnZvaWQgMD09PWEuaW1hZ2VzW2QudXVpZF0pe3ZhciBlPWEuaW1hZ2VzLGY9ZC51dWlkLGc9ZC51dWlkO2lmKGQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCl2YXIgaD1kO2Vsc2V7aD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIik7aC53aWR0aD1kLndpZHRoO2guaGVpZ2h0PWQuaGVpZ2h0O3ZhciBrPWguZ2V0Q29udGV4dChcIjJkXCIpO2QgaW5zdGFuY2VvZiBJbWFnZURhdGE/ay5wdXRJbWFnZURhdGEoZCwwLDApOmsuZHJhd0ltYWdlKGQsMCwwLGQud2lkdGgsZC5oZWlnaHQpfWg9MjA0ODxoLndpZHRofHwyMDQ4PGguaGVpZ2h0P2gudG9EYXRhVVJMKFwiaW1hZ2UvanBlZ1wiLC42KTpoLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtlW2ZdPXt1dWlkOmcsdXJsOmh9fWMuaW1hZ2U9ZC51dWlkfWJ8fChhLnRleHR1cmVzW3RoaXMudXVpZF09Yyk7cmV0dXJuIGN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX0sXG4gICAgdHJhbnNmb3JtVXY6ZnVuY3Rpb24oYSl7aWYoMzAwPT09dGhpcy5tYXBwaW5nKXthLmFwcGx5TWF0cml4Myh0aGlzLm1hdHJpeCk7aWYoMD5hLnh8fDE8YS54KXN3aXRjaCh0aGlzLndyYXBTKXtjYXNlIDFFMzphLngtPU1hdGguZmxvb3IoYS54KTticmVhaztjYXNlIDEwMDE6YS54PTA+YS54PzA6MTticmVhaztjYXNlIDEwMDI6YS54PTE9PT1NYXRoLmFicyhNYXRoLmZsb29yKGEueCklMik/TWF0aC5jZWlsKGEueCktYS54OmEueC1NYXRoLmZsb29yKGEueCl9aWYoMD5hLnl8fDE8YS55KXN3aXRjaCh0aGlzLndyYXBUKXtjYXNlIDFFMzphLnktPU1hdGguZmxvb3IoYS55KTticmVhaztjYXNlIDEwMDE6YS55PTA+YS55PzA6MTticmVhaztjYXNlIDEwMDI6YS55PTE9PT1NYXRoLmFicyhNYXRoLmZsb29yKGEueSklMik/TWF0aC5jZWlsKGEueSktYS55OmEueS1NYXRoLmZsb29yKGEueSl9dGhpcy5mbGlwWSYmKGEueT0xLWEueSl9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShVLnByb3RvdHlwZSxcbiAgICBcIm5lZWRzVXBkYXRlXCIse3NldDpmdW5jdGlvbihhKXshMD09PWEmJnRoaXMudmVyc2lvbisrfX0pO09iamVjdC5hc3NpZ24oYWEucHJvdG90eXBlLHtpc1ZlY3RvcjQ6ITAsc2V0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMueD1hO3RoaXMueT1iO3RoaXMuej1jO3RoaXMudz1kO3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy53PXRoaXMuej10aGlzLnk9dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oYSl7dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oYSl7dGhpcy55PWE7cmV0dXJuIHRoaXN9LHNldFo6ZnVuY3Rpb24oYSl7dGhpcy56PWE7cmV0dXJuIHRoaXN9LHNldFc6ZnVuY3Rpb24oYSl7dGhpcy53PWE7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIDA6dGhpcy54PWI7YnJlYWs7Y2FzZSAxOnRoaXMueT1iO2JyZWFrO2Nhc2UgMjp0aGlzLno9YjticmVhaztjYXNlIDM6dGhpcy53PVxuICAgIGI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fXJldHVybiB0aGlzfSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2Nhc2UgMzpyZXR1cm4gdGhpcy53O2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnksdGhpcy56LHRoaXMudyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55O3RoaXMuej1hLno7dGhpcy53PXZvaWQgMCE9PWEudz9hLnc6MTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSxcbiAgICB0aGlzLmFkZFZlY3RvcnMoYSxiKTt0aGlzLngrPWEueDt0aGlzLnkrPWEueTt0aGlzLnorPWEuejt0aGlzLncrPWEudztyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCs9YTt0aGlzLnkrPWE7dGhpcy56Kz1hO3RoaXMudys9YTtyZXR1cm4gdGhpc30sYWRkVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngrYi54O3RoaXMueT1hLnkrYi55O3RoaXMuej1hLnorYi56O3RoaXMudz1hLncrYi53O3JldHVybiB0aGlzfSxhZGRTY2FsZWRWZWN0b3I6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPWEueCpiO3RoaXMueSs9YS55KmI7dGhpcy56Kz1hLnoqYjt0aGlzLncrPWEudypiO3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyhhLFxuICAgIGIpO3RoaXMueC09YS54O3RoaXMueS09YS55O3RoaXMuei09YS56O3RoaXMudy09YS53O3JldHVybiB0aGlzfSxzdWJTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54LT1hO3RoaXMueS09YTt0aGlzLnotPWE7dGhpcy53LT1hO3JldHVybiB0aGlzfSxzdWJWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueC1iLng7dGhpcy55PWEueS1iLnk7dGhpcy56PWEuei1iLno7dGhpcy53PWEudy1iLnc7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCo9YTt0aGlzLnkqPWE7dGhpcy56Kj1hO3RoaXMudyo9YTtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMueixlPXRoaXMudzthPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzRdKmMrYVs4XSpkK2FbMTJdKmU7dGhpcy55PWFbMV0qYithWzVdKmMrYVs5XSpkK2FbMTNdKmU7dGhpcy56PWFbMl0qYithWzZdKmMrYVsxMF0qZCthWzE0XSpcbiAgICBlO3RoaXMudz1hWzNdKmIrYVs3XSpjK2FbMTFdKmQrYVsxNV0qZTtyZXR1cm4gdGhpc30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKDEvYSl9LHNldEF4aXNBbmdsZUZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3RoaXMudz0yKk1hdGguYWNvcyhhLncpO3ZhciBiPU1hdGguc3FydCgxLWEudyphLncpOzFFLTQ+Yj8odGhpcy54PTEsdGhpcy56PXRoaXMueT0wKToodGhpcy54PWEueC9iLHRoaXMueT1hLnkvYix0aGlzLno9YS56L2IpO3JldHVybiB0aGlzfSxzZXRBeGlzQW5nbGVGcm9tUm90YXRpb25NYXRyaXg6ZnVuY3Rpb24oYSl7YT1hLmVsZW1lbnRzO3ZhciBiPWFbMF07dmFyIGM9YVs0XTt2YXIgZD1hWzhdLGU9YVsxXSxmPWFbNV0sZz1hWzldO3ZhciBoPWFbMl07dmFyIGs9YVs2XTt2YXIgbT1hWzEwXTtpZiguMDE+TWF0aC5hYnMoYy1lKSYmLjAxPk1hdGguYWJzKGQtaCkmJi4wMT5NYXRoLmFicyhnLWspKXtpZiguMT5NYXRoLmFicyhjK1xuICAgIGUpJiYuMT5NYXRoLmFicyhkK2gpJiYuMT5NYXRoLmFicyhnK2spJiYuMT5NYXRoLmFicyhiK2YrbS0zKSlyZXR1cm4gdGhpcy5zZXQoMSwwLDAsMCksdGhpczthPU1hdGguUEk7Yj0oYisxKS8yO2Y9KGYrMSkvMjttPShtKzEpLzI7Yz0oYytlKS80O2Q9KGQraCkvNDtnPShnK2spLzQ7Yj5mJiZiPm0/LjAxPmI/KGs9MCxjPWg9LjcwNzEwNjc4MSk6KGs9TWF0aC5zcXJ0KGIpLGg9Yy9rLGM9ZC9rKTpmPm0/LjAxPmY/KGs9LjcwNzEwNjc4MSxoPTAsYz0uNzA3MTA2NzgxKTooaD1NYXRoLnNxcnQoZiksaz1jL2gsYz1nL2gpOi4wMT5tPyhoPWs9LjcwNzEwNjc4MSxjPTApOihjPU1hdGguc3FydChtKSxrPWQvYyxoPWcvYyk7dGhpcy5zZXQoayxoLGMsYSk7cmV0dXJuIHRoaXN9YT1NYXRoLnNxcnQoKGstZykqKGstZykrKGQtaCkqKGQtaCkrKGUtYykqKGUtYykpOy4wMDE+TWF0aC5hYnMoYSkmJihhPTEpO3RoaXMueD0oay1nKS9hO3RoaXMueT0oZC1oKS9hO3RoaXMuej0oZS1jKS9hO1xuICAgIHRoaXMudz1NYXRoLmFjb3MoKGIrZittLTEpLzIpO3JldHVybiB0aGlzfSxtaW46ZnVuY3Rpb24oYSl7dGhpcy54PU1hdGgubWluKHRoaXMueCxhLngpO3RoaXMueT1NYXRoLm1pbih0aGlzLnksYS55KTt0aGlzLno9TWF0aC5taW4odGhpcy56LGEueik7dGhpcy53PU1hdGgubWluKHRoaXMudyxhLncpO3JldHVybiB0aGlzfSxtYXg6ZnVuY3Rpb24oYSl7dGhpcy54PU1hdGgubWF4KHRoaXMueCxhLngpO3RoaXMueT1NYXRoLm1heCh0aGlzLnksYS55KTt0aGlzLno9TWF0aC5tYXgodGhpcy56LGEueik7dGhpcy53PU1hdGgubWF4KHRoaXMudyxhLncpO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbihhLGIpe3RoaXMueD1NYXRoLm1heChhLngsTWF0aC5taW4oYi54LHRoaXMueCkpO3RoaXMueT1NYXRoLm1heChhLnksTWF0aC5taW4oYi55LHRoaXMueSkpO3RoaXMuej1NYXRoLm1heChhLnosTWF0aC5taW4oYi56LHRoaXMueikpO3RoaXMudz1NYXRoLm1heChhLncsTWF0aC5taW4oYi53LFxuICAgIHRoaXMudykpO3JldHVybiB0aGlzfSxjbGFtcFNjYWxhcjpmdW5jdGlvbigpe3ZhciBhLGI7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IGFhLGI9bmV3IGFhKTthLnNldChjLGMsYyxjKTtiLnNldChkLGQsZCxkKTtyZXR1cm4gdGhpcy5jbGFtcChhLGIpfX0oKSxjbGFtcExlbmd0aDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKGN8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KGEsTWF0aC5taW4oYixjKSkpfSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopO3RoaXMudz1NYXRoLmZsb29yKHRoaXMudyk7cmV0dXJuIHRoaXN9LGNlaWw6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5jZWlsKHRoaXMueCk7dGhpcy55PU1hdGguY2VpbCh0aGlzLnkpO3RoaXMuej1NYXRoLmNlaWwodGhpcy56KTtcbiAgICB0aGlzLnc9TWF0aC5jZWlsKHRoaXMudyk7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3RoaXMuej1NYXRoLnJvdW5kKHRoaXMueik7dGhpcy53PU1hdGgucm91bmQodGhpcy53KTtyZXR1cm4gdGhpc30scm91bmRUb1plcm86ZnVuY3Rpb24oKXt0aGlzLng9MD50aGlzLng/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT0wPnRoaXMueT9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PTA+dGhpcy56P01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9MD50aGlzLnc/TWF0aC5jZWlsKHRoaXMudyk6TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9LXRoaXMueTt0aGlzLno9LXRoaXMuejt0aGlzLnc9LXRoaXMudztyZXR1cm4gdGhpc30sXG4gICAgZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLngqYS54K3RoaXMueSphLnkrdGhpcy56KmEueit0aGlzLncqYS53fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLncpfSxtYW5oYXR0YW5MZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueikrTWF0aC5hYnModGhpcy53KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCl8fDEpfSxzZXRMZW5ndGg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoYSl9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPVxuICAgIChhLngtdGhpcy54KSpiO3RoaXMueSs9KGEueS10aGlzLnkpKmI7dGhpcy56Kz0oYS56LXRoaXMueikqYjt0aGlzLncrPShhLnctdGhpcy53KSpiO3JldHVybiB0aGlzfSxsZXJwVmVjdG9yczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuc3ViVmVjdG9ycyhiLGEpLm11bHRpcGx5U2NhbGFyKGMpLmFkZChhKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLng9PT10aGlzLngmJmEueT09PXRoaXMueSYmYS56PT09dGhpcy56JiZhLnc9PT10aGlzLnd9LGZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMueD1hW2JdO3RoaXMueT1hW2IrMV07dGhpcy56PWFbYisyXTt0aGlzLnc9YVtiKzNdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy54O2FbYisxXT10aGlzLnk7YVtiKzJdPXRoaXMuejthW2IrM109dGhpcy53O3JldHVybiBhfSxmcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKGEsXG4gICAgYixjKXt2b2lkIDAhPT1jJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3RoaXMueD1hLmdldFgoYik7dGhpcy55PWEuZ2V0WShiKTt0aGlzLno9YS5nZXRaKGIpO3RoaXMudz1hLmdldFcoYik7cmV0dXJuIHRoaXN9fSk7a2IucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjprYixpc1dlYkdMUmVuZGVyVGFyZ2V0OiEwLHNldFNpemU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLndpZHRoIT09YXx8dGhpcy5oZWlnaHQhPT1iKXRoaXMud2lkdGg9YSx0aGlzLmhlaWdodD1iLHRoaXMuZGlzcG9zZSgpO3RoaXMudmlld3BvcnQuc2V0KDAsMCxhLGIpO3RoaXMuc2Npc3Nvci5zZXQoMCwwLGEsYil9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMud2lkdGg9XG4gICAgYS53aWR0aDt0aGlzLmhlaWdodD1hLmhlaWdodDt0aGlzLnZpZXdwb3J0LmNvcHkoYS52aWV3cG9ydCk7dGhpcy50ZXh0dXJlPWEudGV4dHVyZS5jbG9uZSgpO3RoaXMuZGVwdGhCdWZmZXI9YS5kZXB0aEJ1ZmZlcjt0aGlzLnN0ZW5jaWxCdWZmZXI9YS5zdGVuY2lsQnVmZmVyO3RoaXMuZGVwdGhUZXh0dXJlPWEuZGVwdGhUZXh0dXJlO3JldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7SmIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoa2IucHJvdG90eXBlKTtKYi5wcm90b3R5cGUuY29uc3RydWN0b3I9SmI7SmIucHJvdG90eXBlLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlPSEwO2xiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFUucHJvdG90eXBlKTtsYi5wcm90b3R5cGUuY29uc3RydWN0b3I9bGI7bGIucHJvdG90eXBlLmlzRGF0YVRleHR1cmU9ITA7ZGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVS5wcm90b3R5cGUpO1xuICAgIGRiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kYjtkYi5wcm90b3R5cGUuaXNDdWJlVGV4dHVyZT0hMDtPYmplY3QuZGVmaW5lUHJvcGVydHkoZGIucHJvdG90eXBlLFwiaW1hZ2VzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltYWdlfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5pbWFnZT1hfX0pO3ZhciBOZT1uZXcgVSxPZT1uZXcgZGIsSWU9W10sS2U9W10sTWU9bmV3IEZsb2F0MzJBcnJheSgxNiksTGU9bmV3IEZsb2F0MzJBcnJheSg5KTtTZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5zZXEsZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKXt2YXIgZj1jW2RdO2Yuc2V0VmFsdWUoYSxiW2YuaWRdKX19O3ZhciBWZD0vKFtcXHdcXGRfXSspKFxcXSk/KFxcW3xcXC4pPy9nO21iLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbihhLGIsYyl7Yj10aGlzLm1hcFtiXTt2b2lkIDAhPT1iJiZiLnNldFZhbHVlKGEsYyx0aGlzLnJlbmRlcmVyKX07bWIucHJvdG90eXBlLnNldE9wdGlvbmFsPVxuICAgIGZ1bmN0aW9uKGEsYixjKXtiPWJbY107dm9pZCAwIT09YiYmdGhpcy5zZXRWYWx1ZShhLGMsYil9O21iLnVwbG9hZD1mdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGU9MCxmPWIubGVuZ3RoO2UhPT1mOysrZSl7dmFyIGc9YltlXSxoPWNbZy5pZF07ITEhPT1oLm5lZWRzVXBkYXRlJiZnLnNldFZhbHVlKGEsaC52YWx1ZSxkKX19O21iLnNlcVdpdGhWYWx1ZT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXSxkPTAsZT1hLmxlbmd0aDtkIT09ZTsrK2Qpe3ZhciBmPWFbZF07Zi5pZCBpbiBiJiZjLnB1c2goZil9cmV0dXJuIGN9O3ZhciBLZz17YWxpY2VibHVlOjE1NzkyMzgzLGFudGlxdWV3aGl0ZToxNjQ0NDM3NSxhcXVhOjY1NTM1LGFxdWFtYXJpbmU6ODM4ODU2NCxhenVyZToxNTc5NDE3NSxiZWlnZToxNjExOTI2MCxiaXNxdWU6MTY3NzAyNDQsYmxhY2s6MCxibGFuY2hlZGFsbW9uZDoxNjc3MjA0NSxibHVlOjI1NSxibHVldmlvbGV0OjkwNTUyMDIsYnJvd246MTA4MjQyMzQsYnVybHl3b29kOjE0NTk2MjMxLFxuICAgIGNhZGV0Ymx1ZTo2MjY2NTI4LGNoYXJ0cmV1c2U6ODM4ODM1MixjaG9jb2xhdGU6MTM3ODk0NzAsY29yYWw6MTY3NDQyNzIsY29ybmZsb3dlcmJsdWU6NjU5MTk4MSxjb3Juc2lsazoxNjc3NTM4OCxjcmltc29uOjE0NDIzMTAwLGN5YW46NjU1MzUsZGFya2JsdWU6MTM5LGRhcmtjeWFuOjM1NzIzLGRhcmtnb2xkZW5yb2Q6MTIwOTI5MzksZGFya2dyYXk6MTExMTkwMTcsZGFya2dyZWVuOjI1NjAwLGRhcmtncmV5OjExMTE5MDE3LGRhcmtraGFraToxMjQzMzI1OSxkYXJrbWFnZW50YTo5MTA5NjQzLGRhcmtvbGl2ZWdyZWVuOjU1OTc5OTksZGFya29yYW5nZToxNjc0NzUyMCxkYXJrb3JjaGlkOjEwMDQwMDEyLGRhcmtyZWQ6OTEwOTUwNCxkYXJrc2FsbW9uOjE1MzA4NDEwLGRhcmtzZWFncmVlbjo5NDE5OTE5LGRhcmtzbGF0ZWJsdWU6NDczNDM0NyxkYXJrc2xhdGVncmF5OjMxMDA0OTUsZGFya3NsYXRlZ3JleTozMTAwNDk1LGRhcmt0dXJxdW9pc2U6NTI5NDUsZGFya3Zpb2xldDo5Njk5NTM5LFxuICAgIGRlZXBwaW5rOjE2NzE2OTQ3LGRlZXBza3libHVlOjQ5MTUxLGRpbWdyYXk6NjkwODI2NSxkaW1ncmV5OjY5MDgyNjUsZG9kZ2VyYmx1ZToyMDAzMTk5LGZpcmVicmljazoxMTY3NDE0NixmbG9yYWx3aGl0ZToxNjc3NTkyMCxmb3Jlc3RncmVlbjoyMjYzODQyLGZ1Y2hzaWE6MTY3MTE5MzUsZ2FpbnNib3JvOjE0NDc0NDYwLGdob3N0d2hpdGU6MTYzMTY2NzEsZ29sZDoxNjc2NjcyMCxnb2xkZW5yb2Q6MTQzMjkxMjAsZ3JheTo4NDIxNTA0LGdyZWVuOjMyNzY4LGdyZWVueWVsbG93OjExNDAzMDU1LGdyZXk6ODQyMTUwNCxob25leWRldzoxNTc5NDE2MCxob3RwaW5rOjE2NzM4NzQwLGluZGlhbnJlZDoxMzQ1ODUyNCxpbmRpZ286NDkxNTMzMCxpdm9yeToxNjc3NzIwMCxraGFraToxNTc4NzY2MCxsYXZlbmRlcjoxNTEzMjQxMCxsYXZlbmRlcmJsdXNoOjE2NzczMzY1LGxhd25ncmVlbjo4MTkwOTc2LGxlbW9uY2hpZmZvbjoxNjc3NTg4NSxsaWdodGJsdWU6MTEzOTMyNTQsbGlnaHRjb3JhbDoxNTc2MTUzNixcbiAgICBsaWdodGN5YW46MTQ3NDU1OTksbGlnaHRnb2xkZW5yb2R5ZWxsb3c6MTY0NDgyMTAsbGlnaHRncmF5OjEzODgyMzIzLGxpZ2h0Z3JlZW46OTQ5ODI1NixsaWdodGdyZXk6MTM4ODIzMjMsbGlnaHRwaW5rOjE2NzU4NDY1LGxpZ2h0c2FsbW9uOjE2NzUyNzYyLGxpZ2h0c2VhZ3JlZW46MjE0Mjg5MCxsaWdodHNreWJsdWU6ODkwMDM0NixsaWdodHNsYXRlZ3JheTo3ODMzNzUzLGxpZ2h0c2xhdGVncmV5Ojc4MzM3NTMsbGlnaHRzdGVlbGJsdWU6MTE1ODQ3MzQsbGlnaHR5ZWxsb3c6MTY3NzcxODQsbGltZTo2NTI4MCxsaW1lZ3JlZW46MzMyOTMzMCxsaW5lbjoxNjQ0NTY3MCxtYWdlbnRhOjE2NzExOTM1LG1hcm9vbjo4Mzg4NjA4LG1lZGl1bWFxdWFtYXJpbmU6NjczNzMyMixtZWRpdW1ibHVlOjIwNSxtZWRpdW1vcmNoaWQ6MTIyMTE2NjcsbWVkaXVtcHVycGxlOjk2NjI2ODMsbWVkaXVtc2VhZ3JlZW46Mzk3ODA5NyxtZWRpdW1zbGF0ZWJsdWU6ODA4Nzc5MCxtZWRpdW1zcHJpbmdncmVlbjo2NDE1NCxcbiAgICBtZWRpdW10dXJxdW9pc2U6NDc3MjMwMCxtZWRpdW12aW9sZXRyZWQ6MTMwNDcxNzMsbWlkbmlnaHRibHVlOjE2NDQ5MTIsbWludGNyZWFtOjE2MTIxODUwLG1pc3R5cm9zZToxNjc3MDI3Myxtb2NjYXNpbjoxNjc3MDIyOSxuYXZham93aGl0ZToxNjc2ODY4NSxuYXZ5OjEyOCxvbGRsYWNlOjE2NjQzNTU4LG9saXZlOjg0MjEzNzYsb2xpdmVkcmFiOjcwNDg3Mzksb3JhbmdlOjE2NzUzOTIwLG9yYW5nZXJlZDoxNjcyOTM0NCxvcmNoaWQ6MTQzMTU3MzQscGFsZWdvbGRlbnJvZDoxNTY1NzEzMCxwYWxlZ3JlZW46MTAwMjU4ODAscGFsZXR1cnF1b2lzZToxMTUyOTk2NixwYWxldmlvbGV0cmVkOjE0MzgxMjAzLHBhcGF5YXdoaXA6MTY3NzMwNzcscGVhY2hwdWZmOjE2NzY3NjczLHBlcnU6MTM0Njg5OTEscGluazoxNjc2MTAzNSxwbHVtOjE0NTI0NjM3LHBvd2RlcmJsdWU6MTE1OTE5MTAscHVycGxlOjgzODg3MzYscmViZWNjYXB1cnBsZTo2Njk3ODgxLHJlZDoxNjcxMTY4MCxyb3N5YnJvd246MTIzNTc1MTksXG4gICAgcm95YWxibHVlOjQyODY5NDUsc2FkZGxlYnJvd246OTEyNzE4NyxzYWxtb246MTY0MTY4ODIsc2FuZHlicm93bjoxNjAzMjg2NCxzZWFncmVlbjozMDUwMzI3LHNlYXNoZWxsOjE2Nzc0NjM4LHNpZW5uYToxMDUwNjc5NyxzaWx2ZXI6MTI2MzIyNTYsc2t5Ymx1ZTo4OTAwMzMxLHNsYXRlYmx1ZTo2OTcwMDYxLHNsYXRlZ3JheTo3MzcyOTQ0LHNsYXRlZ3JleTo3MzcyOTQ0LHNub3c6MTY3NzU5MzAsc3ByaW5nZ3JlZW46NjU0MDcsc3RlZWxibHVlOjQ2MjA5ODAsdGFuOjEzODA4NzgwLHRlYWw6MzI4OTYsdGhpc3RsZToxNDIwNDg4OCx0b21hdG86MTY3MzcwOTUsdHVycXVvaXNlOjQyNTE4NTYsdmlvbGV0OjE1NjMxMDg2LHdoZWF0OjE2MTEzMzMxLHdoaXRlOjE2Nzc3MjE1LHdoaXRlc21va2U6MTYxMTkyODUseWVsbG93OjE2Nzc2OTYwLHllbGxvd2dyZWVuOjEwMTQ1MDc0fTtPYmplY3QuYXNzaWduKEgucHJvdG90eXBlLHtpc0NvbG9yOiEwLHI6MSxnOjEsYjoxLHNldDpmdW5jdGlvbihhKXthJiZcbiAgICBhLmlzQ29sb3I/dGhpcy5jb3B5KGEpOlwibnVtYmVyXCI9PT10eXBlb2YgYT90aGlzLnNldEhleChhKTpcInN0cmluZ1wiPT09dHlwZW9mIGEmJnRoaXMuc2V0U3R5bGUoYSk7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLmI9dGhpcy5nPXRoaXMucj1hO3JldHVybiB0aGlzfSxzZXRIZXg6ZnVuY3Rpb24oYSl7YT1NYXRoLmZsb29yKGEpO3RoaXMucj0oYT4+MTYmMjU1KS8yNTU7dGhpcy5nPShhPj44JjI1NSkvMjU1O3RoaXMuYj0oYSYyNTUpLzI1NTtyZXR1cm4gdGhpc30sc2V0UkdCOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnI9YTt0aGlzLmc9Yjt0aGlzLmI9YztyZXR1cm4gdGhpc30sc2V0SFNMOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMsZCl7MD5kJiYoZCs9MSk7MTxkJiYtLWQ7cmV0dXJuIGQ8MS82P2ErNiooYy1hKSpkOi41PmQ/YzpkPDIvMz9hKzYqKGMtYSkqKDIvMy1kKTphfXJldHVybiBmdW5jdGlvbihiLGMsZCl7Yj1RLmV1Y2xpZGVhbk1vZHVsbyhiLFxuICAgIDEpO2M9US5jbGFtcChjLDAsMSk7ZD1RLmNsYW1wKGQsMCwxKTswPT09Yz90aGlzLnI9dGhpcy5nPXRoaXMuYj1kOihjPS41Pj1kP2QqKDErYyk6ZCtjLWQqYyxkPTIqZC1jLHRoaXMucj1hKGQsYyxiKzEvMyksdGhpcy5nPWEoZCxjLGIpLHRoaXMuYj1hKGQsYyxiLTEvMykpO3JldHVybiB0aGlzfX0oKSxzZXRTdHlsZTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZvaWQgMCE9PWImJjE+cGFyc2VGbG9hdChiKSYmY29uc29sZS53YXJuKFwiVEhSRUUuQ29sb3I6IEFscGhhIGNvbXBvbmVudCBvZiBcIithK1wiIHdpbGwgYmUgaWdub3JlZC5cIil9dmFyIGM7aWYoYz0vXigoPzpyZ2J8aHNsKWE/KVxcKFxccyooW15cXCldKilcXCkvLmV4ZWMoYSkpe3ZhciBkPWNbMl07c3dpdGNoKGNbMV0pe2Nhc2UgXCJyZ2JcIjpjYXNlIFwicmdiYVwiOmlmKGM9L14oXFxkKylcXHMqLFxccyooXFxkKylcXHMqLFxccyooXFxkKylcXHMqKCxcXHMqKFswLTldKlxcLj9bMC05XSspXFxzKik/JC8uZXhlYyhkKSlyZXR1cm4gdGhpcy5yPU1hdGgubWluKDI1NSxcbiAgICBwYXJzZUludChjWzFdLDEwKSkvMjU1LHRoaXMuZz1NYXRoLm1pbigyNTUscGFyc2VJbnQoY1syXSwxMCkpLzI1NSx0aGlzLmI9TWF0aC5taW4oMjU1LHBhcnNlSW50KGNbM10sMTApKS8yNTUsYihjWzVdKSx0aGlzO2lmKGM9L14oXFxkKylcXCVcXHMqLFxccyooXFxkKylcXCVcXHMqLFxccyooXFxkKylcXCVcXHMqKCxcXHMqKFswLTldKlxcLj9bMC05XSspXFxzKik/JC8uZXhlYyhkKSlyZXR1cm4gdGhpcy5yPU1hdGgubWluKDEwMCxwYXJzZUludChjWzFdLDEwKSkvMTAwLHRoaXMuZz1NYXRoLm1pbigxMDAscGFyc2VJbnQoY1syXSwxMCkpLzEwMCx0aGlzLmI9TWF0aC5taW4oMTAwLHBhcnNlSW50KGNbM10sMTApKS8xMDAsYihjWzVdKSx0aGlzO2JyZWFrO2Nhc2UgXCJoc2xcIjpjYXNlIFwiaHNsYVwiOmlmKGM9L14oWzAtOV0qXFwuP1swLTldKylcXHMqLFxccyooXFxkKylcXCVcXHMqLFxccyooXFxkKylcXCVcXHMqKCxcXHMqKFswLTldKlxcLj9bMC05XSspXFxzKik/JC8uZXhlYyhkKSl7dmFyIGQ9cGFyc2VGbG9hdChjWzFdKS8zNjAsXG4gICAgZT1wYXJzZUludChjWzJdLDEwKS8xMDAsZj1wYXJzZUludChjWzNdLDEwKS8xMDA7YihjWzVdKTtyZXR1cm4gdGhpcy5zZXRIU0woZCxlLGYpfX19ZWxzZSBpZihjPS9eXFwjKFtBLUZhLWYwLTldKykkLy5leGVjKGEpKXtjPWNbMV07ZD1jLmxlbmd0aDtpZigzPT09ZClyZXR1cm4gdGhpcy5yPXBhcnNlSW50KGMuY2hhckF0KDApK2MuY2hhckF0KDApLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KGMuY2hhckF0KDEpK2MuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KGMuY2hhckF0KDIpK2MuY2hhckF0KDIpLDE2KS8yNTUsdGhpcztpZig2PT09ZClyZXR1cm4gdGhpcy5yPXBhcnNlSW50KGMuY2hhckF0KDApK2MuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KGMuY2hhckF0KDIpK2MuY2hhckF0KDMpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KGMuY2hhckF0KDQpK2MuY2hhckF0KDUpLDE2KS8yNTUsdGhpc31hJiYwPGEubGVuZ3RoJiYoYz1LZ1thXSx2b2lkIDAhPT1cbiAgICBjP3RoaXMuc2V0SGV4KGMpOmNvbnNvbGUud2FybihcIlRIUkVFLkNvbG9yOiBVbmtub3duIGNvbG9yIFwiK2EpKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5yLHRoaXMuZyx0aGlzLmIpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMucj1hLnI7dGhpcy5nPWEuZzt0aGlzLmI9YS5iO3JldHVybiB0aGlzfSxjb3B5R2FtbWFUb0xpbmVhcjpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTIpO3RoaXMucj1NYXRoLnBvdyhhLnIsYik7dGhpcy5nPU1hdGgucG93KGEuZyxiKTt0aGlzLmI9TWF0aC5wb3coYS5iLGIpO3JldHVybiB0aGlzfSxjb3B5TGluZWFyVG9HYW1tYTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTIpO2I9MDxiPzEvYjoxO3RoaXMucj1NYXRoLnBvdyhhLnIsYik7dGhpcy5nPU1hdGgucG93KGEuZyxiKTt0aGlzLmI9TWF0aC5wb3coYS5iLGIpO3JldHVybiB0aGlzfSxjb252ZXJ0R2FtbWFUb0xpbmVhcjpmdW5jdGlvbigpe3ZhciBhPVxuICAgIHRoaXMucixiPXRoaXMuZyxjPXRoaXMuYjt0aGlzLnI9YSphO3RoaXMuZz1iKmI7dGhpcy5iPWMqYztyZXR1cm4gdGhpc30sY29udmVydExpbmVhclRvR2FtbWE6ZnVuY3Rpb24oKXt0aGlzLnI9TWF0aC5zcXJ0KHRoaXMucik7dGhpcy5nPU1hdGguc3FydCh0aGlzLmcpO3RoaXMuYj1NYXRoLnNxcnQodGhpcy5iKTtyZXR1cm4gdGhpc30sZ2V0SGV4OmZ1bmN0aW9uKCl7cmV0dXJuIDI1NSp0aGlzLnI8PDE2XjI1NSp0aGlzLmc8PDheMjU1KnRoaXMuYjw8MH0sZ2V0SGV4U3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuKFwiMDAwMDAwXCIrdGhpcy5nZXRIZXgoKS50b1N0cmluZygxNikpLnNsaWNlKC02KX0sZ2V0SFNMOmZ1bmN0aW9uKGEpe2E9YXx8e2g6MCxzOjAsbDowfTt2YXIgYj10aGlzLnIsYz10aGlzLmcsZD10aGlzLmIsZT1NYXRoLm1heChiLGMsZCksZj1NYXRoLm1pbihiLGMsZCksZyxoPShmK2UpLzI7aWYoZj09PWUpZj1nPTA7ZWxzZXt2YXIgaz1lLWYsZj0uNT49aD9rLyhlK2YpOlxuICAgIGsvKDItZS1mKTtzd2l0Y2goZSl7Y2FzZSBiOmc9KGMtZCkvaysoYzxkPzY6MCk7YnJlYWs7Y2FzZSBjOmc9KGQtYikvaysyO2JyZWFrO2Nhc2UgZDpnPShiLWMpL2srNH1nLz02fWEuaD1nO2Eucz1mO2EubD1oO3JldHVybiBhfSxnZXRTdHlsZTpmdW5jdGlvbigpe3JldHVyblwicmdiKFwiKygyNTUqdGhpcy5yfDApK1wiLFwiKygyNTUqdGhpcy5nfDApK1wiLFwiKygyNTUqdGhpcy5ifDApK1wiKVwifSxvZmZzZXRIU0w6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0SFNMKCk7ZC5oKz1hO2Qucys9YjtkLmwrPWM7dGhpcy5zZXRIU0woZC5oLGQucyxkLmwpO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSl7dGhpcy5yKz1hLnI7dGhpcy5nKz1hLmc7dGhpcy5iKz1hLmI7cmV0dXJuIHRoaXN9LGFkZENvbG9yczpmdW5jdGlvbihhLGIpe3RoaXMucj1hLnIrYi5yO3RoaXMuZz1hLmcrYi5nO3RoaXMuYj1hLmIrYi5iO3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5yKz1cbiAgICBhO3RoaXMuZys9YTt0aGlzLmIrPWE7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhKXt0aGlzLnI9TWF0aC5tYXgoMCx0aGlzLnItYS5yKTt0aGlzLmc9TWF0aC5tYXgoMCx0aGlzLmctYS5nKTt0aGlzLmI9TWF0aC5tYXgoMCx0aGlzLmItYS5iKTtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSl7dGhpcy5yKj1hLnI7dGhpcy5nKj1hLmc7dGhpcy5iKj1hLmI7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMucio9YTt0aGlzLmcqPWE7dGhpcy5iKj1hO3JldHVybiB0aGlzfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy5yKz0oYS5yLXRoaXMucikqYjt0aGlzLmcrPShhLmctdGhpcy5nKSpiO3RoaXMuYis9KGEuYi10aGlzLmIpKmI7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5yPT09dGhpcy5yJiZhLmc9PT10aGlzLmcmJmEuYj09PXRoaXMuYn0sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9XG4gICAgMCk7dGhpcy5yPWFbYl07dGhpcy5nPWFbYisxXTt0aGlzLmI9YVtiKzJdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy5yO2FbYisxXT10aGlzLmc7YVtiKzJdPXRoaXMuYjtyZXR1cm4gYX0sdG9KU09OOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SGV4KCl9fSk7dmFyIEs9e2NvbW1vbjp7ZGlmZnVzZTp7dmFsdWU6bmV3IEgoMTU2NTg3MzQpfSxvcGFjaXR5Ont2YWx1ZToxfSxtYXA6e3ZhbHVlOm51bGx9LHV2VHJhbnNmb3JtOnt2YWx1ZTpuZXcgbWF9LGFscGhhTWFwOnt2YWx1ZTpudWxsfX0sc3BlY3VsYXJtYXA6e3NwZWN1bGFyTWFwOnt2YWx1ZTpudWxsfX0sZW52bWFwOntlbnZNYXA6e3ZhbHVlOm51bGx9LGZsaXBFbnZNYXA6e3ZhbHVlOi0xfSxyZWZsZWN0aXZpdHk6e3ZhbHVlOjF9LHJlZnJhY3Rpb25SYXRpbzp7dmFsdWU6Ljk4fX0sYW9tYXA6e2FvTWFwOnt2YWx1ZTpudWxsfSxcbiAgICBhb01hcEludGVuc2l0eTp7dmFsdWU6MX19LGxpZ2h0bWFwOntsaWdodE1hcDp7dmFsdWU6bnVsbH0sbGlnaHRNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fSxlbWlzc2l2ZW1hcDp7ZW1pc3NpdmVNYXA6e3ZhbHVlOm51bGx9fSxidW1wbWFwOntidW1wTWFwOnt2YWx1ZTpudWxsfSxidW1wU2NhbGU6e3ZhbHVlOjF9fSxub3JtYWxtYXA6e25vcm1hbE1hcDp7dmFsdWU6bnVsbH0sbm9ybWFsU2NhbGU6e3ZhbHVlOm5ldyBEKDEsMSl9fSxkaXNwbGFjZW1lbnRtYXA6e2Rpc3BsYWNlbWVudE1hcDp7dmFsdWU6bnVsbH0sZGlzcGxhY2VtZW50U2NhbGU6e3ZhbHVlOjF9LGRpc3BsYWNlbWVudEJpYXM6e3ZhbHVlOjB9fSxyb3VnaG5lc3NtYXA6e3JvdWdobmVzc01hcDp7dmFsdWU6bnVsbH19LG1ldGFsbmVzc21hcDp7bWV0YWxuZXNzTWFwOnt2YWx1ZTpudWxsfX0sZ3JhZGllbnRtYXA6e2dyYWRpZW50TWFwOnt2YWx1ZTpudWxsfX0sZm9nOntmb2dEZW5zaXR5Ont2YWx1ZToyLjVFLTR9LGZvZ05lYXI6e3ZhbHVlOjF9LFxuICAgIGZvZ0Zhcjp7dmFsdWU6MkUzfSxmb2dDb2xvcjp7dmFsdWU6bmV3IEgoMTY3NzcyMTUpfX0sbGlnaHRzOnthbWJpZW50TGlnaHRDb2xvcjp7dmFsdWU6W119LGRpcmVjdGlvbmFsTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntkaXJlY3Rpb246e30sY29sb3I6e30sc2hhZG93Ont9LHNoYWRvd0JpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e319fSxkaXJlY3Rpb25hbFNoYWRvd01hcDp7dmFsdWU6W119LGRpcmVjdGlvbmFsU2hhZG93TWF0cml4Ont2YWx1ZTpbXX0sc3BvdExpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7Y29sb3I6e30scG9zaXRpb246e30sZGlyZWN0aW9uOnt9LGRpc3RhbmNlOnt9LGNvbmVDb3M6e30scGVudW1icmFDb3M6e30sZGVjYXk6e30sc2hhZG93Ont9LHNoYWRvd0JpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e319fSxzcG90U2hhZG93TWFwOnt2YWx1ZTpbXX0sc3BvdFNoYWRvd01hdHJpeDp7dmFsdWU6W119LFxuICAgIHBvaW50TGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSxkZWNheTp7fSxkaXN0YW5jZTp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fSxzaGFkb3dDYW1lcmFOZWFyOnt9LHNoYWRvd0NhbWVyYUZhcjp7fX19LHBvaW50U2hhZG93TWFwOnt2YWx1ZTpbXX0scG9pbnRTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxoZW1pc3BoZXJlTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntkaXJlY3Rpb246e30sc2t5Q29sb3I6e30sZ3JvdW5kQ29sb3I6e319fSxyZWN0QXJlYUxpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7Y29sb3I6e30scG9zaXRpb246e30sd2lkdGg6e30saGVpZ2h0Ont9fX19LHBvaW50czp7ZGlmZnVzZTp7dmFsdWU6bmV3IEgoMTU2NTg3MzQpfSxvcGFjaXR5Ont2YWx1ZToxfSxzaXplOnt2YWx1ZToxfSxzY2FsZTp7dmFsdWU6MX0sbWFwOnt2YWx1ZTpudWxsfSx1dlRyYW5zZm9ybTp7dmFsdWU6bmV3IG1hfX19LFxuICAgIEdhPXttZXJnZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9e30sYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD10aGlzLmNsb25lKGFbY10pLGU7Zm9yKGUgaW4gZCliW2VdPWRbZV19cmV0dXJuIGJ9LGNsb25lOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM7Zm9yKGMgaW4gYSl7YltjXT17fTtmb3IodmFyIGQgaW4gYVtjXSl7dmFyIGU9YVtjXVtkXTtlJiYoZS5pc0NvbG9yfHxlLmlzTWF0cml4M3x8ZS5pc01hdHJpeDR8fGUuaXNWZWN0b3IyfHxlLmlzVmVjdG9yM3x8ZS5pc1ZlY3RvcjR8fGUuaXNUZXh0dXJlKT9iW2NdW2RdPWUuY2xvbmUoKTpBcnJheS5pc0FycmF5KGUpP2JbY11bZF09ZS5zbGljZSgpOmJbY11bZF09ZX19cmV0dXJuIGJ9fSxSPXthbHBoYW1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHRkaWZmdXNlQ29sb3IuYSAqPSB0ZXh0dXJlMkQoIGFscGhhTWFwLCB2VXYgKS5nO1xcbiNlbmRpZlxcblwiLGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0FMUEhBTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYWxwaGFNYXA7XFxuI2VuZGlmXFxuXCIsXG4gICAgYWxwaGF0ZXN0X2ZyYWdtZW50OlwiI2lmZGVmIEFMUEhBVEVTVFxcblxcdGlmICggZGlmZnVzZUNvbG9yLmEgPCBBTFBIQVRFU1QgKSBkaXNjYXJkO1xcbiNlbmRpZlxcblwiLGFvbWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9BT01BUFxcblxcdGZsb2F0IGFtYmllbnRPY2NsdXNpb24gPSAoIHRleHR1cmUyRCggYW9NYXAsIHZVdjIgKS5yIC0gMS4wICkgKiBhb01hcEludGVuc2l0eSArIDEuMDtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gYW1iaWVudE9jY2x1c2lvbjtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFBIWVNJQ0FMIClcXG5cXHRcXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciAqPSBjb21wdXRlU3BlY3VsYXJPY2NsdXNpb24oIGRvdE5WLCBhbWJpZW50T2NjbHVzaW9uLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuICAgIGFvbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0FPTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYW9NYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBhb01hcEludGVuc2l0eTtcXG4jZW5kaWZcIixiZWdpbl92ZXJ0ZXg6XCJcXG52ZWMzIHRyYW5zZm9ybWVkID0gdmVjMyggcG9zaXRpb24gKTtcXG5cIixiZWdpbm5vcm1hbF92ZXJ0ZXg6XCJcXG52ZWMzIG9iamVjdE5vcm1hbCA9IHZlYzMoIG5vcm1hbCApO1xcblwiLGJzZGZzOlwiZmxvYXQgcHVuY3R1YWxMaWdodEludGVuc2l0eVRvSXJyYWRpYW5jZUZhY3RvciggY29uc3QgaW4gZmxvYXQgbGlnaHREaXN0YW5jZSwgY29uc3QgaW4gZmxvYXQgY3V0b2ZmRGlzdGFuY2UsIGNvbnN0IGluIGZsb2F0IGRlY2F5RXhwb25lbnQgKSB7XFxuXFx0aWYoIGRlY2F5RXhwb25lbnQgPiAwLjAgKSB7XFxuI2lmIGRlZmluZWQgKCBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTIClcXG5cXHRcXHRmbG9hdCBkaXN0YW5jZUZhbGxvZmYgPSAxLjAgLyBtYXgoIHBvdyggbGlnaHREaXN0YW5jZSwgZGVjYXlFeHBvbmVudCApLCAwLjAxICk7XFxuXFx0XFx0ZmxvYXQgbWF4RGlzdGFuY2VDdXRvZmZGYWN0b3IgPSBwb3cyKCBzYXR1cmF0ZSggMS4wIC0gcG93NCggbGlnaHREaXN0YW5jZSAvIGN1dG9mZkRpc3RhbmNlICkgKSApO1xcblxcdFxcdHJldHVybiBkaXN0YW5jZUZhbGxvZmYgKiBtYXhEaXN0YW5jZUN1dG9mZkZhY3RvcjtcXG4jZWxzZVxcblxcdFxcdHJldHVybiBwb3coIHNhdHVyYXRlKCAtbGlnaHREaXN0YW5jZSAvIGN1dG9mZkRpc3RhbmNlICsgMS4wICksIGRlY2F5RXhwb25lbnQgKTtcXG4jZW5kaWZcXG5cXHR9XFxuXFx0cmV0dXJuIDEuMDtcXG59XFxudmVjMyBCUkRGX0RpZmZ1c2VfTGFtYmVydCggY29uc3QgaW4gdmVjMyBkaWZmdXNlQ29sb3IgKSB7XFxuXFx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiBkaWZmdXNlQ29sb3I7XFxufVxcbnZlYzMgRl9TY2hsaWNrKCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IGRvdExIICkge1xcblxcdGZsb2F0IGZyZXNuZWwgPSBleHAyKCAoIC01LjU1NDczICogZG90TEggLSA2Ljk4MzE2ICkgKiBkb3RMSCApO1xcblxcdHJldHVybiAoIDEuMCAtIHNwZWN1bGFyQ29sb3IgKSAqIGZyZXNuZWwgKyBzcGVjdWxhckNvbG9yO1xcbn1cXG5mbG9hdCBHX0dHWF9TbWl0aCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZ2wgPSBkb3ROTCArIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xcblxcdGZsb2F0IGd2ID0gZG90TlYgKyBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5WICkgKTtcXG5cXHRyZXR1cm4gMS4wIC8gKCBnbCAqIGd2ICk7XFxufVxcbmZsb2F0IEdfR0dYX1NtaXRoQ29ycmVsYXRlZCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZ3YgPSBkb3ROTCAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TlYgKSApO1xcblxcdGZsb2F0IGdsID0gZG90TlYgKiBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5MICkgKTtcXG5cXHRyZXR1cm4gMC41IC8gbWF4KCBndiArIGdsLCBFUFNJTE9OICk7XFxufVxcbmZsb2F0IERfR0dYKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkggKSB7XFxuXFx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xcblxcdGZsb2F0IGRlbm9tID0gcG93MiggZG90TkggKSAqICggYTIgLSAxLjAgKSArIDEuMDtcXG5cXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqIGEyIC8gcG93MiggZGVub20gKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWCggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBpbmNpZGVudExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBhbHBoYSA9IHBvdzIoIHJvdWdobmVzcyApO1xcblxcdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKyBnZW9tZXRyeS52aWV3RGlyICk7XFxuXFx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXFx0ZmxvYXQgZG90TkggPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhhbGZEaXIgKSApO1xcblxcdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cXHRmbG9hdCBHID0gR19HR1hfU21pdGhDb3JyZWxhdGVkKCBhbHBoYSwgZG90TkwsIGRvdE5WICk7XFxuXFx0ZmxvYXQgRCA9IERfR0dYKCBhbHBoYSwgZG90TkggKTtcXG5cXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxudmVjMiBMVENfVXYoIGNvbnN0IGluIHZlYzMgTiwgY29uc3QgaW4gdmVjMyBWLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0Y29uc3QgZmxvYXQgTFVUX1NJWkUgID0gNjQuMDtcXG5cXHRjb25zdCBmbG9hdCBMVVRfU0NBTEUgPSAoIExVVF9TSVpFIC0gMS4wICkgLyBMVVRfU0laRTtcXG5cXHRjb25zdCBmbG9hdCBMVVRfQklBUyAgPSAwLjUgLyBMVVRfU0laRTtcXG5cXHRmbG9hdCB0aGV0YSA9IGFjb3MoIGRvdCggTiwgViApICk7XFxuXFx0dmVjMiB1diA9IHZlYzIoXFxuXFx0XFx0c3FydCggc2F0dXJhdGUoIHJvdWdobmVzcyApICksXFxuXFx0XFx0c2F0dXJhdGUoIHRoZXRhIC8gKCAwLjUgKiBQSSApICkgKTtcXG5cXHR1diA9IHV2ICogTFVUX1NDQUxFICsgTFVUX0JJQVM7XFxuXFx0cmV0dXJuIHV2O1xcbn1cXG5mbG9hdCBMVENfQ2xpcHBlZFNwaGVyZUZvcm1GYWN0b3IoIGNvbnN0IGluIHZlYzMgZiApIHtcXG5cXHRmbG9hdCBsID0gbGVuZ3RoKCBmICk7XFxuXFx0cmV0dXJuIG1heCggKCBsICogbCArIGYueiApIC8gKCBsICsgMS4wICksIDAuMCApO1xcbn1cXG52ZWMzIExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29uc3QgaW4gdmVjMyB2MSwgY29uc3QgaW4gdmVjMyB2MiApIHtcXG5cXHRmbG9hdCB4ID0gZG90KCB2MSwgdjIgKTtcXG5cXHRmbG9hdCB5ID0gYWJzKCB4ICk7XFxuXFx0ZmxvYXQgYSA9IDAuODYyNjcgKyAoMC40OTc4OCArIDAuMDE0MzYgKiB5ICkgKiB5O1xcblxcdGZsb2F0IGIgPSAzLjQ1MDY4ICsgKDQuMTg4MTQgKyB5KSAqIHk7XFxuXFx0ZmxvYXQgdiA9IGEgLyBiO1xcblxcdGZsb2F0IHRoZXRhX3NpbnRoZXRhID0gKHggPiAwLjApID8gdiA6IDAuNSAqIGludmVyc2VzcXJ0KCAxLjAgLSB4ICogeCApIC0gdjtcXG5cXHRyZXR1cm4gY3Jvc3MoIHYxLCB2MiApICogdGhldGFfc2ludGhldGE7XFxufVxcbnZlYzMgTFRDX0V2YWx1YXRlKCBjb25zdCBpbiB2ZWMzIE4sIGNvbnN0IGluIHZlYzMgViwgY29uc3QgaW4gdmVjMyBQLCBjb25zdCBpbiBtYXQzIG1JbnYsIGNvbnN0IGluIHZlYzMgcmVjdENvb3Jkc1sgNCBdICkge1xcblxcdHZlYzMgdjEgPSByZWN0Q29vcmRzWyAxIF0gLSByZWN0Q29vcmRzWyAwIF07XFxuXFx0dmVjMyB2MiA9IHJlY3RDb29yZHNbIDMgXSAtIHJlY3RDb29yZHNbIDAgXTtcXG5cXHR2ZWMzIGxpZ2h0Tm9ybWFsID0gY3Jvc3MoIHYxLCB2MiApO1xcblxcdGlmKCBkb3QoIGxpZ2h0Tm9ybWFsLCBQIC0gcmVjdENvb3Jkc1sgMCBdICkgPCAwLjAgKSByZXR1cm4gdmVjMyggMC4wICk7XFxuXFx0dmVjMyBUMSwgVDI7XFxuXFx0VDEgPSBub3JtYWxpemUoIFYgLSBOICogZG90KCBWLCBOICkgKTtcXG5cXHRUMiA9IC0gY3Jvc3MoIE4sIFQxICk7XFxuXFx0bWF0MyBtYXQgPSBtSW52ICogdHJhbnNwb3NlTWF0MyggbWF0MyggVDEsIFQyLCBOICkgKTtcXG5cXHR2ZWMzIGNvb3Jkc1sgNCBdO1xcblxcdGNvb3Jkc1sgMCBdID0gbWF0ICogKCByZWN0Q29vcmRzWyAwIF0gLSBQICk7XFxuXFx0Y29vcmRzWyAxIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDEgXSAtIFAgKTtcXG5cXHRjb29yZHNbIDIgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMiBdIC0gUCApO1xcblxcdGNvb3Jkc1sgMyBdID0gbWF0ICogKCByZWN0Q29vcmRzWyAzIF0gLSBQICk7XFxuXFx0Y29vcmRzWyAwIF0gPSBub3JtYWxpemUoIGNvb3Jkc1sgMCBdICk7XFxuXFx0Y29vcmRzWyAxIF0gPSBub3JtYWxpemUoIGNvb3Jkc1sgMSBdICk7XFxuXFx0Y29vcmRzWyAyIF0gPSBub3JtYWxpemUoIGNvb3Jkc1sgMiBdICk7XFxuXFx0Y29vcmRzWyAzIF0gPSBub3JtYWxpemUoIGNvb3Jkc1sgMyBdICk7XFxuXFx0dmVjMyB2ZWN0b3JGb3JtRmFjdG9yID0gdmVjMyggMC4wICk7XFxuXFx0dmVjdG9yRm9ybUZhY3RvciArPSBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvb3Jkc1sgMCBdLCBjb29yZHNbIDEgXSApO1xcblxcdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDEgXSwgY29vcmRzWyAyIF0gKTtcXG5cXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAyIF0sIGNvb3Jkc1sgMyBdICk7XFxuXFx0dmVjdG9yRm9ybUZhY3RvciArPSBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvb3Jkc1sgMyBdLCBjb29yZHNbIDAgXSApO1xcblxcdHZlYzMgcmVzdWx0ID0gdmVjMyggTFRDX0NsaXBwZWRTcGhlcmVGb3JtRmFjdG9yKCB2ZWN0b3JGb3JtRmFjdG9yICkgKTtcXG5cXHRyZXR1cm4gcmVzdWx0O1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfR0dYX0Vudmlyb25tZW50KCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXFx0Y29uc3QgdmVjNCBjMCA9IHZlYzQoIC0gMSwgLSAwLjAyNzUsIC0gMC41NzIsIDAuMDIyICk7XFxuXFx0Y29uc3QgdmVjNCBjMSA9IHZlYzQoIDEsIDAuMDQyNSwgMS4wNCwgLSAwLjA0ICk7XFxuXFx0dmVjNCByID0gcm91Z2huZXNzICogYzAgKyBjMTtcXG5cXHRmbG9hdCBhMDA0ID0gbWluKCByLnggKiByLngsIGV4cDIoIC0gOS4yOCAqIGRvdE5WICkgKSAqIHIueCArIHIueTtcXG5cXHR2ZWMyIEFCID0gdmVjMiggLTEuMDQsIDEuMDQgKSAqIGEwMDQgKyByLnp3O1xcblxcdHJldHVybiBzcGVjdWxhckNvbG9yICogQUIueCArIEFCLnk7XFxufVxcbmZsb2F0IEdfQmxpbm5QaG9uZ19JbXBsaWNpdCggKSB7XFxuXFx0cmV0dXJuIDAuMjU7XFxufVxcbmZsb2F0IERfQmxpbm5QaG9uZyggY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzLCBjb25zdCBpbiBmbG9hdCBkb3ROSCApIHtcXG5cXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqICggc2hpbmluZXNzICogMC41ICsgMS4wICkgKiBwb3coIGRvdE5ILCBzaGluaW5lc3MgKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0JsaW5uUGhvbmcoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgaW5jaWRlbnRMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCBzaGluaW5lc3MgKSB7XFxuXFx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiArIGdlb21ldHJ5LnZpZXdEaXIgKTtcXG5cXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGFsZkRpciApICk7XFxuXFx0ZmxvYXQgZG90TEggPSBzYXR1cmF0ZSggZG90KCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiwgaGFsZkRpciApICk7XFxuXFx0dmVjMyBGID0gRl9TY2hsaWNrKCBzcGVjdWxhckNvbG9yLCBkb3RMSCApO1xcblxcdGZsb2F0IEcgPSBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICk7XFxuXFx0ZmxvYXQgRCA9IERfQmxpbm5QaG9uZyggc2hpbmluZXNzLCBkb3ROSCApO1xcblxcdHJldHVybiBGICogKCBHICogRCApO1xcbn1cXG5mbG9hdCBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIGNvbnN0IGluIGZsb2F0IGdneFJvdWdobmVzcyApIHtcXG5cXHRyZXR1cm4gKCAyLjAgLyBwb3cyKCBnZ3hSb3VnaG5lc3MgKyAwLjAwMDEgKSAtIDIuMCApO1xcbn1cXG5mbG9hdCBCbGlubkV4cG9uZW50VG9HR1hSb3VnaG5lc3MoIGNvbnN0IGluIGZsb2F0IGJsaW5uRXhwb25lbnQgKSB7XFxuXFx0cmV0dXJuIHNxcnQoIDIuMCAvICggYmxpbm5FeHBvbmVudCArIDIuMCApICk7XFxufVxcblwiLFxuICAgIGJ1bXBtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQlVNUE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGJ1bXBNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBidW1wU2NhbGU7XFxuXFx0dmVjMiBkSGR4eV9md2QoKSB7XFxuXFx0XFx0dmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xcblxcdFxcdHZlYzIgZFNUZHkgPSBkRmR5KCB2VXYgKTtcXG5cXHRcXHRmbG9hdCBIbGwgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiApLng7XFxuXFx0XFx0ZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XFxuXFx0XFx0ZmxvYXQgZEJ5ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeSApLnggLSBIbGw7XFxuXFx0XFx0cmV0dXJuIHZlYzIoIGRCeCwgZEJ5ICk7XFxuXFx0fVxcblxcdHZlYzMgcGVydHVyYk5vcm1hbEFyYiggdmVjMyBzdXJmX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzIgZEhkeHkgKSB7XFxuXFx0XFx0dmVjMyB2U2lnbWFYID0gdmVjMyggZEZkeCggc3VyZl9wb3MueCApLCBkRmR4KCBzdXJmX3Bvcy55ICksIGRGZHgoIHN1cmZfcG9zLnogKSApO1xcblxcdFxcdHZlYzMgdlNpZ21hWSA9IHZlYzMoIGRGZHkoIHN1cmZfcG9zLnggKSwgZEZkeSggc3VyZl9wb3MueSApLCBkRmR5KCBzdXJmX3Bvcy56ICkgKTtcXG5cXHRcXHR2ZWMzIHZOID0gc3VyZl9ub3JtO1xcblxcdFxcdHZlYzMgUjEgPSBjcm9zcyggdlNpZ21hWSwgdk4gKTtcXG5cXHRcXHR2ZWMzIFIyID0gY3Jvc3MoIHZOLCB2U2lnbWFYICk7XFxuXFx0XFx0ZmxvYXQgZkRldCA9IGRvdCggdlNpZ21hWCwgUjEgKTtcXG5cXHRcXHR2ZWMzIHZHcmFkID0gc2lnbiggZkRldCApICogKCBkSGR4eS54ICogUjEgKyBkSGR4eS55ICogUjIgKTtcXG5cXHRcXHRyZXR1cm4gbm9ybWFsaXplKCBhYnMoIGZEZXQgKSAqIHN1cmZfbm9ybSAtIHZHcmFkICk7XFxuXFx0fVxcbiNlbmRpZlxcblwiLFxuICAgIGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudDpcIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IFVOSU9OX0NMSVBQSU5HX1BMQU5FUzsgKysgaSApIHtcXG5cXHRcXHR2ZWM0IHBsYW5lID0gY2xpcHBpbmdQbGFuZXNbIGkgXTtcXG5cXHRcXHRpZiAoIGRvdCggdlZpZXdQb3NpdGlvbiwgcGxhbmUueHl6ICkgPiBwbGFuZS53ICkgZGlzY2FyZDtcXG5cXHR9XFxuXFx0XFx0XFxuXFx0I2lmIFVOSU9OX0NMSVBQSU5HX1BMQU5FUyA8IE5VTV9DTElQUElOR19QTEFORVNcXG5cXHRcXHRib29sIGNsaXBwZWQgPSB0cnVlO1xcblxcdFxcdGZvciAoIGludCBpID0gVU5JT05fQ0xJUFBJTkdfUExBTkVTOyBpIDwgTlVNX0NMSVBQSU5HX1BMQU5FUzsgKysgaSApIHtcXG5cXHRcXHRcXHR2ZWM0IHBsYW5lID0gY2xpcHBpbmdQbGFuZXNbIGkgXTtcXG5cXHRcXHRcXHRjbGlwcGVkID0gKCBkb3QoIHZWaWV3UG9zaXRpb24sIHBsYW5lLnh5eiApID4gcGxhbmUudyApICYmIGNsaXBwZWQ7XFxuXFx0XFx0fVxcblxcdFxcdGlmICggY2xpcHBlZCApIGRpc2NhcmQ7XFxuXFx0XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG4gICAgY2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ6XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcXG5cXHQjaWYgISBkZWZpbmVkKCBQSFlTSUNBTCApICYmICEgZGVmaW5lZCggUEhPTkcgKVxcblxcdFxcdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcblxcdCNlbmRpZlxcblxcdHVuaWZvcm0gdmVjNCBjbGlwcGluZ1BsYW5lc1sgTlVNX0NMSVBQSU5HX1BMQU5FUyBdO1xcbiNlbmRpZlxcblwiLGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleDpcIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMCAmJiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgISBkZWZpbmVkKCBQSE9ORyApXFxuXFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuXCIsY2xpcHBpbmdfcGxhbmVzX3ZlcnRleDpcIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMCAmJiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgISBkZWZpbmVkKCBQSE9ORyApXFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuI2VuZGlmXFxuXCIsXG4gICAgY29sb3JfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0ZGlmZnVzZUNvbG9yLnJnYiAqPSB2Q29sb3I7XFxuI2VuZGlmXCIsY29sb3JfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQ09MT1JcXG5cXHR2YXJ5aW5nIHZlYzMgdkNvbG9yO1xcbiNlbmRpZlxcblwiLGNvbG9yX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdHZhcnlpbmcgdmVjMyB2Q29sb3I7XFxuI2VuZGlmXCIsY29sb3JfdmVydGV4OlwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdHZDb2xvci54eXogPSBjb2xvci54eXo7XFxuI2VuZGlmXCIsY29tbW9uOlwiI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU5XFxuI2RlZmluZSBQSTIgNi4yODMxODUzMDcxOFxcbiNkZWZpbmUgUElfSEFMRiAxLjU3MDc5NjMyNjc5NDlcXG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkgMC4zMTgzMDk4ODYxOFxcbiNkZWZpbmUgUkVDSVBST0NBTF9QSTIgMC4xNTkxNTQ5NFxcbiNkZWZpbmUgTE9HMiAxLjQ0MjY5NVxcbiNkZWZpbmUgRVBTSUxPTiAxZS02XFxuI2RlZmluZSBzYXR1cmF0ZShhKSBjbGFtcCggYSwgMC4wLCAxLjAgKVxcbiNkZWZpbmUgd2hpdGVDb21wbGltZW50KGEpICggMS4wIC0gc2F0dXJhdGUoIGEgKSApXFxuZmxvYXQgcG93MiggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeDsgfVxcbmZsb2F0IHBvdzMoIGNvbnN0IGluIGZsb2F0IHggKSB7IHJldHVybiB4KngqeDsgfVxcbmZsb2F0IHBvdzQoIGNvbnN0IGluIGZsb2F0IHggKSB7IGZsb2F0IHgyID0geCp4OyByZXR1cm4geDIqeDI7IH1cXG5mbG9hdCBhdmVyYWdlKCBjb25zdCBpbiB2ZWMzIGNvbG9yICkgeyByZXR1cm4gZG90KCBjb2xvciwgdmVjMyggMC4zMzMzICkgKTsgfVxcbmhpZ2hwIGZsb2F0IHJhbmQoIGNvbnN0IGluIHZlYzIgdXYgKSB7XFxuXFx0Y29uc3QgaGlnaHAgZmxvYXQgYSA9IDEyLjk4OTgsIGIgPSA3OC4yMzMsIGMgPSA0Mzc1OC41NDUzO1xcblxcdGhpZ2hwIGZsb2F0IGR0ID0gZG90KCB1di54eSwgdmVjMiggYSxiICkgKSwgc24gPSBtb2QoIGR0LCBQSSApO1xcblxcdHJldHVybiBmcmFjdChzaW4oc24pICogYyk7XFxufVxcbnN0cnVjdCBJbmNpZGVudExpZ2h0IHtcXG5cXHR2ZWMzIGNvbG9yO1xcblxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdGJvb2wgdmlzaWJsZTtcXG59O1xcbnN0cnVjdCBSZWZsZWN0ZWRMaWdodCB7XFxuXFx0dmVjMyBkaXJlY3REaWZmdXNlO1xcblxcdHZlYzMgZGlyZWN0U3BlY3VsYXI7XFxuXFx0dmVjMyBpbmRpcmVjdERpZmZ1c2U7XFxuXFx0dmVjMyBpbmRpcmVjdFNwZWN1bGFyO1xcbn07XFxuc3RydWN0IEdlb21ldHJpY0NvbnRleHQge1xcblxcdHZlYzMgcG9zaXRpb247XFxuXFx0dmVjMyBub3JtYWw7XFxuXFx0dmVjMyB2aWV3RGlyO1xcbn07XFxudmVjMyB0cmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcXG5cXHRyZXR1cm4gbm9ybWFsaXplKCAoIG1hdHJpeCAqIHZlYzQoIGRpciwgMC4wICkgKS54eXogKTtcXG59XFxudmVjMyBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBpbiB2ZWMzIGRpciwgaW4gbWF0NCBtYXRyaXggKSB7XFxuXFx0cmV0dXJuIG5vcm1hbGl6ZSggKCB2ZWM0KCBkaXIsIDAuMCApICogbWF0cml4ICkueHl6ICk7XFxufVxcbnZlYzMgcHJvamVjdE9uUGxhbmUoaW4gdmVjMyBwb2ludCwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXFx0ZmxvYXQgZGlzdGFuY2UgPSBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludCAtIHBvaW50T25QbGFuZSApO1xcblxcdHJldHVybiAtIGRpc3RhbmNlICogcGxhbmVOb3JtYWwgKyBwb2ludDtcXG59XFxuZmxvYXQgc2lkZU9mUGxhbmUoIGluIHZlYzMgcG9pbnQsIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBzaWduKCBkb3QoIHBvaW50IC0gcG9pbnRPblBsYW5lLCBwbGFuZU5vcm1hbCApICk7XFxufVxcbnZlYzMgbGluZVBsYW5lSW50ZXJzZWN0KCBpbiB2ZWMzIHBvaW50T25MaW5lLCBpbiB2ZWMzIGxpbmVEaXJlY3Rpb24sIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBsaW5lRGlyZWN0aW9uICogKCBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludE9uUGxhbmUgLSBwb2ludE9uTGluZSApIC8gZG90KCBwbGFuZU5vcm1hbCwgbGluZURpcmVjdGlvbiApICkgKyBwb2ludE9uTGluZTtcXG59XFxubWF0MyB0cmFuc3Bvc2VNYXQzKCBjb25zdCBpbiBtYXQzIG0gKSB7XFxuXFx0bWF0MyB0bXA7XFxuXFx0dG1wWyAwIF0gPSB2ZWMzKCBtWyAwIF0ueCwgbVsgMSBdLngsIG1bIDIgXS54ICk7XFxuXFx0dG1wWyAxIF0gPSB2ZWMzKCBtWyAwIF0ueSwgbVsgMSBdLnksIG1bIDIgXS55ICk7XFxuXFx0dG1wWyAyIF0gPSB2ZWMzKCBtWyAwIF0ueiwgbVsgMSBdLnosIG1bIDIgXS56ICk7XFxuXFx0cmV0dXJuIHRtcDtcXG59XFxuZmxvYXQgbGluZWFyVG9SZWxhdGl2ZUx1bWluYW5jZSggY29uc3QgaW4gdmVjMyBjb2xvciApIHtcXG5cXHR2ZWMzIHdlaWdodHMgPSB2ZWMzKCAwLjIxMjYsIDAuNzE1MiwgMC4wNzIyICk7XFxuXFx0cmV0dXJuIGRvdCggd2VpZ2h0cywgY29sb3IucmdiICk7XFxufVxcblwiLFxuICAgIGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudDpcIiNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFX1VWXFxuI2RlZmluZSBjdWJlVVZfdGV4dHVyZVNpemUgKDEwMjQuMClcXG5pbnQgZ2V0RmFjZUZyb21EaXJlY3Rpb24odmVjMyBkaXJlY3Rpb24pIHtcXG5cXHR2ZWMzIGFic0RpcmVjdGlvbiA9IGFicyhkaXJlY3Rpb24pO1xcblxcdGludCBmYWNlID0gLTE7XFxuXFx0aWYoIGFic0RpcmVjdGlvbi54ID4gYWJzRGlyZWN0aW9uLnogKSB7XFxuXFx0XFx0aWYoYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueSApXFxuXFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi54ID4gMC4wID8gMCA6IDM7XFxuXFx0XFx0ZWxzZVxcblxcdFxcdFxcdGZhY2UgPSBkaXJlY3Rpb24ueSA+IDAuMCA/IDEgOiA0O1xcblxcdH1cXG5cXHRlbHNlIHtcXG5cXHRcXHRpZihhYnNEaXJlY3Rpb24ueiA+IGFic0RpcmVjdGlvbi55IClcXG5cXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnogPiAwLjAgPyAyIDogNTtcXG5cXHRcXHRlbHNlXFxuXFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi55ID4gMC4wID8gMSA6IDQ7XFxuXFx0fVxcblxcdHJldHVybiBmYWNlO1xcbn1cXG4jZGVmaW5lIGN1YmVVVl9tYXhMb2RzMSAgKGxvZzIoY3ViZVVWX3RleHR1cmVTaXplKjAuMjUpIC0gMS4wKVxcbiNkZWZpbmUgY3ViZVVWX3JhbmdlQ2xhbXAgKGV4cDIoKDYuMCAtIDEuMCkgKiAyLjApKVxcbnZlYzIgTWlwTGV2ZWxJbmZvKCB2ZWMzIHZlYywgZmxvYXQgcm91Z2huZXNzTGV2ZWwsIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBzY2FsZSA9IGV4cDIoY3ViZVVWX21heExvZHMxIC0gcm91Z2huZXNzTGV2ZWwpO1xcblxcdGZsb2F0IGR4Um91Z2huZXNzID0gZEZkeChyb3VnaG5lc3MpO1xcblxcdGZsb2F0IGR5Um91Z2huZXNzID0gZEZkeShyb3VnaG5lc3MpO1xcblxcdHZlYzMgZHggPSBkRmR4KCB2ZWMgKiBzY2FsZSAqIGR4Um91Z2huZXNzICk7XFxuXFx0dmVjMyBkeSA9IGRGZHkoIHZlYyAqIHNjYWxlICogZHlSb3VnaG5lc3MgKTtcXG5cXHRmbG9hdCBkID0gbWF4KCBkb3QoIGR4LCBkeCApLCBkb3QoIGR5LCBkeSApICk7XFxuXFx0ZCA9IGNsYW1wKGQsIDEuMCwgY3ViZVVWX3JhbmdlQ2xhbXApO1xcblxcdGZsb2F0IG1pcExldmVsID0gMC41ICogbG9nMihkKTtcXG5cXHRyZXR1cm4gdmVjMihmbG9vcihtaXBMZXZlbCksIGZyYWN0KG1pcExldmVsKSk7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMyIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDIuMClcXG4jZGVmaW5lIGN1YmVVVl9yY3BUZXh0dXJlU2l6ZSAoMS4wIC8gY3ViZVVWX3RleHR1cmVTaXplKVxcbnZlYzIgZ2V0Q3ViZVVWKHZlYzMgZGlyZWN0aW9uLCBmbG9hdCByb3VnaG5lc3NMZXZlbCwgZmxvYXQgbWlwTGV2ZWwpIHtcXG5cXHRtaXBMZXZlbCA9IHJvdWdobmVzc0xldmVsID4gY3ViZVVWX21heExvZHMyIC0gMy4wID8gMC4wIDogbWlwTGV2ZWw7XFxuXFx0ZmxvYXQgYSA9IDE2LjAgKiBjdWJlVVZfcmNwVGV4dHVyZVNpemU7XFxuXFx0dmVjMiBleHAyX3BhY2tlZCA9IGV4cDIoIHZlYzIoIHJvdWdobmVzc0xldmVsLCBtaXBMZXZlbCApICk7XFxuXFx0dmVjMiByY3BfZXhwMl9wYWNrZWQgPSB2ZWMyKCAxLjAgKSAvIGV4cDJfcGFja2VkO1xcblxcdGZsb2F0IHBvd1NjYWxlID0gZXhwMl9wYWNrZWQueCAqIGV4cDJfcGFja2VkLnk7XFxuXFx0ZmxvYXQgc2NhbGUgPSByY3BfZXhwMl9wYWNrZWQueCAqIHJjcF9leHAyX3BhY2tlZC55ICogMC4yNTtcXG5cXHRmbG9hdCBtaXBPZmZzZXQgPSAwLjc1KigxLjAgLSByY3BfZXhwMl9wYWNrZWQueSkgKiByY3BfZXhwMl9wYWNrZWQueDtcXG5cXHRib29sIGJSZXMgPSBtaXBMZXZlbCA9PSAwLjA7XFxuXFx0c2NhbGUgPSAgYlJlcyAmJiAoc2NhbGUgPCBhKSA/IGEgOiBzY2FsZTtcXG5cXHR2ZWMzIHI7XFxuXFx0dmVjMiBvZmZzZXQ7XFxuXFx0aW50IGZhY2UgPSBnZXRGYWNlRnJvbURpcmVjdGlvbihkaXJlY3Rpb24pO1xcblxcdGZsb2F0IHJjcFBvd1NjYWxlID0gMS4wIC8gcG93U2NhbGU7XFxuXFx0aWYoIGZhY2UgPT0gMCkge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi54LCAtZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKDAuMCttaXBPZmZzZXQsMC43NSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gYSA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIGlmKCBmYWNlID09IDEpIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueSwgZGlyZWN0aW9uLngsIGRpcmVjdGlvbi56KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKHNjYWxlK21pcE9mZnNldCwgMC43NSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gYSA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIGlmKCBmYWNlID09IDIpIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueiwgZGlyZWN0aW9uLngsIGRpcmVjdGlvbi55KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKDIuMCpzY2FsZSttaXBPZmZzZXQsIDAuNzUgKiByY3BQb3dTY2FsZSk7XFxuXFx0XFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/IGEgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ZWxzZSBpZiggZmFjZSA9PSAzKSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLngsIGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueSk7XFxuXFx0XFx0b2Zmc2V0ID0gdmVjMigwLjArbWlwT2Zmc2V0LDAuNSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gMC4wIDogb2Zmc2V0Lnk7XFxuXFx0fVxcblxcdGVsc2UgaWYoIGZhY2UgPT0gNCkge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi55LCBkaXJlY3Rpb24ueCwgLWRpcmVjdGlvbi56KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKHNjYWxlK21pcE9mZnNldCwgMC41ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAwLjAgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ZWxzZSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLnosIC1kaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkpO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoMi4wKnNjYWxlK21pcE9mZnNldCwgMC41ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAwLjAgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ciA9IG5vcm1hbGl6ZShyKTtcXG5cXHRmbG9hdCB0ZXhlbE9mZnNldCA9IDAuNSAqIGN1YmVVVl9yY3BUZXh0dXJlU2l6ZTtcXG5cXHR2ZWMyIHMgPSAoIHIueXogLyBhYnMoIHIueCApICsgdmVjMiggMS4wICkgKSAqIDAuNTtcXG5cXHR2ZWMyIGJhc2UgPSBvZmZzZXQgKyB2ZWMyKCB0ZXhlbE9mZnNldCApO1xcblxcdHJldHVybiBiYXNlICsgcyAqICggc2NhbGUgLSAyLjAgKiB0ZXhlbE9mZnNldCApO1xcbn1cXG4jZGVmaW5lIGN1YmVVVl9tYXhMb2RzMyAobG9nMihjdWJlVVZfdGV4dHVyZVNpemUqMC4yNSkgLSAzLjApXFxudmVjNCB0ZXh0dXJlQ3ViZVVWKHZlYzMgcmVmbGVjdGVkRGlyZWN0aW9uLCBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0ZmxvYXQgcm91Z2huZXNzVmFsID0gcm91Z2huZXNzKiBjdWJlVVZfbWF4TG9kczM7XFxuXFx0ZmxvYXQgcjEgPSBmbG9vcihyb3VnaG5lc3NWYWwpO1xcblxcdGZsb2F0IHIyID0gcjEgKyAxLjA7XFxuXFx0ZmxvYXQgdCA9IGZyYWN0KHJvdWdobmVzc1ZhbCk7XFxuXFx0dmVjMiBtaXBJbmZvID0gTWlwTGV2ZWxJbmZvKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIHJvdWdobmVzcyk7XFxuXFx0ZmxvYXQgcyA9IG1pcEluZm8ueTtcXG5cXHRmbG9hdCBsZXZlbDAgPSBtaXBJbmZvLng7XFxuXFx0ZmxvYXQgbGV2ZWwxID0gbGV2ZWwwICsgMS4wO1xcblxcdGxldmVsMSA9IGxldmVsMSA+IDUuMCA/IDUuMCA6IGxldmVsMTtcXG5cXHRsZXZlbDAgKz0gbWluKCBmbG9vciggcyArIDAuNSApLCA1LjAgKTtcXG5cXHR2ZWMyIHV2XzEwID0gZ2V0Q3ViZVVWKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIGxldmVsMCk7XFxuXFx0dmVjNCBjb2xvcjEwID0gZW52TWFwVGV4ZWxUb0xpbmVhcih0ZXh0dXJlMkQoZW52TWFwLCB1dl8xMCkpO1xcblxcdHZlYzIgdXZfMjAgPSBnZXRDdWJlVVYocmVmbGVjdGVkRGlyZWN0aW9uLCByMiwgbGV2ZWwwKTtcXG5cXHR2ZWM0IGNvbG9yMjAgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2XzIwKSk7XFxuXFx0dmVjNCByZXN1bHQgPSBtaXgoY29sb3IxMCwgY29sb3IyMCwgdCk7XFxuXFx0cmV0dXJuIHZlYzQocmVzdWx0LnJnYiwgMS4wKTtcXG59XFxuI2VuZGlmXFxuXCIsXG4gICAgZGVmYXVsdG5vcm1hbF92ZXJ0ZXg6XCJ2ZWMzIHRyYW5zZm9ybWVkTm9ybWFsID0gbm9ybWFsTWF0cml4ICogb2JqZWN0Tm9ybWFsO1xcbiNpZmRlZiBGTElQX1NJREVEXFxuXFx0dHJhbnNmb3JtZWROb3JtYWwgPSAtIHRyYW5zZm9ybWVkTm9ybWFsO1xcbiNlbmRpZlxcblwiLGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlzcGxhY2VtZW50TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgZGlzcGxhY2VtZW50U2NhbGU7XFxuXFx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRCaWFzO1xcbiNlbmRpZlxcblwiLGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdHRyYW5zZm9ybWVkICs9IG5vcm1hbGl6ZSggb2JqZWN0Tm9ybWFsICkgKiAoIHRleHR1cmUyRCggZGlzcGxhY2VtZW50TWFwLCB1diApLnggKiBkaXNwbGFjZW1lbnRTY2FsZSArIGRpc3BsYWNlbWVudEJpYXMgKTtcXG4jZW5kaWZcXG5cIixcbiAgICBlbWlzc2l2ZW1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU1JU1NJVkVNQVBcXG5cXHR2ZWM0IGVtaXNzaXZlQ29sb3IgPSB0ZXh0dXJlMkQoIGVtaXNzaXZlTWFwLCB2VXYgKTtcXG5cXHRlbWlzc2l2ZUNvbG9yLnJnYiA9IGVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhciggZW1pc3NpdmVDb2xvciApLnJnYjtcXG5cXHR0b3RhbEVtaXNzaXZlUmFkaWFuY2UgKj0gZW1pc3NpdmVDb2xvci5yZ2I7XFxuI2VuZGlmXFxuXCIsZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU1JU1NJVkVNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBlbWlzc2l2ZU1hcDtcXG4jZW5kaWZcXG5cIixlbmNvZGluZ3NfZnJhZ21lbnQ6XCIgIGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoIGdsX0ZyYWdDb2xvciApO1xcblwiLGVuY29kaW5nc19wYXJzX2ZyYWdtZW50OlwiXFxudmVjNCBMaW5lYXJUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmFsdWU7XFxufVxcbnZlYzQgR2FtbWFUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgZ2FtbWFGYWN0b3IgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHBvdyggdmFsdWUueHl6LCB2ZWMzKCBnYW1tYUZhY3RvciApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBMaW5lYXJUb0dhbW1hKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcXG5cXHRyZXR1cm4gdmVjNCggcG93KCB2YWx1ZS54eXosIHZlYzMoIDEuMCAvIGdhbW1hRmFjdG9yICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IHNSR0JUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggbWl4KCBwb3coIHZhbHVlLnJnYiAqIDAuOTQ3ODY3Mjk4NiArIHZlYzMoIDAuMDUyMTMyNzAxNCApLCB2ZWMzKCAyLjQgKSApLCB2YWx1ZS5yZ2IgKiAwLjA3NzM5OTM4MDgsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wNDA0NSApICkgKSApLCB2YWx1ZS53ICk7XFxufVxcbnZlYzQgTGluZWFyVG9zUkdCKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiLCB2ZWMzKCAwLjQxNjY2ICkgKSAqIDEuMDU1IC0gdmVjMyggMC4wNTUgKSwgdmFsdWUucmdiICogMTIuOTIsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wMDMxMzA4ICkgKSApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBSR0JFVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqIGV4cDIoIHZhbHVlLmEgKiAyNTUuMCAtIDEyOC4wICksIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCRSggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRmbG9hdCBtYXhDb21wb25lbnQgPSBtYXgoIG1heCggdmFsdWUuciwgdmFsdWUuZyApLCB2YWx1ZS5iICk7XFxuXFx0ZmxvYXQgZkV4cCA9IGNsYW1wKCBjZWlsKCBsb2cyKCBtYXhDb21wb25lbnQgKSApLCAtMTI4LjAsIDEyNy4wICk7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAvIGV4cDIoIGZFeHAgKSwgKCBmRXhwICsgMTI4LjAgKSAvIDI1NS4wICk7XFxufVxcbnZlYzQgUkdCTVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUueHl6ICogdmFsdWUudyAqIG1heFJhbmdlLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQk0oIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUueCwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcXG5cXHRmbG9hdCBNICAgICAgPSBjbGFtcCggbWF4UkdCIC8gbWF4UmFuZ2UsIDAuMCwgMS4wICk7XFxuXFx0TSAgICAgICAgICAgID0gY2VpbCggTSAqIDI1NS4wICkgLyAyNTUuMDtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiIC8gKCBNICogbWF4UmFuZ2UgKSwgTSApO1xcbn1cXG52ZWM0IFJHQkRUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggKCBtYXhSYW5nZSAvIDI1NS4wICkgLyB2YWx1ZS5hICksIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCRCggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuXFx0ZmxvYXQgbWF4UkdCID0gbWF4KCB2YWx1ZS54LCBtYXgoIHZhbHVlLmcsIHZhbHVlLmIgKSApO1xcblxcdGZsb2F0IEQgICAgICA9IG1heCggbWF4UmFuZ2UgLyBtYXhSR0IsIDEuMCApO1xcblxcdEQgICAgICAgICAgICA9IG1pbiggZmxvb3IoIEQgKSAvIDI1NS4wLCAxLjAgKTtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogKCBEICogKCAyNTUuMCAvIG1heFJhbmdlICkgKSwgRCApO1xcbn1cXG5jb25zdCBtYXQzIGNMb2dMdXZNID0gbWF0MyggMC4yMjA5LCAwLjMzOTAsIDAuNDE4NCwgMC4xMTM4LCAwLjY3ODAsIDAuNzMxOSwgMC4wMTAyLCAwLjExMzAsIDAuMjk2OSApO1xcbnZlYzQgTGluZWFyVG9Mb2dMdXYoIGluIHZlYzQgdmFsdWUgKSAge1xcblxcdHZlYzMgWHBfWV9YWVpwID0gdmFsdWUucmdiICogY0xvZ0x1dk07XFxuXFx0WHBfWV9YWVpwID0gbWF4KFhwX1lfWFlacCwgdmVjMygxZS02LCAxZS02LCAxZS02KSk7XFxuXFx0dmVjNCB2UmVzdWx0O1xcblxcdHZSZXN1bHQueHkgPSBYcF9ZX1hZWnAueHkgLyBYcF9ZX1hZWnAuejtcXG5cXHRmbG9hdCBMZSA9IDIuMCAqIGxvZzIoWHBfWV9YWVpwLnkpICsgMTI3LjA7XFxuXFx0dlJlc3VsdC53ID0gZnJhY3QoTGUpO1xcblxcdHZSZXN1bHQueiA9IChMZSAtIChmbG9vcih2UmVzdWx0LncqMjU1LjApKS8yNTUuMCkvMjU1LjA7XFxuXFx0cmV0dXJuIHZSZXN1bHQ7XFxufVxcbmNvbnN0IG1hdDMgY0xvZ0x1dkludmVyc2VNID0gbWF0MyggNi4wMDE0LCAtMi43MDA4LCAtMS43OTk2LCAtMS4zMzIwLCAzLjEwMjksIC01Ljc3MjEsIDAuMzAwOCwgLTEuMDg4MiwgNS42MjY4ICk7XFxudmVjNCBMb2dMdXZUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRmbG9hdCBMZSA9IHZhbHVlLnogKiAyNTUuMCArIHZhbHVlLnc7XFxuXFx0dmVjMyBYcF9ZX1hZWnA7XFxuXFx0WHBfWV9YWVpwLnkgPSBleHAyKChMZSAtIDEyNy4wKSAvIDIuMCk7XFxuXFx0WHBfWV9YWVpwLnogPSBYcF9ZX1hZWnAueSAvIHZhbHVlLnk7XFxuXFx0WHBfWV9YWVpwLnggPSB2YWx1ZS54ICogWHBfWV9YWVpwLno7XFxuXFx0dmVjMyB2UkdCID0gWHBfWV9YWVpwLnJnYiAqIGNMb2dMdXZJbnZlcnNlTTtcXG5cXHRyZXR1cm4gdmVjNCggbWF4KHZSR0IsIDAuMCksIDEuMCApO1xcbn1cXG5cIixcbiAgICBlbnZtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dmVjMyBjYW1lcmFUb1ZlcnRleCA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gLSBjYW1lcmFQb3NpdGlvbiApO1xcblxcdFxcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBub3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHJlZmxlY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmcmFjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHZSZWZsZWN0O1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0dmVjNCBlbnZDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKSApO1xcblxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0VRVUlSRUMgKVxcblxcdFxcdHZlYzIgc2FtcGxlVVY7XFxuXFx0XFx0cmVmbGVjdFZlYyA9IG5vcm1hbGl6ZSggcmVmbGVjdFZlYyApO1xcblxcdFxcdHNhbXBsZVVWLnkgPSBhc2luKCBjbGFtcCggcmVmbGVjdFZlYy55LCAtIDEuMCwgMS4wICkgKSAqIFJFQ0lQUk9DQUxfUEkgKyAwLjU7XFxuXFx0XFx0c2FtcGxlVVYueCA9IGF0YW4oIHJlZmxlY3RWZWMueiwgcmVmbGVjdFZlYy54ICkgKiBSRUNJUFJPQ0FMX1BJMiArIDAuNTtcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHNhbXBsZVVWICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfU1BIRVJFIClcXG5cXHRcXHRyZWZsZWN0VmVjID0gbm9ybWFsaXplKCByZWZsZWN0VmVjICk7XFxuXFx0XFx0dmVjMyByZWZsZWN0VmlldyA9IG5vcm1hbGl6ZSggKCB2aWV3TWF0cml4ICogdmVjNCggcmVmbGVjdFZlYywgMC4wICkgKS54eXogKyB2ZWMzKCAwLjAsIDAuMCwgMS4wICkgKTtcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41ICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdmVjNCggMC4wICk7XFxuXFx0I2VuZGlmXFxuXFx0ZW52Q29sb3IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZDb2xvciApO1xcblxcdCNpZmRlZiBFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFlcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBvdXRnb2luZ0xpZ2h0ICogZW52Q29sb3IueHl6LCBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5ICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX0JMRU5ESU5HX01JWCApXFxuXFx0XFx0b3V0Z29pbmdMaWdodCA9IG1peCggb3V0Z29pbmdMaWdodCwgZW52Q29sb3IueHl6LCBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5ICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX0JMRU5ESU5HX0FERCApXFxuXFx0XFx0b3V0Z29pbmdMaWdodCArPSBlbnZDb2xvci54eXogKiBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5O1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuICAgIGVudm1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSB8fCBkZWZpbmVkKCBQSFlTSUNBTCApXFxuXFx0dW5pZm9ybSBmbG9hdCByZWZsZWN0aXZpdHk7XFxuXFx0dW5pZm9ybSBmbG9hdCBlbnZNYXBJbnRlbnNpdHk7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaWYgISBkZWZpbmVkKCBQSFlTSUNBTCApICYmICggZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKSApXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyQ3ViZSBlbnZNYXA7XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBlbnZNYXA7XFxuXFx0I2VuZGlmXFxuXFx0dW5pZm9ybSBmbG9hdCBmbGlwRW52TWFwO1xcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApIHx8IGRlZmluZWQoIFBIWVNJQ0FMIClcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IHJlZnJhY3Rpb25SYXRpbztcXG5cXHQjZWxzZVxcblxcdFxcdHZhcnlpbmcgdmVjMyB2UmVmbGVjdDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbiAgICBlbnZtYXBfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLGVudm1hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzMgY2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHdvcmxkUG9zaXRpb24ueHl6IC0gY2FtZXJhUG9zaXRpb24gKTtcXG5cXHRcXHR2ZWMzIHdvcmxkTm9ybWFsID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggdHJhbnNmb3JtZWROb3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxcblxcdFxcdFxcdHZSZWZsZWN0ID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2UmVmbGVjdCA9IHJlZnJhY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG4gICAgZm9nX3ZlcnRleDpcIlxcbiNpZmRlZiBVU0VfRk9HXFxuZm9nRGVwdGggPSAtbXZQb3NpdGlvbi56O1xcbiNlbmRpZlwiLGZvZ19wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfRk9HXFxuICB2YXJ5aW5nIGZsb2F0IGZvZ0RlcHRoO1xcbiNlbmRpZlxcblwiLGZvZ19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRk9HXFxuXFx0I2lmZGVmIEZPR19FWFAyXFxuXFx0XFx0ZmxvYXQgZm9nRmFjdG9yID0gd2hpdGVDb21wbGltZW50KCBleHAyKCAtIGZvZ0RlbnNpdHkgKiBmb2dEZW5zaXR5ICogZm9nRGVwdGggKiBmb2dEZXB0aCAqIExPRzIgKSApO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgZm9nRmFjdG9yID0gc21vb3Roc3RlcCggZm9nTmVhciwgZm9nRmFyLCBmb2dEZXB0aCApO1xcblxcdCNlbmRpZlxcblxcdGdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoIGdsX0ZyYWdDb2xvci5yZ2IsIGZvZ0NvbG9yLCBmb2dGYWN0b3IgKTtcXG4jZW5kaWZcXG5cIixmb2dfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRk9HXFxuXFx0dW5pZm9ybSB2ZWMzIGZvZ0NvbG9yO1xcblxcdHZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7XFxuXFx0I2lmZGVmIEZPR19FWFAyXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dEZW5zaXR5O1xcblxcdCNlbHNlXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dOZWFyO1xcblxcdFxcdHVuaWZvcm0gZmxvYXQgZm9nRmFyO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuICAgIGdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVE9PTlxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGdyYWRpZW50TWFwO1xcblxcdHZlYzMgZ2V0R3JhZGllbnRJcnJhZGlhbmNlKCB2ZWMzIG5vcm1hbCwgdmVjMyBsaWdodERpcmVjdGlvbiApIHtcXG5cXHRcXHRmbG9hdCBkb3ROTCA9IGRvdCggbm9ybWFsLCBsaWdodERpcmVjdGlvbiApO1xcblxcdFxcdHZlYzIgY29vcmQgPSB2ZWMyKCBkb3ROTCAqIDAuNSArIDAuNSwgMC4wICk7XFxuXFx0XFx0I2lmZGVmIFVTRV9HUkFESUVOVE1BUFxcblxcdFxcdFxcdHJldHVybiB0ZXh0dXJlMkQoIGdyYWRpZW50TWFwLCBjb29yZCApLnJnYjtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHJldHVybiAoIGNvb3JkLnggPCAwLjcgKSA/IHZlYzMoIDAuNyApIDogdmVjMyggMS4wICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcblwiLGxpZ2h0bWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBQSSAqIHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKS54eXogKiBsaWdodE1hcEludGVuc2l0eTtcXG4jZW5kaWZcXG5cIixcbiAgICBsaWdodG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGxpZ2h0TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgbGlnaHRNYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCIsbGlnaHRzX2xhbWJlcnRfdmVydGV4OlwidmVjMyBkaWZmdXNlID0gdmVjMyggMS4wICk7XFxuR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeTtcXG5nZW9tZXRyeS5wb3NpdGlvbiA9IG12UG9zaXRpb24ueHl6O1xcbmdlb21ldHJ5Lm5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5nZW9tZXRyeS52aWV3RGlyID0gbm9ybWFsaXplKCAtbXZQb3NpdGlvbi54eXogKTtcXG5HZW9tZXRyaWNDb250ZXh0IGJhY2tHZW9tZXRyeTtcXG5iYWNrR2VvbWV0cnkucG9zaXRpb24gPSBnZW9tZXRyeS5wb3NpdGlvbjtcXG5iYWNrR2VvbWV0cnkubm9ybWFsID0gLWdlb21ldHJ5Lm5vcm1hbDtcXG5iYWNrR2VvbWV0cnkudmlld0RpciA9IGdlb21ldHJ5LnZpZXdEaXI7XFxudkxpZ2h0RnJvbnQgPSB2ZWMzKCAwLjAgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dkxpZ2h0QmFjayA9IHZlYzMoIDAuMCApO1xcbiNlbmRpZlxcbkluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQ7XFxuZmxvYXQgZG90Tkw7XFxudmVjMyBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuI2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggcG9pbnRMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldFNwb3REaXJlY3RMaWdodElycmFkaWFuY2UoIHNwb3RMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggZGlyZWN0aW9uYWxMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fSEVNSV9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHZMaWdodEZyb250ICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgZ2VvbWV0cnkgKTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGJhY2tHZW9tZXRyeSApO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG4jZW5kaWZcXG5cIixcbiAgICBsaWdodHNfcGFyczpcInVuaWZvcm0gdmVjMyBhbWJpZW50TGlnaHRDb2xvcjtcXG52ZWMzIGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIHZlYzMgYW1iaWVudExpZ2h0Q29sb3IgKSB7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gYW1iaWVudExpZ2h0Q29sb3I7XFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHRyZXR1cm4gaXJyYWRpYW5jZTtcXG59XFxuI2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdHN0cnVjdCBEaXJlY3Rpb25hbExpZ2h0IHtcXG5cXHRcXHR2ZWMzIGRpcmVjdGlvbjtcXG5cXHRcXHR2ZWMzIGNvbG9yO1xcblxcdFxcdGludCBzaGFkb3c7XFxuXFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdH07XFxuXFx0dW5pZm9ybSBEaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHRzWyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdHZvaWQgZ2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgKSB7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBkaXJlY3Rpb25hbExpZ2h0LmNvbG9yO1xcblxcdFxcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbmFsTGlnaHQuZGlyZWN0aW9uO1xcblxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSB0cnVlO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgUG9pbnRMaWdodCB7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbjtcXG5cXHRcXHR2ZWMzIGNvbG9yO1xcblxcdFxcdGZsb2F0IGRpc3RhbmNlO1xcblxcdFxcdGZsb2F0IGRlY2F5O1xcblxcdFxcdGludCBzaGFkb3c7XFxuXFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdFxcdGZsb2F0IHNoYWRvd0NhbWVyYU5lYXI7XFxuXFx0XFx0ZmxvYXQgc2hhZG93Q2FtZXJhRmFyO1xcblxcdH07XFxuXFx0dW5pZm9ybSBQb2ludExpZ2h0IHBvaW50TGlnaHRzWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0dm9pZCBnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gUG9pbnRMaWdodCBwb2ludExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCApIHtcXG5cXHRcXHR2ZWMzIGxWZWN0b3IgPSBwb2ludExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gcG9pbnRMaWdodC5jb2xvcjtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBwb2ludExpZ2h0LmRpc3RhbmNlLCBwb2ludExpZ2h0LmRlY2F5ICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9ICggZGlyZWN0TGlnaHQuY29sb3IgIT0gdmVjMyggMC4wICkgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgU3BvdExpZ2h0IHtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0ZmxvYXQgZGlzdGFuY2U7XFxuXFx0XFx0ZmxvYXQgZGVjYXk7XFxuXFx0XFx0ZmxvYXQgY29uZUNvcztcXG5cXHRcXHRmbG9hdCBwZW51bWJyYUNvcztcXG5cXHRcXHRpbnQgc2hhZG93O1xcblxcdFxcdGZsb2F0IHNoYWRvd0JpYXM7XFxuXFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHR9O1xcblxcdHVuaWZvcm0gU3BvdExpZ2h0IHNwb3RMaWdodHNbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdHZvaWQgZ2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gU3BvdExpZ2h0IHNwb3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgICkge1xcblxcdFxcdHZlYzMgbFZlY3RvciA9IHNwb3RMaWdodC5wb3NpdGlvbiAtIGdlb21ldHJ5LnBvc2l0aW9uO1xcblxcdFxcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGxpZ2h0RGlzdGFuY2UgPSBsZW5ndGgoIGxWZWN0b3IgKTtcXG5cXHRcXHRmbG9hdCBhbmdsZUNvcyA9IGRvdCggZGlyZWN0TGlnaHQuZGlyZWN0aW9uLCBzcG90TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0aWYgKCBhbmdsZUNvcyA+IHNwb3RMaWdodC5jb25lQ29zICkge1xcblxcdFxcdFxcdGZsb2F0IHNwb3RFZmZlY3QgPSBzbW9vdGhzdGVwKCBzcG90TGlnaHQuY29uZUNvcywgc3BvdExpZ2h0LnBlbnVtYnJhQ29zLCBhbmdsZUNvcyApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gc3BvdExpZ2h0LmNvbG9yO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IHNwb3RFZmZlY3QgKiBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBzcG90TGlnaHQuZGlzdGFuY2UsIHNwb3RMaWdodC5kZWNheSApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSB0cnVlO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSB2ZWMzKCAwLjAgKTtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gZmFsc2U7XFxuXFx0XFx0fVxcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IFJlY3RBcmVhTGlnaHQge1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbjtcXG5cXHRcXHR2ZWMzIGhhbGZXaWR0aDtcXG5cXHRcXHR2ZWMzIGhhbGZIZWlnaHQ7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBsdGNNYXQ7XFx0dW5pZm9ybSBzYW1wbGVyMkQgbHRjTWFnO1xcblxcdHVuaWZvcm0gUmVjdEFyZWFMaWdodCByZWN0QXJlYUxpZ2h0c1sgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTlVNX0hFTUlfTElHSFRTID4gMFxcblxcdHN0cnVjdCBIZW1pc3BoZXJlTGlnaHQge1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgc2t5Q29sb3I7XFxuXFx0XFx0dmVjMyBncm91bmRDb2xvcjtcXG5cXHR9O1xcblxcdHVuaWZvcm0gSGVtaXNwaGVyZUxpZ2h0IGhlbWlzcGhlcmVMaWdodHNbIE5VTV9IRU1JX0xJR0hUUyBdO1xcblxcdHZlYzMgZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gSGVtaXNwaGVyZUxpZ2h0IGhlbWlMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSApIHtcXG5cXHRcXHRmbG9hdCBkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBoZW1pTGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZmxvYXQgaGVtaURpZmZ1c2VXZWlnaHQgPSAwLjUgKiBkb3ROTCArIDAuNTtcXG5cXHRcXHR2ZWMzIGlycmFkaWFuY2UgPSBtaXgoIGhlbWlMaWdodC5ncm91bmRDb2xvciwgaGVtaUxpZ2h0LnNreUNvbG9yLCBoZW1pRGlmZnVzZVdlaWdodCApO1xcblxcdFxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIGlycmFkaWFuY2U7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdHZlYzMgZ2V0TGlnaHRQcm9iZUluZGlyZWN0SXJyYWRpYW5jZSggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblxcdFxcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBnZW9tZXRyeS5ub3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxcblxcdFxcdFxcdHZlYzMgcXVlcnlWZWMgPSB2ZWMzKCBmbGlwRW52TWFwICogd29ybGROb3JtYWwueCwgd29ybGROb3JtYWwueXogKTtcXG5cXHRcXHRcXHQjaWZkZWYgVEVYVFVSRV9MT0RfRVhUXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlTG9kRVhUKCBlbnZNYXAsIHF1ZXJ5VmVjLCBmbG9hdCggbWF4TUlQTGV2ZWwgKSApO1xcblxcdFxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHF1ZXJ5VmVjLCBmbG9hdCggbWF4TUlQTGV2ZWwgKSApO1xcblxcdFxcdFxcdCNlbmRpZlxcblxcdFxcdFxcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxcblxcdFxcdFxcdHZlYzMgcXVlcnlWZWMgPSB2ZWMzKCBmbGlwRW52TWFwICogd29ybGROb3JtYWwueCwgd29ybGROb3JtYWwueXogKTtcXG5cXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVVViggcXVlcnlWZWMsIDEuMCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHZlYzQoIDAuMCApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJldHVybiBQSSAqIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0U3BlY3VsYXJNSVBMZXZlbCggY29uc3QgaW4gZmxvYXQgYmxpbm5TaGluaW5lc3NFeHBvbmVudCwgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblxcdFxcdGZsb2F0IG1heE1JUExldmVsU2NhbGFyID0gZmxvYXQoIG1heE1JUExldmVsICk7XFxuXFx0XFx0ZmxvYXQgZGVzaXJlZE1JUExldmVsID0gbWF4TUlQTGV2ZWxTY2FsYXIgKyAwLjc5MjQ4IC0gMC41ICogbG9nMiggcG93MiggYmxpbm5TaGluaW5lc3NFeHBvbmVudCApICsgMS4wICk7XFxuXFx0XFx0cmV0dXJuIGNsYW1wKCBkZXNpcmVkTUlQTGV2ZWwsIDAuMCwgbWF4TUlQTGV2ZWxTY2FsYXIgKTtcXG5cXHR9XFxuXFx0dmVjMyBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gZmxvYXQgYmxpbm5TaGluaW5lc3NFeHBvbmVudCwgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggLWdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5Lm5vcm1hbCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmcmFjdCggLWdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5Lm5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmVmbGVjdFZlYyA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIHJlZmxlY3RWZWMsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHRmbG9hdCBzcGVjdWxhck1JUExldmVsID0gZ2V0U3BlY3VsYXJNSVBMZXZlbCggYmxpbm5TaGluaW5lc3NFeHBvbmVudCwgbWF4TUlQTGV2ZWwgKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxcblxcdFxcdFxcdHZlYzMgcXVlcnlSZWZsZWN0VmVjID0gdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlSZWZsZWN0VmVjLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlSZWZsZWN0VmVjLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVJlZmxlY3RWZWMgPSB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICk7XFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYocXVlcnlSZWZsZWN0VmVjLCBCbGlubkV4cG9uZW50VG9HR1hSb3VnaG5lc3MoYmxpbm5TaGluaW5lc3NFeHBvbmVudCkpO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0VRVUlSRUMgKVxcblxcdFxcdFxcdHZlYzIgc2FtcGxlVVY7XFxuXFx0XFx0XFx0c2FtcGxlVVYueSA9IGFzaW4oIGNsYW1wKCByZWZsZWN0VmVjLnksIC0gMS4wLCAxLjAgKSApICogUkVDSVBST0NBTF9QSSArIDAuNTtcXG5cXHRcXHRcXHRzYW1wbGVVVi54ID0gYXRhbiggcmVmbGVjdFZlYy56LCByZWZsZWN0VmVjLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJETG9kRVhUKCBlbnZNYXAsIHNhbXBsZVVWLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHNhbXBsZVVWLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfU1BIRVJFIClcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWaWV3ID0gbm9ybWFsaXplKCAoIHZpZXdNYXRyaXggKiB2ZWM0KCByZWZsZWN0VmVjLCAwLjAgKSApLnh5eiArIHZlYzMoIDAuMCwwLjAsMS4wICkgKTtcXG5cXHRcXHRcXHQjaWZkZWYgVEVYVFVSRV9MT0RfRVhUXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmUyRExvZEVYVCggZW52TWFwLCByZWZsZWN0Vmlldy54eSAqIDAuNSArIDAuNSwgc3BlY3VsYXJNSVBMZXZlbCApO1xcblxcdFxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmUyRCggZW52TWFwLCByZWZsZWN0Vmlldy54eSAqIDAuNSArIDAuNSwgc3BlY3VsYXJNSVBMZXZlbCApO1xcblxcdFxcdFxcdCNlbmRpZlxcblxcdFxcdFxcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJldHVybiBlbnZNYXBDb2xvci5yZ2IgKiBlbnZNYXBJbnRlbnNpdHk7XFxuXFx0fVxcbiNlbmRpZlxcblwiLFxuICAgIGxpZ2h0c19waG9uZ19mcmFnbWVudDpcIkJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbDtcXG5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiO1xcbm1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBzcGVjdWxhcjtcXG5tYXRlcmlhbC5zcGVjdWxhclNoaW5pbmVzcyA9IHNoaW5pbmVzcztcXG5tYXRlcmlhbC5zcGVjdWxhclN0cmVuZ3RoID0gc3BlY3VsYXJTdHJlbmd0aDtcXG5cIixsaWdodHNfcGhvbmdfcGFyc19mcmFnbWVudDpcInZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG5zdHJ1Y3QgQmxpbm5QaG9uZ01hdGVyaWFsIHtcXG5cXHR2ZWMzXFx0ZGlmZnVzZUNvbG9yO1xcblxcdHZlYzNcXHRzcGVjdWxhckNvbG9yO1xcblxcdGZsb2F0XFx0c3BlY3VsYXJTaGluaW5lc3M7XFxuXFx0ZmxvYXRcXHRzcGVjdWxhclN0cmVuZ3RoO1xcbn07XFxudm9pZCBSRV9EaXJlY3RfQmxpbm5QaG9uZyggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHQjaWZkZWYgVE9PTlxcblxcdFxcdHZlYzMgaXJyYWRpYW5jZSA9IGdldEdyYWRpZW50SXJyYWRpYW5jZSggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICk7XFxuXFx0XFx0dmVjMyBpcnJhZGlhbmNlID0gZG90TkwgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHQjZW5kaWZcXG5cXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSBpcnJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9CbGlublBob25nKCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IsIG1hdGVyaWFsLnNwZWN1bGFyU2hpbmluZXNzICkgKiBtYXRlcmlhbC5zcGVjdWxhclN0cmVuZ3RoO1xcbn1cXG52b2lkIFJFX0luZGlyZWN0RGlmZnVzZV9CbGlublBob25nKCBjb25zdCBpbiB2ZWMzIGlycmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIEJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxufVxcbiNkZWZpbmUgUkVfRGlyZWN0XFx0XFx0XFx0XFx0UkVfRGlyZWN0X0JsaW5uUGhvbmdcXG4jZGVmaW5lIFJFX0luZGlyZWN0RGlmZnVzZVxcdFxcdFJFX0luZGlyZWN0RGlmZnVzZV9CbGlublBob25nXFxuI2RlZmluZSBNYXRlcmlhbF9MaWdodFByb2JlTE9EKCBtYXRlcmlhbCApXFx0KDApXFxuXCIsXG4gICAgbGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50OlwiUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbDtcXG5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiICogKCAxLjAgLSBtZXRhbG5lc3NGYWN0b3IgKTtcXG5tYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IGNsYW1wKCByb3VnaG5lc3NGYWN0b3IsIDAuMDQsIDEuMCApO1xcbiNpZmRlZiBTVEFOREFSRFxcblxcdG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBtaXgoIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgZGlmZnVzZUNvbG9yLnJnYiwgbWV0YWxuZXNzRmFjdG9yICk7XFxuI2Vsc2VcXG5cXHRtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gbWl4KCB2ZWMzKCBNQVhJTVVNX1NQRUNVTEFSX0NPRUZGSUNJRU5UICogcG93MiggcmVmbGVjdGl2aXR5ICkgKSwgZGlmZnVzZUNvbG9yLnJnYiwgbWV0YWxuZXNzRmFjdG9yICk7XFxuXFx0bWF0ZXJpYWwuY2xlYXJDb2F0ID0gc2F0dXJhdGUoIGNsZWFyQ29hdCApO1xcdG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyA9IGNsYW1wKCBjbGVhckNvYXRSb3VnaG5lc3MsIDAuMDQsIDEuMCApO1xcbiNlbmRpZlxcblwiLFxuICAgIGxpZ2h0c19waHlzaWNhbF9wYXJzX2ZyYWdtZW50Olwic3RydWN0IFBoeXNpY2FsTWF0ZXJpYWwge1xcblxcdHZlYzNcXHRkaWZmdXNlQ29sb3I7XFxuXFx0ZmxvYXRcXHRzcGVjdWxhclJvdWdobmVzcztcXG5cXHR2ZWMzXFx0c3BlY3VsYXJDb2xvcjtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0O1xcblxcdFxcdGZsb2F0IGNsZWFyQ29hdFJvdWdobmVzcztcXG5cXHQjZW5kaWZcXG59O1xcbiNkZWZpbmUgTUFYSU1VTV9TUEVDVUxBUl9DT0VGRklDSUVOVCAwLjE2XFxuI2RlZmluZSBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UIDAuMDRcXG5mbG9hdCBjbGVhckNvYXRESFJBcHByb3goIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcywgY29uc3QgaW4gZmxvYXQgZG90TkwgKSB7XFxuXFx0cmV0dXJuIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKyAoIDEuMCAtIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSAqICggcG93KCAxLjAgLSBkb3ROTCwgNS4wICkgKiBwb3coIDEuMCAtIHJvdWdobmVzcywgMi4wICkgKTtcXG59XFxuI2lmIE5VTV9SRUNUX0FSRUFfTElHSFRTID4gMFxcblxcdHZvaWQgUkVfRGlyZWN0X1JlY3RBcmVhX1BoeXNpY2FsKCBjb25zdCBpbiBSZWN0QXJlYUxpZ2h0IHJlY3RBcmVhTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdFxcdHZlYzMgbm9ybWFsID0gZ2VvbWV0cnkubm9ybWFsO1xcblxcdFxcdHZlYzMgdmlld0RpciA9IGdlb21ldHJ5LnZpZXdEaXI7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbiA9IGdlb21ldHJ5LnBvc2l0aW9uO1xcblxcdFxcdHZlYzMgbGlnaHRQb3MgPSByZWN0QXJlYUxpZ2h0LnBvc2l0aW9uO1xcblxcdFxcdHZlYzMgaGFsZldpZHRoID0gcmVjdEFyZWFMaWdodC5oYWxmV2lkdGg7XFxuXFx0XFx0dmVjMyBoYWxmSGVpZ2h0ID0gcmVjdEFyZWFMaWdodC5oYWxmSGVpZ2h0O1xcblxcdFxcdHZlYzMgbGlnaHRDb2xvciA9IHJlY3RBcmVhTGlnaHQuY29sb3I7XFxuXFx0XFx0ZmxvYXQgcm91Z2huZXNzID0gbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3M7XFxuXFx0XFx0dmVjMyByZWN0Q29vcmRzWyA0IF07XFxuXFx0XFx0cmVjdENvb3Jkc1sgMCBdID0gbGlnaHRQb3MgLSBoYWxmV2lkdGggLSBoYWxmSGVpZ2h0O1xcdFxcdHJlY3RDb29yZHNbIDEgXSA9IGxpZ2h0UG9zICsgaGFsZldpZHRoIC0gaGFsZkhlaWdodDtcXG5cXHRcXHRyZWN0Q29vcmRzWyAyIF0gPSBsaWdodFBvcyArIGhhbGZXaWR0aCArIGhhbGZIZWlnaHQ7XFxuXFx0XFx0cmVjdENvb3Jkc1sgMyBdID0gbGlnaHRQb3MgLSBoYWxmV2lkdGggKyBoYWxmSGVpZ2h0O1xcblxcdFxcdHZlYzIgdXYgPSBMVENfVXYoIG5vcm1hbCwgdmlld0Rpciwgcm91Z2huZXNzICk7XFxuXFx0XFx0ZmxvYXQgbm9ybSA9IHRleHR1cmUyRCggbHRjTWFnLCB1diApLmE7XFxuXFx0XFx0dmVjNCB0ID0gdGV4dHVyZTJEKCBsdGNNYXQsIHV2ICk7XFxuXFx0XFx0bWF0MyBtSW52ID0gbWF0MyhcXG5cXHRcXHRcXHR2ZWMzKCAgIDEsICAgMCwgdC55ICksXFxuXFx0XFx0XFx0dmVjMyggICAwLCB0LnosICAgMCApLFxcblxcdFxcdFxcdHZlYzMoIHQudywgICAwLCB0LnggKVxcblxcdFxcdCk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gbGlnaHRDb2xvciAqIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgKiBub3JtICogTFRDX0V2YWx1YXRlKCBub3JtYWwsIHZpZXdEaXIsIHBvc2l0aW9uLCBtSW52LCByZWN0Q29vcmRzICk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBsaWdodENvbG9yICogbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICogTFRDX0V2YWx1YXRlKCBub3JtYWwsIHZpZXdEaXIsIHBvc2l0aW9uLCBtYXQzKCAxICksIHJlY3RDb29yZHMgKTtcXG5cXHR9XFxuI2VuZGlmXFxudm9pZCBSRV9EaXJlY3RfUGh5c2ljYWwoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdGZsb2F0IGRvdE5MID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKSApO1xcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGRvdE5MICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0REhSID0gbWF0ZXJpYWwuY2xlYXJDb2F0ICogY2xlYXJDb2F0REhSQXBwcm94KCBtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MsIGRvdE5MICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXRESFIgPSAwLjA7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gKCAxLjAgLSBjbGVhckNvYXRESFIgKSAqIGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0dHWCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKz0gKCAxLjAgLSBjbGVhckNvYXRESFIgKSAqIGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBtYXRlcmlhbC5jbGVhckNvYXQgKiBCUkRGX1NwZWN1bGFyX0dHWCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyApO1xcblxcdCNlbmRpZlxcbn1cXG52b2lkIFJFX0luZGlyZWN0RGlmZnVzZV9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxudm9pZCBSRV9JbmRpcmVjdFNwZWN1bGFyX1BoeXNpY2FsKCBjb25zdCBpbiB2ZWMzIHJhZGlhbmNlLCBjb25zdCBpbiB2ZWMzIGNsZWFyQ29hdFJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdFxcdGZsb2F0IGRvdE5MID0gZG90TlY7XFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0REhSID0gbWF0ZXJpYWwuY2xlYXJDb2F0ICogY2xlYXJDb2F0REhSQXBwcm94KCBtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MsIGRvdE5MICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXRESFIgPSAwLjA7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArPSAoIDEuMCAtIGNsZWFyQ29hdERIUiApICogcmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggZ2VvbWV0cnksIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IsIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICk7XFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gY2xlYXJDb2F0UmFkaWFuY2UgKiBtYXRlcmlhbC5jbGVhckNvYXQgKiBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggZ2VvbWV0cnksIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzICk7XFxuXFx0I2VuZGlmXFxufVxcbiNkZWZpbmUgUkVfRGlyZWN0XFx0XFx0XFx0XFx0UkVfRGlyZWN0X1BoeXNpY2FsXFxuI2RlZmluZSBSRV9EaXJlY3RfUmVjdEFyZWFcXHRcXHRSRV9EaXJlY3RfUmVjdEFyZWFfUGh5c2ljYWxcXG4jZGVmaW5lIFJFX0luZGlyZWN0RGlmZnVzZVxcdFxcdFJFX0luZGlyZWN0RGlmZnVzZV9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfSW5kaXJlY3RTcGVjdWxhclxcdFxcdFJFX0luZGlyZWN0U3BlY3VsYXJfUGh5c2ljYWxcXG4jZGVmaW5lIE1hdGVyaWFsX0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICkgICBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzIClcXG4jZGVmaW5lIE1hdGVyaWFsX0NsZWFyQ29hdF9CbGlublNoaW5pbmVzc0V4cG9uZW50KCBtYXRlcmlhbCApICAgR0dYUm91Z2huZXNzVG9CbGlubkV4cG9uZW50KCBtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MgKVxcbmZsb2F0IGNvbXB1dGVTcGVjdWxhck9jY2x1c2lvbiggY29uc3QgaW4gZmxvYXQgZG90TlYsIGNvbnN0IGluIGZsb2F0IGFtYmllbnRPY2NsdXNpb24sIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRyZXR1cm4gc2F0dXJhdGUoIHBvdyggZG90TlYgKyBhbWJpZW50T2NjbHVzaW9uLCBleHAyKCAtIDE2LjAgKiByb3VnaG5lc3MgLSAxLjAgKSApIC0gMS4wICsgYW1iaWVudE9jY2x1c2lvbiApO1xcbn1cXG5cIixcbiAgICBsaWdodHNfdGVtcGxhdGU6XCJcXG5HZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5O1xcbmdlb21ldHJ5LnBvc2l0aW9uID0gLSB2Vmlld1Bvc2l0aW9uO1xcbmdlb21ldHJ5Lm5vcm1hbCA9IG5vcm1hbDtcXG5nZW9tZXRyeS52aWV3RGlyID0gbm9ybWFsaXplKCB2Vmlld1Bvc2l0aW9uICk7XFxuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcXG4jaWYgKCBOVU1fUE9JTlRfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0UG9pbnRMaWdodCBwb2ludExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0cG9pbnRMaWdodCA9IHBvaW50TGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIHBvaW50TGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggcG9pbnRMaWdodC5zaGFkb3csIGRpcmVjdExpZ2h0LnZpc2libGUgKSApID8gZ2V0UG9pbnRTaGFkb3coIHBvaW50U2hhZG93TWFwWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93TWFwU2l6ZSwgcG9pbnRMaWdodC5zaGFkb3dCaWFzLCBwb2ludExpZ2h0LnNoYWRvd1JhZGl1cywgdlBvaW50U2hhZG93Q29vcmRbIGkgXSwgcG9pbnRMaWdodC5zaGFkb3dDYW1lcmFOZWFyLCBwb2ludExpZ2h0LnNoYWRvd0NhbWVyYUZhciApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmICggTlVNX1NQT1RfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0U3BvdExpZ2h0IHNwb3RMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0c3BvdExpZ2h0ID0gc3BvdExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldFNwb3REaXJlY3RMaWdodElycmFkaWFuY2UoIHNwb3RMaWdodCwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0I2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBzcG90TGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHQuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0LnNoYWRvd0JpYXMsIHNwb3RMaWdodC5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmICggTlVNX0RJUl9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0IClcXG5cXHREaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGRpcmVjdGlvbmFsTGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggZGlyZWN0aW9uYWxMaWdodC5zaGFkb3csIGRpcmVjdExpZ2h0LnZpc2libGUgKSApID8gZ2V0U2hhZG93KCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgaSBdLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd01hcFNpemUsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93QmlhcywgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dSYWRpdXMsIHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiAoIE5VTV9SRUNUX0FSRUFfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdF9SZWN0QXJlYSApXFxuXFx0UmVjdEFyZWFMaWdodCByZWN0QXJlYUxpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9SRUNUX0FSRUFfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHJlY3RBcmVhTGlnaHQgPSByZWN0QXJlYUxpZ2h0c1sgaSBdO1xcblxcdFxcdFJFX0RpcmVjdF9SZWN0QXJlYSggcmVjdEFyZWFMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBhbWJpZW50TGlnaHRDb2xvciApO1xcblxcdCNpZmRlZiBVU0VfTElHSFRNQVBcXG5cXHRcXHR2ZWMzIGxpZ2h0TWFwSXJyYWRpYW5jZSA9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKS54eXogKiBsaWdodE1hcEludGVuc2l0eTtcXG5cXHRcXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRcXHRsaWdodE1hcElycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0aXJyYWRpYW5jZSArPSBsaWdodE1hcElycmFkaWFuY2U7XFxuXFx0I2VuZGlmXFxuXFx0I2lmICggTlVNX0hFTUlfTElHSFRTID4gMCApXFxuXFx0XFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xcblxcdFxcdFxcdGlycmFkaWFuY2UgKz0gZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggaGVtaXNwaGVyZUxpZ2h0c1sgaSBdLCBnZW9tZXRyeSApO1xcblxcdFxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0aXJyYWRpYW5jZSArPSBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBnZW9tZXRyeSwgOCApO1xcblxcdCNlbmRpZlxcblxcdFJFX0luZGlyZWN0RGlmZnVzZSggaXJyYWRpYW5jZSwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUkVfSW5kaXJlY3RTcGVjdWxhciApXFxuXFx0dmVjMyByYWRpYW5jZSA9IGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBnZW9tZXRyeSwgTWF0ZXJpYWxfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSwgOCApO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHR2ZWMzIGNsZWFyQ29hdFJhZGlhbmNlID0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGdlb21ldHJ5LCBNYXRlcmlhbF9DbGVhckNvYXRfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSwgOCApO1xcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyBjbGVhckNvYXRSYWRpYW5jZSA9IHZlYzMoIDAuMCApO1xcblxcdCNlbmRpZlxcblxcdFJFX0luZGlyZWN0U3BlY3VsYXIoIHJhZGlhbmNlLCBjbGVhckNvYXRSYWRpYW5jZSwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcbiNlbmRpZlxcblwiLFxuICAgIGxvZ2RlcHRoYnVmX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9MT0dERVBUSEJVRiApICYmIGRlZmluZWQoIFVTRV9MT0dERVBUSEJVRl9FWFQgKVxcblxcdGdsX0ZyYWdEZXB0aEVYVCA9IGxvZzIoIHZGcmFnRGVwdGggKSAqIGxvZ0RlcHRoQnVmRkMgKiAwLjU7XFxuI2VuZGlmXCIsbG9nZGVwdGhidWZfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcXG5cXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XFxuXFx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cXHRcXHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsbG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0xPR0RFUFRIQlVGXFxuXFx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cXHRcXHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XFxuXFx0I2VuZGlmXFxuXFx0dW5pZm9ybSBmbG9hdCBsb2dEZXB0aEJ1ZkZDO1xcbiNlbmRpZlwiLGxvZ2RlcHRoYnVmX3ZlcnRleDpcIiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcXG5cXHQjaWZkZWYgVVNFX0xPR0RFUFRIQlVGX0VYVFxcblxcdFxcdHZGcmFnRGVwdGggPSAxLjAgKyBnbF9Qb3NpdGlvbi53O1xcblxcdCNlbHNlXFxuXFx0XFx0Z2xfUG9zaXRpb24ueiA9IGxvZzIoIG1heCggRVBTSUxPTiwgZ2xfUG9zaXRpb24udyArIDEuMCApICkgKiBsb2dEZXB0aEJ1ZkZDIC0gMS4wO1xcblxcdFxcdGdsX1Bvc2l0aW9uLnogKj0gZ2xfUG9zaXRpb24udztcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbiAgICBtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcblxcdHZlYzQgdGV4ZWxDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VXYgKTtcXG5cXHR0ZXhlbENvbG9yID0gbWFwVGV4ZWxUb0xpbmVhciggdGV4ZWxDb2xvciApO1xcblxcdGRpZmZ1c2VDb2xvciAqPSB0ZXhlbENvbG9yO1xcbiNlbmRpZlxcblwiLG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXFxuXCIsbWFwX3BhcnRpY2xlX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NQVBcXG5cXHR2ZWMyIHV2ID0gKCB1dlRyYW5zZm9ybSAqIHZlYzMoIGdsX1BvaW50Q29vcmQueCwgMS4wIC0gZ2xfUG9pbnRDb29yZC55LCAxICkgKS54eTtcXG5cXHR2ZWM0IG1hcFRleGVsID0gdGV4dHVyZTJEKCBtYXAsIHV2ICk7XFxuXFx0ZGlmZnVzZUNvbG9yICo9IG1hcFRleGVsVG9MaW5lYXIoIG1hcFRleGVsICk7XFxuI2VuZGlmXFxuXCIsbWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcblxcdHVuaWZvcm0gbWF0MyB1dlRyYW5zZm9ybTtcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXFxuXCIsXG4gICAgbWV0YWxuZXNzbWFwX2ZyYWdtZW50OlwiZmxvYXQgbWV0YWxuZXNzRmFjdG9yID0gbWV0YWxuZXNzO1xcbiNpZmRlZiBVU0VfTUVUQUxORVNTTUFQXFxuXFx0dmVjNCB0ZXhlbE1ldGFsbmVzcyA9IHRleHR1cmUyRCggbWV0YWxuZXNzTWFwLCB2VXYgKTtcXG5cXHRtZXRhbG5lc3NGYWN0b3IgKj0gdGV4ZWxNZXRhbG5lc3MuYjtcXG4jZW5kaWZcXG5cIixtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTUVUQUxORVNTTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWV0YWxuZXNzTWFwO1xcbiNlbmRpZlwiLG1vcnBobm9ybWFsX3ZlcnRleDpcIiNpZmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0b2JqZWN0Tm9ybWFsICs9ICggbW9ycGhOb3JtYWwwIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDAgXTtcXG5cXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDEgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMSBdO1xcblxcdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMiAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XFxuXFx0b2JqZWN0Tm9ybWFsICs9ICggbW9ycGhOb3JtYWwzIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDMgXTtcXG4jZW5kaWZcXG5cIixcbiAgICBtb3JwaHRhcmdldF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxuXFx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDggXTtcXG5cXHQjZWxzZVxcblxcdHVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsbW9ycGh0YXJnZXRfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MCAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDAgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MSAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDEgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MiAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MyAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDMgXTtcXG5cXHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NCAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NSAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDUgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NiAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDYgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NyAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDcgXTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbiAgICBub3JtYWxfZnJhZ21lbnQ6XCIjaWZkZWYgRkxBVF9TSEFERURcXG5cXHR2ZWMzIGZkeCA9IHZlYzMoIGRGZHgoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeCggdlZpZXdQb3NpdGlvbi56ICkgKTtcXG5cXHR2ZWMzIGZkeSA9IHZlYzMoIGRGZHkoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeSggdlZpZXdQb3NpdGlvbi56ICkgKTtcXG5cXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggY3Jvc3MoIGZkeCwgZmR5ICkgKTtcXG4jZWxzZVxcblxcdHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCB2Tm9ybWFsICk7XFxuXFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdG5vcm1hbCA9IG5vcm1hbCAqICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX05PUk1BTE1BUFxcblxcdG5vcm1hbCA9IHBlcnR1cmJOb3JtYWwyQXJiKCAtdlZpZXdQb3NpdGlvbiwgbm9ybWFsICk7XFxuI2VsaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKVxcblxcdG5vcm1hbCA9IHBlcnR1cmJOb3JtYWxBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwsIGRIZHh5X2Z3ZCgpICk7XFxuI2VuZGlmXFxuXCIsXG4gICAgbm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX05PUk1BTE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG5vcm1hbE1hcDtcXG5cXHR1bmlmb3JtIHZlYzIgbm9ybWFsU2NhbGU7XFxuXFx0dmVjMyBwZXJ0dXJiTm9ybWFsMkFyYiggdmVjMyBleWVfcG9zLCB2ZWMzIHN1cmZfbm9ybSApIHtcXG5cXHRcXHR2ZWMzIHEwID0gdmVjMyggZEZkeCggZXllX3Bvcy54ICksIGRGZHgoIGV5ZV9wb3MueSApLCBkRmR4KCBleWVfcG9zLnogKSApO1xcblxcdFxcdHZlYzMgcTEgPSB2ZWMzKCBkRmR5KCBleWVfcG9zLnggKSwgZEZkeSggZXllX3Bvcy55ICksIGRGZHkoIGV5ZV9wb3MueiApICk7XFxuXFx0XFx0dmVjMiBzdDAgPSBkRmR4KCB2VXYuc3QgKTtcXG5cXHRcXHR2ZWMyIHN0MSA9IGRGZHkoIHZVdi5zdCApO1xcblxcdFxcdHZlYzMgUyA9IG5vcm1hbGl6ZSggcTAgKiBzdDEudCAtIHExICogc3QwLnQgKTtcXG5cXHRcXHR2ZWMzIFQgPSBub3JtYWxpemUoIC1xMCAqIHN0MS5zICsgcTEgKiBzdDAucyApO1xcblxcdFxcdHZlYzMgTiA9IG5vcm1hbGl6ZSggc3VyZl9ub3JtICk7XFxuXFx0XFx0dmVjMyBtYXBOID0gdGV4dHVyZTJEKCBub3JtYWxNYXAsIHZVdiApLnh5eiAqIDIuMCAtIDEuMDtcXG5cXHRcXHRtYXBOLnh5ID0gbm9ybWFsU2NhbGUgKiBtYXBOLnh5O1xcblxcdFxcdG1hdDMgdHNuID0gbWF0MyggUywgVCwgTiApO1xcblxcdFxcdHJldHVybiBub3JtYWxpemUoIHRzbiAqIG1hcE4gKTtcXG5cXHR9XFxuI2VuZGlmXFxuXCIsXG4gICAgcGFja2luZzpcInZlYzMgcGFja05vcm1hbFRvUkdCKCBjb25zdCBpbiB2ZWMzIG5vcm1hbCApIHtcXG5cXHRyZXR1cm4gbm9ybWFsaXplKCBub3JtYWwgKSAqIDAuNSArIDAuNTtcXG59XFxudmVjMyB1bnBhY2tSR0JUb05vcm1hbCggY29uc3QgaW4gdmVjMyByZ2IgKSB7XFxuXFx0cmV0dXJuIDIuMCAqIHJnYi54eXogLSAxLjA7XFxufVxcbmNvbnN0IGZsb2F0IFBhY2tVcHNjYWxlID0gMjU2LiAvIDI1NS47Y29uc3QgZmxvYXQgVW5wYWNrRG93bnNjYWxlID0gMjU1LiAvIDI1Ni47XFxuY29uc3QgdmVjMyBQYWNrRmFjdG9ycyA9IHZlYzMoIDI1Ni4gKiAyNTYuICogMjU2LiwgMjU2LiAqIDI1Ni4sICAyNTYuICk7XFxuY29uc3QgdmVjNCBVbnBhY2tGYWN0b3JzID0gVW5wYWNrRG93bnNjYWxlIC8gdmVjNCggUGFja0ZhY3RvcnMsIDEuICk7XFxuY29uc3QgZmxvYXQgU2hpZnRSaWdodDggPSAxLiAvIDI1Ni47XFxudmVjNCBwYWNrRGVwdGhUb1JHQkEoIGNvbnN0IGluIGZsb2F0IHYgKSB7XFxuXFx0dmVjNCByID0gdmVjNCggZnJhY3QoIHYgKiBQYWNrRmFjdG9ycyApLCB2ICk7XFxuXFx0ci55encgLT0gci54eXogKiBTaGlmdFJpZ2h0ODtcXHRyZXR1cm4gciAqIFBhY2tVcHNjYWxlO1xcbn1cXG5mbG9hdCB1bnBhY2tSR0JBVG9EZXB0aCggY29uc3QgaW4gdmVjNCB2ICkge1xcblxcdHJldHVybiBkb3QoIHYsIFVucGFja0ZhY3RvcnMgKTtcXG59XFxuZmxvYXQgdmlld1pUb09ydGhvZ3JhcGhpY0RlcHRoKCBjb25zdCBpbiBmbG9hdCB2aWV3WiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiAoIHZpZXdaICsgbmVhciApIC8gKCBuZWFyIC0gZmFyICk7XFxufVxcbmZsb2F0IG9ydGhvZ3JhcGhpY0RlcHRoVG9WaWV3WiggY29uc3QgaW4gZmxvYXQgbGluZWFyQ2xpcFosIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG5cXHRyZXR1cm4gbGluZWFyQ2xpcFogKiAoIG5lYXIgLSBmYXIgKSAtIG5lYXI7XFxufVxcbmZsb2F0IHZpZXdaVG9QZXJzcGVjdGl2ZURlcHRoKCBjb25zdCBpbiBmbG9hdCB2aWV3WiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiAoKCBuZWFyICsgdmlld1ogKSAqIGZhciApIC8gKCggZmFyIC0gbmVhciApICogdmlld1ogKTtcXG59XFxuZmxvYXQgcGVyc3BlY3RpdmVEZXB0aFRvVmlld1ooIGNvbnN0IGluIGZsb2F0IGludkNsaXBaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuICggbmVhciAqIGZhciApIC8gKCAoIGZhciAtIG5lYXIgKSAqIGludkNsaXBaIC0gZmFyICk7XFxufVxcblwiLFxuICAgIHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ6XCIjaWZkZWYgUFJFTVVMVElQTElFRF9BTFBIQVxcblxcdGdsX0ZyYWdDb2xvci5yZ2IgKj0gZ2xfRnJhZ0NvbG9yLmE7XFxuI2VuZGlmXFxuXCIscHJvamVjdF92ZXJ0ZXg6XCJ2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG5cIixkaXRoZXJpbmdfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggRElUSEVSSU5HIClcXG4gIGdsX0ZyYWdDb2xvci5yZ2IgPSBkaXRoZXJpbmcoIGdsX0ZyYWdDb2xvci5yZ2IgKTtcXG4jZW5kaWZcXG5cIixkaXRoZXJpbmdfcGFyc19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBESVRIRVJJTkcgKVxcblxcdHZlYzMgZGl0aGVyaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdFxcdGZsb2F0IGdyaWRfcG9zaXRpb24gPSByYW5kKCBnbF9GcmFnQ29vcmQueHkgKTtcXG5cXHRcXHR2ZWMzIGRpdGhlcl9zaGlmdF9SR0IgPSB2ZWMzKCAwLjI1IC8gMjU1LjAsIC0wLjI1IC8gMjU1LjAsIDAuMjUgLyAyNTUuMCApO1xcblxcdFxcdGRpdGhlcl9zaGlmdF9SR0IgPSBtaXgoIDIuMCAqIGRpdGhlcl9zaGlmdF9SR0IsIC0yLjAgKiBkaXRoZXJfc2hpZnRfUkdCLCBncmlkX3Bvc2l0aW9uICk7XFxuXFx0XFx0cmV0dXJuIGNvbG9yICsgZGl0aGVyX3NoaWZ0X1JHQjtcXG5cXHR9XFxuI2VuZGlmXFxuXCIsXG4gICAgcm91Z2huZXNzbWFwX2ZyYWdtZW50OlwiZmxvYXQgcm91Z2huZXNzRmFjdG9yID0gcm91Z2huZXNzO1xcbiNpZmRlZiBVU0VfUk9VR0hORVNTTUFQXFxuXFx0dmVjNCB0ZXhlbFJvdWdobmVzcyA9IHRleHR1cmUyRCggcm91Z2huZXNzTWFwLCB2VXYgKTtcXG5cXHRyb3VnaG5lc3NGYWN0b3IgKj0gdGV4ZWxSb3VnaG5lc3MuZztcXG4jZW5kaWZcXG5cIixyb3VnaG5lc3NtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfUk9VR0hORVNTTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgcm91Z2huZXNzTWFwO1xcbiNlbmRpZlwiLHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlyZWN0aW9uYWxTaGFkb3dNYXBbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgc3BvdFNoYWRvd01hcFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZTcG90U2hhZG93Q29vcmRbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIHBvaW50U2hhZG93TWFwWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0ZmxvYXQgdGV4dHVyZTJEQ29tcGFyZSggc2FtcGxlcjJEIGRlcHRocywgdmVjMiB1diwgZmxvYXQgY29tcGFyZSApIHtcXG5cXHRcXHRyZXR1cm4gc3RlcCggY29tcGFyZSwgdW5wYWNrUkdCQVRvRGVwdGgoIHRleHR1cmUyRCggZGVwdGhzLCB1diApICkgKTtcXG5cXHR9XFxuXFx0ZmxvYXQgdGV4dHVyZTJEU2hhZG93TGVycCggc2FtcGxlcjJEIGRlcHRocywgdmVjMiBzaXplLCB2ZWMyIHV2LCBmbG9hdCBjb21wYXJlICkge1xcblxcdFxcdGNvbnN0IHZlYzIgb2Zmc2V0ID0gdmVjMiggMC4wLCAxLjAgKTtcXG5cXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2l6ZTtcXG5cXHRcXHR2ZWMyIGNlbnRyb2lkVVYgPSBmbG9vciggdXYgKiBzaXplICsgMC41ICkgLyBzaXplO1xcblxcdFxcdGZsb2F0IGxiID0gdGV4dHVyZTJEQ29tcGFyZSggZGVwdGhzLCBjZW50cm9pZFVWICsgdGV4ZWxTaXplICogb2Zmc2V0Lnh4LCBjb21wYXJlICk7XFxuXFx0XFx0ZmxvYXQgbHQgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueHksIGNvbXBhcmUgKTtcXG5cXHRcXHRmbG9hdCByYiA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC55eCwgY29tcGFyZSApO1xcblxcdFxcdGZsb2F0IHJ0ID0gdGV4dHVyZTJEQ29tcGFyZSggZGVwdGhzLCBjZW50cm9pZFVWICsgdGV4ZWxTaXplICogb2Zmc2V0Lnl5LCBjb21wYXJlICk7XFxuXFx0XFx0dmVjMiBmID0gZnJhY3QoIHV2ICogc2l6ZSArIDAuNSApO1xcblxcdFxcdGZsb2F0IGEgPSBtaXgoIGxiLCBsdCwgZi55ICk7XFxuXFx0XFx0ZmxvYXQgYiA9IG1peCggcmIsIHJ0LCBmLnkgKTtcXG5cXHRcXHRmbG9hdCBjID0gbWl4KCBhLCBiLCBmLnggKTtcXG5cXHRcXHRyZXR1cm4gYztcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0U2hhZG93KCBzYW1wbGVyMkQgc2hhZG93TWFwLCB2ZWMyIHNoYWRvd01hcFNpemUsIGZsb2F0IHNoYWRvd0JpYXMsIGZsb2F0IHNoYWRvd1JhZGl1cywgdmVjNCBzaGFkb3dDb29yZCApIHtcXG5cXHRcXHRmbG9hdCBzaGFkb3cgPSAxLjA7XFxuXFx0XFx0c2hhZG93Q29vcmQueHl6IC89IHNoYWRvd0Nvb3JkLnc7XFxuXFx0XFx0c2hhZG93Q29vcmQueiArPSBzaGFkb3dCaWFzO1xcblxcdFxcdGJ2ZWM0IGluRnJ1c3R1bVZlYyA9IGJ2ZWM0ICggc2hhZG93Q29vcmQueCA+PSAwLjAsIHNoYWRvd0Nvb3JkLnggPD0gMS4wLCBzaGFkb3dDb29yZC55ID49IDAuMCwgc2hhZG93Q29vcmQueSA8PSAxLjAgKTtcXG5cXHRcXHRib29sIGluRnJ1c3R1bSA9IGFsbCggaW5GcnVzdHVtVmVjICk7XFxuXFx0XFx0YnZlYzIgZnJ1c3R1bVRlc3RWZWMgPSBidmVjMiggaW5GcnVzdHVtLCBzaGFkb3dDb29yZC56IDw9IDEuMCApO1xcblxcdFxcdGJvb2wgZnJ1c3R1bVRlc3QgPSBhbGwoIGZydXN0dW1UZXN0VmVjICk7XFxuXFx0XFx0aWYgKCBmcnVzdHVtVGVzdCApIHtcXG5cXHRcXHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGIClcXG5cXHRcXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHRcXHRmbG9hdCBkeDAgPSAtIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MCA9IC0gdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTEgPSArIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHNoYWRvdyA9IChcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MSApLCBzaGFkb3dDb29yZC56IClcXG5cXHRcXHRcXHQpICogKCAxLjAgLyA5LjAgKTtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVCApXFxuXFx0XFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0XFx0ZmxvYXQgZHgwID0gLSB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTAgPSAtIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR4MSA9ICsgdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHkxID0gKyB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRzaGFkb3cgPSAoXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXFxuXFx0XFx0XFx0KSAqICggMS4wIC8gOS4wICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRzaGFkb3cgPSB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiBzaGFkb3c7XFxuXFx0fVxcblxcdHZlYzIgY3ViZVRvVVYoIHZlYzMgdiwgZmxvYXQgdGV4ZWxTaXplWSApIHtcXG5cXHRcXHR2ZWMzIGFic1YgPSBhYnMoIHYgKTtcXG5cXHRcXHRmbG9hdCBzY2FsZVRvQ3ViZSA9IDEuMCAvIG1heCggYWJzVi54LCBtYXgoIGFic1YueSwgYWJzVi56ICkgKTtcXG5cXHRcXHRhYnNWICo9IHNjYWxlVG9DdWJlO1xcblxcdFxcdHYgKj0gc2NhbGVUb0N1YmUgKiAoIDEuMCAtIDIuMCAqIHRleGVsU2l6ZVkgKTtcXG5cXHRcXHR2ZWMyIHBsYW5hciA9IHYueHk7XFxuXFx0XFx0ZmxvYXQgYWxtb3N0QVRleGVsID0gMS41ICogdGV4ZWxTaXplWTtcXG5cXHRcXHRmbG9hdCBhbG1vc3RPbmUgPSAxLjAgLSBhbG1vc3RBVGV4ZWw7XFxuXFx0XFx0aWYgKCBhYnNWLnogPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGlmICggdi56ID4gMC4wIClcXG5cXHRcXHRcXHRcXHRwbGFuYXIueCA9IDQuMCAtIHYueDtcXG5cXHRcXHR9IGVsc2UgaWYgKCBhYnNWLnggPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGZsb2F0IHNpZ25YID0gc2lnbiggdi54ICk7XFxuXFx0XFx0XFx0cGxhbmFyLnggPSB2LnogKiBzaWduWCArIDIuMCAqIHNpZ25YO1xcblxcdFxcdH0gZWxzZSBpZiAoIGFic1YueSA+PSBhbG1vc3RPbmUgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc2lnblkgPSBzaWduKCB2LnkgKTtcXG5cXHRcXHRcXHRwbGFuYXIueCA9IHYueCArIDIuMCAqIHNpZ25ZICsgMi4wO1xcblxcdFxcdFxcdHBsYW5hci55ID0gdi56ICogc2lnblkgLSAyLjA7XFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiB2ZWMyKCAwLjEyNSwgMC4yNSApICogcGxhbmFyICsgdmVjMiggMC4zNzUsIDAuNzUgKTtcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0UG9pbnRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkLCBmbG9hdCBzaGFkb3dDYW1lcmFOZWFyLCBmbG9hdCBzaGFkb3dDYW1lcmFGYXIgKSB7XFxuXFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvICggc2hhZG93TWFwU2l6ZSAqIHZlYzIoIDQuMCwgMi4wICkgKTtcXG5cXHRcXHR2ZWMzIGxpZ2h0VG9Qb3NpdGlvbiA9IHNoYWRvd0Nvb3JkLnh5ejtcXG5cXHRcXHRmbG9hdCBkcCA9ICggbGVuZ3RoKCBsaWdodFRvUG9zaXRpb24gKSAtIHNoYWRvd0NhbWVyYU5lYXIgKSAvICggc2hhZG93Q2FtZXJhRmFyIC0gc2hhZG93Q2FtZXJhTmVhciApO1xcdFxcdGRwICs9IHNoYWRvd0JpYXM7XFxuXFx0XFx0dmVjMyBiZDNEID0gbm9ybWFsaXplKCBsaWdodFRvUG9zaXRpb24gKTtcXG5cXHRcXHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGICkgfHwgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKVxcblxcdFxcdFxcdHZlYzIgb2Zmc2V0ID0gdmVjMiggLSAxLCAxICkgKiBzaGFkb3dSYWRpdXMgKiB0ZXhlbFNpemUueTtcXG5cXHRcXHRcXHRyZXR1cm4gKFxcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHl5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eXgsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXl4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNELCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh4eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eHksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl4eCwgdGV4ZWxTaXplLnkgKSwgZHAgKVxcblxcdFxcdFxcdCkgKiAoIDEuMCAvIDkuMCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0cmV0dXJuIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QsIHRleGVsU2l6ZS55ICksIGRwICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcblwiLFxuICAgIHNoYWRvd21hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIG1hdDQgc3BvdFNoYWRvd01hdHJpeFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZTcG90U2hhZG93Q29vcmRbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBwb2ludFNoYWRvd01hdHJpeFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuICAgIHNoYWRvd21hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHR2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdID0gZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHZTcG90U2hhZG93Q29vcmRbIGkgXSA9IHNwb3RTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dlBvaW50U2hhZG93Q29vcmRbIGkgXSA9IHBvaW50U2hhZG93TWF0cml4WyBpIF0gKiB3b3JsZFBvc2l0aW9uO1xcblxcdH1cXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbiAgICBzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ6XCJmbG9hdCBnZXRTaGFkb3dNYXNrKCkge1xcblxcdGZsb2F0IHNoYWRvdyA9IDEuMDtcXG5cXHQjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHREaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XFxuXFx0XFx0c2hhZG93ICo9IGJvb2woIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93ICkgPyBnZXRTaGFkb3coIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBpIF0sIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93TWFwU2l6ZSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dCaWFzLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd1JhZGl1cywgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdFNwb3RMaWdodCBzcG90TGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHNwb3RMaWdodCA9IHNwb3RMaWdodHNbIGkgXTtcXG5cXHRcXHRzaGFkb3cgKj0gYm9vbCggc3BvdExpZ2h0LnNoYWRvdyApID8gZ2V0U2hhZG93KCBzcG90U2hhZG93TWFwWyBpIF0sIHNwb3RMaWdodC5zaGFkb3dNYXBTaXplLCBzcG90TGlnaHQuc2hhZG93Qmlhcywgc3BvdExpZ2h0LnNoYWRvd1JhZGl1cywgdlNwb3RTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xcblxcdFxcdHNoYWRvdyAqPSBib29sKCBwb2ludExpZ2h0LnNoYWRvdyApID8gZ2V0UG9pbnRTaGFkb3coIHBvaW50U2hhZG93TWFwWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93TWFwU2l6ZSwgcG9pbnRMaWdodC5zaGFkb3dCaWFzLCBwb2ludExpZ2h0LnNoYWRvd1JhZGl1cywgdlBvaW50U2hhZG93Q29vcmRbIGkgXSwgcG9pbnRMaWdodC5zaGFkb3dDYW1lcmFOZWFyLCBwb2ludExpZ2h0LnNoYWRvd0NhbWVyYUZhciApIDogMS4wO1xcblxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjZW5kaWZcXG5cXHRyZXR1cm4gc2hhZG93O1xcbn1cXG5cIixcbiAgICBza2luYmFzZV92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0bWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC54ICk7XFxuXFx0bWF0NCBib25lTWF0WSA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC55ICk7XFxuXFx0bWF0NCBib25lTWF0WiA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC56ICk7XFxuXFx0bWF0NCBib25lTWF0VyA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC53ICk7XFxuI2VuZGlmXCIsc2tpbm5pbmdfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXg7XFxuXFx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXhJbnZlcnNlO1xcblxcdCNpZmRlZiBCT05FX1RFWFRVUkVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBib25lVGV4dHVyZTtcXG5cXHRcXHR1bmlmb3JtIGludCBib25lVGV4dHVyZVNpemU7XFxuXFx0XFx0bWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xcblxcdFxcdFxcdGZsb2F0IGogPSBpICogNC4wO1xcblxcdFxcdFxcdGZsb2F0IHggPSBtb2QoIGosIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKSApO1xcblxcdFxcdFxcdGZsb2F0IHkgPSBmbG9vciggaiAvIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKSApO1xcblxcdFxcdFxcdGZsb2F0IGR4ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApO1xcblxcdFxcdFxcdGZsb2F0IGR5ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApO1xcblxcdFxcdFxcdHkgPSBkeSAqICggeSArIDAuNSApO1xcblxcdFxcdFxcdHZlYzQgdjEgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDAuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHR2ZWM0IHYyID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAxLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0dmVjNCB2MyA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMi41ICksIHkgKSApO1xcblxcdFxcdFxcdHZlYzQgdjQgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDMuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHRtYXQ0IGJvbmUgPSBtYXQ0KCB2MSwgdjIsIHYzLCB2NCApO1xcblxcdFxcdFxcdHJldHVybiBib25lO1xcblxcdFxcdH1cXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gbWF0NCBib25lTWF0cmljZXNbIE1BWF9CT05FUyBdO1xcblxcdFxcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5cXHRcXHRcXHRtYXQ0IGJvbmUgPSBib25lTWF0cmljZXNbIGludChpKSBdO1xcblxcdFxcdFxcdHJldHVybiBib25lO1xcblxcdFxcdH1cXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbiAgICBza2lubmluZ192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0dmVjNCBza2luVmVydGV4ID0gYmluZE1hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5cXHR2ZWM0IHNraW5uZWQgPSB2ZWM0KCAwLjAgKTtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRYICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueDtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRaICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQuejtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRXICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQudztcXG5cXHR0cmFuc2Zvcm1lZCA9ICggYmluZE1hdHJpeEludmVyc2UgKiBza2lubmVkICkueHl6O1xcbiNlbmRpZlxcblwiLHNraW5ub3JtYWxfdmVydGV4OlwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdG1hdDQgc2tpbk1hdHJpeCA9IG1hdDQoIDAuMCApO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC54ICogYm9uZU1hdFg7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnkgKiBib25lTWF0WTtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueiAqIGJvbmVNYXRaO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC53ICogYm9uZU1hdFc7XFxuXFx0c2tpbk1hdHJpeCAgPSBiaW5kTWF0cml4SW52ZXJzZSAqIHNraW5NYXRyaXggKiBiaW5kTWF0cml4O1xcblxcdG9iamVjdE5vcm1hbCA9IHZlYzQoIHNraW5NYXRyaXggKiB2ZWM0KCBvYmplY3ROb3JtYWwsIDAuMCApICkueHl6O1xcbiNlbmRpZlxcblwiLFxuICAgIHNwZWN1bGFybWFwX2ZyYWdtZW50OlwiZmxvYXQgc3BlY3VsYXJTdHJlbmd0aDtcXG4jaWZkZWYgVVNFX1NQRUNVTEFSTUFQXFxuXFx0dmVjNCB0ZXhlbFNwZWN1bGFyID0gdGV4dHVyZTJEKCBzcGVjdWxhck1hcCwgdlV2ICk7XFxuXFx0c3BlY3VsYXJTdHJlbmd0aCA9IHRleGVsU3BlY3VsYXIucjtcXG4jZWxzZVxcblxcdHNwZWN1bGFyU3RyZW5ndGggPSAxLjA7XFxuI2VuZGlmXCIsc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhck1hcDtcXG4jZW5kaWZcIix0b25lbWFwcGluZ19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBUT05FX01BUFBJTkcgKVxcbiAgZ2xfRnJhZ0NvbG9yLnJnYiA9IHRvbmVNYXBwaW5nKCBnbF9GcmFnQ29sb3IucmdiICk7XFxuI2VuZGlmXFxuXCIsdG9uZW1hcHBpbmdfcGFyc19mcmFnbWVudDpcIiNpZm5kZWYgc2F0dXJhdGVcXG5cXHQjZGVmaW5lIHNhdHVyYXRlKGEpIGNsYW1wKCBhLCAwLjAsIDEuMCApXFxuI2VuZGlmXFxudW5pZm9ybSBmbG9hdCB0b25lTWFwcGluZ0V4cG9zdXJlO1xcbnVuaWZvcm0gZmxvYXQgdG9uZU1hcHBpbmdXaGl0ZVBvaW50O1xcbnZlYzMgTGluZWFyVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0cmV0dXJuIHRvbmVNYXBwaW5nRXhwb3N1cmUgKiBjb2xvcjtcXG59XFxudmVjMyBSZWluaGFyZFRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuXFx0cmV0dXJuIHNhdHVyYXRlKCBjb2xvciAvICggdmVjMyggMS4wICkgKyBjb2xvciApICk7XFxufVxcbiNkZWZpbmUgVW5jaGFydGVkMkhlbHBlciggeCApIG1heCggKCAoIHggKiAoIDAuMTUgKiB4ICsgMC4xMCAqIDAuNTAgKSArIDAuMjAgKiAwLjAyICkgLyAoIHggKiAoIDAuMTUgKiB4ICsgMC41MCApICsgMC4yMCAqIDAuMzAgKSApIC0gMC4wMiAvIDAuMzAsIHZlYzMoIDAuMCApIClcXG52ZWMzIFVuY2hhcnRlZDJUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlO1xcblxcdHJldHVybiBzYXR1cmF0ZSggVW5jaGFydGVkMkhlbHBlciggY29sb3IgKSAvIFVuY2hhcnRlZDJIZWxwZXIoIHZlYzMoIHRvbmVNYXBwaW5nV2hpdGVQb2ludCApICkgKTtcXG59XFxudmVjMyBPcHRpbWl6ZWRDaW5lb25Ub25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlO1xcblxcdGNvbG9yID0gbWF4KCB2ZWMzKCAwLjAgKSwgY29sb3IgLSAwLjAwNCApO1xcblxcdHJldHVybiBwb3coICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMC41ICkgKSAvICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMS43ICkgKyAwLjA2ICksIHZlYzMoIDIuMiApICk7XFxufVxcblwiLFxuICAgIHV2X3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2O1xcbiNlbmRpZlwiLHV2X3BhcnNfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXFxuXFx0dmFyeWluZyB2ZWMyIHZVdjtcXG5cXHR1bmlmb3JtIG1hdDMgdXZUcmFuc2Zvcm07XFxuI2VuZGlmXFxuXCIsXG4gICAgdXZfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXFxuXFx0dlV2ID0gKCB1dlRyYW5zZm9ybSAqIHZlYzMoIHV2LCAxICkgKS54eTtcXG4jZW5kaWZcIix1djJfcGFyc19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBVU0VfTElHSFRNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQU9NQVAgKVxcblxcdHZhcnlpbmcgdmVjMiB2VXYyO1xcbiNlbmRpZlwiLHV2Ml9wYXJzX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfTElHSFRNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQU9NQVAgKVxcblxcdGF0dHJpYnV0ZSB2ZWMyIHV2MjtcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2MjtcXG4jZW5kaWZcIixcbiAgICB1djJfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0dlV2MiA9IHV2MjtcXG4jZW5kaWZcIix3b3JsZHBvc192ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQoIERJU1RBTkNFICkgfHwgZGVmaW5lZCAoIFVTRV9TSEFET1dNQVAgKVxcblxcdHZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xcbiNlbmRpZlxcblwiLGN1YmVfZnJhZzpcInVuaWZvcm0gc2FtcGxlckN1YmUgdEN1YmU7XFxudW5pZm9ybSBmbG9hdCB0RmxpcDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbnZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlQ3ViZSggdEN1YmUsIHZlYzMoIHRGbGlwICogdldvcmxkUG9zaXRpb24ueCwgdldvcmxkUG9zaXRpb24ueXogKSApO1xcblxcdGdsX0ZyYWdDb2xvci5hICo9IG9wYWNpdHk7XFxufVxcblwiLFxuICAgIGN1YmVfdmVydDpcInZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2V29ybGRQb3NpdGlvbiA9IHRyYW5zZm9ybURpcmVjdGlvbiggcG9zaXRpb24sIG1vZGVsTWF0cml4ICk7XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0Z2xfUG9zaXRpb24ueiA9IGdsX1Bvc2l0aW9uLnc7XFxufVxcblwiLGRlcHRoX2ZyYWc6XCIjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0dW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIDEuMCApO1xcblxcdCNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcXG5cXHRcXHRkaWZmdXNlQ29sb3IuYSA9IG9wYWNpdHk7XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIHZlYzMoIGdsX0ZyYWdDb29yZC56ICksIG9wYWNpdHkgKTtcXG5cXHQjZWxpZiBERVBUSF9QQUNLSU5HID09IDMyMDFcXG5cXHRcXHRnbF9GcmFnQ29sb3IgPSBwYWNrRGVwdGhUb1JHQkEoIGdsX0ZyYWdDb29yZC56ICk7XFxuXFx0I2VuZGlmXFxufVxcblwiLFxuICAgIGRlcHRoX3ZlcnQ6XCIjaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdFxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0XFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHRcXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxufVxcblwiLFxuICAgIGRpc3RhbmNlUkdCQV9mcmFnOlwiI2RlZmluZSBESVNUQU5DRVxcbnVuaWZvcm0gdmVjMyByZWZlcmVuY2VQb3NpdGlvbjtcXG51bmlmb3JtIGZsb2F0IG5lYXJEaXN0YW5jZTtcXG51bmlmb3JtIGZsb2F0IGZhckRpc3RhbmNlO1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluICgpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggMS4wICk7XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHRmbG9hdCBkaXN0ID0gbGVuZ3RoKCB2V29ybGRQb3NpdGlvbiAtIHJlZmVyZW5jZVBvc2l0aW9uICk7XFxuXFx0ZGlzdCA9ICggZGlzdCAtIG5lYXJEaXN0YW5jZSApIC8gKCBmYXJEaXN0YW5jZSAtIG5lYXJEaXN0YW5jZSApO1xcblxcdGRpc3QgPSBzYXR1cmF0ZSggZGlzdCApO1xcblxcdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggZGlzdCApO1xcbn1cXG5cIixcbiAgICBkaXN0YW5jZVJHQkFfdmVydDpcIiNkZWZpbmUgRElTVEFOQ0VcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdFxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0XFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHRcXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcXG59XFxuXCIsXG4gICAgZXF1aXJlY3RfZnJhZzpcInVuaWZvcm0gc2FtcGxlcjJEIHRFcXVpcmVjdDtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dmVjMyBkaXJlY3Rpb24gPSBub3JtYWxpemUoIHZXb3JsZFBvc2l0aW9uICk7XFxuXFx0dmVjMiBzYW1wbGVVVjtcXG5cXHRzYW1wbGVVVi55ID0gYXNpbiggY2xhbXAoIGRpcmVjdGlvbi55LCAtIDEuMCwgMS4wICkgKSAqIFJFQ0lQUk9DQUxfUEkgKyAwLjU7XFxuXFx0c2FtcGxlVVYueCA9IGF0YW4oIGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueCApICogUkVDSVBST0NBTF9QSTIgKyAwLjU7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKCB0RXF1aXJlY3QsIHNhbXBsZVVWICk7XFxufVxcblwiLGVxdWlyZWN0X3ZlcnQ6XCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dldvcmxkUG9zaXRpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcbn1cXG5cIixcbiAgICBsaW5lZGFzaGVkX2ZyYWc6XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCBkYXNoU2l6ZTtcXG51bmlmb3JtIGZsb2F0IHRvdGFsU2l6ZTtcXG52YXJ5aW5nIGZsb2F0IHZMaW5lRGlzdGFuY2U7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdGlmICggbW9kKCB2TGluZURpc3RhbmNlLCB0b3RhbFNpemUgKSA+IGRhc2hTaXplICkge1xcblxcdFxcdGRpc2NhcmQ7XFxuXFx0fVxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0b3V0Z29pbmdMaWdodCA9IGRpZmZ1c2VDb2xvci5yZ2I7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cXG5cIixcbiAgICBsaW5lZGFzaGVkX3ZlcnQ6XCJ1bmlmb3JtIGZsb2F0IHNjYWxlO1xcbmF0dHJpYnV0ZSBmbG9hdCBsaW5lRGlzdGFuY2U7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0dkxpbmVEaXN0YW5jZSA9IHNjYWxlICogbGluZURpc3RhbmNlO1xcblxcdHZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG5cXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLFxuICAgIG1lc2hiYXNpY19mcmFnOlwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdCNpZmRlZiBVU0VfTElHSFRNQVBcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApLnh5eiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xcblxcdCNlbHNlXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IHZlYzMoIDEuMCApO1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2U7XFxuXFx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiLFxuICAgIG1lc2hiYXNpY192ZXJ0OlwiI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XFxuXCIsXG4gICAgbWVzaGxhbWJlcnRfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHR2YXJ5aW5nIHZlYzMgdkxpZ2h0QmFjaztcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hc2tfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSA9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XFxuXFx0I2luY2x1ZGUgPGxpZ2h0bWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBCUkRGX0RpZmZ1c2VfTGFtYmVydCggZGlmZnVzZUNvbG9yLnJnYiApO1xcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gKCBnbF9Gcm9udEZhY2luZyApID8gdkxpZ2h0RnJvbnQgOiB2TGlnaHRCYWNrO1xcblxcdCNlbHNlXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9IHZMaWdodEZyb250O1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKj0gQlJERl9EaWZmdXNlX0xhbWJlcnQoIGRpZmZ1c2VDb2xvci5yZ2IgKSAqIGdldFNoYWRvd01hc2soKTtcXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50Plxcbn1cXG5cIixcbiAgICBtZXNobGFtYmVydF92ZXJ0OlwiI2RlZmluZSBMQU1CRVJUXFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHR2YXJ5aW5nIHZlYzMgdkxpZ2h0QmFjaztcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGFycz5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19sYW1iZXJ0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XFxuXCIsXG4gICAgbWVzaHBob25nX2ZyYWc6XCIjZGVmaW5lIFBIT05HXFxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gdmVjMyBzcGVjdWxhcjtcXG51bmlmb3JtIGZsb2F0IHNoaW5pbmVzcztcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19waG9uZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3RlbXBsYXRlPlxcblxcdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xcblxcdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVxcblwiLFxuICAgIG1lc2hwaG9uZ192ZXJ0OlwiI2RlZmluZSBQSE9OR1xcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLFxuICAgIG1lc2hwaHlzaWNhbF9mcmFnOlwiI2RlZmluZSBQSFlTSUNBTFxcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIGZsb2F0IHJvdWdobmVzcztcXG51bmlmb3JtIGZsb2F0IG1ldGFsbmVzcztcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2lmbmRlZiBTVEFOREFSRFxcblxcdHVuaWZvcm0gZmxvYXQgY2xlYXJDb2F0O1xcblxcdHVuaWZvcm0gZmxvYXQgY2xlYXJDb2F0Um91Z2huZXNzO1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cm91Z2huZXNzbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3RlbXBsYXRlPlxcblxcdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50Plxcbn1cXG5cIixcbiAgICBtZXNocGh5c2ljYWxfdmVydDpcIiNkZWZpbmUgUEhZU0lDQUxcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuI2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XFxuXCIsXG4gICAgbm9ybWFsX2ZyYWc6XCIjZGVmaW5lIE5PUk1BTFxcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcblxcdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNlbmRpZlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggcGFja05vcm1hbFRvUkdCKCBub3JtYWwgKSwgb3BhY2l0eSApO1xcbn1cXG5cIixcbiAgICBub3JtYWxfdmVydDpcIiNkZWZpbmUgTk9STUFMXFxuI2lmIGRlZmluZWQoIEZMQVRfU0hBREVEICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jZW5kaWZcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlxcbn1cXG5cIixcbiAgICBwb2ludHNfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiLFxuICAgIHBvaW50c192ZXJ0OlwidW5pZm9ybSBmbG9hdCBzaXplO1xcbnVuaWZvcm0gZmxvYXQgc2NhbGU7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXFxuXFx0XFx0Z2xfUG9pbnRTaXplID0gc2l6ZSAqICggc2NhbGUgLyAtIG12UG9zaXRpb24ueiApO1xcblxcdCNlbHNlXFxuXFx0XFx0Z2xfUG9pbnRTaXplID0gc2l6ZTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLFxuICAgIHNoYWRvd19mcmFnOlwidW5pZm9ybSB2ZWMzIGNvbG9yO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFza19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBjb2xvciwgb3BhY2l0eSAqICggMS4wIC0gZ2V0U2hhZG93TWFzaygpICkgKTtcXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cXG5cIixzaGFkb3dfdmVydDpcIiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XFxuXCJ9LFxuICAgIHRiPXtiYXNpYzp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuc3BlY3VsYXJtYXAsSy5lbnZtYXAsSy5hb21hcCxLLmxpZ2h0bWFwLEsuZm9nXSksdmVydGV4U2hhZGVyOlIubWVzaGJhc2ljX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5tZXNoYmFzaWNfZnJhZ30sbGFtYmVydDp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuc3BlY3VsYXJtYXAsSy5lbnZtYXAsSy5hb21hcCxLLmxpZ2h0bWFwLEsuZW1pc3NpdmVtYXAsSy5mb2csSy5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgSCgwKX19XSksdmVydGV4U2hhZGVyOlIubWVzaGxhbWJlcnRfdmVydCxmcmFnbWVudFNoYWRlcjpSLm1lc2hsYW1iZXJ0X2ZyYWd9LHBob25nOnt1bmlmb3JtczpHYS5tZXJnZShbSy5jb21tb24sSy5zcGVjdWxhcm1hcCxLLmVudm1hcCxLLmFvbWFwLEsubGlnaHRtYXAsSy5lbWlzc2l2ZW1hcCxLLmJ1bXBtYXAsSy5ub3JtYWxtYXAsSy5kaXNwbGFjZW1lbnRtYXAsSy5ncmFkaWVudG1hcCxcbiAgICBLLmZvZyxLLmxpZ2h0cyx7ZW1pc3NpdmU6e3ZhbHVlOm5ldyBIKDApfSxzcGVjdWxhcjp7dmFsdWU6bmV3IEgoMTExODQ4MSl9LHNoaW5pbmVzczp7dmFsdWU6MzB9fV0pLHZlcnRleFNoYWRlcjpSLm1lc2hwaG9uZ192ZXJ0LGZyYWdtZW50U2hhZGVyOlIubWVzaHBob25nX2ZyYWd9LHN0YW5kYXJkOnt1bmlmb3JtczpHYS5tZXJnZShbSy5jb21tb24sSy5lbnZtYXAsSy5hb21hcCxLLmxpZ2h0bWFwLEsuZW1pc3NpdmVtYXAsSy5idW1wbWFwLEsubm9ybWFsbWFwLEsuZGlzcGxhY2VtZW50bWFwLEsucm91Z2huZXNzbWFwLEsubWV0YWxuZXNzbWFwLEsuZm9nLEsubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IEgoMCl9LHJvdWdobmVzczp7dmFsdWU6LjV9LG1ldGFsbmVzczp7dmFsdWU6LjV9LGVudk1hcEludGVuc2l0eTp7dmFsdWU6MX19XSksdmVydGV4U2hhZGVyOlIubWVzaHBoeXNpY2FsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5tZXNocGh5c2ljYWxfZnJhZ30scG9pbnRzOnt1bmlmb3JtczpHYS5tZXJnZShbSy5wb2ludHMsXG4gICAgSy5mb2ddKSx2ZXJ0ZXhTaGFkZXI6Ui5wb2ludHNfdmVydCxmcmFnbWVudFNoYWRlcjpSLnBvaW50c19mcmFnfSxkYXNoZWQ6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLmNvbW1vbixLLmZvZyx7c2NhbGU6e3ZhbHVlOjF9LGRhc2hTaXplOnt2YWx1ZToxfSx0b3RhbFNpemU6e3ZhbHVlOjJ9fV0pLHZlcnRleFNoYWRlcjpSLmxpbmVkYXNoZWRfdmVydCxmcmFnbWVudFNoYWRlcjpSLmxpbmVkYXNoZWRfZnJhZ30sZGVwdGg6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLmNvbW1vbixLLmRpc3BsYWNlbWVudG1hcF0pLHZlcnRleFNoYWRlcjpSLmRlcHRoX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5kZXB0aF9mcmFnfSxub3JtYWw6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLmNvbW1vbixLLmJ1bXBtYXAsSy5ub3JtYWxtYXAsSy5kaXNwbGFjZW1lbnRtYXAse29wYWNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpSLm5vcm1hbF92ZXJ0LGZyYWdtZW50U2hhZGVyOlIubm9ybWFsX2ZyYWd9LGN1YmU6e3VuaWZvcm1zOnt0Q3ViZTp7dmFsdWU6bnVsbH0sXG4gICAgdEZsaXA6e3ZhbHVlOi0xfSxvcGFjaXR5Ont2YWx1ZToxfX0sdmVydGV4U2hhZGVyOlIuY3ViZV92ZXJ0LGZyYWdtZW50U2hhZGVyOlIuY3ViZV9mcmFnfSxlcXVpcmVjdDp7dW5pZm9ybXM6e3RFcXVpcmVjdDp7dmFsdWU6bnVsbH19LHZlcnRleFNoYWRlcjpSLmVxdWlyZWN0X3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5lcXVpcmVjdF9mcmFnfSxkaXN0YW5jZVJHQkE6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLmNvbW1vbixLLmRpc3BsYWNlbWVudG1hcCx7cmVmZXJlbmNlUG9zaXRpb246e3ZhbHVlOm5ldyBwfSxuZWFyRGlzdGFuY2U6e3ZhbHVlOjF9LGZhckRpc3RhbmNlOnt2YWx1ZToxRTN9fV0pLHZlcnRleFNoYWRlcjpSLmRpc3RhbmNlUkdCQV92ZXJ0LGZyYWdtZW50U2hhZGVyOlIuZGlzdGFuY2VSR0JBX2ZyYWd9LHNoYWRvdzp7dW5pZm9ybXM6R2EubWVyZ2UoW0subGlnaHRzLEsuZm9nLHtjb2xvcjp7dmFsdWU6bmV3IEgoMCl9LG9wYWNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpSLnNoYWRvd192ZXJ0LFxuICAgIGZyYWdtZW50U2hhZGVyOlIuc2hhZG93X2ZyYWd9fTt0Yi5waHlzaWNhbD17dW5pZm9ybXM6R2EubWVyZ2UoW3RiLnN0YW5kYXJkLnVuaWZvcm1zLHtjbGVhckNvYXQ6e3ZhbHVlOjB9LGNsZWFyQ29hdFJvdWdobmVzczp7dmFsdWU6MH19XSksdmVydGV4U2hhZGVyOlIubWVzaHBoeXNpY2FsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5tZXNocGh5c2ljYWxfZnJhZ307T2JqZWN0LmFzc2lnbihvZC5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIpe3RoaXMubWluLmNvcHkoYSk7dGhpcy5tYXguY29weShiKTtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbihhKXt0aGlzLm1ha2VFbXB0eSgpO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmV4cGFuZEJ5UG9pbnQoYVtiXSk7cmV0dXJuIHRoaXN9LHNldEZyb21DZW50ZXJBbmRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IEQ7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Yz1hLmNvcHkoYykubXVsdGlwbHlTY2FsYXIoLjUpO1xuICAgIHRoaXMubWluLmNvcHkoYikuc3ViKGMpO3RoaXMubWF4LmNvcHkoYikuYWRkKGMpO3JldHVybiB0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLm1pbi5jb3B5KGEubWluKTt0aGlzLm1heC5jb3B5KGEubWF4KTtyZXR1cm4gdGhpc30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5taW4ueD10aGlzLm1pbi55PUluZmluaXR5O3RoaXMubWF4Lng9dGhpcy5tYXgueT0tSW5maW5pdHk7cmV0dXJuIHRoaXN9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXgueDx0aGlzLm1pbi54fHx0aGlzLm1heC55PHRoaXMubWluLnl9LGdldENlbnRlcjpmdW5jdGlvbihhKXthPWF8fG5ldyBEO3JldHVybiB0aGlzLmlzRW1wdHkoKT9hLnNldCgwLDApOmEuYWRkVmVjdG9ycyh0aGlzLm1pbix0aGlzLm1heCkubXVsdGlwbHlTY2FsYXIoLjUpfSxnZXRTaXplOmZ1bmN0aW9uKGEpe2E9XG4gICAgYXx8bmV3IEQ7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Euc2V0KDAsMCk6YS5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX0sZXhwYW5kQnlQb2ludDpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYSk7dGhpcy5tYXgubWF4KGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5zdWIoYSk7dGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGRTY2FsYXIoLWEpO3RoaXMubWF4LmFkZFNjYWxhcihhKTtyZXR1cm4gdGhpc30sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS54PHRoaXMubWluLnh8fGEueD50aGlzLm1heC54fHxhLnk8dGhpcy5taW4ueXx8YS55PnRoaXMubWF4Lnk/ITE6ITB9LGNvbnRhaW5zQm94OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1pbi54PD1hLm1pbi54JiZhLm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD1hLm1pbi55JiZhLm1heC55PD1cbiAgICB0aGlzLm1heC55fSxnZXRQYXJhbWV0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IEQpLnNldCgoYS54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLChhLnktdGhpcy5taW4ueSkvKHRoaXMubWF4LnktdGhpcy5taW4ueSkpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKGEpe3JldHVybiBhLm1heC54PHRoaXMubWluLnh8fGEubWluLng+dGhpcy5tYXgueHx8YS5tYXgueTx0aGlzLm1pbi55fHxhLm1pbi55PnRoaXMubWF4Lnk/ITE6ITB9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IEQpLmNvcHkoYSkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgRDtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuY29weShiKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCkuc3ViKGIpLmxlbmd0aCgpfX0oKSxpbnRlcnNlY3Q6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWF4KGEubWluKTtcbiAgICB0aGlzLm1heC5taW4oYS5tYXgpO3JldHVybiB0aGlzfSx1bmlvbjpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYS5taW4pO3RoaXMubWF4Lm1heChhLm1heCk7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGQoYSk7dGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWluLmVxdWFscyh0aGlzLm1pbikmJmEubWF4LmVxdWFscyh0aGlzLm1heCl9fSk7dGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVS5wcm90b3R5cGUpO3RjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10Yzt2YXIgYWc9MDtQLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoemEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6UCxpc01hdGVyaWFsOiEwLG9uQmVmb3JlQ29tcGlsZTpmdW5jdGlvbigpe30sc2V0VmFsdWVzOmZ1bmN0aW9uKGEpe2lmKHZvaWQgMCE9PWEpZm9yKHZhciBiIGluIGEpe3ZhciBjPWFbYl07aWYodm9pZCAwPT09XG4gICAgYyljb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogJ1wiK2IrXCInIHBhcmFtZXRlciBpcyB1bmRlZmluZWQuXCIpO2Vsc2UgaWYoXCJzaGFkaW5nXCI9PT1iKWNvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLnNoYWRpbmcgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHRoZSBib29sZWFuIC5mbGF0U2hhZGluZyBpbnN0ZWFkLlwiKSx0aGlzLmZsYXRTaGFkaW5nPTE9PT1jPyEwOiExO2Vsc2V7dmFyIGQ9dGhpc1tiXTt2b2lkIDA9PT1kP2NvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogJ1wiK2IrXCInIGlzIG5vdCBhIHByb3BlcnR5IG9mIHRoaXMgbWF0ZXJpYWwuXCIpOmQmJmQuaXNDb2xvcj9kLnNldChjKTpkJiZkLmlzVmVjdG9yMyYmYyYmYy5pc1ZlY3RvcjM/ZC5jb3B5KGMpOnRoaXNbYl09XCJvdmVyZHJhd1wiPT09Yj9OdW1iZXIoYyk6Y319fSx0b0pTT046ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107ZGVsZXRlIGQubWV0YWRhdGE7XG4gICAgYi5wdXNoKGQpfXJldHVybiBifXZhciBjPXZvaWQgMD09PWF8fFwic3RyaW5nXCI9PT10eXBlb2YgYTtjJiYoYT17dGV4dHVyZXM6e30saW1hZ2VzOnt9fSk7dmFyIGQ9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOlwiTWF0ZXJpYWxcIixnZW5lcmF0b3I6XCJNYXRlcmlhbC50b0pTT05cIn19O2QudXVpZD10aGlzLnV1aWQ7ZC50eXBlPXRoaXMudHlwZTtcIlwiIT09dGhpcy5uYW1lJiYoZC5uYW1lPXRoaXMubmFtZSk7dGhpcy5jb2xvciYmdGhpcy5jb2xvci5pc0NvbG9yJiYoZC5jb2xvcj10aGlzLmNvbG9yLmdldEhleCgpKTt2b2lkIDAhPT10aGlzLnJvdWdobmVzcyYmKGQucm91Z2huZXNzPXRoaXMucm91Z2huZXNzKTt2b2lkIDAhPT10aGlzLm1ldGFsbmVzcyYmKGQubWV0YWxuZXNzPXRoaXMubWV0YWxuZXNzKTt0aGlzLmVtaXNzaXZlJiZ0aGlzLmVtaXNzaXZlLmlzQ29sb3ImJihkLmVtaXNzaXZlPXRoaXMuZW1pc3NpdmUuZ2V0SGV4KCkpOzEhPT10aGlzLmVtaXNzaXZlSW50ZW5zaXR5JiZcbiAgICAoZC5lbWlzc2l2ZUludGVuc2l0eT10aGlzLmVtaXNzaXZlSW50ZW5zaXR5KTt0aGlzLnNwZWN1bGFyJiZ0aGlzLnNwZWN1bGFyLmlzQ29sb3ImJihkLnNwZWN1bGFyPXRoaXMuc3BlY3VsYXIuZ2V0SGV4KCkpO3ZvaWQgMCE9PXRoaXMuc2hpbmluZXNzJiYoZC5zaGluaW5lc3M9dGhpcy5zaGluaW5lc3MpO3ZvaWQgMCE9PXRoaXMuY2xlYXJDb2F0JiYoZC5jbGVhckNvYXQ9dGhpcy5jbGVhckNvYXQpO3ZvaWQgMCE9PXRoaXMuY2xlYXJDb2F0Um91Z2huZXNzJiYoZC5jbGVhckNvYXRSb3VnaG5lc3M9dGhpcy5jbGVhckNvYXRSb3VnaG5lc3MpO3RoaXMubWFwJiZ0aGlzLm1hcC5pc1RleHR1cmUmJihkLm1hcD10aGlzLm1hcC50b0pTT04oYSkudXVpZCk7dGhpcy5hbHBoYU1hcCYmdGhpcy5hbHBoYU1hcC5pc1RleHR1cmUmJihkLmFscGhhTWFwPXRoaXMuYWxwaGFNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMubGlnaHRNYXAmJnRoaXMubGlnaHRNYXAuaXNUZXh0dXJlJiYoZC5saWdodE1hcD1cbiAgICB0aGlzLmxpZ2h0TWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLmJ1bXBNYXAmJnRoaXMuYnVtcE1hcC5pc1RleHR1cmUmJihkLmJ1bXBNYXA9dGhpcy5idW1wTWFwLnRvSlNPTihhKS51dWlkLGQuYnVtcFNjYWxlPXRoaXMuYnVtcFNjYWxlKTt0aGlzLm5vcm1hbE1hcCYmdGhpcy5ub3JtYWxNYXAuaXNUZXh0dXJlJiYoZC5ub3JtYWxNYXA9dGhpcy5ub3JtYWxNYXAudG9KU09OKGEpLnV1aWQsZC5ub3JtYWxTY2FsZT10aGlzLm5vcm1hbFNjYWxlLnRvQXJyYXkoKSk7dGhpcy5kaXNwbGFjZW1lbnRNYXAmJnRoaXMuZGlzcGxhY2VtZW50TWFwLmlzVGV4dHVyZSYmKGQuZGlzcGxhY2VtZW50TWFwPXRoaXMuZGlzcGxhY2VtZW50TWFwLnRvSlNPTihhKS51dWlkLGQuZGlzcGxhY2VtZW50U2NhbGU9dGhpcy5kaXNwbGFjZW1lbnRTY2FsZSxkLmRpc3BsYWNlbWVudEJpYXM9dGhpcy5kaXNwbGFjZW1lbnRCaWFzKTt0aGlzLnJvdWdobmVzc01hcCYmdGhpcy5yb3VnaG5lc3NNYXAuaXNUZXh0dXJlJiZcbiAgICAoZC5yb3VnaG5lc3NNYXA9dGhpcy5yb3VnaG5lc3NNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMubWV0YWxuZXNzTWFwJiZ0aGlzLm1ldGFsbmVzc01hcC5pc1RleHR1cmUmJihkLm1ldGFsbmVzc01hcD10aGlzLm1ldGFsbmVzc01hcC50b0pTT04oYSkudXVpZCk7dGhpcy5lbWlzc2l2ZU1hcCYmdGhpcy5lbWlzc2l2ZU1hcC5pc1RleHR1cmUmJihkLmVtaXNzaXZlTWFwPXRoaXMuZW1pc3NpdmVNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMuc3BlY3VsYXJNYXAmJnRoaXMuc3BlY3VsYXJNYXAuaXNUZXh0dXJlJiYoZC5zcGVjdWxhck1hcD10aGlzLnNwZWN1bGFyTWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLmVudk1hcCYmdGhpcy5lbnZNYXAuaXNUZXh0dXJlJiYoZC5lbnZNYXA9dGhpcy5lbnZNYXAudG9KU09OKGEpLnV1aWQsZC5yZWZsZWN0aXZpdHk9dGhpcy5yZWZsZWN0aXZpdHkpO3RoaXMuZ3JhZGllbnRNYXAmJnRoaXMuZ3JhZGllbnRNYXAuaXNUZXh0dXJlJiYoZC5ncmFkaWVudE1hcD1cbiAgICB0aGlzLmdyYWRpZW50TWFwLnRvSlNPTihhKS51dWlkKTt2b2lkIDAhPT10aGlzLnNpemUmJihkLnNpemU9dGhpcy5zaXplKTt2b2lkIDAhPT10aGlzLnNpemVBdHRlbnVhdGlvbiYmKGQuc2l6ZUF0dGVudWF0aW9uPXRoaXMuc2l6ZUF0dGVudWF0aW9uKTsxIT09dGhpcy5ibGVuZGluZyYmKGQuYmxlbmRpbmc9dGhpcy5ibGVuZGluZyk7ITA9PT10aGlzLmZsYXRTaGFkaW5nJiYoZC5mbGF0U2hhZGluZz10aGlzLmZsYXRTaGFkaW5nKTswIT09dGhpcy5zaWRlJiYoZC5zaWRlPXRoaXMuc2lkZSk7MCE9PXRoaXMudmVydGV4Q29sb3JzJiYoZC52ZXJ0ZXhDb2xvcnM9dGhpcy52ZXJ0ZXhDb2xvcnMpOzE+dGhpcy5vcGFjaXR5JiYoZC5vcGFjaXR5PXRoaXMub3BhY2l0eSk7ITA9PT10aGlzLnRyYW5zcGFyZW50JiYoZC50cmFuc3BhcmVudD10aGlzLnRyYW5zcGFyZW50KTtkLmRlcHRoRnVuYz10aGlzLmRlcHRoRnVuYztkLmRlcHRoVGVzdD10aGlzLmRlcHRoVGVzdDtkLmRlcHRoV3JpdGU9XG4gICAgdGhpcy5kZXB0aFdyaXRlOzAhPT10aGlzLnJvdGF0aW9uJiYoZC5yb3RhdGlvbj10aGlzLnJvdGF0aW9uKTsxIT09dGhpcy5saW5ld2lkdGgmJihkLmxpbmV3aWR0aD10aGlzLmxpbmV3aWR0aCk7dm9pZCAwIT09dGhpcy5kYXNoU2l6ZSYmKGQuZGFzaFNpemU9dGhpcy5kYXNoU2l6ZSk7dm9pZCAwIT09dGhpcy5nYXBTaXplJiYoZC5nYXBTaXplPXRoaXMuZ2FwU2l6ZSk7dm9pZCAwIT09dGhpcy5zY2FsZSYmKGQuc2NhbGU9dGhpcy5zY2FsZSk7ITA9PT10aGlzLmRpdGhlcmluZyYmKGQuZGl0aGVyaW5nPSEwKTswPHRoaXMuYWxwaGFUZXN0JiYoZC5hbHBoYVRlc3Q9dGhpcy5hbHBoYVRlc3QpOyEwPT09dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGEmJihkLnByZW11bHRpcGxpZWRBbHBoYT10aGlzLnByZW11bHRpcGxpZWRBbHBoYSk7ITA9PT10aGlzLndpcmVmcmFtZSYmKGQud2lyZWZyYW1lPXRoaXMud2lyZWZyYW1lKTsxPHRoaXMud2lyZWZyYW1lTGluZXdpZHRoJiYoZC53aXJlZnJhbWVMaW5ld2lkdGg9XG4gICAgdGhpcy53aXJlZnJhbWVMaW5ld2lkdGgpO1wicm91bmRcIiE9PXRoaXMud2lyZWZyYW1lTGluZWNhcCYmKGQud2lyZWZyYW1lTGluZWNhcD10aGlzLndpcmVmcmFtZUxpbmVjYXApO1wicm91bmRcIiE9PXRoaXMud2lyZWZyYW1lTGluZWpvaW4mJihkLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWpvaW4pOyEwPT09dGhpcy5tb3JwaFRhcmdldHMmJihkLm1vcnBoVGFyZ2V0cz0hMCk7ITA9PT10aGlzLnNraW5uaW5nJiYoZC5za2lubmluZz0hMCk7ITE9PT10aGlzLnZpc2libGUmJihkLnZpc2libGU9ITEpO1wie31cIiE9PUpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpJiYoZC51c2VyRGF0YT10aGlzLnVzZXJEYXRhKTtjJiYoYz1iKGEudGV4dHVyZXMpLGE9YihhLmltYWdlcyksMDxjLmxlbmd0aCYmKGQudGV4dHVyZXM9YyksMDxhLmxlbmd0aCYmKGQuaW1hZ2VzPWEpKTtyZXR1cm4gZH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LFxuICAgIGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5uYW1lPWEubmFtZTt0aGlzLmZvZz1hLmZvZzt0aGlzLmxpZ2h0cz1hLmxpZ2h0czt0aGlzLmJsZW5kaW5nPWEuYmxlbmRpbmc7dGhpcy5zaWRlPWEuc2lkZTt0aGlzLmZsYXRTaGFkaW5nPWEuZmxhdFNoYWRpbmc7dGhpcy52ZXJ0ZXhDb2xvcnM9YS52ZXJ0ZXhDb2xvcnM7dGhpcy5vcGFjaXR5PWEub3BhY2l0eTt0aGlzLnRyYW5zcGFyZW50PWEudHJhbnNwYXJlbnQ7dGhpcy5ibGVuZFNyYz1hLmJsZW5kU3JjO3RoaXMuYmxlbmREc3Q9YS5ibGVuZERzdDt0aGlzLmJsZW5kRXF1YXRpb249YS5ibGVuZEVxdWF0aW9uO3RoaXMuYmxlbmRTcmNBbHBoYT1hLmJsZW5kU3JjQWxwaGE7dGhpcy5ibGVuZERzdEFscGhhPWEuYmxlbmREc3RBbHBoYTt0aGlzLmJsZW5kRXF1YXRpb25BbHBoYT1hLmJsZW5kRXF1YXRpb25BbHBoYTt0aGlzLmRlcHRoRnVuYz1hLmRlcHRoRnVuYzt0aGlzLmRlcHRoVGVzdD1hLmRlcHRoVGVzdDt0aGlzLmRlcHRoV3JpdGU9YS5kZXB0aFdyaXRlO1xuICAgIHRoaXMuY29sb3JXcml0ZT1hLmNvbG9yV3JpdGU7dGhpcy5wcmVjaXNpb249YS5wcmVjaXNpb247dGhpcy5wb2x5Z29uT2Zmc2V0PWEucG9seWdvbk9mZnNldDt0aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I9YS5wb2x5Z29uT2Zmc2V0RmFjdG9yO3RoaXMucG9seWdvbk9mZnNldFVuaXRzPWEucG9seWdvbk9mZnNldFVuaXRzO3RoaXMuZGl0aGVyaW5nPWEuZGl0aGVyaW5nO3RoaXMuYWxwaGFUZXN0PWEuYWxwaGFUZXN0O3RoaXMucHJlbXVsdGlwbGllZEFscGhhPWEucHJlbXVsdGlwbGllZEFscGhhO3RoaXMub3ZlcmRyYXc9YS5vdmVyZHJhdzt0aGlzLnZpc2libGU9YS52aXNpYmxlO3RoaXMudXNlckRhdGE9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhLnVzZXJEYXRhKSk7dGhpcy5jbGlwU2hhZG93cz1hLmNsaXBTaGFkb3dzO3RoaXMuY2xpcEludGVyc2VjdGlvbj1hLmNsaXBJbnRlcnNlY3Rpb247YT1hLmNsaXBwaW5nUGxhbmVzO3ZhciBiPW51bGw7aWYobnVsbCE9PWEpZm9yKHZhciBjPVxuICAgIGEubGVuZ3RoLGI9QXJyYXkoYyksZD0wO2QhPT1jOysrZCliW2RdPWFbZF0uY2xvbmUoKTt0aGlzLmNsaXBwaW5nUGxhbmVzPWI7cmV0dXJuIHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KTtlYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7ZWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWViO2ViLnByb3RvdHlwZS5pc01lc2hEZXB0aE1hdGVyaWFsPSEwO2ViLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGVwdGhQYWNraW5nPWEuZGVwdGhQYWNraW5nO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1hcD1hLm1hcDt0aGlzLmFscGhhTWFwPWEuYWxwaGFNYXA7dGhpcy5kaXNwbGFjZW1lbnRNYXA9YS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1cbiAgICBhLmRpc3BsYWNlbWVudFNjYWxlO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz1hLmRpc3BsYWNlbWVudEJpYXM7dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7cmV0dXJuIHRoaXN9O2ZiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtmYi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZmI7ZmIucHJvdG90eXBlLmlzTWVzaERpc3RhbmNlTWF0ZXJpYWw9ITA7ZmIucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5yZWZlcmVuY2VQb3NpdGlvbi5jb3B5KGEucmVmZXJlbmNlUG9zaXRpb24pO3RoaXMubmVhckRpc3RhbmNlPWEubmVhckRpc3RhbmNlO3RoaXMuZmFyRGlzdGFuY2U9YS5mYXJEaXN0YW5jZTt0aGlzLnNraW5uaW5nPWEuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9YS5tb3JwaFRhcmdldHM7dGhpcy5tYXA9YS5tYXA7dGhpcy5hbHBoYU1hcD1cbiAgICBhLmFscGhhTWFwO3RoaXMuZGlzcGxhY2VtZW50TWFwPWEuZGlzcGxhY2VtZW50TWFwO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9YS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9YS5kaXNwbGFjZW1lbnRCaWFzO3JldHVybiB0aGlzfTtPYmplY3QuYXNzaWduKFhhLnByb3RvdHlwZSx7aXNCb3gzOiEwLHNldDpmdW5jdGlvbihhLGIpe3RoaXMubWluLmNvcHkoYSk7dGhpcy5tYXguY29weShiKTtyZXR1cm4gdGhpc30sc2V0RnJvbUFycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1JbmZpbml0eSxjPUluZmluaXR5LGQ9SW5maW5pdHksZT0tSW5maW5pdHksZj0tSW5maW5pdHksZz0tSW5maW5pdHksaD0wLGs9YS5sZW5ndGg7aDxrO2grPTMpe3ZhciBtPWFbaF0scT1hW2grMV0sbD1hW2grMl07bTxiJiYoYj1tKTtxPGMmJihjPXEpO2w8ZCYmKGQ9bCk7bT5lJiYoZT1tKTtxPmYmJihmPXEpO2w+ZyYmKGc9bCl9dGhpcy5taW4uc2V0KGIsYyxkKTt0aGlzLm1heC5zZXQoZSxcbiAgICBmLGcpO3JldHVybiB0aGlzfSxzZXRGcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1JbmZpbml0eSxjPUluZmluaXR5LGQ9SW5maW5pdHksZT0tSW5maW5pdHksZj0tSW5maW5pdHksZz0tSW5maW5pdHksaD0wLGs9YS5jb3VudDtoPGs7aCsrKXt2YXIgbT1hLmdldFgoaCkscT1hLmdldFkoaCksbD1hLmdldFooaCk7bTxiJiYoYj1tKTtxPGMmJihjPXEpO2w8ZCYmKGQ9bCk7bT5lJiYoZT1tKTtxPmYmJihmPXEpO2w+ZyYmKGc9bCl9dGhpcy5taW4uc2V0KGIsYyxkKTt0aGlzLm1heC5zZXQoZSxmLGcpO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe3RoaXMubWFrZUVtcHR5KCk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXMuZXhwYW5kQnlQb2ludChhW2JdKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNlbnRlckFuZFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYixjKXtjPWEuY29weShjKS5tdWx0aXBseVNjYWxhciguNSk7XG4gICAgdGhpcy5taW4uY29weShiKS5zdWIoYyk7dGhpcy5tYXguY29weShiKS5hZGQoYyk7cmV0dXJuIHRoaXN9fSgpLHNldEZyb21PYmplY3Q6ZnVuY3Rpb24oYSl7dGhpcy5tYWtlRW1wdHkoKTtyZXR1cm4gdGhpcy5leHBhbmRCeU9iamVjdChhKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5taW4uY29weShhLm1pbik7dGhpcy5tYXguY29weShhLm1heCk7cmV0dXJuIHRoaXN9LG1ha2VFbXB0eTpmdW5jdGlvbigpe3RoaXMubWluLng9dGhpcy5taW4ueT10aGlzLm1pbi56PUluZmluaXR5O3RoaXMubWF4Lng9dGhpcy5tYXgueT10aGlzLm1heC56PS1JbmZpbml0eTtyZXR1cm4gdGhpc30saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueXx8dGhpcy5tYXguejx0aGlzLm1pbi56fSxnZXRDZW50ZXI6ZnVuY3Rpb24oYSl7YT1cbiAgICBhfHxuZXcgcDtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/YS5zZXQoMCwwLDApOmEuYWRkVmVjdG9ycyh0aGlzLm1pbix0aGlzLm1heCkubXVsdGlwbHlTY2FsYXIoLjUpfSxnZXRTaXplOmZ1bmN0aW9uKGEpe2E9YXx8bmV3IHA7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Euc2V0KDAsMCwwKTphLnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pfSxleHBhbmRCeVBvaW50OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhKTt0aGlzLm1heC5tYXgoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5VmVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMubWluLnN1YihhKTt0aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZFNjYWxhcigtYSk7dGhpcy5tYXguYWRkU2NhbGFyKGEpO3JldHVybiB0aGlzfSxleHBhbmRCeU9iamVjdDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGY9YS5nZW9tZXRyeTtpZih2b2lkIDAhPT1mKWlmKGYuaXNHZW9tZXRyeSlmb3IoZj1cbiAgICBmLnZlcnRpY2VzLGM9MCxkPWYubGVuZ3RoO2M8ZDtjKyspZS5jb3B5KGZbY10pLGUuYXBwbHlNYXRyaXg0KGEubWF0cml4V29ybGQpLGIuZXhwYW5kQnlQb2ludChlKTtlbHNlIGlmKGYuaXNCdWZmZXJHZW9tZXRyeSYmKGY9Zi5hdHRyaWJ1dGVzLnBvc2l0aW9uLHZvaWQgMCE9PWYpKWZvcihjPTAsZD1mLmNvdW50O2M8ZDtjKyspZS5mcm9tQnVmZmVyQXR0cmlidXRlKGYsYykuYXBwbHlNYXRyaXg0KGEubWF0cml4V29ybGQpLGIuZXhwYW5kQnlQb2ludChlKX12YXIgYixjLGQsZT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYyl7Yj10aGlzO2MudXBkYXRlTWF0cml4V29ybGQoITApO2MudHJhdmVyc2UoYSk7cmV0dXJuIHRoaXN9fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueDx0aGlzLm1pbi54fHxhLng+dGhpcy5tYXgueHx8YS55PHRoaXMubWluLnl8fGEueT50aGlzLm1heC55fHxhLno8dGhpcy5taW4uenx8YS56PnRoaXMubWF4Lno/ITE6ITB9LGNvbnRhaW5zQm94OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1pbi54PD1cbiAgICBhLm1pbi54JiZhLm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD1hLm1pbi55JiZhLm1heC55PD10aGlzLm1heC55JiZ0aGlzLm1pbi56PD1hLm1pbi56JiZhLm1heC56PD10aGlzLm1heC56fSxnZXRQYXJhbWV0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IHApLnNldCgoYS54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLChhLnktdGhpcy5taW4ueSkvKHRoaXMubWF4LnktdGhpcy5taW4ueSksKGEuei10aGlzLm1pbi56KS8odGhpcy5tYXguei10aGlzLm1pbi56KSl9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWF4Lng8dGhpcy5taW4ueHx8YS5taW4ueD50aGlzLm1heC54fHxhLm1heC55PHRoaXMubWluLnl8fGEubWluLnk+dGhpcy5tYXgueXx8YS5tYXguejx0aGlzLm1pbi56fHxhLm1pbi56PnRoaXMubWF4Lno/ITE6ITB9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7dGhpcy5jbGFtcFBvaW50KGIuY2VudGVyLFxuICAgIGEpO3JldHVybiBhLmRpc3RhbmNlVG9TcXVhcmVkKGIuY2VudGVyKTw9Yi5yYWRpdXMqYi5yYWRpdXN9fSgpLGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbihhKXtpZigwPGEubm9ybWFsLngpe3ZhciBiPWEubm9ybWFsLngqdGhpcy5taW4ueDt2YXIgYz1hLm5vcm1hbC54KnRoaXMubWF4Lnh9ZWxzZSBiPWEubm9ybWFsLngqdGhpcy5tYXgueCxjPWEubm9ybWFsLngqdGhpcy5taW4ueDswPGEubm9ybWFsLnk/KGIrPWEubm9ybWFsLnkqdGhpcy5taW4ueSxjKz1hLm5vcm1hbC55KnRoaXMubWF4LnkpOihiKz1hLm5vcm1hbC55KnRoaXMubWF4LnksYys9YS5ub3JtYWwueSp0aGlzLm1pbi55KTswPGEubm9ybWFsLno/KGIrPWEubm9ybWFsLnoqdGhpcy5taW4ueixjKz1hLm5vcm1hbC56KnRoaXMubWF4LnopOihiKz1hLm5vcm1hbC56KnRoaXMubWF4LnosYys9YS5ub3JtYWwueip0aGlzLm1pbi56KTtyZXR1cm4gYjw9YS5jb25zdGFudCYmYz49YS5jb25zdGFudH0sY2xhbXBQb2ludDpmdW5jdGlvbihhLFxuICAgIGIpe3JldHVybihifHxuZXcgcCkuY29weShhKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCl9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5jb3B5KGIpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KS5zdWIoYikubGVuZ3RoKCl9fSgpLGdldEJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe2I9Ynx8bmV3IElhO3RoaXMuZ2V0Q2VudGVyKGIuY2VudGVyKTtiLnJhZGl1cz0uNSp0aGlzLmdldFNpemUoYSkubGVuZ3RoKCk7cmV0dXJuIGJ9fSgpLGludGVyc2VjdDpmdW5jdGlvbihhKXt0aGlzLm1pbi5tYXgoYS5taW4pO3RoaXMubWF4Lm1pbihhLm1heCk7dGhpcy5pc0VtcHR5KCkmJnRoaXMubWFrZUVtcHR5KCk7cmV0dXJuIHRoaXN9LHVuaW9uOmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhLm1pbik7dGhpcy5tYXgubWF4KGEubWF4KTtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKCl7dmFyIGE9XG4gICAgW25ldyBwLG5ldyBwLG5ldyBwLG5ldyBwLG5ldyBwLG5ldyBwLG5ldyBwLG5ldyBwXTtyZXR1cm4gZnVuY3Rpb24oYil7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIHRoaXM7YVswXS5zZXQodGhpcy5taW4ueCx0aGlzLm1pbi55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTthWzFdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO2FbMl0uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoYik7YVszXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTthWzRdLnNldCh0aGlzLm1heC54LHRoaXMubWluLnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO2FbNV0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7YVs2XS5zZXQodGhpcy5tYXgueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTtcbiAgICBhWzddLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO3RoaXMuc2V0RnJvbVBvaW50cyhhKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZChhKTt0aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5taW4uZXF1YWxzKHRoaXMubWluKSYmYS5tYXguZXF1YWxzKHRoaXMubWF4KX19KTtPYmplY3QuYXNzaWduKElhLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXIuY29weShhKTt0aGlzLnJhZGl1cz1iO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFhhO3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMuY2VudGVyO3ZvaWQgMCE9PWM/ZC5jb3B5KGMpOmEuc2V0RnJvbVBvaW50cyhiKS5nZXRDZW50ZXIoZCk7Zm9yKHZhciBlPWM9MCxmPWIubGVuZ3RoO2U8ZjtlKyspYz1NYXRoLm1heChjLFxuICAgIGQuZGlzdGFuY2VUb1NxdWFyZWQoYltlXSkpO3RoaXMucmFkaXVzPU1hdGguc3FydChjKTtyZXR1cm4gdGhpc319KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuY29weShhLmNlbnRlcik7dGhpcy5yYWRpdXM9YS5yYWRpdXM7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA+PXRoaXMucmFkaXVzfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXN9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXN0YW5jZVRvKHRoaXMuY2VudGVyKS10aGlzLnJhZGl1c30saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJhZGl1cythLnJhZGl1cztyZXR1cm4gYS5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD1cbiAgICBiKmJ9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW50ZXJzZWN0c1NwaGVyZSh0aGlzKX0saW50ZXJzZWN0c1BsYW5lOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLmFicyhhLmRpc3RhbmNlVG9Qb2ludCh0aGlzLmNlbnRlcikpPD10aGlzLnJhZGl1c30sY2xhbXBQb2ludDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKGEpO2I9Ynx8bmV3IHA7Yi5jb3B5KGEpO2M+dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXMmJihiLnN1Yih0aGlzLmNlbnRlcikubm9ybWFsaXplKCksYi5tdWx0aXBseVNjYWxhcih0aGlzLnJhZGl1cykuYWRkKHRoaXMuY2VudGVyKSk7cmV0dXJuIGJ9LGdldEJvdW5kaW5nQm94OmZ1bmN0aW9uKGEpe2E9YXx8bmV3IFhhO2Euc2V0KHRoaXMuY2VudGVyLHRoaXMuY2VudGVyKTthLmV4cGFuZEJ5U2NhbGFyKHRoaXMucmFkaXVzKTtyZXR1cm4gYX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3RoaXMuY2VudGVyLmFwcGx5TWF0cml4NChhKTtcbiAgICB0aGlzLnJhZGl1cyo9YS5nZXRNYXhTY2FsZU9uQXhpcygpO3JldHVybiB0aGlzfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuYWRkKGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2VudGVyLmVxdWFscyh0aGlzLmNlbnRlcikmJmEucmFkaXVzPT09dGhpcy5yYWRpdXN9fSk7T2JqZWN0LmFzc2lnbihFYS5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIpe3RoaXMubm9ybWFsLmNvcHkoYSk7dGhpcy5jb25zdGFudD1iO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnRzOmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMubm9ybWFsLnNldChhLGIsYyk7dGhpcy5jb25zdGFudD1kO3JldHVybiB0aGlzfSxzZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludDpmdW5jdGlvbihhLGIpe3RoaXMubm9ybWFsLmNvcHkoYSk7dGhpcy5jb25zdGFudD0tYi5kb3QodGhpcy5ub3JtYWwpO3JldHVybiB0aGlzfSxzZXRGcm9tQ29wbGFuYXJQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT1cbiAgICBuZXcgcCxiPW5ldyBwO3JldHVybiBmdW5jdGlvbihjLGQsZSl7ZD1hLnN1YlZlY3RvcnMoZSxkKS5jcm9zcyhiLnN1YlZlY3RvcnMoYyxkKSkubm9ybWFsaXplKCk7dGhpcy5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludChkLGMpO3JldHVybiB0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLm5vcm1hbC5jb3B5KGEubm9ybWFsKTt0aGlzLmNvbnN0YW50PWEuY29uc3RhbnQ7cmV0dXJuIHRoaXN9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPTEvdGhpcy5ub3JtYWwubGVuZ3RoKCk7dGhpcy5ub3JtYWwubXVsdGlwbHlTY2FsYXIoYSk7dGhpcy5jb25zdGFudCo9YTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb25zdGFudCo9LTE7dGhpcy5ub3JtYWwubmVnYXRlKCk7cmV0dXJuIHRoaXN9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub3JtYWwuZG90KGEpK1xuICAgIHRoaXMuY29uc3RhbnR9LGRpc3RhbmNlVG9TcGhlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KGEuY2VudGVyKS1hLnJhZGl1c30scHJvamVjdFBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBwKS5jb3B5KHRoaXMubm9ybWFsKS5tdWx0aXBseVNjYWxhcigtdGhpcy5kaXN0YW5jZVRvUG9pbnQoYSkpLmFkZChhKX0saW50ZXJzZWN0TGluZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiLGMpe2M9Y3x8bmV3IHA7dmFyIGQ9Yi5kZWx0YShhKSxlPXRoaXMubm9ybWFsLmRvdChkKTtpZigwPT09ZSl7aWYoMD09PXRoaXMuZGlzdGFuY2VUb1BvaW50KGIuc3RhcnQpKXJldHVybiBjLmNvcHkoYi5zdGFydCl9ZWxzZSBpZihlPS0oYi5zdGFydC5kb3QodGhpcy5ub3JtYWwpK3RoaXMuY29uc3RhbnQpL2UsISgwPmV8fDE8ZSkpcmV0dXJuIGMuY29weShkKS5tdWx0aXBseVNjYWxhcihlKS5hZGQoYi5zdGFydCl9fSgpLGludGVyc2VjdHNMaW5lOmZ1bmN0aW9uKGEpe3ZhciBiPVxuICAgIHRoaXMuZGlzdGFuY2VUb1BvaW50KGEuc3RhcnQpO2E9dGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5lbmQpO3JldHVybiAwPmImJjA8YXx8MD5hJiYwPGJ9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW50ZXJzZWN0c1BsYW5lKHRoaXMpfSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGEpe3JldHVybiBhLmludGVyc2VjdHNQbGFuZSh0aGlzKX0sY29wbGFuYXJQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IHApLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmNvbnN0YW50KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgbWE7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7ZD1kfHxiLmdldE5vcm1hbE1hdHJpeChjKTtjPXRoaXMuY29wbGFuYXJQb2ludChhKS5hcHBseU1hdHJpeDQoYyk7ZD10aGlzLm5vcm1hbC5hcHBseU1hdHJpeDMoZCkubm9ybWFsaXplKCk7dGhpcy5jb25zdGFudD0tYy5kb3QoZCk7cmV0dXJuIHRoaXN9fSgpLFxuICAgIHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLmNvbnN0YW50LT1hLmRvdCh0aGlzLm5vcm1hbCk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub3JtYWwuZXF1YWxzKHRoaXMubm9ybWFsKSYmYS5jb25zdGFudD09PXRoaXMuY29uc3RhbnR9fSk7T2JqZWN0LmFzc2lnbihyZC5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9dGhpcy5wbGFuZXM7Z1swXS5jb3B5KGEpO2dbMV0uY29weShiKTtnWzJdLmNvcHkoYyk7Z1szXS5jb3B5KGQpO2dbNF0uY29weShlKTtnWzVdLmNvcHkoZik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnBsYW5lcyxjPTA7Nj5jO2MrKyliW2NdLmNvcHkoYS5wbGFuZXNbY10pO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGxhbmVzLFxuICAgIGM9YS5lbGVtZW50czthPWNbMF07dmFyIGQ9Y1sxXSxlPWNbMl0sZj1jWzNdLGc9Y1s0XSxoPWNbNV0saz1jWzZdLG09Y1s3XSxxPWNbOF0sbD1jWzldLHA9Y1sxMF0scj1jWzExXSx0PWNbMTJdLHY9Y1sxM10sdz1jWzE0XSxjPWNbMTVdO2JbMF0uc2V0Q29tcG9uZW50cyhmLWEsbS1nLHItcSxjLXQpLm5vcm1hbGl6ZSgpO2JbMV0uc2V0Q29tcG9uZW50cyhmK2EsbStnLHIrcSxjK3QpLm5vcm1hbGl6ZSgpO2JbMl0uc2V0Q29tcG9uZW50cyhmK2QsbStoLHIrbCxjK3YpLm5vcm1hbGl6ZSgpO2JbM10uc2V0Q29tcG9uZW50cyhmLWQsbS1oLHItbCxjLXYpLm5vcm1hbGl6ZSgpO2JbNF0uc2V0Q29tcG9uZW50cyhmLWUsbS1rLHItcCxjLXcpLm5vcm1hbGl6ZSgpO2JbNV0uc2V0Q29tcG9uZW50cyhmK2UsbStrLHIrcCxjK3cpLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzfSxpbnRlcnNlY3RzT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IElhO3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1cbiAgICBiLmdlb21ldHJ5O251bGw9PT1jLmJvdW5kaW5nU3BoZXJlJiZjLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO2EuY29weShjLmJvdW5kaW5nU3BoZXJlKS5hcHBseU1hdHJpeDQoYi5tYXRyaXhXb3JsZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShhKX19KCksaW50ZXJzZWN0c1Nwcml0ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBJYTtyZXR1cm4gZnVuY3Rpb24oYil7YS5jZW50ZXIuc2V0KDAsMCwwKTthLnJhZGl1cz0uNzA3MTA2NzgxMTg2NTQ3NjthLmFwcGx5TWF0cml4NChiLm1hdHJpeFdvcmxkKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKGEpfX0oKSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGxhbmVzLGM9YS5jZW50ZXI7YT0tYS5yYWRpdXM7Zm9yKHZhciBkPTA7Nj5kO2QrKylpZihiW2RdLmRpc3RhbmNlVG9Qb2ludChjKTxhKXJldHVybiExO3JldHVybiEwfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1cbiAgICBuZXcgcDtyZXR1cm4gZnVuY3Rpb24oYyl7Zm9yKHZhciBkPXRoaXMucGxhbmVzLGU9MDs2PmU7ZSsrKXt2YXIgZj1kW2VdO2EueD0wPGYubm9ybWFsLng/Yy5taW4ueDpjLm1heC54O2IueD0wPGYubm9ybWFsLng/Yy5tYXgueDpjLm1pbi54O2EueT0wPGYubm9ybWFsLnk/Yy5taW4ueTpjLm1heC55O2IueT0wPGYubm9ybWFsLnk/Yy5tYXgueTpjLm1pbi55O2Euej0wPGYubm9ybWFsLno/Yy5taW4uejpjLm1heC56O2Iuej0wPGYubm9ybWFsLno/Yy5tYXguejpjLm1pbi56O3ZhciBnPWYuZGlzdGFuY2VUb1BvaW50KGEpLGY9Zi5kaXN0YW5jZVRvUG9pbnQoYik7aWYoMD5nJiYwPmYpcmV0dXJuITF9cmV0dXJuITB9fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGxhbmVzLGM9MDs2PmM7YysrKWlmKDA+YltjXS5kaXN0YW5jZVRvUG9pbnQoYSkpcmV0dXJuITE7cmV0dXJuITB9fSk7Z2IuUm90YXRpb25PcmRlcnM9XCJYWVogWVpYIFpYWSBYWlkgWVhaIFpZWFwiLnNwbGl0KFwiIFwiKTtcbiAgICBnYi5EZWZhdWx0T3JkZXI9XCJYWVpcIjtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhnYi5wcm90b3R5cGUse3g6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94fSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5feD1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfX0seTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3l9LHNldDpmdW5jdGlvbihhKXt0aGlzLl95PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fSx6OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fen0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX3o9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19LG9yZGVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JkZXJ9LHNldDpmdW5jdGlvbihhKXt0aGlzLl9vcmRlcj1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfX19KTtPYmplY3QuYXNzaWduKGdiLnByb3RvdHlwZSx7aXNFdWxlcjohMCxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5feD1hO3RoaXMuX3k9Yjt0aGlzLl96PVxuICAgIGM7dGhpcy5fb3JkZXI9ZHx8dGhpcy5fb3JkZXI7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX29yZGVyKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLl94PWEuX3g7dGhpcy5feT1hLl95O3RoaXMuX3o9YS5fejt0aGlzLl9vcmRlcj1hLl9vcmRlcjt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1RLmNsYW1wLGU9YS5lbGVtZW50czthPWVbMF07dmFyIGY9ZVs0XSxnPWVbOF0saD1lWzFdLGs9ZVs1XSxtPWVbOV0sbD1lWzJdLG49ZVs2XSxlPWVbMTBdO2I9Ynx8dGhpcy5fb3JkZXI7XCJYWVpcIj09PWI/KHRoaXMuX3k9TWF0aC5hc2luKGQoZywtMSwxKSksLjk5OTk5Pk1hdGguYWJzKGcpPyh0aGlzLl94PU1hdGguYXRhbjIoLW0sZSksdGhpcy5fej1cbiAgICBNYXRoLmF0YW4yKC1mLGEpKToodGhpcy5feD1NYXRoLmF0YW4yKG4sayksdGhpcy5fej0wKSk6XCJZWFpcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKC1kKG0sLTEsMSkpLC45OTk5OT5NYXRoLmFicyhtKT8odGhpcy5feT1NYXRoLmF0YW4yKGcsZSksdGhpcy5fej1NYXRoLmF0YW4yKGgsaykpOih0aGlzLl95PU1hdGguYXRhbjIoLWwsYSksdGhpcy5fej0wKSk6XCJaWFlcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKGQobiwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKG4pPyh0aGlzLl95PU1hdGguYXRhbjIoLWwsZSksdGhpcy5fej1NYXRoLmF0YW4yKC1mLGspKToodGhpcy5feT0wLHRoaXMuX3o9TWF0aC5hdGFuMihoLGEpKSk6XCJaWVhcIj09PWI/KHRoaXMuX3k9TWF0aC5hc2luKC1kKGwsLTEsMSkpLC45OTk5OT5NYXRoLmFicyhsKT8odGhpcy5feD1NYXRoLmF0YW4yKG4sZSksdGhpcy5fej1NYXRoLmF0YW4yKGgsYSkpOih0aGlzLl94PTAsdGhpcy5fej1NYXRoLmF0YW4yKC1mLGspKSk6XCJZWlhcIj09PVxuICAgIGI/KHRoaXMuX3o9TWF0aC5hc2luKGQoaCwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKGgpPyh0aGlzLl94PU1hdGguYXRhbjIoLW0sayksdGhpcy5feT1NYXRoLmF0YW4yKC1sLGEpKToodGhpcy5feD0wLHRoaXMuX3k9TWF0aC5hdGFuMihnLGUpKSk6XCJYWllcIj09PWI/KHRoaXMuX3o9TWF0aC5hc2luKC1kKGYsLTEsMSkpLC45OTk5OT5NYXRoLmFicyhmKT8odGhpcy5feD1NYXRoLmF0YW4yKG4sayksdGhpcy5feT1NYXRoLmF0YW4yKGcsYSkpOih0aGlzLl94PU1hdGguYXRhbjIoLW0sZSksdGhpcy5feT0wKSk6Y29uc29sZS53YXJuKFwiVEhSRUUuRXVsZXI6IC5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSBnaXZlbiB1bnN1cHBvcnRlZCBvcmRlcjogXCIrYik7dGhpcy5fb3JkZXI9YjtpZighMSE9PWMpdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXthLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGIpO1xuICAgIHJldHVybiB0aGlzLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhLGMsZCl9fSgpLHNldEZyb21WZWN0b3IzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2V0KGEueCxhLnksYS56LGJ8fHRoaXMuX29yZGVyKX0scmVvcmRlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBoYTtyZXR1cm4gZnVuY3Rpb24oYil7YS5zZXRGcm9tRXVsZXIodGhpcyk7cmV0dXJuIHRoaXMuc2V0RnJvbVF1YXRlcm5pb24oYSxiKX19KCksZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLl94PT09dGhpcy5feCYmYS5feT09PXRoaXMuX3kmJmEuX3o9PT10aGlzLl96JiZhLl9vcmRlcj09PXRoaXMuX29yZGVyfSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy5feD1hWzBdO3RoaXMuX3k9YVsxXTt0aGlzLl96PWFbMl07dm9pZCAwIT09YVszXSYmKHRoaXMuX29yZGVyPWFbM10pO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO1xuICAgIHZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy5feDthW2IrMV09dGhpcy5feTthW2IrMl09dGhpcy5fejthW2IrM109dGhpcy5fb3JkZXI7cmV0dXJuIGF9LHRvVmVjdG9yMzpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnNldCh0aGlzLl94LHRoaXMuX3ksdGhpcy5feik6bmV3IHAodGhpcy5feCx0aGlzLl95LHRoaXMuX3opfSxvbkNoYW5nZTpmdW5jdGlvbihhKXt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2s9YTtyZXR1cm4gdGhpc30sb25DaGFuZ2VDYWxsYmFjazpmdW5jdGlvbigpe319KTtPYmplY3QuYXNzaWduKFdkLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEpe3RoaXMubWFzaz0xPDxhfDB9LGVuYWJsZTpmdW5jdGlvbihhKXt0aGlzLm1hc2s9dGhpcy5tYXNrfDE8PGF8MH0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3RoaXMubWFza149MTw8YXwwfSxkaXNhYmxlOmZ1bmN0aW9uKGEpe3RoaXMubWFzayY9figxPDxhfDApfSx0ZXN0OmZ1bmN0aW9uKGEpe3JldHVybiAwIT09KHRoaXMubWFzayZcbiAgICBhLm1hc2spfX0pO3ZhciBjZz0wO3guRGVmYXVsdFVwPW5ldyBwKDAsMSwwKTt4LkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlPSEwO3gucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp4LGlzT2JqZWN0M0Q6ITAsb25CZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt9LG9uQWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXt9LGFwcGx5TWF0cml4OmZ1bmN0aW9uKGEpe3RoaXMubWF0cml4Lm11bHRpcGx5TWF0cmljZXMoYSx0aGlzLm1hdHJpeCk7dGhpcy5tYXRyaXguZGVjb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpfSxhcHBseVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dGhpcy5xdWF0ZXJuaW9uLnByZW11bHRpcGx5KGEpO3JldHVybiB0aGlzfSxzZXRSb3RhdGlvbkZyb21BeGlzQW5nbGU6ZnVuY3Rpb24oYSxiKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShhLGIpfSxzZXRSb3RhdGlvbkZyb21FdWxlcjpmdW5jdGlvbihhKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGEsXG4gICAgITApfSxzZXRSb3RhdGlvbkZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhKX0sc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbihhKXt0aGlzLnF1YXRlcm5pb24uY29weShhKX0scm90YXRlT25BeGlzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IGhhO3JldHVybiBmdW5jdGlvbihiLGMpe2Euc2V0RnJvbUF4aXNBbmdsZShiLGMpO3RoaXMucXVhdGVybmlvbi5tdWx0aXBseShhKTtyZXR1cm4gdGhpc319KCkscm90YXRlT25Xb3JsZEF4aXM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YS5zZXRGcm9tQXhpc0FuZ2xlKGIsYyk7dGhpcy5xdWF0ZXJuaW9uLnByZW11bHRpcGx5KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVYOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAoMSwwLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoYSxiKX19KCkscm90YXRlWTpmdW5jdGlvbigpe3ZhciBhPVxuICAgIG5ldyBwKDAsMSwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGEsYil9fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCgwLDAsMSk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYixjKXthLmNvcHkoYikuYXBwbHlRdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvbik7dGhpcy5wb3NpdGlvbi5hZGQoYS5tdWx0aXBseVNjYWxhcihjKSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCgxLDAsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVZOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAoMCwxLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYSxcbiAgICBiKX19KCksdHJhbnNsYXRlWjpmdW5jdGlvbigpe3ZhciBhPW5ldyBwKDAsMCwxKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGEsYil9fSgpLGxvY2FsVG9Xb3JsZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCl9LHdvcmxkVG9Mb2NhbDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYi5hcHBseU1hdHJpeDQoYS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpKX19KCksbG9va0F0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE8sYj1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2MuaXNWZWN0b3IzP2IuY29weShjKTpiLnNldChjLGQsZSk7dGhpcy5pc0NhbWVyYT9hLmxvb2tBdCh0aGlzLnBvc2l0aW9uLGIsdGhpcy51cCk6YS5sb29rQXQoYix0aGlzLnBvc2l0aW9uLHRoaXMudXApO3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoYSl9fSgpLFxuICAgIGFkZDpmdW5jdGlvbihhKXtpZigxPGFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspdGhpcy5hZGQoYXJndW1lbnRzW2JdKTtyZXR1cm4gdGhpc31pZihhPT09dGhpcylyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdDNELmFkZDogb2JqZWN0IGNhbid0IGJlIGFkZGVkIGFzIGEgY2hpbGQgb2YgaXRzZWxmLlwiLGEpLHRoaXM7YSYmYS5pc09iamVjdDNEPyhudWxsIT09YS5wYXJlbnQmJmEucGFyZW50LnJlbW92ZShhKSxhLnBhcmVudD10aGlzLGEuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImFkZGVkXCJ9KSx0aGlzLmNoaWxkcmVuLnB1c2goYSkpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuT2JqZWN0M0QuXCIsYSk7cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbihhKXtpZigxPGFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspdGhpcy5yZW1vdmUoYXJndW1lbnRzW2JdKTtcbiAgICByZXR1cm4gdGhpc31iPXRoaXMuY2hpbGRyZW4uaW5kZXhPZihhKTstMSE9PWImJihhLnBhcmVudD1udWxsLGEuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInJlbW92ZWRcIn0pLHRoaXMuY2hpbGRyZW4uc3BsaWNlKGIsMSkpO3JldHVybiB0aGlzfSxnZXRPYmplY3RCeUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldE9iamVjdEJ5UHJvcGVydHkoXCJpZFwiLGEpfSxnZXRPYmplY3RCeU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcIm5hbWVcIixhKX0sZ2V0T2JqZWN0QnlQcm9wZXJ0eTpmdW5jdGlvbihhLGIpe2lmKHRoaXNbYV09PT1iKXJldHVybiB0aGlzO2Zvcih2YXIgYz0wLGQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5jaGlsZHJlbltjXS5nZXRPYmplY3RCeVByb3BlcnR5KGEsYik7aWYodm9pZCAwIT09ZSlyZXR1cm4gZX19LGdldFdvcmxkUG9zaXRpb246ZnVuY3Rpb24oYSl7YT1hfHxuZXcgcDt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTtcbiAgICByZXR1cm4gYS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCl9LGdldFdvcmxkUXVhdGVybmlvbjpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGMpe2M9Y3x8bmV3IGhhO3RoaXMudXBkYXRlTWF0cml4V29ybGQoITApO3RoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKGEsYyxiKTtyZXR1cm4gY319KCksZ2V0V29ybGRSb3RhdGlvbjpmdW5jdGlvbigpe3ZhciBhPW5ldyBoYTtyZXR1cm4gZnVuY3Rpb24oYil7Yj1ifHxuZXcgZ2I7dGhpcy5nZXRXb3JsZFF1YXRlcm5pb24oYSk7cmV0dXJuIGIuc2V0RnJvbVF1YXRlcm5pb24oYSx0aGlzLnJvdGF0aW9uLm9yZGVyLCExKX19KCksZ2V0V29ybGRTY2FsZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IGhhO3JldHVybiBmdW5jdGlvbihjKXtjPWN8fG5ldyBwO3RoaXMudXBkYXRlTWF0cml4V29ybGQoITApO3RoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKGEsYixjKTtyZXR1cm4gY319KCksXG4gICAgZ2V0V29ybGREaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGIpe2I9Ynx8bmV3IHA7dGhpcy5nZXRXb3JsZFF1YXRlcm5pb24oYSk7cmV0dXJuIGIuc2V0KDAsMCwxKS5hcHBseVF1YXRlcm5pb24oYSl9fSgpLHJheWNhc3Q6ZnVuY3Rpb24oKXt9LHRyYXZlcnNlOmZ1bmN0aW9uKGEpe2EodGhpcyk7Zm9yKHZhciBiPXRoaXMuY2hpbGRyZW4sYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyliW2NdLnRyYXZlcnNlKGEpfSx0cmF2ZXJzZVZpc2libGU6ZnVuY3Rpb24oYSl7aWYoITEhPT10aGlzLnZpc2libGUpe2EodGhpcyk7Zm9yKHZhciBiPXRoaXMuY2hpbGRyZW4sYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyliW2NdLnRyYXZlcnNlVmlzaWJsZShhKX19LHRyYXZlcnNlQW5jZXN0b3JzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGFyZW50O251bGwhPT1iJiYoYShiKSxiLnRyYXZlcnNlQW5jZXN0b3JzKGEpKX0sdXBkYXRlTWF0cml4OmZ1bmN0aW9uKCl7dGhpcy5tYXRyaXguY29tcG9zZSh0aGlzLnBvc2l0aW9uLFxuICAgIHRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGEpe3RoaXMubWF0cml4QXV0b1VwZGF0ZSYmdGhpcy51cGRhdGVNYXRyaXgoKTtpZih0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGV8fGEpbnVsbD09PXRoaXMucGFyZW50P3RoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCk6dGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKHRoaXMucGFyZW50Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITEsYT0hMDtmb3IodmFyIGI9dGhpcy5jaGlsZHJlbixjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWJbY10udXBkYXRlTWF0cml4V29ybGQoYSl9LHRvSlNPTjpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIsYyl7dm9pZCAwPT09YltjLnV1aWRdJiYoYltjLnV1aWRdPWMudG9KU09OKGEpKTtyZXR1cm4gYy51dWlkfWZ1bmN0aW9uIGMoYSl7dmFyIGI9XG4gICAgW10sYztmb3IoYyBpbiBhKXt2YXIgZD1hW2NdO2RlbGV0ZSBkLm1ldGFkYXRhO2IucHVzaChkKX1yZXR1cm4gYn12YXIgZD12b2lkIDA9PT1hfHxcInN0cmluZ1wiPT09dHlwZW9mIGEsZT17fTtkJiYoYT17Z2VvbWV0cmllczp7fSxtYXRlcmlhbHM6e30sdGV4dHVyZXM6e30saW1hZ2VzOnt9LHNoYXBlczp7fX0sZS5tZXRhZGF0YT17dmVyc2lvbjo0LjUsdHlwZTpcIk9iamVjdFwiLGdlbmVyYXRvcjpcIk9iamVjdDNELnRvSlNPTlwifSk7dmFyIGY9e307Zi51dWlkPXRoaXMudXVpZDtmLnR5cGU9dGhpcy50eXBlO1wiXCIhPT10aGlzLm5hbWUmJihmLm5hbWU9dGhpcy5uYW1lKTshMD09PXRoaXMuY2FzdFNoYWRvdyYmKGYuY2FzdFNoYWRvdz0hMCk7ITA9PT10aGlzLnJlY2VpdmVTaGFkb3cmJihmLnJlY2VpdmVTaGFkb3c9ITApOyExPT09dGhpcy52aXNpYmxlJiYoZi52aXNpYmxlPSExKTtcInt9XCIhPT1KU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSYmKGYudXNlckRhdGE9dGhpcy51c2VyRGF0YSk7XG4gICAgZi5tYXRyaXg9dGhpcy5tYXRyaXgudG9BcnJheSgpO2lmKHZvaWQgMCE9PXRoaXMuZ2VvbWV0cnkpe2YuZ2VvbWV0cnk9YihhLmdlb21ldHJpZXMsdGhpcy5nZW9tZXRyeSk7dmFyIGc9dGhpcy5nZW9tZXRyeS5wYXJhbWV0ZXJzO2lmKHZvaWQgMCE9PWcmJnZvaWQgMCE9PWcuc2hhcGVzKWlmKGc9Zy5zaGFwZXMsQXJyYXkuaXNBcnJheShnKSlmb3IodmFyIGg9MCxrPWcubGVuZ3RoO2g8aztoKyspYihhLnNoYXBlcyxnW2hdKTtlbHNlIGIoYS5zaGFwZXMsZyl9aWYodm9pZCAwIT09dGhpcy5tYXRlcmlhbClpZihBcnJheS5pc0FycmF5KHRoaXMubWF0ZXJpYWwpKXtnPVtdO2g9MDtmb3Ioaz10aGlzLm1hdGVyaWFsLmxlbmd0aDtoPGs7aCsrKWcucHVzaChiKGEubWF0ZXJpYWxzLHRoaXMubWF0ZXJpYWxbaF0pKTtmLm1hdGVyaWFsPWd9ZWxzZSBmLm1hdGVyaWFsPWIoYS5tYXRlcmlhbHMsdGhpcy5tYXRlcmlhbCk7aWYoMDx0aGlzLmNoaWxkcmVuLmxlbmd0aClmb3IoZi5jaGlsZHJlbj1cbiAgICBbXSxoPTA7aDx0aGlzLmNoaWxkcmVuLmxlbmd0aDtoKyspZi5jaGlsZHJlbi5wdXNoKHRoaXMuY2hpbGRyZW5baF0udG9KU09OKGEpLm9iamVjdCk7aWYoZCl7dmFyIGQ9YyhhLmdlb21ldHJpZXMpLGg9YyhhLm1hdGVyaWFscyksaz1jKGEudGV4dHVyZXMpLG09YyhhLmltYWdlcyk7Zz1jKGEuc2hhcGVzKTswPGQubGVuZ3RoJiYoZS5nZW9tZXRyaWVzPWQpOzA8aC5sZW5ndGgmJihlLm1hdGVyaWFscz1oKTswPGsubGVuZ3RoJiYoZS50ZXh0dXJlcz1rKTswPG0ubGVuZ3RoJiYoZS5pbWFnZXM9bSk7MDxnLmxlbmd0aCYmKGUuc2hhcGVzPWcpfWUub2JqZWN0PWY7cmV0dXJuIGV9LGNsb25lOmZ1bmN0aW9uKGEpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzLGEpfSxjb3B5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9ITApO3RoaXMubmFtZT1hLm5hbWU7dGhpcy51cC5jb3B5KGEudXApO3RoaXMucG9zaXRpb24uY29weShhLnBvc2l0aW9uKTt0aGlzLnF1YXRlcm5pb24uY29weShhLnF1YXRlcm5pb24pO1xuICAgIHRoaXMuc2NhbGUuY29weShhLnNjYWxlKTt0aGlzLm1hdHJpeC5jb3B5KGEubWF0cml4KTt0aGlzLm1hdHJpeFdvcmxkLmNvcHkoYS5tYXRyaXhXb3JsZCk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPWEubWF0cml4QXV0b1VwZGF0ZTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9YS5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlO3RoaXMubGF5ZXJzLm1hc2s9YS5sYXllcnMubWFzazt0aGlzLnZpc2libGU9YS52aXNpYmxlO3RoaXMuY2FzdFNoYWRvdz1hLmNhc3RTaGFkb3c7dGhpcy5yZWNlaXZlU2hhZG93PWEucmVjZWl2ZVNoYWRvdzt0aGlzLmZydXN0dW1DdWxsZWQ9YS5mcnVzdHVtQ3VsbGVkO3RoaXMucmVuZGVyT3JkZXI9YS5yZW5kZXJPcmRlcjt0aGlzLnVzZXJEYXRhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYS51c2VyRGF0YSkpO2lmKCEwPT09Yilmb3IoYj0wO2I8YS5jaGlsZHJlbi5sZW5ndGg7YisrKXRoaXMuYWRkKGEuY2hpbGRyZW5bYl0uY2xvbmUoKSk7cmV0dXJuIHRoaXN9fSk7XG4gICAgVGEucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRhLGlzQ2FtZXJhOiEwLGNvcHk6ZnVuY3Rpb24oYSxiKXt4LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhLGIpO3RoaXMubWF0cml4V29ybGRJbnZlcnNlLmNvcHkoYS5tYXRyaXhXb3JsZEludmVyc2UpO3RoaXMucHJvamVjdGlvbk1hdHJpeC5jb3B5KGEucHJvamVjdGlvbk1hdHJpeCk7cmV0dXJuIHRoaXN9LGdldFdvcmxkRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IGhhO3JldHVybiBmdW5jdGlvbihiKXtiPWJ8fG5ldyBwO3RoaXMuZ2V0V29ybGRRdWF0ZXJuaW9uKGEpO3JldHVybiBiLnNldCgwLDAsLTEpLmFwcGx5UXVhdGVybmlvbihhKX19KCksdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oYSl7eC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLGEpO3RoaXMubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCl9LFxuICAgIGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfX0pO0xiLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TGIsaXNPcnRob2dyYXBoaWNDYW1lcmE6ITAsY29weTpmdW5jdGlvbihhLGIpe1RhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhLGIpO3RoaXMubGVmdD1hLmxlZnQ7dGhpcy5yaWdodD1hLnJpZ2h0O3RoaXMudG9wPWEudG9wO3RoaXMuYm90dG9tPWEuYm90dG9tO3RoaXMubmVhcj1hLm5lYXI7dGhpcy5mYXI9YS5mYXI7dGhpcy56b29tPWEuem9vbTt0aGlzLnZpZXc9bnVsbD09PWEudmlldz9udWxsOk9iamVjdC5hc3NpZ24oe30sYS52aWV3KTtyZXR1cm4gdGhpc30sc2V0Vmlld09mZnNldDpmdW5jdGlvbihhLGIsYyxkLGUsZil7bnVsbD09PXRoaXMudmlldyYmKHRoaXMudmlldz17ZW5hYmxlZDohMCxmdWxsV2lkdGg6MSxmdWxsSGVpZ2h0OjEsb2Zmc2V0WDowLFxuICAgIG9mZnNldFk6MCx3aWR0aDoxLGhlaWdodDoxfSk7dGhpcy52aWV3LmVuYWJsZWQ9ITA7dGhpcy52aWV3LmZ1bGxXaWR0aD1hO3RoaXMudmlldy5mdWxsSGVpZ2h0PWI7dGhpcy52aWV3Lm9mZnNldFg9Yzt0aGlzLnZpZXcub2Zmc2V0WT1kO3RoaXMudmlldy53aWR0aD1lO3RoaXMudmlldy5oZWlnaHQ9Zjt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sY2xlYXJWaWV3T2Zmc2V0OmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMudmlldyYmKHRoaXMudmlldy5lbmFibGVkPSExKTt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sdXBkYXRlUHJvamVjdGlvbk1hdHJpeDpmdW5jdGlvbigpe3ZhciBhPSh0aGlzLnJpZ2h0LXRoaXMubGVmdCkvKDIqdGhpcy56b29tKSxiPSh0aGlzLnRvcC10aGlzLmJvdHRvbSkvKDIqdGhpcy56b29tKSxjPSh0aGlzLnJpZ2h0K3RoaXMubGVmdCkvMixkPSh0aGlzLnRvcCt0aGlzLmJvdHRvbSkvMixlPWMtYSxjPWMrYSxhPWQrYixiPWQtYjtpZihudWxsIT09XG4gICAgdGhpcy52aWV3JiZ0aGlzLnZpZXcuZW5hYmxlZCl2YXIgYz10aGlzLnpvb20vKHRoaXMudmlldy53aWR0aC90aGlzLnZpZXcuZnVsbFdpZHRoKSxiPXRoaXMuem9vbS8odGhpcy52aWV3LmhlaWdodC90aGlzLnZpZXcuZnVsbEhlaWdodCksZj0odGhpcy5yaWdodC10aGlzLmxlZnQpL3RoaXMudmlldy53aWR0aCxkPSh0aGlzLnRvcC10aGlzLmJvdHRvbSkvdGhpcy52aWV3LmhlaWdodCxlPWUrdGhpcy52aWV3Lm9mZnNldFgvYypmLGM9ZSt0aGlzLnZpZXcud2lkdGgvYypmLGE9YS10aGlzLnZpZXcub2Zmc2V0WS9iKmQsYj1hLXRoaXMudmlldy5oZWlnaHQvYipkO3RoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlT3J0aG9ncmFwaGljKGUsYyxhLGIsdGhpcy5uZWFyLHRoaXMuZmFyKX0sdG9KU09OOmZ1bmN0aW9uKGEpe2E9eC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxhKTthLm9iamVjdC56b29tPXRoaXMuem9vbTthLm9iamVjdC5sZWZ0PXRoaXMubGVmdDthLm9iamVjdC5yaWdodD1cbiAgICB0aGlzLnJpZ2h0O2Eub2JqZWN0LnRvcD10aGlzLnRvcDthLm9iamVjdC5ib3R0b209dGhpcy5ib3R0b207YS5vYmplY3QubmVhcj10aGlzLm5lYXI7YS5vYmplY3QuZmFyPXRoaXMuZmFyO251bGwhPT10aGlzLnZpZXcmJihhLm9iamVjdC52aWV3PU9iamVjdC5hc3NpZ24oe30sdGhpcy52aWV3KSk7cmV0dXJuIGF9fSk7T2JqZWN0LmFzc2lnbihZYS5wcm90b3R5cGUse2Nsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYT1hLmE7dGhpcy5iPWEuYjt0aGlzLmM9YS5jO3RoaXMubm9ybWFsLmNvcHkoYS5ub3JtYWwpO3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLm1hdGVyaWFsSW5kZXg9YS5tYXRlcmlhbEluZGV4O2Zvcih2YXIgYj0wLGM9YS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtiPGM7YisrKXRoaXMudmVydGV4Tm9ybWFsc1tiXT1hLnZlcnRleE5vcm1hbHNbYl0uY2xvbmUoKTtiPTA7XG4gICAgZm9yKGM9YS52ZXJ0ZXhDb2xvcnMubGVuZ3RoO2I8YztiKyspdGhpcy52ZXJ0ZXhDb2xvcnNbYl09YS52ZXJ0ZXhDb2xvcnNbYl0uY2xvbmUoKTtyZXR1cm4gdGhpc319KTt2YXIgZGc9MDtMLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoemEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TCxpc0dlb21ldHJ5OiEwLGFwcGx5TWF0cml4OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0obmV3IG1hKS5nZXROb3JtYWxNYXRyaXgoYSksYz0wLGQ9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7YzxkO2MrKyl0aGlzLnZlcnRpY2VzW2NdLmFwcGx5TWF0cml4NChhKTtjPTA7Zm9yKGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKyl7YT10aGlzLmZhY2VzW2NdO2Eubm9ybWFsLmFwcGx5TWF0cml4MyhiKS5ub3JtYWxpemUoKTtmb3IodmFyIGU9MCxmPWEudmVydGV4Tm9ybWFscy5sZW5ndGg7ZTxmO2UrKylhLnZlcnRleE5vcm1hbHNbZV0uYXBwbHlNYXRyaXgzKGIpLm5vcm1hbGl6ZSgpfW51bGwhPT1cbiAgICB0aGlzLmJvdW5kaW5nQm94JiZ0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO251bGwhPT10aGlzLmJvdW5kaW5nU3BoZXJlJiZ0aGlzLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9ITA7cmV0dXJuIHRoaXN9LHJvdGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYil7YS5tYWtlUm90YXRpb25YKGIpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHJvdGF0ZVk6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYil7YS5tYWtlUm90YXRpb25ZKGIpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYil7YS5tYWtlUm90YXRpb25aKGIpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbigpe3ZhciBhPVxuICAgIG5ldyBPO3JldHVybiBmdW5jdGlvbihiLGMsZCl7YS5tYWtlVHJhbnNsYXRpb24oYixjLGQpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHNjYWxlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXthLm1ha2VTY2FsZShiLGMsZCk7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksbG9va0F0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHg7cmV0dXJuIGZ1bmN0aW9uKGIpe2EubG9va0F0KGIpO2EudXBkYXRlTWF0cml4KCk7dGhpcy5hcHBseU1hdHJpeChhLm1hdHJpeCl9fSgpLGZyb21CdWZmZXJHZW9tZXRyeTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixkLGUpe3ZhciBmPXZvaWQgMCE9PWc/W2xbYV0uY2xvbmUoKSxsW2JdLmNsb25lKCksbFtkXS5jbG9uZSgpXTpbXSxxPXZvaWQgMCE9PWg/W2MuY29sb3JzW2FdLmNsb25lKCksYy5jb2xvcnNbYl0uY2xvbmUoKSxjLmNvbG9yc1tkXS5jbG9uZSgpXTpbXTtlPW5ldyBZYShhLFxuICAgIGIsZCxmLHEsZSk7Yy5mYWNlcy5wdXNoKGUpO3ZvaWQgMCE9PWsmJmMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtuW2FdLmNsb25lKCksbltiXS5jbG9uZSgpLG5bZF0uY2xvbmUoKV0pO3ZvaWQgMCE9PW0mJmMuZmFjZVZlcnRleFV2c1sxXS5wdXNoKFt1W2FdLmNsb25lKCksdVtiXS5jbG9uZSgpLHVbZF0uY2xvbmUoKV0pfXZhciBjPXRoaXMsZD1udWxsIT09YS5pbmRleD9hLmluZGV4LmFycmF5OnZvaWQgMCxlPWEuYXR0cmlidXRlcyxmPWUucG9zaXRpb24uYXJyYXksZz12b2lkIDAhPT1lLm5vcm1hbD9lLm5vcm1hbC5hcnJheTp2b2lkIDAsaD12b2lkIDAhPT1lLmNvbG9yP2UuY29sb3IuYXJyYXk6dm9pZCAwLGs9dm9pZCAwIT09ZS51dj9lLnV2LmFycmF5OnZvaWQgMCxtPXZvaWQgMCE9PWUudXYyP2UudXYyLmFycmF5OnZvaWQgMDt2b2lkIDAhPT1tJiYodGhpcy5mYWNlVmVydGV4VXZzWzFdPVtdKTtmb3IodmFyIGw9W10sbj1bXSx1PVtdLHI9ZT0wO2U8Zi5sZW5ndGg7ZSs9MyxcbiAgICByKz0yKWMudmVydGljZXMucHVzaChuZXcgcChmW2VdLGZbZSsxXSxmW2UrMl0pKSx2b2lkIDAhPT1nJiZsLnB1c2gobmV3IHAoZ1tlXSxnW2UrMV0sZ1tlKzJdKSksdm9pZCAwIT09aCYmYy5jb2xvcnMucHVzaChuZXcgSChoW2VdLGhbZSsxXSxoW2UrMl0pKSx2b2lkIDAhPT1rJiZuLnB1c2gobmV3IEQoa1tyXSxrW3IrMV0pKSx2b2lkIDAhPT1tJiZ1LnB1c2gobmV3IEQobVtyXSxtW3IrMV0pKTt2YXIgdD1hLmdyb3VwcztpZigwPHQubGVuZ3RoKWZvcihlPTA7ZTx0Lmxlbmd0aDtlKyspZm9yKHZhciBmPXRbZV0sdj1mLnN0YXJ0LHc9Zi5jb3VudCxyPXYsdj12K3c7cjx2O3IrPTMpdm9pZCAwIT09ZD9iKGRbcl0sZFtyKzFdLGRbcisyXSxmLm1hdGVyaWFsSW5kZXgpOmIocixyKzEscisyLGYubWF0ZXJpYWxJbmRleCk7ZWxzZSBpZih2b2lkIDAhPT1kKWZvcihlPTA7ZTxkLmxlbmd0aDtlKz0zKWIoZFtlXSxkW2UrMV0sZFtlKzJdKTtlbHNlIGZvcihlPTA7ZTxmLmxlbmd0aC8zO2UrPVxuICAgIDMpYihlLGUrMSxlKzIpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7bnVsbCE9PWEuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PWEuYm91bmRpbmdCb3guY2xvbmUoKSk7bnVsbCE9PWEuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWEuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSk7cmV0dXJuIHRoaXN9LGNlbnRlcjpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7dmFyIGE9dGhpcy5ib3VuZGluZ0JveC5nZXRDZW50ZXIoKS5uZWdhdGUoKTt0aGlzLnRyYW5zbGF0ZShhLngsYS55LGEueik7cmV0dXJuIGF9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7dmFyIGE9dGhpcy5ib3VuZGluZ1NwaGVyZS5jZW50ZXIsYj10aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cyxiPTA9PT1iPzE6MS9iLGM9bmV3IE87Yy5zZXQoYiwwLDAsLWIqYS54LDAsYiwwLC1iKmEueSwwLDAsYiwtYiphLnosMCwwLDAsMSk7XG4gICAgdGhpcy5hcHBseU1hdHJpeChjKTtyZXR1cm4gdGhpc30sY29tcHV0ZUZhY2VOb3JtYWxzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPW5ldyBwLGI9bmV3IHAsYz0wLGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5mYWNlc1tjXSxmPXRoaXMudmVydGljZXNbZS5hXSxnPXRoaXMudmVydGljZXNbZS5iXTthLnN1YlZlY3RvcnModGhpcy52ZXJ0aWNlc1tlLmNdLGcpO2Iuc3ViVmVjdG9ycyhmLGcpO2EuY3Jvc3MoYik7YS5ub3JtYWxpemUoKTtlLm5vcm1hbC5jb3B5KGEpfX0sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9ITApO3ZhciBiO3ZhciBjPUFycmF5KHRoaXMudmVydGljZXMubGVuZ3RoKTt2YXIgZD0wO2ZvcihiPXRoaXMudmVydGljZXMubGVuZ3RoO2Q8YjtkKyspY1tkXT1uZXcgcDtpZihhKXt2YXIgZT1uZXcgcCxmPW5ldyBwO2E9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDthPGQ7YSsrKXtiPXRoaXMuZmFjZXNbYV07XG4gICAgdmFyIGc9dGhpcy52ZXJ0aWNlc1tiLmFdO3ZhciBoPXRoaXMudmVydGljZXNbYi5iXTt2YXIgaz10aGlzLnZlcnRpY2VzW2IuY107ZS5zdWJWZWN0b3JzKGssaCk7Zi5zdWJWZWN0b3JzKGcsaCk7ZS5jcm9zcyhmKTtjW2IuYV0uYWRkKGUpO2NbYi5iXS5hZGQoZSk7Y1tiLmNdLmFkZChlKX19ZWxzZSBmb3IodGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKSxhPTAsZD10aGlzLmZhY2VzLmxlbmd0aDthPGQ7YSsrKWI9dGhpcy5mYWNlc1thXSxjW2IuYV0uYWRkKGIubm9ybWFsKSxjW2IuYl0uYWRkKGIubm9ybWFsKSxjW2IuY10uYWRkKGIubm9ybWFsKTtkPTA7Zm9yKGI9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZDxiO2QrKyljW2RdLm5vcm1hbGl6ZSgpO2E9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDthPGQ7YSsrKWI9dGhpcy5mYWNlc1thXSxnPWIudmVydGV4Tm9ybWFscywzPT09Zy5sZW5ndGg/KGdbMF0uY29weShjW2IuYV0pLGdbMV0uY29weShjW2IuYl0pLGdbMl0uY29weShjW2IuY10pKTpcbiAgICAoZ1swXT1jW2IuYV0uY2xvbmUoKSxnWzFdPWNbYi5iXS5jbG9uZSgpLGdbMl09Y1tiLmNdLmNsb25lKCkpOzA8dGhpcy5mYWNlcy5sZW5ndGgmJih0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSEwKX0sY29tcHV0ZUZsYXRWZXJ0ZXhOb3JtYWxzOmZ1bmN0aW9uKCl7dmFyIGE7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt2YXIgYj0wO2ZvcihhPXRoaXMuZmFjZXMubGVuZ3RoO2I8YTtiKyspe3ZhciBjPXRoaXMuZmFjZXNbYl07dmFyIGQ9Yy52ZXJ0ZXhOb3JtYWxzOzM9PT1kLmxlbmd0aD8oZFswXS5jb3B5KGMubm9ybWFsKSxkWzFdLmNvcHkoYy5ub3JtYWwpLGRbMl0uY29weShjLm5vcm1hbCkpOihkWzBdPWMubm9ybWFsLmNsb25lKCksZFsxXT1jLm5vcm1hbC5jbG9uZSgpLGRbMl09Yy5ub3JtYWwuY2xvbmUoKSl9MDx0aGlzLmZhY2VzLmxlbmd0aCYmKHRoaXMubm9ybWFsc05lZWRVcGRhdGU9ITApfSxjb21wdXRlTW9ycGhOb3JtYWxzOmZ1bmN0aW9uKCl7dmFyIGEsYjt2YXIgYz1cbiAgICAwO2ZvcihiPXRoaXMuZmFjZXMubGVuZ3RoO2M8YjtjKyspe3ZhciBkPXRoaXMuZmFjZXNbY107ZC5fX29yaWdpbmFsRmFjZU5vcm1hbD9kLl9fb3JpZ2luYWxGYWNlTm9ybWFsLmNvcHkoZC5ub3JtYWwpOmQuX19vcmlnaW5hbEZhY2VOb3JtYWw9ZC5ub3JtYWwuY2xvbmUoKTtkLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzfHwoZC5fX29yaWdpbmFsVmVydGV4Tm9ybWFscz1bXSk7dmFyIGU9MDtmb3IoYT1kLnZlcnRleE5vcm1hbHMubGVuZ3RoO2U8YTtlKyspZC5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1tlXT9kLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2VdLmNvcHkoZC52ZXJ0ZXhOb3JtYWxzW2VdKTpkLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2VdPWQudmVydGV4Tm9ybWFsc1tlXS5jbG9uZSgpfXZhciBmPW5ldyBMO2YuZmFjZXM9dGhpcy5mYWNlcztlPTA7Zm9yKGE9dGhpcy5tb3JwaFRhcmdldHMubGVuZ3RoO2U8YTtlKyspe2lmKCF0aGlzLm1vcnBoTm9ybWFsc1tlXSl7dGhpcy5tb3JwaE5vcm1hbHNbZV09XG4gICAge307dGhpcy5tb3JwaE5vcm1hbHNbZV0uZmFjZU5vcm1hbHM9W107dGhpcy5tb3JwaE5vcm1hbHNbZV0udmVydGV4Tm9ybWFscz1bXTtkPXRoaXMubW9ycGhOb3JtYWxzW2VdLmZhY2VOb3JtYWxzO3ZhciBnPXRoaXMubW9ycGhOb3JtYWxzW2VdLnZlcnRleE5vcm1hbHM7Yz0wO2ZvcihiPXRoaXMuZmFjZXMubGVuZ3RoO2M8YjtjKyspe3ZhciBoPW5ldyBwO3ZhciBrPXthOm5ldyBwLGI6bmV3IHAsYzpuZXcgcH07ZC5wdXNoKGgpO2cucHVzaChrKX19Zz10aGlzLm1vcnBoTm9ybWFsc1tlXTtmLnZlcnRpY2VzPXRoaXMubW9ycGhUYXJnZXRzW2VdLnZlcnRpY2VzO2YuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Zi5jb21wdXRlVmVydGV4Tm9ybWFscygpO2M9MDtmb3IoYj10aGlzLmZhY2VzLmxlbmd0aDtjPGI7YysrKWQ9dGhpcy5mYWNlc1tjXSxoPWcuZmFjZU5vcm1hbHNbY10saz1nLnZlcnRleE5vcm1hbHNbY10saC5jb3B5KGQubm9ybWFsKSxrLmEuY29weShkLnZlcnRleE5vcm1hbHNbMF0pLFxuICAgIGsuYi5jb3B5KGQudmVydGV4Tm9ybWFsc1sxXSksay5jLmNvcHkoZC52ZXJ0ZXhOb3JtYWxzWzJdKX1jPTA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YzxiO2MrKylkPXRoaXMuZmFjZXNbY10sZC5ub3JtYWw9ZC5fX29yaWdpbmFsRmFjZU5vcm1hbCxkLnZlcnRleE5vcm1hbHM9ZC5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc30sY29tcHV0ZUxpbmVEaXN0YW5jZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMudmVydGljZXMsYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKykwPGMmJihhKz1iW2NdLmRpc3RhbmNlVG8oYltjLTFdKSksdGhpcy5saW5lRGlzdGFuY2VzW2NdPWF9LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1uZXcgWGEpO3RoaXMuYm91bmRpbmdCb3guc2V0RnJvbVBvaW50cyh0aGlzLnZlcnRpY2VzKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJlxuICAgICh0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBJYSk7dGhpcy5ib3VuZGluZ1NwaGVyZS5zZXRGcm9tUG9pbnRzKHRoaXMudmVydGljZXMpfSxtZXJnZTpmdW5jdGlvbihhLGIsYyl7aWYoYSYmYS5pc0dlb21ldHJ5KXt2YXIgZCxlPXRoaXMudmVydGljZXMubGVuZ3RoLGY9dGhpcy52ZXJ0aWNlcyxnPWEudmVydGljZXMsaD10aGlzLmZhY2VzLGs9YS5mYWNlcyxtPXRoaXMuZmFjZVZlcnRleFV2c1swXSxsPWEuZmFjZVZlcnRleFV2c1swXSxuPXRoaXMuY29sb3JzLHA9YS5jb2xvcnM7dm9pZCAwPT09YyYmKGM9MCk7dm9pZCAwIT09YiYmKGQ9KG5ldyBtYSkuZ2V0Tm9ybWFsTWF0cml4KGIpKTthPTA7Zm9yKHZhciByPWcubGVuZ3RoO2E8cjthKyspe3ZhciB0PWdbYV0uY2xvbmUoKTt2b2lkIDAhPT1iJiZ0LmFwcGx5TWF0cml4NChiKTtmLnB1c2godCl9YT0wO2ZvcihyPXAubGVuZ3RoO2E8cjthKyspbi5wdXNoKHBbYV0uY2xvbmUoKSk7YT0wO2ZvcihyPWsubGVuZ3RoO2E8cjthKyspe3ZhciBnPVxuICAgIGtbYV0sdj1nLnZlcnRleE5vcm1hbHMscD1nLnZlcnRleENvbG9ycyxuPW5ldyBZYShnLmErZSxnLmIrZSxnLmMrZSk7bi5ub3JtYWwuY29weShnLm5vcm1hbCk7dm9pZCAwIT09ZCYmbi5ub3JtYWwuYXBwbHlNYXRyaXgzKGQpLm5vcm1hbGl6ZSgpO2I9MDtmb3IoZj12Lmxlbmd0aDtiPGY7YisrKXQ9dltiXS5jbG9uZSgpLHZvaWQgMCE9PWQmJnQuYXBwbHlNYXRyaXgzKGQpLm5vcm1hbGl6ZSgpLG4udmVydGV4Tm9ybWFscy5wdXNoKHQpO24uY29sb3IuY29weShnLmNvbG9yKTtiPTA7Zm9yKGY9cC5sZW5ndGg7YjxmO2IrKyl0PXBbYl0sbi52ZXJ0ZXhDb2xvcnMucHVzaCh0LmNsb25lKCkpO24ubWF0ZXJpYWxJbmRleD1nLm1hdGVyaWFsSW5kZXgrYztoLnB1c2gobil9YT0wO2ZvcihyPWwubGVuZ3RoO2E8cjthKyspaWYoYz1sW2FdLGQ9W10sdm9pZCAwIT09Yyl7Yj0wO2ZvcihmPWMubGVuZ3RoO2I8ZjtiKyspZC5wdXNoKGNbYl0uY2xvbmUoKSk7bS5wdXNoKGQpfX1lbHNlIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeS5tZXJnZSgpOiBnZW9tZXRyeSBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuR2VvbWV0cnkuXCIsXG4gICAgYSl9LG1lcmdlTWVzaDpmdW5jdGlvbihhKXthJiZhLmlzTWVzaD8oYS5tYXRyaXhBdXRvVXBkYXRlJiZhLnVwZGF0ZU1hdHJpeCgpLHRoaXMubWVyZ2UoYS5nZW9tZXRyeSxhLm1hdHJpeCkpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeS5tZXJnZU1lc2goKTogbWVzaCBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuTWVzaC5cIixhKX0sbWVyZ2VWZXJ0aWNlczpmdW5jdGlvbigpe3ZhciBhPXt9LGI9W10sYz1bXSxkPU1hdGgucG93KDEwLDQpLGU7dmFyIGY9MDtmb3IoZT10aGlzLnZlcnRpY2VzLmxlbmd0aDtmPGU7ZisrKXt2YXIgZz10aGlzLnZlcnRpY2VzW2ZdO2c9TWF0aC5yb3VuZChnLngqZCkrXCJfXCIrTWF0aC5yb3VuZChnLnkqZCkrXCJfXCIrTWF0aC5yb3VuZChnLnoqZCk7dm9pZCAwPT09YVtnXT8oYVtnXT1mLGIucHVzaCh0aGlzLnZlcnRpY2VzW2ZdKSxjW2ZdPWIubGVuZ3RoLTEpOmNbZl09Y1thW2ddXX1hPVtdO2Y9MDtmb3IoZT10aGlzLmZhY2VzLmxlbmd0aDtmPGU7ZisrKWZvcihkPVxuICAgIHRoaXMuZmFjZXNbZl0sZC5hPWNbZC5hXSxkLmI9Y1tkLmJdLGQuYz1jW2QuY10sZD1bZC5hLGQuYixkLmNdLGc9MDszPmc7ZysrKWlmKGRbZ109PT1kWyhnKzEpJTNdKXthLnB1c2goZik7YnJlYWt9Zm9yKGY9YS5sZW5ndGgtMTswPD1mO2YtLSlmb3IoZD1hW2ZdLHRoaXMuZmFjZXMuc3BsaWNlKGQsMSksYz0wLGU9dGhpcy5mYWNlVmVydGV4VXZzLmxlbmd0aDtjPGU7YysrKXRoaXMuZmFjZVZlcnRleFV2c1tjXS5zcGxpY2UoZCwxKTtmPXRoaXMudmVydGljZXMubGVuZ3RoLWIubGVuZ3RoO3RoaXMudmVydGljZXM9YjtyZXR1cm4gZn0sc2V0RnJvbVBvaW50czpmdW5jdGlvbihhKXt0aGlzLnZlcnRpY2VzPVtdO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9YVtiXTt0aGlzLnZlcnRpY2VzLnB1c2gobmV3IHAoZC54LGQueSxkLnp8fDApKX1yZXR1cm4gdGhpc30sc29ydEZhY2VzQnlNYXRlcmlhbEluZGV4OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZmFjZXMsXG4gICAgYj1hLmxlbmd0aCxjPTA7YzxiO2MrKylhW2NdLl9pZD1jO2Euc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLm1hdGVyaWFsSW5kZXgtYi5tYXRlcmlhbEluZGV4fSk7dmFyIGQ9dGhpcy5mYWNlVmVydGV4VXZzWzBdLGU9dGhpcy5mYWNlVmVydGV4VXZzWzFdLGYsZztkJiZkLmxlbmd0aD09PWImJihmPVtdKTtlJiZlLmxlbmd0aD09PWImJihnPVtdKTtmb3IoYz0wO2M8YjtjKyspe3ZhciBoPWFbY10uX2lkO2YmJmYucHVzaChkW2hdKTtnJiZnLnB1c2goZVtoXSl9ZiYmKHRoaXMuZmFjZVZlcnRleFV2c1swXT1mKTtnJiYodGhpcy5mYWNlVmVydGV4VXZzWzFdPWcpfSx0b0pTT046ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjKXtyZXR1cm4gYz9hfDE8PGI6YSZ+KDE8PGIpfWZ1bmN0aW9uIGIoYSl7dmFyIGI9YS54LnRvU3RyaW5nKCkrYS55LnRvU3RyaW5nKCkrYS56LnRvU3RyaW5nKCk7aWYodm9pZCAwIT09bVtiXSlyZXR1cm4gbVtiXTttW2JdPWsubGVuZ3RoLzM7ay5wdXNoKGEueCxcbiAgICBhLnksYS56KTtyZXR1cm4gbVtiXX1mdW5jdGlvbiBjKGEpe3ZhciBiPWEuci50b1N0cmluZygpK2EuZy50b1N0cmluZygpK2EuYi50b1N0cmluZygpO2lmKHZvaWQgMCE9PW5bYl0pcmV0dXJuIG5bYl07bltiXT1sLmxlbmd0aDtsLnB1c2goYS5nZXRIZXgoKSk7cmV0dXJuIG5bYl19ZnVuY3Rpb24gZChhKXt2YXIgYj1hLngudG9TdHJpbmcoKSthLnkudG9TdHJpbmcoKTtpZih2b2lkIDAhPT1yW2JdKXJldHVybiByW2JdO3JbYl09cC5sZW5ndGgvMjtwLnB1c2goYS54LGEueSk7cmV0dXJuIHJbYl19dmFyIGU9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOlwiR2VvbWV0cnlcIixnZW5lcmF0b3I6XCJHZW9tZXRyeS50b0pTT05cIn19O2UudXVpZD10aGlzLnV1aWQ7ZS50eXBlPXRoaXMudHlwZTtcIlwiIT09dGhpcy5uYW1lJiYoZS5uYW1lPXRoaXMubmFtZSk7aWYodm9pZCAwIT09dGhpcy5wYXJhbWV0ZXJzKXt2YXIgZj10aGlzLnBhcmFtZXRlcnMsZztmb3IoZyBpbiBmKXZvaWQgMCE9PWZbZ10mJlxuICAgIChlW2ddPWZbZ10pO3JldHVybiBlfWY9W107Zm9yKGc9MDtnPHRoaXMudmVydGljZXMubGVuZ3RoO2crKyl7dmFyIGg9dGhpcy52ZXJ0aWNlc1tnXTtmLnB1c2goaC54LGgueSxoLnopfXZhciBoPVtdLGs9W10sbT17fSxsPVtdLG49e30scD1bXSxyPXt9O2ZvcihnPTA7Zzx0aGlzLmZhY2VzLmxlbmd0aDtnKyspe3ZhciB0PXRoaXMuZmFjZXNbZ10sdj12b2lkIDAhPT10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1bZ10sdz0wPHQubm9ybWFsLmxlbmd0aCgpLHo9MDx0LnZlcnRleE5vcm1hbHMubGVuZ3RoLHk9MSE9PXQuY29sb3Iucnx8MSE9PXQuY29sb3IuZ3x8MSE9PXQuY29sb3IuYix4PTA8dC52ZXJ0ZXhDb2xvcnMubGVuZ3RoLEE9MCxBPWEoQSwwLDApLEE9YShBLDEsITApLEE9YShBLDIsITEpLEE9YShBLDMsdiksQT1hKEEsNCx3KSxBPWEoQSw1LHopLEE9YShBLDYseSksQT1hKEEsNyx4KTtoLnB1c2goQSk7aC5wdXNoKHQuYSx0LmIsdC5jKTtoLnB1c2godC5tYXRlcmlhbEluZGV4KTtcbiAgICB2JiYodj10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1bZ10saC5wdXNoKGQodlswXSksZCh2WzFdKSxkKHZbMl0pKSk7dyYmaC5wdXNoKGIodC5ub3JtYWwpKTt6JiYodz10LnZlcnRleE5vcm1hbHMsaC5wdXNoKGIod1swXSksYih3WzFdKSxiKHdbMl0pKSk7eSYmaC5wdXNoKGModC5jb2xvcikpO3gmJih0PXQudmVydGV4Q29sb3JzLGgucHVzaChjKHRbMF0pLGModFsxXSksYyh0WzJdKSkpfWUuZGF0YT17fTtlLmRhdGEudmVydGljZXM9ZjtlLmRhdGEubm9ybWFscz1rOzA8bC5sZW5ndGgmJihlLmRhdGEuY29sb3JzPWwpOzA8cC5sZW5ndGgmJihlLmRhdGEudXZzPVtwXSk7ZS5kYXRhLmZhY2VzPWg7cmV0dXJuIGV9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBMKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDt0aGlzLnZlcnRpY2VzPVtdO3RoaXMuY29sb3JzPVtdO3RoaXMuZmFjZXM9W107dGhpcy5mYWNlVmVydGV4VXZzPVtbXV07dGhpcy5tb3JwaFRhcmdldHM9XG4gICAgW107dGhpcy5tb3JwaE5vcm1hbHM9W107dGhpcy5za2luV2VpZ2h0cz1bXTt0aGlzLnNraW5JbmRpY2VzPVtdO3RoaXMubGluZURpc3RhbmNlcz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLm5hbWU9YS5uYW1lO3ZhciBlPWEudmVydGljZXM7dmFyIGY9MDtmb3IoYj1lLmxlbmd0aDtmPGI7ZisrKXRoaXMudmVydGljZXMucHVzaChlW2ZdLmNsb25lKCkpO2U9YS5jb2xvcnM7Zj0wO2ZvcihiPWUubGVuZ3RoO2Y8YjtmKyspdGhpcy5jb2xvcnMucHVzaChlW2ZdLmNsb25lKCkpO2U9YS5mYWNlcztmPTA7Zm9yKGI9ZS5sZW5ndGg7ZjxiO2YrKyl0aGlzLmZhY2VzLnB1c2goZVtmXS5jbG9uZSgpKTtmPTA7Zm9yKGI9YS5mYWNlVmVydGV4VXZzLmxlbmd0aDtmPGI7ZisrKXt2YXIgZz1hLmZhY2VWZXJ0ZXhVdnNbZl07dm9pZCAwPT09dGhpcy5mYWNlVmVydGV4VXZzW2ZdJiYodGhpcy5mYWNlVmVydGV4VXZzW2ZdPVtdKTtlPTA7Zm9yKGM9Zy5sZW5ndGg7ZTxcbiAgICBjO2UrKyl7dmFyIGg9Z1tlXSxrPVtdO3ZhciBtPTA7Zm9yKGQ9aC5sZW5ndGg7bTxkO20rKylrLnB1c2goaFttXS5jbG9uZSgpKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbZl0ucHVzaChrKX19bT1hLm1vcnBoVGFyZ2V0cztmPTA7Zm9yKGI9bS5sZW5ndGg7ZjxiO2YrKyl7ZD17fTtkLm5hbWU9bVtmXS5uYW1lO2lmKHZvaWQgMCE9PW1bZl0udmVydGljZXMpZm9yKGQudmVydGljZXM9W10sZT0wLGM9bVtmXS52ZXJ0aWNlcy5sZW5ndGg7ZTxjO2UrKylkLnZlcnRpY2VzLnB1c2gobVtmXS52ZXJ0aWNlc1tlXS5jbG9uZSgpKTtpZih2b2lkIDAhPT1tW2ZdLm5vcm1hbHMpZm9yKGQubm9ybWFscz1bXSxlPTAsYz1tW2ZdLm5vcm1hbHMubGVuZ3RoO2U8YztlKyspZC5ub3JtYWxzLnB1c2gobVtmXS5ub3JtYWxzW2VdLmNsb25lKCkpO3RoaXMubW9ycGhUYXJnZXRzLnB1c2goZCl9bT1hLm1vcnBoTm9ybWFscztmPTA7Zm9yKGI9bS5sZW5ndGg7ZjxiO2YrKyl7ZD17fTtpZih2b2lkIDAhPT1tW2ZdLnZlcnRleE5vcm1hbHMpZm9yKGQudmVydGV4Tm9ybWFscz1cbiAgICBbXSxlPTAsYz1tW2ZdLnZlcnRleE5vcm1hbHMubGVuZ3RoO2U8YztlKyspZz1tW2ZdLnZlcnRleE5vcm1hbHNbZV0saD17fSxoLmE9Zy5hLmNsb25lKCksaC5iPWcuYi5jbG9uZSgpLGguYz1nLmMuY2xvbmUoKSxkLnZlcnRleE5vcm1hbHMucHVzaChoKTtpZih2b2lkIDAhPT1tW2ZdLmZhY2VOb3JtYWxzKWZvcihkLmZhY2VOb3JtYWxzPVtdLGU9MCxjPW1bZl0uZmFjZU5vcm1hbHMubGVuZ3RoO2U8YztlKyspZC5mYWNlTm9ybWFscy5wdXNoKG1bZl0uZmFjZU5vcm1hbHNbZV0uY2xvbmUoKSk7dGhpcy5tb3JwaE5vcm1hbHMucHVzaChkKX1lPWEuc2tpbldlaWdodHM7Zj0wO2ZvcihiPWUubGVuZ3RoO2Y8YjtmKyspdGhpcy5za2luV2VpZ2h0cy5wdXNoKGVbZl0uY2xvbmUoKSk7ZT1hLnNraW5JbmRpY2VzO2Y9MDtmb3IoYj1lLmxlbmd0aDtmPGI7ZisrKXRoaXMuc2tpbkluZGljZXMucHVzaChlW2ZdLmNsb25lKCkpO2U9YS5saW5lRGlzdGFuY2VzO2Y9MDtmb3IoYj1lLmxlbmd0aDtmPFxuICAgIGI7ZisrKXRoaXMubGluZURpc3RhbmNlcy5wdXNoKGVbZl0pO2Y9YS5ib3VuZGluZ0JveDtudWxsIT09ZiYmKHRoaXMuYm91bmRpbmdCb3g9Zi5jbG9uZSgpKTtmPWEuYm91bmRpbmdTcGhlcmU7bnVsbCE9PWYmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWYuY2xvbmUoKSk7dGhpcy5lbGVtZW50c05lZWRVcGRhdGU9YS5lbGVtZW50c05lZWRVcGRhdGU7dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9YS52ZXJ0aWNlc05lZWRVcGRhdGU7dGhpcy51dnNOZWVkVXBkYXRlPWEudXZzTmVlZFVwZGF0ZTt0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPWEubm9ybWFsc05lZWRVcGRhdGU7dGhpcy5jb2xvcnNOZWVkVXBkYXRlPWEuY29sb3JzTmVlZFVwZGF0ZTt0aGlzLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPWEubGluZURpc3RhbmNlc05lZWRVcGRhdGU7dGhpcy5ncm91cHNOZWVkVXBkYXRlPWEuZ3JvdXBzTmVlZFVwZGF0ZTtyZXR1cm4gdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNLnByb3RvdHlwZSxcIm5lZWRzVXBkYXRlXCIse3NldDpmdW5jdGlvbihhKXshMD09PWEmJnRoaXMudmVyc2lvbisrfX0pO09iamVjdC5hc3NpZ24oTS5wcm90b3R5cGUse2lzQnVmZmVyQXR0cmlidXRlOiEwLHNldEFycmF5OmZ1bmN0aW9uKGEpe2lmKEFycmF5LmlzQXJyYXkoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogYXJyYXkgc2hvdWxkIGJlIGEgVHlwZWQgQXJyYXkuXCIpO3RoaXMuY291bnQ9dm9pZCAwIT09YT9hLmxlbmd0aC90aGlzLml0ZW1TaXplOjA7dGhpcy5hcnJheT1hfSxzZXREeW5hbWljOmZ1bmN0aW9uKGEpe3RoaXMuZHluYW1pYz1hO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYXJyYXk9bmV3IGEuYXJyYXkuY29uc3RydWN0b3IoYS5hcnJheSk7dGhpcy5pdGVtU2l6ZT1hLml0ZW1TaXplO3RoaXMuY291bnQ9YS5jb3VudDt0aGlzLm5vcm1hbGl6ZWQ9YS5ub3JtYWxpemVkO1xuICAgIHRoaXMuZHluYW1pYz1hLmR5bmFtaWM7cmV0dXJuIHRoaXN9LGNvcHlBdDpmdW5jdGlvbihhLGIsYyl7YSo9dGhpcy5pdGVtU2l6ZTtjKj1iLml0ZW1TaXplO2Zvcih2YXIgZD0wLGU9dGhpcy5pdGVtU2l6ZTtkPGU7ZCsrKXRoaXMuYXJyYXlbYStkXT1iLmFycmF5W2MrZF07cmV0dXJuIHRoaXN9LGNvcHlBcnJheTpmdW5jdGlvbihhKXt0aGlzLmFycmF5LnNldChhKTtyZXR1cm4gdGhpc30sY29weUNvbG9yc0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO3ZvaWQgMD09PWYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weUNvbG9yc0FycmF5KCk6IGNvbG9yIGlzIHVuZGVmaW5lZFwiLGQpLGY9bmV3IEgpO2JbYysrXT1mLnI7YltjKytdPWYuZztiW2MrK109Zi5ifXJldHVybiB0aGlzfSxjb3B5SW5kaWNlc0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LFxuICAgIGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO2JbYysrXT1mLmE7YltjKytdPWYuYjtiW2MrK109Zi5jfXJldHVybiB0aGlzfSxjb3B5VmVjdG9yMnNBcnJheTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5hcnJheSxjPTAsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXTt2b2lkIDA9PT1mJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3Iyc0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixkKSxmPW5ldyBEKTtiW2MrK109Zi54O2JbYysrXT1mLnl9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3Izc0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO3ZvaWQgMD09PWYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjNzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLGQpLGY9bmV3IHApO1xuICAgIGJbYysrXT1mLng7YltjKytdPWYueTtiW2MrK109Zi56fXJldHVybiB0aGlzfSxjb3B5VmVjdG9yNHNBcnJheTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5hcnJheSxjPTAsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXTt2b2lkIDA9PT1mJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3I0c0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixkKSxmPW5ldyBhYSk7YltjKytdPWYueDtiW2MrK109Zi55O2JbYysrXT1mLno7YltjKytdPWYud31yZXR1cm4gdGhpc30sc2V0OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy5hcnJheS5zZXQoYSxiKTtyZXR1cm4gdGhpc30sZ2V0WDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemVdfSxzZXRYOmZ1bmN0aW9uKGEsYil7dGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemVdPWI7cmV0dXJuIHRoaXN9LGdldFk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXJyYXlbYSpcbiAgICB0aGlzLml0ZW1TaXplKzFdfSxzZXRZOmZ1bmN0aW9uKGEsYil7dGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemUrMV09YjtyZXR1cm4gdGhpc30sZ2V0WjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemUrMl19LHNldFo6ZnVuY3Rpb24oYSxiKXt0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZSsyXT1iO3JldHVybiB0aGlzfSxnZXRXOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZSszXX0sc2V0VzpmdW5jdGlvbihhLGIpe3RoaXMuYXJyYXlbYSp0aGlzLml0ZW1TaXplKzNdPWI7cmV0dXJuIHRoaXN9LHNldFhZOmZ1bmN0aW9uKGEsYixjKXthKj10aGlzLml0ZW1TaXplO3RoaXMuYXJyYXlbYSswXT1iO3RoaXMuYXJyYXlbYSsxXT1jO3JldHVybiB0aGlzfSxzZXRYWVo6ZnVuY3Rpb24oYSxiLGMsZCl7YSo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2ErMF09Yjt0aGlzLmFycmF5W2ErMV09Yzt0aGlzLmFycmF5W2ErMl09XG4gICAgZDtyZXR1cm4gdGhpc30sc2V0WFlaVzpmdW5jdGlvbihhLGIsYyxkLGUpe2EqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVthKzBdPWI7dGhpcy5hcnJheVthKzFdPWM7dGhpcy5hcnJheVthKzJdPWQ7dGhpcy5hcnJheVthKzNdPWU7cmV0dXJuIHRoaXN9LG9uVXBsb2FkOmZ1bmN0aW9uKGEpe3RoaXMub25VcGxvYWRDYWxsYmFjaz1hO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmFycmF5LHRoaXMuaXRlbVNpemUpKS5jb3B5KHRoaXMpfX0pO3VjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTt1Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9dWM7dmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpO3ZjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj12Yzt3Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNLnByb3RvdHlwZSk7d2MucHJvdG90eXBlLmNvbnN0cnVjdG9yPXdjO3hjLnByb3RvdHlwZT1cbiAgICBPYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTt4Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9eGM7b2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpO29iLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1vYjt5Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNLnByb3RvdHlwZSk7eWMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXljO3BiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTtwYi5wcm90b3R5cGUuY29uc3RydWN0b3I9cGI7Qi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNLnByb3RvdHlwZSk7Qi5wcm90b3R5cGUuY29uc3RydWN0b3I9Qjt6Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNLnByb3RvdHlwZSk7emMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXpjO09iamVjdC5hc3NpZ24oVmUucHJvdG90eXBlLHtjb21wdXRlR3JvdXBzOmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dm9pZCAwO2E9YS5mYWNlcztmb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9XG4gICAgYVtkXTtpZihlLm1hdGVyaWFsSW5kZXghPT1jKXtjPWUubWF0ZXJpYWxJbmRleDt2b2lkIDAhPT1mJiYoZi5jb3VudD0zKmQtZi5zdGFydCxiLnB1c2goZikpO3ZhciBmPXtzdGFydDozKmQsbWF0ZXJpYWxJbmRleDpjfX19dm9pZCAwIT09ZiYmKGYuY291bnQ9MypkLWYuc3RhcnQsYi5wdXNoKGYpKTt0aGlzLmdyb3Vwcz1ifSxmcm9tR2VvbWV0cnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mYWNlcyxjPWEudmVydGljZXMsZD1hLmZhY2VWZXJ0ZXhVdnMsZT1kWzBdJiYwPGRbMF0ubGVuZ3RoLGY9ZFsxXSYmMDxkWzFdLmxlbmd0aCxnPWEubW9ycGhUYXJnZXRzLGg9Zy5sZW5ndGg7aWYoMDxoKXt2YXIgaz1bXTtmb3IodmFyIG09MDttPGg7bSsrKWtbbV09W107dGhpcy5tb3JwaFRhcmdldHMucG9zaXRpb249a312YXIgbD1hLm1vcnBoTm9ybWFscyxuPWwubGVuZ3RoO2lmKDA8bil7dmFyIHA9W107Zm9yKG09MDttPG47bSsrKXBbbV09W107dGhpcy5tb3JwaFRhcmdldHMubm9ybWFsPXB9Zm9yKHZhciByPVxuICAgIGEuc2tpbkluZGljZXMsdD1hLnNraW5XZWlnaHRzLHY9ci5sZW5ndGg9PT1jLmxlbmd0aCx3PXQubGVuZ3RoPT09Yy5sZW5ndGgsbT0wO208Yi5sZW5ndGg7bSsrKXt2YXIgej1iW21dO3RoaXMudmVydGljZXMucHVzaChjW3ouYV0sY1t6LmJdLGNbei5jXSk7dmFyIHk9ei52ZXJ0ZXhOb3JtYWxzOzM9PT15Lmxlbmd0aD90aGlzLm5vcm1hbHMucHVzaCh5WzBdLHlbMV0seVsyXSk6KHk9ei5ub3JtYWwsdGhpcy5ub3JtYWxzLnB1c2goeSx5LHkpKTt5PXoudmVydGV4Q29sb3JzOzM9PT15Lmxlbmd0aD90aGlzLmNvbG9ycy5wdXNoKHlbMF0seVsxXSx5WzJdKTooeT16LmNvbG9yLHRoaXMuY29sb3JzLnB1c2goeSx5LHkpKTshMD09PWUmJih5PWRbMF1bbV0sdm9pZCAwIT09eT90aGlzLnV2cy5wdXNoKHlbMF0seVsxXSx5WzJdKTooY29uc29sZS53YXJuKFwiVEhSRUUuRGlyZWN0R2VvbWV0cnkuZnJvbUdlb21ldHJ5KCk6IFVuZGVmaW5lZCB2ZXJ0ZXhVdiBcIixtKSx0aGlzLnV2cy5wdXNoKG5ldyBELFxuICAgIG5ldyBELG5ldyBEKSkpOyEwPT09ZiYmKHk9ZFsxXVttXSx2b2lkIDAhPT15P3RoaXMudXZzMi5wdXNoKHlbMF0seVsxXSx5WzJdKTooY29uc29sZS53YXJuKFwiVEhSRUUuRGlyZWN0R2VvbWV0cnkuZnJvbUdlb21ldHJ5KCk6IFVuZGVmaW5lZCB2ZXJ0ZXhVdjIgXCIsbSksdGhpcy51dnMyLnB1c2gobmV3IEQsbmV3IEQsbmV3IEQpKSk7Zm9yKHk9MDt5PGg7eSsrKXt2YXIgeD1nW3ldLnZlcnRpY2VzO2tbeV0ucHVzaCh4W3ouYV0seFt6LmJdLHhbei5jXSl9Zm9yKHk9MDt5PG47eSsrKXg9bFt5XS52ZXJ0ZXhOb3JtYWxzW21dLHBbeV0ucHVzaCh4LmEseC5iLHguYyk7diYmdGhpcy5za2luSW5kaWNlcy5wdXNoKHJbei5hXSxyW3ouYl0sclt6LmNdKTt3JiZ0aGlzLnNraW5XZWlnaHRzLnB1c2godFt6LmFdLHRbei5iXSx0W3ouY10pfXRoaXMuY29tcHV0ZUdyb3VwcyhhKTt0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT1hLnZlcnRpY2VzTmVlZFVwZGF0ZTt0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPVxuICAgIGEubm9ybWFsc05lZWRVcGRhdGU7dGhpcy5jb2xvcnNOZWVkVXBkYXRlPWEuY29sb3JzTmVlZFVwZGF0ZTt0aGlzLnV2c05lZWRVcGRhdGU9YS51dnNOZWVkVXBkYXRlO3RoaXMuZ3JvdXBzTmVlZFVwZGF0ZT1hLmdyb3Vwc05lZWRVcGRhdGU7cmV0dXJuIHRoaXN9fSk7dmFyIGVnPTE7RS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHphLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkUsaXNCdWZmZXJHZW9tZXRyeTohMCxnZXRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4fSxzZXRJbmRleDpmdW5jdGlvbihhKXtBcnJheS5pc0FycmF5KGEpP3RoaXMuaW5kZXg9bmV3ICg2NTUzNTxYZChhKT9wYjpvYikoYSwxKTp0aGlzLmluZGV4PWF9LGFkZEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7aWYoYiYmYi5pc0J1ZmZlckF0dHJpYnV0ZXx8YiYmYi5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKWlmKFwiaW5kZXhcIj09PWEpY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkuYWRkQXR0cmlidXRlOiBVc2UgLnNldEluZGV4KCkgZm9yIGluZGV4IGF0dHJpYnV0ZS5cIiksXG4gICAgdGhpcy5zZXRJbmRleChiKTtlbHNlIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYV09Yix0aGlzO2Vsc2UgY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGRBdHRyaWJ1dGUoKSBub3cgZXhwZWN0cyAoIG5hbWUsIGF0dHJpYnV0ZSApLlwiKSx0aGlzLmFkZEF0dHJpYnV0ZShhLG5ldyBNKGIsYykpfSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLmF0dHJpYnV0ZXNbYV07cmV0dXJuIHRoaXN9LGFkZEdyb3VwOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmdyb3Vwcy5wdXNoKHtzdGFydDphLGNvdW50OmIsbWF0ZXJpYWxJbmRleDp2b2lkIDAhPT1jP2M6MH0pfSxjbGVhckdyb3VwczpmdW5jdGlvbigpe3RoaXMuZ3JvdXBzPVtdfSxzZXREcmF3UmFuZ2U6ZnVuY3Rpb24oYSxiKXt0aGlzLmRyYXdSYW5nZS5zdGFydD1hO3RoaXMuZHJhd1JhbmdlLmNvdW50PWJ9LFxuICAgIGFwcGx5TWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjt2b2lkIDAhPT1iJiYoYS5hcHBseVRvQnVmZmVyQXR0cmlidXRlKGIpLGIubmVlZHNVcGRhdGU9ITApO2I9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbDt2b2lkIDAhPT1iJiYoKG5ldyBtYSkuZ2V0Tm9ybWFsTWF0cml4KGEpLmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUoYiksYi5uZWVkc1VwZGF0ZT0hMCk7bnVsbCE9PXRoaXMuYm91bmRpbmdCb3gmJnRoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7bnVsbCE9PXRoaXMuYm91bmRpbmdTcGhlcmUmJnRoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7cmV0dXJuIHRoaXN9LHJvdGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYil7YS5tYWtlUm90YXRpb25YKGIpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHJvdGF0ZVk6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYil7YS5tYWtlUm90YXRpb25ZKGIpO1xuICAgIHRoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYil7YS5tYWtlUm90YXRpb25aKGIpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiLGMsZCl7YS5tYWtlVHJhbnNsYXRpb24oYixjLGQpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHNjYWxlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXthLm1ha2VTY2FsZShiLGMsZCk7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksbG9va0F0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHg7cmV0dXJuIGZ1bmN0aW9uKGIpe2EubG9va0F0KGIpO2EudXBkYXRlTWF0cml4KCk7dGhpcy5hcHBseU1hdHJpeChhLm1hdHJpeCl9fSgpLGNlbnRlcjpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7XG4gICAgdmFyIGE9dGhpcy5ib3VuZGluZ0JveC5nZXRDZW50ZXIoKS5uZWdhdGUoKTt0aGlzLnRyYW5zbGF0ZShhLngsYS55LGEueik7cmV0dXJuIGF9LHNldEZyb21PYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZW9tZXRyeTtpZihhLmlzUG9pbnRzfHxhLmlzTGluZSl7YT1uZXcgQigzKmIudmVydGljZXMubGVuZ3RoLDMpO3ZhciBjPW5ldyBCKDMqYi5jb2xvcnMubGVuZ3RoLDMpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixhLmNvcHlWZWN0b3Izc0FycmF5KGIudmVydGljZXMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsYy5jb3B5Q29sb3JzQXJyYXkoYi5jb2xvcnMpKTtiLmxpbmVEaXN0YW5jZXMmJmIubGluZURpc3RhbmNlcy5sZW5ndGg9PT1iLnZlcnRpY2VzLmxlbmd0aCYmKGE9bmV3IEIoYi5saW5lRGlzdGFuY2VzLmxlbmd0aCwxKSx0aGlzLmFkZEF0dHJpYnV0ZShcImxpbmVEaXN0YW5jZVwiLGEuY29weUFycmF5KGIubGluZURpc3RhbmNlcykpKTtudWxsIT09Yi5ib3VuZGluZ1NwaGVyZSYmXG4gICAgKHRoaXMuYm91bmRpbmdTcGhlcmU9Yi5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKTtudWxsIT09Yi5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9Yi5ib3VuZGluZ0JveC5jbG9uZSgpKX1lbHNlIGEuaXNNZXNoJiZiJiZiLmlzR2VvbWV0cnkmJnRoaXMuZnJvbUdlb21ldHJ5KGIpO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT1hW2NdO2IucHVzaChlLngsZS55LGUuenx8MCl9dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGIsMykpO3JldHVybiB0aGlzfSx1cGRhdGVGcm9tT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2VvbWV0cnk7aWYoYS5pc01lc2gpe3ZhciBjPWIuX19kaXJlY3RHZW9tZXRyeTshMD09PWIuZWxlbWVudHNOZWVkVXBkYXRlJiYoYz12b2lkIDAsYi5lbGVtZW50c05lZWRVcGRhdGU9ITEpO2lmKHZvaWQgMD09PWMpcmV0dXJuIHRoaXMuZnJvbUdlb21ldHJ5KGIpO1xuICAgIGMudmVydGljZXNOZWVkVXBkYXRlPWIudmVydGljZXNOZWVkVXBkYXRlO2Mubm9ybWFsc05lZWRVcGRhdGU9Yi5ub3JtYWxzTmVlZFVwZGF0ZTtjLmNvbG9yc05lZWRVcGRhdGU9Yi5jb2xvcnNOZWVkVXBkYXRlO2MudXZzTmVlZFVwZGF0ZT1iLnV2c05lZWRVcGRhdGU7Yy5ncm91cHNOZWVkVXBkYXRlPWIuZ3JvdXBzTmVlZFVwZGF0ZTtiLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMTtiLm5vcm1hbHNOZWVkVXBkYXRlPSExO2IuY29sb3JzTmVlZFVwZGF0ZT0hMTtiLnV2c05lZWRVcGRhdGU9ITE7Yi5ncm91cHNOZWVkVXBkYXRlPSExO2I9Y30hMD09PWIudmVydGljZXNOZWVkVXBkYXRlJiYoYz10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24sdm9pZCAwIT09YyYmKGMuY29weVZlY3RvcjNzQXJyYXkoYi52ZXJ0aWNlcyksYy5uZWVkc1VwZGF0ZT0hMCksYi52ZXJ0aWNlc05lZWRVcGRhdGU9ITEpOyEwPT09Yi5ub3JtYWxzTmVlZFVwZGF0ZSYmKGM9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbCx2b2lkIDAhPT1cbiAgICBjJiYoYy5jb3B5VmVjdG9yM3NBcnJheShiLm5vcm1hbHMpLGMubmVlZHNVcGRhdGU9ITApLGIubm9ybWFsc05lZWRVcGRhdGU9ITEpOyEwPT09Yi5jb2xvcnNOZWVkVXBkYXRlJiYoYz10aGlzLmF0dHJpYnV0ZXMuY29sb3Isdm9pZCAwIT09YyYmKGMuY29weUNvbG9yc0FycmF5KGIuY29sb3JzKSxjLm5lZWRzVXBkYXRlPSEwKSxiLmNvbG9yc05lZWRVcGRhdGU9ITEpO2IudXZzTmVlZFVwZGF0ZSYmKGM9dGhpcy5hdHRyaWJ1dGVzLnV2LHZvaWQgMCE9PWMmJihjLmNvcHlWZWN0b3Iyc0FycmF5KGIudXZzKSxjLm5lZWRzVXBkYXRlPSEwKSxiLnV2c05lZWRVcGRhdGU9ITEpO2IubGluZURpc3RhbmNlc05lZWRVcGRhdGUmJihjPXRoaXMuYXR0cmlidXRlcy5saW5lRGlzdGFuY2Usdm9pZCAwIT09YyYmKGMuY29weUFycmF5KGIubGluZURpc3RhbmNlcyksYy5uZWVkc1VwZGF0ZT0hMCksYi5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT0hMSk7Yi5ncm91cHNOZWVkVXBkYXRlJiYoYi5jb21wdXRlR3JvdXBzKGEuZ2VvbWV0cnkpLFxuICAgIHRoaXMuZ3JvdXBzPWIuZ3JvdXBzLGIuZ3JvdXBzTmVlZFVwZGF0ZT0hMSk7cmV0dXJuIHRoaXN9LGZyb21HZW9tZXRyeTpmdW5jdGlvbihhKXthLl9fZGlyZWN0R2VvbWV0cnk9KG5ldyBWZSkuZnJvbUdlb21ldHJ5KGEpO3JldHVybiB0aGlzLmZyb21EaXJlY3RHZW9tZXRyeShhLl9fZGlyZWN0R2VvbWV0cnkpfSxmcm9tRGlyZWN0R2VvbWV0cnk6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEZsb2F0MzJBcnJheSgzKmEudmVydGljZXMubGVuZ3RoKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsKG5ldyBNKGIsMykpLmNvcHlWZWN0b3Izc0FycmF5KGEudmVydGljZXMpKTswPGEubm9ybWFscy5sZW5ndGgmJihiPW5ldyBGbG9hdDMyQXJyYXkoMyphLm5vcm1hbHMubGVuZ3RoKSx0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLChuZXcgTShiLDMpKS5jb3B5VmVjdG9yM3NBcnJheShhLm5vcm1hbHMpKSk7MDxhLmNvbG9ycy5sZW5ndGgmJihiPW5ldyBGbG9hdDMyQXJyYXkoMyphLmNvbG9ycy5sZW5ndGgpLFxuICAgIHRoaXMuYWRkQXR0cmlidXRlKFwiY29sb3JcIiwobmV3IE0oYiwzKSkuY29weUNvbG9yc0FycmF5KGEuY29sb3JzKSkpOzA8YS51dnMubGVuZ3RoJiYoYj1uZXcgRmxvYXQzMkFycmF5KDIqYS51dnMubGVuZ3RoKSx0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsKG5ldyBNKGIsMikpLmNvcHlWZWN0b3Iyc0FycmF5KGEudXZzKSkpOzA8YS51dnMyLmxlbmd0aCYmKGI9bmV3IEZsb2F0MzJBcnJheSgyKmEudXZzMi5sZW5ndGgpLHRoaXMuYWRkQXR0cmlidXRlKFwidXYyXCIsKG5ldyBNKGIsMikpLmNvcHlWZWN0b3Iyc0FycmF5KGEudXZzMikpKTswPGEuaW5kaWNlcy5sZW5ndGgmJihiPW5ldyAoNjU1MzU8WGQoYS5pbmRpY2VzKT9VaW50MzJBcnJheTpVaW50MTZBcnJheSkoMyphLmluZGljZXMubGVuZ3RoKSx0aGlzLnNldEluZGV4KChuZXcgTShiLDEpKS5jb3B5SW5kaWNlc0FycmF5KGEuaW5kaWNlcykpKTt0aGlzLmdyb3Vwcz1hLmdyb3Vwcztmb3IodmFyIGMgaW4gYS5tb3JwaFRhcmdldHMpe2Zvcih2YXIgYj1cbiAgICBbXSxkPWEubW9ycGhUYXJnZXRzW2NdLGU9MCxmPWQubGVuZ3RoO2U8ZjtlKyspe3ZhciBnPWRbZV0saD1uZXcgQigzKmcubGVuZ3RoLDMpO2IucHVzaChoLmNvcHlWZWN0b3Izc0FycmF5KGcpKX10aGlzLm1vcnBoQXR0cmlidXRlc1tjXT1ifTA8YS5za2luSW5kaWNlcy5sZW5ndGgmJihjPW5ldyBCKDQqYS5za2luSW5kaWNlcy5sZW5ndGgsNCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJza2luSW5kZXhcIixjLmNvcHlWZWN0b3I0c0FycmF5KGEuc2tpbkluZGljZXMpKSk7MDxhLnNraW5XZWlnaHRzLmxlbmd0aCYmKGM9bmV3IEIoNCphLnNraW5XZWlnaHRzLmxlbmd0aCw0KSx0aGlzLmFkZEF0dHJpYnV0ZShcInNraW5XZWlnaHRcIixjLmNvcHlWZWN0b3I0c0FycmF5KGEuc2tpbldlaWdodHMpKSk7bnVsbCE9PWEuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWEuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSk7bnVsbCE9PWEuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PVxuICAgIGEuYm91bmRpbmdCb3guY2xvbmUoKSk7cmV0dXJuIHRoaXN9LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1uZXcgWGEpO3ZhciBhPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjt2b2lkIDAhPT1hP3RoaXMuYm91bmRpbmdCb3guc2V0RnJvbUJ1ZmZlckF0dHJpYnV0ZShhKTp0aGlzLmJvdW5kaW5nQm94Lm1ha2VFbXB0eSgpOyhpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi54KXx8aXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueSl8fGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLnopKSYmY29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94OiBDb21wdXRlZCBtaW4vbWF4IGhhdmUgTmFOIHZhbHVlcy4gVGhlIFwicG9zaXRpb25cIiBhdHRyaWJ1dGUgaXMgbGlrZWx5IHRvIGhhdmUgTmFOIHZhbHVlcy4nLHRoaXMpfSxjb21wdXRlQm91bmRpbmdTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgYT1cbiAgICBuZXcgWGEsYj1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9bmV3IElhKTt2YXIgYz10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb247aWYoYyl7dmFyIGQ9dGhpcy5ib3VuZGluZ1NwaGVyZS5jZW50ZXI7YS5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKGMpO2EuZ2V0Q2VudGVyKGQpO2Zvcih2YXIgZT0wLGY9MCxnPWMuY291bnQ7ZjxnO2YrKyliLng9Yy5nZXRYKGYpLGIueT1jLmdldFkoZiksYi56PWMuZ2V0WihmKSxlPU1hdGgubWF4KGUsZC5kaXN0YW5jZVRvU3F1YXJlZChiKSk7dGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXM9TWF0aC5zcXJ0KGUpO2lzTmFOKHRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzKSYmY29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk6IENvbXB1dGVkIHJhZGl1cyBpcyBOYU4uIFRoZSBcInBvc2l0aW9uXCIgYXR0cmlidXRlIGlzIGxpa2VseSB0byBoYXZlIE5hTiB2YWx1ZXMuJyxcbiAgICB0aGlzKX19fSgpLGNvbXB1dGVGYWNlTm9ybWFsczpmdW5jdGlvbigpe30sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmluZGV4LGI9dGhpcy5hdHRyaWJ1dGVzLGM9dGhpcy5ncm91cHM7aWYoYi5wb3NpdGlvbil7dmFyIGQ9Yi5wb3NpdGlvbi5hcnJheTtpZih2b2lkIDA9PT1iLm5vcm1hbCl0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBNKG5ldyBGbG9hdDMyQXJyYXkoZC5sZW5ndGgpLDMpKTtlbHNlIGZvcih2YXIgZT1iLm5vcm1hbC5hcnJheSxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKWVbZl09MDt2YXIgZT1iLm5vcm1hbC5hcnJheSxoPW5ldyBwLGs9bmV3IHAsbT1uZXcgcCxsPW5ldyBwLG49bmV3IHA7aWYoYSl7YT1hLmFycmF5OzA9PT1jLmxlbmd0aCYmdGhpcy5hZGRHcm91cCgwLGEubGVuZ3RoKTtmb3IodmFyIHU9MCxyPWMubGVuZ3RoO3U8cjsrK3Upe2Y9Y1t1XTtnPWYuc3RhcnQ7dmFyIHQ9Zi5jb3VudDtmPWc7Zm9yKGcrPXQ7ZjxcbiAgICBnO2YrPTMpe3Q9MyphW2YrMF07dmFyIHY9MyphW2YrMV07dmFyIHc9MyphW2YrMl07aC5mcm9tQXJyYXkoZCx0KTtrLmZyb21BcnJheShkLHYpO20uZnJvbUFycmF5KGQsdyk7bC5zdWJWZWN0b3JzKG0sayk7bi5zdWJWZWN0b3JzKGgsayk7bC5jcm9zcyhuKTtlW3RdKz1sLng7ZVt0KzFdKz1sLnk7ZVt0KzJdKz1sLno7ZVt2XSs9bC54O2VbdisxXSs9bC55O2VbdisyXSs9bC56O2Vbd10rPWwueDtlW3crMV0rPWwueTtlW3crMl0rPWwuen19fWVsc2UgZm9yKGY9MCxnPWQubGVuZ3RoO2Y8ZztmKz05KWguZnJvbUFycmF5KGQsZiksay5mcm9tQXJyYXkoZCxmKzMpLG0uZnJvbUFycmF5KGQsZis2KSxsLnN1YlZlY3RvcnMobSxrKSxuLnN1YlZlY3RvcnMoaCxrKSxsLmNyb3NzKG4pLGVbZl09bC54LGVbZisxXT1sLnksZVtmKzJdPWwueixlW2YrM109bC54LGVbZis0XT1sLnksZVtmKzVdPWwueixlW2YrNl09bC54LGVbZis3XT1sLnksZVtmKzhdPWwuejt0aGlzLm5vcm1hbGl6ZU5vcm1hbHMoKTtcbiAgICBiLm5vcm1hbC5uZWVkc1VwZGF0ZT0hMH19LG1lcmdlOmZ1bmN0aW9uKGEsYil7aWYoYSYmYS5pc0J1ZmZlckdlb21ldHJ5KXt2b2lkIDA9PT1iJiYoYj0wKTt2YXIgYz10aGlzLmF0dHJpYnV0ZXMsZDtmb3IoZCBpbiBjKWlmKHZvaWQgMCE9PWEuYXR0cmlidXRlc1tkXSlmb3IodmFyIGU9Y1tkXS5hcnJheSxmPWEuYXR0cmlidXRlc1tkXSxnPWYuYXJyYXksaD0wLGY9Zi5pdGVtU2l6ZSpiO2g8Zy5sZW5ndGg7aCsrLGYrKyllW2ZdPWdbaF07cmV0dXJuIHRoaXN9Y29uc29sZS5lcnJvcihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5Lm1lcmdlKCk6IGdlb21ldHJ5IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeS5cIixhKX0sbm9ybWFsaXplTm9ybWFsczpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgYj10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLGM9MCxkPWIuY291bnQ7YzxkO2MrKylhLng9Yi5nZXRYKGMpLGEueT1iLmdldFkoYyksXG4gICAgYS56PWIuZ2V0WihjKSxhLm5vcm1hbGl6ZSgpLGIuc2V0WFlaKGMsYS54LGEueSxhLnopfX0oKSx0b05vbkluZGV4ZWQ6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5pbmRleClyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkudG9Ob25JbmRleGVkKCk6IEdlb21ldHJ5IGlzIGFscmVhZHkgbm9uLWluZGV4ZWQuXCIpLHRoaXM7dmFyIGE9bmV3IEUsYj10aGlzLmluZGV4LmFycmF5LGM9dGhpcy5hdHRyaWJ1dGVzLGQ7Zm9yKGQgaW4gYyl7Zm9yKHZhciBlPWNbZF0sZj1lLmFycmF5LGU9ZS5pdGVtU2l6ZSxnPW5ldyBmLmNvbnN0cnVjdG9yKGIubGVuZ3RoKmUpLGgsaz0wLG09MCxsPWIubGVuZ3RoO208bDttKyspe2g9YlttXSplO2Zvcih2YXIgbj0wO248ZTtuKyspZ1trKytdPWZbaCsrXX1hLmFkZEF0dHJpYnV0ZShkLG5ldyBNKGcsZSkpfXJldHVybiBhfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgYT17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJCdWZmZXJHZW9tZXRyeVwiLFxuICAgIGdlbmVyYXRvcjpcIkJ1ZmZlckdlb21ldHJ5LnRvSlNPTlwifX07YS51dWlkPXRoaXMudXVpZDthLnR5cGU9dGhpcy50eXBlO1wiXCIhPT10aGlzLm5hbWUmJihhLm5hbWU9dGhpcy5uYW1lKTtpZih2b2lkIDAhPT10aGlzLnBhcmFtZXRlcnMpe3ZhciBiPXRoaXMucGFyYW1ldGVycztmb3IodmFyIGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoYVtjXT1iW2NdKTtyZXR1cm4gYX1hLmRhdGE9e2F0dHJpYnV0ZXM6e319O3ZhciBkPXRoaXMuaW5kZXg7bnVsbCE9PWQmJihiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGQuYXJyYXkpLGEuZGF0YS5pbmRleD17dHlwZTpkLmFycmF5LmNvbnN0cnVjdG9yLm5hbWUsYXJyYXk6Yn0pO2Q9dGhpcy5hdHRyaWJ1dGVzO2ZvcihjIGluIGQpe3ZhciBlPWRbY107Yj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLmFycmF5KTthLmRhdGEuYXR0cmlidXRlc1tjXT17aXRlbVNpemU6ZS5pdGVtU2l6ZSx0eXBlOmUuYXJyYXkuY29uc3RydWN0b3IubmFtZSxcbiAgICBhcnJheTpiLG5vcm1hbGl6ZWQ6ZS5ub3JtYWxpemVkfX1jPXRoaXMuZ3JvdXBzOzA8Yy5sZW5ndGgmJihhLmRhdGEuZ3JvdXBzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpKTtjPXRoaXMuYm91bmRpbmdTcGhlcmU7bnVsbCE9PWMmJihhLmRhdGEuYm91bmRpbmdTcGhlcmU9e2NlbnRlcjpjLmNlbnRlci50b0FycmF5KCkscmFkaXVzOmMucmFkaXVzfSk7cmV0dXJuIGF9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBFKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3ZhciBiO3RoaXMuaW5kZXg9bnVsbDt0aGlzLmF0dHJpYnV0ZXM9e307dGhpcy5tb3JwaEF0dHJpYnV0ZXM9e307dGhpcy5ncm91cHM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5uYW1lPWEubmFtZTt2YXIgYz1hLmluZGV4O251bGwhPT1jJiZ0aGlzLnNldEluZGV4KGMuY2xvbmUoKSk7Yz1hLmF0dHJpYnV0ZXM7Zm9yKGcgaW4gYyl0aGlzLmFkZEF0dHJpYnV0ZShnLFxuICAgIGNbZ10uY2xvbmUoKSk7dmFyIGQ9YS5tb3JwaEF0dHJpYnV0ZXM7Zm9yKGcgaW4gZCl7dmFyIGU9W10sZj1kW2ddO2M9MDtmb3IoYj1mLmxlbmd0aDtjPGI7YysrKWUucHVzaChmW2NdLmNsb25lKCkpO3RoaXMubW9ycGhBdHRyaWJ1dGVzW2ddPWV9dmFyIGc9YS5ncm91cHM7Yz0wO2ZvcihiPWcubGVuZ3RoO2M8YjtjKyspZD1nW2NdLHRoaXMuYWRkR3JvdXAoZC5zdGFydCxkLmNvdW50LGQubWF0ZXJpYWxJbmRleCk7Zz1hLmJvdW5kaW5nQm94O251bGwhPT1nJiYodGhpcy5ib3VuZGluZ0JveD1nLmNsb25lKCkpO2c9YS5ib3VuZGluZ1NwaGVyZTtudWxsIT09ZyYmKHRoaXMuYm91bmRpbmdTcGhlcmU9Zy5jbG9uZSgpKTt0aGlzLmRyYXdSYW5nZS5zdGFydD1hLmRyYXdSYW5nZS5zdGFydDt0aGlzLmRyYXdSYW5nZS5jb3VudD1hLmRyYXdSYW5nZS5jb3VudDtyZXR1cm4gdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO1xuICAgIE1iLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtNYi5wcm90b3R5cGUuY29uc3RydWN0b3I9TWI7cWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO3FiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1xYjtBYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7QWMucHJvdG90eXBlLmNvbnN0cnVjdG9yPUFjO3JiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtyYi5wcm90b3R5cGUuY29uc3RydWN0b3I9cmI7QWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO0FhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1BYTtBYS5wcm90b3R5cGUuaXNNZXNoQmFzaWNNYXRlcmlhbD0hMDtBYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5tYXA9YS5tYXA7dGhpcy5saWdodE1hcD1hLmxpZ2h0TWFwO1xuICAgIHRoaXMubGlnaHRNYXBJbnRlbnNpdHk9YS5saWdodE1hcEludGVuc2l0eTt0aGlzLmFvTWFwPWEuYW9NYXA7dGhpcy5hb01hcEludGVuc2l0eT1hLmFvTWFwSW50ZW5zaXR5O3RoaXMuc3BlY3VsYXJNYXA9YS5zcGVjdWxhck1hcDt0aGlzLmFscGhhTWFwPWEuYWxwaGFNYXA7dGhpcy5lbnZNYXA9YS5lbnZNYXA7dGhpcy5jb21iaW5lPWEuY29tYmluZTt0aGlzLnJlZmxlY3Rpdml0eT1hLnJlZmxlY3Rpdml0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1hLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9YS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49YS53aXJlZnJhbWVMaW5lam9pbjt0aGlzLnNraW5uaW5nPWEuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9YS5tb3JwaFRhcmdldHM7cmV0dXJuIHRoaXN9O0ZhLnByb3RvdHlwZT1cbiAgICBPYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtGYS5wcm90b3R5cGUuY29uc3RydWN0b3I9RmE7RmEucHJvdG90eXBlLmlzU2hhZGVyTWF0ZXJpYWw9ITA7RmEucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5mcmFnbWVudFNoYWRlcj1hLmZyYWdtZW50U2hhZGVyO3RoaXMudmVydGV4U2hhZGVyPWEudmVydGV4U2hhZGVyO3RoaXMudW5pZm9ybXM9R2EuY2xvbmUoYS51bmlmb3Jtcyk7dGhpcy5kZWZpbmVzPWEuZGVmaW5lczt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLmxpZ2h0cz1hLmxpZ2h0czt0aGlzLmNsaXBwaW5nPWEuY2xpcHBpbmc7dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3RoaXMubW9ycGhOb3JtYWxzPWEubW9ycGhOb3JtYWxzO3RoaXMuZXh0ZW5zaW9ucz1cbiAgICBhLmV4dGVuc2lvbnM7cmV0dXJuIHRoaXN9O0ZhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oYSl7YT1QLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2EudW5pZm9ybXM9dGhpcy51bmlmb3JtczthLnZlcnRleFNoYWRlcj10aGlzLnZlcnRleFNoYWRlcjthLmZyYWdtZW50U2hhZGVyPXRoaXMuZnJhZ21lbnRTaGFkZXI7cmV0dXJuIGF9O09iamVjdC5hc3NpZ24oc2IucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm9yaWdpbi5jb3B5KGEpO3RoaXMuZGlyZWN0aW9uLmNvcHkoYik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMub3JpZ2luLmNvcHkoYS5vcmlnaW4pO3RoaXMuZGlyZWN0aW9uLmNvcHkoYS5kaXJlY3Rpb24pO3JldHVybiB0aGlzfSxhdDpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgcCkuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMub3JpZ2luKX0sXG4gICAgbG9va0F0OmZ1bmN0aW9uKGEpe3RoaXMuZGlyZWN0aW9uLmNvcHkoYSkuc3ViKHRoaXMub3JpZ2luKS5ub3JtYWxpemUoKTtyZXR1cm4gdGhpc30scmVjYXN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe3RoaXMub3JpZ2luLmNvcHkodGhpcy5hdChiLGEpKTtyZXR1cm4gdGhpc319KCksY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbihhLGIpe2I9Ynx8bmV3IHA7Yi5zdWJWZWN0b3JzKGEsdGhpcy5vcmlnaW4pO2E9Yi5kb3QodGhpcy5kaXJlY3Rpb24pO3JldHVybiAwPmE/Yi5jb3B5KHRoaXMub3JpZ2luKTpiLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLm9yaWdpbil9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VTcVRvUG9pbnQoYSkpfSxkaXN0YW5jZVNxVG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1cbiAgICBhLnN1YlZlY3RvcnMoYix0aGlzLm9yaWdpbikuZG90KHRoaXMuZGlyZWN0aW9uKTtpZigwPmMpcmV0dXJuIHRoaXMub3JpZ2luLmRpc3RhbmNlVG9TcXVhcmVkKGIpO2EuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoYykuYWRkKHRoaXMub3JpZ2luKTtyZXR1cm4gYS5kaXN0YW5jZVRvU3F1YXJlZChiKX19KCksZGlzdGFuY2VTcVRvU2VnbWVudDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHAsYz1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyl7YS5jb3B5KGQpLmFkZChlKS5tdWx0aXBseVNjYWxhciguNSk7Yi5jb3B5KGUpLnN1YihkKS5ub3JtYWxpemUoKTtjLmNvcHkodGhpcy5vcmlnaW4pLnN1YihhKTt2YXIgaD0uNSpkLmRpc3RhbmNlVG8oZSksaz0tdGhpcy5kaXJlY3Rpb24uZG90KGIpLG09Yy5kb3QodGhpcy5kaXJlY3Rpb24pLGw9LWMuZG90KGIpLG49Yy5sZW5ndGhTcSgpLHA9TWF0aC5hYnMoMS1rKmspO2lmKDA8cCl7ZD1rKmwtbTtlPWsqXG4gICAgbS1sO3ZhciByPWgqcDswPD1kP2U+PS1yP2U8PXI/KGg9MS9wLGQqPWgsZSo9aCxrPWQqKGQrayplKzIqbSkrZSooaypkK2UrMipsKStuKTooZT1oLGQ9TWF0aC5tYXgoMCwtKGsqZSttKSksaz0tZCpkK2UqKGUrMipsKStuKTooZT0taCxkPU1hdGgubWF4KDAsLShrKmUrbSkpLGs9LWQqZCtlKihlKzIqbCkrbik6ZTw9LXI/KGQ9TWF0aC5tYXgoMCwtKC1rKmgrbSkpLGU9MDxkPy1oOk1hdGgubWluKE1hdGgubWF4KC1oLC1sKSxoKSxrPS1kKmQrZSooZSsyKmwpK24pOmU8PXI/KGQ9MCxlPU1hdGgubWluKE1hdGgubWF4KC1oLC1sKSxoKSxrPWUqKGUrMipsKStuKTooZD1NYXRoLm1heCgwLC0oaypoK20pKSxlPTA8ZD9oOk1hdGgubWluKE1hdGgubWF4KC1oLC1sKSxoKSxrPS1kKmQrZSooZSsyKmwpK24pfWVsc2UgZT0wPGs/LWg6aCxkPU1hdGgubWF4KDAsLShrKmUrbSkpLGs9LWQqZCtlKihlKzIqbCkrbjtmJiZmLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGQpLmFkZCh0aGlzLm9yaWdpbik7XG4gICAgZyYmZy5jb3B5KGIpLm11bHRpcGx5U2NhbGFyKGUpLmFkZChhKTtyZXR1cm4ga319KCksaW50ZXJzZWN0U3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YS5zdWJWZWN0b3JzKGIuY2VudGVyLHRoaXMub3JpZ2luKTt2YXIgZD1hLmRvdCh0aGlzLmRpcmVjdGlvbiksZT1hLmRvdChhKS1kKmQ7Yj1iLnJhZGl1cypiLnJhZGl1cztpZihlPmIpcmV0dXJuIG51bGw7Yj1NYXRoLnNxcnQoYi1lKTtlPWQtYjtkKz1iO3JldHVybiAwPmUmJjA+ZD9udWxsOjA+ZT90aGlzLmF0KGQsYyk6dGhpcy5hdChlLGMpfX0oKSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRpc3RhbmNlVG9Qb2ludChhLmNlbnRlcik8PWEucmFkaXVzfSxkaXN0YW5jZVRvUGxhbmU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKTtpZigwPT09YilyZXR1cm4gMD09PWEuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKT9cbiAgICAwOm51bGw7YT0tKHRoaXMub3JpZ2luLmRvdChhLm5vcm1hbCkrYS5jb25zdGFudCkvYjtyZXR1cm4gMDw9YT9hOm51bGx9LGludGVyc2VjdFBsYW5lOmZ1bmN0aW9uKGEsYil7YT10aGlzLmRpc3RhbmNlVG9QbGFuZShhKTtyZXR1cm4gbnVsbD09PWE/bnVsbDp0aGlzLmF0KGEsYil9LGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik7cmV0dXJuIDA9PT1ifHwwPmEubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbikqYj8hMDohMX0saW50ZXJzZWN0Qm94OmZ1bmN0aW9uKGEsYil7dmFyIGM9MS90aGlzLmRpcmVjdGlvbi54O3ZhciBkPTEvdGhpcy5kaXJlY3Rpb24ueTt2YXIgZT0xL3RoaXMuZGlyZWN0aW9uLnosZj10aGlzLm9yaWdpbjtpZigwPD1jKXt2YXIgZz0oYS5taW4ueC1mLngpKmM7Yyo9YS5tYXgueC1mLnh9ZWxzZSBnPShhLm1heC54LWYueCkqYyxjKj1hLm1pbi54LWYueDtpZigwPD1kKXt2YXIgaD0oYS5taW4ueS1cbiAgICBmLnkpKmQ7ZCo9YS5tYXgueS1mLnl9ZWxzZSBoPShhLm1heC55LWYueSkqZCxkKj1hLm1pbi55LWYueTtpZihnPmR8fGg+YylyZXR1cm4gbnVsbDtpZihoPmd8fGchPT1nKWc9aDtpZihkPGN8fGMhPT1jKWM9ZDswPD1lPyhoPShhLm1pbi56LWYueikqZSxhPShhLm1heC56LWYueikqZSk6KGg9KGEubWF4LnotZi56KSplLGE9KGEubWluLnotZi56KSplKTtpZihnPmF8fGg+YylyZXR1cm4gbnVsbDtpZihoPmd8fGchPT1nKWc9aDtpZihhPGN8fGMhPT1jKWM9YTtyZXR1cm4gMD5jP251bGw6dGhpcy5hdCgwPD1nP2c6YyxiKX0saW50ZXJzZWN0c0JveDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gbnVsbCE9PXRoaXMuaW50ZXJzZWN0Qm94KGIsYSl9fSgpLGludGVyc2VjdFRyaWFuZ2xlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgcCxjPW5ldyBwLGQ9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGUsZixnLGgsayl7Yi5zdWJWZWN0b3JzKGYsXG4gICAgZSk7Yy5zdWJWZWN0b3JzKGcsZSk7ZC5jcm9zc1ZlY3RvcnMoYixjKTtmPXRoaXMuZGlyZWN0aW9uLmRvdChkKTtpZigwPGYpe2lmKGgpcmV0dXJuIG51bGw7aD0xfWVsc2UgaWYoMD5mKWg9LTEsZj0tZjtlbHNlIHJldHVybiBudWxsO2Euc3ViVmVjdG9ycyh0aGlzLm9yaWdpbixlKTtlPWgqdGhpcy5kaXJlY3Rpb24uZG90KGMuY3Jvc3NWZWN0b3JzKGEsYykpO2lmKDA+ZSlyZXR1cm4gbnVsbDtnPWgqdGhpcy5kaXJlY3Rpb24uZG90KGIuY3Jvc3MoYSkpO2lmKDA+Z3x8ZStnPmYpcmV0dXJuIG51bGw7ZT0taCphLmRvdChkKTtyZXR1cm4gMD5lP251bGw6dGhpcy5hdChlL2Ysayl9fSgpLGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt0aGlzLm9yaWdpbi5hcHBseU1hdHJpeDQoYSk7dGhpcy5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEub3JpZ2luLmVxdWFscyh0aGlzLm9yaWdpbikmJmEuZGlyZWN0aW9uLmVxdWFscyh0aGlzLmRpcmVjdGlvbil9fSk7XG4gICAgT2JqZWN0LmFzc2lnbihOYi5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIpe3RoaXMuc3RhcnQuY29weShhKTt0aGlzLmVuZC5jb3B5KGIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0LmNvcHkoYS5zdGFydCk7dGhpcy5lbmQuY29weShhLmVuZCk7cmV0dXJuIHRoaXN9LGdldENlbnRlcjpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IHApLmFkZFZlY3RvcnModGhpcy5zdGFydCx0aGlzLmVuZCkubXVsdGlwbHlTY2FsYXIoLjUpfSxkZWx0YTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IHApLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCl9LGRpc3RhbmNlU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmVuZCl9LGRpc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUbyh0aGlzLmVuZCl9LFxuICAgIGF0OmZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgcDtyZXR1cm4gdGhpcy5kZWx0YShiKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5zdGFydCl9LGNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwO3JldHVybiBmdW5jdGlvbihjLGQpe2Euc3ViVmVjdG9ycyhjLHRoaXMuc3RhcnQpO2Iuc3ViVmVjdG9ycyh0aGlzLmVuZCx0aGlzLnN0YXJ0KTtjPWIuZG90KGIpO2M9Yi5kb3QoYSkvYztkJiYoYz1RLmNsYW1wKGMsMCwxKSk7cmV0dXJuIGN9fSgpLGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe2E9dGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyKGEsYik7Yz1jfHxuZXcgcDtyZXR1cm4gdGhpcy5kZWx0YShjKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5zdGFydCl9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0LmFwcGx5TWF0cml4NChhKTt0aGlzLmVuZC5hcHBseU1hdHJpeDQoYSk7XG4gICAgcmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdGFydC5lcXVhbHModGhpcy5zdGFydCkmJmEuZW5kLmVxdWFscyh0aGlzLmVuZCl9fSk7T2JqZWN0LmFzc2lnbihaYSx7bm9ybWFsOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGUpe2U9ZXx8bmV3IHA7ZS5zdWJWZWN0b3JzKGQsYyk7YS5zdWJWZWN0b3JzKGIsYyk7ZS5jcm9zcyhhKTtiPWUubGVuZ3RoU3EoKTtyZXR1cm4gMDxiP2UubXVsdGlwbHlTY2FsYXIoMS9NYXRoLnNxcnQoYikpOmUuc2V0KDAsMCwwKX19KCksYmFyeWNvb3JkRnJvbVBvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgcCxjPW5ldyBwO3JldHVybiBmdW5jdGlvbihkLGUsZixnLGgpe2Euc3ViVmVjdG9ycyhnLGUpO2Iuc3ViVmVjdG9ycyhmLGUpO2Muc3ViVmVjdG9ycyhkLGUpO2Q9YS5kb3QoYSk7ZT1hLmRvdChiKTtmPWEuZG90KGMpO3ZhciBrPWIuZG90KGIpO2c9Yi5kb3QoYyk7dmFyIG09XG4gICAgZCprLWUqZTtoPWh8fG5ldyBwO2lmKDA9PT1tKXJldHVybiBoLnNldCgtMiwtMSwtMSk7bT0xL207az0oaypmLWUqZykqbTtkPShkKmctZSpmKSptO3JldHVybiBoLnNldCgxLWstZCxkLGspfX0oKSxjb250YWluc1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGUpe2I9WmEuYmFyeWNvb3JkRnJvbVBvaW50KGIsYyxkLGUsYSk7cmV0dXJuIDA8PWIueCYmMDw9Yi55JiYxPj1iLngrYi55fX0oKX0pO09iamVjdC5hc3NpZ24oWmEucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYS5jb3B5KGEpO3RoaXMuYi5jb3B5KGIpO3RoaXMuYy5jb3B5KGMpO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzQW5kSW5kaWNlczpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLmEuY29weShhW2JdKTt0aGlzLmIuY29weShhW2NdKTt0aGlzLmMuY29weShhW2RdKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LFxuICAgIGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hLmNvcHkoYS5hKTt0aGlzLmIuY29weShhLmIpO3RoaXMuYy5jb3B5KGEuYyk7cmV0dXJuIHRoaXN9LGFyZWE6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwO3JldHVybiBmdW5jdGlvbigpe2Euc3ViVmVjdG9ycyh0aGlzLmMsdGhpcy5iKTtiLnN1YlZlY3RvcnModGhpcy5hLHRoaXMuYik7cmV0dXJuLjUqYS5jcm9zcyhiKS5sZW5ndGgoKX19KCksbWlkcG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBwKS5hZGRWZWN0b3JzKHRoaXMuYSx0aGlzLmIpLmFkZCh0aGlzLmMpLm11bHRpcGx5U2NhbGFyKDEvMyl9LG5vcm1hbDpmdW5jdGlvbihhKXtyZXR1cm4gWmEubm9ybWFsKHRoaXMuYSx0aGlzLmIsdGhpcy5jLGEpfSxwbGFuZTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IEVhKS5zZXRGcm9tQ29wbGFuYXJQb2ludHModGhpcy5hLHRoaXMuYix0aGlzLmMpfSxiYXJ5Y29vcmRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gWmEuYmFyeWNvb3JkRnJvbVBvaW50KGEsXG4gICAgdGhpcy5hLHRoaXMuYix0aGlzLmMsYil9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFphLmNvbnRhaW5zUG9pbnQoYSx0aGlzLmEsdGhpcy5iLHRoaXMuYyl9LGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgRWEsYj1bbmV3IE5iLG5ldyBOYixuZXcgTmJdLGM9bmV3IHAsZD1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZSxmKXtmPWZ8fG5ldyBwO3ZhciBnPUluZmluaXR5O2Euc2V0RnJvbUNvcGxhbmFyUG9pbnRzKHRoaXMuYSx0aGlzLmIsdGhpcy5jKTthLnByb2plY3RQb2ludChlLGMpO2lmKCEwPT09dGhpcy5jb250YWluc1BvaW50KGMpKWYuY29weShjKTtlbHNlIGZvcihiWzBdLnNldCh0aGlzLmEsdGhpcy5iKSxiWzFdLnNldCh0aGlzLmIsdGhpcy5jKSxiWzJdLnNldCh0aGlzLmMsdGhpcy5hKSxlPTA7ZTxiLmxlbmd0aDtlKyspe2JbZV0uY2xvc2VzdFBvaW50VG9Qb2ludChjLCEwLGQpO3ZhciBoPWMuZGlzdGFuY2VUb1NxdWFyZWQoZCk7XG4gICAgaDxnJiYoZz1oLGYuY29weShkKSl9cmV0dXJuIGZ9fSgpLGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5hLmVxdWFscyh0aGlzLmEpJiZhLmIuZXF1YWxzKHRoaXMuYikmJmEuYy5lcXVhbHModGhpcy5jKX19KTtyYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6cmEsaXNNZXNoOiEwLHNldERyYXdNb2RlOmZ1bmN0aW9uKGEpe3RoaXMuZHJhd01vZGU9YX0sY29weTpmdW5jdGlvbihhKXt4LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmRyYXdNb2RlPWEuZHJhd01vZGU7dm9pZCAwIT09YS5tb3JwaFRhcmdldEluZmx1ZW5jZXMmJih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1hLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5zbGljZSgpKTt2b2lkIDAhPT1hLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSYmKHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PU9iamVjdC5hc3NpZ24oe30sYS5tb3JwaFRhcmdldERpY3Rpb25hcnkpKTtcbiAgICByZXR1cm4gdGhpc30sdXBkYXRlTW9ycGhUYXJnZXRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZW9tZXRyeTtpZihhLmlzQnVmZmVyR2VvbWV0cnkpe2E9YS5tb3JwaEF0dHJpYnV0ZXM7dmFyIGI9T2JqZWN0LmtleXMoYSk7aWYoMDxiLmxlbmd0aCl7dmFyIGM9YVtiWzBdXTtpZih2b2lkIDAhPT1jKWZvcih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXSx0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fSxhPTAsYj1jLmxlbmd0aDthPGI7YSsrKXt2YXIgZD1jW2FdLm5hbWV8fFN0cmluZyhhKTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApO3RoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2RdPWF9fX1lbHNlIGlmKGM9YS5tb3JwaFRhcmdldHMsdm9pZCAwIT09YyYmMDxjLmxlbmd0aClmb3IodGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM9W10sdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnk9e30sYT0wLGI9Yy5sZW5ndGg7YTxiO2ErKylkPWNbYV0ubmFtZXx8XG4gICAgU3RyaW5nKGEpLHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnB1c2goMCksdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbZF09YX0scmF5Y2FzdDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMsZCxlLGYsZyl7WmEuYmFyeWNvb3JkRnJvbVBvaW50KGEsYixjLGQsdik7ZS5tdWx0aXBseVNjYWxhcih2LngpO2YubXVsdGlwbHlTY2FsYXIodi55KTtnLm11bHRpcGx5U2NhbGFyKHYueik7ZS5hZGQoZikuYWRkKGcpO3JldHVybiBlLmNsb25lKCl9ZnVuY3Rpb24gYihhLGIsYyxkLGUsZixnLGgpe2lmKG51bGw9PT0oMT09PWIuc2lkZT9kLmludGVyc2VjdFRyaWFuZ2xlKGcsZixlLCEwLGgpOmQuaW50ZXJzZWN0VHJpYW5nbGUoZSxmLGcsMiE9PWIuc2lkZSxoKSkpcmV0dXJuIG51bGw7ei5jb3B5KGgpO3ouYXBwbHlNYXRyaXg0KGEubWF0cml4V29ybGQpO2I9Yy5yYXkub3JpZ2luLmRpc3RhbmNlVG8oeik7cmV0dXJuIGI8Yy5uZWFyfHxiPmMuZmFyP251bGw6e2Rpc3RhbmNlOmIsXG4gICAgcG9pbnQ6ei5jbG9uZSgpLG9iamVjdDphfX1mdW5jdGlvbiBjKGMsZCxlLGYsbSxsLHEsbil7Zy5mcm9tQnVmZmVyQXR0cmlidXRlKGYsbCk7aC5mcm9tQnVmZmVyQXR0cmlidXRlKGYscSk7ay5mcm9tQnVmZmVyQXR0cmlidXRlKGYsbik7aWYoYz1iKGMsYy5tYXRlcmlhbCxkLGUsZyxoLGssdykpbSYmKHUuZnJvbUJ1ZmZlckF0dHJpYnV0ZShtLGwpLHIuZnJvbUJ1ZmZlckF0dHJpYnV0ZShtLHEpLHQuZnJvbUJ1ZmZlckF0dHJpYnV0ZShtLG4pLGMudXY9YSh3LGcsaCxrLHUscix0KSksYy5mYWNlPW5ldyBZYShsLHEsbixaYS5ub3JtYWwoZyxoLGspKSxjLmZhY2VJbmRleD1sO3JldHVybiBjfXZhciBkPW5ldyBPLGU9bmV3IHNiLGY9bmV3IElhLGc9bmV3IHAsaD1uZXcgcCxrPW5ldyBwLG09bmV3IHAsbD1uZXcgcCxuPW5ldyBwLHU9bmV3IEQscj1uZXcgRCx0PW5ldyBELHY9bmV3IHAsdz1uZXcgcCx6PW5ldyBwO3JldHVybiBmdW5jdGlvbihxLHApe3ZhciB2PXRoaXMuZ2VvbWV0cnksXG4gICAgej10aGlzLm1hdGVyaWFsLHk9dGhpcy5tYXRyaXhXb3JsZDtpZih2b2lkIDAhPT16JiYobnVsbD09PXYuYm91bmRpbmdTcGhlcmUmJnYuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCksZi5jb3B5KHYuYm91bmRpbmdTcGhlcmUpLGYuYXBwbHlNYXRyaXg0KHkpLCExIT09cS5yYXkuaW50ZXJzZWN0c1NwaGVyZShmKSYmKGQuZ2V0SW52ZXJzZSh5KSxlLmNvcHkocS5yYXkpLmFwcGx5TWF0cml4NChkKSxudWxsPT09di5ib3VuZGluZ0JveHx8ITEhPT1lLmludGVyc2VjdHNCb3godi5ib3VuZGluZ0JveCkpKSl7dmFyIHg7aWYodi5pc0J1ZmZlckdlb21ldHJ5KXt2YXIgej12LmluZGV4LEI9di5hdHRyaWJ1dGVzLnBvc2l0aW9uLHk9di5hdHRyaWJ1dGVzLnV2LEQ7aWYobnVsbCE9PXope3ZhciBDPTA7Zm9yKEQ9ei5jb3VudDtDPEQ7Qys9Myl7dj16LmdldFgoQyk7dmFyIEk9ei5nZXRYKEMrMSk7dmFyIEU9ei5nZXRYKEMrMik7aWYoeD1jKHRoaXMscSxlLEIseSx2LEksRSkpeC5mYWNlSW5kZXg9XG4gICAgTWF0aC5mbG9vcihDLzMpLHAucHVzaCh4KX19ZWxzZSBpZih2b2lkIDAhPT1CKWZvcihDPTAsRD1CLmNvdW50O0M8RDtDKz0zKWlmKHY9QyxJPUMrMSxFPUMrMix4PWModGhpcyxxLGUsQix5LHYsSSxFKSl4LmluZGV4PXYscC5wdXNoKHgpfWVsc2UgaWYodi5pc0dlb21ldHJ5KXt2YXIgeT1BcnJheS5pc0FycmF5KHopO0M9di52ZXJ0aWNlcztEPXYuZmFjZXM7ST12LmZhY2VWZXJ0ZXhVdnNbMF07MDxJLmxlbmd0aCYmKEI9SSk7Zm9yKHZhciBIPTAsSz1ELmxlbmd0aDtIPEs7SCsrKXt2YXIgTj1EW0hdO3g9eT96W04ubWF0ZXJpYWxJbmRleF06ejtpZih2b2lkIDAhPT14KXtJPUNbTi5hXTtFPUNbTi5iXTt2YXIgTD1DW04uY107aWYoITA9PT14Lm1vcnBoVGFyZ2V0cyl7dmFyIE09di5tb3JwaFRhcmdldHMsTz10aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcztnLnNldCgwLDAsMCk7aC5zZXQoMCwwLDApO2suc2V0KDAsMCwwKTtmb3IodmFyIFA9MCxRPU0ubGVuZ3RoO1A8UTtQKyspe3ZhciBSPVxuICAgIE9bUF07aWYoMCE9PVIpe3ZhciBVPU1bUF0udmVydGljZXM7Zy5hZGRTY2FsZWRWZWN0b3IobS5zdWJWZWN0b3JzKFVbTi5hXSxJKSxSKTtoLmFkZFNjYWxlZFZlY3RvcihsLnN1YlZlY3RvcnMoVVtOLmJdLEUpLFIpO2suYWRkU2NhbGVkVmVjdG9yKG4uc3ViVmVjdG9ycyhVW04uY10sTCksUil9fWcuYWRkKEkpO2guYWRkKEUpO2suYWRkKEwpO0k9ZztFPWg7TD1rfWlmKHg9Yih0aGlzLHgscSxlLEksRSxMLHcpKUImJkJbSF0mJihNPUJbSF0sdS5jb3B5KE1bMF0pLHIuY29weShNWzFdKSx0LmNvcHkoTVsyXSkseC51dj1hKHcsSSxFLEwsdSxyLHQpKSx4LmZhY2U9Tix4LmZhY2VJbmRleD1ILHAucHVzaCh4KX19fX19fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkpLmNvcHkodGhpcyl9fSk7dmFyIHlnPTA7YmEucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUYS5wcm90b3R5cGUpLFxuICAgIHtjb25zdHJ1Y3RvcjpiYSxpc1BlcnNwZWN0aXZlQ2FtZXJhOiEwLGNvcHk6ZnVuY3Rpb24oYSxiKXtUYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSxiKTt0aGlzLmZvdj1hLmZvdjt0aGlzLnpvb209YS56b29tO3RoaXMubmVhcj1hLm5lYXI7dGhpcy5mYXI9YS5mYXI7dGhpcy5mb2N1cz1hLmZvY3VzO3RoaXMuYXNwZWN0PWEuYXNwZWN0O3RoaXMudmlldz1udWxsPT09YS52aWV3P251bGw6T2JqZWN0LmFzc2lnbih7fSxhLnZpZXcpO3RoaXMuZmlsbUdhdWdlPWEuZmlsbUdhdWdlO3RoaXMuZmlsbU9mZnNldD1hLmZpbG1PZmZzZXQ7cmV0dXJuIHRoaXN9LHNldEZvY2FsTGVuZ3RoOmZ1bmN0aW9uKGEpe2E9LjUqdGhpcy5nZXRGaWxtSGVpZ2h0KCkvYTt0aGlzLmZvdj0yKlEuUkFEMkRFRypNYXRoLmF0YW4oYSk7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LGdldEZvY2FsTGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIGE9TWF0aC50YW4oLjUqUS5ERUcyUkFEKnRoaXMuZm92KTtcbiAgICByZXR1cm4uNSp0aGlzLmdldEZpbG1IZWlnaHQoKS9hfSxnZXRFZmZlY3RpdmVGT1Y6ZnVuY3Rpb24oKXtyZXR1cm4gMipRLlJBRDJERUcqTWF0aC5hdGFuKE1hdGgudGFuKC41KlEuREVHMlJBRCp0aGlzLmZvdikvdGhpcy56b29tKX0sZ2V0RmlsbVdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsbUdhdWdlKk1hdGgubWluKHRoaXMuYXNwZWN0LDEpfSxnZXRGaWxtSGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsbUdhdWdlL01hdGgubWF4KHRoaXMuYXNwZWN0LDEpfSxzZXRWaWV3T2Zmc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmFzcGVjdD1hL2I7bnVsbD09PXRoaXMudmlldyYmKHRoaXMudmlldz17ZW5hYmxlZDohMCxmdWxsV2lkdGg6MSxmdWxsSGVpZ2h0OjEsb2Zmc2V0WDowLG9mZnNldFk6MCx3aWR0aDoxLGhlaWdodDoxfSk7dGhpcy52aWV3LmVuYWJsZWQ9ITA7dGhpcy52aWV3LmZ1bGxXaWR0aD1hO3RoaXMudmlldy5mdWxsSGVpZ2h0PWI7dGhpcy52aWV3Lm9mZnNldFg9XG4gICAgYzt0aGlzLnZpZXcub2Zmc2V0WT1kO3RoaXMudmlldy53aWR0aD1lO3RoaXMudmlldy5oZWlnaHQ9Zjt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sY2xlYXJWaWV3T2Zmc2V0OmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMudmlldyYmKHRoaXMudmlldy5lbmFibGVkPSExKTt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sdXBkYXRlUHJvamVjdGlvbk1hdHJpeDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubmVhcixiPWEqTWF0aC50YW4oLjUqUS5ERUcyUkFEKnRoaXMuZm92KS90aGlzLnpvb20sYz0yKmIsZD10aGlzLmFzcGVjdCpjLGU9LS41KmQsZj10aGlzLnZpZXc7aWYobnVsbCE9PXRoaXMudmlldyYmdGhpcy52aWV3LmVuYWJsZWQpdmFyIGc9Zi5mdWxsV2lkdGgsaD1mLmZ1bGxIZWlnaHQsZT1lK2Yub2Zmc2V0WCpkL2csYj1iLWYub2Zmc2V0WSpjL2gsZD1mLndpZHRoL2cqZCxjPWYuaGVpZ2h0L2gqYztmPXRoaXMuZmlsbU9mZnNldDswIT09ZiYmKGUrPWEqZi90aGlzLmdldEZpbG1XaWR0aCgpKTtcbiAgICB0aGlzLnByb2plY3Rpb25NYXRyaXgubWFrZVBlcnNwZWN0aXZlKGUsZStkLGIsYi1jLGEsdGhpcy5mYXIpfSx0b0pTT046ZnVuY3Rpb24oYSl7YT14LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0LmZvdj10aGlzLmZvdjthLm9iamVjdC56b29tPXRoaXMuem9vbTthLm9iamVjdC5uZWFyPXRoaXMubmVhcjthLm9iamVjdC5mYXI9dGhpcy5mYXI7YS5vYmplY3QuZm9jdXM9dGhpcy5mb2N1czthLm9iamVjdC5hc3BlY3Q9dGhpcy5hc3BlY3Q7bnVsbCE9PXRoaXMudmlldyYmKGEub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpKTthLm9iamVjdC5maWxtR2F1Z2U9dGhpcy5maWxtR2F1Z2U7YS5vYmplY3QuZmlsbU9mZnNldD10aGlzLmZpbG1PZmZzZXQ7cmV0dXJuIGF9fSk7dWQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShiYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp1ZCxpc0FycmF5Q2FtZXJhOiEwfSk7UGIucHJvdG90eXBlLmlzRm9nRXhwMj1cbiAgICAhMDtQYi5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFBiKHRoaXMuY29sb3IuZ2V0SGV4KCksdGhpcy5kZW5zaXR5KX07UGIucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOlwiRm9nRXhwMlwiLGNvbG9yOnRoaXMuY29sb3IuZ2V0SGV4KCksZGVuc2l0eTp0aGlzLmRlbnNpdHl9fTtRYi5wcm90b3R5cGUuaXNGb2c9ITA7UWIucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBRYih0aGlzLmNvbG9yLmdldEhleCgpLHRoaXMubmVhcix0aGlzLmZhcil9O1FiLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIkZvZ1wiLGNvbG9yOnRoaXMuY29sb3IuZ2V0SGV4KCksbmVhcjp0aGlzLm5lYXIsZmFyOnRoaXMuZmFyfX07dmQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnZkLGNvcHk6ZnVuY3Rpb24oYSxiKXt4LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxcbiAgICBhLGIpO251bGwhPT1hLmJhY2tncm91bmQmJih0aGlzLmJhY2tncm91bmQ9YS5iYWNrZ3JvdW5kLmNsb25lKCkpO251bGwhPT1hLmZvZyYmKHRoaXMuZm9nPWEuZm9nLmNsb25lKCkpO251bGwhPT1hLm92ZXJyaWRlTWF0ZXJpYWwmJih0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9YS5vdmVycmlkZU1hdGVyaWFsLmNsb25lKCkpO3RoaXMuYXV0b1VwZGF0ZT1hLmF1dG9VcGRhdGU7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPWEubWF0cml4QXV0b1VwZGF0ZTtyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKGEpe3ZhciBiPXgucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7bnVsbCE9PXRoaXMuYmFja2dyb3VuZCYmKGIub2JqZWN0LmJhY2tncm91bmQ9dGhpcy5iYWNrZ3JvdW5kLnRvSlNPTihhKSk7bnVsbCE9PXRoaXMuZm9nJiYoYi5vYmplY3QuZm9nPXRoaXMuZm9nLnRvSlNPTigpKTtyZXR1cm4gYn19KTtkZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSxcbiAgICB7Y29uc3RydWN0b3I6ZGUsaXNMZW5zRmxhcmU6ITAsY29weTpmdW5jdGlvbihhKXt4LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnBvc2l0aW9uU2NyZWVuLmNvcHkoYS5wb3NpdGlvblNjcmVlbik7dGhpcy5jdXN0b21VcGRhdGVDYWxsYmFjaz1hLmN1c3RvbVVwZGF0ZUNhbGxiYWNrO2Zvcih2YXIgYj0wLGM9YS5sZW5zRmxhcmVzLmxlbmd0aDtiPGM7YisrKXRoaXMubGVuc0ZsYXJlcy5wdXNoKGEubGVuc0ZsYXJlc1tiXSk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dm9pZCAwPT09YiYmKGI9LTEpO3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWYmJihmPTEpO3ZvaWQgMD09PWUmJihlPW5ldyBIKDE2Nzc3MjE1KSk7dm9pZCAwPT09ZCYmKGQ9MSk7Yz1NYXRoLm1pbihjLE1hdGgubWF4KDAsYykpO3RoaXMubGVuc0ZsYXJlcy5wdXNoKHt0ZXh0dXJlOmEsc2l6ZTpiLGRpc3RhbmNlOmMseDowLHk6MCx6OjAsc2NhbGU6MSxyb3RhdGlvbjowLFxuICAgIG9wYWNpdHk6Zixjb2xvcjplLGJsZW5kaW5nOmR9KX0sdXBkYXRlTGVuc0ZsYXJlczpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5sZW5zRmxhcmVzLmxlbmd0aCxjPTIqLXRoaXMucG9zaXRpb25TY3JlZW4ueCxkPTIqLXRoaXMucG9zaXRpb25TY3JlZW4ueTtmb3IoYT0wO2E8YjthKyspe3ZhciBlPXRoaXMubGVuc0ZsYXJlc1thXTtlLng9dGhpcy5wb3NpdGlvblNjcmVlbi54K2MqZS5kaXN0YW5jZTtlLnk9dGhpcy5wb3NpdGlvblNjcmVlbi55K2QqZS5kaXN0YW5jZTtlLndhbnRlZFJvdGF0aW9uPWUueCpNYXRoLlBJKi4yNTtlLnJvdGF0aW9uKz0uMjUqKGUud2FudGVkUm90YXRpb24tZS5yb3RhdGlvbil9fX0pO2hiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtoYi5wcm90b3R5cGUuY29uc3RydWN0b3I9aGI7aGIucHJvdG90eXBlLmlzU3ByaXRlTWF0ZXJpYWw9ITA7aGIucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsXG4gICAgYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMubWFwPWEubWFwO3RoaXMucm90YXRpb249YS5yb3RhdGlvbjtyZXR1cm4gdGhpc307Q2MucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkNjLGlzU3ByaXRlOiEwLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7ZC5yYXkuY2xvc2VzdFBvaW50VG9Qb2ludChiLGEpO2Muc2V0RnJvbU1hdHJpeFNjYWxlKHRoaXMubWF0cml4V29ybGQpO3ZhciBmPWMueCpjLnkvNDtiLmRpc3RhbmNlVG9TcXVhcmVkKGEpPmZ8fChmPWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGEpLGY8ZC5uZWFyfHxmPmQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOmYscG9pbnQ6YS5jbG9uZSgpLGZhY2U6bnVsbCxvYmplY3Q6dGhpc30pKX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tYXRlcmlhbCkpLmNvcHkodGhpcyl9fSk7XG4gICAgRGMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkRjLGNvcHk6ZnVuY3Rpb24oYSl7eC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSwhMSk7YT1hLmxldmVscztmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFbYl07dGhpcy5hZGRMZXZlbChkLm9iamVjdC5jbG9uZSgpLGQuZGlzdGFuY2UpfXJldHVybiB0aGlzfSxhZGRMZXZlbDpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO2I9TWF0aC5hYnMoYik7Zm9yKHZhciBjPXRoaXMubGV2ZWxzLGQ9MDtkPGMubGVuZ3RoJiYhKGI8Y1tkXS5kaXN0YW5jZSk7ZCsrKTtjLnNwbGljZShkLDAse2Rpc3RhbmNlOmIsb2JqZWN0OmF9KTt0aGlzLmFkZChhKX0sZ2V0T2JqZWN0Rm9yRGlzdGFuY2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMubGV2ZWxzLGM9MSxkPWIubGVuZ3RoO2M8ZCYmIShhPGJbY10uZGlzdGFuY2UpO2MrKyk7cmV0dXJuIGJbYy1cbiAgICAxXS5vYmplY3R9LHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYixjKXthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTt2YXIgZD1iLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhhKTt0aGlzLmdldE9iamVjdEZvckRpc3RhbmNlKGQpLnJheWNhc3QoYixjKX19KCksdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5sZXZlbHM7aWYoMTxkLmxlbmd0aCl7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24oYy5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7Yz1hLmRpc3RhbmNlVG8oYik7ZFswXS5vYmplY3QudmlzaWJsZT0hMDtmb3IodmFyIGU9MSxmPWQubGVuZ3RoO2U8ZjtlKyspaWYoYz49ZFtlXS5kaXN0YW5jZSlkW2UtMV0ub2JqZWN0LnZpc2libGU9ITEsZFtlXS5vYmplY3QudmlzaWJsZT0hMDtlbHNlIGJyZWFrO1xuICAgIGZvcig7ZTxmO2UrKylkW2VdLm9iamVjdC52aXNpYmxlPSExfX19KCksdG9KU09OOmZ1bmN0aW9uKGEpe2E9eC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxhKTthLm9iamVjdC5sZXZlbHM9W107Zm9yKHZhciBiPXRoaXMubGV2ZWxzLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWJbY107YS5vYmplY3QubGV2ZWxzLnB1c2goe29iamVjdDplLm9iamVjdC51dWlkLGRpc3RhbmNlOmUuZGlzdGFuY2V9KX1yZXR1cm4gYX19KTtPYmplY3QuYXNzaWduKEVjLnByb3RvdHlwZSx7Y2FsY3VsYXRlSW52ZXJzZXM6ZnVuY3Rpb24oKXt0aGlzLmJvbmVJbnZlcnNlcz1bXTtmb3IodmFyIGE9MCxiPXRoaXMuYm9uZXMubGVuZ3RoO2E8YjthKyspe3ZhciBjPW5ldyBPO3RoaXMuYm9uZXNbYV0mJmMuZ2V0SW52ZXJzZSh0aGlzLmJvbmVzW2FdLm1hdHJpeFdvcmxkKTt0aGlzLmJvbmVJbnZlcnNlcy5wdXNoKGMpfX0scG9zZTpmdW5jdGlvbigpe3ZhciBhLGI7dmFyIGM9MDtmb3IoYj10aGlzLmJvbmVzLmxlbmd0aDtjPFxuICAgIGI7YysrKShhPXRoaXMuYm9uZXNbY10pJiZhLm1hdHJpeFdvcmxkLmdldEludmVyc2UodGhpcy5ib25lSW52ZXJzZXNbY10pO2M9MDtmb3IoYj10aGlzLmJvbmVzLmxlbmd0aDtjPGI7YysrKWlmKGE9dGhpcy5ib25lc1tjXSlhLnBhcmVudCYmYS5wYXJlbnQuaXNCb25lPyhhLm1hdHJpeC5nZXRJbnZlcnNlKGEucGFyZW50Lm1hdHJpeFdvcmxkKSxhLm1hdHJpeC5tdWx0aXBseShhLm1hdHJpeFdvcmxkKSk6YS5tYXRyaXguY29weShhLm1hdHJpeFdvcmxkKSxhLm1hdHJpeC5kZWNvbXBvc2UoYS5wb3NpdGlvbixhLnF1YXRlcm5pb24sYS5zY2FsZSl9LHVwZGF0ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBPLGI9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBjPXRoaXMuYm9uZXMsZD10aGlzLmJvbmVJbnZlcnNlcyxlPXRoaXMuYm9uZU1hdHJpY2VzLGY9dGhpcy5ib25lVGV4dHVyZSxnPTAsaD1jLmxlbmd0aDtnPGg7ZysrKWEubXVsdGlwbHlNYXRyaWNlcyhjW2ddP2NbZ10ubWF0cml4V29ybGQ6XG4gICAgYixkW2ddKSxhLnRvQXJyYXkoZSwxNipnKTt2b2lkIDAhPT1mJiYoZi5uZWVkc1VwZGF0ZT0hMCl9fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBFYyh0aGlzLmJvbmVzLHRoaXMuYm9uZUludmVyc2VzKX19KTt3ZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6d2QsaXNCb25lOiEwfSk7eGQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShyYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp4ZCxpc1NraW5uZWRNZXNoOiEwLGluaXRCb25lczpmdW5jdGlvbigpe3ZhciBhPVtdLGI7aWYodGhpcy5nZW9tZXRyeSYmdm9pZCAwIT09dGhpcy5nZW9tZXRyeS5ib25lcyl7dmFyIGM9MDtmb3IoYj10aGlzLmdlb21ldHJ5LmJvbmVzLmxlbmd0aDtjPGI7YysrKXt2YXIgZD10aGlzLmdlb21ldHJ5LmJvbmVzW2NdO3ZhciBlPW5ldyB3ZDthLnB1c2goZSk7ZS5uYW1lPWQubmFtZTtlLnBvc2l0aW9uLmZyb21BcnJheShkLnBvcyk7XG4gICAgZS5xdWF0ZXJuaW9uLmZyb21BcnJheShkLnJvdHEpO3ZvaWQgMCE9PWQuc2NsJiZlLnNjYWxlLmZyb21BcnJheShkLnNjbCl9Yz0wO2ZvcihiPXRoaXMuZ2VvbWV0cnkuYm9uZXMubGVuZ3RoO2M8YjtjKyspZD10aGlzLmdlb21ldHJ5LmJvbmVzW2NdLC0xIT09ZC5wYXJlbnQmJm51bGwhPT1kLnBhcmVudCYmdm9pZCAwIT09YVtkLnBhcmVudF0/YVtkLnBhcmVudF0uYWRkKGFbY10pOnRoaXMuYWRkKGFbY10pfXRoaXMudXBkYXRlTWF0cml4V29ybGQoITApO3JldHVybiBhfSxiaW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5za2VsZXRvbj1hO3ZvaWQgMD09PWImJih0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKSx0aGlzLnNrZWxldG9uLmNhbGN1bGF0ZUludmVyc2VzKCksYj10aGlzLm1hdHJpeFdvcmxkKTt0aGlzLmJpbmRNYXRyaXguY29weShiKTt0aGlzLmJpbmRNYXRyaXhJbnZlcnNlLmdldEludmVyc2UoYil9LHBvc2U6ZnVuY3Rpb24oKXt0aGlzLnNrZWxldG9uLnBvc2UoKX0sbm9ybWFsaXplU2tpbldlaWdodHM6ZnVuY3Rpb24oKXt2YXIgYTtcbiAgICBpZih0aGlzLmdlb21ldHJ5JiZ0aGlzLmdlb21ldHJ5LmlzR2VvbWV0cnkpZm9yKGE9MDthPHRoaXMuZ2VvbWV0cnkuc2tpbldlaWdodHMubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5nZW9tZXRyeS5za2luV2VpZ2h0c1thXTt2YXIgYz0xL2IubWFuaGF0dGFuTGVuZ3RoKCk7SW5maW5pdHkhPT1jP2IubXVsdGlwbHlTY2FsYXIoYyk6Yi5zZXQoMSwwLDAsMCl9ZWxzZSBpZih0aGlzLmdlb21ldHJ5JiZ0aGlzLmdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpe3ZhciBiPW5ldyBhYSxkPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luV2VpZ2h0O2ZvcihhPTA7YTxkLmNvdW50O2ErKyliLng9ZC5nZXRYKGEpLGIueT1kLmdldFkoYSksYi56PWQuZ2V0WihhKSxiLnc9ZC5nZXRXKGEpLGM9MS9iLm1hbmhhdHRhbkxlbmd0aCgpLEluZmluaXR5IT09Yz9iLm11bHRpcGx5U2NhbGFyKGMpOmIuc2V0KDEsMCwwLDApLGQuc2V0WFlaVyhhLGIueCxiLnksYi56LGIudyl9fSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbihhKXtyYS5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLFxuICAgIGEpO1wiYXR0YWNoZWRcIj09PXRoaXMuYmluZE1vZGU/dGhpcy5iaW5kTWF0cml4SW52ZXJzZS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpOlwiZGV0YWNoZWRcIj09PXRoaXMuYmluZE1vZGU/dGhpcy5iaW5kTWF0cml4SW52ZXJzZS5nZXRJbnZlcnNlKHRoaXMuYmluZE1hdHJpeCk6Y29uc29sZS53YXJuKFwiVEhSRUUuU2tpbm5lZE1lc2g6IFVucmVjb2duaXplZCBiaW5kTW9kZTogXCIrdGhpcy5iaW5kTW9kZSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkpLmNvcHkodGhpcyl9fSk7Vy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7Vy5wcm90b3R5cGUuY29uc3RydWN0b3I9VztXLnByb3RvdHlwZS5pc0xpbmVCYXNpY01hdGVyaWFsPSEwO1cucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO1xuICAgIHRoaXMubGluZXdpZHRoPWEubGluZXdpZHRoO3RoaXMubGluZWNhcD1hLmxpbmVjYXA7dGhpcy5saW5lam9pbj1hLmxpbmVqb2luO3JldHVybiB0aGlzfTtzYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6c2EsaXNMaW5lOiEwLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTyxiPW5ldyBzYixjPW5ldyBJYTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj1kLmxpbmVQcmVjaXNpb24sZj1mKmYsZz10aGlzLmdlb21ldHJ5LGg9dGhpcy5tYXRyaXhXb3JsZDtudWxsPT09Zy5ib3VuZGluZ1NwaGVyZSYmZy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtjLmNvcHkoZy5ib3VuZGluZ1NwaGVyZSk7Yy5hcHBseU1hdHJpeDQoaCk7aWYoITEhPT1kLnJheS5pbnRlcnNlY3RzU3BoZXJlKGMpKXthLmdldEludmVyc2UoaCk7Yi5jb3B5KGQucmF5KS5hcHBseU1hdHJpeDQoYSk7dmFyIGs9bmV3IHAsbT1uZXcgcCxoPW5ldyBwLFxuICAgIGw9bmV3IHAsbj10aGlzJiZ0aGlzLmlzTGluZVNlZ21lbnRzPzI6MTtpZihnLmlzQnVmZmVyR2VvbWV0cnkpe3ZhciB1PWcuaW5kZXg7dmFyIHI9Zy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKG51bGwhPT11KWZvcih2YXIgdD11LmFycmF5LGc9MCx2PXQubGVuZ3RoLTE7Zzx2O2crPW4pdT10W2crMV0say5mcm9tQXJyYXkociwzKnRbZ10pLG0uZnJvbUFycmF5KHIsMyp1KSx1PWIuZGlzdGFuY2VTcVRvU2VnbWVudChrLG0sbCxoKSx1PmZ8fChsLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSx1PWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGwpLHU8ZC5uZWFyfHx1PmQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOnUscG9pbnQ6aC5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxpbmRleDpnLGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6dGhpc30pKTtlbHNlIGZvcihnPTAsdj1yLmxlbmd0aC8zLTE7Zzx2O2crPW4pay5mcm9tQXJyYXkocixcbiAgICAzKmcpLG0uZnJvbUFycmF5KHIsMypnKzMpLHU9Yi5kaXN0YW5jZVNxVG9TZWdtZW50KGssbSxsLGgpLHU+Znx8KGwuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLHU9ZC5yYXkub3JpZ2luLmRpc3RhbmNlVG8obCksdTxkLm5lYXJ8fHU+ZC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6dSxwb2ludDpoLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OmcsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSkpfWVsc2UgaWYoZy5pc0dlb21ldHJ5KWZvcihrPWcudmVydGljZXMsbT1rLmxlbmd0aCxnPTA7ZzxtLTE7Zys9bil1PWIuZGlzdGFuY2VTcVRvU2VnbWVudChrW2ddLGtbZysxXSxsLGgpLHU+Znx8KGwuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLHU9ZC5yYXkub3JpZ2luLmRpc3RhbmNlVG8obCksdTxkLm5lYXJ8fHU+ZC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6dSxwb2ludDpoLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLFxuICAgIGluZGV4OmcsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSkpfX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSkuY29weSh0aGlzKX19KTtYLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoc2EucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6WCxpc0xpbmVTZWdtZW50czohMH0pO3lkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoc2EucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6eWQsaXNMaW5lTG9vcDohMH0pO0thLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtLYS5wcm90b3R5cGUuY29uc3RydWN0b3I9S2E7S2EucHJvdG90eXBlLmlzUG9pbnRzTWF0ZXJpYWw9ITA7S2EucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO1xuICAgIHRoaXMubWFwPWEubWFwO3RoaXMuc2l6ZT1hLnNpemU7dGhpcy5zaXplQXR0ZW51YXRpb249YS5zaXplQXR0ZW51YXRpb247cmV0dXJuIHRoaXN9O1JiLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpSYixpc1BvaW50czohMCxyYXljYXN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE8sYj1uZXcgc2IsYz1uZXcgSWE7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7ZnVuY3Rpb24gZihhLGMpe3ZhciBmPWIuZGlzdGFuY2VTcVRvUG9pbnQoYSk7aWYoZjxsKXthPWIuY2xvc2VzdFBvaW50VG9Qb2ludChhKTthLmFwcGx5TWF0cml4NChrKTt2YXIgaD1kLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhhKTtoPGQubmVhcnx8aD5kLmZhcnx8ZS5wdXNoKHtkaXN0YW5jZTpoLGRpc3RhbmNlVG9SYXk6TWF0aC5zcXJ0KGYpLHBvaW50OmEuY2xvbmUoKSxpbmRleDpjLGZhY2U6bnVsbCxvYmplY3Q6Z30pfX12YXIgZz10aGlzLGg9dGhpcy5nZW9tZXRyeSxcbiAgICBrPXRoaXMubWF0cml4V29ybGQsbT1kLnBhcmFtcy5Qb2ludHMudGhyZXNob2xkO251bGw9PT1oLmJvdW5kaW5nU3BoZXJlJiZoLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO2MuY29weShoLmJvdW5kaW5nU3BoZXJlKTtjLmFwcGx5TWF0cml4NChrKTtjLnJhZGl1cys9bTtpZighMSE9PWQucmF5LmludGVyc2VjdHNTcGhlcmUoYykpe2EuZ2V0SW52ZXJzZShrKTtiLmNvcHkoZC5yYXkpLmFwcGx5TWF0cml4NChhKTt2YXIgbT1tLygodGhpcy5zY2FsZS54K3RoaXMuc2NhbGUueSt0aGlzLnNjYWxlLnopLzMpLGw9bSptLG09bmV3IHA7aWYoaC5pc0J1ZmZlckdlb21ldHJ5KXt2YXIgbj1oLmluZGV4LGg9aC5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKG51bGwhPT1uKWZvcih2YXIgdT1uLmFycmF5LG49MCxyPXUubGVuZ3RoO248cjtuKyspe3ZhciB0PXVbbl07bS5mcm9tQXJyYXkoaCwzKnQpO2YobSx0KX1lbHNlIGZvcihuPTAsdT1oLmxlbmd0aC8zO248dTtuKyspbS5mcm9tQXJyYXkoaCxcbiAgICAzKm4pLGYobSxuKX1lbHNlIGZvcihtPWgudmVydGljZXMsbj0wLHU9bS5sZW5ndGg7bjx1O24rKylmKG1bbl0sbil9fX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpKS5jb3B5KHRoaXMpfX0pO0ZjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpGYyxpc0dyb3VwOiEwfSk7ZWUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShVLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmVlLGlzVmlkZW9UZXh0dXJlOiEwLHVwZGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1hZ2U7YS5yZWFkeVN0YXRlPj1hLkhBVkVfQ1VSUkVOVF9EQVRBJiYodGhpcy5uZWVkc1VwZGF0ZT0hMCl9fSk7U2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVS5wcm90b3R5cGUpO1NiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1TYjtTYi5wcm90b3R5cGUuaXNDb21wcmVzc2VkVGV4dHVyZT1cbiAgICAhMDtHYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShVLnByb3RvdHlwZSk7R2MucHJvdG90eXBlLmNvbnN0cnVjdG9yPUdjO0djLnByb3RvdHlwZS5pc0RlcHRoVGV4dHVyZT0hMDtUYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7VGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRiO0hjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtIYy5wcm90b3R5cGUuY29uc3RydWN0b3I9SGM7VWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO1ViLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VYjtJYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7SWMucHJvdG90eXBlLmNvbnN0cnVjdG9yPUljO2phLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtqYS5wcm90b3R5cGUuY29uc3RydWN0b3I9amE7SmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO0pjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1cbiAgICBKYztWYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqYS5wcm90b3R5cGUpO1ZiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1WYjtLYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7S2MucHJvdG90eXBlLmNvbnN0cnVjdG9yPUtjO3ViLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGphLnByb3RvdHlwZSk7dWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXViO0xjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtMYy5wcm90b3R5cGUuY29uc3RydWN0b3I9TGM7V2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoamEucHJvdG90eXBlKTtXYi5wcm90b3R5cGUuY29uc3RydWN0b3I9V2I7TWMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO01jLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NYztYYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqYS5wcm90b3R5cGUpO1hiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1YYjtOYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7XG4gICAgTmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPU5jO1liLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtZYi5wcm90b3R5cGUuY29uc3RydWN0b3I9WWI7T2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO09jLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1PYztaYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7WmIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVpiO1BjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtQYy5wcm90b3R5cGUuY29uc3RydWN0b3I9UGM7JGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpOyRiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj0kYjt2YXIgTGc9e3RyaWFuZ3VsYXRlOmZ1bmN0aW9uKGEsYixjKXtjPWN8fDI7dmFyIGQ9YiYmYi5sZW5ndGgsZT1kP2JbMF0qYzphLmxlbmd0aCxmPWJmKGEsMCxlLGMsITApLGc9W107aWYoIWYpcmV0dXJuIGc7dmFyIGg7aWYoZCl7dmFyIGs9XG4gICAgYyxkPVtdLG07dmFyIGw9MDtmb3IobT1iLmxlbmd0aDtsPG07bCsrKXt2YXIgbj1iW2xdKms7dmFyIHA9bDxtLTE/YltsKzFdKms6YS5sZW5ndGg7bj1iZihhLG4scCxrLCExKTtuPT09bi5uZXh0JiYobi5zdGVpbmVyPSEwKTtkLnB1c2goSmcobikpfWQuc29ydChIZyk7Zm9yKGw9MDtsPGQubGVuZ3RoO2wrKyl7Yj1kW2xdO2s9ZjtpZihrPUlnKGIsaykpYj1lZihrLGIpLFJjKGIsYi5uZXh0KTtmPVJjKGYsZi5uZXh0KX19aWYoYS5sZW5ndGg+ODAqYyl7dmFyIHI9aD1hWzBdO3ZhciB0PWQ9YVsxXTtmb3Ioaz1jO2s8ZTtrKz1jKWw9YVtrXSxiPWFbaysxXSxsPHImJihyPWwpLGI8dCYmKHQ9YiksbD5oJiYoaD1sKSxiPmQmJihkPWIpO2g9TWF0aC5tYXgoaC1yLGQtdCk7aD0wIT09aD8xL2g6MH1TYyhmLGcsYyxyLHQsaCk7cmV0dXJuIGd9fSwkYT17YXJlYTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz0wLGQ9Yi0xLGU9MDtlPGI7ZD1lKyspYys9YVtkXS54KmFbZV0ueS1cbiAgICBhW2VdLngqYVtkXS55O3JldHVybi41KmN9LGlzQ2xvY2tXaXNlOmZ1bmN0aW9uKGEpe3JldHVybiAwPiRhLmFyZWEoYSl9LHRyaWFuZ3VsYXRlU2hhcGU6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3ZhciBiPWEubGVuZ3RoOzI8YiYmYVtiLTFdLmVxdWFscyhhWzBdKSYmYS5wb3AoKX1mdW5jdGlvbiBkKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspYS5wdXNoKGJbY10ueCksYS5wdXNoKGJbY10ueSl9dmFyIGU9W10sZj1bXSxnPVtdO2MoYSk7ZChlLGEpO3ZhciBoPWEubGVuZ3RoO2IuZm9yRWFjaChjKTtmb3IoYT0wO2E8Yi5sZW5ndGg7YSsrKWYucHVzaChoKSxoKz1iW2FdLmxlbmd0aCxkKGUsYlthXSk7Yj1MZy50cmlhbmd1bGF0ZShlLGYpO2ZvcihhPTA7YTxiLmxlbmd0aDthKz0zKWcucHVzaChiLnNsaWNlKGEsYSszKSk7cmV0dXJuIGd9fTtpYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7aWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWliO1xuICAgIExhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtMYS5wcm90b3R5cGUuY29uc3RydWN0b3I9TGE7TGEucHJvdG90eXBlLmdldEFycmF5cz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiksYT1hP0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEuYXJyYXkpOltdLGI9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ1dlwiKSxiPWI/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYi5hcnJheSk6W10sYz10aGlzLmluZGV4LGM9Yz9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjLmFycmF5KTpbXTtyZXR1cm57cG9zaXRpb246YSx1djpiLGluZGV4OmN9fTtMYS5wcm90b3R5cGUuYWRkU2hhcGVMaXN0PWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7Yi5hcnJheXM9dGhpcy5nZXRBcnJheXMoKTtmb3IodmFyIGQ9MDtkPGM7ZCsrKXRoaXMuYWRkU2hhcGUoYVtkXSxiKTt0aGlzLnNldEluZGV4KGIuYXJyYXlzLmluZGV4KTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsXG4gICAgbmV3IEIoYi5hcnJheXMucG9zaXRpb24sMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihiLmFycmF5cy51diwyKSl9O0xhLnByb3RvdHlwZS5hZGRTaGFwZT1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiLGMpe2J8fGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5FeHRydWRlR2VvbWV0cnk6IHZlYyBkb2VzIG5vdCBleGlzdFwiKTtyZXR1cm4gYi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGMpLmFkZChhKX1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1hLngtYi54O3ZhciBlPWEueS1iLnk7dmFyIGY9Yy54LWEueDt2YXIgZz1jLnktYS55LGg9ZCpkK2UqZTtpZihNYXRoLmFicyhkKmctZSpmKT5OdW1iZXIuRVBTSUxPTil7dmFyIGs9TWF0aC5zcXJ0KGgpLG09TWF0aC5zcXJ0KGYqZitnKmcpLGg9Yi54LWUvaztiPWIueStkL2s7Zz0oKGMueC1nL20taCkqZy0oYy55K2YvbS1iKSpmKS8oZCpnLWUqZik7Zj1oK2QqZy1hLng7ZD1iK2UqZy1hLnk7ZT1mKmYrZCpkO2lmKDI+PWUpcmV0dXJuIG5ldyBEKGYsXG4gICAgZCk7ZT1NYXRoLnNxcnQoZS8yKX1lbHNlIGE9ITEsZD5OdW1iZXIuRVBTSUxPTj9mPk51bWJlci5FUFNJTE9OJiYoYT0hMCk6ZDwtTnVtYmVyLkVQU0lMT04/ZjwtTnVtYmVyLkVQU0lMT04mJihhPSEwKTpNYXRoLnNpZ24oZSk9PT1NYXRoLnNpZ24oZykmJihhPSEwKSxhPyhmPS1lLGU9TWF0aC5zcXJ0KGgpKTooZj1kLGQ9ZSxlPU1hdGguc3FydChoLzIpKTtyZXR1cm4gbmV3IEQoZi9lLGQvZSl9ZnVuY3Rpb24gZShhLGIpe2ZvcihHPWEubGVuZ3RoOzA8PS0tRzspe3ZhciBjPUc7dmFyIGQ9Ry0xOzA+ZCYmKGQ9YS5sZW5ndGgtMSk7dmFyIGUsZj14KzIqdztmb3IoZT0wO2U8ZjtlKyspe3ZhciBnPVgqZSxtPVgqKGUrMSksbj1iK2QrZyxxPWIrZCttLG09YitjK207aChiK2MrZyk7aChuKTtoKG0pO2gobik7aChxKTtoKG0pO2c9bC5sZW5ndGgvMztnPUUuZ2VuZXJhdGVTaWRlV2FsbFVWKFMsbCxnLTYsZy0zLGctMixnLTEpO2soZ1swXSk7ayhnWzFdKTtrKGdbM10pO2soZ1sxXSk7XG4gICAgayhnWzJdKTtrKGdbM10pfX19ZnVuY3Rpb24gZihhLGIsYyl7ci5wdXNoKGEpO3IucHVzaChiKTtyLnB1c2goYyl9ZnVuY3Rpb24gZyhhLGIsYyl7aChhKTtoKGIpO2goYyk7YT1sLmxlbmd0aC8zO2E9RS5nZW5lcmF0ZVRvcFVWKFMsbCxhLTMsYS0yLGEtMSk7ayhhWzBdKTtrKGFbMV0pO2soYVsyXSl9ZnVuY3Rpb24gaChhKXtuLnB1c2gobC5sZW5ndGgvMyk7bC5wdXNoKHJbMyphKzBdKTtsLnB1c2goclszKmErMV0pO2wucHVzaChyWzMqYSsyXSl9ZnVuY3Rpb24gayhhKXt1LnB1c2goYS54KTt1LnB1c2goYS55KX12YXIgbT1iLmFycmF5cz9iLmFycmF5czp0aGlzLmdldEFycmF5cygpLGw9bS5wb3NpdGlvbixuPW0uaW5kZXgsdT1tLnV2LHI9W10sbT12b2lkIDAhPT1iLmFtb3VudD9iLmFtb3VudDoxMDAsdD12b2lkIDAhPT1iLmJldmVsVGhpY2tuZXNzP2IuYmV2ZWxUaGlja25lc3M6Nix2PXZvaWQgMCE9PWIuYmV2ZWxTaXplP2IuYmV2ZWxTaXplOnQtMix3PXZvaWQgMCE9PWIuYmV2ZWxTZWdtZW50cz9cbiAgICBiLmJldmVsU2VnbWVudHM6Myx6PXZvaWQgMCE9PWIuYmV2ZWxFbmFibGVkP2IuYmV2ZWxFbmFibGVkOiEwLHk9dm9pZCAwIT09Yi5jdXJ2ZVNlZ21lbnRzP2IuY3VydmVTZWdtZW50czoxMix4PXZvaWQgMCE9PWIuc3RlcHM/Yi5zdGVwczoxLEE9Yi5leHRydWRlUGF0aCxDPSExLEU9dm9pZCAwIT09Yi5VVkdlbmVyYXRvcj9iLlVWR2VuZXJhdG9yOmliLldvcmxkVVZHZW5lcmF0b3I7aWYoQSl7dmFyIEg9QS5nZXRTcGFjZWRQb2ludHMoeCk7Qz0hMDt6PSExO3ZhciBLPXZvaWQgMCE9PWIuZnJhbWVzP2IuZnJhbWVzOkEuY29tcHV0ZUZyZW5ldEZyYW1lcyh4LCExKTt2YXIgTD1uZXcgcDt2YXIgTT1uZXcgcDt2YXIgUD1uZXcgcH16fHwodj10PXc9MCk7dmFyIE8sUz10aGlzLHk9YS5leHRyYWN0UG9pbnRzKHkpO2E9eS5zaGFwZTt2YXIgUT15LmhvbGVzO2lmKCEkYS5pc0Nsb2NrV2lzZShhKSl7YT1hLnJldmVyc2UoKTt2YXIgTj0wO2ZvcihPPVEubGVuZ3RoO048TztOKyspe3ZhciBSPVxuICAgIFFbTl07JGEuaXNDbG9ja1dpc2UoUikmJihRW05dPVIucmV2ZXJzZSgpKX19dmFyIFU9JGEudHJpYW5ndWxhdGVTaGFwZShhLFEpLFc9YTtOPTA7Zm9yKE89US5sZW5ndGg7TjxPO04rKylSPVFbTl0sYT1hLmNvbmNhdChSKTt2YXIgVixYPWEubGVuZ3RoLFQsYmE9VS5sZW5ndGgseT1bXSxHPTA7dmFyIFk9Vy5sZW5ndGg7dmFyIGVhPVktMTtmb3IoVj1HKzE7RzxZO0crKyxlYSsrLFYrKyllYT09PVkmJihlYT0wKSxWPT09WSYmKFY9MCkseVtHXT1kKFdbR10sV1tlYV0sV1tWXSk7dmFyIEE9W10sY2E9eS5jb25jYXQoKTtOPTA7Zm9yKE89US5sZW5ndGg7TjxPO04rKyl7Uj1RW05dO3ZhciBhYT1bXTtHPTA7WT1SLmxlbmd0aDtlYT1ZLTE7Zm9yKFY9RysxO0c8WTtHKyssZWErKyxWKyspZWE9PT1ZJiYoZWE9MCksVj09PVkmJihWPTApLGFhW0ddPWQoUltHXSxSW2VhXSxSW1ZdKTtBLnB1c2goYWEpO2NhPWNhLmNvbmNhdChhYSl9Zm9yKGVhPTA7ZWE8dztlYSsrKXtZPWVhL3c7dmFyIGRhPVxuICAgIHQqTWF0aC5jb3MoWSpNYXRoLlBJLzIpO1Y9dipNYXRoLnNpbihZKk1hdGguUEkvMik7Rz0wO2ZvcihZPVcubGVuZ3RoO0c8WTtHKyspe3ZhciBmYT1jKFdbR10seVtHXSxWKTtmKGZhLngsZmEueSwtZGEpfU49MDtmb3IoTz1RLmxlbmd0aDtOPE87TisrKWZvcihSPVFbTl0sYWE9QVtOXSxHPTAsWT1SLmxlbmd0aDtHPFk7RysrKWZhPWMoUltHXSxhYVtHXSxWKSxmKGZhLngsZmEueSwtZGEpfVY9djtmb3IoRz0wO0c8WDtHKyspZmE9ej9jKGFbR10sY2FbR10sVik6YVtHXSxDPyhNLmNvcHkoSy5ub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcihmYS54KSxMLmNvcHkoSy5iaW5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKGZhLnkpLFAuY29weShIWzBdKS5hZGQoTSkuYWRkKEwpLGYoUC54LFAueSxQLnopKTpmKGZhLngsZmEueSwwKTtmb3IoWT0xO1k8PXg7WSsrKWZvcihHPTA7RzxYO0crKylmYT16P2MoYVtHXSxjYVtHXSxWKTphW0ddLEM/KE0uY29weShLLm5vcm1hbHNbWV0pLm11bHRpcGx5U2NhbGFyKGZhLngpLFxuICAgIEwuY29weShLLmJpbm9ybWFsc1tZXSkubXVsdGlwbHlTY2FsYXIoZmEueSksUC5jb3B5KEhbWV0pLmFkZChNKS5hZGQoTCksZihQLngsUC55LFAueikpOmYoZmEueCxmYS55LG0veCpZKTtmb3IoZWE9dy0xOzA8PWVhO2VhLS0pe1k9ZWEvdztkYT10Kk1hdGguY29zKFkqTWF0aC5QSS8yKTtWPXYqTWF0aC5zaW4oWSpNYXRoLlBJLzIpO0c9MDtmb3IoWT1XLmxlbmd0aDtHPFk7RysrKWZhPWMoV1tHXSx5W0ddLFYpLGYoZmEueCxmYS55LG0rZGEpO049MDtmb3IoTz1RLmxlbmd0aDtOPE87TisrKWZvcihSPVFbTl0sYWE9QVtOXSxHPTAsWT1SLmxlbmd0aDtHPFk7RysrKWZhPWMoUltHXSxhYVtHXSxWKSxDP2YoZmEueCxmYS55K0hbeC0xXS55LEhbeC0xXS54K2RhKTpmKGZhLngsZmEueSxtK2RhKX0oZnVuY3Rpb24oKXt2YXIgYT1sLmxlbmd0aC8zO2lmKHope3ZhciBjPTAqWDtmb3IoRz0wO0c8YmE7RysrKVQ9VVtHXSxnKFRbMl0rYyxUWzFdK2MsVFswXStjKTtjPVgqKHgrMip3KTtmb3IoRz1cbiAgICAwO0c8YmE7RysrKVQ9VVtHXSxnKFRbMF0rYyxUWzFdK2MsVFsyXStjKX1lbHNle2ZvcihHPTA7RzxiYTtHKyspVD1VW0ddLGcoVFsyXSxUWzFdLFRbMF0pO2ZvcihHPTA7RzxiYTtHKyspVD1VW0ddLGcoVFswXStYKngsVFsxXStYKngsVFsyXStYKngpfVMuYWRkR3JvdXAoYSxsLmxlbmd0aC8zLWEsdm9pZCAwIT09Yi5tYXRlcmlhbD9iLm1hdGVyaWFsOjApfSkoKTsoZnVuY3Rpb24oKXt2YXIgYT1sLmxlbmd0aC8zLGM9MDtlKFcsYyk7Yys9Vy5sZW5ndGg7Tj0wO2ZvcihPPVEubGVuZ3RoO048TztOKyspUj1RW05dLGUoUixjKSxjKz1SLmxlbmd0aDtTLmFkZEdyb3VwKGEsbC5sZW5ndGgvMy1hLHZvaWQgMCE9PWIuZXh0cnVkZU1hdGVyaWFsP2IuZXh0cnVkZU1hdGVyaWFsOjEpfSkoKTtiLmFycmF5c3x8KHRoaXMuc2V0SW5kZXgobiksdGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGwsMykpLHRoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQih1LDIpKSl9O2liLldvcmxkVVZHZW5lcmF0b3I9XG4gICAge2dlbmVyYXRlVG9wVVY6ZnVuY3Rpb24oYSxiLGMsZCxlKXthPWJbMypkXTtkPWJbMypkKzFdO3ZhciBmPWJbMyplXTtlPWJbMyplKzFdO3JldHVybltuZXcgRChiWzMqY10sYlszKmMrMV0pLG5ldyBEKGEsZCksbmV3IEQoZixlKV19LGdlbmVyYXRlU2lkZVdhbGxVVjpmdW5jdGlvbihhLGIsYyxkLGUsZil7YT1iWzMqY107dmFyIGc9YlszKmMrMV07Yz1iWzMqYysyXTt2YXIgaD1iWzMqZF0saz1iWzMqZCsxXTtkPWJbMypkKzJdO3ZhciBtPWJbMyplXSxsPWJbMyplKzFdO2U9YlszKmUrMl07dmFyIG49YlszKmZdLHA9YlszKmYrMV07Yj1iWzMqZisyXTtyZXR1cm4uMDE+TWF0aC5hYnMoZy1rKT9bbmV3IEQoYSwxLWMpLG5ldyBEKGgsMS1kKSxuZXcgRChtLDEtZSksbmV3IEQobiwxLWIpXTpbbmV3IEQoZywxLWMpLG5ldyBEKGssMS1kKSxuZXcgRChsLDEtZSksbmV3IEQocCwxLWIpXX19O1VjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtVYy5wcm90b3R5cGUuY29uc3RydWN0b3I9XG4gICAgVWM7YWMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTGEucHJvdG90eXBlKTthYy5wcm90b3R5cGUuY29uc3RydWN0b3I9YWM7VmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO1ZjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1WYzt3Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7d2IucHJvdG90eXBlLmNvbnN0cnVjdG9yPXdiO1djLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtXYy5wcm90b3R5cGUuY29uc3RydWN0b3I9V2M7YmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO2JjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1iYztYYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7WGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVhjO2NjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtjYy5wcm90b3R5cGUuY29uc3RydWN0b3I9Y2M7eGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO1xuICAgIHhiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj14Yjt4Yi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9TC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGZmKHRoaXMucGFyYW1ldGVycy5zaGFwZXMsYSl9O3liLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTt5Yi5wcm90b3R5cGUuY29uc3RydWN0b3I9eWI7eWIucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPUUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBmZih0aGlzLnBhcmFtZXRlcnMuc2hhcGVzLGEpfTtkYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7ZGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPWRjO3piLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTt6Yi5wcm90b3R5cGUuY29uc3RydWN0b3I9emI7YWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO2FiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1cbiAgICBhYjtZYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh6Yi5wcm90b3R5cGUpO1ljLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1ZYztaYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhYi5wcm90b3R5cGUpO1pjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1aYzskYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7JGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPSRjO2VjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtlYy5wcm90b3R5cGUuY29uc3RydWN0b3I9ZWM7dmFyIGthPU9iamVjdC5mcmVlemUoe1dpcmVmcmFtZUdlb21ldHJ5OlRiLFBhcmFtZXRyaWNHZW9tZXRyeTpIYyxQYXJhbWV0cmljQnVmZmVyR2VvbWV0cnk6VWIsVGV0cmFoZWRyb25HZW9tZXRyeTpKYyxUZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5OlZiLE9jdGFoZWRyb25HZW9tZXRyeTpLYyxPY3RhaGVkcm9uQnVmZmVyR2VvbWV0cnk6dWIsSWNvc2FoZWRyb25HZW9tZXRyeTpMYyxJY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5OldiLFxuICAgIERvZGVjYWhlZHJvbkdlb21ldHJ5Ok1jLERvZGVjYWhlZHJvbkJ1ZmZlckdlb21ldHJ5OlhiLFBvbHloZWRyb25HZW9tZXRyeTpJYyxQb2x5aGVkcm9uQnVmZmVyR2VvbWV0cnk6amEsVHViZUdlb21ldHJ5Ok5jLFR1YmVCdWZmZXJHZW9tZXRyeTpZYixUb3J1c0tub3RHZW9tZXRyeTpPYyxUb3J1c0tub3RCdWZmZXJHZW9tZXRyeTpaYixUb3J1c0dlb21ldHJ5OlBjLFRvcnVzQnVmZmVyR2VvbWV0cnk6JGIsVGV4dEdlb21ldHJ5OlVjLFRleHRCdWZmZXJHZW9tZXRyeTphYyxTcGhlcmVHZW9tZXRyeTpWYyxTcGhlcmVCdWZmZXJHZW9tZXRyeTp3YixSaW5nR2VvbWV0cnk6V2MsUmluZ0J1ZmZlckdlb21ldHJ5OmJjLFBsYW5lR2VvbWV0cnk6QWMsUGxhbmVCdWZmZXJHZW9tZXRyeTpyYixMYXRoZUdlb21ldHJ5OlhjLExhdGhlQnVmZmVyR2VvbWV0cnk6Y2MsU2hhcGVHZW9tZXRyeTp4YixTaGFwZUJ1ZmZlckdlb21ldHJ5OnliLEV4dHJ1ZGVHZW9tZXRyeTppYixFeHRydWRlQnVmZmVyR2VvbWV0cnk6TGEsXG4gICAgRWRnZXNHZW9tZXRyeTpkYyxDb25lR2VvbWV0cnk6WWMsQ29uZUJ1ZmZlckdlb21ldHJ5OlpjLEN5bGluZGVyR2VvbWV0cnk6emIsQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeTphYixDaXJjbGVHZW9tZXRyeTokYyxDaXJjbGVCdWZmZXJHZW9tZXRyeTplYyxCb3hHZW9tZXRyeTpNYixCb3hCdWZmZXJHZW9tZXRyeTpxYn0pO2ZjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtmYy5wcm90b3R5cGUuY29uc3RydWN0b3I9ZmM7ZmMucHJvdG90eXBlLmlzU2hhZG93TWF0ZXJpYWw9ITA7Z2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRmEucHJvdG90eXBlKTtnYy5wcm90b3R5cGUuY29uc3RydWN0b3I9Z2M7Z2MucHJvdG90eXBlLmlzUmF3U2hhZGVyTWF0ZXJpYWw9ITA7VWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO1VhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VYTtVYS5wcm90b3R5cGUuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbD0hMDtVYS5wcm90b3R5cGUuY29weT1cbiAgICBmdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmRlZmluZXM9e1NUQU5EQVJEOlwiXCJ9O3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLnJvdWdobmVzcz1hLnJvdWdobmVzczt0aGlzLm1ldGFsbmVzcz1hLm1ldGFsbmVzczt0aGlzLm1hcD1hLm1hcDt0aGlzLmxpZ2h0TWFwPWEubGlnaHRNYXA7dGhpcy5saWdodE1hcEludGVuc2l0eT1hLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9YS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KGEuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9YS5lbWlzc2l2ZU1hcDt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PWEuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5idW1wTWFwPWEuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1hLmJ1bXBTY2FsZTt0aGlzLm5vcm1hbE1hcD1hLm5vcm1hbE1hcDt0aGlzLm5vcm1hbFNjYWxlLmNvcHkoYS5ub3JtYWxTY2FsZSk7XG4gICAgdGhpcy5kaXNwbGFjZW1lbnRNYXA9YS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1hLmRpc3BsYWNlbWVudFNjYWxlO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz1hLmRpc3BsYWNlbWVudEJpYXM7dGhpcy5yb3VnaG5lc3NNYXA9YS5yb3VnaG5lc3NNYXA7dGhpcy5tZXRhbG5lc3NNYXA9YS5tZXRhbG5lc3NNYXA7dGhpcy5hbHBoYU1hcD1hLmFscGhhTWFwO3RoaXMuZW52TWFwPWEuZW52TWFwO3RoaXMuZW52TWFwSW50ZW5zaXR5PWEuZW52TWFwSW50ZW5zaXR5O3RoaXMucmVmcmFjdGlvblJhdGlvPWEucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1hLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1cbiAgICBhLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1hLm1vcnBoTm9ybWFscztyZXR1cm4gdGhpc307QWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVWEucHJvdG90eXBlKTtBYi5wcm90b3R5cGUuY29uc3RydWN0b3I9QWI7QWIucHJvdG90eXBlLmlzTWVzaFBoeXNpY2FsTWF0ZXJpYWw9ITA7QWIucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7VWEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGVmaW5lcz17UEhZU0lDQUw6XCJcIn07dGhpcy5yZWZsZWN0aXZpdHk9YS5yZWZsZWN0aXZpdHk7dGhpcy5jbGVhckNvYXQ9YS5jbGVhckNvYXQ7dGhpcy5jbGVhckNvYXRSb3VnaG5lc3M9YS5jbGVhckNvYXRSb3VnaG5lc3M7cmV0dXJuIHRoaXN9O01hLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtNYS5wcm90b3R5cGUuY29uc3RydWN0b3I9TWE7TWEucHJvdG90eXBlLmlzTWVzaFBob25nTWF0ZXJpYWw9ITA7TWEucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsXG4gICAgYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMuc3BlY3VsYXIuY29weShhLnNwZWN1bGFyKTt0aGlzLnNoaW5pbmVzcz1hLnNoaW5pbmVzczt0aGlzLm1hcD1hLm1hcDt0aGlzLmxpZ2h0TWFwPWEubGlnaHRNYXA7dGhpcy5saWdodE1hcEludGVuc2l0eT1hLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9YS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KGEuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9YS5lbWlzc2l2ZU1hcDt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PWEuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5idW1wTWFwPWEuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1hLmJ1bXBTY2FsZTt0aGlzLm5vcm1hbE1hcD1hLm5vcm1hbE1hcDt0aGlzLm5vcm1hbFNjYWxlLmNvcHkoYS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9YS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1cbiAgICBhLmRpc3BsYWNlbWVudFNjYWxlO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz1hLmRpc3BsYWNlbWVudEJpYXM7dGhpcy5zcGVjdWxhck1hcD1hLnNwZWN1bGFyTWFwO3RoaXMuYWxwaGFNYXA9YS5hbHBoYU1hcDt0aGlzLmVudk1hcD1hLmVudk1hcDt0aGlzLmNvbWJpbmU9YS5jb21iaW5lO3RoaXMucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5O3RoaXMucmVmcmFjdGlvblJhdGlvPWEucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1hLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1hLm1vcnBoTm9ybWFscztyZXR1cm4gdGhpc307QmIucHJvdG90eXBlPVxuICAgIE9iamVjdC5jcmVhdGUoTWEucHJvdG90eXBlKTtCYi5wcm90b3R5cGUuY29uc3RydWN0b3I9QmI7QmIucHJvdG90eXBlLmlzTWVzaFRvb25NYXRlcmlhbD0hMDtCYi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtNYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5ncmFkaWVudE1hcD1hLmdyYWRpZW50TWFwO3JldHVybiB0aGlzfTtDYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7Q2IucHJvdG90eXBlLmNvbnN0cnVjdG9yPUNiO0NiLnByb3RvdHlwZS5pc01lc2hOb3JtYWxNYXRlcmlhbD0hMDtDYi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmJ1bXBNYXA9YS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPWEuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPWEubm9ybWFsTWFwO3RoaXMubm9ybWFsU2NhbGUuY29weShhLm5vcm1hbFNjYWxlKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1hLmRpc3BsYWNlbWVudE1hcDtcbiAgICB0aGlzLmRpc3BsYWNlbWVudFNjYWxlPWEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLnNraW5uaW5nPWEuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9YS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9YS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O0RiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtEYi5wcm90b3R5cGUuY29uc3RydWN0b3I9RGI7RGIucHJvdG90eXBlLmlzTWVzaExhbWJlcnRNYXRlcmlhbD0hMDtEYi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5tYXA9YS5tYXA7dGhpcy5saWdodE1hcD1hLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9XG4gICAgYS5saWdodE1hcEludGVuc2l0eTt0aGlzLmFvTWFwPWEuYW9NYXA7dGhpcy5hb01hcEludGVuc2l0eT1hLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShhLmVtaXNzaXZlKTt0aGlzLmVtaXNzaXZlTWFwPWEuZW1pc3NpdmVNYXA7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT1hLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuc3BlY3VsYXJNYXA9YS5zcGVjdWxhck1hcDt0aGlzLmFscGhhTWFwPWEuYWxwaGFNYXA7dGhpcy5lbnZNYXA9YS5lbnZNYXA7dGhpcy5jb21iaW5lPWEuY29tYmluZTt0aGlzLnJlZmxlY3Rpdml0eT1hLnJlZmxlY3Rpdml0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1hLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9YS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49YS53aXJlZnJhbWVMaW5lam9pbjtcbiAgICB0aGlzLnNraW5uaW5nPWEuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9YS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9YS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O0ViLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFcucHJvdG90eXBlKTtFYi5wcm90b3R5cGUuY29uc3RydWN0b3I9RWI7RWIucHJvdG90eXBlLmlzTGluZURhc2hlZE1hdGVyaWFsPSEwO0ViLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1cucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuc2NhbGU9YS5zY2FsZTt0aGlzLmRhc2hTaXplPWEuZGFzaFNpemU7dGhpcy5nYXBTaXplPWEuZ2FwU2l6ZTtyZXR1cm4gdGhpc307dmFyIE1nPU9iamVjdC5mcmVlemUoe1NoYWRvd01hdGVyaWFsOmZjLFNwcml0ZU1hdGVyaWFsOmhiLFJhd1NoYWRlck1hdGVyaWFsOmdjLFNoYWRlck1hdGVyaWFsOkZhLFBvaW50c01hdGVyaWFsOkthLE1lc2hQaHlzaWNhbE1hdGVyaWFsOkFiLE1lc2hTdGFuZGFyZE1hdGVyaWFsOlVhLFxuICAgIE1lc2hQaG9uZ01hdGVyaWFsOk1hLE1lc2hUb29uTWF0ZXJpYWw6QmIsTWVzaE5vcm1hbE1hdGVyaWFsOkNiLE1lc2hMYW1iZXJ0TWF0ZXJpYWw6RGIsTWVzaERlcHRoTWF0ZXJpYWw6ZWIsTWVzaERpc3RhbmNlTWF0ZXJpYWw6ZmIsTWVzaEJhc2ljTWF0ZXJpYWw6QWEsTGluZURhc2hlZE1hdGVyaWFsOkViLExpbmVCYXNpY01hdGVyaWFsOlcsTWF0ZXJpYWw6UH0pLEliPXtlbmFibGVkOiExLGZpbGVzOnt9LGFkZDpmdW5jdGlvbihhLGIpeyExIT09dGhpcy5lbmFibGVkJiYodGhpcy5maWxlc1thXT1iKX0sZ2V0OmZ1bmN0aW9uKGEpe2lmKCExIT09dGhpcy5lbmFibGVkKXJldHVybiB0aGlzLmZpbGVzW2FdfSxyZW1vdmU6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuZmlsZXNbYV19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5maWxlcz17fX19LHhhPW5ldyBoZSxjYj17fTtPYmplY3QuYXNzaWduKE5hLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2b2lkIDA9PT1hJiYoYT1cbiAgICBcIlwiKTt2b2lkIDAhPT10aGlzLnBhdGgmJihhPXRoaXMucGF0aCthKTthPXRoaXMubWFuYWdlci5yZXNvbHZlVVJMKGEpO3ZhciBlPXRoaXMsZj1JYi5nZXQoYSk7aWYodm9pZCAwIT09ZilyZXR1cm4gZS5tYW5hZ2VyLml0ZW1TdGFydChhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YiYmYihmKTtlLm1hbmFnZXIuaXRlbUVuZChhKX0sMCksZjtpZih2b2lkIDAhPT1jYlthXSljYlthXS5wdXNoKHtvbkxvYWQ6YixvblByb2dyZXNzOmMsb25FcnJvcjpkfSk7ZWxzZXt2YXIgZz1hLm1hdGNoKC9eZGF0YTooLio/KSg7YmFzZTY0KT8sKC4qKSQvKTtpZihnKXtjPWdbMV07dmFyIGg9ISFnWzJdLGc9Z1szXSxnPXdpbmRvdy5kZWNvZGVVUklDb21wb25lbnQoZyk7aCYmKGc9d2luZG93LmF0b2IoZykpO3RyeXt2YXIgaz0odGhpcy5yZXNwb25zZVR5cGV8fFwiXCIpLnRvTG93ZXJDYXNlKCk7c3dpdGNoKGspe2Nhc2UgXCJhcnJheWJ1ZmZlclwiOmNhc2UgXCJibG9iXCI6Zm9yKHZhciBtPW5ldyBVaW50OEFycmF5KGcubGVuZ3RoKSxcbiAgICBoPTA7aDxnLmxlbmd0aDtoKyspbVtoXT1nLmNoYXJDb2RlQXQoaCk7dmFyIGw9XCJibG9iXCI9PT1rP25ldyBCbG9iKFttLmJ1ZmZlcl0se3R5cGU6Y30pOm0uYnVmZmVyO2JyZWFrO2Nhc2UgXCJkb2N1bWVudFwiOmw9KG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhnLGMpO2JyZWFrO2Nhc2UgXCJqc29uXCI6bD1KU09OLnBhcnNlKGcpO2JyZWFrO2RlZmF1bHQ6bD1nfXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YiYmYihsKTtlLm1hbmFnZXIuaXRlbUVuZChhKX0sMCl9Y2F0Y2godSl7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtkJiZkKHUpO2UubWFuYWdlci5pdGVtRW5kKGEpO2UubWFuYWdlci5pdGVtRXJyb3IoYSl9LDApfX1lbHNle2NiW2FdPVtdO2NiW2FdLnB1c2goe29uTG9hZDpiLG9uUHJvZ3Jlc3M6YyxvbkVycm9yOmR9KTt2YXIgbj1uZXcgWE1MSHR0cFJlcXVlc3Q7bi5vcGVuKFwiR0VUXCIsYSwhMCk7bi5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKGIpe3ZhciBjPVxuICAgIHRoaXMucmVzcG9uc2U7SWIuYWRkKGEsYyk7dmFyIGQ9Y2JbYV07ZGVsZXRlIGNiW2FdO2lmKDIwMD09PXRoaXMuc3RhdHVzKXtmb3IodmFyIGY9MCxnPWQubGVuZ3RoO2Y8ZztmKyspe3ZhciBoPWRbZl07aWYoaC5vbkxvYWQpaC5vbkxvYWQoYyl9ZS5tYW5hZ2VyLml0ZW1FbmQoYSl9ZWxzZSBpZigwPT09dGhpcy5zdGF0dXMpe2NvbnNvbGUud2FybihcIlRIUkVFLkZpbGVMb2FkZXI6IEhUVFAgU3RhdHVzIDAgcmVjZWl2ZWQuXCIpO2Y9MDtmb3IoZz1kLmxlbmd0aDtmPGc7ZisrKWlmKGg9ZFtmXSxoLm9uTG9hZCloLm9uTG9hZChjKTtlLm1hbmFnZXIuaXRlbUVuZChhKX1lbHNle2Y9MDtmb3IoZz1kLmxlbmd0aDtmPGc7ZisrKWlmKGg9ZFtmXSxoLm9uRXJyb3IpaC5vbkVycm9yKGIpO2UubWFuYWdlci5pdGVtRW5kKGEpO2UubWFuYWdlci5pdGVtRXJyb3IoYSl9fSwhMSk7bi5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihiKXtmb3IodmFyIGM9Y2JbYV0sZD0wLGU9XG4gICAgYy5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9Y1tkXTtpZihmLm9uUHJvZ3Jlc3MpZi5vblByb2dyZXNzKGIpfX0sITEpO24uYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsZnVuY3Rpb24oYil7dmFyIGM9Y2JbYV07ZGVsZXRlIGNiW2FdO2Zvcih2YXIgZD0wLGY9Yy5sZW5ndGg7ZDxmO2QrKyl7dmFyIGc9Y1tkXTtpZihnLm9uRXJyb3IpZy5vbkVycm9yKGIpfWUubWFuYWdlci5pdGVtRW5kKGEpO2UubWFuYWdlci5pdGVtRXJyb3IoYSl9LCExKTt2b2lkIDAhPT10aGlzLnJlc3BvbnNlVHlwZSYmKG4ucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUeXBlKTt2b2lkIDAhPT10aGlzLndpdGhDcmVkZW50aWFscyYmKG4ud2l0aENyZWRlbnRpYWxzPXRoaXMud2l0aENyZWRlbnRpYWxzKTtuLm92ZXJyaWRlTWltZVR5cGUmJm4ub3ZlcnJpZGVNaW1lVHlwZSh2b2lkIDAhPT10aGlzLm1pbWVUeXBlP3RoaXMubWltZVR5cGU6XCJ0ZXh0L3BsYWluXCIpO2ZvcihoIGluIHRoaXMucmVxdWVzdEhlYWRlciluLnNldFJlcXVlc3RIZWFkZXIoaCxcbiAgICB0aGlzLnJlcXVlc3RIZWFkZXJbaF0pO24uc2VuZChudWxsKX1lLm1hbmFnZXIuaXRlbVN0YXJ0KGEpO3JldHVybiBufX0sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9YTtyZXR1cm4gdGhpc30sc2V0UmVzcG9uc2VUeXBlOmZ1bmN0aW9uKGEpe3RoaXMucmVzcG9uc2VUeXBlPWE7cmV0dXJuIHRoaXN9LHNldFdpdGhDcmVkZW50aWFsczpmdW5jdGlvbihhKXt0aGlzLndpdGhDcmVkZW50aWFscz1hO3JldHVybiB0aGlzfSxzZXRNaW1lVHlwZTpmdW5jdGlvbihhKXt0aGlzLm1pbWVUeXBlPWE7cmV0dXJuIHRoaXN9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0SGVhZGVyPWE7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmFzc2lnbihnZi5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShlKXttLmxvYWQoYVtlXSxmdW5jdGlvbihhKXthPWcuX3BhcnNlcihhLCEwKTtoW2VdPXt3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodCxcbiAgICBmb3JtYXQ6YS5mb3JtYXQsbWlwbWFwczphLm1pcG1hcHN9O2YrPTE7Nj09PWYmJigxPT09YS5taXBtYXBDb3VudCYmKGsubWluRmlsdGVyPTEwMDYpLGsuZm9ybWF0PWEuZm9ybWF0LGsubmVlZHNVcGRhdGU9ITAsYiYmYihrKSl9LGMsZCl9dmFyIGYsZz10aGlzLGg9W10saz1uZXcgU2I7ay5pbWFnZT1oO3ZhciBtPW5ldyBOYSh0aGlzLm1hbmFnZXIpO20uc2V0UGF0aCh0aGlzLnBhdGgpO20uc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIik7aWYoQXJyYXkuaXNBcnJheShhKSlmb3IodmFyIGw9Zj0wLG49YS5sZW5ndGg7bDxuOysrbCllKGwpO2Vsc2UgbS5sb2FkKGEsZnVuY3Rpb24oYSl7YT1nLl9wYXJzZXIoYSwhMCk7aWYoYS5pc0N1YmVtYXApZm9yKHZhciBjPWEubWlwbWFwcy5sZW5ndGgvYS5taXBtYXBDb3VudCxkPTA7ZDxjO2QrKyl7aFtkXT17bWlwbWFwczpbXX07Zm9yKHZhciBlPTA7ZTxhLm1pcG1hcENvdW50O2UrKyloW2RdLm1pcG1hcHMucHVzaChhLm1pcG1hcHNbZCpcbiAgICBhLm1pcG1hcENvdW50K2VdKSxoW2RdLmZvcm1hdD1hLmZvcm1hdCxoW2RdLndpZHRoPWEud2lkdGgsaFtkXS5oZWlnaHQ9YS5oZWlnaHR9ZWxzZSBrLmltYWdlLndpZHRoPWEud2lkdGgsay5pbWFnZS5oZWlnaHQ9YS5oZWlnaHQsay5taXBtYXBzPWEubWlwbWFwczsxPT09YS5taXBtYXBDb3VudCYmKGsubWluRmlsdGVyPTEwMDYpO2suZm9ybWF0PWEuZm9ybWF0O2submVlZHNVcGRhdGU9ITA7YiYmYihrKX0sYyxkKTtyZXR1cm4ga30sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9YTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKGllLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9bmV3IGxiLGc9bmV3IE5hKHRoaXMubWFuYWdlcik7Zy5zZXRSZXNwb25zZVR5cGUoXCJhcnJheWJ1ZmZlclwiKTtnLmxvYWQoYSxmdW5jdGlvbihhKXtpZihhPWUuX3BhcnNlcihhKSl2b2lkIDAhPT1hLmltYWdlP2YuaW1hZ2U9YS5pbWFnZTp2b2lkIDAhPT1cbiAgICBhLmRhdGEmJihmLmltYWdlLndpZHRoPWEud2lkdGgsZi5pbWFnZS5oZWlnaHQ9YS5oZWlnaHQsZi5pbWFnZS5kYXRhPWEuZGF0YSksZi53cmFwUz12b2lkIDAhPT1hLndyYXBTP2Eud3JhcFM6MTAwMSxmLndyYXBUPXZvaWQgMCE9PWEud3JhcFQ/YS53cmFwVDoxMDAxLGYubWFnRmlsdGVyPXZvaWQgMCE9PWEubWFnRmlsdGVyP2EubWFnRmlsdGVyOjEwMDYsZi5taW5GaWx0ZXI9dm9pZCAwIT09YS5taW5GaWx0ZXI/YS5taW5GaWx0ZXI6MTAwOCxmLmFuaXNvdHJvcHk9dm9pZCAwIT09YS5hbmlzb3Ryb3B5P2EuYW5pc290cm9weToxLHZvaWQgMCE9PWEuZm9ybWF0JiYoZi5mb3JtYXQ9YS5mb3JtYXQpLHZvaWQgMCE9PWEudHlwZSYmKGYudHlwZT1hLnR5cGUpLHZvaWQgMCE9PWEubWlwbWFwcyYmKGYubWlwbWFwcz1hLm1pcG1hcHMpLDE9PT1hLm1pcG1hcENvdW50JiYoZi5taW5GaWx0ZXI9MTAwNiksZi5uZWVkc1VwZGF0ZT0hMCxiJiZiKGYsYSl9LGMsZCk7cmV0dXJuIGZ9fSk7T2JqZWN0LmFzc2lnbihhZC5wcm90b3R5cGUsXG4gICAge2Nyb3NzT3JpZ2luOlwiQW5vbnltb3VzXCIsbG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2b2lkIDA9PT1hJiYoYT1cIlwiKTt2b2lkIDAhPT10aGlzLnBhdGgmJihhPXRoaXMucGF0aCthKTthPXRoaXMubWFuYWdlci5yZXNvbHZlVVJMKGEpO3ZhciBlPXRoaXMsZj1JYi5nZXQoYSk7aWYodm9pZCAwIT09ZilyZXR1cm4gZS5tYW5hZ2VyLml0ZW1TdGFydChhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YiYmYihmKTtlLm1hbmFnZXIuaXRlbUVuZChhKX0sMCksZjtjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImltZ1wiKTtjLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXtJYi5hZGQoYSx0aGlzKTtiJiZiKHRoaXMpO2UubWFuYWdlci5pdGVtRW5kKGEpfSwhMSk7Yy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbihiKXtkJiZkKGIpO2UubWFuYWdlci5pdGVtRW5kKGEpO2UubWFuYWdlci5pdGVtRXJyb3IoYSl9LFxuICAgICExKTtcImRhdGE6XCIhPT1hLnN1YnN0cigwLDUpJiZ2b2lkIDAhPT10aGlzLmNyb3NzT3JpZ2luJiYoYy5jcm9zc09yaWdpbj10aGlzLmNyb3NzT3JpZ2luKTtlLm1hbmFnZXIuaXRlbVN0YXJ0KGEpO2Muc3JjPWE7cmV0dXJuIGN9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YTtyZXR1cm4gdGhpc30sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9YTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKGplLnByb3RvdHlwZSx7Y3Jvc3NPcmlnaW46XCJBbm9ueW1vdXNcIixsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYyl7Zy5sb2FkKGFbY10sZnVuY3Rpb24oYSl7Zi5pbWFnZXNbY109YTtoKys7Nj09PWgmJihmLm5lZWRzVXBkYXRlPSEwLGImJmIoZikpfSx2b2lkIDAsZCl9dmFyIGY9bmV3IGRiLGc9bmV3IGFkKHRoaXMubWFuYWdlcik7Zy5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtnLnNldFBhdGgodGhpcy5wYXRoKTtcbiAgICB2YXIgaD0wO2ZvcihjPTA7YzxhLmxlbmd0aDsrK2MpZShjKTtyZXR1cm4gZn0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hO3JldHVybiB0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1hO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oQWQucHJvdG90eXBlLHtjcm9zc09yaWdpbjpcIkFub255bW91c1wiLGxvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bmV3IFUsZj1uZXcgYWQodGhpcy5tYW5hZ2VyKTtmLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2Yuc2V0UGF0aCh0aGlzLnBhdGgpO2YubG9hZChhLGZ1bmN0aW9uKGMpe2UuaW1hZ2U9YztjPTA8YS5zZWFyY2goL1xcLihqcGd8anBlZykkLyl8fDA9PT1hLnNlYXJjaCgvXmRhdGFcXDppbWFnZVxcL2pwZWcvKTtlLmZvcm1hdD1jPzEwMjI6MTAyMztlLm5lZWRzVXBkYXRlPSEwO3ZvaWQgMCE9PWImJmIoZSl9LGMsZCk7cmV0dXJuIGV9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49XG4gICAgYTtyZXR1cm4gdGhpc30sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9YTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKEMucHJvdG90eXBlLHtnZXRQb2ludDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiAuZ2V0UG9pbnQoKSBub3QgaW1wbGVtZW50ZWQuXCIpO3JldHVybiBudWxsfSxnZXRQb2ludEF0OmZ1bmN0aW9uKGEsYil7YT10aGlzLmdldFV0b1RtYXBwaW5nKGEpO3JldHVybiB0aGlzLmdldFBvaW50KGEsYil9LGdldFBvaW50czpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT01KTtmb3IodmFyIGI9W10sYz0wO2M8PWE7YysrKWIucHVzaCh0aGlzLmdldFBvaW50KGMvYSkpO3JldHVybiBifSxnZXRTcGFjZWRQb2ludHM6ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9NSk7Zm9yKHZhciBiPVtdLGM9MDtjPD1hO2MrKyliLnB1c2godGhpcy5nZXRQb2ludEF0KGMvYSkpO3JldHVybiBifSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldExlbmd0aHMoKTtcbiAgICByZXR1cm4gYVthLmxlbmd0aC0xXX0sZ2V0TGVuZ3RoczpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT10aGlzLmFyY0xlbmd0aERpdmlzaW9ucyk7aWYodGhpcy5jYWNoZUFyY0xlbmd0aHMmJnRoaXMuY2FjaGVBcmNMZW5ndGhzLmxlbmd0aD09PWErMSYmIXRoaXMubmVlZHNVcGRhdGUpcmV0dXJuIHRoaXMuY2FjaGVBcmNMZW5ndGhzO3RoaXMubmVlZHNVcGRhdGU9ITE7dmFyIGI9W10sYz10aGlzLmdldFBvaW50KDApLGQsZT0wO2IucHVzaCgwKTtmb3IoZD0xO2Q8PWE7ZCsrKXt2YXIgZj10aGlzLmdldFBvaW50KGQvYSk7ZSs9Zi5kaXN0YW5jZVRvKGMpO2IucHVzaChlKTtjPWZ9cmV0dXJuIHRoaXMuY2FjaGVBcmNMZW5ndGhzPWJ9LHVwZGF0ZUFyY0xlbmd0aHM6ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwO3RoaXMuZ2V0TGVuZ3RocygpfSxnZXRVdG9UbWFwcGluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGVuZ3RocygpLGQ9Yy5sZW5ndGg7Yj1iP2I6YSpcbiAgICBjW2QtMV07Zm9yKHZhciBlPTAsZj1kLTEsZztlPD1mOylpZihhPU1hdGguZmxvb3IoZSsoZi1lKS8yKSxnPWNbYV0tYiwwPmcpZT1hKzE7ZWxzZSBpZigwPGcpZj1hLTE7ZWxzZXtmPWE7YnJlYWt9YT1mO2lmKGNbYV09PT1iKXJldHVybiBhLyhkLTEpO2U9Y1thXTtyZXR1cm4oYSsoYi1lKS8oY1thKzFdLWUpKS8oZC0xKX0sZ2V0VGFuZ2VudDpmdW5jdGlvbihhKXt2YXIgYj1hLTFFLTQ7YSs9MUUtNDswPmImJihiPTApOzE8YSYmKGE9MSk7Yj10aGlzLmdldFBvaW50KGIpO3JldHVybiB0aGlzLmdldFBvaW50KGEpLmNsb25lKCkuc3ViKGIpLm5vcm1hbGl6ZSgpfSxnZXRUYW5nZW50QXQ6ZnVuY3Rpb24oYSl7YT10aGlzLmdldFV0b1RtYXBwaW5nKGEpO3JldHVybiB0aGlzLmdldFRhbmdlbnQoYSl9LGNvbXB1dGVGcmVuZXRGcmFtZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgcCxkPVtdLGU9W10sZj1bXSxnPW5ldyBwLGg9bmV3IE8saztmb3Ioaz0wO2s8PWE7aysrKXt2YXIgbT1cbiAgICBrL2E7ZFtrXT10aGlzLmdldFRhbmdlbnRBdChtKTtkW2tdLm5vcm1hbGl6ZSgpfWVbMF09bmV3IHA7ZlswXT1uZXcgcDtrPU51bWJlci5NQVhfVkFMVUU7bT1NYXRoLmFicyhkWzBdLngpO3ZhciBsPU1hdGguYWJzKGRbMF0ueSksbj1NYXRoLmFicyhkWzBdLnopO208PWsmJihrPW0sYy5zZXQoMSwwLDApKTtsPD1rJiYoaz1sLGMuc2V0KDAsMSwwKSk7bjw9ayYmYy5zZXQoMCwwLDEpO2cuY3Jvc3NWZWN0b3JzKGRbMF0sYykubm9ybWFsaXplKCk7ZVswXS5jcm9zc1ZlY3RvcnMoZFswXSxnKTtmWzBdLmNyb3NzVmVjdG9ycyhkWzBdLGVbMF0pO2ZvcihrPTE7azw9YTtrKyspZVtrXT1lW2stMV0uY2xvbmUoKSxmW2tdPWZbay0xXS5jbG9uZSgpLGcuY3Jvc3NWZWN0b3JzKGRbay0xXSxkW2tdKSxnLmxlbmd0aCgpPk51bWJlci5FUFNJTE9OJiYoZy5ub3JtYWxpemUoKSxjPU1hdGguYWNvcyhRLmNsYW1wKGRbay0xXS5kb3QoZFtrXSksLTEsMSkpLGVba10uYXBwbHlNYXRyaXg0KGgubWFrZVJvdGF0aW9uQXhpcyhnLFxuICAgIGMpKSksZltrXS5jcm9zc1ZlY3RvcnMoZFtrXSxlW2tdKTtpZighMD09PWIpZm9yKGM9TWF0aC5hY29zKFEuY2xhbXAoZVswXS5kb3QoZVthXSksLTEsMSkpLGMvPWEsMDxkWzBdLmRvdChnLmNyb3NzVmVjdG9ycyhlWzBdLGVbYV0pKSYmKGM9LWMpLGs9MTtrPD1hO2srKyllW2tdLmFwcGx5TWF0cml4NChoLm1ha2VSb3RhdGlvbkF4aXMoZFtrXSxjKmspKSxmW2tdLmNyb3NzVmVjdG9ycyhkW2tdLGVba10pO3JldHVybnt0YW5nZW50czpkLG5vcm1hbHM6ZSxiaW5vcm1hbHM6Zn19LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYXJjTGVuZ3RoRGl2aXNpb25zPWEuYXJjTGVuZ3RoRGl2aXNpb25zO3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgYT17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJDdXJ2ZVwiLGdlbmVyYXRvcjpcIkN1cnZlLnRvSlNPTlwifX07YS5hcmNMZW5ndGhEaXZpc2lvbnM9XG4gICAgdGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM7YS50eXBlPXRoaXMudHlwZTtyZXR1cm4gYX0sZnJvbUpTT046ZnVuY3Rpb24oYSl7dGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9YS5hcmNMZW5ndGhEaXZpc2lvbnM7cmV0dXJuIHRoaXN9fSk7QmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpO0JhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1CYTtCYS5wcm90b3R5cGUuaXNFbGxpcHNlQ3VydmU9ITA7QmEucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgRDtmb3IodmFyIGM9MipNYXRoLlBJLGQ9dGhpcy5hRW5kQW5nbGUtdGhpcy5hU3RhcnRBbmdsZSxlPU1hdGguYWJzKGQpPE51bWJlci5FUFNJTE9OOzA+ZDspZCs9Yztmb3IoO2Q+YzspZC09YztkPE51bWJlci5FUFNJTE9OJiYoZD1lPzA6Yyk7ITAhPT10aGlzLmFDbG9ja3dpc2V8fGV8fChkPWQ9PT1jPy1jOmQtYyk7Yz10aGlzLmFTdGFydEFuZ2xlK2EqZDthPXRoaXMuYVgrdGhpcy54UmFkaXVzKlxuICAgIE1hdGguY29zKGMpO3ZhciBmPXRoaXMuYVkrdGhpcy55UmFkaXVzKk1hdGguc2luKGMpOzAhPT10aGlzLmFSb3RhdGlvbiYmKGM9TWF0aC5jb3ModGhpcy5hUm90YXRpb24pLGQ9TWF0aC5zaW4odGhpcy5hUm90YXRpb24pLGU9YS10aGlzLmFYLGYtPXRoaXMuYVksYT1lKmMtZipkK3RoaXMuYVgsZj1lKmQrZipjK3RoaXMuYVkpO3JldHVybiBiLnNldChhLGYpfTtCYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmFYPWEuYVg7dGhpcy5hWT1hLmFZO3RoaXMueFJhZGl1cz1hLnhSYWRpdXM7dGhpcy55UmFkaXVzPWEueVJhZGl1czt0aGlzLmFTdGFydEFuZ2xlPWEuYVN0YXJ0QW5nbGU7dGhpcy5hRW5kQW5nbGU9YS5hRW5kQW5nbGU7dGhpcy5hQ2xvY2t3aXNlPWEuYUNsb2Nrd2lzZTt0aGlzLmFSb3RhdGlvbj1hLmFSb3RhdGlvbjtyZXR1cm4gdGhpc307QmEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPVxuICAgIEMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EuYVg9dGhpcy5hWDthLmFZPXRoaXMuYVk7YS54UmFkaXVzPXRoaXMueFJhZGl1czthLnlSYWRpdXM9dGhpcy55UmFkaXVzO2EuYVN0YXJ0QW5nbGU9dGhpcy5hU3RhcnRBbmdsZTthLmFFbmRBbmdsZT10aGlzLmFFbmRBbmdsZTthLmFDbG9ja3dpc2U9dGhpcy5hQ2xvY2t3aXNlO2EuYVJvdGF0aW9uPXRoaXMuYVJvdGF0aW9uO3JldHVybiBhfTtCYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMuYVg9YS5hWDt0aGlzLmFZPWEuYVk7dGhpcy54UmFkaXVzPWEueFJhZGl1czt0aGlzLnlSYWRpdXM9YS55UmFkaXVzO3RoaXMuYVN0YXJ0QW5nbGU9YS5hU3RhcnRBbmdsZTt0aGlzLmFFbmRBbmdsZT1hLmFFbmRBbmdsZTt0aGlzLmFDbG9ja3dpc2U9YS5hQ2xvY2t3aXNlO3RoaXMuYVJvdGF0aW9uPWEuYVJvdGF0aW9uO3JldHVybiB0aGlzfTtoYy5wcm90b3R5cGU9XG4gICAgT2JqZWN0LmNyZWF0ZShCYS5wcm90b3R5cGUpO2hjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oYztoYy5wcm90b3R5cGUuaXNBcmNDdXJ2ZT0hMDt2YXIgVGQ9bmV3IHAsRWU9bmV3IGtlLEZlPW5ldyBrZSxHZT1uZXcga2U7Y2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpO2NhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jYTtjYS5wcm90b3R5cGUuaXNDYXRtdWxsUm9tQ3VydmUzPSEwO2NhLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhLGIpe2I9Ynx8bmV3IHA7dmFyIGM9dGhpcy5wb2ludHMsZD1jLmxlbmd0aDthKj1kLSh0aGlzLmNsb3NlZD8wOjEpO3ZhciBlPU1hdGguZmxvb3IoYSk7YS09ZTt0aGlzLmNsb3NlZD9lKz0wPGU/MDooTWF0aC5mbG9vcihNYXRoLmFicyhlKS9jLmxlbmd0aCkrMSkqYy5sZW5ndGg6MD09PWEmJmU9PT1kLTEmJihlPWQtMixhPTEpO2lmKHRoaXMuY2xvc2VkfHwwPGUpdmFyIGY9Y1soZS0xKSVkXTtlbHNlIFRkLnN1YlZlY3RvcnMoY1swXSxcbiAgICBjWzFdKS5hZGQoY1swXSksZj1UZDt2YXIgZz1jW2UlZF07dmFyIGg9Y1soZSsxKSVkXTt0aGlzLmNsb3NlZHx8ZSsyPGQ/Yz1jWyhlKzIpJWRdOihUZC5zdWJWZWN0b3JzKGNbZC0xXSxjW2QtMl0pLmFkZChjW2QtMV0pLGM9VGQpO2lmKFwiY2VudHJpcGV0YWxcIj09PXRoaXMuY3VydmVUeXBlfHxcImNob3JkYWxcIj09PXRoaXMuY3VydmVUeXBlKXt2YXIgaz1cImNob3JkYWxcIj09PXRoaXMuY3VydmVUeXBlPy41Oi4yNSxkPU1hdGgucG93KGYuZGlzdGFuY2VUb1NxdWFyZWQoZyksayksZT1NYXRoLnBvdyhnLmRpc3RhbmNlVG9TcXVhcmVkKGgpLGspLGs9TWF0aC5wb3coaC5kaXN0YW5jZVRvU3F1YXJlZChjKSxrKTsxRS00PmUmJihlPTEpOzFFLTQ+ZCYmKGQ9ZSk7MUUtND5rJiYoaz1lKTtFZS5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20oZi54LGcueCxoLngsYy54LGQsZSxrKTtGZS5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20oZi55LGcueSxoLnksYy55LGQsZSxrKTtHZS5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20oZi56LFxuICAgIGcueixoLnosYy56LGQsZSxrKX1lbHNlXCJjYXRtdWxscm9tXCI9PT10aGlzLmN1cnZlVHlwZSYmKEVlLmluaXRDYXRtdWxsUm9tKGYueCxnLngsaC54LGMueCx0aGlzLnRlbnNpb24pLEZlLmluaXRDYXRtdWxsUm9tKGYueSxnLnksaC55LGMueSx0aGlzLnRlbnNpb24pLEdlLmluaXRDYXRtdWxsUm9tKGYueixnLnosaC56LGMueix0aGlzLnRlbnNpb24pKTtiLnNldChFZS5jYWxjKGEpLEZlLmNhbGMoYSksR2UuY2FsYyhhKSk7cmV0dXJuIGJ9O2NhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgYj0wLGM9YS5wb2ludHMubGVuZ3RoO2I8YztiKyspdGhpcy5wb2ludHMucHVzaChhLnBvaW50c1tiXS5jbG9uZSgpKTt0aGlzLmNsb3NlZD1hLmNsb3NlZDt0aGlzLmN1cnZlVHlwZT1hLmN1cnZlVHlwZTt0aGlzLnRlbnNpb249YS50ZW5zaW9uO3JldHVybiB0aGlzfTtjYS5wcm90b3R5cGUudG9KU09OPVxuICAgIGZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS5wb2ludHM9W107Zm9yKHZhciBiPTAsYz10aGlzLnBvaW50cy5sZW5ndGg7YjxjO2IrKylhLnBvaW50cy5wdXNoKHRoaXMucG9pbnRzW2JdLnRvQXJyYXkoKSk7YS5jbG9zZWQ9dGhpcy5jbG9zZWQ7YS5jdXJ2ZVR5cGU9dGhpcy5jdXJ2ZVR5cGU7YS50ZW5zaW9uPXRoaXMudGVuc2lvbjtyZXR1cm4gYX07Y2EucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxhKTt0aGlzLnBvaW50cz1bXTtmb3IodmFyIGI9MCxjPWEucG9pbnRzLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hLnBvaW50c1tiXTt0aGlzLnBvaW50cy5wdXNoKChuZXcgcCkuZnJvbUFycmF5KGQpKX10aGlzLmNsb3NlZD1hLmNsb3NlZDt0aGlzLmN1cnZlVHlwZT1hLmN1cnZlVHlwZTt0aGlzLnRlbnNpb249YS50ZW5zaW9uO3JldHVybiB0aGlzfTtPYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7XG4gICAgT2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPU9hO09hLnByb3RvdHlwZS5pc0N1YmljQmV6aWVyQ3VydmU9ITA7T2EucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgRDt2YXIgYz10aGlzLnYwLGQ9dGhpcy52MSxlPXRoaXMudjIsZj10aGlzLnYzO2Iuc2V0KGNkKGEsYy54LGQueCxlLngsZi54KSxjZChhLGMueSxkLnksZS55LGYueSkpO3JldHVybiBifTtPYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnYwLmNvcHkoYS52MCk7dGhpcy52MS5jb3B5KGEudjEpO3RoaXMudjIuY29weShhLnYyKTt0aGlzLnYzLmNvcHkoYS52Myk7cmV0dXJuIHRoaXN9O09hLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT1DLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTthLnYwPXRoaXMudjAudG9BcnJheSgpO2EudjE9dGhpcy52MS50b0FycmF5KCk7YS52Mj10aGlzLnYyLnRvQXJyYXkoKTthLnYzPVxuICAgIHRoaXMudjMudG9BcnJheSgpO3JldHVybiBhfTtPYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMudjAuZnJvbUFycmF5KGEudjApO3RoaXMudjEuZnJvbUFycmF5KGEudjEpO3RoaXMudjIuZnJvbUFycmF5KGEudjIpO3RoaXMudjMuZnJvbUFycmF5KGEudjMpO3JldHVybiB0aGlzfTtWYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7VmEucHJvdG90eXBlLmNvbnN0cnVjdG9yPVZhO1ZhLnByb3RvdHlwZS5pc0N1YmljQmV6aWVyQ3VydmUzPSEwO1ZhLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhLGIpe2I9Ynx8bmV3IHA7dmFyIGM9dGhpcy52MCxkPXRoaXMudjEsZT10aGlzLnYyLGY9dGhpcy52MztiLnNldChjZChhLGMueCxkLngsZS54LGYueCksY2QoYSxjLnksZC55LGUueSxmLnkpLGNkKGEsYy56LGQueixlLnosZi56KSk7cmV0dXJuIGJ9O1ZhLnByb3RvdHlwZS5jb3B5PVxuICAgIGZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMudjAuY29weShhLnYwKTt0aGlzLnYxLmNvcHkoYS52MSk7dGhpcy52Mi5jb3B5KGEudjIpO3RoaXMudjMuY29weShhLnYzKTtyZXR1cm4gdGhpc307VmEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPUMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EudjA9dGhpcy52MC50b0FycmF5KCk7YS52MT10aGlzLnYxLnRvQXJyYXkoKTthLnYyPXRoaXMudjIudG9BcnJheSgpO2EudjM9dGhpcy52My50b0FycmF5KCk7cmV0dXJuIGF9O1ZhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy52MC5mcm9tQXJyYXkoYS52MCk7dGhpcy52MS5mcm9tQXJyYXkoYS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoYS52Mik7dGhpcy52My5mcm9tQXJyYXkoYS52Myk7cmV0dXJuIHRoaXN9O3lhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtcbiAgICB5YS5wcm90b3R5cGUuY29uc3RydWN0b3I9eWE7eWEucHJvdG90eXBlLmlzTGluZUN1cnZlPSEwO3lhLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhLGIpe2I9Ynx8bmV3IEQ7MT09PWE/Yi5jb3B5KHRoaXMudjIpOihiLmNvcHkodGhpcy52Mikuc3ViKHRoaXMudjEpLGIubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMudjEpKTtyZXR1cm4gYn07eWEucHJvdG90eXBlLmdldFBvaW50QXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRQb2ludChhLGIpfTt5YS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnYyLmNsb25lKCkuc3ViKHRoaXMudjEpLm5vcm1hbGl6ZSgpfTt5YS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnYxLmNvcHkoYS52MSk7dGhpcy52Mi5jb3B5KGEudjIpO3JldHVybiB0aGlzfTt5YS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XG4gICAgYS52MT10aGlzLnYxLnRvQXJyYXkoKTthLnYyPXRoaXMudjIudG9BcnJheSgpO3JldHVybiBhfTt5YS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMudjEuZnJvbUFycmF5KGEudjEpO3RoaXMudjIuZnJvbUFycmF5KGEudjIpO3JldHVybiB0aGlzfTtQYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7UGEucHJvdG90eXBlLmNvbnN0cnVjdG9yPVBhO1BhLnByb3RvdHlwZS5pc0xpbmVDdXJ2ZTM9ITA7UGEucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgcDsxPT09YT9iLmNvcHkodGhpcy52Mik6KGIuY29weSh0aGlzLnYyKS5zdWIodGhpcy52MSksYi5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy52MSkpO3JldHVybiBifTtQYS5wcm90b3R5cGUuZ2V0UG9pbnRBdD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmdldFBvaW50KGEsYil9O1BhLnByb3RvdHlwZS5jb3B5PVxuICAgIGZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMudjEuY29weShhLnYxKTt0aGlzLnYyLmNvcHkoYS52Mik7cmV0dXJuIHRoaXN9O1BhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT1DLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTthLnYxPXRoaXMudjEudG9BcnJheSgpO2EudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGF9O1BhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy52MS5mcm9tQXJyYXkoYS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoYS52Mik7cmV0dXJuIHRoaXN9O1FhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtRYS5wcm90b3R5cGUuY29uc3RydWN0b3I9UWE7UWEucHJvdG90eXBlLmlzUXVhZHJhdGljQmV6aWVyQ3VydmU9ITA7UWEucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgRDt2YXIgYz1cbiAgICB0aGlzLnYwLGQ9dGhpcy52MSxlPXRoaXMudjI7Yi5zZXQoYmQoYSxjLngsZC54LGUueCksYmQoYSxjLnksZC55LGUueSkpO3JldHVybiBifTtRYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnYwLmNvcHkoYS52MCk7dGhpcy52MS5jb3B5KGEudjEpO3RoaXMudjIuY29weShhLnYyKTtyZXR1cm4gdGhpc307UWEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPUMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EudjA9dGhpcy52MC50b0FycmF5KCk7YS52MT10aGlzLnYxLnRvQXJyYXkoKTthLnYyPXRoaXMudjIudG9BcnJheSgpO3JldHVybiBhfTtRYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMudjAuZnJvbUFycmF5KGEudjApO3RoaXMudjEuZnJvbUFycmF5KGEudjEpO3RoaXMudjIuZnJvbUFycmF5KGEudjIpO3JldHVybiB0aGlzfTtcbiAgICBXYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7V2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPVdhO1dhLnByb3RvdHlwZS5pc1F1YWRyYXRpY0JlemllckN1cnZlMz0hMDtXYS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBwO3ZhciBjPXRoaXMudjAsZD10aGlzLnYxLGU9dGhpcy52MjtiLnNldChiZChhLGMueCxkLngsZS54KSxiZChhLGMueSxkLnksZS55KSxiZChhLGMueixkLnosZS56KSk7cmV0dXJuIGJ9O1dhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMudjAuY29weShhLnYwKTt0aGlzLnYxLmNvcHkoYS52MSk7dGhpcy52Mi5jb3B5KGEudjIpO3JldHVybiB0aGlzfTtXYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS52MD10aGlzLnYwLnRvQXJyYXkoKTthLnYxPXRoaXMudjEudG9BcnJheSgpO1xuICAgIGEudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGF9O1dhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy52MC5mcm9tQXJyYXkoYS52MCk7dGhpcy52MS5mcm9tQXJyYXkoYS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoYS52Mik7cmV0dXJuIHRoaXN9O1JhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtSYS5wcm90b3R5cGUuY29uc3RydWN0b3I9UmE7UmEucHJvdG90eXBlLmlzU3BsaW5lQ3VydmU9ITA7UmEucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgRDt2YXIgYz10aGlzLnBvaW50cyxkPShjLmxlbmd0aC0xKSphO2E9TWF0aC5mbG9vcihkKTt2YXIgZD1kLWEsZT1jWzA9PT1hP2E6YS0xXSxmPWNbYV0sZz1jW2E+Yy5sZW5ndGgtMj9jLmxlbmd0aC0xOmErMV0sYz1jW2E+Yy5sZW5ndGgtMz9jLmxlbmd0aC0xOmErMl07Yi5zZXQoaGYoZCxlLngsZi54LFxuICAgIGcueCxjLngpLGhmKGQsZS55LGYueSxnLnksYy55KSk7cmV0dXJuIGJ9O1JhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgYj0wLGM9YS5wb2ludHMubGVuZ3RoO2I8YztiKyspdGhpcy5wb2ludHMucHVzaChhLnBvaW50c1tiXS5jbG9uZSgpKTtyZXR1cm4gdGhpc307UmEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPUMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EucG9pbnRzPVtdO2Zvcih2YXIgYj0wLGM9dGhpcy5wb2ludHMubGVuZ3RoO2I8YztiKyspYS5wb2ludHMucHVzaCh0aGlzLnBvaW50c1tiXS50b0FycmF5KCkpO3JldHVybiBhfTtSYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgYj0wLGM9YS5wb2ludHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPVxuICAgIGEucG9pbnRzW2JdO3RoaXMucG9pbnRzLnB1c2goKG5ldyBEKS5mcm9tQXJyYXkoZCkpfXJldHVybiB0aGlzfTt2YXIgTmc9T2JqZWN0LmZyZWV6ZSh7QXJjQ3VydmU6aGMsQ2F0bXVsbFJvbUN1cnZlMzpjYSxDdWJpY0JlemllckN1cnZlOk9hLEN1YmljQmV6aWVyQ3VydmUzOlZhLEVsbGlwc2VDdXJ2ZTpCYSxMaW5lQ3VydmU6eWEsTGluZUN1cnZlMzpQYSxRdWFkcmF0aWNCZXppZXJDdXJ2ZTpRYSxRdWFkcmF0aWNCZXppZXJDdXJ2ZTM6V2EsU3BsaW5lQ3VydmU6UmF9KTtiYi5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6YmIsYWRkOmZ1bmN0aW9uKGEpe3RoaXMuY3VydmVzLnB1c2goYSl9LGNsb3NlUGF0aDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY3VydmVzWzBdLmdldFBvaW50KDApLGI9dGhpcy5jdXJ2ZXNbdGhpcy5jdXJ2ZXMubGVuZ3RoLTFdLmdldFBvaW50KDEpO2EuZXF1YWxzKGIpfHx0aGlzLmN1cnZlcy5wdXNoKG5ldyB5YShiLFxuICAgIGEpKX0sZ2V0UG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YSp0aGlzLmdldExlbmd0aCgpLGM9dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKTtmb3IoYT0wO2E8Yy5sZW5ndGg7KXtpZihjW2FdPj1iKXJldHVybiBiPWNbYV0tYixhPXRoaXMuY3VydmVzW2FdLGM9YS5nZXRMZW5ndGgoKSxhLmdldFBvaW50QXQoMD09PWM/MDoxLWIvYyk7YSsrfXJldHVybiBudWxsfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1cnZlTGVuZ3RocygpO3JldHVybiBhW2EubGVuZ3RoLTFdfSx1cGRhdGVBcmNMZW5ndGhzOmZ1bmN0aW9uKCl7dGhpcy5uZWVkc1VwZGF0ZT0hMDt0aGlzLmNhY2hlTGVuZ3Rocz1udWxsO3RoaXMuZ2V0Q3VydmVMZW5ndGhzKCl9LGdldEN1cnZlTGVuZ3RoczpmdW5jdGlvbigpe2lmKHRoaXMuY2FjaGVMZW5ndGhzJiZ0aGlzLmNhY2hlTGVuZ3Rocy5sZW5ndGg9PT10aGlzLmN1cnZlcy5sZW5ndGgpcmV0dXJuIHRoaXMuY2FjaGVMZW5ndGhzO2Zvcih2YXIgYT1bXSxcbiAgICBiPTAsYz0wLGQ9dGhpcy5jdXJ2ZXMubGVuZ3RoO2M8ZDtjKyspYis9dGhpcy5jdXJ2ZXNbY10uZ2V0TGVuZ3RoKCksYS5wdXNoKGIpO3JldHVybiB0aGlzLmNhY2hlTGVuZ3Rocz1hfSxnZXRTcGFjZWRQb2ludHM6ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9NDApO2Zvcih2YXIgYj1bXSxjPTA7Yzw9YTtjKyspYi5wdXNoKHRoaXMuZ2V0UG9pbnQoYy9hKSk7dGhpcy5hdXRvQ2xvc2UmJmIucHVzaChiWzBdKTtyZXR1cm4gYn0sZ2V0UG9pbnRzOmZ1bmN0aW9uKGEpe2E9YXx8MTI7Zm9yKHZhciBiPVtdLGMsZD0wLGU9dGhpcy5jdXJ2ZXM7ZDxlLmxlbmd0aDtkKyspZm9yKHZhciBmPWVbZF0sZj1mLmdldFBvaW50cyhmJiZmLmlzRWxsaXBzZUN1cnZlPzIqYTpmJiZmLmlzTGluZUN1cnZlPzE6ZiYmZi5pc1NwbGluZUN1cnZlP2EqZi5wb2ludHMubGVuZ3RoOmEpLGc9MDtnPGYubGVuZ3RoO2crKyl7dmFyIGg9ZltnXTtjJiZjLmVxdWFscyhoKXx8KGIucHVzaChoKSxjPWgpfXRoaXMuYXV0b0Nsb3NlJiZcbiAgICAxPGIubGVuZ3RoJiYhYltiLmxlbmd0aC0xXS5lcXVhbHMoYlswXSkmJmIucHVzaChiWzBdKTtyZXR1cm4gYn0sY29weTpmdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmN1cnZlcz1bXTtmb3IodmFyIGI9MCxjPWEuY3VydmVzLmxlbmd0aDtiPGM7YisrKXRoaXMuY3VydmVzLnB1c2goYS5jdXJ2ZXNbYl0uY2xvbmUoKSk7dGhpcy5hdXRvQ2xvc2U9YS5hdXRvQ2xvc2U7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBhPUMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EuYXV0b0Nsb3NlPXRoaXMuYXV0b0Nsb3NlO2EuY3VydmVzPVtdO2Zvcih2YXIgYj0wLGM9dGhpcy5jdXJ2ZXMubGVuZ3RoO2I8YztiKyspYS5jdXJ2ZXMucHVzaCh0aGlzLmN1cnZlc1tiXS50b0pTT04oKSk7cmV0dXJuIGF9LGZyb21KU09OOmZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxhKTt0aGlzLmF1dG9DbG9zZT1hLmF1dG9DbG9zZTtcbiAgICB0aGlzLmN1cnZlcz1bXTtmb3IodmFyIGI9MCxjPWEuY3VydmVzLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hLmN1cnZlc1tiXTt0aGlzLmN1cnZlcy5wdXNoKChuZXcgTmdbZC50eXBlXSkuZnJvbUpTT04oZCkpfXJldHVybiB0aGlzfX0pO1NhLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoYmIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6U2Esc2V0RnJvbVBvaW50czpmdW5jdGlvbihhKXt0aGlzLm1vdmVUbyhhWzBdLngsYVswXS55KTtmb3IodmFyIGI9MSxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5saW5lVG8oYVtiXS54LGFbYl0ueSl9LG1vdmVUbzpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50LnNldChhLGIpfSxsaW5lVG86ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgeWEodGhpcy5jdXJyZW50UG9pbnQuY2xvbmUoKSxuZXcgRChhLGIpKTt0aGlzLmN1cnZlcy5wdXNoKGMpO3RoaXMuY3VycmVudFBvaW50LnNldChhLGIpfSxxdWFkcmF0aWNDdXJ2ZVRvOmZ1bmN0aW9uKGEsXG4gICAgYixjLGQpe2E9bmV3IFFhKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IEQoYSxiKSxuZXcgRChjLGQpKTt0aGlzLmN1cnZlcy5wdXNoKGEpO3RoaXMuY3VycmVudFBvaW50LnNldChjLGQpfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXthPW5ldyBPYSh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBEKGEsYiksbmV3IEQoYyxkKSxuZXcgRChlLGYpKTt0aGlzLmN1cnZlcy5wdXNoKGEpO3RoaXMuY3VycmVudFBvaW50LnNldChlLGYpfSxzcGxpbmVUaHJ1OmZ1bmN0aW9uKGEpe3ZhciBiPVt0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpXS5jb25jYXQoYSksYj1uZXcgUmEoYik7dGhpcy5jdXJ2ZXMucHVzaChiKTt0aGlzLmN1cnJlbnRQb2ludC5jb3B5KGFbYS5sZW5ndGgtMV0pfSxhcmM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuYWJzYXJjKGErdGhpcy5jdXJyZW50UG9pbnQueCxiK3RoaXMuY3VycmVudFBvaW50LnksYyxkLGUsZil9LGFic2FyYzpmdW5jdGlvbihhLFxuICAgIGIsYyxkLGUsZil7dGhpcy5hYnNlbGxpcHNlKGEsYixjLGMsZCxlLGYpfSxlbGxpcHNlOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dGhpcy5hYnNlbGxpcHNlKGErdGhpcy5jdXJyZW50UG9pbnQueCxiK3RoaXMuY3VycmVudFBvaW50LnksYyxkLGUsZixnLGgpfSxhYnNlbGxpcHNlOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7YT1uZXcgQmEoYSxiLGMsZCxlLGYsZyxoKTswPHRoaXMuY3VydmVzLmxlbmd0aCYmKGI9YS5nZXRQb2ludCgwKSxiLmVxdWFscyh0aGlzLmN1cnJlbnRQb2ludCl8fHRoaXMubGluZVRvKGIueCxiLnkpKTt0aGlzLmN1cnZlcy5wdXNoKGEpO2E9YS5nZXRQb2ludCgxKTt0aGlzLmN1cnJlbnRQb2ludC5jb3B5KGEpfSxjb3B5OmZ1bmN0aW9uKGEpe2JiLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmN1cnJlbnRQb2ludC5jb3B5KGEuY3VycmVudFBvaW50KTtyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGE9YmIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xuICAgIGEuY3VycmVudFBvaW50PXRoaXMuY3VycmVudFBvaW50LnRvQXJyYXkoKTtyZXR1cm4gYX0sZnJvbUpTT046ZnVuY3Rpb24oYSl7YmIucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxhKTt0aGlzLmN1cnJlbnRQb2ludC5mcm9tQXJyYXkoYS5jdXJyZW50UG9pbnQpO3JldHVybiB0aGlzfX0pO2piLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoU2EucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6amIsZ2V0UG9pbnRzSG9sZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPXRoaXMuaG9sZXMubGVuZ3RoO2M8ZDtjKyspYltjXT10aGlzLmhvbGVzW2NdLmdldFBvaW50cyhhKTtyZXR1cm4gYn0sZXh0cmFjdFBvaW50czpmdW5jdGlvbihhKXtyZXR1cm57c2hhcGU6dGhpcy5nZXRQb2ludHMoYSksaG9sZXM6dGhpcy5nZXRQb2ludHNIb2xlcyhhKX19LGNvcHk6ZnVuY3Rpb24oYSl7U2EucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuaG9sZXM9W107XG4gICAgZm9yKHZhciBiPTAsYz1hLmhvbGVzLmxlbmd0aDtiPGM7YisrKXRoaXMuaG9sZXMucHVzaChhLmhvbGVzW2JdLmNsb25lKCkpO3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgYT1TYS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS51dWlkPXRoaXMudXVpZDthLmhvbGVzPVtdO2Zvcih2YXIgYj0wLGM9dGhpcy5ob2xlcy5sZW5ndGg7YjxjO2IrKylhLmhvbGVzLnB1c2godGhpcy5ob2xlc1tiXS50b0pTT04oKSk7cmV0dXJuIGF9LGZyb21KU09OOmZ1bmN0aW9uKGEpe1NhLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy51dWlkPWEudXVpZDt0aGlzLmhvbGVzPVtdO2Zvcih2YXIgYj0wLGM9YS5ob2xlcy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9YS5ob2xlc1tiXTt0aGlzLmhvbGVzLnB1c2goKG5ldyBTYSkuZnJvbUpTT04oZCkpfXJldHVybiB0aGlzfX0pO2RhLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLFxuICAgIHtjb25zdHJ1Y3RvcjpkYSxpc0xpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24oYSl7eC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMuaW50ZW5zaXR5PWEuaW50ZW5zaXR5O3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oYSl7YT14LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0LmNvbG9yPXRoaXMuY29sb3IuZ2V0SGV4KCk7YS5vYmplY3QuaW50ZW5zaXR5PXRoaXMuaW50ZW5zaXR5O3ZvaWQgMCE9PXRoaXMuZ3JvdW5kQ29sb3ImJihhLm9iamVjdC5ncm91bmRDb2xvcj10aGlzLmdyb3VuZENvbG9yLmdldEhleCgpKTt2b2lkIDAhPT10aGlzLmRpc3RhbmNlJiYoYS5vYmplY3QuZGlzdGFuY2U9dGhpcy5kaXN0YW5jZSk7dm9pZCAwIT09dGhpcy5hbmdsZSYmKGEub2JqZWN0LmFuZ2xlPXRoaXMuYW5nbGUpO3ZvaWQgMCE9PXRoaXMuZGVjYXkmJihhLm9iamVjdC5kZWNheT10aGlzLmRlY2F5KTt2b2lkIDAhPT1cbiAgICB0aGlzLnBlbnVtYnJhJiYoYS5vYmplY3QucGVudW1icmE9dGhpcy5wZW51bWJyYSk7dm9pZCAwIT09dGhpcy5zaGFkb3cmJihhLm9iamVjdC5zaGFkb3c9dGhpcy5zaGFkb3cudG9KU09OKCkpO3JldHVybiBhfX0pO0JkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoZGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6QmQsaXNIZW1pc3BoZXJlTGlnaHQ6ITAsY29weTpmdW5jdGlvbihhKXtkYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5ncm91bmRDb2xvci5jb3B5KGEuZ3JvdW5kQ29sb3IpO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oRmIucHJvdG90eXBlLHtjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuY2FtZXJhPWEuY2FtZXJhLmNsb25lKCk7dGhpcy5iaWFzPWEuYmlhczt0aGlzLnJhZGl1cz1hLnJhZGl1czt0aGlzLm1hcFNpemUuY29weShhLm1hcFNpemUpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sXG4gICAgdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGE9e307MCE9PXRoaXMuYmlhcyYmKGEuYmlhcz10aGlzLmJpYXMpOzEhPT10aGlzLnJhZGl1cyYmKGEucmFkaXVzPXRoaXMucmFkaXVzKTtpZig1MTIhPT10aGlzLm1hcFNpemUueHx8NTEyIT09dGhpcy5tYXBTaXplLnkpYS5tYXBTaXplPXRoaXMubWFwU2l6ZS50b0FycmF5KCk7YS5jYW1lcmE9dGhpcy5jYW1lcmEudG9KU09OKCExKS5vYmplY3Q7ZGVsZXRlIGEuY2FtZXJhLm1hdHJpeDtyZXR1cm4gYX19KTtDZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEZiLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkNkLGlzU3BvdExpZ2h0U2hhZG93OiEwLHVwZGF0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNhbWVyYSxjPTIqUS5SQUQyREVHKmEuYW5nbGUsZD10aGlzLm1hcFNpemUud2lkdGgvdGhpcy5tYXBTaXplLmhlaWdodDthPWEuZGlzdGFuY2V8fGIuZmFyO2lmKGMhPT1iLmZvdnx8ZCE9PWIuYXNwZWN0fHxhIT09Yi5mYXIpYi5mb3Y9XG4gICAgYyxiLmFzcGVjdD1kLGIuZmFyPWEsYi51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9fSk7RGQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShkYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpEZCxpc1Nwb3RMaWdodDohMCxjb3B5OmZ1bmN0aW9uKGEpe2RhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmRpc3RhbmNlPWEuZGlzdGFuY2U7dGhpcy5hbmdsZT1hLmFuZ2xlO3RoaXMucGVudW1icmE9YS5wZW51bWJyYTt0aGlzLmRlY2F5PWEuZGVjYXk7dGhpcy50YXJnZXQ9YS50YXJnZXQuY2xvbmUoKTt0aGlzLnNoYWRvdz1hLnNoYWRvdy5jbG9uZSgpO3JldHVybiB0aGlzfX0pO0VkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoZGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RWQsaXNQb2ludExpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24oYSl7ZGEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGlzdGFuY2U9YS5kaXN0YW5jZTtcbiAgICB0aGlzLmRlY2F5PWEuZGVjYXk7dGhpcy5zaGFkb3c9YS5zaGFkb3cuY2xvbmUoKTtyZXR1cm4gdGhpc319KTtGZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEZiLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkZkfSk7R2QucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShkYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpHZCxpc0RpcmVjdGlvbmFsTGlnaHQ6ITAsY29weTpmdW5jdGlvbihhKXtkYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy50YXJnZXQ9YS50YXJnZXQuY2xvbmUoKTt0aGlzLnNoYWRvdz1hLnNoYWRvdy5jbG9uZSgpO3JldHVybiB0aGlzfX0pO0hkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoZGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6SGQsaXNBbWJpZW50TGlnaHQ6ITB9KTtJZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGRhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOklkLFxuICAgIGlzUmVjdEFyZWFMaWdodDohMCxjb3B5OmZ1bmN0aW9uKGEpe2RhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLndpZHRoPWEud2lkdGg7dGhpcy5oZWlnaHQ9YS5oZWlnaHQ7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihhKXthPWRhLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0LndpZHRoPXRoaXMud2lkdGg7YS5vYmplY3QuaGVpZ2h0PXRoaXMuaGVpZ2h0O3JldHVybiBhfX0pO0pkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpKZCxWYWx1ZVR5cGVOYW1lOlwic3RyaW5nXCIsVmFsdWVCdWZmZXJUeXBlOkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOjIzMDAsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnZvaWQgMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dm9pZCAwfSk7S2QucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSksXG4gICAge2NvbnN0cnVjdG9yOktkLFZhbHVlVHlwZU5hbWU6XCJib29sXCIsVmFsdWVCdWZmZXJUeXBlOkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOjIzMDAsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnZvaWQgMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dm9pZCAwfSk7T2JqZWN0LmFzc2lnbihwYS5wcm90b3R5cGUse2V2YWx1YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGFyYW1ldGVyUG9zaXRpb25zLGM9dGhpcy5fY2FjaGVkSW5kZXgsZD1iW2NdLGU9YltjLTFdO2E6e2I6e2M6e2Q6aWYoIShhPGQpKXtmb3IodmFyIGY9YysyOzspe2lmKHZvaWQgMD09PWQpe2lmKGE8ZSlicmVhayBkO3RoaXMuX2NhY2hlZEluZGV4PWM9Yi5sZW5ndGg7cmV0dXJuIHRoaXMuYWZ0ZXJFbmRfKGMtMSxhLGUpfWlmKGM9PT1mKWJyZWFrO2U9ZDtkPWJbKytjXTtpZihhPGQpYnJlYWsgYn1kPWIubGVuZ3RoO2JyZWFrIGN9aWYoYT49ZSlicmVhayBhO2Vsc2V7Zj1iWzFdO2E8ZiYmXG4gICAgKGM9MixlPWYpO2ZvcihmPWMtMjs7KXtpZih2b2lkIDA9PT1lKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMuYmVmb3JlU3RhcnRfKDAsYSxkKTtpZihjPT09ZilicmVhaztkPWU7ZT1iWy0tYy0xXTtpZihhPj1lKWJyZWFrIGJ9ZD1jO2M9MH19Zm9yKDtjPGQ7KWU9YytkPj4+MSxhPGJbZV0/ZD1lOmM9ZSsxO2Q9YltjXTtlPWJbYy0xXTtpZih2b2lkIDA9PT1lKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMuYmVmb3JlU3RhcnRfKDAsYSxkKTtpZih2b2lkIDA9PT1kKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD1jPWIubGVuZ3RoLHRoaXMuYWZ0ZXJFbmRfKGMtMSxlLGEpfXRoaXMuX2NhY2hlZEluZGV4PWM7dGhpcy5pbnRlcnZhbENoYW5nZWRfKGMsZSxkKX1yZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZV8oYyxlLGEsZCl9LHNldHRpbmdzOm51bGwsRGVmYXVsdFNldHRpbmdzXzp7fSxnZXRTZXR0aW5nc186ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXR0aW5nc3x8XG4gICAgdGhpcy5EZWZhdWx0U2V0dGluZ3NffSxjb3B5U2FtcGxlVmFsdWVfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVzdWx0QnVmZmVyLGM9dGhpcy5zYW1wbGVWYWx1ZXMsZD10aGlzLnZhbHVlU2l6ZTthKj1kO2Zvcih2YXIgZT0wO2UhPT1kOysrZSliW2VdPWNbYStlXTtyZXR1cm4gYn0saW50ZXJwb2xhdGVfOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJjYWxsIHRvIGFic3RyYWN0IG1ldGhvZFwiKTt9LGludGVydmFsQ2hhbmdlZF86ZnVuY3Rpb24oKXt9fSk7T2JqZWN0LmFzc2lnbihwYS5wcm90b3R5cGUse2JlZm9yZVN0YXJ0XzpwYS5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlXyxhZnRlckVuZF86cGEucHJvdG90eXBlLmNvcHlTYW1wbGVWYWx1ZV99KTtMZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHBhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkxkLGludGVycG9sYXRlXzpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLnJlc3VsdEJ1ZmZlcixmPXRoaXMuc2FtcGxlVmFsdWVzLFxuICAgIGc9dGhpcy52YWx1ZVNpemU7YSo9ZztiPShjLWIpLyhkLWIpO2ZvcihjPWErZzthIT09YzthKz00KWhhLnNsZXJwRmxhdChlLDAsZixhLWcsZixhLGIpO3JldHVybiBlfX0pO2RkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpkZCxWYWx1ZVR5cGVOYW1lOlwicXVhdGVybmlvblwiLERlZmF1bHRJbnRlcnBvbGF0aW9uOjIzMDEsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgTGQodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLGEpfSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dm9pZCAwfSk7TWQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk1kLFZhbHVlVHlwZU5hbWU6XCJjb2xvclwifSk7aWMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSksXG4gICAge2NvbnN0cnVjdG9yOmljLFZhbHVlVHlwZU5hbWU6XCJudW1iZXJcIn0pO05kLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUocGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TmQsRGVmYXVsdFNldHRpbmdzXzp7ZW5kaW5nU3RhcnQ6MjQwMCxlbmRpbmdFbmQ6MjQwMH0saW50ZXJ2YWxDaGFuZ2VkXzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnMsZT1hLTIsZj1hKzEsZz1kW2VdLGg9ZFtmXTtpZih2b2lkIDA9PT1nKXN3aXRjaCh0aGlzLmdldFNldHRpbmdzXygpLmVuZGluZ1N0YXJ0KXtjYXNlIDI0MDE6ZT1hO2c9MipiLWM7YnJlYWs7Y2FzZSAyNDAyOmU9ZC5sZW5ndGgtMjtnPWIrZFtlXS1kW2UrMV07YnJlYWs7ZGVmYXVsdDplPWEsZz1jfWlmKHZvaWQgMD09PWgpc3dpdGNoKHRoaXMuZ2V0U2V0dGluZ3NfKCkuZW5kaW5nRW5kKXtjYXNlIDI0MDE6Zj1hO2g9MipjLWI7YnJlYWs7Y2FzZSAyNDAyOmY9MTtoPWMrZFsxXS1kWzBdO1xuICAgIGJyZWFrO2RlZmF1bHQ6Zj1hLTEsaD1ifWE9LjUqKGMtYik7ZD10aGlzLnZhbHVlU2l6ZTt0aGlzLl93ZWlnaHRQcmV2PWEvKGItZyk7dGhpcy5fd2VpZ2h0TmV4dD1hLyhoLWMpO3RoaXMuX29mZnNldFByZXY9ZSpkO3RoaXMuX29mZnNldE5leHQ9ZipkfSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5yZXN1bHRCdWZmZXIsZj10aGlzLnNhbXBsZVZhbHVlcyxnPXRoaXMudmFsdWVTaXplO2EqPWc7dmFyIGg9YS1nLGs9dGhpcy5fb2Zmc2V0UHJldixtPXRoaXMuX29mZnNldE5leHQsbD10aGlzLl93ZWlnaHRQcmV2LG49dGhpcy5fd2VpZ2h0TmV4dCxwPShjLWIpLyhkLWIpO2M9cCpwO2Q9YypwO2I9LWwqZCsyKmwqYy1sKnA7bD0oMStsKSpkKygtMS41LTIqbCkqYysoLS41K2wpKnArMTtwPSgtMS1uKSpkKygxLjUrbikqYysuNSpwO249bipkLW4qYztmb3IoYz0wO2MhPT1nOysrYyllW2NdPWIqZltrK2NdK2wqZltoK2NdK3AqZlthK2NdK24qZlttK2NdO1xuICAgIHJldHVybiBlfX0pO2VkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUocGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6ZWQsaW50ZXJwb2xhdGVfOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMucmVzdWx0QnVmZmVyLGY9dGhpcy5zYW1wbGVWYWx1ZXMsZz10aGlzLnZhbHVlU2l6ZTthKj1nO3ZhciBoPWEtZztiPShjLWIpLyhkLWIpO2M9MS1iO2ZvcihkPTA7ZCE9PWc7KytkKWVbZF09ZltoK2RdKmMrZlthK2RdKmI7cmV0dXJuIGV9fSk7T2QucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShwYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpPZCxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29weVNhbXBsZVZhbHVlXyhhLTEpfX0pO3ZhciBnYT17YXJyYXlTbGljZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGdhLmlzVHlwZWRBcnJheShhKT9uZXcgYS5jb25zdHJ1Y3RvcihhLnN1YmFycmF5KGIsdm9pZCAwIT09Yz9jOlxuICAgIGEubGVuZ3RoKSk6YS5zbGljZShiLGMpfSxjb252ZXJ0QXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiFhfHwhYyYmYS5jb25zdHJ1Y3Rvcj09PWI/YTpcIm51bWJlclwiPT09dHlwZW9mIGIuQllURVNfUEVSX0VMRU1FTlQ/bmV3IGIoYSk6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSl9LGlzVHlwZWRBcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gQXJyYXlCdWZmZXIuaXNWaWV3KGEpJiYhKGEgaW5zdGFuY2VvZiBEYXRhVmlldyl9LGdldEtleWZyYW1lT3JkZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGM9QXJyYXkoYiksZD0wO2QhPT1iOysrZCljW2RdPWQ7Yy5zb3J0KGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGFbYl0tYVtjXX0pO3JldHVybiBjfSxzb3J0ZWRBcnJheTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9bmV3IGEuY29uc3RydWN0b3IoZCksZj0wLGc9MDtnIT09ZDsrK2YpZm9yKHZhciBoPWNbZl0qYixrPTA7ayE9PWI7KytrKWVbZysrXT1cbiAgICBhW2gra107cmV0dXJuIGV9LGZsYXR0ZW5KU09OOmZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZT0xLGY9YVswXTt2b2lkIDAhPT1mJiZ2b2lkIDA9PT1mW2RdOylmPWFbZSsrXTtpZih2b2lkIDAhPT1mKXt2YXIgZz1mW2RdO2lmKHZvaWQgMCE9PWcpaWYoQXJyYXkuaXNBcnJheShnKSl7ZG8gZz1mW2RdLHZvaWQgMCE9PWcmJihiLnB1c2goZi50aW1lKSxjLnB1c2guYXBwbHkoYyxnKSksZj1hW2UrK107d2hpbGUodm9pZCAwIT09Zil9ZWxzZSBpZih2b2lkIDAhPT1nLnRvQXJyYXkpe2RvIGc9ZltkXSx2b2lkIDAhPT1nJiYoYi5wdXNoKGYudGltZSksZy50b0FycmF5KGMsYy5sZW5ndGgpKSxmPWFbZSsrXTt3aGlsZSh2b2lkIDAhPT1mKX1lbHNle2RvIGc9ZltkXSx2b2lkIDAhPT1nJiYoYi5wdXNoKGYudGltZSksYy5wdXNoKGcpKSxmPWFbZSsrXTt3aGlsZSh2b2lkIDAhPT1mKX19fX07T2JqZWN0LmFzc2lnbihULHtwYXJzZTpmdW5jdGlvbihhKXtpZih2b2lkIDA9PT1hLnR5cGUpdGhyb3cgRXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiB0cmFjayB0eXBlIHVuZGVmaW5lZCwgY2FuIG5vdCBwYXJzZVwiKTtcbiAgICB2YXIgYj1ULl9nZXRUcmFja1R5cGVGb3JWYWx1ZVR5cGVOYW1lKGEudHlwZSk7aWYodm9pZCAwPT09YS50aW1lcyl7dmFyIGM9W10sZD1bXTtnYS5mbGF0dGVuSlNPTihhLmtleXMsYyxkLFwidmFsdWVcIik7YS50aW1lcz1jO2EudmFsdWVzPWR9cmV0dXJuIHZvaWQgMCE9PWIucGFyc2U/Yi5wYXJzZShhKTpuZXcgYihhLm5hbWUsYS50aW1lcyxhLnZhbHVlcyxhLmludGVycG9sYXRpb24pfSx0b0pTT046ZnVuY3Rpb24oYSl7dmFyIGI9YS5jb25zdHJ1Y3RvcjtpZih2b2lkIDAhPT1iLnRvSlNPTiliPWIudG9KU09OKGEpO2Vsc2V7dmFyIGI9e25hbWU6YS5uYW1lLHRpbWVzOmdhLmNvbnZlcnRBcnJheShhLnRpbWVzLEFycmF5KSx2YWx1ZXM6Z2EuY29udmVydEFycmF5KGEudmFsdWVzLEFycmF5KX0sYz1hLmdldEludGVycG9sYXRpb24oKTtjIT09YS5EZWZhdWx0SW50ZXJwb2xhdGlvbiYmKGIuaW50ZXJwb2xhdGlvbj1jKX1iLnR5cGU9YS5WYWx1ZVR5cGVOYW1lO3JldHVybiBifSxfZ2V0VHJhY2tUeXBlRm9yVmFsdWVUeXBlTmFtZTpmdW5jdGlvbihhKXtzd2l0Y2goYS50b0xvd2VyQ2FzZSgpKXtjYXNlIFwic2NhbGFyXCI6Y2FzZSBcImRvdWJsZVwiOmNhc2UgXCJmbG9hdFwiOmNhc2UgXCJudW1iZXJcIjpjYXNlIFwiaW50ZWdlclwiOnJldHVybiBpYztcbiAgICBjYXNlIFwidmVjdG9yXCI6Y2FzZSBcInZlY3RvcjJcIjpjYXNlIFwidmVjdG9yM1wiOmNhc2UgXCJ2ZWN0b3I0XCI6cmV0dXJuIGpjO2Nhc2UgXCJjb2xvclwiOnJldHVybiBNZDtjYXNlIFwicXVhdGVybmlvblwiOnJldHVybiBkZDtjYXNlIFwiYm9vbFwiOmNhc2UgXCJib29sZWFuXCI6cmV0dXJuIEtkO2Nhc2UgXCJzdHJpbmdcIjpyZXR1cm4gSmR9dGhyb3cgRXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBVbnN1cHBvcnRlZCB0eXBlTmFtZTogXCIrYSk7fX0pO09iamVjdC5hc3NpZ24oVC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOlQsVGltZUJ1ZmZlclR5cGU6RmxvYXQzMkFycmF5LFZhbHVlQnVmZmVyVHlwZTpGbG9hdDMyQXJyYXksRGVmYXVsdEludGVycG9sYXRpb246MjMwMSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IE9kKHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSxhKX0sSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZWQodGhpcy50aW1lcyxcbiAgICB0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLGEpfSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBOZCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksYSl9LHNldEludGVycG9sYXRpb246ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgMjMwMDp2YXIgYj10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlO2JyZWFrO2Nhc2UgMjMwMTpiPXRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyO2JyZWFrO2Nhc2UgMjMwMjpiPXRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RofWlmKHZvaWQgMD09PWIpe2I9XCJ1bnN1cHBvcnRlZCBpbnRlcnBvbGF0aW9uIGZvciBcIit0aGlzLlZhbHVlVHlwZU5hbWUrXCIga2V5ZnJhbWUgdHJhY2sgbmFtZWQgXCIrdGhpcy5uYW1lO2lmKHZvaWQgMD09PXRoaXMuY3JlYXRlSW50ZXJwb2xhbnQpaWYoYSE9PXRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pdGhpcy5zZXRJbnRlcnBvbGF0aW9uKHRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pO1xuICAgIGVsc2UgdGhyb3cgRXJyb3IoYik7Y29uc29sZS53YXJuKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazpcIixiKX1lbHNlIHRoaXMuY3JlYXRlSW50ZXJwb2xhbnQ9Yn0sZ2V0SW50ZXJwb2xhdGlvbjpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmNyZWF0ZUludGVycG9sYW50KXtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6cmV0dXJuIDIzMDA7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpyZXR1cm4gMjMwMTtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnJldHVybiAyMzAyfX0sZ2V0VmFsdWVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aC90aGlzLnRpbWVzLmxlbmd0aH0sc2hpZnQ6ZnVuY3Rpb24oYSl7aWYoMCE9PWEpZm9yKHZhciBiPXRoaXMudGltZXMsYz0wLGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKWJbY10rPWE7cmV0dXJuIHRoaXN9LHNjYWxlOmZ1bmN0aW9uKGEpe2lmKDEhPT1hKWZvcih2YXIgYj1cbiAgICB0aGlzLnRpbWVzLGM9MCxkPWIubGVuZ3RoO2MhPT1kOysrYyliW2NdKj1hO3JldHVybiB0aGlzfSx0cmltOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMudGltZXMsZD1jLmxlbmd0aCxlPTAsZj1kLTE7ZSE9PWQmJmNbZV08YTspKytlO2Zvcig7LTEhPT1mJiZjW2ZdPmI7KS0tZjsrK2Y7aWYoMCE9PWV8fGYhPT1kKWU+PWYmJihmPU1hdGgubWF4KGYsMSksZT1mLTEpLGE9dGhpcy5nZXRWYWx1ZVNpemUoKSx0aGlzLnRpbWVzPWdhLmFycmF5U2xpY2UoYyxlLGYpLHRoaXMudmFsdWVzPWdhLmFycmF5U2xpY2UodGhpcy52YWx1ZXMsZSphLGYqYSk7cmV0dXJuIHRoaXN9LHZhbGlkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITAsYj10aGlzLmdldFZhbHVlU2l6ZSgpOzAhPT1iLU1hdGguZmxvb3IoYikmJihjb25zb2xlLmVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogSW52YWxpZCB2YWx1ZSBzaXplIGluIHRyYWNrLlwiLHRoaXMpLGE9ITEpO3ZhciBjPXRoaXMudGltZXMsYj10aGlzLnZhbHVlcyxcbiAgICBkPWMubGVuZ3RoOzA9PT1kJiYoY29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IFRyYWNrIGlzIGVtcHR5LlwiLHRoaXMpLGE9ITEpO2Zvcih2YXIgZT1udWxsLGY9MDtmIT09ZDtmKyspe3ZhciBnPWNbZl07aWYoXCJudW1iZXJcIj09PXR5cGVvZiBnJiZpc05hTihnKSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IFRpbWUgaXMgbm90IGEgdmFsaWQgbnVtYmVyLlwiLHRoaXMsZixnKTthPSExO2JyZWFrfWlmKG51bGwhPT1lJiZlPmcpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBPdXQgb2Ygb3JkZXIga2V5cy5cIix0aGlzLGYsZyxlKTthPSExO2JyZWFrfWU9Z31pZih2b2lkIDAhPT1iJiZnYS5pc1R5cGVkQXJyYXkoYikpZm9yKGY9MCxjPWIubGVuZ3RoO2YhPT1jOysrZilpZihkPWJbZl0saXNOYU4oZCkpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBWYWx1ZSBpcyBub3QgYSB2YWxpZCBudW1iZXIuXCIsdGhpcyxmLFxuICAgIGQpO2E9ITE7YnJlYWt9cmV0dXJuIGF9LG9wdGltaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz10aGlzLnRpbWVzLGQ9dGhpcy52YWx1ZXMsZT10aGlzLmdldFZhbHVlU2l6ZSgpLGY9MjMwMj09PXRoaXMuZ2V0SW50ZXJwb2xhdGlvbigpLGc9MSxoPWMubGVuZ3RoLTEsaz0xO2s8aDsrK2spe2E9ITE7dmFyIG09Y1trXTtpZihtIT09Y1trKzFdJiYoMSE9PWt8fG0hPT1tWzBdKSlpZihmKWE9ITA7ZWxzZXtiPWsqZTtmb3IodmFyIGw9Yi1lLG49YitlLG09MDttIT09ZTsrK20pe3ZhciBwPWRbYittXTtpZihwIT09ZFtsK21dfHxwIT09ZFtuK21dKXthPSEwO2JyZWFrfX19aWYoYSl7aWYoayE9PWcpZm9yKGNbZ109Y1trXSxiPWsqZSxhPWcqZSxtPTA7bSE9PWU7KyttKWRbYSttXT1kW2IrbV07KytnfX1pZigwPGgpe2NbZ109Y1toXTtiPWgqZTthPWcqZTtmb3IobT0wO20hPT1lOysrbSlkW2ErbV09ZFtiK21dOysrZ31nIT09Yy5sZW5ndGgmJih0aGlzLnRpbWVzPWdhLmFycmF5U2xpY2UoYyxcbiAgICAwLGcpLHRoaXMudmFsdWVzPWdhLmFycmF5U2xpY2UoZCwwLGcqZSkpO3JldHVybiB0aGlzfX0pO2pjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpqYyxWYWx1ZVR5cGVOYW1lOlwidmVjdG9yXCJ9KTtPYmplY3QuYXNzaWduKENhLHtwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1hLnRyYWNrcyxkPTEvKGEuZnBzfHwxKSxlPTAsZj1jLmxlbmd0aDtlIT09ZjsrK2UpYi5wdXNoKFQucGFyc2UoY1tlXSkuc2NhbGUoZCkpO3JldHVybiBuZXcgQ2EoYS5uYW1lLGEuZHVyYXRpb24sYil9LHRvSlNPTjpmdW5jdGlvbihhKXt2YXIgYj1bXSxjPWEudHJhY2tzO2E9e25hbWU6YS5uYW1lLGR1cmF0aW9uOmEuZHVyYXRpb24sdHJhY2tzOmJ9O2Zvcih2YXIgZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWIucHVzaChULnRvSlNPTihjW2RdKSk7cmV0dXJuIGF9LENyZWF0ZUZyb21Nb3JwaFRhcmdldFNlcXVlbmNlOmZ1bmN0aW9uKGEsXG4gICAgYixjLGQpe2Zvcih2YXIgZT1iLmxlbmd0aCxmPVtdLGc9MDtnPGU7ZysrKXt2YXIgaD1bXSxrPVtdO2gucHVzaCgoZytlLTEpJWUsZywoZysxKSVlKTtrLnB1c2goMCwxLDApO3ZhciBtPWdhLmdldEtleWZyYW1lT3JkZXIoaCksaD1nYS5zb3J0ZWRBcnJheShoLDEsbSksaz1nYS5zb3J0ZWRBcnJheShrLDEsbSk7ZHx8MCE9PWhbMF18fChoLnB1c2goZSksay5wdXNoKGtbMF0pKTtmLnB1c2goKG5ldyBpYyhcIi5tb3JwaFRhcmdldEluZmx1ZW5jZXNbXCIrYltnXS5uYW1lK1wiXVwiLGgsaykpLnNjYWxlKDEvYykpfXJldHVybiBuZXcgQ2EoYSwtMSxmKX0sZmluZEJ5TmFtZTpmdW5jdGlvbihhLGIpe3ZhciBjPWE7QXJyYXkuaXNBcnJheShhKXx8KGM9YS5nZW9tZXRyeSYmYS5nZW9tZXRyeS5hbmltYXRpb25zfHxhLmFuaW1hdGlvbnMpO2ZvcihhPTA7YTxjLmxlbmd0aDthKyspaWYoY1thXS5uYW1lPT09YilyZXR1cm4gY1thXTtyZXR1cm4gbnVsbH0sQ3JlYXRlQ2xpcHNGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZXM6ZnVuY3Rpb24oYSxcbiAgICBiLGMpe2Zvcih2YXIgZCxlPXt9LGY9L14oW1xcdy1dKj8pKFtcXGRdKykkLyxnPTAsaD1hLmxlbmd0aDtnPGg7ZysrKXt2YXIgaz1hW2ddLG09ay5uYW1lLm1hdGNoKGYpO20mJjE8bS5sZW5ndGgmJihkPW1bMV0sKG09ZVtkXSl8fChlW2RdPW09W10pLG0ucHVzaChrKSl9YT1bXTtmb3IoZCBpbiBlKWEucHVzaChDYS5DcmVhdGVGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZShkLGVbZF0sYixjKSk7cmV0dXJuIGF9LHBhcnNlQW5pbWF0aW9uOmZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5BbmltYXRpb25DbGlwOiBObyBhbmltYXRpb24gaW4gSlNPTkxvYWRlciBkYXRhLlwiKSxudWxsO3ZhciBjPWZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoMCE9PWMubGVuZ3RoKXt2YXIgZj1bXSxnPVtdO2dhLmZsYXR0ZW5KU09OKGMsZixnLGQpOzAhPT1mLmxlbmd0aCYmZS5wdXNoKG5ldyBhKGIsZixnKSl9fSxkPVtdLGU9YS5uYW1lfHxcImRlZmF1bHRcIixmPWEubGVuZ3RofHxcbiAgICAtMSxnPWEuZnBzfHwzMDthPWEuaGllcmFyY2h5fHxbXTtmb3IodmFyIGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGs9YVtoXS5rZXlzO2lmKGsmJjAhPT1rLmxlbmd0aClpZihrWzBdLm1vcnBoVGFyZ2V0cyl7Zm9yKHZhciBmPXt9LG09MDttPGsubGVuZ3RoO20rKylpZihrW21dLm1vcnBoVGFyZ2V0cylmb3IodmFyIGw9MDtsPGtbbV0ubW9ycGhUYXJnZXRzLmxlbmd0aDtsKyspZltrW21dLm1vcnBoVGFyZ2V0c1tsXV09LTE7Zm9yKHZhciBuIGluIGYpe2Zvcih2YXIgcD1bXSxyPVtdLGw9MDtsIT09a1ttXS5tb3JwaFRhcmdldHMubGVuZ3RoOysrbCl7dmFyIHQ9a1ttXTtwLnB1c2godC50aW1lKTtyLnB1c2godC5tb3JwaFRhcmdldD09PW4/MTowKX1kLnB1c2gobmV3IGljKFwiLm1vcnBoVGFyZ2V0SW5mbHVlbmNlW1wiK24rXCJdXCIscCxyKSl9Zj1mLmxlbmd0aCooZ3x8MSl9ZWxzZSBtPVwiLmJvbmVzW1wiK2JbaF0ubmFtZStcIl1cIixjKGpjLG0rXCIucG9zaXRpb25cIixrLFwicG9zXCIsZCksYyhkZCxcbiAgICBtK1wiLnF1YXRlcm5pb25cIixrLFwicm90XCIsZCksYyhqYyxtK1wiLnNjYWxlXCIsayxcInNjbFwiLGQpfXJldHVybiAwPT09ZC5sZW5ndGg/bnVsbDpuZXcgQ2EoZSxmLGQpfX0pO09iamVjdC5hc3NpZ24oQ2EucHJvdG90eXBlLHtyZXNldER1cmF0aW9uOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9dGhpcy50cmFja3MubGVuZ3RoO2IhPT1jOysrYil2YXIgZD10aGlzLnRyYWNrc1tiXSxhPU1hdGgubWF4KGEsZC50aW1lc1tkLnRpbWVzLmxlbmd0aC0xXSk7dGhpcy5kdXJhdGlvbj1hfSx0cmltOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLnRyYWNrcy5sZW5ndGg7YSsrKXRoaXMudHJhY2tzW2FdLnRyaW0oMCx0aGlzLmR1cmF0aW9uKTtyZXR1cm4gdGhpc30sb3B0aW1pemU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMudHJhY2tzLmxlbmd0aDthKyspdGhpcy50cmFja3NbYV0ub3B0aW1pemUoKTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKFBkLnByb3RvdHlwZSxcbiAgICB7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzOyhuZXcgTmEoZS5tYW5hZ2VyKSkubG9hZChhLGZ1bmN0aW9uKGEpe2IoZS5wYXJzZShKU09OLnBhcnNlKGEpKSl9LGMsZCl9LHNldFRleHR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMudGV4dHVyZXM9YX0scGFyc2U6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2b2lkIDA9PT1jW2FdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbExvYWRlcjogVW5kZWZpbmVkIHRleHR1cmVcIixhKTtyZXR1cm4gY1thXX12YXIgYz10aGlzLnRleHR1cmVzLGQ9bmV3IE1nW2EudHlwZV07dm9pZCAwIT09YS51dWlkJiYoZC51dWlkPWEudXVpZCk7dm9pZCAwIT09YS5uYW1lJiYoZC5uYW1lPWEubmFtZSk7dm9pZCAwIT09YS5jb2xvciYmZC5jb2xvci5zZXRIZXgoYS5jb2xvcik7dm9pZCAwIT09YS5yb3VnaG5lc3MmJihkLnJvdWdobmVzcz1hLnJvdWdobmVzcyk7dm9pZCAwIT09YS5tZXRhbG5lc3MmJihkLm1ldGFsbmVzcz1hLm1ldGFsbmVzcyk7XG4gICAgdm9pZCAwIT09YS5lbWlzc2l2ZSYmZC5lbWlzc2l2ZS5zZXRIZXgoYS5lbWlzc2l2ZSk7dm9pZCAwIT09YS5zcGVjdWxhciYmZC5zcGVjdWxhci5zZXRIZXgoYS5zcGVjdWxhcik7dm9pZCAwIT09YS5zaGluaW5lc3MmJihkLnNoaW5pbmVzcz1hLnNoaW5pbmVzcyk7dm9pZCAwIT09YS5jbGVhckNvYXQmJihkLmNsZWFyQ29hdD1hLmNsZWFyQ29hdCk7dm9pZCAwIT09YS5jbGVhckNvYXRSb3VnaG5lc3MmJihkLmNsZWFyQ29hdFJvdWdobmVzcz1hLmNsZWFyQ29hdFJvdWdobmVzcyk7dm9pZCAwIT09YS51bmlmb3JtcyYmKGQudW5pZm9ybXM9YS51bmlmb3Jtcyk7dm9pZCAwIT09YS52ZXJ0ZXhTaGFkZXImJihkLnZlcnRleFNoYWRlcj1hLnZlcnRleFNoYWRlcik7dm9pZCAwIT09YS5mcmFnbWVudFNoYWRlciYmKGQuZnJhZ21lbnRTaGFkZXI9YS5mcmFnbWVudFNoYWRlcik7dm9pZCAwIT09YS52ZXJ0ZXhDb2xvcnMmJihkLnZlcnRleENvbG9ycz1hLnZlcnRleENvbG9ycyk7dm9pZCAwIT09XG4gICAgYS5mb2cmJihkLmZvZz1hLmZvZyk7dm9pZCAwIT09YS5mbGF0U2hhZGluZyYmKGQuZmxhdFNoYWRpbmc9YS5mbGF0U2hhZGluZyk7dm9pZCAwIT09YS5ibGVuZGluZyYmKGQuYmxlbmRpbmc9YS5ibGVuZGluZyk7dm9pZCAwIT09YS5zaWRlJiYoZC5zaWRlPWEuc2lkZSk7dm9pZCAwIT09YS5vcGFjaXR5JiYoZC5vcGFjaXR5PWEub3BhY2l0eSk7dm9pZCAwIT09YS50cmFuc3BhcmVudCYmKGQudHJhbnNwYXJlbnQ9YS50cmFuc3BhcmVudCk7dm9pZCAwIT09YS5hbHBoYVRlc3QmJihkLmFscGhhVGVzdD1hLmFscGhhVGVzdCk7dm9pZCAwIT09YS5kZXB0aFRlc3QmJihkLmRlcHRoVGVzdD1hLmRlcHRoVGVzdCk7dm9pZCAwIT09YS5kZXB0aFdyaXRlJiYoZC5kZXB0aFdyaXRlPWEuZGVwdGhXcml0ZSk7dm9pZCAwIT09YS5jb2xvcldyaXRlJiYoZC5jb2xvcldyaXRlPWEuY29sb3JXcml0ZSk7dm9pZCAwIT09YS53aXJlZnJhbWUmJihkLndpcmVmcmFtZT1hLndpcmVmcmFtZSk7dm9pZCAwIT09XG4gICAgYS53aXJlZnJhbWVMaW5ld2lkdGgmJihkLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aCk7dm9pZCAwIT09YS53aXJlZnJhbWVMaW5lY2FwJiYoZC53aXJlZnJhbWVMaW5lY2FwPWEud2lyZWZyYW1lTGluZWNhcCk7dm9pZCAwIT09YS53aXJlZnJhbWVMaW5lam9pbiYmKGQud2lyZWZyYW1lTGluZWpvaW49YS53aXJlZnJhbWVMaW5lam9pbik7dm9pZCAwIT09YS5yb3RhdGlvbiYmKGQucm90YXRpb249YS5yb3RhdGlvbik7MSE9PWEubGluZXdpZHRoJiYoZC5saW5ld2lkdGg9YS5saW5ld2lkdGgpO3ZvaWQgMCE9PWEuZGFzaFNpemUmJihkLmRhc2hTaXplPWEuZGFzaFNpemUpO3ZvaWQgMCE9PWEuZ2FwU2l6ZSYmKGQuZ2FwU2l6ZT1hLmdhcFNpemUpO3ZvaWQgMCE9PWEuc2NhbGUmJihkLnNjYWxlPWEuc2NhbGUpO3ZvaWQgMCE9PWEuc2tpbm5pbmcmJihkLnNraW5uaW5nPWEuc2tpbm5pbmcpO3ZvaWQgMCE9PWEubW9ycGhUYXJnZXRzJiYoZC5tb3JwaFRhcmdldHM9XG4gICAgYS5tb3JwaFRhcmdldHMpO3ZvaWQgMCE9PWEuZGl0aGVyaW5nJiYoZC5kaXRoZXJpbmc9YS5kaXRoZXJpbmcpO3ZvaWQgMCE9PWEudmlzaWJsZSYmKGQudmlzaWJsZT1hLnZpc2libGUpO3ZvaWQgMCE9PWEudXNlckRhdGEmJihkLnVzZXJEYXRhPWEudXNlckRhdGEpO3ZvaWQgMCE9PWEuc2hhZGluZyYmKGQuZmxhdFNoYWRpbmc9MT09PWEuc2hhZGluZyk7dm9pZCAwIT09YS5zaXplJiYoZC5zaXplPWEuc2l6ZSk7dm9pZCAwIT09YS5zaXplQXR0ZW51YXRpb24mJihkLnNpemVBdHRlbnVhdGlvbj1hLnNpemVBdHRlbnVhdGlvbik7dm9pZCAwIT09YS5tYXAmJihkLm1hcD1iKGEubWFwKSk7dm9pZCAwIT09YS5hbHBoYU1hcCYmKGQuYWxwaGFNYXA9YihhLmFscGhhTWFwKSxkLnRyYW5zcGFyZW50PSEwKTt2b2lkIDAhPT1hLmJ1bXBNYXAmJihkLmJ1bXBNYXA9YihhLmJ1bXBNYXApKTt2b2lkIDAhPT1hLmJ1bXBTY2FsZSYmKGQuYnVtcFNjYWxlPWEuYnVtcFNjYWxlKTt2b2lkIDAhPT1hLm5vcm1hbE1hcCYmXG4gICAgKGQubm9ybWFsTWFwPWIoYS5ub3JtYWxNYXApKTtpZih2b2lkIDAhPT1hLm5vcm1hbFNjYWxlKXt2YXIgZT1hLm5vcm1hbFNjYWxlOyExPT09QXJyYXkuaXNBcnJheShlKSYmKGU9W2UsZV0pO2Qubm9ybWFsU2NhbGU9KG5ldyBEKS5mcm9tQXJyYXkoZSl9dm9pZCAwIT09YS5kaXNwbGFjZW1lbnRNYXAmJihkLmRpc3BsYWNlbWVudE1hcD1iKGEuZGlzcGxhY2VtZW50TWFwKSk7dm9pZCAwIT09YS5kaXNwbGFjZW1lbnRTY2FsZSYmKGQuZGlzcGxhY2VtZW50U2NhbGU9YS5kaXNwbGFjZW1lbnRTY2FsZSk7dm9pZCAwIT09YS5kaXNwbGFjZW1lbnRCaWFzJiYoZC5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhcyk7dm9pZCAwIT09YS5yb3VnaG5lc3NNYXAmJihkLnJvdWdobmVzc01hcD1iKGEucm91Z2huZXNzTWFwKSk7dm9pZCAwIT09YS5tZXRhbG5lc3NNYXAmJihkLm1ldGFsbmVzc01hcD1iKGEubWV0YWxuZXNzTWFwKSk7dm9pZCAwIT09YS5lbWlzc2l2ZU1hcCYmKGQuZW1pc3NpdmVNYXA9XG4gICAgYihhLmVtaXNzaXZlTWFwKSk7dm9pZCAwIT09YS5lbWlzc2l2ZUludGVuc2l0eSYmKGQuZW1pc3NpdmVJbnRlbnNpdHk9YS5lbWlzc2l2ZUludGVuc2l0eSk7dm9pZCAwIT09YS5zcGVjdWxhck1hcCYmKGQuc3BlY3VsYXJNYXA9YihhLnNwZWN1bGFyTWFwKSk7dm9pZCAwIT09YS5lbnZNYXAmJihkLmVudk1hcD1iKGEuZW52TWFwKSk7dm9pZCAwIT09YS5yZWZsZWN0aXZpdHkmJihkLnJlZmxlY3Rpdml0eT1hLnJlZmxlY3Rpdml0eSk7dm9pZCAwIT09YS5saWdodE1hcCYmKGQubGlnaHRNYXA9YihhLmxpZ2h0TWFwKSk7dm9pZCAwIT09YS5saWdodE1hcEludGVuc2l0eSYmKGQubGlnaHRNYXBJbnRlbnNpdHk9YS5saWdodE1hcEludGVuc2l0eSk7dm9pZCAwIT09YS5hb01hcCYmKGQuYW9NYXA9YihhLmFvTWFwKSk7dm9pZCAwIT09YS5hb01hcEludGVuc2l0eSYmKGQuYW9NYXBJbnRlbnNpdHk9YS5hb01hcEludGVuc2l0eSk7dm9pZCAwIT09YS5ncmFkaWVudE1hcCYmKGQuZ3JhZGllbnRNYXA9XG4gICAgYihhLmdyYWRpZW50TWFwKSk7cmV0dXJuIGR9fSk7T2JqZWN0LmFzc2lnbihsZS5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpczsobmV3IE5hKGUubWFuYWdlcikpLmxvYWQoYSxmdW5jdGlvbihhKXtiKGUucGFyc2UoSlNPTi5wYXJzZShhKSkpfSxjLGQpfSxwYXJzZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgRTt2YXIgYz1hLmRhdGEuaW5kZXg7dm9pZCAwIT09YyYmKGM9bmV3IHhmW2MudHlwZV0oYy5hcnJheSksYi5zZXRJbmRleChuZXcgTShjLDEpKSk7dmFyIGQ9YS5kYXRhLmF0dHJpYnV0ZXM7Zm9yKGYgaW4gZCl7dmFyIGU9ZFtmXTtjPW5ldyB4ZltlLnR5cGVdKGUuYXJyYXkpO2IuYWRkQXR0cmlidXRlKGYsbmV3IE0oYyxlLml0ZW1TaXplLGUubm9ybWFsaXplZCkpfXZhciBmPWEuZGF0YS5ncm91cHN8fGEuZGF0YS5kcmF3Y2FsbHN8fGEuZGF0YS5vZmZzZXRzO2lmKHZvaWQgMCE9PWYpZm9yKGM9MCxkPWYubGVuZ3RoO2MhPT1kOysrYyllPWZbY10sXG4gICAgYi5hZGRHcm91cChlLnN0YXJ0LGUuY291bnQsZS5tYXRlcmlhbEluZGV4KTthPWEuZGF0YS5ib3VuZGluZ1NwaGVyZTt2b2lkIDAhPT1hJiYoZj1uZXcgcCx2b2lkIDAhPT1hLmNlbnRlciYmZi5mcm9tQXJyYXkoYS5jZW50ZXIpLGIuYm91bmRpbmdTcGhlcmU9bmV3IElhKGYsYS5yYWRpdXMpKTtyZXR1cm4gYn19KTt2YXIgeGY9e0ludDhBcnJheTpJbnQ4QXJyYXksVWludDhBcnJheTpVaW50OEFycmF5LFVpbnQ4Q2xhbXBlZEFycmF5OlwidW5kZWZpbmVkXCIhPT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXk/VWludDhDbGFtcGVkQXJyYXk6VWludDhBcnJheSxJbnQxNkFycmF5OkludDE2QXJyYXksVWludDE2QXJyYXk6VWludDE2QXJyYXksSW50MzJBcnJheTpJbnQzMkFycmF5LFVpbnQzMkFycmF5OlVpbnQzMkFycmF5LEZsb2F0MzJBcnJheTpGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5OkZsb2F0NjRBcnJheX07a2MuSGFuZGxlcnM9e2hhbmRsZXJzOltdLGFkZDpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlcnMucHVzaChhLFxuICAgIGIpfSxnZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuaGFuZGxlcnMsYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrPTIpe3ZhciBlPWJbYysxXTtpZihiW2NdLnRlc3QoYSkpcmV0dXJuIGV9cmV0dXJuIG51bGx9fTtPYmplY3QuYXNzaWduKGtjLnByb3RvdHlwZSx7Y3Jvc3NPcmlnaW46dm9pZCAwLGluaXRNYXRlcmlhbHM6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmxlbmd0aDsrK2UpZFtlXT10aGlzLmNyZWF0ZU1hdGVyaWFsKGFbZV0sYixjKTtyZXR1cm4gZH0sY3JlYXRlTWF0ZXJpYWw6ZnVuY3Rpb24oKXt2YXIgYT17Tm9CbGVuZGluZzowLE5vcm1hbEJsZW5kaW5nOjEsQWRkaXRpdmVCbGVuZGluZzoyLFN1YnRyYWN0aXZlQmxlbmRpbmc6MyxNdWx0aXBseUJsZW5kaW5nOjQsQ3VzdG9tQmxlbmRpbmc6NX0sYj1uZXcgSCxjPW5ldyBBZCxkPW5ldyBQZDtyZXR1cm4gZnVuY3Rpb24oZSxmLGcpe2Z1bmN0aW9uIGgoYSxiLGQsZSxoKXthPWYrYTt2YXIgbT1rYy5IYW5kbGVycy5nZXQoYSk7XG4gICAgbnVsbCE9PW0/YT1tLmxvYWQoYSk6KGMuc2V0Q3Jvc3NPcmlnaW4oZyksYT1jLmxvYWQoYSkpO3ZvaWQgMCE9PWImJihhLnJlcGVhdC5mcm9tQXJyYXkoYiksMSE9PWJbMF0mJihhLndyYXBTPTFFMyksMSE9PWJbMV0mJihhLndyYXBUPTFFMykpO3ZvaWQgMCE9PWQmJmEub2Zmc2V0LmZyb21BcnJheShkKTt2b2lkIDAhPT1lJiYoXCJyZXBlYXRcIj09PWVbMF0mJihhLndyYXBTPTFFMyksXCJtaXJyb3JcIj09PWVbMF0mJihhLndyYXBTPTEwMDIpLFwicmVwZWF0XCI9PT1lWzFdJiYoYS53cmFwVD0xRTMpLFwibWlycm9yXCI9PT1lWzFdJiYoYS53cmFwVD0xMDAyKSk7dm9pZCAwIT09aCYmKGEuYW5pc290cm9weT1oKTtiPVEuZ2VuZXJhdGVVVUlEKCk7a1tiXT1hO3JldHVybiBifXZhciBrPXt9LG09e3V1aWQ6US5nZW5lcmF0ZVVVSUQoKSx0eXBlOlwiTWVzaExhbWJlcnRNYXRlcmlhbFwifSxsO2ZvcihsIGluIGUpe3ZhciBuPWVbbF07c3dpdGNoKGwpe2Nhc2UgXCJEYmdDb2xvclwiOmNhc2UgXCJEYmdJbmRleFwiOmNhc2UgXCJvcHRpY2FsRGVuc2l0eVwiOmNhc2UgXCJpbGx1bWluYXRpb25cIjpicmVhaztcbiAgICBjYXNlIFwiRGJnTmFtZVwiOm0ubmFtZT1uO2JyZWFrO2Nhc2UgXCJibGVuZGluZ1wiOm0uYmxlbmRpbmc9YVtuXTticmVhaztjYXNlIFwiY29sb3JBbWJpZW50XCI6Y2FzZSBcIm1hcEFtYmllbnRcIjpjb25zb2xlLndhcm4oXCJUSFJFRS5Mb2FkZXIuY3JlYXRlTWF0ZXJpYWw6XCIsbCxcImlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuXCIpO2JyZWFrO2Nhc2UgXCJjb2xvckRpZmZ1c2VcIjptLmNvbG9yPWIuZnJvbUFycmF5KG4pLmdldEhleCgpO2JyZWFrO2Nhc2UgXCJjb2xvclNwZWN1bGFyXCI6bS5zcGVjdWxhcj1iLmZyb21BcnJheShuKS5nZXRIZXgoKTticmVhaztjYXNlIFwiY29sb3JFbWlzc2l2ZVwiOm0uZW1pc3NpdmU9Yi5mcm9tQXJyYXkobikuZ2V0SGV4KCk7YnJlYWs7Y2FzZSBcInNwZWN1bGFyQ29lZlwiOm0uc2hpbmluZXNzPW47YnJlYWs7Y2FzZSBcInNoYWRpbmdcIjpcImJhc2ljXCI9PT1uLnRvTG93ZXJDYXNlKCkmJihtLnR5cGU9XCJNZXNoQmFzaWNNYXRlcmlhbFwiKTtcInBob25nXCI9PT1uLnRvTG93ZXJDYXNlKCkmJlxuICAgIChtLnR5cGU9XCJNZXNoUGhvbmdNYXRlcmlhbFwiKTtcInN0YW5kYXJkXCI9PT1uLnRvTG93ZXJDYXNlKCkmJihtLnR5cGU9XCJNZXNoU3RhbmRhcmRNYXRlcmlhbFwiKTticmVhaztjYXNlIFwibWFwRGlmZnVzZVwiOm0ubWFwPWgobixlLm1hcERpZmZ1c2VSZXBlYXQsZS5tYXBEaWZmdXNlT2Zmc2V0LGUubWFwRGlmZnVzZVdyYXAsZS5tYXBEaWZmdXNlQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcERpZmZ1c2VSZXBlYXRcIjpjYXNlIFwibWFwRGlmZnVzZU9mZnNldFwiOmNhc2UgXCJtYXBEaWZmdXNlV3JhcFwiOmNhc2UgXCJtYXBEaWZmdXNlQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBFbWlzc2l2ZVwiOm0uZW1pc3NpdmVNYXA9aChuLGUubWFwRW1pc3NpdmVSZXBlYXQsZS5tYXBFbWlzc2l2ZU9mZnNldCxlLm1hcEVtaXNzaXZlV3JhcCxlLm1hcEVtaXNzaXZlQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcEVtaXNzaXZlUmVwZWF0XCI6Y2FzZSBcIm1hcEVtaXNzaXZlT2Zmc2V0XCI6Y2FzZSBcIm1hcEVtaXNzaXZlV3JhcFwiOmNhc2UgXCJtYXBFbWlzc2l2ZUFuaXNvdHJvcHlcIjpicmVhaztcbiAgICBjYXNlIFwibWFwTGlnaHRcIjptLmxpZ2h0TWFwPWgobixlLm1hcExpZ2h0UmVwZWF0LGUubWFwTGlnaHRPZmZzZXQsZS5tYXBMaWdodFdyYXAsZS5tYXBMaWdodEFuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBMaWdodFJlcGVhdFwiOmNhc2UgXCJtYXBMaWdodE9mZnNldFwiOmNhc2UgXCJtYXBMaWdodFdyYXBcIjpjYXNlIFwibWFwTGlnaHRBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcEFPXCI6bS5hb01hcD1oKG4sZS5tYXBBT1JlcGVhdCxlLm1hcEFPT2Zmc2V0LGUubWFwQU9XcmFwLGUubWFwQU9Bbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwQU9SZXBlYXRcIjpjYXNlIFwibWFwQU9PZmZzZXRcIjpjYXNlIFwibWFwQU9XcmFwXCI6Y2FzZSBcIm1hcEFPQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBCdW1wXCI6bS5idW1wTWFwPWgobixlLm1hcEJ1bXBSZXBlYXQsZS5tYXBCdW1wT2Zmc2V0LGUubWFwQnVtcFdyYXAsZS5tYXBCdW1wQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcEJ1bXBTY2FsZVwiOm0uYnVtcFNjYWxlPVxuICAgIG47YnJlYWs7Y2FzZSBcIm1hcEJ1bXBSZXBlYXRcIjpjYXNlIFwibWFwQnVtcE9mZnNldFwiOmNhc2UgXCJtYXBCdW1wV3JhcFwiOmNhc2UgXCJtYXBCdW1wQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBOb3JtYWxcIjptLm5vcm1hbE1hcD1oKG4sZS5tYXBOb3JtYWxSZXBlYXQsZS5tYXBOb3JtYWxPZmZzZXQsZS5tYXBOb3JtYWxXcmFwLGUubWFwTm9ybWFsQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcE5vcm1hbEZhY3RvclwiOm0ubm9ybWFsU2NhbGU9W24sbl07YnJlYWs7Y2FzZSBcIm1hcE5vcm1hbFJlcGVhdFwiOmNhc2UgXCJtYXBOb3JtYWxPZmZzZXRcIjpjYXNlIFwibWFwTm9ybWFsV3JhcFwiOmNhc2UgXCJtYXBOb3JtYWxBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcFNwZWN1bGFyXCI6bS5zcGVjdWxhck1hcD1oKG4sZS5tYXBTcGVjdWxhclJlcGVhdCxlLm1hcFNwZWN1bGFyT2Zmc2V0LGUubWFwU3BlY3VsYXJXcmFwLGUubWFwU3BlY3VsYXJBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwU3BlY3VsYXJSZXBlYXRcIjpjYXNlIFwibWFwU3BlY3VsYXJPZmZzZXRcIjpjYXNlIFwibWFwU3BlY3VsYXJXcmFwXCI6Y2FzZSBcIm1hcFNwZWN1bGFyQW5pc290cm9weVwiOmJyZWFrO1xuICAgIGNhc2UgXCJtYXBNZXRhbG5lc3NcIjptLm1ldGFsbmVzc01hcD1oKG4sZS5tYXBNZXRhbG5lc3NSZXBlYXQsZS5tYXBNZXRhbG5lc3NPZmZzZXQsZS5tYXBNZXRhbG5lc3NXcmFwLGUubWFwTWV0YWxuZXNzQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcE1ldGFsbmVzc1JlcGVhdFwiOmNhc2UgXCJtYXBNZXRhbG5lc3NPZmZzZXRcIjpjYXNlIFwibWFwTWV0YWxuZXNzV3JhcFwiOmNhc2UgXCJtYXBNZXRhbG5lc3NBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcFJvdWdobmVzc1wiOm0ucm91Z2huZXNzTWFwPWgobixlLm1hcFJvdWdobmVzc1JlcGVhdCxlLm1hcFJvdWdobmVzc09mZnNldCxlLm1hcFJvdWdobmVzc1dyYXAsZS5tYXBSb3VnaG5lc3NBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwUm91Z2huZXNzUmVwZWF0XCI6Y2FzZSBcIm1hcFJvdWdobmVzc09mZnNldFwiOmNhc2UgXCJtYXBSb3VnaG5lc3NXcmFwXCI6Y2FzZSBcIm1hcFJvdWdobmVzc0FuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwibWFwQWxwaGFcIjptLmFscGhhTWFwPVxuICAgIGgobixlLm1hcEFscGhhUmVwZWF0LGUubWFwQWxwaGFPZmZzZXQsZS5tYXBBbHBoYVdyYXAsZS5tYXBBbHBoYUFuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBBbHBoYVJlcGVhdFwiOmNhc2UgXCJtYXBBbHBoYU9mZnNldFwiOmNhc2UgXCJtYXBBbHBoYVdyYXBcIjpjYXNlIFwibWFwQWxwaGFBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcImZsaXBTaWRlZFwiOm0uc2lkZT0xO2JyZWFrO2Nhc2UgXCJkb3VibGVTaWRlZFwiOm0uc2lkZT0yO2JyZWFrO2Nhc2UgXCJ0cmFuc3BhcmVuY3lcIjpjb25zb2xlLndhcm4oXCJUSFJFRS5Mb2FkZXIuY3JlYXRlTWF0ZXJpYWw6IHRyYW5zcGFyZW5jeSBoYXMgYmVlbiByZW5hbWVkIHRvIG9wYWNpdHlcIik7bS5vcGFjaXR5PW47YnJlYWs7Y2FzZSBcImRlcHRoVGVzdFwiOmNhc2UgXCJkZXB0aFdyaXRlXCI6Y2FzZSBcImNvbG9yV3JpdGVcIjpjYXNlIFwib3BhY2l0eVwiOmNhc2UgXCJyZWZsZWN0aXZpdHlcIjpjYXNlIFwidHJhbnNwYXJlbnRcIjpjYXNlIFwidmlzaWJsZVwiOmNhc2UgXCJ3aXJlZnJhbWVcIjptW2xdPVxuICAgIG47YnJlYWs7Y2FzZSBcInZlcnRleENvbG9yc1wiOiEwPT09biYmKG0udmVydGV4Q29sb3JzPTIpO1wiZmFjZVwiPT09biYmKG0udmVydGV4Q29sb3JzPTEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcihcIlRIUkVFLkxvYWRlci5jcmVhdGVNYXRlcmlhbDogVW5zdXBwb3J0ZWRcIixsLG4pfX1cIk1lc2hCYXNpY01hdGVyaWFsXCI9PT1tLnR5cGUmJmRlbGV0ZSBtLmVtaXNzaXZlO1wiTWVzaFBob25nTWF0ZXJpYWxcIiE9PW0udHlwZSYmZGVsZXRlIG0uc3BlY3VsYXI7MT5tLm9wYWNpdHkmJihtLnRyYW5zcGFyZW50PSEwKTtkLnNldFRleHR1cmVzKGspO3JldHVybiBkLnBhcnNlKG0pfX0oKX0pO3ZhciBIZT17ZGVjb2RlVGV4dDpmdW5jdGlvbihhKXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIFRleHREZWNvZGVyKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZShhKTtmb3IodmFyIGI9XCJcIixjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWIrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtjXSk7cmV0dXJuIGJ9LFxuICAgIGV4dHJhY3RVcmxCYXNlOmZ1bmN0aW9uKGEpe2E9YS5zcGxpdChcIi9cIik7aWYoMT09PWEubGVuZ3RoKXJldHVyblwiLi9cIjthLnBvcCgpO3JldHVybiBhLmpvaW4oXCIvXCIpK1wiL1wifX07T2JqZWN0LmFzc2lnbihtZS5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcyxmPXRoaXMudGV4dHVyZVBhdGgmJlwic3RyaW5nXCI9PT10eXBlb2YgdGhpcy50ZXh0dXJlUGF0aD90aGlzLnRleHR1cmVQYXRoOkhlLmV4dHJhY3RVcmxCYXNlKGEpLGc9bmV3IE5hKHRoaXMubWFuYWdlcik7Zy5zZXRXaXRoQ3JlZGVudGlhbHModGhpcy53aXRoQ3JlZGVudGlhbHMpO2cubG9hZChhLGZ1bmN0aW9uKGMpe2M9SlNPTi5wYXJzZShjKTt2YXIgZD1jLm1ldGFkYXRhO2lmKHZvaWQgMCE9PWQmJihkPWQudHlwZSx2b2lkIDAhPT1kKSl7aWYoXCJvYmplY3RcIj09PWQudG9Mb3dlckNhc2UoKSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkpTT05Mb2FkZXI6IFwiK2ErXCIgc2hvdWxkIGJlIGxvYWRlZCB3aXRoIFRIUkVFLk9iamVjdExvYWRlciBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm59aWYoXCJzY2VuZVwiPT09ZC50b0xvd2VyQ2FzZSgpKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSlNPTkxvYWRlcjogXCIrYStcIiBzaG91bGQgYmUgbG9hZGVkIHdpdGggVEhSRUUuU2NlbmVMb2FkZXIgaW5zdGVhZC5cIik7cmV0dXJufX1jPWUucGFyc2UoYyxmKTtiKGMuZ2VvbWV0cnksYy5tYXRlcmlhbHMpfSxjLGQpfSxzZXRUZXh0dXJlUGF0aDpmdW5jdGlvbihhKXt0aGlzLnRleHR1cmVQYXRoPWF9LHBhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7dm9pZCAwIT09YS5kYXRhJiYoYT1hLmRhdGEpO2Euc2NhbGU9dm9pZCAwIT09YS5zY2FsZT8xL2Euc2NhbGU6MTt2YXIgYz1uZXcgTCxkPWEsZSxmLGcsaD1kLmZhY2VzO3ZhciBrPWQudmVydGljZXM7dmFyIG09ZC5ub3JtYWxzLGw9ZC5jb2xvcnM7dmFyIG49ZC5zY2FsZTt2YXIgdT0wO2lmKHZvaWQgMCE9PWQudXZzKXtmb3IoZT0wO2U8ZC51dnMubGVuZ3RoO2UrKylkLnV2c1tlXS5sZW5ndGgmJnUrKztmb3IoZT1cbiAgICAwO2U8dTtlKyspYy5mYWNlVmVydGV4VXZzW2VdPVtdfXZhciByPTA7Zm9yKGc9ay5sZW5ndGg7cjxnOyllPW5ldyBwLGUueD1rW3IrK10qbixlLnk9a1tyKytdKm4sZS56PWtbcisrXSpuLGMudmVydGljZXMucHVzaChlKTtyPTA7Zm9yKGc9aC5sZW5ndGg7cjxnOyl7az1oW3IrK107dmFyIHQ9ayYxO3ZhciB2PWsmMjtlPWsmODt2YXIgdz1rJjE2O3ZhciB6PWsmMzI7bj1rJjY0O2smPTEyODtpZih0KXt0PW5ldyBZYTt0LmE9aFtyXTt0LmI9aFtyKzFdO3QuYz1oW3IrM107dmFyIHk9bmV3IFlhO3kuYT1oW3IrMV07eS5iPWhbcisyXTt5LmM9aFtyKzNdO3IrPTQ7diYmKHY9aFtyKytdLHQubWF0ZXJpYWxJbmRleD12LHkubWF0ZXJpYWxJbmRleD12KTt2PWMuZmFjZXMubGVuZ3RoO2lmKGUpZm9yKGU9MDtlPHU7ZSsrKXt2YXIgeD1kLnV2c1tlXTtjLmZhY2VWZXJ0ZXhVdnNbZV1bdl09W107Yy5mYWNlVmVydGV4VXZzW2VdW3YrMV09W107Zm9yKGY9MDs0PmY7ZisrKXt2YXIgQT1oW3IrK107XG4gICAgdmFyIEI9eFsyKkFdO0E9eFsyKkErMV07Qj1uZXcgRChCLEEpOzIhPT1mJiZjLmZhY2VWZXJ0ZXhVdnNbZV1bdl0ucHVzaChCKTswIT09ZiYmYy5mYWNlVmVydGV4VXZzW2VdW3YrMV0ucHVzaChCKX19dyYmKHc9MypoW3IrK10sdC5ub3JtYWwuc2V0KG1bdysrXSxtW3crK10sbVt3XSkseS5ub3JtYWwuY29weSh0Lm5vcm1hbCkpO2lmKHopZm9yKGU9MDs0PmU7ZSsrKXc9MypoW3IrK10sej1uZXcgcChtW3crK10sbVt3KytdLG1bd10pLDIhPT1lJiZ0LnZlcnRleE5vcm1hbHMucHVzaCh6KSwwIT09ZSYmeS52ZXJ0ZXhOb3JtYWxzLnB1c2goeik7biYmKG49aFtyKytdLG49bFtuXSx0LmNvbG9yLnNldEhleChuKSx5LmNvbG9yLnNldEhleChuKSk7aWYoaylmb3IoZT0wOzQ+ZTtlKyspbj1oW3IrK10sbj1sW25dLDIhPT1lJiZ0LnZlcnRleENvbG9ycy5wdXNoKG5ldyBIKG4pKSwwIT09ZSYmeS52ZXJ0ZXhDb2xvcnMucHVzaChuZXcgSChuKSk7Yy5mYWNlcy5wdXNoKHQpO2MuZmFjZXMucHVzaCh5KX1lbHNle3Q9XG4gICAgbmV3IFlhO3QuYT1oW3IrK107dC5iPWhbcisrXTt0LmM9aFtyKytdO3YmJih2PWhbcisrXSx0Lm1hdGVyaWFsSW5kZXg9dik7dj1jLmZhY2VzLmxlbmd0aDtpZihlKWZvcihlPTA7ZTx1O2UrKylmb3IoeD1kLnV2c1tlXSxjLmZhY2VWZXJ0ZXhVdnNbZV1bdl09W10sZj0wOzM+ZjtmKyspQT1oW3IrK10sQj14WzIqQV0sQT14WzIqQSsxXSxCPW5ldyBEKEIsQSksYy5mYWNlVmVydGV4VXZzW2VdW3ZdLnB1c2goQik7dyYmKHc9MypoW3IrK10sdC5ub3JtYWwuc2V0KG1bdysrXSxtW3crK10sbVt3XSkpO2lmKHopZm9yKGU9MDszPmU7ZSsrKXc9MypoW3IrK10sej1uZXcgcChtW3crK10sbVt3KytdLG1bd10pLHQudmVydGV4Tm9ybWFscy5wdXNoKHopO24mJihuPWhbcisrXSx0LmNvbG9yLnNldEhleChsW25dKSk7aWYoaylmb3IoZT0wOzM+ZTtlKyspbj1oW3IrK10sdC52ZXJ0ZXhDb2xvcnMucHVzaChuZXcgSChsW25dKSk7Yy5mYWNlcy5wdXNoKHQpfX1kPWE7cj12b2lkIDAhPT1kLmluZmx1ZW5jZXNQZXJWZXJ0ZXg/XG4gICAgZC5pbmZsdWVuY2VzUGVyVmVydGV4OjI7aWYoZC5za2luV2VpZ2h0cylmb3IoZz0wLGg9ZC5za2luV2VpZ2h0cy5sZW5ndGg7ZzxoO2crPXIpYy5za2luV2VpZ2h0cy5wdXNoKG5ldyBhYShkLnNraW5XZWlnaHRzW2ddLDE8cj9kLnNraW5XZWlnaHRzW2crMV06MCwyPHI/ZC5za2luV2VpZ2h0c1tnKzJdOjAsMzxyP2Quc2tpbldlaWdodHNbZyszXTowKSk7aWYoZC5za2luSW5kaWNlcylmb3IoZz0wLGg9ZC5za2luSW5kaWNlcy5sZW5ndGg7ZzxoO2crPXIpYy5za2luSW5kaWNlcy5wdXNoKG5ldyBhYShkLnNraW5JbmRpY2VzW2ddLDE8cj9kLnNraW5JbmRpY2VzW2crMV06MCwyPHI/ZC5za2luSW5kaWNlc1tnKzJdOjAsMzxyP2Quc2tpbkluZGljZXNbZyszXTowKSk7Yy5ib25lcz1kLmJvbmVzO2MuYm9uZXMmJjA8Yy5ib25lcy5sZW5ndGgmJihjLnNraW5XZWlnaHRzLmxlbmd0aCE9PWMuc2tpbkluZGljZXMubGVuZ3RofHxjLnNraW5JbmRpY2VzLmxlbmd0aCE9PWMudmVydGljZXMubGVuZ3RoKSYmXG4gICAgY29uc29sZS53YXJuKFwiV2hlbiBza2lubmluZywgbnVtYmVyIG9mIHZlcnRpY2VzIChcIitjLnZlcnRpY2VzLmxlbmd0aCtcIiksIHNraW5JbmRpY2VzIChcIitjLnNraW5JbmRpY2VzLmxlbmd0aCtcIiksIGFuZCBza2luV2VpZ2h0cyAoXCIrYy5za2luV2VpZ2h0cy5sZW5ndGgrXCIpIHNob3VsZCBtYXRjaC5cIik7Zz1hO2g9Zy5zY2FsZTtpZih2b2lkIDAhPT1nLm1vcnBoVGFyZ2V0cylmb3IoZD0wLHI9Zy5tb3JwaFRhcmdldHMubGVuZ3RoO2Q8cjtkKyspZm9yKGMubW9ycGhUYXJnZXRzW2RdPXt9LGMubW9ycGhUYXJnZXRzW2RdLm5hbWU9Zy5tb3JwaFRhcmdldHNbZF0ubmFtZSxjLm1vcnBoVGFyZ2V0c1tkXS52ZXJ0aWNlcz1bXSxtPWMubW9ycGhUYXJnZXRzW2RdLnZlcnRpY2VzLGw9Zy5tb3JwaFRhcmdldHNbZF0udmVydGljZXMsdT0wLGs9bC5sZW5ndGg7dTxrO3UrPTMpbj1uZXcgcCxuLng9bFt1XSpoLG4ueT1sW3UrMV0qaCxuLno9bFt1KzJdKmgsbS5wdXNoKG4pO2lmKHZvaWQgMCE9PVxuICAgIGcubW9ycGhDb2xvcnMmJjA8Zy5tb3JwaENvbG9ycy5sZW5ndGgpZm9yKGNvbnNvbGUud2FybignVEhSRUUuSlNPTkxvYWRlcjogXCJtb3JwaENvbG9yc1wiIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFVzaW5nIHRoZW0gYXMgZmFjZSBjb2xvcnMuJyksaD1jLmZhY2VzLGc9Zy5tb3JwaENvbG9yc1swXS5jb2xvcnMsZD0wLHI9aC5sZW5ndGg7ZDxyO2QrKyloW2RdLmNvbG9yLmZyb21BcnJheShnLDMqZCk7Zz1hO2Q9W107cj1bXTt2b2lkIDAhPT1nLmFuaW1hdGlvbiYmci5wdXNoKGcuYW5pbWF0aW9uKTt2b2lkIDAhPT1nLmFuaW1hdGlvbnMmJihnLmFuaW1hdGlvbnMubGVuZ3RoP3I9ci5jb25jYXQoZy5hbmltYXRpb25zKTpyLnB1c2goZy5hbmltYXRpb25zKSk7Zm9yKGc9MDtnPHIubGVuZ3RoO2crKykoaD1DYS5wYXJzZUFuaW1hdGlvbihyW2ddLGMuYm9uZXMpKSYmZC5wdXNoKGgpO2MubW9ycGhUYXJnZXRzJiYocj1DYS5DcmVhdGVDbGlwc0Zyb21Nb3JwaFRhcmdldFNlcXVlbmNlcyhjLm1vcnBoVGFyZ2V0cyxcbiAgICAxMCksZD1kLmNvbmNhdChyKSk7MDxkLmxlbmd0aCYmKGMuYW5pbWF0aW9ucz1kKTtjLmNvbXB1dGVGYWNlTm9ybWFscygpO2MuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7aWYodm9pZCAwPT09YS5tYXRlcmlhbHN8fDA9PT1hLm1hdGVyaWFscy5sZW5ndGgpcmV0dXJue2dlb21ldHJ5OmN9O2E9a2MucHJvdG90eXBlLmluaXRNYXRlcmlhbHMoYS5tYXRlcmlhbHMsYix0aGlzLmNyb3NzT3JpZ2luKTtyZXR1cm57Z2VvbWV0cnk6YyxtYXRlcmlhbHM6YX19fSgpfSk7T2JqZWN0LmFzc2lnbihqZi5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7XCJcIj09PXRoaXMudGV4dHVyZVBhdGgmJih0aGlzLnRleHR1cmVQYXRoPWEuc3Vic3RyaW5nKDAsYS5sYXN0SW5kZXhPZihcIi9cIikrMSkpO3ZhciBlPXRoaXM7KG5ldyBOYShlLm1hbmFnZXIpKS5sb2FkKGEsZnVuY3Rpb24oYyl7dmFyIGY9bnVsbDt0cnl7Zj1KU09OLnBhcnNlKGMpfWNhdGNoKGgpe3ZvaWQgMCE9PWQmJmQoaCk7Y29uc29sZS5lcnJvcihcIlRIUkVFOk9iamVjdExvYWRlcjogQ2FuJ3QgcGFyc2UgXCIrXG4gICAgYStcIi5cIixoLm1lc3NhZ2UpO3JldHVybn1jPWYubWV0YWRhdGE7dm9pZCAwPT09Y3x8dm9pZCAwPT09Yy50eXBlfHxcImdlb21ldHJ5XCI9PT1jLnR5cGUudG9Mb3dlckNhc2UoKT9jb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBDYW4ndCBsb2FkIFwiK2ErXCIuIFVzZSBUSFJFRS5KU09OTG9hZGVyIGluc3RlYWQuXCIpOmUucGFyc2UoZixiKX0sYyxkKX0sc2V0VGV4dHVyZVBhdGg6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0dXJlUGF0aD1hfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWF9LHBhcnNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5wYXJzZVNoYXBlKGEuc2hhcGVzKSxjPXRoaXMucGFyc2VHZW9tZXRyaWVzKGEuZ2VvbWV0cmllcyxjKSxkPXRoaXMucGFyc2VJbWFnZXMoYS5pbWFnZXMsZnVuY3Rpb24oKXt2b2lkIDAhPT1iJiZiKGUpfSksZD10aGlzLnBhcnNlVGV4dHVyZXMoYS50ZXh0dXJlcyxkKSxkPXRoaXMucGFyc2VNYXRlcmlhbHMoYS5tYXRlcmlhbHMsXG4gICAgZCksZT10aGlzLnBhcnNlT2JqZWN0KGEub2JqZWN0LGMsZCk7YS5hbmltYXRpb25zJiYoZS5hbmltYXRpb25zPXRoaXMucGFyc2VBbmltYXRpb25zKGEuYW5pbWF0aW9ucykpO3ZvaWQgMCE9PWEuaW1hZ2VzJiYwIT09YS5pbWFnZXMubGVuZ3RofHx2b2lkIDA9PT1ifHxiKGUpO3JldHVybiBlfSxwYXJzZVNoYXBlOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2lmKHZvaWQgMCE9PWEpZm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT0obmV3IGpiKS5mcm9tSlNPTihhW2NdKTtiW2UudXVpZF09ZX1yZXR1cm4gYn0scGFyc2VHZW9tZXRyaWVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307aWYodm9pZCAwIT09YSlmb3IodmFyIGQ9bmV3IG1lLGU9bmV3IGxlLGY9MCxnPWEubGVuZ3RoO2Y8ZztmKyspe3ZhciBoPWFbZl07c3dpdGNoKGgudHlwZSl7Y2FzZSBcIlBsYW5lR2VvbWV0cnlcIjpjYXNlIFwiUGxhbmVCdWZmZXJHZW9tZXRyeVwiOnZhciBrPW5ldyBrYVtoLnR5cGVdKGgud2lkdGgsXG4gICAgaC5oZWlnaHQsaC53aWR0aFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJCb3hHZW9tZXRyeVwiOmNhc2UgXCJCb3hCdWZmZXJHZW9tZXRyeVwiOmNhc2UgXCJDdWJlR2VvbWV0cnlcIjprPW5ldyBrYVtoLnR5cGVdKGgud2lkdGgsaC5oZWlnaHQsaC5kZXB0aCxoLndpZHRoU2VnbWVudHMsaC5oZWlnaHRTZWdtZW50cyxoLmRlcHRoU2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJDaXJjbGVHZW9tZXRyeVwiOmNhc2UgXCJDaXJjbGVCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5yYWRpdXMsaC5zZWdtZW50cyxoLnRoZXRhU3RhcnQsaC50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIkN5bGluZGVyR2VvbWV0cnlcIjpjYXNlIFwiQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5yYWRpdXNUb3AsaC5yYWRpdXNCb3R0b20saC5oZWlnaHQsaC5yYWRpYWxTZWdtZW50cyxoLmhlaWdodFNlZ21lbnRzLGgub3BlbkVuZGVkLGgudGhldGFTdGFydCxoLnRoZXRhTGVuZ3RoKTtcbiAgICBicmVhaztjYXNlIFwiQ29uZUdlb21ldHJ5XCI6Y2FzZSBcIkNvbmVCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5yYWRpdXMsaC5oZWlnaHQsaC5yYWRpYWxTZWdtZW50cyxoLmhlaWdodFNlZ21lbnRzLGgub3BlbkVuZGVkLGgudGhldGFTdGFydCxoLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlIFwiU3BoZXJlR2VvbWV0cnlcIjpjYXNlIFwiU3BoZXJlQnVmZmVyR2VvbWV0cnlcIjprPW5ldyBrYVtoLnR5cGVdKGgucmFkaXVzLGgud2lkdGhTZWdtZW50cyxoLmhlaWdodFNlZ21lbnRzLGgucGhpU3RhcnQsaC5waGlMZW5ndGgsaC50aGV0YVN0YXJ0LGgudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2UgXCJEb2RlY2FoZWRyb25HZW9tZXRyeVwiOmNhc2UgXCJEb2RlY2FoZWRyb25CdWZmZXJHZW9tZXRyeVwiOmNhc2UgXCJJY29zYWhlZHJvbkdlb21ldHJ5XCI6Y2FzZSBcIkljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjpjYXNlIFwiT2N0YWhlZHJvbkdlb21ldHJ5XCI6Y2FzZSBcIk9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeVwiOmNhc2UgXCJUZXRyYWhlZHJvbkdlb21ldHJ5XCI6Y2FzZSBcIlRldHJhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjprPVxuICAgIG5ldyBrYVtoLnR5cGVdKGgucmFkaXVzLGguZGV0YWlsKTticmVhaztjYXNlIFwiUmluZ0dlb21ldHJ5XCI6Y2FzZSBcIlJpbmdCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5pbm5lclJhZGl1cyxoLm91dGVyUmFkaXVzLGgudGhldGFTZWdtZW50cyxoLnBoaVNlZ21lbnRzLGgudGhldGFTdGFydCxoLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlIFwiVG9ydXNHZW9tZXRyeVwiOmNhc2UgXCJUb3J1c0J1ZmZlckdlb21ldHJ5XCI6az1uZXcga2FbaC50eXBlXShoLnJhZGl1cyxoLnR1YmUsaC5yYWRpYWxTZWdtZW50cyxoLnR1YnVsYXJTZWdtZW50cyxoLmFyYyk7YnJlYWs7Y2FzZSBcIlRvcnVzS25vdEdlb21ldHJ5XCI6Y2FzZSBcIlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5XCI6az1uZXcga2FbaC50eXBlXShoLnJhZGl1cyxoLnR1YmUsaC50dWJ1bGFyU2VnbWVudHMsaC5yYWRpYWxTZWdtZW50cyxoLnAsaC5xKTticmVhaztjYXNlIFwiTGF0aGVHZW9tZXRyeVwiOmNhc2UgXCJMYXRoZUJ1ZmZlckdlb21ldHJ5XCI6az1cbiAgICBuZXcga2FbaC50eXBlXShoLnBvaW50cyxoLnNlZ21lbnRzLGgucGhpU3RhcnQsaC5waGlMZW5ndGgpO2JyZWFrO2Nhc2UgXCJQb2x5aGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiUG9seWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6az1uZXcga2FbaC50eXBlXShoLnZlcnRpY2VzLGguaW5kaWNlcyxoLnJhZGl1cyxoLmRldGFpbHMpO2JyZWFrO2Nhc2UgXCJTaGFwZUdlb21ldHJ5XCI6Y2FzZSBcIlNoYXBlQnVmZmVyR2VvbWV0cnlcIjprPVtdO2Y9MDtmb3IoZz1oLnNoYXBlcy5sZW5ndGg7ZjxnO2YrKylrLnB1c2goYltoLnNoYXBlc1tmXV0pO2s9bmV3IGthW2gudHlwZV0oayxoLmN1cnZlU2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJCdWZmZXJHZW9tZXRyeVwiOms9ZS5wYXJzZShoKTticmVhaztjYXNlIFwiR2VvbWV0cnlcIjprPWQucGFyc2UoaCx0aGlzLnRleHR1cmVQYXRoKS5nZW9tZXRyeTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybignVEhSRUUuT2JqZWN0TG9hZGVyOiBVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlIFwiJytcbiAgICBoLnR5cGUrJ1wiJyk7Y29udGludWV9ay51dWlkPWgudXVpZDt2b2lkIDAhPT1oLm5hbWUmJihrLm5hbWU9aC5uYW1lKTtjW2gudXVpZF09a31yZXR1cm4gY30scGFyc2VNYXRlcmlhbHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtpZih2b2lkIDAhPT1hKXt2YXIgZD1uZXcgUGQ7ZC5zZXRUZXh0dXJlcyhiKTtiPTA7Zm9yKHZhciBlPWEubGVuZ3RoO2I8ZTtiKyspe3ZhciBmPWFbYl07aWYoXCJNdWx0aU1hdGVyaWFsXCI9PT1mLnR5cGUpe2Zvcih2YXIgZz1bXSxoPTA7aDxmLm1hdGVyaWFscy5sZW5ndGg7aCsrKWcucHVzaChkLnBhcnNlKGYubWF0ZXJpYWxzW2hdKSk7Y1tmLnV1aWRdPWd9ZWxzZSBjW2YudXVpZF09ZC5wYXJzZShmKX19cmV0dXJuIGN9LHBhcnNlQW5pbWF0aW9uczpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1DYS5wYXJzZShhW2NdKTtiLnB1c2goZCl9cmV0dXJuIGJ9LHBhcnNlSW1hZ2VzOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtkLm1hbmFnZXIuaXRlbVN0YXJ0KGEpO1xuICAgIHJldHVybiBmLmxvYWQoYSxmdW5jdGlvbigpe2QubWFuYWdlci5pdGVtRW5kKGEpfSx2b2lkIDAsZnVuY3Rpb24oKXtkLm1hbmFnZXIuaXRlbUVuZChhKTtkLm1hbmFnZXIuaXRlbUVycm9yKGEpfSl9dmFyIGQ9dGhpcyxlPXt9O2lmKHZvaWQgMCE9PWEmJjA8YS5sZW5ndGgpe2I9bmV3IGhlKGIpO3ZhciBmPW5ldyBhZChiKTtmLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2I9MDtmb3IodmFyIGc9YS5sZW5ndGg7YjxnO2IrKyl7dmFyIGg9YVtiXSxrPS9eKFxcL1xcLyl8KFthLXpdKzooXFwvXFwvKT8pL2kudGVzdChoLnVybCk/aC51cmw6ZC50ZXh0dXJlUGF0aCtoLnVybDtlW2gudXVpZF09YyhrKX19cmV0dXJuIGV9LHBhcnNlVGV4dHVyZXM6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7aWYoXCJudW1iZXJcIj09PXR5cGVvZiBhKXJldHVybiBhO2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlci5wYXJzZVRleHR1cmU6IENvbnN0YW50IHNob3VsZCBiZSBpbiBudW1lcmljIGZvcm0uXCIsXG4gICAgYSk7cmV0dXJuIGJbYV19dmFyIGQ9e307aWYodm9pZCAwIT09YSlmb3IodmFyIGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspe3ZhciBnPWFbZV07dm9pZCAwPT09Zy5pbWFnZSYmY29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IE5vIFwiaW1hZ2VcIiBzcGVjaWZpZWQgZm9yJyxnLnV1aWQpO3ZvaWQgMD09PWJbZy5pbWFnZV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIGltYWdlXCIsZy5pbWFnZSk7dmFyIGg9bmV3IFUoYltnLmltYWdlXSk7aC5uZWVkc1VwZGF0ZT0hMDtoLnV1aWQ9Zy51dWlkO3ZvaWQgMCE9PWcubmFtZSYmKGgubmFtZT1nLm5hbWUpO3ZvaWQgMCE9PWcubWFwcGluZyYmKGgubWFwcGluZz1jKGcubWFwcGluZyxPZykpO3ZvaWQgMCE9PWcub2Zmc2V0JiZoLm9mZnNldC5mcm9tQXJyYXkoZy5vZmZzZXQpO3ZvaWQgMCE9PWcucmVwZWF0JiZoLnJlcGVhdC5mcm9tQXJyYXkoZy5yZXBlYXQpO3ZvaWQgMCE9PWcuY2VudGVyJiZoLmNlbnRlci5mcm9tQXJyYXkoZy5jZW50ZXIpO1xuICAgIHZvaWQgMCE9PWcucm90YXRpb24mJihoLnJvdGF0aW9uPWcucm90YXRpb24pO3ZvaWQgMCE9PWcud3JhcCYmKGgud3JhcFM9YyhnLndyYXBbMF0seWYpLGgud3JhcFQ9YyhnLndyYXBbMV0seWYpKTt2b2lkIDAhPT1nLm1pbkZpbHRlciYmKGgubWluRmlsdGVyPWMoZy5taW5GaWx0ZXIsemYpKTt2b2lkIDAhPT1nLm1hZ0ZpbHRlciYmKGgubWFnRmlsdGVyPWMoZy5tYWdGaWx0ZXIsemYpKTt2b2lkIDAhPT1nLmFuaXNvdHJvcHkmJihoLmFuaXNvdHJvcHk9Zy5hbmlzb3Ryb3B5KTt2b2lkIDAhPT1nLmZsaXBZJiYoaC5mbGlwWT1nLmZsaXBZKTtkW2cudXVpZF09aH1yZXR1cm4gZH0scGFyc2VPYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoYSl7dm9pZCAwPT09Y1thXSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgZ2VvbWV0cnlcIixhKTtyZXR1cm4gY1thXX1mdW5jdGlvbiBmKGEpe2lmKHZvaWQgMCE9PVxuICAgIGEpe2lmKEFycmF5LmlzQXJyYXkoYSkpe2Zvcih2YXIgYj1bXSxjPTAsZT1hLmxlbmd0aDtjPGU7YysrKXt2YXIgZj1hW2NdO3ZvaWQgMD09PWRbZl0mJmNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIG1hdGVyaWFsXCIsZik7Yi5wdXNoKGRbZl0pfXJldHVybiBifXZvaWQgMD09PWRbYV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIG1hdGVyaWFsXCIsYSk7cmV0dXJuIGRbYV19fXN3aXRjaChiLnR5cGUpe2Nhc2UgXCJTY2VuZVwiOnZhciBnPW5ldyB2ZDt2b2lkIDAhPT1iLmJhY2tncm91bmQmJk51bWJlci5pc0ludGVnZXIoYi5iYWNrZ3JvdW5kKSYmKGcuYmFja2dyb3VuZD1uZXcgSChiLmJhY2tncm91bmQpKTt2b2lkIDAhPT1iLmZvZyYmKFwiRm9nXCI9PT1iLmZvZy50eXBlP2cuZm9nPW5ldyBRYihiLmZvZy5jb2xvcixiLmZvZy5uZWFyLGIuZm9nLmZhcik6XCJGb2dFeHAyXCI9PT1iLmZvZy50eXBlJiYoZy5mb2c9bmV3IFBiKGIuZm9nLmNvbG9yLFxuICAgIGIuZm9nLmRlbnNpdHkpKSk7YnJlYWs7Y2FzZSBcIlBlcnNwZWN0aXZlQ2FtZXJhXCI6Zz1uZXcgYmEoYi5mb3YsYi5hc3BlY3QsYi5uZWFyLGIuZmFyKTt2b2lkIDAhPT1iLmZvY3VzJiYoZy5mb2N1cz1iLmZvY3VzKTt2b2lkIDAhPT1iLnpvb20mJihnLnpvb209Yi56b29tKTt2b2lkIDAhPT1iLmZpbG1HYXVnZSYmKGcuZmlsbUdhdWdlPWIuZmlsbUdhdWdlKTt2b2lkIDAhPT1iLmZpbG1PZmZzZXQmJihnLmZpbG1PZmZzZXQ9Yi5maWxtT2Zmc2V0KTt2b2lkIDAhPT1iLnZpZXcmJihnLnZpZXc9T2JqZWN0LmFzc2lnbih7fSxiLnZpZXcpKTticmVhaztjYXNlIFwiT3J0aG9ncmFwaGljQ2FtZXJhXCI6Zz1uZXcgTGIoYi5sZWZ0LGIucmlnaHQsYi50b3AsYi5ib3R0b20sYi5uZWFyLGIuZmFyKTticmVhaztjYXNlIFwiQW1iaWVudExpZ2h0XCI6Zz1uZXcgSGQoYi5jb2xvcixiLmludGVuc2l0eSk7YnJlYWs7Y2FzZSBcIkRpcmVjdGlvbmFsTGlnaHRcIjpnPW5ldyBHZChiLmNvbG9yLGIuaW50ZW5zaXR5KTtcbiAgICBicmVhaztjYXNlIFwiUG9pbnRMaWdodFwiOmc9bmV3IEVkKGIuY29sb3IsYi5pbnRlbnNpdHksYi5kaXN0YW5jZSxiLmRlY2F5KTticmVhaztjYXNlIFwiUmVjdEFyZWFMaWdodFwiOmc9bmV3IElkKGIuY29sb3IsYi5pbnRlbnNpdHksYi53aWR0aCxiLmhlaWdodCk7YnJlYWs7Y2FzZSBcIlNwb3RMaWdodFwiOmc9bmV3IERkKGIuY29sb3IsYi5pbnRlbnNpdHksYi5kaXN0YW5jZSxiLmFuZ2xlLGIucGVudW1icmEsYi5kZWNheSk7YnJlYWs7Y2FzZSBcIkhlbWlzcGhlcmVMaWdodFwiOmc9bmV3IEJkKGIuY29sb3IsYi5ncm91bmRDb2xvcixiLmludGVuc2l0eSk7YnJlYWs7Y2FzZSBcIlNraW5uZWRNZXNoXCI6Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyLnBhcnNlT2JqZWN0KCkgZG9lcyBub3Qgc3VwcG9ydCBTa2lubmVkTWVzaCB5ZXQuXCIpO2Nhc2UgXCJNZXNoXCI6Zz1lKGIuZ2VvbWV0cnkpO3ZhciBoPWYoYi5tYXRlcmlhbCk7Zz1nLmJvbmVzJiYwPGcuYm9uZXMubGVuZ3RoP25ldyB4ZChnLFxuICAgIGgpOm5ldyByYShnLGgpO2JyZWFrO2Nhc2UgXCJMT0RcIjpnPW5ldyBEYzticmVhaztjYXNlIFwiTGluZVwiOmc9bmV3IHNhKGUoYi5nZW9tZXRyeSksZihiLm1hdGVyaWFsKSxiLm1vZGUpO2JyZWFrO2Nhc2UgXCJMaW5lTG9vcFwiOmc9bmV3IHlkKGUoYi5nZW9tZXRyeSksZihiLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZSBcIkxpbmVTZWdtZW50c1wiOmc9bmV3IFgoZShiLmdlb21ldHJ5KSxmKGIubWF0ZXJpYWwpKTticmVhaztjYXNlIFwiUG9pbnRDbG91ZFwiOmNhc2UgXCJQb2ludHNcIjpnPW5ldyBSYihlKGIuZ2VvbWV0cnkpLGYoYi5tYXRlcmlhbCkpO2JyZWFrO2Nhc2UgXCJTcHJpdGVcIjpnPW5ldyBDYyhmKGIubWF0ZXJpYWwpKTticmVhaztjYXNlIFwiR3JvdXBcIjpnPW5ldyBGYzticmVhaztkZWZhdWx0Omc9bmV3IHh9Zy51dWlkPWIudXVpZDt2b2lkIDAhPT1iLm5hbWUmJihnLm5hbWU9Yi5uYW1lKTt2b2lkIDAhPT1iLm1hdHJpeD8oYS5mcm9tQXJyYXkoYi5tYXRyaXgpLGEuZGVjb21wb3NlKGcucG9zaXRpb24sXG4gICAgZy5xdWF0ZXJuaW9uLGcuc2NhbGUpKToodm9pZCAwIT09Yi5wb3NpdGlvbiYmZy5wb3NpdGlvbi5mcm9tQXJyYXkoYi5wb3NpdGlvbiksdm9pZCAwIT09Yi5yb3RhdGlvbiYmZy5yb3RhdGlvbi5mcm9tQXJyYXkoYi5yb3RhdGlvbiksdm9pZCAwIT09Yi5xdWF0ZXJuaW9uJiZnLnF1YXRlcm5pb24uZnJvbUFycmF5KGIucXVhdGVybmlvbiksdm9pZCAwIT09Yi5zY2FsZSYmZy5zY2FsZS5mcm9tQXJyYXkoYi5zY2FsZSkpO3ZvaWQgMCE9PWIuY2FzdFNoYWRvdyYmKGcuY2FzdFNoYWRvdz1iLmNhc3RTaGFkb3cpO3ZvaWQgMCE9PWIucmVjZWl2ZVNoYWRvdyYmKGcucmVjZWl2ZVNoYWRvdz1iLnJlY2VpdmVTaGFkb3cpO2Iuc2hhZG93JiYodm9pZCAwIT09Yi5zaGFkb3cuYmlhcyYmKGcuc2hhZG93LmJpYXM9Yi5zaGFkb3cuYmlhcyksdm9pZCAwIT09Yi5zaGFkb3cucmFkaXVzJiYoZy5zaGFkb3cucmFkaXVzPWIuc2hhZG93LnJhZGl1cyksdm9pZCAwIT09Yi5zaGFkb3cubWFwU2l6ZSYmXG4gICAgZy5zaGFkb3cubWFwU2l6ZS5mcm9tQXJyYXkoYi5zaGFkb3cubWFwU2l6ZSksdm9pZCAwIT09Yi5zaGFkb3cuY2FtZXJhJiYoZy5zaGFkb3cuY2FtZXJhPXRoaXMucGFyc2VPYmplY3QoYi5zaGFkb3cuY2FtZXJhKSkpO3ZvaWQgMCE9PWIudmlzaWJsZSYmKGcudmlzaWJsZT1iLnZpc2libGUpO3ZvaWQgMCE9PWIudXNlckRhdGEmJihnLnVzZXJEYXRhPWIudXNlckRhdGEpO2lmKHZvaWQgMCE9PWIuY2hpbGRyZW4pZm9yKHZhciBoPWIuY2hpbGRyZW4saz0wO2s8aC5sZW5ndGg7aysrKWcuYWRkKHRoaXMucGFyc2VPYmplY3QoaFtrXSxjLGQpKTtpZihcIkxPRFwiPT09Yi50eXBlKWZvcihiPWIubGV2ZWxzLGg9MDtoPGIubGVuZ3RoO2grKyl7dmFyIGs9YltoXSxtPWcuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcInV1aWRcIixrLm9iamVjdCk7dm9pZCAwIT09bSYmZy5hZGRMZXZlbChtLGsuZGlzdGFuY2UpfXJldHVybiBnfX0oKX0pO3ZhciBPZz17VVZNYXBwaW5nOjMwMCxDdWJlUmVmbGVjdGlvbk1hcHBpbmc6MzAxLFxuICAgIEN1YmVSZWZyYWN0aW9uTWFwcGluZzozMDIsRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmc6MzAzLEVxdWlyZWN0YW5ndWxhclJlZnJhY3Rpb25NYXBwaW5nOjMwNCxTcGhlcmljYWxSZWZsZWN0aW9uTWFwcGluZzozMDUsQ3ViZVVWUmVmbGVjdGlvbk1hcHBpbmc6MzA2LEN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nOjMwN30seWY9e1JlcGVhdFdyYXBwaW5nOjFFMyxDbGFtcFRvRWRnZVdyYXBwaW5nOjEwMDEsTWlycm9yZWRSZXBlYXRXcmFwcGluZzoxMDAyfSx6Zj17TmVhcmVzdEZpbHRlcjoxMDAzLE5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyOjEwMDQsTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcjoxMDA1LExpbmVhckZpbHRlcjoxMDA2LExpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXI6MTAwNyxMaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI6MTAwOH07bmUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpuZSxzZXRPcHRpb25zOmZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz1hO3JldHVybiB0aGlzfSxcbiAgICBsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZvaWQgMD09PWEmJihhPVwiXCIpO3ZvaWQgMCE9PXRoaXMucGF0aCYmKGE9dGhpcy5wYXRoK2EpO3ZhciBlPXRoaXMsZj1JYi5nZXQoYSk7aWYodm9pZCAwIT09ZilyZXR1cm4gZS5tYW5hZ2VyLml0ZW1TdGFydChhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YiYmYihmKTtlLm1hbmFnZXIuaXRlbUVuZChhKX0sMCksZjtmZXRjaChhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLmJsb2IoKX0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKGEsZS5vcHRpb25zKX0pLnRoZW4oZnVuY3Rpb24oYyl7SWIuYWRkKGEsYyk7YiYmYihjKTtlLm1hbmFnZXIuaXRlbUVuZChhKX0pLmNhdGNoKGZ1bmN0aW9uKGIpe2QmJmQoYik7ZS5tYW5hZ2VyLml0ZW1FbmQoYSk7ZS5tYW5hZ2VyLml0ZW1FcnJvcihhKX0pfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1cbiAgICBhO3JldHVybiB0aGlzfX07T2JqZWN0LmFzc2lnbihvZS5wcm90b3R5cGUse21vdmVUbzpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBhdGg9bmV3IFNhO3RoaXMuc3ViUGF0aHMucHVzaCh0aGlzLmN1cnJlbnRQYXRoKTt0aGlzLmN1cnJlbnRQYXRoLm1vdmVUbyhhLGIpfSxsaW5lVG86ZnVuY3Rpb24oYSxiKXt0aGlzLmN1cnJlbnRQYXRoLmxpbmVUbyhhLGIpfSxxdWFkcmF0aWNDdXJ2ZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuY3VycmVudFBhdGgucXVhZHJhdGljQ3VydmVUbyhhLGIsYyxkKX0sYmV6aWVyQ3VydmVUbzpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5jdXJyZW50UGF0aC5iZXppZXJDdXJ2ZVRvKGEsYixjLGQsZSxmKX0sc3BsaW5lVGhydTpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnRQYXRoLnNwbGluZVRocnUoYSl9LHRvU2hhcGVzOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9XG4gICAgYVtjXSxmPW5ldyBqYjtmLmN1cnZlcz1lLmN1cnZlcztiLnB1c2goZil9cmV0dXJuIGJ9ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgYz1iLmxlbmd0aCxkPSExLGU9Yy0xLGY9MDtmPGM7ZT1mKyspe3ZhciBnPWJbZV0saD1iW2ZdLGs9aC54LWcueCxtPWgueS1nLnk7aWYoTWF0aC5hYnMobSk+TnVtYmVyLkVQU0lMT04pe2lmKDA+bSYmKGc9YltmXSxrPS1rLGg9YltlXSxtPS1tKSwhKGEueTxnLnl8fGEueT5oLnkpKWlmKGEueT09PWcueSl7aWYoYS54PT09Zy54KXJldHVybiEwfWVsc2V7ZT1tKihhLngtZy54KS1rKihhLnktZy55KTtpZigwPT09ZSlyZXR1cm4hMDswPmV8fChkPSFkKX19ZWxzZSBpZihhLnk9PT1nLnkmJihoLng8PWEueCYmYS54PD1nLnh8fGcueDw9YS54JiZhLng8PWgueCkpcmV0dXJuITB9cmV0dXJuIGR9dmFyIGU9JGEuaXNDbG9ja1dpc2UsZj10aGlzLnN1YlBhdGhzO2lmKDA9PT1mLmxlbmd0aClyZXR1cm5bXTtpZighMD09PWIpcmV0dXJuIGMoZik7Yj1bXTtpZigxPT09XG4gICAgZi5sZW5ndGgpe3ZhciBnPWZbMF07dmFyIGg9bmV3IGpiO2guY3VydmVzPWcuY3VydmVzO2IucHVzaChoKTtyZXR1cm4gYn12YXIgaz0hZShmWzBdLmdldFBvaW50cygpKSxrPWE/IWs6aztoPVtdO3ZhciBtPVtdLGw9W10sbj0wO21bbl09dm9pZCAwO2xbbl09W107Zm9yKHZhciBwPTAscj1mLmxlbmd0aDtwPHI7cCsrKXtnPWZbcF07dmFyIHQ9Zy5nZXRQb2ludHMoKTt2YXIgdj1lKHQpOyh2PWE/IXY6dik/KCFrJiZtW25dJiZuKyssbVtuXT17czpuZXcgamIscDp0fSxtW25dLnMuY3VydmVzPWcuY3VydmVzLGsmJm4rKyxsW25dPVtdKTpsW25dLnB1c2goe2g6ZyxwOnRbMF19KX1pZighbVswXSlyZXR1cm4gYyhmKTtpZigxPG0ubGVuZ3RoKXtwPSExO2E9W107ZT0wO2ZvcihmPW0ubGVuZ3RoO2U8ZjtlKyspaFtlXT1bXTtlPTA7Zm9yKGY9bS5sZW5ndGg7ZTxmO2UrKylmb3IoZz1sW2VdLHY9MDt2PGcubGVuZ3RoO3YrKyl7az1nW3ZdO249ITA7Zm9yKHQ9MDt0PG0ubGVuZ3RoO3QrKylkKGsucCxcbiAgICBtW3RdLnApJiYoZSE9PXQmJmEucHVzaCh7ZnJvbXM6ZSx0b3M6dCxob2xlOnZ9KSxuPyhuPSExLGhbdF0ucHVzaChrKSk6cD0hMCk7biYmaFtlXS5wdXNoKGspfTA8YS5sZW5ndGgmJihwfHwobD1oKSl9cD0wO2ZvcihlPW0ubGVuZ3RoO3A8ZTtwKyspZm9yKGg9bVtwXS5zLGIucHVzaChoKSxhPWxbcF0sZj0wLGc9YS5sZW5ndGg7ZjxnO2YrKyloLmhvbGVzLnB1c2goYVtmXS5oKTtyZXR1cm4gYn19KTtPYmplY3QuYXNzaWduKHBlLnByb3RvdHlwZSx7aXNGb250OiEwLGdlbmVyYXRlU2hhcGVzOmZ1bmN0aW9uKGEsYixjKXt2b2lkIDA9PT1iJiYoYj0xMDApO2M9dGhpcy5kYXRhO2E9U3RyaW5nKGEpLnNwbGl0KFwiXCIpO3ZhciBkPWIvYy5yZXNvbHV0aW9uLGU9KGMuYm91bmRpbmdCb3gueU1heC1jLmJvdW5kaW5nQm94LnlNaW4rYy51bmRlcmxpbmVUaGlja25lc3MpKmQsZj0wLGc9MDtiPVtdO2Zvcih2YXIgaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaz1hW2hdO2lmKFwiXFxuXCI9PT1rKWY9XG4gICAgMCxnLT1lO2Vsc2V7dmFyIG09ZDt2YXIgbD1mLG49ZztpZihrPWMuZ2x5cGhzW2tdfHxjLmdseXBoc1tcIj9cIl0pe3ZhciBwPW5ldyBvZTtpZihrLm8pZm9yKHZhciByPWsuX2NhY2hlZE91dGxpbmV8fChrLl9jYWNoZWRPdXRsaW5lPWsuby5zcGxpdChcIiBcIikpLHQ9MCx2PXIubGVuZ3RoO3Q8djspc3dpdGNoKHJbdCsrXSl7Y2FzZSBcIm1cIjp2YXIgdz1yW3QrK10qbStsO3ZhciB4PXJbdCsrXSptK247cC5tb3ZlVG8odyx4KTticmVhaztjYXNlIFwibFwiOnc9clt0KytdKm0rbDt4PXJbdCsrXSptK247cC5saW5lVG8odyx4KTticmVhaztjYXNlIFwicVwiOnZhciB5PXJbdCsrXSptK2w7dmFyIEI9clt0KytdKm0rbjt2YXIgQT1yW3QrK10qbStsO3ZhciBDPXJbdCsrXSptK247cC5xdWFkcmF0aWNDdXJ2ZVRvKEEsQyx5LEIpO2JyZWFrO2Nhc2UgXCJiXCI6eT1yW3QrK10qbStsLEI9clt0KytdKm0rbixBPXJbdCsrXSptK2wsQz1yW3QrK10qbStuLHc9clt0KytdKm0rbCx4PXJbdCsrXSptK24scC5iZXppZXJDdXJ2ZVRvKEEsXG4gICAgQyx3LHgseSxCKX1tPXtvZmZzZXRYOmsuaGEqbSxwYXRoOnB9fWVsc2UgbT12b2lkIDA7Zis9bS5vZmZzZXRYO2IucHVzaChtLnBhdGgpfX1jPVtdO2E9MDtmb3IoZD1iLmxlbmd0aDthPGQ7YSsrKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsYlthXS50b1NoYXBlcygpKTtyZXR1cm4gY319KTtPYmplY3QuYXNzaWduKGtmLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9bmV3IE5hKHRoaXMubWFuYWdlcik7Zi5zZXRQYXRoKHRoaXMucGF0aCk7Zi5sb2FkKGEsZnVuY3Rpb24oYSl7dHJ5e3ZhciBjPUpTT04ucGFyc2UoYSl9Y2F0Y2goayl7Y29uc29sZS53YXJuKFwiVEhSRUUuRm9udExvYWRlcjogdHlwZWZhY2UuanMgc3VwcG9ydCBpcyBiZWluZyBkZXByZWNhdGVkLiBVc2UgdHlwZWZhY2UuanNvbiBpbnN0ZWFkLlwiKSxjPUpTT04ucGFyc2UoYS5zdWJzdHJpbmcoNjUsYS5sZW5ndGgtMikpfWE9ZS5wYXJzZShjKTtiJiZiKGEpfSxjLGQpfSxcbiAgICBwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IHBlKGEpfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1hO3JldHVybiB0aGlzfX0pO3ZhciBVZCxzZT17Z2V0Q29udGV4dDpmdW5jdGlvbigpe3ZvaWQgMD09PVVkJiYoVWQ9bmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0fHx3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSk7cmV0dXJuIFVkfSxzZXRDb250ZXh0OmZ1bmN0aW9uKGEpe1VkPWF9fTtPYmplY3QuYXNzaWduKHFlLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgTmEodGhpcy5tYW5hZ2VyKTtlLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpO2UubG9hZChhLGZ1bmN0aW9uKGEpe3NlLmdldENvbnRleHQoKS5kZWNvZGVBdWRpb0RhdGEoYSxmdW5jdGlvbihhKXtiKGEpfSl9LGMsZCl9fSk7T2JqZWN0LmFzc2lnbihsZi5wcm90b3R5cGUse3VwZGF0ZTpmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnLGgsaz1uZXcgTyxtPW5ldyBPO1xuICAgIHJldHVybiBmdW5jdGlvbihsKXtpZihhIT09dGhpc3x8YiE9PWwuZm9jdXN8fGMhPT1sLmZvdnx8ZCE9PWwuYXNwZWN0KnRoaXMuYXNwZWN0fHxlIT09bC5uZWFyfHxmIT09bC5mYXJ8fGchPT1sLnpvb218fGghPT10aGlzLmV5ZVNlcCl7YT10aGlzO2I9bC5mb2N1cztjPWwuZm92O2Q9bC5hc3BlY3QqdGhpcy5hc3BlY3Q7ZT1sLm5lYXI7Zj1sLmZhcjtnPWwuem9vbTt2YXIgbj1sLnByb2plY3Rpb25NYXRyaXguY2xvbmUoKTtoPXRoaXMuZXllU2VwLzI7dmFyIHA9aCplL2IscT1lKk1hdGgudGFuKFEuREVHMlJBRCpjKi41KS9nO20uZWxlbWVudHNbMTJdPS1oO2suZWxlbWVudHNbMTJdPWg7dmFyIHQ9LXEqZCtwO3ZhciB2PXEqZCtwO24uZWxlbWVudHNbMF09MiplLyh2LXQpO24uZWxlbWVudHNbOF09KHYrdCkvKHYtdCk7dGhpcy5jYW1lcmFMLnByb2plY3Rpb25NYXRyaXguY29weShuKTt0PS1xKmQtcDt2PXEqZC1wO24uZWxlbWVudHNbMF09MiplLyh2LXQpO24uZWxlbWVudHNbOF09XG4gICAgKHYrdCkvKHYtdCk7dGhpcy5jYW1lcmFSLnByb2plY3Rpb25NYXRyaXguY29weShuKX10aGlzLmNhbWVyYUwubWF0cml4V29ybGQuY29weShsLm1hdHJpeFdvcmxkKS5tdWx0aXBseShtKTt0aGlzLmNhbWVyYVIubWF0cml4V29ybGQuY29weShsLm1hdHJpeFdvcmxkKS5tdWx0aXBseShrKX19KCl9KTtmZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7ZmQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWZkO3JlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpyZSxnZXRJbnB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW59LHJlbW92ZUZpbHRlcjpmdW5jdGlvbigpe251bGwhPT10aGlzLmZpbHRlciYmKHRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuZmlsdGVyKSx0aGlzLmZpbHRlci5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbiksdGhpcy5nYWluLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSxcbiAgICB0aGlzLmZpbHRlcj1udWxsKX0sZ2V0RmlsdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyfSxzZXRGaWx0ZXI6ZnVuY3Rpb24oYSl7bnVsbCE9PXRoaXMuZmlsdGVyPyh0aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmZpbHRlciksdGhpcy5maWx0ZXIuZGlzY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pKTp0aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO3RoaXMuZmlsdGVyPWE7dGhpcy5nYWluLmNvbm5lY3QodGhpcy5maWx0ZXIpO3RoaXMuZmlsdGVyLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKX0sZ2V0TWFzdGVyVm9sdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnZhbHVlfSxzZXRNYXN0ZXJWb2x1bWU6ZnVuY3Rpb24oYSl7dGhpcy5nYWluLmdhaW4udmFsdWU9YX0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBoYSxjPW5ldyBwLGQ9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGUpe3gucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxcbiAgICBlKTtlPXRoaXMuY29udGV4dC5saXN0ZW5lcjt2YXIgZj10aGlzLnVwO3RoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKGEsYixjKTtkLnNldCgwLDAsLTEpLmFwcGx5UXVhdGVybmlvbihiKTtlLnBvc2l0aW9uWD8oZS5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUoYS54LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSksZS5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoYS55LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSksZS5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoYS56LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSksZS5mb3J3YXJkWC5zZXRWYWx1ZUF0VGltZShkLngsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSxlLmZvcndhcmRZLnNldFZhbHVlQXRUaW1lKGQueSx0aGlzLmNvbnRleHQuY3VycmVudFRpbWUpLGUuZm9yd2FyZFouc2V0VmFsdWVBdFRpbWUoZC56LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSksZS51cFguc2V0VmFsdWVBdFRpbWUoZi54LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSksXG4gICAgZS51cFkuc2V0VmFsdWVBdFRpbWUoZi55LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSksZS51cFouc2V0VmFsdWVBdFRpbWUoZi56LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSkpOihlLnNldFBvc2l0aW9uKGEueCxhLnksYS56KSxlLnNldE9yaWVudGF0aW9uKGQueCxkLnksZC56LGYueCxmLnksZi56KSl9fSgpfSk7bGMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmxjLGdldE91dHB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW59LHNldE5vZGVTb3VyY2U6ZnVuY3Rpb24oYSl7dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ITE7dGhpcy5zb3VyY2VUeXBlPVwiYXVkaW9Ob2RlXCI7dGhpcy5zb3VyY2U9YTt0aGlzLmNvbm5lY3QoKTtyZXR1cm4gdGhpc30sc2V0QnVmZmVyOmZ1bmN0aW9uKGEpe3RoaXMuYnVmZmVyPWE7dGhpcy5zb3VyY2VUeXBlPVwiYnVmZmVyXCI7dGhpcy5hdXRvcGxheSYmdGhpcy5wbGF5KCk7cmV0dXJuIHRoaXN9LFxuICAgIHBsYXk6ZnVuY3Rpb24oKXtpZighMD09PXRoaXMuaXNQbGF5aW5nKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiBBdWRpbyBpcyBhbHJlYWR5IHBsYXlpbmcuXCIpO2Vsc2UgaWYoITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbCljb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIik7ZWxzZXt2YXIgYT10aGlzLmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7YS5idWZmZXI9dGhpcy5idWZmZXI7YS5sb29wPXRoaXMubG9vcDthLm9uZW5kZWQ9dGhpcy5vbkVuZGVkLmJpbmQodGhpcyk7YS5wbGF5YmFja1JhdGUuc2V0VmFsdWVBdFRpbWUodGhpcy5wbGF5YmFja1JhdGUsdGhpcy5zdGFydFRpbWUpO3RoaXMuc3RhcnRUaW1lPXRoaXMuY29udGV4dC5jdXJyZW50VGltZTthLnN0YXJ0KHRoaXMuc3RhcnRUaW1lLHRoaXMub2Zmc2V0KTt0aGlzLmlzUGxheWluZz0hMDt0aGlzLnNvdXJjZT1hO3JldHVybiB0aGlzLmNvbm5lY3QoKX19LFxuICAgIHBhdXNlOmZ1bmN0aW9uKCl7aWYoITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbCljb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIik7ZWxzZSByZXR1cm4hMD09PXRoaXMuaXNQbGF5aW5nJiYodGhpcy5zb3VyY2Uuc3RvcCgpLHRoaXMub2Zmc2V0Kz0odGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLXRoaXMuc3RhcnRUaW1lKSp0aGlzLnBsYXliYWNrUmF0ZSx0aGlzLmlzUGxheWluZz0hMSksdGhpc30sc3RvcDpmdW5jdGlvbigpe2lmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO2Vsc2UgcmV0dXJuIHRoaXMuc291cmNlLnN0b3AoKSx0aGlzLm9mZnNldD0wLHRoaXMuaXNQbGF5aW5nPSExLHRoaXN9LGNvbm5lY3Q6ZnVuY3Rpb24oKXtpZigwPHRoaXMuZmlsdGVycy5sZW5ndGgpe3RoaXMuc291cmNlLmNvbm5lY3QodGhpcy5maWx0ZXJzWzBdKTtcbiAgICBmb3IodmFyIGE9MSxiPXRoaXMuZmlsdGVycy5sZW5ndGg7YTxiO2ErKyl0aGlzLmZpbHRlcnNbYS0xXS5jb25uZWN0KHRoaXMuZmlsdGVyc1thXSk7dGhpcy5maWx0ZXJzW3RoaXMuZmlsdGVycy5sZW5ndGgtMV0uY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKX1lbHNlIHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSk7cmV0dXJuIHRoaXN9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtpZigwPHRoaXMuZmlsdGVycy5sZW5ndGgpe3RoaXMuc291cmNlLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXJzWzBdKTtmb3IodmFyIGE9MSxiPXRoaXMuZmlsdGVycy5sZW5ndGg7YTxiO2ErKyl0aGlzLmZpbHRlcnNbYS0xXS5kaXNjb25uZWN0KHRoaXMuZmlsdGVyc1thXSk7dGhpcy5maWx0ZXJzW3RoaXMuZmlsdGVycy5sZW5ndGgtMV0uZGlzY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKX1lbHNlIHRoaXMuc291cmNlLmRpc2Nvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSk7cmV0dXJuIHRoaXN9LFxuICAgIGdldEZpbHRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXJzfSxzZXRGaWx0ZXJzOmZ1bmN0aW9uKGEpe2F8fChhPVtdKTshMD09PXRoaXMuaXNQbGF5aW5nPyh0aGlzLmRpc2Nvbm5lY3QoKSx0aGlzLmZpbHRlcnM9YSx0aGlzLmNvbm5lY3QoKSk6dGhpcy5maWx0ZXJzPWE7cmV0dXJuIHRoaXN9LGdldEZpbHRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEZpbHRlcnMoKVswXX0sc2V0RmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldEZpbHRlcnMoYT9bYV06W10pfSxzZXRQbGF5YmFja1JhdGU6ZnVuY3Rpb24oYSl7aWYoITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbCljb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIik7ZWxzZSByZXR1cm4gdGhpcy5wbGF5YmFja1JhdGU9YSwhMD09PXRoaXMuaXNQbGF5aW5nJiZ0aGlzLnNvdXJjZS5wbGF5YmFja1JhdGUuc2V0VmFsdWVBdFRpbWUodGhpcy5wbGF5YmFja1JhdGUsXG4gICAgdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSx0aGlzfSxnZXRQbGF5YmFja1JhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wbGF5YmFja1JhdGV9LG9uRW5kZWQ6ZnVuY3Rpb24oKXt0aGlzLmlzUGxheWluZz0hMX0sZ2V0TG9vcDpmdW5jdGlvbigpe3JldHVybiExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w/KGNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKSwhMSk6dGhpcy5sb29wfSxzZXRMb29wOmZ1bmN0aW9uKGEpe2lmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO2Vsc2UgcmV0dXJuIHRoaXMubG9vcD1hLCEwPT09dGhpcy5pc1BsYXlpbmcmJih0aGlzLnNvdXJjZS5sb29wPXRoaXMubG9vcCksdGhpc30sZ2V0Vm9sdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnZhbHVlfSxcbiAgICBzZXRWb2x1bWU6ZnVuY3Rpb24oYSl7dGhpcy5nYWluLmdhaW4udmFsdWU9YTtyZXR1cm4gdGhpc319KTt0ZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxjLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnRlLGdldE91dHB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lcn0sZ2V0UmVmRGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIucmVmRGlzdGFuY2V9LHNldFJlZkRpc3RhbmNlOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLnJlZkRpc3RhbmNlPWF9LGdldFJvbGxvZmZGYWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIucm9sbG9mZkZhY3Rvcn0sc2V0Um9sbG9mZkZhY3RvcjpmdW5jdGlvbihhKXt0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yPWF9LGdldERpc3RhbmNlTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIuZGlzdGFuY2VNb2RlbH0sc2V0RGlzdGFuY2VNb2RlbDpmdW5jdGlvbihhKXt0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsPVxuICAgIGF9LGdldE1heERpc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFubmVyLm1heERpc3RhbmNlfSxzZXRNYXhEaXN0YW5jZTpmdW5jdGlvbihhKXt0aGlzLnBhbm5lci5tYXhEaXN0YW5jZT1hfSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXt4LnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsYik7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7dGhpcy5wYW5uZXIuc2V0UG9zaXRpb24oYS54LGEueSxhLnopfX0oKX0pO09iamVjdC5hc3NpZ24odWUucHJvdG90eXBlLHtnZXRGcmVxdWVuY3lEYXRhOmZ1bmN0aW9uKCl7dGhpcy5hbmFseXNlci5nZXRCeXRlRnJlcXVlbmN5RGF0YSh0aGlzLmRhdGEpO3JldHVybiB0aGlzLmRhdGF9LGdldEF2ZXJhZ2VGcmVxdWVuY3k6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMuZ2V0RnJlcXVlbmN5RGF0YSgpLGM9MDtjPGIubGVuZ3RoO2MrKylhKz1cbiAgICBiW2NdO3JldHVybiBhL2IubGVuZ3RofX0pO09iamVjdC5hc3NpZ24odmUucHJvdG90eXBlLHthY2N1bXVsYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5idWZmZXIsZD10aGlzLnZhbHVlU2l6ZTthPWEqZCtkO3ZhciBlPXRoaXMuY3VtdWxhdGl2ZVdlaWdodDtpZigwPT09ZSl7Zm9yKGU9MDtlIT09ZDsrK2UpY1thK2VdPWNbZV07ZT1ifWVsc2UgZSs9Yix0aGlzLl9taXhCdWZmZXJSZWdpb24oYyxhLDAsYi9lLGQpO3RoaXMuY3VtdWxhdGl2ZVdlaWdodD1lfSxhcHBseTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnZhbHVlU2l6ZSxjPXRoaXMuYnVmZmVyO2E9YSpiK2I7dmFyIGQ9dGhpcy5jdW11bGF0aXZlV2VpZ2h0LGU9dGhpcy5iaW5kaW5nO3RoaXMuY3VtdWxhdGl2ZVdlaWdodD0wOzE+ZCYmdGhpcy5fbWl4QnVmZmVyUmVnaW9uKGMsYSwzKmIsMS1kLGIpO2Zvcih2YXIgZD1iLGY9YitiO2QhPT1mOysrZClpZihjW2RdIT09Y1tkK2JdKXtlLnNldFZhbHVlKGMsYSk7YnJlYWt9fSxcbiAgICBzYXZlT3JpZ2luYWxTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYnVmZmVyLGI9dGhpcy52YWx1ZVNpemUsYz0zKmI7dGhpcy5iaW5kaW5nLmdldFZhbHVlKGEsYyk7Zm9yKHZhciBkPWI7ZCE9PWM7KytkKWFbZF09YVtjK2QlYl07dGhpcy5jdW11bGF0aXZlV2VpZ2h0PTB9LHJlc3RvcmVPcmlnaW5hbFN0YXRlOmZ1bmN0aW9uKCl7dGhpcy5iaW5kaW5nLnNldFZhbHVlKHRoaXMuYnVmZmVyLDMqdGhpcy52YWx1ZVNpemUpfSxfc2VsZWN0OmZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoLjU8PWQpZm9yKGQ9MDtkIT09ZTsrK2QpYVtiK2RdPWFbYytkXX0sX3NsZXJwOmZ1bmN0aW9uKGEsYixjLGQpe2hhLnNsZXJwRmxhdChhLGIsYSxiLGEsYyxkKX0sX2xlcnA6ZnVuY3Rpb24oYSxiLGMsZCxlKXtmb3IodmFyIGY9MS1kLGc9MDtnIT09ZTsrK2cpe3ZhciBoPWIrZzthW2hdPWFbaF0qZithW2MrZ10qZH19fSk7T2JqZWN0LmFzc2lnbihtZi5wcm90b3R5cGUse2dldFZhbHVlOmZ1bmN0aW9uKGEsXG4gICAgYil7dGhpcy5iaW5kKCk7dmFyIGM9dGhpcy5fYmluZGluZ3NbdGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfXTt2b2lkIDAhPT1jJiZjLmdldFZhbHVlKGEsYil9LHNldFZhbHVlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuX2JpbmRpbmdzLGQ9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWNbZF0uc2V0VmFsdWUoYSxiKX0sYmluZDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLl9iaW5kaW5ncyxiPXRoaXMuX3RhcmdldEdyb3VwLm5DYWNoZWRPYmplY3RzXyxjPWEubGVuZ3RoO2IhPT1jOysrYilhW2JdLmJpbmQoKX0sdW5iaW5kOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuX2JpbmRpbmdzLGI9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLGM9YS5sZW5ndGg7YiE9PWM7KytiKWFbYl0udW5iaW5kKCl9fSk7T2JqZWN0LmFzc2lnbihxYSx7Q29tcG9zaXRlOm1mLGNyZWF0ZTpmdW5jdGlvbihhLFxuICAgIGIsYyl7cmV0dXJuIGEmJmEuaXNBbmltYXRpb25PYmplY3RHcm91cD9uZXcgcWEuQ29tcG9zaXRlKGEsYixjKTpuZXcgcWEoYSxiLGMpfSxzYW5pdGl6ZU5vZGVOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1xccy9nLFwiX1wiKS5yZXBsYWNlKC9bXlxcdy1dL2csXCJcIil9LHBhcnNlVHJhY2tOYW1lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFJlZ0V4cChcIl5cIisvKCg/OltcXHctXStbXFwvOl0pKikvLnNvdXJjZSsvKFtcXHctXFwuXSspPy8uc291cmNlKy8oPzpcXC4oW1xcdy1dKykoPzpcXFsoLispXFxdKT8pPy8uc291cmNlKy9cXC4oW1xcdy1dKykoPzpcXFsoLispXFxdKT8vLnNvdXJjZStcIiRcIiksYj1bXCJtYXRlcmlhbFwiLFwibWF0ZXJpYWxzXCIsXCJib25lc1wiXTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9YS5leGVjKGMpO2lmKCFkKXRocm93IEVycm9yKFwiUHJvcGVydHlCaW5kaW5nOiBDYW5ub3QgcGFyc2UgdHJhY2tOYW1lOiBcIitjKTt2YXIgZD17bm9kZU5hbWU6ZFsyXSxvYmplY3ROYW1lOmRbM10sXG4gICAgb2JqZWN0SW5kZXg6ZFs0XSxwcm9wZXJ0eU5hbWU6ZFs1XSxwcm9wZXJ0eUluZGV4OmRbNl19LGU9ZC5ub2RlTmFtZSYmZC5ub2RlTmFtZS5sYXN0SW5kZXhPZihcIi5cIik7aWYodm9pZCAwIT09ZSYmLTEhPT1lKXt2YXIgZj1kLm5vZGVOYW1lLnN1YnN0cmluZyhlKzEpOy0xIT09Yi5pbmRleE9mKGYpJiYoZC5ub2RlTmFtZT1kLm5vZGVOYW1lLnN1YnN0cmluZygwLGUpLGQub2JqZWN0TmFtZT1mKX1pZihudWxsPT09ZC5wcm9wZXJ0eU5hbWV8fDA9PT1kLnByb3BlcnR5TmFtZS5sZW5ndGgpdGhyb3cgRXJyb3IoXCJQcm9wZXJ0eUJpbmRpbmc6IGNhbiBub3QgcGFyc2UgcHJvcGVydHlOYW1lIGZyb20gdHJhY2tOYW1lOiBcIitjKTtyZXR1cm4gZH19KCksZmluZE5vZGU6ZnVuY3Rpb24oYSxiKXtpZighYnx8XCJcIj09PWJ8fFwicm9vdFwiPT09Ynx8XCIuXCI9PT1ifHwtMT09PWJ8fGI9PT1hLm5hbWV8fGI9PT1hLnV1aWQpcmV0dXJuIGE7aWYoYS5za2VsZXRvbil7dmFyIGM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVxuICAgIDA7YzxhLmJvbmVzLmxlbmd0aDtjKyspe3ZhciBkPWEuYm9uZXNbY107aWYoZC5uYW1lPT09YilyZXR1cm4gZH1yZXR1cm4gbnVsbH0oYS5za2VsZXRvbik7aWYoYylyZXR1cm4gY31pZihhLmNoaWxkcmVuKXt2YXIgZD1mdW5jdGlvbihhKXtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGU9YVtjXTtpZihlLm5hbWU9PT1ifHxlLnV1aWQ9PT1ifHwoZT1kKGUuY2hpbGRyZW4pKSlyZXR1cm4gZX1yZXR1cm4gbnVsbH07aWYoYT1kKGEuY2hpbGRyZW4pKXJldHVybiBhfXJldHVybiBudWxsfX0pO09iamVjdC5hc3NpZ24ocWEucHJvdG90eXBlLHtfZ2V0VmFsdWVfdW5hdmFpbGFibGU6ZnVuY3Rpb24oKXt9LF9zZXRWYWx1ZV91bmF2YWlsYWJsZTpmdW5jdGlvbigpe30sQmluZGluZ1R5cGU6e0RpcmVjdDowLEVudGlyZUFycmF5OjEsQXJyYXlFbGVtZW50OjIsSGFzRnJvbVRvQXJyYXk6M30sVmVyc2lvbmluZzp7Tm9uZTowLE5lZWRzVXBkYXRlOjEsTWF0cml4V29ybGROZWVkc1VwZGF0ZToyfSxcbiAgICBHZXR0ZXJCeUJpbmRpbmdUeXBlOltmdW5jdGlvbihhLGIpe2FbYl09dGhpcy5ub2RlW3RoaXMucHJvcGVydHlOYW1lXX0sZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5yZXNvbHZlZFByb3BlcnR5LGQ9MCxlPWMubGVuZ3RoO2QhPT1lOysrZClhW2IrK109Y1tkXX0sZnVuY3Rpb24oYSxiKXthW2JdPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS50b0FycmF5KGEsYil9XSxTZXR0ZXJCeUJpbmRpbmdUeXBlQW5kVmVyc2lvbmluZzpbW2Z1bmN0aW9uKGEsYil7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPWFbYl19LGZ1bmN0aW9uKGEsYil7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPWFbYl07dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKGEsYil7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPWFbYl07XG4gICAgdGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dLFtmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnJlc29sdmVkUHJvcGVydHksZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWNbZF09YVtiKytdfSxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnJlc29sdmVkUHJvcGVydHksZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWNbZF09YVtiKytdO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnJlc29sdmVkUHJvcGVydHksZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWNbZF09YVtiKytdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9XSxbZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT1hW2JdfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPWFbYl07XG4gICAgdGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF09YVtiXTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV0sW2Z1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheShhLGIpfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoYSxiKTt0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHkuZnJvbUFycmF5KGEsYik7dGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dXSxnZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3RoaXMuYmluZCgpO3RoaXMuZ2V0VmFsdWUoYSxiKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXt0aGlzLmJpbmQoKTt0aGlzLnNldFZhbHVlKGEsYil9LGJpbmQ6ZnVuY3Rpb24oKXt2YXIgYT1cbiAgICB0aGlzLm5vZGUsYj10aGlzLnBhcnNlZFBhdGgsYz1iLm9iamVjdE5hbWUsZD1iLnByb3BlcnR5TmFtZSxlPWIucHJvcGVydHlJbmRleDthfHwodGhpcy5ub2RlPWE9cWEuZmluZE5vZGUodGhpcy5yb290Tm9kZSxiLm5vZGVOYW1lKXx8dGhpcy5yb290Tm9kZSk7dGhpcy5nZXRWYWx1ZT10aGlzLl9nZXRWYWx1ZV91bmF2YWlsYWJsZTt0aGlzLnNldFZhbHVlPXRoaXMuX3NldFZhbHVlX3VuYXZhaWxhYmxlO2lmKGEpe2lmKGMpe3ZhciBmPWIub2JqZWN0SW5kZXg7c3dpdGNoKGMpe2Nhc2UgXCJtYXRlcmlhbHNcIjppZighYS5tYXRlcmlhbCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1hdGVyaWFsIGFzIG5vZGUgZG9lcyBub3QgaGF2ZSBhIG1hdGVyaWFsLlwiLHRoaXMpO3JldHVybn1pZighYS5tYXRlcmlhbC5tYXRlcmlhbHMpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtYXRlcmlhbC5tYXRlcmlhbHMgYXMgbm9kZS5tYXRlcmlhbCBkb2VzIG5vdCBoYXZlIGEgbWF0ZXJpYWxzIGFycmF5LlwiLFxuICAgIHRoaXMpO3JldHVybn1hPWEubWF0ZXJpYWwubWF0ZXJpYWxzO2JyZWFrO2Nhc2UgXCJib25lc1wiOmlmKCFhLnNrZWxldG9uKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gYm9uZXMgYXMgbm9kZSBkb2VzIG5vdCBoYXZlIGEgc2tlbGV0b24uXCIsdGhpcyk7cmV0dXJufWE9YS5za2VsZXRvbi5ib25lcztmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWlmKGFbY10ubmFtZT09PWYpe2Y9YzticmVha31icmVhaztkZWZhdWx0OmlmKHZvaWQgMD09PWFbY10pe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBvYmplY3ROYW1lIG9mIG5vZGUgdW5kZWZpbmVkLlwiLHRoaXMpO3JldHVybn1hPWFbY119aWYodm9pZCAwIT09Zil7aWYodm9pZCAwPT09YVtmXSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogVHJ5aW5nIHRvIGJpbmQgdG8gb2JqZWN0SW5kZXggb2Ygb2JqZWN0TmFtZSwgYnV0IGlzIHVuZGVmaW5lZC5cIixcbiAgICB0aGlzLGEpO3JldHVybn1hPWFbZl19fWY9YVtkXTtpZih2b2lkIDA9PT1mKWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IFRyeWluZyB0byB1cGRhdGUgcHJvcGVydHkgZm9yIHRyYWNrOiBcIitiLm5vZGVOYW1lK1wiLlwiK2QrXCIgYnV0IGl0IHdhc24ndCBmb3VuZC5cIixhKTtlbHNle2I9dGhpcy5WZXJzaW9uaW5nLk5vbmU7dm9pZCAwIT09YS5uZWVkc1VwZGF0ZT8oYj10aGlzLlZlcnNpb25pbmcuTmVlZHNVcGRhdGUsdGhpcy50YXJnZXRPYmplY3Q9YSk6dm9pZCAwIT09YS5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlJiYoYj10aGlzLlZlcnNpb25pbmcuTWF0cml4V29ybGROZWVkc1VwZGF0ZSx0aGlzLnRhcmdldE9iamVjdD1hKTtjPXRoaXMuQmluZGluZ1R5cGUuRGlyZWN0O2lmKHZvaWQgMCE9PWUpe2lmKFwibW9ycGhUYXJnZXRJbmZsdWVuY2VzXCI9PT1kKXtpZighYS5nZW9tZXRyeSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBiZWNhdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5LlwiLFxuICAgIHRoaXMpO3JldHVybn1pZihhLmdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpe2lmKCFhLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcyl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBiZWNhdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5cIix0aGlzKTtyZXR1cm59Zm9yKGM9MDtjPHRoaXMubm9kZS5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoO2MrKylpZihhLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbltjXS5uYW1lPT09ZSl7ZT1jO2JyZWFrfX1lbHNle2lmKCFhLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cyl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBiZWNhdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5cIixcbiAgICB0aGlzKTtyZXR1cm59Zm9yKGM9MDtjPHRoaXMubm9kZS5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoO2MrKylpZihhLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0c1tjXS5uYW1lPT09ZSl7ZT1jO2JyZWFrfX19Yz10aGlzLkJpbmRpbmdUeXBlLkFycmF5RWxlbWVudDt0aGlzLnJlc29sdmVkUHJvcGVydHk9Zjt0aGlzLnByb3BlcnR5SW5kZXg9ZX1lbHNlIHZvaWQgMCE9PWYuZnJvbUFycmF5JiZ2b2lkIDAhPT1mLnRvQXJyYXk/KGM9dGhpcy5CaW5kaW5nVHlwZS5IYXNGcm9tVG9BcnJheSx0aGlzLnJlc29sdmVkUHJvcGVydHk9Zik6QXJyYXkuaXNBcnJheShmKT8oYz10aGlzLkJpbmRpbmdUeXBlLkVudGlyZUFycmF5LHRoaXMucmVzb2x2ZWRQcm9wZXJ0eT1mKTp0aGlzLnByb3BlcnR5TmFtZT1kO3RoaXMuZ2V0VmFsdWU9dGhpcy5HZXR0ZXJCeUJpbmRpbmdUeXBlW2NdO3RoaXMuc2V0VmFsdWU9dGhpcy5TZXR0ZXJCeUJpbmRpbmdUeXBlQW5kVmVyc2lvbmluZ1tjXVtiXX19ZWxzZSBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBUcnlpbmcgdG8gdXBkYXRlIG5vZGUgZm9yIHRyYWNrOiBcIitcbiAgICB0aGlzLnBhdGgrXCIgYnV0IGl0IHdhc24ndCBmb3VuZC5cIil9LHVuYmluZDpmdW5jdGlvbigpe3RoaXMubm9kZT1udWxsO3RoaXMuZ2V0VmFsdWU9dGhpcy5fZ2V0VmFsdWVfdW5ib3VuZDt0aGlzLnNldFZhbHVlPXRoaXMuX3NldFZhbHVlX3VuYm91bmR9fSk7T2JqZWN0LmFzc2lnbihxYS5wcm90b3R5cGUse19nZXRWYWx1ZV91bmJvdW5kOnFhLnByb3RvdHlwZS5nZXRWYWx1ZSxfc2V0VmFsdWVfdW5ib3VuZDpxYS5wcm90b3R5cGUuc2V0VmFsdWV9KTtPYmplY3QuYXNzaWduKG5mLnByb3RvdHlwZSx7aXNBbmltYXRpb25PYmplY3RHcm91cDohMCxhZGQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fb2JqZWN0cyxiPWEubGVuZ3RoLGM9dGhpcy5uQ2FjaGVkT2JqZWN0c18sZD10aGlzLl9pbmRpY2VzQnlVVUlELGU9dGhpcy5fcGF0aHMsZj10aGlzLl9wYXJzZWRQYXRocyxnPXRoaXMuX2JpbmRpbmdzLGg9Zy5sZW5ndGgsaz0wLG09YXJndW1lbnRzLmxlbmd0aDtrIT09bTsrK2spe3ZhciBsPVxuICAgIGFyZ3VtZW50c1trXSxuPWwudXVpZCxwPWRbbl07aWYodm9pZCAwPT09cCl7cD1iKys7ZFtuXT1wO2EucHVzaChsKTtmb3IodmFyIG49MCxyPWg7biE9PXI7KytuKWdbbl0ucHVzaChuZXcgcWEobCxlW25dLGZbbl0pKX1lbHNlIGlmKHA8Yyl7dmFyIHQ9LS1jLHI9YVt0XTtkW3IudXVpZF09cDthW3BdPXI7ZFtuXT10O2FbdF09bDtuPTA7Zm9yKHI9aDtuIT09cjsrK24pe3ZhciB2PWdbbl0sdz12W3BdO3ZbcF09dlt0XTt2b2lkIDA9PT13JiYodz1uZXcgcWEobCxlW25dLGZbbl0pKTt2W3RdPXd9fWVsc2Ugdm9pZCAwIT09YVtwXSYmY29uc29sZS5lcnJvcihcIlRIUkVFLkFuaW1hdGlvbk9iamVjdEdyb3VwOiBEaWZmZXJlbnQgb2JqZWN0cyB3aXRoIHRoZSBzYW1lIFVVSUQgZGV0ZWN0ZWQuIENsZWFuIHRoZSBjYWNoZXMgb3IgcmVjcmVhdGUgeW91ciBpbmZyYXN0cnVjdHVyZSB3aGVuIHJlbG9hZGluZyBzY2VuZXMuXCIpfXRoaXMubkNhY2hlZE9iamVjdHNfPWN9LHJlbW92ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1cbiAgICB0aGlzLl9vYmplY3RzLGI9dGhpcy5uQ2FjaGVkT2JqZWN0c18sYz10aGlzLl9pbmRpY2VzQnlVVUlELGQ9dGhpcy5fYmluZGluZ3MsZT1kLmxlbmd0aCxmPTAsZz1hcmd1bWVudHMubGVuZ3RoO2YhPT1nOysrZil7dmFyIGg9YXJndW1lbnRzW2ZdLGs9aC51dWlkLG09Y1trXTtpZih2b2lkIDAhPT1tJiZtPj1iKXt2YXIgbD1iKyssbj1hW2xdO2Nbbi51dWlkXT1tO2FbbV09bjtjW2tdPWw7YVtsXT1oO2g9MDtmb3Ioaz1lO2ghPT1rOysraCl7dmFyIG49ZFtoXSxwPW5bbV07blttXT1uW2xdO25bbF09cH19fXRoaXMubkNhY2hlZE9iamVjdHNfPWJ9LHVuY2FjaGU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPXRoaXMuX29iamVjdHMsZD1jLmxlbmd0aCxlPXRoaXMubkNhY2hlZE9iamVjdHNfLGY9dGhpcy5faW5kaWNlc0J5VVVJRCxnPXRoaXMuX2JpbmRpbmdzLGg9Zy5sZW5ndGgsaz0wLG09YXJndW1lbnRzLmxlbmd0aDtrIT09bTsrK2spe2I9YXJndW1lbnRzW2tdLnV1aWQ7dmFyIGw9XG4gICAgZltiXTtpZih2b2lkIDAhPT1sKWlmKGRlbGV0ZSBmW2JdLGw8ZSl7dmFyIG49LS1lLHA9Y1tuXTtiPS0tZDthPWNbYl07ZltwLnV1aWRdPWw7Y1tsXT1wO2ZbYS51dWlkXT1uO2Nbbl09YTtjLnBvcCgpO2Zvcih2YXIgcD0wLHI9aDtwIT09cjsrK3Ape2E9Z1twXTt2YXIgdD1hW2JdO2FbbF09YVtuXTthW25dPXQ7YS5wb3AoKX19ZWxzZSBmb3IoYj0tLWQsYT1jW2JdLGZbYS51dWlkXT1sLGNbbF09YSxjLnBvcCgpLHA9MCxyPWg7cCE9PXI7KytwKWE9Z1twXSxhW2xdPWFbYl0sYS5wb3AoKX10aGlzLm5DYWNoZWRPYmplY3RzXz1lfSxzdWJzY3JpYmVfOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fYmluZGluZ3NJbmRpY2VzQnlQYXRoLGQ9Y1thXSxlPXRoaXMuX2JpbmRpbmdzO2lmKHZvaWQgMCE9PWQpcmV0dXJuIGVbZF07dmFyIGY9dGhpcy5fcGF0aHMsZz10aGlzLl9wYXJzZWRQYXRocyxoPXRoaXMuX29iamVjdHMsaz10aGlzLm5DYWNoZWRPYmplY3RzXyxtPUFycmF5KGgubGVuZ3RoKSxcbiAgICBkPWUubGVuZ3RoO2NbYV09ZDtmLnB1c2goYSk7Zy5wdXNoKGIpO2UucHVzaChtKTtjPWs7Zm9yKGQ9aC5sZW5ndGg7YyE9PWQ7KytjKW1bY109bmV3IHFhKGhbY10sYSxiKTtyZXR1cm4gbX0sdW5zdWJzY3JpYmVfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2JpbmRpbmdzSW5kaWNlc0J5UGF0aCxjPWJbYV07aWYodm9pZCAwIT09Yyl7dmFyIGQ9dGhpcy5fcGF0aHMsZT10aGlzLl9wYXJzZWRQYXRocyxmPXRoaXMuX2JpbmRpbmdzLGc9Zi5sZW5ndGgtMSxoPWZbZ107YlthW2ddXT1jO2ZbY109aDtmLnBvcCgpO2VbY109ZVtnXTtlLnBvcCgpO2RbY109ZFtnXTtkLnBvcCgpfX19KTtPYmplY3QuYXNzaWduKG9mLnByb3RvdHlwZSx7cGxheTpmdW5jdGlvbigpe3RoaXMuX21peGVyLl9hY3RpdmF0ZUFjdGlvbih0aGlzKTtyZXR1cm4gdGhpc30sc3RvcDpmdW5jdGlvbigpe3RoaXMuX21peGVyLl9kZWFjdGl2YXRlQWN0aW9uKHRoaXMpO3JldHVybiB0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5wYXVzZWQ9XG4gICAgITE7dGhpcy5lbmFibGVkPSEwO3RoaXMudGltZT0wO3RoaXMuX2xvb3BDb3VudD0tMTt0aGlzLl9zdGFydFRpbWU9bnVsbDtyZXR1cm4gdGhpcy5zdG9wRmFkaW5nKCkuc3RvcFdhcnBpbmcoKX0saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZCYmIXRoaXMucGF1c2VkJiYwIT09dGhpcy50aW1lU2NhbGUmJm51bGw9PT10aGlzLl9zdGFydFRpbWUmJnRoaXMuX21peGVyLl9pc0FjdGl2ZUFjdGlvbih0aGlzKX0saXNTY2hlZHVsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpfSxzdGFydEF0OmZ1bmN0aW9uKGEpe3RoaXMuX3N0YXJ0VGltZT1hO3JldHVybiB0aGlzfSxzZXRMb29wOmZ1bmN0aW9uKGEsYil7dGhpcy5sb29wPWE7dGhpcy5yZXBldGl0aW9ucz1iO3JldHVybiB0aGlzfSxzZXRFZmZlY3RpdmVXZWlnaHQ6ZnVuY3Rpb24oYSl7dGhpcy53ZWlnaHQ9YTt0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9dGhpcy5lbmFibGVkP1xuICAgIGE6MDtyZXR1cm4gdGhpcy5zdG9wRmFkaW5nKCl9LGdldEVmZmVjdGl2ZVdlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHR9LGZhZGVJbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVGYWRpbmcoYSwwLDEpfSxmYWRlT3V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyhhLDEsMCl9LGNyb3NzRmFkZUZyb206ZnVuY3Rpb24oYSxiLGMpe2EuZmFkZU91dChiKTt0aGlzLmZhZGVJbihiKTtpZihjKXtjPXRoaXMuX2NsaXAuZHVyYXRpb247dmFyIGQ9YS5fY2xpcC5kdXJhdGlvbixlPWMvZDthLndhcnAoMSxkL2MsYik7dGhpcy53YXJwKGUsMSxiKX1yZXR1cm4gdGhpc30sY3Jvc3NGYWRlVG86ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLmNyb3NzRmFkZUZyb20odGhpcyxiLGMpfSxzdG9wRmFkaW5nOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7bnVsbCE9PWEmJih0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD1cbiAgICBudWxsLHRoaXMuX21peGVyLl90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudChhKSk7cmV0dXJuIHRoaXN9LHNldEVmZmVjdGl2ZVRpbWVTY2FsZTpmdW5jdGlvbihhKXt0aGlzLnRpbWVTY2FsZT1hO3RoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10aGlzLnBhdXNlZD8wOmE7cmV0dXJuIHRoaXMuc3RvcFdhcnBpbmcoKX0sZ2V0RWZmZWN0aXZlVGltZVNjYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZX0sc2V0RHVyYXRpb246ZnVuY3Rpb24oYSl7dGhpcy50aW1lU2NhbGU9dGhpcy5fY2xpcC5kdXJhdGlvbi9hO3JldHVybiB0aGlzLnN0b3BXYXJwaW5nKCl9LHN5bmNXaXRoOmZ1bmN0aW9uKGEpe3RoaXMudGltZT1hLnRpbWU7dGhpcy50aW1lU2NhbGU9YS50aW1lU2NhbGU7cmV0dXJuIHRoaXMuc3RvcFdhcnBpbmcoKX0saGFsdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53YXJwKHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZSwwLGEpfSx3YXJwOmZ1bmN0aW9uKGEsXG4gICAgYixjKXt2YXIgZD10aGlzLl9taXhlcixlPWQudGltZSxmPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50LGc9dGhpcy50aW1lU2NhbGU7bnVsbD09PWYmJih0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1mPWQuX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSk7ZD1mLnBhcmFtZXRlclBvc2l0aW9ucztmPWYuc2FtcGxlVmFsdWVzO2RbMF09ZTtkWzFdPWUrYztmWzBdPWEvZztmWzFdPWIvZztyZXR1cm4gdGhpc30sc3RvcFdhcnBpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtudWxsIT09YSYmKHRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PW51bGwsdGhpcy5fbWl4ZXIuX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50KGEpKTtyZXR1cm4gdGhpc30sZ2V0TWl4ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWl4ZXJ9LGdldENsaXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xpcH0sZ2V0Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFJvb3R8fFxuICAgIHRoaXMuX21peGVyLl9yb290fSxfdXBkYXRlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZW5hYmxlZCl7dmFyIGU9dGhpcy5fc3RhcnRUaW1lO2lmKG51bGwhPT1lKXtiPShhLWUpKmM7aWYoMD5ifHwwPT09YylyZXR1cm47dGhpcy5fc3RhcnRUaW1lPW51bGw7Yio9Y31iKj10aGlzLl91cGRhdGVUaW1lU2NhbGUoYSk7Yz10aGlzLl91cGRhdGVUaW1lKGIpO2E9dGhpcy5fdXBkYXRlV2VpZ2h0KGEpO2lmKDA8YSl7Yj10aGlzLl9pbnRlcnBvbGFudHM7Zm9yKHZhciBlPXRoaXMuX3Byb3BlcnR5QmluZGluZ3MsZj0wLGc9Yi5sZW5ndGg7ZiE9PWc7KytmKWJbZl0uZXZhbHVhdGUoYyksZVtmXS5hY2N1bXVsYXRlKGQsYSl9fWVsc2UgdGhpcy5fdXBkYXRlV2VpZ2h0KGEpfSxfdXBkYXRlV2VpZ2h0OmZ1bmN0aW9uKGEpe3ZhciBiPTA7aWYodGhpcy5lbmFibGVkKXt2YXIgYj10aGlzLndlaWdodCxjPXRoaXMuX3dlaWdodEludGVycG9sYW50O2lmKG51bGwhPT1jKXt2YXIgZD1jLmV2YWx1YXRlKGEpWzBdLFxuICAgIGI9YipkO2E+Yy5wYXJhbWV0ZXJQb3NpdGlvbnNbMV0mJih0aGlzLnN0b3BGYWRpbmcoKSwwPT09ZCYmKHRoaXMuZW5hYmxlZD0hMSkpfX1yZXR1cm4gdGhpcy5fZWZmZWN0aXZlV2VpZ2h0PWJ9LF91cGRhdGVUaW1lU2NhbGU6ZnVuY3Rpb24oYSl7dmFyIGI9MDtpZighdGhpcy5wYXVzZWQpe3ZhciBiPXRoaXMudGltZVNjYWxlLGM9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ7aWYobnVsbCE9PWMpe3ZhciBkPWMuZXZhbHVhdGUoYSlbMF0sYj1iKmQ7YT5jLnBhcmFtZXRlclBvc2l0aW9uc1sxXSYmKHRoaXMuc3RvcFdhcnBpbmcoKSwwPT09Yj90aGlzLnBhdXNlZD0hMDp0aGlzLnRpbWVTY2FsZT1iKX19cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT1ifSxfdXBkYXRlVGltZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnRpbWUrYTtpZigwPT09YSlyZXR1cm4gYjt2YXIgYz10aGlzLl9jbGlwLmR1cmF0aW9uLGQ9dGhpcy5sb29wLGU9dGhpcy5fbG9vcENvdW50O2lmKDIyMDA9PT1cbiAgICBkKWE6e2lmKC0xPT09ZSYmKHRoaXMuX2xvb3BDb3VudD0wLHRoaXMuX3NldEVuZGluZ3MoITAsITAsITEpKSxiPj1jKWI9YztlbHNlIGlmKDA+YiliPTA7ZWxzZSBicmVhayBhO3RoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExO3RoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJmaW5pc2hlZFwiLGFjdGlvbjp0aGlzLGRpcmVjdGlvbjowPmE/LTE6MX0pfWVsc2V7ZD0yMjAyPT09ZDstMT09PWUmJigwPD1hPyhlPTAsdGhpcy5fc2V0RW5kaW5ncyghMCwwPT09dGhpcy5yZXBldGl0aW9ucyxkKSk6dGhpcy5fc2V0RW5kaW5ncygwPT09dGhpcy5yZXBldGl0aW9ucywhMCxkKSk7aWYoYj49Y3x8MD5iKXt2YXIgZj1NYXRoLmZsb29yKGIvYyksYj1iLWMqZixlPWUrTWF0aC5hYnMoZiksZz10aGlzLnJlcGV0aXRpb25zLWU7MD5nPyh0aGlzLmNsYW1wV2hlbkZpbmlzaGVkP3RoaXMucGF1c2VkPSEwOnRoaXMuZW5hYmxlZD0hMSxiPTA8YT9cbiAgICBjOjAsdGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImZpbmlzaGVkXCIsYWN0aW9uOnRoaXMsZGlyZWN0aW9uOjA8YT8xOi0xfSkpOigwPT09Zz8oYT0wPmEsdGhpcy5fc2V0RW5kaW5ncyhhLCFhLGQpKTp0aGlzLl9zZXRFbmRpbmdzKCExLCExLGQpLHRoaXMuX2xvb3BDb3VudD1lLHRoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJsb29wXCIsYWN0aW9uOnRoaXMsbG9vcERlbHRhOmZ9KSl9aWYoZCYmMT09PShlJjEpKXJldHVybiB0aGlzLnRpbWU9YixjLWJ9cmV0dXJuIHRoaXMudGltZT1ifSxfc2V0RW5kaW5nczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5faW50ZXJwb2xhbnRTZXR0aW5ncztjPyhkLmVuZGluZ1N0YXJ0PTI0MDEsZC5lbmRpbmdFbmQ9MjQwMSk6KGQuZW5kaW5nU3RhcnQ9YT90aGlzLnplcm9TbG9wZUF0U3RhcnQ/MjQwMToyNDAwOjI0MDIsZC5lbmRpbmdFbmQ9Yj90aGlzLnplcm9TbG9wZUF0RW5kPzI0MDE6MjQwMDoyNDAyKX0sX3NjaGVkdWxlRmFkaW5nOmZ1bmN0aW9uKGEsXG4gICAgYixjKXt2YXIgZD10aGlzLl9taXhlcixlPWQudGltZSxmPXRoaXMuX3dlaWdodEludGVycG9sYW50O251bGw9PT1mJiYodGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9Zj1kLl9sZW5kQ29udHJvbEludGVycG9sYW50KCkpO2Q9Zi5wYXJhbWV0ZXJQb3NpdGlvbnM7Zj1mLnNhbXBsZVZhbHVlcztkWzBdPWU7ZlswXT1iO2RbMV09ZSthO2ZbMV09YztyZXR1cm4gdGhpc319KTt3ZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHphLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOndlLF9iaW5kQWN0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5fbG9jYWxSb290fHx0aGlzLl9yb290LGQ9YS5fY2xpcC50cmFja3MsZT1kLmxlbmd0aCxmPWEuX3Byb3BlcnR5QmluZGluZ3M7YT1hLl9pbnRlcnBvbGFudHM7dmFyIGc9Yy51dWlkLGg9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGs9aFtnXTt2b2lkIDA9PT1rJiYoaz17fSxoW2ddPWspO2ZvcihoPTA7aCE9PWU7KytoKXt2YXIgbT1cbiAgICBkW2hdLGw9bS5uYW1lLG49a1tsXTtpZih2b2lkIDA9PT1uKXtuPWZbaF07aWYodm9pZCAwIT09bil7bnVsbD09PW4uX2NhY2hlSW5kZXgmJigrK24ucmVmZXJlbmNlQ291bnQsdGhpcy5fYWRkSW5hY3RpdmVCaW5kaW5nKG4sZyxsKSk7Y29udGludWV9bj1uZXcgdmUocWEuY3JlYXRlKGMsbCxiJiZiLl9wcm9wZXJ0eUJpbmRpbmdzW2hdLmJpbmRpbmcucGFyc2VkUGF0aCksbS5WYWx1ZVR5cGVOYW1lLG0uZ2V0VmFsdWVTaXplKCkpOysrbi5yZWZlcmVuY2VDb3VudDt0aGlzLl9hZGRJbmFjdGl2ZUJpbmRpbmcobixnLGwpfWZbaF09bjthW2hdLnJlc3VsdEJ1ZmZlcj1uLmJ1ZmZlcn19LF9hY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbihhKXtpZighdGhpcy5faXNBY3RpdmVBY3Rpb24oYSkpe2lmKG51bGw9PT1hLl9jYWNoZUluZGV4KXt2YXIgYj0oYS5fbG9jYWxSb290fHx0aGlzLl9yb290KS51dWlkLGM9YS5fY2xpcC51dWlkLGQ9dGhpcy5fYWN0aW9uc0J5Q2xpcFtjXTt0aGlzLl9iaW5kQWN0aW9uKGEsXG4gICAgZCYmZC5rbm93bkFjdGlvbnNbMF0pO3RoaXMuX2FkZEluYWN0aXZlQWN0aW9uKGEsYyxiKX1iPWEuX3Byb3BlcnR5QmluZGluZ3M7Yz0wO2ZvcihkPWIubGVuZ3RoO2MhPT1kOysrYyl7dmFyIGU9YltjXTswPT09ZS51c2VDb3VudCsrJiYodGhpcy5fbGVuZEJpbmRpbmcoZSksZS5zYXZlT3JpZ2luYWxTdGF0ZSgpKX10aGlzLl9sZW5kQWN0aW9uKGEpfX0sX2RlYWN0aXZhdGVBY3Rpb246ZnVuY3Rpb24oYSl7aWYodGhpcy5faXNBY3RpdmVBY3Rpb24oYSkpe2Zvcih2YXIgYj1hLl9wcm9wZXJ0eUJpbmRpbmdzLGM9MCxkPWIubGVuZ3RoO2MhPT1kOysrYyl7dmFyIGU9YltjXTswPT09LS1lLnVzZUNvdW50JiYoZS5yZXN0b3JlT3JpZ2luYWxTdGF0ZSgpLHRoaXMuX3Rha2VCYWNrQmluZGluZyhlKSl9dGhpcy5fdGFrZUJhY2tBY3Rpb24oYSl9fSxfaW5pdE1lbW9yeU1hbmFnZXI6ZnVuY3Rpb24oKXt0aGlzLl9hY3Rpb25zPVtdO3RoaXMuX25BY3RpdmVBY3Rpb25zPTA7dGhpcy5fYWN0aW9uc0J5Q2xpcD1cbiAgICB7fTt0aGlzLl9iaW5kaW5ncz1bXTt0aGlzLl9uQWN0aXZlQmluZGluZ3M9MDt0aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWU9e307dGhpcy5fY29udHJvbEludGVycG9sYW50cz1bXTt0aGlzLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50cz0wO3ZhciBhPXRoaXM7dGhpcy5zdGF0cz17YWN0aW9uczp7Z2V0IHRvdGFsKCl7cmV0dXJuIGEuX2FjdGlvbnMubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gYS5fbkFjdGl2ZUFjdGlvbnN9fSxiaW5kaW5nczp7Z2V0IHRvdGFsKCl7cmV0dXJuIGEuX2JpbmRpbmdzLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIGEuX25BY3RpdmVCaW5kaW5nc319LGNvbnRyb2xJbnRlcnBvbGFudHM6e2dldCB0b3RhbCgpe3JldHVybiBhLl9jb250cm9sSW50ZXJwb2xhbnRzLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIGEuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzfX19fSxfaXNBY3RpdmVBY3Rpb246ZnVuY3Rpb24oYSl7YT1hLl9jYWNoZUluZGV4O1xuICAgIHJldHVybiBudWxsIT09YSYmYTx0aGlzLl9uQWN0aXZlQWN0aW9uc30sX2FkZEluYWN0aXZlQWN0aW9uOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9hY3Rpb25zLGU9dGhpcy5fYWN0aW9uc0J5Q2xpcCxmPWVbYl07dm9pZCAwPT09Zj8oZj17a25vd25BY3Rpb25zOlthXSxhY3Rpb25CeVJvb3Q6e319LGEuX2J5Q2xpcENhY2hlSW5kZXg9MCxlW2JdPWYpOihiPWYua25vd25BY3Rpb25zLGEuX2J5Q2xpcENhY2hlSW5kZXg9Yi5sZW5ndGgsYi5wdXNoKGEpKTthLl9jYWNoZUluZGV4PWQubGVuZ3RoO2QucHVzaChhKTtmLmFjdGlvbkJ5Um9vdFtjXT1hfSxfcmVtb3ZlSW5hY3RpdmVBY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYWN0aW9ucyxjPWJbYi5sZW5ndGgtMV0sZD1hLl9jYWNoZUluZGV4O2MuX2NhY2hlSW5kZXg9ZDtiW2RdPWM7Yi5wb3AoKTthLl9jYWNoZUluZGV4PW51bGw7dmFyIGI9YS5fY2xpcC51dWlkLGM9dGhpcy5fYWN0aW9uc0J5Q2xpcCxkPWNbYl0sZT1cbiAgICBkLmtub3duQWN0aW9ucyxmPWVbZS5sZW5ndGgtMV0sZz1hLl9ieUNsaXBDYWNoZUluZGV4O2YuX2J5Q2xpcENhY2hlSW5kZXg9ZztlW2ddPWY7ZS5wb3AoKTthLl9ieUNsaXBDYWNoZUluZGV4PW51bGw7ZGVsZXRlIGQuYWN0aW9uQnlSb290WyhhLl9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QpLnV1aWRdOzA9PT1lLmxlbmd0aCYmZGVsZXRlIGNbYl07dGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbihhKX0sX3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb246ZnVuY3Rpb24oYSl7YT1hLl9wcm9wZXJ0eUJpbmRpbmdzO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YiE9PWM7KytiKXt2YXIgZD1hW2JdOzA9PT0tLWQucmVmZXJlbmNlQ291bnQmJnRoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZyhkKX19LF9sZW5kQWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2FjdGlvbnMsYz1hLl9jYWNoZUluZGV4LGQ9dGhpcy5fbkFjdGl2ZUFjdGlvbnMrKyxlPWJbZF07YS5fY2FjaGVJbmRleD1cbiAgICBkO2JbZF09YTtlLl9jYWNoZUluZGV4PWM7YltjXT1lfSxfdGFrZUJhY2tBY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYWN0aW9ucyxjPWEuX2NhY2hlSW5kZXgsZD0tLXRoaXMuX25BY3RpdmVBY3Rpb25zLGU9YltkXTthLl9jYWNoZUluZGV4PWQ7YltkXT1hO2UuX2NhY2hlSW5kZXg9YztiW2NdPWV9LF9hZGRJbmFjdGl2ZUJpbmRpbmc6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZSxlPWRbYl0sZj10aGlzLl9iaW5kaW5nczt2b2lkIDA9PT1lJiYoZT17fSxkW2JdPWUpO2VbY109YTthLl9jYWNoZUluZGV4PWYubGVuZ3RoO2YucHVzaChhKX0sX3JlbW92ZUluYWN0aXZlQmluZGluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9iaW5kaW5ncyxjPWEuYmluZGluZyxkPWMucm9vdE5vZGUudXVpZCxjPWMucGF0aCxlPXRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZSxmPWVbZF0sZz1iW2IubGVuZ3RoLTFdO2E9YS5fY2FjaGVJbmRleDtcbiAgICBnLl9jYWNoZUluZGV4PWE7YlthXT1nO2IucG9wKCk7ZGVsZXRlIGZbY107YTp7Zm9yKHZhciBoIGluIGYpYnJlYWsgYTtkZWxldGUgZVtkXX19LF9sZW5kQmluZGluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9iaW5kaW5ncyxjPWEuX2NhY2hlSW5kZXgsZD10aGlzLl9uQWN0aXZlQmluZGluZ3MrKyxlPWJbZF07YS5fY2FjaGVJbmRleD1kO2JbZF09YTtlLl9jYWNoZUluZGV4PWM7YltjXT1lfSxfdGFrZUJhY2tCaW5kaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2JpbmRpbmdzLGM9YS5fY2FjaGVJbmRleCxkPS0tdGhpcy5fbkFjdGl2ZUJpbmRpbmdzLGU9YltkXTthLl9jYWNoZUluZGV4PWQ7YltkXT1hO2UuX2NhY2hlSW5kZXg9YztiW2NdPWV9LF9sZW5kQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY29udHJvbEludGVycG9sYW50cyxiPXRoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzKyssYz1hW2JdO3ZvaWQgMD09PWMmJihjPW5ldyBlZChuZXcgRmxvYXQzMkFycmF5KDIpLFxuICAgIG5ldyBGbG9hdDMyQXJyYXkoMiksMSx0aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzUmVzdWx0QnVmZmVyKSxjLl9fY2FjaGVJbmRleD1iLGFbYl09Yyk7cmV0dXJuIGN9LF90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzLGM9YS5fX2NhY2hlSW5kZXgsZD0tLXRoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzLGU9YltkXTthLl9fY2FjaGVJbmRleD1kO2JbZF09YTtlLl9fY2FjaGVJbmRleD1jO2JbY109ZX0sX2NvbnRyb2xJbnRlcnBvbGFudHNSZXN1bHRCdWZmZXI6bmV3IEZsb2F0MzJBcnJheSgxKSxjbGlwQWN0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy5fcm9vdCxkPWMudXVpZCxjPVwic3RyaW5nXCI9PT10eXBlb2YgYT9DYS5maW5kQnlOYW1lKGMsYSk6YTthPW51bGwhPT1jP2MudXVpZDphO3ZhciBlPXRoaXMuX2FjdGlvbnNCeUNsaXBbYV0sZj1udWxsO2lmKHZvaWQgMCE9PWUpe2Y9XG4gICAgZS5hY3Rpb25CeVJvb3RbZF07aWYodm9pZCAwIT09ZilyZXR1cm4gZjtmPWUua25vd25BY3Rpb25zWzBdO251bGw9PT1jJiYoYz1mLl9jbGlwKX1pZihudWxsPT09YylyZXR1cm4gbnVsbDtiPW5ldyBvZih0aGlzLGMsYik7dGhpcy5fYmluZEFjdGlvbihiLGYpO3RoaXMuX2FkZEluYWN0aXZlQWN0aW9uKGIsYSxkKTtyZXR1cm4gYn0sZXhpc3RpbmdBY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx0aGlzLl9yb290O2I9Yy51dWlkO2M9XCJzdHJpbmdcIj09PXR5cGVvZiBhP0NhLmZpbmRCeU5hbWUoYyxhKTphO2E9dGhpcy5fYWN0aW9uc0J5Q2xpcFtjP2MudXVpZDphXTtyZXR1cm4gdm9pZCAwIT09YT9hLmFjdGlvbkJ5Um9vdFtiXXx8bnVsbDpudWxsfSxzdG9wQWxsQWN0aW9uOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuX2FjdGlvbnMsYj10aGlzLl9uQWN0aXZlQWN0aW9ucyxjPXRoaXMuX2JpbmRpbmdzLGQ9dGhpcy5fbkFjdGl2ZUJpbmRpbmdzLGU9dGhpcy5fbkFjdGl2ZUJpbmRpbmdzPVxuICAgIHRoaXMuX25BY3RpdmVBY3Rpb25zPTA7ZSE9PWI7KytlKWFbZV0ucmVzZXQoKTtmb3IoZT0wO2UhPT1kOysrZSljW2VdLnVzZUNvdW50PTA7cmV0dXJuIHRoaXN9LHVwZGF0ZTpmdW5jdGlvbihhKXthKj10aGlzLnRpbWVTY2FsZTtmb3IodmFyIGI9dGhpcy5fYWN0aW9ucyxjPXRoaXMuX25BY3RpdmVBY3Rpb25zLGQ9dGhpcy50aW1lKz1hLGU9TWF0aC5zaWduKGEpLGY9dGhpcy5fYWNjdUluZGV4Xj0xLGc9MDtnIT09YzsrK2cpYltnXS5fdXBkYXRlKGQsYSxlLGYpO2E9dGhpcy5fYmluZGluZ3M7Yj10aGlzLl9uQWN0aXZlQmluZGluZ3M7Zm9yKGc9MDtnIT09YjsrK2cpYVtnXS5hcHBseShmKTtyZXR1cm4gdGhpc30sZ2V0Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb290fSx1bmNhY2hlQ2xpcDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9hY3Rpb25zO2E9YS51dWlkO3ZhciBjPXRoaXMuX2FjdGlvbnNCeUNsaXAsZD1jW2FdO2lmKHZvaWQgMCE9PWQpe2Zvcih2YXIgZD1kLmtub3duQWN0aW9ucyxcbiAgICBlPTAsZj1kLmxlbmd0aDtlIT09ZjsrK2Upe3ZhciBnPWRbZV07dGhpcy5fZGVhY3RpdmF0ZUFjdGlvbihnKTt2YXIgaD1nLl9jYWNoZUluZGV4LGs9YltiLmxlbmd0aC0xXTtnLl9jYWNoZUluZGV4PW51bGw7Zy5fYnlDbGlwQ2FjaGVJbmRleD1udWxsO2suX2NhY2hlSW5kZXg9aDtiW2hdPWs7Yi5wb3AoKTt0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmdzRm9yQWN0aW9uKGcpfWRlbGV0ZSBjW2FdfX0sdW5jYWNoZVJvb3Q6ZnVuY3Rpb24oYSl7YT1hLnV1aWQ7dmFyIGI9dGhpcy5fYWN0aW9uc0J5Q2xpcDtmb3IoZCBpbiBiKXt2YXIgYz1iW2RdLmFjdGlvbkJ5Um9vdFthXTt2b2lkIDAhPT1jJiYodGhpcy5fZGVhY3RpdmF0ZUFjdGlvbihjKSx0aGlzLl9yZW1vdmVJbmFjdGl2ZUFjdGlvbihjKSl9dmFyIGQ9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lW2FdO2lmKHZvaWQgMCE9PWQpZm9yKHZhciBlIGluIGQpYT1kW2VdLGEucmVzdG9yZU9yaWdpbmFsU3RhdGUoKSx0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmcoYSl9LFxuICAgIHVuY2FjaGVBY3Rpb246ZnVuY3Rpb24oYSxiKXthPXRoaXMuZXhpc3RpbmdBY3Rpb24oYSxiKTtudWxsIT09YSYmKHRoaXMuX2RlYWN0aXZhdGVBY3Rpb24oYSksdGhpcy5fcmVtb3ZlSW5hY3RpdmVBY3Rpb24oYSkpfX0pO1FkLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgUWQodm9pZCAwPT09dGhpcy52YWx1ZS5jbG9uZT90aGlzLnZhbHVlOnRoaXMudmFsdWUuY2xvbmUoKSl9O3hlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp4ZSxpc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5OiEwLGNvcHk6ZnVuY3Rpb24oYSl7RS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5tYXhJbnN0YW5jZWRDb3VudD1hLm1heEluc3RhbmNlZENvdW50O3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh5ZS5wcm90b3R5cGUsXG4gICAge2NvdW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmNvdW50fX0sYXJyYXk6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuYXJyYXl9fX0pO09iamVjdC5hc3NpZ24oeWUucHJvdG90eXBlLHtpc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlOiEwLHNldFg6ZnVuY3Rpb24oYSxiKXt0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0XT1iO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsxXT1iO3JldHVybiB0aGlzfSxzZXRaOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsyXT1iO3JldHVybiB0aGlzfSxzZXRXOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCszXT1iO3JldHVybiB0aGlzfSxnZXRYOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSpcbiAgICB0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0XX0sZ2V0WTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsxXX0sZ2V0WjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsyXX0sZ2V0VzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCszXX0sc2V0WFk6ZnVuY3Rpb24oYSxiLGMpe2E9YSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O3RoaXMuZGF0YS5hcnJheVthKzBdPWI7dGhpcy5kYXRhLmFycmF5W2ErMV09YztyZXR1cm4gdGhpc30sc2V0WFlaOmZ1bmN0aW9uKGEsYixjLGQpe2E9YSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O3RoaXMuZGF0YS5hcnJheVthKzBdPWI7dGhpcy5kYXRhLmFycmF5W2ErMV09Yzt0aGlzLmRhdGEuYXJyYXlbYSsyXT1kO3JldHVybiB0aGlzfSxcbiAgICBzZXRYWVpXOmZ1bmN0aW9uKGEsYixjLGQsZSl7YT1hKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2ErMF09Yjt0aGlzLmRhdGEuYXJyYXlbYSsxXT1jO3RoaXMuZGF0YS5hcnJheVthKzJdPWQ7dGhpcy5kYXRhLmFycmF5W2ErM109ZTtyZXR1cm4gdGhpc319KTtPYmplY3QuZGVmaW5lUHJvcGVydHkobWMucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKGEpeyEwPT09YSYmdGhpcy52ZXJzaW9uKyt9fSk7T2JqZWN0LmFzc2lnbihtYy5wcm90b3R5cGUse2lzSW50ZXJsZWF2ZWRCdWZmZXI6ITAsc2V0QXJyYXk6ZnVuY3Rpb24oYSl7aWYoQXJyYXkuaXNBcnJheShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiBhcnJheSBzaG91bGQgYmUgYSBUeXBlZCBBcnJheS5cIik7dGhpcy5jb3VudD12b2lkIDAhPT1hP2EubGVuZ3RoL3RoaXMuc3RyaWRlOjA7dGhpcy5hcnJheT1hfSxzZXREeW5hbWljOmZ1bmN0aW9uKGEpe3RoaXMuZHluYW1pYz1cbiAgICBhO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYXJyYXk9bmV3IGEuYXJyYXkuY29uc3RydWN0b3IoYS5hcnJheSk7dGhpcy5jb3VudD1hLmNvdW50O3RoaXMuc3RyaWRlPWEuc3RyaWRlO3RoaXMuZHluYW1pYz1hLmR5bmFtaWM7cmV0dXJuIHRoaXN9LGNvcHlBdDpmdW5jdGlvbihhLGIsYyl7YSo9dGhpcy5zdHJpZGU7Yyo9Yi5zdHJpZGU7Zm9yKHZhciBkPTAsZT10aGlzLnN0cmlkZTtkPGU7ZCsrKXRoaXMuYXJyYXlbYStkXT1iLmFycmF5W2MrZF07cmV0dXJuIHRoaXN9LHNldDpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMuYXJyYXkuc2V0KGEsYik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxvblVwbG9hZDpmdW5jdGlvbihhKXt0aGlzLm9uVXBsb2FkQ2FsbGJhY2s9YTtyZXR1cm4gdGhpc319KTt6ZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG1jLnByb3RvdHlwZSksXG4gICAge2NvbnN0cnVjdG9yOnplLGlzSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI6ITAsY29weTpmdW5jdGlvbihhKXttYy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWEubWVzaFBlckF0dHJpYnV0ZTtyZXR1cm4gdGhpc319KTtBZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6QWUsaXNJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU6ITAsY29weTpmdW5jdGlvbihhKXtNLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9YS5tZXNoUGVyQXR0cmlidXRlO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24ocGYucHJvdG90eXBlLHtsaW5lUHJlY2lzaW9uOjEsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5yYXkuc2V0KGEsYil9LHNldEZyb21DYW1lcmE6ZnVuY3Rpb24oYSxiKXtiJiZiLmlzUGVyc3BlY3RpdmVDYW1lcmE/KHRoaXMucmF5Lm9yaWdpbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oYi5tYXRyaXhXb3JsZCksXG4gICAgdGhpcy5yYXkuZGlyZWN0aW9uLnNldChhLngsYS55LC41KS51bnByb2plY3QoYikuc3ViKHRoaXMucmF5Lm9yaWdpbikubm9ybWFsaXplKCkpOmImJmIuaXNPcnRob2dyYXBoaWNDYW1lcmE/KHRoaXMucmF5Lm9yaWdpbi5zZXQoYS54LGEueSwoYi5uZWFyK2IuZmFyKS8oYi5uZWFyLWIuZmFyKSkudW5wcm9qZWN0KGIpLHRoaXMucmF5LmRpcmVjdGlvbi5zZXQoMCwwLC0xKS50cmFuc2Zvcm1EaXJlY3Rpb24oYi5tYXRyaXhXb3JsZCkpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5SYXljYXN0ZXI6IFVuc3VwcG9ydGVkIGNhbWVyYSB0eXBlLlwiKX0saW50ZXJzZWN0T2JqZWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9W107QmUoYSx0aGlzLGMsYik7Yy5zb3J0KHFmKTtyZXR1cm4gY30saW50ZXJzZWN0T2JqZWN0czpmdW5jdGlvbihhLGIpe3ZhciBjPVtdO2lmKCExPT09QXJyYXkuaXNBcnJheShhKSlyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHM6IG9iamVjdHMgaXMgbm90IGFuIEFycmF5LlwiKSxcbiAgICBjO2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylCZShhW2RdLHRoaXMsYyxiKTtjLnNvcnQocWYpO3JldHVybiBjfX0pO09iamVjdC5hc3NpZ24ocmYucHJvdG90eXBlLHtzdGFydDpmdW5jdGlvbigpe3RoaXMub2xkVGltZT10aGlzLnN0YXJ0VGltZT0oXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBwZXJmb3JtYW5jZT9EYXRlOnBlcmZvcm1hbmNlKS5ub3coKTt0aGlzLmVsYXBzZWRUaW1lPTA7dGhpcy5ydW5uaW5nPSEwfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5nZXRFbGFwc2VkVGltZSgpO3RoaXMuYXV0b1N0YXJ0PXRoaXMucnVubmluZz0hMX0sZ2V0RWxhcHNlZFRpbWU6ZnVuY3Rpb24oKXt0aGlzLmdldERlbHRhKCk7cmV0dXJuIHRoaXMuZWxhcHNlZFRpbWV9LGdldERlbHRhOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmF1dG9TdGFydCYmIXRoaXMucnVubmluZylyZXR1cm4gdGhpcy5zdGFydCgpLDA7aWYodGhpcy5ydW5uaW5nKXt2YXIgYj0oXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBwZXJmb3JtYW5jZT9cbiAgICBEYXRlOnBlcmZvcm1hbmNlKS5ub3coKSxhPShiLXRoaXMub2xkVGltZSkvMUUzO3RoaXMub2xkVGltZT1iO3RoaXMuZWxhcHNlZFRpbWUrPWF9cmV0dXJuIGF9fSk7T2JqZWN0LmFzc2lnbihzZi5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIsYyl7dGhpcy5yYWRpdXM9YTt0aGlzLnBoaT1iO3RoaXMudGhldGE9YztyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5yYWRpdXM9YS5yYWRpdXM7dGhpcy5waGk9YS5waGk7dGhpcy50aGV0YT1hLnRoZXRhO3JldHVybiB0aGlzfSxtYWtlU2FmZTpmdW5jdGlvbigpe3RoaXMucGhpPU1hdGgubWF4KDFFLTYsTWF0aC5taW4oTWF0aC5QSS0xRS02LHRoaXMucGhpKSk7cmV0dXJuIHRoaXN9LHNldEZyb21WZWN0b3IzOmZ1bmN0aW9uKGEpe3RoaXMucmFkaXVzPWEubGVuZ3RoKCk7MD09PXRoaXMucmFkaXVzP3RoaXMucGhpPXRoaXMudGhldGE9XG4gICAgMDoodGhpcy50aGV0YT1NYXRoLmF0YW4yKGEueCxhLnopLHRoaXMucGhpPU1hdGguYWNvcyhRLmNsYW1wKGEueS90aGlzLnJhZGl1cywtMSwxKSkpO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24odGYucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMucmFkaXVzPWE7dGhpcy50aGV0YT1iO3RoaXMueT1jO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLnJhZGl1cz1hLnJhZGl1czt0aGlzLnRoZXRhPWEudGhldGE7dGhpcy55PWEueTtyZXR1cm4gdGhpc30sc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24oYSl7dGhpcy5yYWRpdXM9TWF0aC5zcXJ0KGEueCphLngrYS56KmEueik7dGhpcy50aGV0YT1NYXRoLmF0YW4yKGEueCxhLnopO3RoaXMueT1hLnk7cmV0dXJuIHRoaXN9fSk7Z2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpO2dkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1cbiAgICBnZDtnZC5wcm90b3R5cGUuaXNJbW1lZGlhdGVSZW5kZXJPYmplY3Q9ITA7aGQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWC5wcm90b3R5cGUpO2hkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oZDtoZC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgcCxjPW5ldyBtYTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZCxlPVtcImFcIixcImJcIixcImNcIl07dGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoITApO2MuZ2V0Tm9ybWFsTWF0cml4KHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkKTt2YXIgZj10aGlzLm9iamVjdC5tYXRyaXhXb3JsZCxnPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjtpZigoZD10aGlzLm9iamVjdC5nZW9tZXRyeSkmJmQuaXNHZW9tZXRyeSlmb3IodmFyIGg9ZC52ZXJ0aWNlcyxrPWQuZmFjZXMsbD1kPTAscD1rLmxlbmd0aDtsPHA7bCsrKWZvcih2YXIgbj1rW2xdLHU9MCxyPW4udmVydGV4Tm9ybWFscy5sZW5ndGg7dTxyO3UrKyl7dmFyIHQ9XG4gICAgbi52ZXJ0ZXhOb3JtYWxzW3VdO2EuY29weShoW25bZVt1XV1dKS5hcHBseU1hdHJpeDQoZik7Yi5jb3B5KHQpLmFwcGx5TWF0cml4MyhjKS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0aGlzLnNpemUpLmFkZChhKTtnLnNldFhZWihkLGEueCxhLnksYS56KTtkKz0xO2cuc2V0WFlaKGQsYi54LGIueSxiLnopO2QrPTF9ZWxzZSBpZihkJiZkLmlzQnVmZmVyR2VvbWV0cnkpZm9yKGU9ZC5hdHRyaWJ1dGVzLnBvc2l0aW9uLGg9ZC5hdHRyaWJ1dGVzLm5vcm1hbCx1PWQ9MCxyPWUuY291bnQ7dTxyO3UrKylhLnNldChlLmdldFgodSksZS5nZXRZKHUpLGUuZ2V0Wih1KSkuYXBwbHlNYXRyaXg0KGYpLGIuc2V0KGguZ2V0WCh1KSxoLmdldFkodSksaC5nZXRaKHUpKSxiLmFwcGx5TWF0cml4MyhjKS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0aGlzLnNpemUpLmFkZChhKSxnLnNldFhZWihkLGEueCxhLnksYS56KSxkKz0xLGcuc2V0WFlaKGQsYi54LGIueSxiLnopLGQrPTE7Zy5uZWVkc1VwZGF0ZT1cbiAgICAhMH19KCk7bmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpO25jLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1uYztuYy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY29uZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5jb25lLm1hdGVyaWFsLmRpc3Bvc2UoKX07bmMucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3ZhciBjPXRoaXMubGlnaHQuZGlzdGFuY2U/dGhpcy5saWdodC5kaXN0YW5jZToxRTMsZD1jKk1hdGgudGFuKHRoaXMubGlnaHQuYW5nbGUpO3RoaXMuY29uZS5zY2FsZS5zZXQoZCxkLGMpO2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpO2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTt0aGlzLmNvbmUubG9va0F0KGIuc3ViKGEpKTtcbiAgICB2b2lkIDAhPT10aGlzLmNvbG9yP3RoaXMuY29uZS5tYXRlcmlhbC5jb2xvci5zZXQodGhpcy5jb2xvcik6dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcil9fSgpO29jLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFgucHJvdG90eXBlKTtvYy5wcm90b3R5cGUuY29uc3RydWN0b3I9b2M7b2MucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgTyxjPW5ldyBPO3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT10aGlzLmJvbmVzLGY9dGhpcy5nZW9tZXRyeSxnPWYuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7Yy5nZXRJbnZlcnNlKHRoaXMucm9vdC5tYXRyaXhXb3JsZCk7Zm9yKHZhciBoPTAsaz0wO2g8ZS5sZW5ndGg7aCsrKXt2YXIgbD1lW2hdO2wucGFyZW50JiZsLnBhcmVudC5pc0JvbmUmJihiLm11bHRpcGx5TWF0cmljZXMoYyxsLm1hdHJpeFdvcmxkKSxhLnNldEZyb21NYXRyaXhQb3NpdGlvbihiKSxcbiAgICBnLnNldFhZWihrLGEueCxhLnksYS56KSxiLm11bHRpcGx5TWF0cmljZXMoYyxsLnBhcmVudC5tYXRyaXhXb3JsZCksYS5zZXRGcm9tTWF0cml4UG9zaXRpb24oYiksZy5zZXRYWVooaysxLGEueCxhLnksYS56KSxrKz0yKX1mLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLm5lZWRzVXBkYXRlPSEwO3gucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxkKX19KCk7cGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocmEucHJvdG90eXBlKTtwYy5wcm90b3R5cGUuY29uc3RydWN0b3I9cGM7cGMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLm1hdGVyaWFsLmRpc3Bvc2UoKX07cGMucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZvaWQgMCE9PXRoaXMuY29sb3I/dGhpcy5tYXRlcmlhbC5jb2xvci5zZXQodGhpcy5jb2xvcik6dGhpcy5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpfTtxYy5wcm90b3R5cGU9XG4gICAgT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7cWMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXFjO3FjLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5jaGlsZHJlblswXS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5jaGlsZHJlblswXS5tYXRlcmlhbC5kaXNwb3NlKCl9O3FjLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT0uNSp0aGlzLmxpZ2h0LndpZHRoLGI9LjUqdGhpcy5saWdodC5oZWlnaHQsYz10aGlzLmxpbmUuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbixkPWMuYXJyYXk7ZFswXT1hO2RbMV09LWI7ZFsyXT0wO2RbM109YTtkWzRdPWI7ZFs1XT0wO2RbNl09LWE7ZFs3XT1iO2RbOF09MDtkWzldPS1hO2RbMTBdPS1iO2RbMTFdPTA7ZFsxMl09YTtkWzEzXT0tYjtkWzE0XT0wO2MubmVlZHNVcGRhdGU9ITA7dm9pZCAwIT09dGhpcy5jb2xvcj90aGlzLmxpbmUubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpOnRoaXMubGluZS5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpfTtcbiAgICByYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7cmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXJjO3JjLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5jaGlsZHJlblswXS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5jaGlsZHJlblswXS5tYXRlcmlhbC5kaXNwb3NlKCl9O3JjLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBILGM9bmV3IEg7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5jaGlsZHJlblswXTtpZih2b2lkIDAhPT10aGlzLmNvbG9yKXRoaXMubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpO2Vsc2V7dmFyIGU9ZC5nZW9tZXRyeS5nZXRBdHRyaWJ1dGUoXCJjb2xvclwiKTtiLmNvcHkodGhpcy5saWdodC5jb2xvcik7Yy5jb3B5KHRoaXMubGlnaHQuZ3JvdW5kQ29sb3IpO2Zvcih2YXIgZj0wLGc9ZS5jb3VudDtmPGc7ZisrKXt2YXIgaD1mPGcvMj9iOmM7ZS5zZXRYWVooZixoLnIsaC5nLGguYil9ZS5uZWVkc1VwZGF0ZT1cbiAgICAhMH1kLmxvb2tBdChhLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkKS5uZWdhdGUoKSl9fSgpO2lkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFgucHJvdG90eXBlKTtpZC5wcm90b3R5cGUuY29uc3RydWN0b3I9aWQ7UmQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWC5wcm90b3R5cGUpO1JkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1SZDtqZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7amQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWpkO2pkLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IG1hO3JldHVybiBmdW5jdGlvbigpe3RoaXMub2JqZWN0LnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTtjLmdldE5vcm1hbE1hdHJpeCh0aGlzLm9iamVjdC5tYXRyaXhXb3JsZCk7Zm9yKHZhciBkPXRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkLGU9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLFxuICAgIGY9dGhpcy5vYmplY3QuZ2VvbWV0cnksZz1mLnZlcnRpY2VzLGY9Zi5mYWNlcyxoPTAsaz0wLGw9Zi5sZW5ndGg7azxsO2srKyl7dmFyIHA9ZltrXSxuPXAubm9ybWFsO2EuY29weShnW3AuYV0pLmFkZChnW3AuYl0pLmFkZChnW3AuY10pLmRpdmlkZVNjYWxhcigzKS5hcHBseU1hdHJpeDQoZCk7Yi5jb3B5KG4pLmFwcGx5TWF0cml4MyhjKS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0aGlzLnNpemUpLmFkZChhKTtlLnNldFhZWihoLGEueCxhLnksYS56KTtoKz0xO2Uuc2V0WFlaKGgsYi54LGIueSxiLnopO2grPTF9ZS5uZWVkc1VwZGF0ZT0hMH19KCk7c2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpO3NjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1zYztzYy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMubGlnaHRQbGFuZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmRpc3Bvc2UoKTt0aGlzLnRhcmdldExpbmUuZ2VvbWV0cnkuZGlzcG9zZSgpO1xuICAgIHRoaXMudGFyZ2V0TGluZS5tYXRlcmlhbC5kaXNwb3NlKCl9O3NjLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC50YXJnZXQubWF0cml4V29ybGQpO2Muc3ViVmVjdG9ycyhiLGEpO3RoaXMubGlnaHRQbGFuZS5sb29rQXQoYyk7dm9pZCAwIT09dGhpcy5jb2xvcj8odGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKSx0aGlzLnRhcmdldExpbmUubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpKToodGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvciksdGhpcy50YXJnZXRMaW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikpO3RoaXMudGFyZ2V0TGluZS5sb29rQXQoYyk7XG4gICAgdGhpcy50YXJnZXRMaW5lLnNjYWxlLno9Yy5sZW5ndGgoKX19KCk7a2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWC5wcm90b3R5cGUpO2tkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1rZDtrZC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGcsaCxrKXtkLnNldChnLGgsaykudW5wcm9qZWN0KGUpO2E9Y1thXTtpZih2b2lkIDAhPT1hKWZvcihnPWIuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiksaD0wLGs9YS5sZW5ndGg7aDxrO2grKylnLnNldFhZWihhW2hdLGQueCxkLnksZC56KX12YXIgYixjLGQ9bmV3IHAsZT1uZXcgVGE7cmV0dXJuIGZ1bmN0aW9uKCl7Yj10aGlzLmdlb21ldHJ5O2M9dGhpcy5wb2ludE1hcDtlLnByb2plY3Rpb25NYXRyaXguY29weSh0aGlzLmNhbWVyYS5wcm9qZWN0aW9uTWF0cml4KTthKFwiY1wiLDAsMCwtMSk7YShcInRcIiwwLDAsMSk7YShcIm4xXCIsLTEsLTEsLTEpO2EoXCJuMlwiLDEsLTEsLTEpO2EoXCJuM1wiLC0xLDEsLTEpO2EoXCJuNFwiLDEsXG4gICAgMSwtMSk7YShcImYxXCIsLTEsLTEsMSk7YShcImYyXCIsMSwtMSwxKTthKFwiZjNcIiwtMSwxLDEpO2EoXCJmNFwiLDEsMSwxKTthKFwidTFcIiwuNywxLjEsLTEpO2EoXCJ1MlwiLC0uNywxLjEsLTEpO2EoXCJ1M1wiLDAsMiwtMSk7YShcImNmMVwiLC0xLDAsMSk7YShcImNmMlwiLDEsMCwxKTthKFwiY2YzXCIsMCwtMSwxKTthKFwiY2Y0XCIsMCwxLDEpO2EoXCJjbjFcIiwtMSwwLC0xKTthKFwiY24yXCIsMSwwLC0xKTthKFwiY24zXCIsMCwtMSwtMSk7YShcImNuNFwiLDAsMSwtMSk7Yi5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKS5uZWVkc1VwZGF0ZT0hMH19KCk7R2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWC5wcm90b3R5cGUpO0diLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1HYjtHYi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFhhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDAhPT1iJiZjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3hIZWxwZXI6IC51cGRhdGUoKSBoYXMgbm8gbG9uZ2VyIGFyZ3VtZW50cy5cIik7XG4gICAgdm9pZCAwIT09dGhpcy5vYmplY3QmJmEuc2V0RnJvbU9iamVjdCh0aGlzLm9iamVjdCk7aWYoIWEuaXNFbXB0eSgpKXtiPWEubWluO3ZhciBjPWEubWF4LGQ9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLGU9ZC5hcnJheTtlWzBdPWMueDtlWzFdPWMueTtlWzJdPWMuejtlWzNdPWIueDtlWzRdPWMueTtlWzVdPWMuejtlWzZdPWIueDtlWzddPWIueTtlWzhdPWMuejtlWzldPWMueDtlWzEwXT1iLnk7ZVsxMV09Yy56O2VbMTJdPWMueDtlWzEzXT1jLnk7ZVsxNF09Yi56O2VbMTVdPWIueDtlWzE2XT1jLnk7ZVsxN109Yi56O2VbMThdPWIueDtlWzE5XT1iLnk7ZVsyMF09Yi56O2VbMjFdPWMueDtlWzIyXT1iLnk7ZVsyM109Yi56O2QubmVlZHNVcGRhdGU9ITA7dGhpcy5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKX19fSgpO0diLnByb3RvdHlwZS5zZXRGcm9tT2JqZWN0PWZ1bmN0aW9uKGEpe3RoaXMub2JqZWN0PWE7dGhpcy51cGRhdGUoKTtyZXR1cm4gdGhpc307XG4gICAgbGQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWC5wcm90b3R5cGUpO2xkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1sZDtsZC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5ib3g7Yi5pc0VtcHR5KCl8fChiLmdldENlbnRlcih0aGlzLnBvc2l0aW9uKSxiLmdldFNpemUodGhpcy5zY2FsZSksdGhpcy5zY2FsZS5tdWx0aXBseVNjYWxhciguNSkseC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLGEpKX07bWQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoc2EucHJvdG90eXBlKTttZC5wcm90b3R5cGUuY29uc3RydWN0b3I9bWQ7bWQucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkPWZ1bmN0aW9uKGEpe3ZhciBiPS10aGlzLnBsYW5lLmNvbnN0YW50OzFFLTg+TWF0aC5hYnMoYikmJihiPTFFLTgpO3RoaXMuc2NhbGUuc2V0KC41KnRoaXMuc2l6ZSwuNSp0aGlzLnNpemUsYik7dGhpcy5sb29rQXQodGhpcy5wbGFuZS5ub3JtYWwpO1xuICAgIHgucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxhKX07dmFyIFNkLENlO0hiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKTtIYi5wcm90b3R5cGUuY29uc3RydWN0b3I9SGI7SGIucHJvdG90eXBlLnNldERpcmVjdGlvbj1mdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI7cmV0dXJuIGZ1bmN0aW9uKGMpey45OTk5OTxjLnk/dGhpcy5xdWF0ZXJuaW9uLnNldCgwLDAsMCwxKTotLjk5OTk5PmMueT90aGlzLnF1YXRlcm5pb24uc2V0KDEsMCwwLDApOihhLnNldChjLnosMCwtYy54KS5ub3JtYWxpemUoKSxiPU1hdGguYWNvcyhjLnkpLHRoaXMucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKGEsYikpfX0oKTtIYi5wcm90b3R5cGUuc2V0TGVuZ3RoPWZ1bmN0aW9uKGEsYixjKXt2b2lkIDA9PT1iJiYoYj0uMiphKTt2b2lkIDA9PT1jJiYoYz0uMipiKTt0aGlzLmxpbmUuc2NhbGUuc2V0KDEsTWF0aC5tYXgoMCxhLWIpLDEpO3RoaXMubGluZS51cGRhdGVNYXRyaXgoKTtcbiAgICB0aGlzLmNvbmUuc2NhbGUuc2V0KGMsYixjKTt0aGlzLmNvbmUucG9zaXRpb24ueT1hO3RoaXMuY29uZS51cGRhdGVNYXRyaXgoKX07SGIucHJvdG90eXBlLnNldENvbG9yPWZ1bmN0aW9uKGEpe3RoaXMubGluZS5tYXRlcmlhbC5jb2xvci5jb3B5KGEpO3RoaXMuY29uZS5tYXRlcmlhbC5jb2xvci5jb3B5KGEpfTtuZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7bmQucHJvdG90eXBlLmNvbnN0cnVjdG9yPW5kO0MuY3JlYXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS5sb2coXCJUSFJFRS5DdXJ2ZS5jcmVhdGUoKSBoYXMgYmVlbiBkZXByZWNhdGVkXCIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5wcm90b3R5cGUuZ2V0UG9pbnQ9YjtyZXR1cm4gYX07T2JqZWN0LmFzc2lnbihiYi5wcm90b3R5cGUse2NyZWF0ZVBvaW50c0dlb21ldHJ5OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlUGF0aDogLmNyZWF0ZVBvaW50c0dlb21ldHJ5KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5HZW9tZXRyeSgpLnNldEZyb21Qb2ludHMoIHBvaW50cyApIGluc3RlYWQuXCIpO1xuICAgIGE9dGhpcy5nZXRQb2ludHMoYSk7cmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnkoYSl9LGNyZWF0ZVNwYWNlZFBvaW50c0dlb21ldHJ5OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlUGF0aDogLmNyZWF0ZVNwYWNlZFBvaW50c0dlb21ldHJ5KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5HZW9tZXRyeSgpLnNldEZyb21Qb2ludHMoIHBvaW50cyApIGluc3RlYWQuXCIpO2E9dGhpcy5nZXRTcGFjZWRQb2ludHMoYSk7cmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnkoYSl9LGNyZWF0ZUdlb21ldHJ5OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlUGF0aDogLmNyZWF0ZUdlb21ldHJ5KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5HZW9tZXRyeSgpLnNldEZyb21Qb2ludHMoIHBvaW50cyApIGluc3RlYWQuXCIpO2Zvcih2YXIgYj1uZXcgTCxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT1hW2NdO2IudmVydGljZXMucHVzaChuZXcgcChlLngsXG4gICAgZS55LGUuenx8MCkpfXJldHVybiBifX0pO09iamVjdC5hc3NpZ24oU2EucHJvdG90eXBlLHtmcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlBhdGg6IC5mcm9tUG9pbnRzKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbVBvaW50cygpLlwiKTt0aGlzLnNldEZyb21Qb2ludHMoYSl9fSk7dmYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoY2EucHJvdG90eXBlKTt3Zi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjYS5wcm90b3R5cGUpO0RlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGNhLnByb3RvdHlwZSk7T2JqZWN0LmFzc2lnbihEZS5wcm90b3R5cGUse2luaXRGcm9tQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU3BsaW5lOiAuaW5pdEZyb21BcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxnZXRDb250cm9sUG9pbnRzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU3BsaW5lOiAuZ2V0Q29udHJvbFBvaW50c0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LFxuICAgIHJlcGFyYW1ldHJpemVCeUFyY0xlbmd0aDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TcGxpbmU6IC5yZXBhcmFtZXRyaXplQnlBcmNMZW5ndGgoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtpZC5wcm90b3R5cGUuc2V0Q29sb3JzPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkdyaWRIZWxwZXI6IHNldENvbG9ycygpIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBhc3MgdGhlbSBpbiB0aGUgY29uc3RydWN0b3IgaW5zdGVhZC5cIil9O29jLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU2tlbGV0b25IZWxwZXI6IHVwZGF0ZSgpIG5vIGxvbmdlciBuZWVkcyB0byBiZSBjYWxsZWQuXCIpfTtPYmplY3QuYXNzaWduKGtjLnByb3RvdHlwZSx7ZXh0cmFjdFVybEJhc2U6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTG9hZGVyOiAuZXh0cmFjdFVybEJhc2UoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UoKSBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm4gSGUuZXh0cmFjdFVybEJhc2UoYSl9fSk7T2JqZWN0LmFzc2lnbihvZC5wcm90b3R5cGUse2NlbnRlcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuY2VudGVyKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Q2VudGVyKCkuXCIpO3JldHVybiB0aGlzLmdldENlbnRlcihhKX0sZW1wdHk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuXCIpO3JldHVybiB0aGlzLmlzRW1wdHkoKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmlzSW50ZXJzZWN0aW9uQm94KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0JveCgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGEpfSxzaXplOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5zaXplKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0U2l6ZSgpLlwiKTtcbiAgICByZXR1cm4gdGhpcy5nZXRTaXplKGEpfX0pO09iamVjdC5hc3NpZ24oWGEucHJvdG90eXBlLHtjZW50ZXI6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmNlbnRlcigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldENlbnRlcigpLlwiKTtyZXR1cm4gdGhpcy5nZXRDZW50ZXIoYSl9LGVtcHR5OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmVtcHR5KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaXNFbXB0eSgpLlwiKTtyZXR1cm4gdGhpcy5pc0VtcHR5KCl9LGlzSW50ZXJzZWN0aW9uQm94OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5pc0ludGVyc2VjdGlvbkJveCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNCb3goKS5cIik7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c0JveChhKX0saXNJbnRlcnNlY3Rpb25TcGhlcmU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmlzSW50ZXJzZWN0aW9uU3BoZXJlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1NwaGVyZSgpLlwiKTtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKGEpfSxzaXplOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5zaXplKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0U2l6ZSgpLlwiKTtyZXR1cm4gdGhpcy5nZXRTaXplKGEpfX0pO05iLnByb3RvdHlwZS5jZW50ZXI9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGluZTM6IC5jZW50ZXIoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRDZW50ZXIoKS5cIik7cmV0dXJuIHRoaXMuZ2V0Q2VudGVyKGEpfTtPYmplY3QuYXNzaWduKFEse3JhbmRvbTE2OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0aDogLnJhbmRvbTE2KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIE1hdGgucmFuZG9tKCkgaW5zdGVhZC5cIik7cmV0dXJuIE1hdGgucmFuZG9tKCl9LG5lYXJlc3RQb3dlck9mVHdvOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGg6IC5uZWFyZXN0UG93ZXJPZlR3bygpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmZsb29yUG93ZXJPZlR3bygpLlwiKTtcbiAgICByZXR1cm4gUS5mbG9vclBvd2VyT2ZUd28oYSl9LG5leHRQb3dlck9mVHdvOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGg6IC5uZXh0UG93ZXJPZlR3bygpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmNlaWxQb3dlck9mVHdvKCkuXCIpO3JldHVybiBRLmNlaWxQb3dlck9mVHdvKGEpfX0pO09iamVjdC5hc3NpZ24obWEucHJvdG90eXBlLHtmbGF0dGVuVG9BcnJheU9mZnNldDpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5mbGF0dGVuVG9BcnJheU9mZnNldCgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAudG9BcnJheSgpIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLnRvQXJyYXkoYSxiKX0sbXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4MyggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlNYXRyaXgzKHRoaXMpfSxcbiAgICBtdWx0aXBseVZlY3RvcjNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXgzOiAubXVsdGlwbHlWZWN0b3IzQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYXBwbHlUb0J1ZmZlcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXgzOiAuYXBwbHlUb0J1ZmZlcigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBtYXRyaXguYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZSggYXR0cmlidXRlICkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZShhKX0sYXBwbHlUb1ZlY3RvcjNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXgzOiAuYXBwbHlUb1ZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pO09iamVjdC5hc3NpZ24oTy5wcm90b3R5cGUse2V4dHJhY3RQb3NpdGlvbjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuZXh0cmFjdFBvc2l0aW9uKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuY29weVBvc2l0aW9uKCkuXCIpO1xuICAgIHJldHVybiB0aGlzLmNvcHlQb3NpdGlvbihhKX0sZmxhdHRlblRvQXJyYXlPZmZzZXQ6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuZmxhdHRlblRvQXJyYXlPZmZzZXQoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnRvQXJyYXkoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy50b0FycmF5KGEsYil9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKCl7dm9pZCAwPT09YSYmKGE9bmV3IHApO2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5nZXRQb3NpdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDMpfX0oKSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKS5cIik7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYSl9LG11bHRpcGx5VG9BcnJheTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVRvQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sbXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlNYXRyaXg0KHRoaXMpfSxtdWx0aXBseVZlY3RvcjQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yNCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcyl9LG11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxcbiAgICByb3RhdGVBeGlzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFZlY3RvcjMudHJhbnNmb3JtRGlyZWN0aW9uKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTthLnRyYW5zZm9ybURpcmVjdGlvbih0aGlzKX0sY3Jvc3NWZWN0b3I6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmNyb3NzVmVjdG9yKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC50cmFuc2xhdGUoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlWCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVZOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVZKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LFxuICAgIHJvdGF0ZVo6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVooKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlQnlBeGlzOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVCeUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYXBwbHlUb0J1ZmZlcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuYXBwbHlUb0J1ZmZlcigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBtYXRyaXguYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZSggYXR0cmlidXRlICkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZShhKX0sYXBwbHlUb1ZlY3RvcjNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAuYXBwbHlUb1ZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxtYWtlRnJ1c3R1bTpmdW5jdGlvbihhLGIsYyxkLGUsZil7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm1ha2VGcnVzdHVtKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5tYWtlUGVyc3BlY3RpdmUoIGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSwgbmVhciwgZmFyICkgaW5zdGVhZC5cIik7XG4gICAgcmV0dXJuIHRoaXMubWFrZVBlcnNwZWN0aXZlKGEsYixkLGMsZSxmKX19KTtFYS5wcm90b3R5cGUuaXNJbnRlcnNlY3Rpb25MaW5lPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlBsYW5lOiAuaXNJbnRlcnNlY3Rpb25MaW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0xpbmUoKS5cIik7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c0xpbmUoYSl9O2hhLnByb3RvdHlwZS5tdWx0aXBseVZlY3RvcjM9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUXVhdGVybmlvbjogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBpcyBub3cgdmVjdG9yLmFwcGx5UXVhdGVybmlvbiggcXVhdGVybmlvbiApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5UXVhdGVybmlvbih0aGlzKX07T2JqZWN0LmFzc2lnbihzYi5wcm90b3R5cGUse2lzSW50ZXJzZWN0aW9uQm94OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlJheTogLmlzSW50ZXJzZWN0aW9uQm94KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0JveCgpLlwiKTtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGEpfSxpc0ludGVyc2VjdGlvblBsYW5lOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlJheTogLmlzSW50ZXJzZWN0aW9uUGxhbmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzUGxhbmUoKS5cIik7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1BsYW5lKGEpfSxpc0ludGVyc2VjdGlvblNwaGVyZTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvblNwaGVyZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNTcGhlcmUoKS5cIik7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShhKX19KTtPYmplY3QuYXNzaWduKGpiLnByb3RvdHlwZSx7ZXh0cmFjdEFsbFBvaW50czpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFwZTogLmV4dHJhY3RBbGxQb2ludHMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLmV4dHJhY3RQb2ludHMoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy5leHRyYWN0UG9pbnRzKGEpfSxcbiAgICBleHRydWRlOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlOiAuZXh0cnVkZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFeHRydWRlR2VvbWV0cnkoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IGliKHRoaXMsYSl9LG1ha2VHZW9tZXRyeTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFwZTogLm1ha2VHZW9tZXRyeSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBTaGFwZUdlb21ldHJ5KCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyB4Yih0aGlzLGEpfX0pO09iamVjdC5hc3NpZ24oRC5wcm90b3R5cGUse2Zyb21BdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5mcm9tQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKTtyZXR1cm4gdGhpcy5mcm9tQnVmZmVyQXR0cmlidXRlKGEsYixjKX0sZGlzdGFuY2VUb01hbmhhdHRhbjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuZGlzdGFuY2VUb01hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkRpc3RhbmNlVG8oKS5cIik7XG4gICAgcmV0dXJuIHRoaXMubWFuaGF0dGFuRGlzdGFuY2VUbyhhKX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLmxlbmd0aE1hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkxlbmd0aCgpLlwiKTtyZXR1cm4gdGhpcy5tYW5oYXR0YW5MZW5ndGgoKX19KTtPYmplY3QuYXNzaWduKHAucHJvdG90eXBlLHtzZXRFdWxlckZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5WZWN0b3IzOiAuc2V0RXVsZXJGcm9tUm90YXRpb25NYXRyaXgoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgRXVsZXIuc2V0RnJvbVJvdGF0aW9uTWF0cml4KCkgaW5zdGVhZC5cIil9LHNldEV1bGVyRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuVmVjdG9yMzogLnNldEV1bGVyRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgRXVsZXIuc2V0RnJvbVF1YXRlcm5pb24oKSBpbnN0ZWFkLlwiKX0sXG4gICAgZ2V0UG9zaXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5nZXRQb3NpdGlvbkZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4UG9zaXRpb24oKS5cIik7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEpfSxnZXRTY2FsZUZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmdldFNjYWxlRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhTY2FsZSgpLlwiKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4U2NhbGUoYSl9LGdldENvbHVtbkZyb21NYXRyaXg6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZ2V0Q29sdW1uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhDb2x1bW4oKS5cIik7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihiLFxuICAgIGEpfSxhcHBseVByb2plY3Rpb246ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmFwcGx5UHJvamVjdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuYXBwbHlNYXRyaXg0KCBtICkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KGEpfSxmcm9tQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZnJvbUF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIik7cmV0dXJuIHRoaXMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShhLGIsYyl9LGRpc3RhbmNlVG9NYW5oYXR0YW46ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmRpc3RhbmNlVG9NYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5EaXN0YW5jZVRvKCkuXCIpO3JldHVybiB0aGlzLm1hbmhhdHRhbkRpc3RhbmNlVG8oYSl9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5sZW5ndGhNYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5MZW5ndGgoKS5cIik7XG4gICAgcmV0dXJuIHRoaXMubWFuaGF0dGFuTGVuZ3RoKCl9fSk7T2JqZWN0LmFzc2lnbihhYS5wcm90b3R5cGUse2Zyb21BdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IC5mcm9tQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKTtyZXR1cm4gdGhpcy5mcm9tQnVmZmVyQXR0cmlidXRlKGEsYixjKX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLmxlbmd0aE1hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkxlbmd0aCgpLlwiKTtyZXR1cm4gdGhpcy5tYW5oYXR0YW5MZW5ndGgoKX19KTtMLnByb3RvdHlwZS5jb21wdXRlVGFuZ2VudHM9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5HZW9tZXRyeTogLmNvbXB1dGVUYW5nZW50cygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfTtPYmplY3QuYXNzaWduKHgucHJvdG90eXBlLFxuICAgIHtnZXRDaGlsZEJ5TmFtZTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmdldENoaWxkQnlOYW1lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0T2JqZWN0QnlOYW1lKCkuXCIpO3JldHVybiB0aGlzLmdldE9iamVjdEJ5TmFtZShhKX0scmVuZGVyRGVwdGg6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnJlbmRlckRlcHRoIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAucmVuZGVyT3JkZXIsIGluc3RlYWQuXCIpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnRyYW5zbGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAudHJhbnNsYXRlT25BeGlzKCBheGlzLCBkaXN0YW5jZSApIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhiLGEpfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHgucHJvdG90eXBlLHtldWxlck9yZGVyOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmV1bGVyT3JkZXIgaXMgbm93IC5yb3RhdGlvbi5vcmRlci5cIik7XG4gICAgcmV0dXJuIHRoaXMucm90YXRpb24ub3JkZXJ9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmV1bGVyT3JkZXIgaXMgbm93IC5yb3RhdGlvbi5vcmRlci5cIik7dGhpcy5yb3RhdGlvbi5vcmRlcj1hfX0sdXNlUXVhdGVybmlvbjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC51c2VRdWF0ZXJuaW9uIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSBsaWJyYXJ5IG5vdyB1c2VzIHF1YXRlcm5pb25zIGJ5IGRlZmF1bHQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKERjLnByb3RvdHlwZSx7b2JqZWN0czp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTE9EOiAub2JqZWN0cyBoYXMgYmVlbiByZW5hbWVkIHRvIC5sZXZlbHMuXCIpO1xuICAgIHJldHVybiB0aGlzLmxldmVsc319fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KEVjLnByb3RvdHlwZSxcInVzZVZlcnRleFRleHR1cmVcIix7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2tlbGV0b246IHVzZVZlcnRleFRleHR1cmUgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlNrZWxldG9uOiB1c2VWZXJ0ZXhUZXh0dXJlIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShDLnByb3RvdHlwZSxcIl9fYXJjTGVuZ3RoRGl2aXNpb25zXCIse2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiAuX19hcmNMZW5ndGhEaXZpc2lvbnMgaXMgbm93IC5hcmNMZW5ndGhEaXZpc2lvbnMuXCIpO3JldHVybiB0aGlzLmFyY0xlbmd0aERpdmlzaW9uc30sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiAuX19hcmNMZW5ndGhEaXZpc2lvbnMgaXMgbm93IC5hcmNMZW5ndGhEaXZpc2lvbnMuXCIpO1xuICAgIHRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zPWF9fSk7YmEucHJvdG90eXBlLnNldExlbnM9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYS5zZXRMZW5zIGlzIGRlcHJlY2F0ZWQuIFVzZSAuc2V0Rm9jYWxMZW5ndGggYW5kIC5maWxtR2F1Z2UgZm9yIGEgcGhvdG9ncmFwaGljIHNldHVwLlwiKTt2b2lkIDAhPT1iJiYodGhpcy5maWxtR2F1Z2U9Yik7dGhpcy5zZXRGb2NhbExlbmd0aChhKX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZGEucHJvdG90eXBlLHtvbmx5U2hhZG93OntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLm9ubHlTaGFkb3cgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSxzaGFkb3dDYW1lcmFGb3Y6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUZvdiBpcyBub3cgLnNoYWRvdy5jYW1lcmEuZm92LlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEuZm92PWF9fSxcbiAgICBzaGFkb3dDYW1lcmFMZWZ0OntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFMZWZ0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5sZWZ0LlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEubGVmdD1hfX0sc2hhZG93Q2FtZXJhUmlnaHQ6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVJpZ2h0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5yaWdodC5cIik7dGhpcy5zaGFkb3cuY2FtZXJhLnJpZ2h0PWF9fSxzaGFkb3dDYW1lcmFUb3A6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVRvcCBpcyBub3cgLnNoYWRvdy5jYW1lcmEudG9wLlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEudG9wPWF9fSxzaGFkb3dDYW1lcmFCb3R0b206e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUJvdHRvbSBpcyBub3cgLnNoYWRvdy5jYW1lcmEuYm90dG9tLlwiKTtcbiAgICB0aGlzLnNoYWRvdy5jYW1lcmEuYm90dG9tPWF9fSxzaGFkb3dDYW1lcmFOZWFyOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFOZWFyIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5uZWFyLlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEubmVhcj1hfX0sc2hhZG93Q2FtZXJhRmFyOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFGYXIgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmZhci5cIik7dGhpcy5zaGFkb3cuY2FtZXJhLmZhcj1hfX0sc2hhZG93Q2FtZXJhVmlzaWJsZTp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFWaXNpYmxlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuQ2FtZXJhSGVscGVyKCBsaWdodC5zaGFkb3cuY2FtZXJhICkgaW5zdGVhZC5cIil9fSxzaGFkb3dCaWFzOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dCaWFzIGlzIG5vdyAuc2hhZG93LmJpYXMuXCIpO1xuICAgIHRoaXMuc2hhZG93LmJpYXM9YX19LHNoYWRvd0RhcmtuZXNzOntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0RhcmtuZXNzIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sc2hhZG93TWFwV2lkdGg6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd01hcFdpZHRoIGlzIG5vdyAuc2hhZG93Lm1hcFNpemUud2lkdGguXCIpO3RoaXMuc2hhZG93Lm1hcFNpemUud2lkdGg9YX19LHNoYWRvd01hcEhlaWdodDp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93TWFwSGVpZ2h0IGlzIG5vdyAuc2hhZG93Lm1hcFNpemUuaGVpZ2h0LlwiKTt0aGlzLnNoYWRvdy5tYXBTaXplLmhlaWdodD1hfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhNLnByb3RvdHlwZSx7bGVuZ3RoOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IC5sZW5ndGggaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5jb3VudCBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm4gdGhpcy5hcnJheS5sZW5ndGh9fX0pO09iamVjdC5hc3NpZ24oRS5wcm90b3R5cGUse2FkZEluZGV4OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkSW5kZXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRJbmRleCgpLlwiKTt0aGlzLnNldEluZGV4KGEpfSxhZGREcmF3Q2FsbDpmdW5jdGlvbihhLGIsYyl7dm9pZCAwIT09YyYmY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGREcmF3Q2FsbCgpIG5vIGxvbmdlciBzdXBwb3J0cyBpbmRleE9mZnNldC5cIik7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGREcmF3Q2FsbCgpIGlzIG5vdyAuYWRkR3JvdXAoKS5cIik7dGhpcy5hZGRHcm91cChhLGIpfSxjbGVhckRyYXdDYWxsczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY2xlYXJEcmF3Q2FsbHMoKSBpcyBub3cgLmNsZWFyR3JvdXBzKCkuXCIpO1xuICAgIHRoaXMuY2xlYXJHcm91cHMoKX0sY29tcHV0ZVRhbmdlbnRzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5jb21wdXRlVGFuZ2VudHMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sY29tcHV0ZU9mZnNldHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNvbXB1dGVPZmZzZXRzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRS5wcm90b3R5cGUse2RyYXdjYWxsczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuZHJhd2NhbGxzIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdyb3Vwcy5cIik7cmV0dXJuIHRoaXMuZ3JvdXBzfX0sb2Zmc2V0czp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5vZmZzZXRzIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdyb3Vwcy5cIik7cmV0dXJuIHRoaXMuZ3JvdXBzfX19KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhRZC5wcm90b3R5cGUse2R5bmFtaWM6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlVuaWZvcm06IC5keW5hbWljIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBvYmplY3Qub25CZWZvcmVSZW5kZXIoKSBpbnN0ZWFkLlwiKX19LG9uVXBkYXRlOnt2YWx1ZTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlVuaWZvcm06IC5vblVwZGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBvYmplY3Qub25CZWZvcmVSZW5kZXIoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpc319fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUC5wcm90b3R5cGUse3dyYXBBcm91bmQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAud3JhcEFyb3VuZCBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6IC53cmFwQXJvdW5kIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sXG4gICAgd3JhcFJHQjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6IC53cmFwUkdCIGhhcyBiZWVuIHJlbW92ZWQuXCIpO3JldHVybiBuZXcgSH19LHNoYWRpbmc6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zaGFkaW5nIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB0aGUgYm9vbGVhbiAuZmxhdFNoYWRpbmcgaW5zdGVhZC5cIil9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zaGFkaW5nIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB0aGUgYm9vbGVhbiAuZmxhdFNoYWRpbmcgaW5zdGVhZC5cIik7dGhpcy5mbGF0U2hhZGluZz0xPT09YX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTWEucHJvdG90eXBlLHttZXRhbDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw6IC5tZXRhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwgaW5zdGVhZC5cIik7XG4gICAgcmV0dXJuITF9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsOiAubWV0YWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsIGluc3RlYWRcIil9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEZhLnByb3RvdHlwZSx7ZGVyaXZhdGl2ZXM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlNoYWRlck1hdGVyaWFsOiAuZGVyaXZhdGl2ZXMgaGFzIGJlZW4gbW92ZWQgdG8gLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXMuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXN9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS4gU2hhZGVyTWF0ZXJpYWw6IC5kZXJpdmF0aXZlcyBoYXMgYmVlbiBtb3ZlZCB0byAuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcy5cIik7dGhpcy5leHRlbnNpb25zLmRlcml2YXRpdmVzPWF9fX0pO09iamVjdC5hc3NpZ24oY2UucHJvdG90eXBlLFxuICAgIHtnZXRDdXJyZW50UmVuZGVyVGFyZ2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdldEN1cnJlbnRSZW5kZXJUYXJnZXQoKSBpcyBub3cgLmdldFJlbmRlclRhcmdldCgpLlwiKTtyZXR1cm4gdGhpcy5nZXRSZW5kZXJUYXJnZXQoKX0sZ2V0TWF4QW5pc290cm9weTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nZXRNYXhBbmlzb3Ryb3B5KCkgaXMgbm93IC5jYXBhYmlsaXRpZXMuZ2V0TWF4QW5pc290cm9weSgpLlwiKTtyZXR1cm4gdGhpcy5jYXBhYmlsaXRpZXMuZ2V0TWF4QW5pc290cm9weSgpfSxnZXRQcmVjaXNpb246ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0UHJlY2lzaW9uKCkgaXMgbm93IC5jYXBhYmlsaXRpZXMucHJlY2lzaW9uLlwiKTtyZXR1cm4gdGhpcy5jYXBhYmlsaXRpZXMucHJlY2lzaW9ufSxyZXNldEdMU3RhdGU6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAucmVzZXRHTFN0YXRlKCkgaXMgbm93IC5zdGF0ZS5yZXNldCgpLlwiKTtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5yZXNldCgpfSxzdXBwb3J0c0Zsb2F0VGV4dHVyZXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNGbG9hdFRleHR1cmVzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ09FU190ZXh0dXJlX2Zsb2F0JyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpfSxzdXBwb3J0c0hhbGZGbG9hdFRleHR1cmVzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSGFsZkZsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcgKS5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIpfSxzdXBwb3J0c1N0YW5kYXJkRGVyaXZhdGl2ZXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNTdGFuZGFyZERlcml2YXRpdmVzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcycgKS5cIik7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXNcIil9LHN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVTM1RDOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVTM1RDKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfSxzdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUFZSVEM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVBWUlRDKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycgKS5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIil9LFxuICAgIHN1cHBvcnRzQmxlbmRNaW5NYXg6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNCbGVuZE1pbk1heCgpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdFWFRfYmxlbmRfbWlubWF4JyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIkVYVF9ibGVuZF9taW5tYXhcIil9LHN1cHBvcnRzVmVydGV4VGV4dHVyZXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcygpIGlzIG5vdyAuY2FwYWJpbGl0aWVzLnZlcnRleFRleHR1cmVzLlwiKTtyZXR1cm4gdGhpcy5jYXBhYmlsaXRpZXMudmVydGV4VGV4dHVyZXN9LHN1cHBvcnRzSW5zdGFuY2VkQXJyYXlzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSW5zdGFuY2VkQXJyYXlzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnICkuXCIpO1xuICAgIHJldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKX0sZW5hYmxlU2Npc3NvclRlc3Q6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmVuYWJsZVNjaXNzb3JUZXN0KCkgaXMgbm93IC5zZXRTY2lzc29yVGVzdCgpLlwiKTt0aGlzLnNldFNjaXNzb3JUZXN0KGEpfSxpbml0TWF0ZXJpYWw6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuaW5pdE1hdGVyaWFsKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFkZFByZVBsdWdpbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5hZGRQcmVQbHVnaW4oKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYWRkUG9zdFBsdWdpbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5hZGRQb3N0UGx1Z2luKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHVwZGF0ZVNoYWRvd01hcDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC51cGRhdGVTaGFkb3dNYXAoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjZS5wcm90b3R5cGUse3NoYWRvd01hcEVuYWJsZWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd01hcC5lbmFibGVkfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEVuYWJsZWQgaXMgbm93IC5zaGFkb3dNYXAuZW5hYmxlZC5cIik7dGhpcy5zaGFkb3dNYXAuZW5hYmxlZD1hfX0sc2hhZG93TWFwVHlwZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLnR5cGV9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwVHlwZSBpcyBub3cgLnNoYWRvd01hcC50eXBlLlwiKTt0aGlzLnNoYWRvd01hcC50eXBlPWF9fSxzaGFkb3dNYXBDdWxsRmFjZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLmN1bGxGYWNlfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEN1bGxGYWNlIGlzIG5vdyAuc2hhZG93TWFwLmN1bGxGYWNlLlwiKTtcbiAgICB0aGlzLnNoYWRvd01hcC5jdWxsRmFjZT1hfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhVZS5wcm90b3R5cGUse2N1bGxGYWNlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJSZXZlcnNlU2lkZWQ/MjoxfSxzZXQ6ZnVuY3Rpb24oYSl7YT0xIT09YTtjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwLmN1bGxGYWNlIGlzIGRlcHJlY2F0ZWQuIFNldCAuc2hhZG93TWFwLnJlbmRlclJldmVyc2VTaWRlZCB0byBcIithK1wiLlwiKTt0aGlzLnJlbmRlclJldmVyc2VTaWRlZD1hfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhrYi5wcm90b3R5cGUse3dyYXBTOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBTIGlzIG5vdyAudGV4dHVyZS53cmFwUy5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS53cmFwU30sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFMgaXMgbm93IC50ZXh0dXJlLndyYXBTLlwiKTtcbiAgICB0aGlzLnRleHR1cmUud3JhcFM9YX19LHdyYXBUOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBUIGlzIG5vdyAudGV4dHVyZS53cmFwVC5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS53cmFwVH0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFQgaXMgbm93IC50ZXh0dXJlLndyYXBULlwiKTt0aGlzLnRleHR1cmUud3JhcFQ9YX19LG1hZ0ZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5tYWdGaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1hZ0ZpbHRlci5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5tYWdGaWx0ZXJ9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1hZ0ZpbHRlciBpcyBub3cgLnRleHR1cmUubWFnRmlsdGVyLlwiKTt0aGlzLnRleHR1cmUubWFnRmlsdGVyPVxuICAgIGF9fSxtaW5GaWx0ZXI6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWluRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5taW5GaWx0ZXIuXCIpO3JldHVybiB0aGlzLnRleHR1cmUubWluRmlsdGVyfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5taW5GaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1pbkZpbHRlci5cIik7dGhpcy50ZXh0dXJlLm1pbkZpbHRlcj1hfX0sYW5pc290cm9weTp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5hbmlzb3Ryb3B5IGlzIG5vdyAudGV4dHVyZS5hbmlzb3Ryb3B5LlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLmFuaXNvdHJvcHl9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmFuaXNvdHJvcHkgaXMgbm93IC50ZXh0dXJlLmFuaXNvdHJvcHkuXCIpO3RoaXMudGV4dHVyZS5hbmlzb3Ryb3B5PVxuICAgIGF9fSxvZmZzZXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAub2Zmc2V0IGlzIG5vdyAudGV4dHVyZS5vZmZzZXQuXCIpO3JldHVybiB0aGlzLnRleHR1cmUub2Zmc2V0fSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5vZmZzZXQgaXMgbm93IC50ZXh0dXJlLm9mZnNldC5cIik7dGhpcy50ZXh0dXJlLm9mZnNldD1hfX0scmVwZWF0OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnJlcGVhdCBpcyBub3cgLnRleHR1cmUucmVwZWF0LlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLnJlcGVhdH0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAucmVwZWF0IGlzIG5vdyAudGV4dHVyZS5yZXBlYXQuXCIpO3RoaXMudGV4dHVyZS5yZXBlYXQ9YX19LGZvcm1hdDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5mb3JtYXQgaXMgbm93IC50ZXh0dXJlLmZvcm1hdC5cIik7XG4gICAgcmV0dXJuIHRoaXMudGV4dHVyZS5mb3JtYXR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmZvcm1hdCBpcyBub3cgLnRleHR1cmUuZm9ybWF0LlwiKTt0aGlzLnRleHR1cmUuZm9ybWF0PWF9fSx0eXBlOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnR5cGUgaXMgbm93IC50ZXh0dXJlLnR5cGUuXCIpO3JldHVybiB0aGlzLnRleHR1cmUudHlwZX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAudHlwZSBpcyBub3cgLnRleHR1cmUudHlwZS5cIik7dGhpcy50ZXh0dXJlLnR5cGU9YX19LGdlbmVyYXRlTWlwbWFwczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5nZW5lcmF0ZU1pcG1hcHMgaXMgbm93IC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcy5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHN9LFxuICAgIHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmdlbmVyYXRlTWlwbWFwcyBpcyBub3cgLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzLlwiKTt0aGlzLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPWF9fX0pO09iamVjdC5hc3NpZ24oYmUucHJvdG90eXBlLHtnZXRTdGFuZGluZ01hdHJpeDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYlZSTWFuYWdlcjogLmdldFN0YW5kaW5nTWF0cml4KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYmUucHJvdG90eXBlLHtzdGFuZGluZzp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViVlJNYW5hZ2VyOiAuc3RhbmRpbmcgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fX0pO2xjLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiAubG9hZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuQXVkaW9Mb2FkZXIgaW5zdGVhZC5cIik7XG4gICAgdmFyIGI9dGhpczsobmV3IHFlKS5sb2FkKGEsZnVuY3Rpb24oYSl7Yi5zZXRCdWZmZXIoYSl9KTtyZXR1cm4gdGhpc307dWUucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpb0FuYWx5c2VyOiAuZ2V0RGF0YSgpIGlzIG5vdyAuZ2V0RnJlcXVlbmN5RGF0YSgpLlwiKTtyZXR1cm4gdGhpcy5nZXRGcmVxdWVuY3lEYXRhKCl9O2ZkLnByb3RvdHlwZS51cGRhdGVDdWJlTWFwPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3ViZUNhbWVyYTogLnVwZGF0ZUN1YmVNYXAoKSBpcyBub3cgLnVwZGF0ZSgpLlwiKTtyZXR1cm4gdGhpcy51cGRhdGUoYSxiKX07bC5XZWJHTFJlbmRlclRhcmdldEN1YmU9SmI7bC5XZWJHTFJlbmRlclRhcmdldD1rYjtsLldlYkdMUmVuZGVyZXI9Y2U7bC5TaGFkZXJMaWI9dGI7bC5Vbmlmb3Jtc0xpYj1LO2wuVW5pZm9ybXNVdGlscz1HYTtsLlNoYWRlckNodW5rPVI7bC5Gb2dFeHAyPVBiO2wuRm9nPVFiO1xuICAgIGwuU2NlbmU9dmQ7bC5MZW5zRmxhcmU9ZGU7bC5TcHJpdGU9Q2M7bC5MT0Q9RGM7bC5Ta2lubmVkTWVzaD14ZDtsLlNrZWxldG9uPUVjO2wuQm9uZT13ZDtsLk1lc2g9cmE7bC5MaW5lU2VnbWVudHM9WDtsLkxpbmVMb29wPXlkO2wuTGluZT1zYTtsLlBvaW50cz1SYjtsLkdyb3VwPUZjO2wuVmlkZW9UZXh0dXJlPWVlO2wuRGF0YVRleHR1cmU9bGI7bC5Db21wcmVzc2VkVGV4dHVyZT1TYjtsLkN1YmVUZXh0dXJlPWRiO2wuQ2FudmFzVGV4dHVyZT10YztsLkRlcHRoVGV4dHVyZT1HYztsLlRleHR1cmU9VTtsLkNvbXByZXNzZWRUZXh0dXJlTG9hZGVyPWdmO2wuRGF0YVRleHR1cmVMb2FkZXI9aWU7bC5DdWJlVGV4dHVyZUxvYWRlcj1qZTtsLlRleHR1cmVMb2FkZXI9QWQ7bC5PYmplY3RMb2FkZXI9amY7bC5NYXRlcmlhbExvYWRlcj1QZDtsLkJ1ZmZlckdlb21ldHJ5TG9hZGVyPWxlO2wuRGVmYXVsdExvYWRpbmdNYW5hZ2VyPXhhO2wuTG9hZGluZ01hbmFnZXI9aGU7bC5KU09OTG9hZGVyPVxuICAgIG1lO2wuSW1hZ2VMb2FkZXI9YWQ7bC5JbWFnZUJpdG1hcExvYWRlcj1uZTtsLkZvbnRMb2FkZXI9a2Y7bC5GaWxlTG9hZGVyPU5hO2wuTG9hZGVyPWtjO2wuTG9hZGVyVXRpbHM9SGU7bC5DYWNoZT1JYjtsLkF1ZGlvTG9hZGVyPXFlO2wuU3BvdExpZ2h0U2hhZG93PUNkO2wuU3BvdExpZ2h0PURkO2wuUG9pbnRMaWdodD1FZDtsLlJlY3RBcmVhTGlnaHQ9SWQ7bC5IZW1pc3BoZXJlTGlnaHQ9QmQ7bC5EaXJlY3Rpb25hbExpZ2h0U2hhZG93PUZkO2wuRGlyZWN0aW9uYWxMaWdodD1HZDtsLkFtYmllbnRMaWdodD1IZDtsLkxpZ2h0U2hhZG93PUZiO2wuTGlnaHQ9ZGE7bC5TdGVyZW9DYW1lcmE9bGY7bC5QZXJzcGVjdGl2ZUNhbWVyYT1iYTtsLk9ydGhvZ3JhcGhpY0NhbWVyYT1MYjtsLkN1YmVDYW1lcmE9ZmQ7bC5BcnJheUNhbWVyYT11ZDtsLkNhbWVyYT1UYTtsLkF1ZGlvTGlzdGVuZXI9cmU7bC5Qb3NpdGlvbmFsQXVkaW89dGU7bC5BdWRpb0NvbnRleHQ9c2U7bC5BdWRpb0FuYWx5c2VyPVxuICAgIHVlO2wuQXVkaW89bGM7bC5WZWN0b3JLZXlmcmFtZVRyYWNrPWpjO2wuU3RyaW5nS2V5ZnJhbWVUcmFjaz1KZDtsLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrPWRkO2wuTnVtYmVyS2V5ZnJhbWVUcmFjaz1pYztsLkNvbG9yS2V5ZnJhbWVUcmFjaz1NZDtsLkJvb2xlYW5LZXlmcmFtZVRyYWNrPUtkO2wuUHJvcGVydHlNaXhlcj12ZTtsLlByb3BlcnR5QmluZGluZz1xYTtsLktleWZyYW1lVHJhY2s9VDtsLkFuaW1hdGlvblV0aWxzPWdhO2wuQW5pbWF0aW9uT2JqZWN0R3JvdXA9bmY7bC5BbmltYXRpb25NaXhlcj13ZTtsLkFuaW1hdGlvbkNsaXA9Q2E7bC5Vbmlmb3JtPVFkO2wuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk9eGU7bC5CdWZmZXJHZW9tZXRyeT1FO2wuR2VvbWV0cnk9TDtsLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlPXllO2wuSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI9emU7bC5JbnRlcmxlYXZlZEJ1ZmZlcj1tYztsLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZT1BZTtcbiAgICBsLkZhY2UzPVlhO2wuT2JqZWN0M0Q9eDtsLlJheWNhc3Rlcj1wZjtsLkxheWVycz1XZDtsLkV2ZW50RGlzcGF0Y2hlcj16YTtsLkNsb2NrPXJmO2wuUXVhdGVybmlvbkxpbmVhckludGVycG9sYW50PUxkO2wuTGluZWFySW50ZXJwb2xhbnQ9ZWQ7bC5EaXNjcmV0ZUludGVycG9sYW50PU9kO2wuQ3ViaWNJbnRlcnBvbGFudD1OZDtsLkludGVycG9sYW50PXBhO2wuVHJpYW5nbGU9WmE7bC5NYXRoPVE7bC5TcGhlcmljYWw9c2Y7bC5DeWxpbmRyaWNhbD10ZjtsLlBsYW5lPUVhO2wuRnJ1c3R1bT1yZDtsLlNwaGVyZT1JYTtsLlJheT1zYjtsLk1hdHJpeDQ9TztsLk1hdHJpeDM9bWE7bC5Cb3gzPVhhO2wuQm94Mj1vZDtsLkxpbmUzPU5iO2wuRXVsZXI9Z2I7bC5WZWN0b3I0PWFhO2wuVmVjdG9yMz1wO2wuVmVjdG9yMj1EO2wuUXVhdGVybmlvbj1oYTtsLkNvbG9yPUg7bC5JbW1lZGlhdGVSZW5kZXJPYmplY3Q9Z2Q7bC5WZXJ0ZXhOb3JtYWxzSGVscGVyPWhkO2wuU3BvdExpZ2h0SGVscGVyPVxuICAgIG5jO2wuU2tlbGV0b25IZWxwZXI9b2M7bC5Qb2ludExpZ2h0SGVscGVyPXBjO2wuUmVjdEFyZWFMaWdodEhlbHBlcj1xYztsLkhlbWlzcGhlcmVMaWdodEhlbHBlcj1yYztsLkdyaWRIZWxwZXI9aWQ7bC5Qb2xhckdyaWRIZWxwZXI9UmQ7bC5GYWNlTm9ybWFsc0hlbHBlcj1qZDtsLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXI9c2M7bC5DYW1lcmFIZWxwZXI9a2Q7bC5Cb3hIZWxwZXI9R2I7bC5Cb3gzSGVscGVyPWxkO2wuUGxhbmVIZWxwZXI9bWQ7bC5BcnJvd0hlbHBlcj1IYjtsLkF4ZXNIZWxwZXI9bmQ7bC5TaGFwZT1qYjtsLlBhdGg9U2E7bC5TaGFwZVBhdGg9b2U7bC5Gb250PXBlO2wuQ3VydmVQYXRoPWJiO2wuQ3VydmU9QztsLlNoYXBlVXRpbHM9JGE7bC5TY2VuZVV0aWxzPXtjcmVhdGVNdWx0aU1hdGVyaWFsT2JqZWN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPW5ldyBGYyxkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKWMuYWRkKG5ldyByYShhLGJbZF0pKTtyZXR1cm4gY30sZGV0YWNoOmZ1bmN0aW9uKGEsXG4gICAgYixjKXthLmFwcGx5TWF0cml4KGIubWF0cml4V29ybGQpO2IucmVtb3ZlKGEpO2MuYWRkKGEpfSxhdHRhY2g6ZnVuY3Rpb24oYSxiLGMpe2EuYXBwbHlNYXRyaXgoKG5ldyBPKS5nZXRJbnZlcnNlKGMubWF0cml4V29ybGQpKTtiLnJlbW92ZShhKTtjLmFkZChhKX19O2wuV2ViR0xVdGlscz1hZjtsLldpcmVmcmFtZUdlb21ldHJ5PVRiO2wuUGFyYW1ldHJpY0dlb21ldHJ5PUhjO2wuUGFyYW1ldHJpY0J1ZmZlckdlb21ldHJ5PVViO2wuVGV0cmFoZWRyb25HZW9tZXRyeT1KYztsLlRldHJhaGVkcm9uQnVmZmVyR2VvbWV0cnk9VmI7bC5PY3RhaGVkcm9uR2VvbWV0cnk9S2M7bC5PY3RhaGVkcm9uQnVmZmVyR2VvbWV0cnk9dWI7bC5JY29zYWhlZHJvbkdlb21ldHJ5PUxjO2wuSWNvc2FoZWRyb25CdWZmZXJHZW9tZXRyeT1XYjtsLkRvZGVjYWhlZHJvbkdlb21ldHJ5PU1jO2wuRG9kZWNhaGVkcm9uQnVmZmVyR2VvbWV0cnk9WGI7bC5Qb2x5aGVkcm9uR2VvbWV0cnk9SWM7bC5Qb2x5aGVkcm9uQnVmZmVyR2VvbWV0cnk9XG4gICAgamE7bC5UdWJlR2VvbWV0cnk9TmM7bC5UdWJlQnVmZmVyR2VvbWV0cnk9WWI7bC5Ub3J1c0tub3RHZW9tZXRyeT1PYztsLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5PVpiO2wuVG9ydXNHZW9tZXRyeT1QYztsLlRvcnVzQnVmZmVyR2VvbWV0cnk9JGI7bC5UZXh0R2VvbWV0cnk9VWM7bC5UZXh0QnVmZmVyR2VvbWV0cnk9YWM7bC5TcGhlcmVHZW9tZXRyeT1WYztsLlNwaGVyZUJ1ZmZlckdlb21ldHJ5PXdiO2wuUmluZ0dlb21ldHJ5PVdjO2wuUmluZ0J1ZmZlckdlb21ldHJ5PWJjO2wuUGxhbmVHZW9tZXRyeT1BYztsLlBsYW5lQnVmZmVyR2VvbWV0cnk9cmI7bC5MYXRoZUdlb21ldHJ5PVhjO2wuTGF0aGVCdWZmZXJHZW9tZXRyeT1jYztsLlNoYXBlR2VvbWV0cnk9eGI7bC5TaGFwZUJ1ZmZlckdlb21ldHJ5PXliO2wuRXh0cnVkZUdlb21ldHJ5PWliO2wuRXh0cnVkZUJ1ZmZlckdlb21ldHJ5PUxhO2wuRWRnZXNHZW9tZXRyeT1kYztsLkNvbmVHZW9tZXRyeT1ZYztsLkNvbmVCdWZmZXJHZW9tZXRyeT1cbiAgICBaYztsLkN5bGluZGVyR2VvbWV0cnk9emI7bC5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5PWFiO2wuQ2lyY2xlR2VvbWV0cnk9JGM7bC5DaXJjbGVCdWZmZXJHZW9tZXRyeT1lYztsLkJveEdlb21ldHJ5PU1iO2wuQm94QnVmZmVyR2VvbWV0cnk9cWI7bC5TaGFkb3dNYXRlcmlhbD1mYztsLlNwcml0ZU1hdGVyaWFsPWhiO2wuUmF3U2hhZGVyTWF0ZXJpYWw9Z2M7bC5TaGFkZXJNYXRlcmlhbD1GYTtsLlBvaW50c01hdGVyaWFsPUthO2wuTWVzaFBoeXNpY2FsTWF0ZXJpYWw9QWI7bC5NZXNoU3RhbmRhcmRNYXRlcmlhbD1VYTtsLk1lc2hQaG9uZ01hdGVyaWFsPU1hO2wuTWVzaFRvb25NYXRlcmlhbD1CYjtsLk1lc2hOb3JtYWxNYXRlcmlhbD1DYjtsLk1lc2hMYW1iZXJ0TWF0ZXJpYWw9RGI7bC5NZXNoRGVwdGhNYXRlcmlhbD1lYjtsLk1lc2hEaXN0YW5jZU1hdGVyaWFsPWZiO2wuTWVzaEJhc2ljTWF0ZXJpYWw9QWE7bC5MaW5lRGFzaGVkTWF0ZXJpYWw9RWI7bC5MaW5lQmFzaWNNYXRlcmlhbD1cbiAgICBXO2wuTWF0ZXJpYWw9UDtsLkZsb2F0NjRCdWZmZXJBdHRyaWJ1dGU9emM7bC5GbG9hdDMyQnVmZmVyQXR0cmlidXRlPUI7bC5VaW50MzJCdWZmZXJBdHRyaWJ1dGU9cGI7bC5JbnQzMkJ1ZmZlckF0dHJpYnV0ZT15YztsLlVpbnQxNkJ1ZmZlckF0dHJpYnV0ZT1vYjtsLkludDE2QnVmZmVyQXR0cmlidXRlPXhjO2wuVWludDhDbGFtcGVkQnVmZmVyQXR0cmlidXRlPXdjO2wuVWludDhCdWZmZXJBdHRyaWJ1dGU9dmM7bC5JbnQ4QnVmZmVyQXR0cmlidXRlPXVjO2wuQnVmZmVyQXR0cmlidXRlPU07bC5BcmNDdXJ2ZT1oYztsLkNhdG11bGxSb21DdXJ2ZTM9Y2E7bC5DdWJpY0JlemllckN1cnZlPU9hO2wuQ3ViaWNCZXppZXJDdXJ2ZTM9VmE7bC5FbGxpcHNlQ3VydmU9QmE7bC5MaW5lQ3VydmU9eWE7bC5MaW5lQ3VydmUzPVBhO2wuUXVhZHJhdGljQmV6aWVyQ3VydmU9UWE7bC5RdWFkcmF0aWNCZXppZXJDdXJ2ZTM9V2E7bC5TcGxpbmVDdXJ2ZT1SYTtsLlJFVklTSU9OPVwiODlcIjtsLk1PVVNFPVxuICAgIHtMRUZUOjAsTUlERExFOjEsUklHSFQ6Mn07bC5DdWxsRmFjZU5vbmU9MDtsLkN1bGxGYWNlQmFjaz0xO2wuQ3VsbEZhY2VGcm9udD0yO2wuQ3VsbEZhY2VGcm9udEJhY2s9MztsLkZyb250RmFjZURpcmVjdGlvbkNXPTA7bC5Gcm9udEZhY2VEaXJlY3Rpb25DQ1c9MTtsLkJhc2ljU2hhZG93TWFwPTA7bC5QQ0ZTaGFkb3dNYXA9MTtsLlBDRlNvZnRTaGFkb3dNYXA9MjtsLkZyb250U2lkZT0wO2wuQmFja1NpZGU9MTtsLkRvdWJsZVNpZGU9MjtsLkZsYXRTaGFkaW5nPTE7bC5TbW9vdGhTaGFkaW5nPTI7bC5Ob0NvbG9ycz0wO2wuRmFjZUNvbG9ycz0xO2wuVmVydGV4Q29sb3JzPTI7bC5Ob0JsZW5kaW5nPTA7bC5Ob3JtYWxCbGVuZGluZz0xO2wuQWRkaXRpdmVCbGVuZGluZz0yO2wuU3VidHJhY3RpdmVCbGVuZGluZz0zO2wuTXVsdGlwbHlCbGVuZGluZz00O2wuQ3VzdG9tQmxlbmRpbmc9NTtsLkFkZEVxdWF0aW9uPTEwMDtsLlN1YnRyYWN0RXF1YXRpb249MTAxO2wuUmV2ZXJzZVN1YnRyYWN0RXF1YXRpb249XG4gICAgMTAyO2wuTWluRXF1YXRpb249MTAzO2wuTWF4RXF1YXRpb249MTA0O2wuWmVyb0ZhY3Rvcj0yMDA7bC5PbmVGYWN0b3I9MjAxO2wuU3JjQ29sb3JGYWN0b3I9MjAyO2wuT25lTWludXNTcmNDb2xvckZhY3Rvcj0yMDM7bC5TcmNBbHBoYUZhY3Rvcj0yMDQ7bC5PbmVNaW51c1NyY0FscGhhRmFjdG9yPTIwNTtsLkRzdEFscGhhRmFjdG9yPTIwNjtsLk9uZU1pbnVzRHN0QWxwaGFGYWN0b3I9MjA3O2wuRHN0Q29sb3JGYWN0b3I9MjA4O2wuT25lTWludXNEc3RDb2xvckZhY3Rvcj0yMDk7bC5TcmNBbHBoYVNhdHVyYXRlRmFjdG9yPTIxMDtsLk5ldmVyRGVwdGg9MDtsLkFsd2F5c0RlcHRoPTE7bC5MZXNzRGVwdGg9MjtsLkxlc3NFcXVhbERlcHRoPTM7bC5FcXVhbERlcHRoPTQ7bC5HcmVhdGVyRXF1YWxEZXB0aD01O2wuR3JlYXRlckRlcHRoPTY7bC5Ob3RFcXVhbERlcHRoPTc7bC5NdWx0aXBseU9wZXJhdGlvbj0wO2wuTWl4T3BlcmF0aW9uPTE7bC5BZGRPcGVyYXRpb249MjtsLk5vVG9uZU1hcHBpbmc9XG4gICAgMDtsLkxpbmVhclRvbmVNYXBwaW5nPTE7bC5SZWluaGFyZFRvbmVNYXBwaW5nPTI7bC5VbmNoYXJ0ZWQyVG9uZU1hcHBpbmc9MztsLkNpbmVvblRvbmVNYXBwaW5nPTQ7bC5VVk1hcHBpbmc9MzAwO2wuQ3ViZVJlZmxlY3Rpb25NYXBwaW5nPTMwMTtsLkN1YmVSZWZyYWN0aW9uTWFwcGluZz0zMDI7bC5FcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZz0zMDM7bC5FcXVpcmVjdGFuZ3VsYXJSZWZyYWN0aW9uTWFwcGluZz0zMDQ7bC5TcGhlcmljYWxSZWZsZWN0aW9uTWFwcGluZz0zMDU7bC5DdWJlVVZSZWZsZWN0aW9uTWFwcGluZz0zMDY7bC5DdWJlVVZSZWZyYWN0aW9uTWFwcGluZz0zMDc7bC5SZXBlYXRXcmFwcGluZz0xRTM7bC5DbGFtcFRvRWRnZVdyYXBwaW5nPTEwMDE7bC5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nPTEwMDI7bC5OZWFyZXN0RmlsdGVyPTEwMDM7bC5OZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcj0xMDA0O2wuTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcj0xMDA1O1xuICAgIGwuTGluZWFyRmlsdGVyPTEwMDY7bC5MaW5lYXJNaXBNYXBOZWFyZXN0RmlsdGVyPTEwMDc7bC5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI9MTAwODtsLlVuc2lnbmVkQnl0ZVR5cGU9MTAwOTtsLkJ5dGVUeXBlPTEwMTA7bC5TaG9ydFR5cGU9MTAxMTtsLlVuc2lnbmVkU2hvcnRUeXBlPTEwMTI7bC5JbnRUeXBlPTEwMTM7bC5VbnNpZ25lZEludFR5cGU9MTAxNDtsLkZsb2F0VHlwZT0xMDE1O2wuSGFsZkZsb2F0VHlwZT0xMDE2O2wuVW5zaWduZWRTaG9ydDQ0NDRUeXBlPTEwMTc7bC5VbnNpZ25lZFNob3J0NTU1MVR5cGU9MTAxODtsLlVuc2lnbmVkU2hvcnQ1NjVUeXBlPTEwMTk7bC5VbnNpZ25lZEludDI0OFR5cGU9MTAyMDtsLkFscGhhRm9ybWF0PTEwMjE7bC5SR0JGb3JtYXQ9MTAyMjtsLlJHQkFGb3JtYXQ9MTAyMztsLkx1bWluYW5jZUZvcm1hdD0xMDI0O2wuTHVtaW5hbmNlQWxwaGFGb3JtYXQ9MTAyNTtsLlJHQkVGb3JtYXQ9MTAyMztsLkRlcHRoRm9ybWF0PTEwMjY7bC5EZXB0aFN0ZW5jaWxGb3JtYXQ9XG4gICAgMTAyNztsLlJHQl9TM1RDX0RYVDFfRm9ybWF0PTIwMDE7bC5SR0JBX1MzVENfRFhUMV9Gb3JtYXQ9MjAwMjtsLlJHQkFfUzNUQ19EWFQzX0Zvcm1hdD0yMDAzO2wuUkdCQV9TM1RDX0RYVDVfRm9ybWF0PTIwMDQ7bC5SR0JfUFZSVENfNEJQUFYxX0Zvcm1hdD0yMTAwO2wuUkdCX1BWUlRDXzJCUFBWMV9Gb3JtYXQ9MjEwMTtsLlJHQkFfUFZSVENfNEJQUFYxX0Zvcm1hdD0yMTAyO2wuUkdCQV9QVlJUQ18yQlBQVjFfRm9ybWF0PTIxMDM7bC5SR0JfRVRDMV9Gb3JtYXQ9MjE1MTtsLkxvb3BPbmNlPTIyMDA7bC5Mb29wUmVwZWF0PTIyMDE7bC5Mb29wUGluZ1Bvbmc9MjIwMjtsLkludGVycG9sYXRlRGlzY3JldGU9MjMwMDtsLkludGVycG9sYXRlTGluZWFyPTIzMDE7bC5JbnRlcnBvbGF0ZVNtb290aD0yMzAyO2wuWmVyb0N1cnZhdHVyZUVuZGluZz0yNDAwO2wuWmVyb1Nsb3BlRW5kaW5nPTI0MDE7bC5XcmFwQXJvdW5kRW5kaW5nPTI0MDI7bC5UcmlhbmdsZXNEcmF3TW9kZT0wO2wuVHJpYW5nbGVTdHJpcERyYXdNb2RlPVxuICAgIDE7bC5UcmlhbmdsZUZhbkRyYXdNb2RlPTI7bC5MaW5lYXJFbmNvZGluZz0zRTM7bC5zUkdCRW5jb2Rpbmc9MzAwMTtsLkdhbW1hRW5jb2Rpbmc9MzAwNztsLlJHQkVFbmNvZGluZz0zMDAyO2wuTG9nTHV2RW5jb2Rpbmc9MzAwMztsLlJHQk03RW5jb2Rpbmc9MzAwNDtsLlJHQk0xNkVuY29kaW5nPTMwMDU7bC5SR0JERW5jb2Rpbmc9MzAwNjtsLkJhc2ljRGVwdGhQYWNraW5nPTMyMDA7bC5SR0JBRGVwdGhQYWNraW5nPTMyMDE7bC5DdWJlR2VvbWV0cnk9TWI7bC5GYWNlND1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXtjb25zb2xlLndhcm4oXCJUSFJFRS5GYWNlNCBoYXMgYmVlbiByZW1vdmVkLiBBIFRIUkVFLkZhY2UzIHdpbGwgYmUgY3JlYXRlZCBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IFlhKGEsYixjLGUsZixnKX07bC5MaW5lU3RyaXA9MDtsLkxpbmVQaWVjZXM9MTtsLk1lc2hGYWNlTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWVzaEZhY2VNYXRlcmlhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgYW4gQXJyYXkgaW5zdGVhZC5cIik7XG4gICAgcmV0dXJuIGF9O2wuTXVsdGlNYXRlcmlhbD1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1bXSk7Y29uc29sZS53YXJuKFwiVEhSRUUuTXVsdGlNYXRlcmlhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgYW4gQXJyYXkgaW5zdGVhZC5cIik7YS5pc011bHRpTWF0ZXJpYWw9ITA7YS5tYXRlcmlhbHM9YTthLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIGEuc2xpY2UoKX07cmV0dXJuIGF9O2wuUG9pbnRDbG91ZD1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlBvaW50Q2xvdWQgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHMuXCIpO3JldHVybiBuZXcgUmIoYSxiKX07bC5QYXJ0aWNsZT1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZSBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlNwcml0ZS5cIik7cmV0dXJuIG5ldyBDYyhhKX07bC5QYXJ0aWNsZVN5c3RlbT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlBhcnRpY2xlU3lzdGVtIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzLlwiKTtcbiAgICByZXR1cm4gbmV3IFJiKGEsYil9O2wuUG9pbnRDbG91ZE1hdGVyaWFsPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlBvaW50Q2xvdWRNYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLlwiKTtyZXR1cm4gbmV3IEthKGEpfTtsLlBhcnRpY2xlQmFzaWNNYXRlcmlhbD1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZUJhc2ljTWF0ZXJpYWwgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHNNYXRlcmlhbC5cIik7cmV0dXJuIG5ldyBLYShhKX07bC5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWwgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHNNYXRlcmlhbC5cIik7cmV0dXJuIG5ldyBLYShhKX07bC5WZXJ0ZXg9ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlcnRleCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuVmVjdG9yMyBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm4gbmV3IHAoYSxiLGMpfTtsLkR5bmFtaWNCdWZmZXJBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5EeW5hbWljQnVmZmVyQXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCkuc2V0RHluYW1pYyggdHJ1ZSApIGluc3RlYWQuXCIpO3JldHVybihuZXcgTShhLGIpKS5zZXREeW5hbWljKCEwKX07bC5JbnQ4QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuSW50OEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkludDhCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IHVjKGEsYil9O2wuVWludDhBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5VaW50OEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLlVpbnQ4QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyB2YyhhLFxuICAgIGIpfTtsLlVpbnQ4Q2xhbXBlZEF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlVpbnQ4Q2xhbXBlZEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLlVpbnQ4Q2xhbXBlZEJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgd2MoYSxiKX07bC5JbnQxNkF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLkludDE2QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuSW50MTZCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IHhjKGEsYil9O2wuVWludDE2QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuVWludDE2QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDE2QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBvYihhLGIpfTtsLkludDMyQXR0cmlidXRlPVxuICAgIGZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuSW50MzJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5JbnQzMkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgeWMoYSxiKX07bC5VaW50MzJBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5VaW50MzJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5VaW50MzJCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IHBiKGEsYil9O2wuRmxvYXQzMkF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBCKGEsYil9O2wuRmxvYXQ2NEF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLkZsb2F0NjRBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5GbG9hdDY0QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7XG4gICAgcmV0dXJuIG5ldyB6YyhhLGIpfTtsLkNsb3NlZFNwbGluZUN1cnZlMz12ZjtsLlNwbGluZUN1cnZlMz13ZjtsLlNwbGluZT1EZTtsLkF4aXNIZWxwZXI9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQXhpc0hlbHBlciBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLkF4ZXNIZWxwZXIuXCIpO3JldHVybiBuZXcgbmQoYSl9O2wuQm91bmRpbmdCb3hIZWxwZXI9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3VuZGluZ0JveEhlbHBlciBoYXMgYmVlbiBkZXByZWNhdGVkLiBDcmVhdGluZyBhIFRIUkVFLkJveEhlbHBlciBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IEdiKGEsYil9O2wuRWRnZXNIZWxwZXI9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5FZGdlc0hlbHBlciBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuRWRnZXNHZW9tZXRyeSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IFgobmV3IGRjKGEuZ2VvbWV0cnkpLG5ldyBXKHtjb2xvcjp2b2lkIDAhPT1cbiAgICBiP2I6MTY3NzcyMTV9KSl9O2wuV2lyZWZyYW1lSGVscGVyPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuV2lyZWZyYW1lSGVscGVyIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5XaXJlZnJhbWVHZW9tZXRyeSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IFgobmV3IFRiKGEuZ2VvbWV0cnkpLG5ldyBXKHtjb2xvcjp2b2lkIDAhPT1iP2I6MTY3NzcyMTV9KSl9O2wuWEhSTG9hZGVyPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlhIUkxvYWRlciBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLkZpbGVMb2FkZXIuXCIpO3JldHVybiBuZXcgTmEoYSl9O2wuQmluYXJ5VGV4dHVyZUxvYWRlcj1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CaW5hcnlUZXh0dXJlTG9hZGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuRGF0YVRleHR1cmVMb2FkZXIuXCIpO3JldHVybiBuZXcgaWUoYSl9O2wuR2VvbWV0cnlVdGlscz17bWVyZ2U6ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUud2FybihcIlRIUkVFLkdlb21ldHJ5VXRpbHM6IC5tZXJnZSgpIGhhcyBiZWVuIG1vdmVkIHRvIEdlb21ldHJ5LiBVc2UgZ2VvbWV0cnkubWVyZ2UoIGdlb21ldHJ5MiwgbWF0cml4LCBtYXRlcmlhbEluZGV4T2Zmc2V0ICkgaW5zdGVhZC5cIik7XG4gICAgaWYoYi5pc01lc2gpe2IubWF0cml4QXV0b1VwZGF0ZSYmYi51cGRhdGVNYXRyaXgoKTt2YXIgZD1iLm1hdHJpeDtiPWIuZ2VvbWV0cnl9YS5tZXJnZShiLGQsYyl9LGNlbnRlcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5HZW9tZXRyeVV0aWxzOiAuY2VudGVyKCkgaGFzIGJlZW4gbW92ZWQgdG8gR2VvbWV0cnkuIFVzZSBnZW9tZXRyeS5jZW50ZXIoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5jZW50ZXIoKX19O2wuSW1hZ2VVdGlscz17Y3Jvc3NPcmlnaW46dm9pZCAwLGxvYWRUZXh0dXJlOmZ1bmN0aW9uKGEsYixjLGQpe2NvbnNvbGUud2FybihcIlRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLlRleHR1cmVMb2FkZXIoKSBpbnN0ZWFkLlwiKTt2YXIgZT1uZXcgQWQ7ZS5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTthPWUubG9hZChhLGMsdm9pZCAwLGQpO2ImJihhLm1hcHBpbmc9Yik7cmV0dXJuIGF9LFxuICAgIGxvYWRUZXh0dXJlQ3ViZTpmdW5jdGlvbihhLGIsYyxkKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlQ3ViZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuQ3ViZVRleHR1cmVMb2FkZXIoKSBpbnN0ZWFkLlwiKTt2YXIgZT1uZXcgamU7ZS5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTthPWUubG9hZChhLGMsdm9pZCAwLGQpO2ImJihhLm1hcHBpbmc9Yik7cmV0dXJuIGF9LGxvYWRDb21wcmVzc2VkVGV4dHVyZTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRDb21wcmVzc2VkVGV4dHVyZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuRERTTG9hZGVyIGluc3RlYWQuXCIpfSxsb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlQ3ViZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuRERTTG9hZGVyIGluc3RlYWQuXCIpfX07XG4gICAgbC5Qcm9qZWN0b3I9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvamVjdG9yIGhhcyBiZWVuIG1vdmVkIHRvIC9leGFtcGxlcy9qcy9yZW5kZXJlcnMvUHJvamVjdG9yLmpzLlwiKTt0aGlzLnByb2plY3RWZWN0b3I9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Qcm9qZWN0b3I6IC5wcm9qZWN0VmVjdG9yKCkgaXMgbm93IHZlY3Rvci5wcm9qZWN0KCkuXCIpO2EucHJvamVjdChiKX07dGhpcy51bnByb2plY3RWZWN0b3I9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Qcm9qZWN0b3I6IC51bnByb2plY3RWZWN0b3IoKSBpcyBub3cgdmVjdG9yLnVucHJvamVjdCgpLlwiKTthLnVucHJvamVjdChiKX07dGhpcy5waWNraW5nUmF5PWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb2plY3RvcjogLnBpY2tpbmdSYXkoKSBpcyBub3cgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEoKS5cIil9fTtsLkNhbnZhc1JlbmRlcmVyPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkNhbnZhc1JlbmRlcmVyIGhhcyBiZWVuIG1vdmVkIHRvIC9leGFtcGxlcy9qcy9yZW5kZXJlcnMvQ2FudmFzUmVuZGVyZXIuanNcIik7XG4gICAgdGhpcy5kb21FbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImNhbnZhc1wiKTt0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7fTt0aGlzLnJlbmRlcj1mdW5jdGlvbigpe307dGhpcy5zZXRDbGVhckNvbG9yPWZ1bmN0aW9uKCl7fTt0aGlzLnNldFNpemU9ZnVuY3Rpb24oKXt9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkobCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0pOyIsInJlcXVpcmUgJy4uL2xpYi9Db2xsYWRhTG9hZGVyLmpzJ1xuXG5jbGFzcyBleHBvcnRzLkNvbGxhZGFcbiAgICBjb25zdHJ1Y3RvcjogKHByb3BlcnRpZXMsIGNiKSAtPlxuICAgICAgICBAbW9kZWxMb2FkZXIgPSBuZXcgVEhSRUUuQ29sbGFkYUxvYWRlclxuICAgICAgICBAbW9kZWxMb2FkZXIubG9hZCBwcm9wZXJ0aWVzLnBhdGgsIChjb2xsYWRhKSA9PlxuICAgICAgICAgICAgY29sbGFkYS5zY2VuZS5hbmltYXRpb25zID0gY29sbGFkYS5hbmltYXRpb25zXG4gICAgICAgICAgICBjYiBjb2xsYWRhLnNjZW5lXG4gICAgICAgICwgbnVsbCwgKGUpIC0+IGNvbnNvbGUubG9nIGUiLCJyZXF1aXJlICcuLi9saWIvRkJYTG9hZGVyLmpzJ1xud2luZG93LlpsaWIgPSByZXF1aXJlKCcuLi9saWIvaW5mbGF0ZS5taW4uanMnKS5abGliXG5cbmNsYXNzIGV4cG9ydHMuRkJYXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzLCBjYikgLT5cbiAgICAgICAgQG1vZGVsTG9hZGVyID0gbmV3IFRIUkVFLkZCWExvYWRlclxuICAgICAgICBAbW9kZWxMb2FkZXIubG9hZCBwcm9wZXJ0aWVzLnBhdGgsIChtb2RlbCkgPT5cbiAgICAgICAgICAgIGNiIG1vZGVsXG4gICAgICAgICwgbnVsbCwgKGUpIC0+IGNvbnNvbGUubG9nIGUiLCJyZXF1aXJlICcuLi9saWIvR0xURkxvYWRlci5qcydcblxuY2xhc3MgZXhwb3J0cy5HTFRGXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzLCBjYikgLT5cbiAgICAgICAgQG1vZGVsTG9hZGVyID0gbmV3IFRIUkVFLkdMVEZMb2FkZXJcbiAgICAgICAgQG1vZGVsTG9hZGVyLmxvYWQgcHJvcGVydGllcy5wYXRoLCAobW9kZWwpIC0+XG4gICAgICAgICAgICBtb2RlbC5zY2VuZS5hbmltYXRpb25zID0gbW9kZWwuYW5pbWF0aW9uc1xuICAgICAgICAgICAgY2IgbW9kZWwuc2NlbmVcbiAgICAgICAgLCBudWxsLCAoZSkgLT4gY29uc29sZS5sb2cgZSIsImNsYXNzIGV4cG9ydHMuSlNPTk9iamVjdFxuICAgIGNvbnN0cnVjdG9yOiAocHJvcGVydGllcywgY2IpIC0+XG5cbiAgICAgICAgQHJlYWRKU09OIHByb3BlcnRpZXMucGF0aCwgKGpzb24pID0+IFxuICAgICAgICAgICAgbWV0YWRhdGEgPSBKU09OLnBhcnNlKGpzb24pLm1ldGFkYXRhXG5cbiAgICAgICAgICAgIGlmIG1ldGFkYXRhLnR5cGUgPT0gJ09iamVjdCcgdGhlbiBAbG9hZE9iamVjdCBwcm9wZXJ0aWVzLCBjYlxuICAgICAgICAgICAgZWxzZSBAbG9hZEdlb21ldHJ5IHByb3BlcnRpZXMsIGNiXG5cblxuICAgIGxvYWRPYmplY3Q6IChwcm9wZXJ0aWVzLCBjYikgLT5cbiAgICAgICAgQG1vZGVsTG9hZGVyID0gbmV3IFRIUkVFLk9iamVjdExvYWRlclxuICAgICAgICBAbW9kZWxMb2FkZXIubG9hZCBwcm9wZXJ0aWVzLnBhdGgsIChtb2RlbCkgPT5cbiAgICAgICAgICAgIGNiIG1vZGVsXG4gICAgICAgICwgbnVsbCwgKGUpIC0+IGNvbnNvbGUubG9nIGVcbiAgICBcbiAgICBsb2FkR2VvbWV0cnk6IChwcm9wZXJ0aWVzLCBjYikgLT5cbiAgICAgICAgQG1vZGVsTG9hZGVyID0gbmV3IFRIUkVFLkpTT05Mb2FkZXJcbiAgICAgICAgQG1vZGVsTG9hZGVyLmxvYWQgcHJvcGVydGllcy5wYXRoLCAoZ2VvbWV0cnksIG1hdGVyaWFscykgPT5cbiAgICAgICAgICAgIG1hdGVyaWFsID0gbWF0ZXJpYWxzWzBdXG4gICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5NZXNoIGdlb21ldHJ5LCBtYXRlcmlhbFxuICAgICAgICAgICAgbW9kZWwuYW5pbWF0aW9ucyA9IGdlb21ldHJ5LmFuaW1hdGlvbnNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2IgbW9kZWxcbiAgICAgICAgLCBudWxsLCAoZSkgLT4gY29uc29sZS5sb2cgZVxuXG4gICAgcmVhZEpTT046IChwYXRoLCBjYikgLT5cbiAgICAgICAgcmF3RmlsZSA9IG5ldyBYTUxIdHRwUmVxdWVzdFxuICAgICAgICByYXdGaWxlLm92ZXJyaWRlTWltZVR5cGUgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIHJhd0ZpbGUub3BlbiAnR0VUJywgcGF0aCwgdHJ1ZVxuICAgICAgICByYXdGaWxlLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpIC0+XG4gICAgICAgICAgICBpZiByYXdGaWxlLnJlYWR5U3RhdGUgPT0gNCAmJiByYXdGaWxlLnN0YXR1cyA9PSAyMDBcbiAgICAgICAgICAgICAgICBjYiByYXdGaWxlLnJlc3BvbnNlVGV4dFxuICAgICAgICByYXdGaWxlLnNlbmQgbnVsbCIsInJlcXVpcmUgJy4uL2xpYi9PQkpMb2FkZXIuanMnXG5yZXF1aXJlICcuLi9saWIvTVRMTG9hZGVyLmpzJ1xuXG5jbGFzcyBleHBvcnRzLk9CSlxuICAgIGNvbnN0cnVjdG9yOiAocHJvcGVydGllcywgY2IpIC0+XG4gICAgICAgIHBhdGggPSBwcm9wZXJ0aWVzLnBhdGhcbiAgICAgICAgQGRpclBhdGggPSBwYXRoLnN1YnN0cmluZyAwLCBwYXRoLmluZGV4T2YocGF0aC5zcGxpdCgnLycpLnBvcCgpKVxuICAgICAgICBAbW9kZWxQYXRoID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpXG4gICAgICAgIEBtYXRlcmlhbFBhdGggPSBAbW9kZWxQYXRoLnJlcGxhY2UgJy5vYmonLCAnLm10bCdcbiAgICAgICAgXG4gICAgICAgIEBtYXRlcmlhbExvYWRlciA9IG5ldyBUSFJFRS5NVExMb2FkZXJcbiAgICAgICAgQG1vZGVsTG9hZGVyID0gbmV3IFRIUkVFLk9CSkxvYWRlclxuICAgICAgICBcbiAgICAgICAgQG1hdGVyaWFsTG9hZGVyLnNldFBhdGggQGRpclBhdGhcbiAgICAgICAgQG1hdGVyaWFsTG9hZGVyLmxvYWQgQG1hdGVyaWFsUGF0aCwgKG1hdGVyaWFscykgPT5cbiAgICAgICAgICAgIG1hdGVyaWFscy5wcmVsb2FkKClcblxuICAgICAgICAgICAgQG1vZGVsTG9hZGVyLnNldE1hdGVyaWFscyBtYXRlcmlhbHNcbiAgICAgICAgICAgIEBtb2RlbExvYWRlci5zZXRQYXRoIEBkaXJQYXRoXG4gICAgICAgICAgICBAbW9kZWxMb2FkZXIubG9hZCBAbW9kZWxQYXRoLCAobW9kZWwpID0+XG4gICAgICAgICAgICAgICAgY2IgbW9kZWxcbiIsInJlcXVpcmUgJy4uL2xpYi9URFNMb2FkZXIuanMnXG5cbmNsYXNzIGV4cG9ydHMuVERTXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzLCBjYikgLT5cbiAgICAgICAgQG1vZGVsTG9hZGVyID0gbmV3IFRIUkVFLlREU0xvYWRlclxuICAgICAgICBAbW9kZWxMb2FkZXIuc2V0UGF0aCBwcm9wZXJ0aWVzLnRleHR1cmVQYXRoXG4gICAgICAgIEBtb2RlbExvYWRlci5sb2FkIHByb3BlcnRpZXMucGF0aCwgKG1vZGVsKSA9PlxuICAgICAgICAgICAgY2IgbW9kZWxcbiAgICAgICAgLCBudWxsLCAoZSkgLT4gY29uc29sZS5sb2cgZSIsIndpbmRvdy5USFJFRSA9IHJlcXVpcmUgJy4vZm9ybS9saWIvdGhyZWUubWluLmpzJ1xucmVxdWlyZSAnLi9mb3JtL0dBLmNvZmZlZSdcblxue1NjZW5lfSA9IHJlcXVpcmUgJy4vZm9ybS9TY2VuZS5jb2ZmZWUnXG57U3R1ZGlvfSA9IHJlcXVpcmUgJy4vZm9ybS9TdHVkaW8uY29mZmVlJ1xue01vZGVsfSA9IHJlcXVpcmUgJy4vZm9ybS9Nb2RlbC5jb2ZmZWUnXG57TWVzaH0gPSByZXF1aXJlICcuL2Zvcm0vTWVzaC5jb2ZmZWUnXG57TGlnaHR9ID0gcmVxdWlyZSAnLi9mb3JtL0xpZ2h0LmNvZmZlZSdcbntQYXJ0aWNsZVN5c3RlbX0gPSByZXF1aXJlICcuL2Zvcm0vUGFydGljbGVTeXN0ZW0uY29mZmVlJ1xuXG5tb2R1bGUuZXhwb3J0cyA9XG4gICAgU2NlbmU6IFNjZW5lXG4gICAgU3R1ZGlvOiBTdHVkaW9cbiAgICBNb2RlbDogTW9kZWxcbiAgICBNZXNoOiBNZXNoXG4gICAgTGlnaHQ6IExpZ2h0XG4gICAgUGFydGljbGVTeXN0ZW06IFBhcnRpY2xlU3lzdGVtXG5cbiAgICAjIE1BVEVSSUFMU1xuXG4gICAgTWVzaFBob25nTWF0ZXJpYWw6IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsXG4gICAgTWVzaE5vcm1hbE1hdGVyaWFsOiBUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWxcbiAgICBNZXNoU3RhbmRhcmRNYXRlcmlhbDogVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWxcbiAgICBMaW5lQmFzaWNNYXRlcmlhbDogVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWxcbiAgICBMaW5lRGFzaGVkTWF0ZXJpYWw6IFRIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbFxuICAgIE1lc2hCYXNpY01hdGVyaWFsOiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbFxuICAgIE1lc2hEZXB0aE1hdGVyaWFsOiBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbFxuICAgIE1lc2hMYW1iZXJ0TWF0ZXJpYWw6IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWxcbiAgICBNZXNoUGh5c2ljYWxNYXRlcmlhbDogVEhSRUUuTWVzaFBoeXNpY2FsTWF0ZXJpYWxcbiAgICBNZXNoVG9vbk1hdGVyaWFsOiBUSFJFRS5NZXNoVG9vbk1hdGVyaWFsXG4gICAgUG9pbnRzTWF0ZXJpYWw6IFRIUkVFLlBvaW50c01hdGVyaWFsXG4gICAgUmF3U2hhZGVyTWF0ZXJpYWw6IFRIUkVFLlJhd1NoYWRlck1hdGVyaWFsXG4gICAgU2hhZGVyTWF0ZXJpYWw6IFRIUkVFLlNoYWRlck1hdGVyaWFsXG4gICAgU2hhZG93TWF0ZXJpYWw6IFRIUkVFLlNoYWRvd01hdGVyaWFsXG4gICAgU3ByaXRlTWF0ZXJpYWw6IFRIUkVFLlNwcml0ZU1hdGVyaWFsIiwiZnVuY3Rpb24gTWluaW1hcCAoIG9wdGlvbnMgKVxue1xuXHRtYXBib3hnbC51dGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG5cblx0dGhpcy5fdGlja2luZyA9IGZhbHNlO1xuXHR0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQgPSBudWxsO1xuXHR0aGlzLl9wYXJlbnRNYXAgPSBudWxsO1xuXHR0aGlzLl9pc0RyYWdnaW5nID0gZmFsc2U7XG5cdHRoaXMuX2lzQ3Vyc29yT3ZlckZlYXR1cmUgPSBmYWxzZTtcblx0dGhpcy5fcHJldmlvdXNQb2ludCA9IFswLCAwXTtcblx0dGhpcy5fY3VycmVudFBvaW50ID0gWzAsIDBdO1xuXHR0aGlzLl90cmFja2luZ1JlY3RDb29yZGluYXRlcyA9IFtbW10sIFtdLCBbXSwgW10sIFtdXV07XG59XG5cbk1pbmltYXAucHJvdG90eXBlID0gbWFwYm94Z2wudXRpbC5pbmhlcml0KG1hcGJveGdsLkNvbnRyb2wsIHtcblxuXHRvcHRpb25zOiB7XG5cdFx0aWQ6IFwibWFwYm94Z2wtbWluaW1hcFwiLFxuXHRcdHBvc2l0aW9uOiBcImJvdHRvbS1sZWZ0XCIsXG5cdFx0d2lkdGg6IFwiMTYwcHhcIixcblx0XHRoZWlnaHQ6IFwiOTBweFwiLFxuXHRcdHN0eWxlOiBcIm1hcGJveDovL3N0eWxlcy9tYXBib3gvc3RyZWV0cy12OFwiLFxuXHRcdGNlbnRlcjogWy03My45NDY1NjgxMjk1Mjg5NywgNDAuNzI5MTIzNTE0MDYxMDZdLFxuXHRcdHpvb206IDAsXG5cblx0XHQvLyBzaG91bGQgYmUgYSBmdW5jdGlvbjsgd2lsbCBiZSBib3VuZCB0byBNaW5pbWFwXG5cdFx0em9vbUFkanVzdDogbnVsbCxcblxuXHRcdC8vIGlmIHBhcmVudCBtYXAgem9vbSA+PSAxOCBhbmQgbWluaW1hcCB6b29tID49IDE0LCBzZXQgbWluaW1hcCB6b29tIHRvIDE2XG5cdFx0em9vbUxldmVsczogW1xuXHRcdFx0WzE4LCAxNCwgMTZdLFxuXHRcdFx0WzE2LCAxMiwgMTRdLFxuXHRcdFx0WzE0LCAxMCwgMTJdLFxuXHRcdFx0WzEyLCA4LCAxMF0sXG5cdFx0XHRbMTAsIDYsIDhdXG5cdFx0XSxcblxuXHRcdGJvdW5kczogXCJwYXJlbnRcIixcblxuXHRcdGxpbmVDb2xvcjogXCIjRkY3OTAwXCIsXG5cdFx0bGluZVdpZHRoOiAzLFxuXHRcdGxpbmVPcGFjaXR5OiAxLFxuXG5cdFx0ZmlsbENvbG9yOiBcIiMwMDAwMDBcIixcblx0XHRmaWxsT3BhY2l0eTogMC4yNSxcblxuXHRcdGRyYWdQYW46IGZhbHNlLFxuXHRcdHNjcm9sbFpvb206IGZhbHNlLFxuXHRcdGJveFpvb206IGZhbHNlLFxuXHRcdGRyYWdSb3RhdGU6IGZhbHNlLFxuXHRcdGtleWJvYXJkOiBmYWxzZSxcblx0XHRkb3VibGVDbGlja1pvb206IGZhbHNlLFxuXHRcdHRvdWNoWm9vbVJvdGF0ZTogZmFsc2Vcblx0fSxcblxuXHRvbkFkZDogZnVuY3Rpb24gKCBwYXJlbnRNYXAgKVxuXHR7XG5cdFx0dGhpcy5fcGFyZW50TWFwID0gcGFyZW50TWFwO1xuXG5cdFx0dmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cdFx0dmFyIGNvbnRhaW5lciA9IHRoaXMuX2NvbnRhaW5lciA9IHRoaXMuX2NyZWF0ZUNvbnRhaW5lcihwYXJlbnRNYXApO1xuXHRcdHZhciBtaW5pTWFwID0gdGhpcy5fbWluaU1hcCA9IG5ldyBtYXBib3hnbC5NYXAoe1xuXHRcdFx0YXR0cmlidXRpb25Db250cm9sOiBmYWxzZSxcblx0XHRcdGNvbnRhaW5lcjogY29udGFpbmVyLFxuXHRcdFx0c3R5bGU6IG9wdHMuc3R5bGUsXG5cdFx0XHR6b29tOiBvcHRzLnpvb20sXG5cdFx0XHRjZW50ZXI6IG9wdHMuY2VudGVyXG5cdFx0fSk7XG5cblx0XHRtaW5pTWFwLm9uKFwibG9hZFwiLCB0aGlzLl9sb2FkLmJpbmQodGhpcykpO1xuXG5cdFx0cmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcblx0fSxcblxuXHRfbG9hZDogZnVuY3Rpb24gKClcblx0e1xuXHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuXHRcdHZhciBwYXJlbnRNYXAgPSB0aGlzLl9wYXJlbnRNYXA7XG5cdFx0dmFyIG1pbmlNYXAgPSB0aGlzLl9taW5pTWFwO1xuXHRcdHZhciBpbnRlcmFjdGlvbnMgPSBbXG5cdFx0XHRcImRyYWdQYW5cIiwgXCJzY3JvbGxab29tXCIsIFwiYm94Wm9vbVwiLCBcImRyYWdSb3RhdGVcIixcblx0XHRcdFwia2V5Ym9hcmRcIiwgXCJkb3VibGVDbGlja1pvb21cIiwgXCJ0b3VjaFpvb21Sb3RhdGVcIlxuXHRcdF07XG5cblx0XHRpbnRlcmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihpKXtcblx0XHRcdGlmKCBvcHRzW2ldICE9PSB0cnVlICkge1xuXHRcdFx0XHRtaW5pTWFwW2ldLmRpc2FibGUoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmKCB0eXBlb2Ygb3B0cy56b29tQWRqdXN0ID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnMuem9vbUFkanVzdCA9IG9wdHMuem9vbUFkanVzdC5iaW5kKHRoaXMpO1xuXHRcdH0gZWxzZSBpZiggb3B0cy56b29tQWRqdXN0ID09PSBudWxsICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnpvb21BZGp1c3QgPSB0aGlzLl96b29tQWRqdXN0LmJpbmQodGhpcyk7XG5cdFx0fVxuXG5cdFx0aWYoIG9wdHMuYm91bmRzID09PSBcInBhcmVudFwiICkge1xuXHRcdFx0b3B0cy5ib3VuZHMgPSBwYXJlbnRNYXAuZ2V0Qm91bmRzKCk7XG5cdFx0fVxuXG5cdFx0aWYoIHR5cGVvZiBvcHRzLmJvdW5kcyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdG1pbmlNYXAuZml0Qm91bmRzKG9wdHMuYm91bmRzLCB7ZHVyYXRpb246IDUwfSk7XG5cdFx0fVxuXG5cdFx0dmFyIGJvdW5kcyA9IG1pbmlNYXAuZ2V0Qm91bmRzKCk7XG5cblx0XHR0aGlzLl9jb252ZXJ0Qm91bmRzVG9Qb2ludHMoYm91bmRzKTtcblxuXHRcdG1pbmlNYXAuYWRkU291cmNlKFwidHJhY2tpbmdSZWN0XCIsIHtcblx0XHRcdFwidHlwZVwiOiBcImdlb2pzb25cIixcblx0XHRcdFwiZGF0YVwiOiB7XG5cdFx0XHRcdFwidHlwZVwiOiBcIkZlYXR1cmVcIixcblx0XHRcdFx0XCJwcm9wZXJ0aWVzXCI6IHtcblx0XHRcdFx0XHRcIm5hbWVcIjogXCJ0cmFja2luZ1JlY3RcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcImdlb21ldHJ5XCI6IHtcblx0XHRcdFx0XHRcInR5cGVcIjogXCJQb2x5Z29uXCIsXG5cdFx0XHRcdFx0XCJjb29yZGluYXRlc1wiOiB0aGlzLl90cmFja2luZ1JlY3RDb29yZGluYXRlc1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRtaW5pTWFwLmFkZExheWVyKHtcblx0XHRcdFwiaWRcIjogXCJ0cmFja2luZ1JlY3RPdXRsaW5lXCIsXG5cdFx0XHRcInR5cGVcIjogXCJsaW5lXCIsXG5cdFx0XHRcInNvdXJjZVwiOiBcInRyYWNraW5nUmVjdFwiLFxuXHRcdFx0XCJsYXlvdXRcIjoge30sXG5cdFx0XHRcInBhaW50XCI6IHtcblx0XHRcdFx0XCJsaW5lLWNvbG9yXCI6IG9wdHMubGluZUNvbG9yLFxuXHRcdFx0XHRcImxpbmUtd2lkdGhcIjogb3B0cy5saW5lV2lkdGgsXG5cdFx0XHRcdFwibGluZS1vcGFjaXR5XCI6IG9wdHMubGluZU9wYWNpdHlcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIG5lZWRlZCBmb3IgZHJhZ2dpbmdcblx0XHRtaW5pTWFwLmFkZExheWVyKHtcblx0XHRcdFwiaWRcIjogXCJ0cmFja2luZ1JlY3RGaWxsXCIsXG5cdFx0XHRcInR5cGVcIjogXCJmaWxsXCIsXG5cdFx0XHRcInNvdXJjZVwiOiBcInRyYWNraW5nUmVjdFwiLFxuXHRcdFx0XCJsYXlvdXRcIjoge30sXG5cdFx0XHRcInBhaW50XCI6IHtcblx0XHRcdFx0XCJmaWxsLWNvbG9yXCI6IG9wdHMuZmlsbENvbG9yLFxuXHRcdFx0XHRcImZpbGwtb3BhY2l0eVwiOiBvcHRzLmZpbGxPcGFjaXR5XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLl90cmFja2luZ1JlY3QgPSB0aGlzLl9taW5pTWFwLmdldFNvdXJjZShcInRyYWNraW5nUmVjdFwiKTtcblxuXHRcdHRoaXMuX3VwZGF0ZSgpO1xuXG5cdFx0cGFyZW50TWFwLm9uKFwibW92ZVwiLCB0aGlzLl91cGRhdGUuYmluZCh0aGlzKSk7XG5cblx0XHRtaW5pTWFwLm9uKFwibW91c2Vtb3ZlXCIsIHRoaXMuX21vdXNlTW92ZS5iaW5kKHRoaXMpKTtcblx0XHRtaW5pTWFwLm9uKFwibW91c2Vkb3duXCIsIHRoaXMuX21vdXNlRG93bi5iaW5kKHRoaXMpLCB0cnVlKTtcblx0XHRtaW5pTWFwLm9uKFwibW91c2V1cFwiLCB0aGlzLl9tb3VzZVVwLmJpbmQodGhpcykpO1xuXG5cdFx0bWluaU1hcC5vbihcInRvdWNobW92ZVwiLCB0aGlzLl9tb3VzZU1vdmUuYmluZCh0aGlzKSk7XG5cdFx0bWluaU1hcC5vbihcInRvdWNoc3RhcnRcIiwgdGhpcy5fbW91c2VEb3duLmJpbmQodGhpcyksIHRydWUpO1xuXHRcdG1pbmlNYXAub24oXCJ0b3VjaGVuZFwiLCB0aGlzLl9tb3VzZVVwLmJpbmQodGhpcykpO1xuXG5cdFx0dGhpcy5fbWluaU1hcENhbnZhcyA9IG1pbmlNYXAuZ2V0Q2FudmFzQ29udGFpbmVyKCk7XG5cdFx0dGhpcy5fbWluaU1hcENhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGhpcy5fcHJldmVudERlZmF1bHQpO1xuXHRcdHRoaXMuX21pbmlNYXBDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgdGhpcy5fcHJldmVudERlZmF1bHQpO1xuXHR9LFxuXG5cdF9tb3VzZURvd246IGZ1bmN0aW9uICggZSApXG5cdHtcblx0XHRpZiggdGhpcy5faXNDdXJzb3JPdmVyRmVhdHVyZSApXG5cdFx0e1xuXHRcdFx0dGhpcy5faXNEcmFnZ2luZyA9IHRydWU7XG5cdFx0XHR0aGlzLl9wcmV2aW91c1BvaW50ID0gdGhpcy5fY3VycmVudFBvaW50O1xuXHRcdFx0dGhpcy5fY3VycmVudFBvaW50ID0gW2UubG5nTGF0LmxuZywgZS5sbmdMYXQubGF0XTtcblx0XHR9XG5cdH0sXG5cblx0X21vdXNlTW92ZTogZnVuY3Rpb24gKGUpXG5cdHtcblx0XHR0aGlzLl90aWNraW5nID0gZmFsc2U7XG5cblx0XHR2YXIgbWluaU1hcCA9IHRoaXMuX21pbmlNYXA7XG5cdFx0dmFyIGZlYXR1cmVzID0gbWluaU1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZS5wb2ludCwge1xuXHRcdFx0bGF5ZXJzOiBbXCJ0cmFja2luZ1JlY3RGaWxsXCJdXG5cdFx0fSk7XG5cblx0XHQvLyBkb24ndCB1cGRhdGUgaWYgd2UncmUgc3RpbGwgaG92ZXJpbmcgdGhlIGFyZWFcblx0XHRpZiggISAodGhpcy5faXNDdXJzb3JPdmVyRmVhdHVyZSAmJiBmZWF0dXJlcy5sZW5ndGggPiAwKSApXG5cdFx0e1xuXHRcdFx0dGhpcy5faXNDdXJzb3JPdmVyRmVhdHVyZSA9IGZlYXR1cmVzLmxlbmd0aCA+IDA7XG5cdFx0XHR0aGlzLl9taW5pTWFwQ2FudmFzLnN0eWxlLmN1cnNvciA9IHRoaXMuX2lzQ3Vyc29yT3ZlckZlYXR1cmUgPyBcIm1vdmVcIiA6IFwiXCI7XG5cdFx0fVxuXG5cdFx0aWYoIHRoaXMuX2lzRHJhZ2dpbmcgKVxuXHRcdHtcblx0XHRcdHRoaXMuX3ByZXZpb3VzUG9pbnQgPSB0aGlzLl9jdXJyZW50UG9pbnQ7XG5cdFx0XHR0aGlzLl9jdXJyZW50UG9pbnQgPSBbZS5sbmdMYXQubG5nLCBlLmxuZ0xhdC5sYXRdO1xuXG5cdFx0XHR2YXIgb2Zmc2V0ID0gW1xuXHRcdFx0XHR0aGlzLl9wcmV2aW91c1BvaW50WzBdIC0gdGhpcy5fY3VycmVudFBvaW50WzBdLFxuXHRcdFx0XHR0aGlzLl9wcmV2aW91c1BvaW50WzFdIC0gdGhpcy5fY3VycmVudFBvaW50WzFdXG5cdFx0XHRdO1xuXG5cdFx0XHR2YXIgbmV3Qm91bmRzID0gdGhpcy5fbW92ZVRyYWNraW5nUmVjdChvZmZzZXQpO1xuXG5cdFx0XHR0aGlzLl9wYXJlbnRNYXAuZml0Qm91bmRzKG5ld0JvdW5kcywge1xuXHRcdFx0XHRkdXJhdGlvbjogODAsXG5cdFx0XHRcdG5vTW92ZVN0YXJ0OiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sXG5cblx0X21vdXNlVXA6IGZ1bmN0aW9uICgpXG5cdHtcblx0XHR0aGlzLl9pc0RyYWdnaW5nID0gZmFsc2U7XG5cdFx0dGhpcy5fdGlja2luZyA9IGZhbHNlO1xuXHR9LFxuXG5cdF9tb3ZlVHJhY2tpbmdSZWN0OiBmdW5jdGlvbiAoIG9mZnNldCApXG5cdHtcblx0XHR2YXIgc291cmNlID0gdGhpcy5fdHJhY2tpbmdSZWN0O1xuXHRcdHZhciBkYXRhID0gc291cmNlLl9kYXRhO1xuXHRcdHZhciBib3VuZHMgPSBkYXRhLnByb3BlcnRpZXMuYm91bmRzO1xuXG5cdFx0Ym91bmRzLl9uZS5sYXQgLT0gb2Zmc2V0WzFdO1xuXHRcdGJvdW5kcy5fbmUubG5nIC09IG9mZnNldFswXTtcblx0XHRib3VuZHMuX3N3LmxhdCAtPSBvZmZzZXRbMV07XG5cdFx0Ym91bmRzLl9zdy5sbmcgLT0gb2Zmc2V0WzBdO1xuXG5cdFx0dGhpcy5fY29udmVydEJvdW5kc1RvUG9pbnRzKGJvdW5kcyk7XG5cdFx0c291cmNlLnNldERhdGEoZGF0YSk7XG5cblx0XHRyZXR1cm4gYm91bmRzO1xuXHR9LFxuXG5cdF9zZXRUcmFja2luZ1JlY3RCb3VuZHM6IGZ1bmN0aW9uICggYm91bmRzIClcblx0e1xuXHRcdHZhciBzb3VyY2UgPSB0aGlzLl90cmFja2luZ1JlY3Q7XG5cdFx0dmFyIGRhdGEgPSBzb3VyY2UuX2RhdGE7XG5cblx0XHRkYXRhLnByb3BlcnRpZXMuYm91bmRzID0gYm91bmRzO1xuXHRcdHRoaXMuX2NvbnZlcnRCb3VuZHNUb1BvaW50cyhib3VuZHMpO1xuXHRcdHNvdXJjZS5zZXREYXRhKGRhdGEpO1xuXHR9LFxuXG5cdF9jb252ZXJ0Qm91bmRzVG9Qb2ludHM6IGZ1bmN0aW9uICggYm91bmRzIClcblx0e1xuXHRcdHZhciBuZSA9IGJvdW5kcy5fbmU7XG5cdFx0dmFyIHN3ID0gYm91bmRzLl9zdztcblx0XHR2YXIgdHJjID0gdGhpcy5fdHJhY2tpbmdSZWN0Q29vcmRpbmF0ZXM7XG5cblx0XHR0cmNbMF1bMF1bMF0gPSBuZS5sbmc7XG5cdFx0dHJjWzBdWzBdWzFdID0gbmUubGF0O1xuXHRcdHRyY1swXVsxXVswXSA9IHN3LmxuZztcblx0XHR0cmNbMF1bMV1bMV0gPSBuZS5sYXQ7XG5cdFx0dHJjWzBdWzJdWzBdID0gc3cubG5nO1xuXHRcdHRyY1swXVsyXVsxXSA9IHN3LmxhdDtcblx0XHR0cmNbMF1bM11bMF0gPSBuZS5sbmc7XG5cdFx0dHJjWzBdWzNdWzFdID0gc3cubGF0O1xuXHRcdHRyY1swXVs0XVswXSA9IG5lLmxuZztcblx0XHR0cmNbMF1bNF1bMV0gPSBuZS5sYXQ7XG5cdH0sXG5cblx0X3VwZGF0ZTogZnVuY3Rpb24gKCBlIClcblx0e1xuXHRcdGlmKCB0aGlzLl9pc0RyYWdnaW5nICApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgcGFyZW50Qm91bmRzID0gdGhpcy5fcGFyZW50TWFwLmdldEJvdW5kcygpO1xuXG5cdFx0dGhpcy5fc2V0VHJhY2tpbmdSZWN0Qm91bmRzKHBhcmVudEJvdW5kcyk7XG5cblx0XHRpZiggdHlwZW9mIHRoaXMub3B0aW9ucy56b29tQWRqdXN0ID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnMuem9vbUFkanVzdCgpO1xuXHRcdH1cblx0fSxcblxuXHRfem9vbUFkanVzdDogZnVuY3Rpb24gKClcblx0e1xuXHRcdHZhciBtaW5pTWFwID0gdGhpcy5fbWluaU1hcDtcblx0XHR2YXIgcGFyZW50TWFwID0gdGhpcy5fcGFyZW50TWFwO1xuXHRcdHZhciBtaW5pWm9vbSA9IHBhcnNlSW50KG1pbmlNYXAuZ2V0Wm9vbSgpLCAxMCk7XG5cdFx0dmFyIHBhcmVudFpvb20gPSBwYXJzZUludChwYXJlbnRNYXAuZ2V0Wm9vbSgpLCAxMCk7XG5cdFx0dmFyIGxldmVscyA9IHRoaXMub3B0aW9ucy56b29tTGV2ZWxzO1xuXHRcdHZhciBmb3VuZCA9IGZhbHNlO1xuXG5cdFx0bGV2ZWxzLmZvckVhY2goZnVuY3Rpb24oem9vbSlcblx0XHR7XG5cdFx0XHRpZiggISBmb3VuZCAmJiBwYXJlbnRab29tID49IHpvb21bMF0gKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiggbWluaVpvb20gPj0gem9vbVsxXSApIHtcblx0XHRcdFx0XHRtaW5pTWFwLnNldFpvb20oem9vbVsyXSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtaW5pTWFwLnNldENlbnRlcihwYXJlbnRNYXAuZ2V0Q2VudGVyKCkpO1xuXHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRpZiggISBmb3VuZCAmJiBtaW5pWm9vbSAhPT0gdGhpcy5vcHRpb25zLnpvb20gKVxuXHRcdHtcblx0XHRcdGlmKCB0eXBlb2YgdGhpcy5vcHRpb25zLmJvdW5kcyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdFx0bWluaU1hcC5maXRCb3VuZHModGhpcy5vcHRpb25zLmJvdW5kcywge2R1cmF0aW9uOiA1MH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRtaW5pTWFwLnNldFpvb20odGhpcy5vcHRpb25zLnpvb20pXG5cdFx0fVxuXHR9LFxuXG5cdF9jcmVhdGVDb250YWluZXI6IGZ1bmN0aW9uICggcGFyZW50TWFwIClcblx0e1xuXHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuXHRcdHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG5cdFx0Y29udGFpbmVyLmNsYXNzTmFtZSA9IFwibWFwYm94Z2wtY3RybC1taW5pbWFwXCI7XG5cdFx0Y29udGFpbmVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnd2lkdGg6ICcgKyBvcHRzLndpZHRoICsgJzsgaGVpZ2h0OiAnICsgb3B0cy5oZWlnaHQgKyAnOycpO1xuXHRcdGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgdGhpcy5fcHJldmVudERlZmF1bHQpO1xuXG5cdFx0cGFyZW50TWFwLmdldENvbnRhaW5lcigpLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cblx0XHRpZiggb3B0cy5pZCAhPT0gXCJcIiApIHtcblx0XHRcdGNvbnRhaW5lci5pZCA9IG9wdHMuaWQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbnRhaW5lcjtcblx0fSxcblxuXHRfcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uICggZSApIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdH1cbn0pO1xuXG5tYXBib3hnbC5NaW5pbWFwID0gTWluaW1hcDtcbiIsIiMgQWRkIHRoZSBmb2xsb3dpbmcgbGluZSB0byB5b3VyIHByb2plY3QgaW4gRnJhbWVyIFN0dWRpby4gXG4jIG15TW9kdWxlID0gcmVxdWlyZSBcIm15TW9kdWxlXCJcbiMgUmVmZXJlbmNlIHRoZSBjb250ZW50cyBieSBuYW1lLCBsaWtlIG15TW9kdWxlLm15RnVuY3Rpb24oKSBvciBteU1vZHVsZS5teVZhclxuXG5leHBvcnRzLm15VmFyID0gXCJteVZhcmlhYmxlXCJcblxuZXhwb3J0cy5teUZ1bmN0aW9uID0gLT5cblx0cHJpbnQgXCJteUZ1bmN0aW9uIGlzIHJ1bm5pbmdcIlxuXG5leHBvcnRzLm15QXJyYXkgPSBbMSwgMiwgM10iLCJleHBvcnRzLm1hcGJveGdsID0gcmVxdWlyZSBcIm1hcGJveC1nbFwiIl19
